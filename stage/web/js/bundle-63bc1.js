"use strict";(()=>{var Dk=Object.create;var cp=Object.defineProperty;var q1=Object.getOwnPropertyDescriptor;var kk=Object.getOwnPropertyNames;var Ak=Object.getPrototypeOf,Mk=Object.prototype.hasOwnProperty;var de=(a,t)=>()=>(a&&(t=a(a=0)),t);var Y1=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports),NI=(a,t)=>{for(var e in t)cp(a,e,{get:t[e],enumerable:!0})},Bk=(a,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of kk(t))!Mk.call(a,n)&&n!==e&&cp(a,n,{get:()=>t[n],enumerable:!(i=q1(t,n))||i.enumerable});return a};var $1=(a,t,e)=>(e=a!=null?Dk(Ak(a)):{},Bk(t||!a||!a.__esModule?cp(e,"default",{value:a,enumerable:!0}):e,a));var d=(a,t,e,i)=>{for(var n=i>1?void 0:i?q1(t,e):t,r=a.length-1,s;r>=0;r--)(s=a[r])&&(n=(i?s(t,e,n):s(n))||n);return i&&n&&cp(t,e,n),n};var Rk=(a,t,e)=>{if(!t.has(a))throw TypeError("Cannot "+e)};var Pt=(a,t,e)=>(Rk(a,t,"read from private field"),e?e.call(a):t.get(a)),Nt=(a,t,e)=>{if(t.has(a))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(a):t.set(a,e)};var Q1,J1=de(()=>{"use strict";Q1="1.0.8"});var yi,So=de(()=>{"use strict";J1();yi=class a extends Error{constructor(t,e={}){let i=e.cause instanceof a?e.cause.details:e.cause?.message?e.cause.message:e.details,n=e.cause instanceof a&&e.cause.docsPath||e.docsPath,r=[t||"An error occurred.","",...e.metaMessages?[...e.metaMessages,""]:[],...n?[`Docs: https://abitype.dev${n}`]:[],...i?[`Details: ${i}`]:[],`Version: abitype@${Q1}`].join(`
`);super(r),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),e.cause&&(this.cause=e.cause),this.details=i,this.docsPath=n,this.metaMessages=e.metaMessages,this.shortMessage=t}}});function La(a,t){return a.exec(t)?.groups}var HI,UI,Wp,hc=de(()=>{"use strict";HI=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,UI=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Wp=/^\(.+?\).*?$/});function jp(a){let t=a.type;if(Z1.test(a.type)&&"components"in a){t="(";let e=a.components.length;for(let n=0;n<e;n++){let r=a.components[n];t+=jp(r),n<e-1&&(t+=", ")}let i=La(Z1,a.type);return t+=`)${i?.array??""}`,jp({...a,type:t})}return"indexed"in a&&a.indexed&&(t=`${t} indexed`),a.name?`${t} ${a.name}`:t}var Z1,ew=de(()=>{"use strict";hc();Z1=/^tuple(?<array>(\[(\d*)\])*)$/});function Do(a){let t="",e=a.length;for(let i=0;i<e;i++){let n=a[i];t+=jp(n),i!==e-1&&(t+=", ")}return t}var tw=de(()=>{"use strict";ew()});function ks(a){return a.type==="function"?`function ${a.name}(${Do(a.inputs)})${a.stateMutability&&a.stateMutability!=="nonpayable"?` ${a.stateMutability}`:""}${a.outputs?.length?` returns (${Do(a.outputs)})`:""}`:a.type==="event"?`event ${a.name}(${Do(a.inputs)})`:a.type==="error"?`error ${a.name}(${Do(a.inputs)})`:a.type==="constructor"?`constructor(${Do(a.inputs)})${a.stateMutability==="payable"?" payable":""}`:a.type==="fallback"?`fallback() external${a.stateMutability==="payable"?" payable":""}`:"receive() external payable"}var iw=de(()=>{"use strict";tw()});function nw(a){return aw.test(a)}function rw(a){return La(aw,a)}function ow(a){return sw.test(a)}function lw(a){return La(sw,a)}function uw(a){return cw.test(a)}function pw(a){return La(cw,a)}function ko(a){return mw.test(a)}function hw(a){return La(mw,a)}function fw(a){return dw.test(a)}function yw(a){return La(dw,a)}function gw(a){return bw.test(a)}function _w(a){return La(bw,a)}function Lw(a){return Fk.test(a)}var aw,sw,cw,mw,dw,bw,Fk,vw,zp,dc=de(()=>{"use strict";hc();aw=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;sw=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;cw=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;mw=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;dw=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;bw=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;Fk=/^receive\(\) external payable$/;vw=new Set(["indexed"]),zp=new Set(["calldata","memory","storage"])});var Kp,qp,Yp,$p=de(()=>{"use strict";So();Kp=class extends yi{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}},qp=class extends yi{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},Yp=class extends yi{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}});var Xp,Qp,Jp,Zp,em,FI=de(()=>{"use strict";So();Xp=class extends yi{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},Qp=class extends yi{constructor({param:t,name:e}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${e}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},Jp=class extends yi{constructor({param:t,type:e,modifier:i}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${i}" not allowed${e?` in "${e}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},Zp=class extends yi{constructor({param:t,type:e,modifier:i}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${i}" not allowed${e?` in "${e}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${i}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},em=class extends yi{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}});var vn,tm,im,VI=de(()=>{"use strict";So();vn=class extends yi{constructor({signature:t,type:e}){super(`Invalid ${e} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},tm=class extends yi{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},im=class extends yi{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}});var am,xw=de(()=>{"use strict";So();am=class extends yi{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}});var nm,Iw=de(()=>{"use strict";So();nm=class extends yi{constructor({current:t,depth:e}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${e>0?"opening":"closing"} parentheses.`],details:`Depth "${e}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}});function Ew(a,t,e){let i="";if(e)for(let n of Object.entries(e)){if(!n)continue;let r="";for(let s of n[1])r+=`[${s.type}${s.name?`:${s.name}`:""}]`;i+=`(${n[0]}{${r}})`}return t?`${t}:${a}${i}`:a}var rm,ww=de(()=>{"use strict";rm=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]])});function fc(a,t={}){if(uw(a))return Vk(a,t);if(ow(a))return Gk(a,t);if(nw(a))return Wk(a,t);if(fw(a))return jk(a,t);if(gw(a))return zk(a);if(Lw(a))return{type:"receive",stateMutability:"payable"};throw new tm({signature:a})}function Vk(a,t={}){let e=pw(a);if(!e)throw new vn({signature:a,type:"function"});let i=Ka(e.parameters),n=[],r=i.length;for(let o=0;o<r;o++)n.push(kr(i[o],{modifiers:zp,structs:t,type:"function"}));let s=[];if(e.returns){let o=Ka(e.returns),l=o.length;for(let u=0;u<l;u++)s.push(kr(o[u],{modifiers:zp,structs:t,type:"function"}))}return{name:e.name,type:"function",stateMutability:e.stateMutability??"nonpayable",inputs:n,outputs:s}}function Gk(a,t={}){let e=lw(a);if(!e)throw new vn({signature:a,type:"event"});let i=Ka(e.parameters),n=[],r=i.length;for(let s=0;s<r;s++)n.push(kr(i[s],{modifiers:vw,structs:t,type:"event"}));return{name:e.name,type:"event",inputs:n}}function Wk(a,t={}){let e=rw(a);if(!e)throw new vn({signature:a,type:"error"});let i=Ka(e.parameters),n=[],r=i.length;for(let s=0;s<r;s++)n.push(kr(i[s],{structs:t,type:"error"}));return{name:e.name,type:"error",inputs:n}}function jk(a,t={}){let e=yw(a);if(!e)throw new vn({signature:a,type:"constructor"});let i=Ka(e.parameters),n=[],r=i.length;for(let s=0;s<r;s++)n.push(kr(i[s],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:e.stateMutability??"nonpayable",inputs:n}}function zk(a){let t=_w(a);if(!t)throw new vn({signature:a,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}function kr(a,t){let e=Ew(a,t?.type,t?.structs);if(rm.has(e))return rm.get(e);let i=Wp.test(a),n=La(i?qk:Kk,a);if(!n)throw new Xp({param:a});if(n.name&&Xk(n.name))throw new Qp({param:a,name:n.name});let r=n.name?{name:n.name}:{},s=n.modifier==="indexed"?{indexed:!0}:{},o=t?.structs??{},l,u={};if(i){l="tuple";let h=Ka(n.type),y=[],x=h.length;for(let E=0;E<x;E++)y.push(kr(h[E],{structs:o}));u={components:y}}else if(n.type in o)l="tuple",u={components:o[n.type]};else if(Yk.test(n.type))l=`${n.type}256`;else if(l=n.type,t?.type!=="struct"&&!GI(l))throw new Yp({type:l});if(n.modifier){if(!t?.modifiers?.has?.(n.modifier))throw new Jp({param:a,type:t?.type,modifier:n.modifier});if(zp.has(n.modifier)&&!Qk(l,!!n.array))throw new Zp({param:a,type:t?.type,modifier:n.modifier})}let m={type:`${l}${n.array??""}`,...r,...s,...u};return rm.set(e,m),m}function Ka(a,t=[],e="",i=0){let n=a.trim().length;for(let r=0;r<n;r++){let s=a[r],o=a.slice(r+1);switch(s){case",":return i===0?Ka(o,[...t,e.trim()]):Ka(o,t,`${e}${s}`,i);case"(":return Ka(o,t,`${e}${s}`,i+1);case")":return Ka(o,t,`${e}${s}`,i-1);default:return Ka(o,t,`${e}${s}`,i)}}if(e==="")return t;if(i!==0)throw new nm({current:e,depth:i});return t.push(e.trim()),t}function GI(a){return a==="address"||a==="bool"||a==="function"||a==="string"||HI.test(a)||UI.test(a)}function Xk(a){return a==="address"||a==="bool"||a==="function"||a==="string"||a==="tuple"||HI.test(a)||UI.test(a)||$k.test(a)}function Qk(a,t){return t||a==="bytes"||a==="string"||a==="tuple"}var Kk,qk,Yk,$k,sm=de(()=>{"use strict";hc();$p();FI();VI();Iw();ww();dc();Kk=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,qk=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Yk=/^u?int$/;$k=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/});function om(a){let t={},e=a.length;for(let s=0;s<e;s++){let o=a[s];if(!ko(o))continue;let l=hw(o);if(!l)throw new vn({signature:o,type:"struct"});let u=l.properties.split(";"),m=[],h=u.length;for(let y=0;y<h;y++){let E=u[y].trim();if(!E)continue;let S=kr(E,{type:"struct"});m.push(S)}if(!m.length)throw new im({signature:o});t[l.name]=m}let i={},n=Object.entries(t),r=n.length;for(let s=0;s<r;s++){let[o,l]=n[s];i[o]=Tw(l,t)}return i}function Tw(a,t,e=new Set){let i=[],n=a.length;for(let r=0;r<n;r++){let s=a[r];if(Wp.test(s.type))i.push(s);else{let l=La(Jk,s.type);if(!l?.type)throw new em({abiParameter:s});let{array:u,type:m}=l;if(m in t){if(e.has(m))throw new am({type:m});i.push({...s,type:`tuple${u??""}`,components:Tw(t[m]??[],t,new Set([...e,m]))})}else if(GI(m))i.push(s);else throw new qp({type:m})}}return i}var Jk,WI=de(()=>{"use strict";hc();$p();FI();VI();xw();dc();sm();Jk=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/});function lm(a){let t=om(a),e=[],i=a.length;for(let n=0;n<i;n++){let r=a[n];ko(r)||e.push(fc(r,t))}return e}var Cw=de(()=>{"use strict";dc();WI();sm()});function cm(a){let t;if(typeof a=="string")t=fc(a);else{let e=om(a),i=a.length;for(let n=0;n<i;n++){let r=a[n];if(!ko(r)){t=fc(r,e);break}}}if(!t)throw new Kp({signature:a});return t}var Sw=de(()=>{"use strict";$p();dc();WI();sm()});var um=de(()=>{"use strict";iw();Cw();Sw()});function Zi(a,{includeName:t=!1}={}){if(a.type!=="function"&&a.type!=="event"&&a.type!=="error")throw new pm(a.type);return`${a.name}(${yc(a.inputs,{includeName:t})})`}function yc(a,{includeName:t=!1}={}){return a?a.map(e=>e2(e,{includeName:t})).join(t?", ":","):""}function e2(a,{includeName:t}){return a.type.startsWith("tuple")?`(${yc(a.components,{includeName:t})})${a.type.slice(5)}`:a.type+(t&&a.name?` ${a.name}`:"")}var As=de(()=>{"use strict";xi()});function di(a,{strict:t=!0}={}){return!a||typeof a!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(a):a.startsWith("0x")}var qa=de(()=>{"use strict"});function Dt(a){return di(a,{strict:!1})?Math.ceil((a.length-2)/2):a.length}var Ya=de(()=>{"use strict";qa()});var jI,Dw=de(()=>{"use strict";jI="2.23.11"});function kw(a,t){return t?.(a)?a:a&&typeof a=="object"&&"cause"in a&&a.cause!==void 0?kw(a.cause,t):t?null:a}var zI,X,dt=de(()=>{"use strict";Dw();zI={getDocsUrl:({docsBaseUrl:a,docsPath:t="",docsSlug:e})=>t?`${a??"https://viem.sh"}${t}${e?`#${e}`:""}`:void 0,version:`viem@${jI}`},X=class a extends Error{constructor(t,e={}){let i=(()=>e.cause instanceof a?e.cause.details:e.cause?.message?e.cause.message:e.details)(),n=(()=>e.cause instanceof a&&e.cause.docsPath||e.docsPath)(),r=zI.getDocsUrl?.({...e,docsPath:n}),s=[t||"An error occurred.","",...e.metaMessages?[...e.metaMessages,""]:[],...r?[`Docs: ${r}`]:[],...i?[`Details: ${i}`]:[],...zI.version?[`Version: ${zI.version}`]:[]].join(`
`);super(s,e.cause?{cause:e.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=n,this.metaMessages=e.metaMessages,this.name=e.name??this.name,this.shortMessage=t,this.version=jI}walk(t){return kw(this,t)}}});var mm,bc,Ao,Ca,hm,dm,fm,Mo,ym,Bo,gc,Ar,bm,gm,_m,$a,xn,Lm,vm,xm,pm,xi=de(()=>{"use strict";As();Ya();dt();mm=class extends X{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}},bc=class extends X{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}},Ao=class extends X{constructor({data:t,params:e,size:i}){super([`Data size of ${i} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${yc(e,{includeName:!0})})`,`Data:   ${t} (${i} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=e,this.size=i}},Ca=class extends X{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}},hm=class extends X{constructor({expectedLength:t,givenLength:e,type:i}){super([`ABI encoding array length mismatch for type ${i}.`,`Expected length: ${t}`,`Given length: ${e}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}},dm=class extends X{constructor({expectedSize:t,value:e}){super(`Size of bytes "${e}" (bytes${Dt(e)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}},fm=class extends X{constructor({expectedLength:t,givenLength:e}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${e}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}},Mo=class extends X{constructor(t,{docsPath:e}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:e,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}},ym=class extends X{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}},Bo=class extends X{constructor(t,{docsPath:e}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:e,name:"AbiEventSignatureNotFoundError"})}},gc=class extends X{constructor(t,{docsPath:e}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:e,name:"AbiEventNotFoundError"})}},Ar=class extends X{constructor(t,{docsPath:e}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:e,name:"AbiFunctionNotFoundError"})}},bm=class extends X{constructor(t,{docsPath:e}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:e,name:"AbiFunctionOutputsNotFoundError"})}},gm=class extends X{constructor(t,e){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Zi(t.abiItem)}\`, and`,`\`${e.type}\` in \`${Zi(e.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}},_m=class extends X{constructor({expectedSize:t,givenSize:e}){super(`Expected bytes${t}, got bytes${e}.`,{name:"BytesSizeMismatchError"})}},$a=class extends X{constructor({abiItem:t,data:e,params:i,size:n}){super([`Data size of ${n} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${yc(i,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=e,this.params=i,this.size=n}},xn=class extends X{constructor({abiItem:t,param:e}){super([`Expected a topic for indexed event parameter${e.name?` "${e.name}"`:""} on event "${Zi(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}},Lm=class extends X{constructor(t,{docsPath:e}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:e,name:"InvalidAbiEncodingType"})}},vm=class extends X{constructor(t,{docsPath:e}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:e,name:"InvalidAbiDecodingType"})}},xm=class extends X{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}},pm=class extends X{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}});var _c,Lc,vc,Em=de(()=>{"use strict";dt();_c=class extends X{constructor({offset:t,position:e,size:i}){super(`Slice ${e==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${i}).`,{name:"SliceOffsetOutOfBoundsError"})}},Lc=class extends X{constructor({size:t,targetSize:e,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${t}) exceeds padding size (${e}).`,{name:"SizeExceedsPaddingSizeError"})}},vc=class extends X{constructor({size:t,targetSize:e,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} is expected to be ${e} ${i} long, but is ${t} ${i} long.`,{name:"InvalidBytesLengthError"})}}});function Mr(a,{dir:t,size:e=32}={}){return typeof a=="string"?Qn(a,{dir:t,size:e}):t2(a,{dir:t,size:e})}function Qn(a,{dir:t,size:e=32}={}){if(e===null)return a;let i=a.replace("0x","");if(i.length>e*2)throw new Lc({size:Math.ceil(i.length/2),targetSize:e,type:"hex"});return`0x${i[t==="right"?"padEnd":"padStart"](e*2,"0")}`}function t2(a,{dir:t,size:e=32}={}){if(e===null)return a;if(a.length>e)throw new Lc({size:a.length,targetSize:e,type:"bytes"});let i=new Uint8Array(e);for(let n=0;n<e;n++){let r=t==="right";i[r?n:e-n-1]=a[r?n:a.length-n-1]}return i}var wm=de(()=>{"use strict";Em()});var Ro,Tm,Cm,Sm,xc=de(()=>{"use strict";dt();Ro=class extends X{constructor({max:t,min:e,signed:i,size:n,value:r}){super(`Number "${r}" is not in safe ${n?`${n*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${t?`(${e} to ${t})`:`(above ${e})`}`,{name:"IntegerOutOfRangeError"})}},Tm=class extends X{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}},Cm=class extends X{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}},Sm=class extends X{constructor({givenSize:t,maxSize:e}){super(`Size cannot exceed ${e} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}});function Vi(a,{dir:t="left"}={}){let e=typeof a=="string"?a.replace("0x",""):a,i=0;for(let n=0;n<e.length-1&&e[t==="left"?n:e.length-n-1].toString()==="0";n++)i++;return e=t==="left"?e.slice(i):e.slice(0,e.length-i),typeof a=="string"?(e.length===1&&t==="right"&&(e=`${e}0`),`0x${e.length%2===1?`0${e}`:e}`):e}var Po=de(()=>{"use strict"});function la(a,{size:t}){if(Dt(a)>t)throw new Sm({givenSize:Dt(a),maxSize:t})}function ei(a,t={}){let{signed:e}=t;t.size&&la(a,{size:t.size});let i=BigInt(a);if(!e)return i;let n=(a.length-2)/2,r=(1n<<BigInt(n)*8n-1n)-1n;return i<=r?i:i-BigInt(`0x${"f".padStart(n*2,"f")}`)-1n}function KI(a,t={}){let e=a;if(t.size&&(la(e,{size:t.size}),e=Vi(e)),Vi(e)==="0x00")return!1;if(Vi(e)==="0x01")return!0;throw new Cm(e)}function bi(a,t={}){return Number(ei(a,t))}var Gi=de(()=>{"use strict";xc();Ya();Po()});function Fe(a,t={}){return typeof a=="number"||typeof a=="bigint"?Ue(a,t):typeof a=="string"?Xa(a,t):typeof a=="boolean"?Dm(a,t):Et(a,t)}function Dm(a,t={}){let e=`0x${Number(a)}`;return typeof t.size=="number"?(la(e,{size:t.size}),Mr(e,{size:t.size})):e}function Et(a,t={}){let e="";for(let n=0;n<a.length;n++)e+=i2[a[n]];let i=`0x${e}`;return typeof t.size=="number"?(la(i,{size:t.size}),Mr(i,{dir:"right",size:t.size})):i}function Ue(a,t={}){let{signed:e,size:i}=t,n=BigInt(a),r;i?e?r=(1n<<BigInt(i)*8n-1n)-1n:r=2n**(BigInt(i)*8n)-1n:typeof a=="number"&&(r=BigInt(Number.MAX_SAFE_INTEGER));let s=typeof r=="bigint"&&e?-r-1n:0;if(r&&n>r||n<s){let l=typeof a=="bigint"?"n":"";throw new Ro({max:r?`${r}${l}`:void 0,min:`${s}${l}`,signed:e,size:i,value:`${a}${l}`})}let o=`0x${(e&&n<0?(1n<<BigInt(i*8))+BigInt(n):n).toString(16)}`;return i?Mr(o,{size:i}):o}function Xa(a,t={}){let e=a2.encode(a);return Et(e,t)}var i2,a2,Je=de(()=>{"use strict";xc();wm();Gi();i2=Array.from({length:256},(a,t)=>t.toString(16).padStart(2,"0"));a2=new TextEncoder});function Sa(a,t={}){return typeof a=="number"||typeof a=="bigint"?s2(a,t):typeof a=="boolean"?r2(a,t):di(a)?Ii(a,t):Qa(a,t)}function r2(a,t={}){let e=new Uint8Array(1);return e[0]=Number(a),typeof t.size=="number"?(la(e,{size:t.size}),Mr(e,{size:t.size})):e}function Aw(a){if(a>=Jn.zero&&a<=Jn.nine)return a-Jn.zero;if(a>=Jn.A&&a<=Jn.F)return a-(Jn.A-10);if(a>=Jn.a&&a<=Jn.f)return a-(Jn.a-10)}function Ii(a,t={}){let e=a;t.size&&(la(e,{size:t.size}),e=Mr(e,{dir:"right",size:t.size}));let i=e.slice(2);i.length%2&&(i=`0${i}`);let n=i.length/2,r=new Uint8Array(n);for(let s=0,o=0;s<n;s++){let l=Aw(i.charCodeAt(o++)),u=Aw(i.charCodeAt(o++));if(l===void 0||u===void 0)throw new X(`Invalid byte sequence ("${i[o-2]}${i[o-1]}" in "${i}").`);r[s]=l*16+u}return r}function s2(a,t){let e=Ue(a,t);return Ii(e)}function Qa(a,t={}){let e=n2.encode(a);return typeof t.size=="number"?(la(e,{size:t.size}),Mr(e,{dir:"right",size:t.size})):e}var n2,Jn,ki=de(()=>{"use strict";dt();qa();wm();Gi();Je();n2=new TextEncoder;Jn={zero:48,nine:57,A:65,F:70,a:97,f:102}});function Ic(a){if(!Number.isSafeInteger(a)||a<0)throw new Error("positive integer expected, got "+a)}function o2(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&a.constructor.name==="Uint8Array"}function Br(a,...t){if(!o2(a))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(a.length))throw new Error("Uint8Array expected of length "+t+", got length="+a.length)}function Mw(a){if(typeof a!="function"||typeof a.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ic(a.outputLen),Ic(a.blockLen)}function Zn(a,t=!0){if(a.destroyed)throw new Error("Hash instance has been destroyed");if(t&&a.finished)throw new Error("Hash#digest() has already been called")}function km(a,t){Br(a);let e=t.outputLen;if(a.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}var Ec=de(()=>{"use strict"});function l2(a,t=!1){return t?{h:Number(a&Am),l:Number(a>>Bw&Am)}:{h:Number(a>>Bw&Am)|0,l:Number(a&Am)|0}}function Rw(a,t=!1){let e=new Uint32Array(a.length),i=new Uint32Array(a.length);for(let n=0;n<a.length;n++){let{h:r,l:s}=l2(a[n],t);[e[n],i[n]]=[r,s]}return[e,i]}var Am,Bw,Pw,Nw,Ow,Hw,Uw=de(()=>{"use strict";Am=BigInt(4294967295),Bw=BigInt(32);Pw=(a,t,e)=>a<<e|t>>>32-e,Nw=(a,t,e)=>t<<e|a>>>32-e,Ow=(a,t,e)=>t<<e-32|a>>>64-e,Hw=(a,t,e)=>a<<e-32|t>>>64-e});var Ms,Fw=de(()=>{"use strict";Ms=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function Vw(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))}function Mm(a){return new DataView(a.buffer,a.byteOffset,a.byteLength)}function Ja(a,t){return a<<32-t|a>>>t}function c2(a){return a<<24&4278190080|a<<8&16711680|a>>>8&65280|a>>>24&255}function YI(a){for(let t=0;t<a.length;t++)a[t]=c2(a[t])}function u2(a){if(typeof a!="string")throw new Error("utf8ToBytes expected string, got "+typeof a);return new Uint8Array(new TextEncoder().encode(a))}function Pr(a){return typeof a=="string"&&(a=u2(a)),Br(a),a}function Gw(...a){let t=0;for(let i=0;i<a.length;i++){let n=a[i];Br(n),t+=n.length}let e=new Uint8Array(t);for(let i=0,n=0;i<a.length;i++){let r=a[i];e.set(r,n),n+=r.length}return e}function Bm(a){let t=i=>a().update(Pr(i)).digest(),e=a();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>a(),t}function Ww(a){let t=(i,n)=>a(n).update(Pr(i)).digest(),e=a({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=i=>a(i),t}function Rm(a=32){if(Ms&&typeof Ms.getRandomValues=="function")return Ms.getRandomValues(new Uint8Array(a));if(Ms&&typeof Ms.randomBytes=="function")return Ms.randomBytes(a);throw new Error("crypto.getRandomValues must be defined")}var qI,Rr,Bs=de(()=>{"use strict";Fw();Ec();qI=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();Rr=class{clone(){return this._cloneInto()}}});function g2(a,t=24){let e=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let s=0;s<10;s++)e[s]=a[s]^a[s+10]^a[s+20]^a[s+30]^a[s+40];for(let s=0;s<10;s+=2){let o=(s+8)%10,l=(s+2)%10,u=e[l],m=e[l+1],h=jw(u,m,1)^e[o],y=zw(u,m,1)^e[o+1];for(let x=0;x<50;x+=10)a[s+x]^=h,a[s+x+1]^=y}let n=a[2],r=a[3];for(let s=0;s<24;s++){let o=qw[s],l=jw(n,r,o),u=zw(n,r,o),m=Kw[s];n=a[m],r=a[m+1],a[m]=l,a[m+1]=u}for(let s=0;s<50;s+=10){for(let o=0;o<10;o++)e[o]=a[s+o];for(let o=0;o<10;o++)a[s+o]^=~e[(o+2)%10]&e[(o+4)%10]}a[0]^=y2[i],a[1]^=b2[i]}e.fill(0)}var Kw,qw,Yw,p2,wc,m2,h2,d2,f2,y2,b2,jw,zw,Pm,Nr,d8,f8,y8,b8,g8,Nm,_8,L8,$w,v8,x8,$I=de(()=>{"use strict";Ec();Uw();Bs();Kw=[],qw=[],Yw=[],p2=BigInt(0),wc=BigInt(1),m2=BigInt(2),h2=BigInt(7),d2=BigInt(256),f2=BigInt(113);for(let a=0,t=wc,e=1,i=0;a<24;a++){[e,i]=[i,(2*e+3*i)%5],Kw.push(2*(5*i+e)),qw.push((a+1)*(a+2)/2%64);let n=p2;for(let r=0;r<7;r++)t=(t<<wc^(t>>h2)*f2)%d2,t&m2&&(n^=wc<<(wc<<BigInt(r))-wc);Yw.push(n)}[y2,b2]=Rw(Yw,!0),jw=(a,t,e)=>e>32?Ow(a,t,e):Pw(a,t,e),zw=(a,t,e)=>e>32?Hw(a,t,e):Nw(a,t,e);Pm=class a extends Rr{constructor(t,e,i,n=!1,r=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=i,this.enableXOF=n,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ic(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Vw(this.state)}keccak(){qI||YI(this.state32),g2(this.state32,this.rounds),qI||YI(this.state32),this.posOut=0,this.pos=0}update(t){Zn(this);let{blockLen:e,state:i}=this;t=Pr(t);let n=t.length;for(let r=0;r<n;){let s=Math.min(e-this.pos,n-r);for(let o=0;o<s;o++)i[this.pos++]^=t[r++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:i,blockLen:n}=this;t[i]^=e,e&128&&i===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){Zn(this,!1),Br(t),this.finish();let e=this.state,{blockLen:i}=this;for(let n=0,r=t.length;n<r;){this.posOut>=i&&this.keccak();let s=Math.min(i-this.posOut,r-n);t.set(e.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ic(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(km(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:i,outputLen:n,rounds:r,enableXOF:s}=this;return t||(t=new a(e,i,n,s,r)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=r,t.suffix=i,t.outputLen=n,t.enableXOF=s,t.destroyed=this.destroyed,t}},Nr=(a,t,e)=>Bm(()=>new Pm(t,a,e)),d8=Nr(6,144,224/8),f8=Nr(6,136,256/8),y8=Nr(6,104,384/8),b8=Nr(6,72,512/8),g8=Nr(1,144,224/8),Nm=Nr(1,136,256/8),_8=Nr(1,104,384/8),L8=Nr(1,72,512/8),$w=(a,t,e)=>Ww((i={})=>new Pm(t,a,i.dkLen===void 0?e:i.dkLen,!0)),v8=$w(31,168,128/8),x8=$w(31,136,256/8)});function Kt(a,t){let e=t||"hex",i=Nm(di(a,{strict:!1})?Sa(a):a);return e==="bytes"?i:Fe(i)}var Za=de(()=>{"use strict";$I();qa();ki();Je()});function Xw(a){return _2(a)}var _2,Qw=de(()=>{"use strict";ki();Za();_2=a=>Kt(Sa(a))});function Jw(a){let t=!0,e="",i=0,n="",r=!1;for(let s=0;s<a.length;s++){let o=a[s];if(["(",")",","].includes(o)&&(t=!0),o==="("&&i++,o===")"&&i--,!!t){if(i===0){if(o===" "&&["event","function",""].includes(n))n="";else if(n+=o,o===")"){r=!0;break}continue}if(o===" "){a[s-1]!==","&&e!==","&&e!==",("&&(e="",t=!1);continue}n+=o,e+=o}}if(!r)throw new X("Unable to normalize signature.");return n}var Zw=de(()=>{"use strict";dt()});var eT,tT=de(()=>{"use strict";um();Zw();eT=a=>{let t=(()=>typeof a=="string"?a:ks(a))();return Jw(t)}});function Om(a){return Xw(eT(a))}var XI=de(()=>{"use strict";Qw();tT()});var Or,Tc=de(()=>{"use strict";XI();Or=Om});var Yt,In=de(()=>{"use strict";dt();Yt=class extends X{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}});var En,Cc=de(()=>{"use strict";En=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){let e=super.get(t);return super.has(t)&&e!==void 0&&(this.delete(t),super.set(t,e)),e}set(t,e){if(super.set(t,e),this.maxSize&&this.size>this.maxSize){let i=this.keys().next().value;i&&this.delete(i)}return this}}});function er(a,t){if(QI.has(`${a}.${t}`))return QI.get(`${a}.${t}`);let e=t?`${t}${a.toLowerCase()}`:a.substring(2).toLowerCase(),i=Kt(Qa(e),"bytes"),n=(t?e.substring(`${t}0x`.length):e).split("");for(let s=0;s<40;s+=2)i[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(i[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());let r=`0x${n.join("")}`;return QI.set(`${a}.${t}`,r),r}function Hm(a,t){if(!Wt(a,{strict:!1}))throw new Yt({address:a});return er(a,t)}var QI,Rs=de(()=>{"use strict";In();ki();Za();Cc();en();QI=new En(8192)});function Wt(a,t){let{strict:e=!0}=t??{},i=`${a}.${e}`;if(JI.has(i))return JI.get(i);let n=(()=>L2.test(a)?a.toLowerCase()===a?!0:e?er(a)===a:!0:!1)();return JI.set(i,n),n}var L2,JI,en=de(()=>{"use strict";Cc();Rs();L2=/^0x[a-fA-F0-9]{40}$/,JI=new En(8192)});function ea(a){return typeof a[0]=="string"?Wi(a):v2(a)}function v2(a){let t=0;for(let n of a)t+=n.length;let e=new Uint8Array(t),i=0;for(let n of a)e.set(n,i),i+=n.length;return e}function Wi(a){return`0x${a.reduce((t,e)=>t+e.replace("0x",""),"")}`}var Da=de(()=>{"use strict"});function tr(a,t,e,{strict:i}={}){return di(a,{strict:!1})?eE(a,t,e,{strict:i}):ZI(a,t,e,{strict:i})}function iT(a,t){if(typeof t=="number"&&t>0&&t>Dt(a)-1)throw new _c({offset:t,position:"start",size:Dt(a)})}function aT(a,t,e){if(typeof t=="number"&&typeof e=="number"&&Dt(a)!==e-t)throw new _c({offset:e,position:"end",size:Dt(a)})}function ZI(a,t,e,{strict:i}={}){iT(a,t);let n=a.slice(t,e);return i&&aT(n,t,e),n}function eE(a,t,e,{strict:i}={}){iT(a,t);let n=`0x${a.replace("0x","").slice((t??0)*2,(e??a.length)*2)}`;return i&&aT(n,t,e),n}var Ps=de(()=>{"use strict";Em();qa();Ya()});var nT,Um,tE=de(()=>{"use strict";nT=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Um=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/});function va(a,t){if(a.length!==t.length)throw new fm({expectedLength:a.length,givenLength:t.length});let e=x2({params:a,values:t}),i=aE(e);return i.length===0?"0x":i}function x2({params:a,values:t}){let e=[];for(let i=0;i<a.length;i++)e.push(iE({param:a[i],value:t[i]}));return e}function iE({param:a,value:t}){let e=Fm(a.type);if(e){let[i,n]=e;return E2(t,{length:i,param:{...a,type:n}})}if(a.type==="tuple")return D2(t,{param:a});if(a.type==="address")return I2(t);if(a.type==="bool")return T2(t);if(a.type.startsWith("uint")||a.type.startsWith("int")){let i=a.type.startsWith("int"),[,,n="256"]=Um.exec(a.type)??[];return C2(t,{signed:i,size:Number(n)})}if(a.type.startsWith("bytes"))return w2(t,{param:a});if(a.type==="string")return S2(t);throw new Lm(a.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function aE(a){let t=0;for(let r=0;r<a.length;r++){let{dynamic:s,encoded:o}=a[r];s?t+=32:t+=Dt(o)}let e=[],i=[],n=0;for(let r=0;r<a.length;r++){let{dynamic:s,encoded:o}=a[r];s?(e.push(Ue(t+n,{size:32})),i.push(o),n+=Dt(o)):e.push(o)}return ea([...e,...i])}function I2(a){if(!Wt(a))throw new Yt({address:a});return{dynamic:!1,encoded:Qn(a.toLowerCase())}}function E2(a,{length:t,param:e}){let i=t===null;if(!Array.isArray(a))throw new xm(a);if(!i&&a.length!==t)throw new hm({expectedLength:t,givenLength:a.length,type:`${e.type}[${t}]`});let n=!1,r=[];for(let s=0;s<a.length;s++){let o=iE({param:e,value:a[s]});o.dynamic&&(n=!0),r.push(o)}if(i||n){let s=aE(r);if(i){let o=Ue(r.length,{size:32});return{dynamic:!0,encoded:r.length>0?ea([o,s]):o}}if(n)return{dynamic:!0,encoded:s}}return{dynamic:!1,encoded:ea(r.map(({encoded:s})=>s))}}function w2(a,{param:t}){let[,e]=t.type.split("bytes"),i=Dt(a);if(!e){let n=a;return i%32!==0&&(n=Qn(n,{dir:"right",size:Math.ceil((a.length-2)/2/32)*32})),{dynamic:!0,encoded:ea([Qn(Ue(i,{size:32})),n])}}if(i!==Number.parseInt(e))throw new dm({expectedSize:Number.parseInt(e),value:a});return{dynamic:!1,encoded:Qn(a,{dir:"right"})}}function T2(a){if(typeof a!="boolean")throw new X(`Invalid boolean value: "${a}" (type: ${typeof a}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Qn(Dm(a))}}function C2(a,{signed:t,size:e=256}){if(typeof e=="number"){let i=2n**(BigInt(e)-(t?1n:0n))-1n,n=t?-i-1n:0n;if(a>i||a<n)throw new Ro({max:i.toString(),min:n.toString(),signed:t,size:e/8,value:a.toString()})}return{dynamic:!1,encoded:Ue(a,{size:32,signed:t})}}function S2(a){let t=Xa(a),e=Math.ceil(Dt(t)/32),i=[];for(let n=0;n<e;n++)i.push(Qn(tr(t,n*32,(n+1)*32),{dir:"right"}));return{dynamic:!0,encoded:ea([Qn(Ue(Dt(t),{size:32})),...i])}}function D2(a,{param:t}){let e=!1,i=[];for(let n=0;n<t.components.length;n++){let r=t.components[n],s=Array.isArray(a)?n:r.name,o=iE({param:r,value:a[s]});i.push(o),o.dynamic&&(e=!0)}return{dynamic:e,encoded:e?aE(i):ea(i.map(({encoded:n})=>n))}}function Fm(a){let t=a.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}var Hr=de(()=>{"use strict";xi();In();dt();xc();en();Da();wm();Ya();Ps();Je();tE()});var No,Vm=de(()=>{"use strict";Ps();XI();No=a=>tr(Om(a),0,4)});function wn(a){let{abi:t,args:e=[],name:i}=a,n=di(i,{strict:!1}),r=t.filter(o=>n?o.type==="function"?No(o)===i:o.type==="event"?Or(o)===i:!1:"name"in o&&o.name===i);if(r.length===0)return;if(r.length===1)return r[0];let s;for(let o of r){if(!("inputs"in o))continue;if(!e||e.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==e.length)continue;if(e.every((u,m)=>{let h="inputs"in o&&o.inputs[m];return h?nE(u,h):!1})){if(s&&"inputs"in s&&s.inputs){let u=rT(o.inputs,s.inputs,e);if(u)throw new gm({abiItem:o,type:u[0]},{abiItem:s,type:u[1]})}s=o}}return s||r[0]}function nE(a,t){let e=typeof a,i=t.type;switch(i){case"address":return Wt(a,{strict:!1});case"bool":return e==="boolean";case"function":return e==="string";case"string":return e==="string";default:return i==="tuple"&&"components"in t?Object.values(t.components).every((n,r)=>nE(Object.values(a)[r],n)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?e==="number"||e==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?e==="string"||a instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)?Array.isArray(a)&&a.every(n=>nE(n,{...t,type:i.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function rT(a,t,e){for(let i in a){let n=a[i],r=t[i];if(n.type==="tuple"&&r.type==="tuple"&&"components"in n&&"components"in r)return rT(n.components,r.components,e[i]);let s=[n.type,r.type];if((()=>s.includes("address")&&s.includes("bytes20")?!0:s.includes("address")&&s.includes("string")?Wt(e[i],{strict:!1}):s.includes("address")&&s.includes("bytes")?Wt(e[i],{strict:!1}):!1)())return s}}var Oo=de(()=>{"use strict";xi();qa();en();Tc();Vm()});function kt(a){return typeof a=="string"?{address:a,type:"json-rpc"}:a}var Pi=de(()=>{"use strict"});function cT(a){let{abi:t,args:e,functionName:i}=a,n=t[0];if(i){let r=wn({abi:t,args:e,name:i});if(!r)throw new Ar(i,{docsPath:lT});n=r}if(n.type!=="function")throw new Ar(void 0,{docsPath:lT});return{abi:[n],functionName:No(Zi(n))}}var lT,uT=de(()=>{"use strict";xi();Vm();As();Oo();lT="/docs/contract/encodeFunctionData"});function ti(a){let{args:t}=a,{abi:e,functionName:i}=(()=>a.abi.length===1&&a.functionName?.startsWith("0x")?a:cT(a))(),n=e[0],r=i,s="inputs"in n&&n.inputs?va(n.inputs,t??[]):void 0;return Wi([r,s??"0x"])}var ka=de(()=>{"use strict";Da();Hr();uT()});var Wm,pT,mT,jm=de(()=>{"use strict";Wm={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},pT={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},mT={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}});var Sc,Ho,zm,rE=de(()=>{"use strict";dt();Sc=class extends X{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}},Ho=class extends X{constructor({length:t,position:e}){super(`Position \`${e}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}},zm=class extends X{constructor({count:t,limit:e}){super(`Recursive read limit of \`${e}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}});function Uo(a,{recursiveReadLimit:t=8192}={}){let e=Object.create(k2);return e.bytes=a,e.dataView=new DataView(a.buffer,a.byteOffset,a.byteLength),e.positionReadCount=new Map,e.recursiveReadLimit=t,e}var k2,Km=de(()=>{"use strict";rE();k2={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new zm({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(a){if(a<0||a>this.bytes.length-1)throw new Ho({length:this.bytes.length,position:a})},decrementPosition(a){if(a<0)throw new Sc({offset:a});let t=this.position-a;this.assertPosition(t),this.position=t},getReadCount(a){return this.positionReadCount.get(a||this.position)||0},incrementPosition(a){if(a<0)throw new Sc({offset:a});let t=this.position+a;this.assertPosition(t),this.position=t},inspectByte(a){let t=a??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(a,t){let e=t??this.position;return this.assertPosition(e+a-1),this.bytes.subarray(e,e+a)},inspectUint8(a){let t=a??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(a){let t=a??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(a){let t=a??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(a){let t=a??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(a){this.assertPosition(this.position),this.bytes[this.position]=a,this.position++},pushBytes(a){this.assertPosition(this.position+a.length-1),this.bytes.set(a,this.position),this.position+=a.length},pushUint8(a){this.assertPosition(this.position),this.bytes[this.position]=a,this.position++},pushUint16(a){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,a),this.position+=2},pushUint24(a){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,a>>8),this.dataView.setUint8(this.position+2,a&255),this.position+=3},pushUint32(a){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,a),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let a=this.inspectByte();return this.position++,a},readBytes(a,t){this.assertReadLimit(),this._touch();let e=this.inspectBytes(a);return this.position+=t??a,e},readUint8(){this.assertReadLimit(),this._touch();let a=this.inspectUint8();return this.position+=1,a},readUint16(){this.assertReadLimit(),this._touch();let a=this.inspectUint16();return this.position+=2,a},readUint24(){this.assertReadLimit(),this._touch();let a=this.inspectUint24();return this.position+=3,a},readUint32(){this.assertReadLimit(),this._touch();let a=this.inspectUint32();return this.position+=4,a},get remaining(){return this.bytes.length-this.position},setPosition(a){let t=this.position;return this.assertPosition(a),this.position=a,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let a=this.getReadCount();this.positionReadCount.set(this.position,a+1),a>0&&this.recursiveReadCount++}}});function hT(a,t={}){typeof t.size<"u"&&la(a,{size:t.size});let e=Et(a,t);return ei(e,t)}function dT(a,t={}){let e=a;if(typeof t.size<"u"&&(la(e,{size:t.size}),e=Vi(e)),e.length>1||e[0]>1)throw new Tm(e);return!!e[0]}function Cn(a,t={}){typeof t.size<"u"&&la(a,{size:t.size});let e=Et(a,t);return bi(e,t)}function fT(a,t={}){let e=a;return typeof t.size<"u"&&(la(e,{size:t.size}),e=Vi(e,{dir:"right"})),new TextDecoder().decode(e)}var yT=de(()=>{"use strict";xc();Po();Gi();Je()});function Ns(a,t){let e=typeof t=="string"?Ii(t):t,i=Uo(e);if(Dt(e)===0&&a.length>0)throw new Ca;if(Dt(t)&&Dt(t)<32)throw new Ao({data:typeof t=="string"?t:Et(t),params:a,size:Dt(t)});let n=0,r=[];for(let s=0;s<a.length;++s){let o=a[s];i.setPosition(n);let[l,u]=Fo(i,o,{staticPosition:0});n+=u,r.push(l)}return r}function Fo(a,t,{staticPosition:e}){let i=Fm(t.type);if(i){let[n,r]=i;return M2(a,{...t,type:r},{length:n,staticPosition:e})}if(t.type==="tuple")return N2(a,t,{staticPosition:e});if(t.type==="address")return A2(a);if(t.type==="bool")return B2(a);if(t.type.startsWith("bytes"))return R2(a,t,{staticPosition:e});if(t.type.startsWith("uint")||t.type.startsWith("int"))return P2(a,t);if(t.type==="string")return O2(a,{staticPosition:e});throw new vm(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function A2(a){let t=a.readBytes(32);return[er(Et(ZI(t,-20))),32]}function M2(a,t,{length:e,staticPosition:i}){if(!e){let s=Cn(a.readBytes(sE)),o=i+s,l=o+bT;a.setPosition(o);let u=Cn(a.readBytes(bT)),m=Dc(t),h=0,y=[];for(let x=0;x<u;++x){a.setPosition(l+(m?x*32:h));let[E,S]=Fo(a,t,{staticPosition:l});h+=S,y.push(E)}return a.setPosition(i+32),[y,32]}if(Dc(t)){let s=Cn(a.readBytes(sE)),o=i+s,l=[];for(let u=0;u<e;++u){a.setPosition(o+u*32);let[m]=Fo(a,t,{staticPosition:o});l.push(m)}return a.setPosition(i+32),[l,32]}let n=0,r=[];for(let s=0;s<e;++s){let[o,l]=Fo(a,t,{staticPosition:i+n});n+=l,r.push(o)}return[r,n]}function B2(a){return[dT(a.readBytes(32),{size:32}),32]}function R2(a,t,{staticPosition:e}){let[i,n]=t.type.split("bytes");if(!n){let s=Cn(a.readBytes(32));a.setPosition(e+s);let o=Cn(a.readBytes(32));if(o===0)return a.setPosition(e+32),["0x",32];let l=a.readBytes(o);return a.setPosition(e+32),[Et(l),32]}return[Et(a.readBytes(Number.parseInt(n),32)),32]}function P2(a,t){let e=t.type.startsWith("int"),i=Number.parseInt(t.type.split("int")[1]||"256"),n=a.readBytes(32);return[i>48?hT(n,{signed:e}):Cn(n,{signed:e}),32]}function N2(a,t,{staticPosition:e}){let i=t.components.length===0||t.components.some(({name:s})=>!s),n=i?[]:{},r=0;if(Dc(t)){let s=Cn(a.readBytes(sE)),o=e+s;for(let l=0;l<t.components.length;++l){let u=t.components[l];a.setPosition(o+r);let[m,h]=Fo(a,u,{staticPosition:o});r+=h,n[i?l:u?.name]=m}return a.setPosition(e+32),[n,32]}for(let s=0;s<t.components.length;++s){let o=t.components[s],[l,u]=Fo(a,o,{staticPosition:e});n[i?s:o?.name]=l,r+=u}return[n,r]}function O2(a,{staticPosition:t}){let e=Cn(a.readBytes(32)),i=t+e;a.setPosition(i);let n=Cn(a.readBytes(32));if(n===0)return a.setPosition(t+32),["",32];let r=a.readBytes(n,32),s=fT(Vi(r));return a.setPosition(t+32),[s,32]}function Dc(a){let{type:t}=a;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return a.components?.some(Dc);let e=Fm(a.type);return!!(e&&Dc({...a,type:e[1]}))}var bT,sE,qm=de(()=>{"use strict";xi();Rs();Km();Ya();Ps();Po();yT();ki();Je();Hr();bT=32,sE=32});function Ym(a){let{abi:t,data:e}=a,i=tr(e,0,4);if(i==="0x")throw new Ca;let r=[...t||[],pT,mT].find(s=>s.type==="error"&&i===No(Zi(s)));if(!r)throw new Mo(i,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:r,args:"inputs"in r&&r.inputs&&r.inputs.length>0?Ns(r.inputs,tr(e,4)):void 0,errorName:r.name}}var oE=de(()=>{"use strict";jm();xi();Ps();Vm();qm();As()});var wt,ta=de(()=>{"use strict";wt=(a,t,e)=>JSON.stringify(a,(i,n)=>{let r=typeof n=="bigint"?n.toString():n;return typeof t=="function"?t(i,r):r},e)});function lE({abiItem:a,args:t,includeFunctionName:e=!0,includeName:i=!1}){if("name"in a&&"inputs"in a&&a.inputs)return`${e?a.name:""}(${a.inputs.map((n,r)=>`${i&&n.name?`${n.name}: `:""}${typeof t[r]=="object"?wt(t[r]):t[r]}`).join(", ")})`}var gT=de(()=>{"use strict";ta()});var $m,_T,Xm=de(()=>{"use strict";$m={gwei:9,wei:18},_T={ether:-9,wei:9}});function ii(a,t){let e=a.toString(),i=e.startsWith("-");i&&(e=e.slice(1)),e=e.padStart(t,"0");let[n,r]=[e.slice(0,e.length-t),e.slice(e.length-t)];return r=r.replace(/(0+)$/,""),`${i?"-":""}${n||"0"}${r?`.${r}`:""}`}var Qm=de(()=>{"use strict"});function Vo(a,t="wei"){return ii(a,$m[t])}var Jm=de(()=>{"use strict";Xm();Qm()});function Ei(a,t="wei"){return ii(a,_T[t])}var Go=de(()=>{"use strict";Xm();Qm()});function LT(a){return a.reduce((t,{slot:e,value:i})=>`${t}        ${e}: ${i}
`,"")}function vT(a){return a.reduce((t,{address:e,...i})=>{let n=`${t}    ${e}:
`;return i.nonce&&(n+=`      nonce: ${i.nonce}
`),i.balance&&(n+=`      balance: ${i.balance}
`),i.code&&(n+=`      code: ${i.code}
`),i.state&&(n+=`      state:
`,n+=LT(i.state)),i.stateDiff&&(n+=`      stateDiff:
`,n+=LT(i.stateDiff)),n},`  State Override:
`).slice(0,-1)}var Zm,eh,cE=de(()=>{"use strict";dt();Zm=class extends X{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}},eh=class extends X{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}});function Os(a){let t=Object.entries(a).map(([i,n])=>n===void 0||n===!1?null:[i,n]).filter(Boolean),e=t.reduce((i,[n])=>Math.max(i,n.length),0);return t.map(([i,n])=>`  ${`${i}:`.padEnd(e+1)}  ${n}`).join(`
`)}var th,ih,ah,nh,rh,Wo,jo,sh,tn=de(()=>{"use strict";Jm();Go();dt();th=class extends X{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}},ih=class extends X{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}},ah=class extends X{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Os(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}},nh=class extends X{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}},rh=class extends X{constructor(t,{account:e,docsPath:i,chain:n,data:r,gas:s,gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:m,to:h,value:y}){let x=Os({chain:n&&`${n?.name} (id: ${n?.id})`,from:e?.address,to:h,value:typeof y<"u"&&`${Vo(y)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:r,gas:s,gasPrice:typeof o<"u"&&`${Ei(o)} gwei`,maxFeePerGas:typeof l<"u"&&`${Ei(l)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Ei(u)} gwei`,nonce:m});super(t.shortMessage,{cause:t,docsPath:i,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",x].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}},Wo=class extends X{constructor({blockHash:t,blockNumber:e,blockTag:i,hash:n,index:r}){let s="Transaction";i&&r!==void 0&&(s=`Transaction at block time "${i}" at index "${r}"`),t&&r!==void 0&&(s=`Transaction at block hash "${t}" at index "${r}"`),e&&r!==void 0&&(s=`Transaction at block number "${e}" at index "${r}"`),n&&(s=`Transaction with hash "${n}"`),super(`${s} could not be found.`,{name:"TransactionNotFoundError"})}},jo=class extends X{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}},sh=class extends X{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}});var xT,Hs,oh=de(()=>{"use strict";xT=a=>a,Hs=a=>a});var Us,kc,$t,Ac,Mc,an,ir=de(()=>{"use strict";Pi();jm();oE();As();gT();Oo();Jm();Go();xi();dt();cE();tn();oh();Us=class extends X{constructor(t,{account:e,docsPath:i,chain:n,data:r,gas:s,gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:m,to:h,value:y,stateOverride:x}){let E=e?kt(e):void 0,S=Os({from:E?.address,to:h,value:typeof y<"u"&&`${Vo(y)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:r,gas:s,gasPrice:typeof o<"u"&&`${Ei(o)} gwei`,maxFeePerGas:typeof l<"u"&&`${Ei(l)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Ei(u)} gwei`,nonce:m});x&&(S+=`
${vT(x)}`),super(t.shortMessage,{cause:t,docsPath:i,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",S].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}},kc=class extends X{constructor(t,{abi:e,args:i,contractAddress:n,docsPath:r,functionName:s,sender:o}){let l=wn({abi:e,args:i,name:s}),u=l?lE({abiItem:l,args:i,includeFunctionName:!1,includeName:!1}):void 0,m=l?Zi(l,{includeName:!0}):void 0,h=Os({address:n&&xT(n),function:m,args:u&&u!=="()"&&`${[...Array(s?.length??0).keys()].map(()=>" ").join("")}${u}`,sender:o});super(t.shortMessage||`An unknown error occurred while executing the contract function "${s}".`,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],h&&"Contract Call:",h].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=e,this.args=i,this.cause=t,this.contractAddress=n,this.functionName=s,this.sender=o}},$t=class extends X{constructor({abi:t,data:e,functionName:i,message:n}){let r,s,o,l;if(e&&e!=="0x")try{s=Ym({abi:t,data:e});let{abiItem:m,errorName:h,args:y}=s;if(h==="Error")l=y[0];else if(h==="Panic"){let[x]=y;l=Wm[x]}else{let x=m?Zi(m,{includeName:!0}):void 0,E=m&&y?lE({abiItem:m,args:y,includeFunctionName:!1,includeName:!1}):void 0;o=[x?`Error: ${x}`:"",E&&E!=="()"?`       ${[...Array(h?.length??0).keys()].map(()=>" ").join("")}${E}`:""]}}catch(m){r=m}else n&&(l=n);let u;r instanceof Mo&&(u=r.signature,o=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(l&&l!=="execution reverted"||u?[`The contract function "${i}" reverted with the following ${u?"signature":"reason"}:`,l||u].join(`
`):`The contract function "${i}" reverted.`,{cause:r,metaMessages:o,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=s,this.raw=e,this.reason=l,this.signature=u}},Ac=class extends X{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}},Mc=class extends X{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}},an=class extends X{constructor({data:t,message:e}){super(e||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}});var Aa,Fr,Bc,Fs=de(()=>{"use strict";ta();dt();oh();Aa=class extends X{constructor({body:t,cause:e,details:i,headers:n,status:r,url:s}){super("HTTP request failed.",{cause:e,details:i,metaMessages:[r&&`Status: ${r}`,`URL: ${Hs(s)}`,t&&`Request body: ${wt(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=n,this.status=r,this.url=s}},Fr=class extends X{constructor({body:t,error:e,url:i}){super("RPC Request failed.",{cause:e,details:e.message,metaMessages:[`URL: ${Hs(i)}`,`Request body: ${wt(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e.code,this.data=e.data}},Bc=class extends X{constructor({body:t,url:e}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Hs(e)}`,`Request body: ${wt(t)}`],name:"TimeoutError"})}}});var H2,ji,Vr,zo,Ko,qo,Yo,ar,Sn,$o,Xo,Qo,Gr,Vs,Jo,Gs,Zo,el,tl,il,al,lh,Rc=de(()=>{"use strict";dt();Fs();H2=-1,ji=class extends X{constructor(t,{code:e,docsPath:i,metaMessages:n,name:r,shortMessage:s}){super(s,{cause:t,docsPath:i,metaMessages:n||t?.metaMessages,name:r||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=r||t.name,this.code=t instanceof Fr?t.code:e??H2}},Vr=class extends ji{constructor(t,e){super(t,e),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e.data}},zo=class a extends ji{constructor(t){super(t,{code:a.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}};Object.defineProperty(zo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});Ko=class a extends ji{constructor(t){super(t,{code:a.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}};Object.defineProperty(Ko,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});qo=class a extends ji{constructor(t,{method:e}={}){super(t,{code:a.code,name:"MethodNotFoundRpcError",shortMessage:`The method${e?` "${e}"`:""} does not exist / is not available.`})}};Object.defineProperty(qo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});Yo=class a extends ji{constructor(t){super(t,{code:a.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(Yo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});ar=class a extends ji{constructor(t){super(t,{code:a.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}};Object.defineProperty(ar,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});Sn=class a extends ji{constructor(t){super(t,{code:a.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(Sn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});$o=class a extends ji{constructor(t){super(t,{code:a.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}};Object.defineProperty($o,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});Xo=class a extends ji{constructor(t){super(t,{code:a.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}};Object.defineProperty(Xo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});Qo=class a extends ji{constructor(t){super(t,{code:a.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}};Object.defineProperty(Qo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});Gr=class a extends ji{constructor(t,{method:e}={}){super(t,{code:a.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${e?` "${e}"`:""} is not supported.`})}};Object.defineProperty(Gr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});Vs=class a extends ji{constructor(t){super(t,{code:a.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}};Object.defineProperty(Vs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});Jo=class a extends ji{constructor(t){super(t,{code:a.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}};Object.defineProperty(Jo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});Gs=class a extends Vr{constructor(t){super(t,{code:a.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(Gs,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});Zo=class a extends Vr{constructor(t){super(t,{code:a.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}};Object.defineProperty(Zo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});el=class a extends Vr{constructor(t,{method:e}={}){super(t,{code:a.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${e?` " ${e}"`:""}.`})}};Object.defineProperty(el,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});tl=class a extends Vr{constructor(t){super(t,{code:a.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}};Object.defineProperty(tl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});il=class a extends Vr{constructor(t){super(t,{code:a.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}};Object.defineProperty(il,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});al=class a extends Vr{constructor(t){super(t,{code:a.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(al,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});lh=class extends ji{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}});function F2(a,t,e,i){if(typeof a.setBigUint64=="function")return a.setBigUint64(t,e,i);let n=BigInt(32),r=BigInt(4294967295),s=Number(e>>n&r),o=Number(e&r),l=i?4:0,u=i?0:4;a.setUint32(t+l,s,i),a.setUint32(t+u,o,i)}function ET(a,t,e){return a&t^~a&e}function wT(a,t,e){return a&t^a&e^t&e}var ch,TT=de(()=>{"use strict";Ec();Bs();ch=class extends Rr{constructor(t,e,i,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Mm(this.buffer)}update(t){Zn(this);let{view:e,buffer:i,blockLen:n}=this;t=Pr(t);let r=t.length;for(let s=0;s<r;){let o=Math.min(n-this.pos,r-s);if(o===n){let l=Mm(t);for(;n<=r-s;s+=n)this.process(l,s);continue}i.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Zn(this),km(t,this),this.finished=!0;let{buffer:e,view:i,blockLen:n,isLE:r}=this,{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(i,0),s=0);for(let h=s;h<n;h++)e[h]=0;F2(i,n-8,BigInt(this.length*8),r),this.process(i,0);let o=Mm(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=l/4,m=this.get();if(u>m.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)o.setUint32(4*h,m[h],r)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let i=t.slice(0,e);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:i,length:n,finished:r,destroyed:s,pos:o}=this;return t.length=n,t.pos=o,t.finished=r,t.destroyed=s,n%e&&t.buffer.set(i),t}}});var V2,Wr,jr,uE,Ws,pE=de(()=>{"use strict";TT();Bs();V2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jr=new Uint32Array(64),uE=class extends ch{constructor(){super(64,32,8,!1),this.A=Wr[0]|0,this.B=Wr[1]|0,this.C=Wr[2]|0,this.D=Wr[3]|0,this.E=Wr[4]|0,this.F=Wr[5]|0,this.G=Wr[6]|0,this.H=Wr[7]|0}get(){let{A:t,B:e,C:i,D:n,E:r,F:s,G:o,H:l}=this;return[t,e,i,n,r,s,o,l]}set(t,e,i,n,r,s,o,l){this.A=t|0,this.B=e|0,this.C=i|0,this.D=n|0,this.E=r|0,this.F=s|0,this.G=o|0,this.H=l|0}process(t,e){for(let h=0;h<16;h++,e+=4)jr[h]=t.getUint32(e,!1);for(let h=16;h<64;h++){let y=jr[h-15],x=jr[h-2],E=Ja(y,7)^Ja(y,18)^y>>>3,S=Ja(x,17)^Ja(x,19)^x>>>10;jr[h]=S+jr[h-7]+E+jr[h-16]|0}let{A:i,B:n,C:r,D:s,E:o,F:l,G:u,H:m}=this;for(let h=0;h<64;h++){let y=Ja(o,6)^Ja(o,11)^Ja(o,25),x=m+y+ET(o,l,u)+V2[h]+jr[h]|0,S=(Ja(i,2)^Ja(i,13)^Ja(i,22))+wT(i,n,r)|0;m=u,u=l,l=o,o=s+x|0,s=r,r=n,n=i,i=x+S|0}i=i+this.A|0,n=n+this.B|0,r=r+this.C|0,s=s+this.D|0,o=o+this.E|0,l=l+this.F|0,u=u+this.G|0,m=m+this.H|0,this.set(i,n,r,s,o,l,u,m)}roundClean(){jr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Ws=Bm(()=>new uE)});var uh,mE,CT=de(()=>{"use strict";Ec();Bs();uh=class extends Rr{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Mw(t);let i=Pr(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,r=new Uint8Array(n);r.set(i.length>n?t.create().update(i).digest():i);for(let s=0;s<r.length;s++)r[s]^=54;this.iHash.update(r),this.oHash=t.create();for(let s=0;s<r.length;s++)r[s]^=106;this.oHash.update(r),r.fill(0)}update(t){return Zn(this),this.iHash.update(t),this}digestInto(t){Zn(this),Br(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:i,finished:n,destroyed:r,blockLen:s,outputLen:o}=this;return t=t,t.finished=n,t.destroyed=r,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},mE=(a,t,e)=>new uh(a,t).update(e).digest();mE.create=(a,t)=>new uh(a,t)});var gE={};NI(gE,{aInRange:()=>Dn,abool:()=>js,abytes:()=>Ma,bitGet:()=>K2,bitLen:()=>yE,bitMask:()=>Nc,bitSet:()=>q2,bytesToHex:()=>zs,bytesToNumberBE:()=>ca,bytesToNumberLE:()=>hh,concatBytes:()=>zi,createHmacDrbg:()=>bE,ensureBytes:()=>wi,equalBytes:()=>z2,hexToBytes:()=>qs,hexToNumber:()=>fE,inRange:()=>Kr,isBytes:()=>zr,memoized:()=>fh,notImplemented:()=>$2,numberToBytesBE:()=>nn,numberToBytesLE:()=>dh,numberToHexUnpadded:()=>Ks,numberToVarBytesBE:()=>j2,utf8ToBytes:()=>Pc,validateObject:()=>kn});function zr(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&a.constructor.name==="Uint8Array"}function Ma(a){if(!zr(a))throw new Error("Uint8Array expected")}function js(a,t){if(typeof t!="boolean")throw new Error(a+" boolean expected, got "+t)}function zs(a){Ma(a);let t="";for(let e=0;e<a.length;e++)t+=W2[a[e]];return t}function Ks(a){let t=a.toString(16);return t.length&1?"0"+t:t}function fE(a){if(typeof a!="string")throw new Error("hex string expected, got "+typeof a);return a===""?ph:BigInt("0x"+a)}function ST(a){if(a>=nr._0&&a<=nr._9)return a-nr._0;if(a>=nr.A&&a<=nr.F)return a-(nr.A-10);if(a>=nr.a&&a<=nr.f)return a-(nr.a-10)}function qs(a){if(typeof a!="string")throw new Error("hex string expected, got "+typeof a);let t=a.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(e);for(let n=0,r=0;n<e;n++,r+=2){let s=ST(a.charCodeAt(r)),o=ST(a.charCodeAt(r+1));if(s===void 0||o===void 0){let l=a[r]+a[r+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+r)}i[n]=s*16+o}return i}function ca(a){return fE(zs(a))}function hh(a){return Ma(a),fE(zs(Uint8Array.from(a).reverse()))}function nn(a,t){return qs(a.toString(16).padStart(t*2,"0"))}function dh(a,t){return nn(a,t).reverse()}function j2(a){return qs(Ks(a))}function wi(a,t,e){let i;if(typeof t=="string")try{i=qs(t)}catch(r){throw new Error(a+" must be hex string or Uint8Array, cause: "+r)}else if(zr(t))i=Uint8Array.from(t);else throw new Error(a+" must be hex string or Uint8Array");let n=i.length;if(typeof e=="number"&&n!==e)throw new Error(a+" of length "+e+" expected, got "+n);return i}function zi(...a){let t=0;for(let i=0;i<a.length;i++){let n=a[i];Ma(n),t+=n.length}let e=new Uint8Array(t);for(let i=0,n=0;i<a.length;i++){let r=a[i];e.set(r,n),n+=r.length}return e}function z2(a,t){if(a.length!==t.length)return!1;let e=0;for(let i=0;i<a.length;i++)e|=a[i]^t[i];return e===0}function Pc(a){if(typeof a!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}function Kr(a,t,e){return hE(a)&&hE(t)&&hE(e)&&t<=a&&a<e}function Dn(a,t,e,i){if(!Kr(t,e,i))throw new Error("expected valid "+a+": "+e+" <= n < "+i+", got "+t)}function yE(a){let t;for(t=0;a>ph;a>>=mh,t+=1);return t}function K2(a,t){return a>>BigInt(t)&mh}function q2(a,t,e){return a|(e?mh:ph)<<BigInt(t)}function bE(a,t,e){if(typeof a!="number"||a<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let i=dE(a),n=dE(a),r=0,s=()=>{i.fill(1),n.fill(0),r=0},o=(...h)=>e(n,i,...h),l=(h=dE())=>{n=o(DT([0]),h),i=o(),h.length!==0&&(n=o(DT([1]),h),i=o())},u=()=>{if(r++>=1e3)throw new Error("drbg: tried 1000 values");let h=0,y=[];for(;h<t;){i=o();let x=i.slice();y.push(x),h+=i.length}return zi(...y)};return(h,y)=>{s(),l(h);let x;for(;!(x=y(u()));)l();return s(),x}}function kn(a,t,e={}){let i=(n,r,s)=>{let o=Y2[r];if(typeof o!="function")throw new Error("invalid validator function");let l=a[n];if(!(s&&l===void 0)&&!o(l,a))throw new Error("param "+String(n)+" is invalid. Expected "+r+", got "+l)};for(let[n,r]of Object.entries(t))i(n,r,!1);for(let[n,r]of Object.entries(e))i(n,r,!0);return a}function fh(a){let t=new WeakMap;return(e,...i)=>{let n=t.get(e);if(n!==void 0)return n;let r=a(e,...i);return t.set(e,r),r}}var ph,mh,G2,W2,nr,hE,Nc,dE,DT,Y2,$2,Ys=de(()=>{"use strict";ph=BigInt(0),mh=BigInt(1),G2=BigInt(2);W2=Array.from({length:256},(a,t)=>t.toString(16).padStart(2,"0"));nr={_0:48,_9:57,A:65,F:70,a:97,f:102};hE=a=>typeof a=="bigint"&&ph<=a;Nc=a=>(G2<<BigInt(a-1))-mh,dE=a=>new Uint8Array(a),DT=a=>Uint8Array.from(a);Y2={bigint:a=>typeof a=="bigint",function:a=>typeof a=="function",boolean:a=>typeof a=="boolean",string:a=>typeof a=="string",stringOrUint8Array:a=>typeof a=="string"||zr(a),isSafeInteger:a=>Number.isSafeInteger(a),array:a=>Array.isArray(a),field:(a,t)=>t.Fp.isValid(a),hash:a=>typeof a=="function"&&Number.isSafeInteger(a.outputLen)};$2=()=>{throw new Error("not implemented")}});function fi(a,t){let e=a%t;return e>=Ti?e:t+e}function Z2(a,t,e){if(t<Ti)throw new Error("invalid exponent, negatives unsupported");if(e<=Ti)throw new Error("invalid modulus");if(e===oi)return Ti;let i=oi;for(;t>Ti;)t&oi&&(i=i*a%e),a=a*a%e,t>>=oi;return i}function Ia(a,t,e){let i=a;for(;t-- >Ti;)i*=i,i%=e;return i}function yh(a,t){if(a===Ti)throw new Error("invert: expected non-zero number");if(t<=Ti)throw new Error("invert: expected positive modulus, got "+t);let e=fi(a,t),i=t,n=Ti,r=oi,s=oi,o=Ti;for(;e!==Ti;){let u=i/e,m=i%e,h=n-s*u,y=r-o*u;i=e,e=m,n=s,r=o,s=h,o=y}if(i!==oi)throw new Error("invert: does not exist");return fi(n,t)}function eA(a){let t=(a-oi)/$s,e,i,n;for(e=a-oi,i=0;e%$s===Ti;e/=$s,i++);for(n=$s;n<a&&Z2(n,t,a)!==a-oi;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){let s=(a+oi)/_E;return function(l,u){let m=l.pow(u,s);if(!l.eql(l.sqr(m),u))throw new Error("Cannot find square root");return m}}let r=(e+oi)/$s;return function(o,l){if(o.pow(l,t)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=i,m=o.pow(o.mul(o.ONE,n),e),h=o.pow(l,r),y=o.pow(l,e);for(;!o.eql(y,o.ONE);){if(o.eql(y,o.ZERO))return o.ZERO;let x=1;for(let S=o.sqr(y);x<u&&!o.eql(S,o.ONE);x++)S=o.sqr(S);let E=o.pow(m,oi<<BigInt(u-x-1));m=o.sqr(E),h=o.mul(h,E),y=o.mul(y,m),u=x}return h}}function tA(a){if(a%_E===X2){let t=(a+oi)/_E;return function(i,n){let r=i.pow(n,t);if(!i.eql(i.sqr(r),n))throw new Error("Cannot find square root");return r}}if(a%AT===kT){let t=(a-kT)/AT;return function(i,n){let r=i.mul(n,$s),s=i.pow(r,t),o=i.mul(n,s),l=i.mul(i.mul(o,$s),s),u=i.mul(o,i.sub(l,i.ONE));if(!i.eql(i.sqr(u),n))throw new Error("Cannot find square root");return u}}return a%J2,eA(a)}function bh(a){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=iA.reduce((i,n)=>(i[n]="function",i),t);return kn(a,e)}function aA(a,t,e){if(e<Ti)throw new Error("invalid exponent, negatives unsupported");if(e===Ti)return a.ONE;if(e===oi)return t;let i=a.ONE,n=t;for(;e>Ti;)e&oi&&(i=a.mul(i,n)),n=a.sqr(n),e>>=oi;return i}function nA(a,t){let e=new Array(t.length),i=t.reduce((r,s,o)=>a.is0(s)?r:(e[o]=r,a.mul(r,s)),a.ONE),n=a.inv(i);return t.reduceRight((r,s,o)=>a.is0(s)?r:(e[o]=a.mul(r,e[o]),a.mul(r,s)),n),e}function LE(a,t){let e=t!==void 0?t:a.toString(2).length,i=Math.ceil(e/8);return{nBitLength:e,nByteLength:i}}function gh(a,t,e=!1,i={}){if(a<=Ti)throw new Error("invalid field: expected ORDER > 0, got "+a);let{nBitLength:n,nByteLength:r}=LE(a,t);if(r>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s,o=Object.freeze({ORDER:a,isLE:e,BITS:n,BYTES:r,MASK:Nc(n),ZERO:Ti,ONE:oi,create:l=>fi(l,a),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return Ti<=l&&l<a},is0:l=>l===Ti,isOdd:l=>(l&oi)===oi,neg:l=>fi(-l,a),eql:(l,u)=>l===u,sqr:l=>fi(l*l,a),add:(l,u)=>fi(l+u,a),sub:(l,u)=>fi(l-u,a),mul:(l,u)=>fi(l*u,a),pow:(l,u)=>aA(o,l,u),div:(l,u)=>fi(l*yh(u,a),a),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>yh(l,a),sqrt:i.sqrt||(l=>(s||(s=tA(a)),s(o,l))),invertBatch:l=>nA(o,l),cmov:(l,u,m)=>m?u:l,toBytes:l=>e?dh(l,r):nn(l,r),fromBytes:l=>{if(l.length!==r)throw new Error("Field.fromBytes: expected "+r+" bytes, got "+l.length);return e?hh(l):ca(l)}});return Object.freeze(o)}function MT(a){if(typeof a!="bigint")throw new Error("field order must be bigint");let t=a.toString(2).length;return Math.ceil(t/8)}function vE(a){let t=MT(a);return t+Math.ceil(t/2)}function BT(a,t,e=!1){let i=a.length,n=MT(t),r=vE(t);if(i<16||i<r||i>1024)throw new Error("expected "+r+"-1024 bytes of input, got "+i);let s=e?hh(a):ca(a),o=fi(s,t-oi)+oi;return e?dh(o,n):nn(o,n)}var Ti,oi,$s,X2,_E,kT,AT,Q2,J2,iA,Oc=de(()=>{"use strict";Ys();Ti=BigInt(0),oi=BigInt(1),$s=BigInt(2),X2=BigInt(3),_E=BigInt(4),kT=BigInt(5),AT=BigInt(8),Q2=BigInt(9),J2=BigInt(16);iA=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function xE(a,t){let e=t.negate();return a?e:t}function PT(a,t){if(!Number.isSafeInteger(a)||a<=0||a>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+a)}function IE(a,t){PT(a,t);let e=Math.ceil(t/a)+1,i=2**(a-1);return{windows:e,windowSize:i}}function rA(a,t){if(!Array.isArray(a))throw new Error("array expected");a.forEach((e,i)=>{if(!(e instanceof t))throw new Error("invalid point at index "+i)})}function sA(a,t){if(!Array.isArray(a))throw new Error("array of scalars expected");a.forEach((e,i)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+i)})}function wE(a){return NT.get(a)||1}function OT(a,t){return{constTimeNegate:xE,hasPrecomputes(e){return wE(e)!==1},unsafeLadder(e,i,n=a.ZERO){let r=e;for(;i>RT;)i&_h&&(n=n.add(r)),r=r.double(),i>>=_h;return n},precomputeWindow(e,i){let{windows:n,windowSize:r}=IE(i,t),s=[],o=e,l=o;for(let u=0;u<n;u++){l=o,s.push(l);for(let m=1;m<r;m++)l=l.add(o),s.push(l);o=l.double()}return s},wNAF(e,i,n){let{windows:r,windowSize:s}=IE(e,t),o=a.ZERO,l=a.BASE,u=BigInt(2**e-1),m=2**e,h=BigInt(e);for(let y=0;y<r;y++){let x=y*s,E=Number(n&u);n>>=h,E>s&&(E-=m,n+=_h);let S=x,T=x+Math.abs(E)-1,N=y%2!==0,F=E<0;E===0?l=l.add(xE(N,i[S])):o=o.add(xE(F,i[T]))}return{p:o,f:l}},wNAFUnsafe(e,i,n,r=a.ZERO){let{windows:s,windowSize:o}=IE(e,t),l=BigInt(2**e-1),u=2**e,m=BigInt(e);for(let h=0;h<s;h++){let y=h*o;if(n===RT)break;let x=Number(n&l);if(n>>=m,x>o&&(x-=u,n+=_h),x===0)continue;let E=i[y+Math.abs(x)-1];x<0&&(E=E.negate()),r=r.add(E)}return r},getPrecomputes(e,i,n){let r=EE.get(i);return r||(r=this.precomputeWindow(i,e),e!==1&&EE.set(i,n(r))),r},wNAFCached(e,i,n){let r=wE(e);return this.wNAF(r,this.getPrecomputes(r,e,n),i)},wNAFCachedUnsafe(e,i,n,r){let s=wE(e);return s===1?this.unsafeLadder(e,i,r):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),i,r)},setWindowSize(e,i){PT(i,t),NT.set(e,i),EE.delete(e)}}}function HT(a,t,e,i){if(rA(e,a),sA(i,t),e.length!==i.length)throw new Error("arrays of points and scalars must have equal length");let n=a.ZERO,r=yE(BigInt(e.length)),s=r>12?r-3:r>4?r-2:r?2:1,o=(1<<s)-1,l=new Array(o+1).fill(n),u=Math.floor((t.BITS-1)/s)*s,m=n;for(let h=u;h>=0;h-=s){l.fill(n);for(let x=0;x<i.length;x++){let E=i[x],S=Number(E>>BigInt(h)&BigInt(o));l[S]=l[S].add(e[x])}let y=n;for(let x=l.length-1,E=n;x>0;x--)E=E.add(l[x]),y=y.add(E);if(m=m.add(y),h!==0)for(let x=0;x<s;x++)m=m.double()}return m}function TE(a){return bh(a.Fp),kn(a,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...LE(a.n,a.nBitLength),...a,p:a.Fp.ORDER})}var RT,_h,EE,NT,UT=de(()=>{"use strict";Oc();Ys();RT=BigInt(0),_h=BigInt(1);EE=new WeakMap,NT=new WeakMap});function FT(a){a.lowS!==void 0&&js("lowS",a.lowS),a.prehash!==void 0&&js("prehash",a.prehash)}function oA(a){let t=TE(a);kn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:e,Fp:i,a:n}=t;if(e){if(!i.eql(n,i.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}function uA(a){let t=oA(a),{Fp:e}=t,i=gh(t.n,t.nBitLength),n=t.toBytes||((S,T,N)=>{let F=T.toAffine();return zi(Uint8Array.from([4]),e.toBytes(F.x),e.toBytes(F.y))}),r=t.fromBytes||(S=>{let T=S.subarray(1),N=e.fromBytes(T.subarray(0,e.BYTES)),F=e.fromBytes(T.subarray(e.BYTES,2*e.BYTES));return{x:N,y:F}});function s(S){let{a:T,b:N}=t,F=e.sqr(S),G=e.mul(F,S);return e.add(e.add(G,e.mul(S,T)),N)}if(!e.eql(e.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(S){return Kr(S,jt,t.n)}function l(S){let{allowedPrivateKeyLengths:T,nByteLength:N,wrapPrivateKey:F,n:G}=t;if(T&&typeof S!="bigint"){if(zr(S)&&(S=zs(S)),typeof S!="string"||!T.includes(S.length))throw new Error("invalid private key");S=S.padStart(N*2,"0")}let Y;try{Y=typeof S=="bigint"?S:ca(wi("private key",S,N))}catch{throw new Error("invalid private key, expected hex or "+N+" bytes, got "+typeof S)}return F&&(Y=fi(Y,G)),Dn("private key",Y,jt,G),Y}function u(S){if(!(S instanceof y))throw new Error("ProjectivePoint expected")}let m=fh((S,T)=>{let{px:N,py:F,pz:G}=S;if(e.eql(G,e.ONE))return{x:N,y:F};let Y=S.is0();T==null&&(T=Y?e.ONE:e.inv(G));let Z=e.mul(N,T),ne=e.mul(F,T),J=e.mul(G,T);if(Y)return{x:e.ZERO,y:e.ZERO};if(!e.eql(J,e.ONE))throw new Error("invZ was invalid");return{x:Z,y:ne}}),h=fh(S=>{if(S.is0()){if(t.allowInfinityPoint&&!e.is0(S.py))return;throw new Error("bad point: ZERO")}let{x:T,y:N}=S.toAffine();if(!e.isValid(T)||!e.isValid(N))throw new Error("bad point: x or y not FE");let F=e.sqr(N),G=s(T);if(!e.eql(F,G))throw new Error("bad point: equation left != right");if(!S.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class y{constructor(T,N,F){if(this.px=T,this.py=N,this.pz=F,T==null||!e.isValid(T))throw new Error("x required");if(N==null||!e.isValid(N))throw new Error("y required");if(F==null||!e.isValid(F))throw new Error("z required");Object.freeze(this)}static fromAffine(T){let{x:N,y:F}=T||{};if(!T||!e.isValid(N)||!e.isValid(F))throw new Error("invalid affine point");if(T instanceof y)throw new Error("projective point not allowed");let G=Y=>e.eql(Y,e.ZERO);return G(N)&&G(F)?y.ZERO:new y(N,F,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(T){let N=e.invertBatch(T.map(F=>F.pz));return T.map((F,G)=>F.toAffine(N[G])).map(y.fromAffine)}static fromHex(T){let N=y.fromAffine(r(wi("pointHex",T)));return N.assertValidity(),N}static fromPrivateKey(T){return y.BASE.multiply(l(T))}static msm(T,N){return HT(y,i,T,N)}_setWindowSize(T){E.setWindowSize(this,T)}assertValidity(){h(this)}hasEvenY(){let{y:T}=this.toAffine();if(e.isOdd)return!e.isOdd(T);throw new Error("Field doesn't support isOdd")}equals(T){u(T);let{px:N,py:F,pz:G}=this,{px:Y,py:Z,pz:ne}=T,J=e.eql(e.mul(N,ne),e.mul(Y,G)),ue=e.eql(e.mul(F,ne),e.mul(Z,G));return J&&ue}negate(){return new y(this.px,e.neg(this.py),this.pz)}double(){let{a:T,b:N}=t,F=e.mul(N,Lh),{px:G,py:Y,pz:Z}=this,ne=e.ZERO,J=e.ZERO,ue=e.ZERO,se=e.mul(G,G),Ie=e.mul(Y,Y),Ce=e.mul(Z,Z),te=e.mul(G,Y);return te=e.add(te,te),ue=e.mul(G,Z),ue=e.add(ue,ue),ne=e.mul(T,ue),J=e.mul(F,Ce),J=e.add(ne,J),ne=e.sub(Ie,J),J=e.add(Ie,J),J=e.mul(ne,J),ne=e.mul(te,ne),ue=e.mul(F,ue),Ce=e.mul(T,Ce),te=e.sub(se,Ce),te=e.mul(T,te),te=e.add(te,ue),ue=e.add(se,se),se=e.add(ue,se),se=e.add(se,Ce),se=e.mul(se,te),J=e.add(J,se),Ce=e.mul(Y,Z),Ce=e.add(Ce,Ce),se=e.mul(Ce,te),ne=e.sub(ne,se),ue=e.mul(Ce,Ie),ue=e.add(ue,ue),ue=e.add(ue,ue),new y(ne,J,ue)}add(T){u(T);let{px:N,py:F,pz:G}=this,{px:Y,py:Z,pz:ne}=T,J=e.ZERO,ue=e.ZERO,se=e.ZERO,Ie=t.a,Ce=e.mul(t.b,Lh),te=e.mul(N,Y),et=e.mul(F,Z),me=e.mul(G,ne),ke=e.add(N,F),Me=e.add(Y,Z);ke=e.mul(ke,Me),Me=e.add(te,et),ke=e.sub(ke,Me),Me=e.add(N,G);let V=e.add(Y,ne);return Me=e.mul(Me,V),V=e.add(te,me),Me=e.sub(Me,V),V=e.add(F,G),J=e.add(Z,ne),V=e.mul(V,J),J=e.add(et,me),V=e.sub(V,J),se=e.mul(Ie,Me),J=e.mul(Ce,me),se=e.add(J,se),J=e.sub(et,se),se=e.add(et,se),ue=e.mul(J,se),et=e.add(te,te),et=e.add(et,te),me=e.mul(Ie,me),Me=e.mul(Ce,Me),et=e.add(et,me),me=e.sub(te,me),me=e.mul(Ie,me),Me=e.add(Me,me),te=e.mul(et,Me),ue=e.add(ue,te),te=e.mul(V,Me),J=e.mul(ke,J),J=e.sub(J,te),te=e.mul(ke,et),se=e.mul(V,se),se=e.add(se,te),new y(J,ue,se)}subtract(T){return this.add(T.negate())}is0(){return this.equals(y.ZERO)}wNAF(T){return E.wNAFCached(this,T,y.normalizeZ)}multiplyUnsafe(T){let{endo:N,n:F}=t;Dn("scalar",T,rn,F);let G=y.ZERO;if(T===rn)return G;if(this.is0()||T===jt)return this;if(!N||E.hasPrecomputes(this))return E.wNAFCachedUnsafe(this,T,y.normalizeZ);let{k1neg:Y,k1:Z,k2neg:ne,k2:J}=N.splitScalar(T),ue=G,se=G,Ie=this;for(;Z>rn||J>rn;)Z&jt&&(ue=ue.add(Ie)),J&jt&&(se=se.add(Ie)),Ie=Ie.double(),Z>>=jt,J>>=jt;return Y&&(ue=ue.negate()),ne&&(se=se.negate()),se=new y(e.mul(se.px,N.beta),se.py,se.pz),ue.add(se)}multiply(T){let{endo:N,n:F}=t;Dn("scalar",T,jt,F);let G,Y;if(N){let{k1neg:Z,k1:ne,k2neg:J,k2:ue}=N.splitScalar(T),{p:se,f:Ie}=this.wNAF(ne),{p:Ce,f:te}=this.wNAF(ue);se=E.constTimeNegate(Z,se),Ce=E.constTimeNegate(J,Ce),Ce=new y(e.mul(Ce.px,N.beta),Ce.py,Ce.pz),G=se.add(Ce),Y=Ie.add(te)}else{let{p:Z,f:ne}=this.wNAF(T);G=Z,Y=ne}return y.normalizeZ([G,Y])[0]}multiplyAndAddUnsafe(T,N,F){let G=y.BASE,Y=(ne,J)=>J===rn||J===jt||!ne.equals(G)?ne.multiplyUnsafe(J):ne.multiply(J),Z=Y(this,N).add(Y(T,F));return Z.is0()?void 0:Z}toAffine(T){return m(this,T)}isTorsionFree(){let{h:T,isTorsionFree:N}=t;if(T===jt)return!0;if(N)return N(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:T,clearCofactor:N}=t;return T===jt?this:N?N(y,this):this.multiplyUnsafe(t.h)}toRawBytes(T=!0){return js("isCompressed",T),this.assertValidity(),n(y,this,T)}toHex(T=!0){return js("isCompressed",T),zs(this.toRawBytes(T))}}y.BASE=new y(t.Gx,t.Gy,e.ONE),y.ZERO=new y(e.ZERO,e.ONE,e.ZERO);let x=t.nBitLength,E=OT(y,t.endo?Math.ceil(x/2):x);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function pA(a){let t=TE(a);return kn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function GT(a){let t=pA(a),{Fp:e,n:i}=t,n=e.BYTES+1,r=2*e.BYTES+1;function s(me){return fi(me,i)}function o(me){return yh(me,i)}let{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:m,isWithinCurveOrder:h}=uA({...t,toBytes(me,ke,Me){let V=ke.toAffine(),Ye=e.toBytes(V.x),Se=zi;return js("isCompressed",Me),Me?Se(Uint8Array.from([ke.hasEvenY()?2:3]),Ye):Se(Uint8Array.from([4]),Ye,e.toBytes(V.y))},fromBytes(me){let ke=me.length,Me=me[0],V=me.subarray(1);if(ke===n&&(Me===2||Me===3)){let Ye=ca(V);if(!Kr(Ye,jt,e.ORDER))throw new Error("Point is not on curve");let Se=m(Ye),lt;try{lt=e.sqrt(Se)}catch(Vt){let at=Vt instanceof Error?": "+Vt.message:"";throw new Error("Point is not on curve"+at)}let yt=(lt&jt)===jt;return(Me&1)===1!==yt&&(lt=e.neg(lt)),{x:Ye,y:lt}}else if(ke===r&&Me===4){let Ye=e.fromBytes(V.subarray(0,e.BYTES)),Se=e.fromBytes(V.subarray(e.BYTES,2*e.BYTES));return{x:Ye,y:Se}}else{let Ye=n,Se=r;throw new Error("invalid Point, expected length of "+Ye+", or uncompressed "+Se+", got "+ke)}}}),y=me=>zs(nn(me,t.nByteLength));function x(me){let ke=i>>jt;return me>ke}function E(me){return x(me)?s(-me):me}let S=(me,ke,Me)=>ca(me.slice(ke,Me));class T{constructor(ke,Me,V){this.r=ke,this.s=Me,this.recovery=V,this.assertValidity()}static fromCompact(ke){let Me=t.nByteLength;return ke=wi("compactSignature",ke,Me*2),new T(S(ke,0,Me),S(ke,Me,2*Me))}static fromDER(ke){let{r:Me,s:V}=rr.toSig(wi("DER",ke));return new T(Me,V)}assertValidity(){Dn("r",this.r,jt,i),Dn("s",this.s,jt,i)}addRecoveryBit(ke){return new T(this.r,this.s,ke)}recoverPublicKey(ke){let{r:Me,s:V,recovery:Ye}=this,Se=ne(wi("msgHash",ke));if(Ye==null||![0,1,2,3].includes(Ye))throw new Error("recovery id invalid");let lt=Ye===2||Ye===3?Me+t.n:Me;if(lt>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");let yt=Ye&1?"03":"02",qt=l.fromHex(yt+y(lt)),Vt=o(lt),at=s(-Se*Vt),Ft=s(V*Vt),Zt=l.BASE.multiplyAndAddUnsafe(qt,at,Ft);if(!Zt)throw new Error("point at infinify");return Zt.assertValidity(),Zt}hasHighS(){return x(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return qs(this.toDERHex())}toDERHex(){return rr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return qs(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}let N={isValidPrivateKey(me){try{return u(me),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let me=vE(t.n);return BT(t.randomBytes(me),t.n)},precompute(me=8,ke=l.BASE){return ke._setWindowSize(me),ke.multiply(BigInt(3)),ke}};function F(me,ke=!0){return l.fromPrivateKey(me).toRawBytes(ke)}function G(me){let ke=zr(me),Me=typeof me=="string",V=(ke||Me)&&me.length;return ke?V===n||V===r:Me?V===2*n||V===2*r:me instanceof l}function Y(me,ke,Me=!0){if(G(me))throw new Error("first arg must be private key");if(!G(ke))throw new Error("second arg must be public key");return l.fromHex(ke).multiply(u(me)).toRawBytes(Me)}let Z=t.bits2int||function(me){if(me.length>8192)throw new Error("input is too large");let ke=ca(me),Me=me.length*8-t.nBitLength;return Me>0?ke>>BigInt(Me):ke},ne=t.bits2int_modN||function(me){return s(Z(me))},J=Nc(t.nBitLength);function ue(me){return Dn("num < 2^"+t.nBitLength,me,rn,J),nn(me,t.nByteLength)}function se(me,ke,Me=Ie){if(["recovered","canonical"].some(aa=>aa in Me))throw new Error("sign() legacy options not supported");let{hash:V,randomBytes:Ye}=t,{lowS:Se,prehash:lt,extraEntropy:yt}=Me;Se==null&&(Se=!0),me=wi("msgHash",me),FT(Me),lt&&(me=wi("prehashed msgHash",V(me)));let qt=ne(me),Vt=u(ke),at=[ue(Vt),ue(qt)];if(yt!=null&&yt!==!1){let aa=yt===!0?Ye(e.BYTES):yt;at.push(wi("extraEntropy",aa))}let Ft=zi(...at),Zt=qt;function Xi(aa){let na=Z(aa);if(!h(na))return;let yn=o(na),ra=l.BASE.multiply(na).toAffine(),Qi=s(ra.x);if(Qi===rn)return;let ga=s(yn*s(Zt+Qi*Vt));if(ga===rn)return;let _a=(ra.x===Qi?0:2)|Number(ra.y&jt),bn=ga;return Se&&x(ga)&&(bn=E(ga),_a^=1),new T(Qi,bn,_a)}return{seed:Ft,k2sig:Xi}}let Ie={lowS:t.lowS,prehash:!1},Ce={lowS:t.lowS,prehash:!1};function te(me,ke,Me=Ie){let{seed:V,k2sig:Ye}=se(me,ke,Me),Se=t;return bE(Se.hash.outputLen,Se.nByteLength,Se.hmac)(V,Ye)}l.BASE._setWindowSize(8);function et(me,ke,Me,V=Ce){let Ye=me;ke=wi("msgHash",ke),Me=wi("publicKey",Me);let{lowS:Se,prehash:lt,format:yt}=V;if(FT(V),"strict"in V)throw new Error("options.strict was renamed to lowS");if(yt!==void 0&&yt!=="compact"&&yt!=="der")throw new Error("format must be compact or der");let qt=typeof Ye=="string"||zr(Ye),Vt=!qt&&!yt&&typeof Ye=="object"&&Ye!==null&&typeof Ye.r=="bigint"&&typeof Ye.s=="bigint";if(!qt&&!Vt)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let at,Ft;try{if(Vt&&(at=new T(Ye.r,Ye.s)),qt){try{yt!=="compact"&&(at=T.fromDER(Ye))}catch(_a){if(!(_a instanceof rr.Err))throw _a}!at&&yt!=="der"&&(at=T.fromCompact(Ye))}Ft=l.fromHex(Me)}catch{return!1}if(!at||Se&&at.hasHighS())return!1;lt&&(ke=t.hash(ke));let{r:Zt,s:Xi}=at,aa=ne(ke),na=o(Xi),yn=s(aa*na),ra=s(Zt*na),Qi=l.BASE.multiplyAndAddUnsafe(Ft,yn,ra)?.toAffine();return Qi?s(Qi.x)===Zt:!1}return{CURVE:t,getPublicKey:F,getSharedSecret:Y,sign:te,verify:et,ProjectivePoint:l,Signature:T,utils:N}}function mA(a,t){let e=a.ORDER,i=rn;for(let E=e-jt;E%qr===rn;E/=qr)i+=jt;let n=i,r=qr<<n-jt-jt,s=r*qr,o=(e-jt)/s,l=(o-jt)/qr,u=s-jt,m=r,h=a.pow(t,o),y=a.pow(t,(o+jt)/qr),x=(E,S)=>{let T=h,N=a.pow(S,u),F=a.sqr(N);F=a.mul(F,S);let G=a.mul(E,F);G=a.pow(G,l),G=a.mul(G,N),N=a.mul(G,S),F=a.mul(G,E);let Y=a.mul(F,N);G=a.pow(Y,m);let Z=a.eql(G,a.ONE);N=a.mul(F,y),G=a.mul(Y,T),F=a.cmov(N,F,Z),Y=a.cmov(G,Y,Z);for(let ne=n;ne>jt;ne--){let J=ne-qr;J=qr<<J-jt;let ue=a.pow(Y,J),se=a.eql(ue,a.ONE);N=a.mul(F,T),T=a.mul(T,T),ue=a.mul(Y,T),F=a.cmov(N,F,se),Y=a.cmov(ue,Y,se)}return{isValid:Z,value:F}};if(a.ORDER%VT===Lh){let E=(a.ORDER-Lh)/VT,S=a.sqrt(a.neg(t));x=(T,N)=>{let F=a.sqr(N),G=a.mul(T,N);F=a.mul(F,G);let Y=a.pow(F,E);Y=a.mul(Y,G);let Z=a.mul(Y,S),ne=a.mul(a.sqr(Y),N),J=a.eql(ne,T),ue=a.cmov(Z,Y,J);return{isValid:J,value:ue}}}return x}function WT(a,t){if(bh(a),!a.isValid(t.A)||!a.isValid(t.B)||!a.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let e=mA(a,t.Z);if(!a.isOdd)throw new Error("Fp.isOdd is not implemented!");return i=>{let n,r,s,o,l,u,m,h;n=a.sqr(i),n=a.mul(n,t.Z),r=a.sqr(n),r=a.add(r,n),s=a.add(r,a.ONE),s=a.mul(s,t.B),o=a.cmov(t.Z,a.neg(r),!a.eql(r,a.ZERO)),o=a.mul(o,t.A),r=a.sqr(s),u=a.sqr(o),l=a.mul(u,t.A),r=a.add(r,l),r=a.mul(r,s),u=a.mul(u,o),l=a.mul(u,t.B),r=a.add(r,l),m=a.mul(n,s);let{isValid:y,value:x}=e(r,u);h=a.mul(n,i),h=a.mul(h,x),m=a.cmov(m,s,y),h=a.cmov(h,x,y);let E=a.isOdd(i)===a.isOdd(h);return h=a.cmov(a.neg(h),h,E),m=a.div(m,o),{x:m,y:h}}}var lA,cA,CE,rr,rn,jt,qr,Lh,VT,SE=de(()=>{"use strict";UT();Oc();Ys();Ys();({bytesToNumberBE:lA,hexToBytes:cA}=gE),CE=class extends Error{constructor(t=""){super(t)}},rr={Err:CE,_tlv:{encode:(a,t)=>{let{Err:e}=rr;if(a<0||a>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");let i=t.length/2,n=Ks(i);if(n.length/2&128)throw new e("tlv.encode: long form length too big");let r=i>127?Ks(n.length/2|128):"";return Ks(a)+r+n+t},decode(a,t){let{Err:e}=rr,i=0;if(a<0||a>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[i++]!==a)throw new e("tlv.decode: wrong tlv");let n=t[i++],r=!!(n&128),s=0;if(!r)s=n;else{let l=n&127;if(!l)throw new e("tlv.decode(long): indefinite length not supported");if(l>4)throw new e("tlv.decode(long): byte length is too big");let u=t.subarray(i,i+l);if(u.length!==l)throw new e("tlv.decode: length bytes not complete");if(u[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(let m of u)s=s<<8|m;if(i+=l,s<128)throw new e("tlv.decode(long): not minimal encoding")}let o=t.subarray(i,i+s);if(o.length!==s)throw new e("tlv.decode: wrong value length");return{v:o,l:t.subarray(i+s)}}},_int:{encode(a){let{Err:t}=rr;if(a<rn)throw new t("integer: negative integers are not allowed");let e=Ks(a);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(a){let{Err:t}=rr;if(a[0]&128)throw new t("invalid signature integer: negative");if(a[0]===0&&!(a[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return lA(a)}},toSig(a){let{Err:t,_int:e,_tlv:i}=rr,n=typeof a=="string"?cA(a):a;Ma(n);let{v:r,l:s}=i.decode(48,n);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:o,l}=i.decode(2,r),{v:u,l:m}=i.decode(2,l);if(m.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(o),s:e.decode(u)}},hexFromSig(a){let{_tlv:t,_int:e}=rr,i=t.encode(2,e.encode(a.r)),n=t.encode(2,e.encode(a.s)),r=i+n;return t.encode(48,r)}},rn=BigInt(0),jt=BigInt(1),qr=BigInt(2),Lh=BigInt(3),VT=BigInt(4)});function hA(a){return{hash:a,hmac:(t,...e)=>mE(a,t,Gw(...e)),randomBytes:Rm}}function jT(a,t){let e=i=>GT({...a,...hA(i)});return{...e(t),create:e}}var zT=de(()=>{"use strict";CT();Bs();SE();});function Yr(a,t){if(Hc(a),Hc(t),a<0||a>=1<<8*t)throw new Error("invalid I2OSP input: "+a);let e=Array.from({length:t}).fill(0);for(let i=t-1;i>=0;i--)e[i]=a&255,a>>>=8;return new Uint8Array(e)}function fA(a,t){let e=new Uint8Array(a.length);for(let i=0;i<a.length;i++)e[i]=a[i]^t[i];return e}function Hc(a){if(!Number.isSafeInteger(a))throw new Error("number expected")}function yA(a,t,e,i){Ma(a),Ma(t),Hc(e),t.length>255&&(t=i(zi(Pc("H2C-OVERSIZE-DST-"),t)));let{outputLen:n,blockLen:r}=i,s=Math.ceil(e/n);if(e>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");let o=zi(t,Yr(t.length,1)),l=Yr(0,r),u=Yr(e,2),m=new Array(s),h=i(zi(l,a,u,Yr(0,1),o));m[0]=i(zi(h,Yr(1,1),o));for(let x=1;x<=s;x++){let E=[fA(h,m[x-1]),Yr(x+1,1),o];m[x]=i(zi(...E))}return zi(...m).slice(0,e)}function bA(a,t,e,i,n){if(Ma(a),Ma(t),Hc(e),t.length>255){let r=Math.ceil(2*i/8);t=n.create({dkLen:r}).update(Pc("H2C-OVERSIZE-DST-")).update(t).digest()}if(e>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return n.create({dkLen:e}).update(a).update(Yr(e,2)).update(t).update(Yr(t.length,1)).digest()}function KT(a,t,e){kn(e,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:i,k:n,m:r,hash:s,expand:o,DST:l}=e;Ma(a),Hc(t);let u=typeof l=="string"?Pc(l):l,m=i.toString(2).length,h=Math.ceil((m+n)/8),y=t*r*h,x;if(o==="xmd")x=yA(a,u,y,s);else if(o==="xof")x=bA(a,u,y,n,s);else if(o==="_internal_pass")x=a;else throw new Error('expand must be "xmd" or "xof"');let E=new Array(t);for(let S=0;S<t;S++){let T=new Array(r);for(let N=0;N<r;N++){let F=h*(N+S*r),G=x.subarray(F,F+h);T[N]=fi(dA(G),i)}E[S]=T}return E}function qT(a,t){let e=t.map(i=>Array.from(i).reverse());return(i,n)=>{let[r,s,o,l]=e.map(u=>u.reduce((m,h)=>a.add(a.mul(m,i),h)));return i=a.div(r,s),n=a.mul(n,a.div(o,l)),{x:i,y:n}}}function YT(a,t,e){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(i,n){let r=KT(i,2,{...e,DST:e.DST,...n}),s=a.fromAffine(t(r[0])),o=a.fromAffine(t(r[1])),l=s.add(o).clearCofactor();return l.assertValidity(),l},encodeToCurve(i,n){let r=KT(i,1,{...e,DST:e.encodeDST,...n}),s=a.fromAffine(t(r[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(i){if(!Array.isArray(i))throw new Error("mapToCurve: expected array of bigints");for(let r of i)if(typeof r!="bigint")throw new Error("mapToCurve: expected array of bigints");let n=a.fromAffine(t(i)).clearCofactor();return n.assertValidity(),n}}}var dA,$T=de(()=>{"use strict";Oc();Ys();dA=ca});var nC={};NI(nC,{encodeToCurve:()=>wA,hashToCurve:()=>EA,schnorr:()=>vA,secp256k1:()=>sr});function JT(a){let t=Vc,e=BigInt(3),i=BigInt(6),n=BigInt(11),r=BigInt(22),s=BigInt(23),o=BigInt(44),l=BigInt(88),u=a*a*a%t,m=u*u*a%t,h=Ia(m,e,t)*m%t,y=Ia(h,e,t)*m%t,x=Ia(y,xh,t)*u%t,E=Ia(x,n,t)*x%t,S=Ia(E,r,t)*E%t,T=Ia(S,o,t)*S%t,N=Ia(T,l,t)*T%t,F=Ia(N,o,t)*S%t,G=Ia(F,e,t)*m%t,Y=Ia(G,s,t)*E%t,Z=Ia(Y,i,t)*u%t,ne=Ia(Z,xh,t);if(!$r.eql($r.sqr(ne),a))throw new Error("Cannot find square root");return ne}function Ih(a,...t){let e=QT[a];if(e===void 0){let i=Ws(Uint8Array.from(a,n=>n.charCodeAt(0)));e=zi(i,i),QT[a]=e}return Ws(zi(e,...t))}function AE(a){let t=sr.utils.normPrivateKeyToScalar(a),e=BE.fromPrivateKey(t);return{scalar:e.hasEvenY()?t:Fc(-t),bytes:ME(e)}}function eC(a){Dn("x",a,Uc,Vc);let t=DE(a*a),e=DE(t*a+BigInt(7)),i=JT(e);i%xh!==ZT&&(i=DE(-i));let n=new BE(a,i,Uc);return n.assertValidity(),n}function tC(...a){return Fc(nl(Ih("BIP0340/challenge",...a)))}function _A(a){return AE(a).bytes}function LA(a,t,e=Rm(32)){let i=wi("message",a),{bytes:n,scalar:r}=AE(t),s=wi("auxRand",e,32),o=kE(r^nl(Ih("BIP0340/aux",s))),l=Ih("BIP0340/nonce",o,n,i),u=Fc(nl(l));if(u===ZT)throw new Error("sign failed: k is zero");let{bytes:m,scalar:h}=AE(u),y=tC(m,n,i),x=new Uint8Array(64);if(x.set(m,0),x.set(kE(Fc(h+y*r)),32),!iC(x,i,n))throw new Error("sign: Invalid signature produced");return x}function iC(a,t,e){let i=wi("signature",a,64),n=wi("message",t),r=wi("publicKey",e,32);try{let s=eC(nl(r)),o=nl(i.subarray(0,32));if(!Kr(o,Uc,Vc))return!1;let l=nl(i.subarray(32,64));if(!Kr(l,Uc,vh))return!1;let u=tC(kE(o),ME(s),n),m=gA(s,l,Fc(-u));return!(!m||!m.hasEvenY()||m.toAffine().x!==o)}catch{return!1}}var Vc,vh,Uc,xh,XT,$r,sr,ZT,QT,ME,kE,DE,Fc,BE,gA,nl,vA,xA,IA,aC,EA,wA,Eh=de(()=>{"use strict";pE();Bs();zT();$T();Oc();Ys();SE();Vc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),vh=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Uc=BigInt(1),xh=BigInt(2),XT=(a,t)=>(a+t/xh)/t;$r=gh(Vc,void 0,void 0,{sqrt:JT}),sr=jT({a:BigInt(0),b:BigInt(7),Fp:$r,n:vh,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:a=>{let t=vh,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-Uc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),r=e,s=BigInt("0x100000000000000000000000000000000"),o=XT(r*a,t),l=XT(-i*a,t),u=fi(a-o*e-l*n,t),m=fi(-o*i-l*r,t),h=u>s,y=m>s;if(h&&(u=t-u),y&&(m=t-m),u>s||m>s)throw new Error("splitScalar: Endomorphism failed, k="+a);return{k1neg:h,k1:u,k2neg:y,k2:m}}}},Ws),ZT=BigInt(0),QT={};ME=a=>a.toRawBytes(!0).slice(1),kE=a=>nn(a,32),DE=a=>fi(a,Vc),Fc=a=>fi(a,vh),BE=sr.ProjectivePoint,gA=(a,t,e)=>BE.BASE.multiplyAndAddUnsafe(a,t,e);nl=ca;vA=(()=>({getPublicKey:_A,sign:LA,verify:iC,utils:{randomPrivateKey:sr.utils.randomPrivateKey,lift_x:eC,pointToBytes:ME,numberToBytesBE:nn,bytesToNumberBE:ca,taggedHash:Ih,mod:fi}}))(),xA=(()=>qT($r,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(a=>a.map(t=>BigInt(t)))))(),IA=(()=>WT($r,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:$r.create(BigInt("-11"))}))(),aC=(()=>YT(sr.ProjectivePoint,a=>{let{x:t,y:e}=IA($r.create(a[0]));return xA(t,e)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:$r.ORDER,m:1,k:128,expand:"xmd",hash:Ws}))(),EA=(()=>aC.hashToCurve)(),wA=(()=>aC.encodeToCurve)()});var or,Ba,rl,sl,ol,ll,cl,ul,pl,ml,An,Ra,Xr=de(()=>{"use strict";Go();dt();or=class extends X{constructor({cause:t,message:e}={}){let i=e?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${i?`with reason: ${i}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}};Object.defineProperty(or,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(or,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});Ba=class extends X{constructor({cause:t,maxFeePerGas:e}={}){super(`The fee cap (\`maxFeePerGas\`${e?` = ${Ei(e)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}};Object.defineProperty(Ba,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});rl=class extends X{constructor({cause:t,maxFeePerGas:e}={}){super(`The fee cap (\`maxFeePerGas\`${e?` = ${Ei(e)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}};Object.defineProperty(rl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});sl=class extends X{constructor({cause:t,nonce:e}={}){super(`Nonce provided for the transaction ${e?`(${e}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}};Object.defineProperty(sl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});ol=class extends X{constructor({cause:t,nonce:e}={}){super([`Nonce provided for the transaction ${e?`(${e}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}};Object.defineProperty(ol,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});ll=class extends X{constructor({cause:t,nonce:e}={}){super(`Nonce provided for the transaction ${e?`(${e}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}};Object.defineProperty(ll,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});cl=class extends X{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}};Object.defineProperty(cl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});ul=class extends X{constructor({cause:t,gas:e}={}){super(`The amount of gas ${e?`(${e}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}};Object.defineProperty(ul,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});pl=class extends X{constructor({cause:t,gas:e}={}){super(`The amount of gas ${e?`(${e}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}};Object.defineProperty(pl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});ml=class extends X{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}};Object.defineProperty(ml,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});An=class extends X{constructor({cause:t,maxPriorityFeePerGas:e,maxFeePerGas:i}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${e?` = ${Ei(e)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${i?` = ${Ei(i)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}};Object.defineProperty(An,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});Ra=class extends X{constructor({cause:t}){super(`An error occurred while executing: ${t?.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}});function Qr(a,t){let e=(a.details||"").toLowerCase(),i=a instanceof X?a.walk(n=>n?.code===or.code):a;return i instanceof X?new or({cause:a,message:i.details}):or.nodeMessage.test(e)?new or({cause:a,message:a.details}):Ba.nodeMessage.test(e)?new Ba({cause:a,maxFeePerGas:t?.maxFeePerGas}):rl.nodeMessage.test(e)?new rl({cause:a,maxFeePerGas:t?.maxFeePerGas}):sl.nodeMessage.test(e)?new sl({cause:a,nonce:t?.nonce}):ol.nodeMessage.test(e)?new ol({cause:a,nonce:t?.nonce}):ll.nodeMessage.test(e)?new ll({cause:a,nonce:t?.nonce}):cl.nodeMessage.test(e)?new cl({cause:a}):ul.nodeMessage.test(e)?new ul({cause:a,gas:t?.gas}):pl.nodeMessage.test(e)?new pl({cause:a,gas:t?.gas}):ml.nodeMessage.test(e)?new ml({cause:a}):An.nodeMessage.test(e)?new An({cause:a,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new Ra({cause:a})}var Gc=de(()=>{"use strict";dt();Xr()});function Jr(a,{format:t}){if(!t)return{};let e={};function i(r){let s=Object.keys(r);for(let o of s)o in a&&(e[o]=a[o]),r[o]&&typeof r[o]=="object"&&!Array.isArray(r[o])&&i(r[o])}let n=t(a||{});return i(n),e}var Wc=de(()=>{"use strict"});function hl(a,t){return({exclude:e,format:i})=>({exclude:e,format:n=>{let r=t(n);if(e)for(let s of e)delete r[s];return{...r,...i(n)}},type:a})}var Sh=de(()=>{"use strict"});function Pa(a){let t={};return typeof a.authorizationList<"u"&&(t.authorizationList=DA(a.authorizationList)),typeof a.accessList<"u"&&(t.accessList=a.accessList),typeof a.blobVersionedHashes<"u"&&(t.blobVersionedHashes=a.blobVersionedHashes),typeof a.blobs<"u"&&(typeof a.blobs[0]!="string"?t.blobs=a.blobs.map(e=>Et(e)):t.blobs=a.blobs),typeof a.data<"u"&&(t.data=a.data),typeof a.from<"u"&&(t.from=a.from),typeof a.gas<"u"&&(t.gas=Ue(a.gas)),typeof a.gasPrice<"u"&&(t.gasPrice=Ue(a.gasPrice)),typeof a.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=Ue(a.maxFeePerBlobGas)),typeof a.maxFeePerGas<"u"&&(t.maxFeePerGas=Ue(a.maxFeePerGas)),typeof a.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=Ue(a.maxPriorityFeePerGas)),typeof a.nonce<"u"&&(t.nonce=Ue(a.nonce)),typeof a.to<"u"&&(t.to=a.to),typeof a.type<"u"&&(t.type=SA[a.type]),typeof a.value<"u"&&(t.value=Ue(a.value)),t}function DA(a){return a.map(t=>({address:t.contractAddress,r:t.r,s:t.s,chainId:Ue(t.chainId),nonce:Ue(t.nonce),...typeof t.yParity<"u"?{yParity:Ue(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:Ue(t.v)}:{}}))}var SA,Xs=de(()=>{"use strict";Je();SA={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"}});function pC(a){if(!(!a||a.length===0))return a.reduce((t,{slot:e,value:i})=>{if(e.length!==66)throw new vc({size:e.length,targetSize:66,type:"hex"});if(i.length!==66)throw new vc({size:i.length,targetSize:66,type:"hex"});return t[e]=i,t},{})}function kA(a){let{balance:t,nonce:e,state:i,stateDiff:n,code:r}=a,s={};if(r!==void 0&&(s.code=r),t!==void 0&&(s.balance=Ue(t)),e!==void 0&&(s.nonce=Ue(e)),i!==void 0&&(s.state=pC(i)),n!==void 0){if(s.state)throw new eh;s.stateDiff=pC(n)}return s}function dl(a){if(!a)return;let t={};for(let{address:e,...i}of a){if(!Wt(e,{strict:!1}))throw new Yt({address:e});if(t[e])throw new Zm({address:e});t[e]=kA(i)}return t}var Dh=de(()=>{"use strict";In();Em();cE();en();Je()});var W7,j7,z7,K7,q7,Y7,$7,X7,Q7,J7,Z7,e9,t9,i9,a9,n9,r9,s9,o9,l9,c9,u9,p9,m9,h9,d9,f9,y9,b9,g9,_9,L9,v9,x9,I9,E9,w9,T9,C9,S9,D9,k9,A9,M9,B9,R9,P9,N9,O9,H9,U9,F9,V9,G9,W9,j9,z9,K9,q9,Y9,$9,X9,Q9,J9,Z9,eW,tW,iW,aW,nW,rW,sW,oW,lW,cW,uW,pW,mW,hW,dW,fW,yW,bW,gW,_W,LW,vW,xW,IW,EW,wW,TW,CW,SW,DW,fl,RE=de(()=>{"use strict";W7=2n**(8n-1n)-1n,j7=2n**(16n-1n)-1n,z7=2n**(24n-1n)-1n,K7=2n**(32n-1n)-1n,q7=2n**(40n-1n)-1n,Y7=2n**(48n-1n)-1n,$7=2n**(56n-1n)-1n,X7=2n**(64n-1n)-1n,Q7=2n**(72n-1n)-1n,J7=2n**(80n-1n)-1n,Z7=2n**(88n-1n)-1n,e9=2n**(96n-1n)-1n,t9=2n**(104n-1n)-1n,i9=2n**(112n-1n)-1n,a9=2n**(120n-1n)-1n,n9=2n**(128n-1n)-1n,r9=2n**(136n-1n)-1n,s9=2n**(144n-1n)-1n,o9=2n**(152n-1n)-1n,l9=2n**(160n-1n)-1n,c9=2n**(168n-1n)-1n,u9=2n**(176n-1n)-1n,p9=2n**(184n-1n)-1n,m9=2n**(192n-1n)-1n,h9=2n**(200n-1n)-1n,d9=2n**(208n-1n)-1n,f9=2n**(216n-1n)-1n,y9=2n**(224n-1n)-1n,b9=2n**(232n-1n)-1n,g9=2n**(240n-1n)-1n,_9=2n**(248n-1n)-1n,L9=2n**(256n-1n)-1n,v9=-(2n**(8n-1n)),x9=-(2n**(16n-1n)),I9=-(2n**(24n-1n)),E9=-(2n**(32n-1n)),w9=-(2n**(40n-1n)),T9=-(2n**(48n-1n)),C9=-(2n**(56n-1n)),S9=-(2n**(64n-1n)),D9=-(2n**(72n-1n)),k9=-(2n**(80n-1n)),A9=-(2n**(88n-1n)),M9=-(2n**(96n-1n)),B9=-(2n**(104n-1n)),R9=-(2n**(112n-1n)),P9=-(2n**(120n-1n)),N9=-(2n**(128n-1n)),O9=-(2n**(136n-1n)),H9=-(2n**(144n-1n)),U9=-(2n**(152n-1n)),F9=-(2n**(160n-1n)),V9=-(2n**(168n-1n)),G9=-(2n**(176n-1n)),W9=-(2n**(184n-1n)),j9=-(2n**(192n-1n)),z9=-(2n**(200n-1n)),K9=-(2n**(208n-1n)),q9=-(2n**(216n-1n)),Y9=-(2n**(224n-1n)),$9=-(2n**(232n-1n)),X9=-(2n**(240n-1n)),Q9=-(2n**(248n-1n)),J9=-(2n**(256n-1n)),Z9=2n**8n-1n,eW=2n**16n-1n,tW=2n**24n-1n,iW=2n**32n-1n,aW=2n**40n-1n,nW=2n**48n-1n,rW=2n**56n-1n,sW=2n**64n-1n,oW=2n**72n-1n,lW=2n**80n-1n,cW=2n**88n-1n,uW=2n**96n-1n,pW=2n**104n-1n,mW=2n**112n-1n,hW=2n**120n-1n,dW=2n**128n-1n,fW=2n**136n-1n,yW=2n**144n-1n,bW=2n**152n-1n,gW=2n**160n-1n,_W=2n**168n-1n,LW=2n**176n-1n,vW=2n**184n-1n,xW=2n**192n-1n,IW=2n**200n-1n,EW=2n**208n-1n,wW=2n**216n-1n,TW=2n**224n-1n,CW=2n**232n-1n,SW=2n**240n-1n,DW=2n**248n-1n,fl=2n**256n-1n});function ua(a){let{account:t,gasPrice:e,maxFeePerGas:i,maxPriorityFeePerGas:n,to:r}=a,s=t?kt(t):void 0;if(s&&!Wt(s.address))throw new Yt({address:s.address});if(r&&!Wt(r))throw new Yt({address:r});if(typeof e<"u"&&(typeof i<"u"||typeof n<"u"))throw new th;if(i&&i>fl)throw new Ba({maxFeePerGas:i});if(n&&i&&n>i)throw new An({maxFeePerGas:i,maxPriorityFeePerGas:n})}var Zr=de(()=>{"use strict";Pi();RE();In();Xr();tn();en()});function is(a,t){if(!Wt(a,{strict:!1}))throw new Yt({address:a});if(!Wt(t,{strict:!1}))throw new Yt({address:t});return a.toLowerCase()===t.toLowerCase()}var zc=de(()=>{"use strict";In();en()});function pa(a){let{abi:t,args:e,functionName:i,data:n}=a,r=t[0];if(i){let o=wn({abi:t,args:e,name:i});if(!o)throw new Ar(i,{docsPath:HE});r=o}if(r.type!=="function")throw new Ar(void 0,{docsPath:HE});if(!r.outputs)throw new bm(r.name,{docsPath:HE});let s=Ns(r.outputs,n);if(s&&s.length>1)return s;if(s&&s.length===1)return s[0]}var HE,as=de(()=>{"use strict";xi();qm();Oo();HE="/docs/contract/decodeFunctionResult"});var Kc,xC,Gh,IC,UE,FE,VE,Js=de(()=>{"use strict";Kc=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],xC=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],Gh=[...xC,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],IC=[...xC,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],UE=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],FE=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],VE=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}]});var EC,wC=de(()=>{"use strict";EC="0x82ad56cb"});var Wh,TC,CC,jh=de(()=>{"use strict";Wh="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",TC="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",CC="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"});var Zs,zh,Kh,qc,eo,Yc=de(()=>{"use strict";dt();Zs=class extends X{constructor({blockNumber:t,chain:e,contract:i}){super(`Chain "${e.name}" does not support contract "${i.name}".`,{metaMessages:["This could be due to any of the following:",...t&&i.blockCreated&&i.blockCreated>t?[`- The contract "${i.name}" was not deployed until block ${i.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${i.name}" configured.`]],name:"ChainDoesNotSupportContract"})}},zh=class extends X{constructor({chain:t,currentChainId:e}){super(`The current chain of the wallet (id: ${e}) does not match the target chain for the transaction (id: ${t.id} – ${t.name}).`,{metaMessages:[`Current Chain ID:  ${e}`,`Expected Chain ID: ${t.id} – ${t.name}`],name:"ChainMismatchError"})}},Kh=class extends X{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}},qc=class extends X{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}},eo=class extends X{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}});function to(a){let{abi:t,args:e,bytecode:i}=a;if(!e||e.length===0)return i;let n=t.find(s=>"type"in s&&s.type==="constructor");if(!n)throw new mm({docsPath:GE});if(!("inputs"in n))throw new bc({docsPath:GE});if(!n.inputs||n.inputs.length===0)throw new bc({docsPath:GE});let r=va(n.inputs,e);return Wi([i,r])}var GE,qh=de(()=>{"use strict";xi();Da();Hr();GE="/docs/contract/encodeDeployData"});function Na({blockNumber:a,chain:t,contract:e}){let i=t?.contracts?.[e];if(!i)throw new Zs({chain:t,contract:{name:e}});if(a&&i.blockCreated&&i.blockCreated>a)throw new Zs({blockNumber:a,chain:t,contract:{name:e,blockCreated:i.blockCreated}});return i.address}var io=de(()=>{"use strict";Yc()});function Yh(a,{docsPath:t,...e}){let i=(()=>{let n=Qr(a,e);return n instanceof Ra?a:n})();return new Us(i,{docsPath:t,...e})}var WE=de(()=>{"use strict";ir();Xr();Gc()});function $h(){let a=()=>{},t=()=>{};return{promise:new Promise((i,n)=>{a=i,t=n}),resolve:a,reject:t}}var jE=de(()=>{"use strict"});function Xh({fn:a,id:t,shouldSplitBatch:e,wait:i=0,sort:n}){let r=async()=>{let m=l();s();let h=m.map(({args:y})=>y);h.length!==0&&a(h).then(y=>{n&&Array.isArray(y)&&y.sort(n);for(let x=0;x<m.length;x++){let{resolve:E}=m[x];E?.([y[x],y])}}).catch(y=>{for(let x=0;x<m.length;x++){let{reject:E}=m[x];E?.(y)}})},s=()=>zE.delete(t),o=()=>l().map(({args:m})=>m),l=()=>zE.get(t)||[],u=m=>zE.set(t,[...l(),m]);return{flush:s,async schedule(m){let{promise:h,resolve:y,reject:x}=$h();return e?.([...o(),m])&&r(),l().length>0?(u({args:m,resolve:y,reject:x}),h):(u({args:m,resolve:y,reject:x}),setTimeout(r,i),h)}}}var zE,KE=de(()=>{"use strict";jE();zE=new Map});var Qh,Jh,Zh,SC=de(()=>{"use strict";ta();dt();oh();Qh=class extends X{constructor({callbackSelector:t,cause:e,data:i,extraData:n,sender:r,urls:s}){super(e.shortMessage||"An error occurred while fetching for an offchain result.",{cause:e,metaMessages:[...e.metaMessages||[],e.metaMessages?.length?"":[],"Offchain Gateway Call:",s&&["  Gateway URL(s):",...s.map(o=>`    ${Hs(o)}`)],`  Sender: ${r}`,`  Data: ${i}`,`  Callback selector: ${t}`,`  Extra data: ${n}`].flat(),name:"OffchainLookupError"})}},Jh=class extends X{constructor({result:t,url:e}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${Hs(e)}`,`Response: ${wt(t)}`],name:"OffchainLookupResponseMalformedError"})}},Zh=class extends X{constructor({sender:t,to:e}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${e}`,`OffchainLookup sender address: ${t}`],name:"OffchainLookupSenderMismatchError"})}}});var AC={};NI(AC,{ccipRequest:()=>kC,offchainLookup:()=>OA,offchainLookupAbiItem:()=>DC,offchainLookupSignature:()=>NA});async function OA(a,{blockNumber:t,blockTag:e,data:i,to:n}){let{args:r}=Ym({data:i,abi:[DC]}),[s,o,l,u,m]=r,{ccipRead:h}=a,y=h&&typeof h?.request=="function"?h.request:kC;try{if(!is(n,s))throw new Zh({sender:s,to:n});let x=await y({data:l,sender:s,urls:o}),{data:E}=await Bn(a,{blockNumber:t,blockTag:e,data:ea([u,va([{type:"bytes"},{type:"bytes"}],[x,m])]),to:n});return E}catch(x){throw new Qh({callbackSelector:u,cause:x,data:i,extraData:m,sender:s,urls:o})}}async function kC({data:a,sender:t,urls:e}){let i=new Error("An unknown error occurred.");for(let n=0;n<e.length;n++){let r=e[n],s=r.includes("{data}")?"GET":"POST",o=s==="POST"?{data:a,sender:t}:void 0,l=s==="POST"?{"Content-Type":"application/json"}:{};try{let u=await fetch(r.replace("{sender}",t).replace("{data}",a),{body:JSON.stringify(o),headers:l,method:s}),m;if(u.headers.get("Content-Type")?.startsWith("application/json")?m=(await u.json()).data:m=await u.text(),!u.ok){i=new Aa({body:o,details:m?.error?wt(m.error):u.statusText,headers:u.headers,status:u.status,url:r});continue}if(!di(m)){i=new Jh({result:m,url:r});continue}return m}catch(u){i=new Aa({body:o,details:u.message,url:r})}}throw i}var NA,DC,MC=de(()=>{"use strict";wl();SC();Fs();oE();Hr();zc();Da();qa();ta();NA="0x556f1830",DC={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]}});async function Bn(a,t){let{account:e=a.account,batch:i=!!a.batch?.multicall,blockNumber:n,blockTag:r="latest",accessList:s,blobs:o,code:l,data:u,factory:m,factoryData:h,gas:y,gasPrice:x,maxFeePerBlobGas:E,maxFeePerGas:S,maxPriorityFeePerGas:T,nonce:N,to:F,value:G,stateOverride:Y,...Z}=t,ne=e?kt(e):void 0;if(l&&(m||h))throw new X("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&F)throw new X("Cannot provide both `code` & `to` as parameters.");let J=l&&u,ue=m&&h&&F&&u,se=J||ue,Ie=(()=>J?FA({code:l,data:u}):ue?VA({data:u,factory:m,factoryData:h,to:F}):u)();try{ua(t);let te=(n?Ue(n):void 0)||r,et=dl(Y),me=a.chain?.formatters?.transactionRequest?.format,Me=(me||Pa)({...Jr(Z,{format:me}),from:ne?.address,accessList:s,blobs:o,data:Ie,gas:y,gasPrice:x,maxFeePerBlobGas:E,maxFeePerGas:S,maxPriorityFeePerGas:T,nonce:N,to:se?void 0:F,value:G});if(i&&HA({request:Me})&&!et)try{return await UA(a,{...Me,blockNumber:n,blockTag:r})}catch(Ye){if(!(Ye instanceof qc)&&!(Ye instanceof Zs))throw Ye}let V=await a.request({method:"eth_call",params:et?[Me,te,et]:[Me,te]});return V==="0x"?{data:void 0}:{data:V}}catch(Ce){let te=GA(Ce),{offchainLookup:et,offchainLookupSignature:me}=await Promise.resolve().then(()=>(MC(),AC));if(a.ccipRead!==!1&&te?.slice(0,10)===me&&F)return{data:await et(a,{data:te,to:F})};throw se&&te?.slice(0,10)==="0x101bb98d"?new Mc({factory:m}):Yh(Ce,{...t,account:ne,chain:a.chain})}}function HA({request:a}){let{data:t,to:e,...i}=a;return!(!t||t.startsWith(EC)||!e||Object.values(i).filter(n=>typeof n<"u").length>0)}async function UA(a,t){let{batchSize:e=1024,wait:i=0}=typeof a.batch?.multicall=="object"?a.batch.multicall:{},{blockNumber:n,blockTag:r="latest",data:s,multicallAddress:o,to:l}=t,u=o;if(!u){if(!a.chain)throw new qc;u=Na({blockNumber:n,chain:a.chain,contract:"multicall3"})}let h=(n?Ue(n):void 0)||r,{schedule:y}=Xh({id:`${a.uid}.${h}`,wait:i,shouldSplitBatch(S){return S.reduce((N,{data:F})=>N+(F.length-2),0)>e*2},fn:async S=>{let T=S.map(G=>({allowFailure:!0,callData:G.data,target:G.to})),N=ti({abi:Kc,args:[T],functionName:"aggregate3"}),F=await a.request({method:"eth_call",params:[{data:N,to:u},h]});return pa({abi:Kc,args:[T],functionName:"aggregate3",data:F||"0x"})}}),[{returnData:x,success:E}]=await y({data:s,to:l});if(!E)throw new an({data:x});return x==="0x"?{data:void 0}:{data:x}}function FA(a){let{code:t,data:e}=a;return to({abi:lm(["constructor(bytes, bytes)"]),bytecode:Wh,args:[t,e]})}function VA(a){let{data:t,factory:e,factoryData:i,to:n}=a;return to({abi:lm(["constructor(address, bytes, address, bytes)"]),bytecode:TC,args:[n,t,e,i]})}function GA(a){if(!(a instanceof X))return;let t=a.walk();return typeof t?.data=="object"?t.data?.data:t.data}var wl=de(()=>{"use strict";um();Pi();Js();wC();jh();dt();Yc();ir();as();qh();ka();io();Je();WE();Wc();Xs();KE();Dh();Zr()});var nk=Y1(Oi=>{"use strict";var g1=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,t,e){a!=Array.prototype&&a!=Object.prototype&&(a[t]=e.value)},so=typeof window<"u"&&window===Oi?Oi:typeof global<"u"&&global!=null?global:Oi;function YM(a,t){if(t){var e=so;a=a.split(".");for(var i=0;i<a.length-1;i++){var n=a[i];n in e||(e[n]={}),e=e[n]}a=a[a.length-1],i=e[a],t=t(i),t!=i&&t!=null&&g1(e,a,{configurable:!0,writable:!0,value:t})}}function $M(a){var t=0;return function(){return t<a.length?{done:!1,value:a[t++]}:{done:!0}}}function DD(){DD=function(){},so.Symbol||(so.Symbol=XM)}function kD(a,t){this.a=a,g1(this,"description",{configurable:!0,writable:!0,value:t})}kD.prototype.toString=function(){return this.a};var XM=function(){function a(e){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new kD("jscomp_symbol_"+(e||"")+"_"+t++,e)}var t=0;return a}();function _1(){DD();var a=so.Symbol.iterator;a||(a=so.Symbol.iterator=so.Symbol("Symbol.iterator")),typeof Array.prototype[a]!="function"&&g1(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return QM($M(this))}}),_1=function(){}}function QM(a){return _1(),a={next:a},a[so.Symbol.iterator]=function(){return this},a}function JM(a,t){_1(),a instanceof String&&(a+="");var e=0,i={next:function(){if(e<a.length){var n=e++;return{value:t(n,a[n]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}YM("Array.prototype.entries",function(a){return a||function(){return JM(this,function(t,e){return[t,e]})}});var ZM=Oi||self;function Ve(a,t,e){a=a.split("."),e=e||ZM,a[0]in e||typeof e.execScript>"u"||e.execScript("var "+a[0]);for(var i;a.length&&(i=a.shift());)a.length||t===void 0?e[i]&&e[i]!==Object.prototype[i]?e=e[i]:e=e[i]={}:e[i]=t}function ur(a){var t=typeof a;if(t=="object")if(a){if(a instanceof Array)return"array";if(a instanceof Object)return t;var e=Object.prototype.toString.call(a);if(e=="[object Window]")return"object";if(e=="[object Array]"||typeof a.length=="number"&&typeof a.splice<"u"&&typeof a.propertyIsEnumerable<"u"&&!a.propertyIsEnumerable("splice"))return"array";if(e=="[object Function]"||typeof a.call<"u"&&typeof a.propertyIsEnumerable<"u"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if(t=="function"&&typeof a.call>"u")return"object";return t}function ED(a){var t=typeof a;return t=="object"&&a!=null||t=="function"}function eB(a,t,e){Ve(a,t,e)}function tB(a,t){function e(){}e.prototype=t.prototype,a.prototype=new e,a.prototype.constructor=a}var wD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iB(a,t){for(var e,i,n=1;n<arguments.length;n++){i=arguments[n];for(e in i)a[e]=i[e];for(var r=0;r<wD.length;r++)e=wD[r],Object.prototype.hasOwnProperty.call(i,e)&&(a[e]=i[e])}}var aB=Array.prototype.forEach?function(a,t){Array.prototype.forEach.call(a,t,void 0)}:function(a,t){for(var e=a.length,i=typeof a=="string"?a.split(""):a,n=0;n<e;n++)n in i&&t.call(void 0,i[n],n,a)},pu=Array.prototype.map?function(a,t){return Array.prototype.map.call(a,t,void 0)}:function(a,t){for(var e=a.length,i=Array(e),n=typeof a=="string"?a.split(""):a,r=0;r<e;r++)r in n&&(i[r]=t.call(void 0,n[r],r,a));return i};function nB(a,t,e){return 2>=arguments.length?Array.prototype.slice.call(a,t):Array.prototype.slice.call(a,t,e)}function Xd(a,t,e,i){var n="Assertion failed";if(e){n+=": "+e;var r=i}else a&&(n+=": "+a,r=t);throw Error(n,r||[])}function re(a,t,e){for(var i=[],n=2;n<arguments.length;++n)i[n-2]=arguments[n];return a||Xd("",null,t,i),a}function rB(a,t,e){for(var i=[],n=2;n<arguments.length;++n)i[n-2]=arguments[n];typeof a!="string"&&Xd("Expected string but got %s: %s.",[ur(a),a],t,i)}function sB(a,t,e){for(var i=[],n=2;n<arguments.length;++n)i[n-2]=arguments[n];Array.isArray(a)||Xd("Expected array but got %s: %s.",[ur(a),a],t,i)}function Ci(a,t){for(var e=[],i=1;i<arguments.length;++i)e[i-1]=arguments[i];throw Error("Failure"+(a?": "+a:""),e)}function cn(a,t,e,i){for(var n=[],r=3;r<arguments.length;++r)n[r-3]=arguments[r];a instanceof t||Xd("Expected instanceof %s but got %s.",[TD(t),TD(a)],e,n)}function TD(a){return a instanceof Function?a.displayName||a.name||"unknown type name":a instanceof Object?a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a):a===null?"null":typeof a}function nt(a,t){if(this.c=a,this.b=t,this.a={},this.arrClean=!0,0<this.c.length){for(a=0;a<this.c.length;a++){t=this.c[a];var e=t[0];this.a[e.toString()]=new AD(e,t[1])}this.arrClean=!0}}Ve("jspb.Map",nt,void 0);nt.prototype.g=function(){if(this.arrClean){if(this.b){var a=this.a,t;for(t in a)if(Object.prototype.hasOwnProperty.call(a,t)){var e=a[t].a;e&&e.g()}}}else{for(this.c.length=0,a=ls(this),a.sort(),t=0;t<a.length;t++){var i=this.a[a[t]];(e=i.a)&&e.g(),this.c.push([i.key,i.value])}this.arrClean=!0}return this.c};nt.prototype.toArray=nt.prototype.g;nt.prototype.Mc=function(a,t){for(var e=this.g(),i=[],n=0;n<e.length;n++){var r=this.a[e[n][0].toString()];jl(this,r);var s=r.a;s?(re(t),i.push([r.key,t(a,s)])):i.push([r.key,r.value])}return i};nt.prototype.toObject=nt.prototype.Mc;nt.fromObject=function(a,t,e){t=new nt([],t);for(var i=0;i<a.length;i++){var n=a[i][0],r=e(a[i][1]);t.set(n,r)}return t};function mu(a){this.a=0,this.b=a}mu.prototype.next=function(){return this.a<this.b.length?{done:!1,value:this.b[this.a++]}:{done:!0,value:void 0}};typeof Symbol<"u"&&(mu.prototype[Symbol.iterator]=function(){return this});nt.prototype.Jb=function(){return ls(this).length};nt.prototype.getLength=nt.prototype.Jb;nt.prototype.clear=function(){this.a={},this.arrClean=!1};nt.prototype.clear=nt.prototype.clear;nt.prototype.Cb=function(a){a=a.toString();var t=this.a.hasOwnProperty(a);return delete this.a[a],this.arrClean=!1,t};nt.prototype.del=nt.prototype.Cb;nt.prototype.Eb=function(){var a=[],t=ls(this);t.sort();for(var e=0;e<t.length;e++){var i=this.a[t[e]];a.push([i.key,i.value])}return a};nt.prototype.getEntryList=nt.prototype.Eb;nt.prototype.entries=function(){var a=[],t=ls(this);t.sort();for(var e=0;e<t.length;e++){var i=this.a[t[e]];a.push([i.key,jl(this,i)])}return new mu(a)};nt.prototype.entries=nt.prototype.entries;nt.prototype.keys=function(){var a=[],t=ls(this);t.sort();for(var e=0;e<t.length;e++)a.push(this.a[t[e]].key);return new mu(a)};nt.prototype.keys=nt.prototype.keys;nt.prototype.values=function(){var a=[],t=ls(this);t.sort();for(var e=0;e<t.length;e++)a.push(jl(this,this.a[t[e]]));return new mu(a)};nt.prototype.values=nt.prototype.values;nt.prototype.forEach=function(a,t){var e=ls(this);e.sort();for(var i=0;i<e.length;i++){var n=this.a[e[i]];a.call(t,jl(this,n),n.key,this)}};nt.prototype.forEach=nt.prototype.forEach;nt.prototype.set=function(a,t){var e=new AD(a);return this.b?(e.a=t,e.value=t.g()):e.value=t,this.a[a.toString()]=e,this.arrClean=!1,this};nt.prototype.set=nt.prototype.set;function jl(a,t){return a.b?(t.a||(t.a=new a.b(t.value)),t.a):t.value}nt.prototype.get=function(a){if(a=this.a[a.toString()])return jl(this,a)};nt.prototype.get=nt.prototype.get;nt.prototype.has=function(a){return a.toString()in this.a};nt.prototype.has=nt.prototype.has;nt.prototype.Jc=function(a,t,e,i,n){var r=ls(this);r.sort();for(var s=0;s<r.length;s++){var o=this.a[r[s]];t.Va(a),e.call(t,1,o.key),this.b?i.call(t,2,jl(this,o),n):i.call(t,2,o.value),t.Ya()}};nt.prototype.serializeBinary=nt.prototype.Jc;nt.deserializeBinary=function(a,t,e,i,n,r,s){for(;t.oa()&&!t.bb();){var o=t.c;o==1?r=e.call(t):o==2&&(a.b?(re(n),s||(s=new a.b),i.call(t,s,n)):s=i.call(t))}re(r!=null),re(s!=null),a.set(r,s)};function ls(a){a=a.a;var t=[],e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&t.push(e);return t}function AD(a,t){this.key=a,this.value=t,this.a=void 0}function MD(a){if(8192>=a.length)return String.fromCharCode.apply(null,a);for(var t="",e=0;e<a.length;e+=8192)t+=String.fromCharCode.apply(null,nB(a,e,e+8192));return t}var d1={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},$d={"'":"\\'"},BD={},ou=null;function RD(a,t){t===void 0&&(t=0),ND(),t=BD[t];for(var e=[],i=0;i<a.length;i+=3){var n=a[i],r=i+1<a.length,s=r?a[i+1]:0,o=i+2<a.length,l=o?a[i+2]:0,u=n>>2;n=(n&3)<<4|s>>4,s=(s&15)<<2|l>>6,l&=63,o||(l=64,r||(s=64)),e.push(t[u],t[n],t[s]||"",t[l]||"")}return e.join("")}function PD(a){var t=a.length,e=3*t/4;e%3?e=Math.floor(e):"=.".indexOf(a[t-1])!=-1&&(e="=.".indexOf(a[t-2])!=-1?e-2:e-1);var i=new Uint8Array(e),n=0;return oB(a,function(r){i[n++]=r}),i.subarray(0,n)}function oB(a,t){function e(l){for(;i<a.length;){var u=a.charAt(i++),m=ou[u];if(m!=null)return m;if(!/^[\s\xa0]*$/.test(u))throw Error("Unknown base64 encoding at char: "+u)}return l}ND();for(var i=0;;){var n=e(-1),r=e(0),s=e(64),o=e(64);if(o===64&&n===-1)break;t(n<<2|r>>4),s!=64&&(t(r<<4&240|s>>2),o!=64&&t(s<<6&192|o))}}function ND(){if(!ou){ou={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],e=0;5>e;e++){var i=a.concat(t[e].split(""));BD[e]=i;for(var n=0;n<i.length;n++){var r=i[n];ou[r]===void 0&&(ou[r]=n)}}}}Ve("jspb.ConstBinaryMessage",function(){},void 0);Ve("jspb.BinaryMessage",function(){},void 0);Ve("jspb.BinaryConstants.FieldType",{yb:-1,ee:1,FLOAT:2,ke:3,te:4,je:5,xb:6,wb:7,BOOL:8,re:9,ie:10,le:11,ce:12,se:13,ge:14,me:15,ne:16,oe:17,pe:18,he:30,ve:31},void 0);Ve("jspb.BinaryConstants.WireType",{yb:-1,ue:0,xb:1,de:2,qe:3,fe:4,wb:5},void 0);Ve("jspb.BinaryConstants.FieldTypeToWireType",function(a){switch(a){case 5:case 3:case 13:case 4:case 17:case 18:case 8:case 14:case 31:return 0;case 1:case 6:case 16:case 30:return 1;case 9:case 11:case 12:return 2;case 2:case 7:case 15:return 5;default:return-1}},void 0);Ve("jspb.BinaryConstants.INVALID_FIELD_NUMBER",-1,void 0);Ve("jspb.BinaryConstants.FLOAT32_EPS",1401298464324817e-60,void 0);Ve("jspb.BinaryConstants.FLOAT32_MIN",11754943508222875e-54,void 0);Ve("jspb.BinaryConstants.FLOAT32_MAX",34028234663852886e22,void 0);Ve("jspb.BinaryConstants.FLOAT64_EPS",5e-324,void 0);Ve("jspb.BinaryConstants.FLOAT64_MIN",22250738585072014e-324,void 0);Ve("jspb.BinaryConstants.FLOAT64_MAX",17976931348623157e292,void 0);Ve("jspb.BinaryConstants.TWO_TO_20",1048576,void 0);Ve("jspb.BinaryConstants.TWO_TO_23",8388608,void 0);Ve("jspb.BinaryConstants.TWO_TO_31",2147483648,void 0);Ve("jspb.BinaryConstants.TWO_TO_32",4294967296,void 0);Ve("jspb.BinaryConstants.TWO_TO_52",4503599627370496,void 0);Ve("jspb.BinaryConstants.TWO_TO_63",9223372036854776e3,void 0);Ve("jspb.BinaryConstants.TWO_TO_64",18446744073709552e3,void 0);Ve("jspb.BinaryConstants.ZERO_HASH","\0\0\0\0\0\0\0\0",void 0);var Mt=0,Ht=0;Ve("jspb.utils.getSplit64Low",function(){return Mt},void 0);Ve("jspb.utils.getSplit64High",function(){return Ht},void 0);function L1(a){var t=a>>>0;a=Math.floor((a-t)/4294967296)>>>0,Mt=t,Ht=a}Ve("jspb.utils.splitUint64",L1,void 0);function hu(a){var t=0>a;a=Math.abs(a);var e=a>>>0;a=Math.floor((a-e)/4294967296),a>>>=0,t&&(a=~a>>>0,e=(~e>>>0)+1,4294967295<e&&(e=0,a++,4294967295<a&&(a=0))),Mt=e,Ht=a}Ve("jspb.utils.splitInt64",hu,void 0);function OD(a){var t=0>a;a=2*Math.abs(a),L1(a),a=Mt;var e=Ht;t&&(a==0?e==0?e=a=4294967295:(e--,a=4294967295):a--),Mt=a,Ht=e}Ve("jspb.utils.splitZigzag64",OD,void 0);function HD(a){var t=0>a?1:0;if(a=t?-a:a,a===0)0<1/a?Mt=Ht=0:(Ht=0,Mt=2147483648);else if(isNaN(a))Ht=0,Mt=2147483647;else if(34028234663852886e22<a)Ht=0,Mt=(t<<31|2139095040)>>>0;else if(11754943508222875e-54>a)a=Math.round(a/Math.pow(2,-149)),Ht=0,Mt=(t<<31|a)>>>0;else{var e=Math.floor(Math.log(a)/Math.LN2);a*=Math.pow(2,-e),a=Math.round(8388608*a),16777216<=a&&++e,Ht=0,Mt=(t<<31|e+127<<23|a&8388607)>>>0}}Ve("jspb.utils.splitFloat32",HD,void 0);function UD(a){var t=0>a?1:0;if(a=t?-a:a,a===0)Ht=0<1/a?0:2147483648,Mt=0;else if(isNaN(a))Ht=2147483647,Mt=4294967295;else if(17976931348623157e292<a)Ht=(t<<31|2146435072)>>>0,Mt=0;else if(22250738585072014e-324>a)a/=Math.pow(2,-1074),Ht=(t<<31|a/4294967296)>>>0,Mt=a>>>0;else{var e=a,i=0;if(2<=e)for(;2<=e&&1023>i;)i++,e/=2;else for(;1>e&&-1022<i;)e*=2,i--;a*=Math.pow(2,-i),Ht=(t<<31|i+1023<<20|1048576*a&1048575)>>>0,Mt=4503599627370496*a>>>0}}Ve("jspb.utils.splitFloat64",UD,void 0);function cs(a){var t=a.charCodeAt(4),e=a.charCodeAt(5),i=a.charCodeAt(6),n=a.charCodeAt(7);Mt=a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)>>>0,Ht=t+(e<<8)+(i<<16)+(n<<24)>>>0}Ve("jspb.utils.splitHash64",cs,void 0);function zl(a,t){return 4294967296*t+(a>>>0)}Ve("jspb.utils.joinUint64",zl,void 0);function du(a,t){var e=t&2147483648;return e&&(a=~a+1>>>0,t=~t>>>0,a==0&&(t=t+1>>>0)),a=zl(a,t),e?-a:a}Ve("jspb.utils.joinInt64",du,void 0);function Qd(a,t,e){var i=t>>31;return e(a<<1^i,(t<<1|a>>>31)^i)}Ve("jspb.utils.toZigzag64",Qd,void 0);function FD(a,t){return Jd(a,t,du)}Ve("jspb.utils.joinZigzag64",FD,void 0);function Jd(a,t,e){var i=-(a&1);return e((a>>>1|t<<31)^i,t>>>1^i)}Ve("jspb.utils.fromZigzag64",Jd,void 0);function VD(a){var t=2*(a>>31)+1,e=a>>>23&255;return a&=8388607,e==255?a?NaN:1/0*t:e==0?t*Math.pow(2,-149)*a:t*Math.pow(2,e-150)*(a+Math.pow(2,23))}Ve("jspb.utils.joinFloat32",VD,void 0);function GD(a,t){var e=2*(t>>31)+1,i=t>>>20&2047;return a=4294967296*(t&1048575)+a,i==2047?a?NaN:1/0*e:i==0?e*Math.pow(2,-1074)*a:e*Math.pow(2,i-1075)*(a+4503599627370496)}Ve("jspb.utils.joinFloat64",GD,void 0);function Zd(a,t){return String.fromCharCode(a>>>0&255,a>>>8&255,a>>>16&255,a>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)}Ve("jspb.utils.joinHash64",Zd,void 0);Ve("jspb.utils.DIGITS","0123456789abcdef".split(""),void 0);function fu(a,t){function e(n,r){return n=n?String(n):"",r?"0000000".slice(n.length)+n:n}if(2097151>=t)return""+zl(a,t);var i=(a>>>24|t<<8)>>>0&16777215;return t=t>>16&65535,a=(a&16777215)+6777216*i+6710656*t,i+=8147497*t,t*=2,1e7<=a&&(i+=Math.floor(a/1e7),a%=1e7),1e7<=i&&(t+=Math.floor(i/1e7),i%=1e7),e(t,0)+e(i,t)+e(a,1)}Ve("jspb.utils.joinUnsignedDecimalString",fu,void 0);function yu(a,t){var e=t&2147483648;return e&&(a=~a+1>>>0,t=~t+(a==0?1:0)>>>0),a=fu(a,t),e?"-"+a:a}Ve("jspb.utils.joinSignedDecimalString",yu,void 0);function WD(a,t){cs(a),a=Mt;var e=Ht;return t?yu(a,e):fu(a,e)}Ve("jspb.utils.hash64ToDecimalString",WD,void 0);Ve("jspb.utils.hash64ArrayToDecimalStrings",function(a,t){for(var e=Array(a.length),i=0;i<a.length;i++)e[i]=WD(a[i],t);return e},void 0);function bu(a){function t(s,o){for(var l=0;8>l&&(s!==1||0<o);l++)o=s*n[l]+o,n[l]=o&255,o>>>=8}function e(){for(var s=0;8>s;s++)n[s]=~n[s]&255}re(0<a.length);var i=!1;a[0]==="-"&&(i=!0,a=a.slice(1));for(var n=[0,0,0,0,0,0,0,0],r=0;r<a.length;r++)t(10,a.charCodeAt(r)-48);return i&&(e(),t(1,1)),MD(n)}Ve("jspb.utils.decimalStringToHash64",bu,void 0);Ve("jspb.utils.splitDecimalString",function(a){cs(bu(a))},void 0);function CD(a){return String.fromCharCode(10>a?48+a:87+a)}function SD(a){return 97<=a?a-97+10:a-48}Ve("jspb.utils.hash64ToHexString",function(a){var t=Array(18);t[0]="0",t[1]="x";for(var e=0;8>e;e++){var i=a.charCodeAt(7-e);t[2*e+2]=CD(i>>4),t[2*e+3]=CD(i&15)}return t.join("")},void 0);Ve("jspb.utils.hexStringToHash64",function(a){a=a.toLowerCase(),re(a.length==18),re(a[0]=="0"),re(a[1]=="x");for(var t="",e=0;8>e;e++)t=String.fromCharCode(16*SD(a.charCodeAt(2*e+2))+SD(a.charCodeAt(2*e+3)))+t;return t},void 0);Ve("jspb.utils.hash64ToNumber",function(a,t){cs(a),a=Mt;var e=Ht;return t?du(a,e):zl(a,e)},void 0);Ve("jspb.utils.numberToHash64",function(a){return hu(a),Zd(Mt,Ht)},void 0);Ve("jspb.utils.countVarints",function(a,t,e){for(var i=0,n=t;n<e;n++)i+=a[n]>>7;return e-t-i},void 0);Ve("jspb.utils.countVarintFields",function(a,t,e,i){var n=0;if(i*=8,128>i)for(;t<e&&a[t++]==i;)for(n++;;){var r=a[t++];if(!(r&128))break}else for(;t<e;){for(r=i;128<r;){if(a[t]!=(r&127|128))return n;t++,r>>=7}if(a[t++]!=r)break;for(n++;r=a[t++],(r&128)!=0;);}return n},void 0);function jD(a,t,e,i,n){var r=0;if(128>i)for(;t<e&&a[t++]==i;)r++,t+=n;else for(;t<e;){for(var s=i;128<s;){if(a[t++]!=(s&127|128))return r;s>>=7}if(a[t++]!=s)break;r++,t+=n}return r}Ve("jspb.utils.countFixed32Fields",function(a,t,e,i){return jD(a,t,e,8*i+5,4)},void 0);Ve("jspb.utils.countFixed64Fields",function(a,t,e,i){return jD(a,t,e,8*i+1,8)},void 0);Ve("jspb.utils.countDelimitedFields",function(a,t,e,i){var n=0;for(i=8*i+2;t<e;){for(var r=i;128<r;){if(a[t++]!=(r&127|128))return n;r>>=7}if(a[t++]!=r)break;n++;for(var s=0,o=1;r=a[t++],s+=(r&127)*o,o*=128,(r&128)!=0;);t+=s}return n},void 0);Ve("jspb.utils.debugBytesToTextFormat",function(a){var t='"';if(a){a=ef(a);for(var e=0;e<a.length;e++)t+="\\x",16>a[e]&&(t+="0"),t+=a[e].toString(16)}return t+'"'},void 0);Ve("jspb.utils.debugScalarToTextFormat",function(a){if(typeof a=="string"){a=String(a);for(var t=['"'],e=0;e<a.length;e++){var i=a.charAt(e),n=i.charCodeAt(0),r=e+1,s;(s=d1[i])||(31<n&&127>n||(n=i,n in $d?i=$d[n]:n in d1?i=$d[n]=d1[n]:(s=n.charCodeAt(0),31<s&&127>s?i=n:(256>s?(i="\\x",(16>s||256<s)&&(i+="0")):(i="\\u",4096>s&&(i+="0")),i+=s.toString(16).toUpperCase()),i=$d[n]=i)),s=i),t[r]=s}t.push('"'),a=t.join("")}else a=a.toString();return a},void 0);Ve("jspb.utils.stringToByteArray",function(a){for(var t=new Uint8Array(a.length),e=0;e<a.length;e++){var i=a.charCodeAt(e);if(255<i)throw Error("Conversion error: string contains codepoint outside of byte range");t[e]=i}return t},void 0);function ef(a){return a.constructor===Uint8Array?a:a.constructor===ArrayBuffer?new Uint8Array(a):a.constructor===Array?new Uint8Array(a):a.constructor===String?PD(a):a instanceof Uint8Array?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):(Ci("Type not convertible to Uint8Array."),new Uint8Array(0))}Ve("jspb.utils.byteSourceToUint8Array",ef,void 0);function Q(a,t,e){this.b=null,this.a=this.c=this.h=0,this.v=!1,a&&this.H(a,t,e)}Ve("jspb.BinaryDecoder",Q,void 0);var lu=[];Q.getInstanceCacheLength=function(){return lu.length};function tf(a,t,e){if(lu.length){var i=lu.pop();return a&&i.H(a,t,e),i}return new Q(a,t,e)}Q.alloc=tf;Q.prototype.Ca=function(){this.clear(),100>lu.length&&lu.push(this)};Q.prototype.free=Q.prototype.Ca;Q.prototype.clone=function(){return tf(this.b,this.h,this.c-this.h)};Q.prototype.clone=Q.prototype.clone;Q.prototype.clear=function(){this.b=null,this.a=this.c=this.h=0,this.v=!1};Q.prototype.clear=Q.prototype.clear;Q.prototype.Y=function(){return this.b};Q.prototype.getBuffer=Q.prototype.Y;Q.prototype.H=function(a,t,e){this.b=ef(a),this.h=t!==void 0?t:0,this.c=e!==void 0?this.h+e:this.b.length,this.a=this.h};Q.prototype.setBlock=Q.prototype.H;Q.prototype.Db=function(){return this.c};Q.prototype.getEnd=Q.prototype.Db;Q.prototype.setEnd=function(a){this.c=a};Q.prototype.setEnd=Q.prototype.setEnd;Q.prototype.reset=function(){this.a=this.h};Q.prototype.reset=Q.prototype.reset;Q.prototype.B=function(){return this.a};Q.prototype.getCursor=Q.prototype.B;Q.prototype.Ma=function(a){this.a=a};Q.prototype.setCursor=Q.prototype.Ma;Q.prototype.advance=function(a){this.a+=a,re(this.a<=this.c)};Q.prototype.advance=Q.prototype.advance;Q.prototype.ya=function(){return this.a==this.c};Q.prototype.atEnd=Q.prototype.ya;Q.prototype.Qb=function(){return this.a>this.c};Q.prototype.pastEnd=Q.prototype.Qb;Q.prototype.getError=function(){return this.v||0>this.a||this.a>this.c};Q.prototype.getError=Q.prototype.getError;Q.prototype.w=function(a){for(var t=128,e=0,i=0,n=0;4>n&&128<=t;n++)t=this.b[this.a++],e|=(t&127)<<7*n;if(128<=t&&(t=this.b[this.a++],e|=(t&127)<<28,i|=(t&127)>>4),128<=t)for(n=0;5>n&&128<=t;n++)t=this.b[this.a++],i|=(t&127)<<7*n+3;if(128>t)return a(e>>>0,i>>>0);Ci("Failed to read varint, encoding is invalid."),this.v=!0};Q.prototype.readSplitVarint64=Q.prototype.w;Q.prototype.ea=function(a){return this.w(function(t,e){return Jd(t,e,a)})};Q.prototype.readSplitZigzagVarint64=Q.prototype.ea;Q.prototype.ta=function(a){var t=this.b,e=this.a;this.a+=8;for(var i=0,n=0,r=e+7;r>=e;r--)i=i<<8|t[r],n=n<<8|t[r+4];return a(i,n)};Q.prototype.readSplitFixed64=Q.prototype.ta;Q.prototype.kb=function(){for(;this.b[this.a]&128;)this.a++;this.a++};Q.prototype.skipVarint=Q.prototype.kb;Q.prototype.mb=function(a){for(;128<a;)this.a--,a>>>=7;this.a--};Q.prototype.unskipVarint=Q.prototype.mb;Q.prototype.o=function(){var a=this.b,t=a[this.a],e=t&127;return 128>t?(this.a+=1,re(this.a<=this.c),e):(t=a[this.a+1],e|=(t&127)<<7,128>t?(this.a+=2,re(this.a<=this.c),e):(t=a[this.a+2],e|=(t&127)<<14,128>t?(this.a+=3,re(this.a<=this.c),e):(t=a[this.a+3],e|=(t&127)<<21,128>t?(this.a+=4,re(this.a<=this.c),e):(t=a[this.a+4],e|=(t&15)<<28,128>t?(this.a+=5,re(this.a<=this.c),e>>>0):(this.a+=5,128<=a[this.a++]&&128<=a[this.a++]&&128<=a[this.a++]&&128<=a[this.a++]&&128<=a[this.a++]&&re(!1),re(this.a<=this.c),e)))))};Q.prototype.readUnsignedVarint32=Q.prototype.o;Q.prototype.da=function(){return~~this.o()};Q.prototype.readSignedVarint32=Q.prototype.da;Q.prototype.O=function(){return this.o().toString()};Q.prototype.Ea=function(){return this.da().toString()};Q.prototype.readSignedVarint32String=Q.prototype.Ea;Q.prototype.Ia=function(){var a=this.o();return a>>>1^-(a&1)};Q.prototype.readZigzagVarint32=Q.prototype.Ia;Q.prototype.Ga=function(){return this.w(zl)};Q.prototype.readUnsignedVarint64=Q.prototype.Ga;Q.prototype.Ha=function(){return this.w(fu)};Q.prototype.readUnsignedVarint64String=Q.prototype.Ha;Q.prototype.sa=function(){return this.w(du)};Q.prototype.readSignedVarint64=Q.prototype.sa;Q.prototype.Fa=function(){return this.w(yu)};Q.prototype.readSignedVarint64String=Q.prototype.Fa;Q.prototype.Ja=function(){return this.w(FD)};Q.prototype.readZigzagVarint64=Q.prototype.Ja;Q.prototype.fb=function(){return this.ea(Zd)};Q.prototype.readZigzagVarintHash64=Q.prototype.fb;Q.prototype.Ka=function(){return this.ea(yu)};Q.prototype.readZigzagVarint64String=Q.prototype.Ka;Q.prototype.Gc=function(){var a=this.b[this.a];return this.a+=1,re(this.a<=this.c),a};Q.prototype.readUint8=Q.prototype.Gc;Q.prototype.Ec=function(){var a=this.b[this.a],t=this.b[this.a+1];return this.a+=2,re(this.a<=this.c),a<<0|t<<8};Q.prototype.readUint16=Q.prototype.Ec;Q.prototype.m=function(){var a=this.b[this.a],t=this.b[this.a+1],e=this.b[this.a+2],i=this.b[this.a+3];return this.a+=4,re(this.a<=this.c),(a<<0|t<<8|e<<16|i<<24)>>>0};Q.prototype.readUint32=Q.prototype.m;Q.prototype.ga=function(){var a=this.m(),t=this.m();return zl(a,t)};Q.prototype.readUint64=Q.prototype.ga;Q.prototype.ha=function(){var a=this.m(),t=this.m();return fu(a,t)};Q.prototype.readUint64String=Q.prototype.ha;Q.prototype.Xb=function(){var a=this.b[this.a];return this.a+=1,re(this.a<=this.c),a<<24>>24};Q.prototype.readInt8=Q.prototype.Xb;Q.prototype.Vb=function(){var a=this.b[this.a],t=this.b[this.a+1];return this.a+=2,re(this.a<=this.c),(a<<0|t<<8)<<16>>16};Q.prototype.readInt16=Q.prototype.Vb;Q.prototype.P=function(){var a=this.b[this.a],t=this.b[this.a+1],e=this.b[this.a+2],i=this.b[this.a+3];return this.a+=4,re(this.a<=this.c),a<<0|t<<8|e<<16|i<<24};Q.prototype.readInt32=Q.prototype.P;Q.prototype.ba=function(){var a=this.m(),t=this.m();return du(a,t)};Q.prototype.readInt64=Q.prototype.ba;Q.prototype.ca=function(){var a=this.m(),t=this.m();return yu(a,t)};Q.prototype.readInt64String=Q.prototype.ca;Q.prototype.aa=function(){var a=this.m();return VD(a,0)};Q.prototype.readFloat=Q.prototype.aa;Q.prototype.Z=function(){var a=this.m(),t=this.m();return GD(a,t)};Q.prototype.readDouble=Q.prototype.Z;Q.prototype.pa=function(){return!!this.b[this.a++]};Q.prototype.readBool=Q.prototype.pa;Q.prototype.ra=function(){return this.da()};Q.prototype.readEnum=Q.prototype.ra;Q.prototype.fa=function(a){var t=this.b,e=this.a;a=e+a;for(var i=[],n="";e<a;){var r=t[e++];if(128>r)i.push(r);else{if(192>r)continue;if(224>r){var s=t[e++];i.push((r&31)<<6|s&63)}else if(240>r){s=t[e++];var o=t[e++];i.push((r&15)<<12|(s&63)<<6|o&63)}else if(248>r){s=t[e++],o=t[e++];var l=t[e++];r=(r&7)<<18|(s&63)<<12|(o&63)<<6|l&63,r-=65536,i.push((r>>10&1023)+55296,(r&1023)+56320)}}8192<=i.length&&(n+=String.fromCharCode.apply(null,i),i.length=0)}return n+=MD(i),this.a=e,n};Q.prototype.readString=Q.prototype.fa;Q.prototype.Dc=function(){var a=this.o();return this.fa(a)};Q.prototype.readStringWithLength=Q.prototype.Dc;Q.prototype.qa=function(a){if(0>a||this.a+a>this.b.length)return this.v=!0,Ci("Invalid byte length!"),new Uint8Array(0);var t=this.b.subarray(this.a,this.a+a);return this.a+=a,re(this.a<=this.c),t};Q.prototype.readBytes=Q.prototype.qa;Q.prototype.ia=function(){return this.w(Zd)};Q.prototype.readVarintHash64=Q.prototype.ia;Q.prototype.$=function(){var a=this.b,t=this.a,e=a[t],i=a[t+1],n=a[t+2],r=a[t+3],s=a[t+4],o=a[t+5],l=a[t+6];return a=a[t+7],this.a+=8,String.fromCharCode(e,i,n,r,s,o,l,a)};Q.prototype.readFixedHash64=Q.prototype.$;function R(a,t,e){this.a=tf(a,t,e),this.O=this.a.B(),this.b=this.c=-1,this.h=!1,this.v=null}Ve("jspb.BinaryReader",R,void 0);var Wl=[];R.clearInstanceCache=function(){Wl=[]};R.getInstanceCacheLength=function(){return Wl.length};function zD(a,t,e){if(Wl.length){var i=Wl.pop();return a&&i.a.H(a,t,e),i}return new R(a,t,e)}R.alloc=zD;R.prototype.zb=zD;R.prototype.alloc=R.prototype.zb;R.prototype.Ca=function(){this.a.clear(),this.b=this.c=-1,this.h=!1,this.v=null,100>Wl.length&&Wl.push(this)};R.prototype.free=R.prototype.Ca;R.prototype.Fb=function(){return this.O};R.prototype.getFieldCursor=R.prototype.Fb;R.prototype.B=function(){return this.a.B()};R.prototype.getCursor=R.prototype.B;R.prototype.Y=function(){return this.a.Y()};R.prototype.getBuffer=R.prototype.Y;R.prototype.Hb=function(){return this.c};R.prototype.getFieldNumber=R.prototype.Hb;R.prototype.Lb=function(){return this.b};R.prototype.getWireType=R.prototype.Lb;R.prototype.Mb=function(){return this.b==2};R.prototype.isDelimited=R.prototype.Mb;R.prototype.bb=function(){return this.b==4};R.prototype.isEndGroup=R.prototype.bb;R.prototype.getError=function(){return this.h||this.a.getError()};R.prototype.getError=R.prototype.getError;R.prototype.H=function(a,t,e){this.a.H(a,t,e),this.b=this.c=-1};R.prototype.setBlock=R.prototype.H;R.prototype.reset=function(){this.a.reset(),this.b=this.c=-1};R.prototype.reset=R.prototype.reset;R.prototype.advance=function(a){this.a.advance(a)};R.prototype.advance=R.prototype.advance;R.prototype.oa=function(){if(this.a.ya())return!1;if(this.getError())return Ci("Decoder hit an error"),!1;this.O=this.a.B();var a=this.a.o(),t=a>>>3;return a&=7,a!=0&&a!=5&&a!=1&&a!=2&&a!=3&&a!=4?(Ci("Invalid wire type: %s (at position %s)",a,this.O),this.h=!0,!1):(this.c=t,this.b=a,!0)};R.prototype.nextField=R.prototype.oa;R.prototype.Oa=function(){this.a.mb(this.c<<3|this.b)};R.prototype.unskipHeader=R.prototype.Oa;R.prototype.Lc=function(){var a=this.c;for(this.Oa();this.oa()&&this.c==a;)this.C();this.a.ya()||this.Oa()};R.prototype.skipMatchingFields=R.prototype.Lc;R.prototype.lb=function(){this.b!=0?(Ci("Invalid wire type for skipVarintField"),this.C()):this.a.kb()};R.prototype.skipVarintField=R.prototype.lb;R.prototype.gb=function(){if(this.b!=2)Ci("Invalid wire type for skipDelimitedField"),this.C();else{var a=this.a.o();this.a.advance(a)}};R.prototype.skipDelimitedField=R.prototype.gb;R.prototype.hb=function(){this.b!=5?(Ci("Invalid wire type for skipFixed32Field"),this.C()):this.a.advance(4)};R.prototype.skipFixed32Field=R.prototype.hb;R.prototype.ib=function(){this.b!=1?(Ci("Invalid wire type for skipFixed64Field"),this.C()):this.a.advance(8)};R.prototype.skipFixed64Field=R.prototype.ib;R.prototype.jb=function(){var a=this.c;do{if(!this.oa()){Ci("Unmatched start-group tag: stream EOF"),this.h=!0;break}if(this.b==4){this.c!=a&&(Ci("Unmatched end-group tag"),this.h=!0);break}this.C()}while(1)};R.prototype.skipGroup=R.prototype.jb;R.prototype.C=function(){switch(this.b){case 0:this.lb();break;case 1:this.ib();break;case 2:this.gb();break;case 5:this.hb();break;case 3:this.jb();break;default:Ci("Invalid wire encoding for field.")}};R.prototype.skipField=R.prototype.C;R.prototype.Hc=function(a,t){this.v===null&&(this.v={}),re(!this.v[a]),this.v[a]=t};R.prototype.registerReadCallback=R.prototype.Hc;R.prototype.Ic=function(a){return re(this.v!==null),a=this.v[a],re(a),a(this)};R.prototype.runReadCallback=R.prototype.Ic;R.prototype.Yb=function(a,t){re(this.b==2);var e=this.a.c,i=this.a.o();i=this.a.B()+i,this.a.setEnd(i),t(a,this),this.a.Ma(i),this.a.setEnd(e)};R.prototype.readMessage=R.prototype.Yb;R.prototype.Ub=function(a,t,e){re(this.b==3),re(this.c==a),e(t,this),this.h||this.b==4||(Ci("Group submessage did not end with an END_GROUP tag"),this.h=!0)};R.prototype.readGroup=R.prototype.Ub;R.prototype.Gb=function(){re(this.b==2);var a=this.a.o(),t=this.a.B(),e=t+a;return a=tf(this.a.Y(),t,a),this.a.Ma(e),a};R.prototype.getFieldDecoder=R.prototype.Gb;R.prototype.P=function(){return re(this.b==0),this.a.da()};R.prototype.readInt32=R.prototype.P;R.prototype.Wb=function(){return re(this.b==0),this.a.Ea()};R.prototype.readInt32String=R.prototype.Wb;R.prototype.ba=function(){return re(this.b==0),this.a.sa()};R.prototype.readInt64=R.prototype.ba;R.prototype.ca=function(){return re(this.b==0),this.a.Fa()};R.prototype.readInt64String=R.prototype.ca;R.prototype.m=function(){return re(this.b==0),this.a.o()};R.prototype.readUint32=R.prototype.m;R.prototype.Fc=function(){return re(this.b==0),this.a.O()};R.prototype.readUint32String=R.prototype.Fc;R.prototype.ga=function(){return re(this.b==0),this.a.Ga()};R.prototype.readUint64=R.prototype.ga;R.prototype.ha=function(){return re(this.b==0),this.a.Ha()};R.prototype.readUint64String=R.prototype.ha;R.prototype.zc=function(){return re(this.b==0),this.a.Ia()};R.prototype.readSint32=R.prototype.zc;R.prototype.Ac=function(){return re(this.b==0),this.a.Ja()};R.prototype.readSint64=R.prototype.Ac;R.prototype.Bc=function(){return re(this.b==0),this.a.Ka()};R.prototype.readSint64String=R.prototype.Bc;R.prototype.Rb=function(){return re(this.b==5),this.a.m()};R.prototype.readFixed32=R.prototype.Rb;R.prototype.Sb=function(){return re(this.b==1),this.a.ga()};R.prototype.readFixed64=R.prototype.Sb;R.prototype.Tb=function(){return re(this.b==1),this.a.ha()};R.prototype.readFixed64String=R.prototype.Tb;R.prototype.vc=function(){return re(this.b==5),this.a.P()};R.prototype.readSfixed32=R.prototype.vc;R.prototype.wc=function(){return re(this.b==5),this.a.P().toString()};R.prototype.readSfixed32String=R.prototype.wc;R.prototype.xc=function(){return re(this.b==1),this.a.ba()};R.prototype.readSfixed64=R.prototype.xc;R.prototype.yc=function(){return re(this.b==1),this.a.ca()};R.prototype.readSfixed64String=R.prototype.yc;R.prototype.aa=function(){return re(this.b==5),this.a.aa()};R.prototype.readFloat=R.prototype.aa;R.prototype.Z=function(){return re(this.b==1),this.a.Z()};R.prototype.readDouble=R.prototype.Z;R.prototype.pa=function(){return re(this.b==0),!!this.a.o()};R.prototype.readBool=R.prototype.pa;R.prototype.ra=function(){return re(this.b==0),this.a.sa()};R.prototype.readEnum=R.prototype.ra;R.prototype.fa=function(){re(this.b==2);var a=this.a.o();return this.a.fa(a)};R.prototype.readString=R.prototype.fa;R.prototype.qa=function(){re(this.b==2);var a=this.a.o();return this.a.qa(a)};R.prototype.readBytes=R.prototype.qa;R.prototype.ia=function(){return re(this.b==0),this.a.ia()};R.prototype.readVarintHash64=R.prototype.ia;R.prototype.Cc=function(){return re(this.b==0),this.a.fb()};R.prototype.readSintHash64=R.prototype.Cc;R.prototype.w=function(a){return re(this.b==0),this.a.w(a)};R.prototype.readSplitVarint64=R.prototype.w;R.prototype.ea=function(a){return re(this.b==0),this.a.w(function(t,e){return Jd(t,e,a)})};R.prototype.readSplitZigzagVarint64=R.prototype.ea;R.prototype.$=function(){return re(this.b==1),this.a.$()};R.prototype.readFixedHash64=R.prototype.$;R.prototype.ta=function(a){return re(this.b==1),this.a.ta(a)};R.prototype.readSplitFixed64=R.prototype.ta;function ai(a,t){re(a.b==2);var e=a.a.o();e=a.a.B()+e;for(var i=[];a.a.B()<e;)i.push(t.call(a.a));return i}R.prototype.gc=function(){return ai(this,this.a.da)};R.prototype.readPackedInt32=R.prototype.gc;R.prototype.hc=function(){return ai(this,this.a.Ea)};R.prototype.readPackedInt32String=R.prototype.hc;R.prototype.ic=function(){return ai(this,this.a.sa)};R.prototype.readPackedInt64=R.prototype.ic;R.prototype.jc=function(){return ai(this,this.a.Fa)};R.prototype.readPackedInt64String=R.prototype.jc;R.prototype.qc=function(){return ai(this,this.a.o)};R.prototype.readPackedUint32=R.prototype.qc;R.prototype.rc=function(){return ai(this,this.a.O)};R.prototype.readPackedUint32String=R.prototype.rc;R.prototype.sc=function(){return ai(this,this.a.Ga)};R.prototype.readPackedUint64=R.prototype.sc;R.prototype.tc=function(){return ai(this,this.a.Ha)};R.prototype.readPackedUint64String=R.prototype.tc;R.prototype.nc=function(){return ai(this,this.a.Ia)};R.prototype.readPackedSint32=R.prototype.nc;R.prototype.oc=function(){return ai(this,this.a.Ja)};R.prototype.readPackedSint64=R.prototype.oc;R.prototype.pc=function(){return ai(this,this.a.Ka)};R.prototype.readPackedSint64String=R.prototype.pc;R.prototype.bc=function(){return ai(this,this.a.m)};R.prototype.readPackedFixed32=R.prototype.bc;R.prototype.cc=function(){return ai(this,this.a.ga)};R.prototype.readPackedFixed64=R.prototype.cc;R.prototype.dc=function(){return ai(this,this.a.ha)};R.prototype.readPackedFixed64String=R.prototype.dc;R.prototype.kc=function(){return ai(this,this.a.P)};R.prototype.readPackedSfixed32=R.prototype.kc;R.prototype.lc=function(){return ai(this,this.a.ba)};R.prototype.readPackedSfixed64=R.prototype.lc;R.prototype.mc=function(){return ai(this,this.a.ca)};R.prototype.readPackedSfixed64String=R.prototype.mc;R.prototype.fc=function(){return ai(this,this.a.aa)};R.prototype.readPackedFloat=R.prototype.fc;R.prototype.$b=function(){return ai(this,this.a.Z)};R.prototype.readPackedDouble=R.prototype.$b;R.prototype.Zb=function(){return ai(this,this.a.pa)};R.prototype.readPackedBool=R.prototype.Zb;R.prototype.ac=function(){return ai(this,this.a.ra)};R.prototype.readPackedEnum=R.prototype.ac;R.prototype.uc=function(){return ai(this,this.a.ia)};R.prototype.readPackedVarintHash64=R.prototype.uc;R.prototype.ec=function(){return ai(this,this.a.$)};R.prototype.readPackedFixedHash64=R.prototype.ec;function cu(a,t,e,i,n){this.ma=a,this.Ba=t,this.la=e,this.Na=i,this.na=n}Ve("jspb.ExtensionFieldInfo",cu,void 0);function KD(a,t,e,i,n,r){this.Za=a,this.za=t,this.Aa=e,this.Wa=i,this.Ab=n,this.Nb=r}Ve("jspb.ExtensionFieldBinaryInfo",KD,void 0);cu.prototype.F=function(){return!!this.la};cu.prototype.isMessageType=cu.prototype.F;function Re(){}Ve("jspb.Message",Re,void 0);Re.GENERATE_TO_OBJECT=!0;Re.GENERATE_FROM_OBJECT=!0;var af=typeof Uint8Array=="function";Re.prototype.Ib=function(){return this.b};Re.prototype.getJsPbMessageId=Re.prototype.Ib;Re.initialize=function(a,t,e,i,n,r){a.f=null,t||(t=e?[e]:[]),a.b=e?String(e):void 0,a.D=e===0?-1:0,a.u=t;e:{if(e=a.u.length,t=-1,e&&(t=e-1,e=a.u[t],!(e===null||typeof e!="object"||Array.isArray(e)||af&&e instanceof Uint8Array))){a.G=t-a.D,a.i=e;break e}-1<i?(a.G=Math.max(i,t+1-a.D),a.i=null):a.G=Number.MAX_VALUE}if(a.a={},n)for(i=0;i<n.length;i++)t=n[i],t<a.G?(t+=a.D,a.u[t]=a.u[t]||uu):(nf(a),a.i[t]=a.i[t]||uu);if(r&&r.length)for(i=0;i<r.length;i++)v1(a,r[i])};var uu=Object.freeze?Object.freeze([]):[];function nf(a){var t=a.G+a.D;a.u[t]||(a.i=a.u[t]={})}function qD(a,t,e){for(var i=[],n=0;n<a.length;n++)i[n]=t.call(a[n],e,a[n]);return i}Re.toObjectList=qD;Re.toObjectExtension=function(a,t,e,i,n){for(var r in e){var s=e[r],o=i.call(a,s);if(o!=null){for(var l in s.Ba)if(s.Ba.hasOwnProperty(l))break;t[l]=s.Na?s.na?qD(o,s.Na,n):s.Na(n,o):o}}};Re.serializeBinaryExtensions=function(a,t,e,i){for(var n in e){var r=e[n],s=r.Za;if(!r.Aa)throw Error("Message extension present that was generated without binary serialization support");var o=i.call(a,s);if(o!=null)if(s.F())if(r.Wa)r.Aa.call(t,s.ma,o,r.Wa);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else r.Aa.call(t,s.ma,o)}};Re.readBinaryExtension=function(a,t,e,i,n){var r=e[t.c];if(r){if(e=r.Za,!r.za)throw Error("Deserializing extension whose generated code does not support binary format");if(e.F()){var s=new e.la;r.za.call(t,s,r.Ab)}else s=r.za.call(t);e.na&&!r.Nb?(t=i.call(a,e))?t.push(s):n.call(a,e,[s]):n.call(a,e,s)}else t.C()};function Ea(a,t){if(t<a.G){t+=a.D;var e=a.u[t];return e===uu?a.u[t]=[]:e}if(a.i)return e=a.i[t],e===uu?a.i[t]=[]:e}Re.getField=Ea;Re.getRepeatedField=function(a,t){return Ea(a,t)};function YD(a,t){return a=Ea(a,t),a==null?a:+a}Re.getOptionalFloatingPointField=YD;function $D(a,t){return a=Ea(a,t),a==null?a:!!a}Re.getBooleanField=$D;Re.getRepeatedFloatingPointField=function(a,t){var e=Ea(a,t);if(a.a||(a.a={}),!a.a[t]){for(var i=0;i<e.length;i++)e[i]=+e[i];a.a[t]=!0}return e};Re.getRepeatedBooleanField=function(a,t){var e=Ea(a,t);if(a.a||(a.a={}),!a.a[t]){for(var i=0;i<e.length;i++)e[i]=!!e[i];a.a[t]=!0}return e};function XD(a){return a==null||typeof a=="string"?a:af&&a instanceof Uint8Array?RD(a):(Ci("Cannot coerce to b64 string: "+ur(a)),null)}Re.bytesAsB64=XD;function QD(a){return a==null||a instanceof Uint8Array?a:typeof a=="string"?PD(a):(Ci("Cannot coerce to Uint8Array: "+ur(a)),null)}Re.bytesAsU8=QD;Re.bytesListAsB64=function(a){return JD(a),a.length&&typeof a[0]!="string"?pu(a,XD):a};Re.bytesListAsU8=function(a){return JD(a),!a.length||a[0]instanceof Uint8Array?a:pu(a,QD)};function JD(a){if(a&&1<a.length){var t=ur(a[0]);aB(a,function(e){ur(e)!=t&&Ci("Inconsistent type in JSPB repeated field array. Got "+ur(e)+" expected "+t)})}}function ZD(a,t,e){return a=Ea(a,t),a??e}Re.getFieldWithDefault=ZD;Re.getBooleanFieldWithDefault=function(a,t,e){return a=$D(a,t),a??e};Re.getFloatingPointFieldWithDefault=function(a,t,e){return a=YD(a,t),a??e};Re.getFieldProto3=ZD;Re.getMapField=function(a,t,e,i){if(a.f||(a.f={}),t in a.f)return a.f[t];var n=Ea(a,t);if(!n){if(e)return;n=[],pr(a,t,n)}return a.f[t]=new nt(n,i)};function pr(a,t,e){return cn(a,Re),t<a.G?a.u[t+a.D]=e:(nf(a),a.i[t]=e),a}Re.setField=pr;Re.setProto3IntField=function(a,t,e){return oo(a,t,e,0)};Re.setProto3FloatField=function(a,t,e){return oo(a,t,e,0)};Re.setProto3BooleanField=function(a,t,e){return oo(a,t,e,!1)};Re.setProto3StringField=function(a,t,e){return oo(a,t,e,"")};Re.setProto3BytesField=function(a,t,e){return oo(a,t,e,"")};Re.setProto3EnumField=function(a,t,e){return oo(a,t,e,0)};Re.setProto3StringIntField=function(a,t,e){return oo(a,t,e,"0")};function oo(a,t,e,i){return cn(a,Re),e!==i?pr(a,t,e):t<a.G?a.u[t+a.D]=null:(nf(a),delete a.i[t]),a}Re.addToRepeatedField=function(a,t,e,i){return cn(a,Re),t=Ea(a,t),i!=null?t.splice(i,0,e):t.push(e),a};function ek(a,t,e,i){return cn(a,Re),(e=v1(a,e))&&e!==t&&i!==void 0&&(a.f&&e in a.f&&(a.f[e]=void 0),pr(a,e,void 0)),pr(a,t,i)}Re.setOneofField=ek;function v1(a,t){for(var e,i,n=0;n<t.length;n++){var r=t[n],s=Ea(a,r);s!=null&&(e=r,i=s,pr(a,r,void 0))}return e?(pr(a,e,i),e):0}Re.computeOneofCase=v1;Re.getWrapperField=function(a,t,e,i){if(a.f||(a.f={}),!a.f[e]){var n=Ea(a,e);(i||n)&&(a.f[e]=new t(n))}return a.f[e]};Re.getRepeatedWrapperField=function(a,t,e){return tk(a,t,e),t=a.f[e],t==uu&&(t=a.f[e]=[]),t};function tk(a,t,e){if(a.f||(a.f={}),!a.f[e]){for(var i=Ea(a,e),n=[],r=0;r<i.length;r++)n[r]=new t(i[r]);a.f[e]=n}}Re.setWrapperField=function(a,t,e){cn(a,Re),a.f||(a.f={});var i=e&&e.g();return a.f[t]=e,pr(a,t,i)};Re.setOneofWrapperField=function(a,t,e,i){cn(a,Re),a.f||(a.f={});var n=i&&i.g();return a.f[t]=i,ek(a,t,e,n)};Re.setRepeatedWrapperField=function(a,t,e){cn(a,Re),a.f||(a.f={}),e=e||[];for(var i=[],n=0;n<e.length;n++)i[n]=e[n].g();return a.f[t]=e,pr(a,t,i)};Re.addToRepeatedWrapperField=function(a,t,e,i,n){tk(a,i,t);var r=a.f[t];return r||(r=a.f[t]=[]),e=e||new i,a=Ea(a,t),n!=null?(r.splice(n,0,e),a.splice(n,0,e.g())):(r.push(e),a.push(e.g())),e};Re.toMap=function(a,t,e,i){for(var n={},r=0;r<a.length;r++)n[t.call(a[r])]=e?e.call(a[r],i,a[r]):a[r];return n};function ik(a){if(a.f)for(var t in a.f){var e=a.f[t];if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&e[i].g();else e&&e.g()}}Re.prototype.g=function(){return ik(this),this.u};Re.prototype.toArray=Re.prototype.g;Re.prototype.toString=function(){return ik(this),this.u.toString()};Re.prototype.getExtension=function(a){if(this.i){this.f||(this.f={});var t=a.ma;if(a.na){if(a.F())return this.f[t]||(this.f[t]=pu(this.i[t]||[],function(e){return new a.la(e)})),this.f[t]}else if(a.F())return!this.f[t]&&this.i[t]&&(this.f[t]=new a.la(this.i[t])),this.f[t];return this.i[t]}};Re.prototype.getExtension=Re.prototype.getExtension;Re.prototype.Kc=function(a,t){this.f||(this.f={}),nf(this);var e=a.ma;return a.na?(t=t||[],a.F()?(this.f[e]=t,this.i[e]=pu(t,function(i){return i.g()})):this.i[e]=t):a.F()?(this.f[e]=t,this.i[e]=t&&t.g()):this.i[e]=t,this};Re.prototype.setExtension=Re.prototype.Kc;Re.difference=function(a,t){if(!(a instanceof t.constructor))throw Error("Messages have different types.");var e=a.g();t=t.g();var i=[],n=0,r=e.length>t.length?e.length:t.length;for(a.b&&(i[0]=a.b,n=1);n<r;n++)gu(e[n],t[n])||(i[n]=t[n]);return new a.constructor(i)};Re.equals=function(a,t){return a==t||!(!a||!t)&&a instanceof t.constructor&&gu(a.g(),t.g())};function f1(a,t){a=a||{},t=t||{};var e={},i;for(i in a)e[i]=0;for(i in t)e[i]=0;for(i in e)if(!gu(a[i],t[i]))return!1;return!0}Re.compareExtensions=f1;function gu(a,t){if(a==t)return!0;if(!ED(a)||!ED(t))return typeof a=="number"&&isNaN(a)||typeof t=="number"&&isNaN(t)?String(a)==String(t):!1;if(a.constructor!=t.constructor)return!1;if(af&&a.constructor===Uint8Array){if(a.length!=t.length)return!1;for(var e=0;e<a.length;e++)if(a[e]!=t[e])return!1;return!0}if(a.constructor===Array){var i=void 0,n=void 0,r=Math.max(a.length,t.length);for(e=0;e<r;e++){var s=a[e],o=t[e];if(s&&s.constructor==Object&&(re(i===void 0),re(e===a.length-1),i=s,s=void 0),o&&o.constructor==Object&&(re(n===void 0),re(e===t.length-1),n=o,o=void 0),!gu(s,o))return!1}return i||n?(i=i||{},n=n||{},f1(i,n)):!0}if(a.constructor===Object)return f1(a,t);throw Error("Invalid type in JSPB array")}Re.compareFields=gu;Re.prototype.Bb=function(){return rf(this)};Re.prototype.cloneMessage=Re.prototype.Bb;Re.prototype.clone=function(){return rf(this)};Re.prototype.clone=Re.prototype.clone;Re.clone=function(a){return rf(a)};function rf(a){return new a.constructor(y1(a.g()))}Re.copyInto=function(a,t){cn(a,Re),cn(t,Re),re(a.constructor==t.constructor,"Copy source and target message should have the same type."),a=rf(a);for(var e=t.g(),i=a.g(),n=e.length=0;n<i.length;n++)e[n]=i[n];t.f=a.f,t.i=a.i};function y1(a){if(Array.isArray(a)){for(var t=Array(a.length),e=0;e<a.length;e++){var i=a[e];i!=null&&(t[e]=typeof i=="object"?y1(re(i)):i)}return t}if(af&&a instanceof Uint8Array)return new Uint8Array(a);t={};for(e in a)i=a[e],i!=null&&(t[e]=typeof i=="object"?y1(re(i)):i);return t}Re.registerMessageType=function(a,t){t.we=a};var ln={dump:function(a){return cn(a,Re,"jspb.Message instance expected"),re(a.getExtension,"Only unobfuscated and unoptimized compilation modes supported."),ln.X(a)}};Ve("jspb.debug.dump",ln.dump,void 0);ln.X=function(a){var t=ur(a);if(t=="number"||t=="string"||t=="boolean"||t=="null"||t=="undefined"||typeof Uint8Array<"u"&&a instanceof Uint8Array)return a;if(t=="array")return sB(a),pu(a,ln.X);if(a instanceof nt){var e={};a=a.entries();for(var i=a.next();!i.done;i=a.next())e[i.value[0]]=ln.X(i.value[1]);return e}cn(a,Re,"Only messages expected: "+a),t=a.constructor;var n={$name:t.name||t.displayName};for(o in t.prototype){var r=/^get([A-Z]\w*)/.exec(o);if(r&&o!="getExtension"&&o!="getJsPbMessageId"){var s="has"+r[1];(!a[s]||a[s]())&&(s=a[o](),n[ln.$a(r[1])]=ln.X(s))}}if(a.extensionObject_)return n.$extensions="Recursive dumping of extensions not supported in compiled code. Switch to uncompiled or dump extension object directly",n;for(i in t.extensions)if(/^\d+$/.test(i)){s=t.extensions[i];var o=a.getExtension(s);r=void 0,s=s.Ba;var l=[],u=0;for(r in s)l[u++]=r;r=l[0],o!=null&&(e||(e=n.$extensions={}),e[ln.$a(r)]=ln.X(o))}return n};ln.$a=function(a){return a.replace(/^[A-Z]/,function(t){return t.toLowerCase()})};function xe(){this.a=[]}Ve("jspb.BinaryEncoder",xe,void 0);xe.prototype.length=function(){return this.a.length};xe.prototype.length=xe.prototype.length;xe.prototype.end=function(){var a=this.a;return this.a=[],a};xe.prototype.end=xe.prototype.end;xe.prototype.l=function(a,t){for(re(a==Math.floor(a)),re(t==Math.floor(t)),re(0<=a&&4294967296>a),re(0<=t&&4294967296>t);0<t||127<a;)this.a.push(a&127|128),a=(a>>>7|t<<25)>>>0,t>>>=7;this.a.push(a)};xe.prototype.writeSplitVarint64=xe.prototype.l;xe.prototype.A=function(a,t){re(a==Math.floor(a)),re(t==Math.floor(t)),re(0<=a&&4294967296>a),re(0<=t&&4294967296>t),this.s(a),this.s(t)};xe.prototype.writeSplitFixed64=xe.prototype.A;xe.prototype.j=function(a){for(re(a==Math.floor(a)),re(0<=a&&4294967296>a);127<a;)this.a.push(a&127|128),a>>>=7;this.a.push(a)};xe.prototype.writeUnsignedVarint32=xe.prototype.j;xe.prototype.M=function(a){if(re(a==Math.floor(a)),re(-2147483648<=a&&2147483648>a),0<=a)this.j(a);else{for(var t=0;9>t;t++)this.a.push(a&127|128),a>>=7;this.a.push(1)}};xe.prototype.writeSignedVarint32=xe.prototype.M;xe.prototype.va=function(a){re(a==Math.floor(a)),re(0<=a&&18446744073709552e3>a),hu(a),this.l(Mt,Ht)};xe.prototype.writeUnsignedVarint64=xe.prototype.va;xe.prototype.ua=function(a){re(a==Math.floor(a)),re(-9223372036854776e3<=a&&9223372036854776e3>a),hu(a),this.l(Mt,Ht)};xe.prototype.writeSignedVarint64=xe.prototype.ua;xe.prototype.wa=function(a){re(a==Math.floor(a)),re(-2147483648<=a&&2147483648>a),this.j((a<<1^a>>31)>>>0)};xe.prototype.writeZigzagVarint32=xe.prototype.wa;xe.prototype.xa=function(a){re(a==Math.floor(a)),re(-9223372036854776e3<=a&&9223372036854776e3>a),OD(a),this.l(Mt,Ht)};xe.prototype.writeZigzagVarint64=xe.prototype.xa;xe.prototype.Ta=function(a){this.W(bu(a))};xe.prototype.writeZigzagVarint64String=xe.prototype.Ta;xe.prototype.W=function(a){var t=this;cs(a),Qd(Mt,Ht,function(e,i){t.l(e>>>0,i>>>0)})};xe.prototype.writeZigzagVarintHash64=xe.prototype.W;xe.prototype.be=function(a){re(a==Math.floor(a)),re(0<=a&&256>a),this.a.push(a>>>0&255)};xe.prototype.writeUint8=xe.prototype.be;xe.prototype.ae=function(a){re(a==Math.floor(a)),re(0<=a&&65536>a),this.a.push(a>>>0&255),this.a.push(a>>>8&255)};xe.prototype.writeUint16=xe.prototype.ae;xe.prototype.s=function(a){re(a==Math.floor(a)),re(0<=a&&4294967296>a),this.a.push(a>>>0&255),this.a.push(a>>>8&255),this.a.push(a>>>16&255),this.a.push(a>>>24&255)};xe.prototype.writeUint32=xe.prototype.s;xe.prototype.V=function(a){re(a==Math.floor(a)),re(0<=a&&18446744073709552e3>a),L1(a),this.s(Mt),this.s(Ht)};xe.prototype.writeUint64=xe.prototype.V;xe.prototype.Qc=function(a){re(a==Math.floor(a)),re(-128<=a&&128>a),this.a.push(a>>>0&255)};xe.prototype.writeInt8=xe.prototype.Qc;xe.prototype.Pc=function(a){re(a==Math.floor(a)),re(-32768<=a&&32768>a),this.a.push(a>>>0&255),this.a.push(a>>>8&255)};xe.prototype.writeInt16=xe.prototype.Pc;xe.prototype.S=function(a){re(a==Math.floor(a)),re(-2147483648<=a&&2147483648>a),this.a.push(a>>>0&255),this.a.push(a>>>8&255),this.a.push(a>>>16&255),this.a.push(a>>>24&255)};xe.prototype.writeInt32=xe.prototype.S;xe.prototype.T=function(a){re(a==Math.floor(a)),re(-9223372036854776e3<=a&&9223372036854776e3>a),hu(a),this.A(Mt,Ht)};xe.prototype.writeInt64=xe.prototype.T;xe.prototype.ka=function(a){re(a==Math.floor(a)),re(-9223372036854776e3<=+a&&9223372036854776e3>+a),cs(bu(a)),this.A(Mt,Ht)};xe.prototype.writeInt64String=xe.prototype.ka;xe.prototype.L=function(a){re(a===1/0||a===-1/0||isNaN(a)||-34028234663852886e22<=a&&34028234663852886e22>=a),HD(a),this.s(Mt)};xe.prototype.writeFloat=xe.prototype.L;xe.prototype.J=function(a){re(a===1/0||a===-1/0||isNaN(a)||-17976931348623157e292<=a&&17976931348623157e292>=a),UD(a),this.s(Mt),this.s(Ht)};xe.prototype.writeDouble=xe.prototype.J;xe.prototype.I=function(a){re(typeof a=="boolean"||typeof a=="number"),this.a.push(a?1:0)};xe.prototype.writeBool=xe.prototype.I;xe.prototype.R=function(a){re(a==Math.floor(a)),re(-2147483648<=a&&2147483648>a),this.M(a)};xe.prototype.writeEnum=xe.prototype.R;xe.prototype.ja=function(a){this.a.push.apply(this.a,a)};xe.prototype.writeBytes=xe.prototype.ja;xe.prototype.N=function(a){cs(a),this.l(Mt,Ht)};xe.prototype.writeVarintHash64=xe.prototype.N;xe.prototype.K=function(a){cs(a),this.s(Mt),this.s(Ht)};xe.prototype.writeFixedHash64=xe.prototype.K;xe.prototype.U=function(a){var t=this.a.length;rB(a);for(var e=0;e<a.length;e++){var i=a.charCodeAt(e);if(128>i)this.a.push(i);else if(2048>i)this.a.push(i>>6|192),this.a.push(i&63|128);else if(65536>i)if(55296<=i&&56319>=i&&e+1<a.length){var n=a.charCodeAt(e+1);56320<=n&&57343>=n&&(i=1024*(i-55296)+n-56320+65536,this.a.push(i>>18|240),this.a.push(i>>12&63|128),this.a.push(i>>6&63|128),this.a.push(i&63|128),e++)}else this.a.push(i>>12|224),this.a.push(i>>6&63|128),this.a.push(i&63|128)}return this.a.length-t};xe.prototype.writeString=xe.prototype.U;function Qe(a,t){this.lo=a,this.hi=t}Ve("jspb.arith.UInt64",Qe,void 0);Qe.prototype.cmp=function(a){return this.hi<a.hi||this.hi==a.hi&&this.lo<a.lo?-1:this.hi==a.hi&&this.lo==a.lo?0:1};Qe.prototype.cmp=Qe.prototype.cmp;Qe.prototype.La=function(){return new Qe((this.lo>>>1|(this.hi&1)<<31)>>>0,this.hi>>>1>>>0)};Qe.prototype.rightShift=Qe.prototype.La;Qe.prototype.Da=function(){return new Qe(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)};Qe.prototype.leftShift=Qe.prototype.Da;Qe.prototype.cb=function(){return!!(this.hi&2147483648)};Qe.prototype.msb=Qe.prototype.cb;Qe.prototype.Ob=function(){return!!(this.lo&1)};Qe.prototype.lsb=Qe.prototype.Ob;Qe.prototype.Ua=function(){return this.lo==0&&this.hi==0};Qe.prototype.zero=Qe.prototype.Ua;Qe.prototype.add=function(a){return new Qe((this.lo+a.lo&4294967295)>>>0>>>0,((this.hi+a.hi&4294967295)>>>0)+(4294967296<=this.lo+a.lo?1:0)>>>0)};Qe.prototype.add=Qe.prototype.add;Qe.prototype.sub=function(a){return new Qe((this.lo-a.lo&4294967295)>>>0>>>0,((this.hi-a.hi&4294967295)>>>0)-(0>this.lo-a.lo?1:0)>>>0)};Qe.prototype.sub=Qe.prototype.sub;function b1(a,t){var e=a&65535;a>>>=16;var i=t&65535,n=t>>>16;for(t=e*i+65536*(e*n&65535)+65536*(a*i&65535),e=a*n+(e*n>>>16)+(a*i>>>16);4294967296<=t;)t-=4294967296,e+=1;return new Qe(t>>>0,e>>>0)}Qe.mul32x32=b1;Qe.prototype.eb=function(a){var t=b1(this.lo,a);return a=b1(this.hi,a),a.hi=a.lo,a.lo=0,t.add(a)};Qe.prototype.mul=Qe.prototype.eb;Qe.prototype.Xa=function(a){if(a==0)return[];var t=new Qe(0,0),e=new Qe(this.lo,this.hi);a=new Qe(a,0);for(var i=new Qe(1,0);!a.cb();)a=a.Da(),i=i.Da();for(;!i.Ua();)0>=a.cmp(e)&&(t=t.add(i),e=e.sub(a)),a=a.La(),i=i.La();return[t,e]};Qe.prototype.div=Qe.prototype.Xa;Qe.prototype.toString=function(){for(var a="",t=this;!t.Ua();){t=t.Xa(10);var e=t[0];a=t[1].lo+a,t=e}return a==""&&(a="0"),a};Qe.prototype.toString=Qe.prototype.toString;function Kl(a){for(var t=new Qe(0,0),e=new Qe(0,0),i=0;i<a.length;i++){if("0">a[i]||"9"<a[i])return null;e.lo=parseInt(a[i],10),t=t.eb(10).add(e)}return t}Qe.fromString=Kl;Qe.prototype.clone=function(){return new Qe(this.lo,this.hi)};Qe.prototype.clone=Qe.prototype.clone;function Bi(a,t){this.lo=a,this.hi=t}Ve("jspb.arith.Int64",Bi,void 0);Bi.prototype.add=function(a){return new Bi((this.lo+a.lo&4294967295)>>>0>>>0,((this.hi+a.hi&4294967295)>>>0)+(4294967296<=this.lo+a.lo?1:0)>>>0)};Bi.prototype.add=Bi.prototype.add;Bi.prototype.sub=function(a){return new Bi((this.lo-a.lo&4294967295)>>>0>>>0,((this.hi-a.hi&4294967295)>>>0)-(0>this.lo-a.lo?1:0)>>>0)};Bi.prototype.sub=Bi.prototype.sub;Bi.prototype.clone=function(){return new Bi(this.lo,this.hi)};Bi.prototype.clone=Bi.prototype.clone;Bi.prototype.toString=function(){var a=(this.hi&2147483648)!=0,t=new Qe(this.lo,this.hi);return a&&(t=new Qe(0,0).sub(t)),(a?"-":"")+t.toString()};Bi.prototype.toString=Bi.prototype.toString;function sf(a){var t=0<a.length&&a[0]=="-";return t&&(a=a.substring(1)),a=Kl(a),a===null?null:(t&&(a=new Qe(0,0).sub(a)),new Bi(a.lo,a.hi))}Bi.fromString=sf;function k(){this.c=[],this.b=0,this.a=new xe,this.h=[]}Ve("jspb.BinaryWriter",k,void 0);function ak(a,t){var e=a.a.end();a.c.push(e),a.c.push(t),a.b+=e.length+t.length}function ci(a,t){return it(a,t,2),t=a.a.end(),a.c.push(t),a.b+=t.length,t.push(a.b),t}function ui(a,t){var e=t.pop();for(e=a.b+a.a.length()-e,re(0<=e);127<e;)t.push(e&127|128),e>>>=7,a.b++;t.push(e),a.b++}k.prototype.pb=function(a,t,e){ak(this,a.subarray(t,e))};k.prototype.writeSerializedMessage=k.prototype.pb;k.prototype.Pb=function(a,t,e){a!=null&&t!=null&&e!=null&&this.pb(a,t,e)};k.prototype.maybeWriteSerializedMessage=k.prototype.Pb;k.prototype.reset=function(){this.c=[],this.a.end(),this.b=0,this.h=[]};k.prototype.reset=k.prototype.reset;k.prototype.ab=function(){re(this.h.length==0);for(var a=new Uint8Array(this.b+this.a.length()),t=this.c,e=t.length,i=0,n=0;n<e;n++){var r=t[n];a.set(r,i),i+=r.length}return t=this.a.end(),a.set(t,i),i+=t.length,re(i==a.length),this.c=[a],a};k.prototype.getResultBuffer=k.prototype.ab;k.prototype.Kb=function(a){return RD(this.ab(),a)};k.prototype.getResultBase64String=k.prototype.Kb;k.prototype.Va=function(a){this.h.push(ci(this,a))};k.prototype.beginSubMessage=k.prototype.Va;k.prototype.Ya=function(){re(0<=this.h.length),ui(this,this.h.pop())};k.prototype.endSubMessage=k.prototype.Ya;function it(a,t,e){re(1<=t&&t==Math.floor(t)),a.a.j(8*t+e)}k.prototype.Nc=function(a,t,e){switch(a){case 1:this.J(t,e);break;case 2:this.L(t,e);break;case 3:this.T(t,e);break;case 4:this.V(t,e);break;case 5:this.S(t,e);break;case 6:this.Qa(t,e);break;case 7:this.Pa(t,e);break;case 8:this.I(t,e);break;case 9:this.U(t,e);break;case 10:Ci("Group field type not supported in writeAny()");break;case 11:Ci("Message field type not supported in writeAny()");break;case 12:this.ja(t,e);break;case 13:this.s(t,e);break;case 14:this.R(t,e);break;case 15:this.Ra(t,e);break;case 16:this.Sa(t,e);break;case 17:this.rb(t,e);break;case 18:this.sb(t,e);break;case 30:this.K(t,e);break;case 31:this.N(t,e);break;default:Ci("Invalid field type in writeAny()")}};k.prototype.writeAny=k.prototype.Nc;function x1(a,t,e){e!=null&&(it(a,t,0),a.a.j(e))}function I1(a,t,e){e!=null&&(it(a,t,0),a.a.M(e))}k.prototype.S=function(a,t){t!=null&&(re(-2147483648<=t&&2147483648>t),I1(this,a,t))};k.prototype.writeInt32=k.prototype.S;k.prototype.ob=function(a,t){t!=null&&(t=parseInt(t,10),re(-2147483648<=t&&2147483648>t),I1(this,a,t))};k.prototype.writeInt32String=k.prototype.ob;k.prototype.T=function(a,t){t!=null&&(re(-9223372036854776e3<=t&&9223372036854776e3>t),t!=null&&(it(this,a,0),this.a.ua(t)))};k.prototype.writeInt64=k.prototype.T;k.prototype.ka=function(a,t){t!=null&&(t=sf(t),it(this,a,0),this.a.l(t.lo,t.hi))};k.prototype.writeInt64String=k.prototype.ka;k.prototype.s=function(a,t){t!=null&&(re(0<=t&&4294967296>t),x1(this,a,t))};k.prototype.writeUint32=k.prototype.s;k.prototype.ub=function(a,t){t!=null&&(t=parseInt(t,10),re(0<=t&&4294967296>t),x1(this,a,t))};k.prototype.writeUint32String=k.prototype.ub;k.prototype.V=function(a,t){t!=null&&(re(0<=t&&18446744073709552e3>t),t!=null&&(it(this,a,0),this.a.va(t)))};k.prototype.writeUint64=k.prototype.V;k.prototype.vb=function(a,t){t!=null&&(t=Kl(t),it(this,a,0),this.a.l(t.lo,t.hi))};k.prototype.writeUint64String=k.prototype.vb;k.prototype.rb=function(a,t){t!=null&&(re(-2147483648<=t&&2147483648>t),t!=null&&(it(this,a,0),this.a.wa(t)))};k.prototype.writeSint32=k.prototype.rb;k.prototype.sb=function(a,t){t!=null&&(re(-9223372036854776e3<=t&&9223372036854776e3>t),t!=null&&(it(this,a,0),this.a.xa(t)))};k.prototype.writeSint64=k.prototype.sb;k.prototype.$d=function(a,t){t!=null&&t!=null&&(it(this,a,0),this.a.W(t))};k.prototype.writeSintHash64=k.prototype.$d;k.prototype.Zd=function(a,t){t!=null&&t!=null&&(it(this,a,0),this.a.Ta(t))};k.prototype.writeSint64String=k.prototype.Zd;k.prototype.Pa=function(a,t){t!=null&&(re(0<=t&&4294967296>t),it(this,a,5),this.a.s(t))};k.prototype.writeFixed32=k.prototype.Pa;k.prototype.Qa=function(a,t){t!=null&&(re(0<=t&&18446744073709552e3>t),it(this,a,1),this.a.V(t))};k.prototype.writeFixed64=k.prototype.Qa;k.prototype.nb=function(a,t){t!=null&&(t=Kl(t),it(this,a,1),this.a.A(t.lo,t.hi))};k.prototype.writeFixed64String=k.prototype.nb;k.prototype.Ra=function(a,t){t!=null&&(re(-2147483648<=t&&2147483648>t),it(this,a,5),this.a.S(t))};k.prototype.writeSfixed32=k.prototype.Ra;k.prototype.Sa=function(a,t){t!=null&&(re(-9223372036854776e3<=t&&9223372036854776e3>t),it(this,a,1),this.a.T(t))};k.prototype.writeSfixed64=k.prototype.Sa;k.prototype.qb=function(a,t){t!=null&&(t=sf(t),it(this,a,1),this.a.A(t.lo,t.hi))};k.prototype.writeSfixed64String=k.prototype.qb;k.prototype.L=function(a,t){t!=null&&(it(this,a,5),this.a.L(t))};k.prototype.writeFloat=k.prototype.L;k.prototype.J=function(a,t){t!=null&&(it(this,a,1),this.a.J(t))};k.prototype.writeDouble=k.prototype.J;k.prototype.I=function(a,t){t!=null&&(re(typeof t=="boolean"||typeof t=="number"),it(this,a,0),this.a.I(t))};k.prototype.writeBool=k.prototype.I;k.prototype.R=function(a,t){t!=null&&(re(-2147483648<=t&&2147483648>t),it(this,a,0),this.a.M(t))};k.prototype.writeEnum=k.prototype.R;k.prototype.U=function(a,t){t!=null&&(a=ci(this,a),this.a.U(t),ui(this,a))};k.prototype.writeString=k.prototype.U;k.prototype.ja=function(a,t){t!=null&&(t=ef(t),it(this,a,2),this.a.j(t.length),ak(this,t))};k.prototype.writeBytes=k.prototype.ja;k.prototype.Rc=function(a,t,e){t!=null&&(a=ci(this,a),e(t,this),ui(this,a))};k.prototype.writeMessage=k.prototype.Rc;k.prototype.Sc=function(a,t,e){t!=null&&(it(this,1,3),it(this,2,0),this.a.M(a),a=ci(this,3),e(t,this),ui(this,a),it(this,1,4))};k.prototype.writeMessageSet=k.prototype.Sc;k.prototype.Oc=function(a,t,e){t!=null&&(it(this,a,3),e(t,this),it(this,a,4))};k.prototype.writeGroup=k.prototype.Oc;k.prototype.K=function(a,t){t!=null&&(re(t.length==8),it(this,a,1),this.a.K(t))};k.prototype.writeFixedHash64=k.prototype.K;k.prototype.N=function(a,t){t!=null&&(re(t.length==8),it(this,a,0),this.a.N(t))};k.prototype.writeVarintHash64=k.prototype.N;k.prototype.A=function(a,t,e){it(this,a,1),this.a.A(t,e)};k.prototype.writeSplitFixed64=k.prototype.A;k.prototype.l=function(a,t,e){it(this,a,0),this.a.l(t,e)};k.prototype.writeSplitVarint64=k.prototype.l;k.prototype.tb=function(a,t,e){it(this,a,0);var i=this.a;Qd(t,e,function(n,r){i.l(n>>>0,r>>>0)})};k.prototype.writeSplitZigzagVarint64=k.prototype.tb;k.prototype.Ed=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)I1(this,a,t[e])};k.prototype.writeRepeatedInt32=k.prototype.Ed;k.prototype.Fd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.ob(a,t[e])};k.prototype.writeRepeatedInt32String=k.prototype.Fd;k.prototype.Gd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++){var i=t[e];i!=null&&(it(this,a,0),this.a.ua(i))}};k.prototype.writeRepeatedInt64=k.prototype.Gd;k.prototype.Qd=function(a,t,e,i){if(t!=null)for(var n=0;n<t.length;n++)this.A(a,e(t[n]),i(t[n]))};k.prototype.writeRepeatedSplitFixed64=k.prototype.Qd;k.prototype.Rd=function(a,t,e,i){if(t!=null)for(var n=0;n<t.length;n++)this.l(a,e(t[n]),i(t[n]))};k.prototype.writeRepeatedSplitVarint64=k.prototype.Rd;k.prototype.Sd=function(a,t,e,i){if(t!=null)for(var n=0;n<t.length;n++)this.tb(a,e(t[n]),i(t[n]))};k.prototype.writeRepeatedSplitZigzagVarint64=k.prototype.Sd;k.prototype.Hd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.ka(a,t[e])};k.prototype.writeRepeatedInt64String=k.prototype.Hd;k.prototype.Ud=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)x1(this,a,t[e])};k.prototype.writeRepeatedUint32=k.prototype.Ud;k.prototype.Vd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.ub(a,t[e])};k.prototype.writeRepeatedUint32String=k.prototype.Vd;k.prototype.Wd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++){var i=t[e];i!=null&&(it(this,a,0),this.a.va(i))}};k.prototype.writeRepeatedUint64=k.prototype.Wd;k.prototype.Xd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.vb(a,t[e])};k.prototype.writeRepeatedUint64String=k.prototype.Xd;k.prototype.Md=function(a,t){if(t!=null)for(var e=0;e<t.length;e++){var i=t[e];i!=null&&(it(this,a,0),this.a.wa(i))}};k.prototype.writeRepeatedSint32=k.prototype.Md;k.prototype.Nd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++){var i=t[e];i!=null&&(it(this,a,0),this.a.xa(i))}};k.prototype.writeRepeatedSint64=k.prototype.Nd;k.prototype.Od=function(a,t){if(t!=null)for(var e=0;e<t.length;e++){var i=t[e];i!=null&&(it(this,a,0),this.a.Ta(i))}};k.prototype.writeRepeatedSint64String=k.prototype.Od;k.prototype.Pd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++){var i=t[e];i!=null&&(it(this,a,0),this.a.W(i))}};k.prototype.writeRepeatedSintHash64=k.prototype.Pd;k.prototype.yd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.Pa(a,t[e])};k.prototype.writeRepeatedFixed32=k.prototype.yd;k.prototype.zd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.Qa(a,t[e])};k.prototype.writeRepeatedFixed64=k.prototype.zd;k.prototype.Ad=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.nb(a,t[e])};k.prototype.writeRepeatedFixed64String=k.prototype.Ad;k.prototype.Jd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.Ra(a,t[e])};k.prototype.writeRepeatedSfixed32=k.prototype.Jd;k.prototype.Kd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.Sa(a,t[e])};k.prototype.writeRepeatedSfixed64=k.prototype.Kd;k.prototype.Ld=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.qb(a,t[e])};k.prototype.writeRepeatedSfixed64String=k.prototype.Ld;k.prototype.Cd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.L(a,t[e])};k.prototype.writeRepeatedFloat=k.prototype.Cd;k.prototype.wd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.J(a,t[e])};k.prototype.writeRepeatedDouble=k.prototype.wd;k.prototype.ud=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.I(a,t[e])};k.prototype.writeRepeatedBool=k.prototype.ud;k.prototype.xd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.R(a,t[e])};k.prototype.writeRepeatedEnum=k.prototype.xd;k.prototype.Td=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.U(a,t[e])};k.prototype.writeRepeatedString=k.prototype.Td;k.prototype.vd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.ja(a,t[e])};k.prototype.writeRepeatedBytes=k.prototype.vd;k.prototype.Id=function(a,t,e){if(t!=null)for(var i=0;i<t.length;i++){var n=ci(this,a);e(t[i],this),ui(this,n)}};k.prototype.writeRepeatedMessage=k.prototype.Id;k.prototype.Dd=function(a,t,e){if(t!=null)for(var i=0;i<t.length;i++)it(this,a,3),e(t[i],this),it(this,a,4)};k.prototype.writeRepeatedGroup=k.prototype.Dd;k.prototype.Bd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.K(a,t[e])};k.prototype.writeRepeatedFixedHash64=k.prototype.Bd;k.prototype.Yd=function(a,t){if(t!=null)for(var e=0;e<t.length;e++)this.N(a,t[e])};k.prototype.writeRepeatedVarintHash64=k.prototype.Yd;k.prototype.ad=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.M(t[e]);ui(this,a)}};k.prototype.writePackedInt32=k.prototype.ad;k.prototype.bd=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.M(parseInt(t[e],10));ui(this,a)}};k.prototype.writePackedInt32String=k.prototype.bd;k.prototype.cd=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.ua(t[e]);ui(this,a)}};k.prototype.writePackedInt64=k.prototype.cd;k.prototype.md=function(a,t,e,i){if(t!=null){a=ci(this,a);for(var n=0;n<t.length;n++)this.a.A(e(t[n]),i(t[n]));ui(this,a)}};k.prototype.writePackedSplitFixed64=k.prototype.md;k.prototype.nd=function(a,t,e,i){if(t!=null){a=ci(this,a);for(var n=0;n<t.length;n++)this.a.l(e(t[n]),i(t[n]));ui(this,a)}};k.prototype.writePackedSplitVarint64=k.prototype.nd;k.prototype.od=function(a,t,e,i){if(t!=null){a=ci(this,a);for(var n=this.a,r=0;r<t.length;r++)Qd(e(t[r]),i(t[r]),function(s,o){n.l(s>>>0,o>>>0)});ui(this,a)}};k.prototype.writePackedSplitZigzagVarint64=k.prototype.od;k.prototype.dd=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++){var i=sf(t[e]);this.a.l(i.lo,i.hi)}ui(this,a)}};k.prototype.writePackedInt64String=k.prototype.dd;k.prototype.pd=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.j(t[e]);ui(this,a)}};k.prototype.writePackedUint32=k.prototype.pd;k.prototype.qd=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.j(parseInt(t[e],10));ui(this,a)}};k.prototype.writePackedUint32String=k.prototype.qd;k.prototype.rd=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.va(t[e]);ui(this,a)}};k.prototype.writePackedUint64=k.prototype.rd;k.prototype.sd=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++){var i=Kl(t[e]);this.a.l(i.lo,i.hi)}ui(this,a)}};k.prototype.writePackedUint64String=k.prototype.sd;k.prototype.hd=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.wa(t[e]);ui(this,a)}};k.prototype.writePackedSint32=k.prototype.hd;k.prototype.jd=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.xa(t[e]);ui(this,a)}};k.prototype.writePackedSint64=k.prototype.jd;k.prototype.kd=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.W(bu(t[e]));ui(this,a)}};k.prototype.writePackedSint64String=k.prototype.kd;k.prototype.ld=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.W(t[e]);ui(this,a)}};k.prototype.writePackedSintHash64=k.prototype.ld;k.prototype.Wc=function(a,t){if(t!=null&&t.length)for(it(this,a,2),this.a.j(4*t.length),a=0;a<t.length;a++)this.a.s(t[a])};k.prototype.writePackedFixed32=k.prototype.Wc;k.prototype.Xc=function(a,t){if(t!=null&&t.length)for(it(this,a,2),this.a.j(8*t.length),a=0;a<t.length;a++)this.a.V(t[a])};k.prototype.writePackedFixed64=k.prototype.Xc;k.prototype.Yc=function(a,t){if(t!=null&&t.length)for(it(this,a,2),this.a.j(8*t.length),a=0;a<t.length;a++){var e=Kl(t[a]);this.a.A(e.lo,e.hi)}};k.prototype.writePackedFixed64String=k.prototype.Yc;k.prototype.ed=function(a,t){if(t!=null&&t.length)for(it(this,a,2),this.a.j(4*t.length),a=0;a<t.length;a++)this.a.S(t[a])};k.prototype.writePackedSfixed32=k.prototype.ed;k.prototype.fd=function(a,t){if(t!=null&&t.length)for(it(this,a,2),this.a.j(8*t.length),a=0;a<t.length;a++)this.a.T(t[a])};k.prototype.writePackedSfixed64=k.prototype.fd;k.prototype.gd=function(a,t){if(t!=null&&t.length)for(it(this,a,2),this.a.j(8*t.length),a=0;a<t.length;a++)this.a.ka(t[a])};k.prototype.writePackedSfixed64String=k.prototype.gd;k.prototype.$c=function(a,t){if(t!=null&&t.length)for(it(this,a,2),this.a.j(4*t.length),a=0;a<t.length;a++)this.a.L(t[a])};k.prototype.writePackedFloat=k.prototype.$c;k.prototype.Uc=function(a,t){if(t!=null&&t.length)for(it(this,a,2),this.a.j(8*t.length),a=0;a<t.length;a++)this.a.J(t[a])};k.prototype.writePackedDouble=k.prototype.Uc;k.prototype.Tc=function(a,t){if(t!=null&&t.length)for(it(this,a,2),this.a.j(t.length),a=0;a<t.length;a++)this.a.I(t[a])};k.prototype.writePackedBool=k.prototype.Tc;k.prototype.Vc=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.R(t[e]);ui(this,a)}};k.prototype.writePackedEnum=k.prototype.Vc;k.prototype.Zc=function(a,t){if(t!=null&&t.length)for(it(this,a,2),this.a.j(8*t.length),a=0;a<t.length;a++)this.a.K(t[a])};k.prototype.writePackedFixedHash64=k.prototype.Zc;k.prototype.td=function(a,t){if(t!=null&&t.length){a=ci(this,a);for(var e=0;e<t.length;e++)this.a.N(t[e]);ui(this,a)}};k.prototype.writePackedVarintHash64=k.prototype.td;typeof Oi=="object"&&(Oi.debug=ln,Oi.Map=nt,Oi.Message=Re,Oi.BinaryReader=R,Oi.BinaryWriter=k,Oi.ExtensionFieldInfo=cu,Oi.ExtensionFieldBinaryInfo=KD,Oi.exportSymbol=eB,Oi.inherits=tB,Oi.object={extend:iB},Oi.typeOf=ur)});var rk=Y1((C1,S1)=>{"use strict";(function(a,t){typeof C1=="object"&&typeof S1<"u"?S1.exports=t():typeof define=="function"&&define.amd?define(t):(a=typeof globalThis<"u"?globalThis:a||self).jsSHA=t()})(C1,function(){"use strict";var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function t(z,D,U,j){var $,P,le,pe=D||[0],be=(U=U||0)>>>3,De=j===-1?3:0;for($=0;$<z.length;$+=1)P=(le=$+be)>>>2,pe.length<=P&&pe.push(0),pe[P]|=z[$]<<8*(De+j*(le%4));return{value:pe,binLen:8*z.length+U}}function e(z,D,U){switch(D){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(z){case"HEX":return function(j,$,P){return function(le,pe,be,De){var Ke,Te,Ne,ot;if(le.length%2!=0)throw new Error("String of HEX type must be in byte increments");var ve=pe||[0],Lt=(be=be||0)>>>3,mt=De===-1?3:0;for(Ke=0;Ke<le.length;Ke+=2){if(Te=parseInt(le.substr(Ke,2),16),isNaN(Te))throw new Error("String of HEX type contains invalid characters");for(Ne=(ot=(Ke>>>1)+Lt)>>>2;ve.length<=Ne;)ve.push(0);ve[Ne]|=Te<<8*(mt+De*(ot%4))}return{value:ve,binLen:4*le.length+be}}(j,$,P,U)};case"TEXT":return function(j,$,P){return function(le,pe,be,De,Ke){var Te,Ne,ot,ve,Lt,mt,It,Rt,sa=0,Li=be||[0],Fi=(De=De||0)>>>3;if(pe==="UTF8")for(It=Ke===-1?3:0,ot=0;ot<le.length;ot+=1)for(Ne=[],128>(Te=le.charCodeAt(ot))?Ne.push(Te):2048>Te?(Ne.push(192|Te>>>6),Ne.push(128|63&Te)):55296>Te||57344<=Te?Ne.push(224|Te>>>12,128|Te>>>6&63,128|63&Te):(ot+=1,Te=65536+((1023&Te)<<10|1023&le.charCodeAt(ot)),Ne.push(240|Te>>>18,128|Te>>>12&63,128|Te>>>6&63,128|63&Te)),ve=0;ve<Ne.length;ve+=1){for(Lt=(mt=sa+Fi)>>>2;Li.length<=Lt;)Li.push(0);Li[Lt]|=Ne[ve]<<8*(It+Ke*(mt%4)),sa+=1}else for(It=Ke===-1?2:0,Rt=pe==="UTF16LE"&&Ke!==1||pe!=="UTF16LE"&&Ke===1,ot=0;ot<le.length;ot+=1){for(Te=le.charCodeAt(ot),Rt===!0&&(Te=(ve=255&Te)<<8|Te>>>8),Lt=(mt=sa+Fi)>>>2;Li.length<=Lt;)Li.push(0);Li[Lt]|=Te<<8*(It+Ke*(mt%4)),sa+=2}return{value:Li,binLen:8*sa+De}}(j,D,$,P,U)};case"B64":return function(j,$,P){return function(le,pe,be,De){var Ke,Te,Ne,ot,ve,Lt,mt=0,It=pe||[0],Rt=(be=be||0)>>>3,sa=De===-1?3:0,Li=le.indexOf("=");if(le.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(le=le.replace(/=/g,""),Li!==-1&&Li<le.length)throw new Error("Invalid '=' found in base-64 string");for(Ke=0;Ke<le.length;Ke+=4){for(ot=le.substr(Ke,4),Ne=0,Te=0;Te<ot.length;Te+=1)Ne|=a.indexOf(ot.charAt(Te))<<18-6*Te;for(Te=0;Te<ot.length-1;Te+=1){for(ve=(Lt=mt+Rt)>>>2;It.length<=ve;)It.push(0);It[ve]|=(Ne>>>16-8*Te&255)<<8*(sa+De*(Lt%4)),mt+=1}}return{value:It,binLen:8*mt+be}}(j,$,P,U)};case"BYTES":return function(j,$,P){return function(le,pe,be,De){var Ke,Te,Ne,ot,ve=pe||[0],Lt=(be=be||0)>>>3,mt=De===-1?3:0;for(Te=0;Te<le.length;Te+=1)Ke=le.charCodeAt(Te),Ne=(ot=Te+Lt)>>>2,ve.length<=Ne&&ve.push(0),ve[Ne]|=Ke<<8*(mt+De*(ot%4));return{value:ve,binLen:8*le.length+be}}(j,$,P,U)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(j,$,P){return function(le,pe,be,De){return t(new Uint8Array(le),pe,be,De)}(j,$,P,U)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(j,$,P){return t(j,$,P,U)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function i(z,D,U,j){switch(z){case"HEX":return function($){return function(P,le,pe,be){var De,Ke,Te="",Ne=le/8,ot=pe===-1?3:0;for(De=0;De<Ne;De+=1)Ke=P[De>>>2]>>>8*(ot+pe*(De%4)),Te+="0123456789abcdef".charAt(Ke>>>4&15)+"0123456789abcdef".charAt(15&Ke);return be.outputUpper?Te.toUpperCase():Te}($,D,U,j)};case"B64":return function($){return function(P,le,pe,be){var De,Ke,Te,Ne,ot,ve="",Lt=le/8,mt=pe===-1?3:0;for(De=0;De<Lt;De+=3)for(Ne=De+1<Lt?P[De+1>>>2]:0,ot=De+2<Lt?P[De+2>>>2]:0,Te=(P[De>>>2]>>>8*(mt+pe*(De%4))&255)<<16|(Ne>>>8*(mt+pe*((De+1)%4))&255)<<8|ot>>>8*(mt+pe*((De+2)%4))&255,Ke=0;Ke<4;Ke+=1)ve+=8*De+6*Ke<=le?a.charAt(Te>>>6*(3-Ke)&63):be.b64Pad;return ve}($,D,U,j)};case"BYTES":return function($){return function(P,le,pe){var be,De,Ke="",Te=le/8,Ne=pe===-1?3:0;for(be=0;be<Te;be+=1)De=P[be>>>2]>>>8*(Ne+pe*(be%4))&255,Ke+=String.fromCharCode(De);return Ke}($,D,U)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function($){return function(P,le,pe){var be,De=le/8,Ke=new ArrayBuffer(De),Te=new Uint8Array(Ke),Ne=pe===-1?3:0;for(be=0;be<De;be+=1)Te[be]=P[be>>>2]>>>8*(Ne+pe*(be%4))&255;return Ke}($,D,U)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function($){return function(P,le,pe){var be,De=le/8,Ke=pe===-1?3:0,Te=new Uint8Array(De);for(be=0;be<De;be+=1)Te[be]=P[be>>>2]>>>8*(Ke+pe*(be%4))&255;return Te}($,D,U)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],s=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],o="Chosen SHA variant is not supported";function l(z,D){var U,j,$=z.binLen>>>3,P=D.binLen>>>3,le=$<<3,pe=4-$<<3;if($%4!=0){for(U=0;U<P;U+=4)j=$+U>>>2,z.value[j]|=D.value[U>>>2]<<le,z.value.push(0),z.value[j+1]|=D.value[U>>>2]>>>pe;return(z.value.length<<2)-4>=P+$&&z.value.pop(),{value:z.value,binLen:z.binLen+D.binLen}}return{value:z.value.concat(D.value),binLen:z.binLen+D.binLen}}function u(z){var D={outputUpper:!1,b64Pad:"=",outputLen:-1},U=z||{},j="Output length must be a multiple of 8";if(D.outputUpper=U.outputUpper||!1,U.b64Pad&&(D.b64Pad=U.b64Pad),U.outputLen){if(U.outputLen%8!=0)throw new Error(j);D.outputLen=U.outputLen}else if(U.shakeLen){if(U.shakeLen%8!=0)throw new Error(j);D.outputLen=U.shakeLen}if(typeof D.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof D.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return D}function m(z,D,U,j){var $=z+" must include a value and format";if(!D){if(!j)throw new Error($);return j}if(D.value===void 0||!D.format)throw new Error($);return e(D.format,D.encoding||"UTF8",U)(D.value)}var h=function(){function z(D,U,j){var $=j||{};if(this.t=U,this.i=$.encoding||"UTF8",this.numRounds=$.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=D,this.u=[],this.s=0,this.h=!1,this.v=0,this.A=!1,this.l=[],this.H=[]}return z.prototype.update=function(D){var U,j=0,$=this.S>>>5,P=this.p(D,this.u,this.s),le=P.binLen,pe=P.value,be=le>>>5;for(U=0;U<be;U+=$)j+this.S<=le&&(this.m=this.R(pe.slice(U,U+$),this.m),j+=this.S);this.v+=j,this.u=pe.slice(j>>>5),this.s=le%this.S,this.h=!0},z.prototype.getHash=function(D,U){var j,$,P=this.U,le=u(U);if(this.T){if(le.outputLen===-1)throw new Error("Output length must be specified in options");P=le.outputLen}var pe=i(D,P,this.C,le);if(this.A&&this.F)return pe(this.F(le));for($=this.K(this.u.slice(),this.s,this.v,this.B(this.m),P),j=1;j<this.numRounds;j+=1)this.T&&P%32!=0&&($[$.length-1]&=16777215>>>24-P%32),$=this.K($,P,0,this.L(this.o),P);return pe($)},z.prototype.setHMACKey=function(D,U,j){if(!this.g)throw new Error("Variant does not support HMAC");if(this.h)throw new Error("Cannot set MAC key after calling update");var $=e(U,(j||{}).encoding||"UTF8",this.C);this.k($(D))},z.prototype.k=function(D){var U,j=this.S>>>3,$=j/4-1;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(j<D.binLen/8&&(D.value=this.K(D.value,D.binLen,0,this.L(this.o),this.U));D.value.length<=$;)D.value.push(0);for(U=0;U<=$;U+=1)this.l[U]=909522486^D.value[U],this.H[U]=1549556828^D.value[U];this.m=this.R(this.l,this.m),this.v=this.S,this.A=!0},z.prototype.getHMAC=function(D,U){var j=u(U);return i(D,this.U,this.C,j)(this.Y())},z.prototype.Y=function(){var D;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");var U=this.K(this.u.slice(),this.s,this.v,this.B(this.m),this.U);return D=this.R(this.H,this.L(this.o)),D=this.K(U,this.U,this.S,D,this.U)},z}(),y=function(z,D){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,j){U.__proto__=j}||function(U,j){for(var $ in j)Object.prototype.hasOwnProperty.call(j,$)&&(U[$]=j[$])})(z,D)};function x(z,D){function U(){this.constructor=z}y(z,D),z.prototype=D===null?Object.create(D):(U.prototype=D.prototype,new U)}function E(z,D){return z<<D|z>>>32-D}function S(z,D){return z>>>D|z<<32-D}function T(z,D){return z>>>D}function N(z,D,U){return z^D^U}function F(z,D,U){return z&D^~z&U}function G(z,D,U){return z&D^z&U^D&U}function Y(z){return S(z,2)^S(z,13)^S(z,22)}function Z(z,D){var U=(65535&z)+(65535&D);return(65535&(z>>>16)+(D>>>16)+(U>>>16))<<16|65535&U}function ne(z,D,U,j){var $=(65535&z)+(65535&D)+(65535&U)+(65535&j);return(65535&(z>>>16)+(D>>>16)+(U>>>16)+(j>>>16)+($>>>16))<<16|65535&$}function J(z,D,U,j,$){var P=(65535&z)+(65535&D)+(65535&U)+(65535&j)+(65535&$);return(65535&(z>>>16)+(D>>>16)+(U>>>16)+(j>>>16)+($>>>16)+(P>>>16))<<16|65535&P}function ue(z){return S(z,7)^S(z,18)^T(z,3)}function se(z){return S(z,6)^S(z,11)^S(z,25)}function Ie(z){return[1732584193,4023233417,2562383102,271733878,3285377520]}function Ce(z,D){var U,j,$,P,le,pe,be,De=[];for(U=D[0],j=D[1],$=D[2],P=D[3],le=D[4],be=0;be<80;be+=1)De[be]=be<16?z[be]:E(De[be-3]^De[be-8]^De[be-14]^De[be-16],1),pe=be<20?J(E(U,5),F(j,$,P),le,1518500249,De[be]):be<40?J(E(U,5),N(j,$,P),le,1859775393,De[be]):be<60?J(E(U,5),G(j,$,P),le,2400959708,De[be]):J(E(U,5),N(j,$,P),le,3395469782,De[be]),le=P,P=$,$=E(j,30),j=U,U=pe;return D[0]=Z(U,D[0]),D[1]=Z(j,D[1]),D[2]=Z($,D[2]),D[3]=Z(P,D[3]),D[4]=Z(le,D[4]),D}function te(z,D,U,j){for(var $,P=15+(D+65>>>9<<4),le=D+U;z.length<=P;)z.push(0);for(z[D>>>5]|=128<<24-D%32,z[P]=4294967295&le,z[P-1]=le/4294967296|0,$=0;$<z.length;$+=16)j=Ce(z.slice($,$+16),j);return j}var et=function(z){function D(U,j,$){var P=this;if(U!=="SHA-1")throw new Error(o);var le=$||{};return(P=z.call(this,U,j,$)||this).g=!0,P.F=P.Y,P.C=-1,P.p=e(P.t,P.i,P.C),P.R=Ce,P.B=function(pe){return pe.slice()},P.L=Ie,P.K=te,P.m=[1732584193,4023233417,2562383102,271733878,3285377520],P.S=512,P.U=160,P.T=!1,le.hmacKey&&P.k(m("hmacKey",le.hmacKey,P.C)),P}return x(D,z),D}(h);function me(z){return z=="SHA-224"?r.slice():s.slice()}function ke(z,D){var U,j,$,P,le,pe,be,De,Ke,Te,Ne,ot,ve=[];for(U=D[0],j=D[1],$=D[2],P=D[3],le=D[4],pe=D[5],be=D[6],De=D[7],Ne=0;Ne<64;Ne+=1)ve[Ne]=Ne<16?z[Ne]:ne(S(ot=ve[Ne-2],17)^S(ot,19)^T(ot,10),ve[Ne-7],ue(ve[Ne-15]),ve[Ne-16]),Ke=J(De,se(le),F(le,pe,be),n[Ne],ve[Ne]),Te=Z(Y(U),G(U,j,$)),De=be,be=pe,pe=le,le=Z(P,Ke),P=$,$=j,j=U,U=Z(Ke,Te);return D[0]=Z(U,D[0]),D[1]=Z(j,D[1]),D[2]=Z($,D[2]),D[3]=Z(P,D[3]),D[4]=Z(le,D[4]),D[5]=Z(pe,D[5]),D[6]=Z(be,D[6]),D[7]=Z(De,D[7]),D}var Me=function(z){function D(U,j,$){var P=this;if(U!=="SHA-224"&&U!=="SHA-256")throw new Error(o);var le=$||{};return(P=z.call(this,U,j,$)||this).F=P.Y,P.g=!0,P.C=-1,P.p=e(P.t,P.i,P.C),P.R=ke,P.B=function(pe){return pe.slice()},P.L=me,P.K=function(pe,be,De,Ke){return function(Te,Ne,ot,ve,Lt){for(var mt,It=15+(Ne+65>>>9<<4),Rt=Ne+ot;Te.length<=It;)Te.push(0);for(Te[Ne>>>5]|=128<<24-Ne%32,Te[It]=4294967295&Rt,Te[It-1]=Rt/4294967296|0,mt=0;mt<Te.length;mt+=16)ve=ke(Te.slice(mt,mt+16),ve);return Lt==="SHA-224"?[ve[0],ve[1],ve[2],ve[3],ve[4],ve[5],ve[6]]:ve}(pe,be,De,Ke,U)},P.m=me(U),P.S=512,P.U=U==="SHA-224"?224:256,P.T=!1,le.hmacKey&&P.k(m("hmacKey",le.hmacKey,P.C)),P}return x(D,z),D}(h),V=function(z,D){this.N=z,this.I=D};function Ye(z,D){var U;return D>32?(U=64-D,new V(z.I<<D|z.N>>>U,z.N<<D|z.I>>>U)):D!==0?(U=32-D,new V(z.N<<D|z.I>>>U,z.I<<D|z.N>>>U)):z}function Se(z,D){var U;return D<32?(U=32-D,new V(z.N>>>D|z.I<<U,z.I>>>D|z.N<<U)):(U=64-D,new V(z.I>>>D|z.N<<U,z.N>>>D|z.I<<U))}function lt(z,D){return new V(z.N>>>D,z.I>>>D|z.N<<32-D)}function yt(z,D,U){return new V(z.N&D.N^~z.N&U.N,z.I&D.I^~z.I&U.I)}function qt(z,D,U){return new V(z.N&D.N^z.N&U.N^D.N&U.N,z.I&D.I^z.I&U.I^D.I&U.I)}function Vt(z){var D=Se(z,28),U=Se(z,34),j=Se(z,39);return new V(D.N^U.N^j.N,D.I^U.I^j.I)}function at(z,D){var U,j;U=(65535&z.I)+(65535&D.I);var $=(65535&(j=(z.I>>>16)+(D.I>>>16)+(U>>>16)))<<16|65535&U;return U=(65535&z.N)+(65535&D.N)+(j>>>16),j=(z.N>>>16)+(D.N>>>16)+(U>>>16),new V((65535&j)<<16|65535&U,$)}function Ft(z,D,U,j){var $,P;$=(65535&z.I)+(65535&D.I)+(65535&U.I)+(65535&j.I);var le=(65535&(P=(z.I>>>16)+(D.I>>>16)+(U.I>>>16)+(j.I>>>16)+($>>>16)))<<16|65535&$;return $=(65535&z.N)+(65535&D.N)+(65535&U.N)+(65535&j.N)+(P>>>16),P=(z.N>>>16)+(D.N>>>16)+(U.N>>>16)+(j.N>>>16)+($>>>16),new V((65535&P)<<16|65535&$,le)}function Zt(z,D,U,j,$){var P,le;P=(65535&z.I)+(65535&D.I)+(65535&U.I)+(65535&j.I)+(65535&$.I);var pe=(65535&(le=(z.I>>>16)+(D.I>>>16)+(U.I>>>16)+(j.I>>>16)+($.I>>>16)+(P>>>16)))<<16|65535&P;return P=(65535&z.N)+(65535&D.N)+(65535&U.N)+(65535&j.N)+(65535&$.N)+(le>>>16),le=(z.N>>>16)+(D.N>>>16)+(U.N>>>16)+(j.N>>>16)+($.N>>>16)+(P>>>16),new V((65535&le)<<16|65535&P,pe)}function Xi(z,D){return new V(z.N^D.N,z.I^D.I)}function aa(z){var D=Se(z,1),U=Se(z,8),j=lt(z,7);return new V(D.N^U.N^j.N,D.I^U.I^j.I)}function na(z){var D=Se(z,14),U=Se(z,18),j=Se(z,41);return new V(D.N^U.N^j.N,D.I^U.I^j.I)}var yn=[new V(n[0],3609767458),new V(n[1],602891725),new V(n[2],3964484399),new V(n[3],2173295548),new V(n[4],4081628472),new V(n[5],3053834265),new V(n[6],2937671579),new V(n[7],3664609560),new V(n[8],2734883394),new V(n[9],1164996542),new V(n[10],1323610764),new V(n[11],3590304994),new V(n[12],4068182383),new V(n[13],991336113),new V(n[14],633803317),new V(n[15],3479774868),new V(n[16],2666613458),new V(n[17],944711139),new V(n[18],2341262773),new V(n[19],2007800933),new V(n[20],1495990901),new V(n[21],1856431235),new V(n[22],3175218132),new V(n[23],2198950837),new V(n[24],3999719339),new V(n[25],766784016),new V(n[26],2566594879),new V(n[27],3203337956),new V(n[28],1034457026),new V(n[29],2466948901),new V(n[30],3758326383),new V(n[31],168717936),new V(n[32],1188179964),new V(n[33],1546045734),new V(n[34],1522805485),new V(n[35],2643833823),new V(n[36],2343527390),new V(n[37],1014477480),new V(n[38],1206759142),new V(n[39],344077627),new V(n[40],1290863460),new V(n[41],3158454273),new V(n[42],3505952657),new V(n[43],106217008),new V(n[44],3606008344),new V(n[45],1432725776),new V(n[46],1467031594),new V(n[47],851169720),new V(n[48],3100823752),new V(n[49],1363258195),new V(n[50],3750685593),new V(n[51],3785050280),new V(n[52],3318307427),new V(n[53],3812723403),new V(n[54],2003034995),new V(n[55],3602036899),new V(n[56],1575990012),new V(n[57],1125592928),new V(n[58],2716904306),new V(n[59],442776044),new V(n[60],593698344),new V(n[61],3733110249),new V(n[62],2999351573),new V(n[63],3815920427),new V(3391569614,3928383900),new V(3515267271,566280711),new V(3940187606,3454069534),new V(4118630271,4000239992),new V(116418474,1914138554),new V(174292421,2731055270),new V(289380356,3203993006),new V(460393269,320620315),new V(685471733,587496836),new V(852142971,1086792851),new V(1017036298,365543100),new V(1126000580,2618297676),new V(1288033470,3409855158),new V(1501505948,4234509866),new V(1607167915,987167468),new V(1816402316,1246189591)];function ra(z){return z==="SHA-384"?[new V(3418070365,r[0]),new V(1654270250,r[1]),new V(2438529370,r[2]),new V(355462360,r[3]),new V(1731405415,r[4]),new V(41048885895,r[5]),new V(3675008525,r[6]),new V(1203062813,r[7])]:[new V(s[0],4089235720),new V(s[1],2227873595),new V(s[2],4271175723),new V(s[3],1595750129),new V(s[4],2917565137),new V(s[5],725511199),new V(s[6],4215389547),new V(s[7],327033209)]}function Qi(z,D){var U,j,$,P,le,pe,be,De,Ke,Te,Ne,ot,ve,Lt,mt,It,Rt=[];for(U=D[0],j=D[1],$=D[2],P=D[3],le=D[4],pe=D[5],be=D[6],De=D[7],Ne=0;Ne<80;Ne+=1)Ne<16?(ot=2*Ne,Rt[Ne]=new V(z[ot],z[ot+1])):Rt[Ne]=Ft((ve=Rt[Ne-2],Lt=void 0,mt=void 0,It=void 0,Lt=Se(ve,19),mt=Se(ve,61),It=lt(ve,6),new V(Lt.N^mt.N^It.N,Lt.I^mt.I^It.I)),Rt[Ne-7],aa(Rt[Ne-15]),Rt[Ne-16]),Ke=Zt(De,na(le),yt(le,pe,be),yn[Ne],Rt[Ne]),Te=at(Vt(U),qt(U,j,$)),De=be,be=pe,pe=le,le=at(P,Ke),P=$,$=j,j=U,U=at(Ke,Te);return D[0]=at(U,D[0]),D[1]=at(j,D[1]),D[2]=at($,D[2]),D[3]=at(P,D[3]),D[4]=at(le,D[4]),D[5]=at(pe,D[5]),D[6]=at(be,D[6]),D[7]=at(De,D[7]),D}var ga=function(z){function D(U,j,$){var P=this;if(U!=="SHA-384"&&U!=="SHA-512")throw new Error(o);var le=$||{};return(P=z.call(this,U,j,$)||this).F=P.Y,P.g=!0,P.C=-1,P.p=e(P.t,P.i,P.C),P.R=Qi,P.B=function(pe){return pe.slice()},P.L=ra,P.K=function(pe,be,De,Ke){return function(Te,Ne,ot,ve,Lt){for(var mt,It=31+(Ne+129>>>10<<5),Rt=Ne+ot;Te.length<=It;)Te.push(0);for(Te[Ne>>>5]|=128<<24-Ne%32,Te[It]=4294967295&Rt,Te[It-1]=Rt/4294967296|0,mt=0;mt<Te.length;mt+=32)ve=Qi(Te.slice(mt,mt+32),ve);return Lt==="SHA-384"?[(ve=ve)[0].N,ve[0].I,ve[1].N,ve[1].I,ve[2].N,ve[2].I,ve[3].N,ve[3].I,ve[4].N,ve[4].I,ve[5].N,ve[5].I]:[ve[0].N,ve[0].I,ve[1].N,ve[1].I,ve[2].N,ve[2].I,ve[3].N,ve[3].I,ve[4].N,ve[4].I,ve[5].N,ve[5].I,ve[6].N,ve[6].I,ve[7].N,ve[7].I]}(pe,be,De,Ke,U)},P.m=ra(U),P.S=1024,P.U=U==="SHA-384"?384:512,P.T=!1,le.hmacKey&&P.k(m("hmacKey",le.hmacKey,P.C)),P}return x(D,z),D}(h),_a=[new V(0,1),new V(0,32898),new V(2147483648,32906),new V(2147483648,2147516416),new V(0,32907),new V(0,2147483649),new V(2147483648,2147516545),new V(2147483648,32777),new V(0,138),new V(0,136),new V(0,2147516425),new V(0,2147483658),new V(0,2147516555),new V(2147483648,139),new V(2147483648,32905),new V(2147483648,32771),new V(2147483648,32770),new V(2147483648,128),new V(0,32778),new V(2147483648,2147483658),new V(2147483648,2147516545),new V(2147483648,32896),new V(0,2147483649),new V(2147483648,2147516424)],bn=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function wr(z){var D,U=[];for(D=0;D<5;D+=1)U[D]=[new V(0,0),new V(0,0),new V(0,0),new V(0,0),new V(0,0)];return U}function Ss(z){var D,U=[];for(D=0;D<5;D+=1)U[D]=z[D].slice();return U}function zn(z,D){var U,j,$,P,le,pe,be,De,Ke,Te=[],Ne=[];if(z!==null)for(j=0;j<z.length;j+=2)D[(j>>>1)%5][(j>>>1)/5|0]=Xi(D[(j>>>1)%5][(j>>>1)/5|0],new V(z[j+1],z[j]));for(U=0;U<24;U+=1){for(P=wr(),j=0;j<5;j+=1)Te[j]=(le=D[j][0],pe=D[j][1],be=D[j][2],De=D[j][3],Ke=D[j][4],new V(le.N^pe.N^be.N^De.N^Ke.N,le.I^pe.I^be.I^De.I^Ke.I));for(j=0;j<5;j+=1)Ne[j]=Xi(Te[(j+4)%5],Ye(Te[(j+1)%5],1));for(j=0;j<5;j+=1)for($=0;$<5;$+=1)D[j][$]=Xi(D[j][$],Ne[j]);for(j=0;j<5;j+=1)for($=0;$<5;$+=1)P[$][(2*j+3*$)%5]=Ye(D[j][$],bn[j][$]);for(j=0;j<5;j+=1)for($=0;$<5;$+=1)D[j][$]=Xi(P[j][$],new V(~P[(j+1)%5][$].N&P[(j+2)%5][$].N,~P[(j+1)%5][$].I&P[(j+2)%5][$].I));D[0][0]=Xi(D[0][0],_a[U])}return D}function Tr(z){var D,U,j=0,$=[0,0],P=[4294967295&z,z/4294967296&2097151];for(D=6;D>=0;D--)(U=P[D>>2]>>>8*D&255)===0&&j===0||($[j+1>>2]|=U<<8*(j+1),j+=1);return j=j!==0?j:1,$[0]|=j,{value:j+1>4?$:[$[0]],binLen:8+8*j}}function Cr(z){return l(Tr(z.binLen),z)}function Sr(z,D){var U,j=Tr(D),$=D>>>2,P=($-(j=l(j,z)).value.length%$)%$;for(U=0;U<P;U++)j.value.push(0);return j.value}var Io=function(z){function D(U,j,$){var P=this,le=6,pe=0,be=$||{};if((P=z.call(this,U,j,$)||this).numRounds!==1){if(be.kmacKey||be.hmacKey)throw new Error("Cannot set numRounds with MAC");if(P.o==="CSHAKE128"||P.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(P.C=1,P.p=e(P.t,P.i,P.C),P.R=zn,P.B=Ss,P.L=wr,P.m=wr(),P.T=!1,U){case"SHA3-224":P.S=pe=1152,P.U=224,P.g=!0,P.F=P.Y;break;case"SHA3-256":P.S=pe=1088,P.U=256,P.g=!0,P.F=P.Y;break;case"SHA3-384":P.S=pe=832,P.U=384,P.g=!0,P.F=P.Y;break;case"SHA3-512":P.S=pe=576,P.U=512,P.g=!0,P.F=P.Y;break;case"SHAKE128":le=31,P.S=pe=1344,P.U=-1,P.T=!0,P.g=!1,P.F=null;break;case"SHAKE256":le=31,P.S=pe=1088,P.U=-1,P.T=!0,P.g=!1,P.F=null;break;case"KMAC128":le=4,P.S=pe=1344,P.M($),P.U=-1,P.T=!0,P.g=!1,P.F=P.X;break;case"KMAC256":le=4,P.S=pe=1088,P.M($),P.U=-1,P.T=!0,P.g=!1,P.F=P.X;break;case"CSHAKE128":P.S=pe=1344,le=P.O($),P.U=-1,P.T=!0,P.g=!1,P.F=null;break;case"CSHAKE256":P.S=pe=1088,le=P.O($),P.U=-1,P.T=!0,P.g=!1,P.F=null;break;default:throw new Error(o)}return P.K=function(De,Ke,Te,Ne,ot){return function(ve,Lt,mt,It,Rt,sa,Li){var Fi,Kn,qn=0,za=[],Yn=Rt>>>5,Ds=Lt>>>5;for(Fi=0;Fi<Ds&&Lt>=Rt;Fi+=Yn)It=zn(ve.slice(Fi,Fi+Yn),It),Lt-=Rt;for(ve=ve.slice(Fi),Lt%=Rt;ve.length<Yn;)ve.push(0);for(ve[(Fi=Lt>>>3)>>2]^=sa<<Fi%4*8,ve[Yn-1]^=2147483648,It=zn(ve,It);32*za.length<Li&&(Kn=It[qn%5][qn/5|0],za.push(Kn.I),!(32*za.length>=Li));)za.push(Kn.N),64*(qn+=1)%Rt==0&&(zn(null,It),qn=0);return za}(De,Ke,0,Ne,pe,le,ot)},be.hmacKey&&P.k(m("hmacKey",be.hmacKey,P.C)),P}return x(D,z),D.prototype.O=function(U,j){var $=function(be){var De=be||{};return{funcName:m("funcName",De.funcName,1,{value:[],binLen:0}),customization:m("Customization",De.customization,1,{value:[],binLen:0})}}(U||{});j&&($.funcName=j);var P=l(Cr($.funcName),Cr($.customization));if($.customization.binLen!==0||$.funcName.binLen!==0){for(var le=Sr(P,this.S>>>3),pe=0;pe<le.length;pe+=this.S>>>5)this.m=this.R(le.slice(pe,pe+(this.S>>>5)),this.m),this.v+=this.S;return 4}return 31},D.prototype.M=function(U){var j=function(le){var pe=le||{};return{kmacKey:m("kmacKey",pe.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:m("Customization",pe.customization,1,{value:[],binLen:0})}}(U||{});this.O(U,j.funcName);for(var $=Sr(Cr(j.kmacKey),this.S>>>3),P=0;P<$.length;P+=this.S>>>5)this.m=this.R($.slice(P,P+(this.S>>>5)),this.m),this.v+=this.S;this.A=!0},D.prototype.X=function(U){var j=l({value:this.u.slice(),binLen:this.s},function($){var P,le,pe=0,be=[0,0],De=[4294967295&$,$/4294967296&2097151];for(P=6;P>=0;P--)(le=De[P>>2]>>>8*P&255)==0&&pe===0||(be[pe>>2]|=le<<8*pe,pe+=1);return be[(pe=pe!==0?pe:1)>>2]|=pe<<8*pe,{value:pe+1>4?be:[be[0]],binLen:8+8*pe}}(U.outputLen));return this.K(j.value,j.binLen,this.v,this.B(this.m),U.outputLen)},D}(h);return function(){function z(D,U,j){if(D=="SHA-1")this.j=new et(D,U,j);else if(D=="SHA-224"||D=="SHA-256")this.j=new Me(D,U,j);else if(D=="SHA-384"||D=="SHA-512")this.j=new ga(D,U,j);else{if(D!="SHA3-224"&&D!="SHA3-256"&&D!="SHA3-384"&&D!="SHA3-512"&&D!="SHAKE128"&&D!="SHAKE256"&&D!="CSHAKE128"&&D!="CSHAKE256"&&D!="KMAC128"&&D!="KMAC256")throw new Error(o);this.j=new Io(D,U,j)}}return z.prototype.update=function(D){this.j.update(D)},z.prototype.getHash=function(D,U){return this.j.getHash(D,U)},z.prototype.setHMACKey=function(D,U,j){this.j.setHMACKey(D,U,j)},z.prototype.getHMAC=function(D,U){return this.j.getHMAC(D,U)},z}()})});var up=class extends Laya.Scene{};var{regClass:Pk,property:U5}=Laya,cc=class extends up{constructor(){super()}onEnable(){console.log("IndexRT onEnable"),this.uiBtn.on(Laya.Event.CLICK,this,()=>{console.log("uiBtn"),Laya.Scene.open("scenes/UiMain.ls")}),this.phyBtn.on(Laya.Event.CLICK,this,()=>{console.log("phyBtn"),Laya.Scene.open("scenes/PhysicsGameMain.ls")}),this.d3Btn.on(Laya.Event.CLICK,this,()=>{console.log("d3Btn"),Laya.Scene.open("scenes/D3Main.ls")})}onDestroy(){}};cc=d([Pk("wtSVevJMRPCBIPp2HPhqpw")],cc);var pp=class extends Laya.Scene{};var{regClass:Nk,property:Ok}=Laya,uc=class extends pp{constructor(){super();this.text=""}get dataSource(){return super.dataSource}set dataSource(e){if(super.dataSource=e,!!e){if(e.avatar){let i=this.getChildByName("avatar").getChildByName("redHot");i.visible=e.avatar.redHot.visible}if(e.flag){let i=this.getChildByName("flag").getChildByName("flagText");i.text=e.flag.flagText.text}}}};d([Ok({type:"string"})],uc.prototype,"text",2),uc=d([Nk("c-3Sonu7RWOm5ETy2TrBcg")],uc);var mp=class extends Laya.Scene{};var je=class{constructor(){this._keys=[];this.THIS_ID="id"}init(t){for(let e in t){this._keys.push(e);let i=t[e];t[e]instanceof String&&String(t[e]).indexOf("[[")>=0&&(i=JSON.parse(t[e])),this[e]=i}}checkItems(){}};var pc=class extends je{};var ye=class{constructor(){this._values=[];this._keys=[];this.SERIALIZATION_NUM=new Date().getTime()}get values(){return this._values}get keys(){return this._keys}set(t,e){let i=this.indexOf(t);if(i>=0){this._values[i]=e;return}this._keys.push(t),this._values.push(e)}unshift(t,e){let i=this.indexOf(t);if(i>=0){this._values[i]=e;return}this._keys.unshift(t),this._values.unshift(e)}indexOf(t){let e=this._keys.indexOf(t);return e>=0?e:(t=t instanceof String?Number(t):t instanceof Number?t.toString():t,this._keys.indexOf(t))}get(t){let e=this.indexOf(t);return e<0?null:this._values[e]}remove(t){let e=this.indexOf(t);return e>=0?(this._keys.splice(e,1),this._values.splice(e,1),!0):!1}clear(){this._values.length=0,this._keys.length=0}};var ze=class ze{constructor(){}static get LoginType(){return ze._LoginType}static set LoginType(t){ze._LoginType=t,ze._LoginType&&ze._LoginType!=""&&Laya.LocalStorage.setItem(ze.COOKIE_CF_LoginType,ze._LoginType)}static get isWhiteList(){return!0}static get intance(){return ze._instance||(ze._instance=new ze),ze._instance}init(){}static get server(){return getServer()}static get vType(){return getVType()}static get requestTime(){return 0}static get loginTime(){return 0}static set m_iTimeFrame(t){if(t>1500){let e=function(){ze._m_iTimeFrame=0};ze._m_iTimeFrame=t,Laya.timer.clear(Laya.timer,e),Laya.timer.once(500,Laya.timer,e)}}static get m_iTimeFrame(){return ze._m_iTimeFrame}};ze.IsRelease=!1,ze.m_bInstantGame=!1,ze.useWebVersion=!1,ze.m_strVersionEX="V003",ze.m_bIsMobWeb=!1,ze.m_strWebTag="",ze.Js_Version="1",ze.Game_Version="20231227_01",ze.App_Version="1.0.0",ze.SDK_Version="1.0.0",ze.M_strCountry="1",ze.M_bAppData=!1,ze.bookingId=0,ze.teamId=0,ze.showHeartLog=!1,ze.ignoreLang=!1,ze.ignoreSheetNo=!1,ze.m_bIsIphoneX=!1,ze.Debug=0,ze.Res=0,ze.isTest=!0,ze.Server_URL="",ze.IP_User="",ze.Plantform_APPID="17",ze.ServerId=22310001,ze.Login_UID="-1",ze._LoginType="gamecenter",ze.isInto=!1,ze.isFull=!1,ze.justFull=!1,ze.Login_UDID="81BC19A8-B49B-47CC-BEFE-193E723B521A",ze.Device_Info="",ze.FCM_Token="",ze.APP_IsRelease=!0,ze.User_Lan="en",ze.UserAgent="",ze.Login_UserName="",ze.isWhite=!1,ze.APP_RES="",ze.COOKIE_CF_LAN="COOKIE_GG_LAN",ze.COOKIE_CF_LoginType="COOKIE_CF_LoginType",ze.IPHONEX_SCARE=1.22,ze.IPHONEX_TOP=44,ze.IPHONEX_BUTTOM=34,ze.DESIGN_WIDTH=1280,ze.DESIGN_HEIGHT=720,ze._m_iTimeFrame=0,ze.isStopPhysics=!1,ze.isDown=!1;var ie=ze;var Ee=class Ee{constructor(){this._touchEnabled=!0;if(Ee._instance)throw new Error("LayerManager是单例,不可new.");Ee._instance=this}get m_sprPanelLayer(){return this._m_sprPanelLayer}set m_sprPanelLayer(t){this._m_sprPanelLayer=t}get m_sprMainUILayer(){return this._m_sprMainUILayer}set m_sprMainUILayer(t){this._m_sprMainUILayer=t}get m_sprTipLayer(){return this._m_sprTipLayer}set m_sprTipLayer(t){this._m_sprTipLayer=t}static get instence(){return Ee._instance||(Ee._instance=new Ee),Ee._instance}init(){this.m_sprSceneLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprSceneLayer),this.m_sprMainUILayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprMainUILayer),this.m_sprPanelLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprPanelLayer),this.m_sprPopLayer=new Laya.Sprite,this.m_sprPopLayer.mouseThrough=!0,Laya.stage.addChild(this.m_sprPopLayer),this.m_sprTipLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTipLayer),this.m_sprGuideLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprGuideLayer),this.m_sprTopLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTopLayer)}get touchEnabled(){return this._touchEnabled}set touchEnabled(t){this._touchEnabled!=t&&(this._touchEnabled=t,this.m_sprSceneLayer.mouseEnabled=this._touchEnabled,this.m_sprMainUILayer.mouseEnabled=this._touchEnabled,this.m_sprPanelLayer.mouseEnabled=this._touchEnabled,this.m_sprPopLayer.mouseEnabled=this._touchEnabled,this.m_sprTipLayer.mouseEnabled=this._touchEnabled,this.m_sprGuideLayer.mouseEnabled=this._touchEnabled,this.m_sprTopLayer.mouseEnabled=this._touchEnabled)}addToLayerAndSet(t,e=Ee.M_PANEL,i=Ee.CENTER){this.addToLayer(t,e),this.setPosition(t,i)}getLayerIndex(t,e=Ee.M_PANEL){let i;switch(e){case Ee.M_SCENE:i=this.m_sprSceneLayer.getChildIndex(t);break;case Ee.M_MAINUI:i=this.m_sprMainUILayer.getChildIndex(t);break;case Ee.M_PANEL:i=this.m_sprPanelLayer.getChildIndex(t);break;case Ee.M_POP:i=this.m_sprPopLayer.getChildIndex(t);break;case Ee.M_TIP:i=this.m_sprTipLayer.getChildIndex(t);break;case Ee.M_GUIDE:i=this.m_sprGuideLayer.getChildIndex(t);break;case Ee.M_TOP:i=this.m_sprTopLayer.getChildIndex(t);break}return i}addToLayerAt(t,e=Ee.M_PANEL,i=0){switch(e){case Ee.M_SCENE:this.m_sprSceneLayer.addChildAt(t,i);break;case Ee.M_MAINUI:this.m_sprMainUILayer.addChildAt(t,i);break;case Ee.M_PANEL:this.m_sprPanelLayer.addChildAt(t,i);break;case Ee.M_POP:this.m_sprPopLayer.addChildAt(t,i);break;case Ee.M_TIP:this.m_sprTipLayer.addChildAt(t,i);break;case Ee.M_GUIDE:this.m_sprGuideLayer.addChildAt(t,i);break;case Ee.M_TOP:this.m_sprTopLayer.addChildAt(t,i);break}}addToLayer(t,e=Ee.M_PANEL){switch(e){case Ee.M_SCENE:this.m_sprSceneLayer.addChild(t);break;case Ee.M_MAINUI:this.m_sprMainUILayer.addChild(t);break;case Ee.M_PANEL:this.m_sprPanelLayer.addChild(t);break;case Ee.M_POP:this.m_sprPopLayer.addChild(t);break;case Ee.M_TIP:this.m_sprTipLayer.addChild(t);break;case Ee.M_GUIDE:this.m_sprGuideLayer.addChild(t);break;case Ee.M_TOP:this.m_sprTopLayer.addChild(t);break}}removeFromLayer(t,e){switch(e){case Ee.M_SCENE:this.m_sprSceneLayer.removeChild(t);break;case Ee.M_MAINUI:this.m_sprMainUILayer.removeChild(t);break;case Ee.M_PANEL:this.m_sprPanelLayer.removeChild(t);break;case Ee.M_POP:this.m_sprPopLayer.removeChild(t);break;case Ee.M_GUIDE:this.m_sprGuideLayer.removeChild(t);break;case Ee.M_TOP:this.m_sprTopLayer.removeChild(t);break}}clearLayer(t){switch(t){case Ee.M_SCENE:this.m_sprSceneLayer.removeChildren();break;case Ee.M_MAINUI:this.m_sprSceneLayer.removeChildren();break;case Ee.M_PANEL:this.m_sprSceneLayer.removeChildren();break;case Ee.M_POP:this.m_sprSceneLayer.removeChildren();break;case Ee.M_TOP:this.m_sprSceneLayer.removeChildren();break}}get stageWidth(){let t;return t=Laya.stage.width,t}get stageHeight(){let t;return t=Laya.stage.height,t}setPosition(t,e,i=0,n=0,r=!1,s=!1){let o=Laya.stage.width,l=Laya.stage.height;switch(this.m_iStageWidth=o,this.m_iStageHeight=l,e){case Ee.UP:t.x=r?o/2:(o-t.width*t.scaleX)/2,t.y=0;break;case Ee.DOWN:t.x=r?o/2:(o-t.width*t.scaleX)/2,t.y=l-t.height*t.scaleY;break;case Ee.LEFT:t.x=0,t.y=s?l/2:(l-t.height*t.scaleY)/2;break;case Ee.RIGHT:t.x=o-t.width*t.scaleX,t.y=s?l/2:(l-t.height*t.scaleY)/2;break;case Ee.LEFTUP:t.x=0,t.y=0;break;case Ee.RIGHTUP:t.x=o-t.width*t.scaleX,t.y=0;break;case Ee.LEFTDOWN:t.x=0,t.y=l-t.height*t.scaleY;break;case Ee.RIGHTDOWN:t.x=o-t.width*t.scaleX,t.y=l-t.height*t.scaleY;break;case Ee.CENTERLEFT:t.x=o/2-t.width*t.scaleX,t.y=s?l/2:(l-t.height*t.scaleY)/2;break;case Ee.CENTERRIGHT:t.x=o/2,t.y=s?l/2:(l-t.height*t.scaleY)/2;break;case Ee.CENTER:t.x=r?o/2:(o-t.width*t.scaleX)/2,t.y=s?l/2:(l-t.height*t.scaleY)/2;break;default:break}t.x+=i,t.y+=n}setLayer(t,e,i){if(!t||!e||t.parent!=e.parent)return;let n=t.parent.getChildIndex(t),r=e.parent.getChildIndex(e);i?n>r&&(t.parent.setChildIndex(t,r),t.parent.setChildIndex(e,n)):n<r&&(t.parent.setChildIndex(t,r),t.parent.setChildIndex(e,n))}};Ee.M_SCENE=1,Ee.M_MAINUI=2,Ee.M_PANEL=3,Ee.M_POP=4,Ee.M_TIP=5,Ee.M_GUIDE=7,Ee.M_TOP=6,Ee.UP=1,Ee.DOWN=16,Ee.LEFT=256,Ee.RIGHT=4096,Ee.CENTER=65536,Ee.LEFTUP=Ee.LEFT|Ee.UP,Ee.RIGHTUP=Ee.RIGHT|Ee.UP,Ee.LEFTDOWN=Ee.LEFT|Ee.DOWN,Ee.RIGHTDOWN=Ee.RIGHT|Ee.DOWN,Ee.CENTERLEFT=Ee.CENTER|Ee.LEFT,Ee.CENTERRIGHT=Ee.CENTER|Ee.RIGHT,Ee.MOVE=-1;var A=Ee;var $n=class extends je{constructor(){super()}};var Eo=class{constructor(t,e){this._valuesObject={};this.sheetObject=t,this.BaseItemClass=e}get keys(){if(this._keys)return this._keys;this._keys=[];let t;for(let e in this.sheetObject)!e||e==""||this._keys.push(e);return this._keys}get values(){if(this._values)return this._values;this._values=[];let t;for(let e in this.sheetObject)this._valuesObject[e]?t=this._valuesObject[e]:(t=new this.BaseItemClass,t.init(this.sheetObject[e]),this._valuesObject[e]=t),this._values.push(t);return this._values}get(t){return this._valuesObject[t]?this._valuesObject[t]:this.sheetObject[t]}get1(t){if(this._valuesObject[t])return this._valuesObject[t];let e=this.sheetObject[t];if(e)return e;let i;this.BaseItemClass&&(i=new this.BaseItemClass,i.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig()  class : "+this.BaseItemClass),i.init(e)),this._valuesObject;let n=i||e;return this._valuesObject[t]=n,n}indexOf(t){let e=this._keys.indexOf(t);return e>=0?e:(t=t instanceof String?Number(t):t instanceof Number?t.toString():t,this._keys.indexOf(t))}clear(){this.sheetObject=null}};var wo=class a{constructor(){}static get instance(){return a._instance||(a._instance=new a),a._instance}initSpotCfgData(){if(this.spotDic==null){let t=M.instance.getResByURL("config/spot.json");this.spotDic=new Eo(t.data,$n)}}getSpotById(t){return this.initSpotCfgData(),this.spotDic.get(t)}get getSpotDic(){return this.initSpotCfgData(),this.spotDic}};var $e=class a{constructor(){}registerCommCallBack(t=null){Laya.LayaEnv.isConch}static get instance(){return a._instance||(a._instance=new a),a._instance}sendCustumEvent(t,e=null,i=null){let n;if(i?n=i:n=wo.instance.getSpotById(t),!n||!n.Event)return;let r,s=new Object;s.id=n.ID,s.eventKey=n.Event,s.type=n.type,this.sendWebEvent(s)}sendWebEvent(t){}dispose(){}reload(){Laya.Browser.window.location.reload()}testEvnt(){}};var _e=class a{constructor(){this._isLoading=!1}static get instance(){return a._instance||(a._instance=new a),a._instance}get isLoading(){return this._isLoading}init(){if(!this.txtLoadingView){var t=Laya.loader.getRes("scenes/notice/TxtLoadingView.lh");this.txtLoadingView=t.create()}}showLoading(t=!1){if(console.log("showLoading..."+t),this.txtLoadingView)t?(this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this._isLoading=!1):(this._isLoading=!0,this.showMaskLoading(),Laya.timer.once(3e3,this,this.showLazyLoading)),this.txtLoadingView.m_txtLabel&&(this.txtLoadingView.m_txtLabel.visible=!1);else return}showLoadingByInfo(t=""){console.log("showLoadingByInfo..."+t),this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this.txtLoadingView.m_txtLabel.text=t,this.txtLoadingView.m_txtLabel.visible=!0}showMaskLoading(){this._isLoading&&(this.txtLoadingView.backLayer.name="backLayer",this.txtLoadingView.backLayer.mouseEnabled=!0,this.txtLoadingView.backLayer.mouseThrough=!1,this.txtLoadingView.backLayer.visible=!0)}showLazyLoading(){this._isLoading&&(console.log("showLazyLoading..."),this.txtLoadingView.visible=!0,Laya.stage.addChild(this.txtLoadingView),this.txtLoadingView.x=(Laya.stage.width-this.txtLoadingView.width)/2,this.txtLoadingView.y=(Laya.stage.height-this.txtLoadingView.height)/2),Laya.timer.clear(this,this.showLazyLoading)}hideLoading(){if(console.log("hideLoading..."),this._isLoading=!1,this.txtLoadingView)this.txtLoadingView.removeSelf();else return}dispose(){this.txtLoadingView&&(this.txtLoadingView.destroy(),this.txtLoadingView.removeSelf(),this.txtLoadingView=null),this.txtLoadingView.backLayer&&(this.txtLoadingView.backLayer.destroy(),this.txtLoadingView.backLayer.removeSelf(),this.txtLoadingView.backLayer=null)}};var st=class st{constructor(){this._m_bPlayMusic=!0;this._m_bPlayeSound=!0}static get instance(){return st._instance||(st._instance=new st),st._instance}get m_bPlayMusic(){return this._m_bPlayMusic}set m_bPlayMusic(t){this._m_bPlayMusic=t,t?this.m_strMusicURL!=null&&this.playMusicByURL(this.m_strMusicURL):this.musicChannel&&this.musicChannel.stop()}init(){let t=Laya.LocalStorage.getItem(st.COOKIE_CF_MUSIC);t!=null&&t!=""&&(st.instance.m_bPlayMusic=parseInt(t)==1);let e=Laya.LocalStorage.getItem(st.COOKIE_CF_SOUND);e!=null&&e!=""&&(st.instance.m_bPlayeSound=parseInt(e)==1)}get m_bPlayeSound(){return this._m_bPlayeSound}set m_bPlayeSound(t){this._m_bPlayeSound=t}playMusicByURL(t){this.m_bPlayMusic&&(this.m_strMusicURL,this.m_strMusicURL==t&&this.musicChannel,this.m_strMusicURL=t,Laya.SoundManager.stopMusic(),this.musicChannel=Laya.SoundManager.playMusic(t,0,new Laya.Handler(this,this.onComplete)))}playMusicByName(t,e=".ogg"){let i=M.instance.getSoundURL(t,e);this.playMusicByURL(i)}playSound(t,e=1){this.m_bPlayeSound&&Laya.SoundManager.playSound(t,e,new Laya.Handler(this,this.onComplete))}playSoundByName(t,e=1){let i=M.instance.getSoundURLogg(t);this.playSound(i,e)}stopSoundByName(t){let e=M.instance.getSoundURLogg(t);Laya.SoundManager.stopSound(e)}switchMusic(t){let e=t?1:0;st.instance.m_bPlayMusic=t,Laya.LocalStorage.setItem(st.COOKIE_CF_MUSIC,e.toString())}switchSound(t){let e=t?1:0;st.instance.m_bPlayeSound=t,Laya.LocalStorage.setItem(st.COOKIE_CF_SOUND,e.toString())}onComplete(){}};st.COOKIE_CF_MUSIC="COOKIE_CF_MUSIC",st.COOKIE_CF_SOUND="COOKIE_CF_SOUND",st.soundName_bg="bgm",st.soundName2="ui02.ogg",st.soundName3="ui03.ogg",st.soundName_hit="hit.mp3",st.soundName_win="result_win.mp3",st.soundName_fail="result_fail.mp3",st.soundName30_1="ui30_1.ogg",st.soundName28_1_star="ui28_1_star.ogg",st.soundName28_2_star="ui28_2_stars.ogg",st.soundName28_3_star="ui28_3_stars.ogg",st.soundName28_bar="ui28_bar_rise.ogg",st.soundName32="ui32.ogg",st.soundName33="ui33.ogg",st.soundName34="ui34.ogg",st.soundName35="ui35.ogg",st.soundName36="ui36.ogg",st.soundName37="ui37.ogg",st.soundName38="ui38.ogg",st.soundName39="ui39.ogg",st.soundName41="ui41.ogg",st.soundName42="ui42.ogg",st.soundName43="ui43.ogg",st.soundName44="ui44.ogg",st.soundName45="ui45.ogg",st.soundNameUi40_1="ui40_1.ogg",st.soundNameUi40_2="ui40_2.ogg",st.soundNameUi40_3="ui40_3.ogg",st.soundNameDressing="dressing_score_sfx.ogg",st.soundNameAnswer="answer_bonus_points.ogg";var ct=st;var L=class{};L.FindView="FindView",L.FindEndView="FindEndView",L.FindAskDialog="FindAskDialog",L.FindRankUpDialog="FindRankUpDialog",L.QuickTipDialog="QuickTipDialog",L.QuickEndView="QuickEndView",L.QuickShareView="QuickShareView",L.QuickOperatorDialog="QuickOperatorDialog",L.MainView="MainView",L.RoleDialog="RoleDialog",L.RemGetDialog="RemGetDialog",L.QuickRechargeDialog="QuickRechargeDialog",L.CreateNameDialog="CreateNameDialog",L.DailyTaskDialog="DailyTaskDialog",L.ActivityTaskDialog="ActivityTaskDialog",L.ShareDialog="ShareDialog",L.InvitationCenterDialog="InvitationCenterDialog",L.DailyTaskDrawDialog="DailyTaskDrawDialog",L.GuideView="GuideView",L.GuideDialogView="GuideDialogView",L.ShareView="ShareView",L.MainTopView="MainTopView",L.GetMoreDialog="GetMoreDialog",L.ShopView="ShopView",L.ItemGetDialog="ItemGetDialog",L.EquipStarUpDialog="EquipStarUpDialog",L.RewardGetDialog="RewardGetDialog",L.GetTitleDialog="GetTitleDialog",L.NewFunUnLockDialog="NewFunUnLockDialog",L.DialogView="DialogView",L.MallView="MallView",L.MallCardView="MallCardView",L.MallBuyDialog="MallBuyDialog",L.FittingUiView="FittingUiView",L.TaskDialog="TaskDialog",L.CommentDialog="CommentDialog",L.PotraitChangDialog="PotraitChangDialog",L.ClothespressView="ClothespressView",L.ItemSellDialog="ItemSellDialog",L.ItemInfoDialog="ItemInfoDialog",L.OnlineAward="OnlineAward",L.MaillView="MailView",L.MailSendView="MailSendView",L.GameSettingDialog="GameSettingDialog",L.GamesettingSoundView="GamesettingSoundView",L.GameSettingLanguageDialog="GameSettingLanguageDialog",L.GameSettingVersionDialog="GameSettingVersionDialog",L.FriendMainView="FriendMainView",L.FriendSearchView="FriendSearchView",L.FriendGetRewardDialog="FriendGetRewardDialog",L.FriendRewardDialog="FriendRewardDialog",L.PreLoadingView="PreLoadingView",L.RechargeDialog="RechargeDialog",L.WalletChooseHeroDialog="WalletChooseHeroDialog",L.EmployInfoDialog="EmployInfoDialog",L.WalletChoosePropsDialog="WalletChoosePropsDialog",L.FirstRechargeDialog="FirstRechargeDialog",L.FirstWeekRechargeView="FirstWeekRechargeView",L.ClientErrView="ClientErrView",L.RoleUpgradeView="RoleUpgradeView",L.ActiveRechargeView="ActiveRechargeView",L.SmallSaleView="SmallSaleView",L.RechargeSelectDialog="RechargeSelectDialog",L.FBLikeView="FBLikeView",L.TurnSuitPreView="TurnSuitPreView",L.SlotMachineView="SlotMachineView",L.SlotMachineRewardPreDialog="SlotMachineRewardPreDialog",L.SlotMachineResultDialog="SlotMachineResultDialog",L.GashaponView="GashaponView",L.GashaponRewardView="GashaponRewardView",L.ActivityRankRewardView="ActivityRankRewardView",L.AddRechargeView="AddRechargeView",L.CupMatchStartDialog="CupMatchStartDialog",L.CupMatchEndDialog="CupMatchEndDialog",L.CreateLoginView="CreateLoginView",L.SelectHeadDialog="SelectHeadDialog",L.RoleInfoDialog="RoleInfoDialog",L.SelectHeroDialog="SelectHeroDialog",L.CreateSubWalletDialog="CreateSubWalletDialog",L.FriendMemberDialog="FriendMemberDialog",L.FriendMemberMoreDialog="FriendMemberMoreDialog",L.FriendAddDialog="FriendAddDialog",L.FriendApplyBackDialog="FriendApplyBackDialog",L.FriendApplyDialog="FriendApplyDialog",L.WalletDialog="WalletDialog",L.WalletTransferDialog="WalletTransferDialog",L.CardPayView="CardPayView",L.SwapView="SwapView",L.UnionApplyDialog="UnionApplyDialog",L.GuildEntranceView="GuildEntranceView",L.UnionApplyDialogView="UnionApplyDialogView",L.UnionApplyMemberDialog="UnionApplyMemberDialog",L.CreateNoticeDialog="CreateNoticeDialog",L.UnionNoticeView="UnionNoticeView",L.GuildInfoDialog="GuildInfoDialog",L.CreateUnionDialog="CreateUnionDialog",L.UnionInfoView="UnionInfoView",L.UnionEarningView="UnionEarningView",L.UnionRevenueDetailDialog="UnionRevenueDetailDialog",L.UnionSetRevenueDialog="UnionSetRevenueDialog",L.UnionBattleRecordDialog="UnionBattleRecordDialog",L.UnionRevenueRecordDialog="UnionRevenueRecordDialog",L.RankUnionView="RankUnionView",L.UnionWarView="UnionWarView",L.UnionWarTipDialog="UnionWarTipDialog",L.UnionWarSuccessDialog="UnionWarSuccessDialog",L.UnionWarFailDialog="UnionWarFailDialog",L.GamesettingView="GamesettingView",L.GameSettingGameAccountView="GameSettingGameAccountView",L.GuildMessageView="GuildMessageView",L.GuildMessageEditorView="GuildMessageEditorView",L.UnionMemberView="UnionMemberView",L.UnionListView="UnionListView",L.CreateSubUnionView="CreateSubUnionView",L.ChangeUnionIconDialog="ChangeUnionIconDialog",L.MySubUnionView="MySubUnionView",L.UnionMemberApplyView="UnionMemberApplyView",L.UnionReferralView="UnionReferralView",L.UnionTransferView="UnionTransferView",L.TicketTransferView="TicketTransferView",L.HeroTransferView="HeroTransferView",L.BanAccountView="BanAccountView",L.GuildChiefPrivilegeView="GuildChiefPrivilegeView",L.GuildDonationView="GuildDonationView",L.NoticeDialog="NoticeDialog",L.HelpDialog="HelpDialog",L.ImgDialog="ImgDialog",L.ChampDetailDialog="ChampDetailDialog",L.ChampRecordDialog="ChampRecordDialog",L.LoadDialog="LoadDialog",L.ChangeHeadDialog="ChangeHeadDialog",L.CreateRoomDialog="CreateRoomDialog",L.CreateRentalDialog="CreateRentalDialog",L.MyLeasedDialog="MyLeasedDialog",L.MyRentedDialog="MyRentedDialog",L.MyRentalBuyDialog="MyRentalBuyDialog",L.BuyTicketDialog="BuyTicketDialog",L.EnterRoomView="EnterRoomView",L.MatchEndRankView="MatchEndRankView",L.MatchEndTeamRankView="MatchEndTeamRankView",L.MatchReadyView="MatchReadyView",L.MatchEndView="MatchEndView",L.HeroGetDialog="HeroGetDialog",L.InputPwdDialog="InputPwdDialog",L.RoomInfoDialog="RoomInfoDialog",L.MailDialog="MailDialog",L.TeamCreateShareDialog="TeamCreateShareDialog",L.TeamShareDialog="TeamShareDialog",L.TeamJoinUsingDialog="TeamJoinUsingDialog",L.MyTeamDialog="MyTeamDialog",L.TeamInfoDialog="TeamInfoDialog",L.MyFriendDialog="MyFriendDialog",L.UnionAttrView="UnionAttrView",L.UnionAttrLvUpDialog="UnionAttrLvUpDialog",L.UnionAttributeDetailsDialog="UnionAttributeDetailsDialog",L.NoServerView="NoServerView",L.UnionMemberMoreDialog="UnionMemberMoreDialog",L.HeroUpgradeDialog="HeroUpgradeDialog",L.HeroDetailDialog="HeroDetailDialog",L.SkillTipDialog="SkillTipDialog",L.TransferRecordDialog="TransferRecordDialog",L.AFKView="AFKView",L.AFKBagDialog="AFKBagDialog",L.AFKDropDetailDialog="AFKDropDetailDialog",L.AFKMapView="AFKMapView",L.AFKSelectLevelDialog="AFKSelectLevelDialog",L.Knapsack="Knapsack",L.KnapsackTipDialog="KnapsackTipDialog",L.HeroFormationDialog="HeroFormationDialog",L.SignInDialog="SignInDialog",L.InviteRewardDialog="InviteRewardDialog",L.ChallengLoseDialog="ChallengLoseDialog",L.ChallengWinDialog="ChallengWinDialog",L.ChallengBossDialog="ChallengBossDialog",L.ThirbleDropDialog="ThirbleDropDialog",L.LevelDropDialog="LevelDropDialog",L.UseCardDialog="UseCardDialog",L.ArenaView="ArenaView",L.MyBookingView="MyBookingView",L.ArenaLoseDialog="ArenaLoseDialog",L.ArenaBattleDialog="ArenaBattleDialog",L.ArenaWinDialog="ArenaWinDialog",L.ArenaWarNotesView="ArenaWarNotesView",L.ArenaRuleDialog="ArenaRuleDialog",L.EquipSelectDialog="EquipSelectDialog",L.EquipDetailDialog="EquipDetailDialog",L.HireDetailDialog="HireDetailDialog",L.ProxyDetailDialog="ProxyDetailDialog",L.WithDrawRecordDialog="WithDrawRecordDialog",L.NodeRevenueRecordDialog="NodeRevenueRecordDialog",L.RentalRecordDialog="RentalRecordDialog",L.PrivateChatDialog="PrivateChatDialog",L.AirdropRecordDialog="AirdropRecordDialog",L.ActivityInfoDialog="ActivityInfoDialog",L.CharacterStarDialog="CharacterStarDialog",L.LastDrawDialog="LastDrawDialog",L.IgoPageView="IgoPageView",L.IgoJoinDialog="IgoJoinDialog",L.IgoRecordDialog="IgoRecordDialog",L.DailyTaskPropsDialog="DailyTaskPropsDialog",L.DailyTaskNoPropsDialog="DailyTaskNoPropsDialog",L.PveSponsorView="PveSponsorView",L.PveRecordView="PveRecordView",L.PveChoosePropsDialog="PveChoosePropsDialog",L.ReferralDialog="ReferralDialog",L.ReferralL2Dialog="ReferralL2Dialog",L.TotalBattlesDialog="TotalBattlesDialog";var b=class{};b.MOUSE_HOLDON="MOUSE_HOLDON",b.EVENT_OPEN_MODULE="EVENT_OPEN_MODULE",b.EVENT_MODULE_ADDED="EVENT_MODULE_ADDED",b.EVENT_CLOSE_MODULE="EVENT_CLOSE_MODULE",b.EVENT_CHECK_REMAIN="EVENT_CHECK_REMAIN",b.EVENT_LOADED_COMPLETE="EVENT_LOAD_COMPLETE",b.EVENT_LOADED_SCENE_BG_COM="EVENT_LOADED_SCENE_BG_COM",b.EVENT_LOAD_SKIN_COMPLETE="EVENT_LOAD_SKIN_COMPLETE",b.EVENT_LOAD_HEAD_SKIN_COMPLETE="EVENT_LOAD_HEAD_SKIN_COMPLETE",b.EVENT_LOADING_SUC="EVENT_LOADING_SUC",b.EVENT_BACK_TO_LOGIN="EVENT_BACK_TO_LOGIN",b.EVENT_LOGIN_GAME_END="EVENT_LOGIN_GAME_END",b.EVENT_ENTER_MAIN="EVENT_ENTER_MAIN",b.EVENT_CHANGE_HEAD="EVENT_CHANGE_HEAD",b.EVENT_MODIFY_HEAD="EVENT_MODIFY_HEAD",b.EVENT_ITEM_UPDATE="EVENT_ITEM_UPDATE",b.EVENT_ROLE_UPDATE="EVENT_ROLE_UPDATE",b.STAGE_ON_BLUR="STAGE_ON_BLUR",b.STAGE_ON_FOCUS="STAGE_ON_FOCUS",b.ACCOUNTVO_UPDATE="ACCOUNTVO_UPDATE",b.EVENT_WAIT_PLAYERINFO="EVENT_WAIT_PLAYERINFO",b.EVENT_END_HEROBUY="EVENT_END_HEROBUY",b.EVENT_END_HEROTRANSFER="EVENT_END_HEROTRANSFER",b.EVENT_REFRESH_HEROTRANSFER="EVENT_REFRESH_HEROTRANSFER",b.EVENT_REFRESH_QUAN_STATUS="EVENT_REFRESH_QUAN_STATUS",b.EVENT_REFRESH_ITEM_ONCHAIN_STATUS="EVENT_REFRESH_ITEM_ONCHAIN_STATUS",b.EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS="EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS",b.EVENT_REFRESH_NODE_ONCHAIN_STATUS="EVENT_REFRESH_NODE_ONCHAIN_STATUS",b.EVENT_REFRESH_UNIONMEMBER_TRANSFER="EVENT_REFRESH_UNIONMEMBER_TRANSFER",b.EVENT_REFRESH_KNAPSACK="EVENT_REFRESH_KNAPSACK",b.EVENT_ADD_UNIONMEMBER_ADDRESS="EVENT_ADD_UNIONMEMBER_ADDRESS",b.EVENT_ADD_TICKET_ADDRESS="EVENT_ADD_TICKET_ADDRESS",b.EVENT_EMOJI_ICON_SELECT="EVENT_EMOJI_ICON_SELECT",b.EVENT_COLOR_ICON_SELECT="EVENT_COLOR_ICON_SELECT",b.EVENT_CHECK_ICON_SELECT="EVENT_CHECK_ICON_SELECT",b.EVENT_CHECK_PLAYER_NUM_SELECT="EVENT_CHECK_PLAYER_NUM_SELECT",b.EVENT_CHECK_NODE_SELECT="EVENT_CHECK_NODE_SELECT",b.PACKAGE_UPDATE_ITEM="PACKAGE_UPDATE_ITEM",b.IMPROVE_SUCESS_EVENT="IMPROVE_SUCESS_EVENT",b.CHANG_POTRAIT="CHANG_POTRAIT",b.ROLE_INFO_CHANGE="ROLE_INFO_CHANGE",b.UPDATE_ASSETS="UPDATE_ASSETS",b.REFRESH_MAIN_TASK="REFRESH_MAIN_TASK",b.RECIVE_SUCESS_SERVICE="RECIVE_SUCESS_SERVICE",b.SCENE_ROLE_COMPELTE="SCENE_ROLE_COMPELTE",b.FITTING_CLOTH_BTN="FITTING_CLOTH_BTN",b.STORE_CLICKBG_EVENT="STORE_CLICKBG_EVENT",b.CLOSE_BG_VIEW="CLOSE_BG_VIEW",b.EVENT_UPDATE_ONLINE="EVENT_UPDATE_ONLINE",b.VIP_INFO_CHANGE="VIP_INFO_CHANGE",b.EVENT_FUNCTION_OPEN_UPDATE="EVENT_FUNCTION_OPEN_UPDATE",b.EVENT_ADD_ACTIVITY="EVENT_ADD_ACTIVITY",b.EVENT_REMOVE_ACTIVITY="EVENT_REMOVE_ACTIVITY",b.UPDATE_CHAO_PIAO="UPDATE_CHAO_PIAO",b.UPDATE_EXCHANGE_INFO="UPDATE_EXCHANGE_INFO",b.UPDATE_RED_STATE_EVENT="UPDATE_RED_STATE_EVENT",b.SYSTEM_OPEN_TIME_INITED="SYSTEM_OPEN_TIME_INITED",b.EVENT_OPEN_SHARE="EVENT_OPEN_SHARE",b.CHANGE_SCENE_BASE_ROLE_LAYER="CHANGE_SCENE_BASE_ROLE_LAYER",b.EVENT_CLICK_NUM="EVENT_CLICK_NUM",b.EVENT_HERO_DRAW_BACK="EVENT_HERO_DRAW_BACK",b.EVENT_Close_CreateRoom="EVENT_Close_CreateRoom",b.EVENT_ENTER_MATCH_ROOM="EVENT_ENTER_MATCH_ROOM",b.EVENT_UPDATE_MATCH_ROOM="EVENT_UPDATE_MATCH_ROOM",b.EVENT_CLICK_HERO="EVENT_CLICK_HERO",b.UPDATE_KILL_NUM="UPDATE_KILL_NUM",b.EVENT_RESTORE_DATA="EVENT_RESTORE_DATA",b.EVENT_FirstBlood="EVENT_FirstBlood",b.EVENT_MutiKill="EVENT_MutiKill",b.EVENT_GameScene_Gray="EVENT_GameScene_Gray",b.EVENT_Game_Delay="EVENT_Game_Delay",b.EVENT_UPDATE_ITEM_SKILL_COOL="UPDATE_SKILL_COOLTIME",b.EVENT_UPDATE_GLOBAL_COOL="EVENT_UPDATE_GLOBAL_COOL",b.EVENT_UPDATE_REDECE_COOL="EVENT_UPDATE_REDECE_COOL",b.EVENT_REFRESH_BAN_ACCOUNT="EVENT_REFRESH_BAN_ACCOUNT",b.EVENT_SUB_GUILD_UPDATE="EVENT_SUB_GUILD_UPDATE",b.EVENT_UNION_APPLY_MEMBER_UPDATE="EVENT_UNION_APPLY_MEMBER_UPDATE",b.EVENT_WELFARE_CLAIM="EVENT_WELFARE_CLAIM",b.EVENT_RECHARGE_GET="EVENT_RECHARGE_GET",b.CHANGE_WALLET_HERO="CHANGE_WALLET_HERO",b.CHANGE_ASSET_CHAIN="CHANGE_ASSET_CHAIN",b.CHANGE_WALLET_PROP="CHANGE_WALLET_PROP",b.CREATE_SUB_WALLET_SUCCESS="CREATE_SUB_WALLET_SUCCESS",b.REFRESH_ALL_WITHDRAW_DATA="REFRESH_ALL_WITHDRAW_DATA",b.CHANGE_FRIEND_APPLY_LIST="CHANGE_FRIEND_APPLY_LIST",b.CHANGE_FRIEND_LIST="CHANGE_FRIEND_LIST",b.REFRSH_RED="REFRSH_RED",b.REFRSH_APPLY_FRIEND_LIST="REFRSH_APPLY_FRIEND_LIST",b.ADD_AIR_WALLET_ITEM="ADD_AIR_WALLET_ITEM",b.ADD_AIR_SUB_WALLET_NAME="ADD_AIR_SUB_WALLET_NAME",b.AIR_SUB_WALLET_OPENHERO="AIR_SUB_WALLET_OPENHERO",b.CHANGE_WALLET_HERO_AIR="CHANGE_WALLET_HERO_AIR",b.UPDATE_UNION_MEMBER_LIST="UPDATE_UNION_MEMBER_LIST",b.EVENT_ADD_MONEY_ADDRESS="EVENT_ADD_MONEY_ADDRESS",b.REFRESH_MAINSCENE_HEAD_RED="REFRESH_MAINSCENE_HEAD_RED",b.REFRESH_ROLEINFO_RED="REFRESH_ROLEINFO_RED",b.REFRESH_ACTIVITY_RED="REFRESH_ACTIVITY_RED",b.SHOW_EQUIP_TIP="SHOW_EQUIP_TIP",b.REFRESH_RANK_DIALOG_RED="REFRESH_RANK_DIALOG_RED",b.REFRESH_MAIL_RED="REFRESH_MAIL_RED",b.SHOW_EQUIP_SHOP_TIP="SHOW_EQUIP_SHOP_TIP",b.REFRESH_IGO_RED="REFRESH_IGO_RED",b.SEND_WHEEL_RESULT="SEND_WHEEL_RESULT",b.REFRESH_WHEEL_RED="REFRESH_WHEEL_RED",b.EVENT_PVE_CHOOSE_PROP="EVENT_PVE_CHOOSE_PROP",b.CHANGE_PVE_EXP_HERO="CHANGE_PVE_EXP_HERO",b.EVENT_PVE_HAVE_PROP="EVENT_PVE_HAVE_PROP",b.ON_CONNECT_GAME_SERVER="ON_CONNECT_GAME_SERVER",b.LENGTH_CHANGE="LENGTH_CHANGE",b.KILL_SNAKE="KILL_SNAKE";var _=class a extends Laya.EventDispatcher{static get intance(){return a._instance||(a._instance=new a),a._instance}};var To=class extends Laya.Script{constructor(){super();this.m_ioffsetX=0;this.m_ioffsetY=0}onAdded(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.CENTER,this.m_canTouch_all=!1,this.selfMaskAlpha=.8,this.m_arrMapEvent=[],this.canClickMask=!0,this.maskLayer=new Laya.Sprite,this.useShowAnimation=!0,this.useHideAnimation=!0,this.isAutoRealseRes=!0,this.m_strSound=ct.soundName3}onClickMask(e){this.canClickMask&&this.maskClose()}maskClose(){this.close()}onStageResize(){}onEnable(){this._view=this.owner,this._view.addChild(this.maskLayer),this.createUI(),this.createUIEnd(),this.initializeLater()}createUI(){}createUIEnd(){}initializeLater(){this._addEvent(),this.initData(),this.useShowAnimation?(this._view.visible=!1,this.showAnimationEnd=!1,Laya.timer.frameOnce(5,this,this.popTimeOut,[this._view])):this.showAnimationEnd=!0}popTimeOut(e){Laya.timer.clear(this,this.popTimeOut),e.scale(.5,.5),e.visible=!0,Laya.Tween.to(e,{scaleX:1,scaleY:1,ease:Laya.Ease.backOut},300,null,Laya.Handler.create(this,this.onShowAnimationEnd),2),ct.instance.playSoundByName(this.m_strSound),this._view.event(Laya.Event.OPEN)}onShowAnimationEnd(){this.showAnimationEnd=!0}_addEvent(){this.maskLayer.on(Laya.Event.CLICK,this,this.onClickMask),Laya.stage.on(Laya.Event.RESIZE,this,this.onStageResize),this.btn_com_back&&this.btn_com_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_com_help&&this.btn_com_help.on(Laya.Event.CLICK,this,this.onHelp),this.addEvent()}addEvent(){}initData(){}_removeEvent(){this.maskLayer.offAll(),Laya.stage.off(Laya.Event.RESIZE,this,this.onStageResize),this.removeEvent()}removeEvent(){}addMapEvent(e,i,n,r,s=null){e.on(i,n,r,s),this.m_arrMapEvent.push(e)}removeAllMapEvent(){if(this.m_arrMapEvent){for(let e=0;e<this.m_arrMapEvent.length;e++)this.m_arrMapEvent[e].offAll();this.m_arrMapEvent.splice(0,this.m_arrMapEvent.length)}}dispose(){if(this.newRoleSpr){for(;this.newRoleSpr.numChildren>0;)this.newRoleSpr.removeChildAt(0);this.newRoleSpr=null}this.isDispose=!0,O.intance.removeViewFromModuleManger(this),this.m_strName=null,this.m_strSound=null,this._removeEvent(),this.removeAllMapEvent(),Laya.Tween.clearAll(this._view),this.m_arrMapEvent=null,this.btn_com_back&&this.btn_com_back.offAll(),this.btn_com_help&&this.btn_com_help.offAll(),this.maskLayer&&(Laya.timer.clearAll(this.maskLayer),Laya.Tween.clearAll(this.maskLayer),this.maskLayer.offAll(),this.maskLayer.graphics.destroy(),this.maskLayer.removeSelf(),this.maskLayer.destroy(!0)),this.isAutoRealseRes&&M.instance.clearModuleUrl(this.m_strName),this._view&&(Laya.timer.clearAll(this._view),Laya.Tween.clearAll(this._view),this._view.offAll(),this._view.graphics.destroy(),this._view.removeSelf(),this._view.destroy(!0),this._view=null),Laya.timer.clearAll(this),Laya.Tween.clearAll(this),_.intance.event(b.EVENT_CLOSE_MODULE)}sendData(e,i=null){i==null&&(i=[])}close(e=null){this.useHideAnimation&&this._view?Laya.Tween.to(this._view,{scaleX:.5,scaleY:.5,ease:Laya.Ease.backIn},200,null,Laya.Handler.create(this,this.dispose,null),2):this.dispose()}static closeAll(){O.intance.closeAll()}backToPreScene(){let e=ge.intance.getPreSceneData();ge.intance.setCurrentScene(e[0],e[1],e[2],e[3],!1)}get btn_com_back(){return this._view?this._view.getChildByName("btn_com_back"):null}get btn_com_help(){return this._view?this._view.getChildByName("btn_com_help"):null}onHelp(){this.m_helpId&&O.intance.openModule(L.HelpDialog,this.m_helpId)}onBack(){this.close()}};var O=class a extends Laya.DialogManager{constructor(){super();this.views=new ye;this.m_arrLoadingArr=[];if(a._instance)throw new Error("LayerManager是单例,不可new.");a._instance=this,Laya.Dialog.manager=this}static get intance(){return a._instance||(a._instance=new a),a._instance}openModule(e,i=null){_.intance.event(b.EVENT_OPEN_MODULE,[e,i])}hasOpenView(e){return this.views.get(e)!=null}getOpenView(e){return this.views.get(e)}disposeView(e){if(this.getOpenView(e)){let i=this.getOpenView(e);if(i instanceof Array)for(let n=0;n<i.length;n++)i[n].close();else i.close()}}init(){_.intance.on(b.EVENT_OPEN_MODULE,this,this.onModulePanel),_.intance.on(b.EVENT_CLOSE_MODULE,this,this.disposeView)}initMainView(){}onModulePanel(e,i=null){console.log("ModuleManager.onModulePanel moudleName:"+e),this.m_arrLoadingArr.indexOf(e)==-1&&(this.getOpenView(e)||(_e.instance.showLoading(!1),this.m_arrLoadingArr.push(e),M.instance.loadModuleUrl(e,Laya.Handler.create(this,this.onLoaded,[e,i]))))}onLoaded(e,i=null){let n=this.m_arrLoadingArr.indexOf(e);n!=-1&&this.m_arrLoadingArr.splice(n,1);let r;var s=M.instance.m_objModuleViews[e];console.log("onLoaded: ",e,s),Laya.loader.load(s).then(o=>{if(r=o.create(),i&&r.setOpenData(i),r.m_strName=e,r instanceof Laya.Box)A.instence.addToLayer(r,r.m_iLayerType),A.instence.setPosition(r,r.m_iPositionType,r.m_ioffsetX,r.m_ioffsetY),this.addViewToModuleManger(r);else if(r instanceof Laya.Dialog){let l=r;l.m_iLayerType==A.M_POP?(l.isModal=!0,l.isShowEffect=!0,this.open(l,!1,!0)):(l.isShowEffect=!1,this.open(l)),this.addViewToModuleManger(l)}r&&_.intance.event(b.EVENT_MODULE_ADDED,r),r.hideLoadingBySelf||_e.instance.hideLoading()}).catch(o=>{console.error("onLoaded 加载失败",o)})}addViewToModuleManger(e){let i=e.m_strName;this.views.get(i)?this.views.get(i)instanceof Array?this.views.get(i).push(e):this.views.set(i,[this.views.get(i),e]):this.views.set(i,e),this.on(Laya.Event.CLOSE,this,this.removeViewFromModuleManger)}removeViewFromModuleManger(e){if(!e||!this.views)return;let i=e.m_strName;console.log("removeViewFromModuleManger viewName: "+i),e.off(Laya.Event.CLOSE,this,this.removeViewFromModuleManger);let n=this.views.get(i);if(n instanceof Array){let r=n.indexOf(e);r!=-1&&(n.splice(r,1),n.length==0&&this.views.remove(i))}else this.views.remove(i)}closeAll(){let e=[];for(let i of this.views.values)if(i instanceof Array)for(let n=0;n<i.length;n++){let r=i[n];r instanceof To&&e.push(r)}else i instanceof To&&e.push(i);for(let i=0;i<e.length;i++)e[i].dispose();e=[],super.closeAll()}doClose(e){super.doClose(e),this.event(Laya.Event.CLOSE,e)}};var mc=class a{constructor(){this._mapUrl="";this._mapWidth=0;this._mapHeight=0;this._gridWidth=0;this._gridHeight=0;this._xPics=0;this._yPics=0;this._fuzzyName=""}static get instance(){return a._instance||(a._instance=new a),a._instance}loadScene(t,e,i,n,r,s,o){this._fuzzyName!=""&&this._fuzzyName!=s&&this.dispose(),this._mapWidth=t,this._mapHeight=e,this._gridWidth=i,this._gridHeight=n,this._fuzzySprite=r,this._xPics=Math.floor(this._mapWidth/i),this._yPics=Math.floor(this._mapHeight/n),this._fuzzyName=s,this._fuzzyCallBack=o;let l=M.instance.setResURL("scene/subScene/test1/"+s+".json");Laya.loader.load([{url:l,type:Laya.Loader.ATLAS}],Laya.Handler.create(this,this.loadSceneComplete),Laya.Handler.create(this,this.loadProcess,null,!1),null,0,!0,null,!0)}loadProcess(){}loadSceneComplete(){let t=Laya.Loader.getAtlas(M.instance.setResURL("scene/subScene/test1/"+this._fuzzyName+".json"));if(this._fuzzySprite){this._fuzzySprite.graphics.clear();let e=0,i=new Laya.Sprite;i.name="mapSprite",this._fuzzySprite.addChildAt(i,0);for(let n=0;n<this._yPics;n++)for(let r=0;r<this._xPics;r++){let s=Laya.loader.getRes(t[e]),o=new Laya.Image;i.addChild(o),o.texture=s,o.size(s.width,s.height),o.pos(r*this._gridWidth,n*this._gridHeight),e++}}this._fuzzyCallBack!=null&&this._fuzzyCallBack.run()}dispose(){this._fuzzyCallBack=null,this._fuzzyName&&this._fuzzyName!=""&&Laya.loader.clearRes(M.instance.setResURL("atlas/"+this._fuzzyName+".json"))}};var ae=class{};ae.M_SCENE_MAIN="M_SCENE_MAIN",ae.M_SCENE_SHOP="M_SCENE_SHOP",ae.M_SCENE_AIRDROP="M_SCENE_AIRDROP",ae.M_SCENE_HERO="M_SCENE_HERO",ae.M_SCENE_PRE_LOAD="M_SCENE_PRE_LOAD",ae.M_SCENE_MATCH_READY="M_SCENE_MATCH_READY",ae.M_SCENE_MATCH="M_SCENE_MATCH",ae.M_SCENE_SNAKE_MATCH="M_SCENE_SNAKE_MATCH",ae.M_SCENE_AFKBATTLE="M_SCENE_AFKBATTLE",ae.M_SCENE_GUILD="M_SCENE_GUILD",ae.M_SCENE_RANK="M_SCENE_RANK",ae.M_SCENE_SHOLARSHIP="M_SCENE_SHOLARSHIP",ae.M_SCENE_GET_MAT="M_SCENE_GET_MAT",ae.M_SCENE_OPEN_GAME="M_SCENE_OPEN_GAME",ae.M_SCENE_ASSET="M_SCENE_ASSET",ae.M_SCENE_DIG="M_SCENE_DIG",ae.M_SCENE_MAIL="M_SCENE_MAIL",ae.M_SCENE_KNAPSACK="M_SCENE_KNAPSACK",ae.M_SCENE_UNION="M_SCENE_UNION",ae.M_SCENE_MYUNION="M_SCENE_MYUNION",ae.M_SCENE_LCPOOL="M_SCENE_LCPOOL",ae.M_SCENE_ARENA="M_SCENE_ARENA",ae.M_SCENE_FRIEND="M_SCENE_FRIEND",ae.M_SCENE_IGO_PAGE="M_SCENE_IGO_PAGE",ae.M_SCENE_DAILY_TASK="M_SCENE_DAILY_TASK",ae.M_SCENE_PVE="M_SCENE_PVE";var hp=class extends je{constructor(){super()}};var dp=class{constructor(t,e,i){this._idKeyName="";this._jsonName="";this._sheetItemCls=null;this._isParse=!1;this._idKeyName=e,this._jsonName=t,this._sheetItemCls=i,this._idToValueMap=new ye,this._items=[]}parseJson(){if(this._isParse)return;let t=M.instance.getResByURL("config/"+this._jsonName+".json");if(!t)throw new Error("无效的配置数据"+this._jsonName);for(let e of t){let i=new this._sheetItemCls;i.beFill(e),this._idToValueMap.set(e[this._idKeyName],i),this._items.push(i),this.addItemProcess(i)}this._isParse=!0}addItemProcess(t){}getItemById(t){return this.excuteIsParse()&&this._idToValueMap.get(t)?this._idToValueMap.get(t):null}getAllItems(){return this.excuteIsParse()?this._items:null}excuteIsParse(){return this._isParse,this._isParse}};var fp=class extends dp{constructor(){super("","","");this._itemsTypeMap=null;this._itemsTypeMap=new ye}getCombineKey(e,i,n){return e+n.toString()+i}getItemsByChildType(e,i){let n=this.getCombineKey(e,i,"childType_itemType");if(this._itemsTypeMap.get(n))return this._itemsTypeMap.get(n);this._itemsTypeMap.set(n,[]);let r=I.intance.m_dicItems.values;for(let s of r)s.child_type==e&&s.itm_type==i&&this._itemsTypeMap.get(n).push(s);return this._itemsTypeMap.get(n)}};var yp=class extends je{realIcon(){return"https://cdn.bunnyswap.cc/images/items/"+this.icon}get starArr(){if(this._starArr)return this._starArr;if(this._starArr=[],this.max_quality==0)return this._starArr;let e=this.quality/this.max_quality*5;for(let i=1;i<=5;i++)e>=i?this._starArr.push(0):i-e<=.5?this._starArr.push(2):this._starArr.push(1);return this._starArr}};var bp=class extends je{};var gp=class extends je{constructor(){super()}};var _p=class extends je{constructor(){super()}};var Lp=class extends je{};var vp=class extends je{};var xp=class extends je{};var Ip=class extends je{constructor(){super()}};var Ep=class extends je{};var wp=class extends je{};var Tp=class extends je{};var Cp=class extends je{};var Sp=class extends je{};var Dp=class extends je{constructor(){super()}};var kp=class extends je{constructor(){super(...arguments);this.dT=1e4}async testUrl(){this.getUrl()}getUrl(){var e=this.url;let i=new Date().getTime(),n=this,r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=function(){if(r.status>=200&&r.status<300)try{let o=r.responseText;var s=new Date().getTime()-i;n.dT=s}catch{console.log("Response is not valid JSON")}else console.error(`Error: ${r.status}`)},r.onerror=function(){console.error("Network error")},r.send()}};var Ap=class extends je{};var Mp=class extends je{constructor(){super()}};var Bp=class extends je{constructor(){super()}};var Rp=class extends je{constructor(){super()}};var Pp=class extends je{};var Np=class extends je{};var Op=class extends je{constructor(){super()}};var Hp=class extends je{};var Up=class extends je{};var Fp=class extends je{};var Vp=class extends je{};var Gp=class extends je{};var bt=class bt{constructor(){if(bt._instance)throw new Error("SheetDataManager是单例,不可new.");bt._instance=this,this._modelList=new ye}static get intance(){return bt._instance||(bt._instance=new bt),bt._instance}init(){let t=Laya.Browser.now();v.instance.systemOpenModel.parseJson(),this.m_dicItems=this.initConfigObject("item",yp),this.m_dicLikeIt=this.initConfigObject("likeIt",Rp),this.m_dicShops=new ye,this.m_dicShopMulDic=this.initConfig("shop",["type","icon"],bp,!0,Laya.Handler.create(this,this.onSetShopItem,null,!1)),this.m_dicWinNumbers=this.initConfig("winNumbers",["id"],Fp),this.m_dicUnions=this.initConfig("union",["id"],Ep),this.m_dicMonsters=this.initConfigObject("monster",Hp),this.m_dicSnakes=this.initConfigObject("snake",Gp),this.m_dicFoods=this.initConfigObject("foods",Vp),this.m_dicHeros=this.initConfigObject("hero",Lp),this.m_dicSkills=this.initConfigObject("skill",xp),this.m_dicArenaDic=new ye,this.m_dicArenaNumMulDic=new ye,this.m_dicArenaMulDic=this.initConfig("arena",["type","lv","coinType"],vp,!0,Laya.Handler.create(this,this.onSetArena,null,!1)),this.m_dicArenaTypes=this.initConfig("arenaType",["id"],Ap),this.m_dicCharacterStars=this.initConfig("characterStar",["id"],Up);var e=this.initConfig("node",["id"],kp);this.m_dicNodes=this.initNodes(e),this.m_dicMaps=this.initConfigObject("map",wp),console.log("-----------------------sheetdata-time1:"+(Laya.Browser.now()-t)),this.m_dicHead=this.initConfig("head",["id"],_p),this.m_dicIconBadge=this.initConfig("iconBadge",["id"],Dp),this.m_dicCountry=this.initConfig("country",["id"],Ip),this.m_dicGroupWar=this.initConfig("groupWar",["id"],Op),this.m_dicExpression=this.initConfig("expression",["id"],Mp),this.m_dicFontColor=this.initConfig("fontColor",["id"],Bp),this.m_dicCurrencyAddressMulDic=new ye,this.m_dicCurrencyAddress=this.initConfig("currencyAddress",["sn"],Tp,!0,Laya.Handler.create(this,this.onSetCurrencyAddress,null,!1)),this.m_dicCoinAddress=this.initConfig("coinAddress",["id"],Sp),this.m_dicACoin=this.initConfigObject("aCoin",Cp),this.m_dicEquip=this.initConfig("equip",["id"],Pp),this.m_dicAttributes=this.initConfig("attributes",["id"],Np),this.m_dicGenerate=this.initConfigObject("general",hp),this.m_dicWorldMapChildTypeItem=new ye,console.log("-----------------------sheetdata-time2:"+(Laya.Browser.now()-t))}getCharacterStars(t){t>4&&(t=4);for(let e of this.m_dicCharacterStars.values)if(e.starLv>t)return e;return null}getArenaTypesInSub(){var t=[];for(let e of this.m_dicArenaTypes.values)e.inSub==1&&t.push(e);return t}getArenaTypesInSubByType(t){var e=[];for(let i of this.m_dicArenaTypes.values)if(i.arenaType==t)return i;return[]}getArenaTypesInSubByItemId(t,e){for(let i of this.m_dicArenaDic.values)if(i.type==t&&i.item[0]==e)return i}onSetShopItem(t){var e=this.m_dicLikeIt.get(t.id);e&&(t.totalLike=e.likeN),this.m_dicShops.set(t.id,t)}onSetCurrencyAddress(t){var e=t.token.toLowerCase();this.m_dicCurrencyAddressMulDic.set(this.getCompoundKey([t.isSN,e,t.chainId]),t)}onSetArena(t){this.m_dicArenaDic.set(t.id,t),this.m_dicArenaNumMulDic.set(this.getCompoundKey([t.type,t.lv,t.coinType]),t)}preInit(){this.m_dicScene=this.initConfig("scene",["name"],gp)}getItemModel(){return this.getDataModel(bt.DataType_Items)}getGeneralValueById(t){return this.m_dicGenerate&&this.m_dicGenerate.get(t)?this.m_dicGenerate.get(t).value:0}getSocialShareValueById(t){return this.m_dicSocialShare&&this.m_dicSocialShare.get(t)?this.m_dicSocialShare.get(t).parameter:0}getDataModel(t){if(!this._modelList.get(t))switch(t){case bt.DataType_Items:this._modelList.set(t,new fp);break}return this._modelList.get(t)}getWelfareBagId(t){var e=this.m_dicWelfareBags;for(let n=0;n<e.values.length;n++){var i=e.values[n];if(t>=i.rankingMin&&t<=i.rankingMax)return i.id}return 0}initNodes(t){var e=new ye;for(let n=0;n<t.values.length;n++){var i=t.values[n];i.open==1&&(ie.vType==2?i.type==2&&(e.set(i.id,i),i.testUrl()):i.type==1&&(e.set(i.id,i),i.testUrl()))}return e}testNodes(){var t=this.m_dicNodes;for(let i=0;i<t.values.length;i++){var e=t.values[i];e.testUrl()}}getNodeByAddr(t){var e=this.m_dicNodes;for(let n=0;n<e.values.length;n++){var i=e.values[n];if(i&&i.socketUrl==t)return i}return null}getCurrencyAddress(t){let i=bt.intance.m_dicCurrencyAddress.values;for(let r=0;r<i.length;r++){var n=i[r];if(ie.vType==n.isSN&&t==n.id)return n.token}}getNodeRevenueCurrency(t){let i=bt.intance.m_dicCurrencyAddress.values;for(let r=0;r<i.length;r++){var n=i[r];if(ie.vType==n.isSN&&t==n.id&&n.nodeRevenueAddress)return n}return null}getNodeCurrencyByTokenAndChainId(t,e){t=t.toLowerCase();var i=bt.intance.getSheetDataByMultiKey(bt.intance.m_dicCurrencyAddressMulDic,[ie.vType,t,e]);return i}getRentCurrency(t){let i=bt.intance.m_dicCurrencyAddress.values;for(let r=0;r<i.length;r++){var n=i[r];if(ie.vType==n.isSN&&t==n.id&&n.rentNftAddress)return n}return null}getCurrencyByChainType(t,e){let n=bt.intance.m_dicCurrencyAddress.values;for(let s=0;s<n.length;s++){var r=n[s];if(ie.vType==r.isSN&&t==r.id&&e==r.chainType)return r}}getCurrency(t,e){let n=bt.intance.m_dicCurrencyAddress.values;for(let s=0;s<n.length;s++){var r=n[s];if(ie.vType==r.isSN&&t==r.id&&e==r.chainId)return r}}getTokensByChainId(t,e){let n=bt.intance.m_dicCurrencyAddress.values;var r=[];for(let o=0;o<n.length;o++){var s=n[o];e==1?ie.vType==s.isSN&&s.openRecharge==1&&t==s.chainId&&r.push(s):e==2&&ie.vType==s.isSN&&s.openExtract==1&&t==s.chainId&&r.push(s)}return r}getDropCashAddress(t,e){let n=bt.intance.m_dicDropCashAddresse.values;for(let s=0;s<n.length;s++){var r=n[s];if(ie.vType==r.isSN&&t==r.chainId&&e==r.name)return r}}getOtcTelegrams(t){let i=bt.intance.m_dicOtcTelegram.values;for(let r=0;r<i.length;r++){var n=i[r];if(t==n.id)return n}}getPuzzleExchange(t){let i=bt.intance.m_dicPuzzleExchange.values;for(let r=0;r<i.length;r++){var n=i[r];if(t==n.id)return n}}getPuzzleExchangeByName(t){let i=bt.intance.m_dicPuzzleExchange.values;for(let r=0;r<i.length;r++){var n=i[r];if(t==n.name)return n}}getNetAddress(t){let i=bt.intance.m_dicCoinAddress.values;for(let r=0;r<i.length;r++){var n=i[r];if(ie.vType==n.type&&t==n.tokenid)return n.tokenAddress}}getBuyHeroAddress(t){let i=bt.intance.m_dicBuyHeroes.values;for(let r=0;r<i.length;r++){var n=i[r];if(ie.vType==n.type&&t==n.tokenid)return n.tokenAddress}}getACoin(t,e){let n=bt.intance.m_dicACoin.values;for(let s=0;s<n.length;s++){var r=n[s];if(t==r.token&&e==r.currency)return r}}static getArrFromDictionary(t,e,i){let n=[];for(let r=0;r<t.values.length;r++)t.values[r][e]+""==i+""&&n.push(t.values[r]);return n}getArrFromDicItemByKey(t,e){let i=[];for(let n=0;n<this.m_dicItems.values.length;n++)this.m_dicItems.values[n][t]+""==e+""&&i.push(this.m_dicItems.values[n]);return i}initConfigObject(t,e=null,i=null){let n="config/"+t+".json";console.log("initConfigObject： url: "+n);let r=M.instance.getResByURL(n).data;return new Eo(r,e)}initConfig(t,e,i=null,n=!1,r=null){let s="config/"+t+".json";console.log("initConfig url: "+s);let o=M.instance.getResByURL(s).data,l=new ye;if(!o)return console.log("ERROR : SheetDataManager -->initConfig()  url:"+s),l;let u;for(let m=0;m<o.length;m++){let h=this.compoundKey(o[m],e);i?(u=new i,u.init==null&&console.log("ERROR :BaseItem> SheetDataManager -->initConfig()  url:"+s),u.init(o[m]),l.set(h,u),r&&r.runWith(u)):(l.set(h,o[m]),r&&r.runWith(o[m]))}if(n){let m=M.instance.setResURL(s);Laya.Loader.clearRes(m)}return l}compoundKey(t,e){let i="",n=e.length;if(n>1)for(let r=0;r<n;r++)i+=t[e[r]],r!=n-1&&(i+="_");else i=t[e[0]];return i}getCompoundKey(t){let e="",i=t.length;if(i>1)for(let n=0;n<i;n++)e+=t[n],n!=i-1&&(e+="_");else e=t[0];return e}initConfig2(t,e,i,n=!0){let r="config/"+t+".json",s=M.instance.getResByURL(r).data,o=new ye;if(!s)return console.log("ERROR : SheetDataManager -->initConfig2()  url:"+r),o;let l;for(let u=0;u<s.length;u++){let m=s[u][e],h;o.get(m)==null?(h=[],o.set(m,h)):h=o.get(m),l=new i,l.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig2()  url:"+r),l.init(s[u]),h.push(l)}if(n&&t!="items"){let u=M.instance.setResURL(r);Laya.Loader.clearRes(u)}return o}getItemsBy(t,e){let i=this.getArrFromDicItemByKey("itm_type",t),n=[];for(let r of i)r.child_type.toString()==e.toString()&&n.push(r);return n}getSheetDataByMultiKey(t,e){let i=this.getCompoundKey(e);return t.get(i)}getEquipDataById(t,e=null){let n=bt.intance.m_dicEquip.values;for(let s=0;s<n.length;s++){var r=n[s];if(e){if(t==r.id&&e==r.quality)return r}else if(t==r.id)return r}}getAttributeDataById(t){let i=bt.intance.m_dicAttributes.values;for(let r=0;r<i.length;r++){var n=i[r];if(t==n.id)return n}}getEquipSuitDataById(t){let i=bt.intance.m_dicEquipSuit.values;for(let r=0;r<i.length;r++){var n=i[r];if(n.parts.indexOf(t)>-1)return n}}getTurntableByid(t){let i=bt.intance.m_dicTurntable.values;for(let r=0;r<i.length;r++){var n=i[r];if(t==n.id)return n}}getWheelByType(t){let i=bt.intance.m_dicWheel.values,n=[];for(let s=0;s<i.length;s++){var r=i[s];t==r.type&&n.push(r)}return n}getWheel1ByType(t){let i=bt.intance.m_dicWheel1.values,n=[];for(let s=0;s<i.length;s++){var r=i[s];t==r.type&&n.push(r)}return n}getWheel2ByType(t){let i=bt.intance.m_dicWheel2.values,n=[];for(let s=0;s<i.length;s++){var r=i[s];t==r.type&&n.push(r)}return n}getConsumptionByLevel(t){let i=bt.intance.m_dicHeroStar.values,n=[];for(let s=0;s<i.length;s++){var r=i[s];t==r.level&&n.push(r)}return n}};bt.DataType_Items="SheetDataManager:items",bt.DataType_CatagoryChildType="SheetDataManager:CatagoryChildType",bt.DataType_BeautyPiece="SheetDataManager:beautypiece",bt.DataType_BeautyExp="SheetDataManager:beautyexp",bt.DataType_ClothStyleScore="SheetDataManager:clothStyleScore";var I=bt;var W=class{constructor(){}};W.NO_ALL=-1,W.YES=1,W.NO=2,W.SURE=4,W.CANCEL=8,W.CLOSE=16,W.RETURN_YES=1,W.RETURN_NO=2,W.RETURN_NONE=3,W.BASEALERTVIEW="BaseAlertDialog",W.MatchConfimDialog="MatchConfimDialog",W.InviteConfimDialog="InviteConfimDialog",W.ApplyConfimDialog="ApplyConfimDialog",W.BUYCONFIRMVIEW="BuyConfirmView",W.GUILDQUITVIEW="GuildQuitView",W.BuyItemConfirmView="BuyItemConfirmView",W.DOWNLOADALERT="DownLoadAlert";var Le=class a{constructor(){}static instance(){return a._instance||(a._instance=new a),a._instance}AlertByType(t,e=null,i=0,n=null,r=null,s=!1,o=null){i==0&&(i=W.YES|W.NO),this.onLoaded(i,t,e,n,r,s,o)}onLoaded(t,e,i,n=null,r=null,s=!1,o=null){O.intance.openModule(e,{flag:t,okHandler:n,cancelHandler:r,data:i,destroyDoCancel:s,initHandler:o})}};var Be=class{};Be.TYPE_EXP=3003,Be.TYPE_GOLD=3005,Be.TYPE_TOX=3001,Be.TYPE_USDT=3004,Be.TYPE_BTC=3006,Be.TYPE_ETH=3007,Be.TYPE_BTOX=3011,Be.TYPE_GALA=3010,Be.TYPE_BNB=3013,Be.TYPE_GGG=3017,Be.TYPE_KLAY=3015,Be.TYPE_BNRY=3016,Be.TYPE_LLE=3017,Be.TYPE_PC=3022,Be.TYPE_SOL=3023,Be.TYPE_MNT=3024,Be.TYPE_PAS=3025,Be.TYPE_QUAN_PVE=1980,Be.TYPE_QUAN_MNT=4001;var tt=class tt{static getColorText(t,e="#FFFF00"){return'<font color="'+e+'">'+t+"</font>"}static getChildByName(t,e,i="name"){if(t&&t.hasOwnProperty(i)&&t[i]==e)return t;let n=t;if(n){let r=n.numChildren,s;for(let o=0;o<r;++o)if(s=n.getChildAt(o),s instanceof Laya.Sprite&&(s=tt.getChildByName(s,e,i)),s&&s.hasOwnProperty(i)&&s[i]==e)return s}return null}static getChildByAttri(t,e){if(t&&t.hasOwnProperty(e)&&t[e])return t[e];let i=t;if(i){let n=i.numChildren,r;for(let s=0;s<n;++s)if(r=i.getChildAt(s),r instanceof Laya.Sprite){if(r=tt.getChildByAttri(r,e),r)return r}else if(r&&r.hasOwnProperty(e)&&r[e])return r[e]}return null}static logs(t,e=0,i=!0,n=16777215){if(t=tt.GetLogTime+" "+t,i)switch(e){case 0:n=16777215;break;case 1:n=16777215;break;case 2:n=16711680;break;case 3:n=16777215;break;case 4:n=13434777;break;case 5:n=16742399;break}}static get GetLogTime(){let t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()}static get GRAY(){return tt._GRAY||(tt._GRAY=new Laya.ColorFilter([.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0])),tt._GRAY}static get GRAY1(){if(!tt._GRAY1){let t=[.3086,.16094,.082,0,0,.2086,.26094,.082,0,0,.1086,.36094,.082,0,0,0,0,0,1,0];tt._GRAY1=new Laya.ColorFilter(t)}return tt._GRAY1}static get GLOW(){return tt._GLOW||(tt._GLOW=new Laya.GlowFilter("#ffffff",12,0,0)),tt._GLOW}static get BLUR(){if(!tt._BLUR){let t=new Laya.BlurFilter;t.strength=5,tt._BLUR=[t]}return tt._BLUR}static share(t=1001,e=2,i=null,n=null,r=0,s=0,o=null){}static get isParseWWhiteUser(){return tt._isParseWWhiteUser}static get isWhiteName(){return ie.isWhiteList}static itemListHandler(t,e){let i=t.dataSource,n=i[0],r=i[1],s=2,o=t.skin;o&&(o.indexOf("xinSmall")!=-1?s=1:o.indexOf("xinBig")!=-1&&(s=3));let l;s==1?l="common/common_clip/clip_xinSmall"+r+".png":s==3?l="common/common_clip/clip_xinBig"+r+".png":l="common/common_clip/clip_xinMiddle"+r+".png",t.skin=l,t.dataSource=n}static setStarList(t,e){t.renderHandler=new Laya.Handler(tt,tt.itemListHandler),t.dataSource=e}static get BLACK(){return tt._BLACK||(tt._BLACK=new Laya.ColorFilter,tt._BLACK.setColor("#000000")),tt._BLACK}static get YELLOW(){return tt._YELLOW||(tt._YELLOW=new Laya.ColorFilter,tt._YELLOW.setColor("#ffe64b")),tt._YELLOW}static get YELLOW1(){return tt._YELLOW1||(tt._YELLOW1=new Laya.ColorFilter,tt._YELLOW1.setColor("#fee14e")),tt._YELLOW1}static get RED1(){return tt._RED1||(tt._RED1=new Laya.ColorFilter,tt._RED1.setColor("#ff4537")),tt._RED1}static get BLUE(){return tt._BLUE||(tt._BLUE=new Laya.ColorFilter,tt._BLUE.setColor("#2f72a7")),tt._BLUE}static setColor(t="#13e2cf"){let e=new Laya.ColorFilter;return e.setColor(t),e}static heroNotEnought(t=1286){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(t),W.YES,null)}static popTip(t){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(t),W.YES,null)}static onGetHero(t=-1){ge.intance.setCurrentScene(ae.M_SCENE_SHOP,[1,t])}static popToMain(){var t="network error, back to mainscreen";Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(t),W.YES,Laya.Handler.create(this,this.setToMainScene))}static setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}static isFightHero(t){return v.instance.playerDto.fightHeroPk==t||t==v.instance.playerDto.newFightHeroPk}static titickNotEnought(t=-1){var e=2,i=I.intance.getSheetDataByMultiKey(I.intance.m_dicShopMulDic,[e,t]);if(i&&i.open==1)Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1060),W.CANCEL,Laya.Handler.create(this,this.onGetTitck,[t]));else{var n=I.intance.m_dicItems.get(t);n?C.instance.notice(p.instance.getLanguage(1282,p.instance.getLanguage(n.name))):Oe.instance.showErrorWord(18)}}static RemError(){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1124),W.YES,null)}static NoHeroError(t){Le.instance().AlertByType(W.BASEALERTVIEW,t,W.YES,null)}static TransactionErrorTip(){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1224),W.YES,null)}static alertNoAll(t){Le.instance().AlertByType(W.BASEALERTVIEW,t,W.NO_ALL)}static onGetTitck(t=-1){ge.intance.setCurrentScene(ae.M_SCENE_SHOP,[2,t])}static moneyNotEnought(t=Be.TYPE_TOX){var e=I.intance.m_dicItems.get(t),i=p.instance.getLanguage(e.name);C.instance.notice(p.instance.getLanguage(1170,i))}static onGetMoney(t){ge.intance.setCurrentScene(ae.M_SCENE_ASSET,[1,t])}static openSquidGame(){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(6056),W.CANCEL,Laya.Handler.create(this,this.onOpenSquidGame))}static onOpenSquidGame(){window.location.href="https://squidgamefi.io/?invitationCode=2oi"}static onOpenSwapView(){window.open("https://swap.phantomarena.ai","_blank")}static otherLogin(){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(6054),W.YES,Laya.Handler.create(this,$e.instance.reload))}static netError(){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1307),W.YES,Laya.Handler.create(this,$e.instance.reload))}static commTipWithYes(t){Le.instance().AlertByType(W.BASEALERTVIEW,t,W.YES)}static shakeSprs(t,e=2,i=4,n=32){if(tt.isShake)return;tt.isShake=!0;let r=t.length,s=[];for(let m=0;m<r;m++){let h=t[m];s.push([h.x,h.y])}let o=[0,0],l=0,u=function(){o[l%2]=l++%4<2?0:i,l>e*4+1&&(Laya.timer.clear(Laya.stage,u),l=0,tt.isShake=!1);for(let m=0;m<r;m++){let h=t[m];h.x=o[0]+s[m][0],h.y=o[1]+s[m][1]}};Laya.timer.loop(n,Laya.stage,u)}static shake(t,e=2,i=4,n=32){if(tt.isShake)return;tt.isShake=!0;let r=new Laya.Point(t.x,t.y),s=[0,0],o=0,l=function(){s[o%2]=o++%4<2?0:i,o>e*4+1&&(Laya.timer.clear(Laya.stage,l),o=0,tt.isShake=!1),t.x=s[0]+r.x,t.y=s[1]+r.y};Laya.timer.loop(n,Laya.stage,l)}static checkIsFull(){}static fullScreen(t){var e,i=Laya.Browser.window.location.href;t?(i+="&isFull=1",e={type:"openChildPage",data:{url:i,fullScreen:"1",close:"0"}}):e={type:"closePage",data:""};var n=JSON.stringify(e);Laya.Browser.onIOS?(console.log("onIOS"),typeof webkit<"u"&&(console.log("onIOS1"),webkit.messageHandlers._tw_.postMessage(n),console.log("onIOS2"))):Laya.Browser.onAndroid&&(console.log("onAndriod0"),window&&typeof window._tw_<"u"&&(console.log("onAndriod1 str: "+n),window._tw_.callInto(n),console.log("onAndriod2")))}};tt._isParseWWhiteUser=!1,tt.isWWhiteUser=!1,tt.isShake=!1,tt.isFullScreen=!1;var he=tt;var _n=class _n{constructor(){this.mainSceneX=10086;this.isCloseAll=!0;this.enterMainSceneTimes=0;this.isTopOpening=!1;this.isBottomOpening=!1;_.intance.on(b.EVENT_MODULE_ADDED,this,this.onAdded)}static get intance(){return _n._instance||(_n._instance=new _n),_n._instance}init(){}setup(){}onAdded(t){}getPreSceneData(){if(this.m_arrFromScenes.length<1)return[ae.M_SCENE_MAIN,!0,1,null];{let t=this.m_arrFromScenes.pop();return console.log("pop-----------route："+this.m_arrFromScenes.join(" | ")),t}return[ae.M_SCENE_MAIN,!0,1,null]}removePreSceneData(){this.m_arrFromScenes=[]}setBackScene(){let t=this.getPreSceneData();this.setCurrentScene(t[0],t[1],!1)}setMainScene(t=1,e=null){this.setCurrentScene(ae.M_SCENE_MAIN,e)}async setCurrentScene(t,e=null,i=!1,n=!0){console.log("setCurrentScene: ",t,e),this.preSceneName=t;let r=!1;if(this.m_sceneCurrent&&this.m_sceneCurrent.name==t){console.log("currentScene："+this.m_sceneCurrent.name+"  openScene：："+t);return}this.isCloseAll?O.intance.closeAll():this.isCloseAll=!0,this.m_sceneCurrent&&(this.m_arrFromScenes||(this.m_arrFromScenes=[]),i&&this.m_sceneCurrent.m_arrOpenSceneData[3]&&this.m_arrFromScenes.push(this.m_sceneCurrent.m_arrOpenSceneData),console.log("open-----------scene："+this.m_arrFromScenes),this.fromScene=this.m_sceneCurrent.name,console.log("fromSceneName: "+this.fromScene),_n.m_arrSceneToDialog.indexOf(t)==-1?(this.m_sceneCurrent==this.m_preScene&&(this.m_preScene=null),this.m_sceneCurrent.toScene=t,this.m_sceneCurrent.removeSelf(),this.m_sceneCurrent=null,Laya.loader.clearUnLoaded(),mc.instance.dispose()):this.m_preScene=this.m_sceneCurrent,!i&&_n.m_arrSceneToDialog.indexOf(t)==-1&&this.m_preScene&&(this.m_sceneCurrent=this.m_preScene,this.m_sceneCurrent.toScene=t,this.m_sceneCurrent.removeSelf(),this.m_sceneCurrent=null,Laya.loader.clearUnLoaded(),mc.instance.dispose()));let s=I.intance.m_dicScene.get(t);switch(s&&s.music!=null&&s.music!="0"&&s.music!=""&&(console.log("SceneManager.setCurrentScene sceneItem.music: "+s.music),ct.instance.playMusicByName(s.music)),t){case ae.M_SCENE_MAIN:this.m_arrFromScenes=[],this.m_sceneCurrent=await Laya.Scene.open("scenes/mainView/MainScene.ls"),this.enterMainSceneTimes++;break;case ae.M_SCENE_AIRDROP:this.m_sceneCurrent=await Laya.Scene.open("scenes/airdrop/AirdropScene.ls",!0,e);break;case ae.M_SCENE_SHOP:this.m_sceneCurrent=await Laya.Scene.open("scenes/shop/ShopScene.ls",!0,e);break;case ae.M_SCENE_RANK:this.m_sceneCurrent=await Laya.Scene.open("scenes/rank/RankScene.ls");break;case ae.M_SCENE_SHOLARSHIP:this.m_sceneCurrent=await Laya.Scene.open("scenes/scholarship/ScholarshipScene.ls");break;case ae.M_SCENE_FRIEND:this.m_sceneCurrent=await Laya.Scene.open("scenes/friend/FriendScene.ls");break;case ae.M_SCENE_HERO:this.m_sceneCurrent=await Laya.Scene.open("scenes/hero/MyHeroScene.ls");break;case ae.M_SCENE_KNAPSACK:this.m_sceneCurrent=await Laya.Scene.open("scenes/item/KnapsackScene.ls",!0,e);break;case ae.M_SCENE_MAIL:this.m_sceneCurrent=await Laya.Scene.open("scenes/mail/MailScene.ls");break;case ae.M_SCENE_UNION:this.m_sceneCurrent=await Laya.Scene.open("scenes/union/UnionScene.ls");break;case ae.M_SCENE_MYUNION:this.m_sceneCurrent=await Laya.Scene.open("scenes/union/MyUnionScene.ls",!0,e);break;case ae.M_SCENE_LCPOOL:this.m_sceneCurrent=await Laya.Scene.open("scenes/lcPool/LcPoolScene.ls",!0,e);break;case ae.M_SCENE_MATCH_READY:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/MatchReady.ls");break;case ae.M_SCENE_MATCH:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/Match.ls");break;case ae.M_SCENE_SNAKE_MATCH:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/SnakeMatch.ls");break;case ae.M_SCENE_ASSET:this.m_sceneCurrent=await Laya.Scene.open("scenes/asset/AssetScene.ls",!0,e);break;case ae.M_SCENE_GET_MAT:this.m_sceneCurrent=await Laya.Scene.open("scenes/getMat/GetMatScene.ls",!1,e);break;case ae.M_SCENE_OPEN_GAME:this.m_sceneCurrent=await Laya.Scene.open("scenes/getMat/OpenGameScene.ls",!1,e);break;case ae.M_SCENE_IGO_PAGE:this.m_sceneCurrent=await Laya.Scene.open("scenes/igoPage/IgoPageScene.ls");break;case ae.M_SCENE_DAILY_TASK:this.m_sceneCurrent=await Laya.Scene.open("scenes/dailyTasks/GhostRaffleScene.ls",!1,e);break;case ae.M_SCENE_PVE:this.m_sceneCurrent=await Laya.Scene.open("scenes/pve/PveScene.ls",!1,e);break;default:break}he.logs("======================  打开Scene: "+t+"  ======================"),this.m_sceneCurrent.name=t,this.m_sceneCurrent.fromScene=this.fromScene,this.m_sceneCurrent.m_arrOpenSceneData=[t,e,i,n];let o=A.M_SCENE}onLoaded(t,e){let i=Laya.ClassUtils.getClass(e.type),n=new i;e.tip=n,this.tipMap.set(t,e)}initPreload(){let t=I.intance.m_dicScene.get(ae.M_SCENE_PRE_LOAD);t&&t.music!=null&&t.music!="0"&&t.music!=""&&(console.log("SceneManager.initPreload sceneItem.music: "+t.music),ct.instance.playMusicByName(t.music))}get currSceneName(){return this.m_sceneCurrent?this.m_sceneCurrent.name:""}};_n.m_arrSceneToDialog=[];var ge=_n;var ee=class{};ee.ARENA_TYPE_PROFESSIONAL=1,ee.ARENA_TYPE_AIRDROP=2,ee.ARENA_TYPE_TRAINING=3,ee.ARENA_TYPE_PVE=4,ee.ARENA_TYPE_TEAM=5,ee.ACTION_CREATE=1,ee.ACTION_JOIN=2,ee.ACTION_SIGNUP=3,ee.ACTION_WATCH=4,ee.ACTION_CREATE_BOOKING=5,ee.ACTION_JOIN_BOOKING=6,ee.STATE_WAIT=0,ee.STATE_SIGNUP=2,ee.STATE_GROUPED=3,ee.STATE_START=10,ee.CAMERA_IDLE=0,ee.CAMERA_FOLLOW_ME=1,ee.CAMERA_MAP_CLICK=2,ee.CAMERA_DIRECT_OPERATE=3,ee.CAMERA_FOLLOW_OTHER=4,ee.MATCHEND_REWARD=1,ee.MATCHEND_QUAN=2,ee.MATCHEND_DIEJIA=3;var we=class{};we.Sound={btnClick:""},we.GameConfig={debug:!1,version:"1.0.0",frameRate:"30",defaultVolume:.7,skills:{speedUp:{duration:5,cooldown:10},shield:{duration:3,cooldown:15},magnet:{duration:8,cooldown:20},invisible:{duration:4,cooldown:25}}},we.uiZOrder={common:1e3,hint:2e3,loading:2001},we.closeType={cancel:1,close:2,ok:3,keyback:4},we.JoystickMODE={FIXED:1,MOVED:2},we.JoystickEventType={JET_TOUCH_BEGIN:1,JET_TOUCH_MOVE:2,JET_TOUCH_END:3},we.JoystickSize={JoyStickBg:80,JoyStickHandleBg:40},we.snackType={SELF:1,OTHERS:2},we.snackSpeedRate={default:1,speedUp:2},we.mapSize={width:64+1280*3+64,height:60+720*4+60,offsetX:64,offsetY:60,defaultMapRes:{width:1280,height:720,resPath:"res/snake/manual/game/img_back.png"}},we.gameZordels={map:1,snacks:2},we.snackGount=100,we.collision={quadTree:{maxObjects:10,maxLevels:5},snake:{headRadius:18,bodyRadius:14},food:{radius:100,maxRadius:100}},we.food={size:50,initCount:100,maxCount:200,spawnInterval:1e3,types:{NORMAL:1,GOLDEN:2,RAINBOW:3,POISON:4}},we.score={kill:100,food:{NORMAL:1,GOLDEN:5,RAINBOW:10,POISON:-3}},we.res={snackHeadImg:"res/snake/snake/img_head.png",snackBodyImg:"res/snake/snake/img_body.png",snackRingImg:"res/snake/snake/img_ring.png"},we.snack={defaultSpeed:6,defaultRotateSpeed:500,defaultLen:20,intervalBoneToDrawSkin:4,defaultRotation:270,defaultRadio:35/2,defaultMoveInterval:.033,defaultInvincibleTime:3,defaultShineInterval:.1,skinFlag:{head:1,body:2},useServer:!1},we.SYNC_CONFIG={MAX_ALLOWED_ERROR:50,CORRECTION_TIME:300,SYNC_INTERVAL:100,PREDICTION_MULTIPLIER:1.2},we.invincibleRing={margin:2,minScale:.5};var Ji=class{static clamp(t,e,i){return Math.max(e,Math.min(i,t))}static lerp(t,e,i){return t+(e-t)*i}static angleToRadian(t){return t*Math.PI/180}static radianToAngle(t){return t*180/Math.PI}static randomRange(t,e){return t+Math.random()*(e-t)}static randomInt(t,e){return Math.floor(this.randomRange(t,e+1))}static getDistance(t,e){let i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}static getVecDistance(t,e){let i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}static distance(t,e,i,n){let r=t-i,s=e-n;return Math.sqrt(r*r+s*s)}static getAngle(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}};Ji.PI2=Math.PI*2;var ut=class a{constructor(t=0,e=0){this.x=t,this.y=e}init(t=0,e=0){return this.x=t,this.y=e,this}reset(){this.x=0,this.y=0}static create(t=0,e=0){return new a(t,e)}assign(t){return this.x=t.x,this.y=t.y,this}add(t){return new a(this.x+t.x,this.y+t.y)}sub(t){return new a(this.x-t.x,this.y-t.y)}mul(t){return new a(this.x*t,this.y*t)}getRotation(){let t=Math.atan2(this.y,this.x)*180/Math.PI;return t<0&&(t+=360),t}getRotationTo(t){let e=t.x-this.x,i=t.y-this.y,n=Math.atan2(i,-e)*180/Math.PI;return n<0&&(n+=360),n}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y);return t!==0&&(this.x/=t,this.y/=t),this}rotate(t){let e=t*Math.PI/180,i=Math.sin(e),n=Math.cos(e),r=this.x,s=this.y;this.x=r*n-s*i,this.y=r*i+s*n}dot(t){return this.x*t.x+this.y*t.y}equal(t){return this.x===t.x&&this.y===t.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}copy(){return new a(this.x,this.y)}};var Dr=class{constructor(t,e){this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200;this._collisionRadius=we.collision.food.radius;this.isCollidable=!0;this.position=ut.create(e.loc.x,e.loc.y),this.foodObject=e,this.init(t)}init(t){this.sprite=q.instance.matchSnakeBeanPrefab.create();var e=I.intance.m_dicFoods.get(this.foodObject.itemId);this.sprite.init(e),this.sprite.pos(this.position.x,this.position.y),this.sprite.zOrder=0,t.addChild(this.sprite)}startScalingAnimation(){let t=this.minScale+Math.random()*(this.maxScale-this.minScale),e=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:t,scaleY:t},e,null,Laya.Handler.create(this,()=>{let i=this.minScale+Math.random()*(1-this.minScale),n=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:i,scaleY:i},n,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}getPosition(){return this.position}getScore(){var t=I.intance.m_dicFoods.get(this.foodObject.itemId);return t.points}beEatten(t,e){Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:t,y:e,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish))}onFinish(){this.destroy()}destroy(){Laya.Tween.clearAll(this.sprite),this.sprite.removeSelf(),this.sprite.destroy(),this.sprite=null,this.position=null}getBoundingBox(){return new Laya.Rectangle(this.position.x-this._collisionRadius,this.position.y-this._collisionRadius,this._collisionRadius*2,this._collisionRadius*2)}checkCollision(t,e,i){let n=this.position;return Ji.distance(n.x,n.y,t,e)<i+this._collisionRadius}};var Ct=class a{constructor(){}static judgePosition(t,e){let i=Math.atan2(e,t)*180/Math.PI;return i<0&&(i+=360),Math.floor(i)}static distancePoint(t,e,i,n){return Math.sqrt((t-i)*(t-i)+(e-n)*(e-n))}get2D_Distance(t,e){return Math.sqrt(Math.pow(Math.abs(t),2)+Math.pow(Math.abs(e),2))}static rollCharacterByDir(t,e,i,n){let r=i;return a.rollCharacter(t,e,r,n)}static rollCharacter(t,e,i,n){let r=i*(Math.PI/180);var s=t+n*Math.cos(r),o=e+n*Math.sin(r),l=B.instance.currArenaItem.mapid,u=I.intance.m_dicMaps.get(l),m=u.offset;return s<m?s=m:s>u.width-m&&(s=u.width-m),o<m?o=m:o>u.height-m&&(o=u.height-m),console.log(`新的坐标：X=${s}, Y=${o}`),[s,o]}static getRandomPointInMap(){var t=B.instance.currArenaItem.mapid,e=I.intance.m_dicMaps.get(t),i=e.width,n=e.height,r=e.offset;let s=Math.floor(Math.random()*(i-2*r))+r,o=Math.floor(Math.random()*(n-2*r))+r;return{x:s,y:o}}static createDirectPath(t,e,i,n=40,r=25){for(var s=[],o=i*Math.PI/180,l=1;l<n;++l){var u=t,m=e+r*l,h=-(m-e)*Math.sin(o)+t,y=(m-e)*Math.cos(o)+e;s.push(h,y)}return s}static pointsBack(t,e){if(e<=0||!t||t.length<4)return t;for(var i=0,n=-1,r=-1,s=0;s<t.length;s+=2){var o=t[s],l=t[s+1];n>0&&r>0&&(i+=this.distancePoint(n,r,o,l)),n=o,r=l}if(i<e)return null;for(var u=t.concat(),m=0,h=0;u&&u.length>=4&&m<e;){var y=u.pop(),x=u.pop(),E=u[u.length-1],S=u[u.length-2];if(m+=this.distancePoint(S,E,x,y),h=m-e,h>0){var T=Math.atan2(E-y,S-x),N=T*180/Math.PI+90;T=N*Math.PI/180;var F=E+h,G=-(F-E)*Math.sin(T)+S,Y=(F-E)*Math.cos(T)+E;u.push(G,Y)}}return u}static createLinePath(t,e,i,n,r=25,s=0){var o=[],l=Math.atan2(n-e,i-t);l=(l*180/Math.PI-90)*Math.PI/180;for(var u=this.distancePoint(t,e,i,n)-s,m=0,h=0;u>m;){var y=t,x=e+r*h,E=-(x-e)*Math.sin(l)+t,S=(x-e)*Math.cos(l)+e;m=this.distancePoint(t,e,E,S),u>m&&o.push(E,S),h++}return s==0&&o.push(i,n),o}static rolePosTransform(t,e,i){var n=new Laya.Matrix;return n.rotate(Math.PI/180*(t.modelAngle-90)),n.translate(e.x,e.y),n.transformPoint(i)}static pointtInPolygon(t,e){for(var i=0,n=0;n<e.length;n++){var r=e[n],s=e[(n+1)%e.length];if(r.y!=s.y&&!(t.y<Math.min(r.y,s.y))&&!(t.y>=Math.max(r.y,s.y))){var o=(t.y-r.y)*(s.x-r.x)/(s.y-r.y)+r.x;o>t.x&&i++}}return i%2==1}static pointInPie(t,e,i,n,r,s){var o=Math.atan2(s.y-e,s.x-t)*180/Math.PI,l=this.distancePoint(t,e,s.x,s.y);return o>=i&&o<=n&&l<=r}static getRandInRound(t,e){return Math.floor(Math.random()*(e-t+1))+t}static getUnitVector(t){let i=t*(Math.PI/180),n=1*Math.cos(i),r=1*Math.sin(i);return new Laya.Point(n,r)}static getAngleToVec(t){let e=t*Math.PI/180,i=Math.cos(e),n=Math.sin(e);return ut.create(i,n)}static subtract(t,e){let i=new Laya.Point;return i.x=t.x-e.x,i.y=t.y-e.y,i}static getDistance(t,e){let i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}static calculateDistance(t,e){let i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}};var vi=class{constructor(){}};vi.TYPE_NORMAL=0,vi.TYPE_TRUST=1,vi.TYPE_WEB3=2,vi.type=0;async function Hk({timeout:a}={timeout:3e3}){let t=X1();return t||Uk({timeout:a})}async function Uk({timeout:a}={timeout:3e3}){return new Promise(t=>{let e=()=>{t(X1())};window.addEventListener("trustwallet#initialized",e,{once:!0}),setTimeout(()=>{window.removeEventListener("trustwallet#initialized",e,{once:!0}),t(null)},a)})}function X1(){let a=e=>!!e.isTrust;return typeof window<"u"&&typeof window.ethereum<"u"?a(window.ethereum)?window.ethereum:window.ethereum?.providers?window.ethereum.providers.find(a)??null:window.trustwallet??null:null}async function OI(){if(console.log("initWeb3 -0"),console.log("initWeb3 -1"),typeof window<"u"&&typeof window.ethereum<"u"&&!!window.ethereum.isTrust){let t=await Hk();console.log("initWeb3 -2"+t),vi.trustProvider=t,vi.type=vi.TYPE_TRUST,console.log("initWeb3 -6")}else typeof web3<"u"&&(console.log("initWeb3 2"),web3=new Web3(web3.currentProvider),vi.web3Provider=web3,vi.type=vi.TYPE_WEB3,console.log("initWeb3 3"))}var Xn=class a{constructor(){this.walletDic=new ye}static get instance(){return a._instance||(a._instance=new a),a._instance}getEthValue(t){return a.instance.walletDic.get(t)?a.instance.walletDic.get(t).ethValue:0}getValue(t){return a.instance.walletDic.get(t)?a.instance.walletDic.get(t).value:0}};var oa=class{};oa.ASSETS_TOX=1e4,oa.ASSETS_ARCANITE=10001,oa.ASSETS_CRYSTAL=10002,oa.ASSETS_MITHRIL=10003,oa.ASSETS_REDSTONE=10004,oa.ASSETS_TRUEIRON=10005;var oe=class{static initConfig(t){this.configDic=new ye;for(let e of t){let i=e.sstringvalue;e.sadditional==="JSON"&&(i=JSON.parse(i)),this.configDic.set(e.skey2,i),this[e.skey2]=i}}};oe.ADDRESS0="0x0000000000000000000000000000000000000000",oe.TOKEN_ERC20ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"miner",type:"address"}],name:"addMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_delMinter",type:"address"}],name:"delMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idx",type:"uint256"}],name:"getMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMinterLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.PUZZLE_ABI=[{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"bytes",name:"signature",type:"bytes"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"WithdrawToken",type:"event"},{inputs:[],name:"TOX",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDT",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"WBNB",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"getAmountsOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address",name:"token",type:"address"}],name:"getTokenAmountsOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"hasUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"hashList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],name:"setSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],oe.PUZZLE_ABI_ETH=[{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"bytes",name:"signature",type:"bytes"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"WithdrawToken",type:"event"},{inputs:[],name:"GALA",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDT",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"WETH",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"getAmountsOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"hasUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"hashList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],name:"setSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.ACCOUNT_ADDRESS="0x5ff2123b0Aa4bD97eeF5F6388EFCB56cd29D6835",oe.ACCOUNT_ABI=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"nickName",type:"string"},{indexed:!1,internalType:"string",name:"avatar",type:"string"},{indexed:!1,internalType:"uint256",name:"level",type:"uint256"},{indexed:!1,internalType:"uint256",name:"birthHeight",type:"uint256"},{indexed:!1,internalType:"uint256",name:"birthPlace",type:"uint256"},{indexed:!1,internalType:"uint256",name:"gender",type:"uint256"},{indexed:!1,internalType:"uint256",name:"influence",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_avatar",type:"string"}],name:"changeAvatar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_gender",type:"uint256"}],name:"changeGender",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_influence",type:"uint256"}],name:"changeInfluence",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_level",type:"uint256"}],name:"changeLevel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_nickname",type:"string"}],name:"changeNickName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"_nickname",type:"string"},{internalType:"string",name:"_avatar",type:"string"},{internalType:"uint256",name:"_level",type:"uint256"},{internalType:"uint256",name:"_birthHeight",type:"uint256"},{internalType:"uint256",name:"_birthPlace",type:"uint256"},{internalType:"uint256",name:"_gender",type:"uint256"},{internalType:"uint256",name:"_influence",type:"uint256"}],name:"createAccount",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getAccountInfo",outputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"nickName",type:"string"},{internalType:"string",name:"avatar",type:"string"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"birthHeight",type:"uint256"},{internalType:"uint256",name:"birthPlace",type:"uint256"},{internalType:"uint256",name:"gender",type:"uint256"},{internalType:"uint256",name:"influence",type:"uint256"}],internalType:"struct AccountInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newBaseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"newTokenURI",type:"string"}],name:"setTokenURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.CREATE_ACCOUNT_ABI=[{inputs:[{internalType:"address",name:"AccountToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"accounts",type:"address[]"}],name:"BurnAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"nickname",type:"string"},{indexed:!1,internalType:"uint256",name:"country",type:"uint256"},{indexed:!1,internalType:"uint256",name:"gender",type:"uint256"},{indexed:!1,internalType:"string",name:"icon",type:"string"}],name:"RegisterAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"}],name:"burnAccount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"currentId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"iAccount",outputs:[{internalType:"contract IAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"isExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"nickname",type:"string"},{internalType:"uint256",name:"country",type:"uint256"},{internalType:"uint256",name:"gender",type:"uint256"},{internalType:"string",name:"icon",type:"string"}],name:"register",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"registerId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],oe.BUY_HERO_ABI=[{inputs:[{internalType:"address",name:"_Phantom",type:"address"},{internalType:"address",name:"_TOX",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"Phantom",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"TOX",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"TOXPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNFTParams",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"series",type:"uint256"},{internalType:"uint256",name:"level",type:"uint256"}],internalType:"struct PhantomMall.Params[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNameIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"union",type:"address"}],name:"list",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxSeriesCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"tos",type:"address[]"}],name:"mintByOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"mintByTOX",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"mintCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"nameCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"random",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_toxPrice",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.HERO_LIST_ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_fromTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_toTokenId",type:"uint256"}],name:"BatchMetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"MetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"uint256",name:"level",type:"uint256"},{indexed:!1,internalType:"uint256",name:"series",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"uri",type:"string"}],name:"TokenBaseURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"level",type:"uint256"}],name:"UpdateLevel",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"UpdateName",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"series",type:"uint256"}],name:"UpdateSeries",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"endId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"exist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getParams",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"series",type:"uint256"}],internalType:"struct PhantomHero.Params",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"list",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"safeMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"series",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_endId",type:"uint256"}],name:"setEndId",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"setTokenURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"level",type:"uint256"}],name:"updateLevel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"name",type:"string"}],name:"updateName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"series",type:"uint256"}],name:"updateSeries",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.TRANSFER_HERO_ABI=[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"uids",type:"uint256[]"}],name:"BatchTransfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"uids",type:"uint256[]"}],name:"batchTransfer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"hero",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],oe.EDIT_ACCOUNT_ADDRESS="0xaa1B8FA74Ed295123a6336C2D3a88cB973160dfa",oe.EDIT_ACCOUNT_ABI=[{inputs:[{internalType:"address",name:"_accountContract",type:"address"},{internalType:"string",name:"_website",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPirce",outputs:[{components:[{internalType:"address",name:"exchangeToken",type:"address"},{internalType:"uint256",name:"rate",type:"uint256"}],internalType:"struct UpdateProfile.Price",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWebsite",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_exchangeToken",type:"address"},{internalType:"uint256",name:"_rate",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_website",type:"string"}],name:"setWebsite",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"nickName",type:"string"},{internalType:"string",name:"avatar",type:"string"}],name:"updateProfile",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.STAKING_POOL_ABI=[{inputs:[{internalType:"uint256",name:"_poolPlace",type:"uint256"},{internalType:"address",name:"_stakeToken",type:"address"},{internalType:"address",name:"_accountContract",type:"address"},{internalType:"address",name:"_rewardsContract",type:"address"},{internalType:"address",name:"_empowerContract",type:"address"},{internalType:"uint256",name:"_dailyRewards",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"rewards",type:"uint256"}],name:"RewardAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"rewards",type:"uint256"}],name:"RewardPaid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"calcCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"calcPerSecondsRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"capacityOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_dailyRewards",type:"uint256"}],name:"changeDailyRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimAllReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"claimReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earnedAll",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"estimatePerSecondsRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAccountCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAccountContractAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAccountTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAccountTokensNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDailyRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getEmpowerContractAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLimitTokensNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolPlace",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRewardsContractAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRewardsPerUnitStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRewardsRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getStakeTokenAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokenIdleStatus",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokenMiningStatus",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"isAccountStakeToken",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_empowerContract",type:"address"}],name:"setEmpowerContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_limitTokensNumber",type:"uint256"}],name:"setLimitTokensNumber",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_idleStatus",type:"uint256"}],name:"setTokenIdleStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_miningStatus",type:"uint256"}],name:"setTokenMiningStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawAllAndClaim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"withdrawAndClaim",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.STAKING_HERO_POWERCALC_ABI=[{inputs:[{internalType:"uint256",name:"_constantValue",type:"uint256"},{internalType:"uint256",name:"_linearCoefficient",type:"uint256"},{internalType:"uint256",name:"_quadraticCoefficient",type:"uint256"},{internalType:"uint256",name:"_percentage",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenLevel",type:"uint256"},{internalType:"bool",name:"isMatchProfession",type:"bool"}],name:"calcCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getFormulaParams",outputs:[{components:[{internalType:"uint256",name:"constantValue",type:"uint256"},{internalType:"uint256",name:"linearCoefficient",type:"uint256"},{internalType:"uint256",name:"quadraticCoefficient",type:"uint256"},{internalType:"uint256",name:"percentage",type:"uint256"}],internalType:"struct EmpowerCalcFormula.FormulaParams",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_constantValue",type:"uint256"},{internalType:"uint256",name:"_linearCoefficient",type:"uint256"},{internalType:"uint256",name:"_quadraticCoefficient",type:"uint256"},{internalType:"uint256",name:"_percentage",type:"uint256"}],name:"setFormulaParams",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.BLINDBOX_ADDRESS="0xaf8d3eb0f0e0a454Ec9B3Fb7207dD70Ba302d653",oe.BLINDBOX_ABI=[{inputs:[{internalType:"address",name:"_heroAddress",type:"address"},{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"},{internalType:"string",name:"_baseName",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"accountIsInWhiteList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_races",type:"uint256[]"}],name:"addRaces",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getBaseName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getBuyTimes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getIsOpen",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMaxBuyTimes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMaxTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPirce",outputs:[{components:[{internalType:"address",name:"exchangeToken",type:"address"},{internalType:"uint256",name:"price",type:"uint256"}],internalType:"struct HeroMallV1.Price",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRaces",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReceiverAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWhiteListContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"recruit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"}],name:"setBaseName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxBuyTimes",type:"uint256"}],name:"setMaxBuyTimes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"}],name:"setMaxTotalSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_exchangeToken",type:"address"},{internalType:"uint256",name:"_price",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiverAddress",type:"address"}],name:"setReceiverAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_whiteListContract",type:"address"}],name:"setWhiteListContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.BLINDBOX_ADDRESS_V2="0xaf8d3eb0f0e0a454Ec9B3Fb7207dD70Ba302d653",oe.BLINDBOX_ABI_V2=[{inputs:[{internalType:"address",name:"_heroAddress",type:"address"},{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"},{internalType:"string",name:"_baseName",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"accountIsInWhiteList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_races",type:"uint256[]"}],name:"addRaces",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getBaseName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getBuyTimes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getIsOpen",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMaxBuyTimes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMaxTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPirce",outputs:[{components:[{internalType:"address",name:"exchangeToken",type:"address"},{internalType:"uint256",name:"price",type:"uint256"}],internalType:"struct HeroMallV1.Price",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRaces",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReceiverAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWhiteListContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"recruit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"}],name:"setBaseName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxBuyTimes",type:"uint256"}],name:"setMaxBuyTimes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"}],name:"setMaxTotalSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_exchangeToken",type:"address"},{internalType:"uint256",name:"_price",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiverAddress",type:"address"}],name:"setReceiverAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_whiteListContract",type:"address"}],name:"setWhiteListContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.HERO_ADDRESS="0xCC0A4E3Bd1D49D7Ef9C431C0aD87D36B0B342018",oe.HERO_ABI=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"uint256",name:"level",type:"uint256"},{indexed:!1,internalType:"uint256",name:"rarity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"series",type:"uint256"},{indexed:!1,internalType:"uint256",name:"race",type:"uint256"},{indexed:!1,internalType:"uint256",name:"mineralLevel",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"level",type:"uint256"}],name:"UpdateLevel",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"mineralLevel",type:"uint256"}],name:"UpdateMineralLevel",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"string",name:"name",type:"string"}],name:"UpdateName",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"race",type:"uint256"}],name:"UpdateRace",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"rarity",type:"uint256"}],name:"UpdateRatity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"series",type:"uint256"}],name:"UpdateSeries",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"status",type:"uint256"}],name:"UpdateStatus",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getNFTParams",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"rarity",type:"uint256"},{internalType:"uint256",name:"series",type:"uint256"},{internalType:"uint256",name:"race",type:"uint256"},{internalType:"uint256",name:"mineralLevel",type:"uint256"}],internalType:"struct Parmas",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getStatus",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"uint256",name:"_level",type:"uint256"},{internalType:"uint256",name:"_rarity",type:"uint256"},{internalType:"uint256",name:"_series",type:"uint256"},{internalType:"uint256",name:"_race",type:"uint256"},{internalType:"uint256",name:"_mineralLevel",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newBaseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"newTokenURI",type:"string"}],name:"setTokenURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_level",type:"uint256"}],name:"updateLevel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_mineralLevel",type:"uint256"}],name:"updateMineralLevel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_name",type:"string"}],name:"updateName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"race",type:"uint256"}],name:"updateRace",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_rarity",type:"uint256"}],name:"updateRatity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_series",type:"uint256"}],name:"updateSeries",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"status",type:"uint256"}],name:"updateStatus",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.CREATE_UNION_ADDRESS="0xcd62E6a07072Bed38F4126ba5C9361901c71846e",oe.CREATE_UNION_ABI="",oe.UNION_NUMBER_SYS_ADDRESS="0x45F0de10fA3982c4d18AbaE89a5F0663123f955c",oe.UNION_NUMBER_SYS_ABI="",oe.UPGRADE_UNION_ADDRESS="0x18320fD38F3806C0A9fb2B41202Ed0bD3f826894",oe.UPGRADE_UNION_ABI="",oe.UNION_DISTRIBUTE_ADDRESS="0x0f6b4bBa8b01B6ee2CC3232ea963ac702CaDCe04",oe.UNION_WAR_ADDRESS="0xF8489Bb617F9DCaBF33bEaeBdA4CCD029E9E247E",oe.UNION_DISTRIBUTE_ABI="",oe.UNION_WAR_ABI="",oe.HERO_TO_TOKEN_POOL_ADDRESS="",oe.HERO_TO_TOKEN_POOL_ABI="",oe.WITHDRAW_AND_RECHARGE_ADDRESS="",oe.WITHDRAW_AND_RECHARGE_ABI="",oe.SERIESHEROMALL_ADDRESS="",oe.SERIESHEROMALL_ABI="",oe.HEROFORMATION_ADDRESS="",oe.HEROFORMATION_ABI="",oe.HERO_MINT_ADDRESS="",oe.HERO_MINT_ABI="",oe.RECHANGE_ADDRESS_TOX="0x32926612d9399C1088045AEB821CCB5Ba904D697",oe.RECHANGE_ADDRESS="0x4952981D44cb95c52F0a62D4Fe8702081338D824",oe.RECHANGE_ABI_NEW=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"}],name:"WithdrawToken",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"bank",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"depositETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"depositToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"hasUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiveAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiveAddress",type:"address"}],name:"setAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.ADDLOG_ADDRESS_TEST="0xfE561eebd0240cFb9c85339258784715100B237A",oe.ADDLOG_ADDRESS="0x50FB876efe6AD1b4df2f23DFc85f5B8d4DCd4f72",oe.ADDLOG_ABI=[{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"target",type:"string"},{indexed:!1,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"string",name:"tid",type:"string"},{indexed:!1,internalType:"uint256",name:"_type",type:"uint256"}],name:"AddTicketLog",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"target",type:"string"},{indexed:!1,internalType:"string",name:"data",type:"string"}],name:"log",type:"event"},{inputs:[{internalType:"string",name:"data",type:"string"}],name:"addLog",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"pid",type:"uint256"},{internalType:"string",name:"tid",type:"string"},{internalType:"uint256",name:"_type",type:"uint256"}],name:"addTicketLog",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.buyTicket_ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"ticketId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"totalAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"receiveAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feePoolAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"dividendFeePoolAmount",type:"uint256"}],name:"BuyTicket",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"dividendFeePoolRatio",type:"uint256"},{internalType:"uint256",name:"feePoolRatio",type:"uint256"},{internalType:"bool",name:"status",type:"bool"}],internalType:"struct TicketMall.TicketDetail[]",name:"tickets",type:"tuple[]"}],name:"addTicket",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"pid",type:"uint256"},{internalType:"uint256",name:"ticketId",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],name:"buyTicket",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"dividendFeePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"feePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"ticketId",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],name:"getPayAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTicketDetailList",outputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"dividendFeePoolRatio",type:"uint256"},{internalType:"uint256",name:"feePoolRatio",type:"uint256"},{internalType:"bool",name:"status",type:"bool"}],internalType:"struct TicketMall.TicketDetail[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idPosition",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"isOpen",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiveAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"ticketId",type:"uint256"}],name:"removeTicket",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feePool",type:"address"},{internalType:"address",name:"_dividendFeePool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"ticketDetails",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"dividendFeePoolRatio",type:"uint256"},{internalType:"uint256",name:"feePoolRatio",type:"uint256"},{internalType:"bool",name:"status",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"ticketId",type:"uint256"},{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"dividendFeePoolRatio",type:"uint256"},{internalType:"uint256",name:"feePoolRatio",type:"uint256"},{internalType:"bool",name:"status",type:"bool"}],internalType:"struct TicketMall.TicketDetail",name:"ticketDetail",type:"tuple"}],name:"updateTicketDetail",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.buySkillCard_ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"cardId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"count",type:"uint256"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"totalAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"receiveAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feePoolAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"dividendFeePoolAmount",type:"uint256"}],name:"BuySkillCard",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"dividendFeePoolRatio",type:"uint256"},{internalType:"uint256",name:"feePoolRatio",type:"uint256"},{internalType:"bool",name:"status",type:"bool"}],internalType:"struct SkillCardMall.SkillCardDetail[]",name:"cards",type:"tuple[]"}],name:"addSkillCard",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"pid",type:"uint256"},{internalType:"uint256",name:"cardId",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],name:"buySkillCard",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"dividendFeePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"feePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"cardId",type:"uint256"},{internalType:"uint256",name:"count",type:"uint256"}],name:"getPayAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSkillCardDetailList",outputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"dividendFeePoolRatio",type:"uint256"},{internalType:"uint256",name:"feePoolRatio",type:"uint256"},{internalType:"bool",name:"status",type:"bool"}],internalType:"struct SkillCardMall.SkillCardDetail[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idPosition",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"isOpen",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiveAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"cardId",type:"uint256"}],name:"removeSkillCard",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feePool",type:"address"},{internalType:"address",name:"_dividendFeePool",type:"address"}],name:"setPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"skillCardDetails",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"dividendFeePoolRatio",type:"uint256"},{internalType:"uint256",name:"feePoolRatio",type:"uint256"},{internalType:"bool",name:"status",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"cardId",type:"uint256"},{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"dividendFeePoolRatio",type:"uint256"},{internalType:"uint256",name:"feePoolRatio",type:"uint256"},{internalType:"bool",name:"status",type:"bool"}],internalType:"struct SkillCardMall.SkillCardDetail",name:"skillCardDetail",type:"tuple"}],name:"updateSkillCardDetail",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.rentNft_ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_days",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"bytes",name:"signature",type:"bytes"},{indexed:!1,internalType:"uint256",name:"receiveAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feePoolAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"dividendFeePoolAmount",type:"uint256"}],name:"Rent",type:"event"},{inputs:[],name:"dividendFeePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"feePool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"hasUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"hashList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"_days",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"ratios",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"dividendFeePoolRatio",type:"uint256"},{internalType:"uint256",name:"feePoolRatio",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"_days",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"rent",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"uint256",name:"dividendFeePoolRatio",type:"uint256"},{internalType:"uint256",name:"feePoolRatio",type:"uint256"}],internalType:"struct RentNFT.Ratio[]",name:"_ratios",type:"tuple[]"}],name:"setRatios",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_signer",type:"address"}],name:"setSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],oe.nodeWithdrawToken_ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"bytes",name:"signature",type:"bytes"}],name:"FeePoolWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"getBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"hasUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"hashList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"pid",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_signer",type:"address"}],name:"setSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"pid",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],oe.IGO_ADDRESS_TEST="0x81bCa019f388207FDb0C14459f46960FF4E75C17",oe.IGO_ADDRESS="0x3ea5fde901b691d6175fd559e8f11dfdb7effb9a",oe.IGO_ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Recharge",type:"event"},{inputs:[],name:"USD",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"deadline",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAmounts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getParentAccount",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getRecords",outputs:[{components:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct FodcIGO.Record[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"hashList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"inviterAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"inviter",type:"address"},{internalType:"uint256",name:"_deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"minAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"inviter",type:"address"},{internalType:"uint256",name:"_deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"recharge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalQuota",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],oe.SAT_ADDRESS="0x424CaA5beA9bDfeF9F49796D7C7005632fAbE2E8",oe.SAT_ABI=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAuthStatus",outputs:[{internalType:"bool",name:"",type:"bool"}],type:"function"}];var Ln=class{constructor(){this.coins={};this.needTip=!0}};var Co=class a{constructor(){this.create_contract=null;this.edit_account=null;this.account_contract=null;this.tokenId=0}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){typeof window.ethereum>"u"}async getAccountVoFromServer(){let t=await w.requestPost("cybertron-sys-api/api/v1/account/find",{address:K.instance.walletAddress},!1,!1);if(t){let e=new Ln;return Object.assign(e,t),console.log("info========"+JSON.stringify(e)),e}return t}async updateProfile(t,e,i){var n=v.instance.playerDto.sex,r=v.instance.playerDto;let s=await w.requestPost("wxgame/player/changeInfo",{name:t,sex:n,icon:e,country:i});return s?(r.icon=s.icon,r.country=s.country,r.name=s.name,r.sex=s.sex,r):null}async getTokenId(){return this.tokenId?this.tokenId:(this.tokenId=await this.account_contract.methods.tokenOfOwnerByIndex(K.instance.walletAddress,0).call(),this.tokenId=parseInt(this.tokenId+""),this.tokenId)}};function He(a,t,e){let i=a[t.name];if(typeof i=="function")return i;let n=a[e];return typeof n=="function"?n:r=>t(a,r)}xi();dt();var Im=class extends X{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}};ki();Za();Tc();Hr();As();Oo();var sT="/docs/contract/encodeEventTopics";function Tn(a){let{abi:t,eventName:e,args:i}=a,n=t[0];if(e){let l=wn({abi:t,name:e});if(!l)throw new gc(e,{docsPath:sT});n=l}if(n.type!=="event")throw new gc(void 0,{docsPath:sT});let r=Zi(n),s=Or(r),o=[];if(i&&"inputs"in n){let l=n.inputs?.filter(m=>"indexed"in m&&m.indexed),u=Array.isArray(i)?i:Object.values(i).length>0?l?.map(m=>i[m.name])??[]:[];u.length>0&&(o=l?.map((m,h)=>Array.isArray(u[h])?u[h].map((y,x)=>oT({param:m,value:u[h][x]})):typeof u[h]<"u"&&u[h]!==null?oT({param:m,value:u[h]}):null)??[])}return[s,...o]}function oT({param:a,value:t}){if(a.type==="string"||a.type==="bytes")return Kt(Sa(t));if(a.type==="tuple"||a.type.match(/^(.*)\[(\d+)?\]$/))throw new Im(a.type);return va([a],[t])}Je();function Ur(a,{method:t}){let e={};return a.transport.type==="fallback"&&a.transport.onResponse?.(({method:i,response:n,status:r,transport:s})=>{r==="success"&&t===i&&(e[n]=s.request)}),i=>e[i]||a.request}async function Gm(a,t){let{address:e,abi:i,args:n,eventName:r,fromBlock:s,strict:o,toBlock:l}=t,u=Ur(a,{method:"eth_newFilter"}),m=r?Tn({abi:i,args:n,eventName:r}):void 0,h=await a.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof s=="bigint"?Ue(s):s,toBlock:typeof l=="bigint"?Ue(l):l,topics:m}]});return{abi:i,args:n,eventName:r,id:h,request:u(h),strict:!!o,type:"event"}}Pi();ka();xi();dt();ir();Fs();Rc();var U2=3;function xa(a,{abi:t,address:e,args:i,docsPath:n,functionName:r,sender:s}){let o=a instanceof an?a:a instanceof X?a.walk(E=>"data"in E)||a.walk():{},{code:l,data:u,details:m,message:h,shortMessage:y}=o,x=(()=>a instanceof Ca?new Ac({functionName:r}):[U2,ar.code].includes(l)&&(u||m||h||y)?new $t({abi:t,data:typeof u=="object"?u.data:u,functionName:r,message:o instanceof Fr?m:y??h}):a)();return new kc(x,{abi:t,args:i,contractAddress:e,docsPath:n,functionName:r,sender:s})}Pi();dt();Rs();Za();function IT(a){let t=Kt(`0x${a.substring(4)}`).substring(26);return er(`0x${t}`)}qa();Gi();Je();async function sC({hash:a,signature:t}){let e=di(a)?a:Fe(a),{secp256k1:i}=await Promise.resolve().then(()=>(Eh(),nC));return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){let{r:u,s:m,v:h,yParity:y}=t,x=Number(y??h),E=rC(x);return new i.Signature(ei(u),ei(m)).addRecoveryBit(E)}let s=di(t)?t:Fe(t),o=bi(`0x${s.slice(130)}`),l=rC(o);return i.Signature.fromCompact(s.substring(2,130)).addRecoveryBit(l)})().recoverPublicKey(e.substring(2)).toHex(!1)}`}function rC(a){if(a===0||a===1)return a;if(a===27)return 0;if(a===28)return 1;throw new Error("Invalid yParityOrV value")}async function wh({hash:a,signature:t}){return IT(await sC({hash:a,signature:t}))}Da();ki();Je();dt();Km();ki();Je();function sn(a,t="hex"){let e=oC(a),i=Uo(new Uint8Array(e.length));return e.encode(i),t==="hex"?Et(i.bytes):i.bytes}function oC(a){return Array.isArray(a)?TA(a.map(t=>oC(t))):CA(a)}function TA(a){let t=a.reduce((n,r)=>n+r.length,0),e=lC(t);return{length:(()=>t<=55?1+t:1+e+t)(),encode(n){t<=55?n.pushByte(192+t):(n.pushByte(192+55+e),e===1?n.pushUint8(t):e===2?n.pushUint16(t):e===3?n.pushUint24(t):n.pushUint32(t));for(let{encode:r}of a)r(n)}}}function CA(a){let t=typeof a=="string"?Ii(a):a,e=lC(t.length);return{length:(()=>t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+e+t.length)(),encode(n){t.length===1&&t[0]<128?n.pushBytes(t):t.length<=55?(n.pushByte(128+t.length),n.pushBytes(t)):(n.pushByte(128+55+e),e===1?n.pushUint8(t.length):e===2?n.pushUint16(t.length):e===3?n.pushUint24(t.length):n.pushUint32(t.length),n.pushBytes(t))}}}function lC(a){if(a<2**8)return 1;if(a<2**16)return 2;if(a<2**24)return 3;if(a<2**32)return 4;throw new X("Length is too large.")}Za();function cC(a){let{chainId:t,contractAddress:e,nonce:i,to:n}=a,r=Kt(Wi(["0x05",sn([t?Ue(t):"0x",e,i?Ue(i):"0x"])]));return n==="bytes"?Ii(r):r}async function Th(a){let{authorization:t,signature:e}=a;return wh({hash:cC(t),signature:e??t})}Je();Jm();Go();dt();tn();var Ch=class extends X{constructor(t,{account:e,docsPath:i,chain:n,data:r,gas:s,gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:m,to:h,value:y}){let x=Os({from:e?.address,to:h,value:typeof y<"u"&&`${Vo(y)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:r,gas:s,gasPrice:typeof o<"u"&&`${Ei(o)} gwei`,maxFeePerGas:typeof l<"u"&&`${Ei(l)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Ei(u)} gwei`,nonce:m});super(t.shortMessage,{cause:t,docsPath:i,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",x].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}};Xr();Gc();function uC(a,{docsPath:t,...e}){let i=(()=>{let n=Qr(a,e);return n instanceof Ra?a:n})();return new Ch(i,{docsPath:t,...e})}Wc();Xs();Dh();Zr();Pi();Go();dt();var kh=class extends X{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},es=class extends X{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},Ah=class extends X{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Ei(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}};Gi();dt();var yl=class extends X{constructor({blockHash:t,blockNumber:e}){let i="Block";t&&(i=`Block at hash "${t}"`),e&&(i=`Block at number "${e}"`),super(`${i} could not be found.`,{name:"BlockNotFoundError"})}};Je();Sh();Gi();Sh();var PE={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Qs(a){let t={...a,blockHash:a.blockHash?a.blockHash:null,blockNumber:a.blockNumber?BigInt(a.blockNumber):null,chainId:a.chainId?bi(a.chainId):void 0,gas:a.gas?BigInt(a.gas):void 0,gasPrice:a.gasPrice?BigInt(a.gasPrice):void 0,maxFeePerBlobGas:a.maxFeePerBlobGas?BigInt(a.maxFeePerBlobGas):void 0,maxFeePerGas:a.maxFeePerGas?BigInt(a.maxFeePerGas):void 0,maxPriorityFeePerGas:a.maxPriorityFeePerGas?BigInt(a.maxPriorityFeePerGas):void 0,nonce:a.nonce?bi(a.nonce):void 0,to:a.to?a.to:null,transactionIndex:a.transactionIndex?Number(a.transactionIndex):null,type:a.type?PE[a.type]:void 0,typeHex:a.type?a.type:void 0,value:a.value?BigInt(a.value):void 0,v:a.v?BigInt(a.v):void 0};return a.authorizationList&&(t.authorizationList=AA(a.authorizationList)),t.yParity=(()=>{if(a.yParity)return Number(a.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}var mC=hl("transaction",Qs);function AA(a){return a.map(t=>({contractAddress:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function jc(a){let t=(a.transactions??[]).map(e=>typeof e=="string"?e:Qs(e));return{...a,baseFeePerGas:a.baseFeePerGas?BigInt(a.baseFeePerGas):null,blobGasUsed:a.blobGasUsed?BigInt(a.blobGasUsed):void 0,difficulty:a.difficulty?BigInt(a.difficulty):void 0,excessBlobGas:a.excessBlobGas?BigInt(a.excessBlobGas):void 0,gasLimit:a.gasLimit?BigInt(a.gasLimit):void 0,gasUsed:a.gasUsed?BigInt(a.gasUsed):void 0,hash:a.hash?a.hash:null,logsBloom:a.logsBloom?a.logsBloom:null,nonce:a.nonce?a.nonce:null,number:a.number?BigInt(a.number):null,size:a.size?BigInt(a.size):void 0,timestamp:a.timestamp?BigInt(a.timestamp):void 0,transactions:t,totalDifficulty:a.totalDifficulty?BigInt(a.totalDifficulty):null}}var hC=hl("block",jc);async function Ki(a,{blockHash:t,blockNumber:e,blockTag:i,includeTransactions:n}={}){let r=i??"latest",s=n??!1,o=e!==void 0?Ue(e):void 0,l=null;if(t?l=await a.request({method:"eth_getBlockByHash",params:[t,s]},{dedupe:!0}):l=await a.request({method:"eth_getBlockByNumber",params:[o||r,s]},{dedupe:!!o}),!l)throw new yl({blockHash:t,blockNumber:e});return(a.chain?.formatters?.block?.format||jc)(l)}async function bl(a){let t=await a.request({method:"eth_gasPrice"});return BigInt(t)}async function dC(a,t){return NE(a,t)}async function NE(a,t){let{block:e,chain:i=a.chain,request:n}=t||{};try{let r=i?.fees?.maxPriorityFeePerGas??i?.fees?.defaultPriorityFee;if(typeof r=="function"){let o=e||await He(a,Ki,"getBlock")({}),l=await r({block:o,client:a,request:n});if(l===null)throw new Error;return l}if(typeof r<"u")return r;let s=await a.request({method:"eth_maxPriorityFeePerGas"});return ei(s)}catch{let[r,s]=await Promise.all([e?Promise.resolve(e):He(a,Ki,"getBlock")({}),He(a,bl,"getGasPrice")({})]);if(typeof r.baseFeePerGas!="bigint")throw new es;let o=s-r.baseFeePerGas;return o<0n?0n:o}}async function fC(a,t){return Mh(a,t)}async function Mh(a,t){let{block:e,chain:i=a.chain,request:n,type:r="eip1559"}=t||{},s=await(async()=>typeof i?.fees?.baseFeeMultiplier=="function"?i.fees.baseFeeMultiplier({block:e,client:a,request:n}):i?.fees?.baseFeeMultiplier??1.2)();if(s<1)throw new kh;let l=10**(s.toString().split(".")[1]?.length??0),u=y=>y*BigInt(Math.ceil(s*l))/BigInt(l),m=e||await He(a,Ki,"getBlock")({});if(typeof i?.fees?.estimateFeesPerGas=="function"){let y=await i.fees.estimateFeesPerGas({block:e,client:a,multiply:u,request:n,type:r});if(y!==null)return y}if(r==="eip1559"){if(typeof m.baseFeePerGas!="bigint")throw new es;let y=typeof n?.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:await NE(a,{block:m,chain:i,request:n}),x=u(m.baseFeePerGas);return{maxFeePerGas:n?.maxFeePerGas??x+y,maxPriorityFeePerGas:y}}return{gasPrice:n?.gasPrice??u(await He(a,bl,"getGasPrice")({}))}}Gi();Je();async function Bh(a,{address:t,blockTag:e="latest",blockNumber:i}){let n=await a.request({method:"eth_getTransactionCount",params:[t,i?Ue(i):e]},{dedupe:!!i});return bi(n)}ki();Je();function gl(a){let{kzg:t}=a,e=a.to??(typeof a.blobs[0]=="string"?"hex":"bytes"),i=typeof a.blobs[0]=="string"?a.blobs.map(r=>Ii(r)):a.blobs,n=[];for(let r of i)n.push(Uint8Array.from(t.blobToKzgCommitment(r)));return e==="bytes"?n:n.map(r=>Et(r))}ki();Je();function _l(a){let{kzg:t}=a,e=a.to??(typeof a.blobs[0]=="string"?"hex":"bytes"),i=typeof a.blobs[0]=="string"?a.blobs.map(s=>Ii(s)):a.blobs,n=typeof a.commitments[0]=="string"?a.commitments.map(s=>Ii(s)):a.commitments,r=[];for(let s=0;s<i.length;s++){let o=i[s],l=n[s];r.push(Uint8Array.from(t.computeBlobKzgProof(o,l)))}return e==="bytes"?r:r.map(s=>Et(s))}Je();pE();qa();ki();Je();function yC(a,t){let e=t||"hex",i=Ws(di(a,{strict:!1})?Sa(a):a);return e==="bytes"?i:Fe(i)}function bC(a){let{commitment:t,version:e=1}=a,i=a.to??(typeof t=="string"?"hex":"bytes"),n=yC(t,"bytes");return n.set([e],0),i==="bytes"?n:Et(n)}function Rh(a){let{commitments:t,version:e}=a,i=a.to??(typeof t[0]=="string"?"hex":"bytes"),n=[];for(let r of t)n.push(bC({commitment:r,to:i,version:e}));return n}dt();var Ph=class extends X{constructor({maxSize:t,size:e}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${e} bytes`],name:"BlobSizeTooLargeError"})}},Ll=class extends X{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}},Nh=class extends X{constructor({hash:t,size:e}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${e}`],name:"InvalidVersionedHashSizeError"})}},Oh=class extends X{constructor({hash:t,version:e}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${1}`,`Received: ${e}`],name:"InvalidVersionedHashVersionError"})}};Km();Ya();ki();Je();function gC(a){let t=a.to??(typeof a.data=="string"?"hex":"bytes"),e=typeof a.data=="string"?Ii(a.data):a.data,i=Dt(e);if(!i)throw new Ll;if(i>761855)throw new Ph({maxSize:761855,size:i});let n=[],r=!0,s=0;for(;r;){let o=Uo(new Uint8Array(131072)),l=0;for(;l<4096;){let u=e.slice(s,s+(32-1));if(o.pushByte(0),o.pushBytes(u),u.length<31){o.pushByte(128),r=!1;break}l++,s+=31}n.push(o)}return t==="bytes"?n.map(o=>o.bytes):n.map(o=>Et(o.bytes))}function Hh(a){let{data:t,kzg:e,to:i}=a,n=a.blobs??gC({data:t,to:i}),r=a.commitments??gl({blobs:n,kzg:e,to:i}),s=a.proofs??_l({blobs:n,commitments:r,kzg:e,to:i}),o=[];for(let l=0;l<n.length;l++)o.push({blob:n[l],commitment:r[l],proof:s[l]});return o}Zr();tn();function Uh(a){if(a.type)return a.type;if(typeof a.authorizationList<"u")return"eip7702";if(typeof a.blobs<"u"||typeof a.blobVersionedHashes<"u"||typeof a.maxFeePerBlobGas<"u"||typeof a.sidecars<"u")return"eip4844";if(typeof a.maxFeePerGas<"u"||typeof a.maxPriorityFeePerGas<"u")return"eip1559";if(typeof a.gasPrice<"u")return typeof a.accessList<"u"?"eip2930":"legacy";throw new ah({transaction:a})}Gi();async function Mn(a){let t=await a.request({method:"eth_chainId"},{dedupe:!0});return bi(t)}var OE=["blobVersionedHashes","chainId","fees","gas","nonce","type"],_C=new Map;async function ts(a,t){let{account:e=a.account,blobs:i,chain:n,gas:r,kzg:s,nonce:o,nonceManager:l,parameters:u=OE,type:m}=t,h=e&&kt(e),y={...t,...h?{from:h?.address}:{}},x;async function E(){return x||(x=await He(a,Ki,"getBlock")({blockTag:"latest"}),x)}let S;async function T(){return S||(n?n.id:typeof t.chainId<"u"?t.chainId:(S=await He(a,Mn,"getChainId")({}),S))}if(u.includes("nonce")&&typeof o>"u"&&h)if(l){let N=await T();y.nonce=await l.consume({address:h.address,chainId:N,client:a})}else y.nonce=await He(a,Bh,"getTransactionCount")({address:h.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&i&&s){let N=gl({blobs:i,kzg:s});if(u.includes("blobVersionedHashes")){let F=Rh({commitments:N,to:"hex"});y.blobVersionedHashes=F}if(u.includes("sidecars")){let F=_l({blobs:i,commitments:N,kzg:s}),G=Hh({blobs:i,commitments:N,proofs:F,to:"hex"});y.sidecars=G}}if(u.includes("chainId")&&(y.chainId=await T()),(u.includes("fees")||u.includes("type"))&&typeof m>"u")try{y.type=Uh(y)}catch{let N=_C.get(a.uid);typeof N>"u"&&(N=typeof(await E())?.baseFeePerGas=="bigint",_C.set(a.uid,N)),y.type=N?"eip1559":"legacy"}if(u.includes("fees"))if(y.type!=="legacy"&&y.type!=="eip2930"){if(typeof y.maxFeePerGas>"u"||typeof y.maxPriorityFeePerGas>"u"){let N=await E(),{maxFeePerGas:F,maxPriorityFeePerGas:G}=await Mh(a,{block:N,chain:n,request:y});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<G)throw new Ah({maxPriorityFeePerGas:G});y.maxPriorityFeePerGas=G,y.maxFeePerGas=F}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new es;if(typeof t.gasPrice>"u"){let N=await E(),{gasPrice:F}=await Mh(a,{block:N,chain:n,request:y,type:"legacy"});y.gasPrice=F}}return u.includes("gas")&&typeof r>"u"&&(y.gas=await He(a,vl,"estimateGas")({...y,account:h&&{address:h.address,type:"json-rpc"}})),ua(y),delete y.parameters,y}Je();async function Fh(a,{address:t,blockNumber:e,blockTag:i="latest"}){let n=e?Ue(e):void 0,r=await a.request({method:"eth_getBalance",params:[t,n||i]});return BigInt(r)}async function vl(a,t){let{account:e=a.account}=t,i=e?kt(e):void 0;try{let te=function(me){let{block:ke,request:Me,rpcStateOverride:V}=me;return a.request({method:"eth_estimateGas",params:V?[Me,ke??"latest",V]:ke?[Me,ke]:[Me]})};var n=te;let{accessList:r,authorizationList:s,blobs:o,blobVersionedHashes:l,blockNumber:u,blockTag:m,data:h,gas:y,gasPrice:x,maxFeePerBlobGas:E,maxFeePerGas:S,maxPriorityFeePerGas:T,nonce:N,value:F,stateOverride:G,...Y}=await ts(a,{...t,parameters:i?.type==="local"?void 0:["blobVersionedHashes"]}),ne=(u?Ue(u):void 0)||m,J=dl(G),ue=await(async()=>{if(Y.to)return Y.to;if(s&&s.length>0)return await Th({authorization:s[0]}).catch(()=>{throw new X("`to` is required. Could not infer from `authorizationList`")})})();ua(t);let se=a.chain?.formatters?.transactionRequest?.format,Ce=(se||Pa)({...Jr(Y,{format:se}),from:i?.address,accessList:r,authorizationList:s,blobs:o,blobVersionedHashes:l,data:h,gas:y,gasPrice:x,maxFeePerBlobGas:E,maxFeePerGas:S,maxPriorityFeePerGas:T,nonce:N,to:ue,value:F}),et=BigInt(await te({block:ne,request:Ce,rpcStateOverride:J}));if(s){let me=await Fh(a,{address:Ce.from}),ke=await Promise.all(s.map(async Me=>{let{contractAddress:V}=Me,Ye=await te({block:ne,request:{authorizationList:void 0,data:h,from:i?.address,to:V,value:Ue(me)},rpcStateOverride:J}).catch(()=>100000n);return 2n*BigInt(Ye)}));et+=ke.reduce((Me,V)=>Me+V,0n)}return et}catch(r){throw uC(r,{...t,account:i,chain:a.chain})}}async function LC(a,t){let{abi:e,address:i,args:n,functionName:r,dataSuffix:s,...o}=t,l=ti({abi:e,args:n,functionName:r});try{return await He(a,vl,"estimateGas")({data:`${l}${s?s.replace("0x",""):""}`,to:i,...o})}catch(u){let m=o.account?kt(o.account):void 0;throw xa(u,{abi:e,address:i,args:n,docsPath:"/docs/contract/estimateContractGas",functionName:r,sender:m?.address})}}Oo();xi();zc();ki();Za();Tc();xi();Ya();Tc();rE();qm();As();var vC="/docs/contract/decodeEventLog";function xl(a){let{abi:t,data:e,strict:i,topics:n}=a,r=i??!0,[s,...o]=n;if(!s)throw new ym({docsPath:vC});let l=(()=>t.length===1?t[0]:t.find(S=>S.type==="event"&&s===Or(Zi(S))))();if(!(l&&"name"in l)||l.type!=="event")throw new Bo(s,{docsPath:vC});let{name:u,inputs:m}=l,h=m?.some(S=>!("name"in S&&S.name)),y=h?[]:{},x=m.filter(S=>"indexed"in S&&S.indexed);for(let S=0;S<x.length;S++){let T=x[S],N=o[S];if(!N)throw new xn({abiItem:l,param:T});y[h?S:T.name||S]=RA({param:T,value:N})}let E=m.filter(S=>!("indexed"in S&&S.indexed));if(E.length>0){if(e&&e!=="0x")try{let S=Ns(E,e);if(S)if(h)y=[...y,...S];else for(let T=0;T<E.length;T++)y[E[T].name]=S[T]}catch(S){if(r)throw S instanceof Ao||S instanceof Ho?new $a({abiItem:l,data:e,params:E,size:Dt(e)}):S}else if(r)throw new $a({abiItem:l,data:"0x",params:E,size:0})}return{eventName:u,args:Object.values(y).length>0?y:void 0}}function RA({param:a,value:t}){return a.type==="string"||a.type==="bytes"||a.type==="tuple"||a.type.match(/^(.*)\[(\d+)?\]$/)?t:(Ns([a],t)||[])[0]}function Il(a){let{abi:t,args:e,logs:i,strict:n=!0}=a,r=(()=>{if(a.eventName)return Array.isArray(a.eventName)?a.eventName:[a.eventName]})();return i.map(s=>{try{let o=t.find(u=>u.type==="event"&&s.topics[0]===Or(u));if(!o)return null;let l=xl({...s,abi:[o],strict:n});return r&&!r.includes(l.eventName)||!PA({args:l.args,inputs:o.inputs,matchArgs:e})?null:{...l,...s}}catch(o){let l,u;if(o instanceof Bo)return null;if(o instanceof $a||o instanceof xn){if(n)return null;l=o.abiItem.name,u=o.abiItem.inputs?.some(m=>!("name"in m&&m.name))}return{...s,args:u?[]:{},eventName:l}}}).filter(Boolean)}function PA(a){let{args:t,inputs:e,matchArgs:i}=a;if(!i)return!0;if(!t)return!1;function n(r,s,o){try{return r.type==="address"?is(s,o):r.type==="string"||r.type==="bytes"?Kt(Sa(s))===o:s===o}catch{return!1}}return Array.isArray(t)&&Array.isArray(i)?i.every((r,s)=>{if(r==null)return!0;let o=e[s];return o?(Array.isArray(r)?r:[r]).some(u=>n(o,u,t[s])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof i=="object"&&!Array.isArray(i)?Object.entries(i).every(([r,s])=>{if(s==null)return!0;let o=e.find(u=>u.name===r);return o?(Array.isArray(s)?s:[s]).some(u=>n(o,u,t[r])):!1}):!1}Je();function qi(a,{args:t,eventName:e}={}){return{...a,blockHash:a.blockHash?a.blockHash:null,blockNumber:a.blockNumber?BigInt(a.blockNumber):null,logIndex:a.logIndex?Number(a.logIndex):null,transactionHash:a.transactionHash?a.transactionHash:null,transactionIndex:a.transactionIndex?Number(a.transactionIndex):null,...e?{args:t,eventName:e}:{}}}async function El(a,{address:t,blockHash:e,fromBlock:i,toBlock:n,event:r,events:s,args:o,strict:l}={}){let u=l??!1,m=s??(r?[r]:void 0),h=[];m&&(h=[m.flatMap(S=>Tn({abi:[S],eventName:S.name,args:s?void 0:o}))],r&&(h=h[0]));let y;e?y=await a.request({method:"eth_getLogs",params:[{address:t,topics:h,blockHash:e}]}):y=await a.request({method:"eth_getLogs",params:[{address:t,topics:h,fromBlock:typeof i=="bigint"?Ue(i):i,toBlock:typeof n=="bigint"?Ue(n):n}]});let x=y.map(E=>qi(E));return m?Il({abi:m,args:o,logs:x,strict:u}):x}async function Vh(a,t){let{abi:e,address:i,args:n,blockHash:r,eventName:s,fromBlock:o,toBlock:l,strict:u}=t,m=s?wn({abi:e,name:s}):void 0,h=m?void 0:e.filter(y=>y.type==="event");return He(a,El,"getLogs")({address:i,args:n,blockHash:r,event:m,events:h,fromBlock:o,toBlock:l,strict:u})}as();ka();wl();async function Ni(a,t){let{abi:e,address:i,args:n,functionName:r,...s}=t,o=ti({abi:e,args:n,functionName:r});try{let{data:l}=await He(a,Bn,"call")({...s,data:o,to:i});return pa({abi:e,args:n,functionName:r,data:l||"0x"})}catch(l){throw xa(l,{abi:e,address:i,args:n,docsPath:"/docs/contract/readContract",functionName:r})}}Pi();as();ka();wl();async function BC(a,t){let{abi:e,address:i,args:n,dataSuffix:r,functionName:s,...o}=t,l=o.account?kt(o.account):a.account,u=ti({abi:e,args:n,functionName:s});try{let{data:m}=await He(a,Bn,"call")({batch:!1,data:`${u}${r?r.replace("0x",""):""}`,to:i,...o,account:l}),h=pa({abi:e,args:n,functionName:s,data:m||"0x"}),y=e.filter(x=>"name"in x&&x.name===t.functionName);return{result:h,request:{abi:y,address:i,args:n,dataSuffix:r,functionName:s,...o,account:l}}}catch(m){throw xa(m,{abi:e,address:i,args:n,docsPath:"/docs/contract/simulateContract",functionName:s,sender:l?.address})}}xi();Rc();var qE=new Map,RC=new Map,WA=0;function ma(a,t,e){let i=++WA,n=()=>qE.get(a)||[],r=()=>{let m=n();qE.set(a,m.filter(h=>h.id!==i))},s=()=>{let m=n();if(!m.some(y=>y.id===i))return;let h=RC.get(a);m.length===1&&h&&h(),r()},o=n();if(qE.set(a,[...o,{id:i,fns:t}]),o&&o.length>0)return s;let l={};for(let m in t)l[m]=(...h)=>{let y=n();if(y.length!==0)for(let x of y)x.fns[m]?.(...h)};let u=e(l);return typeof u=="function"&&RC.set(a,u),s}async function $c(a){return new Promise(t=>setTimeout(t,a))}function Rn(a,{emitOnBegin:t,initialWaitTime:e,interval:i}){let n=!0,r=()=>n=!1;return(async()=>{let o;t&&(o=await a({unpoll:r}));let l=await e?.(o)??i;await $c(l);let u=async()=>{n&&(await a({unpoll:r}),await $c(i),u())};u()})(),r}ta();var jA=new Map,zA=new Map;function PC(a){let t=(n,r)=>({clear:()=>r.delete(n),get:()=>r.get(n),set:s=>r.set(n,s)}),e=t(a,jA),i=t(a,zA);return{clear:()=>{e.clear(),i.clear()},promise:e,response:i}}async function NC(a,{cacheKey:t,cacheTime:e=Number.POSITIVE_INFINITY}){let i=PC(t),n=i.response.get();if(n&&e>0&&new Date().getTime()-n.created.getTime()<e)return n.data;let r=i.promise.get();r||(r=a(),i.promise.set(r));try{let s=await r;return i.response.set({created:new Date,data:s}),s}finally{i.promise.clear()}}var KA=a=>`blockNumber.${a}`;async function Pn(a,{cacheTime:t=a.cacheTime}={}){let e=await NC(()=>a.request({method:"eth_blockNumber"}),{cacheKey:KA(a.uid),cacheTime:t});return BigInt(e)}async function ns(a,{filter:t}){let e="strict"in t&&t.strict,i=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof i[0]=="string")return i;let n=i.map(r=>qi(r));return!("abi"in t)||!t.abi?n:Il({abi:t.abi,logs:n,strict:e})}async function rs(a,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function OC(a,t){let{abi:e,address:i,args:n,batch:r=!0,eventName:s,fromBlock:o,onError:l,onLogs:u,poll:m,pollingInterval:h=a.pollingInterval,strict:y}=t;return(()=>typeof m<"u"?m:typeof o=="bigint"?!0:!(a.transport.type==="webSocket"||a.transport.type==="fallback"&&a.transport.transports[0].config.type==="webSocket"))()?(()=>{let T=y??!1,N=wt(["watchContractEvent",i,n,r,a.uid,s,h,T,o]);return ma(N,{onLogs:u,onError:l},F=>{let G;o!==void 0&&(G=o-1n);let Y,Z=!1,ne=Rn(async()=>{if(!Z){try{Y=await He(a,Gm,"createContractEventFilter")({abi:e,address:i,args:n,eventName:s,strict:T,fromBlock:o})}catch{}Z=!0;return}try{let J;if(Y)J=await He(a,ns,"getFilterChanges")({filter:Y});else{let ue=await He(a,Pn,"getBlockNumber")({});G&&G<ue?J=await He(a,Vh,"getContractEvents")({abi:e,address:i,args:n,eventName:s,fromBlock:G+1n,toBlock:ue,strict:T}):J=[],G=ue}if(J.length===0)return;if(r)F.onLogs(J);else for(let ue of J)F.onLogs([ue])}catch(J){Y&&J instanceof Sn&&(Z=!1),F.onError?.(J)}},{emitOnBegin:!0,interval:h});return async()=>{Y&&await He(a,rs,"uninstallFilter")({filter:Y}),ne()}})})():(()=>{let T=y??!1,N=wt(["watchContractEvent",i,n,r,a.uid,s,h,T]),F=!0,G=()=>F=!1;return ma(N,{onLogs:u,onError:l},Y=>((async()=>{try{let Z=(()=>{if(a.transport.type==="fallback"){let ue=a.transport.transports.find(se=>se.config.type==="webSocket");return ue?ue.value:a.transport}return a.transport})(),ne=s?Tn({abi:e,eventName:s,args:n}):[],{unsubscribe:J}=await Z.subscribe({params:["logs",{address:i,topics:ne}],onData(ue){if(!F)return;let se=ue.result;try{let{eventName:Ie,args:Ce}=xl({abi:e,data:se.data,topics:se.topics,strict:y}),te=qi(se,{args:Ce,eventName:Ie});Y.onLogs([te])}catch(Ie){let Ce,te;if(Ie instanceof $a||Ie instanceof xn){if(y)return;Ce=Ie.abiItem.name,te=Ie.abiItem.inputs?.some(me=>!("name"in me&&me.name))}let et=qi(se,{args:te?[]:{},eventName:Ce});Y.onLogs([et])}},onError(ue){Y.onError?.(ue)}});G=J,F||G()}catch(Z){l?.(Z)}})(),()=>G()))})()}Pi();dt();var Oa=class extends X{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}},Tl=class extends X{constructor({docsPath:t,metaMessages:e,type:i}){super(`Account type "${i}" is not supported.`,{docsPath:t,metaMessages:e,name:"AccountTypeNotSupportedError"})}};ka();Pi();dt();Yc();function ed({chain:a,currentChainId:t}){if(!a)throw new Kh;if(t!==a.id)throw new zh({chain:a,currentChainId:t})}Xr();tn();Gc();function HC(a,{docsPath:t,...e}){let i=(()=>{let n=Qr(a,e);return n instanceof Ra?a:n})();return new rh(i,{docsPath:t,...e})}Wc();Xs();Cc();Zr();async function Cl(a,{serializedTransaction:t}){return a.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}var YE=new En(128);async function Sl(a,t){let{account:e=a.account,chain:i=a.chain,accessList:n,authorizationList:r,blobs:s,data:o,gas:l,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:h,maxPriorityFeePerGas:y,nonce:x,value:E,...S}=t;if(typeof e>"u")throw new Oa({docsPath:"/docs/actions/wallet/sendTransaction"});let T=e?kt(e):null;try{ua(t);let N=await(async()=>{if(t.to)return t.to;if(t.to!==null&&r&&r.length>0)return await Th({authorization:r[0]}).catch(()=>{throw new X("`to` is required. Could not infer from `authorizationList`.")})})();if(T?.type==="json-rpc"||T===null){let F;i!==null&&(F=await He(a,Mn,"getChainId")({}),ed({currentChainId:F,chain:i}));let G=a.chain?.formatters?.transactionRequest?.format,Z=(G||Pa)({...Jr(S,{format:G}),accessList:n,authorizationList:r,blobs:s,chainId:F,data:o,from:T?.address,gas:l,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:h,maxPriorityFeePerGas:y,nonce:x,to:N,value:E}),ne=YE.get(a.uid),J=ne?"wallet_sendTransaction":"eth_sendTransaction";try{return await a.request({method:J,params:[Z]},{retryCount:0})}catch(ue){if(ne===!1)throw ue;let se=ue;if(se.name==="InvalidInputRpcError"||se.name==="InvalidParamsRpcError"||se.name==="MethodNotFoundRpcError"||se.name==="MethodNotSupportedRpcError")return await a.request({method:"wallet_sendTransaction",params:[Z]},{retryCount:0}).then(Ie=>(YE.set(a.uid,!0),Ie)).catch(Ie=>{let Ce=Ie;throw Ce.name==="MethodNotFoundRpcError"||Ce.name==="MethodNotSupportedRpcError"?(YE.set(a.uid,!1),se):Ce});throw se}}if(T?.type==="local"){let F=await He(a,ts,"prepareTransactionRequest")({account:T,accessList:n,authorizationList:r,blobs:s,chain:i,data:o,gas:l,gasPrice:u,maxFeePerBlobGas:m,maxFeePerGas:h,maxPriorityFeePerGas:y,nonce:x,nonceManager:T.nonceManager,parameters:[...OE,"sidecars"],value:E,...S,to:N}),G=i?.serializers?.transaction,Y=await T.signTransaction(F,{serializer:G});return await He(a,Cl,"sendRawTransaction")({serializedTransaction:Y})}throw T?.type==="smart"?new Tl({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Tl({docsPath:"/docs/actions/wallet/sendTransaction",type:T?.type})}catch(N){throw N instanceof Tl?N:HC(N,{...t,account:T,chain:t.chain||void 0})}}async function UC(a,t){let{abi:e,account:i=a.account,address:n,args:r,dataSuffix:s,functionName:o,...l}=t;if(typeof i>"u")throw new Oa({docsPath:"/docs/contract/writeContract"});let u=i?kt(i):null,m=ti({abi:e,args:r,functionName:o});try{return await He(a,Sl,"sendTransaction")({data:`${m}${s?s.replace("0x",""):""}`,to:n,account:u,...l})}catch(h){throw xa(h,{abi:e,address:n,args:r,docsPath:"/docs/contract/writeContract",functionName:o,sender:u?.address})}}dt();var td=class extends X{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}};async function FC(a,t){let{address:e,factory:i,factoryData:n}=t;try{let[r,s,o,l,u,m,h]=await He(a,Ni,"readContract")({abi:qA,address:e,functionName:"eip712Domain",factory:i,factoryData:n});return{domain:{name:s,version:o,chainId:Number(l),verifyingContract:u,salt:m},extensions:h,fields:r}}catch(r){let s=r;throw s.name==="ContractFunctionExecutionError"&&s.cause.name==="ContractFunctionZeroDataError"?new td({address:e}):s}}var qA=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];Je();async function VC(a,{chain:t}){let{id:e,name:i,nativeCurrency:n,rpcUrls:r,blockExplorers:s}=t;await a.request({method:"wallet_addEthereumChain",params:[{chainId:Ue(e),chainName:i,nativeCurrency:n,rpcUrls:r.default.http,blockExplorerUrls:s?Object.values(s).map(({url:o})=>o):void 0}]},{dedupe:!0,retryCount:0})}Pi();var id=256,ad;function nd(a=11){if(!ad||id+a>256*2){ad="",id=0;for(let t=0;t<256;t++)ad+=(256+Math.random()*256|0).toString(16).substring(1)}return ad.substring(id,id+++a)}function rd(a){let{batch:t,cacheTime:e=a.pollingInterval??4e3,ccipRead:i,key:n="base",name:r="Base Client",pollingInterval:s=4e3,type:o="base"}=a,l=a.chain,u=a.account?kt(a.account):void 0,{config:m,request:h,value:y}=a.transport({chain:l,pollingInterval:s}),x={...m,...y},E={account:u,batch:t,cacheTime:e,ccipRead:i,chain:l,key:n,name:r,pollingInterval:s,request:h,transport:x,type:o,uid:nd()};function S(T){return N=>{let F=N(T);for(let Y in E)delete F[Y];let G={...T,...F};return Object.assign(G,{extend:S(G)})}}return Object.assign(E,{extend:S(E)})}dt();Fs();Rc();Je();Cc();var sd=new En(8192);function GC(a,{enabled:t=!0,id:e}){if(!t||!e)return a();if(sd.get(e))return sd.get(e);let i=a().finally(()=>sd.delete(e));return sd.set(e,i),i}function Xc(a,{delay:t=100,retryCount:e=2,shouldRetry:i=()=>!0}={}){return new Promise((n,r)=>{let s=async({count:o=0}={})=>{let l=async({error:u})=>{let m=typeof t=="function"?t({count:o,error:u}):t;m&&await $c(m),s({count:o+1})};try{let u=await a();n(u)}catch(u){if(o<e&&await i({count:o,error:u}))return l({error:u});r(u)}};s()})}ta();function WC(a,t={}){return async(e,i={})=>{let{dedupe:n=!1,methods:r,retryDelay:s=150,retryCount:o=3,uid:l}={...t,...i},{method:u}=e;if(r?.exclude?.includes(u))throw new Gr(new Error("method not supported"),{method:u});if(r?.include&&!r.include.includes(u))throw new Gr(new Error("method not supported"),{method:u});let m=n?Xa(`${l}.${wt(e)}`):void 0;return GC(()=>Xc(async()=>{try{return await a(e)}catch(h){let y=h;switch(y.code){case zo.code:throw new zo(y);case Ko.code:throw new Ko(y);case qo.code:throw new qo(y,{method:e.method});case Yo.code:throw new Yo(y);case ar.code:throw new ar(y);case Sn.code:throw new Sn(y);case $o.code:throw new $o(y);case Xo.code:throw new Xo(y);case Qo.code:throw new Qo(y);case Gr.code:throw new Gr(y,{method:e.method});case Vs.code:throw new Vs(y);case Jo.code:throw new Jo(y);case Gs.code:throw new Gs(y);case Zo.code:throw new Zo(y);case el.code:throw new el(y);case tl.code:throw new tl(y);case il.code:throw new il(y);case al.code:throw new al(y);case 5e3:throw new Gs(y);default:throw h instanceof X?h:new lh(y)}}},{delay:({count:h,error:y})=>{if(y&&y instanceof Aa){let x=y?.headers?.get("Retry-After");if(x?.match(/\d/))return Number.parseInt(x)*1e3}return~~(1<<h)*s},retryCount:o,shouldRetry:({error:h})=>YA(h)}),{enabled:n,id:m})}}function YA(a){return"code"in a&&typeof a.code=="number"?a.code===-1||a.code===Vs.code||a.code===ar.code:a instanceof Aa&&a.status?a.status===403||a.status===408||a.status===413||a.status===429||a.status===500||a.status===502||a.status===503||a.status===504:!0}function od({key:a,methods:t,name:e,request:i,retryCount:n=3,retryDelay:r=150,timeout:s,type:o},l){let u=nd();return{config:{key:a,methods:t,name:e,request:i,retryCount:n,retryDelay:r,timeout:s,type:o},request:WC(i,{methods:t,retryCount:n,retryDelay:r,uid:u}),value:l}}function Dl(a,t={}){let{key:e="custom",methods:i,name:n="Custom Provider",retryDelay:r}=t;return({retryCount:s})=>od({key:e,methods:i,name:n,request:a.request.bind(a),retryCount:t.retryCount??s,retryDelay:r,type:"custom"})}Fs();dt();var ld=class extends X{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};KE();Fs();function jC(a,{errorInstance:t=new Error("timed out"),timeout:e,signal:i}){return new Promise((n,r)=>{(async()=>{let s;try{let o=new AbortController;e>0&&(s=setTimeout(()=>{i?o.abort():r(t)},e)),n(await a({signal:o?.signal||null}))}catch(o){o?.name==="AbortError"&&r(t),r(o)}finally{clearTimeout(s)}})()})}ta();function $A(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var $E=$A();function zC(a,t={}){return{async request(e){let{body:i,onRequest:n=t.onRequest,onResponse:r=t.onResponse,timeout:s=t.timeout??1e4}=e,o={...t.fetchOptions??{},...e.fetchOptions??{}},{headers:l,method:u,signal:m}=o;try{let h=await jC(async({signal:x})=>{let E={...o,body:Array.isArray(i)?wt(i.map(F=>({jsonrpc:"2.0",id:F.id??$E.take(),...F}))):wt({jsonrpc:"2.0",id:i.id??$E.take(),...i}),headers:{"Content-Type":"application/json",...l},method:u||"POST",signal:m||(s>0?x:null)},S=new Request(a,E),T=await n?.(S,E)??{...E,url:a};return await fetch(T.url??a,T)},{errorInstance:new Bc({body:i,url:a}),timeout:s,signal:!0});r&&await r(h);let y;if(h.headers.get("Content-Type")?.startsWith("application/json"))y=await h.json();else{y=await h.text();try{y=JSON.parse(y||"{}")}catch(x){if(h.ok)throw x;y={error:y}}}if(!h.ok)throw new Aa({body:i,details:wt(y.error)||h.statusText,headers:h.headers,status:h.status,url:a});return y}catch(h){throw h instanceof Aa||h instanceof Bc?h:new Aa({body:i,cause:h,url:a})}}}}function Qc(a,t={}){let{batch:e,fetchOptions:i,key:n="http",methods:r,name:s="HTTP JSON-RPC",onFetchRequest:o,onFetchResponse:l,retryDelay:u,raw:m}=t;return({chain:h,retryCount:y,timeout:x})=>{let{batchSize:E=1e3,wait:S=0}=typeof e=="object"?e:{},T=t.retryCount??y,N=x??t.timeout??1e4,F=a||h?.rpcUrls.default.http[0];if(!F)throw new ld;let G=zC(F,{fetchOptions:i,onRequest:o,onResponse:l,timeout:N});return od({key:n,methods:r,name:s,async request({method:Y,params:Z}){let ne={method:Y,params:Z},{schedule:J}=Xh({id:F,wait:S,shouldSplitBatch(Ce){return Ce.length>E},fn:Ce=>G.request({body:Ce}),sort:(Ce,te)=>Ce.id-te.id}),ue=async Ce=>e?J(Ce):[await G.request({body:Ce})],[{error:se,result:Ie}]=await ue(ne);if(m)return{error:se,result:Ie};if(se)throw new Fr({body:ne,error:se,url:F});return Ie},retryCount:T,retryDelay:u,timeout:N,type:"http"},{fetchOptions:i,url:F})}}Js();as();ka();io();Po();Je();jm();dt();ir();function kl(a,t){if(!(a instanceof X))return!1;let e=a.walk(i=>i instanceof $t);return e instanceof $t?!!(e.data?.errorName==="ResolverNotFound"||e.data?.errorName==="ResolverWildcardNotSupported"||e.data?.errorName==="ResolverNotContract"||e.data?.errorName==="ResolverError"||e.data?.errorName==="HttpError"||e.reason?.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&e.reason===Wm[50]):!1}Da();ki();Je();Za();qa();function cd(a){if(a.length!==66||a.indexOf("[")!==0||a.indexOf("]")!==65)return null;let t=`0x${a.slice(1,65)}`;return di(t)?t:null}function Al(a){let t=new Uint8Array(32).fill(0);if(!a)return Et(t);let e=a.split(".");for(let i=e.length-1;i>=0;i-=1){let n=cd(e[i]),r=n?Sa(n):Kt(Qa(e[i]),"bytes");t=Kt(ea([t,r]),"bytes")}return Et(t)}ki();function KC(a){return`[${a.slice(2)}]`}ki();Je();Za();function qC(a){let t=new Uint8Array(32).fill(0);return a?cd(a)||Kt(Qa(a)):Et(t)}function ss(a){let t=a.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);let e=new Uint8Array(Qa(t).byteLength+2),i=0,n=t.split(".");for(let r=0;r<n.length;r++){let s=Qa(n[r]);s.byteLength>255&&(s=Qa(KC(qC(n[r])))),e[i]=s.length,e.set(s,i+1),i+=s.length+1}return e.byteLength!==i+1?e.slice(0,i+1):e}async function YC(a,{blockNumber:t,blockTag:e,coinType:i,name:n,gatewayUrls:r,strict:s,universalResolverAddress:o}){let l=o;if(!l){if(!a.chain)throw new Error("client chain not configured. universalResolverAddress is required.");l=Na({blockNumber:t,chain:a.chain,contract:"ensUniversalResolver"})}try{let u=ti({abi:FE,functionName:"addr",...i!=null?{args:[Al(n),BigInt(i)]}:{args:[Al(n)]}}),m={address:l,abi:Gh,functionName:"resolve",args:[Fe(ss(n)),u],blockNumber:t,blockTag:e},h=He(a,Ni,"readContract"),y=r?await h({...m,args:[...m.args,r]}):await h(m);if(y[0]==="0x")return null;let x=pa({abi:FE,args:i!=null?[Al(n),BigInt(i)]:void 0,functionName:"addr",data:y[0]});return x==="0x"||Vi(x)==="0x00"?null:x}catch(u){if(s)throw u;if(kl(u,"resolve"))return null;throw u}}dt();var ud=class extends X{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}},os=class extends X{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}},Ml=class extends X{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},pd=class extends X{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}};var XA=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,QA=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,JA=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,ZA=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function eM(a){try{let t=await fetch(a,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(e=>{let i=new Image;i.onload=()=>{e(!0)},i.onerror=()=>{e(!1)},i.src=a})}}function $C(a,t){return a?a.endsWith("/")?a.slice(0,-1):a:t}function XE({uri:a,gatewayUrls:t}){let e=JA.test(a);if(e)return{uri:a,isOnChain:!0,isEncoded:e};let i=$C(t?.ipfs,"https://ipfs.io"),n=$C(t?.arweave,"https://arweave.net"),r=a.match(XA),{protocol:s,subpath:o,target:l,subtarget:u=""}=r?.groups||{},m=s==="ipns:/"||o==="ipns/",h=s==="ipfs:/"||o==="ipfs/"||QA.test(a);if(a.startsWith("http")&&!m&&!h){let x=a;return t?.arweave&&(x=a.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:x,isOnChain:!1,isEncoded:!1}}if((m||h)&&l)return{uri:`${i}/${m?"ipns":"ipfs"}/${l}${u}`,isOnChain:!1,isEncoded:!1};if(s==="ar:/"&&l)return{uri:`${n}/${l}${u||""}`,isOnChain:!1,isEncoded:!1};let y=a.replace(ZA,"");if(y.startsWith("<svg")&&(y=`data:image/svg+xml;base64,${btoa(y)}`),y.startsWith("data:")||y.startsWith("{"))return{uri:y,isOnChain:!0,isEncoded:!1};throw new Ml({uri:a})}function QE(a){if(typeof a!="object"||!("image"in a)&&!("image_url"in a)&&!("image_data"in a))throw new ud({data:a});return a.image||a.image_url||a.image_data}async function XC({gatewayUrls:a,uri:t}){try{let e=await fetch(t).then(n=>n.json());return await md({gatewayUrls:a,uri:QE(e)})}catch{throw new Ml({uri:t})}}async function md({gatewayUrls:a,uri:t}){let{uri:e,isOnChain:i}=XE({uri:t,gatewayUrls:a});if(i||await eM(e))return e;throw new Ml({uri:t})}function QC(a){let t=a;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));let[e,i,n]=t.split("/"),[r,s]=e.split(":"),[o,l]=i.split(":");if(!r||r.toLowerCase()!=="eip155")throw new os({reason:"Only EIP-155 supported"});if(!s)throw new os({reason:"Chain ID not found"});if(!l)throw new os({reason:"Contract address not found"});if(!n)throw new os({reason:"Token ID not found"});if(!o)throw new os({reason:"ERC namespace not found"});return{chainID:Number.parseInt(s),namespace:o.toLowerCase(),contractAddress:l,tokenID:n}}async function JC(a,{nft:t}){if(t.namespace==="erc721")return Ni(a,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return Ni(a,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new pd({namespace:t.namespace})}async function ZC(a,{gatewayUrls:t,record:e}){return/eip155:/i.test(e)?tM(a,{gatewayUrls:t,record:e}):md({uri:e,gatewayUrls:t})}async function tM(a,{gatewayUrls:t,record:e}){let i=QC(e),n=await JC(a,{nft:i}),{uri:r,isOnChain:s,isEncoded:o}=XE({uri:n,gatewayUrls:t});if(s&&(r.includes("data:application/json;base64,")||r.startsWith("{"))){let u=o?atob(r.replace("data:application/json;base64,","")):r,m=JSON.parse(u);return md({uri:QE(m),gatewayUrls:t})}let l=i.tokenID;return i.namespace==="erc1155"&&(l=l.replace("0x","").padStart(64,"0")),XC({gatewayUrls:t,uri:r.replace(/(?:0x)?{id}/,l)})}Js();as();ka();io();Je();async function hd(a,{blockNumber:t,blockTag:e,name:i,key:n,gatewayUrls:r,strict:s,universalResolverAddress:o}){let l=o;if(!l){if(!a.chain)throw new Error("client chain not configured. universalResolverAddress is required.");l=Na({blockNumber:t,chain:a.chain,contract:"ensUniversalResolver"})}try{let u={address:l,abi:Gh,functionName:"resolve",args:[Fe(ss(i)),ti({abi:UE,functionName:"text",args:[Al(i),n]})],blockNumber:t,blockTag:e},m=He(a,Ni,"readContract"),h=r?await m({...u,args:[...u.args,r]}):await m(u);if(h[0]==="0x")return null;let y=pa({abi:UE,functionName:"text",data:h[0]});return y===""?null:y}catch(u){if(s)throw u;if(kl(u,"resolve"))return null;throw u}}async function eS(a,{blockNumber:t,blockTag:e,assetGatewayUrls:i,name:n,gatewayUrls:r,strict:s,universalResolverAddress:o}){let l=await He(a,hd,"getEnsText")({blockNumber:t,blockTag:e,key:"avatar",name:n,universalResolverAddress:o,gatewayUrls:r,strict:s});if(!l)return null;try{return await ZC(a,{record:l,gatewayUrls:i})}catch{return null}}Js();io();Je();async function tS(a,{address:t,blockNumber:e,blockTag:i,gatewayUrls:n,strict:r,universalResolverAddress:s}){let o=s;if(!o){if(!a.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=Na({blockNumber:e,chain:a.chain,contract:"ensUniversalResolver"})}let l=`${t.toLowerCase().substring(2)}.addr.reverse`;try{let u={address:o,abi:IC,functionName:"reverse",args:[Fe(ss(l))],blockNumber:e,blockTag:i},m=He(a,Ni,"readContract"),[h,y]=n?await m({...u,args:[...u.args,n]}):await m(u);return t.toLowerCase()!==y.toLowerCase()?null:h}catch(u){if(r)throw u;if(kl(u,"reverse"))return null;throw u}}io();Je();async function iS(a,{blockNumber:t,blockTag:e,name:i,universalResolverAddress:n}){let r=n;if(!r){if(!a.chain)throw new Error("client chain not configured. universalResolverAddress is required.");r=Na({blockNumber:t,chain:a.chain,contract:"ensUniversalResolver"})}let[s]=await He(a,Ni,"readContract")({address:r,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Fe(ss(i))],blockNumber:t,blockTag:e});return s}wl();Pi();Je();WE();Wc();Xs();Zr();async function dd(a,t){let{account:e=a.account,blockNumber:i,blockTag:n="latest",blobs:r,data:s,gas:o,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:m,maxPriorityFeePerGas:h,to:y,value:x,...E}=t,S=e?kt(e):void 0;try{ua(t);let N=(i?Ue(i):void 0)||n,F=a.chain?.formatters?.transactionRequest?.format,Y=(F||Pa)({...Jr(E,{format:F}),from:S?.address,blobs:r,data:s,gas:o,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:m,maxPriorityFeePerGas:h,to:y,value:x}),Z=await a.request({method:"eth_createAccessList",params:[Y,N]});return{accessList:Z.accessList,gasUsed:BigInt(Z.gasUsed)}}catch(T){throw Yh(T,{...t,account:S,chain:a.chain})}}async function aS(a){let t=Ur(a,{method:"eth_newBlockFilter"}),e=await a.request({method:"eth_newBlockFilter"});return{id:e,request:t(e),type:"block"}}Je();async function fd(a,{address:t,args:e,event:i,events:n,fromBlock:r,strict:s,toBlock:o}={}){let l=n??(i?[i]:void 0),u=Ur(a,{method:"eth_newFilter"}),m=[];l&&(m=[l.flatMap(x=>Tn({abi:[x],eventName:x.name,args:e}))],i&&(m=m[0]));let h=await a.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof r=="bigint"?Ue(r):r,toBlock:typeof o=="bigint"?Ue(o):o,...m.length?{topics:m}:{}}]});return{abi:l,args:e,eventName:i?i.name:void 0,fromBlock:r,id:h,request:u(h),strict:!!s,toBlock:o,type:"event"}}async function yd(a){let t=Ur(a,{method:"eth_newPendingTransactionFilter"}),e=await a.request({method:"eth_newPendingTransactionFilter"});return{id:e,request:t(e),type:"transaction"}}async function nS(a){let t=await a.request({method:"eth_blobBaseFee"});return BigInt(t)}Gi();Je();async function rS(a,{blockHash:t,blockNumber:e,blockTag:i="latest"}={}){let n=e!==void 0?Ue(e):void 0,r;return t?r=await a.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):r=await a.request({method:"eth_getBlockTransactionCountByNumber",params:[n||i]},{dedupe:!!n}),bi(r)}Je();async function JE(a,{address:t,blockNumber:e,blockTag:i="latest"}){let n=e!==void 0?Ue(e):void 0,r=await a.request({method:"eth_getCode",params:[t,n||i]},{dedupe:!!n});if(r!=="0x")return r}Je();function sS(a){return{baseFeePerGas:a.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:a.gasUsedRatio,oldestBlock:BigInt(a.oldestBlock),reward:a.reward?.map(t=>t.map(e=>BigInt(e)))}}async function oS(a,{blockCount:t,blockNumber:e,blockTag:i="latest",rewardPercentiles:n}){let r=e?Ue(e):void 0,s=await a.request({method:"eth_feeHistory",params:[Ue(t),r||i,n]},{dedupe:!!r});return sS(s)}async function lS(a,{filter:t}){let e=t.strict??!1,n=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(r=>qi(r));return t.abi?Il({abi:t.abi,logs:n,strict:e}):n}Je();function li(a){return{formatters:void 0,fees:void 0,serializers:void 0,...a}}xi();In();ta();dt();var bd=class extends X{constructor({domain:t}){super(`Invalid domain "${wt(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},gd=class extends X{constructor({primaryType:t,types:e}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(e))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},_d=class extends X{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}};en();Ya();Je();tE();Hr();Da();Je();Za();function cS(a){let{domain:t={},message:e,primaryType:i}=a,n={EIP712Domain:vd({domain:t}),...a.types};Ld({domain:t,message:e,primaryType:i,types:n});let r=["0x1901"];return t&&r.push(iM({domain:t,types:n})),i!=="EIP712Domain"&&r.push(uS({data:e,primaryType:i,types:n})),Kt(ea(r))}function iM({domain:a,types:t}){return uS({data:a,primaryType:"EIP712Domain",types:t})}function uS({data:a,primaryType:t,types:e}){let i=pS({data:a,primaryType:t,types:e});return Kt(i)}function pS({data:a,primaryType:t,types:e}){let i=[{type:"bytes32"}],n=[aM({primaryType:t,types:e})];for(let r of e[t]){let[s,o]=hS({types:e,name:r.name,type:r.type,value:a[r.name]});i.push(s),n.push(o)}return va(i,n)}function aM({primaryType:a,types:t}){let e=Fe(nM({primaryType:a,types:t}));return Kt(e)}function nM({primaryType:a,types:t}){let e="",i=mS({primaryType:a,types:t});i.delete(a);let n=[a,...Array.from(i).sort()];for(let r of n)e+=`${r}(${t[r].map(({name:s,type:o})=>`${o} ${s}`).join(",")})`;return e}function mS({primaryType:a,types:t},e=new Set){let n=a.match(/^\w*/u)?.[0];if(e.has(n)||t[n]===void 0)return e;e.add(n);for(let r of t[n])mS({primaryType:r.type,types:t},e);return e}function hS({types:a,name:t,type:e,value:i}){if(a[e]!==void 0)return[{type:"bytes32"},Kt(pS({data:i,primaryType:e,types:a}))];if(e==="bytes")return i=`0x${(i.length%2?"0":"")+i.slice(2)}`,[{type:"bytes32"},Kt(i)];if(e==="string")return[{type:"bytes32"},Kt(Fe(i))];if(e.lastIndexOf("]")===e.length-1){let n=e.slice(0,e.lastIndexOf("[")),r=i.map(s=>hS({name:t,type:n,types:a,value:s}));return[{type:"bytes32"},Kt(va(r.map(([s])=>s),r.map(([,s])=>s)))]}return[{type:e},i]}ta();function dS(a){let{domain:t,message:e,primaryType:i,types:n}=a,r=(l,u)=>{let m={...u};for(let h of l){let{name:y,type:x}=h;x==="address"&&(m[y]=m[y].toLowerCase())}return m},s=(()=>n.EIP712Domain?t?r(n.EIP712Domain,t):{}:{})(),o=(()=>{if(i!=="EIP712Domain")return r(n[i],e)})();return wt({domain:s,message:o,primaryType:i,types:n})}function Ld(a){let{domain:t,message:e,primaryType:i,types:n}=a,r=(s,o)=>{for(let l of s){let{name:u,type:m}=l,h=o[u],y=m.match(Um);if(y&&(typeof h=="number"||typeof h=="bigint")){let[S,T,N]=y;Ue(h,{signed:T==="int",size:Number.parseInt(N)/8})}if(m==="address"&&typeof h=="string"&&!Wt(h))throw new Yt({address:h});let x=m.match(nT);if(x){let[S,T]=x;if(T&&Dt(h)!==Number.parseInt(T))throw new _m({expectedSize:Number.parseInt(T),givenSize:Dt(h)})}let E=n[m];E&&(rM(m),r(E,h))}};if(n.EIP712Domain&&t){if(typeof t!="object")throw new bd({domain:t});r(n.EIP712Domain,t)}if(i!=="EIP712Domain")if(n[i])r(n[i],e);else throw new gd({primaryType:i,types:n})}function vd({domain:a}){return[typeof a?.name=="string"&&{name:"name",type:"string"},a?.version&&{name:"version",type:"string"},(typeof a?.chainId=="number"||typeof a?.chainId=="bigint")&&{name:"chainId",type:"uint256"},a?.verifyingContract&&{name:"verifyingContract",type:"address"},a?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function rM(a){if(a==="address"||a==="bool"||a==="string"||a.startsWith("bytes")||a.startsWith("uint")||a.startsWith("int"))throw new _d({type:a})}ka();Gi();Sh();var sM={"0x0":"reverted","0x1":"success"};function ZE(a){let t={...a,blockNumber:a.blockNumber?BigInt(a.blockNumber):null,contractAddress:a.contractAddress?a.contractAddress:null,cumulativeGasUsed:a.cumulativeGasUsed?BigInt(a.cumulativeGasUsed):null,effectiveGasPrice:a.effectiveGasPrice?BigInt(a.effectiveGasPrice):null,gasUsed:a.gasUsed?BigInt(a.gasUsed):null,logs:a.logs?a.logs.map(e=>qi(e)):null,to:a.to?a.to:null,transactionIndex:a.transactionIndex?bi(a.transactionIndex):null,status:a.status?sM[a.status]:null,type:a.type?PE[a.type]||a.type:null};return a.blobGasPrice&&(t.blobGasPrice=BigInt(a.blobGasPrice)),a.blobGasUsed&&(t.blobGasUsed=BigInt(a.blobGasUsed)),t}var fS=hl("transactionReceipt",ZE);Gi();Za();var yS=`Ethereum Signed Message:
`;Da();Ya();Je();function bS(a){let t=(()=>typeof a=="string"?Xa(a):typeof a.raw=="string"?a.raw:Et(a.raw))(),e=Xa(`${yS}${Dt(t)}`);return ea([e,t])}function xd(a,t){return Kt(bS(a),t)}var Id="0x6492649264926492649264926492649264926492649264926492649264926492";Ps();function gS(a){return eE(a,-32)===Id}Hr();Da();ki();function _S(a){let{address:t,data:e,signature:i,to:n="hex"}=a,r=Wi([va([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,e,i]),Id]);return n==="hex"?r:Ii(r)}RE();In();dt();Yc();Xr();en();Ya();Ps();Gi();function LS(a){let{authorizationList:t}=a;if(t)for(let e of t){let{contractAddress:i,chainId:n}=e;if(!Wt(i))throw new Yt({address:i});if(n<0)throw new eo({chainId:n})}Ed(a)}function vS(a){let{blobVersionedHashes:t}=a;if(t){if(t.length===0)throw new Ll;for(let e of t){let i=Dt(e),n=bi(tr(e,0,1));if(i!==32)throw new Nh({hash:e,size:i});if(n!==1)throw new Oh({hash:e,version:n})}}Ed(a)}function Ed(a){let{chainId:t,maxPriorityFeePerGas:e,maxFeePerGas:i,to:n}=a;if(t<=0)throw new eo({chainId:t});if(n&&!Wt(n))throw new Yt({address:n});if(i&&i>fl)throw new Ba({maxFeePerGas:i});if(e&&i&&e>i)throw new An({maxFeePerGas:i,maxPriorityFeePerGas:e})}function xS(a){let{chainId:t,maxPriorityFeePerGas:e,gasPrice:i,maxFeePerGas:n,to:r}=a;if(t<=0)throw new eo({chainId:t});if(r&&!Wt(r))throw new Yt({address:r});if(e||n)throw new X("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(i&&i>fl)throw new Ba({maxFeePerGas:i})}function IS(a){let{chainId:t,maxPriorityFeePerGas:e,gasPrice:i,maxFeePerGas:n,to:r}=a;if(r&&!Wt(r))throw new Yt({address:r});if(typeof t<"u"&&t<=0)throw new eo({chainId:t});if(e||n)throw new X("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(i&&i>fl)throw new Ba({maxFeePerGas:i})}tn();Da();Po();Je();Je();function ES(a){if(!a||a.length===0)return[];let t=[];for(let e of a){let{contractAddress:i,chainId:n,nonce:r,...s}=e;t.push([n?Fe(n):"0x",i,r?Fe(r):"0x",...Bl({},s)])}return t}In();tn();en();function Jc(a){if(!a||a.length===0)return[];let t=[];for(let e=0;e<a.length;e++){let{address:i,storageKeys:n}=a[e];for(let r=0;r<n.length;r++)if(n[r].length-2!==64)throw new nh({storageKey:n[r]});if(!Wt(i,{strict:!1}))throw new Yt({address:i});t.push([i,n])}return t}function wS(a,t){let e=Uh(a);return e==="eip1559"?cM(a,t):e==="eip2930"?uM(a,t):e==="eip4844"?lM(a,t):e==="eip7702"?oM(a,t):pM(a,t)}function oM(a,t){let{authorizationList:e,chainId:i,gas:n,nonce:r,to:s,value:o,maxFeePerGas:l,maxPriorityFeePerGas:u,accessList:m,data:h}=a;LS(a);let y=Jc(m),x=ES(e);return Wi(["0x04",sn([Fe(i),r?Fe(r):"0x",u?Fe(u):"0x",l?Fe(l):"0x",n?Fe(n):"0x",s??"0x",o?Fe(o):"0x",h??"0x",y,x,...Bl(a,t)])])}function lM(a,t){let{chainId:e,gas:i,nonce:n,to:r,value:s,maxFeePerBlobGas:o,maxFeePerGas:l,maxPriorityFeePerGas:u,accessList:m,data:h}=a;vS(a);let y=a.blobVersionedHashes,x=a.sidecars;if(a.blobs&&(typeof y>"u"||typeof x>"u")){let G=typeof a.blobs[0]=="string"?a.blobs:a.blobs.map(ne=>Et(ne)),Y=a.kzg,Z=gl({blobs:G,kzg:Y});if(typeof y>"u"&&(y=Rh({commitments:Z})),typeof x>"u"){let ne=_l({blobs:G,commitments:Z,kzg:Y});x=Hh({blobs:G,commitments:Z,proofs:ne})}}let E=Jc(m),S=[Fe(e),n?Fe(n):"0x",u?Fe(u):"0x",l?Fe(l):"0x",i?Fe(i):"0x",r??"0x",s?Fe(s):"0x",h??"0x",E,o?Fe(o):"0x",y??[],...Bl(a,t)],T=[],N=[],F=[];if(x)for(let G=0;G<x.length;G++){let{blob:Y,commitment:Z,proof:ne}=x[G];T.push(Y),N.push(Z),F.push(ne)}return Wi(["0x03",x?sn([S,T,N,F]):sn(S)])}function cM(a,t){let{chainId:e,gas:i,nonce:n,to:r,value:s,maxFeePerGas:o,maxPriorityFeePerGas:l,accessList:u,data:m}=a;Ed(a);let h=Jc(u),y=[Fe(e),n?Fe(n):"0x",l?Fe(l):"0x",o?Fe(o):"0x",i?Fe(i):"0x",r??"0x",s?Fe(s):"0x",m??"0x",h,...Bl(a,t)];return Wi(["0x02",sn(y)])}function uM(a,t){let{chainId:e,gas:i,data:n,nonce:r,to:s,value:o,accessList:l,gasPrice:u}=a;xS(a);let m=Jc(l),h=[Fe(e),r?Fe(r):"0x",u?Fe(u):"0x",i?Fe(i):"0x",s??"0x",o?Fe(o):"0x",n??"0x",m,...Bl(a,t)];return Wi(["0x01",sn(h)])}function pM(a,t){let{chainId:e=0,gas:i,data:n,nonce:r,to:s,value:o,gasPrice:l}=a;IS(a);let u=[r?Fe(r):"0x",l?Fe(l):"0x",i?Fe(i):"0x",s??"0x",o?Fe(o):"0x",n??"0x"];if(t){let m=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(e>0)return BigInt(e*2)+BigInt(35n+t.v-27n);let x=27n+(t.v===27n?0n:1n);if(t.v!==x)throw new ih({v:t.v});return x})(),h=Vi(t.r),y=Vi(t.s);u=[...u,Fe(m),h==="0x00"?"0x":h,y==="0x00"?"0x":y]}else e>0&&(u=[...u,Fe(e),"0x","0x"]);return sn(u)}function Bl(a,t){let e=t??a,{v:i,yParity:n}=e;if(typeof e.r>"u")return[];if(typeof e.s>"u")return[];if(typeof i>"u"&&typeof n>"u")return[];let r=Vi(e.r),s=Vi(e.s);return[(()=>typeof n=="number"?n?Fe(1):"0x":i===0n?"0x":i===1n?Fe(1):i===27n?"0x":Fe(1))(),r==="0x00"?"0x":r,s==="0x00"?"0x":s]}dt();var wd=class extends X{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}};function ia(a,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(a))throw new wd({value:a});let[e,i="0"]=a.split("."),n=e.startsWith("-");if(n&&(e=e.slice(1)),i=i.replace(/(0+)$/,""),t===0)Math.round(+`.${i}`)===1&&(e=`${BigInt(e)+1n}`),i="";else if(i.length>t){let[r,s,o]=[i.slice(0,t-1),i.slice(t-1,t),i.slice(t)],l=Math.round(+`${s}.${o}`);l>9?i=`${BigInt(r)+BigInt(1)}0`.padStart(r.length+1,"0"):i=`${r}${l}`,i.length>t&&(i=i.slice(1),e=`${BigInt(e)+1n}`),i=i.slice(0,t)}else i=i.padEnd(t,"0");return BigInt(`${n?"-":""}${e}${i}`)}Xm();function Rl(a,t="wei"){return ia(a,$m[t])}function mM(a){return a.map(t=>({...t,value:BigInt(t.value)}))}function TS(a){return{...a,balance:a.balance?BigInt(a.balance):void 0,nonce:a.nonce?bi(a.nonce):void 0,storageProof:a.storageProof?mM(a.storageProof):void 0}}async function CS(a,{address:t,blockNumber:e,blockTag:i,storageKeys:n}){let r=i??"latest",s=e!==void 0?Ue(e):void 0,o=await a.request({method:"eth_getProof",params:[t,n,s||r]});return TS(o)}Je();async function SS(a,{address:t,blockNumber:e,blockTag:i="latest",slot:n}){let r=e!==void 0?Ue(e):void 0;return await a.request({method:"eth_getStorageAt",params:[t,n,r||i]})}tn();Je();async function Pl(a,{blockHash:t,blockNumber:e,blockTag:i,hash:n,index:r}){let s=i||"latest",o=e!==void 0?Ue(e):void 0,l=null;if(n?l=await a.request({method:"eth_getTransactionByHash",params:[n]},{dedupe:!0}):t?l=await a.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,Ue(r)]},{dedupe:!0}):(o||s)&&(l=await a.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[o||s,Ue(r)]},{dedupe:!!o})),!l)throw new Wo({blockHash:t,blockNumber:e,blockTag:s,hash:n,index:r});return(a.chain?.formatters?.transaction?.format||Qs)(l)}async function DS(a,{hash:t,transactionReceipt:e}){let[i,n]=await Promise.all([He(a,Pn,"getBlockNumber")({}),t?He(a,Pl,"getTransaction")({hash:t}):void 0]),r=e?.blockNumber||n?.blockNumber;return r?i-r+1n:0n}tn();async function Zc(a,{hash:t}){let e=await a.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!e)throw new jo({hash:t});return(a.chain?.formatters?.transactionReceipt?.format||ZE)(e)}Js();xi();dt();ir();as();ka();io();async function kS(a,t){let{allowFailure:e=!0,batchSize:i,blockNumber:n,blockTag:r,multicallAddress:s,stateOverride:o}=t,l=t.contracts,u=i??(typeof a.batch?.multicall=="object"&&a.batch.multicall.batchSize||1024),m=s;if(!m){if(!a.chain)throw new Error("client chain not configured. multicallAddress is required.");m=Na({blockNumber:n,chain:a.chain,contract:"multicall3"})}let h=[[]],y=0,x=0;for(let T=0;T<l.length;T++){let{abi:N,address:F,args:G,functionName:Y}=l[T];try{let Z=ti({abi:N,args:G,functionName:Y});x+=(Z.length-2)/2,u>0&&x>u&&h[y].length>0&&(y++,x=(Z.length-2)/2,h[y]=[]),h[y]=[...h[y],{allowFailure:!0,callData:Z,target:F}]}catch(Z){let ne=xa(Z,{abi:N,address:F,args:G,docsPath:"/docs/contract/multicall",functionName:Y});if(!e)throw ne;h[y]=[...h[y],{allowFailure:!0,callData:"0x",target:F}]}}let E=await Promise.allSettled(h.map(T=>He(a,Ni,"readContract")({abi:Kc,address:m,args:[T],blockNumber:n,blockTag:r,functionName:"aggregate3",stateOverride:o}))),S=[];for(let T=0;T<E.length;T++){let N=E[T];if(N.status==="rejected"){if(!e)throw N.reason;for(let G=0;G<h[T].length;G++)S.push({status:"failure",error:N.reason,result:void 0});continue}let F=N.value;for(let G=0;G<F.length;G++){let{returnData:Y,success:Z}=F[G],{callData:ne}=h[T][G],{abi:J,address:ue,functionName:se,args:Ie}=l[S.length];try{if(ne==="0x")throw new Ca;if(!Z)throw new an({data:Y});let Ce=pa({abi:J,args:Ie,data:Y,functionName:se});S.push(e?{result:Ce,status:"success"}:Ce)}catch(Ce){let te=xa(Ce,{abi:J,address:ue,args:Ie,docsPath:"/docs/contract/multicall",functionName:se});if(!e)throw te;S.push({error:te,result:void 0,status:"failure"})}}}if(S.length!==l.length)throw new X("multicall results mismatch");return S}var AS="0.1.1";function MS(){return AS}var Ot=class a extends Error{constructor(t,e={}){let i=(()=>{if(e.cause instanceof a){if(e.cause.details)return e.cause.details;if(e.cause.shortMessage)return e.cause.shortMessage}return e.cause?.message?e.cause.message:e.details})(),n=(()=>e.cause instanceof a&&e.cause.docsPath||e.docsPath)(),s=`https://oxlib.sh${n??""}`,o=[t||"An error occurred.",...e.metaMessages?["",...e.metaMessages]:[],...i||n?["",i?`Details: ${i}`:void 0,n?`See: ${s}`:void 0]:[]].filter(l=>typeof l=="string").join(`
`);super(o,e.cause?{cause:e.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${MS()}`}),this.cause=e.cause,this.details=i,this.docs=s,this.docsPath=n,this.shortMessage=t}walk(t){return BS(this,t)}};function BS(a,t){return t?.(a)?a:a&&typeof a=="object"&&"cause"in a&&a.cause?BS(a.cause,t):t?null:a}var hM="#__bigint";function RS(a,t,e){return JSON.stringify(a,(i,n)=>typeof t=="function"?t(i,n):typeof n=="bigint"?n.toString()+hM:n,e)}function PS(a,t){if(e1(a)>t)throw new Td({givenSize:e1(a),maxSize:t})}var lr={zero:48,nine:57,A:65,F:70,a:97,f:102};function t1(a){if(a>=lr.zero&&a<=lr.nine)return a-lr.zero;if(a>=lr.A&&a<=lr.F)return a-(lr.A-10);if(a>=lr.a&&a<=lr.f)return a-(lr.a-10)}function NS(a,t={}){let{dir:e,size:i=32}=t;if(i===0)return a;if(a.length>i)throw new Cd({size:a.length,targetSize:i,type:"Bytes"});let n=new Uint8Array(i);for(let r=0;r<i;r++){let s=e==="right";n[s?r:i-r-1]=a[s?r:a.length-r-1]}return n}function eu(a,t){if(Ai(a)>t)throw new Sd({givenSize:Ai(a),maxSize:t})}function OS(a,t){if(typeof t=="number"&&t>0&&t>Ai(a)-1)throw new tu({offset:t,position:"start",size:Ai(a)})}function HS(a,t,e){if(typeof t=="number"&&typeof e=="number"&&Ai(a)!==e-t)throw new tu({offset:e,position:"end",size:Ai(a)})}function a1(a,t={}){let{dir:e,size:i=32}=t;if(i===0)return a;let n=a.replace("0x","");if(n.length>i*2)throw new Dd({size:Math.ceil(n.length/2),targetSize:i,type:"Hex"});return`0x${n[e==="right"?"padEnd":"padStart"](i*2,"0")}`}var yM=new TextEncoder;function FS(a){return a instanceof Uint8Array?a:typeof a=="string"?gM(a):bM(a)}function bM(a){return a instanceof Uint8Array?a:new Uint8Array(a)}function gM(a,t={}){let{size:e}=t,i=a;e&&(eu(a,e),i=On(a,e));let n=i.slice(2);n.length%2&&(n=`0${n}`);let r=n.length/2,s=new Uint8Array(r);for(let o=0,l=0;o<r;o++){let u=t1(n.charCodeAt(l++)),m=t1(n.charCodeAt(l++));if(u===void 0||m===void 0)throw new Ot(`Invalid byte sequence ("${n[l-2]}${n[l-1]}" in "${n}").`);s[o]=u*16+m}return s}function VS(a,t={}){let{size:e}=t,i=yM.encode(a);return typeof e=="number"?(PS(i,e),_M(i,e)):i}function _M(a,t){return NS(a,{dir:"right",size:t})}function e1(a){return a.length}var Td=class extends Ot{constructor({givenSize:t,maxSize:e}){super(`Size cannot exceed \`${e}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}};var Cd=class extends Ot{constructor({size:t,targetSize:e,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};var LM=new TextEncoder,vM=Array.from({length:256},(a,t)=>t.toString(16).padStart(2,"0"));function xM(a,t={}){let{strict:e=!1}=t;if(!a)throw new kd(a);if(typeof a!="string")throw new kd(a);if(e&&!/^0x[0-9a-fA-F]*$/.test(a))throw new Ad(a);if(!a.startsWith("0x"))throw new Ad(a)}function ha(...a){return`0x${a.reduce((t,e)=>t+e.replace("0x",""),"")}`}function Md(a,t={}){let e=`0x${Number(a)}`;return typeof t.size=="number"?(eu(e,t.size),cr(e,t.size)):e}function Nl(a,t={}){let e="";for(let n=0;n<a.length;n++)e+=vM[a[n]];let i=`0x${e}`;return typeof t.size=="number"?(eu(i,t.size),On(i,t.size)):i}function gi(a,t={}){let{signed:e,size:i}=t,n=BigInt(a),r;i?e?r=(1n<<BigInt(i)*8n-1n)-1n:r=2n**(BigInt(i)*8n)-1n:typeof a=="number"&&(r=BigInt(Number.MAX_SAFE_INTEGER));let s=typeof r=="bigint"&&e?-r-1n:0;if(r&&n>r||n<s){let u=typeof a=="bigint"?"n":"";throw new iu({max:r?`${r}${u}`:void 0,min:`${s}${u}`,signed:e,size:i,value:`${a}${u}`})}let l=`0x${(e&&n<0?(1n<<BigInt(i*8))+BigInt(n):n).toString(16)}`;return i?cr(l,i):l}function Ol(a,t={}){return Nl(LM.encode(a),t)}function cr(a,t){return a1(a,{dir:"left",size:t})}function On(a,t){return a1(a,{dir:"right",size:t})}function Hl(a,t,e,i={}){let{strict:n}=i;OS(a,t);let r=`0x${a.replace("0x","").slice((t??0)*2,(e??a.length)*2)}`;return n&&HS(r,t,e),r}function Ai(a){return Math.ceil((a.length-2)/2)}function n1(a,t={}){let{strict:e=!1}=t;try{return xM(a,{strict:e}),!0}catch{return!1}}var iu=class extends Ot{constructor({max:t,min:e,signed:i,size:n,value:r}){super(`Number \`${r}\` is not in safe${n?` ${n*8}-bit`:""}${i?" signed":" unsigned"} integer range ${t?`(\`${e}\` to \`${t}\`)`:`(above \`${e}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};var kd=class extends Ot{constructor(t){super(`Value \`${typeof t=="object"?RS(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},Ad=class extends Ot{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}};var Sd=class extends Ot{constructor({givenSize:t,maxSize:e}){super(`Size cannot exceed \`${e}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},tu=class extends Ot{constructor({offset:t,position:e,size:i}){super(`Slice ${e==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${i}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},Dd=class extends Ot{constructor({size:t,targetSize:e,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function GS(a){return{address:a.address,amount:gi(a.amount),index:gi(a.index),validatorIndex:gi(a.validatorIndex)}}function WS(a){return{...typeof a.baseFeePerGas=="bigint"&&{baseFeePerGas:gi(a.baseFeePerGas)},...typeof a.blobBaseFee=="bigint"&&{blobBaseFee:gi(a.blobBaseFee)},...typeof a.feeRecipient=="string"&&{feeRecipient:a.feeRecipient},...typeof a.gasLimit=="bigint"&&{gasLimit:gi(a.gasLimit)},...typeof a.number=="bigint"&&{number:gi(a.number)},...typeof a.prevRandao=="bigint"&&{prevRandao:gi(a.prevRandao)},...typeof a.time=="bigint"&&{time:gi(a.time)},...a.withdrawals&&{withdrawals:a.withdrawals.map(GS)}}}Pi();xi();ir();Xr();as();ka();Je();Gc();Xs();Dh();Zr();async function au(a,t){let{blockNumber:e,blockTag:i="latest",blocks:n,returnFullTransactions:r,traceTransfers:s,validation:o}=t;try{let l=[];for(let y of n){let x=y.blockOverrides?WS(y.blockOverrides):void 0,E=y.calls.map(T=>{let N=T,F=N.account?kt(N.account):void 0,G={...N,data:N.abi?ti(N):N.data,from:N.from??F?.address};return ua(G),Pa(G)}),S=y.stateOverrides?dl(y.stateOverrides):void 0;l.push({blockOverrides:x,calls:E,stateOverrides:S})}let m=(e?Ue(e):void 0)||i;return(await a.request({method:"eth_simulateV1",params:[{blockStateCalls:l,returnFullTransactions:r,traceTransfers:s,validation:o},m]})).map((y,x)=>({...jc(y),calls:y.calls.map((E,S)=>{let{abi:T,args:N,functionName:F,to:G}=n[x].calls[S],Y=E.error?.data??E.returnData,Z=BigInt(E.gasUsed),ne=E.logs?.map(Ie=>qi(Ie)),J=E.status==="0x1"?"success":"failure",ue=T&&J==="success"&&Y!=="0x"?pa({abi:T,data:Y,functionName:F}):null,se=(()=>{if(J==="success")return;let Ie;if(E.error?.data==="0x"?Ie=new Ca:E.error&&(Ie=new an(E.error)),!!Ie)return xa(Ie,{abi:T??[],address:G,args:N,functionName:F??"<unknown>"})})();return{data:Y,gasUsed:Z,logs:ne,status:J,...J==="success"?{result:ue}:{error:se}}})}))}catch(l){let u=l,m=Qr(u,{});throw m instanceof Ra?u:m}}um();$I();function Bd(a,t={}){let{as:e=typeof a=="string"?"Hex":"Bytes"}=t,i=Nm(FS(a));return e==="Bytes"?i:Nl(i)}var Rd=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){let e=super.get(t);return super.has(t)&&e!==void 0&&(this.delete(t),super.set(t,e)),e}set(t,e){if(super.set(t,e),this.maxSize&&this.size>this.maxSize){let i=this.keys().next().value;i&&this.delete(i)}return this}};var wM={checksum:new Rd(8192)},Pd=wM.checksum;var CM=/^0x[a-fA-F0-9]{40}$/;function Ul(a,t={}){let{strict:e=!0}=t;if(!CM.test(a))throw new Nd({address:a,cause:new r1});if(e){if(a.toLowerCase()===a)return;if(zS(a)!==a)throw new Nd({address:a,cause:new s1})}}function zS(a){if(Pd.has(a))return Pd.get(a);Ul(a,{strict:!1});let t=a.substring(2).toLowerCase(),e=Bd(VS(t),{as:"Bytes"}),i=t.split("");for(let r=0;r<40;r+=2)e[r>>1]>>4>=8&&i[r]&&(i[r]=i[r].toUpperCase()),(e[r>>1]&15)>=8&&i[r+1]&&(i[r+1]=i[r+1].toUpperCase());let n=`0x${i.join("")}`;return Pd.set(a,n),n}function Od(a,t={}){let{strict:e=!0}=t??{};try{return Ul(a,{strict:e}),!0}catch{return!1}}var Nd=class extends Ot{constructor({address:t,cause:e}){super(`Address "${t}" is invalid.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},r1=class extends Ot{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},s1=class extends Ot{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};function Ud(a){let t=!0,e="",i=0,n="",r=!1;for(let s=0;s<a.length;s++){let o=a[s];if(["(",")",","].includes(o)&&(t=!0),o==="("&&i++,o===")"&&i--,!!t){if(i===0){if(o===" "&&["event","function","error",""].includes(n))n="";else if(n+=o,o===")"){r=!0;break}continue}if(o===" "){a[s-1]!==","&&e!==","&&e!==",("&&(e="",t=!1);continue}n+=o,e+=o}}if(!r)throw new Ot("Unable to normalize signature.");return n}function Hd(a,t){let e=typeof a,i=t.type;switch(i){case"address":return Od(a,{strict:!1});case"bool":return e==="boolean";case"function":return e==="string";case"string":return e==="string";default:return i==="tuple"&&"components"in t?Object.values(t.components).every((n,r)=>Hd(Object.values(a)[r],n)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?e==="number"||e==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?e==="string"||a instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)?Array.isArray(a)&&a.every(n=>Hd(n,{...t,type:i.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function l1(a,t,e){for(let i in a){let n=a[i],r=t[i];if(n.type==="tuple"&&r.type==="tuple"&&"components"in n&&"components"in r)return l1(n.components,r.components,e[i]);let s=[n.type,r.type];if((()=>s.includes("address")&&s.includes("bytes20")?!0:s.includes("address")&&s.includes("string")?Od(e[i],{strict:!1}):s.includes("address")&&s.includes("bytes")?Od(e[i],{strict:!1}):!1)())return s}}function Fd(a,t={}){let{prepare:e=!0}=t,i=(()=>Array.isArray(a)?cm(a):typeof a=="string"?cm(a):a)();return{...i,...e?{hash:Fl(i)}:{}}}function KS(a,t,e){let{args:i=[],prepare:n=!0}=e??{},r=n1(t,{strict:!1}),s=a.filter(u=>r?u.type==="function"||u.type==="error"?u1(u)===Hl(t,0,4):u.type==="event"?Fl(u)===t:!1:"name"in u&&u.name===t);if(s.length===0)throw new no({name:t});if(s.length===1)return{...s[0],...n?{hash:Fl(s[0])}:{}};let o;for(let u of s){if(!("inputs"in u))continue;if(!i||i.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...n?{hash:Fl(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==i.length)continue;if(i.every((h,y)=>{let x="inputs"in u&&u.inputs[y];return x?Hd(h,x):!1})){if(o&&"inputs"in o&&o.inputs){let h=l1(u.inputs,o.inputs,i);if(h)throw new c1({abiItem:u,type:h[0]},{abiItem:o,type:h[1]})}o=u}}let l=(()=>{if(o)return o;let[u,...m]=s;return{...u,overloads:m}})();if(!l)throw new no({name:t});return{...l,...n?{hash:Fl(l)}:{}}}function u1(a){return Hl(Fl(a),0,4)}function DM(a){let t=(()=>typeof a=="string"?a:ks(a))();return Ud(t)}function Fl(a){return typeof a!="string"&&"hash"in a&&a.hash?a.hash:Bd(Ol(DM(a)))}var c1=class extends Ot{constructor(t,e){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${Ud(ks(t.abiItem))}\`, and`,`\`${e.type}\` in \`${Ud(ks(e.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},no=class extends Ot{constructor({name:t,data:e,type:i="item"}){let n=(()=>t?` with name "${t}"`:e?` with data "${e}"`:"")();super(`ABI ${i}${n} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};var YS=/^(.*)\[([0-9]*)\]$/,$S=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Vd=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,HZ=2n**(8n-1n)-1n,UZ=2n**(16n-1n)-1n,FZ=2n**(24n-1n)-1n,VZ=2n**(32n-1n)-1n,GZ=2n**(40n-1n)-1n,WZ=2n**(48n-1n)-1n,jZ=2n**(56n-1n)-1n,zZ=2n**(64n-1n)-1n,KZ=2n**(72n-1n)-1n,qZ=2n**(80n-1n)-1n,YZ=2n**(88n-1n)-1n,$Z=2n**(96n-1n)-1n,XZ=2n**(104n-1n)-1n,QZ=2n**(112n-1n)-1n,JZ=2n**(120n-1n)-1n,ZZ=2n**(128n-1n)-1n,eee=2n**(136n-1n)-1n,tee=2n**(144n-1n)-1n,iee=2n**(152n-1n)-1n,aee=2n**(160n-1n)-1n,nee=2n**(168n-1n)-1n,ree=2n**(176n-1n)-1n,see=2n**(184n-1n)-1n,oee=2n**(192n-1n)-1n,lee=2n**(200n-1n)-1n,cee=2n**(208n-1n)-1n,uee=2n**(216n-1n)-1n,pee=2n**(224n-1n)-1n,mee=2n**(232n-1n)-1n,hee=2n**(240n-1n)-1n,dee=2n**(248n-1n)-1n,fee=2n**(256n-1n)-1n,yee=-(2n**(8n-1n)),bee=-(2n**(16n-1n)),gee=-(2n**(24n-1n)),_ee=-(2n**(32n-1n)),Lee=-(2n**(40n-1n)),vee=-(2n**(48n-1n)),xee=-(2n**(56n-1n)),Iee=-(2n**(64n-1n)),Eee=-(2n**(72n-1n)),wee=-(2n**(80n-1n)),Tee=-(2n**(88n-1n)),Cee=-(2n**(96n-1n)),See=-(2n**(104n-1n)),Dee=-(2n**(112n-1n)),kee=-(2n**(120n-1n)),Aee=-(2n**(128n-1n)),Mee=-(2n**(136n-1n)),Bee=-(2n**(144n-1n)),Ree=-(2n**(152n-1n)),Pee=-(2n**(160n-1n)),Nee=-(2n**(168n-1n)),Oee=-(2n**(176n-1n)),Hee=-(2n**(184n-1n)),Uee=-(2n**(192n-1n)),Fee=-(2n**(200n-1n)),Vee=-(2n**(208n-1n)),Gee=-(2n**(216n-1n)),Wee=-(2n**(224n-1n)),jee=-(2n**(232n-1n)),zee=-(2n**(240n-1n)),Kee=-(2n**(248n-1n)),qee=-(2n**(256n-1n)),Yee=2n**8n-1n,$ee=2n**16n-1n,Xee=2n**24n-1n,Qee=2n**32n-1n,Jee=2n**40n-1n,Zee=2n**48n-1n,ete=2n**56n-1n,tte=2n**64n-1n,ite=2n**72n-1n,ate=2n**80n-1n,nte=2n**88n-1n,rte=2n**96n-1n,ste=2n**104n-1n,ote=2n**112n-1n,lte=2n**120n-1n,cte=2n**128n-1n,ute=2n**136n-1n,pte=2n**144n-1n,mte=2n**152n-1n,hte=2n**160n-1n,dte=2n**168n-1n,fte=2n**176n-1n,yte=2n**184n-1n,bte=2n**192n-1n,gte=2n**200n-1n,_te=2n**208n-1n,Lte=2n**216n-1n,vte=2n**224n-1n,xte=2n**232n-1n,Ite=2n**240n-1n,Ete=2n**248n-1n,wte=2n**256n-1n;function XS({checksumAddress:a,parameters:t,values:e}){let i=[];for(let n=0;n<t.length;n++)i.push(p1({checksumAddress:a,parameter:t[n],value:e[n]}));return i}function p1({checksumAddress:a=!1,parameter:t,value:e}){let i=t,n=HM(i.type);if(n){let[r,s]=n;return MM(e,{checksumAddress:a,length:r,parameter:{...i,type:s}})}if(i.type==="tuple")return OM(e,{checksumAddress:a,parameter:i});if(i.type==="address")return AM(e,{checksum:a});if(i.type==="bool")return RM(e);if(i.type.startsWith("uint")||i.type.startsWith("int")){let r=i.type.startsWith("int"),[,,s="256"]=Vd.exec(i.type)??[];return PM(e,{signed:r,size:Number(s)})}if(i.type.startsWith("bytes"))return BM(e,{type:i.type});if(i.type==="string")return NM(e);throw new ru(i.type)}function Gd(a){let t=0;for(let r=0;r<a.length;r++){let{dynamic:s,encoded:o}=a[r];s?t+=32:t+=Ai(o)}let e=[],i=[],n=0;for(let r=0;r<a.length;r++){let{dynamic:s,encoded:o}=a[r];s?(e.push(gi(t+n,{size:32})),i.push(o),n+=Ai(o)):e.push(o)}return ha(...e,...i)}function AM(a,t){let{checksum:e=!1}=t;return Ul(a,{strict:e}),{dynamic:!1,encoded:cr(a.toLowerCase())}}function MM(a,t){let{checksumAddress:e,length:i,parameter:n}=t,r=i===null;if(!Array.isArray(a))throw new jd(a);if(!r&&a.length!==i)throw new Wd({expectedLength:i,givenLength:a.length,type:`${n.type}[${i}]`});let s=!1,o=[];for(let l=0;l<a.length;l++){let u=p1({checksumAddress:e,parameter:n,value:a[l]});u.dynamic&&(s=!0),o.push(u)}if(r||s){let l=Gd(o);if(r){let u=gi(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?ha(u,l):u}}if(s)return{dynamic:!0,encoded:l}}return{dynamic:!1,encoded:ha(...o.map(({encoded:l})=>l))}}function BM(a,{type:t}){let[,e]=t.split("bytes"),i=Ai(a);if(!e){let n=a;return i%32!==0&&(n=On(n,Math.ceil((a.length-2)/2/32)*32)),{dynamic:!0,encoded:ha(cr(gi(i,{size:32})),n)}}if(i!==Number.parseInt(e))throw new nu({expectedSize:Number.parseInt(e),value:a});return{dynamic:!1,encoded:On(a)}}function RM(a){if(typeof a!="boolean")throw new Ot(`Invalid boolean value: "${a}" (type: ${typeof a}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:cr(Md(a))}}function PM(a,{signed:t,size:e}){if(typeof e=="number"){let i=2n**(BigInt(e)-(t?1n:0n))-1n,n=t?-i-1n:0n;if(a>i||a<n)throw new iu({max:i.toString(),min:n.toString(),signed:t,size:e/8,value:a.toString()})}return{dynamic:!1,encoded:gi(a,{size:32,signed:t})}}function NM(a){let t=Ol(a),e=Math.ceil(Ai(t)/32),i=[];for(let n=0;n<e;n++)i.push(On(Hl(t,n*32,(n+1)*32)));return{dynamic:!0,encoded:ha(On(gi(Ai(t),{size:32})),...i)}}function OM(a,t){let{checksumAddress:e,parameter:i}=t,n=!1,r=[];for(let s=0;s<i.components.length;s++){let o=i.components[s],l=Array.isArray(a)?s:o.name,u=p1({checksumAddress:e,parameter:o,value:a[l]});r.push(u),u.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Gd(r):ha(...r.map(({encoded:s})=>s))}}function HM(a){let t=a.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Kd(a,t,e){let{checksumAddress:i=!1}=e??{};if(a.length!==t.length)throw new zd({expectedLength:a.length,givenLength:t.length});let n=XS({checksumAddress:i,parameters:a,values:t}),r=Gd(n);return r.length===0?"0x":r}function h1(a,t){if(a.length!==t.length)throw new zd({expectedLength:a.length,givenLength:t.length});let e=[];for(let i=0;i<a.length;i++){let n=a[i],r=t[i];e.push(h1.encode(n,r))}return ha(...e)}(function(a){function t(e,i,n=!1){if(e==="address"){let l=i;return Ul(l),cr(l.toLowerCase(),n?32:0)}if(e==="string")return Ol(i);if(e==="bytes")return i;if(e==="bool")return cr(Md(i),n?32:1);let r=e.match(Vd);if(r){let[l,u,m="256"]=r,h=Number.parseInt(m)/8;return gi(i,{size:n?32:h,signed:u==="int"})}let s=e.match($S);if(s){let[l,u]=s;if(Number.parseInt(u)!==(i.length-2)/2)throw new nu({expectedSize:Number.parseInt(u),value:i});return On(i,n?32:0)}let o=e.match(YS);if(o&&Array.isArray(i)){let[l,u]=o,m=[];for(let h=0;h<i.length;h++)m.push(t(u,i[h],!0));return m.length===0?"0x":ha(...m)}throw new ru(e)}a.encode=t})(h1||(h1={}));var Wd=class extends Ot{constructor({expectedLength:t,givenLength:e,type:i}){super(`Array length mismatch for type \`${i}\`. Expected: \`${t}\`. Given: \`${e}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},nu=class extends Ot{constructor({expectedSize:t,value:e}){super(`Size of bytes "${e}" (bytes${Ai(e)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},zd=class extends Ot{constructor({expectedLength:t,givenLength:e}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${e}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},jd=class extends Ot{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},ru=class extends Ot{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};function QS(a,t){let{bytecode:e,args:i}=t;return ha(e,a.inputs?.length&&i?.length?Kd(a.inputs,i):"0x")}function JS(a){return Fd(a)}function ZS(a,...t){let{overloads:e}=a,i=e?GM([a,...e],a.name,{args:t[0]}):a,n=WM(i),r=t.length>0?Kd(i.inputs,t[0]):void 0;return r?ha(n,r):n}function ro(a,t={}){return Fd(a,t)}function GM(a,t,e){let i=KS(a,t,e);if(i.type!=="function")throw new no({name:t,type:"function"});return i}function WM(a){return u1(a)}Pi();var eD="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",on="0x0000000000000000000000000000000000000000";jh();dt();ka();var zM="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function tD(a,t){let{blockNumber:e,blockTag:i,calls:n,stateOverrides:r,traceAssetChanges:s,traceTransfers:o,validation:l}=t,u=t.account?kt(t.account):void 0;if(s&&!u)throw new X("`account` is required when `traceAssetChanges` is true");let m=u?QS(JS("constructor(bytes, bytes)"),{bytecode:Wh,args:[zM,ZS(ro("function getBalance(address)"),[u.address])]}):void 0,h=s?await Promise.all(t.calls.map(async Se=>{if(!Se.data&&!Se.abi)return;let{accessList:lt}=await dd(a,{account:u.address,...Se,data:Se.abi?ti(Se):Se.data});return lt.map(({address:yt,storageKeys:qt})=>qt.length>0?yt:null)})).then(Se=>Se.flat().filter(Boolean)):[],y=r?.map(Se=>Se.address===u?.address?{...Se,nonce:0}:Se),x=await au(a,{blockNumber:e,blockTag:i,blocks:[...s?[{calls:[{data:m}],stateOverrides:r},{calls:h.map((Se,lt)=>({abi:[ro("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:Se,from:on,nonce:lt})),stateOverrides:[{address:on,nonce:0}]}]:[],{calls:[...n,{}].map((Se,lt)=>({...Se,from:u?.address,nonce:lt})),stateOverrides:y},...s?[{calls:[{data:m}]},{calls:h.map((Se,lt)=>({abi:[ro("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:Se,from:on,nonce:lt})),stateOverrides:[{address:on,nonce:0}]},{calls:h.map((Se,lt)=>({to:Se,abi:[ro("function decimals() returns (uint256)")],functionName:"decimals",from:on,nonce:lt})),stateOverrides:[{address:on,nonce:0}]},{calls:h.map((Se,lt)=>({to:Se,abi:[ro("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:on,nonce:lt})),stateOverrides:[{address:on,nonce:0}]},{calls:h.map((Se,lt)=>({to:Se,abi:[ro("function symbol() returns (string)")],functionName:"symbol",from:on,nonce:lt})),stateOverrides:[{address:on,nonce:0}]}]:[]],traceTransfers:o,validation:l}),E=s?x[2]:x[0],[S,T,,N,F,G,Y,Z]=s?x:[],{calls:ne,...J}=E,ue=ne.slice(0,-1)??[],se=S?.calls??[],Ie=T?.calls??[],Ce=[...se,...Ie].map(Se=>Se.status==="success"?ei(Se.data):null),te=N?.calls??[],et=F?.calls??[],me=[...te,...et].map(Se=>Se.status==="success"?ei(Se.data):null),ke=(G?.calls??[]).map(Se=>Se.status==="success"?Se.result:null),Me=(Z?.calls??[]).map(Se=>Se.status==="success"?Se.result:null),V=(Y?.calls??[]).map(Se=>Se.status==="success"?Se.result:null),Ye=[];for(let[Se,lt]of me.entries()){let yt=Ce[Se];if(typeof lt!="bigint"||typeof yt!="bigint")continue;let qt=ke[Se-1],Vt=Me[Se-1],at=V[Se-1],Ft=(()=>Se===0?{address:eD,decimals:18,symbol:"ETH"}:{address:h[Se-1],decimals:at||qt?Number(qt??1):void 0,symbol:Vt??void 0})();Ye.some(Zt=>Zt.token.address===Ft.address)||Ye.push({token:Ft,value:{pre:yt,post:lt,diff:lt-yt}})}return{assetChanges:Ye,block:J,results:ue}}Js();jh();ir();qh();Rs();zc();qa();Je();Eh();Gi();ki();function iD({r:a,s:t,to:e="hex",v:i,yParity:n}){let r=(()=>{if(n===0||n===1)return n;if(i&&(i===27n||i===28n||i>=35n))return i%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),s=`0x${new sr.Signature(ei(a),ei(t)).toCompactHex()}${r===0?"1b":"1c"}`;return e==="hex"?s:Ii(s)}wl();async function Vl(a,t){let{address:e,factory:i,factoryData:n,hash:r,signature:s,universalSignatureVerifierAddress:o=a.chain?.contracts?.universalSignatureVerifier?.address,...l}=t,u=(()=>di(s)?s:typeof s=="object"&&"r"in s&&"s"in s?iD(s):Et(s))(),m=await(async()=>!i&&!n||gS(u)?u:_S({address:i,data:n,signature:u}))();try{let h=o?{to:o,data:ti({abi:VE,functionName:"isValidSig",args:[e,r,m]}),...l}:{data:to({abi:VE,args:[e,r,m],bytecode:CC}),...l},{data:y}=await He(a,Bn,"call")(h);return KI(y??"0x0")}catch(h){try{if(is(Hm(e),await wh({hash:r,signature:s})))return!0}catch{}if(h instanceof Us)return!1;throw h}}async function aD(a,{address:t,message:e,factory:i,factoryData:n,signature:r,...s}){let o=xd(e);return Vl(a,{address:t,factory:i,factoryData:n,hash:o,signature:r,...s})}async function nD(a,t){let{address:e,factory:i,factoryData:n,signature:r,message:s,primaryType:o,types:l,domain:u,...m}=t,h=cS({message:s,primaryType:o,types:l,domain:u});return Vl(a,{address:e,factory:i,factoryData:n,hash:h,signature:r,...m})}tn();jE();ta();Gi();ta();function qd(a,{emitOnBegin:t=!1,emitMissed:e=!1,onBlockNumber:i,onError:n,poll:r,pollingInterval:s=a.pollingInterval}){let o=(()=>typeof r<"u"?r:!(a.transport.type==="webSocket"||a.transport.type==="fallback"&&a.transport.transports[0].config.type==="webSocket"))(),l;return o?(()=>{let h=wt(["watchBlockNumber",a.uid,t,e,s]);return ma(h,{onBlockNumber:i,onError:n},y=>Rn(async()=>{try{let x=await He(a,Pn,"getBlockNumber")({cacheTime:0});if(l){if(x===l)return;if(x-l>1&&e)for(let E=l+1n;E<x;E++)y.onBlockNumber(E,l),l=E}(!l||x>l)&&(y.onBlockNumber(x,l),l=x)}catch(x){y.onError?.(x)}},{emitOnBegin:t,interval:s}))})():(()=>{let h=wt(["watchBlockNumber",a.uid,t,e]);return ma(h,{onBlockNumber:i,onError:n},y=>{let x=!0,E=()=>x=!1;return(async()=>{try{let S=(()=>{if(a.transport.type==="fallback"){let N=a.transport.transports.find(F=>F.config.type==="webSocket");return N?N.value:a.transport}return a.transport})(),{unsubscribe:T}=await S.subscribe({params:["newHeads"],onData(N){if(!x)return;let F=ei(N.result?.number);y.onBlockNumber(F,l),l=F},onError(N){y.onError?.(N)}});E=T,x||E()}catch(S){n?.(S)}})(),()=>E()})})()}async function rD(a,{confirmations:t=1,hash:e,onReplaced:i,pollingInterval:n=a.pollingInterval,retryCount:r=6,retryDelay:s=({count:l})=>~~(1<<l)*200,timeout:o=18e4}){let l=wt(["waitForTransactionReceipt",a.uid,e]),u,m,h,y=!1,{promise:x,resolve:E,reject:S}=$h(),T=o?setTimeout(()=>S(new sh({hash:e})),o):void 0,N=ma(l,{onReplaced:i,resolve:E,reject:S},F=>{let G=He(a,qd,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:n,async onBlockNumber(Y){let Z=J=>{clearTimeout(T),G(),J(),N()},ne=Y;if(!y)try{if(h){if(t>1&&(!h.blockNumber||ne-h.blockNumber+1n<t))return;Z(()=>F.resolve(h));return}if(u||(y=!0,await Xc(async()=>{u=await He(a,Pl,"getTransaction")({hash:e}),u.blockNumber&&(ne=u.blockNumber)},{delay:s,retryCount:r}),y=!1),h=await He(a,Zc,"getTransactionReceipt")({hash:e}),t>1&&(!h.blockNumber||ne-h.blockNumber+1n<t))return;Z(()=>F.resolve(h))}catch(J){if(J instanceof Wo||J instanceof jo){if(!u){y=!1;return}try{m=u,y=!0;let ue=await Xc(()=>He(a,Ki,"getBlock")({blockNumber:ne,includeTransactions:!0}),{delay:s,retryCount:r,shouldRetry:({error:Ce})=>Ce instanceof yl});y=!1;let se=ue.transactions.find(({from:Ce,nonce:te})=>Ce===m.from&&te===m.nonce);if(!se||(h=await He(a,Zc,"getTransactionReceipt")({hash:se.hash}),t>1&&(!h.blockNumber||ne-h.blockNumber+1n<t)))return;let Ie="replaced";se.to===m.to&&se.value===m.value&&se.input===m.input?Ie="repriced":se.from===se.to&&se.value===0n&&(Ie="cancelled"),Z(()=>{F.onReplaced?.({reason:Ie,replacedTransaction:m,transaction:se,transactionReceipt:h}),F.resolve(h)})}catch(ue){Z(()=>F.reject(ue))}}else Z(()=>F.reject(J))}}})});return x}ta();function sD(a,{blockTag:t="latest",emitMissed:e=!1,emitOnBegin:i=!1,onBlock:n,onError:r,includeTransactions:s,poll:o,pollingInterval:l=a.pollingInterval}){let u=(()=>typeof o<"u"?o:!(a.transport.type==="webSocket"||a.transport.type==="fallback"&&a.transport.transports[0].config.type==="webSocket"))(),m=s??!1,h;return u?(()=>{let E=wt(["watchBlocks",a.uid,t,e,i,m,l]);return ma(E,{onBlock:n,onError:r},S=>Rn(async()=>{try{let T=await He(a,Ki,"getBlock")({blockTag:t,includeTransactions:m});if(T.number&&h?.number){if(T.number===h.number)return;if(T.number-h.number>1&&e)for(let N=h?.number+1n;N<T.number;N++){let F=await He(a,Ki,"getBlock")({blockNumber:N,includeTransactions:m});S.onBlock(F,h),h=F}}(!h?.number||t==="pending"&&!T?.number||T.number&&T.number>h.number)&&(S.onBlock(T,h),h=T)}catch(T){S.onError?.(T)}},{emitOnBegin:i,interval:l}))})():(()=>{let E=!0,S=!0,T=()=>E=!1;return(async()=>{try{i&&He(a,Ki,"getBlock")({blockTag:t,includeTransactions:m}).then(G=>{E&&S&&(n(G,void 0),S=!1)});let N=(()=>{if(a.transport.type==="fallback"){let G=a.transport.transports.find(Y=>Y.config.type==="webSocket");return G?G.value:a.transport}return a.transport})(),{unsubscribe:F}=await N.subscribe({params:["newHeads"],async onData(G){if(!E)return;let Y=await He(a,Ki,"getBlock")({blockNumber:G.blockNumber,includeTransactions:m}).catch(()=>{});E&&(n(Y,h),S=!1,h=Y)},onError(G){r?.(G)}});T=F,E||T()}catch(N){r?.(N)}})(),()=>T()})()}ta();xi();Rc();function oD(a,{address:t,args:e,batch:i=!0,event:n,events:r,fromBlock:s,onError:o,onLogs:l,poll:u,pollingInterval:m=a.pollingInterval,strict:h}){let y=(()=>typeof u<"u"?u:typeof s=="bigint"?!0:!(a.transport.type==="webSocket"||a.transport.type==="fallback"&&a.transport.transports[0].config.type==="webSocket"))(),x=h??!1;return y?(()=>{let T=wt(["watchEvent",t,e,i,a.uid,n,m,s]);return ma(T,{onLogs:l,onError:o},N=>{let F;s!==void 0&&(F=s-1n);let G,Y=!1,Z=Rn(async()=>{if(!Y){try{G=await He(a,fd,"createEventFilter")({address:t,args:e,event:n,events:r,strict:x,fromBlock:s})}catch{}Y=!0;return}try{let ne;if(G)ne=await He(a,ns,"getFilterChanges")({filter:G});else{let J=await He(a,Pn,"getBlockNumber")({});F&&F!==J?ne=await He(a,El,"getLogs")({address:t,args:e,event:n,events:r,fromBlock:F+1n,toBlock:J}):ne=[],F=J}if(ne.length===0)return;if(i)N.onLogs(ne);else for(let J of ne)N.onLogs([J])}catch(ne){G&&ne instanceof Sn&&(Y=!1),N.onError?.(ne)}},{emitOnBegin:!0,interval:m});return async()=>{G&&await He(a,rs,"uninstallFilter")({filter:G}),Z()}})})():(()=>{let T=!0,N=()=>T=!1;return(async()=>{try{let F=(()=>{if(a.transport.type==="fallback"){let ne=a.transport.transports.find(J=>J.config.type==="webSocket");return ne?ne.value:a.transport}return a.transport})(),G=r??(n?[n]:void 0),Y=[];G&&(Y=[G.flatMap(J=>Tn({abi:[J],eventName:J.name,args:e}))],n&&(Y=Y[0]));let{unsubscribe:Z}=await F.subscribe({params:["logs",{address:t,topics:Y}],onData(ne){if(!T)return;let J=ne.result;try{let{eventName:ue,args:se}=xl({abi:G??[],data:J.data,topics:J.topics,strict:x}),Ie=qi(J,{args:se,eventName:ue});l([Ie])}catch(ue){let se,Ie;if(ue instanceof $a||ue instanceof xn){if(h)return;se=ue.abiItem.name,Ie=ue.abiItem.inputs?.some(te=>!("name"in te&&te.name))}let Ce=qi(J,{args:Ie?[]:{},eventName:se});l([Ce])}},onError(ne){o?.(ne)}});N=Z,T||N()}catch(F){o?.(F)}})(),()=>N()})()}ta();function lD(a,{batch:t=!0,onError:e,onTransactions:i,poll:n,pollingInterval:r=a.pollingInterval}){return(typeof n<"u"?n:a.transport.type!=="webSocket")?(()=>{let u=wt(["watchPendingTransactions",a.uid,t,r]);return ma(u,{onTransactions:i,onError:e},m=>{let h,y=Rn(async()=>{try{if(!h)try{h=await He(a,yd,"createPendingTransactionFilter")({});return}catch(E){throw y(),E}let x=await He(a,ns,"getFilterChanges")({filter:h});if(x.length===0)return;if(t)m.onTransactions(x);else for(let E of x)m.onTransactions([E])}catch(x){m.onError?.(x)}},{emitOnBegin:!0,interval:r});return async()=>{h&&await He(a,rs,"uninstallFilter")({filter:h}),y()}})})():(()=>{let u=!0,m=()=>u=!1;return(async()=>{try{let{unsubscribe:h}=await a.transport.subscribe({params:["newPendingTransactions"],onData(y){if(!u)return;let x=y.result;i([x])},onError(y){e?.(y)}});m=h,u||m()}catch(h){e?.(h)}})(),()=>m()})()}function cD(a){let{scheme:t,statement:e,...i}=a.match(KM)?.groups??{},{chainId:n,expirationTime:r,issuedAt:s,notBefore:o,requestId:l,...u}=a.match(qM)?.groups??{},m=a.split("Resources:")[1]?.split(`
- `).slice(1);return{...i,...u,...n?{chainId:Number(n)}:{},...r?{expirationTime:new Date(r)}:{},...s?{issuedAt:new Date(s)}:{},...o?{notBefore:new Date(o)}:{},...l?{requestId:l}:{},...m?{resources:m}:{},...t?{scheme:t}:{},...e?{statement:e}:{}}}var KM=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,qM=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;zc();function uD(a){let{address:t,domain:e,message:i,nonce:n,scheme:r,time:s=new Date}=a;if(e&&i.domain!==e||n&&i.nonce!==n||r&&i.scheme!==r||i.expirationTime&&s>=i.expirationTime||i.notBefore&&s<i.notBefore)return!1;try{if(!i.address||t&&!is(i.address,t))return!1}catch{return!1}return!0}async function pD(a,t){let{address:e,domain:i,message:n,nonce:r,scheme:s,signature:o,time:l=new Date,...u}=t,m=cD(n);if(!m.address||!uD({address:e,domain:i,message:m,nonce:r,scheme:s,time:l}))return!1;let y=xd(n);return Vl(a,{address:m.address,hash:y,signature:o,...u})}function mD(a){return{call:t=>Bn(a,t),createAccessList:t=>dd(a,t),createBlockFilter:()=>aS(a),createContractEventFilter:t=>Gm(a,t),createEventFilter:t=>fd(a,t),createPendingTransactionFilter:()=>yd(a),estimateContractGas:t=>LC(a,t),estimateGas:t=>vl(a,t),getBalance:t=>Fh(a,t),getBlobBaseFee:()=>nS(a),getBlock:t=>Ki(a,t),getBlockNumber:t=>Pn(a,t),getBlockTransactionCount:t=>rS(a,t),getBytecode:t=>JE(a,t),getChainId:()=>Mn(a),getCode:t=>JE(a,t),getContractEvents:t=>Vh(a,t),getEip712Domain:t=>FC(a,t),getEnsAddress:t=>YC(a,t),getEnsAvatar:t=>eS(a,t),getEnsName:t=>tS(a,t),getEnsResolver:t=>iS(a,t),getEnsText:t=>hd(a,t),getFeeHistory:t=>oS(a,t),estimateFeesPerGas:t=>fC(a,t),getFilterChanges:t=>ns(a,t),getFilterLogs:t=>lS(a,t),getGasPrice:()=>bl(a),getLogs:t=>El(a,t),getProof:t=>CS(a,t),estimateMaxPriorityFeePerGas:t=>dC(a,t),getStorageAt:t=>SS(a,t),getTransaction:t=>Pl(a,t),getTransactionConfirmations:t=>DS(a,t),getTransactionCount:t=>Bh(a,t),getTransactionReceipt:t=>Zc(a,t),multicall:t=>kS(a,t),prepareTransactionRequest:t=>ts(a,t),readContract:t=>Ni(a,t),sendRawTransaction:t=>Cl(a,t),simulate:t=>au(a,t),simulateBlocks:t=>au(a,t),simulateCalls:t=>tD(a,t),simulateContract:t=>BC(a,t),verifyMessage:t=>aD(a,t),verifySiweMessage:t=>pD(a,t),verifyTypedData:t=>nD(a,t),uninstallFilter:t=>rs(a,t),waitForTransactionReceipt:t=>rD(a,t),watchBlocks:t=>sD(a,t),watchBlockNumber:t=>qd(a,t),watchContractEvent:t=>OC(a,t),watchEvent:t=>oD(a,t),watchPendingTransactions:t=>lD(a,t)}}function su(a){let{key:t="public",name:e="Public Client"}=a;return rd({...a,key:t,name:e,type:"publicClient"}).extend(mD)}qh();function hD(a,t){let{abi:e,args:i,bytecode:n,...r}=t,s=to({abi:e,args:i,bytecode:n});return Sl(a,{...r,...r.authorizationList?{to:null}:{},data:s})}Rs();async function dD(a){return a.account?.type==="local"?[a.account.address]:(await a.request({method:"eth_accounts"},{dedupe:!0})).map(e=>er(e))}async function fD(a){return await a.request({method:"wallet_getPermissions"},{dedupe:!0})}Rs();async function yD(a){return(await a.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(e=>Hm(e))}async function bD(a,t){return a.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}Pi();Je();async function gD(a,{account:t=a.account,message:e}){if(!t)throw new Oa({docsPath:"/docs/actions/wallet/signMessage"});let i=kt(t);if(i.signMessage)return i.signMessage({message:e});let n=(()=>typeof e=="string"?Xa(e):e.raw instanceof Uint8Array?Fe(e.raw):e.raw)();return a.request({method:"personal_sign",params:[n,i.address]},{retryCount:0})}Pi();Je();Xs();Zr();async function _D(a,t){let{account:e=a.account,chain:i=a.chain,...n}=t;if(!e)throw new Oa({docsPath:"/docs/actions/wallet/signTransaction"});let r=kt(e);ua({account:r,...t});let s=await He(a,Mn,"getChainId")({});i!==null&&ed({currentChainId:s,chain:i});let l=(i?.formatters||a.chain?.formatters)?.transactionRequest?.format||Pa;return r.signTransaction?r.signTransaction({...n,chainId:s},{serializer:a.chain?.serializers?.transaction}):await a.request({method:"eth_signTransaction",params:[{...l(n),chainId:Ue(s),from:r.address}]},{retryCount:0})}Pi();async function LD(a,t){let{account:e=a.account,domain:i,message:n,primaryType:r}=t;if(!e)throw new Oa({docsPath:"/docs/actions/wallet/signTypedData"});let s=kt(e),o={EIP712Domain:vd({domain:i}),...t.types};if(Ld({domain:i,message:n,primaryType:r,types:o}),s.signTypedData)return s.signTypedData({domain:i,message:n,primaryType:r,types:o});let l=dS({domain:i,message:n,primaryType:r,types:o});return a.request({method:"eth_signTypedData_v4",params:[s.address,l]},{retryCount:0})}Je();async function vD(a,{id:t}){await a.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(t)}]},{retryCount:0})}async function xD(a,t){return await a.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function ID(a){return{addChain:t=>VC(a,t),deployContract:t=>hD(a,t),getAddresses:()=>dD(a),getChainId:()=>Mn(a),getPermissions:()=>fD(a),prepareTransactionRequest:t=>ts(a,t),requestAddresses:()=>yD(a),requestPermissions:t=>bD(a,t),sendRawTransaction:t=>Cl(a,t),sendTransaction:t=>Sl(a,t),signMessage:t=>gD(a,t),signTransaction:t=>_D(a,t),signTypedData:t=>LD(a,t),switchChain:t=>vD(a,t),watchAsset:t=>xD(a,t),writeContract:t=>UC(a,t)}}function Gl(a){let{key:t="wallet",name:e="Wallet Client",transport:i}=a;return rd({...a,key:t,name:e,transport:i,type:"walletClient"}).extend(ID)}dt();ir();Je();Qm();var Mi=class{constructor(){}};Mi.UPDATE_LOCAL_WALLET_LIST_EVENT="WalletEvent:UPDATE_LOCAL_WALLET_LIST_EVENT",Mi.TRANSFER_LOCAL_WALLET_EVENT="WalletEvent:TRANSFER_LOCAL_WALLET_EVENT";var Yd=class{};var Xt=class{constructor(){this.extra={}}};var g=$1(nk());var Ge;(t=>{let a;(i=>{let e;(Se=>{var lt,qt,at,Zt,aa,yn,Qi,_a,wr,zn,Cr,Io,D,j,P,pe,De,Te,ot,Lt,It,sa,Fi,qn,Yn,rp,sp,op,lp;let n;(gn=>(gn[gn.SYS_NORMAL=1]="SYS_NORMAL",gn[gn.UNKNOWN=2]="UNKNOWN",gn[gn.USER_NOT_EXIST=3]="USER_NOT_EXIST",gn[gn.SYS_DATA_ERROR=4]="SYS_DATA_ERROR",gn[gn.WALLET_ADDRESS_ERROR=5]="WALLET_ADDRESS_ERROR"))(n=Se.MessageCode||(Se.MessageCode={}));let r;(ht=>(ht[ht.MSG_HEART_BEAT=10001]="MSG_HEART_BEAT",ht[ht.MSG_REG_HALL=10002]="MSG_REG_HALL",ht[ht.MSG_REG_ROOM=10003]="MSG_REG_ROOM",ht[ht.MSG_REMOVE_HALL=11002]="MSG_REMOVE_HALL",ht[ht.MSG_REMOVE_ROOM=11003]="MSG_REMOVE_ROOM",ht[ht.MSG_USER_REGISTER=101]="MSG_USER_REGISTER",ht[ht.MSG_USER_LOGIN=102]="MSG_USER_LOGIN",ht[ht.MSG_REPEAT_LOGIN_NOTICE=103]="MSG_REPEAT_LOGIN_NOTICE",ht[ht.MSG_REQUEST_ROOM_ADDR=104]="MSG_REQUEST_ROOM_ADDR",ht[ht.MSG_ENTER_ROOM=105]="MSG_ENTER_ROOM",ht[ht.MSG_PLAYER_OPR=106]="MSG_PLAYER_OPR",ht[ht.MSG_PLAYER_STATE=107]="MSG_PLAYER_STATE",ht[ht.MSG_GEN_FOOD=108]="MSG_GEN_FOOD",ht[ht.MSG_UPDATE_ROLE=109]="MSG_UPDATE_ROLE",ht[ht.MSG_NOTICE_ENTER=110]="MSG_NOTICE_ENTER",ht[ht.MSG_BATTLE_END=111]="MSG_BATTLE_END",ht[ht.MSG_EAT_FOOD=112]="MSG_EAT_FOOD",ht[ht.MSG_PLAYER_COLLISION=113]="MSG_PLAYER_COLLISION",ht[ht.MSG_REQUEST_SERVER_TIME=114]="MSG_REQUEST_SERVER_TIME",ht[ht.MSG_REQUEST_ROOM_DATA=115]="MSG_REQUEST_ROOM_DATA"))(r=Se.MessageType||(Se.MessageType={}));let yt=class yt extends g.Message{constructor(c){super();Nt(this,lt,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,lt)),!Array.isArray(c)&&typeof c=="object"&&(this.msghead=c.msghead,"msgbody"in c&&c.msgbody!=null&&(this.msgbody=c.msgbody))}get msghead(){return g.Message.getWrapperField(this,o,1)}set msghead(c){g.Message.setWrapperField(this,1,c)}get has_msghead(){return g.Message.getField(this,1)!=null}get msgbody(){return g.Message.getFieldWithDefault(this,2,new Uint8Array(0))}set msgbody(c){g.Message.setField(this,2,c)}get has_msgbody(){return g.Message.getField(this,2)!=null}static fromObject(c){let f=new yt({msghead:o.fromObject(c.msghead)});return c.msgbody!=null&&(f.msgbody=c.msgbody),f}toObject(){let c={};return this.msghead!=null&&(c.msghead=this.msghead.toObject()),this.msgbody!=null&&(c.msgbody=this.msgbody),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_msghead&&f.writeMessage(1,this.msghead,()=>this.msghead.serialize(f)),this.has_msgbody&&this.msgbody.length&&f.writeBytes(2,this.msgbody),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new yt;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:f.readMessage(H.msghead,()=>H.msghead=o.deserialize(f));break;case 2:H.msgbody=f.readBytes();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return yt.deserialize(c)}};lt=new WeakMap;let s=yt;Se.CMsgBase=yt;let Vt=class Vt extends g.Message{constructor(c){super();Nt(this,qt,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,qt)),!Array.isArray(c)&&typeof c=="object"&&(this.msgtype=c.msgtype,this.msgcode=c.msgcode,"roleId"in c&&c.roleId!=null&&(this.roleId=c.roleId))}get msgtype(){return g.Message.getField(this,1)}set msgtype(c){g.Message.setField(this,1,c)}get has_msgtype(){return g.Message.getField(this,1)!=null}get msgcode(){return g.Message.getField(this,2)}set msgcode(c){g.Message.setField(this,2,c)}get has_msgcode(){return g.Message.getField(this,2)!=null}get roleId(){return g.Message.getFieldWithDefault(this,3,"")}set roleId(c){g.Message.setField(this,3,c)}get has_roleId(){return g.Message.getField(this,3)!=null}static fromObject(c){let f=new Vt({msgtype:c.msgtype,msgcode:c.msgcode});return c.roleId!=null&&(f.roleId=c.roleId),f}toObject(){let c={};return this.msgtype!=null&&(c.msgtype=this.msgtype),this.msgcode!=null&&(c.msgcode=this.msgcode),this.roleId!=null&&(c.roleId=this.roleId),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_msgtype&&f.writeInt32(1,this.msgtype),this.has_msgcode&&f.writeInt32(2,this.msgcode),this.has_roleId&&this.roleId.length&&f.writeString(3,this.roleId),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Vt;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.msgtype=f.readInt32();break;case 2:H.msgcode=f.readInt32();break;case 3:H.roleId=f.readString();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Vt.deserialize(c)}};qt=new WeakMap;let o=Vt;Se.CMsgHead=Vt;let Ft=class Ft extends g.Message{constructor(c){super();Nt(this,at,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,at)),!Array.isArray(c)&&typeof c=="object"&&(this.hallId=c.hallId)}get hallId(){return g.Message.getField(this,1)}set hallId(c){g.Message.setField(this,1,c)}get has_hallId(){return g.Message.getField(this,1)!=null}static fromObject(c){return new Ft({hallId:c.hallId})}toObject(){let c={};return this.hallId!=null&&(c.hallId=this.hallId),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_hallId&&this.hallId.length&&f.writeString(1,this.hallId),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Ft;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.hallId=f.readString();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Ft.deserialize(c)}};at=new WeakMap;let l=Ft;Se.SS_REG_HALL=Ft;let Xi=class Xi extends g.Message{constructor(c){super();Nt(this,Zt,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[12],Pt(this,Zt)),!Array.isArray(c)&&typeof c=="object"&&(this.roleId=c.roleId,"userName"in c&&c.userName!=null&&(this.userName=c.userName),"icon"in c&&c.icon!=null&&(this.icon=c.icon),"createTime"in c&&c.createTime!=null&&(this.createTime=c.createTime),"score"in c&&c.score!=null&&(this.score=c.score),"country"in c&&c.country!=null&&(this.country=c.country),"club"in c&&c.club!=null&&(this.club=c.club),"code"in c&&c.code!=null&&(this.code=c.code),"walletAddr"in c&&c.walletAddr!=null&&(this.walletAddr=c.walletAddr),"snakeId"in c&&c.snakeId!=null&&(this.snakeId=c.snakeId),"kills"in c&&c.kills!=null&&(this.kills=c.kills),this.items=c.items)}get roleId(){return g.Message.getField(this,1)}set roleId(c){g.Message.setField(this,1,c)}get has_roleId(){return g.Message.getField(this,1)!=null}get userName(){return g.Message.getFieldWithDefault(this,2,"")}set userName(c){g.Message.setField(this,2,c)}get has_userName(){return g.Message.getField(this,2)!=null}get icon(){return g.Message.getFieldWithDefault(this,3,"")}set icon(c){g.Message.setField(this,3,c)}get has_icon(){return g.Message.getField(this,3)!=null}get createTime(){return g.Message.getFieldWithDefault(this,4,0)}set createTime(c){g.Message.setField(this,4,c)}get has_createTime(){return g.Message.getField(this,4)!=null}get score(){return g.Message.getFieldWithDefault(this,5,0)}set score(c){g.Message.setField(this,5,c)}get has_score(){return g.Message.getField(this,5)!=null}get country(){return g.Message.getFieldWithDefault(this,6,0)}set country(c){g.Message.setField(this,6,c)}get has_country(){return g.Message.getField(this,6)!=null}get club(){return g.Message.getFieldWithDefault(this,7,"")}set club(c){g.Message.setField(this,7,c)}get has_club(){return g.Message.getField(this,7)!=null}get code(){return g.Message.getFieldWithDefault(this,8,"")}set code(c){g.Message.setField(this,8,c)}get has_code(){return g.Message.getField(this,8)!=null}get walletAddr(){return g.Message.getFieldWithDefault(this,9,"")}set walletAddr(c){g.Message.setField(this,9,c)}get has_walletAddr(){return g.Message.getField(this,9)!=null}get snakeId(){return g.Message.getFieldWithDefault(this,10,0)}set snakeId(c){g.Message.setField(this,10,c)}get has_snakeId(){return g.Message.getField(this,10)!=null}get kills(){return g.Message.getFieldWithDefault(this,11,0)}set kills(c){g.Message.setField(this,11,c)}get has_kills(){return g.Message.getField(this,11)!=null}get items(){return g.Message.getRepeatedWrapperField(this,m,12)}set items(c){g.Message.setRepeatedWrapperField(this,12,c)}static fromObject(c){let f=new Xi({roleId:c.roleId,items:c.items.map(H=>m.fromObject(H))});return c.userName!=null&&(f.userName=c.userName),c.icon!=null&&(f.icon=c.icon),c.createTime!=null&&(f.createTime=c.createTime),c.score!=null&&(f.score=c.score),c.country!=null&&(f.country=c.country),c.club!=null&&(f.club=c.club),c.code!=null&&(f.code=c.code),c.walletAddr!=null&&(f.walletAddr=c.walletAddr),c.snakeId!=null&&(f.snakeId=c.snakeId),c.kills!=null&&(f.kills=c.kills),f}toObject(){let c={};return this.roleId!=null&&(c.roleId=this.roleId),this.userName!=null&&(c.userName=this.userName),this.icon!=null&&(c.icon=this.icon),this.createTime!=null&&(c.createTime=this.createTime),this.score!=null&&(c.score=this.score),this.country!=null&&(c.country=this.country),this.club!=null&&(c.club=this.club),this.code!=null&&(c.code=this.code),this.walletAddr!=null&&(c.walletAddr=this.walletAddr),this.snakeId!=null&&(c.snakeId=this.snakeId),this.kills!=null&&(c.kills=this.kills),this.items!=null&&(c.items=this.items.map(f=>f.toObject())),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_roleId&&this.roleId.length&&f.writeString(1,this.roleId),this.has_userName&&this.userName.length&&f.writeString(2,this.userName),this.has_icon&&this.icon.length&&f.writeString(3,this.icon),this.has_createTime&&f.writeInt64(4,this.createTime),this.has_score&&f.writeInt32(5,this.score),this.has_country&&f.writeInt32(6,this.country),this.has_club&&this.club.length&&f.writeString(7,this.club),this.has_code&&this.code.length&&f.writeString(8,this.code),this.has_walletAddr&&this.walletAddr.length&&f.writeString(9,this.walletAddr),this.has_snakeId&&f.writeInt32(10,this.snakeId),this.has_kills&&f.writeInt32(11,this.kills),this.items.length&&f.writeRepeatedMessage(12,this.items,H=>H.serialize(f)),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Xi;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.roleId=f.readString();break;case 2:H.userName=f.readString();break;case 3:H.icon=f.readString();break;case 4:H.createTime=f.readInt64();break;case 5:H.score=f.readInt32();break;case 6:H.country=f.readInt32();break;case 7:H.club=f.readString();break;case 8:H.code=f.readString();break;case 9:H.walletAddr=f.readString();break;case 10:H.snakeId=f.readInt32();break;case 11:H.kills=f.readInt32();break;case 12:f.readMessage(H.items,()=>g.Message.addToRepeatedWrapperField(H,12,m.deserialize(f),m));break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Xi.deserialize(c)}};Zt=new WeakMap;let u=Xi;Se.RoleObject=Xi;let na=class na extends g.Message{constructor(c){super();Nt(this,aa,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,aa)),!Array.isArray(c)&&typeof c=="object"&&("itemId"in c&&c.itemId!=null&&(this.itemId=c.itemId),"num"in c&&c.num!=null&&(this.num=c.num))}get itemId(){return g.Message.getFieldWithDefault(this,1,0)}set itemId(c){g.Message.setField(this,1,c)}get has_itemId(){return g.Message.getField(this,1)!=null}get num(){return g.Message.getFieldWithDefault(this,2,0)}set num(c){g.Message.setField(this,2,c)}get has_num(){return g.Message.getField(this,2)!=null}static fromObject(c){let f=new na({});return c.itemId!=null&&(f.itemId=c.itemId),c.num!=null&&(f.num=c.num),f}toObject(){let c={};return this.itemId!=null&&(c.itemId=this.itemId),this.num!=null&&(c.num=this.num),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_itemId&&f.writeInt32(1,this.itemId),this.has_num&&f.writeInt32(2,this.num),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new na;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.itemId=f.readInt32();break;case 2:H.num=f.readInt32();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return na.deserialize(c)}};aa=new WeakMap;let m=na;Se.ItemObject=na;let ra=class ra extends g.Message{constructor(c){super();Nt(this,yn,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,yn)),!Array.isArray(c)&&typeof c=="object"&&(this.icon=c.icon,this.userName=c.userName,this.country=c.country,"walletAddr"in c&&c.walletAddr!=null&&(this.walletAddr=c.walletAddr))}get icon(){return g.Message.getField(this,1)}set icon(c){g.Message.setField(this,1,c)}get has_icon(){return g.Message.getField(this,1)!=null}get userName(){return g.Message.getField(this,2)}set userName(c){g.Message.setField(this,2,c)}get has_userName(){return g.Message.getField(this,2)!=null}get country(){return g.Message.getField(this,3)}set country(c){g.Message.setField(this,3,c)}get has_country(){return g.Message.getField(this,3)!=null}get walletAddr(){return g.Message.getFieldWithDefault(this,4,"")}set walletAddr(c){g.Message.setField(this,4,c)}get has_walletAddr(){return g.Message.getField(this,4)!=null}static fromObject(c){let f=new ra({icon:c.icon,userName:c.userName,country:c.country});return c.walletAddr!=null&&(f.walletAddr=c.walletAddr),f}toObject(){let c={};return this.icon!=null&&(c.icon=this.icon),this.userName!=null&&(c.userName=this.userName),this.country!=null&&(c.country=this.country),this.walletAddr!=null&&(c.walletAddr=this.walletAddr),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_icon&&this.icon.length&&f.writeString(1,this.icon),this.has_userName&&this.userName.length&&f.writeString(2,this.userName),this.has_country&&f.writeInt32(3,this.country),this.has_walletAddr&&this.walletAddr.length&&f.writeString(4,this.walletAddr),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new ra;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.icon=f.readString();break;case 2:H.userName=f.readString();break;case 3:H.country=f.readInt32();break;case 4:H.walletAddr=f.readString();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return ra.deserialize(c)}};yn=new WeakMap;let h=ra;Se.CS_USER_REGISTER=ra;let ga=class ga extends g.Message{constructor(c){super();Nt(this,Qi,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,Qi)),!Array.isArray(c)&&typeof c=="object"&&(this.roleInfo=c.roleInfo)}get roleInfo(){return g.Message.getWrapperField(this,u,1)}set roleInfo(c){g.Message.setWrapperField(this,1,c)}get has_roleInfo(){return g.Message.getField(this,1)!=null}static fromObject(c){return new ga({roleInfo:u.fromObject(c.roleInfo)})}toObject(){let c={};return this.roleInfo!=null&&(c.roleInfo=this.roleInfo.toObject()),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_roleInfo&&f.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(f)),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new ga;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:f.readMessage(H.roleInfo,()=>H.roleInfo=u.deserialize(f));break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return ga.deserialize(c)}};Qi=new WeakMap;let y=ga;Se.SC_USER_REGISTER=ga;let bn=class bn extends g.Message{constructor(c){super();Nt(this,_a,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,_a)),!Array.isArray(c)&&typeof c=="object"&&(this.roleId=c.roleId,"randomHex"in c&&c.randomHex!=null&&(this.randomHex=c.randomHex),"time"in c&&c.time!=null&&(this.time=c.time),"r"in c&&c.r!=null&&(this.r=c.r),"s"in c&&c.s!=null&&(this.s=c.s),"v"in c&&c.v!=null&&(this.v=c.v))}get roleId(){return g.Message.getField(this,1)}set roleId(c){g.Message.setField(this,1,c)}get has_roleId(){return g.Message.getField(this,1)!=null}get randomHex(){return g.Message.getFieldWithDefault(this,2,"")}set randomHex(c){g.Message.setField(this,2,c)}get has_randomHex(){return g.Message.getField(this,2)!=null}get time(){return g.Message.getFieldWithDefault(this,3,0)}set time(c){g.Message.setField(this,3,c)}get has_time(){return g.Message.getField(this,3)!=null}get r(){return g.Message.getFieldWithDefault(this,4,"")}set r(c){g.Message.setField(this,4,c)}get has_r(){return g.Message.getField(this,4)!=null}get s(){return g.Message.getFieldWithDefault(this,5,"")}set s(c){g.Message.setField(this,5,c)}get has_s(){return g.Message.getField(this,5)!=null}get v(){return g.Message.getFieldWithDefault(this,6,"")}set v(c){g.Message.setField(this,6,c)}get has_v(){return g.Message.getField(this,6)!=null}static fromObject(c){let f=new bn({roleId:c.roleId});return c.randomHex!=null&&(f.randomHex=c.randomHex),c.time!=null&&(f.time=c.time),c.r!=null&&(f.r=c.r),c.s!=null&&(f.s=c.s),c.v!=null&&(f.v=c.v),f}toObject(){let c={};return this.roleId!=null&&(c.roleId=this.roleId),this.randomHex!=null&&(c.randomHex=this.randomHex),this.time!=null&&(c.time=this.time),this.r!=null&&(c.r=this.r),this.s!=null&&(c.s=this.s),this.v!=null&&(c.v=this.v),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_roleId&&this.roleId.length&&f.writeString(1,this.roleId),this.has_randomHex&&this.randomHex.length&&f.writeString(2,this.randomHex),this.has_time&&f.writeInt64(3,this.time),this.has_r&&this.r.length&&f.writeString(4,this.r),this.has_s&&this.s.length&&f.writeString(5,this.s),this.has_v&&this.v.length&&f.writeString(6,this.v),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new bn;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.roleId=f.readString();break;case 2:H.randomHex=f.readString();break;case 3:H.time=f.readInt64();break;case 4:H.r=f.readString();break;case 5:H.s=f.readString();break;case 6:H.v=f.readString();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return bn.deserialize(c)}};_a=new WeakMap;let x=bn;Se.CS_USER_LOGIN=bn;let Ss=class Ss extends g.Message{constructor(c){super();Nt(this,wr,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,wr)),!Array.isArray(c)&&typeof c=="object"&&"roleInfo"in c&&c.roleInfo!=null&&(this.roleInfo=c.roleInfo)}get roleInfo(){return g.Message.getWrapperField(this,u,1)}set roleInfo(c){g.Message.setWrapperField(this,1,c)}get has_roleInfo(){return g.Message.getField(this,1)!=null}static fromObject(c){let f=new Ss({});return c.roleInfo!=null&&(f.roleInfo=u.fromObject(c.roleInfo)),f}toObject(){let c={};return this.roleInfo!=null&&(c.roleInfo=this.roleInfo.toObject()),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_roleInfo&&f.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(f)),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Ss;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:f.readMessage(H.roleInfo,()=>H.roleInfo=u.deserialize(f));break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Ss.deserialize(c)}};wr=new WeakMap;let E=Ss;Se.SC_USER_LOGIN=Ss;let Tr=class Tr extends g.Message{constructor(c){super();Nt(this,zn,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,zn)),!Array.isArray(c)&&typeof c=="object"&&(this.type=c.type)}get type(){return g.Message.getField(this,1)}set type(c){g.Message.setField(this,1,c)}get has_type(){return g.Message.getField(this,1)!=null}static fromObject(c){return new Tr({type:c.type})}toObject(){let c={};return this.type!=null&&(c.type=this.type),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_type&&f.writeInt32(1,this.type),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Tr;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.type=f.readInt32();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Tr.deserialize(c)}};zn=new WeakMap;let S=Tr;Se.CS_REQUEST_ROOM_ADDR=Tr;let Sr=class Sr extends g.Message{constructor(c){super();Nt(this,Cr,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,Cr)),!Array.isArray(c)&&typeof c=="object"&&(this.addr=c.addr,"roleInfo"in c&&c.roleInfo!=null&&(this.roleInfo=c.roleInfo))}get addr(){return g.Message.getField(this,1)}set addr(c){g.Message.setField(this,1,c)}get has_addr(){return g.Message.getField(this,1)!=null}get roleInfo(){return g.Message.getWrapperField(this,u,2)}set roleInfo(c){g.Message.setWrapperField(this,2,c)}get has_roleInfo(){return g.Message.getField(this,2)!=null}static fromObject(c){let f=new Sr({addr:c.addr});return c.roleInfo!=null&&(f.roleInfo=u.fromObject(c.roleInfo)),f}toObject(){let c={};return this.addr!=null&&(c.addr=this.addr),this.roleInfo!=null&&(c.roleInfo=this.roleInfo.toObject()),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_addr&&this.addr.length&&f.writeString(1,this.addr),this.has_roleInfo&&f.writeMessage(2,this.roleInfo,()=>this.roleInfo.serialize(f)),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Sr;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.addr=f.readString();break;case 2:f.readMessage(H.roleInfo,()=>H.roleInfo=u.deserialize(f));break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Sr.deserialize(c)}};Cr=new WeakMap;let T=Sr;Se.SC_REQUEST_ROOM_ADDR=Sr;let z=class z extends g.Message{constructor(c){super();Nt(this,Io,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,Io)),!Array.isArray(c)&&typeof c=="object"&&("tag"in c&&c.tag!=null&&(this.tag=c.tag),"roleId"in c&&c.roleId!=null&&(this.roleId=c.roleId))}get tag(){return g.Message.getFieldWithDefault(this,1,"")}set tag(c){g.Message.setField(this,1,c)}get has_tag(){return g.Message.getField(this,1)!=null}get roleId(){return g.Message.getFieldWithDefault(this,2,"")}set roleId(c){g.Message.setField(this,2,c)}get has_roleId(){return g.Message.getField(this,2)!=null}static fromObject(c){let f=new z({});return c.tag!=null&&(f.tag=c.tag),c.roleId!=null&&(f.roleId=c.roleId),f}toObject(){let c={};return this.tag!=null&&(c.tag=this.tag),this.roleId!=null&&(c.roleId=this.roleId),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_tag&&this.tag.length&&f.writeString(1,this.tag),this.has_roleId&&this.roleId.length&&f.writeString(2,this.roleId),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new z;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.tag=f.readString();break;case 2:H.roleId=f.readString();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return z.deserialize(c)}};Io=new WeakMap;let N=z;Se.CS_ENTER_ROOM=z;let U=class U extends g.Message{constructor(c){super();Nt(this,D,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[1,2],Pt(this,D)),!Array.isArray(c)&&typeof c=="object"&&(this.food=c.food,this.players=c.players)}get food(){return g.Message.getRepeatedWrapperField(this,G,1)}set food(c){g.Message.setRepeatedWrapperField(this,1,c)}get players(){return g.Message.getRepeatedWrapperField(this,Y,2)}set players(c){g.Message.setRepeatedWrapperField(this,2,c)}static fromObject(c){return new U({food:c.food.map(H=>G.fromObject(H)),players:c.players.map(H=>Y.fromObject(H))})}toObject(){let c={};return this.food!=null&&(c.food=this.food.map(f=>f.toObject())),this.players!=null&&(c.players=this.players.map(f=>f.toObject())),c}serialize(c){let f=c||new g.BinaryWriter;if(this.food.length&&f.writeRepeatedMessage(1,this.food,H=>H.serialize(f)),this.players.length&&f.writeRepeatedMessage(2,this.players,H=>H.serialize(f)),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new U;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:f.readMessage(H.food,()=>g.Message.addToRepeatedWrapperField(H,1,G.deserialize(f),G));break;case 2:f.readMessage(H.players,()=>g.Message.addToRepeatedWrapperField(H,2,Y.deserialize(f),Y));break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return U.deserialize(c)}};D=new WeakMap;let F=U;Se.SC_ENTER_ROOM=U;let $=class $ extends g.Message{constructor(c){super();Nt(this,j,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,j)),!Array.isArray(c)&&typeof c=="object"&&("unkey"in c&&c.unkey!=null&&(this.unkey=c.unkey),"itemId"in c&&c.itemId!=null&&(this.itemId=c.itemId),"loc"in c&&c.loc!=null&&(this.loc=c.loc))}get unkey(){return g.Message.getFieldWithDefault(this,1,"")}set unkey(c){g.Message.setField(this,1,c)}get has_unkey(){return g.Message.getField(this,1)!=null}get itemId(){return g.Message.getFieldWithDefault(this,2,0)}set itemId(c){g.Message.setField(this,2,c)}get has_itemId(){return g.Message.getField(this,2)!=null}get loc(){return g.Message.getWrapperField(this,ne,3)}set loc(c){g.Message.setWrapperField(this,3,c)}get has_loc(){return g.Message.getField(this,3)!=null}static fromObject(c){let f=new $({});return c.unkey!=null&&(f.unkey=c.unkey),c.itemId!=null&&(f.itemId=c.itemId),c.loc!=null&&(f.loc=ne.fromObject(c.loc)),f}toObject(){let c={};return this.unkey!=null&&(c.unkey=this.unkey),this.itemId!=null&&(c.itemId=this.itemId),this.loc!=null&&(c.loc=this.loc.toObject()),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_unkey&&this.unkey.length&&f.writeString(1,this.unkey),this.has_itemId&&f.writeInt32(2,this.itemId),this.has_loc&&f.writeMessage(3,this.loc,()=>this.loc.serialize(f)),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new $;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.unkey=f.readString();break;case 2:H.itemId=f.readInt32();break;case 3:f.readMessage(H.loc,()=>H.loc=ne.deserialize(f));break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return $.deserialize(c)}};j=new WeakMap;let G=$;Se.FoodObject=$;let le=class le extends g.Message{constructor(c){super();Nt(this,P,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[5,10,13],Pt(this,P)),!Array.isArray(c)&&typeof c=="object"&&("roleId"in c&&c.roleId!=null&&(this.roleId=c.roleId),"userName"in c&&c.userName!=null&&(this.userName=c.userName),"snakeId"in c&&c.snakeId!=null&&(this.snakeId=c.snakeId),"speed"in c&&c.speed!=null&&(this.speed=c.speed),this.snake=c.snake,"kills"in c&&c.kills!=null&&(this.kills=c.kills),"state"in c&&c.state!=null&&(this.state=c.state),"score"in c&&c.score!=null&&(this.score=c.score),"wdTime"in c&&c.wdTime!=null&&(this.wdTime=c.wdTime),this.eatenIds=c.eatenIds,"dieTime"in c&&c.dieTime!=null&&(this.dieTime=c.dieTime),"revive"in c&&c.revive!=null&&(this.revive=c.revive),this.food=c.food,"direction"in c&&c.direction!=null&&(this.direction=c.direction),"frame"in c&&c.frame!=null&&(this.frame=c.frame),"oprTime"in c&&c.oprTime!=null&&(this.oprTime=c.oprTime),"aimDir"in c&&c.aimDir!=null&&(this.aimDir=c.aimDir),"length"in c&&c.length!=null&&(this.length=c.length))}get roleId(){return g.Message.getFieldWithDefault(this,1,"")}set roleId(c){g.Message.setField(this,1,c)}get has_roleId(){return g.Message.getField(this,1)!=null}get userName(){return g.Message.getFieldWithDefault(this,2,"")}set userName(c){g.Message.setField(this,2,c)}get has_userName(){return g.Message.getField(this,2)!=null}get snakeId(){return g.Message.getFieldWithDefault(this,3,0)}set snakeId(c){g.Message.setField(this,3,c)}get has_snakeId(){return g.Message.getField(this,3)!=null}get speed(){return g.Message.getFieldWithDefault(this,4,0)}set speed(c){g.Message.setField(this,4,c)}get has_speed(){return g.Message.getField(this,4)!=null}get snake(){return g.Message.getRepeatedWrapperField(this,Z,5)}set snake(c){g.Message.setRepeatedWrapperField(this,5,c)}get kills(){return g.Message.getFieldWithDefault(this,6,0)}set kills(c){g.Message.setField(this,6,c)}get has_kills(){return g.Message.getField(this,6)!=null}get state(){return g.Message.getFieldWithDefault(this,7,!1)}set state(c){g.Message.setField(this,7,c)}get has_state(){return g.Message.getField(this,7)!=null}get score(){return g.Message.getFieldWithDefault(this,8,0)}set score(c){g.Message.setField(this,8,c)}get has_score(){return g.Message.getField(this,8)!=null}get wdTime(){return g.Message.getFieldWithDefault(this,9,0)}set wdTime(c){g.Message.setField(this,9,c)}get has_wdTime(){return g.Message.getField(this,9)!=null}get eatenIds(){return g.Message.getFieldWithDefault(this,10,[])}set eatenIds(c){g.Message.setField(this,10,c)}get dieTime(){return g.Message.getFieldWithDefault(this,11,0)}set dieTime(c){g.Message.setField(this,11,c)}get has_dieTime(){return g.Message.getField(this,11)!=null}get revive(){return g.Message.getFieldWithDefault(this,12,0)}set revive(c){g.Message.setField(this,12,c)}get has_revive(){return g.Message.getField(this,12)!=null}get food(){return g.Message.getRepeatedWrapperField(this,G,13)}set food(c){g.Message.setRepeatedWrapperField(this,13,c)}get direction(){return g.Message.getFieldWithDefault(this,14,0)}set direction(c){g.Message.setField(this,14,c)}get has_direction(){return g.Message.getField(this,14)!=null}get frame(){return g.Message.getFieldWithDefault(this,15,0)}set frame(c){g.Message.setField(this,15,c)}get has_frame(){return g.Message.getField(this,15)!=null}get oprTime(){return g.Message.getFieldWithDefault(this,16,0)}set oprTime(c){g.Message.setField(this,16,c)}get has_oprTime(){return g.Message.getField(this,16)!=null}get aimDir(){return g.Message.getFieldWithDefault(this,17,0)}set aimDir(c){g.Message.setField(this,17,c)}get has_aimDir(){return g.Message.getField(this,17)!=null}get length(){return g.Message.getFieldWithDefault(this,18,0)}set length(c){g.Message.setField(this,18,c)}get has_length(){return g.Message.getField(this,18)!=null}static fromObject(c){let f=new le({snake:c.snake.map(H=>Z.fromObject(H)),eatenIds:c.eatenIds,food:c.food.map(H=>G.fromObject(H))});return c.roleId!=null&&(f.roleId=c.roleId),c.userName!=null&&(f.userName=c.userName),c.snakeId!=null&&(f.snakeId=c.snakeId),c.speed!=null&&(f.speed=c.speed),c.kills!=null&&(f.kills=c.kills),c.state!=null&&(f.state=c.state),c.score!=null&&(f.score=c.score),c.wdTime!=null&&(f.wdTime=c.wdTime),c.dieTime!=null&&(f.dieTime=c.dieTime),c.revive!=null&&(f.revive=c.revive),c.direction!=null&&(f.direction=c.direction),c.frame!=null&&(f.frame=c.frame),c.oprTime!=null&&(f.oprTime=c.oprTime),c.aimDir!=null&&(f.aimDir=c.aimDir),c.length!=null&&(f.length=c.length),f}toObject(){let c={eatenIds:this.eatenIds};return this.roleId!=null&&(c.roleId=this.roleId),this.userName!=null&&(c.userName=this.userName),this.snakeId!=null&&(c.snakeId=this.snakeId),this.speed!=null&&(c.speed=this.speed),this.snake!=null&&(c.snake=this.snake.map(f=>f.toObject())),this.kills!=null&&(c.kills=this.kills),this.state!=null&&(c.state=this.state),this.score!=null&&(c.score=this.score),this.wdTime!=null&&(c.wdTime=this.wdTime),this.dieTime!=null&&(c.dieTime=this.dieTime),this.revive!=null&&(c.revive=this.revive),this.food!=null&&(c.food=this.food.map(f=>f.toObject())),this.direction!=null&&(c.direction=this.direction),this.frame!=null&&(c.frame=this.frame),this.oprTime!=null&&(c.oprTime=this.oprTime),this.aimDir!=null&&(c.aimDir=this.aimDir),this.length!=null&&(c.length=this.length),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_roleId&&this.roleId.length&&f.writeString(1,this.roleId),this.has_userName&&this.userName.length&&f.writeString(2,this.userName),this.has_snakeId&&f.writeInt32(3,this.snakeId),this.has_speed&&f.writeFloat(4,this.speed),this.snake.length&&f.writeRepeatedMessage(5,this.snake,H=>H.serialize(f)),this.has_kills&&f.writeInt32(6,this.kills),this.has_state&&f.writeBool(7,this.state),this.has_score&&f.writeInt32(8,this.score),this.has_wdTime&&f.writeInt64(9,this.wdTime),this.eatenIds.length&&f.writeRepeatedString(10,this.eatenIds),this.has_dieTime&&f.writeInt64(11,this.dieTime),this.has_revive&&f.writeInt32(12,this.revive),this.food.length&&f.writeRepeatedMessage(13,this.food,H=>H.serialize(f)),this.has_direction&&f.writeFloat(14,this.direction),this.has_frame&&f.writeInt32(15,this.frame),this.has_oprTime&&f.writeInt64(16,this.oprTime),this.has_aimDir&&f.writeFloat(17,this.aimDir),this.has_length&&f.writeInt32(18,this.length),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new le;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.roleId=f.readString();break;case 2:H.userName=f.readString();break;case 3:H.snakeId=f.readInt32();break;case 4:H.speed=f.readFloat();break;case 5:f.readMessage(H.snake,()=>g.Message.addToRepeatedWrapperField(H,5,Z.deserialize(f),Z));break;case 6:H.kills=f.readInt32();break;case 7:H.state=f.readBool();break;case 8:H.score=f.readInt32();break;case 9:H.wdTime=f.readInt64();break;case 10:g.Message.addToRepeatedField(H,10,f.readString());break;case 11:H.dieTime=f.readInt64();break;case 12:H.revive=f.readInt32();break;case 13:f.readMessage(H.food,()=>g.Message.addToRepeatedWrapperField(H,13,G.deserialize(f),G));break;case 14:H.direction=f.readFloat();break;case 15:H.frame=f.readInt32();break;case 16:H.oprTime=f.readInt64();break;case 17:H.aimDir=f.readFloat();break;case 18:H.length=f.readInt32();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return le.deserialize(c)}};P=new WeakMap;let Y=le;Se.PlayerObject=le;let be=class be extends g.Message{constructor(c){super();Nt(this,pe,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,pe)),!Array.isArray(c)&&typeof c=="object"&&"loc"in c&&c.loc!=null&&(this.loc=c.loc)}get loc(){return g.Message.getWrapperField(this,ne,2)}set loc(c){g.Message.setWrapperField(this,2,c)}get has_loc(){return g.Message.getField(this,2)!=null}static fromObject(c){let f=new be({});return c.loc!=null&&(f.loc=ne.fromObject(c.loc)),f}toObject(){let c={};return this.loc!=null&&(c.loc=this.loc.toObject()),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_loc&&f.writeMessage(2,this.loc,()=>this.loc.serialize(f)),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new be;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 2:f.readMessage(H.loc,()=>H.loc=ne.deserialize(f));break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return be.deserialize(c)}};pe=new WeakMap;let Z=be;Se.SnakeObject=be;let Ke=class Ke extends g.Message{constructor(c){super();Nt(this,De,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,De)),!Array.isArray(c)&&typeof c=="object"&&("x"in c&&c.x!=null&&(this.x=c.x),"y"in c&&c.y!=null&&(this.y=c.y))}get x(){return g.Message.getFieldWithDefault(this,1,0)}set x(c){g.Message.setField(this,1,c)}get has_x(){return g.Message.getField(this,1)!=null}get y(){return g.Message.getFieldWithDefault(this,2,0)}set y(c){g.Message.setField(this,2,c)}get has_y(){return g.Message.getField(this,2)!=null}static fromObject(c){let f=new Ke({});return c.x!=null&&(f.x=c.x),c.y!=null&&(f.y=c.y),f}toObject(){let c={};return this.x!=null&&(c.x=this.x),this.y!=null&&(c.y=this.y),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_x&&f.writeDouble(1,this.x),this.has_y&&f.writeDouble(2,this.y),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Ke;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.x=f.readDouble();break;case 2:H.y=f.readDouble();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Ke.deserialize(c)}};De=new WeakMap;let ne=Ke;Se.PointObject=Ke;let Ne=class Ne extends g.Message{constructor(c){super();Nt(this,Te,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,Te)),!Array.isArray(c)&&typeof c=="object"&&("roleId"in c&&c.roleId!=null&&(this.roleId=c.roleId),"opr"in c&&c.opr!=null&&(this.opr=c.opr),"value"in c&&c.value!=null&&(this.value=c.value),"head"in c&&c.head!=null&&(this.head=c.head),"frame"in c&&c.frame!=null&&(this.frame=c.frame),"curDir"in c&&c.curDir!=null&&(this.curDir=c.curDir),"aimDir"in c&&c.aimDir!=null&&(this.aimDir=c.aimDir),"speed"in c&&c.speed!=null&&(this.speed=c.speed))}get roleId(){return g.Message.getFieldWithDefault(this,1,"")}set roleId(c){g.Message.setField(this,1,c)}get has_roleId(){return g.Message.getField(this,1)!=null}get opr(){return g.Message.getFieldWithDefault(this,2,0)}set opr(c){g.Message.setField(this,2,c)}get has_opr(){return g.Message.getField(this,2)!=null}get value(){return g.Message.getFieldWithDefault(this,3,0)}set value(c){g.Message.setField(this,3,c)}get has_value(){return g.Message.getField(this,3)!=null}get head(){return g.Message.getWrapperField(this,Z,4)}set head(c){g.Message.setWrapperField(this,4,c)}get has_head(){return g.Message.getField(this,4)!=null}get frame(){return g.Message.getFieldWithDefault(this,5,0)}set frame(c){g.Message.setField(this,5,c)}get has_frame(){return g.Message.getField(this,5)!=null}get curDir(){return g.Message.getFieldWithDefault(this,6,0)}set curDir(c){g.Message.setField(this,6,c)}get has_curDir(){return g.Message.getField(this,6)!=null}get aimDir(){return g.Message.getFieldWithDefault(this,7,0)}set aimDir(c){g.Message.setField(this,7,c)}get has_aimDir(){return g.Message.getField(this,7)!=null}get speed(){return g.Message.getFieldWithDefault(this,8,0)}set speed(c){g.Message.setField(this,8,c)}get has_speed(){return g.Message.getField(this,8)!=null}static fromObject(c){let f=new Ne({});return c.roleId!=null&&(f.roleId=c.roleId),c.opr!=null&&(f.opr=c.opr),c.value!=null&&(f.value=c.value),c.head!=null&&(f.head=Z.fromObject(c.head)),c.frame!=null&&(f.frame=c.frame),c.curDir!=null&&(f.curDir=c.curDir),c.aimDir!=null&&(f.aimDir=c.aimDir),c.speed!=null&&(f.speed=c.speed),f}toObject(){let c={};return this.roleId!=null&&(c.roleId=this.roleId),this.opr!=null&&(c.opr=this.opr),this.value!=null&&(c.value=this.value),this.head!=null&&(c.head=this.head.toObject()),this.frame!=null&&(c.frame=this.frame),this.curDir!=null&&(c.curDir=this.curDir),this.aimDir!=null&&(c.aimDir=this.aimDir),this.speed!=null&&(c.speed=this.speed),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_roleId&&this.roleId.length&&f.writeString(1,this.roleId),this.has_opr&&f.writeInt32(2,this.opr),this.has_value&&f.writeInt32(3,this.value),this.has_head&&f.writeMessage(4,this.head,()=>this.head.serialize(f)),this.has_frame&&f.writeInt32(5,this.frame),this.has_curDir&&f.writeFloat(6,this.curDir),this.has_aimDir&&f.writeFloat(7,this.aimDir),this.has_speed&&f.writeFloat(8,this.speed),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Ne;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.roleId=f.readString();break;case 2:H.opr=f.readInt32();break;case 3:H.value=f.readInt32();break;case 4:f.readMessage(H.head,()=>H.head=Z.deserialize(f));break;case 5:H.frame=f.readInt32();break;case 6:H.curDir=f.readFloat();break;case 7:H.aimDir=f.readFloat();break;case 8:H.speed=f.readFloat();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Ne.deserialize(c)}};Te=new WeakMap;let J=Ne;Se.CS_PLAYER_OPR=Ne;let ve=class ve extends g.Message{constructor(c){super();Nt(this,ot,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[1],Pt(this,ot)),!Array.isArray(c)&&typeof c=="object"&&(this.players=c.players,"frame"in c&&c.frame!=null&&(this.frame=c.frame))}get players(){return g.Message.getRepeatedWrapperField(this,Y,1)}set players(c){g.Message.setRepeatedWrapperField(this,1,c)}get frame(){return g.Message.getFieldWithDefault(this,2,0)}set frame(c){g.Message.setField(this,2,c)}get has_frame(){return g.Message.getField(this,2)!=null}static fromObject(c){let f=new ve({players:c.players.map(H=>Y.fromObject(H))});return c.frame!=null&&(f.frame=c.frame),f}toObject(){let c={};return this.players!=null&&(c.players=this.players.map(f=>f.toObject())),this.frame!=null&&(c.frame=this.frame),c}serialize(c){let f=c||new g.BinaryWriter;if(this.players.length&&f.writeRepeatedMessage(1,this.players,H=>H.serialize(f)),this.has_frame&&f.writeInt32(2,this.frame),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new ve;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:f.readMessage(H.players,()=>g.Message.addToRepeatedWrapperField(H,1,Y.deserialize(f),Y));break;case 2:H.frame=f.readInt32();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return ve.deserialize(c)}};ot=new WeakMap;let ue=ve;Se.SC_PLAYER_STATE=ve;let mt=class mt extends g.Message{constructor(c){super();Nt(this,Lt,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[1],Pt(this,Lt)),!Array.isArray(c)&&typeof c=="object"&&(this.food=c.food,"frame"in c&&c.frame!=null&&(this.frame=c.frame))}get food(){return g.Message.getRepeatedWrapperField(this,G,1)}set food(c){g.Message.setRepeatedWrapperField(this,1,c)}get frame(){return g.Message.getFieldWithDefault(this,2,0)}set frame(c){g.Message.setField(this,2,c)}get has_frame(){return g.Message.getField(this,2)!=null}static fromObject(c){let f=new mt({food:c.food.map(H=>G.fromObject(H))});return c.frame!=null&&(f.frame=c.frame),f}toObject(){let c={};return this.food!=null&&(c.food=this.food.map(f=>f.toObject())),this.frame!=null&&(c.frame=this.frame),c}serialize(c){let f=c||new g.BinaryWriter;if(this.food.length&&f.writeRepeatedMessage(1,this.food,H=>H.serialize(f)),this.has_frame&&f.writeInt32(2,this.frame),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new mt;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:f.readMessage(H.food,()=>g.Message.addToRepeatedWrapperField(H,1,G.deserialize(f),G));break;case 2:H.frame=f.readInt32();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return mt.deserialize(c)}};Lt=new WeakMap;let se=mt;Se.SC_GEN_FOOD=mt;let Rt=class Rt extends g.Message{constructor(c){super();Nt(this,It,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,It)),!Array.isArray(c)&&typeof c=="object"&&"players"in c&&c.players!=null&&(this.players=c.players)}get players(){return g.Message.getWrapperField(this,Y,2)}set players(c){g.Message.setWrapperField(this,2,c)}get has_players(){return g.Message.getField(this,2)!=null}static fromObject(c){let f=new Rt({});return c.players!=null&&(f.players=Y.fromObject(c.players)),f}toObject(){let c={};return this.players!=null&&(c.players=this.players.toObject()),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_players&&f.writeMessage(2,this.players,()=>this.players.serialize(f)),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Rt;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 2:f.readMessage(H.players,()=>H.players=Y.deserialize(f));break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Rt.deserialize(c)}};It=new WeakMap;let Ie=Rt;Se.SS_NOTICE_ENTER=Rt;let Li=class Li extends g.Message{constructor(c){super();Nt(this,sa,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,sa)),!Array.isArray(c)&&typeof c=="object"&&("res"in c&&c.res!=null&&(this.res=c.res),"roleId"in c&&c.roleId!=null&&(this.roleId=c.roleId))}get res(){return g.Message.getFieldWithDefault(this,1,!1)}set res(c){g.Message.setField(this,1,c)}get has_res(){return g.Message.getField(this,1)!=null}get roleId(){return g.Message.getFieldWithDefault(this,3,"")}set roleId(c){g.Message.setField(this,3,c)}get has_roleId(){return g.Message.getField(this,3)!=null}static fromObject(c){let f=new Li({});return c.res!=null&&(f.res=c.res),c.roleId!=null&&(f.roleId=c.roleId),f}toObject(){let c={};return this.res!=null&&(c.res=this.res),this.roleId!=null&&(c.roleId=this.roleId),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_res&&f.writeBool(1,this.res),this.has_roleId&&this.roleId.length&&f.writeString(3,this.roleId),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Li;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.res=f.readBool();break;case 3:H.roleId=f.readString();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Li.deserialize(c)}};sa=new WeakMap;let Ce=Li;Se.SC_BATTLE_END=Li;let Kn=class Kn extends g.Message{constructor(c){super();Nt(this,Fi,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[1],Pt(this,Fi)),!Array.isArray(c)&&typeof c=="object"&&(this.fid=c.fid,"head"in c&&c.head!=null&&(this.head=c.head),this.roleId=c.roleId,"frame"in c&&c.frame!=null&&(this.frame=c.frame))}get fid(){return g.Message.getFieldWithDefault(this,1,[])}set fid(c){g.Message.setField(this,1,c)}get head(){return g.Message.getWrapperField(this,Z,2)}set head(c){g.Message.setWrapperField(this,2,c)}get has_head(){return g.Message.getField(this,2)!=null}get roleId(){return g.Message.getField(this,3)}set roleId(c){g.Message.setField(this,3,c)}get has_roleId(){return g.Message.getField(this,3)!=null}get frame(){return g.Message.getFieldWithDefault(this,4,0)}set frame(c){g.Message.setField(this,4,c)}get has_frame(){return g.Message.getField(this,4)!=null}static fromObject(c){let f=new Kn({fid:c.fid,roleId:c.roleId});return c.head!=null&&(f.head=Z.fromObject(c.head)),c.frame!=null&&(f.frame=c.frame),f}toObject(){let c={fid:this.fid};return this.head!=null&&(c.head=this.head.toObject()),this.roleId!=null&&(c.roleId=this.roleId),this.frame!=null&&(c.frame=this.frame),c}serialize(c){let f=c||new g.BinaryWriter;if(this.fid.length&&f.writeRepeatedString(1,this.fid),this.has_head&&f.writeMessage(2,this.head,()=>this.head.serialize(f)),this.has_roleId&&this.roleId.length&&f.writeString(3,this.roleId),this.has_frame&&f.writeInt32(4,this.frame),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Kn;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:g.Message.addToRepeatedField(H,1,f.readString());break;case 2:f.readMessage(H.head,()=>H.head=Z.deserialize(f));break;case 3:H.roleId=f.readString();break;case 4:H.frame=f.readInt32();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Kn.deserialize(c)}};Fi=new WeakMap;let te=Kn;Se.CS_EAT_FOOD=Kn;let za=class za extends g.Message{constructor(c){super();Nt(this,qn,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[1,7],Pt(this,qn)),!Array.isArray(c)&&typeof c=="object"&&(this.fid=c.fid,"head"in c&&c.head!=null&&(this.head=c.head),"frame"in c&&c.frame!=null&&(this.frame=c.frame),"score"in c&&c.score!=null&&(this.score=c.score),"lenght"in c&&c.lenght!=null&&(this.lenght=c.lenght),this.roleId=c.roleId,this.remain=c.remain,"curDir"in c&&c.curDir!=null&&(this.curDir=c.curDir),"aimDir"in c&&c.aimDir!=null&&(this.aimDir=c.aimDir),"speed"in c&&c.speed!=null&&(this.speed=c.speed))}get fid(){return g.Message.getFieldWithDefault(this,1,[])}set fid(c){g.Message.setField(this,1,c)}get head(){return g.Message.getWrapperField(this,Z,2)}set head(c){g.Message.setWrapperField(this,2,c)}get has_head(){return g.Message.getField(this,2)!=null}get frame(){return g.Message.getFieldWithDefault(this,3,0)}set frame(c){g.Message.setField(this,3,c)}get has_frame(){return g.Message.getField(this,3)!=null}get score(){return g.Message.getFieldWithDefault(this,4,0)}set score(c){g.Message.setField(this,4,c)}get has_score(){return g.Message.getField(this,4)!=null}get lenght(){return g.Message.getFieldWithDefault(this,5,0)}set lenght(c){g.Message.setField(this,5,c)}get has_lenght(){return g.Message.getField(this,5)!=null}get roleId(){return g.Message.getField(this,6)}set roleId(c){g.Message.setField(this,6,c)}get has_roleId(){return g.Message.getField(this,6)!=null}get remain(){return g.Message.getFieldWithDefault(this,7,[])}set remain(c){g.Message.setField(this,7,c)}get curDir(){return g.Message.getFieldWithDefault(this,8,0)}set curDir(c){g.Message.setField(this,8,c)}get has_curDir(){return g.Message.getField(this,8)!=null}get aimDir(){return g.Message.getFieldWithDefault(this,9,0)}set aimDir(c){g.Message.setField(this,9,c)}get has_aimDir(){return g.Message.getField(this,9)!=null}get speed(){return g.Message.getFieldWithDefault(this,10,0)}set speed(c){g.Message.setField(this,10,c)}get has_speed(){return g.Message.getField(this,10)!=null}static fromObject(c){let f=new za({fid:c.fid,roleId:c.roleId,remain:c.remain});return c.head!=null&&(f.head=Z.fromObject(c.head)),c.frame!=null&&(f.frame=c.frame),c.score!=null&&(f.score=c.score),c.lenght!=null&&(f.lenght=c.lenght),c.curDir!=null&&(f.curDir=c.curDir),c.aimDir!=null&&(f.aimDir=c.aimDir),c.speed!=null&&(f.speed=c.speed),f}toObject(){let c={fid:this.fid,remain:this.remain};return this.head!=null&&(c.head=this.head.toObject()),this.frame!=null&&(c.frame=this.frame),this.score!=null&&(c.score=this.score),this.lenght!=null&&(c.lenght=this.lenght),this.roleId!=null&&(c.roleId=this.roleId),this.curDir!=null&&(c.curDir=this.curDir),this.aimDir!=null&&(c.aimDir=this.aimDir),this.speed!=null&&(c.speed=this.speed),c}serialize(c){let f=c||new g.BinaryWriter;if(this.fid.length&&f.writeRepeatedString(1,this.fid),this.has_head&&f.writeMessage(2,this.head,()=>this.head.serialize(f)),this.has_frame&&f.writeInt32(3,this.frame),this.has_score&&f.writeInt32(4,this.score),this.has_lenght&&f.writeInt32(5,this.lenght),this.has_roleId&&this.roleId.length&&f.writeString(6,this.roleId),this.remain.length&&f.writeRepeatedString(7,this.remain),this.has_curDir&&f.writeFloat(8,this.curDir),this.has_aimDir&&f.writeFloat(9,this.aimDir),this.has_speed&&f.writeFloat(10,this.speed),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new za;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:g.Message.addToRepeatedField(H,1,f.readString());break;case 2:f.readMessage(H.head,()=>H.head=Z.deserialize(f));break;case 3:H.frame=f.readInt32();break;case 4:H.score=f.readInt32();break;case 5:H.lenght=f.readInt32();break;case 6:H.roleId=f.readString();break;case 7:g.Message.addToRepeatedField(H,7,f.readString());break;case 8:H.curDir=f.readFloat();break;case 9:H.aimDir=f.readFloat();break;case 10:H.speed=f.readFloat();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return za.deserialize(c)}};qn=new WeakMap;let et=za;Se.SC_EAT_FOOD=za;let Ds=class Ds extends g.Message{constructor(c){super();Nt(this,Yn,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,Yn)),!Array.isArray(c)&&typeof c=="object"&&("target"in c&&c.target!=null&&(this.target=c.target),"head"in c&&c.head!=null&&(this.head=c.head),"frame"in c&&c.frame!=null&&(this.frame=c.frame),"body"in c&&c.body!=null&&(this.body=c.body))}get target(){return g.Message.getFieldWithDefault(this,1,"")}set target(c){g.Message.setField(this,1,c)}get has_target(){return g.Message.getField(this,1)!=null}get head(){return g.Message.getWrapperField(this,Z,2)}set head(c){g.Message.setWrapperField(this,2,c)}get has_head(){return g.Message.getField(this,2)!=null}get frame(){return g.Message.getFieldWithDefault(this,3,0)}set frame(c){g.Message.setField(this,3,c)}get has_frame(){return g.Message.getField(this,3)!=null}get body(){return g.Message.getFieldWithDefault(this,4,!1)}set body(c){g.Message.setField(this,4,c)}get has_body(){return g.Message.getField(this,4)!=null}static fromObject(c){let f=new Ds({});return c.target!=null&&(f.target=c.target),c.head!=null&&(f.head=Z.fromObject(c.head)),c.frame!=null&&(f.frame=c.frame),c.body!=null&&(f.body=c.body),f}toObject(){let c={};return this.target!=null&&(c.target=this.target),this.head!=null&&(c.head=this.head.toObject()),this.frame!=null&&(c.frame=this.frame),this.body!=null&&(c.body=this.body),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_target&&this.target.length&&f.writeString(1,this.target),this.has_head&&f.writeMessage(2,this.head,()=>this.head.serialize(f)),this.has_frame&&f.writeInt32(3,this.frame),this.has_body&&f.writeBool(4,this.body),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new Ds;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.target=f.readString();break;case 2:f.readMessage(H.head,()=>H.head=Z.deserialize(f));break;case 3:H.frame=f.readInt32();break;case 4:H.body=f.readBool();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return Ds.deserialize(c)}};Yn=new WeakMap;let me=Ds;Se.CS_PLAYER_COLLISION=Ds;let rc=class rc extends g.Message{constructor(c){super();Nt(this,rp,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[4],Pt(this,rp)),!Array.isArray(c)&&typeof c=="object"&&("roleId"in c&&c.roleId!=null&&(this.roleId=c.roleId),"head"in c&&c.head!=null&&(this.head=c.head),this.food=c.food,"taret"in c&&c.taret!=null&&(this.taret=c.taret),"frame"in c&&c.frame!=null&&(this.frame=c.frame),"curDir"in c&&c.curDir!=null&&(this.curDir=c.curDir),"aimDir"in c&&c.aimDir!=null&&(this.aimDir=c.aimDir),"speed"in c&&c.speed!=null&&(this.speed=c.speed),"die"in c&&c.die!=null&&(this.die=c.die))}get roleId(){return g.Message.getFieldWithDefault(this,1,"")}set roleId(c){g.Message.setField(this,1,c)}get has_roleId(){return g.Message.getField(this,1)!=null}get head(){return g.Message.getWrapperField(this,Z,2)}set head(c){g.Message.setWrapperField(this,2,c)}get has_head(){return g.Message.getField(this,2)!=null}get food(){return g.Message.getRepeatedWrapperField(this,G,4)}set food(c){g.Message.setRepeatedWrapperField(this,4,c)}get taret(){return g.Message.getFieldWithDefault(this,5,"")}set taret(c){g.Message.setField(this,5,c)}get has_taret(){return g.Message.getField(this,5)!=null}get frame(){return g.Message.getFieldWithDefault(this,6,0)}set frame(c){g.Message.setField(this,6,c)}get has_frame(){return g.Message.getField(this,6)!=null}get curDir(){return g.Message.getFieldWithDefault(this,7,0)}set curDir(c){g.Message.setField(this,7,c)}get has_curDir(){return g.Message.getField(this,7)!=null}get aimDir(){return g.Message.getFieldWithDefault(this,8,0)}set aimDir(c){g.Message.setField(this,8,c)}get has_aimDir(){return g.Message.getField(this,8)!=null}get speed(){return g.Message.getFieldWithDefault(this,9,0)}set speed(c){g.Message.setField(this,9,c)}get has_speed(){return g.Message.getField(this,9)!=null}get die(){return g.Message.getFieldWithDefault(this,10,"")}set die(c){g.Message.setField(this,10,c)}get has_die(){return g.Message.getField(this,10)!=null}static fromObject(c){let f=new rc({food:c.food.map(H=>G.fromObject(H))});return c.roleId!=null&&(f.roleId=c.roleId),c.head!=null&&(f.head=Z.fromObject(c.head)),c.taret!=null&&(f.taret=c.taret),c.frame!=null&&(f.frame=c.frame),c.curDir!=null&&(f.curDir=c.curDir),c.aimDir!=null&&(f.aimDir=c.aimDir),c.speed!=null&&(f.speed=c.speed),c.die!=null&&(f.die=c.die),f}toObject(){let c={};return this.roleId!=null&&(c.roleId=this.roleId),this.head!=null&&(c.head=this.head.toObject()),this.food!=null&&(c.food=this.food.map(f=>f.toObject())),this.taret!=null&&(c.taret=this.taret),this.frame!=null&&(c.frame=this.frame),this.curDir!=null&&(c.curDir=this.curDir),this.aimDir!=null&&(c.aimDir=this.aimDir),this.speed!=null&&(c.speed=this.speed),this.die!=null&&(c.die=this.die),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_roleId&&this.roleId.length&&f.writeString(1,this.roleId),this.has_head&&f.writeMessage(2,this.head,()=>this.head.serialize(f)),this.food.length&&f.writeRepeatedMessage(4,this.food,H=>H.serialize(f)),this.has_taret&&this.taret.length&&f.writeString(5,this.taret),this.has_frame&&f.writeInt32(6,this.frame),this.has_curDir&&f.writeFloat(7,this.curDir),this.has_aimDir&&f.writeFloat(8,this.aimDir),this.has_speed&&f.writeFloat(9,this.speed),this.has_die&&this.die.length&&f.writeString(10,this.die),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new rc;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.roleId=f.readString();break;case 2:f.readMessage(H.head,()=>H.head=Z.deserialize(f));break;case 4:f.readMessage(H.food,()=>g.Message.addToRepeatedWrapperField(H,4,G.deserialize(f),G));break;case 5:H.taret=f.readString();break;case 6:H.frame=f.readInt32();break;case 7:H.curDir=f.readFloat();break;case 8:H.aimDir=f.readFloat();break;case 9:H.speed=f.readFloat();break;case 10:H.die=f.readString();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return rc.deserialize(c)}};rp=new WeakMap;let ke=rc;Se.SC_PLAYER_COLLISION=rc;let sc=class sc extends g.Message{constructor(c){super();Nt(this,sp,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,sp)),!Array.isArray(c)&&typeof c=="object"&&"time"in c&&c.time!=null&&(this.time=c.time)}get time(){return g.Message.getFieldWithDefault(this,1,0)}set time(c){g.Message.setField(this,1,c)}get has_time(){return g.Message.getField(this,1)!=null}static fromObject(c){let f=new sc({});return c.time!=null&&(f.time=c.time),f}toObject(){let c={};return this.time!=null&&(c.time=this.time),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_time&&f.writeInt64(1,this.time),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new sc;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.time=f.readInt64();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return sc.deserialize(c)}};sp=new WeakMap;let Me=sc;Se.SC_REQUEST_SERVER_TIME=sc;let oc=class oc extends g.Message{constructor(c){super();Nt(this,op,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[],Pt(this,op)),!Array.isArray(c)&&typeof c=="object"&&(this.roleId=c.roleId)}get roleId(){return g.Message.getField(this,1)}set roleId(c){g.Message.setField(this,1,c)}get has_roleId(){return g.Message.getField(this,1)!=null}static fromObject(c){return new oc({roleId:c.roleId})}toObject(){let c={};return this.roleId!=null&&(c.roleId=this.roleId),c}serialize(c){let f=c||new g.BinaryWriter;if(this.has_roleId&&this.roleId.length&&f.writeString(1,this.roleId),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new oc;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:H.roleId=f.readString();break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return oc.deserialize(c)}};op=new WeakMap;let V=oc;Se.CS_REQUEST_ROOM_DATA=oc;let lc=class lc extends g.Message{constructor(c){super();Nt(this,lp,[]);g.Message.initialize(this,Array.isArray(c)?c:[],0,-1,[1,2,3],Pt(this,lp)),!Array.isArray(c)&&typeof c=="object"&&(this.food=c.food,this.players=c.players,this.reward=c.reward)}get food(){return g.Message.getRepeatedWrapperField(this,G,1)}set food(c){g.Message.setRepeatedWrapperField(this,1,c)}get players(){return g.Message.getRepeatedWrapperField(this,Y,2)}set players(c){g.Message.setRepeatedWrapperField(this,2,c)}get reward(){return g.Message.getFieldWithDefault(this,3,[])}set reward(c){g.Message.setField(this,3,c)}static fromObject(c){return new lc({food:c.food.map(H=>G.fromObject(H)),players:c.players.map(H=>Y.fromObject(H)),reward:c.reward})}toObject(){let c={reward:this.reward};return this.food!=null&&(c.food=this.food.map(f=>f.toObject())),this.players!=null&&(c.players=this.players.map(f=>f.toObject())),c}serialize(c){let f=c||new g.BinaryWriter;if(this.food.length&&f.writeRepeatedMessage(1,this.food,H=>H.serialize(f)),this.players.length&&f.writeRepeatedMessage(2,this.players,H=>H.serialize(f)),this.reward.length&&f.writeRepeatedString(3,this.reward),!c)return f.getResultBuffer()}static deserialize(c){let f=c instanceof g.BinaryReader?c:new g.BinaryReader(c),H=new lc;for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:f.readMessage(H.food,()=>g.Message.addToRepeatedWrapperField(H,1,G.deserialize(f),G));break;case 2:f.readMessage(H.players,()=>g.Message.addToRepeatedWrapperField(H,2,Y.deserialize(f),Y));break;case 3:g.Message.addToRepeatedField(H,3,f.readString());break;default:f.skipField()}return H}serializeBinary(){return this.serialize()}static deserializeBinary(c){return lc.deserialize(c)}};lp=new WeakMap;let Ye=lc;Se.SC_REQUEST_ROOM_DATA=lc})(e=i.socket||(i.socket={}))})(a=t.snake||(t.snake={}))})(Ge||(Ge={}));var us=class a{static encodeMessage(t,e,i){var n=a.createHeadMessage(t,i),r=a.createMessageBase(n,e),s=r.serializeBinary(),o=s.length,l=new Uint8Array([(o&4278190080)>>>24,(o&16711680)>>>16,(o&65280)>>>8,(o&255)>>>0]),u=new Uint8Array(l.byteLength+s.byteLength);return u.set(new Uint8Array(l),0),u.set(new Uint8Array(s),l.byteLength),u}static decodeMessage(t){var e=new DataView(t,0,4).getInt32(0,!1),i=t.slice(4,4+e),n=Ge.snake.socket.CMsgBase.deserializeBinary(i);return n}static createHeadMessage(t,e,i,n){e||(i=!0),!n&&v.instance.playerDto&&(n=v.instance.playerDto.pid);var r=Ge.snake.socket.CMsgHead.fromObject({msgtype:t,msgcode:1,roleId:n});return r}static createMessageBase(t,e){var i=Ge.snake.socket.CMsgBase.fromObject({msghead:t,msgbody:e});return i}};var _u=class a{constructor(t,e=0){this.objects=[],this.nodes=[],this.level=e,this.bounds=t}static checkBounds(t,e){let i=[new Laya.Point(e.x,e.y),new Laya.Point(e.x+e.width,e.y),new Laya.Point(e.x+e.width,e.y+e.height),new Laya.Point(e.x,e.y+e.height)];for(let n of i)if(!t.contains(n.x,n.y))return!1;return!0}getIndex(t){let e=t.getBoundingBox();if(!a.checkBounds(this.bounds,e))return;let i=this.bounds.x,n=this.bounds.y,r=this.bounds.width/2,s=this.bounds.height/2,o=new Laya.Rectangle(i+r,n+s,r,s),l=new Laya.Rectangle(i,n+s,r,s),u=new Laya.Rectangle(i,n,r,s),m=new Laya.Rectangle(i+r,n,r,s);return a.checkBounds(o,e)?0:a.checkBounds(l,e)?1:a.checkBounds(u,e)?2:a.checkBounds(m,e)?3:-1}split(){if(this.nodes.length>0)return;let t=this.bounds.x,e=this.bounds.y,i=this.bounds.width/2,n=this.bounds.height/2;this.nodes[0]=new a(new Laya.Rectangle(t+i,e+n,i,n),this.level+1),this.nodes[1]=new a(new Laya.Rectangle(t,e+n,i,n),this.level+1),this.nodes[2]=new a(new Laya.Rectangle(t,e,i,n),this.level+1),this.nodes[3]=new a(new Laya.Rectangle(t+i,e,i,n),this.level+1)}insert(t){if(this.nodes.length>0){let e=this.getIndex(t);if(e!==void 0&&e!==-1){this.nodes[e].insert(t);return}}if(this.objects.push(t),this.nodes.length===0&&this.objects.length>20&&this.level<5){this.split();let e=[];this.objects.forEach((i,n)=>{let r=this.getIndex(i);r!==void 0&&r!==-1&&(this.nodes[r].insert(i),e.push(n))}),this.objects=this.objects.filter((i,n)=>!e.includes(n))}}retrieve(t){let e=[];if(this.nodes.length>0){let i=this.getIndex(t);if(i!==void 0&&i!==-1)e=e.concat(this.nodes[i].retrieve(t));else if(i===-1)for(let n=0;n<this.nodes.length;n++)e=e.concat(this.nodes[n].retrieve(t))}return e=e.concat(this.objects),e}refresh(t){let e=t||this,i=[];this.objects.forEach((n,r)=>{let s=this.getIndex(n);s!==void 0&&s!==-1?this.nodes.length>0&&(i.push(r),this.nodes[s].insert(n)):s===void 0&&e!==this&&(i.push(r),e.insert(n))}),this.objects=this.objects.filter((n,r)=>!i.includes(r));for(let n=0;n<this.nodes.length;n++)this.nodes[n].refresh(e)}remove(t){let e=!1,i=[];if(this.objects.forEach((n,r)=>{n===t&&(i.push(r),e=!0)}),this.objects=this.objects.filter((n,r)=>!i.includes(r)),e)return!0;for(let n=0;n<this.nodes.length;n++)if(this.nodes[n].remove(t))return!0;return!1}clear(){this.objects=[];for(let t=0;t<this.nodes.length;t++)this.nodes[t].clear()}};var lo=class lo{static getInstance(t=null){return lo.instance||(t||(t=new Laya.Rectangle(0,0,we.mapSize.width,we.mapSize.height)),lo.instance=new lo(t)),lo.instance}constructor(t){this.snacks=[],this.quadTree=new _u(t)}addSnack(t){t.forEach(e=>{this.quadTree.insert(e)})}removeSnack(t){t.forEach(e=>{this.quadTree.remove(e)})}refresh(){this.quadTree.refresh()}retrieve(t){return this.quadTree.retrieve(t)}getAllCollidables(){return this._getAllFromQuadTree(this.quadTree)}_getAllFromQuadTree(t){let e=[...t.objects];return t.nodes.forEach(i=>{e=e.concat(this._getAllFromQuadTree(i))}),e}};lo.instance=null;var Hn=lo;var ps=class ps{constructor(){this.foods=[];this.foodDic=new ye;this.spawnTimer=0;this.container||(this.container=new Laya.Sprite),this._collision=Hn.getInstance()}static get instance(){return ps._instance||(ps._instance=new ps),ps._instance}init(){}addFoods(t){t&&t.forEach(e=>this.addFood(e))}addFood(t){if(!t)return;let e=new Dr(this.container,t);this._collision.addSnack([e]),this.foods.push(e),this.foodDic.set(t.unkey,e)}eateFoodIds(t,e,i){e.forEach(r=>this.eateFood(t,r));var n=i-t.score;n&&t.showAddScore(n)}eateFood(t,e){var i=this.foodDic.get(e);i&&(i.haveEaten=!0,this.removeFood(i),i.beEatten(t.getHead().node.x,t.getHead().node.y))}showRemain(t){t&&t.length&&t.forEach(e=>{var i=this.foodDic.get(e);i&&(i.haveEaten=!1)})}removeFood(t){this._collision.removeSnack([t]);let e=this.foods.indexOf(t);e!==-1&&this.foods.splice(e,1),this.foodDic.remove(t.foodObject.unkey)}removeAllFoods(){this._collision.removeSnack(this.foods),this.foods.forEach(t=>t.destroy()),this.foods=[],this.foodDic=new ye}getAllFoods(){return this.foods}clear(){this.container.removeSelf(),this.container=null,this.removeAllFoods(),ps._instance=null}};ps._instance=null;var da=ps;var ms=class{constructor(){this.connectAddr="ws://175.27.154.72:10001";this.groupApplyList=[];this.groupData=[];this.watch=[]}};var of=class{};var We=class a{constructor(){this.inMinWaiting=!1;this.needGetRoomInfo=!1}openMinView(){this.enterRoomSpr||(this.enterRoomSpr=this.enterRoomPrefab.create()),this.enterRoomSpr.x=Laya.stage.width>>1,this.enterRoomSpr.y=0,this.enterRoomSpr.zOrder=1e3,Laya.stage.addChild(this.enterRoomSpr),this.inMinWaiting=!0}closeMinView(){this.enterRoomSpr&&this.enterRoomSpr.removeSelf(),this.inMinWaiting=!1}openMaxView(){this.closeMinView();var t=!0;O.intance.openModule(L.EnterRoomView,t)}openEnterView(){if(this.inMinWaiting==!0){this.closeMinView();var t=!0;O.intance.openModule(L.EnterRoomView,t)}else O.intance.openModule(L.EnterRoomView)}static get instance(){return a._instance==null&&(a._instance=new a),a._instance}init(){this.closeMinView(),this.initRoomData(),this.needGetRoomInfo=!0,Laya.timer.loop(1500,this,this.onRefreshRoom)}onRefreshRoomImditely(){Laya.timer.clear(this,this.onRefreshRoom),this.needGetRoomInfo=!0,this.onRefreshRoom(),Laya.timer.loop(1500,this,this.onRefreshRoom)}updateBattleCD(){B.instance.coolDownTime=Math.round(B.instance.roomDto.joinCd/1e3),_.intance.event(b.EVENT_UPDATE_MATCH_ROOM),B.instance.coolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):this.onGoMatch()}onSetCoolTime(){B.instance.coolDownTime>=0?B.instance.coolDownTime--:this.onGoMatch()}async onGoMatch(){Laya.timer.clear(this,this.onSetCoolTime),Laya.timer.clear(this,this.onRefreshRoom);let t=await w.requestPost("wxgame/room/info",{roomId:B.instance.roomDto.roomId});if(!this.needGetRoomInfo){console.log("界面已经关掉了，不能再继续了。。。");return}var e=t.roomDto;e.joinCd==0?t.roomDto.enterGame==1?(Laya.timer.clearAll(this),gt.instance.initSocket(),this.closeMinView()):(this.close(),_.intance.event(b.EVENT_ENTER_MATCH_ROOM,!0),he.commTipWithYes(Oe.instance.get(25))):(B.instance.roomDto=e,this.updateBattleCD())}initRoomData(){var t=B.instance.roomDto.members.length,e=B.instance.roomDto.maxCount;if(B.instance.roomDto.state==ee.STATE_START&&t>=e){this.onGoMatch();return}this.updateBattleCD()}async onRefreshRoom(){console.log("onRefreshRoom");let t=await w.requestPost("wxgame/room/info",{roomId:B.instance.roomDto.roomId});if(!this.needGetRoomInfo){console.log("界面已经关掉了，不能再继续了!");return}B.instance.roomDto=t.roomDto,this.initRoomData(),B.instance.setMatchRes()}close(){this.needGetRoomInfo=!1,Laya.timer.clearAll(this),_.intance.event(b.EVENT_CLOSE_MODULE,L.EnterRoomView),this.closeMinView()}async onCreateAndJoinWithPwd(t,e,i){var n=e.isBookingMust;if(t!=ee.ACTION_SIGNUP&&t!=ee.ACTION_CREATE_BOOKING){var r=I.intance.m_dicNodes.get(e.nodeId);if(r&&r.dT>800&&ie.Debug<2){C.instance.notice(p.instance.getLanguage(1306));return}}var s=!1;if(t==ee.ACTION_WATCH||t==ee.ACTION_JOIN&&n?s=!1:s=!0,s){let Ie=!1;var o=I.intance.m_dicArenaDic.get(e.arenaId),l=o.item[0];let Ce=v.instance.playerDto;if(o.type==3){if(!Ce.newFightHeroPk){he.heroNotEnought(1353);return}}else if(Ce.fightHeroPk){let te=v.instance.m_heroData.heroVoDic.get(Ce.fightHeroPk);if(te){if(Ie=te.state==2,t!=ee.ACTION_SIGNUP&&te.state==1){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1176),W.YES,null);return}}else if(t!=ee.ACTION_SIGNUP){he.heroNotEnought();return}}else if(t!=ee.ACTION_SIGNUP){he.heroNotEnought();return}if(o.item&&o.item.length>1){var l=o.item[0],u=o.item[1];t==ee.ACTION_SIGNUP&&!e.preContract&&(u=u*2);var m=v.instance.m_packageData.getCountById(l);let et=I.intance.getArenaTypesInSubByType(o.type).heroType;var h=q.instance.arenaType;if(Ie){var y=await w.requestPost("wxgame/lease/heroInfo",{heroPk:Ce.fightHeroPk});if(y.info.leaseType==1){if(y.info.remainTicketCount<=0&&h==1){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1175),W.YES,null);return}if(et.indexOf(y.info.leaseType)<0){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(127),W.YES,null);return}if(l!==y.info.ticketId){console.log("票不一样不能进: ","需要的门票类型："+l,"代打英雄随身带的门票类型："+y.info.ticketId),Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1178),W.YES,null);return}}else if(y.info.leaseType==2&&et.indexOf(y.info.leaseType)<0){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1299),W.YES,null);return}}if(console.log("currNum: "+m,"needNum: "+u,"itemId: "+l),t!=ee.ACTION_SIGNUP&&m<u&&(!Ie||y.info.leaseType==2)){he.titickNotEnought(l);return}}}let x=!1,E;if(t==ee.ACTION_CREATE)E=await w.requestPost("wxgame/room/create",{numIndex:e.numIndex,nodeId:e.nodeId,password:i,arenaId:e.arenaId,roomName:e.roomName,customName:e.customName,anonymous:e.anonymous,closeLive:e.closeLive});else if(t==ee.ACTION_JOIN)E=await w.requestPost("wxgame/room/join",{roomId:e.roomId,pass:i});else if(t==ee.ACTION_CREATE_BOOKING)e.groupId&&(x=!0),E=await w.requestPost("wxgame/roomPreContract/create",{numIndex:e.numIndex,groupId:e.groupId,nodeId:e.nodeId,password:i,arenaId:e.arenaId,roomName:e.roomName,customName:e.customName,startTime:e.startTime,anonymous:e.anonymous,closeLive:e.closeLive});else if(t==ee.ACTION_JOIN_BOOKING){var S=0;e.teamDto&&(S=e.teamDto.teamId),e.groupId&&S==0&&(x=!0),E=await w.requestPost("wxgame/roomPreContract/apply",{teamId:S,roomId:e.roomId,password:i})}else if(t==ee.ACTION_WATCH)E=await w.requestPost("wxgame/room/joinWatch",{roomId:e.roomId});else if(t==ee.ACTION_SIGNUP&&(E=await w.requestPost("wxgame/room/joinGroup",{roomId:e.roomId}),E)){C.instance.notice(p.instance.getLanguage(1373)),this.onRefreshRoomImditely();return}if(E.roomDto&&(B.instance.roomDto=E.roomDto),E.roomDto||E.dto){if(_.intance.event(b.EVENT_Close_CreateRoom),t==ee.ACTION_CREATE_BOOKING||t==ee.ACTION_JOIN_BOOKING)if(x){var T=E.dto,N=T.roomId,S=T.teamDto.teamId,F=T.teamDto.leaderPlayer.name;O.intance.openModule(L.TeamCreateShareDialog,[N,S,F])}else C.instance.notice(p.instance.getLanguage(2e3));else t==ee.ACTION_WATCH&&E.roomDto&&E.roomDto.state==10?gt.instance.initSocket():a.instance.openEnterView();if(t==ee.ACTION_CREATE||t==ee.ACTION_CREATE_BOOKING){var G=o.type,Y="";G==1?Y="Professional Arena":G==2?Y="Airdrop Arena":G==3&&(Y="Training Arena");var Z=o.lv,ne="";Z==1?ne="Novice":Z==2?ne="Elite":Z==3&&(ne="Master");var J=o.coinType,ue=I.intance.m_dicItems.get(J),se=p.instance.getEnglishLanguage(ue.name);gtag("event","new_arena",{event_category:Y,arena_type:Y,coin_type:se,arena_lv:ne})}}else C.instance.notice(p.instance.getLanguage(135))}async goBookingCreateRoomDialog(t,e=0){var i=await w.requestPost("wxgame/roomPreContract/info",{roomId:t,teamId:e});i.dto&&(_.intance.event(b.EVENT_CLOSE_MODULE,L.CreateRoomDialog),O.intance.openModule(L.CreateRoomDialog,[ee.ACTION_JOIN_BOOKING,!1,!0,[i.dto,i.inApply]]))}async goMatchCreateRoomDialog(t){var e=await w.requestPost("wxgame/room/info2",{roomId:t});e.roomDto&&(_.intance.event(b.EVENT_CLOSE_MODULE,L.CreateRoomDialog),O.intance.openModule(L.CreateRoomDialog,[ee.ACTION_JOIN,!1,!1,e.roomDto,!0]))}goBookingInviteConfimDialog(t){Le.instance().AlertByType(W.InviteConfimDialog,t,W.CANCEL,Laya.Handler.create(this,this.onAcceptInvite,[t]))}onAcceptInvite(t){console.log("onAcceptInvitation");var e=new ms;e.roomId=t.roomId,e.arenaId=t.arenaId;var i=new of;i.teamId=t.teamId,e.teamDto=i,a.instance.onCreateAndJoinWithPwd(ee.ACTION_JOIN_BOOKING,e,"")}goBookingApplyConfimDialog(t){Le.instance().AlertByType(W.ApplyConfimDialog,t,W.CANCEL,Laya.Handler.create(this,this.onAcceptApply,[t,1]),Laya.Handler.create(this,this.onAcceptApply,[t,2]))}async onAcceptApply(t,e){console.log("onAcceptInvitation");var i=t.roomId,n=t.teamId,r=t.applicant.id,s=await w.requestPost("wxgame/roomPreContract/groupJoinApply",{roomId:i,teamId:n,targetPid:r,type:e});C.instance.notice(p.instance.getLanguage(2e3))}onGetBookingId(t){var e,i;let n=/\[([^\]]+)\]/g,r,s=[];for(;(r=n.exec(t))!==null&&(s.push(r[1]),s.length!==2););if(s.length>0)e=s[0],s.length>1&&(i=s[1]),console.log("中括号内容:",e,i);else{console.log("未找到中括号内容，检查链接中的 bookingId...");let l=/https?:\/\/[^\s]+/g.exec(t);if(l){let u=new URL(l[0]),m=u.searchParams.get("bookingId");if(m){e=m,console.log("链接中的 bookingId:",m);let h=u.searchParams.get("teamId");h&&(i=h,console.log("链接中的 teamId:",h))}else console.log("链接中未包含 bookingId 参数")}else console.log("文本中未找到链接")}return[e,i]}onGetNewUrl(t,e){let i=new URL(window.location.href),n=i.searchParams;n.get("bookingId")&&n.delete("bookingId"),n.has("debug")&&n.delete("debug"),n.has("address")&&n.delete("address");let s=t;return n.append("bookingId",s+""),e&&n.append("teamId",e+""),i.search=n.toString(),i.toString()}goPveMatch(){var t={arenaId:4001,coinType:0,roomId:4563,members:[{id:1000000026,x:1706,y:1350,dire:0,speed:320,heroId:15000020003,heroColor:2,name:"1000000026",icon:"10015",leader:0,kill:0,hp:899,maxHp:899,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1000000027,x:952,y:1735,dire:0,speed:320,heroId:15000030003,heroColor:2,name:"1000000027",icon:"10015",leader:0,kill:0,hp:919,maxHp:919,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1000000007,x:952,y:965,dire:0,speed:320,heroId:12000010003,heroColor:2,name:"1000000007",icon:"10015",leader:0,kill:0,hp:1018,maxHp:1018,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1003,x:2083,y:2120,dire:0,speed:0,heroId:15000010006,heroColor:1,name:"h1",icon:"10005",leader:1,kill:0,hp:1828,maxHp:1828,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:1017,nodeId:1,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!1,startTime:1727683479461}],remainderCd:604799998,startTime:1727683478029,nowTime:1727683479462,arenaType:4,watch:[],anonymous:0},e=t.members.length,i=t.members[e-1];i&&(i.id=v.instance.playerDto.pid),B.instance.matchDto=t,ge.intance.setCurrentScene(ae.M_SCENE_MATCH)}goSnakeMatch(){var t={arenaId:4001,coinType:0,roomId:4563,members:[{id:1003,x:2083,y:2120,dire:0,speed:10,heroId:15000010006,heroColor:1,name:"h1",icon:"10005",leader:1,kill:0,hp:1828,maxHp:1828,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:1017,nodeId:1,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!1,startTime:1727683479461}],remainderCd:604799998,startTime:1727683478029,nowTime:1727683479462,arenaType:4,watch:[],anonymous:0};let e=new Ln;e.pid=1003,e.name="h1",e.icon="10005",e.lv=1,e.sex=1,e.country=1,e.exp=1,e.telegram=1,v.instance.playerDto=e;var i=t.members.length,n=t.members[i-1];n&&(n.id=v.instance.playerDto.pid);let r=[[1329,1350],[575,580],[952,580],[1329,580],[1706,580],[2083,580],[2460,580],[575,965],[952,965],[1329,965],[1706,965],[2083,965],[2460,965],[575,1350],[952,1350],[1706,1350],[2083,1350],[2460,1350],[575,1735],[952,1735],[1329,1735],[1706,1735],[2083,1735],[2460,1735],[575,2120],[952,2120],[1329,2120],[1706,2120],[2083,2120],[2460,2120],[982,1380],[1736,1380],[2113,1380],[675,1250]];for(let u=1;u<34;u++){let[m,h]=r[u-1],y=Math.floor(Math.random()*5)+1;t.members.push({id:1e9+u,x:m,y:h,dire:0,speed:10,heroId:12000010003,heroColor:y,name:"1000000007",icon:"10015",leader:0,kill:0,hp:1018,maxHp:1018,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461}),1e9+u===10005&&u<r.length-1}var s=34;let[o,l]=r[s-1];t.members.find(u=>u.id===1003).x=o,t.members.find(u=>u.id===1003).y=l,console.log("matchDto.members: "+t.members.length),B.instance.matchDto=t,ge.intance.setCurrentScene(ae.M_SCENE_SNAKE_MATCH)}};var Lu=class Lu{constructor(){this.arenaId=0;this.coinType=0;this.roomId=0;this.members=[];this.item=[];this.remainderCd=0;this.startTime=0;this.nowTime=0;this.arenaType=0;this.watch=[];this.anonymous=0}protocolId(){return Lu.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.anonymous),t.writeInt(e.arenaId),t.writeInt(e.arenaType),t.writeInt(e.coinType),t.writePacketList(e.members,25011),t.writeLong(e.nowTime),t.writeLong(e.remainderCd),t.writeLong(e.roomId),t.writeLong(e.startTime),t.writeLongList(e.watch))}static read(t){if(!t.readBoolean())return null;let e=new Lu,i=t.readInt();e.anonymous=i;let n=t.readInt();e.arenaId=n;let r=t.readInt();e.arenaType=r;let s=t.readInt();e.coinType=s;let o=t.readPacketList(25011);e.members=o;let l=t.readLong();e.nowTime=l;let u=t.readLong();e.remainderCd=u;let m=t.readLong();e.roomId=m;let h=t.readLong();e.startTime=h;let y=t.readLongList();return e.watch=y,e}};Lu.PROTOCOL_ID=25010;var E1=Lu,w1=E1;var Yi=class Yi{constructor(){this.m_iConnectTimes=0;this.m_iMaxTimes=10;this.m_iHeartTime=6e4;this.moveIndex=0;this.serverTimeOffset=0;this._isMatching=!1;this.isFirst=!0;this.m_socket=new Laya.Socket,this.m_socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this.m_socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this.m_socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this.m_socket.on(Laya.Event.ERROR,this,this.onConnectError)}static get instance(){return Yi._instance==null&&(Yi._instance=new Yi),Yi._instance}get isMatching(){return this._isMatching}set isMatching(t){this._isMatching=t,t||(this.isConnect=!1)}close(){this.m_socket&&this.m_socket.close()}initSocket(){this.isMatching=!0,this.isFirst=!0;var t=B.instance.roomDto.connectAddr;Yi.m_strHttpHost=t,this.connect()}onSocketOpen(){this.isConnect=!0,this.m_iConnectTimes=0,console.log("WS----WS connected",1),Laya.timer.loop(30*1e3,this,this.sendHeart),this.onRequestTime()}onRequestTime(){var t=Ge.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME,e=null;this.sendData(t,e)}onLogin(){var t=v.instance.playerDto.pid,e=Ge.snake.socket.MessageType.MSG_ENTER_ROOM,i=Ge.snake.socket.CS_ENTER_ROOM.fromObject({tag:"1",roleId:t});this.sendData(e,i)}onSocketClose(t){console.log("WS----closed",1),this.isMatching&&(this.isOtherLogin||(this.isConnect=!1,_e.instance.hideLoading(),he.popToMain()))}onReconnect(){Yi.instance.reconnect(),Yi.instance.m_iConnectTimes++}onConnectError(t){console.log("WS----onConnectError e:"+t,1),this.isMatching&&(this.isOtherLogin||(this.isConnect=!1,_e.instance.hideLoading(),he.popToMain()))}connect(){console.log("WS----connect: "+Yi.m_strHttpHost,1),this.isMatching&&(this.isConnect||(Laya.timer.once(1e4,this,this.showTip),this.m_socket.connectByUrl(Yi.m_strHttpHost),console.log("WS----connect websocket",1)))}clearShowTip(){Laya.timer.clear(this,this.showTip)}showTip(){he.netError()}reconnect(){console.log("WS----reconnect: "+Yi.m_strHttpHost,1),this.isMatching&&(this.isConnect||(this.m_socket.connectByUrl(Yi.m_strHttpHost),console.log("WS----reconnect WS",1)))}onSendMessage(){}sendData(t,e){if(this.isMatching)if(this.isConnect){var i=e?e.serializeBinary():null;console.log(he.GetLogTime+" WS ------>>>>>>>> SEND CMD:"+t,e?e.toObject():null);var n=us.encodeMessage(t,i,"");this.m_socket.send(n.buffer)}else console.log(he.GetLogTime+" WS ------>>>>>>>> SENDE RROR CMD:"+t,e?e.toObject():null)}async onMessageReveived(t){var e=us.decodeMessage(t),i=e.msghead.msgtype,n=e.msghead.msgcode,r,s=Laya.ClassUtils.getClass(i+"");s?(r=s.deserializeBinary(e.msgbody).toObject(),console.log(he.GetLogTime+" WS ------<<<<<<<< RECV CMD:"+i+", CODE:",n+", DATA:",r)):console.warn(he.GetLogTime+" WS ------<<<<<<<< RECV CMD:"+i+", CODE:",n+", className解析失败!"),n==Ge.snake.socket.MessageCode.SYS_NORMAL?i==Ge.snake.socket.MessageType.MSG_USER_LOGIN||i==Ge.snake.socket.MessageType.MSG_REPEAT_LOGIN_NOTICE&&(this.isOtherLogin=!0,Laya.timer.clearAll(this),this.close(),he.otherLogin(),console.log("WS----------------------------otherLogin")):console.log(he.GetLogTime+" msgcode------------<<<",n);let o=e,l=o.msghead.msgtype,u=o.msghead.msgcode;if(u&&u!=Ge.snake.socket.MessageCode.SYS_NORMAL){console.warn("errorCode "+u+", errorMessage： "+Oe.instance.get(u)),u==24||u==25?(this.isMatching=!1,We.instance.close(),Yi.instance.clearShowTip(),ge.intance.currSceneName!=ae.M_SCENE_MATCH&&(ge.intance.setCurrentScene(ae.M_SCENE_MAIN),he.commTipWithYes(Oe.instance.get(u)))):u==69&&Oe.instance.showErrorWord(u);return}switch(l){case Ge.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME:var m=r,h=m.time;let lt=Date.now();this.serverTimeOffset=lt-h,this.onLogin();break;case Ge.snake.socket.MessageType.MSG_ENTER_ROOM:this.isFirst=!1;var y=r,me=y.food,ke=y.players,V=new w1;V.members=ke,V.item=me,B.instance.matchDto=V,ge.intance.setCurrentScene(ae.M_SCENE_SNAKE_MATCH),this.clearShowTip(),B.instance.stopAll=!1;break;case Ge.snake.socket.MessageType.MSG_PLAYER_OPR:var x=r,te=x.frame;this.moveIndex++,q.instance.onRevOprPush(x,this.moveIndex);break;case Ge.snake.socket.MessageType.MSG_NOTICE_ENTER:var E=r.players;xt.instance.newAddSnake(E);break;case Ge.snake.socket.MessageType.MSG_PLAYER_STATE:let qt=r;var te=qt.frame,ke=qt.players;let Vt=new Set;ke.forEach(Zt=>{Vt.add(Zt.roleId),q.instance.onUpdatePlayerObject(Zt,te)});var S=xt.instance.matchHeroSprDic;for(let Zt of S.keys)Vt.has(Zt)||xt.instance.removeSnake(Zt);break;case Ge.snake.socket.MessageType.MSG_EAT_FOOD:let at=r;var T=at.fid,N=at.score,F=at.lenght,Y=at.roleId,G=at.remain;da.instance.showRemain(G);var J=at.head,te=at.frame,se=q.instance.getRoleById(Y);se&&(se.updateHead(te,J,at.speed,at.curDir,at.aimDir),se.updateLen(F),da.instance.eateFoodIds(se,T,N),se.score=N);break;case Ge.snake.socket.MessageType.MSG_PLAYER_COLLISION:let Ft=r;var Y=Ft.roleId,Z=Ft.food,ne=Ft.taret,J=Ft.head,te=Ft.frame,ue=Ft.die,se=q.instance.getRoleById(Y);if(se&&(se.updateHead(te,J,Ft.speed,Ft.curDir,Ft.aimDir),se.isSend=!1,ue!="-1")){var Ie=q.instance.getRoleById(ne);ue==Y?(se.die(),Ie&&Ie.addKill(1)):(Ie&&Ie.die(),se.addKill(1)),Z&&Z.length&&da.instance.addFoods(Z)}break;case Ge.snake.socket.MessageType.MSG_GEN_FOOD:var Ce=r,te=Ce.frame;da.instance.addFoods(Ce.food);break;case Ge.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA:var et=r;console.log("收到了恢复数据返回");var me=et.food,ke=et.players,Me=et.reward,V=new w1;V.members=ke,V.item=me,B.instance.matchDto=V,q.instance.onRevRestorePush(V);break;case Ge.snake.socket.MessageType.MSG_BATTLE_END:var Ye=r,Se=Ye.res;_.intance.event(b.EVENT_GameScene_Gray),B.instance.onMockMatchEnd();break;default:break}}sendHeart(){this.m_socket.connected&&this.sendData(Ge.snake.socket.MessageType.MSG_HEART_BEAT,null)}};Yi.m_strHttpHost=getWSServer(),Yi.CMD_99999=99999;var gt=Yi;var vu=class vu{constructor(){this._ws=null;this._magicstr=null;this._heartBeatMissed=0;this._heartBeatMissedMax=3;this._heartBeatInterval=5e3;this.wsUrl=getWSServer();this.interval=0;this.trySendNum=0;this.trySendMax=3;this.isShowReLogin=!1;this.isInFightNotFinishShowRelogin=!1;this.login_manual_close_socket=!1;this.isPopClose=!1;this.isOtherLogin=!1;this._serverTimeDiff=0;this._serverTime=0}get magicstr(){return this._magicstr}set magicstr(t){this._magicstr=t}getServerTimeDiff(){return this._serverTimeDiff}getServerTime(){return this._serverTime}getFixedLocalTime(t){let e=this.getTimeZone()+this._serverTimeDiff;return t&&(e=new Date().getTime()+this._serverTimeDiff),e}getTimeZone(t){if(t==0)return 0;let e=new Date;t&&(e=new Date(t));let i=e.getTime();var n=e.getTimezoneOffset()*6e4,r=i+n,s=LOGIN_MODEL.server_time_zone,o=r+36e5*s,l=new Date(o);return l.getTime()}static getInstance(){return vu.singleton}createWebSocket(){try{this._ws=new WebSocket(this.wsUrl),this.init()}catch(t){console.log("%c WSM","color:#2a5caa","创建 WebSocket 异常",t),this.reconnect()}}connect(){console.log("%c WSM","color:#2a5caa","connect url = "+this.wsUrl),this.trySendNum=0,this.close(),Laya.timer.once(100,this,this.createWebSocket)}init(){this._ws.binaryType="arraybuffer",this._ws.onopen=t=>{console.log(he.GetLogTime+" websocket ----_ws.onopen"),this.onOpen()},this._ws.onmessage=t=>{this.onMessage(t.data)},this._ws.onerror=t=>{console.log("%c WSM","color:#2a5caa","_ws.onerror",t),this.onError(t)},this._ws.onclose=t=>{console.log("%c WSM","color:#2a5caa","_ws.onclose",t),this.onClose()}}onOpen(){this.heartbeatTimer(),this.isShowReLogin=!1,this.stopReconnectTimer(),_e.instance.hideLoading(),_.intance.event(b.ON_CONNECT_GAME_SERVER)}onError(t){console.log(he.GetLogTime+" websocket ----onError------------>",t),this.onClose()}onClose(){console.log(he.GetLogTime+" websocket ----onClose------------>",this._ws),this.login_manual_close_socket,this.close(),this.login_manual_close_socket=!1}stopTimer(){this.stopHeartbearTimer(),this.stopRequestMagicstrTimer()}close(){console.log(he.GetLogTime+" websocket ----WS:close"),this.login_manual_close_socket=!0,this._ws&&(this._ws.close(),this._ws=null)}clear(){this.isPopClose=!1,this._ws&&(this._ws.onclose&&(this._ws.onclose=null),this._ws.onerror&&(this._ws.onerror=null),this._ws.close(),this._ws=null)}clearAll(){this.isPopClose=!1,this.stopShowLoad(),this.close(),this.stopTimer()}isConnected(){return this._ws&&this._ws.readyState===WebSocket.OPEN}send(t,e,i=!0){if(this.isPopClose||this.startShowLoad(),this.isConnected()){var n=this._magicstr,r=e?e.serializeBinary():null;console.log(he.GetLogTime+" WSM ------>>>>>>>> SEND CMD:"+t,e?e.toObject():null);var s=us.encodeMessage(t,r,n);this._ws.send(s.buffer)}else console.log(he.GetLogTime+" WSM ------>>>>>>>> SENDE RROR CMD:"+t,e?e.toObject():null)}onMessage(t){this.stopShowLoad();var e=us.decodeMessage(t);this._heartBeatMissed=-1;var i=e.msghead.msgtype,n=e.msghead.msgcode,r,s=Laya.ClassUtils.getClass(i+"");if(s?(r=s.deserializeBinary(e.msgbody).toObject(),console.log(he.GetLogTime+" WSM ------<<<<<<<< RECV CMD:"+i+", CODE:",n+", DATA:",r)):console.warn(he.GetLogTime+" WSM ------<<<<<<<< RECV CMD:"+i+", CODE:",n+", className解析失败!"),n==Ge.snake.socket.MessageCode.SYS_NORMAL)i==Ge.snake.socket.MessageType.MSG_USER_LOGIN?(this.requireMagicstrTimer(),this.requireMagicstr(),this.heartbeatTimer()):i==Ge.snake.socket.MessageType.MSG_REPEAT_LOGIN_NOTICE&&(this.isOtherLogin=!0,Laya.timer.clearAll(this),this.close(),gt.instance.close(),he.otherLogin(),console.log("WS----------------------------otherLogin"));else if(console.log("%c WSM","color:#2a5caa","msgcode--------------->",n),n==3)this.requireMagicstrTimer(),this.requireMagicstr(),this.heartbeatTimer();else{let o=Oe.instance.get(n);n==15?CommonUtil.addRechargeView():n==12?CommonUtil.addCoinView():n==4&&(this.startShowLoad(0),Laya.timer.clear(this,this.dataErrorFun),Laya.timer.once(3e3,this,this.dataErrorFun)),ie.vType!=2?he.commTipWithYes(o+" code:"+n):he.commTipWithYes(o)}_.intance.event("msg_"+i,[r,n])}dataErrorFun(){Laya.timer.clear(this,this.dataErrorFun),this.stopShowLoad()}reconnect(){if(this.isPopClose){this.stopShowLoad();return}if(console.log("%c WSM","color:#2a5caa","reconnect 开始重连服务器"),this.isConnected())return;if(this.isShowReLogin){this.stopTimer();return}if(this.isOtherLogin){this.stopTimer();return}this.stopShowLoad();let t=String(this.trySendNum)+"/"+String(this.trySendMax)+" "+p.instance.getLanguage("正在尝试重连");_e.instance.showLoadingByInfo(t),this.startReconnectTimer()}startReconnectTimer(){this.stopReconnectTimer(),this.trySendNum=0,console.log("%c WSM","color:#2a5caa","startReconnectTimer this.trySendNum-------->",this.trySendNum),Laya.timer.clear(this,this.reconnectFun),Laya.timer.loop(3e3,this,this.reconnectFun)}reconnectFun(){if(this.trySendNum++,this.trySendNum>this.trySendMax)console.log("%c WSM","color:#2a5caa","重连次数超过"),this.trySendNum=0,_e.instance.hideLoading(),this.stopReconnectTimer(),this.onClose(),he.netError();else{console.log("%c WSM","color:#2a5caa","开始重连次数",String(this.trySendNum));let t=String(this.trySendNum)+"/"+String(this.trySendMax)+" "+p.instance.getLanguage("正在尝试重连");_e.instance.showLoadingByInfo(t),this.createWebSocket()}}stopReconnectTimer(){Laya.timer.clear(this,this.reconnectFun),this._heartBeatMissed=0}stopHeartbearTimer(){Laya.timer.clear(this,this.sendHeartBeat),this._heartBeatMissed=0}heartbeatTimer(){this.stopHeartbearTimer(),Laya.timer.loop(this._heartBeatInterval,this,this.sendHeartBeat)}sendHeartBeat(){console.log("%c WSM","color:#2a5caa","sendHeartBeat 发送大厅心跳",this._heartBeatMissed),this.send(Ge.snake.socket.MessageType.MSG_HEART_BEAT,null,!1),this._heartBeatMissed+=1,this._heartBeatMissed>=this._heartBeatMissedMax&&(console.log("%c WSM","color:#2a5caa","发送大厅心跳超过最大次数,关闭Socket",this._heartBeatMissed),this.stopHeartbearTimer(),this.stopRequestMagicstrTimer(),this.close(),this.reconnect())}stopRequestMagicstrTimer(){Laya.timer.clear(this,this.requireMagicFun)}requireMagicstrTimer(){return;var t}requireMagicFun(){}requireMagicstr(){}getConnectType(){}startShowLoad(t=1e3){Laya.timer.clear(this,this.showLoadingFun),Laya.timer.once(t,this,this.showLoadingFun)}showLoadingFun(){console.log("%c WSM","color:#2a5caa","startShowLoad","开始显示loading"),_e.instance.showLoadingByInfo(p.instance.getLanguage("开始重连服务器"))}stopShowLoad(){_e.instance.hideLoading(),console.log("%c WSM","color:#2a5caa","停止显示loading"),Laya.timer.clear(this,this.showLoadingFun)}showLog(t,...e){console.log("%c WSM","color:#2a5caa",t,...e)}};vu.singleton=new vu;var T1=vu,mr=T1.getInstance();var pt=class pt{static get IsSetRelease(){return pt._IsSetRelease}static get IsSetGuid(){return pt._IsSetGuid}static initParms(){if(Laya.Browser.window.location){let e=Laya.Browser.window.location.href,i=this.getURLParameters(e);if(pt.m_obj=i,console.log("1initgame-->urldata:",pt.m_obj),pt.m_obj.server&&pt.m_obj.server!=""&&(mr.wsUrl=pt.m_obj.server),pt.m_obj.socket&&pt.m_obj.socket!=""){var t=pt.m_obj.socket;gt.m_strHttpHost=t}if(pt.m_obj.address&&pt.m_obj.address!=""&&(K.instance.walletAddress=pt.m_obj.address),pt.m_obj.from&&pt.m_obj.from=="into"&&(ie.isInto=!0),pt.m_obj.isFull&&pt.m_obj.isFull=="1"&&(ie.isFull=!0),pt.m_obj.justFull&&pt.m_obj.justFull=="1"&&(ie.justFull=!0),pt.m_obj.white&&pt.m_obj.white=="1"&&(ie.isWhite=!0),pt.m_obj.debug&&pt.m_obj.debug!="0"&&(ie.Debug=parseInt(pt.m_obj.debug)),pt.m_obj.res&&pt.m_obj.res!="0"&&(ie.Res=parseInt(pt.m_obj.res)),pt.m_obj.bookingId&&pt.m_obj.bookingId!="0"&&(ie.bookingId=parseInt(pt.m_obj.bookingId),pt.m_obj.teamId&&pt.m_obj.teamId!="0"&&(ie.teamId=parseInt(pt.m_obj.teamId))),pt.m_obj.lang&&pt.m_obj.lang!=""){let n=parseInt(pt.m_obj.lang);n<1&&(n=1),ie.ignoreLang=!0,v.instance.m_strLanguage=n}}}static getURLParameters(t){let e={};return t.replace(/[?&]+([^=&]+)=([^&]*)/gi,(i,n,r)=>e[n]=decodeURIComponent(r)),e}static cheakStr(t){let e=new RegExp("[A-Za-z0-9_-\\s]","g"),i=t.match(e);return!!(i&&i.length==t.length)}static isNumber(t){return/^(?!0\d)\d*\.?\d*$/.test(t)}static roundToTwoDecimals(t){return t%1===0?t.toString():Number(t.toFixed(2)).toString()}static filterObjectsByState(t,e,i=void 0){return i?t.filter(n=>n.state===e&&i.indexOf(n.pk)<0&&n.newFightFlag!==1):t.filter(n=>n.state===e&&n.newFightFlag!==1)}static filterPVEExpHerosByState(t,e,i=void 0){return i?t.filter(n=>n.state===e&&i.indexOf(n.pk)<0&&n.newFightFlag==1):t.filter(n=>n.state===e&&n.newFightFlag==1)}static filterObjectsByNewFightFlag(t){return t.filter(e=>e.newFightFlag!==1)}static getArenaByTicketId(t){let e=I.intance.m_dicArenaDic.values;for(let i of e)if(Array.isArray(i.item)&&i.item.length>0&&i.item[0]===t)return i.name}static processItemsArray(t,e=!0){let i=I.intance.getGeneralValueById(20),n={},r={};var s=[];t.forEach(u=>{i.indexOf(u.id)>-1?r[u.id]?r[u.id].count+=u.count:r[u.id]=u:(n[u.id]=u,s.push(u))}),e&&i.forEach(u=>{r[u]||(r[u]={type:1,id:u,count:0})});let o=Object.values(r),l=Object.values(n);return o=o.sort((u,m)=>i.indexOf(u.id)-i.indexOf(m.id)),[o,l,s]}static sumItemCount(t){let e=new Map;return t.forEach(n=>{n.reward.forEach(r=>{let{type:s,id:o,count:l}=r;e.has(o)?e.set(o,{type:s,id:o,count:e.get(o).count+l}):e.set(o,{type:s,id:o,count:l})})}),Array.from(e.values())}static addIndexToObjects(t){return t.forEach((e,i)=>{e.index=i}),t}static findFirstTypeAndNotGold(t){for(let e=0;e<t.length;e++)if(t[e].id>=3001&&t[e].id<=3021&&t[e].id!==3005)return t[e]}static getTitleByGoodsId(t,e){for(let i of t)if(i.goods===e)return i.title;return null}static getShopByGoodsId(t,e){for(let i of t)if(i.goods===e)return i;return null}static getCurrencyIdByName(t){let e=Be.TYPE_TOX;switch(t){case"TOX":e=Be.TYPE_TOX;break;case"ETH":e=Be.TYPE_ETH;break;case"BTC":e=Be.TYPE_BTC;break;case"USDT":e=Be.TYPE_USDT;break;case"BTOX":e=Be.TYPE_BTOX;break;case"GALA":e=Be.TYPE_GALA;break;case"BNRY":e=Be.TYPE_BNRY;break;case"KLAY":e=Be.TYPE_KLAY;break;case"BNB":e=Be.TYPE_BNB;break;case"GGG":e=Be.TYPE_GGG;break}return e}static formatNumber(t,e=7){let i=t.toString(),n=i.indexOf(".");return n!==-1&&i.length-n>e?(i=i.slice(0,n+e),parseFloat(i)):t}static truncateToTwoDecimalPlaces(t){let e=t.toString(),i=e.indexOf(".");if(i===-1)return t;let n=e.substring(0,i+5);return parseFloat(n)}static getKeyByValue(t,e){return Object.keys(t).find(i=>t[i]===e)}static powerOf10(t,e){return t*Math.pow(10,e)}static isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}static getDaysInMonth(t,e){return e===2?this.isLeapYear(t)?29:28:[4,6,9,11].includes(e)?30:31}static shortenString(t,e,i){return t.length<=e+i?t:t.substr(0,e)+"..."+t.substr(-i)}static multiplyBigDecimals(t,e){let n=Math.pow(10,1e4),r=parseFloat(String(t))*parseFloat(String(e));return Math.round(r*n)/n}static arraysEqual(t,e){return t.length===e.length&&t.every((i,n)=>i===e[n])}static categorizeArrays(t,e){let i=[];for(let n of e){let r=n[0],s=n[1],o=t.find(u=>u[0]===r),l=o?o[1]:0;i.push([r,l,s])}return i}static setMap(t,e){if(t.has(e[0])){let i=t.get(e[0]);i+=e[1],t.set(e[0],i)}else t.set(e[0],e[1]);return console.log(t),t}static getfrom(){return pt.m_obj.from}};pt._IsSetRelease=!1,pt._IsSetGuid=!1;var ce=pt;var hs=class a{constructor(){this.assets_contract=null;this.startRecharge=!1}static get instance(){return a._instance||(a._instance=new a),a._instance}async init(){typeof window.ethereum>"u"||(_.intance.on(b.EVENT_RECHARGE_GET,this,this.rechargeEnd),this.assets_contract=new window.web3.eth.Contract(oe.WITHDRAW_AND_RECHARGE_ABI,oe.WITHDRAW_AND_RECHARGE_ADDRESS))}async depositWallet(t,e){if(_e.instance.showLoading(!0),!await K.instance.allowanceAddressByTokenAddress(oe.WITHDRAW_AND_RECHARGE_ADDRESS,t)){_e.instance.hideLoading(),C.instance.notice(p.instance.getLanguage(15));return}return e=window.web3.utils.toWei(e+""),await this.assets_contract.methods.recharge(t.toLowerCase(),e).send({from:K.instance.walletAddress},(n,r)=>{if(n)return _e.instance.hideLoading(),!1}),!0}async withdrawToken(t){return _e.instance.showLoading(!0),await this.assets_contract.methods.withdrawToken(t.tokenAddress,t.to,t.amount,t.timestamp,t.hash,t.r,t.s,t.v).send({from:K.instance.walletAddress},(e,i)=>{if(e)return _e.instance.hideLoading(),!1}),!0}async updateAssetsBalance(){Xn.instance.walletDic==null&&(Xn.instance.walletDic=new ye),_.intance.event(Mi.UPDATE_LOCAL_WALLET_LIST_EVENT)}updateCwt(t){let e=Xn.instance.walletDic.get(oa.ASSETS_TOX);e||(e=new Yd,e.itemId=oa.ASSETS_TOX,Xn.instance.walletDic.set(oa.ASSETS_TOX,e)),e.ethValue=t}async rechargeToken(t,e=null,i){try{if(e.token&&e.token!==oe.ADDRESS0&&!await K.instance.newAllowanceAddress(i,e.token))return _e.instance.hideLoading(),C.instance.notice(p.instance.getLanguage(15)),!1;let n=ia(t+"",e.tokenDecimals),r=oe.RECHANGE_ABI_NEW,s="depositToken",o;!e.token||e.token==oe.ADDRESS0?o=await K.instance.walletClient.writeContract({account:K.instance.walletAddress,address:i,abi:r,functionName:"depositETH",value:n,args:[]}):o=await K.instance.walletClient.writeContract({account:K.instance.walletAddress,address:i,abi:r,functionName:s,args:[e.token,n]}),this.startRecharge=!0,Laya.timer.once(6e4,this,this.clearRecharge);let l,u=!1;if(l=await K.instance.publicClient.waitForTransactionReceipt({hash:o,pollingInterval:1e3}),l&&l.status=="success"||u){if(!this.startRecharge)return;Laya.timer.clear(this,this.clearRecharge),console.log(`Tx successful with hash: ${o}`);let m=await K.instance.walletClient.getChainId(),h=[m,o];return this.getReward(m,o),Laya.timer.loop(2e3,this,this.getReward,h),Laya.timer.once(6e4,this,this.clearRecharge),o}else{_e.instance.hideLoading(),he.TransactionErrorTip();return}}catch(n){_e.instance.hideLoading(),console.log(n),n instanceof Error?n.message.includes("does not match the target chain for the transaction")?_.intance.event(b.CHANGE_ASSET_CHAIN):console.log("Error message does not contain the specified character."):console.log("An error occurred, but it is not an instance of Error.")}}async getReward(t,e){let i=await w.requestPost("wxgame/sys/payCallPack",{chainId:t,hashId:e});if(i&&i.coin){Laya.timer.clear(this,this.clearRecharge);let r=i.coin[0];if(!r)return;_.intance.event(Mi.UPDATE_LOCAL_WALLET_LIST_EVENT);var n=new Xt;n.id=r[0],n.count=r[1],_e.instance.hideLoading(),O.intance.openModule(L.RewardGetDialog,[n]),this.rechargeEnd()}}rechargeEnd(){v.instance.rechargeEnd=!1,Laya.timer.clear(this,this.getReward)}clearRecharge(){this.startRecharge=!1,_e.instance.hideLoading(),C.instance.notice(p.instance.getLanguage(1350)),this.rechargeEnd()}parseGwei(t){return t*1e9}async getAmountsOut(t,e,i,n=void 0){try{let r=18,s=18;n&&(r=n.usdtDecimals,s=n.tokenDecimals);let o=ce.powerOf10(i,r),l;if(t=="BNB"||t=="GALA"?l=await K.instance.publicClient.readContract({address:e,abi:oe.PUZZLE_ABI,functionName:"getAmountsOut",args:[o]}):l=await K.instance.publicClient.readContract({address:e,abi:oe.PUZZLE_ABI,functionName:"getTokenAmountsOut",args:[o,n.token]}),l){let u=Number(l)/Math.pow(10,s);return console.log(u),u}}catch(r){if(r instanceof Error){let s=r.message;return 0}}return 0}};var ff=$1(rk());var un=class{static getInviteUrl(){return window.location.origin+"?invite="+this.encode(K.instance.walletAddress)}static encode(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=e.length,n=e.split(""),r="",s,o,l,u,m=0;m<t.length;m++)s=t.charCodeAt(m),o=s%i,s=(s-o)/i,l=s%i,s=(s-l)/i,u=s%i,r+=n[u]+n[l]+n[o];return window.btoa(r)}static decode(t){t=window.atob(t);var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=e.length,n,r,s,o,l=0,u;u=new Array(Math.floor(t.length/3)),n=u.length;for(var m=0;m<n;m++)r=e.indexOf(t.charAt(l)),l++,s=e.indexOf(t.charAt(l)),l++,o=e.indexOf(t.charAt(l)),l++,u[m]=r*i*i+s*i+o;return n=decodeCharCode(u.join(",")),n}static getQueryString(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return i!=null?i[2]:""}static getInviteWalletAddress(){let t=this.getQueryString("invite");return t&&(t=this.decode(t)),t}static toWei(t,e){let i=t*10**parseInt(e);return window.web3.utils.toBN("0x"+i.toString(16)).toString()}static fromWei(t,e,i=0){if(!t)return 0;let n=t.length-e+i;if(n<=0)return 0;let r=t.toString().slice(0,n);if(i){let s=r.length-i;if(s<=0){let o="0.";for(let l=0;l<Math.abs(s);l++)o+="0";r=o+r}else r=r.slice(0,r.length-i)+"."+r.slice(r.length-i)}return r}static deepClone(t){let e=new ye;for(let i in t)typeof t[i]=="function"?e[i]=t[i]:e[i]=JSON.parse(JSON.stringify(t[i]));return e}};Eh();Je();function xu(){return Fe(sr.utils.randomPrivateKey())}var sk={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}};Gi();var ok={block:hC({format(a){return{transactions:a.transactions?.map(e=>{if(typeof e=="string")return e;let i=Qs(e);return i.typeHex==="0x7e"&&(i.isSystemTx=e.isSystemTx,i.mint=e.mint?ei(e.mint):void 0,i.sourceHash=e.sourceHash,i.type="deposit"),i}),stateRoot:a.stateRoot}}}),transaction:mC({format(a){let t={};return a.type==="0x7e"&&(t.isSystemTx=a.isSystemTx,t.mint=a.mint?ei(a.mint):void 0,t.sourceHash=a.sourceHash,t.type="deposit"),t}}),transactionReceipt:fS({format(a){return{l1GasPrice:a.l1GasPrice?ei(a.l1GasPrice):null,l1GasUsed:a.l1GasUsed?ei(a.l1GasUsed):null,l1Fee:a.l1Fee?ei(a.l1Fee):null,l1FeeScalar:a.l1FeeScalar?Number(a.l1FeeScalar):null}}})};In();en();Da();Je();function lB(a,t){return uB(a)?cB(a):wS(a,t)}var lk={transaction:lB};function cB(a){pB(a);let{sourceHash:t,data:e,from:i,gas:n,isSystemTx:r,mint:s,to:o,value:l}=a,u=[t,i,o??"0x",s?Fe(s):"0x",l?Fe(l):"0x",n?Fe(n):"0x",r?"0x1":"0x",e??"0x"];return Wi(["0x7e",sn(u)])}function uB(a){return a.type==="deposit"||typeof a.sourceHash<"u"}function pB(a){let{from:t,to:e}=a;if(t&&!Wt(t))throw new Yt({address:t});if(e&&!Wt(e))throw new Yt({address:e})}var co={contracts:sk,formatters:ok,serializers:lk};var Ha=li({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://rpc.ankr.com/bsc"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}});var Un=li({id:97,name:"Binance Smart Chain Testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.bnbchain.org:8545"]}},blockExplorers:{default:{name:"BscScan",url:"https://testnet.bscscan.com",apiUrl:"https://api-testnet.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0});var lf=li({id:8217,name:"Klaytn",nativeCurrency:{decimals:18,name:"Klaytn",symbol:"KLAY"},rpcUrls:{default:{http:["https://public-en-cypress.klaytn.net"]}},blockExplorers:{default:{name:"KlaytnScope",url:"https://scope.klaytn.com"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:96002415}}});var cf=li({id:1890,name:"LightLink Phoenix Mainnet",network:"lightlink-phoenix",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://replicator.phoenix.lightlink.io/rpc/v1"]}},blockExplorers:{default:{name:"LightLink Phoenix Explorer",url:"https://phoenix.lightlink.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:125499184}},testnet:!1});var ql=li({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});var ds=li({id:5e3,name:"Mantle",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Explorer",url:"https://mantlescan.xyz/",apiUrl:"https://api.mantlescan.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:304717}}});var hr=li({id:5003,name:"Mantle Sepolia Testnet",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.sepolia.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Testnet Explorer",url:"https://explorer.sepolia.mantle.xyz/",apiUrl:"https://explorer.sepolia.mantle.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:4584012}},testnet:!0});var uf=56,Ua=li({id:204,name:"opBNB",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{default:{http:["https://opbnb-mainnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opBNB (BSCScan)",url:"https://opbnb.bscscan.com",apiUrl:"https://api-opbnb.bscscan.com/api"}},contracts:{...co.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:512881},l2OutputOracle:{[uf]:{address:"0x153CAB79f4767E2ff862C94aa49573294B13D169"}},portal:{[uf]:{address:"0x1876EA7702C0ad0C6A2ae6036DE7733edfBca519"}},l1StandardBridge:{[uf]:{address:"0xF05F0e4362859c3331Cb9395CBC201E3Fa6757Ea"}}},sourceId:uf});var pf=97,Fa=li({id:5611,name:"opBNB Testnet",nativeCurrency:{decimals:18,name:"tBNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://opbnb-testnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opbnbscan",url:"https://testnet.opbnbscan.com"}},contracts:{...co.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:3705108},l2OutputOracle:{[pf]:{address:"0xFf2394Bb843012562f4349C6632a0EcB92fC8810"}},portal:{[pf]:{address:"0x4386C8ABf2009aC0c263462Da568DD9d46e52a31"}},l1StandardBridge:{[pf]:{address:"0x677311Fd2cCc511Bbc0f581E8d9a07B033D5E840"}}},testnet:!0,sourceId:pf});var Iu=1,mf=li({...co,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...co.contracts,disputeGameFactory:{[Iu]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[Iu]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[Iu]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[Iu]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:Iu});var hf=li({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});var df=(te=>(te[te.MAINNET=1]="MAINNET",te[te.TESTNET_RINKEBY=4]="TESTNET_RINKEBY",te[te.ARBITRUM=42161]="ARBITRUM",te[te.ARBITRUM_TESTNET=421611]="ARBITRUM_TESTNET",te[te.AVALANCHE=43114]="AVALANCHE",te[te.AVALANCHE_TESTNET=43113]="AVALANCHE_TESTNET",te[te.POLYGON=137]="POLYGON",te[te.POLYGON_TESTNET=80001]="POLYGON_TESTNET",te[te.FANTOM=250]="FANTOM",te[te.FANTOM_TESTNET=4002]="FANTOM_TESTNET",te[te.OPTIMISM=10]="OPTIMISM",te[te.OPTIMISM_TESTNET=69]="OPTIMISM_TESTNET",te[te.BOBA=288]="BOBA",te[te.BOBA_TESTNET=28]="BOBA_TESTNET",te[te.ESC=20]="ESC",te[te.HECO=128]="HECO",te[te.BSC=56]="BSC",te[te.BSC_TESTNET=97]="BSC_TESTNET",te[te.MATCH=9001]="MATCH",te[te.MATCH_TESTNET=9e3]="MATCH_TESTNET",te[te.CC=1331]="CC",te[te.SEPOLIA=11155111]="SEPOLIA",te[te.Klaytn=8217]="Klaytn",te[te.Lightlink=1890]="Lightlink",te[te.OpBNB=Ua.id]="OpBNB",te[te.opBNBTestnet=5611]="opBNBTestnet",te[te.Mantle=ds.id]="Mantle",te[te.MantleSepoliaTestnet=hr.id]="MantleSepoliaTestnet",te))(df||{}),fs={id:9001,name:"MATCH",network:"MATCH",iconUrl:"",iconBackground:"#fff",nativeCurrency:{decimals:18,name:"MATCH",symbol:"MATCH"},rpcUrls:{default:{http:["https://rpc-match.phantomarena.co/"]},public:{http:["https://rpc-match.phantomarena.co/"]}},blockExplorers:{default:{name:"matchscan",url:"https://lisbon.matchscan.io"},etherscan:{name:"matchscan",url:"https://lisbon.matchscan.io"}},testnet:!1};var Va=class{constructor(){}};Va.MONTH="months",Va.DAYS="days",Va.HOURS="hours",Va.MINUTES="minutes",Va.SECOUNDS="seconds",Va.MS="ms";var pi=class pi{constructor(){}static formatMM(t){if(t<=0)return"00:000";let e,i;e=t/1e3,i=t%1e3;let n="";return e<=9&&(n+="0"),n+=Math.floor(e),n+=":",i<=9?n+="00":i<=99&&(n+="0"),n+=i,n}static format(t,e=":",i=!0){if(t<=0)return i?"00:00:00":"00:00";let n,r,s,o,l;o=t/3600,s=t%3600,l=s/60,n=s%60;let u="";return i&&(o<=9&&(u+="0"),u+=Math.floor(o)+e),l<=9&&(u+="0"),u+=Math.floor(l)+e,Math.ceil(n)<=9&&(u+="0"),u+=Math.ceil(n),u}static formatWithDay(t,e=":",i=!1){if(t<=0)return"00:00";let n,r,s,o,l;r=t/86400,s=t%86400,o=s/3600,s=s%3600,l=s/60,n=s%60;let u="";return r>=1?(u=p.instance.getLanguage(1660,Math.floor(r))+" ",o<=9&&(u+="0"),i&&n%2!=0&&(e=he.getColorText(e,"#412b20")),u+=Math.floor(o)+e,l<=9&&(u+="0"),u+=Math.floor(l)):(o<=9&&(u+="0"),u=Math.floor(o)+e,l<=9&&(u+="0"),u+=Math.floor(l)+e,Math.ceil(n)<=9&&(u+="0"),u+=Math.ceil(n)),u}static formatWithSecondByMs(t){return`${t/1e3}`}static formatWithDayByMs(t,e=":",i=!1){if(t<=0)return"00:00";let n,r,s,o,l,u;s=t/864e5,o=t%864e5,l=o/36e5,o=o%36e5,u=o/6e4,o=o%6e4,r=o/1e3,n=o%1e3;let m="";return s>=1&&(m=p.instance.getLanguage(1660,Math.floor(s))+" "),l<=9&&(m+="0"),m+=Math.floor(l)+e,u<=9&&(m+="0"),m+=Math.floor(u)+e,Math.ceil(r)<=9&&(m+="0"),m+=Math.floor(r)+" ",m+=Math.ceil(n),m}static getTimeArray(t,e="HH-MM-SS"){if(t=Math.max(0,t),e.indexOf("-")==-1)return[];let i=[],n=e.split("-");for(let r of n)r=="DD"?i.push(Math.floor(t/pi.OneDaySceond)):r=="HH"?i.push(Math.floor(t%pi.OneDaySceond/pi.OneHourSceond)):r=="MM"?i.push(Math.floor(t%pi.OneHourSceond/pi.OneMiniuteSecond)):r=="SS"&&i.push(t%pi.OneMiniuteSecond);return i}static getServerDate(t){return new Date(t)}static formatTime(t){return(parseInt(t/60+"")+100).toString().substring(1)+":"+(parseInt(t%60+"")+100).toString().substring(1)}static formatTime000000(t){return t?(parseInt(t/3600+"")+100).toString().substring(1)+":"+(parseInt(t%3600/60+"")+100).toString().substring(1)+":"+(parseInt(t%60+"")+100).toString().substring(1):"00:00:00"}static formatTimeStamp(t,e="YY-MT-DD HH:MM:SS",i=!1){let n=pi.getServerDate(t),r="";if(e.indexOf("YY")>=0&&(r=(i?n.getUTCFullYear():n.getFullYear())+"",e=e.replace("YY",r)),e.indexOf("MT")>=0){let s=(i?n.getUTCMonth():n.getMonth())+1;s>9?r=s+"":r="0"+s,e=e.replace("MT",r)}if(e.indexOf("DD")>=0){let s=i?n.getUTCDate():n.getDate();s>9?r=s+"":r="0"+s,e=e.replace("DD",r)}if(e.indexOf("HH")>=0){let s=i?n.getUTCHours():n.getHours();s>9?r=s+"":r="0"+s,e=e.replace("HH",r)}if(e.indexOf("MM")>=0){let s=i?n.getUTCMinutes():n.getMinutes();s>9?r=s+"":r="0"+s,e=e.replace("MM",r)}if(e.indexOf("SS")>=0){let s=i?n.getUTCSeconds():n.getSeconds();s>9?r=s+"":r="0"+s,e=e.replace("SS",r)}return e}static formatTimeStamps(t,e="YY-MT-DD HH:MM:SS"){let i=pi.getServerDate(t),n=e;return n=pi.parseTimeDetail(i,n,"YY",!1),n=pi.parseTimeDetail(i,n,"MT",!1),n=pi.parseTimeDetail(i,n,"DD",!1),n=pi.parseTimeDetail(i,n,"HH",!0),n=pi.parseTimeDetail(i,n,"MM",!0),n=pi.parseTimeDetail(i,n,"SS",!0),n}static parseTimeDetail(t,e,i,n){if(e.indexOf(i)>=0){let r,s;i=="YY"?s=t.getFullYear():i=="MT"?s=t.getMonth()+1:i=="DD"?s=t.getDate():i=="HH"?s=t.getHours():i=="MM"?s=t.getMinutes():i=="SS"&&(s=t.getSeconds()),s>9||!n?r=s.toString():r="0"+s,e=e.replace(i,r)}return e}static getServerTimeStr(){return pi.formatTimeStamp(Laya.timer.currTimer)}static getTimeArr(){return pi.getServerTimeStr().split("/")}static get getDay(){let e=pi.getServerTimeStr().split("/");return parseInt(e[2])}static parseSheetTime(t){let e="";if(t){let i=t.length;for(let n=0;n<i;n++){let r="";t[n]<10?r="0"+t[n]:r=t[n],n!==i-1&&(r=r+":"),e+=r}}return e}static dateStringToTimestamp(t,e){let[i,n,r]=t.split("-").map(Number),s=Number(e),o=new Date(i,n-1,r,s).getTime();return Number(o)}static getTimestamp(t,e,i,n,r){return new Date(t,e-1,i,n,r).getTime()}static getCurrentDayTimestamp(){let t=new Date,e=t.getHours();return t.setHours(e,0,0,0),t.getTime()}static getYearMonthDat(t){let e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):""+(e.getMonth()+1),r=e.getDate()<10?"0"+e.getDate():""+e.getDate();return`${i}-${n}-${r}`}static formatDayAndTime(t,e="-"){let i=new Date(t),n=i.getFullYear(),r=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0"),o=String(i.getHours()).padStart(2,"0"),l=String(i.getMinutes()).padStart(2,"0");return{date:`${n}${e}${r}${e}${s}`,time:`${o}:${l}`}}static formatTimeAgo(t){return t<60*1e3?p.instance.getLanguage(1188):t<60*60*1e3?p.instance.getLanguage(2004,Math.floor(t/6e4)):t<24*60*60*1e3?p.instance.getLanguage(2003,Math.floor(t/36e5)):p.instance.getLanguage(2002,Math.floor(t/(24*60*60*1e3)))}static colorTimeAgo(t){return t<60*1e3?"#43ef74":"#b4b4b4"}static formatTimeExpires(t){return t<60*1e3?p.instance.getLanguage(1214,t):t<60*60*1e3?p.instance.getLanguage(1215,Math.floor(t/6e4)):t<24*60*60*1e3?p.instance.getLanguage(1216,Math.floor(t/36e5)):p.instance.getLanguage(1217,Math.floor(t/(24*60*60*1e3)))}static getTimeDifference(t,e=Va.MONTH){let i=new Date,r=new Date(t*1e3).getTime()-i.getTime();if(r<0)return{months:0,days:0,hours:0,minutes:0,seconds:0,ms:0};let s=r,o=Math.floor(r/1e3),l=Math.floor(o/60),u=Math.floor(l/60),m=Math.floor(u/24),h=Math.floor(m/30);return e==="months"?(m%=30,u%=24,l%=60,o%=60,s%=1e3):e==="days"?(u%=24,l%=60,o%=60,s%=1e3,h=0):e==="hours"?(l%=60,o%=60,s%=1e3,h=0,m=0):e==="minutes"?(o%=60,s%=1e3,h=0,m=0,u=0):e==="seconds"?(s%=1e3,h=0,m=0,u=0,l=0):e==="ms"&&(h=0,m=0,u=0,l=0,o=0),{months:e==="months"?h:0,days:e==="months"||e==="days"?m:0,hours:e==="months"||e==="days"||e==="hours"?u:0,minutes:e==="months"||e==="days"||e==="hours"||e==="minutes"?l:0,seconds:e!=="ms"?o:0,ms:s}}static checkTimeValid(t){return!1}};pi.OneDaySceond=24*3600,pi.OneHourSceond=3600,pi.OneMiniuteSecond=60;var fe=pi;var K=class a{constructor(){this.tokenContract=null;this.hero_contract=null;this.loginRequestInfo={time:0,randomHex:"",r:"",s:"",v:"",roleId:""}}get getloginRequestInfo(){return this.loginRequestInfo}static get instance(){return a._instance||(a._instance=new a),a._instance}async init(){if(typeof window.ethereum>"u"||ie.Debug==2){C.instance.notice(p.instance.getLanguage(130));return}$e.instance.sendCustumEvent(10),this.walletClient=Gl({transport:Dl(window.ethereum)});var t;if(ie.Debug<2){console.log("开始获得链id ===============》");var e=await a.instance.walletClient.getChainId();t=this.getChain(e)}t||(t=Ha),this.publicClient=su({chain:t,transport:Qc()}),this.walletClient=Gl({chain:t,transport:Dl(window.ethereum)});let i=await a.instance.walletClient.getChainId();console.log("链id===============》",i),await OI(),$e.instance.sendCustumEvent(12),this.registerProxy(),$e.instance.sendCustumEvent(17)}async registerProxy(){Co.instance.init()}async getWalletAddress(){if(this.walletAddress)return this.walletAddress;let[t]=await this.walletClient.requestAddresses();return console.log("钱包地址===============》",t),t;if(await OI(),vi.type==vi.TYPE_TRUST)try{console.log("initWeb3 -3");let e=await vi.trustProvider.request({method:"eth_requestAccounts"});return console.log("initWeb3 -4"),console.log(e),e[0]}catch(e){console.log("initWeb3 -5"+e),e.code===4001&&console.error("User denied connection.")}else if(vi.type==vi.TYPE_WEB3)return(await window.ethereum.request({method:"eth_requestAccounts"}))[0];return null}async dappLogin(){console.log("dappLogin this.walletAddress: "+this.walletAddress),$e.instance.sendCustumEvent(13),this.walletAddress=await this.getWalletAddress(),$e.instance.sendCustumEvent(14),console.log("login to server",1),await this.signAndLogin(),console.log("login success",1)}getChainId(){let t="";return typeof window.ethereum>"u"&&(t="0x38"),(window.ethereum.chainId+"").indexOf("0x")==-1?t="0x"+window.ethereum.chainId.toString(16):t=window.ethereum.chainId,t!=="0x38"&&t!=="0x61"&&C.instance.notice(p.instance.getLanguage(18)),t}async signAndLogin(t=!1){var e=!0;let i=new Date().getTime(),n="",r="",s="",o="";if(ie.Debug!=0)e=!1;else{let y=localStorage.getItem("TOX-COOKIE-CODE"+a.instance.walletAddress);if(!t&&y){y=un.decode(y);let x=y.split("&");i=parseFloat(x[0]),n=x[1],r=x[2],s=x[3],o=x[4];let E=fe.checkTimeValid(i);y&&i&&E&&n&&r&&s&&o&&(e=!1),console.log("needSign: "+e)}}if(e){console.log("111");var l=xu().substring(0,32);n=Fe(l,{size:32}),console.log("222"),i=new Date().getTime();let x=this.walletAddress+n+i,E=new ff.default("SHA-256","TEXT",{encoding:"UTF8"});E.update(x);let S=E.getHash("HEX");if(console.log("进入签名",1),this.walletClient)try{let T=await this.walletClient.signMessage({account:this.walletAddress,message:S});console.log("签名结束",1);let N=T.substring(2);r="0x"+N.substring(0,64),s="0x"+N.substring(64,128),o="0x"+N.substring(128,130)}catch(T){C.instance.notice("签名失败,重新签名"),this.signAndLogin(t),console.log("签名失败",T);return}}let u={roleId:this.walletAddress,time:i,randomHex:n,r,s,v:o};this.loginRequestInfo.time=i,this.loginRequestInfo.randomHex=n,this.loginRequestInfo.r=r,this.loginRequestInfo.s=s,this.loginRequestInfo.v=o,this.loginRequestInfo.roleId=this.walletAddress,$e.instance.sendCustumEvent(15);var m=un.encode(i+"&"+n+"&"+r+"&"+s+"&"+o);localStorage.setItem("TOX-COOKIE-CODE"+a.instance.walletAddress,m),mr.connect();return;if(h){if(console.log("服务器登录成功"),h.status==1){he.alertNoAll(Oe.instance.get(2));return}$e.instance.sendCustumEvent(16),localStorage.setItem("TOX-COOKIE"+a.instance.walletAddress,h.loginToken);var m;localStorage.setItem("TOX-COOKIE-CODE"+a.instance.walletAddress,m)}else O.intance.openModule(L.NoServerView)}async main(){let t=su({chain:ql,transport:Qc()}),e=Gl({chain:ql,transport:Dl(window.ethereum)}),i=await t.getBalance({address:"0x55d398326f99059fF775485246999027B3197955"});console.log("balance:"+i);let[n]=await e.requestAddresses();console.log("address:"+n);let r=await e.signMessage({account:n,message:"Hello world!"});console.log("address: "+n),console.log("message: Hello world!"),console.log("signature: "+r);let s=await t.verifyMessage({address:n,message:"Hello world!",signature:r});console.log("valid: "+s);let l=await(await fetch("http://localhost:3000/api/login",{method:"POST",body:JSON.stringify({address:e.account.address,signature:r})})).json();console.log("data: "+l)}async refreshToken(){let t,e=localStorage.getItem("TOX-COOKIE-CODE"+a.instance.walletAddress);e=un.decode(e);let i=e.split("&"),n=parseFloat(i[0]),r=i[1],s=i[2],o=i[3],l=i[4];if(n&&r&&s&&o&&l){let u={debug:ie.Debug,address:this.walletAddress,time:n,randomHex:r,r:s,s:o,v:l};t=await w.requestPost("wxgame/player/getJwt",u,!1,!1).catch(m=>{}),t&&localStorage.setItem("TOX-COOKIE"+a.instance.walletAddress,t.loginToken)}return t}async checkNickName(t){console.log("checkNickName");let e={name:t,address:this.walletAddress};return await w.requestPost("wxgame/player/nameCheck",e,!1,!1).catch(n=>{_e.instance.hideLoading(),console.log("checkResult 失败")})}waitGetAccount(){Laya.timer.loop(2e3,this,this.getAcccount)}async getAcccount(){console.log("getAcccount");var t=!0;let e=new Date().getTime(),i="",n="",r="",s="";if(ie.Debug!=0)t=!1;else{let m=localStorage.getItem("TOX-COOKIE-CODE"+a.instance.walletAddress);m=un.decode(m);let h=m.split("&");e=parseFloat(h[0]),i=h[1],n=h[2],r=h[3],s=h[4],e&&i&&n&&r&&s&&(t=!1),console.log("needSign: "+t)}if(t){var o=xu().substring(0,32);i=Fe(o,{size:32}),e=new Date().getTime();let h=this.walletAddress+i+e,y=new ff.default("SHA-256","TEXT",{encoding:"UTF8"});y.update(h);let x=y.getHash("HEX");console.log("进入签名",1);let E=await this.walletClient.signMessage({account:this.walletAddress,message:x});console.log("签名结束",1);let S=E.substring(2);n="0x"+S.substring(0,64),r="0x"+S.substring(64,128),s="0x"+S.substring(128,130)}let l,u={address:this.walletAddress,time:e,randomHex:i,r:n,s:r,v:s};if(l=await w.requestPost("wxgame/player/getAccount",u,!1,!1).catch(m=>{}),l){Laya.timer.clear(this,this.getAcccount);let m=l.playerDto;localStorage.setItem("TOX-COOKIE"+a.instance.walletAddress,l.loginToken),_.intance.event(b.EVENT_WAIT_PLAYERINFO,m)}}async createAcccount(t,e,i,n,r){console.log("createAcccount");var s=!0;let o=new Date().getTime(),l="",u="",m="",h="";if(ie.Debug!=0)s=!1;else{let N=localStorage.getItem("TOX-COOKIE-CODE"+a.instance.walletAddress);N=un.decode(N);let F=N.split("&");o=parseFloat(F[0]),l=F[1],u=F[2],m=F[3],h=F[4],o&&l&&u&&m&&h&&(s=!1),console.log("needSign: "+s)}if(s){var y=xu().substring(0,32);l=Fe(y,{size:32}),o=new Date().getTime();let F=this.walletAddress+l+o,G=new ff.default("SHA-256","TEXT",{encoding:"UTF8"});G.update(F);let Y=G.getHash("HEX");if(console.log("进入签名",1),this.walletClient){let Z=await this.walletClient.signMessage({account:this.walletAddress,message:Y});console.log("签名结束",1);let ne=Z.substring(2);u="0x"+ne.substring(0,64),m="0x"+ne.substring(64,128),h="0x"+ne.substring(128,130)}}let x,E={name:t,sex:e,icon:i,country:n,referral:r,debug:ie.Debug,address:this.walletAddress,time:o,randomHex:l,r:u,s:m,v:h};var S=Ge.snake.socket.MessageType.MSG_USER_REGISTER,T=Ge.snake.socket.CS_USER_REGISTER.fromObject({icon:i,userName:t,country:n,walletAddr:this.walletAddress});return mr.send(S,T),null;if(x=await w.requestPost("wxgame/player/create",E,!1,!1).catch(N=>{}),x){let N=x.playerDto;return localStorage.setItem("TOX-COOKIE"+a.instance.walletAddress,x.loginToken),N}return null}async getBalance(){return 0}async allowanceAddress(t){}async newAllowanceAddress(t,e){let i=a.instance.walletAddress,n=t;try{if(console.log("查看是否已经授权, owner:"+i+", spender:"+n+", publicClient.chain.id:"+this.publicClient.chain.id),e==0)return!0;let r=await a.instance.publicClient.readContract({address:e,abi:oe.TOKEN_ERC20ABI,functionName:"allowance",args:[i,n]});if(r=="0"){console.log("未授权，进行授权, owner:"+i+", allowance:"+r+", walletClient.chain.id:"+this.walletClient.chain.id);let s=await a.instance.walletClient.writeContract({address:e,abi:oe.TOKEN_ERC20ABI,functionName:"approve",args:[n,"100000000000000000000000000000000000000000000000"],account:i});console.log("授权hash============"+s);let o=await a.instance.publicClient.waitForTransactionReceipt({hash:s});return console.log(`Tx with hash: ${s}`,o),o&&o.status=="success"?(console.log(`Tx successful with hash: ${s}`),!0):!1}else return console.log("已授权, owner:"+i+", allowance:"+r),!0}catch(r){if(console.log("授权错误====》",r),r instanceof Error){let s=r.message;console.log("授权错误====》",s)}}}async allowanceAddressByTokenAddress(t,e){let i=new window.web3.eth.Contract(oe.TOKEN_ERC20ABI,e);return await i.methods.allowance(this.walletAddress,t).call()=="0"&&(console.log("ERC20 allowance!"),await i.methods.approve(t,"100000000000000000000000000000000000000000000000").send({from:this.walletAddress},(r,s)=>{if(r)return _e.instance.hideLoading(),!1})),!0}async getERC20TokenBalance(t){return window.ethereum,await new window.web3.eth.Contract(oe.TOKEN_ERC20ABI,t).methods.balanceOf(this.walletAddress).call()}async getBalance2(t,e=void 0){let i=this.walletAddress;e&&(i=e);let n;return!t||t==oe.ADDRESS0?n=await a.instance.publicClient.getBalance({address:i}):n=await this.publicClient.readContract({address:t,abi:oe.TOKEN_ERC20ABI,functionName:"balanceOf",args:[i]}),console.log("getBalance2 publicClient.chain.id:"+this.publicClient.chain.id,"代币地址",t,"余额：",n),n}async getIgoUSD(){let t=ie.vType==2?oe.IGO_ADDRESS:oe.IGO_ADDRESS_TEST;return await this.publicClient.readContract({address:t,abi:oe.IGO_ABI,functionName:"USD"})}async getIgoLimitTime(){let t=ie.vType==2?oe.IGO_ADDRESS:oe.IGO_ADDRESS_TEST;return await this.publicClient.readContract({address:t,abi:oe.IGO_ABI,functionName:"deadline"})}async getIgoRecord(){let t=ie.vType==2?oe.IGO_ADDRESS:oe.IGO_ADDRESS_TEST,e=this.walletAddress;return await this.publicClient.readContract({address:t,abi:oe.IGO_ABI,functionName:"getRecords",args:[e]})}async rechargeIgoUSD(t,e,i){let n=ie.vType==2?oe.IGO_ADDRESS:oe.IGO_ADDRESS_TEST,r=this.walletAddress,s=Number(ia(t+"",18)),o=await w.requestPost("wxgame/fodc/getSignature",{amount:s,chainId:e,contract:n});if(o&&o.signInfo){let l=o.signInfo;try{if(_e.instance.showLoading(),!await a.instance.newAllowanceAddress(n,i))return _e.instance.hideLoading(),C.instance.notice(p.instance.getLanguage(15)),!1;let m=l.amount,h=BigInt(m.toString()),y=await a.instance.walletClient.writeContract({address:l.contract,abi:oe.IGO_ABI,functionName:"recharge",args:[l.address,h,l.inviteAddress,l.deadline,l.signature],account:r}),x;if(x=await a.instance.publicClient.waitForTransactionReceipt({hash:y,pollingInterval:1e3}),x&&x.status=="success")return console.log(`Tx successful with hash: ${y}`),_e.instance.hideLoading(),y;_e.instance.hideLoading(),he.TransactionErrorTip();return}catch(u){_e.instance.hideLoading(),he.TransactionErrorTip(),console.log(u)}}}async getRechargedIgoUSD(){let t=ie.vType==2?oe.IGO_ADDRESS:oe.IGO_ADDRESS_TEST,e=a.instance.walletAddress;return await this.publicClient.readContract({address:t,abi:oe.IGO_ABI,functionName:"getAmounts",args:[e]})}async getAllRechargedMoney(){let t=ie.vType==2?oe.IGO_ADDRESS:oe.IGO_ADDRESS_TEST,e=a.instance.walletAddress;return await this.publicClient.readContract({address:t,abi:oe.IGO_ABI,functionName:"totalQuota"})}async getMyAllRechargedMoney(){let t=ie.vType==2?oe.IGO_ADDRESS:oe.IGO_ADDRESS_TEST,e=a.instance.walletAddress;return await this.publicClient.readContract({address:t,abi:oe.IGO_ABI,functionName:"getAmounts",args:[e]})}async getBankBalance(t,e,i){if(i=="WBNB"){let n=await a.instance.publicClient.getBalance({address:e});if(n)return n}else{let n=this.getBalance2(t,e);if(n)return n}}async getHeroStatus(t){return await this.hero_contract.methods.getStatus(parseInt(t)).call()}async checkHeroIsBuzy(t){let e=await this.getHeroStatus(t);return parseInt(e)?(C.instance.notice(p.instance.getLanguage(19)),!0):!1}async switchChain(t){var e=this.getChainName(t);let i=await a.instance.walletClient.getChainId();if(ie.isInto&&Laya.Browser.onIOS&&i!==t)return C.instance.notice(p.instance.getLanguage(1172,e)),!1;try{console.log("switchChain id:"+t),await this.walletClient.switchChain({id:t})}catch(n){if(console.log(n),n instanceof Error){let r=n.message;console.log("切换错误====》",r)}return C.instance.notice(p.instance.getLanguage(1172,e)),!1}return await this.resetPublicAndWallet(t),!0}async addChain(t){console.log(t);var e=this.getChain(t);let i=await this.walletClient.addChain({chain:e});console.log(i)}getChain(t){var e=null;switch(t){case Ha.id:e=Ha;break;case Un.id:e=Un;break;case fs.id:e=fs;break;case ql.id:e=ql;break;case mf.id:e=mf;break;case hf.id:e=hf;break;case lf.id:e=lf;break;case cf.id:e=cf;break;case Ua.id:e=Ua;break;case Fa.id:e=Fa;break;case ds.id:e=ds;break;case hr.id:e=hr;break}return e}getChainName(t){var e="",i=this.getChain(t);return i&&(e=i.name),e}async resetPublicAndWallet(t){console.log("resetPublicAndWallet chain:"+t);var e=this.getChain(t);await a.instance.reInitPublicClient(e),await a.instance.reInitWalletClient(e)}reInitPublicClient(t){console.log("reInitPublicClient chain:"+t),this.publicClient=su({chain:t,transport:Qc()})}reInitWalletClient(t){console.log("reInitWalletClient chain:"+t),this.walletClient=Gl({chain:t,transport:Dl(window.ethereum)})}async getAuthStatus(){let t=a.instance.walletAddress;try{return await a.instance.publicClient.readContract({address:oe.SAT_ADDRESS,abi:oe.SAT_ABI,functionName:"getAuthStatus",args:[t]})}catch(e){if(console.log("授权错误====》",e),e instanceof Error){let i=e.message;console.log("授权错误====》",i)}}}};var dr=class dr{constructor(t,e){this._lineIndex=0;this._isShow=!1;this._alpha=.6;this.isInit=!1;this._isRelease=!0;this._count=0;this.maxCount=1e3;this.prevX=0;this.prevY=0;this._stage=t,this._isRelease=e,this._actionLineList=[],this._time=new Date().getTime();let i,n,r,s,o=function(m){i=m.stageX,n=m.stageY,r=i,s=n},l=function(m){r=m.stageX,s=m.stageY},u=function(m){let h=Laya.stage.width-(r-i)<160,y=Laya.stage.height-(s-n)<160;h&&y&&Fn.debugger&&(Laya.Browser.window.console.log=Fn.addConsoleLog,Fn.debugger.showOrHide())};Laya.stage.on(Laya.Event.MOUSE_DOWN,this,o),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,l),Laya.stage.on(Laya.Event.MOUSE_UP,this,u)}initDebugView(){if(!this.isInit){this.totalW=Laya.stage.width,this.totalH=Laya.stage.height/2,this.bigContainer=new Laya.Sprite,this.bigContainer.zOrder=2e3,this.bigContainer.name="bigContainerDebug",this.bgContainer=new Laya.Sprite,this._bgSp=new Laya.Sprite,this._bgSp.alpha=this._alpha,this._bgSp.graphics.drawRect(0,0,this.totalW,this.totalH,"#000000"),this._bgSp.mouseEnabled=!1,this._debugInfoTf=new Laya.Text,this._debugInfoTf.color="#ffffff",this._debugInfoTf.width=this.totalW-10,this._debugInfoTf.height=this.totalH-10,this._debugInfoTf.overflow="scroll",this._debugInfoTf.wordWrap=!0;let t="[LOADINFO - DEBUGGER]";this.appendText("加载调试信息 "+t,0,!1),this._closeTf=new Laya.Label,this._closeTf.color="#ff0000",this._closeTf.valign="middle",this._closeTf.width=55,this._closeTf.height=55,this._closeTf.borderColor=dr.DEFAULT_COLOR,this._closeTf.text="关闭",this._autoScrollTf=new Laya.Label,this._autoScrollTf.color="#ff0000",this._autoScrollTf.valign="middle",this._autoScrollTf.width=55,this._autoScrollTf.height=55,this._autoScrollTf.borderColor=dr.DEFAULT_COLOR,this._autoScrollTf.text="自动卷屏",this._bgAlpha0=new Laya.Label,this._bgAlpha0.color="#ff0000",this._bgAlpha0.valign="middle",this._bgAlpha0.width=55,this._bgAlpha0.height=55,this._bgAlpha0.borderColor=dr.DEFAULT_COLOR,this._bgAlpha0.text="背景-",this._bgAlpha1=new Laya.Label,this._bgAlpha1.color="#ff0000",this._bgAlpha1.valign="middle",this._bgAlpha1.width=55,this._bgAlpha1.height=55,this._bgAlpha1.borderColor=dr.DEFAULT_COLOR,this._bgAlpha1.text="背景+",this._clearTf=new Laya.Label,this._clearTf.color="#ff0000",this._clearTf.valign="middle",this._clearTf.width=55,this._clearTf.height=55,this._clearTf.borderColor=dr.DEFAULT_COLOR,this._clearTf.text="清理",this._testTf=new Laya.Label,this._testTf.color="#ff0000",this._testTf.width=55,this._testTf.height=55,this._testTf.borderColor=dr.DEFAULT_COLOR,this._testTf.text="点穿",this.bgContainer.x=5,this.bgContainer.y=5,this._debugInfoTf.x=5,this._debugInfoTf.y=5,this.bgContainer.addChild(this._bgSp),this.bgContainer.addChild(this._debugInfoTf),this._closeTf.x=this.totalW-60,this._closeTf.y=5,this.bgContainer.addChild(this._closeTf),this._autoScrollTf.x=this.totalW-60,this._autoScrollTf.y=105,this.bgContainer.addChild(this._autoScrollTf),this._bgAlpha0.x=this.totalW-60,this._bgAlpha0.y=205,this.bgContainer.addChild(this._bgAlpha0),this._bgAlpha1.x=this.totalW-60,this._bgAlpha1.y=305,this.bgContainer.addChild(this._bgAlpha1),this._clearTf.x=this.totalW-60,this._clearTf.y=405,this.bgContainer.addChild(this._clearTf),this._testTf.x=this.totalW-60,this._testTf.y=505,this.bigContainer.addChild(this.bgContainer),this.bigContainer.addChild(this._testTf),this._autoScroll=!0,this._hide=!0,this._debugInfoTf.on(Laya.Event.MOUSE_DOWN,this,this.startScrollText),this._closeTf.on(Laya.Event.CLICK,this,this.onCloseTfClick),this._autoScrollTf.on(Laya.Event.CLICK,this,this.onAutoScrollTfClick),this._bgAlpha0.on(Laya.Event.CLICK,this,this.onBgAlpha0),this._bgAlpha1.on(Laya.Event.CLICK,this,this.onBgAlpha1),this._clearTf.on(Laya.Event.CLICK,this,this.onClearTfClick),this._testTf.on(Laya.Event.CLICK,this,this.onTestTfClick),this.isInit=!0}}show(){this.initDebugView(),this._stage.addChild(this.bigContainer),this._isShow=!0,this.updateView()}hide(){this.initDebugView(),this.bigContainer.parent&&this.bigContainer.parent.removeChild(this.bigContainer),this._isShow=!1,this.updateView()}showOrHide(){this._isShow=!this._isShow,this._isShow?this.show():this.hide()}appendText(t,e=0,i=!0){if(i){let n=new Date().getTime()-this._time;t+="  ["+(n/1e3).toFixed(3)+"]"}this._actionLineList.push([t+`
`,e]),this._lineIndex>=200&&(this._actionLineList.splice(0,20),this._lineIndex-=20),this._count++,this._count>this.maxCount&&(this._count=0,this._debugInfoTf&&(this._debugInfoTf.text="")),this._isShow&&(this._currentLine=this._actionLineList[this._lineIndex++],this._debugInfoTf&&(this._debugInfoTf.text+=this._currentLine[0]),this._autoScroll&&this._debugInfoTf&&(this._debugInfoTf.scrollY=this._debugInfoTf.maxScrollY))}updateView(){if(this._isShow){this._count=0,this._debugInfoTf.text="";let t=this._actionLineList.length;for(this._lineIndex=0;this._lineIndex<t;++this._lineIndex)this._currentLine=this._actionLineList[this._lineIndex],this._debugInfoTf.text+=this._currentLine[0],this._count++,this._count>this.maxCount&&(this._count=0,this._debugInfoTf.text="");this._autoScroll&&(this._debugInfoTf.scrollY=this._debugInfoTf.maxScrollY)}else this._debugInfoTf.text=""}onCloseTfClick(t){this.hide()}onAutoScrollTfClick(t){this._autoScroll=!this._autoScroll,this._autoScroll?this._autoScrollTf.text="自动卷屏":this._autoScrollTf.text="手动卷屏"}onBgAlpha0(t){this._alpha-=.1,this._alpha<=0&&(this._alpha=0),this._bgSp.alpha=this._alpha}onBgAlpha1(t){this._alpha+=.1,this._alpha>=1&&(this._alpha=1),this._bgSp.alpha=this._alpha}onClearTfClick(t){this._debugInfoTf.text="",this._actionLineList.length=0,this._lineIndex=0}onTestTfClick(t){this.bgContainer.mouseEnabled=!this.bgContainer.mouseEnabled}set testFun(t){this._testFun=t}get bgSp(){return this._bgSp}startScrollText(t){this.prevX=this._debugInfoTf.mouseX,this.prevY=this._debugInfoTf.mouseY,Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.scrollText),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.finishScrollText)}finishScrollText(t){Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.scrollText),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.finishScrollText)}scrollText(t){let e=this._debugInfoTf.mouseX,i=this._debugInfoTf.mouseY;this._debugInfoTf.scrollX+=this.prevX-e,this._debugInfoTf.scrollY+=this.prevY-i,this.prevX=e,this.prevY=i}};dr.DEFAULT_COLOR="#ffffff";var yf=dr;var Fn=class a{static Initialize(t,e){a.isRelease=e,this.debugger==null&&(this.debugger=new yf(t,e))}static log(t,e=0,i=0){var n=he.GetLogTime+" "+t;e&&a.addLog(n,e,i)}static addLog(t,e=0,i=0){this.debugger&&this.debugger.appendText(t,i),console.log(t)}static addConsoleLog(...t){a.debugger&&a.debugger.appendText(t,0)}};var ck=Laya.HttpRequest,Si=class Si{static requestGet(t,e,i=!1,n=!0,r=!1){return new Promise((s,o)=>{var l=Laya.Pool.getItem("HttpRequest");l||(l=new ck),l.http.timeout=2e3,l.on(Laya.Event.COMPLETE,null,x),l.on(Laya.Event.ERROR,null,E),l.http.onreadystatechange=()=>{if(l.http.readyState===XMLHttpRequest.DONE){var T=l.http.status;T>=200&&T<400||(o(),S())}};let u=localStorage.getItem("TOX-COOKIE"+K.instance.walletAddress),m=["Content-Type","application/json"];u&&(m=[...m,"Authorization",u]);let h;t.startsWith("http")?h=t+y(e):h=Si.httpRoot+"/"+t+y(e),Si.httpRoot!="https://api.phantomarena.co"&&Fn.log("REQUEST_GET "+h,1),l.send(h,null,"get","json",m);function y(T){if(typeof T=="string")return T;let N="";for(let F in T)N+="&"+F+"="+T[F];return N}function x(T){T.code==="0"?s(T.data):(Oe.instance.showErrorWord(parseInt(T.code)),o(T.code)),S()}function E(T,N){debugger;o(T),S()}function S(){l.off(Laya.Event.COMPLETE,null,x),l.off(Laya.Event.ERROR,null,E),Laya.Pool.recover("HttpRequest",l)}})}static startHeart(){Laya.stage.on(Laya.Event.BLUR,this,()=>{this.stopHeartInStage=!0,console.log("失去焦点, 停止心跳")}),Laya.stage.on(Laya.Event.FOCUS,this,()=>{this.stopHeartInStage=!1,console.log("获取焦点, 开始心跳")}),Laya.timer.loop(3e3,this,this.onHeart)}static async onHeart(){console.log("onHeart");return;var e,n,r,s,o,l}static requestPost(t,e,i=!1,n=!0,r=!1){let s=localStorage.getItem("TOX-COOKIE"+K.instance.walletAddress);return i&&!s?[]:new Promise((o,l)=>{var u=Laya.Pool.getItem("HttpRequest");u||(u=new ck),u.http.timeout=1e4,u.once(Laya.Event.COMPLETE,null,y),u.once(Laya.Event.ERROR,null,x);let m=[];s&&n&&(m=[...m,"Authorization",s]);var h=Si.seq+1;Si.seq=h,t=="wxgame/sys/ping"?ie.showHeartLog&&console.log(he.GetLogTime+" "+h+" >>> HTTP_POST "+Si.httpRoot+"/"+t+" "+JSON.stringify(e),s):console.log(he.GetLogTime+" "+h+" >>> HTTP_POST "+Si.httpRoot+"/"+t+" "+JSON.stringify(e),s),t.startsWith("http")?u.send(t,e,"post","json",m):u.send(Si.httpRoot+"/"+t,e,"post","json",m);async function y(S){if(t=="wxgame/sys/ping"?ie.showHeartLog&&console.log(he.GetLogTime+" "+h+" <<< hTTP_RCV data: "+JSON.stringify(S),1):console.log(he.GetLogTime+" "+h+" <<< hTTP_RCV data: "+JSON.stringify(S),1),S.errorCode==0||S.errorCode==="0")o(S);else{if(S.errorCode===10)he.heroNotEnought();else if(S.errorCode===18)he.titickNotEnought();else if(S.errorCode===26)he.RemError();else if(S.errorCode!==29)if(S.errorCode===30)he.NoHeroError(Oe.instance.get(S.errorCode));else if(S.errorCode===32)he.NoHeroError(Oe.instance.get(S.errorCode));else if(S.errorCode===2||S.errorCode===21)he.alertNoAll(Oe.instance.get(S.errorCode));else if(S.errorCode===5)if(ie.Debug==0){localStorage.setItem("TOX-COOKIE"+K.instance.walletAddress,"");var T=await K.instance.refreshToken();T&&Si.requestPost(t,e,i,n)}else localStorage.setItem("TOX-COOKIE"+K.instance.walletAddress,""),Oe.instance.showErrorWord(parseInt(S.errorCode));else S.errorCode===17?ie.Debug==0?(localStorage.setItem("TOX-COOKIE"+K.instance.walletAddress,""),K.instance.signAndLogin(),Oe.instance.showErrorWord(parseInt(S.errorCode))):(localStorage.setItem("TOX-COOKIE"+K.instance.walletAddress,""),Oe.instance.showErrorWord(parseInt(S.errorCode))):S.errorCode===9?(We.instance.close(),he.commTipWithYes(Oe.instance.get(S.errorCode))):S.errorCode===51?he.commTipWithYes(Oe.instance.get(S.errorCode)):r||Oe.instance.showErrorWord(parseInt(S.errorCode),S.errorParams);l(S.errorCode)}E()}function x(S,T){console.log("errorHandler data: "+S,1),r||Oe.instance.showErrorWord(500),l(S),E()}function E(){u.off(Laya.Event.COMPLETE,null,y),u.off(Laya.Event.ERROR,null,x),Laya.Pool.recover("HttpRequest",u)}})}};Si.httpRoot=getServer(),Si.needHeart=!0,Si.stopHeartInRoom=!1,Si.stopHeartInStage=!1,Si.lastPreContractstartRoomId=-1,Si.lastPrecontractReadyRoomId=-1,Si.seq=0;var w=Si;var Eu=class Eu{constructor(){this.roomId=0;this.rankList=[];this.reward=[];this.arenaType=0;this.groupData=[];this.teamData=[];this.groupFightScore=new Map;this.groupId=0;this.battleTime=0;this.personalRank=0;this.kills=0;this.skinLen=0;this.score=0;this.totalRank=0;this.loserTid=""}protocolId(){return Eu.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.arenaType),t.writeLong(e.battleTime),e.groupData===null?t.writeInt(0):(t.writeInt(e.groupData.length),e.groupData.forEach(i=>{t.writePacketList(i,25013)})),t.writeStringLongMap(e.groupFightScore),t.writeInt(e.groupId),t.writeString(e.loserTid),t.writeLong(e.personalRank),t.writePacketList(e.rankList,25012),t.writePacketList(e.reward,25008),t.writeLong(e.roomId),t.writePacketList(e.teamData,25017),t.writeLong(e.totalRank))}static read(t){if(!t.readBoolean())return null;let e=new Eu,i=t.readInt();e.arenaType=i;let n=t.readLong();e.battleTime=n;let r=new Array,s=t.readInt();if(s>0)for(let T=0;T<s;T++){let N=t.readPacketList(25013);r.push(N)}e.groupData=r;let o=t.readStringLongMap();e.groupFightScore=o;let l=t.readInt();e.groupId=l;let u=t.readString();e.loserTid=u;let m=t.readLong();e.personalRank=m;let h=t.readPacketList(25012);e.rankList=h;let y=t.readPacketList(25008);e.reward=y;let x=t.readLong();e.roomId=x;let E=t.readPacketList(25017);e.teamData=E;let S=t.readLong();return e.totalRank=S,e}};Eu.PROTOCOL_ID=1020;var D1=Eu,uk=D1;var pn=class pn{constructor(){}static trim(t,e=null){e||(e=[" ","\r",`
`,"	",String.fromCharCode(65279)]);var i,n,r;for(i=t,r=e.length,n=0;n<r;n++)i=pn.getReplace(i,e[n],"");return i}static getReplace(t,e,i){if(!t)return"";var n;return n=t.replace(new RegExp(e,"g"),i),n}static isEmpty(t){return t.length<1?!0:pn.emptyStrDic.hasOwnProperty(t)}static trimLeft(t){var e;e=0;var i;for(i=t.length;pn.isEmpty(t.charAt(e))&&e<i;)e++;return e<i?t.substr(e):""}static trimRight(t){var e;for(e=t.length-1;pn.isEmpty(t.charAt(e))&&e>=0;)e--;var i;return i=t.substring(0,e),e>=0?t.substring(0,e+1):""}static trimSide(t){var e;return e=pn.trimLeft(t),e=pn.trimRight(e),e}static shortStr(t,e){return t.length>e?t.substr(0,e)+"...":t}static shortHeroStr(t,e=10){return pn.abbreviateString(t,e)}static abbreviateString(t,e=11){if(t.length<=e)return t;{let i=Math.floor((e-3)/2);return t.slice(0,i)+"..."+t.slice(-i)}}static caseInsensitiveSearchWithRegex(t,e){return new RegExp(e,"i").test(t)}static formatWalletAddress(t){let n="...";return t.length<=12+10?t:`${t.substring(0,12)}${n}${t.substring(t.length-10)}`}};pn.ANONYMOUS_NAME="***",pn.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"	":!0};var qe=pn;var _i=class{constructor(){this._color=1;this.isLvUp=!1;this.newAddCnt=0}get simgurl(){return M.instance.getHeroHeadRes(this.heroItem.serialId,this.color)}get sk(){return M.instance.getHeroSkRes(this.heroItem.serialId,this.color)}get id(){return this._id}set id(t){this._id=t,this.heroItem=I.intance.m_dicHeros.get(t+"")}get name(){return p.instance.getLanguage(this.heroItem.name)}set name(t){this._name=t}get color(){return this._color}set color(t){t&&(this._color=t)}get m_iNum(){return this._m_iNum}set m_iNum(t){this._m_iNum=t}};var Xe=class a{constructor(t=0){this._m_iLevel=0;this._m_arrDisc=[];this.newAddCnt=0;this.isScholarship=!1;this.isLvUp=!1;this.needTip=!0;this.m_bSalon=!1;this.m_bIsSetId=!1;t!=0&&(this.m_iId=t)}get m_sIcon(){return this._m_sIcon}set m_sIcon(t){this._m_sIcon=t}get m_iLevel(){return this._m_iLevel>0?this._m_iLevel:1}set m_iLevel(t){this._m_iLevel=t||0}get m_iNum(){return this._m_iNum}set m_iNum(t){this._m_iNum=t}get m_iPk(){return this._m_iPk}set m_iPk(t){this._m_iPk=t}copyItem(){let t=new a;return t.m_iId=this.m_iId,t.m_iOriginalId=this.m_iOriginalId,t}get m_bTry(){return this.m_iId==this.m_iOriginalId?this._m_bSet=!1:this._m_bSet=!0,this._m_bSet}get m_strName(){return p.instance.getLanguage(this.itemItem.name)}set m_bTry(t){this._m_bSet=t}get m_iId(){return this._m_iId}set m_iId(t){this._m_iId=t,this.m_bIsSetId||(this.m_bIsSetId=!0,this.m_iOriginalId=t),this.setConfigData()}setConfigData(){if(this.m_iId!=0){if(this.itemItem=I.intance.m_dicItems.get(this.m_iId.toString()),!this.itemItem){console.log("[          <items> find out id:"+this.m_iId+"             ]");return}if(this.subType=parseInt(this.itemItem.subType+""),this.backType=parseInt(this.itemItem.backPack+""),this.type=parseInt(this.itemItem.type+""),this.m_sIcon=this.itemItem.icon,this.itemItem.buy_price){this.m_iPrice=this.itemItem.buy_price[0][1];let t=this.itemItem.buy_price[0][0],e=I.intance.m_dicItems.get(t);e&&(this.m_strBuyIcon=M.instance.getItemIcon(e.icon))}this.itemItem.sell_price&&(this.m_iSellPrice=parseFloat(this.itemItem.sell_price[0][1])),this.m_iQuality=this.itemItem.quality,this.setQualityData()}}setQualityData(){this.m_arrQualityData=this.itemItem.starArr}get getIconURL(){return M.instance.getItemIcon(this.itemItem.icon)}copy(){let t=new a(this.m_iId);return t.m_iLevel=this.m_iLevel,t}compareName(){return p.instance.getLanguage(this.itemItem.name)}compareQuality(){return parseFloat(this.m_iQuality+"")}compareSellPrice(){return parseFloat(this.itemItem.sell_price[1]+"")}compareNum(){return parseFloat(this.m_iNum+"")}compareLevel(){return parseFloat(this.m_iLevel+"")}compareFragment(){let t=this.itemItem.id;return 0}compareTypeId(){return parseInt(this.m_iId+"")}};var fa=class a{constructor(){this._isPop=!1;_.intance.on(b.EVENT_CHECK_REMAIN,this,this.onCheckRemain)}static get instance(){return a._instance||(a._instance=new a),a._instance}get model(){return Bt.instance}get isPop(){return this._isPop}startShow(){console.log("startShow");var t=this.model.hasRemain();!this._isPop&&t&&(this._isPop=!0,t instanceof _i?_.intance.event(b.EVENT_OPEN_MODULE,L.HeroGetDialog):_.intance.event(b.EVENT_OPEN_MODULE,L.ItemGetDialog))}onCheckRemain(t){if(t==L.ItemGetDialog||t==L.HeroGetDialog){var e=this.model.hasRemain();e?e instanceof _i?_.intance.event(b.EVENT_OPEN_MODULE,L.HeroGetDialog):_.intance.event(b.EVENT_OPEN_MODULE,L.ItemGetDialog):this._isPop=!1}}};var Bt=class a{constructor(t){this._list=[];this.needPop=!0;this.autoPop=!0}static get instance(){return a._instance||(a._instance=new a(new k1)),a._instance}get service(){return fa.instance}addItem(t,e=!1){let i=new Xe;i.m_iId=t.m_iId,i.newAddCnt=t.newAddCnt,i.m_iLevel=t.m_iLevel,i.isLvUp=t.isLvUp,i.m_bNew=t.m_bNew,this._list.push(i),e&&this.service.startShow()}addHeroItem(t,e=!1){let i=new _i;i.id=t.id,i.newAddCnt=t.newAddCnt,i.lv=t.lv,i.isLvUp=t.isLvUp,i.m_bNew=t.m_bNew,this._list.push(i),e&&this.service.startShow()}addItems(t,e=!1){this._list=this._list.concat(t),e&&this.service.startShow()}hasRemain(){return this._list.length>0?this._list[0]:null}get needListener(){return this._list.length>=2}addConsumeByServer(t){this._list.push(t)}addConsume(t,e){this._list.push([t,e])}getNextItem(){return this._list.length>0?this._list[0]:null}getOneItem(){return this._list.length>0?this._list.shift():null}},k1=class{};var B=class a{constructor(){this._inited=!1;this.stopAll=!1;this.roomWatcher=!1;this.matchWatcher=!1;this.heroReadyDic=new ye;this.init()}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){this._inited||(this._inited=!0)}get roomDto(){return this._roomDto}set roomDto(t){if(console.log("roomDto: ",t),this._roomDto=t,t){var e=v.instance.playerDto.pid;if(t.watch){let i=t.watch.some(n=>n===e);this.roomWatcher=i}}}setRoomAnonymousLabel(t,e=-1){return e==-1&&(e=a.instance.roomDto.anonymous),e==1?qe.ANONYMOUS_NAME:t}setMatchAnonymousLabel(t,e=-1){return e==-1&&(e=a.instance.matchDto.anonymous),!this.matchWatcher&&e==1?qe.ANONYMOUS_NAME:t}setMatchAnonymousImg(t,e=-1){return e==-1&&(e=a.instance.matchDto.anonymous),!this.matchWatcher&&e==1?null:t}get matchDto(){return this._matchDto}set matchDto(t){if(console.log("matchDto: ",t),this._matchDto=t,t){var e=v.instance.playerDto.pid;if(t.watch){let i=t.watch.some(n=>n===e);this.matchWatcher=i}t.startTime-t.nowTime>0?this.stopAll=!0:this.stopAll=!1}else this.stopAll=!1}setMatchRes(){this.heroReadyDic=new ye;var t=this.roomDto.members.length,e=[],i=this.currArenaItem.mapid;if(this.heroReadyDic.get("map_"+i)==null){var i=a.instance.currArenaItem.mapid,n=M.instance.getMapImg(i);e.push(n);var r=M.instance.getMapPrefab(i);e.push(r),this.heroReadyDic.set("map_"+i,!0)}for(var s=0;s<t;s++){var o=this.roomDto.members[s];if(this.heroReadyDic.get(o.heroId+"_"+o.heroColor)==null){var l=I.intance.m_dicHeros.get(o.heroId),u=M.instance.getHeroSkRes(l.serialId,o.heroColor);e.push({url:u,type:Laya.Loader.SPINE}),this.heroReadyDic.set(o.heroId+"_"+o.heroColor,!0)}}e.length>0&&Laya.loader.load(e,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{})}onPreAssetPress1(t){}async checkMatchRankData(){if(this.reward==null){let t=await w.requestPost("wxgame/room/balanceInfo",{roomId:a.instance.matchDto.roomId});this.onGoMatchEndRank(t)}}onMockMatchEnd(){var t=xt.instance.kills,e=xt.instance.skinLen,i=new uk;i.arenaType=ee.ARENA_TYPE_PVE,i.battleTime=a.instance.matchCoolDownTime*1e3,i.kills=t,i.skinLen=e,i.personalRank=10,i.score=23423410,a.instance.onGoMatchEndRank(i)}onGoMatchEndRank(t){if(this.roomGameOverPush=t,gt.instance.isMatching=!1,t.arenaType==ee.ARENA_TYPE_PVE){var e=q.instance.myPlayer;e&&console.log("我的英雄血量剩余： "+e.hp),a.instance.stopAll=!0,O.intance.openModule(L.MatchEndView,[null,null,null,t])}else{var i=t.rankList,n=t.reward,r=t.groupId,s=t.groupData;if(this.reward==null)if(a.instance.reward=n,r){var o=t.teamData;O.intance.openModule(L.MatchEndTeamRankView,[i,s,o,r])}else O.intance.openModule(L.MatchEndRankView,[i,s]);else console.warn("onGoMatchEndRank this.rewrad: ",this.reward)}}mockMoves(t,e,i,n,r,s){this.mockSpeedRate=e,this.speed=s,this.mockDir=Ct.getAngleToVec(i),this.mockAimDir=Ct.getAngleToVec(n),this.rotateSpeed=we.snack.defaultRotateSpeed,this.bones=[],this.bones.push(ut.create(t.x,t.y));for(var o=0;o<r;o++)this.mockMove();return this.bones[0]}mockMove(){for(let n=0;n<this.mockSpeedRate;n++){if(this.mockDir.equal(this.mockAimDir)||Math.abs(Math.acos(this.mockDir.dot(this.mockAimDir))*180/Math.PI)<this.rotateSpeed*we.snack.defaultMoveInterval)this.mockDir=this.mockAimDir;else{let r=this.mockDir.getRotation(),o=(this.mockAimDir.getRotation()-r+360)%360;o>180&&(o-=360);let l=this.rotateSpeed*we.snack.defaultMoveInterval,u=Math.abs(o)<l?o:l*(o>0?1:-1);console.log(u),this.mockDir.rotate(u)}var t=this.bones[0].add(this.mockDir.mul(this.speed)),e=10,i=we.mapSize;if(t.x<i.offsetX-e||t.x>i.width-i.offsetX+e||t.y<i.offsetY-e||t.y>i.height-i.offsetY+e)return;this.bones[0].assign(t)}}clearData(){console.log("clearData ",this.reward),this.roomDto=null,this.matchDto=null,this.reward=null,this.playerJoinDic=null,this.roomGameOverPush=null,this.playerEndDic=null,this.heroReadyDic=null,this.currArenaItem=null,this.roomWatcher=!1,this.matchWatcher=!1,q.instance.clearData(),w.needHeart=!0,ct.instance.playMusicByName(ct.soundName_bg,".mp3"),Bt.instance.needPop=!0,fa.instance.startShow()}};var bf=class{static checkCollisions(t,e,i){let n=we.mapSize,r=t.getHeadCollisionBounds();if(r.x<n.offsetX||r.x+r.width>n.width-n.offsetX||r.y<n.offsetY||r.y+r.height>n.height-n.offsetY){if(t.isSelf){if(t.isAlive()){if(t.isSend)return;var o=t.getToServerHead(),l=Ge.snake.socket.MessageType.MSG_PLAYER_COLLISION,u=Ge.snake.socket.CS_PLAYER_COLLISION.fromObject({head:o,frame:t.clientFrame,body:!1});gt.instance.sendData(l,u),t.isSend=!0}}else t.stop=!0;return}if(t.isSelf){let x=t.getHeadCollisionBounds(),E=x.x+x.width/2,S=x.y+x.height/2,T=x.width/2,N=we.collision.food.maxRadius,F=T+N,G=new Laya.Rectangle(E-F,S-F,F*2,F*2),Y={getBoundingBox:()=>G},Z=da.instance.getAllFoods();var m=[];if(Z.forEach(J=>{t.checkFoodCollision(J)&&(J.haveEaten||(J.haveEaten=!0,console.log(J.foodObject.unkey,J.getPosition()),m.push(J.foodObject.unkey)))}),m&&m.length>0){console.log("吃豆人吃到了食物");var h=v.instance.playerDto.pid,o=t.getToServerHead(),l=Ge.snake.socket.MessageType.MSG_EAT_FOOD,y=Ge.snake.socket.CS_EAT_FOOD.fromObject({roleId:h,fid:m,head:o,frame:t.clientFrame});gt.instance.sendData(l,y)}i.retrieve(t.getHead()).filter(J=>J instanceof Ga).forEach(J=>{if(J.owner!==t&&t.checkBodyCollision(J))if(!t.isInvincible&&!J.owner.isInvincible){if(t.isAlive()&&J.owner.isAlive()){if(t.isSend)return;var ue=!J.isHead,se=J.owner.tag.roleId,Ie=t.getToServerHead(),Ce=Ge.snake.socket.MessageType.MSG_PLAYER_COLLISION,te=Ge.snake.socket.CS_PLAYER_COLLISION.fromObject({target:se,head:Ie,frame:t.clientFrame,body:ue});gt.instance.sendData(Ce,te),t.isSend=!0}}else console.log(t.tag.roleId+" 或者 "+J.owner.tag.roleId+" 处于无敌状态！")})}}static getDistance(t,e){let i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}};var wu=class wu{constructor(){this.attPid=0;this.defPid=0;this.attackValue=[];this.allAtkValue=0;this.bj=!1;this.sb=!1;this.skill=0;this.defHp=0;this.attScore=0;this.defScore=0;this.buffEffects=[];this.attHp=0;this.npc=!1}protocolId(){return wu.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeLong(e.allAtkValue),t.writeLong(e.attHp),t.writeLong(e.attPid),t.writeLong(e.attScore),t.writeLongList(e.attackValue),t.writeBoolean(e.bj),t.writePacketList(e.buffEffects,25016),t.writeLong(e.defHp),t.writeLong(e.defPid),t.writeLong(e.defScore),t.writeBoolean(e.npc),t.writeBoolean(e.sb),t.writeInt(e.skill))}static read(t){if(!t.readBoolean())return null;let e=new wu,i=t.readLong();e.allAtkValue=i;let n=t.readLong();e.attHp=n;let r=t.readLong();e.attPid=r;let s=t.readLong();e.attScore=s;let o=t.readLongList();e.attackValue=o;let l=t.readBoolean();e.bj=l;let u=t.readPacketList(25016);e.buffEffects=u;let m=t.readLong();e.defHp=m;let h=t.readLong();e.defPid=h;let y=t.readLong();e.defScore=y;let x=t.readBoolean();e.npc=x;let E=t.readBoolean();e.sb=E;let S=t.readInt();return e.skill=S,e}};wu.PROTOCOL_ID=1024;var A1=wu,M1=A1;var wa=class a{constructor(){this.pools=new Map;this.configs=new Map}static get instance(){return this._instance||(this._instance=new a),this._instance}register(t,e,i=0,n=1/0){this.configs.set(t,{factory:e,maxSize:n}),this.pools.set(t,[]);for(let r=0;r<i;r++)this.release(t,e())}get(t,...e){let i=this.pools.get(t);if(!i)throw new Error(`Type ${t.name} not registered`);let n=i.length>0?i.pop():this.configs.get(t).factory();return n.init&&n.init(...e),n}release(t,e){let i=this.configs.get(t);if(!i)throw new Error(`Type ${t.name} not registered`);let n=this.pools.get(t);e.reset&&e.reset(),n.length<i.maxSize&&n.push(e)}clear(t){this.pools.set(t,[])}clearAll(){this.pools.clear()}};var gf=class{constructor(t){this.state="searching";this.target=null;this.dangerDistance=100;this.viewDistance=300;this.snake=t,this.collision=Hn.getInstance(null)}update(){if(!this.snake.isAlive())return;let t=this.findNearestFood(),e=this.findNearestThreat();switch(this.updateState(t,e),this.state){case"searching":this.searchBehavior(t);break;case"pursuing":this.pursueBehavior();break;case"escaping":this.escapeBehavior(e);break}}updateState(t,e){e&&this.isInDangerRange(e)?this.state="escaping":t&&this.target?this.state="pursuing":this.state="searching"}findNearestFood(){let t=this.snake.getHead(),e=this.collision.retrieve(t).filter(s=>s instanceof Dr),i=null,n=this.viewDistance,r=this.snake.getHeadPosition();for(let s of e){let o=Ji.distance(r.x,r.y,s.getPosition().x,s.getPosition().y);o<n&&(n=o,i=s)}return i}findNearestThreat(){let t=this.snake.getHead(),e=this.collision.retrieve(t).filter(s=>s instanceof Ga&&s.getSkinFlag()===we.snack.skinFlag.head).map(s=>s.owner).filter(s=>s!==this.snake&&s.isAlive()&&s.getLength()>=this.snake.getLength()),i=null,n=this.viewDistance,r=this.snake.getHeadPosition();for(let s of e){let o=Ji.distance(r.x,r.y,s.getHeadPosition().x,s.getHeadPosition().y);o<n&&(n=o,i=s)}return i}searchBehavior(t){t?(this.target=t.getPosition(),this.state="pursuing"):(!this.target||Ji.getVecDistance(this.snake.getHeadPosition(),this.target)<50)&&(this.target=new ut(Ji.randomRange(0,we.mapSize.width),Ji.randomRange(0,we.mapSize.height)))}pursueBehavior(){if(this.target){if(Ji.getVecDistance(this.snake.getHeadPosition(),this.target)<this.snake.getRadio()*4)return;let t=this.getDirectionToTarget(this.target);this.snake.rorate(t)}}escapeBehavior(t){if(t){let e=this.getDirectionToTarget(t.getHeadPosition());e.x*=-1,e.y*=-1,this.snake.rorate(e)}}getDirectionToTarget(t){let e=this.snake.getHeadPosition(),i=t.x-e.x,n=t.y-e.y,r=new ut(i,n);return r.length()<.1?this.snake.dir.copy():(r.normalize(),r)}isInDangerRange(t){return Ji.getVecDistance(this.snake.getHeadPosition(),t.getHeadPosition())<this.dangerDistance}destroy(){this.snake=null,this.collision=null,this.target=null}};var Tu=class{constructor(t,e){this.clientFrame=1;this.serverFrame=1;this.serverHeadPoss=[];this.stop=!1;this.ringCenter=new ut;this.baseRingSize=100;this.aiController=null;this.lastRingUpdate=0;this.pendingGrow=0;this.lastDir=-1;this.lastSendDir=-1;this.isSend=!1;this.pnl=t,this.updateData(e)}setClientDir(t){this.tag&&(this.tag.direction=t)}showServerPos(t,e,i,n,r){this.getHead().setServerPosLog(t,e,i,n,r)}updateLen(t){var e=t-(this.len+this.pendingGrow);e>0&&this.requestGrow(e)}updateData(t){if(this.skin)for(let e=0;e<this.skin.length;e++){let i=this.skin[e];i&&i.destroy()}this.skin=[],this._initData(t),this._initSnack(),this._updateSkinRadio(),t.npc&&(this.aiController=new gf(this))}_initData(t){var e=I.intance.m_dicSnakes.get(t.snakeId);this.radio=e.bodyRadius,this.collisionHeadRadius=e.collisionHeadRadius,this.suctionRadius=e.suctionRadius,this.speed=e.baseSpeed,this.tag=t||null,this.score=t.score,this.speedRate=t.speed;var i=t.direction;this.dir=Ct.getAngleToVec(i),this.dir.normalize();var n=t.aimDir;this.aimDir=Ct.getAngleToVec(n),this.aimDir.normalize(),this.rotateSpeed=we.snack.defaultRotateSpeed;var r=t.snake.length;this.len=r||e.initLength,this.intervalBoneToDrawSkin=e.intervalBoneToDrawSkin,this.skin=[],this.bones=[],this._moveDelta=0,this.alive=!0;var s=t.wdTime-t.oprTime;this.defaultInvincibleTime=Date.now()+s,this.isInvincible=s>0,this.shineDelt=0;let o=Math.random()+.5;o=o>1?o-.5:o,this.color={r:Math.random(),g:Math.random(),b:Math.random(),a:o};for(let l=0;l<this.len;l++){let u=t.snake[l].loc,m=ut.create(u.x,u.y);this.bones[l]=m}this.bodyRing=new Laya.Image,this.bodyRing.skin=we.res.snackRingImg,this.bodyRing.width=this.bodyRing.height=this.baseRingSize,this.bodyRing.anchorX=this.bodyRing.anchorY=.5,this.bodyRing.visible=!1,this.pnl.addChild(this.bodyRing)}_updateBodyRing(){if(this.lastRingUpdate=Date.now(),!this.isInvincible)return;let t=wa.instance.get(ut,1/0,1/0),e=wa.instance.get(ut,-1/0,-1/0);this.bones.forEach(r=>{t.x=Math.min(t.x,r.x),t.y=Math.min(t.y,r.y),e.x=Math.max(e.x,r.x),e.y=Math.max(e.y,r.y)}),this.ringCenter.x=(t.x+e.x)/2,this.ringCenter.y=(t.y+e.y)/2;let i=Math.max((e.x-t.x)/2+this.radio*we.invincibleRing.margin,(e.y-t.y)/2+this.radio*we.invincibleRing.margin),n=Math.max(i*2/this.baseRingSize,we.invincibleRing.minScale);this.bodyRing.pos(this.ringCenter.x,this.ringCenter.y),this.bodyRing.scale(n,n),wa.instance.release(ut,t),wa.instance.release(ut,e)}_initSnack(){let t=this.getSkinLength();for(let e=0;e<t;e++){e===0?this.skin[e]=new Ga(we.snack.skinFlag.head,this.pnl,this.color,this.tag,this):this.skin[e]=new Ga(we.snack.skinFlag.body,this.pnl,this.color,this.tag,this);let i=e*this.intervalBoneToDrawSkin;this.skin[e].setPosition(this.bones[i]),this.skin[e].setLocalZOrder(-(e+1));let n;i+1<this.bones.length?n=this.bones[i+1]:i-1>=0?n=this.bones[i-1]:n=this.bones[i];let r=this.bones[i].getRotationTo(n),s=we.snack.defaultRotation-r;this.skin[e].setRotation(s)}}updateAI(){this.aiController&&this.aiController.update()}drawDebugInfo(){this.aiController&&(this.graphics=this.pnl.graphics,this.graphics.drawLine(this.getHeadPosition().x,this.getHeadPosition().y,this.getHeadPosition().x+this.dir.x*50,this.getHeadPosition().y+this.dir.y*50,"#FF0000",3),this.label||(this.label=new Laya.Label,this.pnl.addChild(this.label)),this.label.text=this.aiController.state,this.label.pos(this.getHeadPosition().x-20,this.getHeadPosition().y-40))}move(t){if(!this.alive||this.stop)return;this._moveDelta+=t,this._moveDelta-=we.snack.defaultMoveInterval;let e=this.pendingGrow>0;for(let o=0;o<this.speedRate;o++){if(this.dir.equal(this.aimDir)||Math.abs(Math.acos(this.dir.dot(this.aimDir))*180/Math.PI)<this.rotateSpeed*we.snack.defaultMoveInterval)this.dir=this.aimDir;else{let l=this.dir.getRotation(),m=(this.aimDir.getRotation()-l+360)%360;m>180&&(m-=360);let h=this.rotateSpeed*we.snack.defaultMoveInterval,y=Math.abs(m)<h?m:h*(m>0?1:-1);console.log(y),this.dir.rotate(y)}if(we.snack.useServer){if(this.serverHeadPoss&&this.serverHeadPoss.length){var i=this.serverHeadPoss[0].loc;let l=ut.create(i.x,i.y),u=this.bones[0],m=1,h=u.add(l.sub(u).mul(m));this.bones[0].assign(h),console.log(he.GetLogTime+"=======loc===== clientLoc0: "+i.x,i.y)}else console.log("this.headPx this.headPy 还未赋值");for(let l=1;l<this.serverHeadPoss.length;l++){let u=ut.create(this.serverHeadPoss[l-1].loc.x,this.serverHeadPoss[l-1].loc.y),m=ut.create(this.serverHeadPoss[l].loc.x,this.serverHeadPoss[l].loc.y),h=.6,y=m.add(u.sub(m).mul(h));this.bones[l].assign(y)}}else{var n=this.bones[0].add(this.dir.mul(this.speed)),r=10,s=we.mapSize;if(n.x<s.offsetX-r||n.x>s.width-s.offsetX+r||n.y<s.offsetY-r||n.y>s.height-s.offsetY+r)return;this.bones[0].assign(n);let l=this.speed*.6;for(let u=1;u<this.bones.length;u++){let m=this.bones[u-1],h=this.bones[u],y=wa.instance.get(ut,m.x,m.y),x=wa.instance.get(ut,h.x,h.y),E=y.sub(x);if(E.length()>l){let T=E.normalize().mul(l),N=y.sub(T);h.x=N.x,h.y=N.y}else{let N=E.mul(.6);h.x+=N.x,h.y+=N.y}wa.instance.release(ut,y),wa.instance.release(ut,x)}}e&&o===this.speedRate-1&&this._processGrowth(),this._moveBody(),this._updateSkinRadio()}this.isInvincible&&(this.bodyRing.visible||(this.bodyRing.visible=!0),this._updateBodyRing(),Date.now()>this.defaultInvincibleTime&&(this.isInvincible=!1,this.bodyRing.visible=!1))}moveAfter(){this.checkHead(),this.isSelf&&this.clientFrame%2==0&&this.rorateSend()}_processGrowth(){if(this.pendingGrow<=0)return;let t=this.bones[this.bones.length-1],e=ut.create(t.x,t.y);this.bones.push(e),this.len++,this.pendingGrow--;let i=this.getSkinLength();if(i>this.skin.length){let r=new Ga(we.snack.skinFlag.body,this.pnl,this.color,this.tag,this),s=(i-1)*this.intervalBoneToDrawSkin;r.setPosition(this.bones[s]),r.setLocalZOrder(-(i+1));let o;s+1<this.bones.length?o=this.bones[s+1]:o=this.bones[s];let l=this.bones[s].getRotationTo(o);r.setRotation(we.snack.defaultRotation-l),this.skin.push(r);var n=Hn.getInstance(null);n.addSnack([r])}this._updateSkinRadio()}_moveBody(){let t=this.getSkinLength();for(let e=0;e<t;e++){let i=e*this.intervalBoneToDrawSkin;this.skin[e].setPosition(this.bones[i]);let n;i+1<this.bones.length?n=this.bones[i+1]:i-1>=0?n=this.bones[i-1]:n=this.bones[i];let r=this.bones[i].getRotationTo(n);this.skin[e].setRotation(we.snack.defaultRotation-r)}}_updateSkinRadio(){let t=this.getSkinLength();for(let e=0;e<t;e++)this.skin[e].updateScale(this.radio,this.speedRate)}requestGrow(t=1){this.pendingGrow+=t}showAddScore(t){if(this.isSelf){var e=new M1;this.getHead().node.showDamageLabelDetailDelay(t,100,e)}}get isSelf(){return this.tag&&this.tag.roleId==v.instance.playerDto.pid}addKill(t){if(this.tag&&(this.tag.kills+=t),this.isSelf){var e=new M1;e.bj=!0,this.getHead().node.showDamageLabelDetailDelay(t,100,e)}}getHeadCollisionBounds(){let t=this.collisionHeadRadius,e=this.getHeadPosition();return new Laya.Rectangle(e.x-t,e.y-t,t*2,t*2)}checkBodyCollision(t){let e=this.getHeadPosition();return t.checkCollision(e.x,e.y,this.collisionHeadRadius)}checkFoodCollision(t){let e=this.getHeadPosition();return t.checkCollision(e.x,e.y,this.suctionRadius)}rorateControl(t,e=!1){this.lastDir!=t&&(this.lastDir=t)}rorateSend(){if(this.lastDir!=-1&&this.lastSendDir!=this.lastDir){var t=v.instance.playerDto.pid,e=this.getToServerHead(),i=Ge.snake.socket.MessageType.MSG_PLAYER_OPR,n=Ge.snake.socket.CS_PLAYER_OPR.fromObject({roleId:t,opr:1,value:this.lastDir,head:e,frame:this.clientFrame});gt.instance.sendData(i,n),this.lastSendDir=this.lastDir}}rorate(t,e=!1){var i=Ct.getAngleToVec(t);i.normalize(),this.setClientDir(t),this.aimDir=i}updateSpeedRate(t){this.speedRate=t}getHeadPosition(){return this.bones[0]}getHead(){return this.skin[0]}getToServerHead(){var t=new Ge.snake.socket.SnakeObject,e=new Ge.snake.socket.PointObject;return e.x=this.getHeadPosition().x,e.y=this.getHeadPosition().y,t.loc=e,t}checkHead(){}updateHead(t,e,i,n,r){this.showServerPos(t,e,i,n,r);var s=this.bones[0],o=this.clientFrame-t;if(o>0){var l=B.instance.mockMoves(e.loc,i,n,r,o,this.speed),u=Ct.distancePoint(l.x,l.y,s.x,s.y);ie.Debug==2&&console.log(he.GetLogTime+" "+this.tag.roleId," 前后端位移相差：",u,"客户端在前面 硬更新","C:",s,"S:",l),this.applyHardCorrection(s,l,n,r)}else{var l=ut.create(e.loc.x,e.loc.y),u=Ct.distancePoint(l.x,l.y,s.x,s.y);ie.Debug==2&&console.log(he.GetLogTime+" "+this.tag.roleId," 前后端位移相差：",u,"客户端不在前面 硬更新","C:",s,"S:",l),this.applyHardCorrection(s,l,n,r),this.clientFrame=t}}updateHead107(t,e,i,n,r){this.showServerPos(t,e,i,n,r);var s=this.bones[0],o=this.clientFrame-t;if(o>0){var l=B.instance.mockMoves(e.loc,i,n,r,o,this.speed),u=Ct.distancePoint(l.x,l.y,s.x,s.y);u!=0&&(ie.Debug==2&&console.log(he.GetLogTime+" "+this.tag.roleId," 前后端位移相差：",u,"客户端在前面 硬更新","C:",s,"S:",l),this.applyHardCorrection(s,l,n,r))}else{var l=ut.create(e.loc.x,e.loc.y),u=Ct.distancePoint(l.x,l.y,s.x,s.y);ie.Debug==2&&console.log(he.GetLogTime+" "+this.tag.roleId," 前后端位移相差：",u,"客户端不在前面 硬更新","C:",s,"S:",l),this.applyHardCorrection(s,l,n,r),this.clientFrame=t}}applyHardCorrection(t,e,i=null,n=null){if(t.x=e.x,t.y=e.y,i!=null){var r=Ct.getAngleToVec(i);this.dir=r,this.dir.normalize(),this.aimDir=ut.create(this.dir.x,this.dir.y)}if(n!=null){var s=Ct.getAngleToVec(n);this.aimDir=s,this.aimDir.normalize()}}applySoftCorrection(t,e,i=null,n=null){var r=ut.create(e.x,e.y);if(i!=null){var s=Ct.getAngleToVec(i);this.dir=s,this.dir.normalize(),this.aimDir=ut.create(this.dir.x,this.dir.y)}if(n!=null){var o=Ct.getAngleToVec(n);this.aimDir=o,this.aimDir.normalize()}let l=.2;t.x=this.lerp(t.x,r.x,l),t.y=this.lerp(t.y,r.y,l)}lerp(t,e,i){return t+(e-t)*i}predictSnakePosition(t){if(t>0)for(var e=0;e<t;e++)this.move(0)}shine(t){if(!this.isInvincible||(this.shineDelt+=t,this.shineDelt<we.snack.defaultShineInterval))return;this.shineDelt-=we.snack.defaultShineInterval;let e=this.getSkinLength();for(let i=0;i<e;i++)i!==0&&this.skin[i].setVisible(!this.skin[i].isVisible())}show(){let t=this.getSkinLength();for(let e=0;e<t;e++)this.skin[e].setVisible(!0)}getSkins(){return this.skin}getRadio(){return this.radio}setAlive(t){this.alive=t}die(){console.log(`Snack ${this.tag.roleId} has died.`),this.setAlive(!1),this.showSnake(!1),xt.instance.removeSnake(this.tag.roleId)}showSnake(t){}isAlive(){return this.alive}getLength(){return this.len}getSkinLength(){return Math.floor(this.len/this.intervalBoneToDrawSkin)}destroy(){this.isSelf&&(xt.instance.skinLen=this.getSkinLength(),xt.instance.kills=this.tag.kills);for(let t of this.skin)t.destroy();this.skin=null,this.bodyRing.removeSelf(),this.bodyRing=null,this.aiController&&(this.aiController.destroy(),this.aiController=null),this.tag=null}};var ys=class ys{constructor(){this.selfSnack=null;this.container||(this.container=new Laya.Sprite),this.matchHeroSprDic=new ye,this.selfSnack=null,this.collision=Hn.getInstance(null)}static get instance(){return ys._instance||(ys._instance=new ys),ys._instance}createSnack(t){let e=new Tu(this.container,t);if(this.matchHeroSprDic.get(t.roleId))throw new Error(t.roleId+" 被重复添加！");return this.matchHeroSprDic.set(t.roleId,e),console.log("createSnack: "+t.roleId,v.instance.playerDto.pid),v.instance.playerDto.pid==t.roleId&&(this.selfSnack=e),this.collision.addSnack(e.getSkins()),e}updateSnack(t,e){return console.log("updateSnack: "+e.roleId,v.instance.playerDto.pid),this.collision.removeSnack(t.getSkins()),t.updateData(e),v.instance.playerDto.pid==e.roleId&&(this.selfSnack=t),this.collision.addSnack(t.getSkins()),t}updateSnakes(t){this.moveSnacks(t),this.collision.refresh(),this.checkMySnackCollision()}initSnacks(){var t=this.selfSnack.tag.oprTime;let e=Date.now();var i=gt.instance.serverTimeOffset,n=e-t,r=n-i,s=Math.round(r/(1e3/30)),o=this.matchHeroSprDic.values;let l=o.length;for(let h=0;h<l;h++){var u=o[h];if(o[h].isAlive()){var m=u.tag.frame+s;u.clientFrame=m,console.log("startGame 刚开始对时相差: "+i,"进入比赛相差: "+n,"实际相差: "+r,"实际帧相差: "+s),u.predictSnakePosition(s)}}}removeSnake(t){var e=this.matchHeroSprDic.get(t);this.collision.removeSnack(e.getSkins()),e.destroy(),this.matchHeroSprDic.remove(t)}removeAllSnakes(){var t=this.matchHeroSprDic.values;let e=t.length;for(let i=0;i<e;i++)this.collision.removeSnack(t[i].getSkins()),t[i].destroy();this.matchHeroSprDic=new ye}moveSnacks(t){var e=this.matchHeroSprDic.values;let i=e.length;for(let n=0;n<i;n++)e[n].clientFrame++,e[n].isAlive()&&(e[n].move(t),e[n].moveAfter())}rorate(t,e){t===we.snackType.SELF&&this.selfSnack&&this.selfSnack.rorateControl(e,!0)}updateSpeedRate(t,e,i){if(t===we.snackType.SELF){var n=v.instance.playerDto.pid,r=this.selfSnack.getToServerHead(),s=Ge.snake.socket.MessageType.MSG_PLAYER_OPR,o=Ge.snake.socket.CS_PLAYER_OPR.fromObject({roleId:n,opr:2,value:e,head:r,frame:this.selfSnack.clientFrame});gt.instance.sendData(s,o)}}getSelfSnackPos(){return this.selfSnack?this.selfSnack.getHeadPosition():null}checkMySnackCollision(){bf.checkCollisions(this.selfSnack,null,this.collision)}createSnakes(){this.matchHeroSprDic=new ye;let t=B.instance.matchDto.members.length;for(var e=0;e<t;e++){var i=B.instance.matchDto.members[e];try{if(i.state)var n=this.createSnack(i)}catch(r){console.warn(r)}}}newAddSnake(t){try{var e=this.matchHeroSprDic.get(t.roleId);if(e)this.updateSnack(e,t);else var e=this.createSnack(t)}catch(i){console.warn(i)}}restoreSnakes(){this.removeAllSnakes(),this.matchHeroSprDic=new ye;let t=B.instance.matchDto.members.length;for(var e=0;e<t;e++){var i=B.instance.matchDto.members[e];try{if(i.state)var n=this.createSnack(i)}catch(r){console.warn(r)}}}clear(){this.removeAllSnakes(),this.container.removeSelf(),this.container=null,this.selfSnack=null,this.collision=null,this.matchHeroSprDic=null,ys._instance=null}};ys._instance=null;var xt=ys;var Ga=class{get isHead(){return this.skinFlag===we.snack.skinFlag.head}setServerPosLog(t,e,i,n,r){this.skinFlag===we.snack.skinFlag.head&&this.node.setServerPosLog(t,e,i,n,r)}constructor(t,e,i,n,r){if(this.pos=new ut(0,0),this.tag=n,this.owner=r,t===we.snack.skinFlag.head){let s=q.instance.roleAniPrefab.create();s.owner=this,this.node=s,s.dataSource=n,this.smallHeroImg=new Laya.Image,this.updateSmallHeroImg(),q.instance.img_smallMap.addChild(this.smallHeroImg)}else{let s=q.instance.matchSnakeBodyPrefab.create();this.node=s,s.dataSource=n}this.skinFlag=t,this.node.tag=n,e.addChild(this.node),this.setPosition(this.pos)}updateSmallHeroImg(){if(this.smallHeroImg)if(this.owner.isSelf){this.smallHeroImg.skin="res/match2/img_dian1.png";var t=15,e=15;this.smallHeroImg.size(t,e),this.smallHeroImg.pivot(t/2,e/2)}else if(this.owner.tag.roleId==xt.instance.kingId){this.smallHeroImg.skin="res/match2/img_phb_icon2.png";var i=21,n=19;this.smallHeroImg.size(i,n),this.smallHeroImg.pivot(i/2,n/2)}else{this.smallHeroImg.skin="res/match2/img_dian2.png";var r=4,s=4;this.smallHeroImg.size(r,s),this.smallHeroImg.pivot(r/2,s/2)}}setPosition(t){if(this.pos.assign(t),this.node.pos(this.pos.x,this.pos.y),this.skinFlag===we.snack.skinFlag.head&&this.node.setClientPosLog(this.pos.x,this.pos.y),this.smallHeroImg){var e=q.instance.fromBigToSmall(this.pos.x,this.pos.y),i=e[0],n=e[1];this.smallHeroImg.pos(i,n)}}getPosition(){return this.pos}setRotation(t){this.node.setRotation(t)}setLocalZOrder(t){this.node.zOrder=t}getDistant(t){let e=this.pos.x-t.pos.x,i=this.pos.y-t.pos.y;return Math.sqrt(e*e+i*i)}updateScale(t,e){let i=t*(1+.1*e);this.setScale(i)}setScale(t){this.node.setScale(t)}getRadio(){return this.node.getRadio()}setVisible(t){this.node.visible=t,this.smallHeroImg&&(this.smallHeroImg.visible=t)}isVisible(){return this.node.visible}destroy(){this.node.removeSelf(),this.smallHeroImg&&this.smallHeroImg.removeSelf()}getBoundingBox(){let t=this.getRadio();return new Laya.Rectangle(this.pos.x-t,this.pos.y-t,t*2,t*2)}getSkinFlag(){return this.skinFlag}checkCollision(t,e,i){let n=this.getPosition();return Ji.distance(n.x,n.y,t,e)<i+this.getRadio()}};var uo=class a extends Laya.Sprite{constructor(){super(...arguments);this.collidables=[];this.isVisible=!1}static getInstance(){return a._instance||(a._instance=new a,a._instance.zOrder=9999,a._instance.mouseEnabled=!1),a._instance}toggleVisible(){this.isVisible=!this.isVisible,console.log("DebugLayer.toggleVisible",this.isVisible),this.graphics.clear()}updateCollidables(e){this.collidables=e}draw(){this.isVisible&&(this.graphics.clear(),this.graphics.alpha(.5),this.collidables.forEach(e=>{e instanceof Ga?this.drawSnakeBody(e):e instanceof Dr&&this.drawFood(e)}))}drawSnakeBody(e){let i=e.getPosition(),n=e.getRadio();this.graphics.drawCircle(i.x,i.y,n,"#FF0000",2,.5)}drawFood(e){let i=e.getBoundingBox();this.graphics.drawRect(i.x,i.y,i.width,i.height,"#00FF00",2,.5)}};var _f=class{constructor(t){this.root=t,this.mapContainer=t.getChildByName("box_front")}destroy(){this.root=null,this.mapContainer=null}initMap(t){let e=we.mapSize,i=e.defaultMapRes,n=Math.floor(e.width/i.width),r=Math.floor(e.height/i.height),s=255;for(let o=1;o<=n;o++)for(let l=1;l<=r;l++){let u=new Laya.Image(i.resPath);u.size(i.width,i.height);let m=Math.floor(Math.random()*255),h=Math.floor(Math.random()*255),y=Math.floor(Math.random()*255),x=m/255,E=h/255,S=y/255,T=[x,0,0,0,0,0,E,0,0,0,0,0,S,0,0,0,0,0,1,0];u.filters=[new Laya.ColorFilter(T)],u.alpha=s/255,u.anchorX=0,u.anchorY=0,t.addChild(u),u.pos(e.offsetX+(o-1)*i.width,e.offsetY+(l-1)*i.height)}}move(t){if(!t)return;let e=we.mapSize,i=Laya.stage.width,n=Laya.stage.height;t.x>i/2&&t.x<e.width-.5*i?this.root.x=-(t.x-i/2):t.x<=i/2?this.root.x=0:t.x>=e.width-.5*i&&(this.root.x=-(e.width-i)),t.y>n/2&&t.y<e.height-.5*n?this.root.y=-(t.y-n/2):t.y<=n/2?this.root.y=0:t.y>=e.height-.5*n&&(this.root.y=-(e.height-n))}};var bs=class bs{static getInstance(t=null,e=null){return bs.instance||(bs.instance=new bs(t,e)),bs.instance}constructor(t,e){if(!t)throw new Error("gameLayer Must Be Not Null");this.foodManager=da.instance,this.snackManager=xt.instance;let i=this.snackManager.container,n=this.foodManager.container,r=new Laya.Sprite;t.addChild(n),t.addChild(i),t.addChild(r),r.addChild(uo.getInstance()),this.foodManager.init(),e&&(e.initJoystick("JoyStickBg",we.JoystickSize.JoyStickBg,"JoyStickHandleBg",we.JoystickSize.JoyStickHandleBg),e.changeMode(we.JoystickMODE.MOVED)),this.initGameMap(t)}startGame(){this.snackManager.initSnacks(),this.initTimer()}initTimer(){Laya.timer.frameLoop(1,this,this.update)}clearTimer(){Laya.timer.clear(this,this.update)}update(){this.snackManager.updateSnakes(Laya.timer.delta),this.gameMap.move(this.snackManager.getSelfSnackPos())}initGameMap(t){this.gameMap=new _f(t)}updateSpeedRate(t=we.snackType.SELF,e=we.snackSpeedRate.speedUp){this.snackManager.updateSpeedRate(t,e,!0)}createFood(t){return this.foodManager.addFood(t)}removeAllFoods(){this.foodManager.removeAllFoods()}clear(){this.clearTimer(),this.snackManager=null,this.foodManager=null,this.gameMap.destroy(),this.gameMap=null,bs.instance=null}};bs.instance=null;var mn=bs;var gs=class gs{constructor(){this.activeMonsters=[];this.maxActiveMonsters=2;this.maxActiveMonsters=I.intance.getGeneralValueById(30)}update(){this.updateActiveMonsters(),this.manageActiveMonsters()}updateActiveMonsters(){for(let t of this.activeMonsters)t._isDead&&this.removeActiveMonster(t)}manageActiveMonsters(){var t=B.instance.matchCoolDownTime,e=this.maxActiveMonsters;for(t<30?e=1:t<60&&(e=2);this.activeMonsters.length<e;){let i=q.instance.matchHeroSprs.filter(s=>s!=SnackManager.instance.selfSnack&&!this.activeMonsters.includes(s)&&!s._isDead);if(i.length===0)break;let n=Math.floor(Math.random()*i.length),r=i[n];this.activeMonsters.push(r),r.isFocusedOnPlayer=!0}}removeActiveMonster(t){let e=this.activeMonsters.indexOf(t);e!==-1&&(t.isFocusedOnPlayer=!1,this.activeMonsters.splice(e,1))}clearData(){this.activeMonsters=[]}static get instance(){return gs._instance==null&&(gs._instance=new gs),gs._instance}};gs._instance=null;var po=gs;var ya=class ya{constructor(){this.arenaType=1;this.validEnemyList=[];this.gameWindowX=0;this.gameWindowY=0;this.isControl=!1;this.tIndex=0;this.mapDir=-4;this.moveP=new Laya.Point}get gameMap(){return this._gameMap}set gameMap(t){this._gameMap=t}clearData(){gt.instance.close(),po.instance.clearData(),xt.instance.clear(),da.instance.clear(),mn.getInstance().clear(),this.gameMap=null,this.box_players=null,this.box_behind=null,this.box_front=null,this.img_smallMap=null,this.otherHeroSpr=null,this.matchHeroSmallDic=null,this.allOrders=null}static get instance(){return ya._instance==null&&(ya._instance=new ya),ya._instance}init(){this.validEnemyList=[]}insertValidList(t){this.isFInd(t,this.validEnemyList)||this.validEnemyList.push(t)}isFInd(t,e){var i=!1;(!t||!e||e.length<=0)&&(i=!1);for(let n=0;n<e.length;n++)if(e[n]==t)return!0;return i}isFIndIndex(t,e){var i=-1;(!t||!e||e.length<=0)&&(i=-1);for(let n=0;n<e.length;n++)e[n]==t&&(i=n);return i}removeValidListByValue(t){if(!(!t||!this.validEnemyList||this.validEnemyList.length<=0)){var e=this.isFIndIndex(t,this.validEnemyList);e!=-1&&this.validEnemyList.splice(e,1)}}createWallMap(){Laya.loader.load("resources/tiledMap/map1_32.json").then(()=>{let e=Laya.loader.getRes("resources/tiledMap/map1_32.json").data.layers[2],i=e.data,n=e.width,r=e.height,s;s=new Array,this.gridXNum=n,this.gridYNum=r;for(var o=0;o<this.gridYNum;o++){s[o]=new Array;for(var l=0;l<this.gridXNum;l++)i[o*this.gridXNum+l]==0?s[o][l]=1:s[o][l]=0}this.graph=new window.Graph(s),this.opts=[],this.opts.closest=!0,this.opts.heuristic=window.astar.heuristics.diagonal})}getEveryPath(t,e){var i,n=this.graph.grid[Math.ceil(t.y/32)-1][Math.ceil(t.x/32)-1],r=this.graph.grid[Math.ceil(e.y/32)-1][Math.ceil(e.x/32)-1];n.weight==0&&(console.log(n,"不能通过"),n=this.getNeighborCanGo(n)),r.weight==0&&(console.log(r,"不能通过"),r=this.getNeighborCanGo(r));var s=new Date().getTime();i=window.astar.search(this.graph,n,r,{closest:this.opts.closest});var o=new Date().getTime();return this.tIndex++,i}getNodeAt(t,e){var i=this.graph.grid[Math.ceil(e/32)-1][Math.ceil(t/32)-1];return i}isInBounds(t,e){return t>=0&&t<this.gridYNum&&e>=0&&e<this.gridXNum}isWalkableAt(t,e){return this.isInBounds(t,e)?this.graph.grid[t][e].weight==1:!1}getNeighborCanGo(t,e=1){let i=t.x,n=t.y,r=[{dx:0,dy:-e},{dx:e,dy:0},{dx:0,dy:e},{dx:-e,dy:0}],s=[{dx:-e,dy:-e},{dx:e,dy:-e},{dx:e,dy:e},{dx:-e,dy:e}];for(let o of r){let l=i+o.dx,u=n+o.dy;if(this.isWalkableAt(l,u))return this.graph.grid[l][u]}for(let o of s){let l=i+o.dx,u=n+o.dy;if(this.isWalkableAt(l,u))return this.graph.grid[l][u]}return this.getNeighborCanGo(t,++e)}getNeighbors(t){let e=[],i=t.x,n=t.y,r=[{dx:0,dy:-10},{dx:10,dy:0},{dx:0,dy:10},{dx:-10,dy:0}],s=[{dx:-10,dy:-10},{dx:10,dy:-10},{dx:10,dy:10},{dx:-10,dy:10}];return r.forEach(o=>{let l=i+o.dx,u=n+o.dy;this.isWalkableAt(l,u)&&e.push(this.graph.grid[l][u])}),s.forEach(o=>{let l=i+o.dx,u=n+o.dy;this.isWalkableAt(l,u)&&e.push(this.graph.grid[l][u])}),e}getRunways(t){let e=[],i=t.x,n=t.y,r=[{dx:0,dy:-2},{dx:2,dy:0},{dx:0,dy:2},{dx:-2,dy:0}],s=[{dx:-2,dy:-2},{dx:2,dy:-2},{dx:2,dy:2},{dx:-2,dy:2}];return r.forEach(o=>{let l=i+o.dx,u=n+o.dy;this.isWalkableAt(l,u)&&e.push(this.graph.grid[l][u])}),s.forEach(o=>{let l=i+o.dx,u=n+o.dy;this.isWalkableAt(l,u)&&e.push(this.graph.grid[l][u])}),e}updateFoods(){mn.getInstance().removeAllFoods(),this.createFoods()}createFoods(){let t=B.instance.matchDto.item.length;for(var e=0;e<t;e++){var i=B.instance.matchDto.item[e];mn.getInstance().createFood(i)}}drawPath(t){if(this.box_players.graphics.clear(),t.length>1){this.box_players.graphics.drawLine(this.transformPos(t[0].y),this.transformPos(t[0].x),this.transformPos(t[1].y),this.transformPos(t[1].x),"#FF0000");for(let e=0;e<t.length;e++)this.box_players.graphics.drawCircle(this.transformPos(t[e].y),this.transformPos(t[e].x),5,"#00FF00"),e<t.length-1&&this.box_players.graphics.drawLine(this.transformPos(t[e].y),this.transformPos(t[e].x),this.transformPos(t[e+1].y),this.transformPos(t[e+1].x),"#FF0000")}}transformPos(t){return t*32+16}onRevOprPush(t,e){if(console.log("onRevMovePush: ",t),t!=null){var i=ya.instance.getRoleById(t.roleId);if(i){if(i.updateHead(t.frame,t.head,t.speed,t.curDir,t.aimDir),t.opr==1){var n=t.value;i.rorate(n)}else if(t.opr==2){var r=t.value;i.updateSpeedRate(r)}}else console.log(t.roleId+" snake is null")}}onUpdatePlayerObject(t,e){if(t!=null){var i=ya.instance.getRoleById(t.roleId);if(i)if(t.state==!1){if(i.isAlive()){var n=i.tag.roleId==v.instance.playerDto.pid;i.die(),n&&(_.intance.event(b.EVENT_GameScene_Gray),B.instance.onMockMatchEnd())}console.log("收到数据 玩家死了：",t.state)}else{var r=t.eatenIds;r&&r.length&&console.log("服务端自动吃食物: ",r);var s=t.score,o=t.length,l=t.snake[0],e=t.frame;i.updateHead107(e,l,t.speed,t.direction,t.aimDir),i.updateLen(o),da.instance.eateFoodIds(i,r,s),i.score=s}else console.log(t.roleId+" snake is null")}}sendRestoreData(){if(B.instance.reward==null){var t=v.instance.playerDto.pid,e=Ge.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA,i=Ge.snake.socket.CS_REQUEST_ROOM_DATA.fromObject({roleId:t});gt.instance.sendData(e,i)}}onRevRestorePush(t){B.instance.matchDto=t,_.intance.event(b.EVENT_RESTORE_DATA)}getRoleById(t){return xt.instance.matchHeroSprDic?xt.instance.matchHeroSprDic.get(t):null}getValidList(){return this.validEnemyList}playMusic(){ct.instance.playMusicByURL("mp3/battle.mp3"),Bt.instance.needPop=!1}playSound(t){var e="";t==1?e="resources/music/pugong":t==2?e="resources/music/enemyHit":t==3&&(e="resources/music/dazhao"),ct.instance.playSound(e+".wav",1)}setCurrentHero(t){var e=B.instance.matchWatcher;if(!e){t.isMe=!0;var i=this.myHeroSpr==null;this.myHeroSpr=t,this.moveType=ee.CAMERA_FOLLOW_ME,ya.instance.moveGameWindow(!0),this.myHeroSpr.initBirth(i)}}setOtherHero(t){if(this.otherHeroSpr&&this.otherHeroSpr==t){this.setCameraIdle();return}this.removeOtherHero(),t.setFollowIcon(!0),this.otherHeroSpr=t,this.moveType=ee.CAMERA_FOLLOW_OTHER,ya.instance.moveGameWindow(!0)}setCameraIdle(){this.removeOtherHero(),this.moveType=ee.CAMERA_IDLE,ya.instance.moveGameWindow(!0)}removeOtherHero(){this.otherHeroSpr&&this.otherHeroSpr.setFollowIcon(!1),this.otherHeroSpr=null}getAttackTarget(t,e){console.log("getAttackTarget");var i=e.distance,n=e.targetsType;if(n==1){let o=new Laya.Point(t.x,t.y),l=Ct.getUnitVector(t.roleDirection);var r=[];return this.matchHeroSprs&&this.matchHeroSprs.forEach(u=>{if(!u._isDead&&!this.isOneTeam(t,u)&&t.roomPlayerDto.id!=u.roomPlayerDto.id){var m=this.getEnemyDistance(t,u);if(m<=i){let h=new Laya.Point(u.x,u.y),y=Ct.subtract(h,o);y.x*l.x+y.y*l.y>0&&r.push(u)}}}),r}else if(n==2){let o,l=1e4;if(this.matchHeroSprs&&this.matchHeroSprs.forEach(u=>{if(!u._isDead&&!this.isOneTeam(t,u)&&t.roomPlayerDto.id!=u.roomPlayerDto.id){var m=this.getEnemyDistance(t,u);m<=i&&m<l&&this.canAttack(t,u)&&(o=u,l=m)}}),o)return[o]}else if(n==3){let o=[];this.matchHeroSprs&&this.matchHeroSprs.forEach(m=>{if(!m._isDead&&!this.isOneTeam(t,m)&&t.roomPlayerDto.id!=m.roomPlayerDto.id){var h=this.getEnemyDistance(t,m);h<=i&&o.push(m)}});let l=[];var s=e.targetsNum;let u=this.shuffleArray(o);for(let m=0;m<Math.min(s,u.length);m++)l.push(u[m]);return l}return[]}shuffleArray(t){for(let e=t.length-1;e>0;e--){let i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}isOneTeam(t,e){return t.roomPlayerDto&&t.roomPlayerDto.no?t.roomPlayerDto.no==e.roomPlayerDto.no:t.roomPlayerDto.id==e.roomPlayerDto.id}getEnemyDistance(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}canAttack(t,e){let i=new Laya.Vector2;i.x=e.x-t.x,i.y=e.y-t.y;let n=Ct.getUnitVector(t.roleDirection),r=Math.atan2(i.y,i.x)-Math.atan2(n.y,n.x);r<0&&(r+=2*Math.PI),r=r*180/Math.PI;let s=90;return t.roomPlayerDto.npc&&(s=120),r<s||r>360-s}canTui(t,e){let i=new Laya.Vector2;i.x=e.x-t.x,i.y=e.y-t.y;let n=Ct.getUnitVector(t.roleDirection),r=Math.atan2(i.y,i.x)-Math.atan2(n.y,n.x);r<0&&(r+=2*Math.PI),r=r*180/Math.PI;let s=45;return r<s||r>360-s}setMyHeroDirection(t){var e=B.instance.matchWatcher;if(e){if(!this.moveP){console.log("setMyHeroDirection: "+this.moveP);return}this.moveType!=ee.CAMERA_DIRECT_OPERATE&&(this.removeOtherHero(),this.moveType=ee.CAMERA_DIRECT_OPERATE,this.setMapPos()),this.mapDir=t}else{if(!xt.instance.selfSnack)return;t!=-4?(mn.getInstance().snackManager.rorate(we.snackType.SELF,t),this.isControl=!0):this.isControl=!1}}fromBigToSmall(t,e){var i=t*185/we.mapSize.width,n=e*185/we.mapSize.height;return[i,n]}fromSmallToBig(t,e){var i=B.instance.currArenaItem.mapid,n=t/(185/3040),r=e/(185/3040);return i==1002&&(n+=160,r+=160),[n,r]}clickSmallMapToMove(t){this.removeOtherHero();var e=ya.instance.fromSmallToBig(t.x,t.y);this.moveP.setTo(e[0],e[1]),this.moveType=ee.CAMERA_MAP_CLICK,this.moveGameWindow(!0)}moveGameWindow(t=!1){if(this.moveType!=ee.CAMERA_IDLE){if(this.moveType==ee.CAMERA_FOLLOW_ME){if(!xt.instance.selfSnack)return;this.moveP.setTo(xt.instance.selfSnack.x,xt.instance.selfSnack.y)}else if(this.moveType==ee.CAMERA_FOLLOW_OTHER){if(!this.otherHeroSpr)return;this.otherHeroSpr._isDead?this.setCameraIdle():this.moveP.setTo(this.otherHeroSpr.x,this.otherHeroSpr.y)}else if(this.moveType==ee.CAMERA_MAP_CLICK){if(!this.moveP)return}else if(this.moveType==ee.CAMERA_DIRECT_OPERATE){if(!this.moveP)return;if(this.mapDir!=-4){let u=1*9.799999999999999,m=this.mapDir*(Math.PI/180),h=u*Math.cos(m),y=u*Math.sin(m);var e=Math.round(this.moveP.x+h),i=Math.round(this.moveP.y+y);this.gameWindowX=e-Laya.stage.width/2,this.gameWindowY=i-Laya.stage.height/2;var n=-this.gameWindowX,r=-this.gameWindowY,s=Laya.stage.width-this.gameMap.width,o=Laya.stage.height-this.gameMap.height;console.log("moveGameWindow: gameMap ",this.moveType,t,n,r,Laya.stage.width,Laya.stage.height,this.gameMap.x,this.gameMap.y),n>0?e=this.moveP.x:n<s&&(e=this.moveP.x),r>0?i=this.moveP.y:r<o&&(i=this.moveP.y),this.moveP.setTo(e,i),t=!0}else return}if(this.moveP){this.gameWindowX=this.moveP.x-Laya.stage.width/2,this.gameWindowY=this.moveP.y-Laya.stage.height/2;var n=-this.gameWindowX,r=-this.gameWindowY,s=Laya.stage.width-this.gameMap.width,o=Laya.stage.height-this.gameMap.height;n>0?n=0:n<s?n=s:n=n,r>0?r=0:r<o?r=o:r=r,t?(Laya.Tween.clearAll(this.gameMap),this.gameMap.pos(n,r,!0)):Laya.Tween.to(this.gameMap,{x:n,y:r},0)}}}setMapPos(){var t=Laya.stage.width/2-this.gameMap.x,e=Laya.stage.height/2-this.gameMap.y;this.moveP.setTo(t,e)}};ya._instance=null;var q=ya;var ni=class ni{constructor(){this.resArr=["gameIcon/snakeMatch/map/tile_map.png","gameIcon/snakeMatch/snakes/img_head1001.png","gameIcon/snakeMatch/snakes/img_head1002.png","gameIcon/snakeMatch/snakes/img_head1003.png","gameIcon/snakeMatch/snakes/img_body1001.png","gameIcon/snakeMatch/snakes/img_body1002.png","gameIcon/snakeMatch/snakes/img_body1003.png",{url:"res/common.atlas",type:Laya.Loader.ATLAS},{url:"gameIcon/effect/ruchang/effect1.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/ruchang/effect2.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/ruchang/effect3.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/hua/effect.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/diquan/img_3.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/diquan/img_4.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/diquan/img_5.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/diquan/img_6.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/zhuangbei/img_equip_1.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/zhuangbei/img_equip_2.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/zhuangbei/img_equip_3.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/zhuangbei/img_equip_4.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/tx/img_wudi.skel",type:Laya.Loader.SPINE},{url:"scenes/mainView/MainScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/match/Match.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/hero/AniSk.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchHeroSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBodySpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBeanSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/DamageNumber.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/RocketSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/mainView/EnterRoomSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtLoadingView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtNoticeView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/mainView/BarrageSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/mainView/SpecialBarrageSpr.lh",type:Laya.Loader.HIERARCHY},{url:"prefab/closeBtn.lh",type:Laya.Loader.HIERARCHY},{url:"prefab/defaultButton.lh",type:Laya.Loader.HIERARCHY},{url:"prefab/DropBox.lh",type:Laya.Loader.HIERARCHY},{url:"resources/sound/destroy.wav",type:Laya.Loader.BUFFER},{url:"resources/sound/hit.wav",type:Laya.Loader.BUFFER}];this.m_arrPreResource=["config/spot.json","config/scene.json"];this.m_arrInitResource=["resources/tiledMap/map1_32.json","config/general.json","config/head.json","config/iconBadge.json","config/country.json","config/expression.json","config/fontColor.json","config/variable.json","config/equip.json","config/shop.json","config/likeIt.json","config/union.json","config/winNumbers.json","config/hero.json","config/snake.json","config/foods.json","config/monster.json","config/skill.json","config/buff.json","config/effect.json","config/item.json","config/arena.json","config/arenaType.json","config/characterStar.json","config/node.json","config/groupWar.json","config/map.json","config/level.json","config/currencyAddress.json","config/aCoin.json","config/coinAddress.json","config/attributes.json"];this.m_objModuleReource={FindScene:["res/atlas/find.atlas"],MainScene:["res/atlas/main.atlas"],ShopScene:[],RankScene:[],GetMatScene:[],OpenGameScene:[],ScholarshipScene:[],FriendScene:[],CommentDialog:["res/atlas/comment.atlas"],GuideView:["res/atlas/guide.atlas","res/atlas/ShopView.atlas","config/newplayer.json"],ShareView:["res/atlas/share.atlas"],SelectHeadDialog:[],UnionApplyDialog:["config/alliance_constant.json","config/guild_building_main.json","config/alliance_pos.json","config/guild_level.json"],GuildScene:["res/atlas/union.atlas","config/alliance_constant.json","config/guild_building_main.json","config/alliance_pos.json","config/guild_level.json","config/guild_apply.json","config/guild_contrubute.json"],UnionWarScene:["res/atlas/unionWar.atlas","config/resource_node.json"],HeroScene:["res/atlas/hero.atlas","config/hero_lv.json","config/hero_attup.json","res/atlas/equip.atlas"],AFKBattleScene:["res/atlas/battle.atlas"],ArenaScene:["res/atlas/Arena.atlas"],MailScene:[],KnapsackScene:["res/atlas/mainUI1.atlas"],UnionScene:["res/union1.atlas"],IgoPageScene:[],PveScene:[]};this.m_objModuleViews={NoServerView:"scenes/createRole/NoServer.lh",CreateLoginView:"scenes/createRole/CreateLoginView.lh",ChangeHeadDialog:"scenes/createRole/ChangeHeadDialog.lh",HeroGetDialog:"scenes/shop/HeroGetDialog.lh",BuyTicketDialog:"scenes/shop/BuyTicketDialog.lh",ItemGetDialog:"scenes/item/ItemGetDialog.lh",EquipStarUpDialog:"scenes/item/EquipStarUpDialog.lh",RewardGetDialog:"scenes/item/RewardGetDialog.lh",KnapsackTipDialog:"scenes/item/KnapsackTipDialog.lh",SelectHeadDialog:"scenes/createRole/SelectHeadDialog.lh",TxtNoticeView:"scenes/notice/TxtNoticeView.lh",NoticeDialog:"scenes/notice/NoticeDialog.lh",HelpDialog:"scenes/notice/HelpDialog.lh",ImgDialog:"scenes/notice/ImgDialog.lh",ChampDetailDialog:"scenes/asset/ChampDetailDialog.lh",ChampRecordDialog:"scenes/asset/ChampRecordDialog.lh",RoleInfoDialog:"scenes/createRole/RoleInfoDialog.lh",RemGetDialog:"scenes/createRole/RemGetDialog.lh",CreateRoomDialog:"scenes/mainView/CreateRoomDialog.lh",CreateRentalDialog:"scenes/shop/CreateRentalDialog.lh",MyLeasedDialog:"scenes/shop/MyLeasedDialog.lh",MyRentedDialog:"scenes/shop/MyRentedDialog.lh",MyRentalBuyDialog:"scenes/shop/MyRentalBuyDialog.lh",EnterRoomView:"scenes/mainView/EnterRoomView.lh",InputPwdDialog:"scenes/mainView/InputPwdDialog.lh",RoomInfoDialog:"scenes/mainView/RoomInfoDialog.lh",HeroDetailDialog:"scenes/hero/HeroDetailDialog.lh",MatchEndRankView:"scenes/match/MatchEndRankView.lh",MatchEndTeamRankView:"scenes/match/MatchEndTeamRankView.lh",MyBookingView:"scenes/airdrop/MyBookingView.lh",UnionMemberView:"scenes/union/UnionMemberView.lh",UnionListView:"scenes/union/UnionListView.lh",CreateSubUnionView:"scenes/union/CreateSubUnionView.lh",ChangeUnionIconDialog:"scenes/union/ChangeUnionIconDialog.lh",MySubUnionView:"scenes/union/MySubUnionView.lh",UnionMemberApplyView:"scenes/union/UnionMemberApplyView.lh",UnionReferralView:"scenes/union/UnionReferralView.lh",UnionTransferView:"scenes/union/UnionTransferView.lh",TicketTransferView:"scenes/union/TicketTransferView.lh",HeroTransferView:"scenes/hero/HeroTransferView.lh",BanAccountView:"scenes/match/BanAccountView.lh",MatchReadyView:"scenes/match/MatchReadyView.lh",MatchEndView:"scenes/match/MatchEndView.lh",GameSettingLanguageDialog:"scenes/gameSetting/GameSettingLanguageDialog.lh",SkillTipDialog:"scenes/hero/SkillTipDialog.lh",TransferRecordDialog:"scenes/hero/TransferRecordDialog.lh",TeamCreateShareDialog:"scenes/airdrop/TeamCreateShareDialog.lh",TeamShareDialog:"scenes/airdrop/TeamShareDialog.lh",TeamJoinUsingDialog:"scenes/airdrop/TeamJoinUsingDialog.lh",TeamInfoDialog:"scenes/airdrop/TeamInfoDialog.lh",MyTeamDialog:"scenes/airdrop/MyTeamDialog.lh",MyFriendDialog:"scenes/airdrop/MyFriendDialog.lh",BaseAlertDialog:"scenes/baseAlert/BaseAlertDialog.lh",MatchConfimDialog:"scenes/baseAlert/MatchConfimDialog.lh",InviteConfimDialog:"scenes/airdrop/InviteConfimDialog.lh",ApplyConfimDialog:"scenes/airdrop/ApplyConfimDialog.lh",CreateSubWalletDialog:"scenes/scholarship/CreateSubWalletDialog.lh",WalletChooseHeroDialog:"scenes/scholarship/WalletChooseHeroDialog.lh",WalletChoosePropsDialog:"scenes/scholarship/WalletChoosePropsDialog.lh",EmployInfoDialog:"scenes/scholarship/EmployInfoDialog.lh",HireDetailDialog:"scenes/asset/HireDetailDialog.lh",ProxyDetailDialog:"scenes/asset/ProxyDetailDialog.lh",WithDrawRecordDialog:"scenes/asset/WithDrawRecordDialog.lh",NodeRevenueRecordDialog:"scenes/asset/NodeRevenueRecordDialog.lh",CardPayView:"scenes/asset/CardPayView.lh",SwapView:"scenes/asset/SwapView.lh",RentalRecordDialog:"scenes/scholarship/RentalRecordDialog.lh",PrivateChatDialog:"scenes/friend/PrivateChatDialog.lh",AirdropRecordDialog:"scenes/asset/AirdropRecordDialog.lh",ActivityInfoDialog:"scenes/createRole/ActivityInfoDialog.lh",CharacterStarDialog:"scenes/createRole/CharacterStarDialog.lh",LastDrawDialog:"scenes/lcPool/LastDrawDialog.lh",IgoPageScene:"scenes/igoPage/IgoPageScene.lh",IgoJoinDialog:"scenes/igoPage/IgoJoinDialog.lh",IgoRecordDialog:"scenes/igoPage/IgoRecordDialog.lh",DailyTaskPropsDialog:"scenes/dailyTasks/DailyTaskPropsDialog.lh",DailyTaskNoPropsDialog:"scenes/dailyTasks/DailyTaskNoPropsDialog.lh",PveScene:"scenes/pve/PveScene.lh",PveRecordView:"scenes/pve/PveRecordView.lh",PveSponsorView:"scenes/pve/PveSponsorView.lh",PveChoosePropsDialog:"scenes/pve/PveChoosePropsDialog.lh",ReferralDialog:"scenes/createRole/ReferralDialog.lh",ReferralL2Dialog:"scenes/createRole/ReferralL2Dialog.lh",TotalBattlesDialog:"scenes/createRole/TotalBattlesDialog.lh"};this.m_objConfigReource={};this.m_commonResource=new ye;this.loadingView=Laya.Browser.window.loadingView;this.ii=100;this.baseUrl="https://cdn.phantomarena.ai/hero/";if(ni._instance)throw new Error("LayerManager是单例,不可new.");ni._instance=this}static get instance(){return ni._instance==null&&(ni._instance=new ni),ni._instance}init(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),this.initGameLanguage()}initGameLanguage(){ni.GameLanguage_URL="config/language.json",Laya.loader.load(ni.GameLanguage_URL,Laya.Handler.create(this,this.initGameResource))}initGameResource(t){if(t==null)return;let e=ni.instance.getResBySetURL(ni.GameLanguage_URL);p.instance.initLanTypes(e.data),Laya.loader.clearRes(ni.GameLanguage_URL),this.onConfigLoaded()}onError(t){}onConfigLoaded(){let t=new $n;t.ID=4,t.Event="加载语言包信息",$e.instance.sendCustumEvent(4,null,t),ie.ignoreLang||(v.instance.m_strLanguage=p.instance.getLanIdByType(ie.User_Lan)),this.m_UILang="config/lang_english"+v.instance.m_strLanguage+".json",this.m_NomalLang="config/english"+v.instance.m_strLanguage+".json",this.m_NomalLang1="config/english1.json",this.m_ErrorLang="config/error"+v.instance.m_strLanguage+".json",this.m_arrPreResource.push(this.m_UILang),this.m_arrPreResource.push(this.m_NomalLang),this.m_arrPreResource.push(this.m_NomalLang1),this.m_arrPreResource.push(this.m_ErrorLang),this.initResourceURL(this.m_arrPreResource,!0),this.initResourceURL(this.m_arrInitResource,!0),this.addFont1()}addFont1(){Laya.loader.load("res/font/CookieRun Regular.otf",Laya.Loader.TTF).then(()=>{this.loadDemoResource()})}loadDemoResource(){Laya.loader.load(this.resArr,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{_e.instance.init(),q.instance.damageNumPrefab=Laya.loader.getRes("scenes/match/DamageNumber.lh"),q.instance.rocketSprPrefab=Laya.loader.getRes("scenes/match/RocketSpr.lh"),q.instance.aniSkPrefab=Laya.loader.getRes("scenes/hero/AniSk.lh"),We.instance.enterRoomPrefab=Laya.loader.getRes("scenes/mainView/EnterRoomSpr.lh"),We.instance.barrageSprPrefab=Laya.loader.getRes("scenes/mainView/BarrageSpr.lh"),We.instance.specialBarrageSprPrefab=Laya.loader.getRes("scenes/mainView/SpecialBarrageSpr.lh"),q.instance.roleAniPrefab=Laya.loader.getRes("scenes/match/MatchSnakeSpr.lh"),q.instance.matchSnakeBodyPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBodySpr.lh"),q.instance.matchSnakeBeanPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBeanSpr.lh"),q.instance.ruchangEffects=[Laya.loader.getRes("gameIcon/effect/ruchang/effect1.skel"),Laya.loader.getRes("gameIcon/effect/ruchang/effect2.skel"),Laya.loader.getRes("gameIcon/effect/ruchang/effect3.skel")],q.instance.huaEffect=Laya.loader.getRes("gameIcon/effect/hua/effect.skel"),q.instance.beijiTemplet=Laya.loader.getRes("gameIcon/effect/match/beiji/spine.sk"),q.instance.dunpaiTemplet=Laya.loader.getRes("gameIcon/effect/match/dunpai/spine.sk"),q.instance.diquanEffect3=Laya.loader.getRes("gameIcon/effect/diquan/img_3.skel"),q.instance.diquanEffect4=Laya.loader.getRes("gameIcon/effect/diquan/img_4.skel"),q.instance.diquanEffect5=Laya.loader.getRes("gameIcon/effect/diquan/img_5.skel"),q.instance.diquanEffect6=Laya.loader.getRes("gameIcon/effect/diquan/img_6.skel"),q.instance.equipPos1=Laya.loader.getRes("gameIcon/effect/match/zhuangbei/img_equip_1.skel"),q.instance.equipPos2=Laya.loader.getRes("gameIcon/effect/match/zhuangbei/img_equip_2.skel"),q.instance.equipPos3=Laya.loader.getRes("gameIcon/effect/match/zhuangbei/img_equip_3.skel"),q.instance.equipPos4=Laya.loader.getRes("gameIcon/effect/match/zhuangbei/img_equip_4.skel"),q.instance.img_wudi=Laya.loader.getRes("gameIcon/effect/match/tx/img_wudi.skel"),q.instance.baoqiEffect4=Laya.loader.getRes("gameIcon/effect/baoqi/img_4.skel"),q.instance.baoqiEffect5=Laya.loader.getRes("gameIcon/effect/baoqi/img_5.skel"),q.instance.baoqiEffect6=Laya.loader.getRes("gameIcon/effect/baoqi/img_6.skel"),q.instance.img_gongji_1009=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1009.skel"),q.instance.img_gongji_1010=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1010.skel"),q.instance.img_gongji_1011=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1011.skel"),q.instance.img_gongji_1012=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1012.skel"),q.instance.img_gongji_1013=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1013.skel"),q.instance.img_gongji_1014=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1014.skel");var t=q.instance.roleAniPrefab.create();console.log(" ================ roleAniPrefab: "+t);var e=q.instance.matchSnakeBodyPrefab.create();console.log(" ================ snakeBodyPrefab: "+e),this.onLoadThreeDimen()})}onLoadThreeDimen(){Laya.loader.load(this.m_arrPreResource,Laya.Handler.create(this,this.onPreAssetLoaded),Laya.Handler.create(this,this.onPreAssetPress2,null,!1))}onPreAssetPress1(t){this.va=(t*100*.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetPress2(t){this.va=(t*100*.5+.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetLoaded(t){if(!t)return;let e=Laya.Browser.now();wo.instance.initSpotCfgData(),this.initResourceURL(this.m_objModuleReource),this.initResourceURL(this.m_objConfigReource),$e.instance.sendCustumEvent(5),I.intance.preInit(),this.setGlobalLanguage(),$e.instance.sendCustumEvent(6),_.intance.event(b.EVENT_BACK_TO_LOGIN),ge.intance.initPreload(),this.loadingView&&this.loadingView.loading(100),console.log("-----------------------preload-time:"+(Laya.Browser.now()-e))}setGlobalLanguage(){let t=ni.instance.getResByURL(this.m_NomalLang);p.instance.initConfigLan(t.data);let e=ni.instance.getResByURL(this.m_NomalLang1);p.instance.initConfigLan1(e.data);let i=ni.instance.getResByURL(this.m_UILang);p.instance.initUILan(i.data);let n=ni.instance.getResByURL(this.m_ErrorLang);Oe.instance.initErrData(n.data),this.clearResUrlByRoot(this.m_UILang,!0),this.clearResUrlByRoot(this.m_NomalLang,!0),this.clearResUrlByRoot(this.m_NomalLang1,!0),this.clearResUrlByRoot(this.m_ErrorLang,!0)}initResourceURL(t,e=!1){if(t instanceof Array)this.setResURLArr(t,e);else if(t instanceof Object)for(let i in t)this.setResURLArr(t[i],e)}setResURLArr(t,e){let i,n;for(let r=0;r<t.length;r++)e?(this.m_commonResource.set(t[r],!0),n=this.setResURL(t[r]),i=this.getTypeFromUrl(n),t[r]={url:n,type:i,size:1,priority:1}):this.m_commonResource.get(t[r])?(t.splice(r,1),r--):(n=this.setResURL(t[r]),i=this.getTypeFromUrl(n),t[r]={url:n,type:i,size:1,priority:1})}getTypeFromUrl(t){let{ext:e,typeId:i,main:n,loaderType:r}=Laya.Loader.getURLInfo(t);ni._extReg.lastIndex=t.lastIndexOf(".");let s=ni._extReg.exec(t);return s&&s.length>1?s[1].toLowerCase():"text"}setResURL(t){return t}clearResUrlByRoot(t,e=!1){let i=t;Laya.loader.clearRes(i)}hasFormatEffectUrl(t){return t.indexOf("effect/")>=0}setItemResURL(t){return t&&t.hasOwnProperty("item_img")?this.setResURL("icon/"+t.item_img+".png"):""}setThreeDimenUrl(t){return t?this.setResURL("threeDimen/"+t):""}getThreeDimenUrl(t){let e=this.setResURL("threeDimen/"+t);return Laya.Loader.getRes(e)}getResByURL(t){let e=ni.instance.setResURL(t);return Laya.Loader.getRes(e)}getResBySetURL(t){return Laya.Loader.getRes(t)}loadModuleUrl(t,e=null,i=null,n=1,r=!0){console.log("loadModuleUrl m_strName: "+t),this.ii++;let s=ni.instance.m_objModuleReource[t];if(s==null||s.length<1){e.run();return}Laya.loader.load(s,Laya.Handler.create(this,this.loadItemComplete,[e,s]),Laya.Handler.create(this,this.onLoadProgress,[t],!1),i,n,r,this.ii.toString())}loadItemComplete(t,e){this.usedUrlDic||(this.usedUrlDic=new ye);for(let i in e){let n=e[i].url,r=this.usedUrlDic.get(n);r?this.usedUrlDic.set(n,++r):this.usedUrlDic.set(n,1)}t.run()}clearModuleUrl(t){console.log("clearModuleUrl m_strName: "+t);let e=ni.instance.m_objModuleReource[t];for(let i in e){let n=e[i].url;if(this.usedUrlDic){let r=this.usedUrlDic.get(n);r-=1,r<1?(this.usedUrlDic.remove(n),Laya.loader.clearRes(n)):this.usedUrlDic.set(n,r)}}}onLoadProgress(t,e){}loadResource(t,e=null,i=null,n=null,r=1,s=!0){Laya.loader.load(t,e,i,n,r,s)}getNodeIcon(t){return this.setResURL("gameIcon/node/img_"+t+".png")}getCountryIcon(t){return this.setResURL("gameIcon/country/img_"+t+".png")}getTeamFlag(t){return this.setResURL("gameIcon/hero/teamFlag/img_"+t+".png")}getChestIcon(t){return this.setResURL("gameIcon/items/chest/img_"+t+".png")}getChestBigIcon(t){return this.setResURL("gameIcon/items/chestBig/img_"+t+".png")}getHeroEggIcon(t){return this.setResURL("gameIcon/hero/heroEgg/img_"+t+".png")}getHeroEggBigIcon(t){return this.setResURL("gameIcon/hero/heroEggBig/img_"+t+".png")}getSnakeHeadIcon(t){return this.setResURL("gameIcon/snakeMatch/snakes/img_head"+t+".png")}getSnakeBodyIcon(t){return this.setResURL("gameIcon/snakeMatch/snakes/img_body"+t+".png")}getFoodIcon(t){return this.setResURL("gameIcon/snakeMatch/foods/img_"+t+".png")}getHeroHeadIcon(t){return this.setResURL("gameIcon/hero/heroHead/img_"+t+".png")}getHeroQuality(t){return this.setResURL("gameIcon/hero/heroQuality/img_"+t+".png")}getHeroBackIcon(t){return this.setResURL("gameIcon/hero/heroDetail/img_hero_di_"+t+".png")}getHeroFrontIcon(t){return this.setResURL("gameIcon/hero/heroDetail/img_hero_"+t+".png")}getItemIcon(t){return this.setResURL("gameIcon/items/item/img_"+t+".png")}getItemBgIcon(t){return this.setResURL("gameIcon/items/itemBg/img_"+t+".png")}getItemBigIcon(t){return this.setResURL("gameIcon/items/itemBig/img_"+t+".png")}getItemBigBigIcon(t){return this.setResURL("gameIcon/items/itemBigBig/img_"+t+".jpg")}getItemQualityIcon(t){return this.setResURL("gameIcon/items/itemQuality/img_"+t+".png")}getMoneyIcon(t){return this.setResURL("gameIcon/items/money/img_"+t+".png")}getAttrIcon(t){return this.setResURL("gameIcon/attr/img_attr_"+t+".png")}getSkillIcon(t,e=!1){let i;return e?i=this.setResURL("gameIcon/skill/skills/img_big_"+t+".png"):i=this.setResURL("gameIcon/skill/skills/img_"+t+".png"),i}getMatchSkillIcon(t){return this.setResURL("gameIcon/skill/matchSkills/img_"+t+".png")}getPlayerIcon(t){return parseInt(t)>0?this.setResURL("gameIcon/head/headCircle/img_"+t+".png"):t}getUnionIcon(t){return parseInt(t)>0?this.setResURL("gameIcon/union/badge/img_trade_"+t+".png"):t}getUnionLvIcon(t){return this.setResURL("gameIcon/union/lvIcon/img_trade_"+(t>3?4:t)+".png")}getUnionLvDiIcon(t){return this.setResURL("gameIcon/union/lvIcon/img_trade_di_"+(t>3?4:t)+".png")}getEmoji(t,e){return this.setResURL("gameIcon/emoji/tab"+t+"/img_"+e+".png")}getFontColor(t){return this.setResURL("gameIcon/emoji/img_color_"+t+".png")}getSceneBgUrl(t){return"scene/"+t+".jpg"}clearSKinUrl(t){for(let e in t)t[e]instanceof String&&t[e].indexOf("skincolor")==-1&&Laya.loader.clearRes(t[e]);t=[]}getFunctionIcon(t){return this.setResURL("icon/functionIcon/"+t+".png")}getNewFunIcon(t){return this.setResURL("icon/newFunIcon/"+t+".png")}getSoundURL(t,e=".ogg"){let i;return i=this.setResURL("mp3/"+t+e),i}getSoundURLogg(t){let e;return e=this.setResURL("mp3/"+t),e}getSceneUrl(t){return"scene/sceneBg/"+t+".jpg"}getMianSysIcon(t){return this.setResURL("icon/mainSysIcon/btn_"+t+".png")}getEffectUrl(t){return this.setResURL("effect/"+t+".json")}getLoadingUrl(t){return this.setResURL("effect/"+t)}getGuangImg(t){return this.setResURL("swf/"+t+".png")}getGuildProofBg(t){return this.setResURL("scene/guild/proof/"+t+"/1.png")}getGuildProofHots(t){return this.setResURL("scene/guild/proof/"+t+"/"+t+"/"+t+".json")}getShareImgUrl(t,e=!1,i=!1){let n;return i?t:(t=t+".jpg",e?n="https://mutantbox.8686c.com/16/qa/common/share/"+t:n="https://cdn.test.com/16/qa/common/share/"+t,n)}getHeadUrl(t){return"common/common_icon/"+t+".png"}getMapImg(t){return"gameIcon/map/"+t+"/img_map.jpg"}getMapPrefab(t){return"gameIcon/map/map_"+t+".lh"}clearCache(){}getHeroHeadRes(t,e){return ie.Res==0?"gameIcon/hero/heroHead/img_"+t+".png":this.baseUrl+`${t}/${e}.png`}getHeroSkRes(t,e){return ie.Res==0?`gameIcon/hero/heroSk/${t}/img_hero.skel`:this.baseUrl+`${t}/${e}/img_hero.skel`}};ni._extReg=/\.(\w+)\??/g;var M=ni;var _s=class _s{constructor(){this._list=[];this._isNoticing=!1;this._isListener=!1}static get instance(){return _s._instance||(_s._instance=new _s),_s._instance}notice(t){this._isNoticing?this._isListener||(this._isListener=!0,this._list.push(t),Laya.timer.loop(_s.Tip_Interval,this,this.onInterVal)):(this._list.push(t),this.noticeOne())}noticeOne(){var t=M.instance.m_objModuleViews.TxtNoticeView;let e;Laya.loader.load(t).then(i=>{if(!i){console.log("noticeOne : "+t+"  res is null");return}e=Laya.Pool.getItemByCreateFun("txtNotice",i.create,i);let n=this._list.shift();e.notice(n),Laya.stage.addChild(e),e.x=A.instence.stageWidth*.5-e.width*.5,e.y=A.instence.stageHeight*.5-e.height*.5,Laya.Tween.to(e,{y:e.y-250,alpha:.5},1e3,null,Laya.Handler.create(this,this.onFinish,[e]),1e3)})}onFinish(t){t&&(t.visible=!1,t.removeSelf())}onInterVal(){this._list.length>=1?this.noticeOne():(this._isNoticing=!1,this._isListener=!1,Laya.timer.clear(this,this.onInterVal))}};_s.Tip_Interval=1e3;var C=_s;var Oe=class a{constructor(){this._curErrTxt=""}static get instance(){return a._instance||(a._instance=new a),a._instance}initErrData(t){this.errData=t}get(t){return this.errData[t]?this.errData[t].words:(console.warn("服务端错误码语言包未配表 错误码："+t),t)}showErrorWord(t,...e){var i=this.getLanguage2(t,e);C.instance.notice(i)}getLanguage2(t,e){if(this.errData&&this.errData[t]){let i=this.errData[t].words;if(i&&i!="")return this._curErrTxt=p.instance.replacePlaceholder(i,e),this._curErrTxt}return this._curErrTxt=p.instance.replacePlaceholder(t+"",e),this._curErrTxt}showErrByString(t,e="#ff0000"){this._curErrTxt=t;let i=new Laya.Label(this._curErrTxt);i.width=500,i.align="center",i.height=40,i.fontSize=26,i.color=e,i.mouseEnabled=!1,i.strokeColor="#000000",i.stroke=.5,Laya.stage.addChild(i),i.x=(Laya.stage.width-i.width)/2,i.y=(Laya.stage.height-i.height)/2,Laya.Tween.to(i,{y:i.y-100,alpha:0},500,null,Laya.Handler.create(this,this.completeHandler,[i]),1e3)}completeHandler(t){t&&t.parent&&t.parent.removeChild(t)}dispose(){this.errData=null}};var Ut=class{};Ut.FUNID_MALL="1004",Ut.FUN_ID_TAGGARDEN="2005",Ut.FunID_WORK="1006",Ut.FUN_ID_BARGAIN_SHOP="1007",Ut.TRAVEL_HARD="1012",Ut.TRAVEL_REWARD="3006",Ut.FUNID_TUJIAN="2105",Ut.FUN_ID_PARTY="7003",Ut.FUN_ID_FB="9010",Ut.FUN_ID_PET="9004",Ut.FUN_ID_TURNTABLE="9001",Ut.FUN_ID_GASHPOEN="9012",Ut.FUN_ID_SHOPEXCHANGE="2104",Ut.FUN_ID_TIME_STAGE="9014",Ut.FUN_ID_DRAWCARD_PVP="1008613",Ut.FUN_ID_PHONE="2004",Ut.FUN_ID_DS="9017",Ut.FUN_ID_BUY_PS="9030",Ut.FUN_ID_DESTINY="3020",Ut.FUN_ID_ACTIVITY_SHOP="9026",Ut.FUN_ID_WORKSHOP_RECYCLE="3002",Ut.FUN_ID_WORKSHOP_COLOR="3004",Ut.FUN_ID_WORKSHOP_UPGRADE="3003",Ut.FUN_ID_GUILD="1010",Ut.FUN_ID_VIP="9022",Ut.FUN_ID_MONTHCARD="9100";var Lf=class{constructor(){this.bafflesInfo=[[330,740,9],[294,113.95,1],[712.95-80,343.45,3],[1251.35,125.95,7]];this.redHotStateMap=new ye;this.openSystem=new ye;this.m_dicSystemInfoCfg=new ye,this._openTypeList=new ye,this.parseJson()}hasRedState(t){let e=this.redHotStateMap.get(t+"");return e&&e.redState>0?e.redState:0}initSystemOpen(t){this.openSystem=new ye;for(let e=0;e<t.length;e++)this.openSystem.set(t[e],!0),t[e]+""==Ut.FUN_ID_PHONE.toString()}parseJson(){let t=M.instance.getResByURL("config/system_open.json"),e;for(let i in t)if(e=t[i],e){this.m_dicSystemInfoCfg.set(e.functionID,e);let n=this._openTypeList.get(e.open_type);n||(n=[],this._openTypeList.set(e.open_type,n)),n.push(e)}}getSystemsByType(t){let e=[];for(let i=0;i<this.m_dicSystemInfoCfg.values.length;i++){let n=this.m_dicSystemInfoCfg.values[i];n.positionID==t&&e.push(n)}return e}getLockFun(t,e){let i=this._openTypeList.get(t);for(let n of i)if(n.parameter1+""==e+"")return n;return null}getBuildSystem(){}isOpen(t){return ie.buildClickState?!0:(t instanceof String&&(t=parseInt(t+"")),this.openSystem.get(t)!=null)}};var vf=class{constructor(){this._vipLv=0}isReceive(t){for(let e of this.isRewards)if(e+""==t.toString())return!0;return!1}addIsReceive(t){this.isReceive(t)||this.isRewards.push(t)}get vipLv(){return this._vipLv}set vipLv(t){this._vipLv!=t&&(this._vipLv=t)}};var xf=class{constructor(){this.m_dicItemList=new ye,this.m_dicTypeList=new ye,this.m_dicSubTypeList=new ye,this.m_dicBackList=new ye}initData(t){this.m_dicItemList=new ye,this.m_dicTypeList=new ye,this.m_dicSubTypeList=new ye,this.m_dicBackList=new ye;let e;for(let n=0;n<t.length;n++){e=new Xe;var i=t[n];e.m_iId=i.id,i.pk&&(e.m_iPk=i.pk),e.m_iId=i.id,e.m_iNum=i.count,e.m_iNum>0&&this.pushItem(e)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}getCountById(t,e=!0){return I.intance.m_dicItems.get(t)==null?0:this.getItemCountById(t,e)}pushItem(t){this.m_dicItemList.set(t.m_iId,t),this.m_dicTypeList.get(t.type)==null&&this.m_dicTypeList.set(t.type,new ye),this.m_dicSubTypeList.get(t.subType)==null&&this.m_dicSubTypeList.set(t.subType,new ye),this.m_dicBackList.get(t.backType)==null&&this.m_dicBackList.set(t.backType,new ye),this.m_dicTypeList.get(t.type).set(t.m_iId,t),this.m_dicSubTypeList.get(t.subType).set(t.m_iId,t),this.m_dicBackList.get(t.backType).set(t.m_iId,t)}removeItem(t){this.m_dicItemList.remove(t.m_iId),this.m_dicTypeList.get(t.type).remove(t.m_iId),this.m_dicSubTypeList.get(t.subType).remove(t.m_iId),this.m_dicBackList.get(t.backType).remove(t.m_iId)}updateData(t,e=!1,i=!0){console.log("updateData: ",t,e,i);let n=[],r=!1,s;for(let o=0;o<t.length;o++){t[o]instanceof Array?(s=new Xt,s.id=t[o][0],s.count=t[o][1]):s=t[o];let l=this.m_dicItemList.get(s.id);l==null&&(l=new Xe(s.id),this.pushItem(l),l.m_bNew=!0),e?l.m_iNum=s.count:(l.newAddCnt=s.count,l.m_iNum=l.m_iNum+s.count),n.push(l.m_iId),l.m_iNum<=0&&this.removeItem(l),l.newAddCnt>0&&Bt.instance.needPop&&i&&(Bt.instance.addItem(l),r=!0)}r&&Bt.instance.needPop&&Bt.instance.autoPop&&fa.instance.startShow(),n.length>0&&_.intance.event(b.PACKAGE_UPDATE_ITEM,[n])}getItemById(t){return this.m_dicItemList.get(t)}getItemsBySubType(t){let e=this.m_dicSubTypeList.get(t);return e==null&&(e=[]),e}getListByType(t){let e=[];return this.m_dicTypeList.get(t)&&(e=this.m_dicTypeList.get(t).values.slice()),e.sort(this.sortOnQa),e}getBackByType(t){let e=[];return this.m_dicBackList.get(t)&&(e=this.m_dicBackList.get(t).values.slice()),e.sort(this.sortOnQa),e}async getQuan(t){let e=[];var n=(await w.requestPost("wxgame/hero/loserTicketBagList",{type:t},!0,!0)).data;let r;for(let l=0;l<n.length;l++){r=new Xe;var s=n[l];r.m_iId=s.id,s.pk&&(r.m_iPk=s.pk),r.m_iId=s.id,r.m_iNum=s.count,s.extra&&s.extra.prize&&(r.prizeStatus=2),s.extra&&s.extra.expTime?r.expTime=parseFloat(s.extra.expTime):r.expTime=0;var o=v.instance.m_serverTime;o>r.expTime?t==3&&e.push(r):s.extra&&s.extra.onChain?(r.chainStatus=1,t==1&&e.push(r)):t==2&&e.push(r)}return e.sort(this.sortOnExpTime),e}getListBySubType(t){let e=[];return this.m_dicSubTypeList.get(t)&&(e=this.m_dicSubTypeList.get(t).values.slice()),e.sort(this.sortOnQa),e}sortOnQa(t,e){let i=t.itemItem.sort,n=e.itemItem.sort;return i<n?-1:i>n?1:0}sortOnExpTime(t,e){let i=t.expTime,n=e.expTime;return i<n?1:i>n?-1:0}getItemCountById(t,e=!0){let i=this.getItemById(t);return i?i.m_iNum:0}};var If=class a{constructor(t){this._addNewFList=[];this.delayShowNewFun=!1}static get instance(){return a._instace==null&&(a._instace=new a(new B1)),a._instace}addNewOpenFun(t){this._addNewFList=this._addNewFList.concat(t),this.delayShowNewFun||this.showNewFun()}setDelayShowFun(t){this.delayShowNewFun!=t&&(this.delayShowNewFun=t,t||this.showNewFun())}showNewFun(){if(this._addNewFList.length>0){let t=this._addNewFList.pop(),e=v.instance.systemOpenModel.m_dicSystemInfoCfg.get(t.toString());e?e.if_open.toString()=="1"||e.if_pop.toString()!="1"?this.showNewFun():this.swithToNewFun(t):this.showNewFun()}}swithToNewFun(t,e=!1){let i=v.instance.systemOpenModel.m_dicSystemInfoCfg.get(t);if(i){if(i.if_open.toString()=="1"){C.instance.notice("system_open.json-->funId:"+i.functionID+"is close");return}(i.if_pop.toString()=="1"||e)&&_.intance.event(b.EVENT_OPEN_MODULE,[L.NewFunUnLockDialog,t])}}hasUnlockFunction(t,e=!0){let i=v.instance.systemOpenModel.m_dicSystemInfoCfg.get(t+""),n=v.instance.systemOpenModel.isOpen(parseInt(t));return!n&&e&&C.instance.notice(p.instance.getLanguage(i.lock_word)),n}},B1=class{};var Ls=class{constructor(){}ReadShort(t){let e=new Uint8Array(t.buffer),i=e[t.pos]<<8,n=e[t.pos+1],r=i|n;return t.pos+=2,r}ReadInt(t){let e=new Uint8Array(t.buffer),i=e[t.pos]<<24|e[t.pos+1]<<16|e[t.pos+2]<<8|e[t.pos+3];return t.pos+=4,i}ReadByte(t){return t.getByte()}ReadString(t){let e=this.ReadShort(t);return e==0?"":t.getUTFBytes(e)}ReadBytes(t,e){let i=t.buffer.slice(t.pos,e);return new Laya.Byte(i)}dispose(){}};var Ef=class{constructor(){this.writeByt=new Laya.Byte}writeByte(){}writeShort(t){this.writeByt.writeByte(t>>8),this.writeByt.writeByte(t)}writeInt(t){this.writeByt.writeByte(t>>24),this.writeByt.writeByte(t>>16),this.writeByt.writeByte(t>>8),this.writeByt.writeByte(t)}writeString(t){if(t.length==0){this.writeShort(0);return}let i=new Laya.Byte;i.writeUTFBytes(t),this.writeShort(i.length),this.writeByt.writeUTFBytes(t)}dispose(){}};var Yl=class a{constructor(){this.cookie="####1.0.0#0#";this.encryptKey="FFIYD#^3LB954JB90fzj*(d)sO7";this._curSendIndex=-1}static get instance(){return a._instance||(a._instance=new a),a._instance}setLoginCookie(){this.cookie="####1.0.0#"+ie.Login_UDID+"#"+ie.UserAgent}parseCookie(t,e,i,n="1.0.0"){let r=this.encryptKey+e+t,s=mB(r);n=v.instance.M_S_VersionServer;let o=s+"#"+t+"#"+e+"#"+i+"#"+n+"#"+this._curSendIndex+"#1#"+ie.Login_UDID+"#"+ie.UserAgent;this.cookie=o}reflashCookie(){this.parseCookie(this.m_time,this.m_roleID,this.m_accout)}analyClient(t,e){let i=new Ef;i.writeString(this.cookie),i.writeShort(t);let n=this.analyData[t];return n&&n.length>0&&this.writeByt(n,e,i),i.writeByt}writeByt(t,e,i){for(let n in t){let r=e[n];if(t[n].indexOf("7/")!=-1){i.writeShort(r.length);let s=this.analyData[String(t[n]).split("7/")[1]];if(s)for(let o in r)this.writeByt(s,r[o],i)}else if(t[n]=="1")i.writeInt(r);else if(t[n]=="2")i.writeShort(r);else if(t[n]=="3")i.writeString(r);else if(t[n]=="4"||t[n]=="5"||t[n]=="6"){i.writeShort(r.length);for(let s in r)t[n]=="4"?i.writeInt(r[s]):t[n]=="5"?i.writeShort(r[s]):t[n]=="6"&&i.writeString(r[s])}}}analyServer(t){let e=new Ls,i=e.ReadShort(t),n=[i],r=this.analyData[i];return r&&r.length>0&&(n=n.concat(this.readByt(r,t,e))),n}analyCookie(t=""){console.log("RECE_COOKIE: "+t,1);let e=t.split("#");this.m_time=e[0],this.m_roleID=e[1],this.m_accout=e[2];let i=e[3];this._curSendIndex=i,this._curSendIndex++,console.log("cookie:_time:"+this.m_time+"  _roleID："+this.m_roleID+"	  _accout："+this.m_accout),this.parseCookie(this.m_time,this.m_roleID,this.m_accout),v.instance.timeStamp=parseFloat(this.m_time)}readByt(t,e,i){let n=[];for(let r in t)if(t[r].indexOf("7/")!=-1){let s=i.ReadShort(e),o=this.analyData[String(t[r]).split("7/")[1]],l=[];if(o&&s>0)for(let u=0;u<s;u++)l.push(this.readByt(o,e,i));n.push(l)}else if(t[r]=="1")n.push(i.ReadInt(e));else if(t[r]=="2")n.push(i.ReadShort(e));else if(t[r]=="3")n.push(i.ReadString(e));else if(t[r]=="4"||t[r]=="5"||t[r]=="6"){let s=i.ReadShort(e),o=[];for(let l=0;l<s;l++)t[r]=="4"?o.push(i.ReadInt(e)):t[r]=="5"?o.push(i.ReadShort(e)):t[r]=="6"&&o.push(i.ReadString(e));n.push(o)}return n}dispose(){}};function mB(a){throw new Error("Function not implemented.")}var Ze=class Ze{constructor(){this._isSending=!1;this._stopSending=!1;this._sendCmd=0;this._callDataArr=[],this._httpReq=new Laya.HttpRequest,this._httpReq.http.timeout=15e3,this._httpReq.http.ontimeout=this.timeoutFunction,this._httpReq.on(Laya.Event.COMPLETE,this,this.reqCompleteHandler),this._httpReq.on(Laya.Event.ERROR,this,this.reqErrorHandler),this._httpReq.on(Laya.Event.PROGRESS,this,this.reqProcessHandler),Ze.RepeatHandler=Laya.Handler.create(this,this.repeatCallHandler,null,!1)}static get instance(){return Ze._instance||(Ze._instance=new Ze),Ze._instance}repeatCallHandler(){let t=this._callDataArr[0];t&&(t.needReSend?(this._callDataArr.shift(),this._sendByByte(t.command,t.callData,t.isShowLoading,!0)):this._callDataArr.shift())}timeoutFunction(){Ze.ErrorIndex++,this._sendCmd==2,Ze.timeoutTimes<Ze.MaxSendTimes,Ze.timeoutTimes++,Ze._IS_SEND=!1,this._isSending=!1,Ze.ErrorIndex>=Ze.RepeatTimesTimeOut?(_e.instance.hideLoading(),Ze.ErrorTips=p.instance.getLanguage(5076),O.intance.openModule(L.ClientErrView)):Ze.RepeatHandler.run()}reqCompleteHandler(t){let e=Laya.Browser.now()-this.m_nSendTime;if(e&&e>Ze.RequestTime?(Ze.reqTimes<Ze.MaxSendTimes,Ze.reqTimes++):(Ze.reqTimes=0,Ze.timeoutTimes=0,Ze.errorTimes=0),console.log("cmd time："+(Laya.Browser.now()-this.m_nSendTime)),this._httpReq.data==null){Oe.instance.showErrByString("_buff:null");return}this._isSending=!1,Ze.ErrorIndex=0;let i=new Laya.Byte(this._httpReq.data),n;if(i){let r=new Ls,s=r.ReadString(i);Yl.instance.analyCookie(s);let o=r.ReadByte(i);for(let l=0;l<o;l++){r.ReadByte(i);let u=r.ReadShort(i),m=r.ReadBytes(i,i.pos+u);if(i.pos+=u,m.length<2)continue;m.pos=0;let h=r.ReadBytes(m,m.length);h.pos=0;let y=new Uint8Array(h.buffer),x=new Uint8Array(hB(y)),E=new Laya.Byte(x.buffer);E.pos=0;let S=Yl.instance.analyServer(E);Laya.LayaEnv.isConch?console.log("REVC_CMD: cmdID:"+S[0]+" data:"+S,1):console.log(he.GetLogTime+" REVC_CMD: cmdID:",S[0],S),S[0]==153&&console.log("......"),S[0]==27&&(S[1]==2e4||S[1]==20042)&&(n=!0),_.intance.event("msg_"+S.shift(),[S])}o==0&&console.log("REVC_DATA: NO_DATA",1)}if(this._callDataArr.length>0){let r=this._callDataArr.shift();n&&r&&r.callBackHandler!=null&&r.callBackHandler.run()}Ze._IS_SEND=!1,this._callDataArr.length>0?Ze.RepeatHandler.run():_e.instance.hideLoading()}reqErrorHandler(t){console.log("[error] HttpNetService reqError: ["+t+"]",1),Ze.errorTimes<Ze.MaxSendTimes&&this._sendCmd==2,Ze.errorTimes++,_e.instance.showLoadingByInfo(p.instance.getLanguage(5205)),Ze.ErrorIndex++,Ze._IS_SEND=!1,this._isSending=!1,Ze.ErrorIndex>=Ze.RepeatTimes?(_e.instance.hideLoading(),Ze.ErrorTips=p.instance.getLanguage(5075),O.intance.openModule(L.ClientErrView),this._callDataArr.length=0):Laya.timer.once(1e3,this,function(){Ze.RepeatHandler.run()})}reqProcessHandler(t){}DataToService(t){Laya.LayaEnv.isConch?this._httpReq.send(ie.server,t.buffer,"post","arraybuffer",["Content-Type","application/x-www-form-urlencoded","Connection","close"]):this._httpReq.send(ie.server,t.buffer,"post","arraybuffer",["Content-Type","application/x-www-form-urlencoded"])}SendData(t,e,i=null,n=!0,r=!0){this._stopSending||(this.m_nSendTime=Laya.Browser.now(),Ze.ErrorIndex=0,r&&this._callDataArr.push({command:t,callData:e,callBackHandler:i,isShowLoading:n,needReSend:r}),this._sendByByte(t,e,n,!1))}_sendByByte(t,e,i=!0,n=!1){this._sendCmd=t,this._sendCmd==2,gt.instance.sendData({cmd:t,code:"",data:e})}reSendData(){this._callDataArr.length>0&&Ze.RepeatHandler.run()}sendOutHandler(){Laya.timer.clear(this,this.sendOutHandler),this._isSending&&(this._isSending=!1,Ze.ErrorIndex>=Ze.RepeatTimes?(_e.instance.hideLoading(),Ze.ErrorTips="Client Error!",O.intance.openModule(L.ClientErrView),this._callDataArr.length=0):Ze.RepeatHandler.run())}EnCodeByte(t){t.pos=0;let i=new Ls().ReadBytes(t,t.length);i.pos=0;let n=new Laya.Byte,r=0,s,o=0;for(let l=0;l<i.length;l++)r>=6?r=1:r+=1,s=i.getByte(),o=s,s>>=8-r,o<<=r,o|=s,o^=3,n.writeByte(o);return n}DecryptByte(t){t.pos=0;let i=new Ls().ReadBytes(t,t.length);i.pos=0;let n=new Laya.Byte,r=0,s,o=new Uint8Array(i.buffer);for(let l=0;l<o.length;l++)r>=6?r=1:r+=1,s=o[l],s^=3,s<<=8-r,o[l]^=3,o[l]>>=r,o[l]|=s;return n=new Laya.Byte(o.buffer),n}init(){}HttpLoadProcess(t){}httpLoadComplete(t){Yl.instance.analyData=t}dispose(){}set stopSending(t){this._stopSending=t}};Ze._IS_SEND=!1,Ze.ErrorIndex=0,Ze.RepeatTimes=8,Ze.RepeatTimesTimeOut=3,Ze.ErrorTips="",Ze.LoginTime=5e3,Ze.RequestTime=4e3,Ze.MaxSendTimes=5,Ze.reqTimes=0,Ze.timeoutTimes=0,Ze.errorTimes=0;var mo=Ze;function hB(a){throw new Error("Function not implemented.")}var Ri=class extends Laya.Event{constructor(){super()}};Ri.INIT_SUIT_EVENT="HeroEvent:INIT_SUIT_EVENT",Ri.EVENT_FIND_ITEM_CLICK="HeroEvent:EVENT_FIND_ITEM_CLICK",Ri.EVENT_RELEASE_ITEM_CLICK="HeroEvent:EVENT_RELEASE_ITEM_CLICK",Ri.EVENT_FINISH="HeroEvent:EVENT_FINISH",Ri.EVENT_START="HeroEvent:EVENT_START",Ri.EVENT_AGAIN="HeroEvent:EVENT_AGAIN",Ri.EVENT_ENABLE_TIJIAO="HeroEvent:EVENT_ENABLE_TIJIAO",Ri.EVENT_HUMANSTAY="HeroEvent:EVENT_HUMANSTAY",Ri.EVENT_STOPGAME="HeroEvent:EVENT_STOPGAME",Ri.EVENT_RESTORE="HeroEvent:EVENT_RESTORE",Ri.EVENT_CANCEL_RESTORE="HeroEvent:EVENT_CANCEL_RESTORE",Ri.EVENT_COLLISIONENTER="HeroEvent:EVENT_COLLISIONENTER",Ri.EVENT_HERO_DRAW_UPDATE_PRODUCTION="HeroEvent:EVENT_HERO_DRAW_UPDATE_PRODUCTION",Ri.SELECT_UI="HeroEvent:SELECT_UI";var wf=class extends je{constructor(){super()}};var Tf=class extends je{constructor(){super()}};var ft=class a{constructor(){this._inited=!1;this._initUpgrade=!1;this.heroList=[];this.init()}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){this._inited||(this._inited=!0)}initUpgrade(){if(!this._initUpgrade){let t=I.intance;t.m_dicHeroLv||(t.m_dicHeroLv=t.initConfig("hero_lv",["hero_lv","hero_star","race"],Tf)),t.m_dicHeroAttup||(t.m_dicHeroAttup=t.initConfig("hero_attup",["star_lv","race"],wf)),this._initUpgrade=!0}}getHead(t){let e=Math.floor(Math.random()*3)+1;return"common/common_icon/img_"+t+"_"+e+".png"}getNextHero(t){let e=v.instance.m_heroData.heroVoDic.keys.indexOf(t.pk);return v.instance.m_heroData.heroVoDic.keys.length===1?null:e<=v.instance.m_heroData.heroVoDic.keys.length-2?v.instance.m_heroData.heroVoDic.values[e+1]:null}getLastHero(t){let e=v.instance.m_heroData.heroVoDic.keys.indexOf(t.pk);return e>0?v.instance.m_heroData.heroVoDic.values[e-1]:null}setStar(t,e,i=1){let n=parseInt(e);var r=Math.floor(n/6),s=n%6,o=r+s;let l=0,u=i<2?"img_star":"img_star_";for(let x=0;x<r;x++)t[u+(x+1)].skin="gameIcon/hero/heroDetail/img_star_2.png",t[u+(x+1)].visible=!0;for(let x=r;x<s;x++)t[u+(x+1)].skin="gameIcon/hero/heroDetail/img_star_1.png",t[u+(x+1)].visible=!0;for(let x=o;x<5;x++)t[u+(x+1)].visible=!1;let h=(i<2?t.box_star:t[`box_star${i}`]).width,y=46;o==1?t[u+1].x=h/2-l:o==2?(t[u+1].x=h/2-y/2-l,t[u+2].x=h/2+y/2-l):o==3?(t[u+1].x=h/2-l,t[u+2].x=h/2-y-l,t[u+3].x=h/2+y-l):o==4?(t[u+1].x=h/2-y/2-l,t[u+2].x=h/2+y/2-l,t[u+3].x=h/2-y*(1/2+1)-l,t[u+4].x=h/2+y*(1/2+1)-l):(t[u+1].x=h/2-l,t[u+2].x=h/2-y-l,t[u+3].x=h/2+y-l,t[u+4].x=h/2-y*2-l,t[u+5].x=h/2+y*2-l)}setStar2(t,e){let i=parseInt(e);for(let n=1;n<6;n++)n<=i?t["img_star"+n].skin="gameIcon/hero/heroDetail/img_star_1.png":t["img_star"+n].skin="gameIcon/hero/heroDetail/img_star_0.png",t["img_star"+n].visible=!0}getRoundName(t){let e=p.instance.getLanguage(10014,16,8);return t==4?e=p.instance.getLanguage(10014,2,1):t==3?e=p.instance.getLanguage(10014,4,2):t==2&&(e=p.instance.getLanguage(10014,8,4)),e}setHeroVoByHeroDto(t,e){t.id=e.id,t.lv=e.lv,t.pk=e.pk,t.color=e.color,t.state=e.state,t.newFightFlag=e.newFightFlag}};var Cf=class{};var Sf=class{};var Qt=class a{constructor(){this.mail_contract=null}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){typeof window.ethereum>"u"||(this.mail_contract=new window.web3.eth.Contract(oe.BLINDBOX_ABI,oe.BLINDBOX_ADDRESS))}async initData(){this.mailList=new ye,_e.instance.showLoading(!0);let t=await this.mail_contract.methods.getPricesLength().call();for(let e=0;e<t;e++){let i=await this.mail_contract.methods.getPriceByIndex(e).call(),n=new Cf;n.type=1,n.idx=e,Object.assign(n,i),this.mailList.set(n.idx,n),n.showPrice=Rl(n.currentPrice+"")}_e.instance.hideLoading()}async hasFree(){return await this.mail_contract.methods.getIsFreeOpen().call()?!await this.mail_contract.methods.hasFreeHero(K.instance.walletAddress).call():!1}async recruit(t){console.log("成功",66),console.log("失败",66),_e.instance.showLoading(!0);let e=I.intance.m_dicShops.get(t),i=e.cost[0];try{var n;ie.vType==2?n=fs.id:ie.vType==1?n=fs.id:n=Un.id;let u=I.intance.getBuyHeroAddress(n),m=await K.instance.walletClient.getChainId();if(n!==m){var r=await K.instance.switchChain(n);if(!r){this.onEndHeroBuy(),console.log("切换失败，请手动切换");return}m=await K.instance.walletClient.getChainId()}let h=I.intance.getCurrencyAddress(3001);if(!h)return this.onEndHeroBuy(),C.instance.notice(p.instance.getLanguage(1177,m)),!1;if(!u)return this.onEndHeroBuy(),C.instance.notice(p.instance.getLanguage(1174,m)),!1;let y=e.cost[1],x=await K.instance.getBalance2(h),E=Rl(y+"");if(parseFloat(x)<parseFloat(E)){this.onEndHeroBuy(),he.moneyNotEnought(i);return}if(console.log("判断授权 tokenAddress: "+h+", chainIDData:"+n),!await K.instance.newAllowanceAddress(u,h))return console.log("未授权"),this.onEndHeroBuy(),C.instance.notice(p.instance.getLanguage(15)),_e.instance.hideLoading(),!1;console.log("授权成功 开始购买");var s=await K.instance.walletClient.writeContract({account:K.instance.walletAddress,address:u,abi:oe.BUY_HERO_ABI,functionName:"mintByTOX",args:[]});console.log("============"+s);let T=await K.instance.publicClient.waitForTransactionReceipt({hash:s});return console.log(`Tx with hash: ${s}`,T),T&&T.status=="success"?(console.log(`Tx successful with hash: ${s}`),s):(this.onEndHeroBuy(),he.TransactionErrorTip(),!1)}catch(u){this.onEndHeroBuy();var o=u.shortMessage;if(o&&o.indexOf("does not match")!=-1){var l=K.instance.getChainName(n);o=p.instance.getLanguage(1172,l)}if(console.log(o),u instanceof X){let m=u.walk(h=>h instanceof $t);if(m instanceof $t){let h=m.data?.errorName??"";console.log("============errorName: "+h)}}return null}}waitGetHero(){Laya.timer.loop(2e3,this,this.getHero)}async getHero(){var t=await w.requestPost("wxgame/hero/heroBuyChainCheck",{}).catch(e=>{});t&&t.heroList&&t.heroList.length>0&&(Laya.timer.clear(this,this.getHero),this.onNewAddHero(t.heroList))}onNewAddHero(t){Bt.instance.autoPop=!1,v.instance.herosDataUpdataHandler(t),this.onEndHeroBuy()}onAddHero(t){Bt.instance.autoPop=!1,v.instance.herosDataUpdataHandler(t.reward),t.resChange&&v.instance.moneyInfoHander(t.resChange),t.fightHeroPk&&(v.instance.playerDto.fightHeroPk=t.fightHeroPk),this.onEndHeroBuy()}onEndHeroBuy(){_e.instance.hideLoading(),_.intance.event(b.EVENT_END_HEROBUY)}async recruit1(t){let e=I.intance.m_dicShops.get(t),i=e.cost[1],n=await K.instance.getBalance(),r=await w.requestPost("wxgame/hero/heroBuy",{shopId:e.id},!0,!0);r?this.onAddHero(r):this.onEndHeroBuy()}async recruitFree(){_e.instance.showLoading(!0),this.isOpen=await this.mail_contract.methods.getIsOpen().call();let t=await this.hasFree();if(!this.isOpen){_e.instance.hideLoading(),_.intance.event(b.EVENT_HERO_DRAW_BACK,[p.instance.getLanguage(12)]);return}if(!t){_.intance.event(b.EVENT_HERO_DRAW_BACK,[p.instance.getLanguage(17)]);return}await this.mail_contract.methods.recruitFree().send({from:K.instance.walletAddress},(e,i)=>{if(e){_e.instance.hideLoading(),_.intance.event(b.EVENT_HERO_DRAW_BACK,[p.instance.getLanguage(16)]);return}})}async ownerHero(t=!1){let e=await w.requestPost("wxgame/hero/heroList",{},!0,!0);v.instance.m_heroData.initData(e.heroList,t),console.log("HERO LIST")}async ownerBag(){let t=await w.requestPost("wxgame/hero/bagList",{},!0,!0);v.instance.m_packageData.initData(t.data),console.log("BAG LIST")}async heroOutputRate(){if(ft.instance.heroOutputRateDic)return;let t=await w.requestPost("cybertron-sys-api/api/v1/heroes/heroOutputRate",{},!0);ft.instance.heroOutputRateDic=new ye;for(let e of t){let i=new Sf;Object.assign(i,e),ft.instance.heroOutputRateDic.set(i.mineralLevel,i)}console.log("HERO heroOutputRate"),_.intance.event(Ri.EVENT_HERO_DRAW_UPDATE_PRODUCTION)}makeHeroVo(t){let e=new _i;return Object.assign(e,t),e}};var _t=class _t{constructor(){}};_t.DEFAULT_HERO_ID=11000010003,_t.DEFAULT_HERO_COLOR=1,_t.TYPE_Professional=1,_t.TYPE_Training=2,_t.ANI_beiji="beiji",_t.ANI_daiji="daiji",_t.ANI_gongji="gongji",_t.ANI_ti="ti",_t.ANI_hua="hua",_t.ANI_dang="gedang",_t.ANI_dazhao="z_dazhao",_t.ANI_ruchang="ruchang",_t.ANI_siwang="siwang",_t.ANI_xingzou="xingzou",_t.ANI_chongzhuang="z_chongzhuang",_t.ANI_chongzhuang2="z_chongzhuang2",_t.ANI_daodi="z_daodi",_t.ANI_shanbi="z_shanbi",_t.ANIS=[_t.ANI_daiji,_t.ANI_xingzou,_t.ANI_gongji,_t.ANI_ti,_t.ANI_hua,_t.ANI_dang,_t.ANI_beiji,_t.ANI_siwang],_t.TYPE_GONGJI=1,_t.TYPE_TI=2,_t.TYPE_HUA=3,_t.TYPE_DANG=4,_t.TYPE_FEI=5,_t.TYPE_DAZHAO=6,_t.TYPE_HUOJIANDAN=7,_t.SPEED_NORMAL=10,_t.SPEED_QUICK=20;var Di=_t;var Df=class{constructor(){this.heroVoDic=new ye}initData(t,e=!1){(!this.heroVoDic||e)&&(this.heroVoDic=new ye);let i;for(let r=0;r<t.length;r++){i=new _i;var n=t[r];ft.instance.setHeroVoByHeroDto(i,n),this.pushItem(i)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}updateData(t){console.dir("更新英雄："+t),this.updataItemVoByArr(t)}herosDataRemoveHandler(t){console.dir("删除英雄："+t);for(let i=0;i<t.length;i++){var e=t[i];this.removeItemPk(e)}}pushItem(t){this.heroVoDic.set(t.pk,t)}removeItem(t){this.removeItemPk(t.pk)}removeItemPk(t){this.heroVoDic.remove(t+"")}updataItemVoByArr(t,e=!1){let i=[],n=!1,r;for(let s=0;s<t.length;s++){r=t[s];let o=this.heroVoDic.get(r.pk);o==null?(o=new _i,ft.instance.setHeroVoByHeroDto(o,r),o.m_bNew=!0,o.newAddCnt=1,o.newAddCnt>0&&this.pushItem(o)):o.newAddCnt=1,o.isLvUp=e,i.push(o.pk),o.m_iNum<=0&&this.removeItem(o),o.newAddCnt>0&&Bt.instance.needPop&&(Bt.instance.addHeroItem(o),n=!0)}n&&Bt.instance.needPop&&Bt.instance.autoPop&&fa.instance.startShow(),i.length>0&&_.intance.event(b.PACKAGE_UPDATE_ITEM,[i])}getItemById(t){return this.heroVoDic.get(t)}getCount(){return this.heroVoDic.values.length}getCanTransferHero(t){let e=this.heroVoDic.get(t+"");return e&&e.state==0&&e.pk!=v.instance.playerDto.fightHeroPk?e:null}getListByType(t){let e=[],i=t==Di.TYPE_Training?1:0;for(let n=0;n<this.heroVoDic.values.length;n++){let r=this.heroVoDic.values[n];r.newFightFlag==i&&e.push(r)}return e}};var kf=class{constructor(){this.m_redData={system:!1,friend:!1,announce:!1};this.m_dicItemList=new ye,this.m_dicTypeList=new ye}initData(t){this.m_dicItemList=new ye,this.m_dicTypeList=new ye,this.m_redData={system:!1,friend:!1,announce:!1};let e;for(let i=0;i<t.length;i++)switch(e=t[i],this.pushItem(e),e.type){case 1:e.state==0&&(this.m_redData.system=!0);break;case 2:e.state==0&&(this.m_redData.friend=!0);break;case 3:e.state==0&&(this.m_redData.announce=!0);break}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}parseItem(t){if(t.mailId>0){var e=I.intance.m_dicMail.get(t.mailId);t.title=p.instance.getLanguage(e.title),t.content=p.instance.getLanguageMulti(e.text,t.params)}}pushItem(t){this.parseItem(t),this.m_dicItemList.set(t.id,t),this.m_dicTypeList.get(t.type)==null&&this.m_dicTypeList.set(t.type,new ye),this.m_dicTypeList.get(t.type).set(t.id,t)}removeItem(t){this.m_dicItemList.remove(t.id),this.m_dicTypeList.get(t.type).remove(t.id)}getItemById(t){return this.m_dicItemList.get(t)}getListByType(t){let e=[];return this.m_dicTypeList.get(t)&&(e=this.m_dicTypeList.get(t).values.slice()),e}getRedData(){return this.m_redData}};var v=class a{constructor(){this.timeZoneOff=0;this.hearIntervalSceond=10*60;this._timeStamp=0;this._m_strLanguage=1;this.isLanChanged=!1;this.pveOpen=2;this.lastTimestamp=0;this._m_serverTime=0;this.M_S_VersionServer="1.0.0";this.redDotData=[];this.friendNum=0;this.headId=10001;this.countryId=1010;this.colorId=1;this._guildIcon=2006;this.rechargeEnd=!1;this.isFirst=!0;this.needPopError=!0}async initData(){$e.instance.sendCustumEvent(20),await Qt.instance.ownerHero(),await Qt.instance.ownerBag(),$e.instance.sendCustumEvent(21)}get m_serverTime(){let t=Date.now();return this._m_serverTime+(t-this.lastTimestamp)}set m_serverTime(t){this._m_serverTime=t,this.lastTimestamp=Date.now()}get guildIcon(){return this._guildIcon}set guildIcon(t){console.log("guildIcon: "+t),this._guildIcon=t}get m_strLanguage(){return this._m_strLanguage}set m_strLanguage(t){this._m_strLanguage=t}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){this.vipInfo=new vf,this.m_packageData=new xf,this.m_mailData=new kf,this.m_heroData=new Df,this.systemOpenModel=new Lf,this.m_dicCustomerVo=new ye,_.intance.on("msg_27",this,this.commonErrHandler),_.intance.on(b.ON_CONNECT_GAME_SERVER,this,this.onLogin),_.intance.on("msg_"+Ge.snake.socket.MessageType.MSG_USER_LOGIN,this,this.onUserLogin),_.intance.on("msg_11",this,this.vipInfoHandler),_.intance.on("msg_13",this,this.onVipUpgrade),_.intance.on("msg_90",this,this.initSystemOpen),_.intance.on("msg_161",this,this.reciveTurnoverVo),_.intance.on("msg_333",this,this.onInitSceneBg),_.intance.on("msg_350",this,this.onInitStoreDiscount),_.intance.on("msg_388",this,this.onInitTitle),_.intance.on("msg_1002",this,this.onLanChange),wa.instance.register(ut,()=>new ut,5,200)}initSend(){}onLanChange(t){let e=parseInt(t[0]),i=parseInt(t[1]);switch(e){case 1:i==1&&$e.instance.reload();break;case 2:break}}get timeStamp(){return this._timeStamp+(Laya.Browser.now()-this.recordStampTime)/1e3}set timeStamp(t){this.recordStampTime=Laya.Browser.now(),this._timeStamp=t}onReciveBuyTimes(t){a.instance.playerDto.updateRoleBuyTimes(t)}reciveTurnoverVo(t){}onInitSceneBg(t){}onInitTitle(t){}getAdRankById(t){return this.m_adRankDic&&this.m_adRankDic.get(t)?this.m_adRankDic.get(t):""}onGetPvpGrade(t){let e=t[0]}onInitStoreDiscount(t){}reciveBuyCustomerMsg(t){}onInitStyleAndTag(t){let e=t[0];for(let i=0;i<e.length;i++){let n=e[i],r=n[0],s=n[1],o=n[2]}}reciveFriendList(t){}reciveFirstRecharge(t){}hasReceiveFirst(){return this.firstRechargeState.toString()=="3"}recieveOnlineAward(t){}initFriendsGiftHandler(t){}initSystemOpen(t){this.systemOpenModel.initSystemOpen(t[0])}updateSystemOpen(t){let e=t[0];If.instance.addNewOpenFun(e);for(let i=0;i<e.length;i++)this.systemOpenModel.openSystem.set(e[i],!0)}serverTimeUpdateHandler(){let t=this.hearIntervalSceond*1e3;Laya.timer.loop(t,this,this.onHear)}onHear(){}itemsDataUpdataHandler(t,e,i){this.m_packageData.updateData(t,e,i),_.intance.event(b.EVENT_ITEM_UPDATE)}herosDataUpdataHandler(t){this.m_heroData.updateData(t)}onLogin(){var t=K.instance.walletAddress,e=Ge.snake.socket.MessageType.MSG_USER_LOGIN;let i=K.instance.getloginRequestInfo;var n=Ge.snake.socket.CS_USER_LOGIN.fromObject(i);console.log("登录请求信息",n.loginToken),mr.send(e,n)}onUserLogin(t,e){if(e==Ge.snake.socket.MessageCode.USER_NOT_EXIST)console.log("have no regist"),$e.instance.sendCustumEvent(23),O.intance.openModule(L.CreateLoginView);else if(e==Ge.snake.socket.MessageCode.SYS_NORMAL){console.log("have regist");var i=t.roleInfo,n=new Ln;n.pid=i.roleId,n.name=i.userName,n.icon=i.icon,n.exp=i.score,a.instance.playerDto=n,this.isFirst&&(_.intance.event(b.EVENT_ENTER_MAIN),this.isFirst=!1)}}vipInfoHandler(t){this.vipInfo.trecharge=t[1],this.vipInfo.isRewards=t[2],this.vipInfo.daygift=t[3]}onVipUpgrade(t){}getConsumeValue(t){t=parseInt(t.toString());var e=this.playerDto.coins[t];return e>0?e:0}hasEnoughMoney(t,e,i=!0){switch(t=parseInt(t.toString()),e=parseInt(e.toString()),t){default:return this.playerDto.coins[t]<e&&i&&_.intance.event("open_buy",4),this.playerDto.coins[t]>=e}}moneyInfoHander(t,e=!0,i=!0){let n=!1,r=!1,s=0;for(let o of t)r=!1,o[0]==Be.TYPE_EXP?(s=parseInt(o[1]+"")-this.playerDto.exp,this.playerDto.exp=parseInt(o[1]+""),r=s>0):(s=parseFloat(o[1]+"")-this.playerDto.coins[o[0]],this.playerDto.coins[o[0]]=parseFloat(o[1]+""),r=s>0),r&&Bt.instance.needPop&&i&&(n=!0,Bt.instance.addConsumeByServer([o[0],s]));e&&_.intance.event(b.ROLE_INFO_CHANGE),n&&Bt.instance.autoPop&&fa.instance.startShow()}commonErrHandler(t){if(_e.instance.hideLoading(),parseInt(t[0])==2e4){this.needPopError&&(Oe.instance.showErrorWord(parseInt(t[0])),_.intance.event(b.RECIVE_SUCESS_SERVICE));return}else if(parseInt(t[0])==20008){_.intance.event("open_buy",1);return}else if(parseInt(t[0])==20007){_.intance.event("open_buy",2);return}else if(parseInt(t[0])==20015){_.intance.event("open_buy",3);return}else if(parseInt(t[0])==20016){_.intance.event("open_buy",4);return}else if(parseInt(t[0])==10021){mo.ErrorTips=Oe.instance.get(10021),O.intance.openModule(L.ClientErrView);return}else if(parseInt(t[0])==10023){mo.ErrorTips=Oe.instance.get(10023),O.intance.openModule(L.ClientErrView);return}else if(parseInt(t[0])==10019){mo.ErrorTips=Oe.instance.get(10019),O.intance.openModule(L.ClientErrView);return}else if(parseInt(t[0])!=20053){if(parseInt(t[0])==10002){mo.ErrorTips=p.instance.getLanguage(5085),O.intance.openModule(L.ClientErrView);return}}Oe.instance.showErrorWord(parseInt(t[0])),console.log("Server Error Code:"+t[0])}dispose(){}parseNumber(t){let e=[];for(let i=0;i<t.length;i++){let n=t[i];n=this.dividedNumber(n),e.push(n.toString())}return e}dividedNumber(t){return t/1e4}getRedDotById(t){return!!(this.redDotData&&this.redDotData.indexOf(t)>-1)}openWheelDialog(){let t=Laya.Handler.create(this,()=>{ge.intance.setCurrentScene(ae.M_SCENE_DAILY_TASK)});Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1772),W.CANCEL,t)}refreshRedDotShow(){for(let t=0;t<this.redDotData.length;t++)switch(this.redDotData[t]){case 7:case 8:case 9:_.intance.event(b.REFRESH_MAINSCENE_HEAD_RED),_.intance.event(b.REFRESH_ROLEINFO_RED),_.intance.event(b.REFRESH_ACTIVITY_RED);break;case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:_.intance.event(b.REFRESH_ACTIVITY_RED);break;case 23:_.intance.event(b.REFRESH_MAIL_RED);break;case 26:_.intance.event(b.REFRESH_WHEEL_RED);break}}};var Wa=class{constructor(){}};Wa.Lan_en=1,Wa.Lan_zh=6,Wa.Lan_tr=7;var p=class a{constructor(){this._lanTypesById=new ye,this._lanTypesByType=new ye,this._configData=new ye,this._configData1=new ye}static get instance(){return a._instance||(a._instance=new a),a._instance}initLanTypes(t){this._lanTypesById=new ye,this._lanTypesByType=new ye;for(let e in t){let i=new pc;if(i.init(t[e]),parseInt(i.if_open)!=1)continue;let n=i.id,r=i.type;this._lanTypesById.set(n,i),r&&r!=""&&this._lanTypesByType.set(r,i)}}getLanTypes(){return this._lanTypesById}getLanIdByType(t){if(this._lanTypesByType){let e=this._lanTypesByType.get(t);if(e)return parseInt(e.id.toString())}return 1}getLanTypeById(t){if(this._lanTypesById){let e=this._lanTypesById.get(t);if(e)return e.type}return"en"}initConfigLan(t){this._configData=t}initConfigLan1(t){this._configData1=t}initUILan(t){Laya.Text.langPacks={};let e;for(e in t){let i=t[e].value;Laya.Text.langPacks[e]=i}}changeBrToN(t){let e=/<br>/g;for(;t.indexOf("<br>")!=-1;)t=t.replace(e,`
`);return t}replacePlaceholder(t,e){if(t=="")return"";let i=/{(\d+)}/g;return e.length>0&&(t=t.replace(i,function(){return e[arguments[1]]})),this.replaceLanByBR(t)}replaceLanByBR(t){return t+""}getEnglishLanguage(t,...e){return this.getEnglishLanguageReplace(t,e)}getEnglishLanguageReplace(t,e){if(this._configData1&&this._configData1[t]){let i=this._configData1[t].value;if(i&&i!="")return this.replacePlaceholder(i,e)}return this.replacePlaceholder(t+"",e)}getLanguage(t,...e){return this.getLanguageReplace(t,e)}getLanguageReplace(t,e){if(this._configData&&this._configData[t]){let i=this._configData[t].value;if(i&&i!="")return this.replacePlaceholder(i,e)}return this.replacePlaceholder(t+"",e)}getLanguageMulti(t,e){if(console.log("getLanguageMulti",e),this._configData&&this._configData[t]){let i=this._configData[t].value;if(i&&i!="")return this.replacePlaceholderMulti(i,e)}return this.replacePlaceholder(t+"",e)}replacePlaceholderMulti(t,e){if(t=="")return"";let i=/{(\d+)}/g;return e.length>0&&(t=t.replace(i,function(){var n=e[arguments[1]];if(typeof n=="object")n=JSON.parse(n),n=a.instance.parseObj(n);else if(typeof n=="string")try{n=JSON.parse(n),typeof n=="object"&&(n=a.instance.parseObj(n))}catch{}return n})),this.replaceLanByBR(t)}parseObj(t){if(t.hasOwnProperty("tableType")){if(t.tableType==1){var e=I.intance.m_dicItems.get(t.id);e&&(t=a.instance.getLanguage(e.name))}else if(t.tableType==2){var i=I.intance.m_dicArenaDic.get(t.id);i&&(t=a.instance.getLanguage(i.name))}}else t=a.instance.getMultiLan(t);return t}getUILang(t,e=null,i=null,n=null,r=null){if(t=Laya.Text.langPacks&&Laya.Text.langPacks[t]?Laya.Text.langPacks[t]:t,arguments.length>1)for(let s=0,o=arguments.length;s<o;s++)t=t.replace("{"+s+"}",arguments[s+1]);return t}getMultiLan(t){var e=parseInt(v.instance.m_strLanguage.toString()),i;return t&&(i=t[e],i||(i=t[Wa.Lan_en])),i}FGM_GetLanguage(){let t=function(i){console.log("initGame->-----------------------------FGM_GetLanguage:=="+i),i&&(i=i.substring(0,2),ie.User_Lan=i)},e=Laya.LocalStorage.getItem(ie.COOKIE_CF_LAN);!e||e==""?t(this.language):t(e)}get language(){return"en"}FGM_SetLanguage(t){t&&t!=""&&Laya.LocalStorage.setItem(ie.COOKIE_CF_LAN,t)}dispose(){}};var Af=class a{constructor(){if(a._instance)throw new Error("LayerManager是单例,不可new.");a._instance=this}static get intance(){return a._instance||(a._instance=new a),a._instance}init(){for(let t in Ge.snake.socket.MessageType)if(isNaN(Number(t))){let e=Ge.snake.socket.MessageType[t],i=e===106?"CS_":e===110?"SS_":"SC_",n=t.substring(4),r=i+n,s=Ge.snake.socket[r];s?Laya.ClassUtils.regClass(e+"",s):console.warn(`未找到 ${r} 对应的处理类，消息码：${e}`)}}};var Mf=class a{constructor(){this.m_sprMap=new Laya.Sprite;this.m_Image=new Laya.Image}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){}showLoading(t=!1){if(this.loadingMc)this.m_sprMap.size(Laya.stage.width,Laya.stage.height),ie.m_bIsIphoneX&&(this.m_Image.scaleX=ie.IPHONEX_SCARE,this.m_Image.scaleY=ie.IPHONEX_SCARE),this.m_Image.x=(this.m_sprMap.width-this.m_Image.width*this.m_Image.scaleX)/2,this.m_Image.y=(this.m_sprMap.height-this.m_Image.height*this.m_Image.scaleY)/2,this.m_sprMap.x=(A.instence.m_iStageWidth-this.m_sprMap.width*this.m_sprMap.scaleX)/2,this.m_sprMap.y=(A.instence.m_iStageHeight-this.m_sprMap.height*this.m_sprMap.scaleY)/2,this.m_sprMap.visible=!0,Laya.timer.clear(this,this.showLazyBg),t?(this.m_Image.alpha=1,this.showLazyBg()):(this.m_Image.alpha=0,this.m_sprMap&&(this.m_sprMap.graphics.clear(),this.m_sprMap.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000")),Laya.timer.once(300,this,this.showLazyBg));else return}showLazyBg(){this.m_sprMap&&(this.m_sprMap.graphics.clear(),this.m_Image.alpha=1),this.loadingMc&&(this.loadingMc.x=Laya.stage.width/2,this.loadingMc.y=Laya.stage.height/2,this.loadingMc.play(),this.loadingMc.visible=!0)}hideLoading(){if(this.loadingMc)this.hideLoadingSHow();else return}hideLoadingSHow(){Laya.timer.clear(this,this.showLazyBg),this.loadingMc.stop(),this.loadingMc.visible=!1,this.m_sprMap.visible=!1}get isShow(){return this.loadingMc&&this.loadingMc.visible}dispose(){this.m_sprMap&&this.m_sprMap.graphics.clear(),Laya.timer.clear(this,this.showLazyBg),this.loadingMc&&(this.loadingMc.destroy(),this.loadingMc.removeSelf(),this.loadingMc=null)}};var{regClass:dB}=Laya,$l=class extends mp{constructor(){super(...arguments);this.isLogout=!1;this.dotNum=0;this.m_nProgress=0;this.rotateSpeed=500;this.speedRate=1;this.speed=6;this.time=0;this.dir=ut.create(0,0);this.aimDir=ut.create(0,0);this.bones=[ut.create(0,0)]}onAwake(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),Laya.loader.load(["res/common/comm_bg/img_loading1_bg.jpg","res/loading/progress_load1.png","res/loading/progress_load1$bar.png"]).then(()=>{this.createUI(),this.init()})}onError(e){console.log("加载失败: "+e)}createUI(){this.m_nSendTime=Laya.timer.currTimer,ct.instance.init(),ct.instance.playMusicByName(ct.soundName_bg,".mp3"),_.intance.on(b.EVENT_BACK_TO_LOGIN,this,this.backToLogin),_.intance.on(b.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),_.intance.on(b.EVENT_ENTER_MAIN,this,this.loginCallBack),this.initLoad(),p.instance.FGM_GetLanguage();let e=ie.User_Lan;var i=getGameVersion();this.txtLoad.text=i,console.log("VERSION: "+i);let n=new $n;n.ID=1,n.Event="加载版本信息 "+i,$e.instance.sendCustumEvent(1,null,n),Fn.Initialize(Laya.stage,!0)}initLoad(){this.onAssetLoaded()}onAssetLoaded(){this.loadingProcess=0,this.m_nProgress=0,Laya.timer.loop(1800,this,this.onLoading,[this.m_nProgress])}set loadingProcess(e){e>1&&(e=1),this.mcProcess.value=e,this.txtProcess.text=Math.floor(e*100)+"%";var i=e*this.mcProcess.width-70;i<0&&(i=0),this.img_guang.x=i}init(){Af.intance.init(),A.instence.init(),ge.intance.init(),Mf.instance.init(),O.intance.init(),v.instance.init();let e=new $n;e.ID=3,e.Event="加载资源信息",$e.instance.sendCustumEvent(3,null,e),M.instance.init(),ce.initParms()}backToLogin(){Laya.timer.clear(this,this.onLoading),this.m_nProgress=0,Laya.loader.load(M.instance.m_arrInitResource,Laya.Handler.create(this,this.getLoginData),Laya.Handler.create(this,this.onLoading2,null,!1))}getLoginData(){$e.instance.sendCustumEvent(7),this.readyInitGame()}readyInitGame(){if(this.isLogout){_.intance.event(b.EVENT_LOADING_SUC);return}this.mcProcess&&(this.loadingProcess=.8+.2),I.intance.init(),ie.isWhite?this.loginGame():this.onGetNotice()}async onGetNotice(){Laya.loader.maxLoader=50;var e=!1;e?w.requestPost("wxgame/sys/notice",{type:1},!1,!1).then(i=>{var n=i;if(n.list&&n.list.length>0){O.intance.openModule(L.NoticeDialog,[1,n]);return}this.loginGame()}).catch(i=>{O.intance.openModule(L.NoServerView)}):this.loginGame()}async loginGame(){_.intance.event(b.EVENT_LOADED_COMPLETE),await K.instance.init(),await K.instance.dappLogin()}async loginGameEnd(e){_e.instance.showLoading(!0),$e.instance.sendCustumEvent(8),console.log("PreLoadingView.joinGame()");let i=Laya.timer.currTimer-this.m_nSendTime;if($e.instance.sendCustumEvent(22),!e){O.intance.openModule(L.NoServerView);return}e.loginState==1?(console.log("have no regist"),$e.instance.sendCustumEvent(23),O.intance.openModule(L.CreateLoginView)):($e.instance.sendCustumEvent(30),e.playerDto?($e.instance.sendCustumEvent(31),console.log("registed "+e.playerDto.name),v.instance.playerDto=e.playerDto,this.loginCallBack()):($e.instance.sendCustumEvent(32),console.log("getRegisted error"),C.instance.notice(p.instance.getLanguage(135))))}async loginCallBack(){console.log("loginCallBack++++++++++++++++++++++++++++++++"),ie.vType==2&&ie.Debug==0&&(Laya.Browser.window.console.log=function(){}),v.instance.initData(),_e.instance.hideLoading();var e=v.instance.playerDto;if(e.roomId>0){let i=await w.requestPost("wxgame/room/info",{roomId:e.roomId});B.instance.roomDto=i.roomDto,i.roomDto?e.roomState==10?gt.instance.initSocket():O.intance.openModule(L.EnterRoomView):C.instance.notice(p.instance.getLanguage(135))}else he.logs("进入主界面",5),$e.instance.sendCustumEvent(33),ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}onLoading(e){this.m_nProgress+=.01,this.mcProcess&&e>this.mcProcess.value&&(this.loadingProcess=e*.4)}onLoading2(e){this.mcProcess&&(this.loadingProcess=0+e*1.1)}removeEvent(){_.intance.off(b.EVENT_BACK_TO_LOGIN,this,this.backToLogin),_.intance.off(b.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),_.intance.off(b.EVENT_ENTER_MAIN,this,this.loginCallBack)}initMove(){var e=726,i=973;console.log("TEST==== 蛇头坐标：",e,i),this.speedRate=1,console.log("TEST==== 加速倍数 speedRate：",this.speedRate),console.log("TEST==== 速度参数 speed：",this.speed,"rotateSpeed：",this.rotateSpeed,"defaultMoveInterval：",we.snack.defaultMoveInterval),this.bones=[ut.create(e,i)];var n=17;this.dir=Ct.getAngleToVec(n),this.dir.normalize(),console.log("TEST==== 当前方向：",n,"向量：",this.dir.x,this.dir.y),this.toAimDir(17),this.toAimDir(230)}toAimDir(e){this.time=0,this.aimDir=Ct.getAngleToVec(e),this.aimDir.normalize(),console.log("TEST==== 目标方向：",e,"向量：",this.aimDir.x,this.aimDir.y);for(var i=0;i<110;i++)this.move(null)}move(e){this.time++;for(let i=0;i<this.speedRate;i++){if(this.dir.equal(this.aimDir)||Math.abs(Math.acos(this.dir.dot(this.aimDir))*180/Math.PI)<this.rotateSpeed*we.snack.defaultMoveInterval)this.dir=this.aimDir,console.log("move:============  当前直接设目标方向");else{let n=this.dir.getRotation(),s=(this.aimDir.getRotation()-n+360)%360;s>180&&(s-=360);let o=this.rotateSpeed*we.snack.defaultMoveInterval,l=Math.abs(s)<o?s:o*(s>0?1:-1);this.dir.rotate(l),console.log("第"+this.time+"次"," ============  rotateAngle："+l)}this.bones[0].assign(this.bones[0].add(this.dir.mul(this.speed))),console.log("TEST==== 移动蛇头坐标：","第"+this.time+"次",this.bones[0].x,this.bones[0].y)}}};$l.m_iState=1,$l=d([dB("xmaaYG8AQ1yC07pr_JvyPA")],$l);var{regClass:fB,property:dfe}=Laya,Cu=class extends Laya.Script{constructor(){super()}onEnable(){Laya.timer.frameLoop(1,this,this.onRunRoll),this.onScaleEnd1()}onRunRoll(){this.owner.rotation++}onScaleEnd1(){Laya.Tween.to(this.owner,{scaleX:1.1,scaleY:1.1,alpha:.8},500,null,Laya.Handler.create(this,this.onScaleEnd2))}onScaleEnd2(){Laya.Tween.to(this.owner,{scaleX:.8,scaleY:.8,alpha:.5},500,null,Laya.Handler.create(this,this.onScaleEnd1))}onDisable(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}};Cu=d([fB("w5pr4pHJTMOM3bYxCyc4Ag")],Cu);var Xl=class Xl extends Laya.ColorFilter{constructor(t=null){super(t)}static addClickFilter(t){let e=t.filters||[];e.push(Xl.clickFilter),t.filters=e}static clearClickFilter(t){let e=t.filters;if(e!=null&&e.length>0){for(let i=e.length-1;i>-1;i--)e[i]instanceof Xl&&e.splice(i,1);t.filters=e}}};Xl.clickFilter=new Xl([1,0,0,0,-34,0,1,0,0,-34,0,0,1,0,-34,0,0,0,1,0]);var Vn=Xl;var{regClass:yB,property:bB}=Laya,Ql=class extends Laya.Script{constructor(){super();this.noSound=!1}onEnable(){let e=this.owner.scaleX;this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onUp)}onDown(){this.noSound||ct.instance.playSoundByName(ct.soundName_hit),Vn.addClickFilter(this.owner)}onUp(){Vn.clearClickFilter(this.owner)}onDisable(){Vn.clearClickFilter(this.owner),this.owner.off(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onUp)}};d([bB({type:"boolean"})],Ql.prototype,"noSound",2),Ql=d([yB("cL1AmqOiTHmtQWKayPNcTA")],Ql);var{regClass:gB,property:pk}=Laya,ho=class extends Laya.Script{onEnable(){v.instance.m_strLanguage==Wa.Lan_zh?this.chSkin&&(this.owner.skin=this.chSkin.url):v.instance.m_strLanguage==Wa.Lan_tr&&this.trSkin&&(this.owner.skin=this.trSkin.url)}};d([pk({type:Laya.Texture})],ho.prototype,"chSkin",2),d([pk({type:Laya.Texture})],ho.prototype,"trSkin",2),ho=d([gB("SPRGcvdcQR2PHb7I7j7sXg")],ho);var At=class At{constructor(){this.ROOM_1=1;this.ROOM_2=2;this.ROOM_3=3;this.ROOM_1_1=1;this.ROOM_1_2=2;this.ROOM_1_3=3;this.ROOM_2_1=201;this.ROOM_2_2=202;this.ROOM_2_3=203;this.ROOM_3_1=301;this.ROOM_3_2=302;this.ROOM_3_3=303;this.ROOM_4_6=406;this.ROOM_5_4=504;this.ROOM_5_4_SELF=5041}static get instance(){return At._instance==null&&(At._instance=new At),At._instance}};At._instance=null,At.ROOM_PRE_CONTRACT=401,At.ROOM_PRE_CONTRACT_SELF=402,At.ROOM_FRIEND_APPLY=4,At.ROOM_MAIL=5,At.RED_GUILD_APPLY=6,At.RED_SHIELDS=7,At.RED_ACTIVITY1=8,At.RED_ACTIVITY2=9,At.RED_ACTIVITY3=10,At.RED_EVERY_RANK_TOTAL=11,At.RED_EVERY_RANK_PRE=12,At.RED_EVERY_RANK_AIR=13,At.RED_EVERY_RANK_TRA=14,At.PRO_RANK_DAY_FIGHT_1=15,At.PRO_RANK_DAY_FIGHT_2=16,At.PRO_RANK_DAY_FIGHT_3=17,At.PRO_RANK_DAY_FIGHT_4=18,At.REM_RANK=28,At.LAST_DRAW=29,At.MAIL_ANNOUNCE_RED=23,At.ROOM_OFFER_CARD=24,At.RED_IGO=25,At.RED_WHEEL=26,At.RED_RENTAL=27;var Ae=At;var Pe=class a{static toFixed(t,e){if(t.toString().indexOf(".")==-1)return t;{let i=t.toFixed(e);return parseFloat(i)}}static toFixedWithPercent(t,e,i="+"){let n;return t.toString().indexOf(".")==-1?n=i+t*100+"%":(e=e-2,e<0&&(e=0),n=i+(t*100).toFixed(e)+"%"),n}static getGoldStr(t){let e;return t>999999?e=parseInt(String(t/1e5))+"m":e=t,e}static numStringFormat(t){let e=t;return v.instance.m_strLanguage==2?t.length>4&&(e=String(t).replace(/(\d)(?=(\d{3})+$)/g,"$1 ")):e=String(t).replace(/(\d)(?=(\d{3})+$)/g,"$1,"),e}static numSimple(t){let e=t,i=parseInt(parseInt(e)/1e3+"");return i>0?i+"k":a.numStringFormat(e)}static numStringFormat2(t){let e;if(t>999999)e=a.getNumStr(t,1e6,"M");else if(t>999)e=a.getNumStr(t,1e3,"K");else return t+"";return e}static getNumStr(t,e,i){return parseInt(Math.floor(t/e)+"")+i}static getTimeStr(t){let e;return t<3600?e=p.instance.getLanguage(9024,Math.ceil(t/60)):t<3600*24?e=p.instance.getLanguage(9025,Math.ceil(t/3600)):e=p.instance.getLanguage(9025,Math.ceil(t/(3600*24))),e}static BigInt(t){return 0}static isInteger(t){return t%1===0}static isNumber(t){return typeof t=="number"}static formatNumber(t,e=8){return Number.isInteger(t)?t:parseFloat(t.toFixed(e))}static formatNumberStr(t,e=2){return Number.isInteger(t)?t:parseFloat(t.toFixed(e)).toString()}static filterNumFormat(t,e=2,i=!1,n=!1){if(!t)return t;if(t<1e3&&t>0)if(n){var r=Math.floor(Number(parseFloat(t*10**e+"").toPrecision(16)))/10**e;return parseFloat(r.toFixed(e)).toString()}else return parseFloat(t.toFixed(e)).toString();if(t==="0.00")return t;var s=[{value:1,symbol:""},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}];i&&(s=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}]);var o=/\.0+$|(\.[0-9]*[1-9])0+$/,l;for(l=s.length-1;l>0&&!(t>=s[l].value);l--);let u=(t/s[l].value).toString();return u.indexOf(".")>-1&&(e>0?u=u.substr(0,u.indexOf(".")+e+1):u=u.substr(0,u.indexOf(".")+e)),u.replace(o,"$1")+s[l].symbol}static fromWei(t,e,i=0){if(!t)return 0;let n=t.length-e+i;if(n<=0)return 0;let r=t.toString().slice(0,n);if(i){let s=r.length-i;if(s<=0){let o="0.";for(let l=0;l<Math.abs(s);l++)o+="0";r=o+r}else r=r.slice(0,r.length-i)+"."+r.slice(r.length-i)}return r}static getNumberSuffix(t){let e=parseInt(t,10);return isNaN(e)?t:(e%1e9).toString()}};var Bf=class extends Laya.Scene{};var{regClass:_B}=Laya,Su=class extends Bf{constructor(){super(...arguments);this.currTab=0;this.arenaLv=1001;this.coinTypes=[];this.arenaType=1;this.nodeIds=[];this.selectArenaType=1;this.coinDatas=[];this.nodeDatas=[]}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}async onOpened(e){this.mouseThrough=this.mouseThrough=!0,this.updateTopInfo(),this.initNodeCombo(),this.initCoinCombo(),this.initArenaTypes(),this.onClickTab(this.selectArenaType);var i=Laya.stage.width-ie.DESIGN_WIDTH>>1;this.leftX=this.leftMenu.x,this.leftMenu.x=this.leftX-i-this.leftMenu.width,Laya.Tween.to(this.leftMenu,{x:this.leftX-i},500),I.intance.testNodes()}updateTopInfo(){if(this.arenaType=q.instance.arenaType,this.arenaType==ee.ARENA_TYPE_TEAM){this.btn_1.visible=this.btn_2.visible=this.btn_3.visible=!1,this.btn_4.x=this.btn_1.x;var e=this.btn_4.getChildByName("Label");e.text=p.instance.getLanguage(1769)}var i=I.intance.m_dicArenaTypes.get(this.arenaType);this.tf_name.text=p.instance.getLanguage(i.name),this.updateLocalAssets()}updateLocalAssets(){this.tf_3005.text=Pe.filterNumFormat(v.instance.getConsumeValue(Be.TYPE_GOLD),0)}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.btn_myBookings.on(Laya.Event.CLICK,this,this.onShowMyBooking);for(let e=1;e<5;e++)this["btn_"+e].on(Laya.Event.CLICK,this,this.onClickTab,[e]);this.list_room.vScrollBarSkin="",this.list_room.array=[],Laya.timer.loop(1e3,this,this.refreshRoomTime),this.btn_create.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_create]),_.intance.on(b.ROLE_INFO_CHANGE,this,this.updateTopInfo),_.intance.on(Mi.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),_.intance.on(b.EVENT_CHECK_ICON_SELECT,this,this.onCoinSelected),_.intance.on(b.EVENT_CHECK_NODE_SELECT,this,this.onNodeSelected),_.intance.on(b.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom)}onShowMyBooking(){O.intance.openModule(L.MyBookingView)}async onJoin(){let e=this.input_bookingUrl.text;if(e==""){C.instance.notice(p.instance.getUILang("Please input booking URL"));return}let i=We.instance.onGetBookingId(e),n=i[0];if(n){let r=i[1],s=parseInt(n),o=parseInt(r);We.instance.goBookingCreateRoomDialog(s,o)}else C.instance.notice(p.instance.getLanguage(1564))}setTab(e){for(let i=1;i<5;i++)e==i?(this["btn_"+i].getChildByName("btn_yellowBg").visible=!0,this["btn_"+i].getChildByName("Label").color="#143268"):(this["btn_"+i].getChildByName("btn_yellowBg").visible=!1,this["btn_"+i].getChildByName("Label").color="#ffffff")}onClickTab(e){if(this.currTab!=e){if(this.list_room.visible=!1,this.list_room4.visible=!1,this.currTab=e,this.showCoinCombo(),this.setTab(e),e==1){this.arenaLv=1;var i=this.getRoomByType()}else if(e==2){this.arenaLv=2;var i=this.getRoomByType()}else if(e==3){this.arenaLv=3;var i=this.getRoomByType()}else if(e==4)var i=this.getRoomByType()}}async getRoomByType(){if(Laya.timer.clear(this,this.getRoomByType),this.currTab==4){this.arenaType=q.instance.arenaType;let e=await w.requestPost("wxgame/roomPreContract/list",{lv:0,coinTypeList:this.coinTypes,arenaType:this.arenaType,nodeIds:this.nodeIds});if(this.destroyed)return;this.currTab==4&&(this.list_room4.array=e.list,this.list_room4.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0,this.list_room4.visible=!0)}else{this.arenaType=q.instance.arenaType;let e=await w.requestPost("wxgame/room/list",{lv:this.arenaLv,coinTypeList:this.coinTypes,arenaType:this.arenaType,nodeIds:this.nodeIds});if(this.destroyed)return;this.currTab!=4&&(this.list_room.array=e.roomList,this.list_room.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0,this.list_room.visible=!0)}Laya.timer.once(3e3,this,this.getRoomByType)}refreshRoomTime(){this.refreshRoomBtnRed();let e=this.list_room.array;if(!(e.length<1)){for(let i=0;i<e.length;i++)if(e[i]){let n=e[i];n.state==0?n.joinCd-=1e3:n.fightEndTime-=1e3}this.list_room.refresh()}}initArenaTypes(){var e=I.intance.m_dicArenaTypes.get(q.instance.arenaType),i=e.tabLvs,n=[1,2,3,4],r=-1;n.forEach(s=>{var o=this["btn_"+s],l=o.getChildByName("img_lock"),u=o.getChildByName("img_red");i.indexOf(s)!=-1?(o.disabled=!1,l.visible=!1,r==-1&&(r=s)):(o.disabled=!0,l.visible=!0)}),r!=-1&&(this.selectArenaType=r)}showCoinCombo(){q.instance.arenaType==3?this.list_coin.visible=!1:this.list_coin.visible=!0}initCoinCombo(){this.showCoinCombo();var e=I.intance.m_dicArenaTypes.get(q.instance.arenaType);this.coinTypes=[];var i=e.coinTypes;this.coinDatas=[],i.forEach(n=>{this.coinTypes.push(n);var r=I.intance.m_dicItems.get(n);this.coinDatas.push([n,!0,p.instance.getLanguage(r.name)])}),this.list_coin.array=this.coinDatas}onCoinSelected(){this.coinTypes=[],this.coinDatas.forEach(e=>{e[1]&&this.coinTypes.push(e[0])}),console.log("您选中了 coinType"+this.coinTypes),this.getRoomByType()}initNodeCombo(){this.nodeIds=[];var e=I.intance.m_dicNodes.values;this.nodeDatas=[],e.forEach(i=>{this.nodeIds.push(i.id),this.nodeDatas.push([i.id,!0,i])}),this.list_node.array=this.nodeDatas}onNodeSelected(){this.nodeIds=[],this.nodeDatas.forEach(e=>{e[1]&&this.nodeIds.push(e[0])}),console.log("您选中了 nodeType"+this.nodeIds),this.getRoomByType()}refreshRoomBtnRed(){var e=q.instance.arenaType;this.img_red_1.visible=v.instance.getRedDotById(Ae.instance.ROOM_1_1),this.img_red_1.visible=v.instance.getRedDotById(Ae.instance["ROOM_"+e+"_1"]),this.img_red_2.visible=v.instance.getRedDotById(Ae.instance["ROOM_"+e+"_2"]),this.img_red_3.visible=v.instance.getRedDotById(Ae.instance["ROOM_"+e+"_3"]),e==ee.ARENA_TYPE_TEAM?(this.img_red_4.visible=v.instance.getRedDotById(Ae.instance.ROOM_5_4),this.img_red_myBooking.visible=v.instance.getRedDotById(Ae.instance.ROOM_5_4_SELF)):(this.img_red_4.visible=v.instance.getRedDotById(Ae.ROOM_PRE_CONTRACT),this.img_red_myBooking.visible=v.instance.getRedDotById(Ae.ROOM_PRE_CONTRACT_SELF))}async onclickBtnHandler(e){switch(e){case this.btn_create:this.currTab==4?O.intance.openModule(L.CreateRoomDialog,[ee.ACTION_CREATE_BOOKING,!0,!0,0]):O.intance.openModule(L.CreateRoomDialog,[ee.ACTION_CREATE,!0,!1,this.arenaLv]);break;default:C.instance.notice(p.instance.getLanguage(12));break}}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}onDisable(){_.intance.off(b.ROLE_INFO_CHANGE,this,this.updateTopInfo),_.intance.off(Mi.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),_.intance.off(b.EVENT_CHECK_ICON_SELECT,this,this.onCoinSelected),_.intance.off(b.EVENT_CHECK_NODE_SELECT,this,this.onNodeSelected),_.intance.off(b.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}onEnterMatchRoom(e){e?Laya.timer.once(3e3,this,this.getRoomByType):Laya.timer.clear(this,this.getRoomByType)}};Su.M_B_FIRST_Open=!0,Su=d([_B("Kvjumjs4Q--HdgEZ8LzawA")],Su);var Rf=class extends Laya.Dialog{};var{regClass:LB}=Laya,Pf=class extends Rf{constructor(){super();this.destroyDoCancel=!1;this.canClose=!0}onEnable(){this.on(Laya.Event.CLICK,this,this.onClickEvent)}onClickEvent(e){let i=e.target;i.name=="okBtn"?(this._okHandler&&this._okHandler.runWith(null),this.close()):i.name=="cancleBtn"&&(this.destroyDoCancel=!1,this._cancelHandler&&this._cancelHandler.runWith(null),this.close())}setOpenData(e){if(e){if(this._okHandler=e.okHandler,this._cancelHandler=e.cancelHandler,this.destroyDoCancel=e.destroyDoCancel,e.flag<0?(this.cancleBtn.visible=!1,this.okBtn.visible=!1,this.canClose=!1):e.flag&W.YES&&!(e.flag&W.NO)?(this.okBtn.x=this.width-this.okBtn.width>>1,this.cancleBtn.visible=!1,this.okBtn.label="Sure"):e.flag&W.NO&&!(e.flag&W.YES)?this.okBtn.visible=!1:e.flag&W.YES&&e.flag&W.NO,e.data){var i=e.data,n=I.intance.m_dicGroupWar.get(i.groupId);if(n){var r=p.instance.getMultiLan(i.applicant.shortUnionName);r||(r="N/A"),this.tf_inviteTitle.text=p.instance.getLanguage(1654,i.applicant.name,r);var s=I.intance.m_dicArenaDic.get(i.arenaId);this.tf_arenaName.text=p.instance.getLanguage(s.name);var o=s.coinType,l=I.intance.m_dicItems.get(o),u=p.instance.getLanguage(l.name);this.tf_token.text=u,this.tf_groupName.text=p.instance.getLanguage(n.name),this.tf_startTime.text=fe.formatTimeStamp(i.startTime,"MT-DD HH:MM")}}e.initHandler&&e.initHandler.runWith(this)}}onDisable(){this.destroyDoCancel&&this._cancelHandler&&this._cancelHandler.run(),this._okHandler=null,this._cancelHandler=null}close(e){e!="side"&&this.canClose&&super.close(e)}};Pf=d([LB("TkYqV_cDTf6zOkSNHZa8ng")],Pf);var Nf=class extends Laya.Box{};var{regClass:vB}=Laya,Of=class extends Nf{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.check_coin.on(Laya.Event.CLICK,this,this.onCheck),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!e)return;this.addEvent();let i=e;this.check_coin.selected=i[1];var n=i[2];this.img_node.skin=M.instance.getNodeIcon(n.area)}onCheck(){this._dataSource[1]=this.check_coin.selected,_.intance.event(b.EVENT_CHECK_NODE_SELECT)}};Of=d([vB("81z6wk15RUi5m_pFud3KHg")],Of);var Hf=class extends Laya.Box{};var{regClass:xB}=Laya,Uf=class extends Hf{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!e)return;this.addEvent();let i=e;this.tf_coin.text=p.instance.getLanguage(i[3])}onChange(e){e?this.check_coin.selected=!0:this.check_coin.selected=!1}};Uf=d([xB("zVQ6gbw9T-e9xifHx-wXrg")],Uf);var Ff=class extends Laya.Dialog{};var{regClass:IB}=Laya,Vf=class extends Ff{constructor(){super();this.destroyDoCancel=!1;this.canClose=!0}onEnable(){this.on(Laya.Event.CLICK,this,this.onClickEvent)}onClickEvent(e){let i=e.target;i.name=="okBtn"?(this._okHandler&&this._okHandler.runWith(null),this.close()):i.name=="cancleBtn"&&(this.destroyDoCancel=!1,this._cancelHandler&&this._cancelHandler.runWith(null),this.close())}setOpenData(e){if(e){if(this._okHandler=e.okHandler,this._cancelHandler=e.cancelHandler,this.destroyDoCancel=e.destroyDoCancel,e.flag<0?(this.cancleBtn.visible=!1,this.okBtn.visible=!1,this.canClose=!1):e.flag&W.YES&&!(e.flag&W.NO)?(this.okBtn.x=this.width-this.okBtn.width>>1,this.cancleBtn.visible=!1,this.okBtn.label="Sure"):e.flag&W.NO&&!(e.flag&W.YES)?this.okBtn.visible=!1:e.flag&W.YES&&e.flag&W.NO,e.data){var i=e.data,n=I.intance.m_dicGroupWar.get(i.groupId);if(n){this.tf_inviteTitle.text=p.instance.getLanguage(1628,i.friendName,n.groupPer);var r=I.intance.m_dicArenaDic.get(i.arenaId);this.tf_arenaName.text=p.instance.getLanguage(r.name);var s=r.coinType,o=I.intance.m_dicItems.get(s),l=p.instance.getLanguage(o.name);this.tf_token.text=l,this.tf_groupName.text=p.instance.getLanguage(n.name),this.tf_startTime.text=fe.formatTimeStamp(i.startTime,"MT-DD HH:MM")}}e.initHandler&&e.initHandler.runWith(this)}}onDisable(){this.destroyDoCancel&&this._cancelHandler&&this._cancelHandler.run(),this._okHandler=null,this._cancelHandler=null}close(e){e!="side"&&this.canClose&&super.close(e)}};Vf=d([IB("8_1WgbqTTIqRSqG5gME9Rg")],Vf);var Gf=class extends Laya.Dialog{};var{regClass:EB}=Laya,Wf=class extends Gf{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack)}onOpened(e){this.initLuckDrawView()}async initLuckDrawView(){this.list_room4.visible=!1;var e=q.instance.arenaType;let i=await w.requestPost("wxgame/roomPreContract/selfList",{arenaType:e});this.list_room4.array=i.list,this.list_room4.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0,this.list_room4.visible=!0}onBack(){this.close()}onDisable(){this.removeEvent()}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}};Wf=d([EB("n7Y3cABUSqauk_SyBPv2qg")],Wf);var jf=class extends Laya.Dialog{};var{regClass:wB}=Laya,zf=class extends jf{constructor(){super();this.friendData=null}onEnable(){}setOpenData(e){this.roomId=e[0],this.teamId=e[1],this.onGetList()}async onGetList(){let e=await w.requestPost("wxgame/friend/friendList",{});e&&e.list&&(v.instance.friendNum=e.list.length,this.list_friend.array=e.list,this.list_friend.visible=!0,this.friendData=e.list),(!e||!e.list||e.list.length<1)&&(this.noDataBox.visible=!0),console.log(e)}};zf=d([wB("0iWaxfs9RBKN2SAQf6r1dw")],zf);var Kf=class extends Laya.Box{};var{regClass:TB}=Laya,qf=class extends Kf{constructor(){super();this.friendData=null;this.invited=!1}addEvent(){this.btn_invite.on(Laya.Event.CLICK,this,this.onClickInvite)}onDisable(){this.removeEvent()}removeEvent(){this.btn_invite.off(Laya.Event.CLICK,this,this.onClickInvite)}set dataSource(e){super.dataSource=e,e&&(this.friendData=e,this.setData(e),this.addEvent())}setData(e){this.tf_name.text=e.name,this.img_flag.skin=M.instance.getCountryIcon(e.country),this.playerIcon.headSkin=e.icon,e.online?(this.tf_online.text="on line",this.tf_online.color="#43ef74"):(this.tf_online.text=fe.formatTimeAgo(e.lastLoginTime),this.tf_online.color="#b4b4b4")}async onClickInvite(){if(this.invited)return;let e=this.friendData.id,i=this.friendData.openid;console.log("onClickInvite",e,i);var n=this.parent.parent.parent,r=n.roomId,s=n.teamId,o=await w.requestPost("wxgame/roomPreContract/groupInvite",{roomId:r,teamId:s,targetPid:e});if(o){if(this.destroyed)return;this.btn_invite.skin="res/airdrop/img_com_join_button_1.png",this.btn_invite.label="Invited",this.btn_invite.labelColors="#4789c7",this.invited=!0}}};qf=d([TB("fmYAqp9UQqmSfuho5FGK7g")],qf);var Yf=class extends Laya.Dialog{};var{regClass:CB}=Laya,$f=class extends Yf{constructor(){super()}onEnable(){this.btn_invite.on(Laya.Event.CLICK,this,this.onInvite)}onInvite(){var e=this.roomId,i=this.teamDto.teamId;O.intance.openModule(L.MyFriendDialog,[e,i])}setOpenData(e){this.roomId=e[0],this.teamDto=e[1],this.tf_num.text=`${this.teamDto.curNum}/${this.teamDto.totalNum}`,this.teamDto&&this.teamDto.players&&(this.btn_invite.disabled=this.teamDto.curNum>=this.teamDto.totalNum,this.list_members.array=this.teamDto.players,!this.teamDto.players||this.teamDto.players.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}};$f=d([CB("hX77g-jXRXWpDYzwnZesiQ")],$f);var Xf=class extends Laya.Box{};var{regClass:SB}=Laya,Qf=class extends Xf{constructor(){super(...arguments);this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}onCopy(){let e=this.roomPlayer.openId;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}set dataSource(e){super.dataSource=e,this.roomPlayer=e,this.roomPlayer&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){let e=this.roomPlayer.icon;this.playerIcon.headSkin=e,this.tf_name.text=this.roomPlayer.name,this.tf_union.text=p.instance.getMultiLan(this.roomPlayer.shortUnionName),this.tf_address.text=qe.abbreviateString(this.roomPlayer.openId,18)}};Qf=d([SB("MsLl8of8Q-66zTyBsBmOng")],Qf);var Ta=class{constructor(){}};Ta.GREEN="#2ac84b",Ta.YELLOW="#e8c833",Ta.RED="#e04343";var Jf=class extends Laya.Box{};var{regClass:DB}=Laya,Zf=class extends Jf{constructor(){super();this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.nodeItem=e,this.img_node.skin=M.instance.getNodeIcon(this.nodeItem.area),this.tf_node.text=p.instance.getLanguage(this.nodeItem.name),this.onGameDelay(this.nodeItem.dT)}onGameDelay(e){var i=I.intance.getGeneralValueById(6),n=i[0],r=i[1];this.tf_delay.text=e+"ms",e>r?(this.img_delay.skin="res/common/comm/img_com_xinhao3.png",this.tf_delay.color=Ta.RED):e>n?(this.img_delay.skin="res/common/comm/img_com_xinhao2.png",this.tf_delay.color=Ta.YELLOW):(this.img_delay.skin="res/common/comm/img_com_xinhao1.png",this.tf_delay.color=Ta.GREEN)}startTest(){Laya.timer.loop(5e3,this,this.onTestUrl)}onTestUrl(){w.stopHeartInStage||(this.nodeItem&&this.nodeItem.testUrl(),this.onGameDelay(this.nodeItem.dT))}onDisable(){Laya.timer.clearAll(this)}};Zf=d([DB("hhMSfaGLSJmVqJcF08xLgA")],Zf);var ey=class extends Laya.Box{};var{regClass:kB}=Laya,ty=class extends ey{addEvent(){}set dataSource(e){super.dataSource=e;var i=e;i&&(this.addEvent(),this.img_icon.skin=M.instance.getNodeIcon(i.area),this.tf_name.text=p.instance.getLanguage(i.name),this.nodeDelaySign.dataSource=i)}onChange(e){e?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};ty=d([kB("3WEF588kThqDCYUgf5gM6w")],ty);var iy=class extends Laya.Dialog{};var{regClass:AB}=Laya,ay=class extends iy{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}setOpenData(e){e&&(this.roomId=e[0],this.teamId=e[1],this.leaderName=e[2])}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onClickCopy),this.btn_invite.on(Laya.Event.CLICK,this,this.onInvite),this.initContainer()}onClose(){this.close()}onDisable(){}initContainer(){this.tf_tip.text=p.instance.getLanguage(1652),this.tf_leaderName.text=this.leaderName,this.tf_teamId.text=this.teamId+"";var e=this.roomId,i=this.teamId;let n=We.instance.onGetNewUrl(e,i);this.input_bookingUrl.text=n}onInvite(){var e=this.roomId,i=this.teamId;O.intance.openModule(L.MyFriendDialog,[e,i])}async onJoin(){let e=this.input_bookingUrl.text;if(e==""){C.instance.notice(p.instance.getUILang("Please input booking URL"));return}let i=We.instance.onGetBookingId(e),n=i[0];if(n){let r=i[1],s=parseInt(n),o=parseInt(r);We.instance.goBookingCreateRoomDialog(s,o)}else C.instance.notice(p.instance.getLanguage(1564))}onClickCopy(){let e=this.input_bookingUrl.text;e&&(doCopy(e),C.instance.notice(p.instance.getLanguage(132)))}};ay=d([AB("Dy-cG4svSO2sXy3rqqLgtA")],ay);var ny=class extends Laya.Dialog{};var{regClass:MB}=Laya,ry=class extends ny{constructor(){super()}onEnable(){this.btn_create.on(Laya.Event.CLICK,this,this.onCreate)}onCreate(){We.instance.goBookingCreateRoomDialog(this.roomId)}async setOpenData(e){this.list_members.array=[],this.roomId=e,this.onUpdateData(),Laya.timer.loop(3e3,this,this.onUpdateData)}async onUpdateData(){this.destroyed||w.requestPost("wxgame/roomPreContract/teamList",{roomId:this.roomId}).then(e=>{if(!this.destroyed){var i=e.teamDtoList;this.myTeamId=e.myTeamId,this.btn_create.disabled=this.myTeamId>0,i&&i.length&&(this.list_members.array=i,!i||i.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}}).catch(e=>{this.close()})}onDisable(){Laya.timer.clearAll(this)}};ry=d([MB("vn92QbT4TOu8O2hiUdYh1w")],ry);var sy=class extends Laya.Box{};var{regClass:BB}=Laya,oy=class extends sy{constructor(){super(...arguments);this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_view.on(Laya.Event.CLICK,this,this.onView),this.btn_invite.on(Laya.Event.CLICK,this,this.onInvite),this.btn_share.on(Laya.Event.CLICK,this,this.onShare),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.btn_apply.on(Laya.Event.CLICK,this,this.onApply),this.isAddEvent=!0)}onView(){var e=this.parent.parent.parent,i=e.roomId,n=this.teamDto;O.intance.openModule(L.MyTeamDialog,[i,n])}onInvite(){var e=this.parent.parent.parent,i=e.roomId,n=this.teamDto.teamId;O.intance.openModule(L.MyFriendDialog,[i,n])}onShare(){var e=this.parent.parent.parent,i=e.roomId,n=this.teamDto.teamId;O.intance.openModule(L.TeamShareDialog,[i,n])}onJoin(){O.intance.openModule(L.TeamJoinUsingDialog)}async onApply(){var e=this.parent.parent.parent,i=e.roomId,n=this.teamDto.teamId,r=await w.requestPost("wxgame/roomPreContract/groupJoin",{roomId:i,teamId:n});if(r){if(this.destroyed)return;he.popTip(1650)}}set dataSource(e){super.dataSource=e,this.teamDto=e,this.teamDto&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){this.leader=this.teamDto.leaderPlayer;let e=this.leader.icon;this.playerIcon.headSkin=e,this.tf_name.text=this.leader.name,this.tf_union.text=p.instance.getMultiLan(this.leader.shortUnionName),this.teamDto.curNum<this.teamDto.totalNum?(this.img_dengdai.skin="res/booking/img_com_dengdai.png",this.tf_people.text=`<font color="#e84d34">${this.teamDto.curNum}</font>/${this.teamDto.totalNum}`):(this.img_dengdai.skin="res/booking/img_com_gou.png",this.tf_people.text=`<font color="#25ff63">${this.teamDto.curNum}</font>/${this.teamDto.totalNum}`);var i=this.parent.parent.parent,n=i.myTeamId;n&&this.teamDto.teamId==n?(this.btn_invite.visible=!0,this.btn_share.visible=!0,this.btn_join.visible=!1,this.btn_apply.visible=!1,this.teamDto.curNum==this.teamDto.totalNum?(this.setBtnDisabled(this.btn_invite,!0),this.setBtnDisabled(this.btn_share,!0)):(this.setBtnDisabled(this.btn_invite,!1),this.setBtnDisabled(this.btn_share,!1))):(this.btn_invite.visible=!1,this.btn_share.visible=!1,this.btn_join.visible=!0,this.btn_apply.visible=!0,this.teamDto.curNum==this.teamDto.totalNum?(this.setBtnDisabled(this.btn_join,!0),this.setBtnDisabled(this.btn_apply,!0)):n?(this.setBtnDisabled(this.btn_join,!0),this.setBtnDisabled(this.btn_apply,!0)):(this.setBtnDisabled(this.btn_join,!1),this.setBtnDisabled(this.btn_apply,!1)))}setBtnDisabled(e,i){i?(e.skin="res/booking/img_com_anniu2.png",e.labelColors="#11c5fa"):(e.skin="res/booking/img_com_anniu1.png",e.labelColors="#ffffff"),e.disabled=i}};oy=d([BB("7oyF4ImKSpieTvgTF4Thew")],oy);var ly=class extends Laya.Dialog{};var{regClass:RB}=Laya,cy=class extends ly{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}setOpenData(e){}onEnable(){this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.initContainer()}onClose(){this.close()}onDisable(){}initContainer(){this.tf_tip.text=p.instance.getLanguage(1648),this.input_bookingUrl.text=""}async onJoin(){let e=this.input_bookingUrl.text;if(e==""){C.instance.notice(p.instance.getUILang("Please input booking URL"));return}let i=We.instance.onGetBookingId(e),n=i[0];if(n){let r=i[1],s=parseInt(n),o=parseInt(r);We.instance.goBookingCreateRoomDialog(s,o),this.close()}else C.instance.notice(p.instance.getLanguage(1564))}};cy=d([RB("FJTW2dtzTA-7IRwokvDqbQ")],cy);var uy=class extends Laya.Dialog{};var{regClass:PB}=Laya,py=class extends uy{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}setOpenData(e){e&&(this.roomId=e[0],this.teamId=e[1])}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onClickCopy),this.initContainer()}onClose(){this.close()}onDisable(){}initContainer(){this.tf_tip.text=p.instance.getLanguage(1651);var e=this.roomId,i=this.teamId;let n=We.instance.onGetNewUrl(e,i);this.input_bookingUrl.text=n}async onJoin(){let e=this.input_bookingUrl.text;if(e==""){C.instance.notice(p.instance.getUILang("Please input booking URL"));return}let i=We.instance.onGetBookingId(e),n=i[0];if(n){let r=i[1],s=parseInt(n),o=parseInt(r);We.instance.goBookingCreateRoomDialog(s,o)}else C.instance.notice(p.instance.getLanguage(1564))}onClickCopy(){let e=this.input_bookingUrl.text;e&&(doCopy(e),C.instance.notice(p.instance.getLanguage(132)))}};py=d([PB("WZneRofHTmO4le4SOiIw8A")],py);var my=class extends Laya.Dialog{};var{regClass:NB}=Laya,hy=class extends my{constructor(){super()}onEnable(){this.list_airdrop.visible=!1,this.tf_consume.text=p.instance.getUILang("Consume items"),this.tf_value.text=p.instance.getUILang("value/U"),this.setOpenData()}async setOpenData(){var t=await w.requestPost("wxgame/money/drawTokenPayOutRecord",{});t&&(t.records.push(void 0),this.list_airdrop.array=t.records,this.list_airdrop.visible=!0,!t.records||t.records.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}onDisable(){}};hy=d([NB("u4LW1QxJTQOj64w92cnRVg")],hy);var dy=class extends Laya.Box{};var{regClass:OB}=Laya,fy=class extends dy{constructor(){super()}addEvent(){}set dataSource(t){if(super.dataSource=t,!t){this.visible=!1;return}this.setData(t),this.addEvent()}setData(t){let e=I.intance.getPuzzleExchangeByName("WBNB").value,i=fe.formatDayAndTime(t.time);this.tf_day.text=i.date,this.tf_consume.text=`${t.count}`,this.tf_value.text=`${t.count*e}`,t.puzzleId==1?this.tf_limit.text=`${Pe.filterNumFormat(t.coinValue,2)}`:this.tf_limit.text=`${Pe.filterNumFormat(t.coinValue,6)}`;let n=I.intance.getPuzzleExchange(t.puzzleId).name;this.tf_type.text=`${n}`}};fy=d([OB("gHc-YmsARYaK65kwDLBAAw")],fy);var yy=class extends Laya.Scene{};var rt=class{constructor(){}};rt.TYPE_Consumption=1,rt.TYPE_Equipment=2,rt.TYPE_Currency=3,rt.TYPE_Hero=4,rt.TYPE_Fragment=5,rt.TYPE_CARD=6,rt.CHOOSE_Wallet=1,rt.CHOOSE_PutOn=2,rt.ITEM_PT=1086,rt.ITEM_PT_EXP=1091,rt.ITEM_SNAKE=3026;function by(a,t){var e;t===void 0&&(t="0");var i=0,n=-1;a[0]=="-"&&(a=a.substring(1),N1(a)||(i++,n=1,a.length)),t[0]=="-"&&(t=t.substring(1),N1(t)||(i++,n=2,t.length)),a=$i(a),t=$i(t),e=V1($i(a),$i(t)),a=e[0],t=e[1],i==1&&(n===1?a=R1(a):n===2&&(t=R1(t)));var r=bk(a,t);return i?i==2?"-"+$i(r):a.length<r.length?$i(r.substring(1)):"-"+$i(R1(r)):$i(r)}function R1(a){if(N1(a))return a;for(var t="",e=a.length,i=a.split(".")[1],n=i?i.length:0,r=0;r<e;r++)a[r]>="0"&&a[r]<="9"?t+=9-parseInt(a[r]):t+=a[r];var s=n>0?"0."+new Array(n).join("0")+"1":"1";return bk(t,s)}function $i(a){var t=a.split(".");for(t[0]||(t[0]="0");t[0][0]=="0"&&t[0].length>1;)t[0]=t[0].substring(1);return t[0]+(t[1]?"."+t[1]:"")}function V1(a,t){var e=a.split("."),i=t.split("."),n=e[0].length,r=i[0].length;return n>r?i[0]=new Array(Math.abs(n-r)+1).join("0")+(i[0]?i[0]:""):e[0]=new Array(Math.abs(n-r)+1).join("0")+(e[0]?e[0]:""),n=e[1]?e[1].length:0,r=i[1]?i[1].length:0,(n||r)&&(n>r?i[1]=(i[1]?i[1]:"")+new Array(Math.abs(n-r)+1).join("0"):e[1]=(e[1]?e[1]:"")+new Array(Math.abs(n-r)+1).join("0")),a=e[0]+(e[1]?"."+e[1]:""),t=i[0]+(i[1]?"."+i[1]:""),[a,t]}function bk(a,t){var e;e=V1(a,t),a=e[0],t=e[1];for(var i="",n=0,r=a.length-1;r>=0;r--){if(a[r]==="."){i="."+i;continue}var s=parseInt(a[r])+parseInt(t[r])+n;i=s%10+i,n=Math.floor(s/10)}return n?n.toString()+i:i}function N1(a){return/^0[0]*[.]{0,1}[0]*$/.test(a)}function mk(a){return(typeof a=="number"||typeof a=="bigint")&&(a=a.toString()),a[0]=="-"?a.substring(1):a}var mi;(function(a){a[a.CEILING=0]="CEILING",a[a.DOWN=1]="DOWN",a[a.FLOOR=2]="FLOOR",a[a.HALF_DOWN=3]="HALF_DOWN",a[a.HALF_EVEN=4]="HALF_EVEN",a[a.HALF_UP=5]="HALF_UP",a[a.UNNECESSARY=6]="UNNECESSARY",a[a.UP=7]="UP"})(mi||(mi={}));function Du(a,t,e){if(t===void 0&&(t=0),e===void 0&&(e=mi.HALF_EVEN),e===mi.UNNECESSARY)throw new Error("UNNECESSARY Rounding Mode has not yet been implemented");(typeof a=="number"||typeof a=="bigint")&&(a=a.toString());var i=!1;a[0]==="-"&&(i=!0,a=a.substring(1));var n=a.split("."),r=n[0],s=n[1];if(t<0){if(t=-t,r.length<=t)return"0";var o=r.substr(0,r.length-t);return a=o+"."+r.substr(r.length-t)+s,o=Du(a,0,e),(i?"-":"")+o+new Array(t+1).join("0")}if(t==0)return r.length,hk(n[1],r,i,e)&&(r=P1(r)),(i&&parseInt(r)?"-":"")+r;if(n[1]){if(n[1].length<t)return(i?"-":"")+r+"."+n[1]+new Array(t-n[1].length+1).join("0")}else return(i?"-":"")+r+"."+new Array(t+1).join("0");s=n[1].substring(0,t);var l=n[1].substring(t);return l&&hk(l,s,i,e)&&(s=P1(s),s.length>t)?(i?"-":"")+P1(r,parseInt(s[0]))+"."+s.substring(1):(i&&(parseInt(r)||parseInt(s))?"-":"")+r+"."+s}function hk(a,t,e,i){if(!a||a===new Array(a.length+1).join("0")||i===mi.DOWN||!e&&i===mi.FLOOR||e&&i===mi.CEILING)return!1;if(i===mi.UP||e&&i===mi.FLOOR||!e&&i===mi.CEILING)return!0;var n="5"+new Array(a.length).join("0");if(a>n)return!0;if(a<n)return!1;switch(i){case mi.HALF_DOWN:return!1;case mi.HALF_UP:return!0;case mi.HALF_EVEN:default:return parseInt(t[t.length-1])%2==1}}function P1(a,t){t===void 0&&(t=0),t||(t=1),typeof a=="number"&&a.toString();for(var e=a.length-1,i="",n=e;n>=0;n--){var r=parseInt(a[n])+t;r==10?(t=1,r=0):t=0,i+=r}return t&&(i+=t),i.split("").reverse().join("")}function vs(a){var t=a[0]==="-";for(t&&(a=a.substr(1));a[0]=="0";)a=a.substr(1);if(a.indexOf(".")!=-1)for(;a[a.length-1]=="0";)a=a.substr(0,a.length-1);return a==""||a=="."?a="0":a[a.length-1]=="."&&(a=a.substr(0,a.length-1)),a[0]=="."&&(a="0"+a),t&&a!="0"&&(a="-"+a),a}function O1(a,t){a=a.toString(),t=t.toString();var e=0;a[0]=="-"&&(e++,a=a.substr(1)),t[0]=="-"&&(e++,t=t.substr(1)),a=vs(a),t=vs(t);var i=0,n=0;a.indexOf(".")!=-1&&(i=a.length-a.indexOf(".")-1),t.indexOf(".")!=-1&&(n=t.length-t.indexOf(".")-1);var r=i+n;if(a=vs(a.replace(".","")),t=vs(t.replace(".","")),a.length<t.length){var s=a;a=t,t=s}if(t=="0")return"0";for(var o=t.length,l=0,u=[],m=o-1,h="",y=0;y<o;y++)u[y]=a.length-1;for(var y=0;y<2*a.length;y++){for(var x=0,E=t.length-1;E>=m&&E>=0;E--)u[E]>-1&&u[E]<a.length&&(x+=parseInt(a[u[E]--])*parseInt(t[E]));x+=l,l=Math.floor(x/10),h=x%10+h,m--}return h=vs(HB(h,r)),e==1&&(h="-"+h),h}function HB(a,t){return t==0?a:(a=t>=a.length?new Array(t-a.length+1).join("0")+a:a,a.substr(0,a.length-t)+"."+a.substr(a.length-t,t))}function H1(a,t,e,i){if(e===void 0&&(e=8),i===void 0&&(i=mi.HALF_EVEN),t==0)throw new Error("Cannot divide by 0");if(a=a.toString(),t=t.toString(),a=a.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),t=t.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),a==0)return"0";var n=0;t[0]=="-"&&(t=t.substring(1),n++),a[0]=="-"&&(a=a.substring(1),n++);var r=t.indexOf(".")>0?t.length-t.indexOf(".")-1:-1;if(t=$i(t.replace(".","")),r>=0){var s=a.indexOf(".")>0?a.length-a.indexOf(".")-1:-1;if(s==-1)a=$i(a+new Array(r+1).join("0"));else if(r>s)a=a.replace(".",""),a=$i(a+new Array(r-s+1).join("0"));else if(r<s){a=a.replace(".","");var o=a.length-s+r;a=$i(a.substring(0,o)+"."+a.substring(o))}else r==s&&(a=$i(a.replace(".","")))}var l=0,u=t.length,m="",h=a.indexOf(".")>-1&&a.indexOf(".")<u?a.substring(0,u+1):a.substring(0,u);if(a=a.indexOf(".")>-1&&a.indexOf(".")<u?a.substring(u+1):a.substring(u),h.indexOf(".")>-1){var y=h.length-h.indexOf(".")-1;h=h.replace(".",""),u>h.length&&(y+=u-h.length,h=h+new Array(u-h.length+1).join("0")),l=y,m="0."+new Array(y).join("0")}for(e=e+2;l<=e;){for(var x=0;parseInt(h)>=parseInt(t);)h=by(h,"-"+t),x++;m+=x,a?(a[0]=="."&&(m+=".",l++,a=a.substring(1)),h=h+a.substring(0,1),a=a.substring(1)):(l||(m+="."),l++,h=h+"0")}return(n==1?"-":"")+$i(Du(m,e-2,i))}function U1(a,t){return a=a.toString(),t=t.toString(),t=F1(t),by(a,t)}function F1(a){return a[0]=="-"?a=a.substr(1):a="-"+a,a}function dk(a,t){if(t==0)throw new Error("Cannot divide by 0");a=a.toString(),t=t.toString(),fk(a),fk(t);var e="";a[0]=="-"&&(e="-",a=a.substr(1)),t[0]=="-"&&(t=t.substr(1));var i=U1(a,O1(t,Du(H1(a,t),0,mi.FLOOR)));return e+i}function fk(a){if(a.indexOf(".")!=-1)throw new Error("Modulus of non-integers not supported")}function yk(a,t){var e,i,n=!1;if(e=[a,t].map(function(s){return vs(s)}),a=e[0],t=e[1],a[0]=="-"&&t[0]!="-")return-1;if(a[0]!="-"&&t[0]=="-")return 1;if(a[0]=="-"&&t[0]=="-"&&(a=a.substr(1),t=t.substr(1),n=!0),i=V1(a,t),a=i[0],t=i[1],a.localeCompare(t)==0)return 0;for(var r=0;r<a.length;r++)if(a[r]!=t[r])return a[r]>t[r]?n?-1:1:n?1:-1;return 0}var Tt=function(){function a(t){t===void 0&&(t="0"),this.value=a.validate(t)}return a.validate=function(t){if(t){if(t=t.toString(),isNaN(t))throw Error("Parameter is not a number: "+t);t[0]=="+"&&(t=t.substring(1))}else t="0";if(t.startsWith(".")?t="0"+t:t.startsWith("-.")&&(t="-0"+t.substr(1)),/e/i.test(t)){var e=t.split(/[eE]/),i=e[0],n=e[1];i=$i(i);var r="";i[0]=="-"&&(r="-",i=i.substring(1)),i.indexOf(".")>=0?(n=parseInt(n)+i.indexOf("."),i=i.replace(".","")):n=parseInt(n)+i.length,i.length<n?t=r+i+new Array(n-i.length+1).join("0"):i.length>=n&&n>0?t=r+$i(i.substring(0,n))+(i.length>n?"."+i.substring(n):""):t=r+"0."+new Array(-n+1).join("0")+i}return t},a.prototype.getValue=function(){return this.value},a.prototype.setValue=function(t){this.value=a.validate(t)},a.getPrettyValue=function(t,e,i){e===void 0&&(e=3),i===void 0&&(i=","),t=a.validate(t);var n=t.charAt(0)=="-";n&&(t=t.substring(1));var r=t.indexOf(".");r=r>0?r:t.length;for(var s="",o=r;o>0;)o<e?(e=o,o=0):o-=e,s=t.substring(o,o+e)+(o<r-e&&o>=0?i:"")+s;return(n?"-":"")+s+t.substring(r)},a.prototype.getPrettyValue=function(t,e){return t===void 0&&(t=3),e===void 0&&(e=","),a.getPrettyValue(this.value,t,e)},a.round=function(t,e,i){if(e===void 0&&(e=0),i===void 0&&(i=mi.HALF_EVEN),t=a.validate(t),isNaN(e))throw Error("Precision is not a number: "+e);return Du(t,e,i)},a.prototype.round=function(t,e){if(t===void 0&&(t=0),e===void 0&&(e=mi.HALF_EVEN),isNaN(t))throw Error("Precision is not a number: "+t);return new a(Du(this.value,t,e))},a.abs=function(t){return t=a.validate(t),mk(t)},a.prototype.abs=function(){return new a(mk(this.value))},a.floor=function(t){return t=a.validate(t),t.indexOf(".")===-1?t:a.round(t,0,mi.FLOOR)},a.prototype.floor=function(){return this.value.indexOf(".")===-1?new a(this.value):new a(this.value).round(0,mi.FLOOR)},a.ceil=function(t){return t=a.validate(t),t.indexOf(".")===-1?t:a.round(t,0,mi.CEILING)},a.prototype.ceil=function(){return this.value.indexOf(".")===-1?new a(this.value):new a(this.value).round(0,mi.CEILING)},a.add=function(t,e){return t=a.validate(t),e=a.validate(e),by(t,e)},a.prototype.add=function(t){return new a(by(this.value,t.getValue()))},a.subtract=function(t,e){return t=a.validate(t),e=a.validate(e),U1(t,e)},a.prototype.subtract=function(t){return new a(U1(this.value,t.getValue()))},a.multiply=function(t,e){return t=a.validate(t),e=a.validate(e),O1(t,e)},a.prototype.multiply=function(t){return new a(O1(this.value,t.getValue()))},a.divide=function(t,e,i,n){return t=a.validate(t),e=a.validate(e),H1(t,e,i,n)},a.prototype.divide=function(t,e,i){return new a(H1(this.value,t.getValue(),e,i))},a.modulus=function(t,e){return t=a.validate(t),e=a.validate(e),dk(t,e)},a.prototype.modulus=function(t){return new a(dk(this.value,t.getValue()))},a.compareTo=function(t,e){return t=a.validate(t),e=a.validate(e),yk(t,e)},a.prototype.compareTo=function(t){return yk(this.value,t.getValue())},a.negate=function(t){return t=a.validate(t),F1(t)},a.prototype.negate=function(){return new a(F1(this.value))},a.stripTrailingZero=function(t){return t=a.validate(t),vs(t)},a.prototype.stripTrailingZero=function(){return new a(vs(this.value))},a.RoundingModes=mi,a}();var ku=class{};var{regClass:UB}=Laya,gy=class extends yy{constructor(){super(...arguments);this.withdrawText=null;this.allProp=[];this.puzzleNum=0;this.addPuzzleNum=0;this.wbnbRate=0;this.logPage=1;this.logPageSize=0;this.isSearch=!1;this.btnLock=!1;this.tokenData1=[];this.tokenDataAir=[];this.tokenTransData=[];this.currTab=0;this.type=1;this.coinType=-1;this.currencyTokenId=0;this.items=[]}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onOpened(e){this.list_champ.array=[],e&&e.length>1&&(this.type=e[0],this.coinType=e[1],this.onClickTab(this.type)),this.withdrawText=this.withdrawCode.prompt}onEnable(){this.btn_champDetail.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_champDetail]),this.btn_champRecord.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_champRecord]),this.btn_withdrawRecord.label=p.instance.getUILang("ExtractionRecords"),this.btn_airRecord.label=p.instance.getUILang("ExtractionRecords"),this.tf_serviceRate1.text=p.instance.getUILang("service rate"),this.tf_tokenLabMont.text=p.instance.getUILang("token"),this.initTokenWebData(),this.initTokenWebDataAir(),this.initTokenTransData(),this.handleSelectTokenTrans(0),this.initLeftList(),this.initLogList(),this.handleSelectLogType(0),this.handleSelectLogDate(0),this.list_left.selectedIndex=0,this.refreshMoney(),this.btn_transferMoney.on(Laya.Event.CLICK,this,this.onTransferMoney),this.rechargeCode.on(Laya.Event.INPUT,this,this.onRechargeCodeInput),this.rechargeCode.on(Laya.Event.BLUR,this,this.testRechargeCodeInput),this.withdrawCode.on(Laya.Event.INPUT,this,this.onRechargewithdrawCodeInput),this.withdrawCode.on(Laya.Event.BLUR,this,this.testInputData),this.btn_hireRecord.on(Laya.Event.CLICK,this,this.onHireRecord),this.btn_proxyRecord.on(Laya.Event.CLICK,this,this.onProxyRecord),this.btn_claimHire.on(Laya.Event.CLICK,this,this.onClaimHire),this.btn_claimProxy.on(Laya.Event.CLICK,this,this.onClaimProxy),this.btn_claimGuild.on(Laya.Event.CLICK,this,this.onClaimGuild),this.list_web.renderHandler=Laya.Handler.create(this,this.onWebItemRender,null,!1),this.list_token.renderHandler=Laya.Handler.create(this,this.onTokenItemRender,null,!1),this.list_web2.renderHandler=Laya.Handler.create(this,this.onWebItemRender2,null,!1),this.list_token2.renderHandler=Laya.Handler.create(this,this.onTokenItemRender2,null,!1),this.list_token3.renderHandler=Laya.Handler.create(this,this.onTokenItemRender3,null,!1),this.list_token4.renderHandler=Laya.Handler.create(this,this.onTokenItemRender4,null,!1),this.list_left.renderHandler=new Laya.Handler(this,this.onLeftItemRender),this.box_web.on(Laya.Event.CLICK,this,this.onOpenWeb,[this.img_web_pad]),this.box_web2.on(Laya.Event.CLICK,this,this.onOpenWeb,[this.img_web_pad2]),this.box_tokenTrans.on(Laya.Event.CLICK,this,this.onOpenWeb,[this.img_token_pad4]),this.box_token.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad]),this.box_token2.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad2]),this.box_token3.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad3]),this.box_token4.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad4]),this.box_selectLog.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_logType_pad]),this.box_currentDate.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_logDate_pad]),this.list_logType.renderHandler=Laya.Handler.create(this,this.onlogTypeRender,null,!1),this.list_logDate.renderHandler=Laya.Handler.create(this,this.onlogDateRender,null,!1),this.list_logType.selectHandler=new Laya.Handler(this,this.handleSelectLogType),this.list_logDate.selectHandler=new Laya.Handler(this,this.handleSelectLogDate),this.btn_confirm.on(Laya.Event.CLICK,this,this.onbtnConfirm),this.btn_cardPay.on(Laya.Event.CLICK,this,this.onbtnCardPay),this.btn_max.on(Laya.Event.CLICK,this,this.onbtnMax),this.list_web.selectHandler=new Laya.Handler(this,this.handleSelectWeb),this.list_token.selectHandler=new Laya.Handler(this,this.handleSelectToken),this.list_web2.selectHandler=new Laya.Handler(this,this.handleSelectWebWithdraw),this.list_token2.selectHandler=new Laya.Handler(this,this.handleSelectTokenWithdraw),this.list_token3.selectHandler=new Laya.Handler(this,this.handleSelectTokenAir),this.list_token4.selectHandler=new Laya.Handler(this,this.handleSelectTokenTrans),this.list_left.selectHandler=new Laya.Handler(this,this.handleSelectLeft),this.tf_adress.text=K.instance.walletAddress,this.tf_adressAir.text=K.instance.walletAddress,this.btn_withdraw.on(Laya.Event.CLICK,this,this.onBtnWithdraw),this.btn_withdrawRecord.on(Laya.Event.CLICK,this,this.onBtnWithdrawRecord),this.btn_nodeRevenueRecord.on(Laya.Event.CLICK,this,this.onBtnNodeRevenueRecord),this.btn_jianE.on(Laya.Event.CLICK,this,this.onBtnJianE),this.btn_addE.on(Laya.Event.CLICK,this,this.onBtnAddE),this.btn_addMax.on(Laya.Event.CLICK,this,this.onBtnAddMax),this.btn_airRecord.on(Laya.Event.CLICK,this,this.onBtnAirRecord),this.btn_claimRecom.on(Laya.Event.CLICK,this,this.onClaimRem),_.intance.on(b.EVENT_WELFARE_CLAIM,this,this.onClaimWelfare),_.intance.on(b.CHANGE_ASSET_CHAIN,this,this.changeAssetChain),_.intance.on(b.EVENT_ADD_MONEY_ADDRESS,this,this.onAddMoneyAddress),_.intance.on(b.REFRESH_ALL_WITHDRAW_DATA,this,this.refreshWithdrawData),_.intance.on(b.EVENT_REFRESH_NODE_ONCHAIN_STATUS,this,this.onRefreshNodeStatus),this.btn_Search.on(Laya.Event.CLICK,this,this.searchLogArray,[!0]),this.btn_right.on(Laya.Event.CLICK,this,this.onBtnRightAndRight,[!0]),this.btn_left.on(Laya.Event.CLICK,this,this.onBtnRightAndRight,[!1]),this.btn_Combine.on(Laya.Event.CLICK,this,this.onBtnCombine),this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.box_all.visible=!1,this.initDataView()}setTab(e){for(let i=1;i<11;i++)e==i?this["box_"+i]&&(this["box_"+i].visible=!0):this["box_"+i]&&(this["box_"+i].visible=!1)}async initDataView(){if(!this.destroyed){v.instance.playerDto.country?this.btn_cardPay.visible=!0:this.btn_cardPay.visible=!1,this.type?this.onClickTab(this.type):this.onClickTab(5),this.list_hire.visible=!1,this.list_proxy.visible=!1,this.list_reward.visible=!1,this.listHireReward.visible=!1;var e=v.instance.playerDto.status;e==2?(this.btn_withdraw.visible=!1,this.tf_noAllowed.visible=!0):(this.btn_withdraw.visible=!0,this.tf_noAllowed.visible=!1)}}async showHireData(){var e=await w.requestPost("wxgame/lease/outline",{});if(e&&e.reward){let n=ce.processItemsArray(e.reward);e.reward.length>0?this.btn_claimHire.disabled=!1:this.btn_claimHire.disabled=!0;let r=n[0];this.list_hire.array=r,this.list_hire.selectedIndex=-1,this.list_hire.visible=!0,e.leaderCount?this.tf_hireNum.text=p.instance.getLanguage(1179,e.leaderCount):this.tf_hireNum.text=p.instance.getLanguage(1179,0);let s=n[1];var i=[];s.forEach(o=>{var l=new Xe(o.id);l.newAddCnt=o.count,i.push(l)}),this.listHireReward.array=i,this.listHireReward.selectedIndex=-1,this.listHireReward.visible=!0}}async showProxyData(){var e=await w.requestPost("wxgame/lease/outline",{});if(e&&e.childReward){let r=ce.processItemsArray(e.childReward),s=r[0],o=r[2];e.childReward.length>0?this.btn_claimProxy.disabled=!1:this.btn_claimProxy.disabled=!0;var i=[],n=o;n.forEach(l=>{var u=new Xe(l.id);u.newAddCnt=l.count,i.push(u)}),this.list_reward.array=i,this.list_reward.visible=!0,this.list_proxy.array=s,this.list_proxy.visible=!0,this.list_proxy.selectedIndex=-1,e.childCount?this.tf_proxyNum.text=p.instance.getLanguage(1180,e.childCount):this.tf_proxyNum.text=p.instance.getLanguage(1180,0)}}async showGuildData(){var e=await w.requestPost("wxgame/money/unionBonusInfo",{});if(e&&e.reward){e.reward.length<1?this.btn_claimGuild.disabled=!0:this.btn_claimGuild.disabled=!1;let r=ce.processItemsArray(e.reward),s=r[0],o=r[2];var i=[],n=o;n.forEach(l=>{var u=new Xe(l.id);u.newAddCnt=l.count,i.push(u)}),this.list_guild.array=s,this.list_guild.visible=!0,this.list_guild.selectedIndex=-1}}async showRecommendData(){let e=v.instance.playerDto;this.tf_recomNum.text=p.instance.getLanguage(1531,e.remCount);var i=await w.requestPost("wxgame/money/remRewardList",{});if(i&&i.reward){i.reward.length<1?this.btn_claimRecom.disabled=!0:this.btn_claimRecom.disabled=!1;let r=ce.processItemsArray(i.reward)[0];this.list_recommend.array=r,this.list_recommend.visible=!0,this.list_recommend.selectedIndex=-1}}async showNodeRevenueData(){this.list_nodeRevenue.visible=!1;var e=await w.requestPost("paWallet/buyNodeRewardPanel",{});if(e){this.tf_nodeTip.text=p.instance.getLanguage(1835,e.usdt);var i=[],n=e.coinItems;n&&n.forEach(r=>{var s=I.intance.getNodeCurrencyByTokenAndChainId(r.token,r.chainId);s.id!=rt.ITEM_SNAKE&&i.push(r)}),this.list_nodeRevenue.array=i,i.length>0?this.noDataBox_nodeRevenue.visible=!1:this.noDataBox_nodeRevenue.visible=!0,this.list_nodeRevenue.visible=!0}else C.instance.notice(p.instance.getLanguage(135))}onRefreshNodeStatus(){this.showNodeRevenueData()}initLeftList(){let e=["DEPOSIT","WITHDRAW","HIRE","PROXY","AIRDROP WITHDRAWAL","Token Transfer","Guild","RECOMMENDED BY","Node Revenue","ASSET LOGS"];this.list_left.array=e}async onClickTab(e){this.currTab=e,this.setTab(e),this.box_all.visible=!0,e==1?(this.box_1.visible=!0,await this.initContainer()):e==2?await this.initContainer():e==3?this.showHireData():e==4?this.showProxyData():e==5?this.initContainerAir():e==6?(this.list_address.array=[null],this.initTokenArray(this.list_token4.selectedIndex)):e==7?this.showGuildData():e==8?this.showRecommendData():e==9?this.showNodeRevenueData():e==10&&(this.isSearch||this.searchLogArray())}async handleClickBtn(e){switch(e){case this.btn_champDetail:{let i=await w.requestPost("wxgame/welfare/list",{});i.welfareDtoList?O.intance.openModule(L.ChampDetailDialog,i.welfareDtoList):C.instance.notice(p.instance.getLanguage(135))}break;case this.btn_champRecord:{let i=await w.requestPost("wxgame/welfare/takeList",{});i.welfareDtoList?O.intance.openModule(L.ChampRecordDialog,i.welfareDtoList):C.instance.notice(p.instance.getLanguage(135))}break}}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}onClaimWelfare(e){var i=this.list_champ.array;if(i instanceof Array){for(let n of i)if(n.coinType==e.coinType){n.takeValue=0;continue}this.list_champ.refresh()}}onDisable(){this.removeEvent()}removeEvent(){_.intance.off(b.EVENT_WELFARE_CLAIM,this,this.onClaimWelfare),this.rechargeCode.off(Laya.Event.INPUT,this,this.onRechargeCodeInput),_.intance.off(b.CHANGE_ASSET_CHAIN,this,this.changeAssetChain),this.btn_hireRecord.off(Laya.Event.CLICK,this,this.onHireRecord),this.btn_proxyRecord.off(Laya.Event.CLICK,this,this.onProxyRecord),this.btn_claimHire.off(Laya.Event.CLICK,this,this.onClaimHire),this.btn_claimProxy.off(Laya.Event.CLICK,this,this.onClaimProxy),this.box_web.off(Laya.Event.CLICK,this,this.onOpenWeb),this.box_web2.off(Laya.Event.CLICK,this,this.onOpenWeb),this.box_token.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_token2.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_token3.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_token4.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_selectLog.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_currentDate.off(Laya.Event.CLICK,this,this.onOpenToken),this.btn_confirm.off(Laya.Event.CLICK,this,this.onbtnConfirm),this.btn_max.off(Laya.Event.CLICK,this,this.onbtnMax),this.btn_transferMoney.off(Laya.Event.CLICK,this,this.onTransferMoney),this.rechargeCode.off(Laya.Event.INPUT,this,this.onRechargeCodeInput),this.rechargeCode.off(Laya.Event.BLUR,this,this.testRechargeCodeInput),this.withdrawCode.off(Laya.Event.INPUT,this,this.onRechargewithdrawCodeInput),this.withdrawCode.off(Laya.Event.BLUR,this,this.testInputData),this.box_tokenTrans.off(Laya.Event.CLICK,this,this.onOpenWeb),this.btn_withdraw.off(Laya.Event.CLICK,this,this.onBtnWithdraw),this.btn_withdrawRecord.off(Laya.Event.CLICK,this,this.onBtnWithdrawRecord),this.btn_jianE.off(Laya.Event.CLICK,this,this.onBtnJianE),this.btn_addE.off(Laya.Event.CLICK,this,this.onBtnAddE),this.btn_addMax.off(Laya.Event.CLICK,this,this.onBtnAddMax),this.btn_airRecord.off(Laya.Event.CLICK,this,this.onBtnAirRecord),this.btn_Combine.off(Laya.Event.CLICK,this,this.onBtnCombine),this.btn_Search.off(Laya.Event.CLICK,this,this.searchLogArray),this.btn_right.off(Laya.Event.CLICK,this,this.onBtnRightAndRight),this.btn_left.off(Laya.Event.CLICK,this,this.onBtnRightAndRight),_.intance.offAllCaller(this)}onOpenWeb(e){e.visible==!1&&(e.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList))}onOpenToken(e){e.visible==!1&&(e.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList))}onWebItemRender(e,i){e&&e.onChange&&e.onChange(this.list_web.selectedIndex==i)}onWebItemRender2(e,i){e&&e.onChange&&e.onChange(this.list_web2.selectedIndex==i)}onTokenItemRender(e,i){e&&e.onChange&&e.onChange(this.list_token.selectedIndex==i)}onTokenItemRender2(e,i){e&&e.onChange&&e.onChange(this.list_token2.selectedIndex==i)}onTokenItemRender3(e,i){e&&e.onChange&&e.onChange(this.list_token3.selectedIndex==i)}onTokenItemRender4(e,i){e&&e.onChange&&e.onChange(this.list_token4.selectedIndex==i)}async createWebList(){this.currTab==1?(this.list_web.array=this.webData,this.list_web.visible=!0):(this.list_web2.array=this.webDataWithdraw,this.list_web2.visible=!0),await this.initNetComboBox()}async createTokenList(e){switch(this.currTab){case 1:if(e){let r=this.list_web.selectedItem;var i=I.intance.getTokensByChainId(r,this.currTab);this.list_token.array=i,this.list_token.visible=!0,i.length>0?(this.list_token.selectedIndex=-1,this.list_token.selectedIndex=0):(this.list_token.selectedIndex=-1,this.tf_token.text="N/A")}else this.list_token.array=[],this.list_token.selectedIndex=-1,this.tf_token.text="N/A";break;case 2:if(e){let r=this.list_web2.selectedItem;var n=I.intance.getTokensByChainId(r,this.currTab);this.list_token2.array=n,this.list_token2.visible=!0,n.length>0?(this.list_token2.selectedIndex=-1,this.list_token2.selectedIndex=0):(this.list_token2.selectedIndex=-1,this.tf_token2.text="N/A")}else this.list_token2.array=[],this.list_token2.selectedIndex=-1,this.tf_token2.text="N/A";break;case 6:this.list_token3.array=this.tokenDataAir,this.list_token3.visible=!0,this.list_token3.selectedIndex=0,this.tf_token3.text=`${this.tokenDataAir[0]}`;break;default:break}}onHideList(e){console.log("onHideList"),!(e.target&&e.target.selectImg)&&(this.img_web_pad.visible=!1,this.img_token_pad.visible=!1,this.img_web_pad2.visible=!1,this.img_token_pad2.visible=!1,this.img_token_pad3.visible=!1,this.img_token_pad4.visible=!1,this.img_logType_pad.visible=!1,this.img_logDate_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList))}async initContainer(){await this.createWebList()}async initContainerAir(){this.createTokenList(!0)}async getRestCoin(e){console.log("getRestCoin");try{let i=await K.instance.getBalance2(e.token),n=e.tokenDecimals,r=ii(i,n);this.tf_rest.text=`${ce.truncateToTwoDecimalPlaces(Number(r))}`}catch(i){if(i instanceof Error){let n=i.message;console.log("剩余货币错误",n)}this.tf_rest.text="0"}}async initNetComboBox(){let e=await K.instance.walletClient.getChainId();if(e)switch(this.currTab){case 1:let i=this.list_web.array.findIndex(r=>r==e);this.list_web.selectedIndex=-1,this.list_web.selectedIndex=i,i==-1&&(this.tf_web.text="N/A",this.createTokenList(!1));break;case 2:let n=this.list_web2.array.findIndex(r=>r==e);this.list_web2.selectedIndex=-1,this.list_web2.selectedIndex=n,n==-1&&(this.tf_web2.text="N/A",this.createTokenList(!1));break;case 6:this.handleSelectTokenAir(0);break;default:break}}async switchChain(e=!0){try{let i,n;switch(this.currTab){case 1:n=this.list_web.selectedItem;break;case 2:n=this.list_web2.selectedItem;break;case 6:break;default:break}let r=await K.instance.walletClient.getChainId();if(n!==r&&!await K.instance.switchChain(n)){console.log("切换失败，请手动切换"),await this.addChain(),await this.initNetComboBox();return}return}catch(i){if(i instanceof Error){let n=i.message;(n.includes("Unrecognized chain ID")||n.includes("An unKnown PRC"))&&await this.addChain()}this.initNetComboBox()}}async addChain(){let e;this.currTab===1?e=this.list_web.selectedItem:e=this.list_web2.selectedItem,await K.instance.addChain(e);let i=await K.instance.walletClient.getChainId();i&&this.switchChain(i)}async handleSelectLeft(e){let i=this.list_left.selectedItem;this.onClickTab(e+1)}onLeftItemRender(e,i){e&&e.onChange&&e.onChange(this.list_left.selectedIndex==i)}async handleSelectWeb(e){if(e!=-1){let i=this.list_web.selectedItem;this.tf_web.text=K.instance.getChainName(i),this.createTokenList(!0),await this.switchChain(!0)}else this.createTokenList(!1)}async handleSelectWebWithdraw(e){if(e!=-1){let i=this.list_web2.selectedItem;this.tf_web2.text=K.instance.getChainName(i),this.createTokenList(!0),await this.switchChain(!0)}else this.createTokenList(!1)}handleSelectToken(e){if(e!=-1){var i=this.list_token.selectedItem;this.tf_token.text=i.name,this.refreshToken()}}async refreshWithdrawData(){this.handleSelectTokenWithdraw(this.list_token2.selectedIndex)}async handleSelectTokenWithdraw(e){if(e!=-1){var i=this.list_token2.selectedItem;this.tf_token2.text=i.name;let r=0,s=i.id,o=i.chainId;r=v.instance.getConsumeValue(s),this.tf_appAmount.text=`${ce.truncateToTwoDecimalPlaces(r)}`;let l=I.intance.getACoin(o,s);l&&(this.tf_servicerate.text=`${l.Commission/100}%`);var n=await w.requestPost("wxgame/payOrder/query",{chainId:o});if(n&&n.selfData){let u=this.searchRestMoney(n.selfData,s);this.tf_canAmount.text=`${ce.truncateToTwoDecimalPlaces(u)}`}}}async handleSelectTokenAir(e){if(e!=-1){this.wbnbRate=0,this.tf_token3.text=`${this.tokenDataAir[e]}`,this.allProp=await this.getItemByType();let i=I.intance.getPuzzleExchangeByName(this.tf_token3.text),n=i.items,r=i.redeemTickets,s=new Xe;s.m_iId=r[0],s.m_iNum=r[1],this.img_extRe.skin=M.instance.getItemIcon(s.itemItem.icon);let o=this.getAirdropArrData(this.allProp,n);this.puzzleNum==0?this.btn_Combine.disabled=!0:this.btn_Combine.disabled=!1,this.listPuzzle.array=o,this.addPuzzleNum=0,this.tf_token3.text=="WICP"||this.tf_token3.text=="WKLAY"||this.tf_token3.text=="WBNRY",this.puzzleNum==0?(this.tf_extraRec.text="0",this.tf_ExtractNum.text="0",this.addPuzzleNum=0):(this.addPuzzleNum=1,this.showExtraNum(1))}}async initTokenArray(e){let i=this.tokenTransData[e];if(i==Be.TYPE_BNRY||i==Be.TYPE_BNB){let r=new ku;r.checked=!0,r.num=0,ie.vType!==2?r.openid="0x4774aF1F0fc3B81c080955ae2eEA8e98AF5E1191":r.openid="0x7571FeB15D5043B2A9e38786d424b5e7a02a5cB2",r.noInput=!0;var n=await w.requestPost("wxgame/sys/queryName",{openid:r.openid.toLowerCase()});r.playerName=n.name,this.list_address.array=[r]}else this.list_address.array=[null]}handleSelectTokenTrans(e){if(e!=-1){let n=this.tokenTransData[e];this.initTokenArray(e);var i=I.intance.m_dicItems.get(n);this.tf_tokenName.text=p.instance.getLanguage(i.name),this.currencyTokenId=n;let r=v.instance.getConsumeValue(n);r<1e-6&&(r=0),this.tf_tokenAmount.text=`${ce.formatNumber(r)}`,this.img_token.skin=M.instance.getMoneyIcon(n)}this.img_token_pad4.visible=!1}async showExtraNum(e){this.tf_extraRec.text=`${e}`,this.tf_ExtractNum.text=`${this.addPuzzleNum}`}getAirdropArrData(e,i){let n=[];this.puzzleNum=0;for(let s=0;s<i.length;s++){let o=e.find(l=>l.itemItem.id==i[s][0]);if(o){n.push(o);let l=Pe.formatNumber(o.m_iNum,8);n.length==1?this.puzzleNum=l:this.puzzleNum=Math.min(this.puzzleNum,l)}else{var r=new Xe(i[s][0]);r.newAddCnt=0,n.push(r),this.puzzleNum=0}}return this.refreshRestExtraValue(),n}refreshRestExtraValue(){let e=I.intance.getPuzzleExchangeByName(this.tf_token3.text).value,i=I.intance.getPuzzleExchangeByName("WBNB").value,n=`${this.puzzleNum*i}U / `;switch(this.tf_token3.text){case"WTOX":n+=`${Pe.filterNumFormat(this.puzzleNum*e,2)}WTOX`;break;case"WBNB":n+=`${Pe.filterNumFormat(this.puzzleNum*e*this.wbnbRate,6)}WBNB`;break;case"WGALA":n+=`${Pe.filterNumFormat(this.puzzleNum*e*this.wbnbRate,6)}WGALA`;break;case"WGGG":n+=`${Pe.filterNumFormat(this.puzzleNum*e*this.wbnbRate,6)}WGGG`;break;case"WICP":n+="?WICP";break;case"WKLAY":n+="?WKLAY";break;case"WBNRY":n+="?WBNRY";break;default:break}this.tf_extraVal.text=n}onRechargeCodeInput(){let e=Number(this.rechargeCode.text),i=ce.isNumber(this.rechargeCode.text);(e<0||!i)&&(this.rechargeCode.text="0")}testRechargeCodeInput(){let e=Number(this.rechargeCode.text);this.rechargeCode.text=`${ce.formatNumber(e)}`}async onbtnCardPay(){O.intance.openModule(L.CardPayView,1)}async onbtnConfirm(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1}),this.testRechargeCodeInput();let e=Number(this.tf_rest.text),i=Number(this.rechargeCode.text),n=await K.instance.walletClient.getChainId();if(!i){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(33),W.YES);return}if(e<i){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(34),W.YES);return}var r=this.list_token.selectedItem;if(!r){C.instance.notice(p.instance.getLanguage(1801));return}_e.instance.showLoadingByInfo();let s=r.tokenAddress;await hs.instance.rechargeToken(i,r,s)&&(this.getRestCoin(r),v.instance.rechargeEnd=!0)}async refreshToken(){console.log("refreshToken");try{var e=this.list_token.selectedItem;let i=await K.instance.getBalance2(e.token),n=e.tokenDecimals,r=ii(i,n);this.tf_rest.text!==r&&(this.tf_rest.text=`${ce.truncateToTwoDecimalPlaces(Number(r))}`,Laya.timer.clear(this,this.refreshToken))}catch{this.tf_rest.text="0"}}onbtnMax(){let e=Number(this.tf_rest.text);this.rechargeCode.text=`${e}`}initTokenWebData(){this.webData=[],this.webDataWithdraw=[];var e=I.intance.getGeneralValueById(7),i=I.intance.getGeneralValueById(8);e&&(ie.vType==2?(this.webData=e[2],this.webDataWithdraw=i[2]):ie.vType==1?(this.webData=e[1],this.webDataWithdraw=i[1]):(this.webData=e[0],this.webDataWithdraw=i[0]))}initTokenWebDataAir(){this.tokenDataAir=["WTOX","WBNB","WGGG","WGALA","WICP","WKLAY","WBNRY"]}initTokenTransData(){this.tokenTransData=I.intance.getGeneralValueById(31);var e=[];for(let n of this.tokenTransData){var i=I.intance.m_dicItems.get(n);i&&e.push(p.instance.getLanguage(i.name))}this.list_token4.array=e}changeAssetChain(){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(36),W.YES,Laya.Handler.create(this,()=>{this.switchChain(!0)}))}onHireRecord(){O.intance.openModule(L.HireDetailDialog)}onProxyRecord(){O.intance.openModule(L.ProxyDetailDialog)}async onClaimHire(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=await w.requestPost("wxgame/lease/take",{});if(e&&e.reward.length>0){let i=e.reward,n=[];i.forEach(r=>{var s=new Xt;s.id=r.id,s.count=r.count,n.push(s)}),O.intance.openModule(L.RewardGetDialog,n)}this.showHireData()}}async onClaimProxy(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=await w.requestPost("wxgame/lease/childTake",{});if(e&&e.reward&&e.reward.length>0){let i=e.reward;O.intance.openModule(L.RewardGetDialog,i)}this.showProxyData()}}async onClaimGuild(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=await w.requestPost("wxgame/money/unionBonusTake",{});if(e&&e.reward.length>0){let i=e.reward,n=[];i.forEach(r=>{var s=new Xt;s.id=r.id,s.count=r.count,n.push(s)}),O.intance.openModule(L.RewardGetDialog,n)}this.showGuildData()}}async onClaimRem(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=await w.requestPost("wxgame/money/remRewardTake",{});if(e&&e.list.length>0){let i=e.list,n=[];i.forEach(r=>{var s=new Xt;s.id=r.id,s.count=r.count,n.push(s)}),O.intance.openModule(L.RewardGetDialog,n)}this.showRecommendData()}}onRechargewithdrawCodeInput(){let e=Number(this.withdrawCode.text),i=ce.isNumber(this.withdrawCode.text);(e<0||!i)&&this.withdrawCode.text!==this.withdrawText&&(this.withdrawCode.text="0")}async testInputData(){let e=Number(this.withdrawCode.text);var i=this.list_token2.selectedItem;let n=i.id,r=i.chainId,s=I.intance.getACoin(r,n);if(!s)return;let o=Number(this.tf_appAmount.text);e>o?C.instance.notice(Oe.instance.get(111)):e>s.maxAmount?C.instance.notice(p.instance.getLanguage(1211,s.maxAmount)):e<s.minAmount&&C.instance.notice(p.instance.getLanguage(1212,s.minAmount));let l=s.Commission,u=e*(1-l/1e4);n==Be.TYPE_TOX&&r==Ha.id?this.tf_arrive.text=`${u.toFixed(2).replace(/\.?0+$/,"")}`:this.tf_arrive.text=`${u.toFixed(8).replace(/\.?0+$/,"")}`}async onBtnWithdraw(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});let e=Number(this.tf_appAmount.text);var i=this.list_token2.selectedItem;let n=i.id,r=i.chainId,s=Number(this.withdrawCode.text),o=I.intance.getACoin(r,n);if(!o)return;let l=o.Commission,u=new Tt(l/1e4),m=new Tt(s),h=u.multiply(m).getValue();if(s>e){C.instance.notice(Oe.instance.get(111));return}if(s>o.maxAmount){C.instance.notice(p.instance.getLanguage(1211,o.maxAmount));return}else if(s<o.minAmount){C.instance.notice(p.instance.getLanguage(1212,o.minAmount));return}if(ie.vType==2&&r==fs.id&&!await K.instance.getAuthStatus()){C.instance.notice(Oe.instance.get(113));return}if(i.bankAddress&&i.bankAddress.length>10){let N=await K.instance.getBankBalance(i.token,i.bankAddress,i.name);if(console.log("contractBalance: "+N),N){let F=i.tokenDecimals,G=ii(N,F),Y=Number(G);if(console.log("银行余额 constNum: "+Y),Y<s){_e.instance.hideLoading(),C.instance.notice(p.instance.getLanguage(1356,i.name));return}}}let y=Number(this.tf_arrive.text),x=new Tt(s).multiply(new Tt(1).subtract(new Tt(l).divide(new Tt(1e4))));n==Be.TYPE_TOX&&r==Ha.id,y=Number(x.getValue()),console.log("payMoney: ",s,"fee: ",h,"arriveMoney: ",y);let S=I.intance.getCurrency(n,r).token||oe.ADDRESS0,T=await w.requestPost("wxgame/payOrder/create",{chainId:r,coinType:n,payMoney:s,fee:h,arriveMoney:y,token:S});T&&T.errorCode==0&&he.NoHeroError("Pending Review")}onBtnWithdrawRecord(){O.intance.openModule(L.WithDrawRecordDialog)}onBtnNodeRevenueRecord(){O.intance.openModule(L.NodeRevenueRecordDialog)}searchRestMoney(e,i){for(let n=0;n<e.length;n++)if(e[n][0]===i)return e[n][1];return 0}async onBtnCombine(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});let i=I.intance.getPuzzleExchangeByName(this.tf_token3.text).id;var n=await w.requestPost("wxgame/equip/puzzleExchangeTicket",{puzzleId:i,count:this.addPuzzleNum});if(n){let s=await w.requestPost("wxgame/hero/bagList",{},!0,!0);v.instance.m_packageData.initData(s.data),this.handleSelectTokenAir(this.list_token3.selectedIndex);let o=n.reward;if(o){var r=new Xt;r.id=o[0].id,r.count=o[0].count,O.intance.openModule(L.RewardGetDialog,[r])}}}async onBtnAddExtr(){}async getItemByType(){var e=rt.TYPE_Consumption;this.items=[];for(var i=v.instance.m_packageData.getBackByType(e),n=0;n<i.length;n++){var r=i[n];r?this.items.push(r):this.items.push(new Xe(0))}return this.items}onBtnJianE(){this.addPuzzleNum=Math.max(0,this.addPuzzleNum-1),this.addPuzzleNum<=0?(this.tf_extraRec.text="0",this.tf_ExtractNum.text="0",this.btn_Combine.disabled=!0):this.showExtraNum(this.addPuzzleNum)}onBtnAddE(){this.addPuzzleNum=Math.min(this.puzzleNum,this.addPuzzleNum+1),this.showExtraNum(this.addPuzzleNum),this.addPuzzleNum>0&&(this.btn_Combine.disabled=!1)}onBtnAddMax(){this.puzzleNum<=0||(this.addPuzzleNum=this.puzzleNum,this.showExtraNum(this.addPuzzleNum))}onBtnAirRecord(){O.intance.openModule(L.AirdropRecordDialog)}onAddMoneyAddress(){console.log("onAddMoneyAddress: ",this.list_address.array);let e=new ku;e.num=0,this.list_address.array||(this.list_address.array=[null]),this.list_address.setItem(this.list_address.array.length-1,e),this.list_address.addItem(null),this.list_address.refresh(),this.list_address.tweenTo(this.list_address.array.length-1)}async onTransferMoney(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=[];let i=0;this.list_address.array.forEach(s=>{s&&s.checked&&s.playerName&&s.openid&&s.num>0&&(e.push({address:s.openid,num:s.num}),i+=s.num)});let n=Number(this.tf_tokenAmount.text);if(i>n){C.instance.notice(Oe.instance.get(56));return}if(e.length>0){let s=this.currencyTokenId;var r=await w.requestPost("wxgame/welfare/coinTransfer",{list:e,id:s});if(r){let o=r.remainingCoin;s==o[0]&&(this.tf_tokenAmount.text=`${ce.formatNumber(o[1])}`),C.instance.notice(p.instance.getLanguage(2e3));let l=Laya.Handler.create(this,()=>{this.list_address.array=[null]});s!==Be.TYPE_BNRY&&s!==Be.TYPE_BNB&&Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1551),W.SURE,l)}else C.instance.notice(p.instance.getLanguage(135))}else C.instance.notice(p.instance.getUILang("Please enter the recipient address."))}async refreshMoney(){var e=await w.requestPost("wxgame/money/panel",{});if(e&&this.currTab==2){let i=ce.getCurrencyIdByName(this.tf_token2.text),n=v.instance.getConsumeValue(i);this.tf_appAmount.text=`${ce.truncateToTwoDecimalPlaces(n)}`}}initLogList(){var e=I.intance.getGeneralValueById(21);this.list_logType.array=e,this.list_logType.selectedIndex=0;var i=I.intance.getGeneralValueById(22);this.list_logDate.array=i,this.list_logDate.selectedIndex=0,console.log(e)}onlogTypeRender(e,i){e&&e.onChange&&e.onChange(this.list_logType.selectedIndex==i)}onlogDateRender(e,i){e&&e.onChange&&e.onChange(this.list_logDate.selectedIndex==i)}handleSelectLogType(e){if(e!=-1){let i=this.list_logType.selectedItem;this.tf_selectLog.text=`${p.instance.getLanguage(i)}`}}handleSelectLogDate(e){if(e!=-1){let i=this.list_logDate.selectedItem;this.tf_selectLogDate.text=`${p.instance.getLanguage(i)}`}}async searchLogArray(e=!1){let i;switch(this.list_logType.selectedItem){case 1536:i=0;break;case 1537:i=2;break;case 1538:i=12;break;case 1539:i=20;break;case 1540:i=19;break;case 1541:i=6;break;case 1542:i=23;break;case 1549:i=31;break;case 1550:i=1;break;default:i=0;break}let n=this.list_logDate.selectedIndex+1;n==6&&(n=0),e&&(this.logPage=1),this.isSearch=!0;let r=await w.requestPost("wxgame/player/itemRecordPageList",{pageSize:10,pageIndex:this.logPage,logType:i,timeType:n});this.list_recordLog.array=r.list,this.tf_pearchPage.text=`${this.logPage}/${r.pages}`,this.logPageSize=r.pages,console.log(r)}onBtnRightAndRight(e){let i=this.logPage;e?this.logPage=Math.min(this.logPageSize,this.logPage+1):this.logPage=Math.max(1,this.logPage-1),i!==this.logPage&&this.searchLogArray()}};gy=d([UB("lWg_-biNSI2538WxA3KVVw")],gy);var{regClass:FB,property:G1}=Laya,Au=Laya.Browser,VB=Laya.Render,GB=Laya.SpriteUtils,St=class extends Laya.Script{constructor(){super();St.instance=this}onEnable(){this.videoBtn.on(Laya.Event.MOUSE_DOWN,this,()=>{this.createElementVideo()})}createElementVideo(){Au.window.IframeElementRT=this;var e="aa289ea0-a5fc-41df-8288-7961c1b4cc87",i="1982f465-31d2-414b-ac52-5522e695a3c0";let n="https://uat-paymentapi.bitzaro.com/widget";var r=K.instance.walletAddress,s=v.instance.playerDto.pid,o="shasta",l="usdt";if(ie.vType==2){var o="binance",l="usdt";n="https://paymentapi.bitzaro.com/widget";let y=window.location.hostname;var u={"app.phantomarena.ai":{email:"ceo@phantomarena.co",apiKey:"f2761d89-6305-4efe-b01b-a5c6c98f6d97",secretKey:"fe672313-dc47-42fc-9b6e-bf458f418255"},"www.phantomarena.ai":{email:"alanhung8888@gmail.com",apiKey:"daf670b4-10ab-4cfc-a91e-c41da2dc1112",secretKey:"0269186d-b10f-4ee4-8932-2dcdf1dc57b3"},"app.phantomarena.co":{email:"Clara.tuong@gmail.com",apiKey:"dcc9e12d-bcaa-4a95-832f-ccd455141684",secretKey:"7113752a-425e-434a-905f-7c35ce86e11a"},"www.phantomarena.co":{email:"yenlinh.tuong@gmail.com",apiKey:"5a6d0862-7f08-44d2-bd91-11d681fccfbe",secretKey:"87a01e91-7c36-48f1-9be1-57e98de0416b"}}[y];u&&(console.log("domain:",y),e=u.apiKey,i=u.secretKey)}getPayApi(n,e,i,r,o,l,s,this.createElementVideoDetail)}createElementVideoDetail(e){var i=e.link;i?(St.instance.createScript(),St.instance.createDiv(),St.instance.createIframe(i),St.instance.setDOMElementInArea(),Laya.stage.on(Laya.Event.RESIZE,St.instance,St.instance.setDOMElementInArea)):(console.error(e.message),St.instance.videoBtn.label=e.message)}setDOMElementInArea(){this.iframeElement!=null&&GB.fitDOMElementInArea(this.iframeElement,this.iframeBox,0,0,this.iframeBox.width,this.iframeBox.height)}createScript(){this.scriptElement=Au.document.createElement("script"),Au.document.body.appendChild(this.scriptElement),this.scriptElement.innerHTML="function closeVideo(){IframeElementRT.closeVideo() }"}createIframe(e){this.iframeElement=Au.createElement("iframe"),Au.document.body.appendChild(this.iframeElement),this.iframeElement.style.zIndex=VB.canvas.style.zIndex+998,this.iframeElement.src=e,this.iframeElement.allow="camera; microphone",this.iframeElement.style.margin="0",this.iframeElement.style.frameborder="0",this.iframeElement.style.border="none",this.iframeElement.style.borderRadius="0.5rem",this.iframeElement.style.background="white",this.iframeElement.style.padding="0",this.iframeElement.style.left="0",this.iframeElement.style.top="0px",this.iframeElement.style.position="absolute"}createDiv(){}closeVideo(){Laya.Browser.document.body.removeChild(this.scriptElement),Laya.Browser.document.body.removeChild(this.iframeElement),this.scriptElement=this.iframeElement=null,Laya.stage.off(Laya.Event.RESIZE,this,this.setDOMElementInArea)}};d([G1({type:Laya.Button})],St.prototype,"videoBtn",2),d([G1({type:Laya.Box})],St.prototype,"closeBox",2),d([G1({type:Laya.Box})],St.prototype,"iframeBox",2),St=d([FB("ZtMxoJHQTWipjGWyGV51jQ")],St);var _y=class extends Laya.Dialog{};var{regClass:WB}=Laya,Ly=class extends _y{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.currTab=0}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack);for(let e=1;e<3;e++)this["btn_"+e].on(Laya.Event.CLICK,this,this.onClickTab,[e])}setOpenData(e){console.log("setOpenData: ",e),this.itemVo=e,this.onClickTab(1),this.callLater(this.createIframe)}createIframe(){St.instance.iframeElement&&St.instance.closeVideo(),!St.instance.iframeElement&&St.instance.createElementVideo()}onClickTab(e){this.currTab!=e&&(this.currTab=e,this.setTab(e),e==1?this.alertDesc.text=I.intance.getGeneralValueById(33):e==2&&(this.alertDesc.text=I.intance.getGeneralValueById(34)))}setTab(e){for(let i=1;i<3;i++)e==i?(this["btn_"+i].getChildByName("btn_yellowBg").visible=!0,this["btn_"+i].getChildByName("Label").color="#ffffff"):(this["btn_"+i].getChildByName("btn_yellowBg").visible=!1,this["btn_"+i].getChildByName("Label").color="#64b4ec")}onBack(){this.close()}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.onBack),St.instance.iframeElement&&St.instance.closeVideo()}};Ly=d([WB("VKTfedC1Q_2f1d3bFS4oYQ")],Ly);var vy=class extends Laya.Dialog{};var{regClass:jB}=Laya,xy=class extends vy{constructor(){super()}onEnable(){this.list_champ.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1)}setOpenData(t){t&&t instanceof Array&&(this.list_champ.array=t,!t||t.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}onItemRender(t,e){t.onSetIndex(e)}onDisable(){}};xy=d([jB("mXj9kkXUQny2iuvlC1REmA")],xy);var Iy=class extends Laya.Box{};var{regClass:zB}=Laya,Ey=class extends Iy{set dataSource(e){super.dataSource=e,this.welfareDto=e,this.welfareDto&&this.setCurrentOutPut()}onSetIndex(e){this.tf_id.text=e+1+""}setCurrentOutPut(){this.tf_createDate.text=fe.formatTimeStamp(this.welfareDto.createDate,"YY-MT-DD");let e=this.welfareDto.coinType;this.img_coinType.skin=M.instance.getMoneyIcon(e),this.tf_type.text=p.instance.getUILang("Staking_Type_"+this.welfareDto.type),this.tf_coinValue.text=Pe.formatNumberStr(this.welfareDto.coinValue,8),this.tf_remainValue.text=Pe.formatNumberStr(this.welfareDto.remainValue,8),this.tf_remainDays.text=this.welfareDto.remainDays+""}};Ey=d([zB("b0cMZEy9S5q2q_vqsjWzDA")],Ey);var wy=class extends Laya.Box{};var{regClass:KB}=Laya,Ty=class extends wy{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_claim.on(Laya.Event.CLICK,this,this.onClaim),this.isAddEvent=!0)}async onClaim(){if(this.welfareOutlineDto.takeValue>0){let i=await w.requestPost("wxgame/welfare/take",{coinType:this.welfareOutlineDto.coinType});if(i){var e=new Xt;e.id=i.coinType,e.count=i.coinValue,O.intance.openModule(L.RewardGetDialog,[e]),_.intance.event(b.EVENT_WELFARE_CLAIM,i)}else C.instance.notice(p.instance.getLanguage(135))}}set dataSource(e){super.dataSource=e,this.welfareOutlineDto=e,this.welfareOutlineDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.welfareOutlineDto.coinType;this.img_coinType.skin=M.instance.getItemIcon(e),this.tf_allValue.text=Pe.formatNumberStr(this.welfareOutlineDto.allValue,8),this.tf_todayRelease.text=Pe.formatNumberStr(this.welfareOutlineDto.todayRelease,8),this.tf_takeValue.text=Pe.formatNumberStr(this.welfareOutlineDto.takeValue,8),this.btn_claim.disabled=this.welfareOutlineDto.takeValue<=0}};Ty=d([KB("XTGeF2FhTp2j7VZIhqRAtg")],Ty);var Cy=class extends Laya.Dialog{};var{regClass:qB}=Laya,Sy=class extends Cy{constructor(){super()}onEnable(){this.list_champ.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1)}setOpenData(t){t&&t instanceof Array&&(this.list_champ.array=t,!t||t.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}onItemRender(t,e){t.onSetIndex(e)}onDisable(){}};Sy=d([qB("RzcjHDjIS62Ejw744kaKKw")],Sy);var Dy=class extends Laya.Box{};var{regClass:YB}=Laya,ky=class extends Dy{set dataSource(e){super.dataSource=e,this.welfareTakeDto=e,this.welfareTakeDto&&this.setCurrentOutPut()}onSetIndex(e){this.tf_id.text=e+1+""}setCurrentOutPut(){this.tf_takeTime.text=fe.formatTimeStamp(this.welfareTakeDto.takeTime,"YY-MT-DD");var e=this.welfareTakeDto.reward,i=[];e&&e.forEach(n=>{var r=new Xe(n.id);r.newAddCnt=n.count,i.push(r)}),this.list_reward.array=i}};ky=d([YB("0TASbeEtRlmozr-j6sElTw")],ky);var Ay=class extends Laya.Dialog{};var{regClass:$B}=Laya,My=class extends Ay{constructor(){super()}onEnable(){this.setOpenData(),this.list_sum.visible=!1,this.list_sumProp.visible=!1,this.list_champ.visible=!1}async setOpenData(){var t=await w.requestPost("wxgame/lease/takeList",{});if(t){let i=t.list;i=ce.addIndexToObjects(i),this.list_champ.array=i,this.list_champ.visible=!0;let n=ce.sumItemCount(i),r=ce.processItemsArray(n,!1),s=r[0],o=r[1];this.list_sum.array=s,this.list_sum.visible=!0,s.length>3?this.list_sum.y=506:this.list_sum.y=533;var e=[];o.forEach(l=>{var u=new Xe(l.id);u.newAddCnt=l.count,e.push(u)}),this.list_sumProp.array=e,this.list_sumProp.visible=!0}}onDisable(){}};My=d([$B("ZG7XYFvMTD-oZPNAmJhfIQ")],My);var By=class extends Laya.Box{};var{regClass:XB}=Laya,Ry=class extends By{constructor(){super()}set dataSource(e){super.dataSource=e,this.itemDto=e,this.itemDto&&this.setCurrentOutPut()}async setCurrentOutPut(){let e=this.itemDto.id;this.img_coinType.skin=M.instance.getItemIcon(e),this.tf_takeValue.text=Pe.formatNumberStr(this.itemDto.count,8)}};Ry=d([XB("S4XctoHfRm66A2jjw3rSsQ")],Ry);var Py=class extends Laya.Box{};var{regClass:QB}=Laya,Ny=class extends Py{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.btnName=e,e=="Guild"&&v.instance.playerDto.unionLeader!==1?this.disabled=!0:this.disabled=!1,this.tf_txt.text=this.btnName,this.addEvent()}onChange(e){e?(this.selectBox.visible=!0,this.tf_txt.color="#143f6b"):(this.selectBox.visible=!1,this.tf_txt.color="#4e87b7")}};Ny=d([QB("cbJ24As0TNGTuTkEeEDFzQ")],Ny);var Oy=class extends Laya.Box{};var{regClass:JB}=Laya,Hy=class extends Oy{set dataSource(e){super.dataSource=e,e&&(this.tf_data.text=p.instance.getLanguage(e))}onDisable(){}onChange(e){e?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};Hy=d([JB("mPcFFRzmR82zTzTJafri7Q")],Hy);var Uy=class extends Laya.Box{};var{regClass:ZB}=Laya,Fy=class extends Uy{constructor(){super();this.isAddEvent=!1;this.addL=1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.tf_uid.on(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.on(Laya.Event.FOCUS,this,this.uidFocus),this.btn_add.on(Laya.Event.CLICK,this,this.onAdd),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.isAddEvent=!0,this.tf_num.on(Laya.Event.BLUR,this,this.testRechargeCodeInput))}testRechargeCodeInput(){let e=Number(this.tf_num.text),i=ce.isNumber(this.tf_num.text);if(e<0||!i)this.tf_num.text="",this.addL=0;else{let n=ce.formatNumber(e);this.tf_num.text=`${n}`,this.addL=n}this.setItemNum()}set dataSource(e){super.dataSource=e,this.moneyAddressVo=e,this.moneyAddressVo?(this.btn_add.visible=!1,this.box_address.visible=!0,this.tf_uid.text=this.moneyAddressVo.openid,this.tf_player_name.text=this.moneyAddressVo.playerName,this.tf_uid.disabled=e.noInput,console.log("data1: ",e),this.addL=this.moneyAddressVo.num,this.setItemNum()):(this.btn_add.visible=!0,this.box_address.visible=!1,console.log("data2: ",e)),this.addEvent()}onAdd(){_.intance.event(b.EVENT_ADD_MONEY_ADDRESS)}async setPlayerName(){try{if(this.tf_uid.text=="")return;this.moneyAddressVo.openid=this.tf_uid.text.toLowerCase();var e=await w.requestPost("wxgame/sys/queryName",{openid:this.tf_uid.text.toLowerCase()});e&&(console.log(e),this.tf_player_name.text=e.name,this.moneyAddressVo.checked=!0,this.moneyAddressVo.playerName=e.name)}catch{}}uidFocus(){this.moneyAddressVo.openid="",this.moneyAddressVo.playerName="",this.moneyAddressVo.checked=!1,this.tf_uid.text="",this.tf_player_name.text=""}handleClickBtn(e){switch(e){case this.btn_reduce:this.addL>1&&(this.addL=ce.formatNumber(this.addL-1)),this.setItemNum();break;case this.btn_plus:this.addL=ce.formatNumber(this.addL+1),this.setItemNum();break}}setItemNum(){this.addL?this.tf_num.text=this.addL+"":this.tf_num.text="",this.moneyAddressVo.num=this.addL}onDisable(){this.removeEvent()}removeEvent(){this.tf_uid.off(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.off(Laya.Event.FOCUS,this,this.uidFocus),this.btn_add.off(Laya.Event.CLICK,this,this.onAdd),this.tf_num.off(Laya.Event.BLUR,this,this.testRechargeCodeInput)}};Fy=d([ZB("J6QFYTIIQjqstznXD28nBA")],Fy);var Vy=class extends Laya.Box{};var Gy=class a{constructor(){this.lastTime=0}static get instance(){return a._instance||(a._instance=new a),a._instance}async buyItemOnChain(t){var e=new Date().getTime();if(e-this.lastTime<1e3)return;this.lastTime=e;var i=t.chainId,n=I.intance.getNodeCurrencyByTokenAndChainId(t.token,t.chainId);let r=n.id;_e.instance.showLoadingByInfo(p.instance.getLanguage(1119));let s=n.nodeRevenueAddress,o=K.instance.walletAddress,l=await K.instance.walletClient.getChainId();try{if(l!==i&&!await K.instance.switchChain(i)){this.onEndItemCallback(),console.log("===>> 切换失败，请手动切换");return}let ne=n.token;if(!ne){this.onEndItemCallback(),C.instance.notice(p.instance.getLanguage(1177,l));return}if(!s){this.onEndItemCallback(),C.instance.notice(p.instance.getLanguage(1174,l));return}var u=0,m=t.amount;let ue=new Tt(m);console.log("===>> 获取当前余额 tokenAddress: "+ne+", chainIDData:"+i);let se=ia(ue.getValue()+"",n.tokenDecimals);if(n.nodeRevenueAddress&&n.nodeRevenueAddress.length>10){let me=await K.instance.getBankBalance(n.token,n.nodeRevenueAddress,n.name);if(console.log("contractBalance: "+me),me){let ke=n.tokenDecimals,Me=ii(me,ke),V=Number(Me);console.log("银行余额 constNum: "+V);let Ye=Number(ue.getValue());if(V<Ye){this.onEndItemCallback(),C.instance.notice(p.instance.getLanguage(1356,n.name));return}}console.log("===>> 开始验证 tokenAddress: "+ne+", chainIDData:"+i+", need:"+se+", have:"+me+", 转换后 need:"+ii(se,n.tokenDecimals)+", have:"+ii(me,n.tokenDecimals))}var h={token:n.token,chainId:i,amount:m};let Ie=await w.requestPost("paWallet/buyNodeRewardTake",h).catch(me=>{console.log("===>> 检验失败"),this.onEndItemCallback(),_e.instance.hideLoading()});if(!Ie)return!1;var y=Ie.sender,x=Ie.token;let Ce=Ie.amount,te=BigInt(Ce.toString());var E=Ie.pid,S=Ie.orderId,T=Ie.deadline,N=Ie.signature;this.orderId=S;var F=Number(te)==Number(se);if(console.log("===>> 服务端: amount: "+te+", 客户端: need:"+se+", 是否一致:"+F+", signature:"+N),!F||N=="")return C.instance.notice(p.instance.getLanguage(2001)),console.log("===>> 签名失败: 【amount不一致】 或者 【签名为空】 或者 【orderId是0】 orderId:"+S),this.onEndItemCallback(),_e.instance.hideLoading(),!1;var G=await K.instance.walletClient.writeContract({address:s,abi:oe.nodeWithdrawToken_ABI,functionName:"withdrawToken",args:[y,x,te,E,S,T,N],account:o});let et;return et=await K.instance.publicClient.waitForTransactionReceipt({hash:G,pollingInterval:1e3}),console.log(`Tx with hash: ${G}`,et),et&&et.status=="success"?(this.waitGetQuanReward(i,G),console.log(`Tx successful with hash: ${G}`),G):(this.onEndItemCallback(),he.TransactionErrorTip(),!1)}catch(ne){var Y=ne.shortMessage;if(Y)if(Y.indexOf("does not match")!=-1){var Z=K.instance.getChainName(i);Y=p.instance.getLanguage(1172,Z),this.onEndItemCallback()}else Y.indexOf("User rejected the request")!=-1?this.onEndItemCallback(1):this.onEndItemCallback();else this.onEndItemCallback();if(console.log(Y),C.instance.notice(Y),ne instanceof X){let J=ne.walk(ue=>ue instanceof $t);if(J instanceof $t){let ue=J.data?.errorName??"";console.log("===>> ============errorName: "+ue)}}return null}}onEndItemCallback(t=null){_e.instance.hideLoading(),t&&_.intance.event(b.EVENT_REFRESH_NODE_ONCHAIN_STATUS,[t])}waitGetQuanReward(t,e){this.chainId=t,this.hashId=e,Laya.timer.loop(2e3,this,this.getItemReward)}async getItemReward(){var t=await w.requestPost("paWallet/buyNodeRewardTakeLoop",{orderId:this.orderId,chainId:this.chainId,hashId:this.hashId}).catch(i=>{}),e=t.status;t&&e>0&&(Laya.timer.clear(this,this.getItemReward),this.onEndItemCallback(1))}};var{regClass:eR}=Laya,Wy=class extends Vy{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_claim.on(Laya.Event.CLICK,this,this.onClaim),this.isAddEvent=!0)}async onClaim(){this.buyNodeRewardDto.amount>0&&await Gy.instance.buyItemOnChain(this.buyNodeRewardDto)}set dataSource(e){super.dataSource=e,this.buyNodeRewardDto=e,this.buyNodeRewardDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){var e=I.intance.getNodeCurrencyByTokenAndChainId(this.buyNodeRewardDto.token,this.buyNodeRewardDto.chainId);let i=e.id;this.img_coinType.skin=M.instance.getItemIcon(i);var n=I.intance.m_dicItems.get(i);this.tf_coinName.text=p.instance.getLanguage(n.name),this.tf_claimed.text=Pe.formatNumberStr(this.buyNodeRewardDto.takedAmount,8),this.tf_toBeClaimed.text=Pe.formatNumberStr(this.buyNodeRewardDto.amount,8),this.btn_claim.disabled=this.buyNodeRewardDto.amount<=0}};Wy=d([eR("mLpxdBFjTryN4itcTshIvQ")],Wy);var jy=class extends Laya.Dialog{};var{regClass:tR}=Laya,zy=class extends jy{constructor(){super()}onEnable(){this.list_champ.visible=!1,this.setOpenData()}async setOpenData(){var t=await w.requestPost("paWallet/buyNodeRewardTakeRecord",{});if(t){let e=t.records;this.list_champ.array=e,this.list_champ.visible=!0}!t.records||t.records.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}onDisable(){}};zy=d([tR("NH__XdhsQzSj7dMNXhabYg")],zy);var Ky=class extends Laya.Box{};var{regClass:iR}=Laya,qy=class extends Ky{constructor(){super()}addEvent(){}set dataSource(t){if(super.dataSource=t,!t){this.visible=!1;return}this.setData(t),this.addEvent()}setData(t){let e=fe.formatDayAndTime(t.time);this.tf_time.text=e.date+" "+e.time;var i=I.intance.getNodeCurrencyByTokenAndChainId(t.token,t.chainId);let n=i.id;var r=I.intance.m_dicItems.get(n);switch(this.tf_coinName.text=p.instance.getLanguage(r.name),this.img_coinType.skin=M.instance.getMoneyIcon(n),this.tf_amounte.text=`${t.amount}`,this.tf_network.text=K.instance.getChainName(t.chainId),t.status){case 0:this.tf_status.text="Failed",this.tf_status.color="#cd4a4a";break;case 1:var s=p.instance.getUILang("successfully");this.tf_status.text=s,this.tf_status.color="#4be063";break}}};qy=d([iR("dOQntgNfRi2U8cpYHzmOSg")],qy);var Yy=class extends Laya.Box{};var{regClass:aR}=Laya,$y=class extends Yy{constructor(){super();this.isAddEvent=!1}addEvent(){}set dataSource(e){super.dataSource=e,this.pledgeData=e,this.pledgeData&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.pledgeData.reward,i=ce.processItemsArray(e,!1),n=i[0],r=i[1];this.list_champ.array=n,n.length>3?this.list_champ.y=14:this.list_champ.y=40,this.tf_id.text=`${this.pledgeData.index+1}`;var s=[];r.forEach(o=>{var l=new Xe(o.id);l.newAddCnt=o.count,s.push(l)}),this.listHireReward.array=s,this.tf_days.text=fe.getYearMonthDat(this.pledgeData.takeTime)}};$y=d([aR("_mG5oDuaQY6l5yGUFmpG4w")],$y);var Xy=class extends Laya.Box{};var{regClass:nR}=Laya,Qy=class extends Xy{constructor(){super();this.isAddEvent=!1}addEvent(){}set dataSource(e){super.dataSource=e,this.pledgeData=e,e&&(this.addEvent(),this.setCurrentOutPut(e))}async setCurrentOutPut(e){this.img_coinType.skin=M.instance.getItemIcon(e.id),this.tf_coinValue.text=Pe.formatNumberStr(e.count,8)}};Qy=d([nR("5t1LQunTRFOali6ENPwdqQ")],Qy);var Jy=class extends Laya.Dialog{};var{regClass:rR}=Laya,Zy=class extends Jy{constructor(){super()}onEnable(){this.setOpenData(),this.list_sum.visible=!1,this.list_sumProp.visible=!1,this.list_champ.visible=!1}async setOpenData(){var t=await w.requestPost("wxgame/lease/childTakeList",{});if(t){let i=t.list;i=ce.addIndexToObjects(i),this.list_champ.array=i,this.list_champ.visible=!0;let n=ce.sumItemCount(i),r=ce.processItemsArray(n,!1),s=r[0],o=r[1];this.list_sum.array=s,this.list_sum.visible=!0,s.length>3?this.list_sum.y=506:this.list_sum.y=533;var e=[];o.forEach(l=>{var u=new Xe(l.id);u.newAddCnt=l.count,e.push(u)}),this.list_sumProp.array=e}}onDisable(){}};Zy=d([rR("hbicTwT0TxSxlRep4P48Tw")],Zy);var eb=class extends Laya.Box{};var{regClass:sR}=Laya,tb=class extends eb{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.btn_copyFrom.on(Laya.Event.CLICK,this,this.onClickCopy,[!0]),this.btn_copyTo.on(Laya.Event.CLICK,this,this.onClickCopy,[!1]))}set dataSource(e){if(super.dataSource=e,!e)return;this.recordItemVo=e,this.tf_day.text=fe.getYearMonthDat(this.recordItemVo.time),this.tf_quilty.text=`${this.recordItemVo.count}`;let i=I.intance.m_dicItems.get(this.recordItemVo.itemId);i&&(this.tf_item.text=p.instance.getLanguage(i.name)),this.setTypeData(),this.recordItemVo.from?(this.tf_from.text=`${ce.shortenString(this.recordItemVo.from,8,6)}`,this.btn_copyFrom.visible=!0):(this.tf_from.text="N/A",this.btn_copyFrom.visible=!1),this.recordItemVo.to?(this.tf_to.text=`${ce.shortenString(this.recordItemVo.to,8,6)}`,this.btn_copyTo.visible=!0):(this.tf_to.text="N/A",this.btn_copyTo.visible=!1),this.addEvent()}onClickCopy(e){e?doCopy(this.recordItemVo.from):doCopy(this.recordItemVo.to),C.instance.notice(p.instance.getLanguage(132))}setTypeData(){let e;switch(this.recordItemVo.logType){case 0:e=1536;break;case 2:e=1537;break;case 12:e=1538;break;case 20:e=1539;break;case 19:e=1540;break;case 6:e=1541;break;case 23:e=1542;break;case 31:e=1549;break;case 1:e=1550;break;default:e=1536;break}this.tf_type.text=p.instance.getLanguage(e)}onDisable(){this.removeEvent()}removeEvent(){}};tb=d([sR("DhTylrISSfmA8oRRMwHOnw")],tb);var{regClass:oR,property:W1}=Laya,Mu=Laya.Browser,lR=Laya.Render,cR=Laya.SpriteUtils,Jt=class extends Laya.Script{constructor(){super();Jt.instance=this}onEnable(){this.videoBtn.on(Laya.Event.MOUSE_DOWN,this,()=>{this.createElementVideo()})}createElementVideo(){Mu.window.IframeElementSwap=this;var e="aa289ea0-a5fc-41df-8288-7961c1b4cc87",i="1982f465-31d2-414b-ac52-5522e695a3c0";let n="http://192.168.1.145:18090/?scene=startup";var r=K.instance.walletAddress,s=v.instance.playerDto.pid,o="shasta",l="usdt";if(ie.vType==2){var o="binance",l="usdt";n="https://swap.phantomarena.ai"}this.createElementVideoDetail({link:n})}createElementVideoDetail(e){var i=e.link;i?(Jt.instance.createScript(),Jt.instance.createDiv(),Jt.instance.createIframe(i),Jt.instance.setDOMElementInArea(),Laya.stage.on(Laya.Event.RESIZE,Jt.instance,Jt.instance.setDOMElementInArea)):(console.error(e.message),Jt.instance.videoBtn.label=e.message)}setDOMElementInArea(){this.iframeElement!=null&&cR.fitDOMElementInArea(this.iframeElement,this.iframeBox,0,0,this.iframeBox.width,this.iframeBox.height)}createScript(){this.scriptElement=Mu.document.createElement("script"),Mu.document.body.appendChild(this.scriptElement),this.scriptElement.innerHTML="function closeVideo(){IframeElementSwap.closeVideo() }"}createIframe(e){this.iframeElement=Mu.createElement("iframe"),Mu.document.body.appendChild(this.iframeElement),this.iframeElement.style.zIndex=lR.canvas.style.zIndex+998,this.iframeElement.src=e,this.iframeElement.allow="camera; microphone",this.iframeElement.style.margin="0",this.iframeElement.style.frameborder="0",this.iframeElement.style.border="none",this.iframeElement.style.borderRadius="0.5rem",this.iframeElement.style.background="white",this.iframeElement.style.padding="0",this.iframeElement.style.left="0",this.iframeElement.style.top="0px",this.iframeElement.style.position="absolute"}createDiv(){}closeVideo(){Laya.Browser.document.body.removeChild(this.scriptElement),Laya.Browser.document.body.removeChild(this.iframeElement),this.scriptElement=this.iframeElement=null,Laya.stage.off(Laya.Event.RESIZE,this,this.setDOMElementInArea)}};d([W1({type:Laya.Button})],Jt.prototype,"videoBtn",2),d([W1({type:Laya.Box})],Jt.prototype,"closeBox",2),d([W1({type:Laya.Box})],Jt.prototype,"iframeBox",2),Jt=d([oR("TflWUdtMQti3Z7hjRJ3r7Q")],Jt);var ib=class extends Laya.Dialog{};var{regClass:uR}=Laya,ab=class extends ib{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.currTab=0}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack)}setOpenData(e){console.log("setOpenData: ",e),this.callLater(this.createIframe)}createIframe(){Jt.instance.iframeElement&&Jt.instance.closeVideo(),!Jt.instance.iframeElement&&Jt.instance.createElementVideo()}onBack(){this.close()}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.onBack),Jt.instance.iframeElement&&Jt.instance.closeVideo()}};ab=d([uR("MM6OVOIiThu6xYUuJDYO3Q")],ab);var nb=class extends Laya.Box{};var{regClass:pR}=Laya,rb=class extends nb{set dataSource(e){if(super.dataSource=e,e){var i=e;this.tf_data.text=K.instance.getChainName(i)}}onDisable(){}onChange(e){e?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};rb=d([pR("psWSlYJaS8O0LUu-BH6R2Q")],rb);var sb=class extends Laya.Box{};var{regClass:mR}=Laya,ob=class extends sb{set dataSource(e){if(super.dataSource=e,e){var i=e;this.tf_data.text=i.name}}onDisable(){}onChange(e){e?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};ob=d([mR("2gLgNMBIQd-cWw6HJjr46Q")],ob);var lb=class extends Laya.Dialog{};var{regClass:hR}=Laya,cb=class extends lb{constructor(){super()}onEnable(){this.list_champ.visible=!1,this.setOpenData()}async setOpenData(){var t=await w.requestPost("wxgame/payOrder/list",{});if(t){let e=t.orderItems;this.list_champ.array=e,this.list_champ.visible=!0}!t.orderItems||t.orderItems.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}onDisable(){}};cb=d([hR("y0xiZs-qSDWRAXN_oE10yg")],cb);var ub=class extends Laya.Box{};var{regClass:dR}=Laya,pb=class extends ub{constructor(){super()}addEvent(){}set dataSource(t){if(super.dataSource=t,!t){this.visible=!1;return}this.setData(t),this.addEvent()}setData(t){let e=fe.formatDayAndTime(t.createTime);switch(this.tf_day.text=e.date,this.tf_minute.text=e.time,this.img_coinType.skin=M.instance.getMoneyIcon(t.coinType),this.tf_amounte.text=`${t.payMoney}`,this.tf_serviceRate.text=`${t.fee.toFixed(8).replace(/\.?0+$/,"")}`,this.tf_arrive.text=`${t.arriveMoney.toFixed(8).replace(/\.?0+$/,"")}`,this.tf_network.text=K.instance.getChainName(t.matchId),t.status){case 0:this.tf_status.text="Pending review",this.tf_status.color="#4be063";break;case 1:this.tf_status.text="Approved",this.tf_status.color="#4be063";break;case 2:this.tf_status.text="Not passed",this.tf_status.color="#cd4a4a";break;case 3:this.tf_status.text="Uploading",this.tf_status.color="#ffffff";break;case 4:this.tf_status.text="Upload Failed",this.tf_status.color="#cd4a4a";break;case 5:var i=p.instance.getUILang("successfully");this.tf_status.text=i,this.tf_status.color="#4be063";break;case 6:this.tf_status.text="Withdraw success",this.tf_status.color="#4be063";break}}};pb=d([dR("tbS8gPlOTWuMdXb9g8wZAg")],pb);var mb=class extends Laya.Dialog{};var{regClass:fR}=Laya,hb=class extends mb{constructor(){super();this.destroyDoCancel=!1;this.canClose=!0}onEnable(){this.on(Laya.Event.CLICK,this,this.onClickEvent)}onClickEvent(e){let i=e.target;i.name=="okBtn"?(this._okHandler&&this._okHandler.runWith(null),this.close()):i.name=="cancleBtn"&&(this.destroyDoCancel=!1,this._cancelHandler&&this._cancelHandler.runWith(null),this.close())}setOpenData(e){e&&(this._okHandler=e.okHandler,this._cancelHandler=e.cancelHandler,this.destroyDoCancel=e.destroyDoCancel,e.flag<0?(this.cancleBtn.visible=!1,this.okBtn.visible=!1,this.canClose=!1):e.flag&W.YES&&!(e.flag&W.NO)?(this.okBtn.x=this.width-this.okBtn.width>>1,this.cancleBtn.visible=!1,this.okBtn.label="Sure"):e.flag&W.NO&&!(e.flag&W.YES)?this.okBtn.visible=!1:e.flag&W.YES&&e.flag&W.NO,e.data&&this.alertDesc&&(e.data instanceof Array?(this.alertTitle.text=e.data[0],this.alertDesc.text=e.data[1]):this.alertDesc.text=e.data),e.initHandler&&e.initHandler.runWith(this))}onDisable(){this.destroyDoCancel&&this._cancelHandler&&this._cancelHandler.run(),this._okHandler=null,this._cancelHandler=null}close(e){this.canClose&&super.close(e)}};hb=d([fR("8G0DBvD7T_2CVupdfQXrBw")],hb);var db=class extends Laya.Dialog{};var{regClass:yR}=Laya,fb=class extends db{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){this.activityList.visible=!1,this.tab1.on(Laya.Event.CLICK,this,this.onTabClick,[1]),this.tab2.on(Laya.Event.CLICK,this,this.onTabClick,[2]),this.tab3.on(Laya.Event.CLICK,this,this.onTabClick,[3]),this.onTabClick(1),this.refreshRed(),_.intance.on(b.REFRESH_ACTIVITY_RED,this,this.refreshRed)}onChangeHead(){O.intance.openModule(L.SelectHeadDialog,!0)}async onTabClick(e){for(let n=1;n<4;n++)e==n?(this["tab"+n].skin="res/scholarship/img_transfer_tab2.png",this["tab"+n].getChildByName("tf_tit").color="#143268"):(this["tab"+n].skin="res/scholarship/img_transfer_tab1.png",this["tab"+n].getChildByName("tf_tit").color="#429fdf");let i=await w.requestPost("wxgame/player/remActiveList",{remType:e});i&&(this.activityList.array=i.list,this.activityList.visible=!0,this.tf_totalActivity.text=p.instance.getLanguage(1555,i.remRate),!this.activityList.array||this.activityList.array.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1,_.intance.event(b.REFRESH_MAINSCENE_HEAD_RED),_.intance.event(b.REFRESH_ROLEINFO_RED),this["tab"+e].getChildByName("img_red").visible=!1)}refreshRed(){this.tab1.getChildByName("img_red").visible=v.instance.getRedDotById(Ae.RED_ACTIVITY1),this.tab2.getChildByName("img_red").visible=v.instance.getRedDotById(Ae.RED_ACTIVITY2),this.tab3.getChildByName("img_red").visible=v.instance.getRedDotById(Ae.RED_ACTIVITY3)}onDisable(){_.intance.offAllCaller(this)}};fb=d([yR("GIxGfJ0QQmuel1O3zm7Weg")],fb);var yb=class extends Laya.Box{};var{regClass:bR}=Laya,bb=class extends yb{addEvent(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}set dataSource(e){super.dataSource=e,this.activityItem=e,this.activityItem&&(this.setData(this.activityItem),this.addEvent())}setData(e){this.tf_name.text=e.name,this.tf_address.text=`${ce.shortenString(e.openid,7,8)}`,this.tf_guild.text=p.instance.getMultiLan(e.unionName),this.tf_battle.text=`${e.fight}`,this.tf_score.text=`${e.ticket}`,this.playerIcon.headSkin=e.icon}onCopy(){let e=this.activityItem.openid;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}};bb=d([bR("L-m245Z3S8-bKPqo8Afxww")],bb);var gb=class extends Laya.Dialog{};var{regClass:gR}=Laya,_b=class extends gb{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.initContainer()}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList()}handleSelectHead(e){if(e!=-1){let i=this.list_head.selectedItem;v.instance.headId=i.id,this.playerIcon.headSkin=v.instance.headId}}createHeadList(){let e=I.intance.m_dicHead;this.list_head.array=e.values,this.list_head.visible=!0;let i=-1,n=0;this.playerIcon.headSkin=v.instance.headId;for(let r of e.values){if(r.id==v.instance.headId){i=n;break}n++}this.list_head.selectedIndex=i}onBtnChangePic(){var e=Laya.Render.canvas.style.zIndex,i=p.instance.getUILang("Upload picture"),n=p.instance.getUILang("Select Image"),r=p.instance.getUILang("Save changes");openUploadPic(this,e,i,n,r)}async openPicEnd(e,i){if(i.length>500){let n=await w.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);n&&(v.instance.headId=n.imgUrl,e.playerIcon.headSkin=n.imgUrl,console.log(n.imgUrl))}}onRegister(){let e=v.instance.headId;_.intance.event(b.EVENT_MODIFY_HEAD,[e]),this.close()}};_b=d([gR("BmtPy79ySCyg4IuEQC4zsQ")],_b);var Lb=class extends Laya.Dialog{};var{regClass:_R}=Laya,vb=class extends Lb{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){this.list_characterStar.visible=!1,this.onInit()}async onInit(){var e=I.intance.m_dicCharacterStars.values.filter(n=>n.starLv!==0);this.list_characterStar.array=e,this.list_characterStar.visible=!0,!this.list_characterStar.array||this.list_characterStar.array.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1;let i=await w.requestPost("wxgame/player/getPlayerInfo",{pid:v.instance.playerDto.pid});if(i){let n=i.star;ft.instance.setStar2(this,n);let r=i.starExp+""}else C.instance.notice(p.instance.getLanguage(135))}};vb=d([_R("JCb2ay9yQOa9uxMZE1fJrw")],vb);var xb=class extends Laya.Box{};var{regClass:LR}=Laya,Ib=class extends xb{addEvent(){}set dataSource(e){super.dataSource=e,this.characterStarItem=e,this.characterStarItem&&(this.setData(this.characterStarItem),this.addEvent())}setData(e){let i=e.starLv;ft.instance.setStar2(this,i+""),this.tf_number.text=p.instance.getLanguage(1798,e.number),this.tf_pasAdd.text=e.pasAdd/100+"%"}};Ib=d([LR("wA3mADC1Q7W-qEplQmRhhg")],Ib);var Eb=class extends Laya.ComboBox{};var{regClass:vR}=Laya,wb=class extends Eb{set defaultLabel(t){this._defaultLabel=t,this._selectedIndex<0&&(this._button.label=t)}onEnable(){this.list=this.comboList,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1)}set dataSource(t){super.dataSource=t;var e=t;if(e){this.list.repeatY=e.length,this.list.width=this.width;var i=[];e.forEach(n=>{n instanceof Array?i.push(n[1]):i.push(n)}),this.labels=i.join(","),console.log("comboData.length: "+e.length,this.labels)}}onCountryItemRender(t,e){t.onChange(this.list.selectedIndex==e)}set isOpen(t){if(console.log("isOpen: "+t),this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var e=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),i=e.y+this._button.height;i=i+this._listHeight<=Laya.stage.height||e.y-this._listHeight<0?i:e.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(e.x,i),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};wb=d([vR("AqEOSlrnRkmI9RUPCJUVqQ")],wb);var Tb=class extends Laya.List{};var{regClass:xR}=Laya,Cb=class extends Tb{};Cb=d([xR("7DDHp602Rs6dL3bjAu4ArA")],Cb);var Sb=class extends Laya.Box{};var{regClass:IR}=Laya,Db=class extends Sb{addEvent(){}set dataSource(e){this.zOrder=5,super.dataSource=e;var i=e;console.log("coinName: ",i),i&&i.label&&(this.addEvent(),this.tf_name.text=i.label)}onChange(e){e?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};Db=d([IR("nREGzTKFSX6LuiRnM5nPXA")],Db);var kb=class extends Laya.Box{};var{regClass:ER}=Laya,Ab=class extends kb{addEvent(){}set dataSource(e){super.dataSource=e;var i=e;i&&(this.addEvent(),e.id==999?(this.img_icon.visible=!1,this.tf_name.text="All"):(this.img_icon.visible=!0,this.img_icon.skin=M.instance.getCountryIcon(i.id),this.tf_name.text=p.instance.getLanguage(i.name)))}onChange(e){e?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};Ab=d([ER("LJ8PUf7kRCGUr4eT8Mhy3g")],Ab);var Mb=class extends Laya.Dialog{};var Jl=class extends Laya.Event{constructor(){super()}};Jl.INIT_CREATELOGIN_EVENT="CreateLoginEvent:INIT_CREATELOGIN_EVENT";var{regClass:wR}=Laya,Bb=class extends Mb{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER}onEnable(){_.intance.on(Jl.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),_.intance.on("msg_"+Ge.snake.socket.MessageType.MSG_USER_REGISTER,this,this.onWaitPlayerInfoBack),_.intance.on(b.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),_.intance.on(b.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack),this.btn_setting.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_setting]),this.btn_radio1.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio1]),this.btn_radio2.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio2]),this.btn_register.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_register]),this.box_change.on(Laya.Event.CLICK,this,this.onChangeHead),this.input_name.prompt=p.instance.getLanguage(31),this.selectRadio(1),this.initCountry(),this.initCreateLoginView(),$e.instance.sendCustumEvent(23)}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=i,this.onHideCountry())}onListDown(e){e.stopPropagation()}onScrollBarDown(e){e.stopPropagation()}onCountryItemRender(e,i){e.onChange(this.list_country.selectedIndex==i)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(e){if(console.log("handleSelectCountry: "+e),e!=-1){let i=this.list_country.selectedItem;v.instance.countryId=i.id,this.img_flag.skin=M.instance.getCountryIcon(i.id),this.tf_country.text=p.instance.getLanguage(i.name)}}createCountryList(){let e=I.intance.m_dicCountry;this.list_country.array=e.values,this.list_country.visible=!0;let i=-1,n=0;for(let r of e.values){if(r.id==v.instance.countryId){i=n;break}n++}this.list_country.selectedIndex=i}onChangeHeadBack(e,i){this.input_name.text=e,v.instance.headId=i,this.playerIcon.headSkin=i}onChangeModifyHead(e){v.instance.headId=e,this.playerIcon.headSkin=e}onChangeHead(){O.intance.openModule(L.ChangeHeadDialog)}onBtnChangePic(){var e=Laya.Render.canvas.style.zIndex,i=p.instance.getUILang("Upload picture"),n=p.instance.getUILang("Select Image"),r=p.instance.getUILang("Save changes");openUploadPic(this,e,i,n,r)}async openPicEnd(e,i){if(i.length>500){let n=await w.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);n&&(v.instance.headId=n.imgUrl,e.playerIcon.headSkin=n.imgUrl,console.log(n.imgUrl))}}selectRadio(e){let i=e==1;this.btn_radio1.selected=i,this.btn_radio2.selected=!i}handleClickBtn(e){switch(e){case this.btn_radio1:this.selectRadio(1);break;case this.btn_radio2:this.selectRadio(2);break;case this.btn_register:this.onRegister();break;case this.btn_setting:O.intance.openModule(L.GameSettingLanguageDialog);break}}async onRegister(){let e=this.input_name.text,i=this.btn_radio1.selected?1:2;if(e=e.trim(),e==""){C.instance.notice(p.instance.getLanguage(31));return}if(v.instance.countryId==-1){C.instance.notice(p.instance.getLanguage(1048));return}let s=new URL(window.location.href).searchParams.get("referral");console.log("referral: ",s);let o=await K.instance.createAcccount(e,i,v.instance.headId.toString(),v.instance.countryId,s)}onWaitPlayerInfoBack(e){if(e){_e.instance.hideLoading();var i=e.roleInfo,n=new Ln;n.pid=i.roleId,n.name=i.userName,n.icon=i.icon,n.exp=i.score,v.instance.playerDto=n,this.close(),_.intance.event(b.EVENT_ENTER_MAIN)}}initCreateLoginView(){}onDisable(){this.removeEvent()}removeEvent(){_.intance.off(Jl.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),_.intance.off(b.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),_.intance.off(b.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack)}};Bb=d([wR("1K2SyFxcQY-12SasSSRXyQ")],Bb);var Rb=class extends Laya.Dialog{};var{regClass:TR}=Laya,Pb=class extends Rb{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.pageIndex=1;this.pageSize=20;this.scrolLock=!0;this.btnLock=!1;this.currTab=0}onEnable(){this.list_rental.visible=!1,this.btn_1.on(Laya.Event.CLICK,this,this.onClickTab,[1]),this.btn_2.on(Laya.Event.CLICK,this,this.onClickTab,[2]),this.btn_claim.on(Laya.Event.CLICK,this,this.onClaimRem),this.list_rental.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange),this.list_toBeClaimed.on(Laya.Event.CLICK,this,this.clickList),this.initContainer()}initContainer(){this.getReferralData(),this.showReferralNum()}onScrollBarChange(){this.list_rental.scrollBar.value>=this.list_rental.scrollBar.max&&this.loadMoreData()}async getReferralData(e=!1){let i=await w.requestPost("wxgame/player/referralList1",{pageSize:this.pageSize,page:this.pageIndex});i&&(this.list_rental.array=i.list,this.list_rental.visible=!0,this.list_rental.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let e=await w.requestPost("wxgame/player/referralList1",{pageSize:this.pageSize,page:this.pageIndex});if(console.log(e),e){this.scrolLock=!0;let i=e.list;this.list_rental.array.push(...i),this.list_rental.array=this.list_rental.array,Laya.timer.clear(this,this.refreshLock)}}}refreshLock(){this.scrolLock=!0,console.log("重置锁")}async onClickTab(e){this.currTab!=e&&(this.setTab(e),e==2&&(this.noDataBox.visible=!1,this.showReceivedData()))}setTab(e){for(let i=1;i<3;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b",this["btn_"+i].getChildByName("selectBox").skin="res/role/img_transfer_tab2_1.png",this["box_"+i].visible=!0):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#76c7ff",this["btn_"+i].getChildByName("selectBox").skin="res/role/img_transfer_tab1_1.png",this["box_"+i].visible=!1)}async showReferralNum(){let e=await w.requestPost("wxgame/player/referralListInfo",{pageSize:this.pageSize,page:this.pageIndex});console.log(e),e&&(this.tf_l1.text=`${e.total}`,this.tf_l2.text=`${e.twoTotal}`,this.tf_battle.text=`${e.totalBattles}`)}onDisable(){this.list_rental.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange)}async showReceivedData(){var e=await w.requestPost("wxgame/money/remRewardListAll",{});if(e&&e.reward){e.reward.length<1?this.btn_claim.disabled=!0:this.btn_claim.disabled=!1;let n=ce.processItemsArray(e.reward)[0];this.list_toBeClaimed.array=n,this.list_toBeClaimed.visible=!0,this.list_toBeClaimed.vScrollBarSkin="",this.list_toBeClaimed.selectedIndex=-1}if(e&&e.rewardRecord){let n=ce.processItemsArray(e.rewardRecord)[0];this.list_claimed.array=n,this.list_claimed.visible=!0,this.list_claimed.vScrollBarSkin="",this.list_claimed.selectedIndex=-1}}async onClaimRem(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=await w.requestPost("wxgame/money/remRewardTake",{});if(e&&e.list.length>0){let i=e.list,n=[];i.forEach(r=>{var s=new Xt;s.id=r.id,s.count=r.count,n.push(s)}),O.intance.openModule(L.RewardGetDialog,n)}this.showReceivedData()}}clickList(){console.log("123333333")}};Pb=d([TR("sawRNG-YR0WiyH87IfeHmg")],Pb);var Nb=class extends Laya.Dialog{};var{regClass:CR}=Laya,Ob=class extends Nb{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.pageIndex=1;this.pageSize=20;this.scrolLock=!0}onEnable(){this.list_rental2.visible=!1,this.list_rental2.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange)}setOpenData(e){e&&(console.log(e),this.pid=e.pid,this.getReferralData())}onScrollBarChange(){this.list_rental2.scrollBar.value>=this.list_rental2.scrollBar.max&&this.loadMoreData()}async getReferralData(){let e=await w.requestPost("wxgame/player/referralList2",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});e&&(this.list_rental2.array=e.list,this.list_rental2.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let e=await w.requestPost("wxgame/player/referralList2",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});if(console.log(e),e){this.scrolLock=!0;let i=e.list;this.list_rental2.array.push(...i),this.list_rental2.array=this.list_rental2.array,Laya.timer.clear(this,this.refreshLock)}}}refreshLock(){this.scrolLock=!0,console.log("重置锁")}onDisable(){this.list_rental2.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange)}};Ob=d([CR("kAtevFvnTYGkg5Pu-ISlQw")],Ob);var Hb=class extends Laya.Box{};var{regClass:SR}=Laya,Ub=class extends Hb{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_battle.on(Laya.Event.CLICK,this,this.onBtnBattle)}set dataSource(e){e&&(super.dataSource=e,this.referralData=e,this.tf_name.text=e.name,this.tf_guild.text=p.instance.getMultiLan(e.unionName),this.playerIcon.headSkin=e.icon,this.tf_l2.text=e.fightTimes,e.openid?(this.fromBox.visible=!0,this.address=e.openid,this.tf_from.text=`${ce.shortenString(e.openid,7,4)}`):this.fromBox.visible=!1)}onBtnBattle(){console.log("btn12"),this.referralData.fightTimes>0&&O.intance.openModule(L.TotalBattlesDialog,this.referralData)}onCopy(){let e=this.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}};Ub=d([SR("6RSP0qtzSg-R9oUDT-GOCw")],Ub);var Fb=class extends Laya.Box{};var{regClass:DR}=Laya,Vb=class extends Fb{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_l2.on(Laya.Event.CLICK,this,this.onBtn12),this.btn_battle.on(Laya.Event.CLICK,this,this.onBtnBattle)}set dataSource(e){e&&(super.dataSource=e,this.referralData=e,this.tf_name.text=e.name,this.tf_guild.text=p.instance.getMultiLan(e.unionName),this.playerIcon.headSkin=e.icon,this.tf_l2.text=e.remNum,this.tf_battle.text=e.fightTimes,e.openid?(this.fromBox.visible=!0,this.address=e.openid,this.tf_from.text=`${ce.shortenString(e.openid,7,4)}`):this.fromBox.visible=!1)}onBtn12(){this.referralData.remNum>0&&O.intance.openModule(L.ReferralL2Dialog,this.referralData)}onBtnBattle(){console.log("btn12"),this.referralData.fightTimes>0&&O.intance.openModule(L.TotalBattlesDialog,this.referralData)}onCopy(){let e=this.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}};Vb=d([DR("QTOEy7PgRqi9dIWmX22OTw")],Vb);var Gb=class extends Laya.Dialog{};var{regClass:kR}=Laya,Wb=class extends Gb{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){ct.instance.playSoundByName(ct.soundName32)}onDisable(){}};Wb=d([kR("szfg-Zt_RRWZ_nHMppjUMA")],Wb);var jb=class extends Laya.Box{};var{regClass:AR}=Laya,zb=class extends jb{set dataSource(t){super.dataSource=t;var e=t;e&&(this.img_icon.skin="res/role/img_icon_"+e[0]+".png",this.tf_name.text=p.instance.getUILang(e[1]),this.tf_num.text=e[2])}};zb=d([AR("WJ5TDeRBSkC9yMqJ72B0Ow")],zb);var Kb=class extends Laya.Box{};var{regClass:MR}=Laya,qb=class extends Kb{set dataSource(e){super.dataSource=e,this.headItem=e,this.headItem&&this.setCurrentOutPut()}async setCurrentOutPut(){let e=this.headItem.id;this.playerIcon.headSkin=e}onChange(e){}};qb=d([MR("AwN_JFPwQsKswm1N53Bmkg")],qb);var Yb=class extends Laya.Dialog{};var{regClass:BR}=Laya,$b=class extends Yb{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.on(Laya.Event.CLICK,this,this.onCopy2),this.btn_copyReferral.on(Laya.Event.CLICK,this,this.onCopyReferral),this.btn_changeHead.on(Laya.Event.CLICK,this,this.onChangeHead),this.btn_receive.on(Laya.Event.CLICK,this,this.onReceive),this.btn_activity.on(Laya.Event.CLICK,this,this.onActivity),this.btn_starView.on(Laya.Event.CLICK,this,this.onOpenCharacterStarDialog),this.btn_detail.on(Laya.Event.CLICK,this,this.onDetail),this.redemptionCode.on(Laya.Event.FOCUS,this,this.redemFocus),_.intance.on(b.ROLE_INFO_CHANGE,this,this.updateRoleInfo),_.intance.on(b.REFRESH_ROLEINFO_RED,this,this.refreshActivityRed),this.refreshActivityRed(),this.updateRoleInfo()}redemFocus(){this.redemptionCode.text=""}updateRoleInfo(){let e=v.instance.playerDto;this.tf_name.text=e.name,this.img_sex.skin=e.sex==1?"res/role/img_icon_xb_1.png":"res/role/img_icon_xb_2.png",this.tf_uid.text=e.pid.toString(),this.tf_myCode.text=e.remCode,this.ally_num.text=`${e.remCount}`,this.tf_myCode.text==""?this.btn_copy2.disabled=!0:this.btn_copy2.disabled=!1,e.superRemCode?(this.btn_receive.disabled=!0,this.redemptionCode.text=`${e.superRemCode}`,this.yf_receive.text="Received"):this.yf_receive.text="Receive";var i=I.intance.m_dicCountry.get(e.country);this.img_country.skin=M.instance.getCountryIcon(e.country+""),this.tf_address.text=qe.formatWalletAddress(K.instance.walletAddress);let n=e.icon;this.playerIcon.headSkin=n,this.onGetAttr(e.pid)}async onGetAttr(e){let i=this,n=await w.requestPost("wxgame/player/getPlayerInfo",{pid:e});if(n){this.box_starui.visible=!0;let r=n.star;ft.instance.setStar2(this,r),this.box_starui.visible=!0;let s=n.starExp+"",l=I.intance.getCharacterStars(r).number;this.tf_mntArenaNum.text=p.instance.getUILang("MNT Arena")+`: <font color="#87f17f">${s}</font>/${l} <img src='res/roleStar/img_jiantou.png' />`,this.fighting_value.text=n.fightTimes,this.victory_num.text=n.winTimes,this.fail_num.text=`${n.fightTimes-n.winTimes}`,this.runAway_num.text=n.taopao}else C.instance.notice(p.instance.getLanguage(135))}onChangeHead(){O.intance.openModule(L.SelectHeadDialog,!0)}async onReceive(){if(this.redemptionCode.text=="Enter the redemption code to claim equipment(unique)"||this.redemptionCode.text=="輸入兌換碼領取裝備（唯一）"||this.redemptionCode.text==""){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1123),W.YES,null);return}if(this.redemptionCode.text==this.tf_myCode.text&&this.redemptionCode.text!==""){Le.instance().AlertByType(W.BASEALERTVIEW,"You cannot enter your own invitation code.",W.YES,null);return}let e=this.redemptionCode.text,i=await w.requestPost("wxgame/player/setRem",{code:e});i&&(O.intance.openModule(L.RemGetDialog),v.instance.playerDto.superRemCode=i.code,this.btn_receive.disabled=!0,this.yf_receive.text="Received",this.tf_myCode.text=i.recommendCode,v.instance.playerDto.remCode=i.recommendCode,this.tf_myCode.text==""?this.btn_copy2.disabled=!0:this.btn_copy2.disabled=!1)}onCopy(){let e=K.instance.walletAddress;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}onCopy2(){let e=this.tf_myCode.text;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}onCopyReferral(){let e=this.tf_myCode.text,i=this.onGetNewUrl(e);doCopy(i),C.instance.notice(p.instance.getLanguage(132))}onGetNewUrl(e){let i=new URL(window.location.href),n=i.searchParams;n.get("referral")&&n.delete("referral"),n.has("debug")&&n.delete("debug"),n.has("address")&&n.delete("address");let s=e;return n.append("referral",s+""),i.search=n.toString(),i.toString()}onDisable(){_.intance.off(b.ROLE_INFO_CHANGE,this,this.updateRoleInfo),_.intance.offAllCaller(this),this.redemptionCode.off(Laya.Event.FOCUS,this,this.redemFocus)}onActivity(){O.intance.openModule(L.ActivityInfoDialog)}onOpenCharacterStarDialog(){O.intance.openModule(L.CharacterStarDialog)}onDetail(){O.intance.openModule(L.ReferralDialog)}refreshActivityRed(){this.img_activieyRed.visible=v.instance.getRedDotById(Ae.RED_ACTIVITY1)||v.instance.getRedDotById(Ae.RED_ACTIVITY3)}};$b=d([BR("T7g565QQR7-fZgZNjVg92A")],$b);var Xb=class extends Laya.Dialog{};var{regClass:RR}=Laya,Qb=class extends Xb{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}setOpenData(e){}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.input_name.prompt=p.instance.getLanguage(31),this.initContainer();let e=I.intance.getGeneralValueById(13);this.tf_nameGold.text=e[1],this.img_nameGold.skin=M.instance.getMoneyIcon(e[0]),console.log(e)}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList(),this.initCountry()}handleSelectHead(e){if(e!=-1){let i=this.list_head.selectedItem;v.instance.headId=i.id,this.playerIcon.headSkin=v.instance.headId}}createHeadList(){let e=I.intance.m_dicHead;this.list_head.array=e.values,this.list_head.visible=!0;let i=-1,n=0;v.instance.headId=v.instance.playerDto.icon,this.playerIcon.headSkin=v.instance.headId,this.input_name.text=v.instance.playerDto.name;for(let r of e.values){if(r.id==v.instance.headId){i=n;break}n++}this.list_head.selectedIndex=i}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=i,this.onHideCountry())}onListDown(e){e.stopPropagation()}onScrollBarDown(e){e.stopPropagation()}onCountryItemRender(e,i){e.onChange(this.list_country.selectedIndex==i)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(e){if(console.log("handleSelectCountry: "+e),e!=-1){let i=this.list_country.selectedItem;v.instance.countryId=i.id,this.img_flag.skin=M.instance.getCountryIcon(i.id),this.tf_country.text=p.instance.getLanguage(i.name)}}createCountryList(){let e=I.intance.m_dicCountry;this.list_country.array=e.values,this.list_country.visible=!0;let i=-1,n=0;v.instance.countryId=v.instance.playerDto.country;for(let r of e.values){if(r.id==v.instance.countryId){i=n;break}n++}this.list_country.selectedIndex=i}onBtnChangePic(){var e=Laya.Render.canvas.style.zIndex,i=p.instance.getUILang("Upload picture"),n=p.instance.getUILang("Select Image"),r=p.instance.getUILang("Save changes");openUploadPic(this,e,i,n,r)}async openPicEnd(e,i){if(i.length>500){let n=await w.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);n&&(v.instance.headId=n.imgUrl,e.playerIcon.headSkin=n.imgUrl,e.list_head.selectedIndex=-1,console.log(n.imgUrl))}}onRegister(){let e=this.input_name.text;if(e=e.trim(),e==""){C.instance.notice(p.instance.getLanguage(31));return}if(v.instance.playerDto.name!==e&&v.instance.getConsumeValue(Be.TYPE_GOLD)<Number(this.tf_nameGold.text)){C.instance.notice(Oe.instance.get(51));return}v.instance.headId!=-1?this.onModify(e,v.instance.headId,v.instance.countryId):C.instance.notice(p.instance.getLanguage(134))}async onModify(e,i,n){if(e==""){C.instance.notice(p.instance.getLanguage(31));return}let r=await Co.instance.updateProfile(e,i.toString(),n);this.destroyed||(r?(v.instance.playerDto=r,this.close(),_.intance.event(b.ROLE_INFO_CHANGE)):C.instance.notice(p.instance.getLanguage(135)))}};Qb=d([RR("3CibwwHGSPG2Qkeq4rbMag")],Qb);var Jb=class extends Laya.Dialog{};var{regClass:PR}=Laya,Zb=class extends Jb{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.pageIndex=1;this.pageSize=20;this.scrolLock=!0}onEnable(){this.list_battle.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange)}setOpenData(e){e&&(console.log(e),this.pid=e.pid,this.getReferralData())}onScrollBarChange(){this.list_battle.scrollBar.value>=this.list_battle.scrollBar.max&&this.loadMoreData()}async getReferralData(){let e=await w.requestPost("wxgame/player/battlesList",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});e&&(this.list_battle.array=e.list,this.list_battle.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let e=await w.requestPost("wxgame/player/battlesList",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});if(console.log(e),e){this.scrolLock=!0;let i=e.list;this.list_battle.array.push(...i),this.list_battle.array=this.list_battle.array,Laya.timer.clear(this,this.refreshLock)}}}refreshLock(){this.scrolLock=!0,console.log("重置锁")}onDisable(){this.list_battle.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange)}};Zb=d([PR("qq0DrNoKSVmnXx-7vsMvNw")],Zb);var eg=class extends Laya.Box{};var{regClass:NR}=Laya,tg=class extends eg{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}set dataSource(e){if(!e)return;super.dataSource=e;let i=fe.formatDayAndTime(e.time);this.tf_endDate.text=`${i.date} ${i.time}`;var n=I.intance.m_dicArenaDic.get(e.arenaId);this.tf_arena.text=p.instance.getLanguage(n.name),this.img_coinType2.skin=M.instance.getMoneyIcon(e.coinType),this.tf_ticket.text=`${e.ticketValue}`,this.tf_bonus.text=`${e.bonus}`;let r=v.instance.getConsumeValue(e.coinType),s=I.intance.m_dicItems.get(e.coinType),o=p.instance.getLanguage(s.name);this.tf_moneyName.text=o}onBtn12(){this.referralData.l2>0&&O.intance.openModule(L.ReferralL2Dialog,this.referralData)}onCopy(){let e=this.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}};tg=d([NR("iUE6F1pjTg-jhQSieKM2hg")],tg);var ig=class extends Laya.ComboBox{};var{regClass:OR}=Laya,ag=class extends ig{set defaultLabel(t){this._defaultLabel=t,this._selectedIndex<0&&(this._button.label=t),this._button.labelAlign="center"}onEnable(){this.list=this.comboList}set dataSource(t){super.dataSource=t;var e=t;e&&(this.labels=e.join(","),console.log("comboData.length: "+e.length),this.list.repeatY=e.length,this.list.width=this.width,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1))}onCountryItemRender(t,e){t.onChange(this.list.selectedIndex==e)}set isOpen(t){if(console.log("isOpen: "+t),this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var e=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),i=e.y+this._button.height;i=i+this._listHeight<=Laya.stage.height||e.y-this._listHeight<0?i:e.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(e.x,i),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};ag=d([OR("Fns-7UW3RpSb95NWnjiDFQ")],ag);var ng=class extends Laya.Box{};var{regClass:HR}=Laya,rg=class extends ng{constructor(){super()}addEvent(){}set dataSource(t){super.dataSource=t,t&&(this.setData(t),this.addEvent())}setData(t){this.playerIcon.headSkin=t.pic,this.tf_name.text=t.name;var e=new Xe(t.itemId);t.itemId<1e6?(e.itemItem&&(this.img_prop.skin=M.instance.getItemIcon(e.itemItem.icon)),this.tf_value.text=`x${t.itemCount}`,this.img_prop.visible=!0):(this.tf_value.text="x1",this.img_prop.visible=!1)}};rg=d([HR("5m33h8fgRfuOQ2uY1AqnNw")],rg);var sg=class extends Laya.Dialog{};var{regClass:UR}=Laya,og=class extends sg{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.wheelType=1}onEnable(){}setOpenData(e){}onDisable(){}};og=d([UR("A1lCmwZyTaakvRLkYjnuQA")],og);var lg=class extends Laya.Dialog{};var{regClass:FR}=Laya,cg=class extends lg{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.needNum=1;this.propNum=0;this.allProp=[];this.wheelType=1;this.items=[]}onEnable(){this.listPanel1.visible=!1,this.listPanel1.selectHandler=new Laya.Handler(this,this.handleSelectProp),this.btn_wheel.on(Laya.Event.CLICK,this,this.onBtnWheel),this.initPropList()}setOpenData(e){e&&(this.wheelType=e[0])}async initPropList(){let e=[];this.allProp=await this.getItemByType();let i=I.intance.getWheelByType(this.wheelType);console.log(i);let n=i[0].consumption;this.needNum=n[0][1],console.log("需要碎片======================》",this.needNum);let r=this.getAirdropArrData(this.allProp,n);console.log(r),this.listPanel1.array=r,this.listPanel1.visible=!0,this.listPanel1.selectedIndex=0}async getItemByType(){var e=rt.TYPE_Consumption;this.items=[];for(var i=v.instance.m_packageData.getBackByType(e),n=0;n<i.length;n++){var r=i[n];r?this.items.push(r):this.items.push(new Xe(0))}return this.items}getAirdropArrData(e,i){let n=[];for(let r=0;r<i.length;r++){let s=e.find(o=>o._m_iId==i[r][0]);s&&n.push(s)}return n}handleSelectProp(e){if(e!==-1){let i=this.listPanel1.selectedItem;i&&(this.propNum=Number(i._m_iNum),console.log("该物品拥有数量:",this.propNum))}}async onBtnWheel(){let e=this.listPanel1.selectedItem,i=Number(e._m_iNum);if(this.needNum>i)C.instance.notice("Insufficient puzzle pieces");else{let n=await w.requestPost("wxgame/wheel/turn",{type:this.wheelType,itemId:e._m_iId,itemCount:this.needNum});n&&(console.log(n),this.close(),Qt.instance.ownerBag(),_.intance.event(b.SEND_WHEEL_RESULT,n),Qt.instance.ownerBag())}}onDisable(){}};cg=d([FR("tOKleLLDR9uKlH2QwK8wHw")],cg);var ug=class{};var pg=class extends Laya.Scene{};var{regClass:VR,property:J1e}=Laya,mg=class extends pg{constructor(){super(...arguments);this.text="";this.wheelReward=[];this.wheelLock=!1;this.wheelId=0}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onEnable(){_.intance.on(b.SEND_WHEEL_RESULT,this,this.startLottery),this.btn_1.on(Laya.Event.CLICK,this,this.onClickTab,[1]),this.btn_2.on(Laya.Event.CLICK,this,this.onClickTab,[2]),this.btn_3.on(Laya.Event.CLICK,this,this.onClickTab,[3]),this.btn_openFree1.on(Laya.Event.CLICK,this,this.openPropDialog,[1]),this.btn_openFree2.on(Laya.Event.CLICK,this,this.openPropDialog,[2]),this.btn_openFree3.on(Laya.Event.CLICK,this,this.openPropDialog,[3]),this.check_records.on(Laya.Event.CLICK,this,this.onCheck),this.btn_openFree1.label=p.instance.getLanguage(1665,1),this.btn_openFree2.label=p.instance.getLanguage(1665,5),this.btn_openFree3.label=p.instance.getLanguage(1665,10),this.check_records.selected=!1,this.initContainer(1),this.initContainer(2),this.initContainer(3),this.showNameList(),this.close&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.onClickTab(1)}async onClickTab(e){this.wheelLock||(this.setTab(e),this.box_all.visible=!0)}async openPropDialog(e){this.wheelLock||O.intance.openModule(L.DailyTaskPropsDialog,[e])}setTab(e){for(let i=1;i<4;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b",this["box_"+i]&&(this["box_"+i].visible=!0)):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe",this["box_"+i]&&(this["box_"+i].visible=!1))}setTopTab(e){for(let i=1;i<4;i++)console.log(i),e==i?(this["btn_top_"+i].getChildByName("selectBox").visible=!0,this["btn_top_"+i].getChildByName("tf_txt").color="#ffffff"):(this["btn_top_"+i].getChildByName("selectBox").visible=!1,this["btn_top_"+i].getChildByName("tf_txt").color="#4e87b7")}initContainer(e){let i=I.intance.getWheelByType(e);console.log(i);for(let n=0;n<i.length;n++){let r=i[n];if(r){let s=this["turntableBox_"+e+"_"+(n+1)].getChildByName("propBox"),o=M.instance.getItemIcon(r.wheelImage);s.getChildByName("img_reardIcon").skin=o,s.visible=!0,s.getChildByName("tf_name").text=p.instance.getLanguage(r.name);let l=s.getChildByName("tf_num");l&&(l.text=`x${r.rewardNum}`,r.rewardNum==0&&(l.visible=!1))}}}async showNameList(){let e=await w.requestPost("wxgame/wheel/panel",{});if(e)if(console.log(e),!this.check_records.selected)this.list_name.array=e.rewards;else{let i=[];i=e.rewards.filter(n=>n.pid==v.instance.playerDto.pid),this.list_name.array=i}}setToMainScene(){this.wheelLock||ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}getTargetIdxByWheelId(e){return e<7?e:e>=7&&e<15?e-6:e-14}startLottery(e){let i=e.type;console.log("btn_openFree",e),this.wheelLock=!0;let n=this.getTargetIdxByWheelId(e.wheelId),r=this["turntableBox_"+i+"_"+n].getChildByName("propBox"),s,o,l;this.wheelReward=e.reward,this.wheelId=e.wheelId,console.log("wheelReward=======================>",this.wheelReward),i==1?(s=6,o=this.img_pan1,l=r.getChildByName("img_guang")):i==2?(s=8,o=this.img_pan2,l=this.img_guang2):(s=10,o=this.img_pan3,l=r.getChildByName("img_guang")),l.visible=!1;let u=360/s,m=360-n*u+u,y=(Math.floor(Math.random()*5)+5)*360+m,x=new Laya.Tween,E=this;x.to(o,{rotation:y},7e3,Laya.Ease.expoInOut,Laya.Handler.create(this,function(){console.log("抽奖完成，抽中奖品："+n),o.rotation=m,Laya.timer.once(150,E,()=>{E.blinkImage(l,3)})}))}blinkImage(e,i){let n=0,r=this;function s(){if(!(!e||!r))if(e.visible=!e.visible,n++,n<i*2)Laya.timer.once(100,r,s);else{if(r.wheelLock=!1,e.visible=!1,r.wheelId==23){let o=[];r.wheelReward.forEach(l=>{var u=new ug;u.id=l.id,o.push(u)}),v.instance.herosDataUpdataHandler(o)}else if(r.wheelReward&&r.wheelReward.length>0){let o=[];r.wheelReward.forEach(l=>{var u=new Xt;u.id=l.id,u.count=l.count,o.push(u)}),O.intance.openModule(L.RewardGetDialog,o)}else O.intance.openModule(L.DailyTaskNoPropsDialog);r.showNameList()}}s()}onCheck(){this.showNameList()}onDisable(){this.removeEvent()}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this),_.intance.off(b.SEND_WHEEL_RESULT,this,this.startLottery)}};mg=d([VR("lukqyw9IQG6emThMQcQxNg")],mg);var hg=class extends Laya.Scene{};var{regClass:GR,property:Lwe}=Laya,dg=class extends hg{constructor(){super(...arguments);this.text="";this.wheelReward=[];this.wheelLock=!1;this.wheelId=0;this.tabIndex=1;this.totalTabNum=9;this.timeMap=new Map;this.targetNumber=0;this.duration=2e3;this.updateInterval=30;this.currentValue=0;this.step=0}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onEnable(){_.intance.on(b.SEND_WHEEL_RESULT,this,this.startLottery);for(let r=1;r<=this.totalTabNum;r++)this["btn_"+r].on(Laya.Event.CLICK,this,this.onClickTab,[r]);this.btn_refresh.on(Laya.Event.CLICK,this,this.showPrizePool),this.btn_openFree1.on(Laya.Event.CLICK,this,this.useWheel,[1]),this.btn_openFree2.on(Laya.Event.CLICK,this,this.useWheel,[2]),this.btn_openFree3.on(Laya.Event.CLICK,this,this.useWheel,[3]),this.btn_openFree4.on(Laya.Event.CLICK,this,this.useWheel,[4]),this.btn_openFree8.on(Laya.Event.CLICK,this,this.useWheel,[8]),this.btn_openFree5.on(Laya.Event.CLICK,this,this.openPropDialog,[1]),this.btn_openFree6.on(Laya.Event.CLICK,this,this.openPropDialog,[2]),this.btn_openFree7.on(Laya.Event.CLICK,this,this.openPropDialog,[3]),this.check_records.on(Laya.Event.CLICK,this,this.onCheck),this.tab0.on(Laya.Event.CLICK,this,this.setBoxTab,[0]),this.tab1.on(Laya.Event.CLICK,this,this.setBoxTab,[1]),this.tab2.on(Laya.Event.CLICK,this,this.setBoxTab,[2]),this.btn_openFree5.label=p.instance.getLanguage(1665,1),this.btn_openFree6.label=p.instance.getLanguage(1665,5),this.btn_openFree7.label=p.instance.getLanguage(1665,10),this.check_records.selected=!1,this.initContainer(1),this.initContainer(2),this.initContainer(3),this.initContainer(4),this.initContainer(5),this.initContainer(6),this.initContainer(7),this.initContainer(8),this.close&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.onClickTab(1);let i=I.intance.getWheel2ByType(1)[0].consumption[0],n=this.btn_openFree8.getChildByName("tf_btn");n.text=p.instance.getLanguage(1726,i[1])}async onClickTab(e){this.wheelLock||(e==9?(this.nameBox.visible=!1,this.img_bj.skin="res/dailyTasks/img_com_bj5.jpg",await this.showPrizePool()):(this.box_all_1.visible&&this.img_bj.skin!="res/dailyTasks/bj_1.jpg"&&(this.img_bj.skin="res/dailyTasks/bj_1.jpg"),await this.getRestWheelNumData(e)),this.BoxsetTab(e))}async showPrizePool(){let e=await w.requestPost("wxgame/wheel1/prizePool",{});if(e){var i=e.totalNum;i=Math.floor(i),this.animateNumber(i)}}animateNumber(e){Laya.timer.clear(this,this.addNumber),this.currentValue=0,this.targetNumber=e,this.step=this.targetNumber/(this.duration/this.updateInterval),Laya.timer.loop(this.updateInterval,this,this.addNumber)}addNumber(){this.currentValue+=this.step,this.currentValue>=this.targetNumber&&(this.currentValue=this.targetNumber,Laya.timer.clear(this,this.addNumber));var e=this.padNumber(Math.floor(this.currentValue),9);this.fontClip_poolNum.value=e}padNumber(e,i){return e.toString().padStart(i,"0")}setBoxTab(e){for(let i=0;i<3;i++)e==i?(this["tab"+i].skin="res/dailyTasks/img_tab-xz.png",this["tab"+i].getChildByName("tf_tit").color="#ffffff"):(this["tab"+i].skin="res/dailyTasks/img_tabdi.png",this["tab"+i].getChildByName("tf_tit").color="#79c7fe");this.box_all_1.visible=e==0,this.box_all_2.visible=e==1,this.box_all_3.visible=e==2,e==0?(this.img_bj.skin="res/dailyTasks/bj_1.jpg",this.onClickTab(1)):e==1?(this.img_bj.skin="res/dailyTasks/bj.jpg",this.onClickTab(5)):this.onClickTab(8)}async openPropDialog(e){this.wheelLock||O.intance.openModule(L.DailyTaskPropsDialog,[e])}BoxsetTab(e){this.tabIndex=e;for(let i=1;i<=this.totalTabNum;i++)if(e==i){if(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b",this["box_"+i]&&(this["box_"+i].visible=!0),e<5){let n=this.getRestWheelNumByType(i),r=this["btn_openFree"+i].getChildByName("tf_left"),s=this["btn_openFree"+i].getChildByName("tf_btn");n>0?r&&(r.text=p.instance.getLanguage(1704,n),r.visible=!0,s.visible=!1):(r.visible=!1,s.visible=!0)}}else this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe",this["box_"+i]&&(this["box_"+i].visible=!1)}setTopTab(e){for(let i=1;i<5;i++)console.log(i),e==i?(this["btn_top_"+i].getChildByName("selectBox").visible=!0,this["btn_top_"+i].getChildByName("tf_txt").color="#ffffff"):(this["btn_top_"+i].getChildByName("selectBox").visible=!1,this["btn_top_"+i].getChildByName("tf_txt").color="#4e87b7")}initContainer(e){let i;e<=4?i=I.intance.getWheel1ByType(e):e>4&&e<8?i=I.intance.getWheelByType(e-4):i=I.intance.getWheel2ByType(e-7);for(let n=0;n<i.length;n++){let r=i[n];if(r){let s=this["turntableBox_"+e+"_"+(n+1)].getChildByName("propBox"),o=M.instance.getItemIcon(r.wheelImage);s.getChildByName("img_reardIcon").skin=o,s.visible=!0,s.getChildByName("tf_name").text=p.instance.getLanguage(r.name);let l=s.getChildByName("tf_num");l&&(l.text=`x${r.rewardNum}`,r.rewardNum==0&&(l.visible=!1));let u=this["btn_openFree"+e].getChildByName("tf_btn");if(u){let m=[];i.length>0&&(m=i[0].consumption[0]);let h=I.intance.m_dicItems.get(m[0]),y=p.instance.getLanguage(h.name);e==8?u.text=`${m[1]} Phantom Credit`:u.text=p.instance.getLanguage(1703,m[1],y,m[2])}}}}setToMainScene(){this.wheelLock||ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}getTargetIdxByWheelId(e){return this.tabIndex<5?e<9?e:e>=9&&e<19?e-8:e>=19&&e<33?e-18:e-32:this.tabIndex>=5&&this.tabIndex<8?e<7?e:e>=7&&e<15?e-6:e-14:e}startLottery(e){let i=e.type;this.tabIndex>=5&&this.tabIndex<8?i+=4:this.tabIndex>=8&&(i+=7),this.wheelLock=!0;let n=this.getTargetIdxByWheelId(e.wheelId),r=this["turntableBox_"+i+"_"+n].getChildByName("propBox"),s,o,l;switch(this.wheelReward=e.reward,this.wheelId=e.wheelId,i){case 1:s=8,o=this.img_pan1,l=this.img_guang;break;case 2:s=10,o=this.img_pan2,l=r.getChildByName("img_guang");break;case 3:s=14,o=this.img_pan3,l=r.getChildByName("img_guang");break;case 4:s=16,o=this.img_pan4,l=r.getChildByName("img_guang");break;case 5:s=6,o=this.img_pan5,l=r.getChildByName("img_guang");break;case 6:s=8,o=this.img_pan6,l=this.img_guang6;break;case 7:s=10,o=this.img_pan7,l=r.getChildByName("img_guang");break;case 8:s=16,o=this.img_pan8,l=r.getChildByName("img_guang");break}l.visible=!1;let u=360/s,m=360-n*u+u,y=(Math.floor(Math.random()*5)+30)*360+m,x=new Laya.Tween,E=this;x.to(o,{rotation:y},12e3,Laya.Ease.expoInOut,Laya.Handler.create(this,function(){console.log("抽奖完成，抽中奖品："+n),o.rotation=m,Laya.timer.once(150,E,()=>{E.blinkImage(l,3)})}))}blinkImage(e,i){let n=0,r=this;function s(){if(!(!e||!r))if(e.visible=!e.visible,n++,n<i*2)Laya.timer.once(100,r,s);else{if(r.wheelLock=!1,e.visible=!1,r.wheelId==23,r.wheelReward&&r.wheelReward.length>0){let o=[];r.wheelReward.forEach(l=>{var u=new Xt;u.id=l.id,u.count=l.count,o.push(u)}),O.intance.openModule(L.RewardGetDialog,o)}else O.intance.openModule(L.DailyTaskNoPropsDialog);r.getRestWheelNumData(r.tabIndex)}}s()}onCheck(){this.getRestWheelNumData(this.tabIndex)}useWheel(e){if(this.wheelLock)return;if(this.getRestWheelNumByType(e)>0)this.turnWheel(e);else{let n;e==8?n=I.intance.getWheel2ByType(1):n=I.intance.getWheel1ByType(e);let r=0;n.length>0&&(r=n[0].consumption[0][1]);let s=v.instance.getConsumeValue(n[0].consumption[0][0]),o=I.intance.m_dicItems.get(n[0].consumption[0][0]),l=p.instance.getLanguage(o.name);if(s<r){let u=Laya.Handler.create(this,()=>{ge.intance.setCurrentScene(ae.M_SCENE_ASSET),this.close()});Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1706,l),W.CANCEL,u)}else{let u=Laya.Handler.create(this,()=>{e==8?this.buyTurn2Times(1):this.buyTurnTimes(e)});Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1705,r,l),W.CANCEL,u)}}}async buyTurnTimes(e){let i=await w.requestPost("wxgame/wheel1/buy",{type:e});if(console.log(i),i){let n=i.times;this.timeMap.set(e,n),this.setOpenFree(e,n),this.turnWheel(e)}}async buyTurn2Times(e){let i=await w.requestPost("wxgame/wheelPc/buy",{type:e});console.log(i),i&&this.turnWheel2(e)}setOpenFree(e,i){let n=this["btn_openFree"+e].getChildByName("tf_left"),r=this["btn_openFree"+e].getChildByName("tf_btn");n.text=p.instance.getLanguage(1704,i),i>0?(n.visible=!0,r.visible=!1):(n.visible=!1,r.visible=!0)}async turnWheel(e){let i=await w.requestPost("wxgame/wheel1/turn",{type:e});if(console.log(i),i){let n=i.times;this.timeMap.set(e,n),this.setOpenFree(e,n),this.startLottery(i)}}async turnWheel2(e){let i=await w.requestPost("wxgame/wheelPc/turn",{type:e});console.log(i),i&&this.startLottery(i)}async getRestWheelNumData(e){let i;if(e<5?i=await w.requestPost("wxgame/wheel1/panel",{type:e}):e>=5&&e<8?i=await w.requestPost("wxgame/wheel/panel",{}):i=await w.requestPost("wxgame/wheelPc/panel",{}),console.log(i),i){let n=i.times;if(this.timeMap.set(e,n),!this.check_records.selected)this.list_name.array=i.rewards;else{let r=[];r=i.rewards.filter(s=>s.pid==v.instance.playerDto.pid),this.list_name.array=r}this.nameBox.visible=!0}}getRestWheelNumByType(e){return this.timeMap.has(e)?this.timeMap.get(e):0}onDisable(){this.removeEvent()}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this),_.intance.off(b.SEND_WHEEL_RESULT,this,this.startLottery),this.btn_1.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_2.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_3.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_4.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_5.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_6.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_7.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_8.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_openFree1.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree2.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree3.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree4.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree5.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree6.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree7.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree8.off(Laya.Event.CLICK,this,this.useWheel),this.tab0.off(Laya.Event.CLICK,this,this.setBoxTab,[0]),this.tab1.off(Laya.Event.CLICK,this,this.setBoxTab,[1]),this.tab2.off(Laya.Event.CLICK,this,this.setBoxTab,[2]),this.check_records.off(Laya.Event.CLICK,this,this.onCheck),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}};dg=d([GR("7RZoY37eR_CbuJ-KiG2xcA")],dg);var fg=class extends Laya.Box{};var{regClass:WR}=Laya,yg=class extends fg{constructor(){super();this.friendData=null}addEvent(){this.btn_cancel.on(Laya.Event.CLICK,this,this.onClickCancel),this.btn_claim.on(Laya.Event.CLICK,this,this.onClickClaim)}onDisable(){this.removeEvent()}removeEvent(){this.btn_cancel.off(Laya.Event.CLICK,this,this.onClickCancel),this.btn_claim.off(Laya.Event.CLICK,this,this.onClickClaim)}set dataSource(e){super.dataSource=e,e&&(this.friendData=e,this.btn_claim.label=p.instance.getUILang("agree"),this.setData(e),this.addEvent())}setData(e){this.tf_name.text=e.name,this.img_flag.skin=M.instance.getCountryIcon(e.country),this.playerIcon.headSkin=e.icon}async onClickCancel(){let e=await w.requestPost("wxgame/friend/friendApplyHandle",{fid:this.friendData.id,agree:!1});console.log(e),e&&Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(310),W.YES,Laya.Handler.create(this,()=>{_.intance.event(b.CHANGE_FRIEND_APPLY_LIST,this.friendData.id)}))}async onClickClaim(){let e=I.intance.getGeneralValueById(11);if(v.instance.friendNum>=e){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(301),W.YES);return}let i=await w.requestPost("wxgame/friend/friendApplyHandle",{fid:this.friendData.id,agree:!0});console.log(i),i&&(Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(309),W.YES),_.intance.event(b.CHANGE_FRIEND_APPLY_LIST))}};yg=d([WR("5M3de4CbRMertZBZtmoOIQ")],yg);var bg=class extends Laya.Box{};var{regClass:jR}=Laya,gg=class extends bg{constructor(){super();this.friendData=null}addEvent(){this.btn_app.on(Laya.Event.CLICK,this,this.onClickApp)}onDisable(){this.removeEvent()}removeEvent(){this.btn_app.off(Laya.Event.CLICK,this,this.onClickApp)}async onClickApp(){let e=I.intance.getGeneralValueById(11);if(v.instance.friendNum>=e){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(301),W.YES);return}let i=await w.requestPost("wxgame/friend/addFriend",{openid:this.friendData.openid});console.log(i),i&&Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(307),W.YES,Laya.Handler.create(this,()=>{_.intance.event(b.REFRSH_APPLY_FRIEND_LIST,this.friendData.id)}))}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.btn_app.label=p.instance.getUILang("application"),console.log(e),this.friendData=e,this.setData(e),this.addEvent()}setData(e){this.tf_name.text=e.name,this.img_flag.skin=M.instance.getCountryIcon(e.country),this.playerIcon.headSkin=e.icon}};gg=d([jR("EI72MOH9RbqdGkjSCxI8Kg")],gg);var _g=class extends Laya.Box{};var{regClass:zR}=Laya,Lg=class extends _g{constructor(){super();this.friendData=null}addEvent(){this.btn_remove.on(Laya.Event.CLICK,this,this.onClickRemove),this.btn_talk.on(Laya.Event.CLICK,this,this.onClickTalk)}onDisable(){this.removeEvent()}removeEvent(){this.btn_remove.off(Laya.Event.CLICK,this,this.onClickRemove),this.btn_talk.off(Laya.Event.CLICK,this,this.onClickTalk)}set dataSource(e){super.dataSource=e,e&&(this.friendData=e,this.setData(e),this.addEvent())}setData(e){this.tf_name.text=e.name,this.img_flag.skin=M.instance.getCountryIcon(e.country),this.playerIcon.headSkin=e.icon,e.online?(this.tf_online.text="on line",this.tf_online.color="#43ef74"):(this.tf_online.text=fe.formatTimeAgo(e.lastLoginTime),this.tf_online.color="#b4b4b4")}async onClickRemove(){await w.requestPost("wxgame/friend/delFriend",{fid:this.friendData.id})&&(Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(308),W.YES),_.intance.event(b.CHANGE_FRIEND_LIST,this.friendData.id))}async onClickTalk(){O.intance.openModule(L.PrivateChatDialog,this.friendData)}};Lg=d([zR("hh1cVJJ6Sr2JZvqUJFzF6Q")],Lg);var vg=class extends Laya.Scene{};var{regClass:KR,property:STe}=Laya,xg=class extends vg{constructor(){super(...arguments);this.text="";this.refreshCd=0;this.friendData=null;this.recommendFriend=null;this.applyFriend=null;this.inputFriendAddress=!1}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onEnable(){this.list_friend.visible=!1,this.list_apply.visible=!1,this.list_add.visible=!1,this.btn_myFriend.on(Laya.Event.CLICK,this,this.onClickMy),this.btn_addFriend.on(Laya.Event.CLICK,this,this.onClickAdd),this.btn_application.on(Laya.Event.CLICK,this,this.onClickApp),this.btn_addByDress.on(Laya.Event.CLICK,this,this.onClickAddByDress),this.btn_lookup.on(Laya.Event.CLICK,this,this.onClickLookup),this.btn_refresh.on(Laya.Event.CLICK,this,this.onClickRefresh),this.tf_nickname.on(Laya.Event.FOCUS,this,this.nameFocus),_.intance.on(b.REFRSH_APPLY_FRIEND_LIST,this,this.deleApplyFriendList),_.intance.on(b.CHANGE_FRIEND_APPLY_LIST,this,this.onClickApp),_.intance.on(b.CHANGE_FRIEND_LIST,this,this.deleFriendList),this.tf_uid.on(Laya.Event.FOCUS,this,this.uidFocus),this.close&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.onClickMy(),this.refreshRed()}setTabState(e,i,n,r){e.getChildByName("selectBox").visible=i,e.getChildByName("tf_txt").color=i?n:r}onClickMy(){this.box_1.visible=!0,this.box_2.visible=!1,this.box_3.visible=!1,this.noDataBox.visible=!1,this.setTabState(this.btn_myFriend,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_addFriend,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_application,!1,"#143f6b","#7ff1fe"),this.setFriendData()}async setFriendData(){let e=await w.requestPost("wxgame/friend/friendList",{});if(e&&e.list){v.instance.friendNum=e.list.length,this.list_friend.array=e.list,this.list_friend.visible=!0,this.friendData=e.list;let i=this.countOnlineUsers(e.list);console.log(i);let n=I.intance.getGeneralValueById(11);this.tf_friendNum.text=`${v.instance.friendNum}/${n}`}else this.tf_friendNum.text="0/0";(!e||!e.list||e.list.length<1)&&(this.noDataBox.visible=!0),console.log(e)}async onClickAdd(){if(this.box_1.visible=!1,this.box_2.visible=!0,this.box_3.visible=!1,this.noDataBox.visible=!1,this.setTabState(this.btn_addFriend,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_myFriend,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_application,!1,"#143f6b","#7ff1fe"),!this.recommendFriend||this.recommendFriend.length<=0){let e=await w.requestPost("wxgame/friend/recommend",{});e&&e.list&&(this.recommendFriend=e.list,this.list_apply.array=e.list,this.list_apply.visible=!0,this.list_apply.vScrollBarSkin="")}}async onClickAddByDress(){if(this.tf_uid.text==K.instance.walletAddress){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1162),W.YES),this.tf_uid.text="";return}let e=this.tf_uid.text;if(e.length<=0||!this.inputFriendAddress){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1298),W.YES);return}let i=I.intance.getGeneralValueById(11);if(v.instance.friendNum>=i){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(301),W.YES);return}if(this.friendData.findIndex(r=>r.openid==e.toLowerCase())>-1){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(302),W.YES);return}Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(303),W.SURE,Laya.Handler.create(this,async()=>{let r=await w.requestPost("wxgame/friend/addFriend",{openid:e});console.log(r),r&&C.instance.notice(Oe.instance.get(307))}))}nameFocus(){this.tf_nickname.text=""}uidFocus(){this.tf_uid.text="",this.inputFriendAddress=!0}async onClickApp(){this.box_1.visible=!1,this.box_2.visible=!1,this.box_3.visible=!0,this.noDataBox.visible=!1,this.setTabState(this.btn_addFriend,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_myFriend,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_application,!0,"#143f6b","#7ff1fe");let e=await w.requestPost("wxgame/friend/friendApplyList",{});e&&e.list&&(this.list_add.array=e.list,this.list_add.visible=!0,this.applyFriend=e.list,e.list.length<=0&&(this.Img_social.visible=!1)),(!e||!e.list||e.list.length<1)&&(this.noDataBox.visible=!0)}onDisable(){this.removeEvent()}removeEvent(){this.btn_myFriend.off(Laya.Event.CLICK,this,this.onClickMy),this.btn_addFriend.off(Laya.Event.CLICK,this,this.onClickAdd),this.btn_application.off(Laya.Event.CLICK,this,this.onClickApp),this.btn_addByDress.off(Laya.Event.CLICK,this,this.onClickAddByDress),this.btn_lookup.off(Laya.Event.CLICK,this,this.onClickLookup),this.btn_refresh.off(Laya.Event.CLICK,this,this.onClickRefresh),this.tf_nickname.off(Laya.Event.FOCUS,this,this.nameFocus),_.intance.off(b.REFRSH_APPLY_FRIEND_LIST,this,this.deleApplyFriendList),_.intance.off(b.CHANGE_FRIEND_APPLY_LIST,this,this.onClickApp),_.intance.off(b.CHANGE_FRIEND_LIST,this,this.deleFriendList),this.tf_uid.off(Laya.Event.FOCUS,this,this.uidFocus),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}countOnlineUsers(e){return e.filter(i=>i.online).length}async onClickLookup(){if(this.tf_nickname.text==""){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(304),W.YES);return}let e=this.tf_nickname.text,i=await w.requestPost("wxgame/friend/search",{nickName:e});i&&i.list&&(this.recommendFriend=i.list,this.list_apply.array=i.list)}deleApplyFriendList(e){let i=this.recommendFriend.findIndex(n=>n.id==e);i>-1&&this.recommendFriend.splice(i,1),this.list_apply.array=this.recommendFriend}deleFriendList(e){let i=this.friendData.findIndex(r=>r.id==e);i>-1&&this.friendData.splice(i,1),this.list_friend.array=this.friendData,v.instance.friendNum=this.friendData.length;let n=I.intance.getGeneralValueById(11);this.tf_friendNum.text=`${v.instance.friendNum}/${n}`,this.list_friend.array.length<=0&&(this.noDataBox.visible=!0)}async onClickRefresh(){if(this.refreshCd>0){C.instance.notice(p.instance.getLanguage(1287,this.refreshCd));return}let e=await w.requestPost("wxgame/friend/recommend",{});e&&e.list&&(this.recommendFriend=e.list,this.list_apply.array=e.list),console.log(e),this.tf_nickname.text="PLEASE ENTER A NICKNAME TO FIND FRIENDS",this.tf_uid.text="Enter wallet address to add friends",this.inputFriendAddress=!1,C.instance.notice(Oe.instance.get(306)),this.refreshCd=5,Laya.timer.loop(1e3,this,this.RefreshCount)}RefreshCount(){this.refreshCd-=1,this.refreshCd<=0&&Laya.timer.clear(this,this.RefreshCount)}refreshRed(){this.Img_social.visible=v.instance.getRedDotById(Ae.ROOM_FRIEND_APPLY)}};xg=d([KR("W8WIf5GlS3S-dEWvgrU0ow")],xg);var Ig=class extends Laya.Dialog{};var{regClass:qR}=Laya,Eg=class extends Ig{constructor(e){super();this.friendData=null}onEnable(){this.btn_send.on(Laya.Event.CLICK,this,this.onClickSend),this.giftInput.on(Laya.Event.INPUT,this,this.onGoldInput)}setOpenData(e){e&&(this.friendData=e),this.playerIcon.headSkin=this.friendData.icon,this.tf_name.text=this.friendData.name,this.tf_gold.text=Pe.filterNumFormat(v.instance.getConsumeValue(Be.TYPE_GOLD),0)}async onClickSend(){if(console.log(this.messageInput.text==""),this.messageInput.text.length<10){C.instance.notice(p.instance.getLanguage(1288,10));return}let e=Number(this.giftInput.text),i=Number(this.tf_gold.text);if(e>i){C.instance.notice(Oe.instance.get(313));return}await w.requestPost("wxgame/friend/sendMassage",{fid:this.friendData.id,content:this.messageInput.text,sendGold:e})&&Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(314),W.YES,Laya.Handler.create(this,()=>{this.close()}))}onGoldInput(){let e=Number(this.giftInput.text),i=ce.isNumber(this.giftInput.text),n=this.giftInput.text.includes(".");(e<0||!i||n)&&(this.giftInput.text="0")}onDisable(){this.btn_send.off(Laya.Event.CLICK,this,this.onClickSend),this.giftInput.off(Laya.Event.INPUT,this,this.onGoldInput)}};Eg=d([qR("MBJ6xxrTTGe8qOrAIMZfeQ")],Eg);var wg=class extends Laya.Dialog{};var{regClass:YR}=Laya,xs=class extends Laya.Script{constructor(){super();this._isLeft=!1}onAwake(){}get isLeft(){return this._isLeft}set isLeft(e){this._isLeft=e,this.btn_bg=this.owner.getChildByName("btn_bg"),this.label_left=this.owner.getChildByName("label_left"),this.label_right=this.owner.getChildByName("label_right"),this.isLeft?(this.btn_bg.x=4,this.label_left.color="#213343",this.label_right.color="#52a5e0"):(this.btn_bg.x=this.owner.width-this.btn_bg.width-4,this.label_left.color="#52a5e0",this.label_right.color="#213343")}};xs=d([YR("-1MGS4JRSMOn_RKPUuuV9Q")],xs);var{regClass:$R}=Laya,Tg=class extends wg{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.totalLans=[1,6,7];this.currLan=0}onEnable(){this.musicSwitchButton=this.box_music.getComponent(xs),this.soundSwitchButton=this.box_sound.getComponent(xs),this.initContainer(),this.box_music.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_music]),this.box_sound.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_sound]),this.btn_copy.clickHandler=new Laya.Handler(this,this.onClickHandler,[this.btn_copy]),this.btn_referral.on(Laya.Event.CLICK,this,this.onClickHandler,[this.btn_referral]);for(let i=0;i<this.totalLans.length;i++){var e=this.totalLans[i];this["btn_"+e].on(Laya.Event.CLICK,this,this.onClickTab,[e])}}onClickHandler(e){switch(e){case this.box_music:this.musicSwitchButton.isLeft=!this.musicSwitchButton.isLeft,ct.instance.switchMusic(this.musicSwitchButton.isLeft);break;case this.box_sound:this.soundSwitchButton.isLeft=!this.soundSwitchButton.isLeft,ct.instance.switchSound(this.soundSwitchButton.isLeft);break;case this.btn_referral:O.intance.openModule(L.InviteRewardDialog);break;case this.btn_copy:{let i=this.inviteUrl;doCopy(i),C.instance.notice(p.instance.getLanguage(132))}break}}initContainer(){this.musicSwitchButton.isLeft=ct.instance.m_bPlayMusic,this.soundSwitchButton.isLeft=ct.instance.m_bPlayeSound,this.currLan=v.instance.m_strLanguage,this.setTab(v.instance.m_strLanguage),this.inviteUrl=un.getInviteUrl(),this.label_url.text=qe.shortStr(this.inviteUrl,50)}onClickTab(e){if(this.currLan==e)return;this.currLan=e,this.setTab(e);let i=p.instance.getLanTypeById(e);p.instance.FGM_SetLanguage(i),$e.instance.reload()}setTab(e){for(let n=0;n<this.totalLans.length;n++){var i=this.totalLans[n];e==i?(this["btn_"+i].getChildByName("btn_yellowBg").visible=!0,this["btn_"+i].getChildByName("Label").color="#213343"):(this["btn_"+i].getChildByName("btn_yellowBg").visible=!1,this["btn_"+i].getChildByName("Label").color="#52a5e0")}}webCopyString(e){let i=e,n=window.document.createElement("textarea");n.value=i,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";let r=window.getSelection(),s=!1;r.rangeCount>0&&(s=r.getRangeAt(0)),window.document.body.appendChild(n),n.select(),n.selectionStart=0,n.selectionEnd=i.length;let o=!1;try{o=window.document.execCommand("copy")}catch(l){console.error(l)}return window.document.body.removeChild(n),s&&(r.removeAllRanges(),r.addRange(s)),o}};Tg=d([$R("yJfJZzgZRluE_rgB44yTvg")],Tg);var Cg=class extends Laya.Scene{};var{regClass:XR}=Laya,Sg=class extends Cg{onAwake(){}onOpened(e){this.closeHandle=e[0]}onEnable(){this.btn_next.on(Laya.Event.CLICK,this,this.onBtnNext),this.btn_receive.on(Laya.Event.CLICK,this,this.onClickRec),this.tf_address.text=K.instance.walletAddress}onDisable(){this.closeHandle&&this.closeHandle.run(),this.removeEvent()}removeEvent(){}onBtnNext(){this.close()}async onClickRec(){let e=K.instance.walletAddress,i=await w.requestPost("wxgame/money/matQuery",{address:e});if(i&&i.use==1){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(122),W.YES,Laya.Handler.create(this,()=>{this.onBtnNext()}));return}try{(await w.requestPost("wxgame/money/matTake",{address:e})).errorcode==0?Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getUILang("You have applied to claim the MAT Tokens and they will be sent to your address [0X...]."),W.YES,Laya.Handler.create(this,()=>{this.onBtnNext()})):Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(122),W.YES,Laya.Handler.create(this,()=>{this.onBtnNext()}))}catch{Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(122),W.YES,Laya.Handler.create(this,()=>{this.onBtnNext()}))}}};Sg=d([XR("wkgHnIZwR_-St6rzEoxYPQ")],Sg);var Dg=class extends Laya.Scene{};var{regClass:QR}=Laya,kg=class extends Dg{constructor(){super(...arguments);this.restTime=5}onAwake(){}onOpened(e){console.log(e),this.closeHandle=e[0]}onEnable(){this.skipBox.on(Laya.Event.CLICK,this,this.onBtnSkip),v.instance.m_strLanguage==Wa.Lan_zh?this.img_bg.skin="res/getMat/img_open_chn.jpg":this.img_bg.skin="res/getMat/img_open_eng.jpg",console.log("langid:",v.instance.m_strLanguage),this.restTime=5,this.runTime(),this.tf_skip.text=p.instance.getUILang("Skip")}runTime(){Laya.timer.loop(1e3,this,this.countTime)}countTime(){this.restTime-=1,this.tf_restTime.text=`${this.restTime}`,this.restTime==0&&(Laya.timer.clear(this,this.countTime),this.close())}onDisable(){this.closeHandle&&this.closeHandle.run(),this.removeEvent()}removeEvent(){}async onBtnSkip(){Laya.timer.clear(this,this.countTime),this.close()}};kg=d([QR("t3HJXNipRty7KBcnDKApfA")],kg);var Ag=class extends Laya.Box{};var{regClass:JR}=Laya,fr=class extends Ag{constructor(){super();this.isAddEvent=!1;this.isReady=!1;this.needChangeAni=!0;this.loop=!0;this.isInited=!1}onEnable(){this.sk=this.box_sk,this.sk.on(Laya.Event.READY,this,this.onSkReady),this.sk.loop=this.loop,console.log("onEnable: + this.animationName： "+this.animationName),this.animationName&&(this.sk.animationName=this.animationName),this.spineTemplet?(this.sk.templet=this.spineTemplet,console.log("onEnable: + this.spineTemplet ")):this.templateUrl?Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(e=>{this.destroyed||(this.sk.templet=e,console.log("this.templateUrl: "+this.templateUrl))}):this.animationName||(this.sk.animationName="animation"),this.isInited=!0}onSkReady(){this.isReady=!0,console.log("onSkReady this.visible: "+this.visible)}play(e,i,n,r,s,o,l){if(!this.isReady){console.log("动画未准备好，不能play");return}this.sk.play(e,i,n,r,s,o,l)}stop(){if(!this.isReady){console.log("动画未准备好，不能stop");return}this.sk.stop()}init(e,i="animation",n=!0){console.log("init: ",i,e),this.animationName=i,this.spineTemplet=e,this.loop=n,this.visible=!0,this.isInited&&(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=this.spineTemplet)}initUrl(e,i="animation",n=!0){console.log("initUrl: ",e),this.animationName=i,this.templateUrl=e,this.loop=n,this.visible=!0,this.isInited&&Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(r=>{this.destroyed||(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=r,console.log("this.templateUrl: "+this.templateUrl))})}onDisable(){Laya.Pool.recover(fr.aniSkPrefab,this),this.box_sk.off(Laya.Event.READY,this,this.onSkReady),this.sk.templet=null}};fr.aniSkPrefab="aniSkPrefab",fr=d([JR("2rJV0EbMT9K2L6-6HOpDHw")],fr);var Mg=class extends Laya.Box{};var{regClass:ZR}=Laya,Bg=class extends Mg{set dataSource(t){super.dataSource=t;var e=t;if(!e)return;let i=Number(e[0]),n=e[1],r=I.intance.getAttributeDataById(i);this.tf_name.text=p.instance.getUILang(r.identification),i==1010||i==1011||i==1013||i==1014?this.tf_num.text=`${n/100}%`:this.tf_num.text=n}};Bg=d([ZR("lWiDi5bCR-CNy4v3ZMd42w")],Bg);var ri=class ri{constructor(){}static pointEquil(t,e){return t&&e&&t.x==e.x&&t.y==e.y}static isEmpty(t){for(let e in t)return!1;return!0}static showTxtEffect(t,e){let i=parseInt(t.text),n=Math.floor((e-i)/5),r=0;Laya.timer.loop(60,null,s);let s=function(){r++,i+=n,r>=5&&(i=e,Laya.timer.clear(null,s)),t.text=i+""}}static showTxtFlash(t){let e=t.color;t.color=ri.COLORS[0],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,i),50);let i=function(){t.color=ri.COLORS[1],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,n),50)},n=function(){t.color=ri.COLORS[0],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,r),50)},r=function(){t.color=ri.COLORS[1],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,s),50)},s=function(){t.color=ri.COLORS[0],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,o),50)},o=function(){t.color=ri.COLORS[1],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,l),50)},l=function(){t.color=e}}static getProKey(t){return ri.PRO_DIC[t]?ri.PRO_DIC[t]:t}static getIconName(t){return ri.proList[t]}static clonePoint(t){return new Laya.Point(t.x,t.y)}static copyObj(t){let e={};for(let i in t)e[i]=t[i];return e}static mergeObj(t,e){for(let i in e)t[i]?t[i]=parseFloat(t[i])+parseFloat(e[i]):t[i]=e[i];return t}static checkHit(t){return t.visible&&t.mouseX>0&&t.mouseY>0&&t.mouseX<=t.width&&t.mouseY<=t.height}static separateObj(t,e){if(e)for(let i in e)t[i]&&(t[i]=parseFloat(t[i])-parseFloat(e[i]));return t}static toFixed(t,e=1){if((t+"").indexOf(".")!=-1){let i=parseFloat(t).toFixed(e);return e==1&&i.charAt(i.length-1)=="0"&&(i=parseInt(i)+""),i}return t+""}static formatResWith(t){return t>=1e12?Math.floor(t/1e12)+ri.RES_W[3]:t>=1e9?Math.floor(t/1e9)+ri.RES_W[2]:t>=1e6?Math.floor(t/1e6)+ri.RES_W[1]:t>=1e4?Math.floor(t/1e3)+ri.RES_W[0]:t+""}static formatNumWithSign(t,e=","){t=Math.floor(t);let i=t+"",n=1,r=[];for(let s=i.length-1;s>=0;s--)r.push(i.charAt(s)),n>0&&n%3==0&&r.push(e),n++;return r.reverse(),r[0]==e&&r.shift(),r.join("")}static autoRecyle(t,e=!1){t.on(Laya.Event.COMPLETE,null,i,[t]),t.isPlaying||t.play(1,!1);let i=function(n){n.off(Laya.Event.COMPLETE,null,i),n.stop(),n.removeSelf(),e&&Laya.Pool.recover("Animation",n)}}static createEllipse(t,e,i,n,r,s=1,o="#ffffff"){let l=[],u=n>r?s/n:s/r;for(let m=0;m<2*Math.PI;m+=u)l.push(e+n*Math.cos(m)-n/2,i+r*Math.sin(m));return t&&t.drawPoly(l.shift(),l.shift(),l,o),l}};ri.blackFilter=new Laya.ColorFilter([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.78,0]),ri.blackFilter2=new Laya.ColorFilter([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5,0]),ri.qualityColors=["#78cefd","#89e47a","#78cefd","#d5a8ff","#fdd378","#ffa8a8","#ffa8a8","#ffa8a8"],ri.noColors=["#7efcc5","#7efbfc","#acfffa","#c1c5ff","#ffcdcd","#ecceff","#fff5bd","#ffcee3","#ffdcbd","#f0ffc4"],ri.COLORS=["#69ff4c","#FFFFFF"],ri.PRO_DIC={HP:"hp",ATK:"attack",DEF:"defense",SPEED:"speed",RES:"resilience",CDMG:"critDamage",CDMGR:"critDamReduct"},ri.proList={hp:"HP",attack:"ATK",defense:"DEF",speed:"SPEED",hit:"hit",dodge:"dodge",crit:"crit",critDamage:"CDMG",resilience:"RES",critDamReduct:"CDMGR"},ri.RES_W=["K","M","B","T"];var si=ri;var Rg=class extends Laya.Box{};var{regClass:eP}=Laya,Pg=class extends Rg{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.equipItem=e,this.equipItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(!this.equipItem)return;this.btn_remove.visible=!1,this.knapsackItem.dataSource=this.equipItem;let e=this.equipItem.itemItem.id;if(this.equipItem.type==rt.TYPE_Equipment){this.tf_des.visible=!1,this.img_att.visible=!0,this.list_attrs.visible=!0;let n=I.intance.getEquipDataById(e),r=n.attribute;this.list_attrs.array=r,this.tf_name.text=p.instance.getLanguage(this.equipItem.itemItem.name),this.tf_name.color=si.qualityColors[this.equipItem.itemItem.quality-1],this.tf_part.text=p.instance.getUILang(`Part_${n.type}:`),this.tf_grade.color=si.qualityColors[this.equipItem.itemItem.quality-1];let s=I.intance.getEquipSuitDataById(e);if(s&&s.skill){let o=s.skill;var i=I.intance.m_dicSkills.get(o);this.skillListItem.dataSource=i,this.skillListItem.visible=!0}else this.skillListItem.visible=!1;this.tf_grade.text=p.instance.getUILang(`Quality_${this.equipItem.itemItem.quality}:`)}else{let n=I.intance.getArrFromDicItemByKey("id",e);if(this.img_att.visible=!1,this.list_attrs.visible=!1,this.tf_des.visible=!0,n.length>0){let r=n[0];this.tf_des.text=p.instance.getLanguage(r.des),this.tf_name.text=p.instance.getLanguage(this.equipItem.itemItem.name),this.tf_name.color=si.qualityColors[this.equipItem.itemItem.quality-1],this.tf_part.text=p.instance.getUILang(`Part_${r.type}:`),this.tf_grade.color=si.qualityColors[this.equipItem.itemItem.quality-1];let s=r.skillId;if(s){var i=I.intance.m_dicSkills.get(s);this.skillListItem.dataSource=i,this.skillListItem.visible=!0}else this.skillListItem.visible=!1;this.tf_grade.text=p.instance.getUILang(`Quality_${this.equipItem.itemItem.quality}:`)}}}};Pg=d([eP("Aiuw9-xTQyukAos8XwcRDA")],Pg);var Ng=class extends Laya.Dialog{};var Hi=class{constructor(){}};Hi.UPDATE_HERO_EVENT="HeroEvent:UPDATE_HERO_EVENT",Hi.UPDATE_HERO_UPGRADE_EVENT="HeroEvent:UPDATE_HERO_UPGRADE_EVENT",Hi.UPDATE_HERO_EQUIP="HeroEvent:UPDATE_HERO_EQUIP";var{regClass:tP}=Laya,Og=class extends Ng{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.selectPos=1;this.equipInfo=[];this.hostPid=0;this.clientPid=0;this.cardList=[];this.upgradeLock=!1}setOpenData(e){e&&(this._vo=e[0],e[1]&&(this.hostPid=e[1],this.clientPid=e[2],this.clientPid&&this.clientPid==v.instance.playerDto.pid&&(this._vo.state=4)),this._vo.newFightFlag||he.isFightHero(this._vo.pk)||this._vo.state!==0?this.btn_upgrade.disabled=!0:this.btn_upgrade.disabled=!1)}onComplete(){}onEnable(){this.initEquipBg(),this.initEquip(),this.btn_last.on(Laya.Event.CLICK,this,this.onClickLast),this.btn_next.on(Laya.Event.CLICK,this,this.onClickNext),this.btn_upgrade.on(Laya.Event.CLICK,this,this.onClickUpgrade),this.btn_out.on(Laya.Event.CLICK,this,this.onClickOut),_.intance.on(Hi.UPDATE_HERO_EQUIP,this,this.wearSucess);for(let n=1;n<8;n++)this["equip_"+n].on(Laya.Event.CLICK,this,this.onClickEquip,[n]);this.EquipDetailBox.getChildByName("btn_remove").on(Laya.Event.CLICK,this,this.onUnequip);let i=this.EquipDetailBox.getChildByName("knapsackItem");if(i){let n=i.getChildByName("txt_num");n&&n.visible&&(n.visible=!1)}}async onClickUpgrade(){if(this.upgradeLock)return;this.upgradeLock=!0;let e=I.intance.getConsumptionByLevel(this._vo.heroItem.level);if(e&&e[0]){let i=e[0].consumption;console.log(i);let n=i[1],r=Laya.Handler.create(this,async()=>{let s=await w.requestPost("wxgame/hero/star",{heroPk:this._vo.pk});if(s){let o=s.hero;this._vo.id=o.id,this._vo.lv=o.lv,this._vo.color=o.color,this._vo.pk=o.pk,this._vo.newFightFlag=o.newFightFlag,this.showViewByVo(this._vo),this.initEquip(),_.intance.event(Hi.UPDATE_HERO_EVENT),C.instance.notice(p.instance.getLanguage(1684)),this.upgradeLock=!1}else this.upgradeLock=!1});Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1683,n),W.SURE,Laya.Handler.create(this,()=>{r&&r.run()}),Laya.Handler.create(this,()=>{this.upgradeLock=!1}))}}onClickNext(){let e=ft.instance.getNextHero(this._vo);e&&(this._vo=e,this.showViewByVo(e))}onClickLast(){let e=ft.instance.getLastHero(this._vo);e&&(this._vo=e,this.showViewByVo(e))}addEvent(){_.intance.on(Hi.UPDATE_HERO_UPGRADE_EVENT,this,this.onHeroUpgrade),this.equipBgBox.on(Laya.Event.CLICK,this,this.hideTips);for(let e=1;e<7;e++){let i=this["equip"+e];i.on(Laya.Event.CLICK,this,this.onClickEquip),this._vo.state!==0&&(i.disabled=!0)}}hideTips(){this.EquipDetailBox.visible=!1,this.equipBgBox.visible=!1,this.equipBgBox.off(Laya.Event.CLICK,this,this.hideTips)}onClickEquip(e,i){let n=this["equip_"+e],r=e,s,o=I.intance.getGeneralValueById(26);o&&(e==5?(r=12,s=o[0][0]):e==6?(r=12,s=o[1][0]):e==7?(r=12,s=o[2][0]):s=e);let l=n.getChildByName("knapsackItem");if(l&&l.visible){this.resetEquipInfoData(l.get_dataSource()),this.selectPos=s,this.EquipDetailBox.x=n.x+80,this.EquipDetailBox.visible=!0,this.equipBgBox.visible=!0,this.equipBgBox.on(Laya.Event.CLICK,this,this.hideTips);let u=this.EquipDetailBox.getChildByName("btn_remove");u.visible=!0}else O.intance.openModule(L.WalletChoosePropsDialog,[rt.CHOOSE_PutOn,r,this._vo.pk,s,this.cardList])}resetEquipInfoData(e){let i=e;this.EquipDetailBox.dataSource=i,this.equipBgBox.off(Laya.Event.CLICK,this,this.hideTips)}onDisable(){this.removeEvent()}removeEvent(){this.selectPos=null,_.intance.off(Hi.UPDATE_HERO_UPGRADE_EVENT,this,this.onHeroUpgrade),_.intance.off(Hi.UPDATE_HERO_EQUIP,this,this.wearSucess)}onHeroUpgrade(){this._vo=v.instance.m_heroData.heroVoDic.get(this._vo.pk),this._vo&&this.showViewByVo(this._vo)}updateEquip(){let e=this._vo.equipDtoList;for(let i=0;i<e.length;i++){let n=e[i];this["equip"+(i+1)].dataSource=n}}async showViewByVo(e){console.log("showViewByVo",e),this.txt_name.text=e.name;let i=e.heroItem.level+"";e.heroItem.level>=6||e.newFightFlag||he.isFightHero(this._vo.pk)||this._vo.state!==0?this.btn_upgrade.disabled=!0:this.btn_upgrade.disabled=!1,ft.instance.setStar(this,i),this.box_star.visible=!0,this.heroSk.dataSource=e,this.list_attrs.array=this.heroAttr;var n=[];e.heroItem.skillIds.forEach(r=>{var s=I.intance.m_dicSkills.get(r);n.push(s)}),this.list_skills.array=n,this.updatePk()}async updatePk(){let e=null;this._vo.state!==0?(console.log("this._vo.state: ",this._vo.state),this._vo.state==1?(this.btn_out.disabled=!0,this.btn_upgrade.disabled=!0,this.btn_out.label=p.instance.getLanguage(1037)):this._vo.state==2||this._vo.state==4?(this.btn_upgrade.disabled=!0,he.isFightHero(this._vo.pk)?(this.box_sign.visible=!0,this.btn_out.disabled=!0,this.btn_out.label=p.instance.getLanguage(1038)):(this.box_sign.visible=!1,this.btn_out.disabled=!1,this.btn_out.label=p.instance.getLanguage(1037),this.btn_upgrade.disabled=!0)):this._vo.state==3?(this.box_sign.visible=!1,this.btn_out.disabled=!0,this.btn_upgrade.disabled=!0,this.btn_out.label=p.instance.getLanguage(1037)):this._vo.state==4&&(this.btn_upgrade.disabled=!0),(this._vo.state==1||this._vo.state==2)&&(e=await w.requestPost("wxgame/lease/heroInfo",{heroPk:this._vo.pk}),e&&e.info&&e.info.startTime&&e.info.startTime>fe.getCurrentDayTimestamp()&&(this.btn_out.disabled=!0,this.btn_upgrade.disabled=!0))):he.isFightHero(this._vo.pk)?(this.box_sign.visible=!0,this.btn_out.disabled=!0,this.btn_out.label=p.instance.getLanguage(1038)):(this.box_sign.visible=!1,this.btn_out.disabled=!1,this.btn_out.label=p.instance.getLanguage(1037))}async initEquip(){let e;if(this._vo.state==4?e=await w.requestPost("wxgame/equip/info",{heroPk:this._vo.pk}):this.hostPid?e=await w.requestPost("wxgame/equip/info",{heroPk:this._vo.pk,heroPid:this.hostPid}):e=await w.requestPost("wxgame/equip/info",{heroPk:this._vo.pk}),e){console.log(e);let i=[];this.cardList=[];for(let n in e.equipInfo){let r=e.equipInfo[n];r.pos=Number(n),i.push(r)}this.equipInfo=i||[],e.attr&&(this.heroAttr=Object.entries(e.attr),this.equipInfo&&this.refreshEquipShow())}}refreshEquipShow(){for(let e=1;e<8;e++){let i=this.equipInfo[e-1];if(i){let n=I.intance.getArrFromDicItemByKey("id",i.id)[0],r=I.intance.getGeneralValueById(26),s;i.pos==r[0][0]?s=5:i.pos==r[1][0]?s=6:i.pos==r[2][0]?s=7:s=n.subType;let o=this["equip_"+s];if(o){let l=o.getChildByName("img_default");l.visible=!1;let u=o.getChildByName("knapsackItem");u.visible=!0;let m=new Xe(i.id);u.dataSource=m,s<5&&(this._vo.state==2||this._vo.state==4)&&(o.disabled=!i.own)}}}this.showEquipRed()}wearSucess(e){let i=e.type,n=I.intance.getGeneralValueById(26);i!==n[0][1]&&i!==n[1][1]&&i!==n[2][1]&&(this.equipInfo.push(e),this.refreshEquipShow())}initEquipBg(){for(let e=1;e<8;e++){let i=this["equip_"+e];if(i.disabled=this._vo.state!==0,!i)return;let n=i.getChildByName("img_default"),r=i.getChildByName("knapsackItem"),s=r.getChildByName("txt_num");switch(e<5?s.visible=!1:s.visible=!0,e){case 1:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_wuqi.png";break;case 2:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_toukui.png";break;case 3:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_kuijia.png";break;case 4:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_xuezi.png";break;case 5:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_dunpai.png";break;case 6:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_dunpai.png";break;case 7:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_dunpai.png";break;case 101:case 102:case 103:n.skin="res/heroDetail/img_information_dunpai.png";break}n.visible=!0,r.visible=!1}}showEquipRed(){console.log(this.equipInfo);let e=I.intance.getGeneralValueById(26);var i=v.instance.m_packageData.getBackByType(5);for(let u=1;u<8;u++){let m=this["equip_"+u],h=u;e&&(u==5?h=e[0][1]:u==6?h=e[1][1]:u==7&&(h=e[2][1]));var n=v.instance.m_packageData.getListBySubType(h);if(m&&n.length>0){let y=m.getChildByName("red_mail");y&&(y.visible=!0)}}let r=[],s=!0,o;this.cardList=[];for(let u=0;u<this.equipInfo.length;u++){let m=this.equipInfo[u];this.cardList.push(m.id);let h=I.intance.getArrFromDicItemByKey("id",m.id);if(h&&h[0].subType!==e[0][1]&&h[0].subType!==e[1][1]&&h[0].subType!==e[2][1]&&(o=I.intance.getEquipSuitDataById(m.id),!s||!o||r.indexOf(o.id)<-1&&r.length>0?s=!1:r.push(o.id)),h&&h.length>0){let y=h[0].subType;m.pos==e[0][0]?y=5:m.pos==e[1][0]?y=6:m.pos==e[2][0]&&(y=7);let x=this["equip_"+y],E=x.getChildByName("knapsackItem"),S=E.getChildByName("txt_num");if(y<5)S.visible=!1;else{S.visible=!0;var l=v.instance.m_packageData.getCountById(m.id);S.text=l+"",E.gray=!(l>0)}let T=i.findIndex(N=>N.subType==h[0].subType&&N.itemItem.quality>h[0].quality);if(T<0&&(console.log(T),x)){let N=x.getChildByName("red_mail");N&&(N.visible=!1)}}}this.showViewByVo(this._vo)}async onClickOut(){if(We.instance.inMinWaiting){C.instance.notice(p.instance.getLanguage(1187));return}let e=this,i=this._vo.newFightFlag==1?1:0,n=await w.requestPost("wxgame/hero/heroFight",{pk:this._vo.pk,type:i});n?(n.type==1?v.instance.playerDto.newFightHeroPk=n.pk:v.instance.playerDto.fightHeroPk=n.pk,e.updatePk(),_.intance.event(Hi.UPDATE_HERO_EVENT,i)):C.instance.notice(p.instance.getLanguage(135))}async onUnequip(){let e=I.intance.getGeneralValueById(26),i=this.selectPos===e[0][1]?101:this.selectPos;this.selectPos===e[0][0]?i=e[0][0]:this.selectPos===e[1][0]?i=e[1][0]:this.selectPos===e[2][0]?i=e[2][0]:i=this.selectPos;let n=await w.requestPost("wxgame/equip/takeOff",{heroPk:this._vo.pk,pos:i});if(n){for(let r=0;r<this.equipInfo.length;r++){let s=this.equipInfo[r];if(I.intance.getArrFromDicItemByKey("id",s.id)[0]&&s.pos===n.pos){this.equipInfo.splice(r,1);break}}this.initEquipBg(),this.refreshEquipShow(),this.hideTips()}else console.error("Failed to unequip: ",n)}};Og=d([tP("Qri7gUY9SiWsYhtvNCEOQQ")],Og);var Hg=class extends Laya.Box{};var{regClass:iP}=Laya,Ug=class extends Hg{constructor(){super();this.isAddEvent=!1;this.needPop=!0}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,this.heroVo=e,!this.heroVo){this.img_back.skin=M.instance.getHeroBackIcon(0),this.box_show.visible=!1;return}this.needPop&&this.addEvent(),this.setCurrentOutPut()}async setCurrentOutPut(){var e=[];he.isFightHero(this.heroVo.pk)&&e.push(1),this.heroVo.state==4&&e.push(14),this.heroVo.state==3&&e.push(13),this.heroVo.state==2&&e.push(3),this.heroVo.state==1&&e.push(2),this.heroVo.newFightFlag==1?(e.push(5),this.img_newFightFlag.visible=!0):this.img_newFightFlag.visible=!1,this.list_state.array=e,this.img_back.skin=M.instance.getHeroBackIcon(this.heroVo.heroItem.quality),this.img_front.skin=M.instance.getHeroFrontIcon(this.heroVo.heroItem.quality),this.img_hero.skin=this.heroVo.simgurl,this.tf_name.text=qe.shortHeroStr(this.heroVo.name);let i=this.heroVo.heroItem.level+"";ft.instance.setStar(this,i),this.box_show.visible=!0,this.destroyed}toDetail(){this.heroVo.id&&O.intance.openModule(L.HeroDetailDialog,[this.heroVo])}};Ug=d([iP("PfeS1F4rQCqM4vXJpBZVWQ")],Ug);var Fg=class extends Laya.Box{};var{regClass:aP}=Laya,Vg=class extends Fg{constructor(){super();this.isAddEvent=!1;this.isReady=!1;this.skinIndex=0;this.spineAniIndex=0;this.skinArray=["goblin","goblingirl"];this.needChangeAni=!0}onEnable(){this.sk=this.box_sk}addEvent(){this.isAddEvent||(this.isAddEvent=!0,this.needChangeAni&&this.on(Laya.Event.CLICK,this,this.changeAni),this.box_sk.on(Laya.Event.READY,this,this.onSkReady))}onSkReady(){this.isReady=!0}set dataSource(e){super.dataSource=e,this.heroVo=e,this.addEvent(),this.createSpine()}createSpine(){Laya.loader.load(this.heroVo.sk,Laya.Loader.SPINE).then(e=>{this.destroyed||(this.sk.templet=e,this.sk.animationName=Di.ANI_daiji,this.spineAniNum=Di.ANIS.length)})}changeAni(){if(this.isReady){this.spineAniIndex++,this.spineAniIndex>=this.spineAniNum&&(this.spineAniIndex=0);var e=Di.ANIS[this.spineAniIndex];this.sk.play(e,!0,!0)}}changeSkin(){this.sk.showSkinByName(this.skinArray[this.skinIndex]),++this.skinIndex>=this.skinArray.length&&(this.skinIndex=0)}onDisable(){this.box_sk.off(Laya.Event.READY,this,this.onSkReady)}play(e,i,n,r,s,o,l){if(!this.isReady){console.log("动画未准备好，不能play");return}var u=this.parent.parent;i?(this.sk.play(e,i,n,r,s,o,l),u.beyond&&this.sk.paused()):u.beyond||this.sk.play(e,i,n,r,s,o,l)}paused(){this.isReady&&(this.sk?this.sk.paused():console.log("动画: paused, sk is null"))}resume(){this.isReady&&(this.sk?this.sk.resume():console.log("动画: resume, sk is null"))}};Vg=d([aP("kS5K53GHRWOdgfXoo6VH1A")],Vg);var Gg=class extends Laya.Box{};var RSe={9001:"0x3f76562685E9Cd18ba88C062bBC5999D78275734",56:"0x837656c3f5858692cCdce13BA66e09d2685073df",97:"0x6f4DceCEe81bfB85872BEaBC44C303b7c2f6c108"},PSe={9001:"0x96397347Ea2beE29713Bc48749eB277D6A36A407",56:"0x837656c3f5858692cCdce13BA66e09d2685073df",97:"0x6f4DceCEe81bfB85872BEaBC44C303b7c2f6c108"},NSe={9001:"0x67Dc36C19835Fa65Bf4B100FAC9a80A9E9280fB9",56:"0x55d398326f99059ff775485246999027b3197955",97:"0x44004827f2F72566E12884A38f63f72F2a5143ea"},OSe={9001:"0x67Dc36C19835Fa65Bf4B100FAC9a80A9E9280fB9"},HSe={9001:"0x67Dc36C19835Fa65Bf4B100FAC9a80A9E9280fB9"},USe={9001:"0x2418F7F0486deBc9270E16126F36526925EDAAE4"},FSe={97:"0xa2f97A458c62f321f9565f03289f30BF4E0377Ab",9001:"0x84d225321122E69406B198e3A9B82Dc1BdF897e6"},VSe={9001:"0x945103b2fEa1EAc6cea4d25e9BBaA5284d128b29"},GSe={97:"0xfe261946218873F6eaec714BF757493256817534",9001:"0xfB51603B7863267a19736B070Bf9Cb2e5Fa256AF"},WSe={9001:"0xa2f97A458c62f321f9565f03289f30BF4E0377Ab"},Bu={5611:"0x6B2a7485a342726F4E3968683111a539B160566D"},j1={[df.OpBNB]:"0x6536C561934B0dbC76757274dFf3e2dA723d61b6"},Ru={97:"0xfe261946218873F6eaec714BF757493256817534",9001:"0xE3a61771Ce3CA772D446e687AFd52DC28eC9cCb8",5611:"0x552a9558723d2B44B65237D4d52306442ac4Cf93"},z1={[df.OpBNB]:"0x5ee3dc2e3Fe6570deB69266f5e6b62647D72288D"};var Wg=class{constructor(){this.pool_contract=null;this.rewardTokenAddress=""}stakeTokenAndReward(){return this.heroesId?[[this.heroesId,this.capacity/24]]:[]}async calcCapacity(t){for(let e of t){let i=ft.instance.heroOutputRateDic.get(e.mineralLevel);e.staking_second_rewards=i.capacity*this.baseYield/24+""}return t}async earnedAll(){return this.yieldValue}async refreshVo(){let t=await w.requestPost("cybertron-sys-api/api/v1/mineral/getMineralPool",{mineralId:this.id});this.heroesId=0,this.yieldValue=0,Object.assign(this,t)}async stake(t){if(!await K.instance.checkHeroIsBuzy(t))return _e.instance.showLoading(!0),await this.pool_contract.methods.stake(t,this.id).send({from:K.instance.walletAddress},(i,n)=>{if(i)return _e.instance.hideLoading(),!1}),!0}async withdrawAllAndClaim(){return _e.instance.showLoading(!0),await this.pool_contract.methods.withdraw(this.heroesId).send({from:K.instance.walletAddress},(t,e)=>{if(t)return _e.instance.hideLoading(),!1}),await this.refreshVo(),!0}async claimAllReward(){_e.instance.showLoading(!0),await w.requestPost("cybertron-sys-api/api/v1/mineral/collect",{mineralId:this.id}),await this.refreshVo(),_e.instance.hideLoading()}async getAccountTokens(){await this.refreshVo()}};var Pu=class a{constructor(){this.poolAry=[];this.pool_contract=null}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){this.poolDic=new ye}async initPoolList(){this.poolAry=[];let t=await w.requestPost("cybertron-sys-api/api/v1/mineral/getMineralPoolList",{});for(let e of t){let i=new Wg;Object.assign(i,e);let n=I.intance.m_dicItems.get(i.resourcesType);i.rewardTokenAddress=n.tokenId,i.pool_contract=this.pool_contract,this.poolDic.set(i.rewardTokenAddress,i),this.poolAry.push(i)}}async getHeroTokenIds(){let t=K.instance.walletAddress;try{console.log("getHeroTokenIds, account:"+t);var e;let n;ie.vType==2?(e=Ua.id,n=j1[e]):ie.vType==1?(e=Fa.id,n=Bu[e]):(e=Fa.id,n=Bu[e]);let r=await K.instance.walletClient.getChainId();if(e!==r){var i=await K.instance.switchChain(e);if(!i){await K.instance.addChain(e),await K.instance.resetPublicAndWallet(e);let o=await K.instance.walletClient.getChainId();if(e!==o)return this.onEndHeroList(),console.log("切换失败，请手动切换"),null}}else await K.instance.resetPublicAndWallet(e);return n?(console.log("publicClient",K.instance.publicClient),await K.instance.publicClient.readContract({address:n,abi:oe.HERO_LIST_ABI,functionName:"list",args:[t]})):(this.onEndHeroList(),C.instance.notice(p.instance.getLanguage(1219,r)),null)}catch(n){if(console.log("获取英雄列表错误====》",n),n instanceof Error){let r=n.message;console.log("获取英雄列表 错误====》",r)}}}async transferHero(t,e){_e.instance.showLoadingByInfo(p.instance.getLanguage(1119));try{var i;let l;ie.vType==2?(i=Ua.id,l=z1[i]):ie.vType==1?(i=Fa.id,l=Ru[i]):(i=Fa.id,l=Ru[i]);let u=await K.instance.walletClient.getChainId();if(i!==u){var n=await K.instance.switchChain(i);if(!n){this.onEndHeroList(),console.log("切换失败，请手动切换");return}}if(!l)return this.onEndHeroList(),C.instance.notice(p.instance.getLanguage(1220,u)),!1;if(console.log("判断授权 transferHeroAddress: "+l+", acceptAddress:"+t+", chainIDData:"+i),!await this.setApprovalForAll(l))return console.log("未授权"),this.onEndHeroList(),C.instance.notice(p.instance.getLanguage(15)),!1;console.log("授权成功 开始购买");var r=await K.instance.walletClient.writeContract({account:K.instance.walletAddress,address:l,abi:oe.TRANSFER_HERO_ABI,functionName:"batchTransfer",args:[t,e]});console.log("============"+r);let h=await K.instance.publicClient.waitForTransactionReceipt({hash:r});return console.log(`Tx with hash: ${r}`,h),h&&h.status=="success"?(this.delHero(e),this.waitGetHero(i,r),console.log(`Tx successful with hash: ${r}`),r):(this.onEndHeroList(),he.TransactionErrorTip(),!1)}catch(l){this.onEndHeroList();var s=l.shortMessage;if(s&&s.indexOf("does not match")!=-1){var o=K.instance.getChainName(i);s=p.instance.getLanguage(1172,o)}if(console.log(s),C.instance.notice(s),l instanceof X){let u=l.walk(m=>m instanceof $t);if(u instanceof $t){let m=u.data?.errorName??"";console.log("============errorName: "+m)}}return null}}async setApprovalForAll(t){let e=K.instance.walletAddress;try{console.log("查看是否已经授权, owner:"+e+", spender:"+t);let n;var i;ie.vType==2?(i=Ua.id,n=z1[i]):ie.vType==1?(i=Fa.id,n=Ru[i]):(i=Fa.id,n=Ru[i]);let r;ie.vType==2?(i=Ua.id,r=j1[i]):ie.vType==1?(i=Fa.id,r=Bu[i]):(i=Ua.id,r=Bu[i]);let s=await K.instance.publicClient.readContract({address:r,abi:oe.HERO_LIST_ABI,functionName:"isApprovedForAll",args:[e,n]});if(console.log("allowance",s),s)return!0;{console.log("未授权，进行授权, owner:"+e);let o=await K.instance.walletClient.writeContract({address:r,abi:oe.HERO_LIST_ABI,functionName:"setApprovalForAll",args:[t,!0],account:e});console.log("============"+o);let l=await K.instance.publicClient.waitForTransactionReceipt({hash:o});return console.log(`setApprovalForAll with hash: ${o}`,l),l&&l.status=="success"?(console.log(`setApprovalForAll successful with hash: ${o}`),!0):!1}}catch(n){if(console.log("授权错误====》",n),n instanceof Error){let r=n.message;console.log("授权错误====》",r)}}}onEndHeroList(t=null){_e.instance.hideLoading(),t&&_.intance.event(b.EVENT_END_HEROTRANSFER,[t])}waitGetHero(t,e){this.chainId=t,this.hashId=e,Laya.timer.loop(2e3,this,this.getHero)}delHero(t=null){var e=w.requestPost("wxgame/mutiNft/delHero",{heroList:t}).catch(i=>{})}async getHero(){var t=await w.requestPost("wxgame/mutiNft/check",{chainId:this.chainId,hashId:this.hashId}).catch(e=>{});t&&t.heroList&&t.heroList.length>0&&(Laya.timer.clear(this,this.getHero),this.onNewAddHero(t.heroList))}onNewAddHero(t){v.instance.m_heroData.herosDataRemoveHandler(t),this.onEndHeroList(t)}};var jg=class extends Laya.Dialog{};var{regClass:nP}=Laya,yr=class extends jg{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.myHeroesNum=0;this.selectedNum=0}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_readClipboard.disabled=!navigator.clipboard,this.btn_readClipboard.on(Laya.Event.CLICK,this,this.readClipboard),this.btn_transferRecords.on(Laya.Event.CLICK,this,this.onShowTransferRecord),this.btn_approve.on(Laya.Event.CLICK,this,this.onTransferHero),this.btn_checkBox.on(Laya.Event.CLICK,this,this.onSelectAll),_.intance.on(b.EVENT_END_HEROTRANSFER,this,this.onEndHeroTransfer),_.intance.on(b.EVENT_REFRESH_HEROTRANSFER,this,this.onRefreshHeroTransfer),this.list_hero.array=[]}async readClipboard(){navigator.clipboard?navigator.clipboard.readText().then(e=>{console.log("剪切板中的文本内容:",e),this.input_acceptAddress.text=e}).catch(e=>{console.error("无法读取剪切板内容:",e)}):console.error("当前浏览器不支持 Clipboard API")}onOpened(e){this.getHeroTokenIds()}async getHeroTokenIds(){var e=await Pu.instance.getHeroTokenIds();console.log("获得链上英雄ID heroTokenIds: ",e),this.heroVos=[],e&&e.length>0&&e.forEach(i=>{i=parseInt(i);var n=v.instance.m_heroData.getCanTransferHero(i);n&&this.heroVos.push(n)}),this.list_hero.array=this.heroVos,this.updateNum()}onEndHeroTransfer(e){this.heroVos=this.heroVos.filter(i=>!e.includes(i.pk)),this.list_hero.array=this.heroVos,this.updateNum()}onRefreshHeroTransfer(){this.list_hero.refresh(),this.updateNum()}updateNum(){!this.heroVos||this.heroVos.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1,this.selectedNum=0,this.heroVos.forEach(e=>{e&&e.checked&&this.selectedNum++}),yr.chooseNum=this.selectedNum,this.myHeroesNum=this.heroVos.length,this.tf_myHeroesNum.text=p.instance.getLanguage(1222,this.heroVos.length),this.tf_selectedNum.text=p.instance.getLanguage(1223,this.selectedNum)}onSelectAll(){var e=this.btn_checkBox.selected;let i=0;e&&this.heroVos.forEach(n=>{n&&(n.checked=!1)}),this.heroVos.forEach(n=>{i+=1,i<101&&n&&(n.checked=e)}),this.list_hero.refresh(),this.updateNum()}onBack(){this.close()}async onTransferHero(){var e=this.input_acceptAddress.text;if(e==""){C.instance.notice(p.instance.getUILang("PLEASE ENTER THE ACCEPT ADDRESS"));return}var i=[];this.heroVos.forEach(n=>{n.checked&&i.push(n.pk)}),i.length>0?await Pu.instance.transferHero(e,i):C.instance.notice(p.instance.getLanguage(1218))}onShowTransferRecord(){O.intance.openModule(L.TransferRecordDialog)}onDisable(){this.removeEvent()}removeEvent(){_.intance.off(b.EVENT_END_HEROTRANSFER,this,this.onEndHeroTransfer),_.intance.off(b.EVENT_REFRESH_HEROTRANSFER,this,this.onRefreshHeroTransfer)}};yr.chooseNum=0,yr=d([nP("rERE5ZadTfqASnxDrsNtyw")],yr);var{regClass:rP}=Laya,zg=class extends Gg{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.heroVo=e,this.heroVo&&(this.img_checked.visible=this.heroVo.checked,this.heroListItem.needPop=!1,this.heroListItem.dataSource=this.heroVo,this.addEvent())}toDetail(){yr.chooseNum>=100&&!this.heroVo.checked||(this.heroVo.checked=!this.heroVo.checked),_.intance.event(b.EVENT_REFRESH_HEROTRANSFER)}};zg=d([rP("tzBcfqNYSL6KP4NjtslyHA")],zg);var Kg=class extends Laya.Scene{};var{regClass:sP}=Laya,qg=class extends Kg{constructor(){super(...arguments);this.currTab=0;this.type=1;this.items=[];this.hasItem=!1}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onOpened(e){this.type=e}onEnable(){this.list_hero.vScrollBarSkin="",this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_transfer.on(Laya.Event.CLICK,this,this.onTransfer),_.intance.on(Hi.UPDATE_HERO_EVENT,this,this.updateHero),this.btn_1.on(Laya.Event.CLICK,this,this.onClickTab,[1]),this.btn_2.on(Laya.Event.CLICK,this,this.onClickTab,[2]),this.initContainer()}initContainer(){this.list_hero.visible=!1,this.list_hero.vScrollBarSkin="",this.createHeadList();let e=v.instance.m_heroData.heroVoDic.values,i=ce.filterObjectsByState(e,1),n=ce.filterObjectsByState(e,2),r=ce.filterObjectsByNewFightFlag(e);this.tf_hireHero.text=`${i.length}`,this.tf_proxyTotal.text=`${n.length}`,this.tf_heroTotal.text=`${r.length}`,console.log(i,n)}updateHero(e){this.type=e+1,this.createHeadList()}async createHeadList(){await Qt.instance.ownerHero(!0),!this.destroyed&&(this.type?this.onClickTab(this.type):this.onClickTab(1))}async onClickTab(e){if(this.currTab!=e){if(this.setTab(e),e==1){if(this.destroyed)return;var i=await this.getItemByType(1);i.sort((n,r)=>{if(n===null&&r!==null)return 1;if(n!==null&&r===null)return-1;if(n!==null&&r!==null){if(n.heroItem.quality!==r.heroItem.quality)return r.heroItem.quality-n.heroItem.quality;if(n.heroItem.icon===null&&r.heroItem.icon!==null)return 1;if(n.heroItem.icon!==null&&r.heroItem.icon===null)return-1;if(n.heroItem.icon!==r.heroItem.icon)return n.heroItem.icon<r.heroItem.icon?-1:1}return 0}),this.list_hero.array=i,this.list_hero.visible=!0,this.btn_transfer.visible=!0}else{if(this.list_hero.visible=!0,this.destroyed)return;var i=await this.getItemByType(2);i.sort((r,s)=>{if(r===null&&s!==null)return 1;if(r!==null&&s===null)return-1;if(r!==null&&s!==null){if(r.heroItem.quality!==s.heroItem.quality)return s.heroItem.quality-r.heroItem.quality;if(r.heroItem.icon===null&&s.heroItem.icon!==null)return 1;if(r.heroItem.icon!==null&&s.heroItem.icon===null)return-1;if(r.heroItem.icon!==s.heroItem.icon)return r.heroItem.icon<s.heroItem.icon?-1:1}return 0}),this.list_hero.dataSource=i,this.btn_transfer.visible=!1}this.list_hero.selectedIndex=-1,this.hasItem&&(this.list_hero.selectedIndex=0)}}async getItemByType(e){var i=e==1?Di.TYPE_Professional:Di.TYPE_Training;this.items=[],this.hasItem=!1;let n=v.instance.m_heroData.getListByType(i);for(var r=n.length>10?n.length:10,s=0;s<r;s++){var o=n[s];o?(s==0&&(this.hasItem=!0),this.items.push(o)):this.items.push(null)}return this.items}setTab(e){for(let i=1;i<3;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b"):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe")}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}onTransfer(){O.intance.openModule(L.HeroTransferView)}onDisable(){_.intance.off(Hi.UPDATE_HERO_EVENT,this,this.updateHero)}};qg=d([sP("eEFn-xcRTXagUEZFDdSujw")],qg);var Yg=class extends Laya.Box{};var{regClass:oP}=Laya,$g=class extends Yg{set dataSource(t){super.dataSource=t;var e=t;if(!e)return;let n=I.intance.getAttributeDataById(e[0]).identification;this.tf_name.text=n,this.tf_num.text=`+${e[1]}`}};$g=d([oP("NAU4mWDMR0mrfUY9FO6URw")],$g);var Xg=class extends Laya.Box{};var{regClass:lP}=Laya,Qg=class extends Xg{set dataSource(t){super.dataSource=t;var e=t;e&&(this.tf_name.text=p.instance.getUILang(e[1]),this.tf_num.text=e[2])}};Qg=d([lP("BFrnzfZDRh2v3vDKqrNVwA")],Qg);var Jg=class extends Laya.Box{};var{regClass:cP}=Laya,Zg=class extends Jg{constructor(){super();this.isBig=!1;this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.skillItem=e,this.skillItem&&(this.txt_num.text="",this.img_icon.skin=M.instance.getSkillIcon(this.skillItem.icon,this.isBig))}};Zg=d([cP("qJVd2M3_Td-5eIx8PsQpAw")],Zg);var e_=class extends Laya.Box{};var{regClass:uP}=Laya,t_=class extends e_{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.skillItem=e,this.skillItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.skillItem&&(this.skillIconItem.dataSource=this.skillItem)}toDetail(){this.skillItem&&O.intance.openModule(L.SkillTipDialog,this.skillItem)}};t_=d([uP("VRh1GpjHSyqm75euC37ZKw")],t_);var i_=class extends Laya.Dialog{};var{regClass:pP}=Laya,a_=class extends i_{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}setOpenData(e){e&&(this.skillItem=e)}onEnable(){this.item.dataSource=this.skillItem,this.tf_name.text=p.instance.getLanguage(this.skillItem.name);var e=[["type","S_type",p.instance.getLanguage(this.skillItem.name)],["distance","S_distance",this.skillItem.distance],["hurt","S_hurt",this.skillItem.hurt/100+"%"],["cd","S_cd",this.skillItem.cd/1e3+p.instance.getUILang("S_S")],["displacement","S_displacement",this.skillItem.displacement],["targetsType","S_targetsType",p.instance.getUILang("S_targetsType"+this.skillItem.targetsType)]];this.list_skillAttrs.array=e}removeEvent(){}};a_=d([pP("PiBuXnP8ToeveVbB_bfhUQ")],a_);var n_=class extends Laya.Box{};var{regClass:mP}=Laya,r_=class extends n_{constructor(){super();this.isBig=!1;this.isAddEvent=!1}set dataSource(e){super.dataSource=e,e&&(this.img_icon.skin=`gameIcon/hero/heroDetail/img_hero_state_${e}.png`)}};r_=d([mP("kgETBhusT2WQRM1T39-4EA")],r_);var s_=class extends Laya.Dialog{};var{regClass:hP}=Laya,o_=class extends s_{constructor(){super()}onOpened(t){this.list_record.array=[],this.onGetList()}async onGetList(){var t=await w.requestPost("wxgame/mutiNft/record",{});t&&t.record?(this.list_record.array=t.record,!t.record||t.record.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1):C.instance.notice(p.instance.getLanguage(135))}};o_=d([hP("nkhiH9TpSY6e2tWJ07b86g")],o_);var l_=class extends Laya.Box{};var{regClass:dP}=Laya,c_=class extends l_{constructor(){super(...arguments);this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}onCopy(){let e=this.heroTransferDto.toAddress;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}set dataSource(e){super.dataSource=e,this.heroTransferDto=e,this.heroTransferDto&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){if(this.tf_createDate.text=fe.formatTimeStamp(this.heroTransferDto.createTime,"YY-MT-DD HH:MM"),this.tf_tokenId.text=this.heroTransferDto.nftId,this.tf_from.text=qe.abbreviateString(this.heroTransferDto.fromAddress,18),this.tf_to.text=qe.abbreviateString(this.heroTransferDto.toAddress,18),this.heroTransferDto.id>0){var e=new _i;e.id=this.heroTransferDto.id,e.lv=this.heroTransferDto.lv,e.color=this.heroTransferDto.color,this.heroListItem.needPop=!1,this.heroListItem.dataSource=e}}};c_=d([dP("STy30_L-RjafQhbdmoDLDw")],c_);var u_=class extends Laya.Dialog{};var{regClass:fP}=Laya,p_=class extends u_{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.checkIndex=1}onEnable(){this.initContainer()}initContainer(){this.check_coin1.on(Laya.Event.CLICK,this,this.onCheck,[1]),this.check_coin2.on(Laya.Event.CLICK,this,this.onCheck,[2]),this.check_coin3.on(Laya.Event.CLICK,this,this.onCheck,[3]),this.check_coin4.on(Laya.Event.CLICK,this,this.onCheck,[4]),this.btn_join.on(Laya.Event.CLICK,this,this.onBuy),this.btn_record.on(Laya.Event.CLICK,this,this.onRecord),this.buyCode.on(Laya.Event.INPUT,this,this.onRechargeCodeInput),this.buyCode.on(Laya.Event.BLUR,this,this.testRechargeCodeInput),this.tf_address.text=`${K.instance.walletAddress}`,this.checkChain(),this.onCheck(1)}async checkChain(){let e=await K.instance.walletClient.getChainId(),i=ie.vType==2?Ha.id:Un.id;e==i?this.getRest():await K.instance.switchChain(i)&&this.getRest()}async getRest(){let e=await K.instance.getIgoUSD(),i=await K.instance.getBalance2(e),r=ii(i,18);this.tf_rest.text=`${ce.truncateToTwoDecimalPlaces(Number(r))}`,console.log(i)}onRechargeCodeInput(){let e=Number(this.buyCode.text),i=ce.isNumber(this.buyCode.text);(e<0||!i)&&(this.buyCode.text="0")}testRechargeCodeInput(){let e=Number(this.buyCode.text);this.buyCode.text=`${ce.formatNumber(e)}`}onCheck(e){this.checkIndex=e;for(let i=1;i<5;i++){let n=this["check_coin"+i];n&&(e==i?n.selected=!0:n.selected=!1)}}async onBuy(){let e=0;switch(this.checkIndex){case 1:e=1e4;break;case 2:e=5e3;break;case 3:e=2e3;break;case 4:e=Number(this.buyCode.text);break}let i=await K.instance.getRechargedIgoUSD(),n=await K.instance.getAllRechargedMoney(),s=Number(ii(n,18)),o=ie.vType==2?Ha.id:Un.id,l=await K.instance.walletClient.getChainId(),u=await K.instance.getIgoLimitTime(),m=new Date().getTime();if(l!==o){await K.instance.switchChain(o)&&this.getRest();return}else if(Number(u)*1e3<=m)C.instance.notice(p.instance.getLanguage(1636));else if(i<=0&&e<100){C.instance.notice(p.instance.getLanguage(1637));return}else if(+(s<e)){C.instance.notice(p.instance.getLanguage(1638));return}else if(Number(this.tf_rest.text)<e){C.instance.notice(p.instance.getLanguage(1639));return}else if(this.passCode.text!=="fodc888"){C.instance.notice(p.instance.getLanguage(1640));return}else{let h=await K.instance.getIgoUSD(),y=ie.vType==2?Ha.id:Un.id;await K.instance.rechargeIgoUSD(e,y,h)&&(C.instance.notice(p.instance.getLanguage(1641)),this.getRest())}}onRecord(){O.intance.openModule(L.IgoRecordDialog)}onDisable(){this.check_coin1.off(Laya.Event.CLICK,this,this.onCheck),this.check_coin2.off(Laya.Event.CLICK,this,this.onCheck),this.check_coin3.off(Laya.Event.CLICK,this,this.onCheck),this.check_coin4.off(Laya.Event.CLICK,this,this.onCheck),this.btn_join.off(Laya.Event.CLICK,this,this.onBuy),this.btn_record.off(Laya.Event.CLICK,this,this.onRecord),this.buyCode.off(Laya.Event.INPUT,this,this.onRechargeCodeInput),this.buyCode.off(Laya.Event.BLUR,this,this.testRechargeCodeInput)}};p_=d([fP("vvPDCXWeRSidA4q06p09sA")],p_);var m_=class extends Laya.Scene{};var{regClass:yP}=Laya,h_=class extends m_{constructor(){super(...arguments);this.isDown=!1}onAwake(){}onOpened(e){}onEnable(){this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.btn_register.on(Laya.Event.CLICK,this,this.onPreResign),this.initPage(),this.refreshJoinBtnRed(),this.refreshTime(),Laya.timer.loop(1e3,this,this.refreshTime)}initPage(){let e=Laya.LocalStorage.getItem(ie.COOKIE_CF_LAN),i=e=="zh"?"res/igoPage/img_com_bj1.jpg":"res/igoPage/img_com_bj4.jpg",n=e=="zh"?"res/igoPage/img_com_bj2.jpg":"res/igoPage/img_com_bj5.jpg",r=e=="zh"?"res/igoPage/img_com_bj3.jpg":"res/igoPage/img_com_bj6.jpg";this.img_bg1.skin=i,this.img_bg2.skin=n,this.img_bg3.skin=r;let s=e=="zh"?"res/igoPage/img_com_anniu3.png":"res/igoPage/img_com_anniu2.png",o=e=="zh"?"res/igoPage/img_com_anniu4.png":"res/igoPage/img_com_anniu.png";Laya.timer.once(500,this,()=>{this.btn_join.skin=s,this.btn_register.skin=o}),e=="zh"?(this.tf_mon.y=this.tf_day.y=this.tf_hour.y=this.tf_min.y=this.tf_secs.y=4330,this.btn_register.y=4830):(this.tf_mon.y=this.tf_day.y=this.tf_hour.y=this.tf_min.y=this.tf_secs.y=4380,this.btn_register.y=4851),this.pageBox.scrollRect=new Laya.Rectangle(0,0,2e3,Laya.stage.height);var l=0;console.log("this.pageBox.scrollRect.y",this.pageBox.scrollRect.y);let u=this;this.pageBox.on(Laya.Event.MOUSE_DOWN,this,function(){u.isDown=!0,l=u.pageBox.mouseY}),this.pageBox.on(Laya.Event.MOUSE_UP,this,function(){u.isDown=!1}),this.pageBox.on(Laya.Event.MOUSE_MOVE,this,function(){if(u.isDown){var m=u.pageBox.mouseY-l;l=u.pageBox.mouseY;var h=u.pageBox.scrollRect.y-m;h<0?h=0:h>u.longBox.height-Laya.stage.height&&(h=u.longBox.height-Laya.stage.height),u.pageBox.scrollRect.y=h}})}onDisable(){this.closeHandle&&this.closeHandle.run(),this.removeEvent()}refreshJoinBtnRed(){this.img_red&&(this.img_red.visible=v.instance.getRedDotById(Ae.RED_IGO))}removeEvent(){Laya.timer.clear(this,this.refreshTime),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.btn_join.off(Laya.Event.CLICK,this,this.onJoin),this.btn_register.off(Laya.Event.CLICK,this,this.onPreResign)}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}refreshTime(){let e=new Date(2024,10,1,0,0,0),i=Math.floor(e.getTime()/1e3),n=fe.getTimeDifference(i);n&&(this.tf_mon.text=`${n.months}`,this.tf_day.text=`${n.days}`,this.tf_hour.text=`${n.hours}`,this.tf_min.text=`${n.minutes}`,this.tf_secs.text=`${n.seconds}`)}async onJoin(){await w.requestPost("wxgame/sys/redPointClear",{type:Ae.RED_IGO}),O.intance.openModule(L.IgoJoinDialog),this.img_red.visible=!1}onPreResign(){C.instance.notice(p.instance.getLanguage(12))}};h_=d([yP("b4l4liAxTZSR9wvhcYm1kw")],h_);var d_=class extends Laya.Dialog{};var{regClass:bP}=Laya,f_=class extends d_{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){this.btn_sure.on(Laya.Event.CLICK,this,this.onSure),this.initContainer()}async initContainer(){let e=await K.instance.getIgoRecord();this.list_record.array=e;let i=await K.instance.getMyAllRechargedMoney(),r=Number(ii(i,18));this.tf_all.text=`${r}`,console.log("records",e);let s=0;r<2e3&&r>=100?s=25:r<5e3&&r>=2e3?s=35:r<1e4&&r>=5e3?s=40:r>=1e4&&(s=50),this.tf_rate.text=`${s}%`}onSure(){this.close()}onDisable(){this.btn_sure.off(Laya.Event.CLICK,this,this.onSure)}};f_=d([bP("8m39UgG6S7mRkF5J0l8ICw")],f_);var y_=class extends Laya.Box{};var{regClass:gP}=Laya,b_=class extends y_{constructor(){super()}createChildren(){super.createChildren()}set dataSource(t){super.dataSource=t,this.setData(t)}setData(t){if(!t)return;this.btn_copy.on(Laya.Event.CLICK,this,this.onClickCopy),this.tf_from.text=`${ce.shortenString(K.instance.walletAddress,7,8)}`;let e=t.amount,n=ii(e,18);this.tf_amount.text=`${ce.truncateToTwoDecimalPlaces(Number(n))} USDT`;let r=t.timestamp,s=fe.formatDayAndTime(Number(r)*1e3);this.tf_createDate.text=`${s.date}  ${s.time}`}onClickCopy(){doCopy(K.instance.walletAddress),C.instance.notice(p.instance.getLanguage(132))}onDisable(){this.removeEvent()}removeEvent(){this.btn_copy.off(Laya.Event.CLICK,this,this.onClickCopy)}};b_=d([gP("kYsWN9XrQiiZLpBD1NVAEw")],b_);var g_=class extends Laya.Box{};var{regClass:_P}=Laya,__=class extends g_{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.itemVo=e,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(!this.itemVo)return;let e=this.itemVo.itemItem;if(this.knapsackItem.dataSource=this.itemVo,e?this.disabled=!1:this.disabled=!0,this.img_jiaobiao.visible=!1,this.img_win.visible=!1,this.itemVo.m_iId==Be.TYPE_QUAN_MNT){var i;this.itemVo.prizeStatus&&(this.itemVo.prizeStatus==2?(this.img_win.visible=!0,i=p.instance.getUILang("Won")):this.itemVo.prizeStatus==1&&(i=p.instance.getUILang("No Won"))),this.itemVo.chainStatus==1?(this.img_jiaobiao.visible=!0,this.img_jiaobiao.skin="res/item/img_chainStatus_2.png",i=p.instance.getUILang("On-Chain")):this.itemVo.lateStatus==1?i=p.instance.getUILang("Expired"):(this.img_jiaobiao.visible=!0,this.img_jiaobiao.skin="res/item/img_chainStatus_1.png",i=p.instance.getUILang("Off-Chain"))}}toDetail(){console.log(this.x),!(!this.itemVo||!this.itemVo.needTip)&&(this.itemVo.type===rt.TYPE_Equipment||this.itemVo.type===rt.TYPE_CARD)&&_.intance.event(b.SHOW_EQUIP_TIP,{data:this.itemVo,positionX:this.x})}};__=d([_P("HYoZb6e-RFKj8fjDKbl-7Q")],__);var L_=class extends Laya.Box{};var{regClass:LP}=Laya,v_=class extends L_{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.coinItems=e,this.coinItems&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(this.coinItems){var e=this.coinItems[0];this.txt_num.text=Pe.filterNumFormat(v.instance.getConsumeValue(this.coinItems[0]),this.coinItems[1],!1,!0),this.img_icon.skin=M.instance.getMoneyIcon(this.coinItems[0]),this.img_add.visible=e!=Be.TYPE_GOLD}}toDetail(){var e=this.coinItems[0];!this.coinItems||e==Be.TYPE_GOLD||(console.log(e),he.onGetMoney(e))}};v_=d([LP("NIAfVcg_S72kTvDQGuZ7vA")],v_);var x_=class extends Laya.Box{};var{regClass:vP}=Laya,I_=class extends x_{set dataSource(t){super.dataSource=t;var e=t;if(!e)return;this.tf_attNum1.text=`+${e[1]}`,this.tf_attNum2.text=`+${e[2]}`;let i=I.intance.getAttributeDataById(e[0]);this.tf_att1.text=i.identification,this.tf_att2.text=i.identification}};I_=d([vP("9sZiQib_QceUIq6wXx7r9w")],I_);var E_=class extends Laya.Dialog{};var{regClass:xP}=Laya,w_=class extends E_{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.equipData=null}onEnable(){this.btn_upStar.on(Laya.Event.CLICK,this,this.onRisingStar)}setOpenData(e){e&&(console.log(e),this.initContainer(e))}initContainer(e){if(this.equipData=e,this.equipData){let n=this.equipData.m_iId,r=this.equipData.m_iId+1,s=new Xe(n),o=new Xe(r);this.oldEquip.dataSource=s,this.newEquip.dataSource=o;let l=this.oldEquip.getChildByName("txt_num"),u=this.newEquip.getChildByName("txt_num");l&&(l.visible=!1),u&&(u.visible=!1);let m=I.intance.getEquipDataById(r),h=I.intance.getEquipDataById(n);console.log(m.attribute,h.attribute);let y=h.upStar[1];if(m){this.tf_have.text=`${this.equipData.m_iNum}`;let x=m.attribute;this.tf_need.text=`${y}`,this.equipData.m_iNum>y?this.tf_have.color="#88ff71":this.tf_have.color="#ed4842";let E=I.intance.getEquipSuitDataById(r).skill;if(E){var i=I.intance.m_dicSkills.get(E);this.skillListItem.dataSource=i,this.skillListItem.visible=!0}else this.skillListItem.visible=!1;let S=ce.categorizeArrays(h.attribute,m.attribute);this.list_attrs.array=S}}}async onRisingStar(){let e=await w.requestPost("wxgame/equip/star",{bagPk:this.equipData.m_iPk});if(e){_.intance.event(b.EVENT_REFRESH_KNAPSACK,e.bagItem.id);let n=[];var i=new Xt;i.id=e.bagItem.id,i.count=1,n.push(i),O.intance.openModule(L.RewardGetDialog,n),this.close()}}onDisable(){}};w_=d([xP("DzwdOKWlRK2iP7OBwMXXoA")],w_);var T_=class extends Laya.Dialog{};var{regClass:IP}=Laya,C_=class extends T_{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){this.initContainer(),ct.instance.playSoundByName(ct.soundName32)}initContainer(){var e=Bt.instance.getOneItem();if(e){var i;e instanceof Array?(i=new Xe(e[0]),i.newAddCnt=e[1]):i=e,this.showItem(i)}}showItem(e){this.knapsackItem.showAdd=!0,this.knapsackItem.dataSource=e,this.tf_name.text=p.instance.getLanguage(e.itemItem.name)}onDisable(){_.intance.event(b.EVENT_CHECK_REMAIN,L.ItemGetDialog)}};C_=d([IP("tC2uDJDVQMaI41Lys60O5Q")],C_);var S_=class extends Laya.Box{};var{regClass:EP}=Laya,D_=class extends S_{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.itemVo=e,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=new Xe;if(!this.itemVo)return;this.itemVo.m_iId==Be.TYPE_QUAN_MNT?(this.tf_quanId.visible=!0,this.tf_quanId.text=this.itemVo.m_iPk):this.tf_quanId.visible=!1;let i=this.itemVo.itemItem;O.intance.hasOpenView(L.PveChoosePropsDialog)&&(this.txt_num.visible=!1),i?(this.showAdd?this.txt_num.text=""+Pe.formatNumber(this.itemVo.newAddCnt,8):this.itemVo.m_iNum?this.txt_num.text=""+Pe.formatNumber(this.itemVo.m_iNum,8):this.txt_num.text=""+Pe.formatNumber(this.itemVo.newAddCnt,8),this.img_icon.skin=M.instance.getItemIcon(i.icon),this.img_box.skin="gameIcon/items/itemBg/img_"+i.quality+".png"):(this.txt_num.text="",this.img_icon.skin=null,this.img_box.skin="gameIcon/items/itemBg/img_0.png"),this.tf_isSch.visible=this.itemVo.isScholarship}toDetail(){!this.itemVo||!this.itemVo.needTip||(this.itemVo.type===rt.TYPE_Equipment?O.intance.openModule(L.EquipDetailDialog,this.itemVo):O.intance.openModule(L.KnapsackTipDialog,this.itemVo))}};D_=d([EP("LzxJYKybT_m3CJav3RyDmg")],D_);var k_=class extends Laya.Scene{};var{regClass:wP}=Laya,A_=class extends k_{constructor(){super(...arguments);this.subBagInfo=null;this.subType=null;this.selectId=null;this.currTab=0;this.quanTabIndex=7;this.totalSubTab=4;this.needRefresh=!1;this.type=1;this.totalTab=8;this.items=[];this.hasItem=!1;this.nftTabIndex=1}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP,this.listPanel1.visible=!1}onOpened(e){e&&e[0]&&(this.type=e[0]||1,this.subType=e[1]),this.initLuckDrawView()}onEnable(){this.nomalY=this.list_btn.y,_.intance.on(b.EVENT_REFRESH_KNAPSACK,this,this.onRefreshKnapsack),_.intance.on(b.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan);for(let i=1;i<this.totalTab;i++)this["btn_"+i].on(Laya.Event.CLICK,this,this.onClickTab,[i]);for(let i=1;i<=this.totalSubTab;i++)this["tab_nft_"+i].on(Laya.Event.CLICK,this,this.onNftTabClick,[i]);this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.listPanel1.vScrollBarSkin="",this.listPanel1.selectHandler=Laya.Handler.create(this,this.onSelectItem,null,!1),this.box_show.visible=!1,this.box_2.visible=!1;let e=(Laya.stage.height-ie.DESIGN_HEIGHT)/2}setTab(e){for(let i=1;i<this.totalTab;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b"):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe")}async initLuckDrawView(){await Qt.instance.ownerBag(),!this.destroyed&&(this.type?this.onClickTab(this.type):this.onClickTab(1))}async onClickTab(e){if(!(!this.needRefresh&&this.currTab==e)&&(this.setTab(e),this.type=e,this.box_2.visible=!0,!this.destroyed))if(e==this.quanTabIndex)this.onNftTabClick(1);else{var i=await this.getItemByType(e);this.onSetData(i)}}async onSetData(e){if(this.listPanel1.array=e,this.listPanel1.visible=!0,this.selectId!==null){let i=this.getIndexById(e);this.listPanel1.selectedIndex=i,this.selectId=null}else this.listPanel1.selectedIndex=-1,this.hasItem&&(this.listPanel1.selectedIndex=0)}async getItemByType(e,i=1){this.items=[],this.hasItem=!1;var n;if(e==this.quanTabIndex){if(this.hengTabBox.visible=!0,n=await v.instance.m_packageData.getQuan(i),this.nftTabIndex!=i)return}else this.hengTabBox.visible=!1,n=v.instance.m_packageData.getBackByType(e);if(e==2){if(!this.subBagInfo){let m=(await w.requestPost("wxgame/lease/bag",{})).list,h={};for(let y of m)y.ticketId in h?h[y.ticketId]+=y.ticketCount:h[y.ticketId]=y.ticketCount;this.subBagInfo=Object.keys(h).map(y=>({ticketId:y,ticketCount:h[y]}))}if(this.subBagInfo)for(let u=0;u<this.subBagInfo.length;u++){let m=this.subBagInfo[u];if(m.ticketCount){var r=new Xe(m.ticketId);r.newAddCnt=m.ticketCount,r.isScholarship=!0,console.log(r),n.push(r)}}console.log(this.subBagInfo)}this.subType!==null&&e==5&&(n=n.filter(u=>u.subType==this.subType));for(var s=n.length>30?n.length:30,o=0;o<s;o++){var l=n[o];l?(o==0&&(this.hasItem=!0),this.items.push(l)):this.items.push(new Xe(0))}return this.items}getIndexById(e){return e.findIndex(n=>n.m_iId==this.selectId)||0}onSelectItem(e,i){if(this.itemVo=this.items[e],this.tf_des.visible=!1,this.tf_des2.visible=!1,console.log(this.itemVo),this.itemVo){let l=this.itemVo.itemItem;if(!l)return;if(this.img_icon.skin=M.instance.getItemIcon(l.icon),this.tf_name.text=p.instance.getLanguage(l.name),this.itemVo.m_iId==Be.TYPE_QUAN_MNT){this.tf_quanId.visible=!0,this.tf_expTime.visible=!0,this.tf_quanId.text=this.itemVo.m_iPk,this.tf_expTime.text=p.instance.getLanguage(1802)+": "+fe.formatTimeStamp(this.itemVo.expTime);var n;this.itemVo.prizeStatus?this.itemVo.prizeStatus==2?n=p.instance.getUILang("Won"):this.itemVo.prizeStatus==1&&(n=p.instance.getUILang("No Won")):this.itemVo.chainStatus==1?n=p.instance.getUILang("On-Chain"):this.itemVo.lateStatus==1?n=p.instance.getUILang("Expired"):n=p.instance.getUILang("Off-Chain"),this.tf_status.text=n,this.tf_status.visible=!0}else this.tf_expTime.visible=!1,this.tf_quanId.visible=!1,this.tf_status.visible=!1;if(l.type==rt.TYPE_Equipment){this.img_att.visible=!0,this.tf_des.text="",this.box_show.visible=!1,this.box_show2.visible=!0,this.tf_name2.text=p.instance.getLanguage(l.name),this.knapsackItem.dataSource=this.itemVo;let u=this.itemVo.itemItem.id;this.tf_name2.color=si.qualityColors[l.quality-1],this.tf_grade.color=si.qualityColors[this.itemVo.itemItem.quality-1],this.tf_grade.text=p.instance.getUILang(`Quality_${this.itemVo.itemItem.quality}:`);let m=I.intance.getEquipDataById(u);if(m){this.tf_part.text=p.instance.getUILang(`Part_${m.type}:`);let h=m.attribute;this.list_attrs.array=h;let y=I.intance.getEquipSuitDataById(u);if(y&&y.skill){let x=y.skill;var r=I.intance.m_dicSkills.get(x);this.skillListItem.dataSource=r,this.skillListItem.visible=!0,this.img_skill.visible=!0}else this.skillListItem.visible=!1,this.img_skill.visible=!1}this.list_btn.y=this.nomalY+50}else if(l.type==rt.TYPE_CARD){this.img_skill.visible=!0,this.img_att.visible=!1,this.tf_des2.visible=!0;let m=I.intance.getArrFromDicItemByKey("id",l.id)[0];this.box_show.visible=!1,this.box_show2.visible=!0,this.tf_des2.text=p.instance.getLanguage(m.des),this.tf_name2.text=p.instance.getLanguage(l.name),this.tf_name2.color=si.qualityColors[l.quality-1],this.knapsackItem.dataSource=this.itemVo,this.tf_grade.color=si.qualityColors[this.itemVo.itemItem.quality-1],this.tf_grade.text=p.instance.getUILang(`Quality_${this.itemVo.itemItem.quality}:`),this.tf_part.text=p.instance.getUILang(`Part_${m.type}:`);let h=m.attribute;this.list_attrs.array=h;let y=m.skillId;if(y){var r=I.intance.m_dicSkills.get(y);this.skillListItem.dataSource=r,this.skillListItem.visible=!0}else this.skillListItem.visible=!1;this.list_btn.y=this.nomalY+50}else this.img_skill.visible=!1,this.tf_des.visible=!0,this.tf_des.text=p.instance.getLanguage(l.des),this.box_show.visible=!0,this.box_show2.visible=!1,this.tf_name.text=p.instance.getLanguage(l.name),this.list_btn.y=this.nomalY;var s=l.use,o=[];s&&s.forEach(u=>{if(u==1){var m=!1,h=!1;this.itemVo.subType==8&&v.instance.playerDto.unionLeader!=1||(m=!0),this.itemVo.subType==7&&(h=!1),m&&o.push([u,this.itemVo,h])}else if(u==2){var m=!1,h=!1;if(l&&l.effect.length==2)var y=l.effect[0][0],x=l.effect[0][1],E=v.instance.m_packageData.getCountById(y),h=x>E;o.push([u,this.itemVo,h])}else if(u==3){var h=!1;o.push([u,this.itemVo,h])}else if(u==6){var h=!1,S=v.instance.m_serverTime;if(this.itemVo.chainStatus==1||S>this.itemVo.expTime)var h=!0;o.push([u,this.itemVo,h])}}),this.list_btn.array=o,this.list_btn.visible=!0}else this.list_btn.visible=!1,this.img_icon.skin=null,this.tf_name.text="",this.tf_des.text="",this.box_show.visible=!1,this.box_show2.visible=!1}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}stopAni(e){console.log("stopAni: "+e)}async onRefreshQuan(){this.onRefreshKnapsack(null),C.instance.notice(p.instance.getLanguage(2e3))}async onRefreshKnapsack(e){this.needRefresh=!0,e&&(this.selectId=e),await this.initLuckDrawView(),this.needRefresh=!1}removeEvent(){_.intance.off(b.EVENT_REFRESH_KNAPSACK,this,this.onRefreshKnapsack),_.intance.off(b.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan)}onRisingStar(){O.intance.openModule(L.EquipStarUpDialog,this.itemVo)}onNftTabClick(e){for(let i=1;i<=this.totalSubTab;i++)e==i?(this["tab_nft_"+i].getChildByName("img").skin="res/shop/img_com_tab (2).png",this["tab_nft_"+i].getChildByName("tf_tit").color="#ffffff",this.getNftDataByIndex(e)):(this["tab_nft_"+i].getChildByName("img").skin="",this["tab_nft_"+i].getChildByName("tf_tit").color="#84ccff")}async getNftDataByIndex(e){this.nftTabIndex=e;var i=await this.getItemByType(this.quanTabIndex,e);!i||this.nftTabIndex!=e||this.onSetData(i)}};A_=d([wP("6IPqO9JvTmygjIZQXMwq2A")],A_);var M_=class extends Laya.Dialog{};var{regClass:TP}=Laya,B_=class extends M_{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}setOpenData(e){e&&(this.itemVo=e)}onEnable(){this.item.dataSource=this.itemVo;let e=this.itemVo.itemItem;this.tf_name.text=p.instance.getLanguage(e.name),this.txt_type.text=p.instance.getLanguage(6060)+p.instance.getLanguage(e.type),this.txt_desc.text=p.instance.getLanguage(e.des)}removeEvent(){}};B_=d([TP("or8jNdIhRpSbAG2JBhH-wA")],B_);var R_=class extends Laya.Dialog{};var{regClass:CP}=Laya,P_=class extends R_{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){ct.instance.playSoundByName(ct.soundName32)}setOpenData(e){e&&(this.reward=e);var i=[],n=this.reward;n.forEach(u=>{if(u.id&&u.id>0){var m=new Xe(u.id);m.newAddCnt=u.count,u.id==3011&&(m.itemItem.icon=u.id),i.push(m)}});var r=this.list_reward.spaceX,s=this.list_reward.itemTemplate.width,o=i.length;this.list_reward.repeatX=o;var l=o*s+r*(o-1);this.list_reward.width=l,this.list_reward.x=this.width-l>>1,this.list_reward.array=i}};P_=d([CP("xwYUFnd4S3uJGIJSjjbRag")],P_);var Is=class a{constructor(){this.lastTime=0}static get instance(){return a._instance||(a._instance=new a),a._instance}async addTicketLog(t,e){var i=new Date().getTime();if(i-this.lastTime<1e3)return;this.lastTime=i,this.type=t,this.tid=e,_e.instance.showLoadingByInfo(p.instance.getLanguage(1119));let n=ie.vType==2?oe.ADDLOG_ADDRESS:oe.ADDLOG_ADDRESS_TEST,r=ie.vType==2?ds:hr,s=K.instance.walletAddress,o=await K.instance.walletClient.getChainId();if(n)try{if(o!==r.id&&!await K.instance.switchChain(r.id)){this.onEndQuanList(),console.log("切换失败，请手动切换");return}let m=v.instance.playerDto.pid,h=await K.instance.walletClient.writeContract({address:n,abi:oe.ADDLOG_ABI,functionName:"addTicketLog",args:[m,e,t],account:s}),y;return y=await K.instance.publicClient.waitForTransactionReceipt({hash:h,pollingInterval:1e3}),console.log(`Tx with hash: ${h}`,y),y&&y.status=="success"?(this.waitGetQuanReward(r.id,h),console.log(`Tx successful with hash: ${h}`),h):(this.onEndQuanList(),he.TransactionErrorTip(),!1)}catch(m){this.onEndQuanList();var l=m.shortMessage;if(l&&l.indexOf("does not match")!=-1){var u=K.instance.getChainName(r.id);l=p.instance.getLanguage(1172,u)}if(console.log(l),C.instance.notice(l),m instanceof X){let h=m.walk(y=>y instanceof $t);if(h instanceof $t){let y=h.data?.errorName??"";console.log("============errorName: "+y)}}return null}}onEndQuanList(t=null){_e.instance.hideLoading(),t&&_.intance.event(b.EVENT_REFRESH_QUAN_STATUS,[t])}waitGetQuanReward(t,e){this.chainId=t,this.hashId=e,Laya.timer.loop(2e3,this,this.getQuanReward)}async getQuanReward(){if(this.type==1){var t=await w.requestPost("wxgame/loserTicket/loserTicketChainCheck",{tid:this.tid}).catch(n=>{});t&&t.takeUp==1&&(Laya.timer.clear(this,this.getQuanReward),_e.instance.hideLoading(),this.onEndQuanList(t))}else if(this.type==2){var e=await w.requestPost("wxgame/loserTicket/takeChainCheck",{tid:this.tid}).catch(n=>{});if(e&&e.takeUp==1&&e.bonus>0){Laya.timer.clear(this,this.getQuanReward);var i=new Xt;i.id=Be.TYPE_MNT,i.count=e.bonus,_e.instance.hideLoading(),O.intance.openModule(L.RewardGetDialog,[i]),this.onEndQuanList(e)}}}};var N_=class extends Laya.Box{};var{regClass:SP}=Laya,O_=class extends N_{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_transfer.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!!e){this.useType=e[0],this.useType==1?this.btn_transfer.label=p.instance.getUILang("Transfer"):this.useType==2?this.btn_transfer.label=p.instance.getUILang("Combine"):this.useType==3?this.btn_transfer.label=p.instance.getUILang("Rising star"):this.useType==6&&(this.btn_transfer.label=p.instance.getUILang("To Chain")),this.itemVo=e[1];var i=e[2];this.btn_transfer.disabled=i,this.addEvent()}}async toDetail(){if(this.useType)if(this.useType==1)this.itemVo.subType==8?O.intance.openModule(L.UnionTransferView,this.itemVo):this.itemVo.subType==7||this.itemVo.subType==11?O.intance.openModule(L.TicketTransferView,this.itemVo):O.intance.openModule(L.TicketTransferView,this.itemVo);else if(this.useType==2){var e=await w.requestPost("wxgame/equip/composition",{id:this.itemVo.m_iId});e&&e.equipData?(O.intance.openModule(L.RewardGetDialog,[e.equipData]),_.intance.event(b.EVENT_REFRESH_KNAPSACK)):C.instance.notice(p.instance.getLanguage(135))}else this.useType==3?O.intance.openModule(L.EquipStarUpDialog,this.itemVo):this.useType==6&&this.onClaim()}async onClaim(){var e=v.instance.m_serverTime;if(e>this.itemVo.expTime){C.instance.notice(p.instance.getUILang("Expired"));return}var i=1,n=this.itemVo.m_iPk;await Is.instance.addTicketLog(i,n)&&(console.log("记录逆袭券日志成功"),this.onClaimed())}onClaimed(){this.btn_transfer.disabled=!0}};O_=d([SP("vkadzuILSDikVEPYvNZKcQ")],O_);var H_=class extends Laya.Dialog{};var{regClass:DP}=Laya,U_=class extends H_{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){this.list_data.visible=!1,this.onGetLastDrawList(),this.onGetStatus(),_.intance.on(b.EVENT_REFRESH_QUAN_STATUS,this,this.onGetLastDrawList)}async onGetStatus(){var e=await w.requestPost("wxgame/loserTicket/loserBonusOpenInfo",{});if(e){var i=e.curTime,n=e.openTime,r=e.cd,s=e.configId,o=e.over,l=i-n,u=I.intance.m_dicWinNumbers.values;this.winNumberItem=null;for(var m of u)if(i>=n+m.time*1e3&&i<n+m.toTime*1e3){this.winNumberItem=m;break}this.winNumberItem?(this.nextCoolDownTime=Math.ceil((n+m.toTime*1e3-i)/1e3),this.nextCoolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):this.onClearCoolTime()):this.tf_title.text=p.instance.getUILang("Last Draw")}}onSetCoolTime(){if(this.nextCoolDownTime>=0){var e=fe.format(this.nextCoolDownTime,":",!1);this.winNumberItem&&(e=p.instance.getLanguage(this.winNumberItem.language,e)),this.tf_title.text=e,this.nextCoolDownTime--}else this.onClearCoolTime()}async onClearCoolTime(){Laya.timer.clear(this,this.onSetCoolTime),this.onGetLastDrawList(),this.onGetStatus()}async onGetLastDrawList(){let e=await w.requestPost("wxgame/loserTicket/championPack",{});if(e=e.data,e){let i=v.instance.playerDto.pid;e.sort((n,r)=>{if(n.pid===i&&r.pid!==i)return-1;if(r.pid===i&&n.pid!==i)return 1;let s=Number(n.rank),o=Number(r.rank);return s<o?-1:s>o?1:0}),this.list_data.array=e,this.list_data.visible=!0,!this.list_data.array||this.list_data.array.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}}onDisable(){_.intance.off(b.EVENT_REFRESH_QUAN_STATUS,this,this.onGetLastDrawList),_.intance.offAllCaller(this)}};U_=d([DP("OO2lbeVpR06fuUlzarIaOA")],U_);var F_=class extends Laya.Box{};var{regClass:kP}=Laya,V_=class extends F_{addEvent(){this.isAddEvent||(this.btn_claim.on(Laya.Event.CLICK,this,this.onClaim),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.lastDrawDto=e,this.lastDrawDto&&(this.setData(this.lastDrawDto),this.addEvent())}setData(e){let i=e.pid===v.instance.playerDto.pid,n=e.rank+"";if(this.tf_name.text=e.name,this.tf_union.text=p.instance.getMultiLan(e.shortUnionName),this.tf_rank.text=n,this.playerIcon.headSkin=e.head,this.tf_address.text=`${ce.shortenString(e.address,7,4)}`,this.tf_tid.text=e.tid,this.img_flag.skin=M.instance.getCountryIcon(e.country),e.icon){let s=M.instance.getUnionIcon(e.icon);this.img_lvIcon.skin=s,this.img_lvIcon.visible=!0}else this.img_lvIcon.visible=!1;this.btn_claim.visible=this.img_bg.visible=i;let r=Be.TYPE_MNT;this.img_coinType.skin=M.instance.getMoneyIcon(r),this.tf_amount.text=Pe.formatNumberStr(e.prize,8),e.upStatus?(this.btn_claim.label=p.instance.getUILang("Claimed"),this.btn_claim.disabled=!0):(this.btn_claim.label=p.instance.getUILang("Claim"),this.btn_claim.disabled=!1)}async onClaim(){var e=2,i=this.lastDrawDto.tid;await Is.instance.addTicketLog(e,i)&&(console.log("兑奖上链成功"),this.onClaimed())}onClaimed(){this.btn_claim.label=p.instance.getUILang("Claimed"),this.btn_claim.disabled=!0}onCopy(){let e=this.lastDrawDto.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}};V_=d([kP("IC0pm1gWRlehJmSHpz-Alw")],V_);var G_=class extends Laya.Scene{};var{regClass:AP}=Laya,W_=class extends G_{constructor(){super(...arguments);this.currUnionId=1}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onOpened(e){this.currUnionId=e,this.onGetLifeChangePool()}onEnable(){this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_goFight.on(Laya.Event.CLICK,this,this.goFight),this.btn_help.on(Laya.Event.CLICK,this,this.onHelp),this.btn_lastDraw.on(Laya.Event.CLICK,this,this.onOpenLastDraw),this.refreshApplyBtnRed(),Laya.timer.loop(1e3,this,this.refreshApplyBtnRed)}refreshApplyBtnRed(){this.img_red.visible=v.instance.getRedDotById(Ae.LAST_DRAW)}goFight(){q.instance.arenaType=ee.ARENA_TYPE_PROFESSIONAL,ge.intance.setCurrentScene(ae.M_SCENE_AIRDROP)}onHelp(){var e=p.instance.getLanguage(1799),i=p.instance.getLanguage(1800);O.intance.openModule(L.HelpDialog,[2,e,i])}onOpenLastDraw(){O.intance.openModule(L.LastDrawDialog)}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}async onGetLifeChangePool(){var e=await w.requestPost("wxgame/loserTicket/bonusInfo",{}),i=e;if(i){this.tf_currPoolAmount.text=i.currentBonus,this.tf_poolAmount.text=p.instance.getUILang("Pool Amount")+": "+i.allBonus;var n=i.localBonus;this.tf_80toCurrent.text=p.instance.getUILang("80% to Current")+": "+n;var r=i.nextBonus;this.tf_20toNext.text=p.instance.getUILang("20% to Next")+": "+r,this.tf_lastPool.text=p.instance.getUILang("From Last Pool")+": "+i.beforeBonus,this.tf_myLcTicket.text=p.instance.getUILang("My L-C ticket")+`: <font color="#ff683a">${i.ticketCount}</font>`,this.tf_drawDate.text=fe.formatTimeStamp(i.openTime,"YY-MT-DD HH:MM")}else C.instance.notice(p.instance.getLanguage(135))}onDisable(){Laya.timer.clearAll(this)}};W_=d([AP("A_npk_biQS6P0BGIhOOH5g")],W_);var j_=class extends Laya.Box{};var{regClass:MP}=Laya,z_=class extends j_{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){console.log("OpenScene onEnable："+this.m_strName)}getName(){console.log(this.m_strName)}onDisable(){}};z_=d([MP("sQS5mrqRQLWcBk-SgfBGJw")],z_);var K_=class extends Laya.Box{};var{regClass:BP}=Laya,q_=class extends K_{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}set dataSource(e){super.dataSource=e,this.mailDto=e,this.mailDto&&this.setCurrentOutPut()}async setCurrentOutPut(){this.mailDto&&(this.mailDto.type==2?(this.tf_title.visible=!1,this.fromBox.visible=!0,this.mailDto.fromPlayerName?this.tf_from.text=`From ${this.mailDto.fromPlayerName}`:this.tf_from.text=""):(this.tf_title.visible=!0,this.fromBox.visible=!1,this.tf_title.text=this.mailDto.title),this.tf_time.text=fe.formatDayAndTime(this.mailDto.createTime,".").date,this.img_reward.visible=this.mailDto.reward&&this.mailDto.reward.length>0,this.img_red.visible=(this.mailDto.state==0||this.mailDto.receive==0)&&!this.mailDto.isAnnounce,this.img_box.skin=this.mailDto.state==0?"res/mail/img_mail_state_0.png":"res/mail/img_mail_state_1.png")}};q_=d([BP("UKoifNR5Qmm4eq8sXy0K3A")],q_);var Y_=class extends Laya.Scene{};var{regClass:RP}=Laya,$_=class extends Y_{constructor(){super(...arguments);this.subBagInfo=null;this.noOpenLock=!1;this.currTab=0;this.type=1;this.items=[];this.hasItem=!1}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP,this.listPanel1.visible=!1}onOpened(e){this.type=e}onEnable(){this.btn_receive.on(Laya.Event.CLICK,this,this.onReceive),this.tf_des.on(Laya.Event.CLICK,this,this.dexclick),this.btn_one_claim.on(Laya.Event.CLICK,this,this.onOneClaim),this.btn_one_deletior.on(Laya.Event.CLICK,this,this.noRead),this.btn_1.on(Laya.Event.CLICK,this,this.onClickTab,[1,!1]),this.btn_2.on(Laya.Event.CLICK,this,this.onClickTab,[2,!1]),this.btn_3.on(Laya.Event.CLICK,this,this.onClickTab,[3,!1]),this.btn_copy.on(Laya.Event.CLICK,this,this.onClickCopy),_.intance.on(b.REFRESH_MAIL_RED,this,this.resetRedData),this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.listPanel1.vScrollBarSkin="",this.listPanel1.selectHandler=Laya.Handler.create(this,this.onSelectItem,null,!1),this.box_show.visible=!1,this.box_2.visible=!1,this.initLuckDrawView();let e=(Laya.stage.height-ie.DESIGN_HEIGHT)/2}setTab(e){this.currTab=e;for(let i=1;i<4;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b"):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe")}async initLuckDrawView(){let e=await w.requestPost("wxgame/mail/list",{},!0,!0);await v.instance.m_mailData.initData(e.data),this.resetRedData(),!this.destroyed&&(this.type?this.onClickTab(this.type):this.onClickTab(1))}async refreshView(e=!0){let i=await w.requestPost("wxgame/mail/list",{},!0,!0);await v.instance.m_mailData.initData(i.data),this.resetRedData(),e&&this.onClickTab(this.currTab,!0)}refreshMailRed(){let e=v.instance.m_mailData.m_dicTypeList.get(1)}removeHtmlTags(e){return e.replace(/<[^>]+>/g,"")}getAnnounceMail(e){let i=[],n=Laya.LocalStorage.getItem(ie.COOKIE_CF_LAN);for(let r=0;r<e.length;r++){let s=e[r],o=n=="zh"?s.title[6]:s.title[1],l=n=="zh"?s.contents[6]:s.contents[1],u=[],m={content:l,createTime:s.createTime,expTime:s.expTime,fromPlayerId:0,pid:1032,receive:0,state:3,title:o,type:1,reward:u,isAnnounce:!0};i.push(m)}return i}async onClickTab(e,i=!1){if(!i){if(this.currTab==e)return;this.setTab(e)}if(e>0){if(this.box_2.visible=!0,this.destroyed)return;var n=await this.getItemByType(e);if(e==3){let r=await w.requestPost("wxgame/sys/noticeAll",{});console.log("announceData============>",r),this.items=this.getAnnounceMail(r.list),n=this.items,this.hasItem=this.items.length>0,this.img_annRed.visible=!1}else n=await this.getItemByType(e);this.listPanel1.array=n,this.listPanel1.visible=!0}this.listPanel1.selectedIndex=-1,this.box_show.visible=!1,this.hasItem?(this.noDataBox.visible=!1,this.listPanel1.selectedIndex=0,this.btn_one_deletior.visible=!0):(this.noDataBox.visible=!0,this.btn_one_deletior.visible=!1),this.currTab==3&&(this.btn_one_deletior.visible=!1)}async getItemByType(e){var i=e;return this.items=[],this.hasItem=!1,this.items=v.instance.m_mailData.getListByType(i),this.hasItem=this.items.length>0,this.items}async onSelectItem(e,i){if(console.log("onSelectItem selectIndex: "+e),this.currMailDto=this.items[e],console.log(this.currMailDto),this.currMailDto){this.tf_title.text=this.currMailDto.title,this.tf_des.text=this.currMailDto.content,this.tf_time.text=fe.formatDayAndTime(this.currMailDto.createTime,".").date;var n=[],r=this.currMailDto.reward;if(r.forEach(o=>{var l=new Xe(o.id);l.newAddCnt=o.count,n.push(l)}),this.list_reward.array=n,this.list_reward.gray=this.currMailDto.receive==1,this.list_reward.length<=0&&this.currTab==3?(this.img_xian.visible=!1,this.panel_des.height=359,this.tf_des.height=this.tf_des.textField.textHeight+10):(this.img_xian.visible=!0,this.panel_des.height=169,this.tf_des.height=this.tf_des.textField.textHeight+10),this.box_show.visible=!0,this.btn_receive.labelSize=28,this.currMailDto.state==0&&!this.noOpenLock){var s=await w.requestPost("wxgame/mail/read",{id:this.currMailDto.id});if(s.errorCode==0){let o=this.listPanel1.selectedIndex;await this.refreshView(),this.listPanel1.selectedIndex=o}}this.noOpenLock=!1,this.currMailDto.type==2?(this.btn_receive.disabled=!1,this.tf_title.visible=!1,this.fromBox.visible=!0,this.panel_des.y=145,this.tf_re.text=`Re ${v.instance.playerDto.name}`,this.tf_re.visible=!0,this.address=this.currMailDto.fromPlayerAddress,this.address?this.tf_from.text=`From ${ce.shortenString(this.address,8,6)}`:this.tf_from.text="",n.length>0?this.currMailDto.receive==0?(this.btn_receive.label="Receive and reply",this.btn_receive.labelSize=24):this.btn_receive.label="Reply":this.btn_receive.label="Reply"):(this.panel_des.y=112,this.tf_re.visible=!1,this.tf_title.visible=!0,this.fromBox.visible=!1,this.currMailDto.reward.length>0&&this.currMailDto.receive==0?(this.btn_receive.label="Receive",this.btn_receive.disabled=!1):(this.btn_receive.disabled=this.currMailDto.state>0,this.btn_receive.label="Mark as read"))}else this.box_show.visible=!1}dexclick(){console.log("click")}async onReceive(){if(this.currMailDto){if(this.currMailDto.type==2){let i={icon:this.currMailDto.fromPlayerIcon,name:this.currMailDto.fromPlayerName,id:this.currMailDto.fromPlayerId};if(this.currMailDto.reward.length>0&&this.currMailDto.receive==0){var e=await w.requestPost("wxgame/mail/receive",{id:this.currMailDto.id});e.errorCode==0?(e.reward&&e.reward.length>0?(O.intance.openModule(L.PrivateChatDialog,i),O.intance.openModule(L.RewardGetDialog,e.reward)):(C.instance.notice(p.instance.getLanguage(2e3)),O.intance.openModule(L.PrivateChatDialog,i)),this.refreshView()):C.instance.notice(p.instance.getLanguage(135))}else O.intance.openModule(L.PrivateChatDialog,i)}else if(this.currMailDto.reward.length>0&&this.currMailDto.receive==0){var e=await w.requestPost("wxgame/mail/receive",{id:this.currMailDto.id});e.errorCode==0?(e.reward&&e.reward.length>0?O.intance.openModule(L.RewardGetDialog,e.reward):C.instance.notice(p.instance.getLanguage(2e3)),this.refreshView()):C.instance.notice(p.instance.getLanguage(135))}}}async onOneClaim(){if(this.currMailDto){var e=await w.requestPost("wxgame/mail/readOneKey",{});e.errorCode==0?(e.reward&&e.reward.length>0?O.intance.openModule(L.RewardGetDialog,e.reward):C.instance.notice(p.instance.getLanguage(2e3)),this.refreshView()):C.instance.notice(p.instance.getLanguage(135))}}async onOneDeletior(){if(this.currMailDto){var e=await w.requestPost("wxgame/mail/delOneKey",{});e.errorCode==0?(C.instance.notice(p.instance.getLanguage(2e3)),this.refreshView()):C.instance.notice(p.instance.getLanguage(135))}}async noRead(){let e=this.listPanel1.array[this.listPanel1.selectedIndex];if(this.noOpenLock=!1,console.log(e),e){let n=this.listPanel1.selectedIndex;var i=await w.requestPost("wxgame/mail/noRead",{id:e.id});this.listPanel1.selectedIndex=n,i.errorCode==0&&(this.listPanel1.selectedIndex==0&&(this.noOpenLock=!0),this.refreshView())}}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}onClickCopy(){this.address&&(doCopy(this.address),C.instance.notice(p.instance.getLanguage(132)))}removeEvent(){this.btn_copy.off(Laya.Event.CLICK,this,this.onClickCopy),_.intance.offAllCaller(this)}onDisable(){this.removeEvent()}resetRedData(){this.img_sysRed.visible=!1,this.img_friendRed.visible=!1,this.img_annRed.visible=!1;let e=v.instance.m_mailData.getRedData();e.system&&(this.img_sysRed.visible=!0),e.friend&&(this.img_friendRed.visible=!0),v.instance.getRedDotById(Ae.MAIL_ANNOUNCE_RED)&&(this.img_annRed.visible=!0)}};$_=d([RP("XwqkX1FmRISr-BmvQwE88Q")],$_);var X_=class extends Laya.Box{};var{regClass:PP}=Laya,Q_=class extends X_{onEnable(){}notice(e){this.speed=2+1;let i=e;this.label_tf.text=e,console.log("notice: ",e),this.image_bg.width=this.label_tf.textField.textWidth+100,this.alpha=1,this.visible=!0}get view(){return this}get width(){return this.image_bg.width}update(){this.x-=this.speed}isOffScreen(){return this.x+this.width<0}onDisable(){console.log("barrageSpr recover"),Laya.Pool.recover("barrageSpr",this)}};Q_=d([PP("pMWsUZPhS4iK2yN8OCI4Yw")],Q_);var J_=class extends Laya.Box{};var{regClass:NP}=Laya,Z_=class extends J_{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.check_coin.on(Laya.Event.CLICK,this,this.onCheck),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!e)return;this.addEvent();let i=e;this.check_coin.selected=i[1],this.tf_coin.text=i[2]}onCheck(){this._dataSource[1]=this.check_coin.selected,_.intance.event(b.EVENT_CHECK_ICON_SELECT)}};Z_=d([NP("UTGHsPbQS6C5FohXv8T25Q")],Z_);var eL=class extends Laya.Dialog{};var{regClass:OP}=Laya,tL=class extends eL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.isInit=!1;this.numIndex=0;this.coinType=3001;this.nodeId=-1;this.passMoneyNum=0;this.inApply=-1;this.dateOpenState=0;this.startDate={year:0,month:0,day:0,hour:0,minutes:0};this.beforeYearIndex=null;this.beforeMonthIndex=null;this.beforeDayIndex=null;this.beforeHourIndex=null;this.beforeMinuteIndex=null;this.plChoose=[];this.groupWars=[];this.teamDatas=[];this.arenaLvs=[];this.arenaLvDatas=[];this.coinIds=[];this.no=0}async setOpenData(e){if(e){if(this.matchType=e[0],this.isCreate=e[1],this.isBooking=e[2],this.isBookingMust=e[4],this.arenaType=q.instance.arenaType,this.matchType==ee.ACTION_CREATE)this.arenaLv=e[3];else if(this.matchType==ee.ACTION_CREATE_BOOKING)this.arenaLv=1;else if(this.matchType==ee.ACTION_JOIN_BOOKING){var i=e[3];let s;this.roomDto=i[0],this.inApply=i[1];var n=I.intance.m_dicArenaDic.get(this.roomDto.arenaId);this.arenaLv=n.lv,this.arenaType=n.type}else if(this.matchType==ee.ACTION_JOIN){var r=e[3];let s;this.roomDto=r;var n=I.intance.m_dicArenaDic.get(this.roomDto.arenaId);this.arenaLv=n.lv,this.arenaType=n.type}this.initContainer()}}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onClose),_.intance.on(b.EVENT_Close_CreateRoom,this,this.onClose),this.btn_create.on(Laya.Event.CLICK,this,this.onCreate),this.input_customName.on(Laya.Event.INPUT,this,this.onInputChange),this.yearList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.yearList,"year"]),this.monthList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.monthList,"month"]),this.dayList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.dayList,"day"]),this.hourList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.hourList,"hour"]),this.minutesList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.minutesList,"minutes"]),this.yearList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.yearList,"year",this.img_date_pad]),this.monthList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.monthList,"month",this.img_date_pad]),this.dayList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.dayList,"day",this.img_date_pad]),this.hourList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.hourList,"hour",this.img_date_pad]),this.minutesList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.minutesList,"minutes",this.img_date_pad]),this.btn_view.on(Laya.Event.CLICK,this,this.onView),this.btn_invite.on(Laya.Event.CLICK,this,this.onInvite),this.box_date.on(Laya.Event.CLICK,this,this.onOpenDate,[this.img_date_pad,this.box_date]),this.yearList.scrollBar.rollRatio=0,this.monthList.scrollBar.rollRatio=0,this.dayList.scrollBar.rollRatio=0,this.hourList.scrollBar.rollRatio=0,this.minutesList.scrollBar.rollRatio=0}onView(){var e=this.roomDto.roomId,i=this.roomDto.teamDto;O.intance.openModule(L.MyTeamDialog,[e,i])}onInvite(){var e=this.roomDto.roomId,i=this.roomDto.teamDto.teamId;O.intance.openModule(L.MyFriendDialog,[e,i])}onClose(){this.close()}onDisable(){_.intance.off(b.EVENT_Close_CreateRoom,this,this.onClose),this.yearList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.monthList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.dayList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.hourList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.minutesList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.yearList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.monthList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.dayList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.hourList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.minutesList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.box_date.on(Laya.Event.CLICK,this,this.onOpenDate,[this.img_date_pad,this.box_date])}initContainer(){if(this.arenaType==ee.ARENA_TYPE_TEAM?this.box_teamContainer.visible=!0:(this.box_teamContainer.visible=!1,this.box_bottomContainer.y-=this.box_teamContainer.height-10),this.isCreate?(this.btn_create.label=p.instance.getUILang("Create"),this.isBooking==!1):(this.inApply==1?(this.btn_create.label=p.instance.getLanguage(1556),this.btn_create.disabled=!0):(this.btn_create.label=p.instance.getUILang("Join"),this.btn_create.disabled=!1),this.box_node.disabled=!0,this.arenaLvCombo.disabled=!0,this.teamCombo.disabled=!0,this.coinCombo.disabled=!0,this.input_customName.disabled=!0,this.check_anonymous.disabled=!0,this.check_closeLive.disabled=!0),this.roomDto){let n=this.roomDto.leader;if(n){this.tf_roleName.text=n.name;let r=n.icon;this.playerIcon.headSkin=r,n.country?this.img_country.skin=M.instance.getCountryIcon(n.country+""):this.img_country.skin=null}}else{let n=v.instance.playerDto;if(!n)return;this.tf_roleName.text=n.name;let r=n.icon;this.playerIcon.headSkin=r,this.img_country.skin=M.instance.getCountryIcon(n.country+"")}var e=I.intance.m_dicArenaTypes.get(this.arenaType),i=e.passwordSwitch==1;i?this.box_pwd.disabled=!1:this.box_pwd.disabled=!0,this.initNode(),this.initTime(),this.initPlayerNumCombo(e),this.initTeamCombo(e),this.initArenaLvCombo(e),this.isCreate&&(this.arenaType==ee.ARENA_TYPE_PROFESSIONAL||this.arenaType==ee.ARENA_TYPE_TEAM)||this.initCoinCombo(e),this.initCustomName(),this.initAnonymous(),this.initCloseLive()}initAnonymous(){this.roomDto?this.check_anonymous.selected=this.roomDto.anonymous==1:this.check_anonymous.selected=!0}initCloseLive(){this.roomDto?this.check_closeLive.selected=this.roomDto.closeLive==1:this.check_closeLive.selected=!0}initCustomName(){let e=I.intance.getGeneralValueById(14);this.tf_nameGold.text=e[1],this.img_nameGold.skin=M.instance.getMoneyIcon(e[0]),console.log(e)}initPlayerNumCombo(e){if(this.groupId)this.box_playerNum_select.visible=!1,this.box_playerNum.visible=!1;else if(this.isCreate?this.plChoose=e.plChoose:this.plChoose=[],this.plChoose.length>0){var i=[];this.plChoose.forEach(s=>{i.push(s)}),console.log("comboData: ",i),this.list_playerNum.selectHandler=new Laya.Handler(this,this.onPlayerNumSelected),this.list_playerNum.renderHandler=Laya.Handler.create(this,this.onPlayerNumRender,null,!1),this.list_playerNum.dataSource=i;let n=-1,r=0;i.length>0&&(n=0),this.list_playerNum.selectedIndex=n,this.box_playerNum_select.visible=!0,this.box_playerNum.visible=!1}else this.box_playerNum_select.visible=!1,this.box_playerNum.visible=!0}onShowPlayNum(){this.groupId?(this.box_playerNum_select.visible=!1,this.box_playerNum.visible=!1):this.plChoose.length>0?(this.box_playerNum_select.visible=!0,this.box_playerNum.visible=!1):(this.box_playerNum_select.visible=!1,this.box_playerNum.visible=!0)}onPlayerNumRender(e,i){e.onChange(this.list_playerNum.selectedIndex==i)}onPlayerNumSelected(e){if(e!=-1){var i=this.plChoose[e];console.log("您选中了 _plChooseItem: "+i),this.numIndex=e,this.isInit&&this.setRoomInfo()}}initTeamCombo(e){let i=I.intance.m_dicGroupWar;this.groupWars=i.values,this.teamDatas=[],this.groupWars.forEach(o=>{if(this.isCreate){if(!this.isBooking&&!this.isBookingMust){if(o.groupPer>0)return}else if(e.arenaType==ee.ARENA_TYPE_TEAM){if(o.groupPer==0)return}else if(o.groupPer>0)return}this.teamDatas.push([o,p.instance.getLanguage(o.name)])}),console.log("this.teamDatas: ",this.teamDatas),this.teamCombo.selectHandler=new Laya.Handler(this,this.onSelectedTeam),this.teamCombo.dataSource=this.teamDatas;let n=-1,r=0;if(this.teamDatas.length>0&&(n=0),this.box_myTeam_btn.visible=!1,this.tf_myTeamNum.text="N/A",this.roomDto){var s=this.roomDto.teamDto;s&&(this.tf_myTeamNum.text=`<font color="#fec623" >${s.curNum}</font> / ${s.totalNum}`,this.box_myTeam_btn.visible=!0,this.btn_invite.disabled=s.curNum>=s.totalNum);for(let o of this.teamDatas){if(o[0].id==this.roomDto.groupId){n=r;break}r++}}this.teamCombo.selectedIndex=n}onSelectedTeam(e){e!=-1&&(this.groupId=this.teamDatas[e][0].id,console.log("您选中了 groupWarId"+this.groupId),this.isInit&&this.setRoomInfo())}initArenaLvCombo(e){this.arenaLvs=e.arenaLvs,this.arenaLvDatas=[],this.arenaLvs.forEach(r=>{this.isBooking||this.isBookingMust?r!=4&&this.arenaLvDatas.push([r,p.instance.getUILang("arenaLv_"+r)]):(r<4||r==5)&&this.arenaLvDatas.push([r,p.instance.getUILang("arenaLv_"+r)])}),console.log("this.arenaLvDatas: ",this.arenaLvDatas),this.arenaLvCombo.selectHandler=new Laya.Handler(this,this.onSelectedArenaLv),this.arenaLvCombo.dataSource=this.arenaLvDatas;let i=-1,n=0;if(this.arenaLvDatas.length>0&&(i=0),this.roomDto)for(let r of this.arenaLvDatas){if(r[0]==this.arenaLv){i=n;break}n++}else for(let r of this.arenaLvDatas){if(r[0]==this.arenaLv){i=n;break}n++}this.arenaLvCombo.selectedIndex=i}onSelectedArenaLv(e){if(e!=-1)if(this.arenaLv=this.arenaLvDatas[e][0],console.log("您选中了 arenaLv"+this.arenaLv),this.isCreate&&(this.arenaType==ee.ARENA_TYPE_PROFESSIONAL||this.arenaType==ee.ARENA_TYPE_TEAM)){var i=I.intance.m_dicArenaTypes.get(this.arenaType);this.initCoinCombo(i,!0)}else this.isInit&&this.setRoomInfo()}initCoinCombo(e,i=!1){this.arenaType==3&&(this.coinCombo.disabled=!0),this.coinIds=[];var n=e.coinTypes,r=[];n.forEach(l=>{if(i&&l==Be.TYPE_PC){if(this.arenaLv==1){var u=I.intance.m_dicItems.get(l);r.push(p.instance.getLanguage(u.name)),this.coinIds.push(l)}}else{var u=I.intance.m_dicItems.get(l);r.push(p.instance.getLanguage(u.name)),this.coinIds.push(l)}}),this.coinCombo.selectHandler=new Laya.Handler(this,this.onSelectCoin),this.coinCombo.dataSource=r;let s=-1,o=0;if(r.length>0&&(s=0),this.roomDto)for(let l of this.coinIds){if(l==this.roomDto.coinType){s=o;break}o++}this.coinCombo.selectedIndex=s}onSelectCoin(e){e!=-1&&(this.coinType=this.coinIds[e],console.log("您选中了 coinType"+this.coinType),this.isInit||(this.isInit=!0),this.setRoomInfo())}setRoomInfo(){var e=this.arenaType;e==ee.ARENA_TYPE_TRAINING?this.arenaItem=I.intance.getSheetDataByMultiKey(I.intance.m_dicArenaNumMulDic,[e,this.arenaLv,this.coinType]):this.arenaItem=I.intance.getSheetDataByMultiKey(I.intance.m_dicArenaMulDic,[e,this.arenaLv,this.coinType]);var i=p.instance.getLanguage(this.arenaItem.name);this.isCreate?this.isBooking||this.isBookingMust?this.arenaType==ee.ARENA_TYPE_TEAM?i=p.instance.getLanguage(1711,i):i=p.instance.getLanguage(1557,i):i=p.instance.getLanguage(1558,i):this.isBooking||this.isBookingMust?this.arenaType==ee.ARENA_TYPE_TEAM?this.inApply==1?i=p.instance.getLanguage(1712,i):i=p.instance.getLanguage(1713,i):this.inApply==1?i=p.instance.getLanguage(1559,i):i=p.instance.getLanguage(1560,i):i=p.instance.getLanguage(1561,i),this.tf_arenaName.text=i,this.onShowPlayNum(),this.onGetRoomNo()}async onGetRoomNo(){if(this.isCreate){this.btn_create.disabled=!0;let e=this,i=await w.requestPost("wxgame/room/getRoomNameSequence",{arenaId:this.arenaItem.id});if(i){this.no=i.no,this.onSetRoomName(),this.passMoneyNum=i.createNum;let n=I.intance.getGeneralValueById(28),r,s=n[1][0];this.passMoneyNum<s?r=n[0]:r=n[1],console.log("当前是第 "+this.passMoneyNum+" 次 密码付费，预计扣金币："+r[2]+" , 请核对！"),this.tf_namePassGold.text=r[2],this.img_namePassGold.skin=M.instance.getMoneyIcon(r[1])}else C.instance.notice(p.instance.getLanguage(135))}else this.tf_min.text=this.roomDto.minCount+"",this.tf_max.text=this.roomDto.maxCount+"",this.tf_roomName.text=B.instance.setRoomAnonymousLabel(this.roomDto.roomName,this.roomDto.anonymous)}onSetRoomName(){if(!this.destroyed){var e=I.intance.m_dicItems.get(this.coinType),i=p.instance.getLanguage(e.name),n="";this.arenaType==ee.ARENA_TYPE_PROFESSIONAL?n="PRO."+i:this.arenaType==ee.ARENA_TYPE_AIRDROP?n="AD."+i:this.arenaType==ee.ARENA_TYPE_TRAINING?n="TRG":this.arenaType==ee.ARENA_TYPE_TEAM&&(n="TEAM."+i),n=n+"."+this.no,this.tf_roomName.text=n,this.inApply!=1&&(this.btn_create.disabled=!1)}}onInputChange(){Laya.timer.frameOnce(1,this,this.checkAndTruncate)}checkAndTruncate(){let e=this.input_customName.text,i=0,n="";for(let r=0;r<e.length;r++){let s=e.charAt(r),o=this.isDoubleByte(s)?2:1;if(i+o<=15)n+=s,i+=o;else break}e!==n&&(this.input_customName.text=n,this.input_customName.focus=!0,this.input_customName.editable=!0)}isDoubleByte(e){return e.charCodeAt(0)>255}initTime(){this.box_countdown.visible=!1,this.box_date.disabled=!0,this.matchType==ee.ACTION_CREATE?(this.tf_start.text="N/A",this.tf_hour.text=""):this.isCreate?this.initListTime():this.roomDto.startTime>0?(this.tf_start.text=fe.formatTimeStamps(this.roomDto.startTime,"YY-MT-DD"),this.tf_hour.text=fe.formatTimeStamps(this.roomDto.startTime,"HH:MM"),this.box_countdown.visible=!0,this.onStartCountDown()):(this.tf_start.text="N/A",this.tf_hour.text="")}onStartCountDown(){var e=this.roomDto.startTime-this.roomDto.curTime;this.startCoolDownTime=Math.round(e/1e3),this.startCoolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):(Laya.timer.clear(this,this.onSetCoolTime),this.close())}onSetCoolTime(){this.startCoolDownTime>=0?(this.tf_time.text=fe.formatWithDay(this.startCoolDownTime,":",!0),this.startCoolDownTime--):(Laya.timer.clear(this,this.onSetCoolTime),this.tf_time.text="00:00"),console.log("onSetCoolTime ",this.startCoolDownTime,this.tf_time.text)}initNode(){this.list_node.selectHandler=new Laya.Handler(this,this.handleSelectNode),this.createNodeList(),this.box_node.on(Laya.Event.CLICK,this,this.onOpenNode),this.list_node.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_node.mouseHandler=Laya.Handler.create(this,this.onNodeItemMouse,null,!1),this.list_node.renderHandler=Laya.Handler.create(this,this.onNodeItemRender,null,!1),this.list_node.scrollBar&&this.list_node.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onNodeItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_node.selectedIndex=i,this.onHideNode())}onListDown(e){e.stopPropagation()}onScrollBarDown(e){e.stopPropagation()}onNodeItemRender(e,i){e.onChange(this.list_node.selectedIndex==i)}onOpenNode(){this.img_node_pad.visible==!1&&(this.img_node_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideNode))}onHideNode(){this.img_node_pad.visible=!1,this.img_date_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideNode),this.img_bg.off(Laya.Event.MOUSE_DOWN,this,this.onHideNode)}handleSelectNode(e){if(console.log("handleSelectNode: "+e),e!=-1){let i=this.list_node.selectedItem;this.nodeId=i.id,this.img_node.skin=M.instance.getNodeIcon(i.area),this.tf_node.text=p.instance.getLanguage(i.name),this.nodeDelaySign.dataSource=i}}createNodeList(){let e=I.intance.m_dicNodes;this.list_node.array=e.values,this.list_node.visible=!0;let i=-1,n=0;if(e.values.length>0&&(i=0),this.roomDto)for(let r of e.values){if(r.id==this.roomDto.nodeId){i=n;break}n++}this.list_node.selectedIndex=i}async onCreate(){let e=this.input_customName.text;if(this.isCreate){if(e!=""&&v.instance.getConsumeValue(Be.TYPE_GOLD)<Number(this.tf_nameGold.text)){C.instance.notice(p.instance.getLanguage(1362));return}if(this.arenaType!=ee.ARENA_TYPE_TEAM&&this.numIndex==-1){C.instance.notice(p.instance.getLanguage(1593));return}}let i=this.tf_roomName.text;if(!i||i==""){C.instance.notice(p.instance.getLanguage(1361));return}let n=this.input_pwd.text,r=I.intance.getGeneralValueById(28),s,o=r[1][0];this.passMoneyNum<=o-1?s=r[0]:s=r[1];let l=s[1];if(n&&v.instance.getConsumeValue(s[1])<s[2]){C.instance.notice(p.instance.getLanguage(1639));return}var u=this.arenaItem.id,m=new ms;if(m.arenaId=u,m.nodeId=this.nodeId,m.roomName=i,m.customName=e,m.isBookingMust=this.isBookingMust,m.numIndex=this.numIndex,!this.isCreate&&(this.roomDto&&this.roomDto.roomId&&(m.roomId=this.roomDto.roomId,m.teamDto=this.roomDto.teamDto,m.groupId=this.roomDto.groupId),!m.roomId)){C.instance.notice(p.instance.getLanguage(135));return}if(this.matchType==ee.ACTION_CREATE_BOOKING){var h=fe.getTimestamp(this.startDate.year,this.startDate.month,this.startDate.day,this.startDate.hour,this.startDate.minutes),y=I.intance.getGeneralValueById(23),x=new Date().getTime()+y*60*1e3;if(h<x){C.instance.notice(p.instance.getLanguage(1562,y));return}m.startTime=h,m.groupId=this.groupId}m.anonymous=this.check_anonymous.selected?1:0,m.closeLive=this.check_closeLive.selected?1:0,We.instance.onCreateAndJoinWithPwd(this.matchType,m,n)}onListStop(e,i){let n=this.startDate,r=Math.floor(e.startIndex),s=r+1,o=this.calculateVisibleHeight(e,r),l=this.calculateVisibleHeight(e,s),u=o+14>=l?r:s;(i==="month"||i==="day"||i==="hour")&&(u=Math.min(u,e.array.length-5)),e.scrollTo(u),e.selectedIndex=u;let m=e.getCell(u+1);m.tf_date.color="#ffffff";let h=m.tf_date.text;if(h&&m){switch(i){case"year":this.onYearChange(u+1),n.year=Number(h);break;case"month":this.onMonthChange(u+1),n.month=Number(h);break;case"day":n.day=Number(h);break;case"hour":n.hour=Number(h);break;case"minutes":n.minutes=Number(h);break}this.refreshStartTime()}}calculateVisibleHeight(e,i){let n=e.getCell(i);return Math.min(n.y+n.height,e.scrollBar.value+e.height)-Math.max(n.y,e.scrollBar.value)}onYearChange(e){!this.yearList.array||this.monthList.selectedIndex<0||this.updateDayList(parseInt(this.yearList.array[e]),parseInt(this.monthList.array[this.monthList.selectedIndex]))}onMonthChange(e){!this.yearList.array||this.monthList.selectedIndex<0||this.updateDayList(parseInt(this.yearList.array[this.yearList.selectedIndex]),parseInt(this.monthList.array[e]))}updateDayList(e,i){let n=[];for(let r=1;r<=ce.getDaysInMonth(e,i);r++)n.push(r.toString());for(let r=1;r<=3;r++)n.push("");n=["",...n],this.dayList.array=n}refreshStartTime(){let e=this.startDate.month>=10?this.startDate.month:`0${this.startDate.month}`,i=this.startDate.day>=10?this.startDate.day:`0${this.startDate.day}`;this.tf_start.text=`${this.startDate.year}-${e}-${i}`;let n=this.startDate.minutes,r=n>=10?`${n}`:`0${n}`;this.tf_hour.text=`${this.startDate.hour}:${r}`}initListTime(){this.box_date.disabled=!1;var e=I.intance.getGeneralValueById(23),i=new Date().getTime()+e*60*1e3;let n=new Date(i);this.startDate={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate(),hour:n.getHours(),minutes:n.getMinutes()},this.refreshStartTime()}onScrollBarChange(e,i,n){if(!n.visible)return;let r=this.startDate;console.log("startDate",this.startDate);let s=Math.floor(e.startIndex),o=s+1,l=this.calculateVisibleHeight(e,s),u=this.calculateVisibleHeight(e,o),m=l+14>=u?s:o,h=e.getCell(m+1);h.tf_date.color="#ffffff";let y,x;switch(i){case"year":x=this.beforeYearIndex,this.beforeYearIndex=m+1;break;case"month":x=this.beforeMonthIndex,this.beforeMonthIndex=m+1;break;case"day":x=this.beforeDayIndex,this.beforeDayIndex=m+1;break;case"hour":x=this.beforeHourIndex,this.beforeHourIndex=m+1;break;case"minutes":x=this.beforeMinuteIndex,this.beforeMinuteIndex=m+1;break}x!==m+1&&(y=e.getCell(x),this.resetListStyle(y));let E=h.tf_date.text;if(h.tf_date.color="#ffffff",E&&h){switch(i){case"year":this.onYearChange(m+1),r.year=Number(E);break;case"month":this.onMonthChange(m+1),r.month=Number(E);break;case"day":r.day=Number(E);break;case"hour":r.hour=Number(E);break;case"minutes":r.minutes=Number(E);break}this.refreshStartTime()}}resetListStyle(e){e&&(e.tf_date.color="#357cc0")}onOpenDate(e,i){this.resetColors(this.yearList,this.monthList,this.dayList,this.hourList,this.minutesList),e.visible==!1?(this.dateOpenState=1,this.getDateInfo(),e.visible=!0,this.img_bg.on(Laya.Event.CLICK,this,this.onHideNode)):(e.visible=!1,this.dateOpenState=0)}resetColors(e,i,n,r,s){let o=[e,i,n,r,s];for(let m of o)for(var l=0;l<m.cells.length;l++){var u=m.cells[l];u.tf_date.color="#357cc0"}}getDateInfo(){this.renderDateInfo(this.startDate,this.yearList,this.monthList,this.dayList,this.hourList,this.minutesList)}renderDateInfo(e,i,n,r,s,o){let l=e;this.fillList(i,l.year,2e3,2050),this.fillList(n,l.month,1,12);let u=new Date().getFullYear(),m=new Date().getMonth()+1,h=ce.getDaysInMonth(u,m);this.fillList(r,l.day,1,h),this.fillList(s,l.hour,0,23),this.fillList(o,l.minutes,0,59)}fillList(e,i,n,r){let s=[],o=this.yearList,l=this.monthList,u=this.dayList,m=this.hourList,h=this.minutesList;for(let x=n;x<=r;x++)s.push(x.toString());for(let x=1;x<=3;x++)s.push("");s=["",...s],e.array=s;let y=s.indexOf(`${i}`);if(y>-1){e.scrollTo(y-1),e.selectedIndex=y-1;let x=e.getCell(y);x.tf_date.color="#ffffff",e==o?this.beforeYearIndex=y:e==l?this.beforeMonthIndex=y:e==u?this.beforeDayIndex=y:e==m?this.beforeHourIndex=y:e==h&&(this.beforeMinuteIndex=y)}}};tL=d([OP("_y9qJpZZRk2p26xdgYPRyA")],tL);var iL=class extends Laya.Box{};var{regClass:HP}=Laya,aL=class extends iL{constructor(){super(...arguments);this.hasOpened=!1}onEnable(){this.on(Laya.Event.CLICK,this,this.openMaxView),_.intance.on(b.EVENT_UPDATE_MATCH_ROOM,this,this.onUpdateMatchRoom)}onUpdateMatchRoom(){this.tf_coolTime.text=fe.format(B.instance.coolDownTime,":",!1),B.instance.coolDownTime==5&&!this.hasOpened&&(console.log("onUpdateMatchRoom "+B.instance.coolDownTime),this.openMaxView(),this.hasOpened=!0)}openMaxView(){We.instance.openMaxView()}onDisable(){_.intance.off(b.EVENT_UPDATE_MATCH_ROOM,this,this.onUpdateMatchRoom)}};aL=d([HP("7hINWNN3S8SmWSveWJQJSw")],aL);var nL=class{constructor(t){this.normalBarrages=[];this.specialBarrages=[];this.normalBarrageQueue=[];this.specialBarrageQueue=[];this.barrageHeight=44;this.lineNormalBarrageDic=new ye;this.lineSpecialBarrageDic=new ye;this.screenWidth=t.width,this.screenHeight=t.height,this.barrageContainer=t}addBarrage(t){let e=Laya.Pool.getItemByCreateFun("barrageSpr",We.instance.barrageSprPrefab.create,We.instance.barrageSprPrefab);e.notice(t),e.x=this.screenWidth,this.normalBarrageQueue.push(e)}addSpecialBarrage(t){this.specialBarrageQueue.push(t)}update(){this.updateNormalBarrages(),this.updateSpecialBarrages()}updateNormalBarrages(){for(let e=this.normalBarrages.length-1;e>=0;e--){let i=this.normalBarrages[e];if(i.update(),i.isOffScreen()){this.normalBarrages.splice(e,1);var t=this.lineNormalBarrageDic.get(i.rowIndex);t&&t==i&&this.lineNormalBarrageDic.remove(i.rowIndex),this.barrageContainer.removeChild(i)}}for(;this.normalBarrageQueue.length>0;){let e=this.findAvailableYPositionForNormalBarrage();if(e!==-1){let i=this.normalBarrageQueue.shift();i.y=e*this.barrageHeight,this.normalBarrages.push(i),i.rowIndex=e,this.lineNormalBarrageDic.set(e,i),this.barrageContainer.addChild(i)}else break}}updateSpecialBarrages(){for(let e=this.specialBarrages.length-1;e>=0;e--){let i=this.specialBarrages[e];if(i.update(),i.isFinished()){this.specialBarrages.splice(e,1);var t=this.lineSpecialBarrageDic.get(i.rowIndex);t&&t==i&&this.lineSpecialBarrageDic.remove(i.rowIndex),this.barrageContainer.removeChild(i)}}for(;this.specialBarrageQueue.length>0;){let e=this.findAvailableYPositionForSpecialBarrage();if(e!==-1){let i=this.specialBarrageQueue.shift(),n=this.screenHeight-100-e*this.barrageHeight,r=Laya.Pool.getItemByCreateFun("specialBarrageSpr",We.instance.specialBarrageSprPrefab.create,We.instance.specialBarrageSprPrefab);r.notice(i),r.x=(this.screenWidth-r.width)/2,r.y=n,this.specialBarrages.push(r),r.rowIndex=e,this.lineSpecialBarrageDic.set(e,r),this.barrageContainer.addChild(r)}else break}}findAvailableYPositionForNormalBarrage(){let t=this.screenHeight/2,e=Math.floor(t/this.barrageHeight);for(let n=0;n<e;n++){var i=this.lineNormalBarrageDic.get(n);if(!i||i.x+i.width+10<this.screenWidth)return i?console.log("findAvailableYPositionForNormalBarrage: ",n,i.x,i.width,this.screenWidth,this.screenWidth-(i.x+i.width+10)):console.log("findAvailableYPositionForNormalBarrage: ",n,this.screenWidth),n}return-1}findAvailableYPositionForSpecialBarrage(){for(let i=0;i<5;i++){var e=this.lineSpecialBarrageDic.get(i);if(!e)return console.log("findAvailableYPositionForSpecialBarrage: ",i),i}return-1}};var rL=class extends Laya.Dialog{};var{regClass:UP}=Laya,sL=class extends rL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.isMax=!1;this.groupPer=0;this.lastState=-1;this.isSetRepeat=!1;this.currTab=0}onEnable(){_.intance.on(b.EVENT_CHANGE_HEAD,this,this.onColorSelect),_.intance.on(b.EVENT_CLICK_HERO,this,this.onClickHero),this.btn_switch.on(Laya.Event.CLICK,this,this.onSwitchClick),this.btn_emoji.on(Laya.Event.CLICK,this,this.onEmojiClick),this.btn_color.on(Laya.Event.CLICK,this,this.onColorClick),this.btn_send.on(Laya.Event.CLICK,this,this.onSendClick),this.tf_launch.on(Laya.Event.CLICK,this,this.onShowBarrageBtn),this.img_bg.on(Laya.Event.CLICK,this,this.onHideMenu),this.list_wait_hero.on(Laya.Event.CLICK,this,this.onHideMenu),this.list_team.on(Laya.Event.CLICK,this,this.onHideMenu),this.input_chat.on(Laya.Event.ENTER,this,this.onSendClick),this.btn_1.on(Laya.Event.CLICK,this,this.onClickTab,[1]),this.btn_2.on(Laya.Event.CLICK,this,this.onClickTab,[2]),this.btn_3.on(Laya.Event.CLICK,this,this.onClickTab,[3]),this.btn_help.on(Laya.Event.CLICK,this,this.onHelp),this.btn_showSignUp.on(Laya.Event.CLICK,this,this.onShowSignUp),this.btn_min.on(Laya.Event.CLICK,this,this.onMinClick),this.btn_exit.on(Laya.Event.CLICK,this,this.onExitClick),_.intance.event(b.EVENT_ENTER_MATCH_ROOM,!1),_.intance.on(b.EVENT_UPDATE_MATCH_ROOM,this,this.onUpdateMatchRoom),w.stopHeartInRoom=!0,this.initContainer(),$e.instance.sendCustumEvent(40)}setOpenData(e){e&&(this.isMax=e)}initContainer(){this.list_wait_hero.visible=!0,this.onSetStateTest();var e=B.instance.roomDto,i=B.instance.roomDto.groupId,n=I.intance.m_dicGroupWar.get(i);this.groupPer=n.groupPer;var r=e.roomId,s=e.arenaId,o=e.coinType,l=e.state,u=B.instance.roomWatcher;u&&(this.btn_min.visible=!1,this.btn_showSignUp.visible=!1),console.log("initContainer",i,this.groupPer,u),this.groupPer>0&&!u&&(this.btn_exit.visible=!1),this.tf_live.visible=u;var m=I.intance.m_dicArenaDic.get(s);B.instance.currArenaItem=m,this.tf_arenaName.text=p.instance.getLanguage(m.name),this.arenaNo.text=r+"",We.instance.init(),this.tf_roomName.text=B.instance.setRoomAnonymousLabel(B.instance.roomDto.roomName,B.instance.roomDto.anonymous);var h=B.instance.roomDto.nodeId;if(h){var y=I.intance.m_dicNodes.get(h);this.nodeDelaySign.dataSource=y,this.nodeDelaySign.startTest()}if(this.updateExitCD(),(l==ee.STATE_WAIT||l==ee.STATE_SIGNUP)&&this.initChat(),this.initCumulative(),l==ee.STATE_START){this.list_wait_hero.visible=!1,this.list_team.visible=!1,this.box_barrage_btn.visible=!1;var x=p.instance.getLanguage(1525);this.tf_coolTime.text=x}}updateExitCD(){if(B.instance.roomWatcher){this.btn_exit.disabled=!1,this.tf_exit.text=p.instance.getUILang("Exit");return}var e=Math.round(B.instance.roomDto.joinCd/1e3),i=e-B.instance.currArenaItem.notQuit;i>B.instance.currArenaItem.exitTime&&(i=B.instance.currArenaItem.exitTime),B.instance.limitCd=i,B.instance.limitCd>0?(this.onSetExitTime(),Laya.timer.loop(1e3,this,this.onSetExitTime)):(Laya.timer.clear(this,this.onSetExitTime),this.btn_exit.disabled=!0,this.tf_exit.text="Exit")}onSetExitTime(){B.instance.limitCd>=0?(this.tf_exit.text=p.instance.getUILang("Exit")+" ("+B.instance.limitCd+"s)",B.instance.limitCd--,this.btn_exit.disabled=!1):(Laya.timer.clear(this,this.onSetExitTime),this.btn_exit.disabled=!0,this.tf_exit.text="Exit")}onMinClick(){var e=B.instance.roomDto.state;e==ee.STATE_WAIT?B.instance.coolDownTime>5&&(this.close(),We.instance.openMinView()):console.log("不是房间等待状态，不能最小化")}async onExitClick(){var e=B.instance.roomWatcher,i=B.instance.roomDto.state;e||i==ee.STATE_WAIT?await w.requestPost("wxgame/room/leave",{roomId:B.instance.roomDto.roomId})?We.instance.close():C.instance.notice(p.instance.getLanguage(135)):console.log("不是房间等待状态，不能退出")}onUpdateMatchRoom(){this.onSetStateTest();var e=B.instance.roomDto.state,i=B.instance.roomDto.groupData,n=this.groupPer>0;this.lastState!=e&&(this.lastState=e,e==ee.STATE_WAIT?(this.list_wait_hero.visible=!n,this.list_team.visible=n,this.box_barrage.visible=!0,this.box_barrage_btn.visible=!0,this.box_state_signUp.visible=!1,this.box_state_group.visible=!1):e==ee.STATE_SIGNUP?B.instance.currArenaItem.type==ee.ARENA_TYPE_PROFESSIONAL||B.instance.currArenaItem.type==ee.ARENA_TYPE_TEAM?(this.list_wait_hero.visible=!n,this.list_team.visible=n,this.box_barrage.visible=!0,this.box_barrage_btn.visible=!0,this.box_state_signUp.visible=!0,this.box_state_group.visible=!1,this.onShowSignUp(null)):(this.list_wait_hero.visible=!n,this.list_team.visible=n,this.box_barrage.visible=!0,this.box_barrage_btn.visible=!0,this.box_state_signUp.visible=!1,this.box_state_group.visible=!1):e==ee.STATE_GROUPED&&(i&&i.length>0?(this.list_wait_hero.visible=!1,this.list_team.visible=!1,this.box_barrage.visible=!1,this.box_barrage_btn.visible=!1,this.box_state_signUp.visible=!1,this.box_state_group.visible=!0,this.clearChat()):(this.list_wait_hero.visible=!n,this.list_team.visible=n,this.box_barrage.visible=!0,this.box_barrage_btn.visible=!0,this.box_state_signUp.visible=!1,this.box_state_group.visible=!1)));var r=B.instance.roomDto.members.length;this.tf_people.text=r+"";var s=B.instance.roomDto.maxCount;if(B.instance.playerJoinDic==null&&(B.instance.playerJoinDic=new ye),this.groupPer>0)this.onGetRoomGroupList(e);else{this.heros=[];for(var o=0;o<s;o++){var l=B.instance.roomDto.members[o];l?(this.heros.push(l),B.instance.playerJoinDic.set(l.id,l)):this.heros.push(null)}(e==ee.STATE_WAIT||e==ee.STATE_SIGNUP)&&(this.list_wait_hero.array=this.heros)}var u="";if(e==ee.STATE_GROUPED?i&&i.length>0?u=p.instance.getLanguage(1376):u=p.instance.getLanguage(1525):e==ee.STATE_SIGNUP?B.instance.currArenaItem.type==ee.ARENA_TYPE_PROFESSIONAL||B.instance.currArenaItem.type==ee.ARENA_TYPE_TEAM?u=p.instance.getLanguage(1089):u=p.instance.getLanguage(1525):u=p.instance.getLanguage(1089),console.log("MatchModel.instance.coolDownTime: "+B.instance.coolDownTime),this.tf_coolTime.text=u+" <font color='#ff5388'>"+fe.format(B.instance.coolDownTime,":",!1)+"</font>",e==ee.STATE_WAIT?B.instance.coolDownTime>5?this.btn_min.disabled=!1:this.btn_min.disabled=!0:this.btn_min.disabled=!0,e==ee.STATE_WAIT)this.groupPer>0?this.list_team.visible=!0:this.list_wait_hero.visible=!0;else if(e==ee.STATE_SIGNUP)this.groupPer>0?this.list_team.visible=!0:this.list_wait_hero.visible=!0,(B.instance.currArenaItem.type==ee.ARENA_TYPE_PROFESSIONAL||B.instance.currArenaItem.type==ee.ARENA_TYPE_TEAM)&&(this.tf_cumulative.text=p.instance.getLanguage(1374,B.instance.roomDto.groupApplyList.length),this.list_groupApply.array=B.instance.roomDto.groupApplyList);else if(e==ee.STATE_GROUPED&&this.groupInfos==null){var i=B.instance.roomDto.groupData;if(this.groupInfos=[],i){var m=1;i.forEach(y=>{this.groupInfos.push([m,y]),m++})}this.list_group.array=this.groupInfos}}onGetRoomGroupList(e){this.heros=[],B.instance.roomDto.members.forEach(s=>{B.instance.playerJoinDic.set(s.id,s)});var i=e==ee.STATE_WAIT||e==ee.STATE_SIGNUP;if(i){var n=[],r=B.instance.roomDto.roomGroupMap;for(let s in r)r.hasOwnProperty(s)&&n.push(r[s]);this.setListByData(),this.list_team.array=n,this.list_team.selectedIndex=-1}}setListByData(){if(this.isSetRepeat)return;this.isSetRepeat=!0;var e=this.list_team.itemTemplate,i=this.list_team.spaceX,n=this.list_team.spaceY,r=e.list_members.itemTemplate.width,s=e.list_members.itemTemplate.height,o=this.groupPer,l=-1,u=-1,m=3;o<=3?(l=3,this.list_team.repeatX=2):o<=5?(l=5,m=5,this.list_team.repeatX=1):(l=5,m=5,u=o%5===0?o/5:Math.floor(o/5)+1,this.list_team.repeatX=1);var h,y,x,E;l!=-1&&(h=l*r+i*(l-1),x=e.list_members.x+h+22,console.log("memberListW: ",r,l,h,x),l==5&&(this.list_team.width=x)),u!=-1&&(y=u*s+n*(u-1),E=e.list_members.y+y+10,console.log("memberListH: ",s,u,y,E));let S=()=>{var T=Laya.HierarchyParser.parse(this.list_team.itemRender,{skinBaseUrl:this._skinBaseUrl})[0];return l!=-1&&(T.list_members.repeatX=m,T.list_members.width=h,T.img_bg.width=x,T.width=x),u!=-1&&(T.list_members.height=y,T.list_members.repeatY=u,T.img_bg.height=E,T.height=E),T.hideFlags=Laya.HideFlags.HideAndDontSave,T};this.list_team.createItem=S}initChat(){this.lastSendTime=0,this.box_barrage.width=Laya.stage.width,this.box_barrage.x=this.width-this.box_barrage.width>>1,this.box_barrage.visible=!0,this.barrageManager=new nL(this.box_barrage),Laya.timer.frameLoop(1,this,this.update),Laya.timer.loop(1500,this,this.onRecvMsg),this.onEmojiHide(),this.onColorHide(),this.list_wait_hero.selectHandler=new Laya.Handler(this,this.onUserSelected),this.list_color.selectHandler=new Laya.Handler(this,this.handleSelectColor),this.list_emoji.selectHandler=Laya.Handler.create(this,this.onSelectEmojiItem,[],!1),this.createColorList(),this.onClickTab(1)}clearChat(){Laya.timer.clear(this,this.update),Laya.timer.clear(this,this.onRecvMsg)}update(){this.barrageManager.update()}handleSelectColor(e){if(e!=-1){let i=this.list_color.selectedItem;i&&(v.instance.colorId=i.id),this.onColorHide()}}createColorList(){let e=I.intance.m_dicFontColor;this.list_color.array=e.values,this.list_color.visible=!0;let i=-1,n=0;for(let r of e.values){if(r.id==v.instance.colorId){i=n;break}n++}this.list_color.selectedIndex=i}onUserSelected(e,i){if(console.log("onUserSelected: ",e,i),B.instance.roomDto.anonymous!=1&&this.img_box_btn_2.visible){var n=this.list_wait_hero.selectedItem;if(n){var r=n.name,s=`@${r}`,o=this.input_chat.text;o.indexOf(s)==-1&&(this.input_chat.text=`${s}  ${o}`),this.list_wait_hero.selectedIndex=-1}}}onClickHero(e){if(console.log("onClickHero: ",e),B.instance.roomDto.anonymous!=1&&this.img_box_btn_2.visible&&e){var i=`@${e}`,n=this.input_chat.text;n.indexOf(i)==-1&&(this.input_chat.text=`${i}  ${n}`)}}onColorSelect(e){console.log("fontColorItem: ",e)}onSwitchClick(){console.log("onSwitchClick"),this.box_barrage.visible=!this.box_barrage.visible,this.box_barrage.visible?(this.btn_switch.skin="res/chat/img_chat_switch_1.png",this.btn_send.disabled=!1):(this.btn_switch.skin="res/chat/img_chat_switch_2.png",this.btn_send.disabled=!0)}onEmojiClick(){console.log("onEmojiClick"),this.img_box_emoji.visible==!1?this.onEmojiShow():this.onEmojiHide(),this.onColorHide()}onColorClick(){console.log("onColorClick"),this.img_box_color.visible==!1?this.onColorShow():this.onColorHide(),this.onEmojiHide()}onEmojiShow(){console.log("onEmojiShow"),this.img_box_emoji.visible=!0,this.btn_emoji.skin="res/chat/btn_emoji_1.png"}onEmojiHide(){console.log("onEmojiHide"),this.img_box_emoji.visible=!1,this.btn_emoji.skin="res/chat/btn_emoji_2.png"}onColorShow(){console.log("onColorShow"),this.img_box_color.visible=!0,this.btn_color.skin="res/chat/btn_color_1.png"}onColorHide(){console.log("onColorHide"),this.img_box_color.visible=!1,this.btn_color.skin="res/chat/btn_color_2.png"}onShowBarrageBtn(){this.img_box_btn_2.visible=!0,this.img_box_btn_1.visible=!1}onHideMenu(){this.onEmojiHide(),this.onColorHide()}onSendClick(){console.log("onSendClick");var e=this.input_chat.text;if(!e||e=="")return;let i=Date.now();if(i-this.lastSendTime<1e3){C.instance.notice(p.instance.getLanguage(1359,1));return}this.lastSendTime=i;var n=I.intance.m_dicFontColor.get(v.instance.colorId);let r=n.colorValue;var s=B.instance.roomDto,o=s.roomId;w.requestPost("wxgame/room/danmuPublish",{roomId:o,msg:e,color:r}),this.input_chat.text=""}async onRecvMsg(){console.log("onRecvMsg");let e=await w.requestPost("wxgame/room/danmuLoop",{roomId:B.instance.roomDto.roomId});if(!this.destroyed){var i=e.msgList;i&&i.forEach(n=>{this.onSetMsg(n)})}}onSetMsg(e){var i=e.msg;if(!(!i||i=="")){var n=e.color,r=this.parseEmojis(i);i=r[0];var s=r[1];if(B.instance.roomDto.anonymous!=1){var o=e.name;i=`${o}: ${i}`}i=`<font  color='${n}'>${i}</font>`;var l=e.watch;l?this.barrageManager.addSpecialBarrage(i):this.barrageManager.addBarrage(i)}}parseEmojis(e){let i=e,n=/\[:(\d+)\]/g,r,s=0;for(;(r=n.exec(e))!==null;){let u=parseInt(r[1]);console.log("parseEmojis: ",r[0],r[1]);let m;var o=I.intance.m_dicExpression.get(u);if(o){var l=M.instance.getEmoji(o.type,o.icon);m=`<img src='${l}' width='55' height='55'/>`,s++}else m=r[0];i=i.replace(r[0],m)}return[i,s]}onClickTab(e){if(this.currTab!=e){this.setTab(e);var i=this.getItemByType(e);this.list_emoji.array=i}}setTab(e){for(let i=1;i<4;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("img_tab_icon").skin="res/chat/img_tab_"+i+"_1.png"):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("img_tab_icon").skin="res/chat/img_tab_"+i+"_2.png")}getItemByType(e){var i=I.intance.m_dicExpression.values,n=[],r=-1,s=0;return i.forEach(o=>{o.type==e&&n.push(o)}),n}onSelectEmojiItem(e){var i=this.list_emoji.selectedItem;if(console.log("onSelectItem expressionItem: ",i),i){let n=`[:${i.id}]`;this.input_chat.text+=n,this.onEmojiHide(),this.list_emoji.selectedIndex=-1}}isOnlyEmojis(e){return/^(\[:\d+\])*$/.test(e)}initCumulative(){}onHelp(){var e=p.instance.getLanguage(1377),i=p.instance.getLanguage(1378);O.intance.openModule(L.HelpDialog,[2,e,i])}onShowSignUp(e){if(console.log("onShowSignUp"),!B.instance.roomWatcher){var i=B.instance.roomDto.groupApplyList,n=!1;if(i&&i.forEach(x=>{x==v.instance.playerDto.pid&&(n=!0)}),n)e!=null&&C.instance.notice(p.instance.getLanguage(1375));else{var r="",s=B.instance.currArenaItem;if(s.item&&s.item.length>1){var o=s.item[0],l=s.item[1];let x=I.intance.getGeneralValueById(15);var u=2,m=I.intance.m_dicItems.get(o);if(m.itemValue.length>1){var h=M.instance.getMoneyIcon(m.itemValue[0]),y=Pe.formatNumber(m.itemValue[1]*l)+"";r=p.instance.getLanguage(1363,x,y,h)}else{var h=M.instance.getMoneyIcon(3005);r=p.instance.getLanguage(1363,x,0,h)}}Le.instance().AlertByType(W.MatchConfimDialog,r,W.CANCEL,Laya.Handler.create(this,this.onSignUp))}}}onSignUp(){var e=B.instance.roomDto;We.instance.onCreateAndJoinWithPwd(ee.ACTION_SIGNUP,e,"")}onSetStateTest(){}onDisable(){this.removeEvent(),console.log("EnterRoomView onDisable"),_.intance.off(b.EVENT_UPDATE_MATCH_ROOM,this,this.onUpdateMatchRoom),ge.intance.preSceneName==ae.M_SCENE_MATCH||(ge.intance.currSceneName!=ae.M_SCENE_AIRDROP?(console.log("SceneManager.intance.currSceneName: ",ge.intance.currSceneName),q.instance.arenaType=B.instance.currArenaItem.type,ge.intance.setCurrentScene(ae.M_SCENE_AIRDROP)):_.intance.event(b.EVENT_ENTER_MATCH_ROOM,!0)),this.barrageManager&&(this.barrageManager=null),w.stopHeartInRoom=!1}removeEvent(){Laya.timer.clearAll(this),_.intance.off(b.EVENT_CHANGE_HEAD,this,this.onColorSelect),_.intance.off(b.EVENT_CLICK_HERO,this,this.onClickHero),Laya.Pool.clearBySign("barrageSpr")}};sL=d([UP("IwpLh2K2T5Gh7QXYnJakAw")],sL);var oL=class extends Laya.Box{};var{regClass:FP}=Laya,lL=class extends oL{constructor(){super(...arguments);this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.expressionItem=e,this.expressionItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.expressionItem.id;this.img_emoji.skin=M.instance.getEmoji(this.expressionItem.type,this.expressionItem.icon)}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.onCheck),this.isAddEvent=!0)}onCheck(){_.intance.event(b.EVENT_EMOJI_ICON_SELECT,this.expressionItem)}};lL=d([FP("UrCKcS-wTbm0LjT3KCsUYA")],lL);var cL=class extends Laya.Box{};var{regClass:VP}=Laya,uL=class extends cL{set dataSource(e){super.dataSource=e,this.fontColorItem=e,this.fontColorItem&&this.setCurrentOutPut()}async setCurrentOutPut(){let e=this.fontColorItem.id;this.img_color.skin=M.instance.getFontColor(e)}onChange(e){}};uL=d([VP("Vf8n1XGhQRK0Y2ndcK1U3g")],uL);var pL=class extends Laya.Dialog{};var{regClass:GP}=Laya,mL=class extends pL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}setOpenData(e){e&&(this.roomDto=e[0])}onEnable(){_.intance.on(b.EVENT_Close_CreateRoom,this,this.onClose),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.initContainer()}onClose(){this.close()}onDisable(){_.intance.off(b.EVENT_Close_CreateRoom,this,this.onClose)}initContainer(){var e=I.intance.m_dicItems.get(this.roomDto.coinType),i=p.instance.getLanguage(e.name),n=I.intance.m_dicArenaDic.get(this.roomDto.arenaId);this.tf_roomName.text=p.instance.getLanguage(n.name),this.input_pwd.text=""}async onJoin(){let e=this.input_pwd.text;We.instance.onCreateAndJoinWithPwd(ee.ACTION_JOIN,this.roomDto,e)}};mL=d([GP("bn6StZy0ROGBH9GCTateCA")],mL);var Nu=class{static startCircleAnimation(t,e=Laya.stage.width/2,i=Laya.stage.height/2,n=200,r=5e3,s=!0,o=0,l){Laya.Tween.clearTween(t);let u=t.x,m=t.y,h=0,y=s?1:-1,x=0,E=.5,S=2e3,T=0,N=()=>{T+=16;let F=1+Math.sin(T*Math.PI*2/S)*E;h+=360/r*16*F*y;let G=h*Math.PI/180;t.x=e+Math.cos(G)*n,t.y=i+Math.sin(G)*n,Math.abs(h)>=360&&(h=h%360,x++,o>0&&x>=o&&(Laya.timer.clear(t,N),t.x=u,t.y=m,l&&l.run()))};Laya.timer.frameLoop(1,t,N)}static stopCircleAnimation(t){Laya.timer.clearAll(t),Laya.Tween.clearTween(t)}static startCircleAnimationWithSpeedControl(t,e=Laya.stage.width/2,i=Laya.stage.height/2,n=200,r=5e3,s=!0,o=0,l=.5,u=2e3,m){Laya.Tween.clearTween(t);let h=t.x,y=t.y,x=0,E=s?1:-1,S=0,T=0,N=()=>{T+=16;let F=1+Math.sin(T*Math.PI*2/u)*l;x+=360/r*16*F*E;let G=x*Math.PI/180;t.x=e+Math.cos(G)*n,t.y=i+Math.sin(G)*n,Math.abs(x)>=360&&(x=x%360,S++,o>0&&S>=o&&(Laya.timer.clear(t,N),t.x=h,t.y=y,m&&m.run()))};Laya.timer.frameLoop(1,t,N)}};var hL=class extends Laya.Scene{};var dL=class a{constructor(){this._inited=!1}static getInstance(){return a._instance||(a._instance=new a),a._instance}init(){this._inited||(this._inited=!0)}};var{regClass:WP}=Laya,Es=class extends hL{constructor(){super(...arguments);this.isAnimationRunning=!1;this.currIconAni=1}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP,dL.getInstance().init()}async onOpened(e){this.startBackgroundAnimation(),this.mouseThrough=this.mouseThrough=!0,this.headBox.mouseThrough=!0;let i=this.getChildByName("mcMain");i&&(i.mouseThrough=!0),this.btn_fullScreen.visible=!1,this.updateTopInfo();var n=Laya.stage.width-ie.DESIGN_WIDTH>>1;if(this.leftX=this.leftMenu.x,this.rightX=this.rightMenu.x,this.leftMenu.x=this.leftX-n-this.leftMenu.width,this.rightMenu.x=this.rightX+n+this.rightMenu.width,Laya.Tween.to(this.leftMenu,{x:this.leftX-n},500),Laya.Tween.to(this.rightMenu,{x:this.rightX+n},500),this.initBtnLanguage(),this.initBtnAni(),$e.instance.sendCustumEvent(34),Es.M_B_FIRST_Open&&(ie.bookingId&&We.instance.goBookingCreateRoomDialog(ie.bookingId,ie.teamId),w.requestPost("wxgame/sys/notice",{type:2},!0,!0).then(o=>{console.log(o);var l=o,l=o;if(l.list&&l.list.length>0){O.intance.openModule(L.NoticeDialog,[2,l]);return}})),Es.M_B_FIRST_Open=!1,!!v.instance.playerDto){var s=null;showChatBtn(!0,K.instance.walletAddress,s),this.refreshHeadRed(),this.refreshRankRed(),this.refreshIGORed(),this.refreshWheelRed()}}initBtnAni(){for(var e=1;e<6;e++){var i=this["spine_"+e];i.initUrl("gameIcon/effect/main/icon/icon"+e+"/spine.skel","animation",!0),i.visible=!1}Laya.timer.once(1e3,this,this.startBtnAni)}startBtnAni(){this.currIconAni>5&&(this.currIconAni=1),this["spine_"+this.currIconAni].play(0,!1),this["spine_"+this.currIconAni].visible=!0,this.currIconAni++,Laya.timer.once(2e3,this,this.startBtnAni)}changeMailFlag(){}updateTopInfo(){let e=v.instance.playerDto;if(!e)return;this.tf_roleName.text=e.name,this.levelTF.text=e.lv.toString(),e.needTip=!0,this.playerIcon.dataSource=e,this.updateExp(),this.changeMailFlag();let i=new Date(v.instance.m_serverTime);console.log("server time toLocaleString："+i.toLocaleString()),console.log("server time offset date："+v.instance.timeZoneOff/60/60),this.updateLocalAssets()}updateExp(){}requestAssets(){_.intance.event(b.UPDATE_ASSETS)}async updataBalence(){await K.instance.getBalance()}async updateAssets(){await hs.instance.updateAssetsBalance()}updateLocalAssets(){this.tf_3005.text=Pe.filterNumFormat(v.instance.getConsumeValue(Be.TYPE_GOLD),0)}onEnable(){for(let e=1;e<3;e++)this["btn_"+e].on(Laya.Event.CLICK,this,this.onClickTab,[e]);Laya.timer.loop(1e3,this,this.refreshRoomTime),this.playerIcon.on(Laya.Event.CLICK,this,this.onClickHead),this.btn_shop.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_shop]),this.btn_guild.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_guild]),this.btn_lcPool.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_lcPool]),this.btn_backpack.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_backpack]),this.btn_asset.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_asset]),this.btn_scholarshop.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_scholarshop]),this.btn_leaderboard.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_leaderboard]),this.btn_social.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_social]),this.btn_mail.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_mail]),this.btn_activities.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_activities]),this.btn_chat.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_chat]),this.btn_igo.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_igo]),this.btn_swap.on(Laya.Event.CLICK,this,this.onbtnSwap),this.btn_setting.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_setting]),this.btn_fullScreen.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_fullScreen]),_.intance.on(b.UPDATE_RED_STATE_EVENT,this,this.changeMailFlag),_.intance.on(b.ROLE_INFO_CHANGE,this,this.updateTopInfo),_.intance.on(b.UPDATE_ASSETS,this,this.updateAssets),_.intance.on(Mi.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),_.intance.on("CHANG_NAME",this,this.changeName),_.intance.on("open_buy",this,this.openBuyDialog),_.intance.on("msg_173",this,this.onFirstRecharge),_.intance.on("ACCOUNTVO_UPDATE",this,this.updateExp),_.intance.on("msg_"+Ge.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR,this,this.onRequestRoomAddr),_.intance.on(b.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),this.initBtnBox(),this.box_Tele1.on(Laya.Event.CLICK,this,this.onBtnTele,[1]),this.box_Tele2.on(Laya.Event.CLICK,this,this.onBtnTele,[2]),this.box_Tele3.on(Laya.Event.CLICK,this,this.onBtnTele,[3]),this.box_Tele4.on(Laya.Event.CLICK,this,this.onBtnTele,[4]),this.btn_LiveChat.on(Laya.Event.CLICK,this,this.onBtnLiveChat,[4]),_.intance.on(b.REFRESH_MAINSCENE_HEAD_RED,this,this.refreshHeadRed),_.intance.on(b.REFRESH_ACTIVITY_RED,this,this.refreshRankRed),_.intance.on(b.REFRESH_IGO_RED,this,this.refreshRankRed),_.intance.on(b.REFRESH_ACTIVITY_RED,this,this.refreshIGORed),_.intance.on(b.REFRESH_WHEEL_RED,this,this.refreshWheelRed)}async onbtnSwap(){he.onOpenSwapView()}onClickRoomInfo(e){O.intance.openModule(L.RoomInfoDialog,[e])}onClickTab(e){if(e==1){var i=Ge.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR,n=Ge.snake.socket.CS_REQUEST_ROOM_ADDR.fromObject({type:1});mr.send(i,n)}}onRequestRoomAddr(e,i){if(i==Ge.snake.socket.MessageCode.SYS_NORMAL){var n=e.addr;console.log("onRequestRoomAddr: "+n),n&&(n=n.split("-")[0]);var r=new ms;r.connectAddr=n,B.instance.roomDto=r,gt.instance.initSocket()}}refreshRoomTime(){this.refreshRoomBtnRed()}refreshRoomBtnRed(){this.img_red_1.visible=v.instance.getRedDotById(Ae.instance.ROOM_1_1)||v.instance.getRedDotById(Ae.instance.ROOM_1_2)||v.instance.getRedDotById(Ae.instance.ROOM_1_3)||v.instance.getRedDotById(Ae.ROOM_PRE_CONTRACT)||v.instance.getRedDotById(Ae.ROOM_PRE_CONTRACT_SELF),this.img_red_2.visible=v.instance.getRedDotById(Ae.instance.ROOM_2_1)||v.instance.getRedDotById(Ae.instance.ROOM_2_2)||v.instance.getRedDotById(Ae.instance.ROOM_2_3),this.Img_social.visible=v.instance.getRedDotById(Ae.ROOM_FRIEND_APPLY),this.red_mail.visible=v.instance.getRedDotById(Ae.ROOM_MAIL)||v.instance.getRedDotById(Ae.MAIL_ANNOUNCE_RED),this.red_guild.visible=v.instance.getRedDotById(Ae.RED_GUILD_APPLY)}refreshHeadRed(){this.img_headRed.visible=v.instance.getRedDotById(Ae.RED_ACTIVITY1)||v.instance.getRedDotById(Ae.RED_ACTIVITY2)||v.instance.getRedDotById(Ae.RED_ACTIVITY3)}refreshRankRed(){this.img_rankRed&&(this.img_rankRed.visible=v.instance.getRedDotById(Ae.RED_EVERY_RANK_TOTAL)||v.instance.getRedDotById(Ae.RED_EVERY_RANK_PRE)||v.instance.getRedDotById(Ae.RED_EVERY_RANK_AIR)||v.instance.getRedDotById(Ae.RED_EVERY_RANK_TRA)||v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_1)||v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_2)||v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_3)||v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_4))}refreshIGORed(){this.img_igored&&(this.img_igored.visible=v.instance.getRedDotById(Ae.RED_IGO))}refreshWheelRed(){this.img_wheelRed&&(this.img_wheelRed.visible=v.instance.getRedDotById(Ae.RED_WHEEL))}onFirstRecharge(e){}initBtnBox(){this.sortIconView()}sortIconView(){}async onclickBtnHandler(e){switch(e){case this.btn_shop:ge.intance.setCurrentScene(ae.M_SCENE_SHOP);break;case this.btn_backpack:ge.intance.setCurrentScene(ae.M_SCENE_KNAPSACK);break;case this.btn_social:{ge.intance.setCurrentScene(ae.M_SCENE_FRIEND);break}case this.btn_mail:ge.intance.setCurrentScene(ae.M_SCENE_MAIL);break;case this.btn_lcPool:ge.intance.setCurrentScene(ae.M_SCENE_LCPOOL);break;case this.btn_guild:v.instance.playerDto.union>0?ge.intance.setCurrentScene(ae.M_SCENE_MYUNION,v.instance.playerDto.union):ge.intance.setCurrentScene(ae.M_SCENE_UNION);break;case this.btn_setting:O.intance.openModule(L.GameSettingLanguageDialog);break;case this.btn_fullScreen:he.fullScreen(!he.isFullScreen);break;case this.btn_asset:ge.intance.setCurrentScene(ae.M_SCENE_ASSET);break;case this.btn_scholarshop:ge.intance.setCurrentScene(ae.M_SCENE_SHOLARSHIP);break;case this.btn_chat:this.Img_tele.visible||(this.Img_tele.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList));break;case this.btn_leaderboard:ge.intance.setCurrentScene(ae.M_SCENE_RANK);break;case this.btn_igo:ge.intance.setCurrentScene(ae.M_SCENE_IGO_PAGE);break;case this.btn_activities:ge.intance.setCurrentScene(ae.M_SCENE_DAILY_TASK);break;default:C.instance.notice(p.instance.getLanguage(12));break}}openBuyDialog(e){switch(parseInt(e)){case 3:this.buyGoldBtn();break;case 4:this.clickRecharge();break}}onHideList(){this.Img_tele.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList)}clickRecharge(){if(ie.m_bInstantGame==!0){let e=p.instance.getLanguage(500004);Le.instance().AlertByType(W.BASEALERTVIEW,e,W.YES);return}_.intance.event(b.EVENT_OPEN_MODULE,[L.RechargeDialog])}changeName(e){}onClickHead(){O.intance.openModule(L.RoleInfoDialog)}buyGoldBtn(){_.intance.event(b.EVENT_OPEN_MODULE,[L.GetMoreDialog])}onDisable(){this.stopBackgroundAnimation(),_.intance.off(b.UPDATE_RED_STATE_EVENT,this,this.changeMailFlag),_.intance.off(b.ACCOUNTVO_UPDATE,this,this.updateExp),_.intance.off(b.ROLE_INFO_CHANGE,this,this.updateTopInfo),_.intance.off(b.UPDATE_ASSETS,this,this.updateAssets),_.intance.off(Mi.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),_.intance.off("CHANG_NAME",this,this.changeName),_.intance.off("open_buy",this,this.openBuyDialog),_.intance.off("msg_173",this,this.onFirstRecharge),_.intance.off(b.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),_.intance.off(b.REFRESH_MAINSCENE_HEAD_RED,this,this.refreshHeadRed),_.intance.off(b.REFRESH_ACTIVITY_RED,this,this.refreshIGORed),_.intance.off(b.REFRESH_WHEEL_RED,this,this.refreshWheelRed),_.intance.offAllCaller(this),Laya.Tween.clearAll(this),Laya.timer.clearAll(this),showChatBtn(!1)}onEnterMatchRoom(e){e?Laya.timer.once(2e3,this,this.startBtnAni):Laya.timer.clear(this,this.startBtnAni)}onBtnTele(e){let i=I.intance.getOtcTelegrams(e),n=i.telegram;i&&(ie.isInto?(doCopy(n),C.instance.notice(p.instance.getLanguage(1552))):window.open(n,"_blank"))}onBtnLiveChat(){doChatMax()}initBtnLanguage(){}startBackgroundAnimation(){!this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!0,Nu.startCircleAnimation(this.bgAni,Laya.stage.width/2,Laya.stage.height/2,30,3500,!0,0,null))}stopBackgroundAnimation(){this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!1,Nu.stopCircleAnimation(this.bgAni))}};Es.M_B_FIRST_Open=!0,Es=d([WP("pxhiJrX5SkKKvyFr8uIlNA")],Es);var fL=class extends Laya.Box{};var{regClass:jP}=Laya,yL=class extends fL{constructor(){super();this.isAddEvent=!1}onEnable(){_.intance.on(b.EVENT_Game_Delay,this,this.onGameDelay)}onGameDelay(e){var i=I.intance.getGeneralValueById(6),n=i[0],r=i[1];this.tf_delay.text=e+"ms",e>r?(this.img_delay.skin="res/common/comm/img_com_xinhao3.png",this.tf_delay.color=Ta.RED):e>n?(this.img_delay.skin="res/common/comm/img_com_xinhao2.png",this.tf_delay.color=Ta.YELLOW):(this.img_delay.skin="res/common/comm/img_com_xinhao1.png",this.tf_delay.color=Ta.GREEN)}onDisable(){_.intance.off(b.EVENT_Game_Delay,this,this.onGameDelay)}};yL=d([jP("AhgzWGWoRFetvSMsEOSkSg")],yL);var bL=class extends Laya.Box{};var{regClass:zP}=Laya,gL=class extends bL{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.playerDto=e,this.playerDto&&(this.addEvent(),this.setCurrentOutPut())}set headSkin(e){parseInt(e)>0?this.img_head.skin=M.instance.getPlayerIcon(e):this.setImage(e)}async setCurrentOutPut(){if(!this.playerDto)return;let e=this.playerDto.icon;parseInt(e)>0?this.img_head.skin=M.instance.getPlayerIcon(e):this.setImage(e)}setImage(e){this.clearImage();var i=this;Laya.loader.load(e,Laya.Handler.create(this,()=>{i.destroyed||(this.img_head.skin=e)}),null,Laya.Loader.IMAGE,-1,!0,"1111",!1,!1)}clearImage(){this.img_head&&(this.img_head.texture=null)}destroy(e=!0){this.clearImage(),super.destroy(e)}toDetail(){!this.playerDto||!this.playerDto.needTip||O.intance.openModule(L.RoleInfoDialog)}};gL=d([zP("OPT5t2CoSmuYp2zUJWwUWA")],gL);var _L=class extends Laya.Box{};var{regClass:KP}=Laya,LL=class extends _L{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_watch.on(Laya.Event.CLICK,this,this.onWatch),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.btn_view.on(Laya.Event.CLICK,this,this.onView),this.btn_invite.on(Laya.Event.CLICK,this,this.onInvite),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}onCopy(){var e=0,i=this.roomDto.teamDto;i&&(e=i.teamId);var o=this.roomDto.roomId;let n=We.instance.onGetNewUrl(o,e);var r=v.instance.playerDto.name,s=B.instance.setRoomAnonymousLabel(this.roomDto.roomName,this.roomDto.anonymous),o=this.roomDto.roomId,l;e?l=p.instance.getLanguage(1630,r,s,o,e,n):l=p.instance.getLanguage(1563,r,s,o,n),doCopy(l),C.instance.notice(p.instance.getLanguage(132))}onEnable(){}async onWatch(){We.instance.onCreateAndJoinWithPwd(ee.ACTION_WATCH,this.roomDto,"")}onInvite(){var e=this.roomDto.roomId,i=this.roomDto.teamDto.teamId;O.intance.openModule(L.MyFriendDialog,[e,i])}onView(){this.roomDto.startTime>0?this.roomDto.groupId?O.intance.openModule(L.TeamInfoDialog,this.roomDto.roomId):We.instance.goBookingCreateRoomDialog(this.roomDto.roomId):We.instance.goMatchCreateRoomDialog(this.roomDto.roomId)}async onJoin(){this.roomDto.startTime>0?We.instance.goBookingCreateRoomDialog(this.roomDto.roomId):We.instance.goMatchCreateRoomDialog(this.roomDto.roomId)}set dataSource(e){super.dataSource=e,this.roomDto=e,this.roomDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(this.roomDto.leader){let r=this.roomDto.leader.icon;this.playerIcon.headSkin=r,this.tf_union.text=B.instance.setRoomAnonymousLabel(p.instance.getMultiLan(this.roomDto.leader.shortUnionName),this.roomDto.anonymous)}this.btn_watch.disabled=this.roomDto.closeLive==1&&v.instance.playerDto.watchStatus==0,this.tf_name.text=B.instance.setRoomAnonymousLabel(this.roomDto.roomName,this.roomDto.anonymous),this.tf_customName.text=this.roomDto.customName,this.roomDto.customName?this.tf_union.y=66:this.tf_union.y=56;var e=I.intance.m_dicArenaDic.get(this.roomDto.arenaId);if(e?this.tf_arenaName.text=p.instance.getLanguage(e.name):this.tf_arenaName.text="",this.roomDto.groupId){var i=I.intance.m_dicGroupWar.get(this.roomDto.groupId);this.tf_groupName.text=p.instance.getLanguage(i.name),this.tf_teamTitle.visible=!0,this.roomDto.state==ee.STATE_START?(this.tf_people.text='<font color="#25ff63">'+this.roomDto.memberCount+"</font>",this.box_people.visible=!0,this.box_team.visible=!1):(this.tf_teamNum.text='<font color="#25ff63">'+this.roomDto.completeTeamNum+"</font>",this.box_people.visible=!1,this.box_team.visible=!0)}else this.tf_groupName.text="",this.tf_people.text='<font color="#25ff63">'+this.roomDto.memberCount+"</font>/"+this.roomDto.maxCount,this.box_people.visible=!0,this.box_team.visible=!1,this.tf_teamTitle.visible=!1;this.img_coin.visible=this.roomDto.coinType!=Be.TYPE_GOLD,this.img_coin.skin=M.instance.getMoneyIcon(this.roomDto.coinType);var n=I.intance.m_dicNodes.get(this.roomDto.nodeId);this.nodeDelaySign.dataSource=n,this.roomDto.startTime>0?(this.roomDto.closeLive!=1&&v.instance.playerDto.watchStatus==0&&(this.btn_watch.disabled=!0),this.box_booking.visible=!0,this.box_match.visible=!1,this.roomDto.groupId?(this.btn_join.visible=!1,this.btn_view.visible=!0,this.btn_invite.visible=!1):(this.btn_join.visible=!0,this.btn_view.visible=!1,this.btn_invite.visible=!1,this.img_suo.visible=this.roomDto.requirePass),this.img_underway.visible=!1,this.tf_utc_startTime.text=fe.formatTimeStamp(this.roomDto.startTime,"MT-DD HH:MM",!0),this.tf_local_startTime.text=fe.formatTimeStamp(this.roomDto.startTime,"MT-DD HH:MM")):(this.btn_view.visible=!1,this.btn_invite.visible=!1,(this.roomDto.closeLive!=1||v.instance.playerDto.watchStatus==1)&&(this.btn_watch.disabled=!1),this.box_booking.visible=!1,this.box_match.visible=!0,this.roomDto.state!=ee.STATE_START?(this.btn_join.visible=!0,this.img_underway.visible=!1,this.tf_seconds.text=fe.format(Math.round(this.roomDto.joinCd/1e3),":",!1),this.img_suo.visible=this.roomDto.requirePass):(this.btn_join.visible=!1,this.img_underway.visible=!0,this.tf_seconds.text=fe.format(Math.round(this.roomDto.fightEndTime/1e3),":",!1)))}};LL=d([KP("mjmIj9QnSdSPVSuOSeBiLw")],LL);var vL=class extends Laya.Dialog{};var{regClass:qP}=Laya,xL=class extends vL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.arenaIndex=1;this.roomInfoData=[["Acquire NFTs: Attain NFTs through the guildís scholarship program, or opt to lease or purchase your own.","Use Professional Tickets: Enter the arena with the Professional Arena Tickets youíve won or purchase actual tickets to amplify your earning potential.","Earnings and Advancement: Compete for major tokens and elevate your gameplay in the Professional Arena, where the stakes are higher and the rewards greater."],["Guild Support: Utilize the NFTs provided by your guild and the Airdrop Arena Tickets you've accumulated to compete.","Climb the Ladder: Demonstrate your abilities in the Airdrop Arena to win Professional Arena Tickets."],["Engage with In-Game NFTs: Start by playing with the gameís NFTs to discover your preferred playstyle and learn the game mechanics in different arena levels.","Skill Improvement: As you play, you'll enhance your abilities and gain experience.","Earn Free Airdrop Arena Tickets: Participate in the Training Arena to earn Airdrop Arena Tickets at no cost.","Level Up and Join a Guild: Progress through skill levels and become part of a guild to access community support and resources."]];this.roomInfoDataZn=[["獲取NFT遊戲角色：經由遊戲公會獎學金獲得或自行購買","專業競技場門票功能：使用專業競技場門票可增加獲勝概率","獎勵：專業競技場內，槓桿更多倍，獎勵更豐厚"],["公會支持：公會可為玩家提供空投競技場門票和NFT贊助","競技攀峰：在空投競技場獲勝玩家可免費獲得專業競技場門票"],["遊戲NFT：選擇遊戲內適合的NFT探索適合自己的競技模式，並了解遊戲機制","技能提升：隨著練習深入，競技技能不斷提升","免費獲得空投競技場門票：在新手練習場打比賽，可免費獲得空投競技場門票","加入公會：選擇一個公會加入，以獲得更多社區和道具支持"]];this.titleData=["Professional Arena","Airdrop Arena","Beginnerís Training Arena"];this.titleDataZn=["專業競技場","空投競技場","新手練習場"];this.playForData=["(Play-to-Earn)","(Play-to-Win)","(Free-to-Play)"];this.playForDataZn=["(邊玩邊賺)","(赢即是赚)","(0門檻)"]}setOpenData(e){e&&(console.log(e),this.arenaIndex=e[0],this.initContainer())}onEnable(){this.btn_join.on(Laya.Event.CLICK,this,this.onClickJoin)}onClose(){this.close()}onDisable(){this.btn_join.off(Laya.Event.CLICK,this,this.onClickJoin)}initContainer(){let e=Laya.LocalStorage.getItem(ie.COOKIE_CF_LAN),i=e=="zh"?this.roomInfoDataZn:this.roomInfoData,n=e=="zh"?this.titleDataZn:this.titleData,r=e=="zh"?this.playForDataZn:this.playForData,s=i[this.arenaIndex-1];this.tf_tittle.text=n[this.arenaIndex-1],this.tf_playFor.text=r[this.arenaIndex-1];for(let o=1;o<5;o++){let l=this["tf_"+o],u=s[o-1];l&&u?(l.text=u,l.visible=!0):l.visible=!1}}onClickJoin(){q.instance.arenaType=this.arenaIndex,ge.intance.setCurrentScene(ae.M_SCENE_AIRDROP),this.close()}};xL=d([qP("KgOqc2ShT_q7kN9EyT8fqQ")],xL);var IL=class extends Laya.Box{};var{regClass:YP}=Laya,EL=class extends IL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_watch.on(Laya.Event.CLICK,this,this.onWatch),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.isAddEvent=!0)}onEnable(){}async onWatch(){We.instance.onCreateAndJoinWithPwd(ee.ACTION_WATCH,this.roomDto,"")}async onJoin(){if(this.roomDto.requirePass){var e=I.intance.m_dicNodes.get(this.roomDto.nodeId);if(e&&e.dT>800&&ie.Debug<2){C.instance.notice(p.instance.getLanguage(1306));return}O.intance.openModule(L.InputPwdDialog,[this.roomDto])}else We.instance.onCreateAndJoinWithPwd(ee.ACTION_JOIN,this.roomDto,"")}set dataSource(e){super.dataSource=e,this.roomDto=e,this.roomDto&&(this.roomDto.state==0?(this.btn_join.visible=!0,this.img_underway.visible=!1,this.img_suo.visible=this.roomDto.requirePass):(this.btn_join.visible=!1,this.img_underway.visible=!0),this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e="10001";this.roomDto.leader&&(e=this.roomDto.leader.icon),this.playerIcon.headSkin=e,this.tf_name.text=B.instance.setRoomAnonymousLabel(this.roomDto.roomName,this.roomDto.anonymous),this.tf_customName.text=this.roomDto.customName,this.roomDto.customName?this.tf_name.y=19:this.tf_name.y=35,this.btn_watch.disabled=this.roomDto.closeLive==1&&v.instance.playerDto.watchStatus==0,this.roomDto.leader?this.tf_union.text=B.instance.setRoomAnonymousLabel(p.instance.getMultiLan(this.roomDto.leader.shortUnionName),this.roomDto.anonymous):this.tf_union.text="",this.tf_people.text='<font color="#25ff63">'+this.roomDto.memberCount+"</font>/"+this.roomDto.maxCount,this.img_coin.visible=this.roomDto.coinType!=Be.TYPE_GOLD,this.img_coin.skin=M.instance.getMoneyIcon(this.roomDto.coinType);var i=I.intance.m_dicNodes.get(this.roomDto.nodeId);this.nodeDelaySign.dataSource=i,this.roomDto.state!=10?(this.btn_join.visible=!0,this.img_underway.visible=!1,this.tf_seconds.text=fe.format(Math.round(this.roomDto.joinCd/1e3),":",!1),this.img_suo.visible=this.roomDto.requirePass):(this.btn_join.visible=!1,this.img_underway.visible=!0,this.tf_seconds.text=fe.format(Math.round(this.roomDto.fightEndTime/1e3),":",!1))}};EL=d([YP("YoCqj_dyTb2ZIAnhkSds6Q")],EL);var wL=class extends Laya.Box{};var{regClass:$P}=Laya,TL=class extends wL{onEnable(){}notice(e){this.duration=3e3,this.elapsed=0;let i=e;this.label_tf.text=e,console.log("notice: ",e),this.image_bg.width=this.label_tf.textField.textWidth,this.alpha=1,this.visible=!0}get view(){return this}get width(){return this.image_bg.width}update(){this.elapsed+=Laya.timer.delta,this.elapsed>=this.duration&&(this.alpha-=.05,this.alpha<=0&&(this.alpha=0))}isFinished(){return this.alpha<=0}onDisable(){console.log("specialBarrageSpr recover"),Laya.Pool.recover("specialBarrageSpr",this)}};TL=d([$P("O1TfP9clQWS0Yda38eJPHQ")],TL);var CL=class extends Laya.Box{};var{regClass:XP}=Laya,SL=class extends CL{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!!e){if(this.banAccountVo=e,this.roomPlayerDto=this.banAccountVo.roomPlayerDto,this.img_checked.visible=this.banAccountVo.checked,!this.roomPlayerDto){this.img_back.skin="res/matchReady/img_jjc_0.png",this.box_show.visible=!1;return}this.addEvent(),this.setCurrentOutPut()}}async setCurrentOutPut(){if(this.img_back.skin="res/matchReady/img_jjc_1.png",this.tf_name.text=qe.abbreviateString(this.roomPlayerDto.name),this.box_show.visible=!0,this.destroyed)return;let e=this.roomPlayerDto.icon;this.playerIcon.headSkin=e,this.img_sign.visible=this.roomPlayerDto.leader>0,this.tf_banned.visible=this.banAccountVo.isBanned,this.playerIcon.gray=this.banAccountVo.isBanned}toDetail(){console.log("this.banAccountVo.checked: "+this.banAccountVo.checked),this.banAccountVo.isBanned||(this.banAccountVo.checked=!this.banAccountVo.checked),_.intance.event(b.EVENT_REFRESH_BAN_ACCOUNT)}};SL=d([XP("Ic8NGg94R9ufEgwwaCKQlw")],SL);var DL=class{};var kL=class extends Laya.Dialog{};var{regClass:QP}=Laya,Ou=class extends kL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.allPlayerNum=0;this.selectedNum=0}onEnable(){_.intance.on(b.EVENT_REFRESH_BAN_ACCOUNT,this,this.onRefreshPlayer),this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_ban.on(Laya.Event.CLICK,this,this.onBanPlayer),this.btn_checkBox.on(Laya.Event.CLICK,this,this.onSelectAll),this.list_hero.array=[]}onOpened(e){this.getBanAccounts()}async getBanAccounts(){let e=B.instance.matchDto.members.filter(m=>m.id!==v.instance.playerDto.pid&&!m.npc).map(m=>m.id),i=await w.requestPost("wxgame/player/checkPlayerStatus",{pids:e});var n=[];i&&(n=i.data);let r=n.length;this.playerDatas=[];for(var s=0;s<r;s++){var o=n[s],l=new DL,u=q.instance.matchHeroDic.get(o.pid);l.roomPlayerDto=u,l.checked=!1,l.isBanned=o.status==1,this.playerDatas.push(l)}this.list_hero.array=this.playerDatas,this.updateNum()}onRefreshPlayer(){this.list_hero.refresh(),this.updateNum()}updateNum(){!this.playerDatas||this.playerDatas.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1,this.selectedNum=0,this.playerDatas.forEach(e=>{e&&e.checked&&this.selectedNum++}),this.allPlayerNum=this.playerDatas.length,this.tf_myHeroesNum.text=p.instance.getLanguage(1355,this.playerDatas.length),this.tf_selectedNum.text=p.instance.getLanguage(1223,this.selectedNum)}onSelectAll(){var e=this.btn_checkBox.selected;e&&this.playerDatas.forEach(i=>{i&&(i.checked=!1)}),this.playerDatas.forEach(i=>{i&&(i.isBanned||(i.checked=e))}),this.list_hero.refresh(),this.updateNum()}onBack(){this.close()}onBanPlayer(){var e=[];this.playerDatas.forEach(i=>{if(i.checked){var n=i.roomPlayerDto;e.push(n.id)}}),e.length>0?Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1779),W.CANCEL,Laya.Handler.create(this,this.onBanPlayerReal,[e])):C.instance.notice(p.instance.getLanguage(1780))}async onBanPlayerReal(e){let i=await w.requestPost("wxgame/player/killPlayers",{killPidList:e});if(i){var n=i.killPidList;this.playerDatas.forEach(r=>{r&&(r.checked=!1,n.includes(r.roomPlayerDto.id)&&(r.isBanned=!0))}),this.btn_checkBox.selected=!1,this.onRefreshPlayer()}}onDisable(){this.removeEvent()}removeEvent(){_.intance.off(b.EVENT_REFRESH_BAN_ACCOUNT,this,this.onRefreshPlayer)}};Ou.chooseNum=0,Ou=d([QP("MyYi8OCtTGGZZdRjMdMAJw")],Ou);var AL=class extends Laya.Box{};var{regClass:JP}=Laya,hi=class extends AL{init(t,e,i=28){var n,r;switch(t!=0?(r=Ct.getRandInRound(-30,30),e&&e.bj?n=hi.TYPE_Critical:n=hi.TYPE_Normal):(r=Ct.getRandInRound(-30,30),n=hi.TYPE_Miss),e?this.pos(r,-180):this.pos(r,-110),this.alpha=1,this.scale(1,1),this.tf_damage.visible=!1,this.box_crit.visible=!1,this.img_miss.visible=!1,n){case hi.TYPE_Normal:this.tf_damage.text="+"+t,this.showNormalDamageEffect();break;case hi.TYPE_Critical:this.fontClip_damage.value="Kill +"+t,this.showCriticalDamageEffect();break;case hi.TYPE_Miss:this.showMissEffect();break;default:break}}showNormalDamageEffect(){this.tf_damage.visible=!0,Laya.Tween.to(this,{y:this.y-50,alpha:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,this.onComplete))}showCriticalDamageEffect(){this.box_crit.visible=!0,this.scale(.2,.2),Laya.Tween.to(this,{scaleX:1.3,scaleY:1.3,alpha:1,y:this.y-70},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1,alpha:0},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.onComplete()}))}))}showMissEffect(){this.img_miss.visible=!0,Laya.Tween.to(this,{y:this.y-50,alpha:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.onComplete()}))}onComplete(){this.removeSelf()}onDisable(){Laya.Pool.recover("damageNumber",this)}};hi.WHITE="#FFFFFF",hi.ORANGE="#FFA500",hi.RED="#FF0000",hi.GREEN="#119c09",hi.BLUE="#78cefd",hi.TYPE_Normal="Normal",hi.TYPE_Miss="Miss",hi.TYPE_Critical="Critical",hi=d([JP("nHp6WKzZRIWvyhguidEfqg")],hi);var ML=class extends Laya.Box{};var{regClass:ZP}=Laya,BL=class extends ML{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e;var i=e;if(this.roomPlayer=B.instance.playerJoinDic.get(i),!this.roomPlayer){this.img_back.skin="res/matchReady1/img_com_kawenhao.png",this.box_show.visible=!1;return}this.addEvent(),this.setCurrentOutPut()}async setCurrentOutPut(){var e=this.parent.parent.parent,i=e.roomGroup.no;if(this.img_back.skin="res/matchReady1/img_com_ka"+i+".png",this.tf_name.text=B.instance.setRoomAnonymousLabel(qe.abbreviateString(this.roomPlayer.name)),this.tf_name.color=si.noColors[i-1],this.box_show.visible=!0,this.destroyed)return;let n=this.roomPlayer.icon;this.playerIcon.headSkin=n,this.img_sign.visible=this.roomPlayer.leader>0,this.tf_union.text=B.instance.setRoomAnonymousLabel(p.instance.getMultiLan(this.roomPlayer.shortUnionName))}toDetail(){this.roomPlayer.id&&_.intance.event(b.EVENT_CLICK_HERO,this.roomPlayer.name)}};BL=d([ZP("560IbDG_RiaXc5KU8Mfx8Q")],BL);var RL=class extends Laya.Box{};var{regClass:eN}=Laya,PL=class extends RL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.roomGroup=e,this.roomGroup&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.img_bg.skin="res/matchReady1/img_com_di"+this.roomGroup.no+".png",this.img_bar.skin="res/matchReady1/img_com_bt"+this.roomGroup.no+".png",this.img_flag.skin=M.instance.getTeamFlag(this.roomGroup.no);var e=I.intance.m_dicTeamName.get(this.roomGroup.no);this.tf_teamName.text=p.instance.getLanguage(e.teamName),this.list_members.array=this.roomGroup.members}};PL=d([eN("Wq7qINYUQWu8m5w93OSbdg")],PL);var NL=class extends Laya.Box{};var{regClass:tN}=Laya,OL=class extends NL{set dataSource(t){if(super.dataSource=t,!!t){var e=t[0];this.tf_groupNum.text=p.instance.getLanguage(1364,e);for(var i=t[1],n=0;n<4;n++){var r=i[n],s=this["listItem_"+(n+1)],o=this["img_line_"+(n+1)];r?(s&&(s.visible=!0,s.dataSource=r),o&&(o.visible=!0)):(s&&(s.visible=!1),o&&(o.visible=!1))}}}};OL=d([tN("nt2hpNSsSwWkkun3CZxOCg")],OL);var HL=class extends Laya.Box{};var{regClass:iN}=Laya,UL=class extends HL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.roomGroupDataDto=e,this.roomGroupDataDto&&(this.roomRankPlayerDto=B.instance.playerEndDic.get(this.roomGroupDataDto.pid),this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.tf_name.text=qe.abbreviateString(this.roomRankPlayerDto.name);let e=this.roomRankPlayerDto.icon;this.playerIcon.headSkin=e,this.tf_rank.text=p.instance.getLanguage(1365,this.roomRankPlayerDto.rankNum);var i=this.roomGroupDataDto.reward;if(i&&i.length>0){var n=i[0];this.img_reward_icon.skin=M.instance.getItemIcon(n.id),this.tf_reward_num.text=n.count+"",this.box_reward.visible=!0}else this.box_reward.visible=!1;var r=this.roomGroupDataDto.pid==v.instance.playerDto.pid,s=r?"#ffce58":"#96d2fc";this.tf_name.color=this.tf_rank.color=this.tf_reward_num.color=s,this.isFirst=this.roomGroupDataDto.rank==1}set isFirst(e){this.img_no1.visible=e}toDetail(){}};UL=d([iN("aVUehRpFSl-pkUZJISXahg")],UL);var FL=class extends Laya.Box{};var{regClass:aN}=Laya,VL=class extends FL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.roomRankPlayerDto=e,this.roomRankPlayerDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.roomRankPlayerDto.id==v.instance.playerDto.pid?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.roomRankPlayerDto.rankNum<4?this.bg.skin="res/matchRank1/img_ranking_bg_"+this.roomRankPlayerDto.rankNum+".png":this.bg.skin="res/matchRank1/img_ranking_bg_4.png",this.roomRankPlayerDto.rankNum<4?(this.img_rankIcon1.skin="res/matchRank1/img_ranking_"+this.roomRankPlayerDto.rankNum+".png",this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.roomRankPlayerDto.id==v.instance.playerDto.pid?this.img_rankIcon2.skin="res/matchRank1/img_ranking_ranking_me.png":this.img_rankIcon2.skin="res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1);let e=this.roomRankPlayerDto.icon;this.playerIcon.headSkin=e,this.playerIcon.gray=this.roomRankPlayerDto.die,this.img_die.visible=this.roomRankPlayerDto.die,this.tf_name.text=this.roomRankPlayerDto.name,this.tf_rank.text=this.roomRankPlayerDto.rankNum+"",this.tf_kill.text=this.roomRankPlayerDto.kill+"",this.tf_score.text=this.roomRankPlayerDto.score+""}};VL=d([aN("vpTYNMB4TfGFK2gaXiPAeg")],VL);var GL=class extends Laya.Dialog{};var{regClass:nN}=Laya,WL=class extends GL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.allItems=[]}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.goMatchEnd);var e=B.instance.matchWatcher;e&&(this.btn_back.label=p.instance.getUILang("Exit"))}setOpenData(e){var i=e[0];this.groupData=e[1],this.mcLanList.vScrollBarSkin="",B.instance.playerEndDic=new ye,i.forEach(r=>{if(B.instance.playerEndDic.set(r.id,r),r.id==v.instance.playerDto.pid){this.myRank=r;return}}),this.mcLanList.array=i;let n=-1;this.mcLanList.selectedIndex=n,this.showListEffect(),!q.instance.myPlayer||q.instance.myPlayer.hp>0?this.successAni.visible=!0:this.successAni.visible=!1,console.log("setOpenData",this.successAni.visible),$e.instance.sendCustumEvent(43)}showListEffect(){this.allItems=[];for(var e=this.mcLanList.array.length,i=0;i<e;i++){var n=this.mcLanList.getCell(i);n?(n.skewX=.5,n.alpha=0,this.allItems.push(n),Laya.timer.once(100+i*500,this,this.startShowItem,[i],!1)):console.log("showListEffect _item is null")}}startShowItem(e){var i=this.allItems[e];if(i==null){console.log("no list item now");return}i.scaleX=0,i.alpha=0,this.mcLanList.tweenTo(e,500),Laya.Tween.to(i,{scaleX:1,alpha:1},100,Laya.Ease.circOut,null,0,!1)}goMatchEnd(){var e=B.instance.matchWatcher;e?this.setToAirdropScene():(O.intance.openModule(L.MatchEndView,[this.myRank,this.groupData]),this.close())}setToAirdropScene(){q.instance.arenaType=B.instance.matchDto.arenaType,ge.intance.setCurrentScene(ae.M_SCENE_AIRDROP)}onDisable(){this.removeEvent(),this.myRank=this.groupData=null}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}};WL=d([nN("NlnToPI4TTuxIDhRKLPChg")],WL);var jL=class extends Laya.Box{};var{regClass:rN}=Laya,zL=class extends jL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,this.pid=e,!!this.pid){if(this.roomRankPlayerDto=B.instance.playerEndDic.get(this.pid),!this.roomRankPlayerDto){console.log("this.pid is null! ",this.pid);return}this.addEvent(),this.setCurrentOutPut()}}async setCurrentOutPut(){this.roomRankPlayerDto.id==v.instance.playerDto.pid?this.tf_name.color="#fff373":this.tf_name.color="#ffffff";let e=this.roomRankPlayerDto.icon;this.playerIcon.headSkin=e,this.playerIcon.gray=this.roomRankPlayerDto.die,this.img_die.visible=this.roomRankPlayerDto.die,this.tf_name.text=this.roomRankPlayerDto.name,this.tf_point.text=this.roomRankPlayerDto.score+""}};zL=d([rN("GW4SVqH4Qzu2Kd5pEN_0dQ")],zL);var KL=class extends Laya.Box{};var{regClass:sN}=Laya,qL=class extends KL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.roomTeamDataDto=e,this.roomTeamDataDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.img_bg.skin="res/matchReady1/img_com_di"+this.roomTeamDataDto.no+".png",this.img_bar.skin="res/matchRank2/img_com_bt"+this.roomTeamDataDto.no+".png",this.roomTeamDataDto.rank<4?(this.img_rankIcon1.skin="res/matchRank1/img_ranking_"+this.roomTeamDataDto.rank+".png",this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.img_rankIcon2.skin="res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1),this.img_flag.skin=M.instance.getTeamFlag(this.roomTeamDataDto.no);var e=I.intance.m_dicTeamName.get(this.roomTeamDataDto.no);this.tf_teamName.text=p.instance.getLanguage(e.teamName),this.tf_rank.text=this.roomTeamDataDto.rank+"",this.tf_totalPoint.text=this.roomTeamDataDto.score+"",this.list_members.array=this.roomTeamDataDto.members}};qL=d([sN("u3XTNJZVS0eHpoM_8aiWdw")],qL);var YL=class extends Laya.Dialog{};var{regClass:oN}=Laya,$L=class extends YL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.goMatchEnd);var e=B.instance.matchWatcher;e&&(this.btn_back.label=p.instance.getUILang("Exit"))}setOpenData(e){var i=e[0];this.groupData=e[1],this.roomTeamDataDtos=e[2],this.groupId=e[3],B.instance.playerEndDic=new ye,i.forEach(y=>{if(B.instance.playerEndDic.set(y.id,y),y.id==v.instance.playerDto.pid){this.myRank=y;return}});var n=I.intance.m_dicGroupWar.get(this.groupId),r=this.list_team.itemTemplate,s=this.list_team.spaceY,o=r.list_members.itemTemplate.height,l=n.groupPer,u=l*o+s*(l-1),m=r.list_members.y+u;console.log("listH: ",o,l,u,m);let h=()=>{var y=Laya.HierarchyParser.parse(this.list_team.itemRender,{skinBaseUrl:this._skinBaseUrl})[0];return y.list_members.height=u,y.img_bg.height=m,y.height=m,y.hideFlags=Laya.HideFlags.HideAndDontSave,y};this.list_team.createItem=h,this.list_team.array=this.roomTeamDataDtos,this.list_team.selectedIndex=-1,!q.instance.myPlayer||q.instance.myPlayer.hp>0?this.successAni.visible=!0:this.successAni.visible=!1,console.log("setOpenData",this.successAni.visible),$e.instance.sendCustumEvent(43)}goMatchEnd(){var e=B.instance.matchWatcher;e?this.setToAirdropScene():(O.intance.openModule(L.MatchEndView,[this.myRank,this.groupData,this.groupId]),this.close())}setToAirdropScene(){q.instance.arenaType=B.instance.matchDto.arenaType,ge.intance.setCurrentScene(ae.M_SCENE_AIRDROP)}onDisable(){this.removeEvent(),this.myRank=this.groupData=null}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}};$L=d([oN("46cneqM_QNq4VNWjm8AGdw")],$L);var XL=class extends Laya.Dialog{};var{regClass:lN}=Laya,QL=class extends XL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.groupId=0;this.states=[ee.MATCHEND_REWARD]}onEnable(){ct.instance.playSoundByName(ct.soundName_fail),this.btn_next.on(Laya.Event.CLICK,this,this.onNext),this.btn_home.on(Laya.Event.CLICK,this,this.setToAirdropScene),this.btn_help.on(Laya.Event.CLICK,this,this.onNext),_.intance.on(b.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan),$e.instance.sendCustumEvent(43)}onHelp(){he.commTipWithYes(p.instance.getLanguage("HELP"))}onNext(){this.states.indexOf(ee.MATCHEND_REWARD)!=-1?(this.states=this.states.filter(e=>e!==ee.MATCHEND_REWARD),this.states.length>0?this.btn_next.label=p.instance.getUILang("Next"):this.btn_next.label=p.instance.getUILang("Go Battle")):this.states.indexOf(ee.MATCHEND_QUAN)!=-1?(this.states=this.states.filter(e=>e!==ee.MATCHEND_QUAN),this.box_quan.visible=!0,this.box_pvp.visible=!1,this.box_pve.visible=!1,this.list_reward.visible=!1,this.noDataBox1.visible=!1,this.btn_next.visible=!1):this.states.indexOf(ee.MATCHEND_DIEJIA)!=-1?(this.states=this.states.filter(e=>e!==ee.MATCHEND_DIEJIA),this.groupInfos&&this.groupInfos.length>0&&(this.box_cumulative.visible=!0,this.box_outside.visible=!1),this.btn_claim.visible=!1,this.btn_next.label=p.instance.getUILang("Go Battle")):this.setToAirdropScene()}async onClaim(){var e=1,i=this.roomGameOverPush.loserTid;await Is.instance.addTicketLog(e,i)&&(console.log("记录逆袭券日志成功"),this.onClaimed())}onRefreshQuan(){C.instance.notice(p.instance.getLanguage(2e3))}setToAirdropScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}setOpenData(e){this.btn_nextLX=this.btn_next.x;var i=B.instance.matchDto;this.myRankPlayerDto=e[0];var n=e[1];this.groupId=e[2],this.roomGameOverPush=B.instance.roomGameOverPush,this.tf_rank.text=`${this.roomGameOverPush.personalRank}`,this.tf_score.text=`${this.roomGameOverPush.score}`,this.tf_kill.text=`Defeated: <font color="#ffd734">${this.roomGameOverPush.kills}</font>`,this.tf_length.text=`Final length: <font color="#ffd734">${this.roomGameOverPush.skinLen}</font>`,this.tf_challengeDuration.text=`Lifetime: <font color="#ffd734">${fe.formatWithSecondByMs(this.roomGameOverPush.battleTime)}</font>`,this.btn_next.visible=!0,this.list_reward.visible=!1;var l=this.roomGameOverPush.reward,r=!1;for(let E of l)if(E.id==Be.TYPE_QUAN_PVE){r=!0;break}this.list_reward.vScrollBarSkin="",this.myRankPlayerDto&&(this.tf_rank.text=this.myRankPlayerDto.rankNum+"");var s=[],o=new ye,l=B.instance.reward;l&&l.length>0&&l.forEach(E=>{var S=o.get(E.id);S?S.newAddCnt=S.newAddCnt+E.count:(S=new Xe(E.id),S.newAddCnt=E.count,s.push(S),o.set(E.id,S))});var u=this.list_reward.spaceX,m=this.list_reward.itemTemplate.width,h=s.length,y=h*m+u*(h-1);this.list_reward.repeatX=h,this.list_reward.width=y,this.btn_next.visible=!0,this.list_reward.x=this.box_outside.width-this.list_reward.width>>1,this.list_reward.array=s,this.list_reward.visible=!0,!this.list_reward.array||this.list_reward.array.length<=0?this.noDataBox1.visible=!0:this.noDataBox1.visible=!1;let x=-1;this.list_reward.selectedIndex=x,this.onNext()}onDisable(){this.removeEvent()}removeEvent(){_.intance.off(b.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan)}};QL=d([lN("y-nP_lRrQVef9uttVJ0rDw")],QL);var JL=class extends Laya.Box{};var{regClass:cN}=Laya,ZL=class extends JL{set dataSource(t){if(super.dataSource=t,!!t){var e=t[0];this.tf_groupNum.text=p.instance.getLanguage(1364,e);var i=t[1];this.list_group_players.array=i}}};ZL=d([cN("hRg5i0IfRMaPkSUsg-i-Lg")],ZL);var ev=class extends Laya.Box{};var{regClass:uN}=Laya,tv=class extends ev{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,this.roomPlayer=e,!this.roomPlayer){this.img_back.skin="res/matchReady/img_jjc_0.png",this.box_show.visible=!1;return}this.addEvent(),this.setCurrentOutPut()}async setCurrentOutPut(){if(this.img_back.skin="res/matchReady/img_jjc_1.png",this.tf_name.text=B.instance.setRoomAnonymousLabel(qe.abbreviateString(this.roomPlayer.name)),this.box_show.visible=!0,this.destroyed)return;let e=this.roomPlayer.icon;this.playerIcon.headSkin=e,this.img_sign.visible=this.roomPlayer.leader>0,this.tf_union.text=B.instance.setRoomAnonymousLabel(p.instance.getMultiLan(this.roomPlayer.shortUnionName))}toDetail(){this.heroVo.id}};tv=d([uN("PiGdVEY9T-K8CCfWLChS0w")],tv);var Ui=class{};Ui.TYPE_normal=!1,Ui.TYPE_Monster=!0,Ui.STATE_Idle=1,Ui.STATE_Patrol=2,Ui.STATE_Chase=3,Ui.STATE_Attack=4,Ui.STATE_Flee=5;var iv=class extends Laya.Sprite{};var{regClass:pN}=Laya,av=class extends iv{constructor(){super();this.isAddEvent=!1;this.isMe=!1;this.inGround=!1;this.speedRate=1;this.moveSpeed=6;this._speed=6;this.biasSpeed=0;this.lastDirectStr="left";this.directStr="left";this._roleDirection=-1;this.inControl=!1;this.isStop=!1;this.isLockAni=!1;this.aniChange=!1;this.beyond=!1;this.displacementType=0;this.timeStamp=0;this.currArea=0;this.isSetDiquan=!1;this.flashCount=0;this.lastX=-1;this.lastY=-1;this.lastRoleDirection1=-1;this.lastSpeed1=-1;this.lastArea=-1}get speed(){return this._speed}set speed(e){this._speed=e,this.biasSpeed=Math.round(this.speed*Math.sin(45*Math.PI/180))}get roleDirection(){return this._roleDirection}set roleDirection(e){this._roleDirection=e,e!=-4&&(e>270||e<90?this.directStr="right":e>90&&e<270&&(this.directStr="left"),this.lastDirectStr!=this.directStr&&(this.heroBox.scaleX=this.directStr=="left"?1:-1,this.lastDirectStr=this.directStr))}set myRoleDirection(e){if(this.roleDirection!=e){this.roleDirection=e;let i=28+Math.sin(e*(Math.PI/180))*(28/4),n=24+Math.sin(e*(Math.PI/180))*(14/2),r=this.img_d.width/2+Math.cos(e*(Math.PI/180))*(this.img_d.width/2),s=this.img_d.height/2+ +Math.sin(e*(Math.PI/180))*(this.img_d.height/2);this.img_arrow.pos(r,s),this.img_gj.rotation=e+90,this.img_arrow.rotation=e,this.img_arrow.width=i,this.img_arrow.height=n}}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){this.roomPlayerDto=e,this.roomPlayerDto&&(this.pos(this.roomPlayerDto.x,this.roomPlayerDto.y),this.addEvent(),this.speed=this.roomPlayerDto.speed,this.currArea=this.roomPlayerDto.area,this.heroVo=new _i,this.roomPlayerDto.heroId?this.heroVo.id=this.roomPlayerDto.heroId:this.heroVo.id=Di.DEFAULT_HERO_ID,this.roomPlayerDto.heroColor?this.heroVo.color=this.roomPlayerDto.heroColor:this.heroVo.color=Di.DEFAULT_HERO_COLOR,this.moveSpeed=this.heroVo.heroItem.mov/30,this.setCurrentOutPut())}reLife(){console.log("MatchHeroSpr reLife: "+this.isMe),this._isDead=!1,this._isRealDead=!1,this.alpha=1,this.img_deadImg.visible=!1,this.tf_name.visible=!0,this.box_blood.visible=!0,this.spineNodeBack.visible=!0,this.spineNodeFront.visible=!0,this.heroSk.visible=!0,this.getComponent(Laya.RigidBody).mask=-1,this.target=null}setDead(){console.log("MatchHeroSpr setDead: "+this.isMe),this._isRealDead=!0,this.alpha=.5,this.img_deadImg.visible=!0;var e=this.img_deadImg.y;this.tf_name.visible=!1,this.box_blood.visible=!1,this.spineNodeBack.visible=!1,this.spineNodeFront.visible=!1,this.heroSk.visible=!1,this.img_deadImg.y=0,this.img_deadImg.scale(0,0),this.getComponent(Laya.RigidBody).mask=1;var i=this;Laya.Tween.to(this.img_deadImg,{y:e,scaleX:1,scaleY:1},400,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){i.isMe&&_.intance.event(b.EVENT_GameScene_Gray)}))}updataBlood(){this._healthBar.value=this.roomPlayerDto.hp/this.roomPlayerDto.maxHp}addDiquanAndBaoqi(){if(this.destroyed||this.isSetDiquan)return;this.isSetDiquan=!0;var e=this.roomPlayerDto.equips;if(e instanceof Map){let x=Object.fromEntries(e);console.log("equipMap: "+JSON.stringify(x))}let i=I.intance.getGeneralValueById(25);var n=-1,r=0;for(let x=0;x<i.length;x++){let S=i[x][0];var s;if(e instanceof Map?s=e.get(S+""):s=e[S+""],s){r++;var o=new Xe(s.id),l=o.m_iQuality;(n==-1||l<n)&&(n=l)}}if(n!=-1){n<3&&(n=3);var u=Laya.Pool.getItemByCreateFun(fr.aniSkPrefab,q.instance.aniSkPrefab.create,q.instance.aniSkPrefab),m=q.instance["diquanEffect"+n];r>4&&(r=4),u.init(m,"ani_"+r),this.spineNodeBack.addChild(u)}var h=this.heroVo.heroItem.level;if(!this.baoqiSpineSk){if(this.roomPlayerDto.npc==Ui.TYPE_Monster||h<4)return;this.baoqiSpineSk=new Laya.SpineSkeleton,this.spineNodeBack.addChild(this.baoqiSpineSk),this.baoqiSpineSk.animationName="animation";var y=q.instance["baoqiEffect"+h];this.baoqiSpineSk.templet=y}}setCurrentOutPut(){this.roomPlayerDto.hp>0&&(this.heroSk.needChangeAni=!1,this.heroSk.dataSource=this.heroVo),this.roomPlayerDto&&this.roomPlayerDto.no?q.instance.myPlayer&&q.instance.myPlayer.no==this.roomPlayerDto.no?(this.isOneTeam=!0,this.tf_name.color=hi.BLUE):(this.isOneTeam=!1,this.tf_name.color=hi.RED):(this.tf_name.color=si.qualityColors[this.heroVo.heroItem.quality-1],v.instance.playerDto.pid==this.roomPlayerDto.id?this.isOneTeam=!0:this.isOneTeam=!1),this.roomPlayerDto.npc?this.tf_name.text=Pe.getNumberSuffix(this.roomPlayerDto.name):this.tf_name.text=B.instance.setMatchAnonymousLabel(qe.abbreviateString(this.roomPlayerDto.name)),this.roomPlayerDto.country?this.img_country.skin=B.instance.setMatchAnonymousImg(M.instance.getCountryIcon(this.roomPlayerDto.country+"")):this.img_country.visible=!1,this.roomPlayerDto.no?(this.img_flag.skin=M.instance.getTeamFlag(this.roomPlayerDto.no),this.img_flag.visible=!0):this.img_flag.visible=!1,v.instance.playerDto.pid==this.roomPlayerDto.id?this.myRoleDirection=this.roomPlayerDto.dire:this.roleDirection=this.roomPlayerDto.dire}onAwake(){}backAni(){}showDamageLabel(e,i,n){if(i.length>1)for(var r=I.intance.m_dicSkills.get(e),s=r.section,o=s,l=0;l<i.length;l++){var u=i[l];this.showDamageLabelDetailDelay(u,o[l][1],n)}else i.length==1&&this.showDamageLabelDetailDelay(i[0],100,n);var m=this;if(n.allAtkValue!=0){var h=200;this.originalBlendMode=this.img_hp_bg.blendMode,this.flashCount=0,Laya.timer.loop(h,this,this.flashBlood)}}flashBlood(){var e=2;this.flashCount<e?this.img_hp_bg.blendMode===this.originalBlendMode?this.img_hp_bg.blendMode="lighter":(this.img_hp_bg.blendMode=this.originalBlendMode,this.flashCount++):(this.img_hp_bg.blendMode=this.originalBlendMode,Laya.timer.clear(this,this.flashBlood))}showDamageLabelDetailDelay(e,i,n){Laya.timer.once(i,this,this.showDamageLabelDetail,[e,n],!1)}showDamageLabelDetail(e,i){var n=Laya.Pool.getItemByCreateFun("damageNumber",q.instance.damageNumPrefab.create,q.instance.damageNumPrefab);n.init(e,i),this.addChild(n)}onSendMoveData(){if(!this._isDead){var e=this.speed,i=this.roleDirection,n=this.x,r=this.y;if(Math.abs(n-this.lastX)>2||Math.abs(r-this.lastY)>2||this.lastRoleDirection1!=i||this.lastSpeed1!=e||this.lastArea!=this.currArea){this.pos(n,r),this.lastX=n,this.lastY=r,this.lastRoleDirection1=i,this.lastSpeed1=e,this.lastArea=this.currArea;var s=v.instance.m_serverTime;this.timeStamp=s,q.instance.onSendMove(s,this.roomPlayerDto.id,e,i,n,r,this.currArea)}}}beiTui(e){var i=this.roomPlayerDto.id,n=this.x,r=this.y;if(Math.abs(n-this.lastX)>2||Math.abs(r-this.lastY)>2){this.lastX=n,this.lastY=r;var s=v.instance.m_serverTime;this.timeStamp=s,q.instance.onSendTargetMove(s,e,i,n,r)}}onDisable(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this)}};av=d([pN("JIaWsVNzTK2dJIUcev60tQ")],av);var nv=class extends Laya.Box{};var{regClass:mN}=Laya,rv=class extends nv{init(){var t=B.instance.currArenaItem.coinType;this.img_bing.skin="gameIcon/map/1001/img_bing_"+t+".png"}set dataSource(t){super.dataSource=t}};rv=d([mN("W3qDvbUmSa2SFKJ5iEmjsg")],rv);var sv=class extends Laya.Box{};var{regClass:hN}=Laya,ov=class extends sv{init(){var t=B.instance.currArenaItem.coinType;this.img_bing.skin=M.instance.getItemIcon(t),q.instance.allOrders||(q.instance.allOrders=[]),q.instance.allOrders.push(this.img_mtl)}set dataSource(t){super.dataSource=t}};ov=d([hN("UmH7VSkYTd6D8QA2Eu2OYw")],ov);var lv=class extends Laya.Box{};var{regClass:dN}=Laya,cv=class extends lv{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e;var i=e;this.roomPlayer=B.instance.playerJoinDic.get(i),this.roomPlayer&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.tf_name.text=B.instance.setRoomAnonymousLabel(qe.abbreviateString(this.roomPlayer.name));let e=this.roomPlayer.icon;this.playerIcon.headSkin=e;var i=this.roomPlayer.id==v.instance.playerDto.pid,n=i?"#ffce58":"#96d2fc";this.tf_name.color=n}toDetail(){}};cv=d([dN("YQ6pCsb4S0ibRtZ73-V9-Q")],cv);var uv=class extends Laya.Box{};var{regClass:fN}=Laya,pv=class extends uv{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e;var i=e;i&&(this.roomRankPlayerDto=B.instance.playerJoinDic.get(i),this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.tf_name.text=B.instance.setRoomAnonymousLabel(qe.abbreviateString(this.roomRankPlayerDto.name));let e=this.roomRankPlayerDto.icon;this.playerIcon.headSkin=e;var i=this.roomRankPlayerDto.id==v.instance.playerDto.pid,n=i?"#ffce58":"#96d2fc";this.tf_name.color=n}toDetail(){}};pv=d([fN("U8opa1YySD-Mm6RRAvEq9g")],pv);var mv=class extends Laya.Box{};var{regClass:yN}=Laya,hv=class extends mv{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){this.roomPlayerDto=e,this.roomPlayerDto&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){this.tf_rank.text=this.roomPlayerDto.rankNum+"";let e=this.roomPlayerDto.icon;this.playerIcon.headSkin=e,this.roomPlayerDto.npc?this.tf_name.text=Pe.getNumberSuffix(this.roomPlayerDto.name):this.tf_name.text=B.instance.setMatchAnonymousLabel(qe.abbreviateString(this.roomPlayerDto.name)),this.tf_kill.text=this.roomPlayerDto.kill+"",q.instance.myPlayer&&this.roomPlayerDto.id==q.instance.myPlayer.id?(this.img_bg.skin="res/match1/img_ph2.png",this.tf_rank.color="#000000",this.tf_name.color="#ffe64b",this.img_kill.filters=[he.YELLOW],this.tf_kill.color="#ffe64b",this.box_item.x=6):(this.img_bg.skin="res/match1/img_ph.png",this.tf_rank.color="#ffffff",this.tf_name.color="#ffffff",this.img_kill.filters=null,this.tf_kill.color="#ffffff",this.box_item.x=15)}};hv=d([yN("XTVFXeI_R768e0Elv_ePAA")],hv);var dv=class extends Laya.Scene{};var{regClass:bN}=Laya,fv=class extends dv{constructor(){super(...arguments);this.type=1}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onOpened(e){this.type=e}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}onEnable(){console.log("MatchReadyRT onEnable"),this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_random.on(Laya.Event.CLICK,this,()=>{this.generateName()}),this.btn_enter.on(Laya.Event.CLICK,this,()=>{var e=this.input_username.text;if(console.log("phyBtn"),e==""){alert("用户名不能为空");return}gt.instance.openId=e,gt.instance.initSocket()})}generateRandomName(e){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n="";for(let r=0;r<e;r++){let s=Math.floor(Math.random()*i.length);n+=i.charAt(s)}return n}generateName(){this.input_username.text=this.generateRandomName(8)}onDestroy(){}};fv=d([bN("mOlMVGD3TRCKNoddhyUGLw")],fv);var yv=class extends Laya.Dialog{};var{regClass:gN}=Laya,bv=class extends yv{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER}onEnable(){}onOpened(e){this.updateBattleCD()}updateBattleCD(){var e=B.instance.matchDto.startTime-B.instance.matchDto.nowTime;console.log("updateBattleCD: "+e),B.instance.startCoolDownTime=Math.round(e/1e3),B.instance.startCoolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):(Laya.timer.clear(this,this.onSetCoolTime),this.close())}onSetCoolTime(){B.instance.startCoolDownTime>0?(this.fontClip_reduceTime.value=B.instance.startCoolDownTime+"",this.scaleEffect(),B.instance.startCoolDownTime--):(Laya.timer.clear(this,this.onSetCoolTime),B.instance.matchDto.arenaType==ee.ARENA_TYPE_PVE?this.close():this.onMatchStartEnd())}scaleEffect(){var e=this;Laya.Tween.to(this.fontClip_reduceTime,{scaleX:1.3,scaleY:1.3},200,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){Laya.Tween.to(e.fontClip_reduceTime,{scaleX:1,scaleY:1},200,Laya.Ease.linearInOut)}))}onMatchStartEnd(){Laya.timer.once(5e3,this,this.close)}onDisable(){this.removeEvent(),B.instance.stopAll=!1}removeEvent(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this)}};bv=d([gN("xpPoFvX_SqiYMO5AaOwGyA")],bv);var gv=class extends Laya.Box{};var{regClass:_N}=Laya,_v=class extends gv{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.itemVo=e,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.itemVo&&(this.knapsackItem.showAdd=!0,this.knapsackItem.dataSource=this.itemVo)}toDetail(){!this.itemVo||!this.itemVo.needTip||(this.itemVo.type===rt.TYPE_Equipment?O.intance.openModule(L.EquipDetailDialog,this.itemVo):O.intance.openModule(L.KnapsackTipDialog,this.itemVo))}};_v=d([_N("WXpxCvqlQ2mKdcJCYlqOeg")],_v);var Lv=class extends Laya.Scene{};var{regClass:LN}=Laya,vv=class extends Lv{constructor(){super(...arguments);this.liveNum=0}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP,q.instance.init()}onOpened(e){var i=B.instance.matchDto.startTime-B.instance.matchDto.nowTime;i>0&&O.intance.openModule(L.MatchReadyView);var n=B.instance.matchDto.arenaId,r=B.instance.matchWatcher;r&&(this.headBox.visible=!1,this.btn_exit.on(Laya.Event.CLICK,this,this.onExitClick),this.img_kill.visible=!1,this.box_skills.visible=!1,this.img_smallMap.on(Laya.Event.CLICK,this,this.onSmallMapClick),v.instance.playerDto.killStatus==1&&(this.btn_banAccount.visible=!0,this.btn_banAccount.on(Laya.Event.CLICK,this,this.onBanAccountClick))),this.btn_exit.visible=r,this.tf_live.visible=r;var s=I.intance.m_dicArenaDic.get(n);B.instance.currArenaItem=s;var o=B.instance.currArenaItem.mapid,l=Laya.loader.getRes("gameIcon/map/map_"+o+".lh");this.img_smallMap.skin="res/match1/img_map_"+o+".png";var u=Laya.Pool.getItemByCreateFun("MatchMap1001",l.create,l);u.init(),q.instance.gameMap=u,q.instance.box_players=u.box_players,q.instance.box_behind=u.box_behind,q.instance.box_front=u.box_front,this.matchBox.removeChildren(),this.matchBox.addChild(u);var m=v.instance.playerDto;this.tf_roleName.text=m.name;let h=m.icon;this.playerIcon.headSkin=h,q.instance.initMatch(this,this.onInitEnd),$e.instance.sendCustumEvent(42);var y=B.instance.matchDto.roomId;if(this.arenaNo.text=y+"",B.instance.roomDto){var x=B.instance.roomDto.nodeId;if(x){var E=I.intance.m_dicNodes.get(x);this.nodeDelaySign.dataSource=E,this.nodeDelaySign.startTest()}}}onSmallMapClick(e){var i=new Laya.Point(e.stageX,e.stageY);let n=this.img_smallMap.globalToLocal(i,!1);q.instance.clickSmallMapToMove(n),console.log("onSmallMapClick: ",e.stageX,e.stageY,"====",n.x,n.y)}onStageClick(e){console.log("onStageClick: ",e.stageX,e.stageY,e)}onInitEnd(e){try{e.updateSkill()}catch(i){console.warn(i)}e.updateKill(),e.updateBattleCD(),Laya.timer.frameLoop(10,e,e.updateCharactersOrder)}onRestoreData(){q.instance.updateMatch(this,this.onInitEnd)}updateSkill(){var e=B.instance.matchWatcher;if(!e){var i=q.instance.myPlayer,n;i.heroId?n=i.heroId:n=Di.DEFAULT_HERO_ID;var r=I.intance.m_dicHeros.get(n),s=r.skillIds;console.log("updateSkill",s);for(var o=s.length,l=0;l<o;l++){var u=s[l],m=I.intance.m_dicSkills.get(u),h=this["matchSkill"+(l+1)];h.keyNum=l+1,h.dataSource=[m,null,null,1];var y;i.skillCd instanceof Map?y=i.skillCd.get(u):y=i.skillCd[u],y&&h.updateSkillCooldown(y),h.updateGlobalCooldown(i.commonCd),h.visible=!0}var x=[],E=i.equips;if(E){let T=I.intance.getGeneralValueById(26);if(T){var S=0;T.forEach(N=>{var F=N[0],G;if(E instanceof Map?G=E.get(F+""):G=E[F+""],G){var Y=G.id,Z=I.intance.m_dicItems.get(Y);Z==null&&console.warn("itemItem is null id: "+Y);var ne=Z.skillId,J=I.intance.m_dicSkills.get(ne),ue=this["matchSkill"+(o+S+1)];ue.keyNum=o+S+1,ue.dataSource=[J,Z,F,G.count];var se=i.cardCd.get(F);se&&ue.updateSkillCooldown(se),ue.disabled=G.count<=0,ue.visible=!0,S++}})}}}}updateKill(){q.instance.myPlayer&&(this.tf_kill.text=q.instance.myPlayer.kill+""),this.list_rank.array=this.getSortPlayer(q.instance.matchHeroDic.values),this.tf_remainer.text=this.liveNum+"",this.tf_total.text="/ "+q.instance.matchHeroDic.values.length}getSortPlayer(e){var i=e.slice(),n=i.sort((o,l)=>l.score-o.score),r=[];this.liveNum=0;var s=1;return n.forEach(o=>{o.rankNum=s,o.hp>0&&this.liveNum++,(s<4||o.id==v.instance.playerDto.pid)&&r.push(o),s++}),r}updateBattleCD(){B.instance.matchDto.arenaType==ee.ARENA_TYPE_PVE?(this.list_rank.visible=!1,B.instance.matchCoolDownTime=Math.round((B.instance.matchDto.nowTime-B.instance.matchDto.startTime)/1e3),this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):(B.instance.matchCoolDownTime=Math.round(B.instance.matchDto.remainderCd/1e3),B.instance.matchCoolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):Laya.timer.clear(this,this.onSetCoolTime))}onSetCoolTime(){B.instance.matchDto.arenaType==ee.ARENA_TYPE_PVE?(this.fontClip_reduceTime.value=fe.format(B.instance.matchCoolDownTime,":",!1),this.fontClip_reduceTime.skin="res/match1/fontClip_1.png",B.instance.stopAll||B.instance.matchCoolDownTime++):B.instance.matchCoolDownTime>=0?(this.fontClip_reduceTime.value=fe.format(B.instance.matchCoolDownTime,":",!1),B.instance.matchCoolDownTime>90?this.fontClip_reduceTime.skin="res/match1/fontClip_1.png":B.instance.matchCoolDownTime>10?this.fontClip_reduceTime.skin="res/match1/fontClip_2.png":(this.fontClip_reduceTime.skin="res/match1/fontClip_3.png",this.scaleEffect()),B.instance.stopAll||B.instance.matchCoolDownTime--):(Laya.timer.clear(this,this.onSetCoolTime),Laya.timer.once(1e4,this,this.checkMatchRankData))}checkMatchRankData(){B.instance.checkMatchRankData()}scaleEffect(){var e=this;Laya.Tween.to(this.fontClip_reduceTime,{scaleX:1.3,scaleY:1.3},200,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){Laya.Tween.to(e.fontClip_reduceTime,{scaleX:1,scaleY:1},200,Laya.Ease.linearInOut)}))}updateCharactersOrder(){q.instance.allOrders.sort((e,i)=>e.y-i.y);for(let e=0;e<q.instance.allOrders.length;e++)q.instance.allOrders[e].zOrder=e;po.instance.update()}onFirstBloodPush(e){var i=e.pid,n=q.instance.matchHeroDic.get(i);let r=n.icon;this.playerIcon_first.headSkin=r,this.img_firstBlood.visible=!0,this.img_firstBlood.alpha=0,this.img_firstBlood.y=-200,Laya.Tween.to(this.img_firstBlood,{y:92,alpha:1},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onFirstBlood1))}onFirstBlood1(){this.zi_firstBlood.scale(1,1),Laya.Tween.to(this.zi_firstBlood,{scaleX:1.5,scaleY:1.5},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onFirstBlood2))}onFirstBlood2(){Laya.Tween.to(this.zi_firstBlood,{scaleX:1,scaleY:1},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onFirstBlood3))}onFirstBlood3(){Laya.Tween.to(this.img_firstBlood,{y:-200,alpha:0},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onFirstBlood4),1500)}onFirstBlood4(){this.img_firstBlood.visible=!1}onMutiKillPush(e){this.fontClip_kill.value=e.kill+"";var i=!1;e.kill>=3?(i=!0,this.img_mutiKill.skin="res/match1/img_kill_3s.png"):this.img_mutiKill.skin="res/match1/img_kill_2s.png";var n=e.pid,r=q.instance.matchHeroDic.get(n);let s=r.icon;this.playerIcon_second.headSkin=s,this.img_mutiKill.visible=!0,this.img_mutiKill.alpha=0,this.img_mutiKill.y=-200,Laya.Tween.to(this.img_mutiKill,{y:175,alpha:1},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onMutiKill1,[i]))}onMutiKill1(e){this.zi_mutiKill.scale(1,1),e?Laya.Tween.to(this.zi_mutiKill,{scaleX:1.5,scaleY:1.5},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onMutiKill2)):this.onMutiKill3(2e3)}onMutiKill2(){Laya.Tween.to(this.zi_mutiKill,{scaleX:1,scaleY:1},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onMutiKill3,[1500]))}onMutiKill3(e){Laya.Tween.to(this.img_mutiKill,{y:-200,alpha:0},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onMutiKill4),e)}onMutiKill4(){this.img_mutiKill.visible=!1}onGameSceneGray(){this.matchBox.gray=!0}onBanAccountClick(){O.intance.openModule(L.BanAccountView)}async onExitClick(){var e=B.instance.matchWatcher;e?await w.requestPost("wxgame/room/leave",{roomId:B.instance.matchDto.roomId})?(gt.instance.isMatching=!1,this.setToAirdropScene()):C.instance.notice(p.instance.getLanguage(135)):console.log("不是观察者，不能退出")}setToAirdropScene(){q.instance.arenaType=B.instance.matchDto.arenaType,q.instance.arenaType==ee.ARENA_TYPE_PVE?ge.intance.setCurrentScene(ae.M_SCENE_PVE):ge.intance.setCurrentScene(ae.M_SCENE_AIRDROP)}onEnable(){console.log("MatchScene onEnable"),_.intance.on(b.UPDATE_KILL_NUM,this,this.updateKill),_.intance.on(b.EVENT_RESTORE_DATA,this,this.onRestoreData),_.intance.on(b.EVENT_FirstBlood,this,this.onFirstBloodPush),_.intance.on(b.EVENT_MutiKill,this,this.onMutiKillPush),_.intance.on(b.EVENT_GameScene_Gray,this,this.onGameSceneGray),Laya.stage.on(Laya.Event.FOCUS,this,this.onWindowFocus)}onWindowFocus(){q.instance.sendRestoreData()}onDisable(){_.intance.off(b.UPDATE_KILL_NUM,this,this.updateKill),_.intance.off(b.EVENT_RESTORE_DATA,this,this.onRestoreData),_.intance.off(b.EVENT_FirstBlood,this,this.onFirstBloodPush),_.intance.off(b.EVENT_MutiKill,this,this.onMutiKillPush),_.intance.off(b.EVENT_GameScene_Gray,this,this.onGameSceneGray),Laya.stage.off(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.timer.clearAll(this),B.instance.clearData()}};vv=d([LN("sX0uLhOQSmm8b-_sHNqe5w")],vv);var{regClass:vN,property:w4e}=Laya,Hu=class extends Laya.Script{constructor(){super()}onAwake(){}onStart(){q.instance.playMusic()}onLateUpdate(){q.instance.moveGameWindow()}onDisable(){Laya.timer.clearAll(this)}};Hu=d([vN("Ply19emtSrqrBk7nHXToAQ")],Hu);var xv=class extends Laya.Box{};var{regClass:xN}=Laya,Iv=class extends xv{constructor(){super();this.isBig=!1;this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.skillItem=e,this.skillItem&&(this.txt_num.text="",this.img_icon.skin=M.instance.getMatchSkillIcon(this.skillItem.icon))}};Iv=d([xN("iwuFUCOEQRyOjxpy6IkQ2Q")],Iv);var Ev=class extends Laya.Button{};var{regClass:IN}=Laya,wv=class extends Ev{constructor(){super();this.isAddEvent=!1;this.isCanClick=!0;this.skillCooldown=5e3;this.thisGlobalCooldown=1e4;this.globalCooldown=1e4;this.remainingSkillCooldown=0;this.remainingGlobalCooldown=0;this.reduceCooldown=0}onEnable(){this.addEvent()}addEvent(){this.isAddEvent||(_.intance.on(b.EVENT_CLICK_NUM,this,this.onNumberClick),_.intance.on(b.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),_.intance.on(b.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),_.intance.on(b.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),this.isAddEvent=!0,this.on(Laya.Event.CLICK,this,this.onSkillButtonClick),this.on(Laya.Event.MOUSE_UP,this,this.onSkillButtonUp))}onNumberClick(e){e==this.keyNum&&this.onSkillButtonClick(null)}set dataSource(e){super.dataSource=e,this.skillItem=e[0],this.itemItem=e[1],this.equipPos=e[2],this.count=e[3],this.skillItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.skillItem&&(this.skillIconItem.isBig=this.skillItem.icon=="1001",this.skillIconItem.dataSource=this.skillItem,this.itemItem?(this.txt_num.visible=!0,this.updateCount(),this.skillCooldown=this.itemItem.cd*1e3):(this.txt_num.visible=!1,this.skillCooldown=this.skillItem.cd),this.thisGlobalCooldown=this.skillItem.commCd,Laya.timer.frameLoop(1,this,this.updateCooldown))}onSkillButtonUp(e){e&&e.stopPropagation(),Vn.clearClickFilter(this)}onSkillButtonClick(e){e&&e.stopPropagation();return;if(this.itemItem)if(this.remainingSkillCooldown+this.reduceCooldown<=0){if(console.log("道具技能释放！"),xt.instance.selfSnack._isDead){console.log("自己已死亡，无法释放道具技能！");return}Laya.Tween.to(this,{scaleX:.8,scaleY:.8},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1},100,Laya.Ease.linearNone)}));var i;this.skillItem.type==6||this.skillItem.type==7?q.instance.onSendUse(!0,this.equipPos):q.instance.onSendUse(!1,this.equipPos)}else console.log("技能或全局冷却还在进行中，无法释放。");else this.remainingSkillCooldown+this.reduceCooldown<=0&&this.remainingGlobalCooldown+this.reduceCooldown<=0?(console.log("技能释放！"),Laya.Tween.to(this,{scaleX:.8,scaleY:.8},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1},100,Laya.Ease.linearNone)})),xt.instance.selfSnack.attack(0,this.skillItem.id),this.updateSkillCooldown(this.skillCooldown),_.intance.event(b.EVENT_UPDATE_GLOBAL_COOL,[this.thisGlobalCooldown])):console.log("技能或全局冷却还在进行中，无法释放。")}updateSkillCooldown(e){this.remainingSkillCooldown=e}updateItemRemainCooldown(e){var i=e[0];console.log("updateItemRemainCooldown _skillId: "+i),this.itemItem&&i==this.skillItem.id&&(this.count=e[1],this.updateCount(),this.updateSkillCooldown(this.skillCooldown))}updateCount(){this.txt_num.text=this.count+"",this.disabled=!this.count}updateReduceCooldown(e,i){console.log("updateReduceCooldown skillType: "+e),this.skillItem&&e==this.skillItem.type&&(this.reduceCooldown=this.skillCooldown*i)}updateGlobalCooldown(e){this.itemItem||(this.globalCooldown=e,this.remainingGlobalCooldown=e)}updateCooldown(){if(this.remainingSkillCooldown+this.reduceCooldown>0){this.remainingSkillCooldown-=Laya.timer.delta;let e=(this.remainingSkillCooldown+this.reduceCooldown)/1e3;this.txt_time.text=e.toFixed(1),this.updateCooldownMask(this.skillCooldownMask,(this.remainingSkillCooldown+this.reduceCooldown)/this.skillCooldown,"#000000"),this.img_djs.visible=!0,this.txt_time.visible=!0}else this.img_djs.visible=!1,this.txt_time.visible=!1;this.remainingGlobalCooldown+this.reduceCooldown>0?(this.remainingGlobalCooldown-=Laya.timer.delta,this.updateCooldownMask(this.globalCooldownMask,(this.remainingGlobalCooldown+this.reduceCooldown)/this.globalCooldown,"#00000036"),this.globalCooldownMask.visible=!0):this.globalCooldownMask.visible=!1,this.skillIconItem.gray=this.remainingSkillCooldown+this.reduceCooldown>0||this.remainingGlobalCooldown+this.reduceCooldown>0}updateCooldownMask(e,i,n){let r=this.width/2,s=this.width/2,o=this.height/2;e.graphics.clear(),e.graphics.drawPie(s,o,r,-90+360*(1-i),270,n)}onDisable(){_.intance.off(b.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),_.intance.off(b.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),_.intance.off(b.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),_.intance.offAllCaller(this),Laya.timer.clearAll(this)}};wv=d([IN("x6t-z1VuR52yXWju0qxGBg")],wv);var Tv=class extends Laya.Box{};var{regClass:EN}=Laya,Cv=class extends Tv{constructor(){super(...arguments);this.isReady=!1;this.isGo=!1;this.target=null;this.isMe=!1;this.itemPos=0;this.gravity=.5;this.time=0}onEnable(){this.sk.on(Laya.Event.READY,this,this.onSkReady)}onSkReady(){console.log("RocketSpr onSkReady, this.isGo: ",this.isGo),this.isReady=!0,this.isGo==!1&&(this.initRocket(),this.calculateVelocity())}init(e,i,n,r,s){console.log("RocketSpr init, _isMe: ",s,e,this.isReady,this.x,this.y),this.startX=i,this.startY=n,this.target=r,this.isMe=s,this.itemPos=e,this.time=0,this.sk.rotation=270,this.pos(this.startX,this.startY),console.log("RocketSpr init, this.x, this.y: ",this.x,this.y),this.isReady?(this.isGo=!0,this.initRocket(),this.calculateVelocity()):this.isGo=!1}initRocket(){this.sk.play("animation1",!0,!0),Laya.timer.frameLoop(1,this,this.update)}calculateVelocity(){var e,i;this.target?(e=this.target.x,i=this.target.y):(e=this.startX-200,i=this.startY);let n=e-this.startX,r=i-this.startY,s=120;this.vx=n/s,this.vy=(r-.5*this.gravity*s*s)/s}update(){this.time+=1,this.updateTarget(),this.x=this.startX+this.vx*this.time,this.y=this.startY+this.vy*this.time+.5*this.gravity*this.time*this.time,this.updateRotation();var e,i;this.target?(e=this.target.x,i=this.target.y):(e=this.startX-200,i=this.startY),Math.abs(this.x-e)<10&&Math.abs(this.y-i)<10&&this.hitTarget()}updateTarget(){var e,i;this.target?(e=this.target.x,i=this.target.y):(e=this.startX-200,i=this.startY);let n=e-this.startX,r=i-this.startY,s=60;this.vx=n/s,this.vy=(r-.5*this.gravity*s*s)/s}updateRotation(){var e,i;this.target?(e=this.target.x,i=this.target.y):(e=this.startX-200,i=this.startY);let n=Math.atan2(i-this.y,e-this.x);this.sk.rotation=n*(180/Math.PI)}hitTarget(){console.log("Rocket hit the target!"),Laya.timer.clear(this,this.update),this.onRealAttack(),this.playExplosion()}playExplosion(){this.sk.play("animation2",!1,!0),Laya.timer.once(1e3,this,()=>{this.removeSelf()})}onRealAttack(){this.isMe&&this.target&&q.instance.onSendAttackBig(this.itemPos,[this.target.roomPlayerDto.id])}onDisable(){console.log("RocketSpr onDisable!"),Laya.timer.clearAll(this),Laya.Pool.recover("rocketSpr",this),this.target=null}};Cv=d([EN("Fa_gpkaEQ3yUIurydSEtrw")],Cv);var Sv=class extends Laya.Dialog{};var{regClass:wN}=Laya,Dv=class extends Sv{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink)}onLink(e){console.log("点击了超链接："+e)}onRefresh(){$e.instance.reload()}setOpenData(e){if(e){var i=e[0];if(e.length>2?(this.alertTitle.text=e[1],this.alertDesc.text=e[2]):this.alertDesc.text=e[1],i==1){this.canClose=!1;var n=this.getChildByName("close");n.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1;this.alertDesc.height=this.alertDesc.textField.textHeight+20}}onDisable(){}close(e){this.canClose&&super.close(e)}};Dv=d([wN("xATCTfSDSkaGtuYn669ofQ")],Dv);var kv=class extends Laya.Dialog{};var{regClass:TN}=Laya,Av=class extends kv{constructor(){super()}onEnable(){this.img_show.on(Laya.Event.CLICK,this,this.close)}setOpenData(t){t&&(this.img_show.skin=t)}onDisable(){}};Av=d([TN("RUMV5hpfRdCRzhO9yBDCzg")],Av);var Mv=class extends Laya.Dialog{};var{regClass:CN}=Laya,Bv=class extends Mv{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink),this.btn_left.on(Laya.Event.CLICK,this,this.onChangePage,[!1]),this.btn_right.on(Laya.Event.CLICK,this,this.onChangePage,[!0])}onLink(e){console.log("点击了超链接："+e)}onRefresh(){$e.instance.reload()}setOpenData(e){if(e){var i=e[0],n=e[1];if(this.list=n.list,this.pageNo=1,this.pageTotal=this.list.length,this.pageTotal<2&&(this.box_page.visible=!1),this.updatePageList(),i==1){this.canClose=!1;var r=this.getChildByName("close");r.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1}}async onChangePage(e){if(e)this.pageNo++;else{if(this.pageNo<=1)return;this.pageNo--}this.updatePageList()}updatePageList(){this.txt_page.text=this.pageNo+"/"+this.pageTotal,this.btn_left.disabled=this.pageNo<=1,this.btn_right.disabled=this.pageNo>=this.pageTotal,this.setNoticeDetail()}setNoticeDetail(){if(this.pageNo){var e=this.list[this.pageNo-1];e&&(this.alertTitle.text=p.instance.getMultiLan(e.title),this.alertDesc.text=p.instance.getMultiLan(e.contents))}}onDisable(){}close(e){this.canClose&&super.close(e)}};Bv=d([CN("iB7UvqEcQ1GFKaVEIy6Bmw")],Bv);var Rv=class extends Laya.Box{};var{regClass:SN}=Laya,Pv=class extends Rv{};Pv=d([SN("ON5bkSuKSE2gwPDUnRGmrw")],Pv);var Nv=class extends Laya.Box{};var{regClass:DN}=Laya,Ov=class extends Nv{onEnable(){}notice(t){this.zOrder=1e7;let e=t;this.label_tf.text=e,this.label_tf.x=68,this.image_bg.width=68*2+this.label_tf.textField.textWidth,e.length/45>1&&(this.image_bg.height=this.label_tf.textField.textHeight+55),this.alpha=1,this.visible=!0}get view(){return this}get width(){return this.image_bg.width}onDisable(){console.log("txtNotice recover"),Laya.Pool.recover("txtNotice",this)}};Ov=d([DN("Nm27xWbYSG6mj-EXqPOZ_A")],Ov);var Hv=class extends Laya.Dialog{};var{regClass:kN}=Laya,Uv=class extends Hv{constructor(e){super();this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.propValue=1;this.propNum=1;this.propData=null;this.heroPk=null;this.chooseType=1;this.subType=1;this.items=[]}onEnable(){this.txt_num.text="1",this.listPanel1.visible=!1,this.btn_subtract.on(Laya.Event.CLICK,this,this.changePropNum,[!1]),this.btn_add.on(Laya.Event.CLICK,this,this.changePropNum,[!0]),this.listPanel1.selectHandler=new Laya.Handler(this,this.handleSelectProp),this.btn_transfer.on(Laya.Event.CLICK,this,this.onBtnTramsfer),_.intance.on(b.SHOW_EQUIP_TIP,this,this.showEquipTip),this.initPropList()}setOpenData(e){e&&(this.chooseType=e[0],this.subType=e[1],this.chooseType==rt.CHOOSE_Wallet?(this.btn_transfer.label=p.instance.getUILang("Transfer in"),this.box_count.visible=!0,this.tf_title.text=p.instance.getUILang("Select tickets")):(this.heroPk=e[2],this.btn_transfer.label=p.instance.getUILang("Put on"),this.box_count.visible=!1,this.tf_title.text=p.instance.getUILang("Select equipment")))}changePropNum(e){e?this.propValue+=1:this.propValue=Math.max(this.propValue-1,1),this.txt_num.text=`${this.propValue}`}async initPropList(){await Qt.instance.ownerBag();var e=this.getItemByType();this.propData=e,this.listPanel1.array=e,this.listPanel1.selectedIndex=0,this.listPanel1.visible=!0}handleSelectProp(e){if(e!==-1){this.propValue=1,this.txt_num.text="1";let i=this.listPanel1.selectedItem;i&&(this.propNum=Number(i._m_iNum),console.log(this.propNum))}}showEquipTip(e){if(this.chooseType!==rt.CHOOSE_Wallet){let i=e.data;this.EquipDetailBox.dataSource=i,e.positionX<500?this.EquipDetailBox.x=e.positionX+175:this.EquipDetailBox.x=e.positionX-440,this.EquipDetailBox.visible=!0,this.equipBgBox.visible=!0,this.equipBgBox.on(Laya.Event.CLICK,this,this.hideTips)}}hideTips(){this.EquipDetailBox.visible=!1,this.equipBgBox.visible=!1,this.equipBgBox.off(Laya.Event.CLICK,this,this.hideTips)}async onBtnTramsfer(){let e=this.propData[this.listPanel1.selectedIndex],i=this.propValue,n={amount:this.propValue,propData:e};_.intance.event(b.EVENT_PVE_CHOOSE_PROP,n),this.close()}getItemByType(){this.items=[];let e=I.intance.getArrFromDicItemByKey("subType",12),i=I.intance.getArrFromDicItemByKey("id",1086);return console.log("skillItem",e,"ticketItem",i),[...i,...e].forEach(r=>{var s=new Xe(r.id);s.newAddCnt=1,this.items.push(s)}),this.items}onDisable(){this.btn_subtract.off(Laya.Event.CLICK,this,this.changePropNum),this.btn_add.off(Laya.Event.CLICK,this,this.changePropNum),this.btn_transfer.off(Laya.Event.CLICK,this,this.onBtnTramsfer),this.stage.off(Laya.Event.CLICK,this,this.hideTips),_.intance.off(b.SHOW_EQUIP_TIP,this,this.showEquipTip)}};Uv=d([kN("aFkC9qlwTMKGR-gqNwAz2g")],Uv);var Fv=class extends Laya.Box{};var{regClass:AN}=Laya,Vv=class extends Fv{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_record.on(Laya.Event.CLICK,this,this.onBtnRecord)}set dataSource(e){if(!e)return;this.playerData=e,super.dataSource=e;let i=e.id===v.instance.playerDto.pid,n=e.rank;if(this.tf_name.text=e.name,this.tf_union.text=p.instance.getMultiLan(e.shortUnionName),this.tf_rank.text=n,this.tf_time.text=fe.formatWithSecondByMs(e.score),this.playerIcon.headSkin=e.head,e.address?(this.fromBox.visible=!0,this.address=e.address,this.tf_from.text=`${ce.shortenString(e.address,7,4)}`):this.fromBox.visible=!1,this.img_flag.skin=M.instance.getCountryIcon(e.country),e.icon){let r=M.instance.getUnionIcon(e.icon);this.img_lvIcon.skin=r,this.img_lvIcon.visible=!0}else this.img_lvIcon.visible=!1;i?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.bg.skin=n<4?`res/rank/img_guild_${n}di.png`:"res/rank/img_guild_4di.png",n<4?(this.img_rankIcon1.skin=`res/matchRank1/img_ranking_${n}.png`,this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.img_rankIcon2.skin=i?"res/matchRank1/img_ranking_ranking_me.png":"res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1)}onCopy(){let e=this.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}onBtnRecord(){this.playerData&&O.intance.openModule(L.PveRecordView,this.playerData)}};Vv=d([AN("KfnrNdUwRnGbP3mPsVczIw")],Vv);var Gv=class extends Laya.Box{};var{regClass:MN}=Laya,Wv=class extends Gv{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent}set dataSource(e){super.dataSource=e,e&&(this.recordItem=e,this.tf_day.text=fe.formatTimeStamps(this.recordItem.time,"YY-MT-DD HH:MM:SS"),this.tf_rank.text=`${this.recordItem.rank}`,this.tf_duration.text=fe.formatWithSecondByMs(this.recordItem.duration),this.addEvent())}onDisable(){this.removeEvent()}removeEvent(){}};Wv=d([MN("5A7gBlSZRCiXSZqpLgERgg")],Wv);var jv=class extends Laya.Dialog{};var zv=class extends Laya.Dialog{};var{regClass:BN}=Laya,hn=class extends zv{constructor(e){super();this.itemIndex=-1;this.heroList=[];this.useHeroList=[];this.chooseType=0}onEnable(){console.log(v.instance.playerDto.fightHeroPk),this.list_hero.visible=!1,this.createHeadList(),this.btn_transfer.on(Laya.Event.CLICK,this,this.onBtnTramsfer)}async setOpenData(e){this.itemIndex=e[0],this.useHeroList=e[1],this.chooseType=e[2],this.chooseType==hn.ChooseType_Pve_Exp&&(this.btn_transfer.label=p.instance.getLanguage(1037))}async onBtnTramsfer(){let e=this.list_hero.selectedIndex;if(e<0){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1167),W.YES);return}let i=this.heroList[e];if(this.chooseType==hn.ChooseType_Pve_Exp){if(We.instance.inMinWaiting){C.instance.notice(p.instance.getLanguage(1187));return}let n=i.newFightFlag==1?1:0,r=await w.requestPost("wxgame/hero/heroFight",{pk:i.pk,type:n});r?(r.type==1?v.instance.playerDto.newFightHeroPk=r.pk:v.instance.playerDto.fightHeroPk=r.pk,_.intance.event(b.CHANGE_PVE_EXP_HERO),this.close()):C.instance.notice(p.instance.getLanguage(135))}else this.itemIndex!==-1?_.intance.event(b.CHANGE_WALLET_HERO_AIR,[i,this.itemIndex]):_.intance.event(b.CHANGE_WALLET_HERO,i),console.log("onBtnTramsfer",e),this.close()}async createHeadList(){if(!this)return;await Qt.instance.ownerHero();let e=v.instance.m_heroData.heroVoDic.values;if(this.chooseType==hn.ChooseType_Pve_Exp?this.heroList=ce.filterPVEExpHerosByState(e,0,this.useHeroList):this.heroList=ce.filterObjectsByState(e,0,this.useHeroList),this.heroList.sort((i,n)=>{if(i===null&&n!==null)return 1;if(i!==null&&n===null)return-1;if(i!==null&&n!==null){if(i.heroItem.quality!==n.heroItem.quality)return n.heroItem.quality-i.heroItem.quality;if(i.heroItem.icon===null&&n.heroItem.icon!==null)return 1;if(i.heroItem.icon!==null&&n.heroItem.icon===null)return-1;if(i.heroItem.icon!==n.heroItem.icon)return i.heroItem.icon<n.heroItem.icon?-1:1}return 0}),this.heroList){this.list_hero.array=this.heroList,this.list_hero.visible=!0;let i=-1;this.list_hero.selectedIndex=i}}onDisable(){this.btn_transfer.off(Laya.Event.CLICK,this,this.onBtnTramsfer)}};hn.ChooseType_Pve_Exp=3,hn=d([BN("8aIFsnkXTaWPXwTKHxCGpQ")],hn);var Kv=class extends Laya.Scene{};var{regClass:RN}=Laya,ba=class extends Kv{constructor(){super(...arguments);this.currTab=0;this.nodeId=-1;this.pageIndex=1;this.nodeIds=[];this.nodeDatas=[];this.pageSize=20;this.scrolLock=!0;this.countryId=999;this.itemId=0;this.arenaId=0;this.ticketTypeDatas=[]}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}async onOpened(e){}onEnable(){ba.isExp=!1,this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.box_node.on(Laya.Event.CLICK,this,this.onOpenNode),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),_.intance.on(b.EVENT_CHECK_NODE_SELECT,this,this.onNodeSelected),_.intance.on(b.CHANGE_PVE_EXP_HERO,this,this.initHeroData),this.initNode(),this.initCityNodeCombo(),this.rankLanList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange);for(let i=1;i<6;i++)this["btn_"+i].on(Laya.Event.CLICK,this,this.onClickTab,[i]);this.onClickTab(1),this.dayNode=this.dayBox.getChildByName("tf_time"),this.hourNode=this.hourBox.getChildByName("tf_time"),this.minNode=this.minBox.getChildByName("tf_time"),this.secNode=this.secBox.getChildByName("tf_time"),this.msNode=this.msBox.getChildByName("tf_time"),this.initTicketCombo(),this.rankRewardList.array=null,this.rankLanList.visible=!1,this.challenge_room.visible=!1,Laya.LocalStorage.getItem(ie.COOKIE_CF_LAN)=="zh"?this.tf_myTeamNum.text='美東時間 2024年11月5日<font color="#fff088">7</font>點':this.tf_myTeamNum.text='Eastern Timer,November 5,2024,<font color="#fff088">7:00</font>AM',this.initCountry(),Laya.timer.loop(1e3,this,this.refreshRoomBtnRed)}onOpenNode(){this.img_node_pad.visible==!1&&(this.img_node_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideNode))}onListDown(e){e.stopPropagation()}initNode(){this.list_node.selectHandler=new Laya.Handler(this,this.handleSelectNode),this.createNodeList(),this.btn_trump.on(Laya.Event.CLICK,this,this.onBtnTrump),this.btn_selectOther.on(Laya.Event.CLICK,this,this.onSelectOther),this.btn_ticket.on(Laya.Event.CLICK,this,this.onBtnTicket),this.btn_challenge.on(Laya.Event.CLICK,this,this.onBtnChallenge),this.box_node.on(Laya.Event.CLICK,this,this.onOpenNode),this.list_node.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_node.mouseHandler=Laya.Handler.create(this,this.onNodeItemMouse,null,!1),this.list_node.renderHandler=Laya.Handler.create(this,this.onNodeItemRender,null,!1),this.list_node.scrollBar&&this.list_node.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}initCityNodeCombo(){this.nodeIds=[];var e=I.intance.m_dicNodes.values;this.nodeDatas=[],e.forEach(i=>{this.nodeIds.push(i.id),this.nodeDatas.push([i.id,!0,i])}),this.list_node_city.array=this.nodeDatas}onNodeSelected(){this.nodeIds=[],this.nodeDatas.forEach(e=>{e[1]&&this.nodeIds.push(e[0])}),console.log("您选中了 nodeType"+this.nodeIds),this.initRoomListData(),this.getRoomByType()}async getRoomByType(){}onNodeItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_node.selectedIndex=i,this.onHideNode())}onNodeItemRender(e,i){e.onChange(this.list_node.selectedIndex==i)}onScrollBarDown(e){e.stopPropagation()}handleSelectNode(e){if(console.log("handleSelectNode: "+e),e!=-1){let i=this.list_node.selectedItem;this.nodeId=i.id,this.img_node.skin=M.instance.getNodeIcon(i.area),this.tf_node_name.text=p.instance.getLanguage(i.name),this.nodeDelaySign.dataSource=i}}onHideNode(){this.img_node_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideNode),this.img_bg.off(Laya.Event.MOUSE_DOWN,this,this.onHideNode)}createNodeList(){let e=I.intance.m_dicNodes;this.list_node.array=e.values,this.list_node.visible=!0;let i=-1,n=0;if(e.values.length>0&&(i=0),this.roomDto)for(let r of e.values){if(r.id==this.roomDto.nodeId){i=n;break}n++}this.list_node.selectedIndex=i}setTab(e){this.currTab=e;for(let i=1;i<6;i++)if(e==i){this["btn_"+i].getChildByName("btn_yellowBg").visible=!0;let n=this["box_"+i];i==4&&(n=this.box_3),n&&(n.visible=!0),this["btn_"+i].getChildByName("Label").color="#143268"}else{this["btn_"+i].getChildByName("btn_yellowBg").visible=!1,this["btn_"+i].getChildByName("Label").color="#ffffff";let n=this["box_"+i];n&&(n.visible=!1)}}onClickTab(e){this.currTab!=e&&(this.setTab(e),Laya.timer.clear(this,this.refreshTime),Laya.timer.clear(this,this.initRoomListData),Laya.timer.clear(this,this.refreshRoomTime),this.box_country.visible=!1,e==1||(e==2?(this.initRoomListData(),Laya.timer.loop(5e3,this,this.initRoomListData),Laya.timer.loop(1e3,this,this.refreshRoomTime)):e==3?(this.pageIndex=1,this.getRankData(!1),this.box_country.visible=!0,this.rankLanList.scrollTo(0)):e==4?(this.pageIndex=1,this.getRankData(!0),this.box_country.visible=!0,this.rankLanList.scrollTo(0)):e==5&&this.getRewardRankData()))}initHeroData(){let e=v.instance.playerDto;this.itemId==rt.ITEM_PT?(this.fightHero=this.getFightHeroData(e.fightHeroPk),this.btn_trump.visible=!0,this.btn_selectOther.visible=!1):this.itemId==rt.ITEM_PT_EXP&&(this.fightHero=this.getFightHeroData(e.newFightHeroPk),this.btn_trump.visible=!1,this.btn_selectOther.visible=!0),this.fightHero?(this.img_hero.visible=!0,this.img_hero.skin=this.fightHero.simgurl,this.tf_heroName.text=qe.shortHeroStr(this.fightHero.name)):(this.img_hero.visible=!1,this.tf_heroName.text="無"),console.log(this.fightHero)}getFightHeroData(e){let i=v.instance.m_heroData.heroVoDic.values;for(let n=0;n<i.length;n++)if(e==i[n].pk)return i[n]}onSelectOther(){console.log("onSelectOther");var e=[];this.fightHero&&(e=[this.fightHero.pk]),O.intance.openModule(L.WalletChooseHeroDialog,[-1,e,hn.ChooseType_Pve_Exp])}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}onBtnTrump(){ge.intance.setCurrentScene(ae.M_SCENE_SHOP,[6])}onBtnTicket(){ge.intance.setCurrentScene(ae.M_SCENE_SHOP,[2,5])}async onBtnChallenge(){if(!this.fightHero){C.instance.notice(p.instance.getLanguage(1687));return}console.log(this.fightHero.pk,this.nodeId),this.btn_challenge.disabled=!0,w.requestPost("wxgame/pve/create",{nodeId:this.nodeId,heroPk:this.fightHero.pk,newFight:this.fightHero.newFightFlag,arenaId:this.arenaId}).then(e=>{this.destroyed||(e?(e.roomDto&&(B.instance.roomDto=e.roomDto),e.roomDto?(gt.instance.initSocket(),Laya.timer.once(5e3,this,this.restoreChallengeBtn)):(C.instance.notice(p.instance.getLanguage(135)),this.restoreChallengeBtn())):this.restoreChallengeBtn())}).catch(e=>{this.restoreChallengeBtn()})}restoreChallengeBtn(){this.btn_challenge.disabled=!1}openTimeMechain(){Laya.timer.loop(30,this,this.refreshTime)}refreshTime(){let e=fe.getTimeDifference(173079e4,Va.DAYS);this.dayNode&&(this.dayNode.text=`${e.days}`),this.hourNode&&(this.hourNode.text=`${e.hours}`),this.minNode&&(this.minNode.text=`${e.minutes}`),this.secNode&&(this.secNode.text=`${e.seconds}`),this.msNode&&(this.msNode.text=`${e.ms}`)}async initRoomListData(){let e=await w.requestPost("wxgame/pve/list",{nodeIds:this.nodeIds});e&&(this.challenge_room.array=e.roomList,this.challenge_room.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0,this.challenge_room.visible=!0)}refreshRoomTime(){let e=this.challenge_room.array;if(!(!e||e.length<1)){for(let i=0;i<e.length;i++)if(e[i]){let n=e[i];n.startTimeDiff+=1e3}this.challenge_room.refresh()}}async getRewardRankData(){let e=await w.requestPost("wxgame/pve/pveLuckUsdt",{});console.log(e),e&&(this.rankRewardList.array=e.rankList,this.rankRewardList.visible=!0)}async getRankData(e=!1){ba.isExp=e;let i;this.countryId==999?i=await w.requestPost("wxgame/pve/rank",{pageSize:this.pageSize,pageNum:this.pageIndex,exp:ba.isExp}):i=await w.requestPost("wxgame/pve/rank",{pageSize:this.pageSize,pageNum:this.pageIndex,exp:ba.isExp,country:this.countryId}),console.log(i),i&&(this.rankLanList.array=i.rankList,this.rankLanList.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let e;if(this.countryId==999?e=await w.requestPost("wxgame/pve/rank",{pageSize:this.pageSize,pageNum:this.pageIndex,exp:ba.isExp}):e=await w.requestPost("wxgame/pve/rank",{pageSize:this.pageSize,pageNum:this.pageIndex,exp:ba.isExp,country:this.countryId}),console.log(e),e){this.scrolLock=!0;let i=e.rankList;this.rankLanList.array.push(...i),this.rankLanList.array=this.rankLanList.array,Laya.timer.clear(this,this.refreshLock)}}}onScrollBarChange(){this.rankLanList.scrollBar.value>=this.rankLanList.scrollBar.max&&this.loadMoreData()}refreshLock(){this.scrolLock=!0,console.log("重置锁")}refreshRoomBtnRed(){this.img_red_2.visible=v.instance.getRedDotById(Ae.instance.ROOM_4_6)}onDisable(){Laya.timer.clear(this,this.refreshLock),Laya.timer.clear(this,this.refreshRoomTime),Laya.timer.clearAll(this),Laya.Tween.clearAll(this),_.intance.off(b.EVENT_CHECK_NODE_SELECT,this,this.onNodeSelected),_.intance.off(b.CHANGE_PVE_EXP_HERO,this,this.initHeroData)}initTicketCombo(){var e=I.intance.getGeneralValueById(32);this.ticketTypeDatas=[],e.forEach(n=>{let r=I.intance.getArrFromDicItemByKey("id",n)[0];this.ticketTypeDatas.push([n,p.instance.getLanguage(r.name)])}),console.log("this.ticketTypeDatas: ",this.ticketTypeDatas),this.ticketCombo.selectHandler=new Laya.Handler(this,this.onSelectedRentalType),this.ticketCombo.dataSource=this.ticketTypeDatas;let i=0;this.ticketCombo.selectedIndex=i}onSelectedRentalType(e){if(e!=-1){this.itemId=this.ticketTypeDatas[e][0];var i=ee.ARENA_TYPE_PVE;let n=I.intance.getArenaTypesInSubByItemId(i,this.itemId);n&&(this.arenaId=n.id,this.initHeroData())}}onCountryItemRender(e,i){e.onChange(this.list_country.selectedIndex==i)}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}createCountryList(){let e=I.intance.m_dicCountry,n=[{id:999,name:"All"},...e.values];this.list_country.array=n,this.list_country.visible=!0;let r=-1,s=0;this.countryId=999;for(let o of n){if(o.id==this.countryId){r=s;break}s++}this.list_country.selectedIndex=r}handleSelectCountry(e){if(console.log("handleSelectCountry: "+e),e!=-1){let i=this.list_country.selectedItem;this.countryId=i.id,i.id==999?(this.img_flag.visible=!1,this.tf_country.text=p.instance.getLanguage(i.name)):(this.img_flag.visible=!0,this.img_flag.skin=M.instance.getCountryIcon(i.id),this.tf_country.text=p.instance.getLanguage(i.name)),this.currTab==3?(this.pageIndex=1,this.getRankData(!1)):(this.pageIndex=1,this.getRankData(!0))}}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}onCountryItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=i,this.onHideCountry())}};ba.isExp=!0,ba=d([RN("k5ciB37ORFSIRZc17hoKMA")],ba);var{regClass:PN}=Laya,qv=class extends jv{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.pageIndex=1;this.pageSize=20;this.scrolLock=!0;this.useYlp=!1}onEnable(){this.list_recordLog.visible=!1,this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_sponsor.on(Laya.Event.CLICK,this,this.onBtnSponsor),_.intance.on(b.EVENT_PVE_HAVE_PROP,this,this.initPlayerProp),this.list_recordLog.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange),this.listPanel1.visible=!1}setOpenData(e){this.playerData=e,this.initPlayerProp(),this.initRecord()}setPlayerData(){this.btn_sponsor.disabled=v.instance.playerDto.pid==this.playerData.pid,this.tf_name.text=this.playerData.name,this.tf_union.text=p.instance.getMultiLan(this.playerData.shortUnionName),this.btn_sponsor.visible=this.playerData.rank>10&&v.instance.pveOpen!==1&&this.useYlp,this.playerData.address?(this.fromBox.visible=!0,this.tf_from.text=`${ce.shortenString(this.playerData.address,7,4)}`):this.fromBox.visible=!1,this.playerIcon.headSkin=this.playerData.head,this.img_flag.skin=M.instance.getCountryIcon(this.playerData.country)}onCopy(){let e=this.playerData.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.onBack),this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy),this.btn_sponsor.off(Laya.Event.CLICK,this,this.onBtnSponsor),_.intance.off(b.EVENT_PVE_HAVE_PROP,this,this.initPlayerProp),this.list_recordLog.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange)}onBtnSponsor(){O.intance.openModule(L.PveSponsorView,this.playerData)}async initPlayerProp(){let e=await w.requestPost("wxgame/pve/pveChallengeInfo",{id:this.playerData.pid});if(e){this.useYlp=e.useYlp;let i=this.transeToItemVo(e.items);this.listPanel1.array=i,this.listPanel1.visible=!0}this.setPlayerData()}transeToItemVo(e){let i=[];for(let r=0;r<e.length;r++){let s=new Xe;var n=e[r];s.m_iId=n.id,n.pk&&(s.m_iPk=n.pk),s.m_iId=n.id,s.m_iNum=n.count,i.push(s)}return i}async initRecord(){let e=await w.requestPost("wxgame/pve/pveChallengeRecords",{pageSize:this.pageSize,pageNum:this.pageIndex,id:this.playerData.pid,exp:ba.isExp});e&&(this.list_recordLog.array=e.items,this.list_recordLog.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let e=await w.requestPost("wxgame/pve/pveChallengeRecords",{pageSize:this.pageSize,pageNum:this.pageIndex,id:this.playerData.pid});if(console.log(e),e){this.scrolLock=!0;let i=e.items;this.list_recordLog.array.push(...i),this.list_recordLog.array=this.list_recordLog.array,Laya.timer.clear(this,this.refreshLock)}}}onScrollBarChange(){this.listPanel1.scrollBar.value>=this.listPanel1.scrollBar.max&&this.loadMoreData()}refreshLock(){this.scrolLock=!0,console.log("重置锁")}onBack(){this.close()}};qv=d([PN("1CSNzmbcSdu78dCzj1J-hw")],qv);var Yv=class extends Laya.Box{};var{regClass:NN}=Laya,$v=class extends Yv{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}set dataSource(e){if(!e)return;this.playerData=e,super.dataSource=e;let i=e.id===v.instance.playerDto.pid,n=e.rank;if(this.tf_name.text=e.name,this.tf_union.text=p.instance.getMultiLan(e.shortUnionName),this.playerIcon.headSkin=e.head,e.address?(this.fromBox.visible=!0,this.address=e.address,this.tf_from.text=`${ce.shortenString(e.address,7,4)}`):this.fromBox.visible=!1,this.img_flag.skin=M.instance.getCountryIcon(e.country),e.icon){let u=M.instance.getUnionIcon(e.icon);this.img_lvIcon.skin=u,this.img_lvIcon.visible=!0}else this.img_lvIcon.visible=!1;i?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.bg.skin="res/rank/img_guild_4di.png";var r=I.intance.m_dicPveLuckyDraws.get(n);this.tf_rewardName.text=p.instance.getLanguage(r.name);var s=I.intance.m_dicItems.get(r.token),o=p.instance.getLanguage(s.name),l=Pe.formatNumber(r.bonus)+" "+o;this.tf_reward.text=l}onCopy(){let e=this.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}};$v=d([NN("rqW6WvFST-agZW2AS9Jy7A")],$v);var Xv=class extends Laya.Box{};var{regClass:ON}=Laya,Qv=class extends Xv{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||this.btn_watch.on(Laya.Event.CLICK,this,this.onWatch)}onEnable(){}async onWatch(){We.instance.onCreateAndJoinWithPwd(ee.ACTION_WATCH,this.roomDto,"")}async onJoin(){}set dataSource(e){super.dataSource=e,this.roomDto=e,this.roomDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.roomDto.leader.icon;this.playerIcon.headSkin=e,this.tf_name.text=this.roomDto.leader.name;var i=I.intance.m_dicNodes.get(this.roomDto.nodeId);this.nodeDelaySign.dataSource=i,this.tf_seconds.text=fe.format(Math.round(this.roomDto.startTimeDiff/1e3),":",!1),this.tf_union.text=B.instance.setRoomAnonymousLabel(p.instance.getMultiLan(this.roomDto.leader.shortUnionName),this.roomDto.anonymous)}};Qv=d([ON("rDDOphbOQJKQOTPF-QIsAA")],Qv);var Jv=class extends Laya.Dialog{};var{regClass:HN}=Laya,Zv=class extends Jv{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.amount=0}onEnable(){this.listPanel1.visible=!1,this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_confirm.on(Laya.Event.CLICK,this,this.confirmSp),this.btn_prop.on(Laya.Event.CLICK,this,this.onBtnProp),_.intance.on(b.EVENT_PVE_CHOOSE_PROP,this,this.onRefreshProp),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}onOpened(e){}async confirmSp(){let e,i=Be.TYPE_PC;if(!this.propData||this.amount==0)return;let n=this.amount;if(this.propData.itemItem.id==1086){let y=I.intance.m_dicShops.values;e=ce.getShopByGoodsId(y,1086).cost[1],console.log("price",e)}else{let y=I.intance.getGeneralValueById(29);e=y[0][2],i=y[0][1]}let r=v.instance.getConsumeValue(Be.TYPE_PC),s=new Tt(n),o=new Tt(e),l=s.multiply(o).getValue(),u=Number(l),m=I.intance.getArrFromDicItemByKey("id",this.propData.itemItem.id);if(m&&m.length>0){var h=I.intance.getSheetDataByMultiKey(I.intance.m_dicShopMulDic,[6,this.propData.itemItem.id]);console.log(h),r<u?C.instance.notice(p.instance.getLanguage(1686)):await w.requestPost("wxgame/pve/sponsor",{shopId:h.id,num:n,playerId:this.playerData.pid})&&(C.instance.notice(p.instance.getLanguage(1685)),_.intance.event(b.EVENT_PVE_HAVE_PROP),this.close())}}async initPlayerProp(){let e=await w.requestPost("wxgame/pve/pveChallengeInfo",{id:this.playerData.pid});if(e){let i=this.transeToItemVo(e.items);this.listPanel1.array=i,this.listPanel1.visible=!0}}transeToItemVo(e){let i=[];for(let r=0;r<e.length;r++){let s=new Xe;var n=e[r];s.m_iId=n.id,n.pk&&(s.m_iPk=n.pk),s.m_iId=n.id,s.m_iNum=n.count,i.push(s)}return i}onDisable(){this.removeEvent()}removeEvent(){_.intance.off(b.EVENT_PVE_CHOOSE_PROP,this,this.onRefreshProp),this.btn_back.off(Laya.Event.CLICK,this,this.onBack),this.btn_confirm.off(Laya.Event.CLICK,this,this.confirmSp),this.btn_prop.off(Laya.Event.CLICK,this,this.onBtnProp),this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy)}setOpenData(e){this.playerData=e,this.setPlayerData(),this.initPlayerProp()}setPlayerData(){this.tf_name.text=this.playerData.name,this.tf_union.text=p.instance.getMultiLan(this.playerData.shortUnionName),this.playerData.address?(this.fromBox.visible=!0,this.tf_from.text=`${ce.shortenString(this.playerData.address,7,4)}`):this.fromBox.visible=!1,this.playerIcon.headSkin=this.playerData.head,this.img_flag.skin=M.instance.getCountryIcon(this.playerData.country)}onBack(){this.close()}onCopy(){let e=this.playerData.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}onRefreshProp(e){if(console.log("buyData",e),this.propData=null,this.amount=0,e){this.buyPropItem.visible=!0;let i=e.propData;this.propData=e.propData;let n=e.amount;this.txt_num.text=n,this.buyPropItem.dataSource=i,this.img_ticket_bg.visible=!1,this.txt_num.visible=!0,this.amount=e.amount;let r=0;if(i.itemItem.id==1086){let m=I.intance.m_dicShops.values;r=ce.getShopByGoodsId(m,1086).cost[1],console.log("price",r)}else r=I.intance.getGeneralValueById(29)[0][2];let s=new Tt(n),o=new Tt(r),l=s.multiply(o).getValue(),u=Number(l);console.log(`单价${r},总价${u}`),this.tf_price.text=`${u}PT`}}onBtnProp(){O.intance.openModule(L.PveChoosePropsDialog)}};Zv=d([HN("t1ULECejSsWhchCZSP3X-Q")],Zv);var ex=class extends Laya.Box{};var{regClass:UN}=Laya,tx=class extends ex{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}set dataSource(e){if(!e)return;super.dataSource=e;let i=e.id===v.instance.playerDto.pid,n=e.rank;this.tf_name.text=e.name,n<=0?this.tf_rank.text=p.instance.getLanguage(1117):this.tf_rank.text=n,this.playerIcon.headSkin=e.head,e.address?(this.fromBox.visible=!0,this.address=e.address,this.tf_from.text=`${ce.shortenString(e.address,7,4)}`):this.fromBox.visible=!1,this.img_flag.skin=M.instance.getCountryIcon(e.country),this.tf_firstLv.text=e.rem1,this.tf_secondLv.text=e.rem2,this.tf_mnt.text=Pe.filterNumFormat(e.mntTotal,2,!1,!0),this.tf_pc.text=Pe.filterNumFormat(e.pcTotal,2,!1,!0),this.tf_usdt.text=Pe.filterNumFormat(e.usdt,2,!1,!0),i?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.bg.skin=n>0&&n<4?`res/rank/img_guild_${n}di.png`:"res/rank/img_guild_4di.png",n>0&&n<4?(this.img_rankIcon1.skin=`res/matchRank1/img_ranking_${n}.png`,this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.img_rankIcon2.skin=i?"res/matchRank1/img_ranking_ranking_me.png":"res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1)}onCopy(){let e=this.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}};tx=d([UN("b3J8_57WRFO1dNr1CaJVpQ")],tx);var ix=class extends Laya.Box{};var{regClass:FN}=Laya,ax=class extends ix{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}set dataSource(e){if(!e)return;super.dataSource=e;let i=e.id===v.instance.playerDto.pid,n=e.rank;this.tf_name.text=e.name,this.tf_rank.text=n,this.tf_score.text=e.score,this.playerIcon.headSkin=e.head,e.address?(this.fromBox.visible=!0,this.address=e.address,this.tf_from.text=`${ce.shortenString(e.address,7,4)}`):this.fromBox.visible=!1,this.img_flag.skin=M.instance.getCountryIcon(e.country),this.tf_num.text=e.remCount,i?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.bg.skin=n<4?`res/rank/img_guild_${n}di.png`:"res/rank/img_guild_4di.png",n<4?(this.img_rankIcon1.skin=`res/matchRank1/img_ranking_${n}.png`,this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.img_rankIcon2.skin=i?"res/matchRank1/img_ranking_ranking_me.png":"res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1)}onCopy(){let e=this.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}};ax=d([FN("MI-m6q1ITuGLG_8y-2GWUw")],ax);var nx=class extends Laya.Box{};var{regClass:VN}=Laya,rx=class extends nx{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}set dataSource(e){if(!e)return;super.dataSource=e;let i=e.id===v.instance.playerDto.pid,n=e.rank;if(this.tf_name.text=e.name,this.tf_union.text=p.instance.getMultiLan(e.shortUnionName),this.tf_rank.text=n,this.tf_score.text=e.score,this.playerIcon.headSkin=e.head,e.address?(this.fromBox.visible=!0,this.address=e.address,this.tf_from.text=`${ce.shortenString(e.address,7,4)}`):this.fromBox.visible=!1,this.img_flag.skin=M.instance.getCountryIcon(e.country),e.icon){let r=M.instance.getUnionIcon(e.icon);this.img_lvIcon.skin=r,this.img_lvIcon.visible=!0}else this.img_lvIcon.visible=!1;i?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.bg.skin=n<4?`res/rank/img_guild_${n}di.png`:"res/rank/img_guild_4di.png",n<4?(this.img_rankIcon1.skin=`res/matchRank1/img_ranking_${n}.png`,this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.img_rankIcon2.skin=i?"res/matchRank1/img_ranking_ranking_me.png":"res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1)}onCopy(){let e=this.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}};rx=d([VN("-msKQoZIRI6E80e53qttmw")],rx);var sx=class extends Laya.Scene{};var{regClass:GN}=Laya,vt=class{};vt.playerRank=0,vt.unionRank=1,vt.dailyRank=2,vt.proRank=3,vt.actRank=4;var ox=class extends sx{constructor(){super(...arguments);this.unionRankData=null;this.rankIndex=0;this.maxSubTabIndex=10;this.tabNames={1:"combat scenes",2:"KILL COUNT",3:"number of heroes",4:"damage ranking",5:"wealth ranking"};this.tabNamesDaily={1:"Matches",2:"Matches",3:"Matches",4:"Matches",5:"Matches"};this.btnNames={1:"COMBAT SCENES",2:"KILL COUNT",3:"NUMBER OF HEROES",4:"DAMAGE RANKING",5:"WEALTH RANKING"};this.btnNamesDaily={1:"Total Mathches",2:"Professional Matches",3:"Airdrop Matches",4:"Training RANKING",5:""};this.btnNamesPro={1:"This week",2:"Last week",3:"This month",4:"Last month",5:""};this.currBigTab=0;this.currTab=0;this.nftTabIndex=1}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onOpened(e){this.list_act.array=[],this.onClickBigTab(5)}onEnable(){this.rankLanList.visible=!1,this.myBox.visible=!1,this.myUnionBox.visible=!1,this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene);for(let e=1;e<6;e++)this["btn_tab_"+e].on(Laya.Event.CLICK,this,this.onClickBigTab,[e]);for(let e=1;e<this.maxSubTabIndex;e++)this["btn_"+e].on(Laya.Event.CLICK,this,this.onClickTab,[e]);this.refreshDailyBtnRed(),_.intance.on(b.REFRESH_ACTIVITY_RED,this,this.refreshDailyBtnRed)}onClickBigTab(e){this.currBigTab!=e&&(this.playerRankBox.visible=!1,this.unionBox.visible=!1,this.actRankBox.visible=!1,this.currBigTab=e,this.setBigTab(e),e==1?(this.rankIndex=vt.playerRank,this.refreshDailyBtnRed(),this.onClickTab(1),this.playerRankBox.visible=!0):e==2?(this.rankIndex=vt.unionRank,this.onClickTab(6),this.unionBox.visible=!0):e==3?(this.rankIndex=vt.dailyRank,this.refreshDailyBtnRed(),this.onClickTab(1),this.playerRankBox.visible=!0):e==4?(this.rankIndex=vt.proRank,this.onClickTab(1),this.playerRankBox.visible=!0):e==5&&(this.rankIndex=vt.actRank,this.onClickTab(7),this.actRankBox.visible=!0))}setBigTab(e){for(let i=1;i<6;i++)e==i?(this["btn_tab_"+i].getChildByName("selectBox").visible=!0,this["btn_tab_"+i].getChildByName("tf_txt").color="#143f6b"):(this["btn_tab_"+i].getChildByName("selectBox").visible=!1,this["btn_tab_"+i].getChildByName("tf_txt").color="#7ff1fe")}onClickTab(e){if(this.currTab===e)return;let i;switch(this.rankIndex){case vt.playerRank:i=this.tabNames,this.rankName.text=i[e];break;case vt.dailyRank:i=this.tabNamesDaily;break;case vt.proRank:i=this.tabNamesDaily;break;case vt.actRank:var n=I.intance.m_dicItems.get(Be.TYPE_MNT),r=I.intance.m_dicItems.get(Be.TYPE_PC);this.tf_mnt.text=p.instance.getLanguage(n.name),this.tf_pc.text=p.instance.getLanguage(r.name);break}this.setTab(e),this.rankIndex==vt.unionRank?this.setGuildListData():this.setListData(e);let s=this["btn_"+e].getChildByName("img_red");(this.rankIndex==vt.dailyRank||this.rankIndex==vt.proRank||this.rankIndex==vt.actRank)&&s&&(s.visible=!1)}setTab(e){let i;switch(this.rankIndex){case vt.playerRank:i=this.btnNames;break;case vt.dailyRank:i=this.btnNamesDaily;break;case vt.proRank:i=this.btnNamesPro;break;case vt.actRank:break}for(let n=1;n<this.maxSubTabIndex;n++)e==n?(this["btn_"+n].getChildByName("selectBox").visible=!0,this["btn_"+n].getChildByName("tf_txt").color="#143f6b"):(this["btn_"+n].getChildByName("selectBox").visible=!1,this["btn_"+n].getChildByName("tf_txt").color="#7ff1fe"),i&&i[n]&&(this["btn_"+n].getChildByName("tf_txt").text=i[n]);this.btn_5.visible=this.rankIndex==vt.playerRank}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}async setListData(e){this.nftTabIndex=e;let i;switch(this.rankIndex){case vt.playerRank:i=await w.requestPost("wxgame/sys/rank",{type:e});break;case vt.dailyRank:i=await w.requestPost("wxgame/sys/playerFightTimesRank",{type:e-1});break;case vt.proRank:i=await w.requestPost("wxgame/sys/proPlayerTimesWeekMonthRank",{type:e});break;case vt.actRank:var n=1;if(e==7?n=1:e==8?n=2:e==9&&(n=0),this.list_act.visible=!1,this.noDataBox.visible=!1,i=await w.requestPost("wxgame/rank/remRank",{type:n}),this.nftTabIndex!=e)return;break}i?(this.updateSelfData(i.self),this.updateRankList(i.rankList)):(console.error("Error fetching data:",i),C.instance.notice(p.instance.getLanguage(135)))}async setGuildListData(){this.unionRankData||(this.unionRankData=await w.requestPost("wxgame/sys/unionRank",{}));let e=[];if(this.unionRankData){let i=this.unionRankData.rankList,n=this.unionRankData.self;n&&this.updateSelfUnionData(n),this.unionRankLanList.scrollTo(0),this.unionRankLanList.visible=!0,this.myUnionBox.visible=!0,this.unionRankLanList.selectedIndex=1,this.unionRankLanList.array=i,this.myUnionBox.visible=!!n}else console.error(`Error fetching data: ${this.unionRankData}`),C.instance.notice(p.instance.getLanguage(135))}updateSelfData(e){if(e){if(this.rankIndex==vt.actRank){this.myActListItem.dataSource=e;return}if(this.tf_name.text=e.name,this.tf_union.text=p.instance.getMultiLan(e.shortUnionName),this.tf_score.text=`${e.score}`,this.playerIcon.headSkin=e.head,this.img_flag.skin=M.instance.getCountryIcon(e.country),e.unionId){let i=M.instance.getUnionIcon(e.icon);this.img_lvIcon.skin=i,this.img_lvIcon.visible=!0}else this.img_lvIcon.visible=!1;if(this.rankIndex==vt.actRank?(this.img_lvIcon.visible=!1,this.tf_ref.visible=!0,this.tf_ref.text=`${e.remCount}`,this.tf_union.visible=!1):(this.tf_ref.visible=!1,this.tf_union.visible=!0),e.rank<=0)this.img_rankIcon1.visible=!1,this.tf_rank.text=p.instance.getLanguage(1117),this.img_rankIcon2.visible=!1,this.tf_rank.visible=!0;else if(e.rank<4)this.img_rankIcon1.skin=`res/matchRank1/img_ranking_${e.rank}.png`,this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1,this.tf_rank.visible=!1;else{let i=e.pid===v.instance.playerDto.pid?"res/matchRank1/img_ranking_ranking_me.png":"res/matchRank1/img_ranking_ranking_4.png";this.img_rankIcon2.skin=i,this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1,this.tf_rank.text=`${e.rank}`,this.tf_rank.visible=!0}}}updateSelfUnionData(e){if(e)if(this.union_name.text=p.instance.getMultiLan(e.unionName),this.unionIcon.dataSource=e,this.union_score.text=e.score+"",e.rank<0)this.img_unionIcon1.visible=!1,this.union_rank.text=p.instance.getLanguage(1117),this.img_unionIcon2.visible=!1;else if(e.rank<4)this.img_unionIcon1.skin=`res/matchRank1/img_ranking_${e.rank}.png`,this.img_unionIcon1.visible=!0,this.img_unionIcon2.visible=!1;else{let i="res/matchRank1/img_ranking_ranking_me.png";this.img_unionIcon2.skin=i,this.img_unionIcon2.visible=!0,this.img_unionIcon1.visible=!1,this.union_rank.text=`${e.rank}`}}updateRankList(e){if(e){let i=e.findIndex(n=>n.pid===v.instance.playerDto.pid);this.rankIndex!==vt.actRank?(this.rankLanList.selectedIndex=1,this.rankLanList.array=e,this.rankLanList.scrollTo(0),this.activeList.visible=!1,this.myBox.visible=!0,this.rankLanList.visible=!0):(this.list_act.selectedIndex=1,this.list_act.array=e,this.list_act.scrollTo(0),this.list_act.visible=!0,!this.list_act.array||this.list_act.array.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}}refreshDailyBtnRed(){switch(this.rankIndex){case vt.playerRank:this.btn_1.getChildByName("img_red").visible=!1,this.btn_2.getChildByName("img_red").visible=!1,this.btn_3.getChildByName("img_red").visible=!1,this.btn_4.getChildByName("img_red").visible=!1;break;case vt.dailyRank:this.btn_1.getChildByName("img_red").visible=v.instance.getRedDotById(Ae.RED_EVERY_RANK_TOTAL),this.btn_2.getChildByName("img_red").visible=v.instance.getRedDotById(Ae.RED_EVERY_RANK_PRE),this.btn_3.getChildByName("img_red").visible=v.instance.getRedDotById(Ae.RED_EVERY_RANK_AIR),this.btn_4.getChildByName("img_red").visible=v.instance.getRedDotById(Ae.RED_EVERY_RANK_TRA);break;case vt.proRank:this.btn_1.getChildByName("img_red").visible=v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_1),this.btn_2.getChildByName("img_red").visible=v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_2),this.btn_3.getChildByName("img_red").visible=v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_3),this.btn_4.getChildByName("img_red").visible=v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_4);break;case vt.actRank:break}this.refreshDailyRed(),this.refreshProRed(),this.refreshProAct()}refreshDailyRed(){this.img_red_daily.visible=v.instance.getRedDotById(Ae.RED_EVERY_RANK_TOTAL)||v.instance.getRedDotById(Ae.RED_EVERY_RANK_PRE)||v.instance.getRedDotById(Ae.RED_EVERY_RANK_AIR)||v.instance.getRedDotById(Ae.RED_EVERY_RANK_TRA)}refreshProRed(){this.img_red_pro.visible=v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_1)||v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_2)||v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_3)||v.instance.getRedDotById(Ae.PRO_RANK_DAY_FIGHT_4)}refreshProAct(){}onDisable(){this.removeEvent()}removeEvent(){_.intance.offAllCaller(this)}};ox=d([GN("5_oIkEKDQUyqTP8xY9zMUw")],ox);var lx=class extends Laya.Box{};var{regClass:WN}=Laya,cx=class extends lx{constructor(){super()}createChildren(){super.createChildren()}set dataSource(t){if(!t)return;let e=t.id===v.instance.playerDto.pid,i=t.rank;this.unionIcon.dataSource=t,this.tf_union.text=p.instance.getMultiLan(t.shortUnionName),this.tf_rank.text=i+"",this.tf_score.text=t.score+"",e?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.bg.skin=i<4?`res/rank/img_guild_${i}di.png`:"res/rank/img_guild_4di.png",i<4?(this.img_rankIcon1.skin=`res/matchRank1/img_ranking_${i}.png`,this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.img_rankIcon2.skin=e?"res/matchRank1/img_ranking_ranking_me.png":"res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1)}};cx=d([WN("O6o6TJNORIGW9WXbhJf91w")],cx);var ux=class extends Laya.Box{};var{regClass:jN,property:FVe}=Laya,px=class extends ux{constructor(){super();this.isAddEvent=!1}set dataSource(e){if(e){if(super.dataSource=e,this.heroVo=e,!this.heroVo){this.img_back.skin=M.instance.getHeroBackIcon(0),this.box_show.visible=!1;return}this.addEvent(),this.setCurrentOutPut()}}async setCurrentOutPut(){this.img_back.skin=M.instance.getHeroBackIcon(this.heroVo.heroItem.quality),this.img_front.skin=M.instance.getHeroFrontIcon(this.heroVo.heroItem.quality),this.img_hero.skin=this.heroVo.simgurl,this.tf_name.text=qe.shortHeroStr(this.heroVo.name);let e=this.heroVo.heroItem.level+"";ft.instance.setStar(this,e),this.box_show.visible=!0,this.destroyed}onChange(e){e?this.selectBox.visible=!0:this.selectBox.visible=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}toDetail(){this.heroVo.id&&O.intance.openModule(L.HeroDetailDialog,[this.heroVo])}};px=d([jN("DixYspEIQnqQazhlHuxLDw")],px);var mx=class extends Laya.Dialog{};var{regClass:zN}=Laya,hx=class extends mx{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.beforeYearIndex=null;this.beforeMonthIndex=null;this.beforeDayIndex=null;this.beforeHourIndex=null;this.dateOpenState=0;this.dateOpenStateAir=0;this.itemVo=null;this.walletType=0;this.heroPkList=[];this.airWalletDataArray=[];this.currentDate=new Date;this.startDate={year:0,month:0,day:0,hour:0};this.endDate={year:0,month:0,day:0,hour:0};this.heroVo=null}onEnable(){this.box_date.on(Laya.Event.CLICK,this,this.onOpenDate,[this.img_date_pad,this.box_date]),this.box_date2.on(Laya.Event.CLICK,this,this.onOpenDate,[this.img_date_pad,this.box_date2]),this.box_date3.on(Laya.Event.CLICK,this,this.onOpenDateAir,[this.img_date_pad2,this.box_date3]),this.box_date4.on(Laya.Event.CLICK,this,this.onOpenDateAir,[this.img_date_pad2,this.box_date4]),this.yearList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.yearList,"year"]),this.monthList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.monthList,"month"]),this.dayList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.dayList,"day"]),this.hourList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.hourList,"hour"]),this.yearList2.on(Laya.Event.MOUSE_UP,this,this.onListStopAir,[this.yearList2,"year"]),this.monthList2.on(Laya.Event.MOUSE_UP,this,this.onListStopAir,[this.monthList2,"month"]),this.dayList2.on(Laya.Event.MOUSE_UP,this,this.onListStopAir,[this.dayList2,"day"]),this.hourList2.on(Laya.Event.MOUSE_UP,this,this.onListStopAir,[this.hourList2,"hour"]),this.yearList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.yearList,"year",this.img_date_pad]),this.monthList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.monthList,"month",this.img_date_pad]),this.dayList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.dayList,"day",this.img_date_pad]),this.hourList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.hourList,"hour",this.img_date_pad]),this.yearList2.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.yearList2,"year",this.img_date_pad2]),this.monthList2.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.monthList2,"month",this.img_date_pad2]),this.dayList2.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.dayList2,"day",this.img_date_pad2]),this.hourList2.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.hourList2,"hour",this.img_date_pad2]),this.tf_uid.on(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.on(Laya.Event.FOCUS,this,this.uidFocus),_.intance.on(b.CHANGE_WALLET_HERO,this,this.onHeroChange),_.intance.on(b.CHANGE_WALLET_HERO_AIR,this,this.onAirHeroChange),_.intance.on(b.CHANGE_WALLET_PROP,this,this.onPropChange),_.intance.on(b.ADD_AIR_WALLET_ITEM,this,this.addAirWalletItem),_.intance.on(b.ADD_AIR_SUB_WALLET_NAME,this,this.addAirWalletNameItem),_.intance.on(b.AIR_SUB_WALLET_OPENHERO,this,this.airdropOpenHeroView),this.hero_box.on(Laya.Event.CLICK,this,this.onHeroBoxClick),this.Img_prop.on(Laya.Event.CLICK,this,this.onPropClick),this.btn_createSubWallet.on(Laya.Event.CLICK,this,this.onCreateSubWallet),this.btn_createSubWalletAir.on(Laya.Event.CLICK,this,this.onCreateSubWalletAir),this.box_Arean.on(Laya.Event.CLICK,this,this.onOpenType),this.tab1.on(Laya.Event.CLICK,this,this.onTabClick,[1]),this.tab2.on(Laya.Event.CLICK,this,this.onTabClick,[2]),this.yearList.scrollBar.rollRatio=0,this.monthList.scrollBar.rollRatio=0,this.dayList.scrollBar.rollRatio=0,this.hourList.scrollBar.rollRatio=0,this.yearList2.scrollBar.rollRatio=0,this.monthList2.scrollBar.rollRatio=0,this.dayList2.scrollBar.rollRatio=0,this.hourList2.scrollBar.rollRatio=0,this.initTime(),this.showHeroData(),this.initDiciList(),this.initTypeList(),this.box_dividends.on(Laya.Event.CLICK,this,this.onOpeDividends),this.tab1.getChildByName("tf_tit").text=`${p.instance.getLanguage(1261)}`,this.tab2.getChildByName("tf_tit").text=`${p.instance.getLanguage(1260)}`}onDisable(){this.removeEvent()}removeEvent(){this.box_date.off(Laya.Event.CLICK,this,this.onOpenDate),this.box_date2.off(Laya.Event.CLICK,this,this.onOpenDate),this.box_date3.off(Laya.Event.CLICK,this,this.onOpenDateAir),this.box_date4.off(Laya.Event.CLICK,this,this.onOpenDateAir),this.yearList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.monthList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.dayList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.hourList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.yearList2.off(Laya.Event.MOUSE_UP,this,this.onListStopAir),this.monthList2.off(Laya.Event.MOUSE_UP,this,this.onListStopAir),this.dayList2.off(Laya.Event.MOUSE_UP,this,this.onListStopAir),this.hourList2.off(Laya.Event.MOUSE_UP,this,this.onListStopAir),this.yearList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.monthList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.dayList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.hourList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.yearList2.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.monthList2.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.dayList2.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.hourList2.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.tf_uid.off(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.off(Laya.Event.FOCUS,this,this.uidFocus),this.hero_box.off(Laya.Event.CLICK,this,this.onHeroBoxClick),this.Img_prop.off(Laya.Event.CLICK,this,this.onPropClick),this.btn_createSubWallet.off(Laya.Event.CLICK,this,this.onCreateSubWallet),this.box_dividends.off(Laya.Event.CLICK,this,this.onOpeDividends),_.intance.off(b.CHANGE_WALLET_HERO,this,this.onHeroChange),_.intance.off(b.CHANGE_WALLET_HERO_AIR,this,this.onAirHeroChange),_.intance.off(b.CHANGE_WALLET_PROP,this,this.onPropChange),_.intance.off(b.ADD_AIR_WALLET_ITEM,this,this.addAirWalletItem),_.intance.off(b.ADD_AIR_SUB_WALLET_NAME,this,this.addAirWalletNameItem),_.intance.off(b.AIR_SUB_WALLET_OPENHERO,this,this.airdropOpenHeroView),_.intance.offAllCaller(this),this.btn_createSubWalletAir.off(Laya.Event.CLICK,this,this.onCreateSubWalletAir),this.box_Arean.off(Laya.Event.CLICK,this,this.onOpenType),this.tab1.off(Laya.Event.CLICK,this,this.onTabClick),this.tab2.off(Laya.Event.CLICK,this,this.onTabClick)}resetColors(e,i,n){let r=[e,i,n];for(let l of r)for(var s=0;s<l.cells.length;s++){var o=l.cells[s];o.tf_date.color="#357cc0"}}onOpenDate(e,i){this.resetColors(this.yearList,this.monthList,this.dayList),this.onHideDivi(),e.visible==!1?(i==this.box_date?(e.y=306,this.dateOpenState=1):(e.y=20,this.dateOpenState=2),this.getDateInfo(),e.visible=!0,this.img_bg.on(Laya.Event.CLICK,this,this.hideAllPad)):(e.visible=!1,this.dateOpenState=0)}onOpenDateAir(e,i){this.resetColors(this.yearList2,this.monthList2,this.dayList2),this.onHideDivi(),e.visible==!1?(i==this.box_date3?(e.x=125,this.dateOpenState=1):(e.x=664,this.dateOpenState=2),this.getDateInfoAir(),e.visible=!0,this.img_bg.on(Laya.Event.CLICK,this,this.hideAllPad)):(e.visible=!1,this.dateOpenStateAir=0)}hideAllPad(){this.img_date_pad.visible=!1,this.img_date_pad2.visible=!1,this.img_bg.off(Laya.Event.CLICK,this,this.hideAllPad)}initTypeList(){let e=I.intance.getArenaTypesInSub(),i={name:"Professional & Airdrop"};e.push(i),this.list_type.array=e,this.list_type.selectHandler=new Laya.Handler(this,this.handleSelectType),this.list_type.mouseHandler=Laya.Handler.create(this,this.onTypeItemMouse,null,!1),this.list_type.renderHandler=Laya.Handler.create(this,this.onTypeItemRender,null,!1),this.list_type.selectedIndex=0}getDateInfo(){this.renderDateInfo(this.dateOpenState,this.startDate,this.endDate,this.yearList,this.monthList,this.dayList,this.hourList)}getDateInfoAir(){this.renderDateInfo(this.dateOpenState,this.startDate,this.endDate,this.yearList2,this.monthList2,this.dayList2,this.hourList2)}renderDateInfo(e,i,n,r,s,o,l){let u=e==1?i:n;this.fillList(r,u.year,2e3,2050),this.fillList(s,u.month,1,12);let m=new Date().getFullYear(),h=new Date().getMonth()+1,y=ce.getDaysInMonth(m,h);this.fillList(o,u.day,1,y),this.fillList(l,u.hour,0,23)}fillList(e,i,n,r){let s=[],o=this.walletType?this.yearList2:this.yearList,l=this.walletType?this.monthList2:this.monthList,u=this.walletType?this.dayList2:this.dayList,m=this.walletType?this.hourList2:this.hourList;for(let y=n;y<=r;y++)s.push(y.toString());for(let y=1;y<=3;y++)s.push("");s=["",...s],e.array=s;let h=s.indexOf(`${i}`);if(h>-1){e.scrollTo(h-1),e.selectedIndex=h-1;let y=e.getCell(h);y.tf_date.color="#ffffff",e==o?this.beforeYearIndex=h:e==l?this.beforeMonthIndex=h:e==u?this.beforeDayIndex=h:e==m&&(this.beforeHourIndex=h)}}onYearChange(e){!this.yearList.array||this.monthList.selectedIndex<0||this.updateDayList(parseInt(this.yearList.array[e]),parseInt(this.monthList.array[this.monthList.selectedIndex]))}onMonthChange(e){!this.yearList.array||this.monthList.selectedIndex<0||this.updateDayList(parseInt(this.yearList.array[this.yearList.selectedIndex]),parseInt(this.monthList.array[e]))}onYearChangeAir(e){!this.yearList2.array||this.monthList2.selectedIndex<0||this.updateDayListAir(parseInt(this.yearList2.array[e]),parseInt(this.monthList2.array[this.monthList.selectedIndex]))}onMonthChangeAir(e){!this.yearList2.array||this.monthList2.selectedIndex<0||this.updateDayListAir(parseInt(this.yearList2.array[this.yearList2.selectedIndex]),parseInt(this.monthList2.array[e]))}updateDayList(e,i){let n=[];for(let r=1;r<=ce.getDaysInMonth(e,i);r++)n.push(r.toString());for(let r=1;r<=3;r++)n.push("");n=["",...n],this.dayList.array=n}updateDayListAir(e,i){let n=[];for(let r=1;r<=ce.getDaysInMonth(e,i);r++)n.push(r.toString());for(let r=1;r<=3;r++)n.push("");n=["",...n],this.dayList2.array=n}calculateVisibleHeight(e,i){let n=e.getCell(i);return Math.min(n.y+n.height,e.scrollBar.value+e.height)-Math.max(n.y,e.scrollBar.value)}onListStop(e,i){let n=this.dateOpenState==1?this.startDate:this.endDate,r=Math.floor(e.startIndex),s=r+1,o=this.calculateVisibleHeight(e,r),l=this.calculateVisibleHeight(e,s),u=o+14>=l?r:s;(i==="month"||i==="day"||i==="hour")&&(u=Math.min(u,e.array.length-5)),e.scrollTo(u),e.selectedIndex=u;let m=e.getCell(u+1);m.tf_date.color="#ffffff";let h=m.tf_date.text;if(h&&m){switch(i){case"year":this.onYearChange(u+1),n.year=Number(h);break;case"month":this.onMonthChange(u+1),n.month=Number(h);break;case"day":n.day=Number(h);break;default:n.hour=Number(h);break}this.refreshStartTime(this.dateOpenState)}}onListStopAir(e,i){let n=this.dateOpenState==1?this.startDate:this.endDate,r=Math.floor(e.startIndex),s=r+1,o=this.calculateVisibleHeight(e,r),l=this.calculateVisibleHeight(e,s),u=o+14>=l?r:s;(i==="month"||i==="day"||i==="hour")&&(u=Math.min(u,e.array.length-5)),e.scrollTo(u),e.selectedIndex=u;let m=e.getCell(u+1);m.tf_date.color="#ffffff";let h=m.tf_date.text;if(h&&m){switch(i){case"year":this.onYearChangeAir(u+1),n.year=Number(h);break;case"month":this.onMonthChangeAir(u+1),n.month=Number(h);break;case"day":n.day=Number(h);break;default:n.hour=Number(h);break}this.refreshStartTime(this.dateOpenState)}}onScrollBarChange(e,i,n){if(!n.visible)return;let r=this.dateOpenState==1?this.startDate:this.endDate;console.log("startDate",this.startDate);let s=Math.floor(e.startIndex),o=s+1,l=this.calculateVisibleHeight(e,s),u=this.calculateVisibleHeight(e,o),m=l+14>=u?s:o,h=e.getCell(m+1);h.tf_date.color="#ffffff";let y,x;switch(i){case"year":x=this.beforeYearIndex,this.beforeYearIndex=m+1;break;case"month":x=this.beforeMonthIndex,this.beforeMonthIndex=m+1;break;case"day":x=this.beforeDayIndex,this.beforeDayIndex=m+1;break;case"hour":x=this.beforeHourIndex,this.beforeHourIndex=m+1;break}x!==m+1&&(y=e.getCell(x),this.resetListStyle(y));let E=h.tf_date.text;if(h.tf_date.color="#ffffff",E&&h){switch(i){case"year":this.onYearChange(m+1),r.year=Number(E);break;case"month":this.onMonthChange(m+1),r.month=Number(E);break;case"day":r.day=Number(E);break;default:r.hour=Number(E);break}this.refreshStartTime(this.dateOpenState)}}async setPlayerName(){try{if(this.tf_uid.text=="")return;var e=await w.requestPost("wxgame/sys/queryName",{openid:this.tf_uid.text.toLowerCase()});e&&(this.tf_player_name.text=e.name)}catch{}}uidFocus(){this.tf_uid.text="",this.tf_player_name.text=""}resetListStyle(e){e&&(e.tf_date.color="#357cc0")}refreshStartTime(e){let i,n,r;this.walletType==1?(i=e==1?this.startDate:this.endDate,n=e==1?this.tf_startAir:this.tf_startAir2,r=e==1?this.tf_hourAir:this.tf_hourAir2):(i=e==1?this.startDate:this.endDate,n=e==1?this.tf_start:this.tf_start2,r=e==1?this.tf_hour:this.tf_hour2);let s=i.month>=10?i.month:`0${i.month}`,o=i.day>=10?i.day:`0${i.day}`;n.text=`${i.year}-${s}-${o}`,r.text=`${i.hour}:00`}onHeroBoxClick(){O.intance.openModule(L.WalletChooseHeroDialog,[-1])}onPropClick(){this.list_type.selectedIndex!=1&&O.intance.openModule(L.WalletChoosePropsDialog,[rt.CHOOSE_Wallet])}async onCreateSubWallet(){if(console.log("this.proCheckBox.selected",this.proCheckBox.selected),console.log("this.airCheckBox.selected",this.airCheckBox.selected),We.instance.inMinWaiting){C.instance.notice(p.instance.getLanguage(1187));return}if(this.tf_uid.text==K.instance.walletAddress){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1162),W.YES),this.tf_uid.text="",this.tf_player_name.text="";return}let e=this.tf_uid.text;if(e.length<=0||this.tf_player_name.text==""){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1161),W.YES);return}if(!this.heroVo){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1167),W.YES);return}let i,n=Number(this.tf_have.text);if(this.list_type.selectedIndex!==1){if(i=this.itemVo&&this.itemVo.m_iId,this.itemVo&&this.itemVo.itemItem.quality==3&&this.heroVo.heroItem.level!==3){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1163),W.YES);return}if((n<1||!this.itemVo)&&this.list_type.selectedIndex==0){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1166),W.YES);return}}else n=0,i=0;let r=fe.dateStringToTimestamp(this.tf_start.text,`${this.startDate.hour}`),s=fe.dateStringToTimestamp(this.tf_start2.text,`${this.endDate.hour}`),o=fe.getCurrentDayTimestamp();if(r<o){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1164),W.YES);return}if(s<=r){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1165),W.YES);return}let l=this.list_type.selectedIndex+1,u=Number(this.tf_div.text.replace("%","")),m=this.heroVo.pk;var h={startTime:r,endTime:s,ticketId:i,ticketCount:n,ratio:u,heroPk:m,openid:e.toLowerCase(),type:l};try{var y=await w.requestPost("wxgame/lease/create",h);y&&(C.instance.notice(p.instance.getLanguage(1168)),this.heroVo.pk==v.instance.playerDto.fightHeroPk&&(v.instance.playerDto.fightHeroPk=""),Laya.timer.once(200,this,()=>{_.intance.event(b.CREATE_SUB_WALLET_SUCCESS)}),this.close())}catch{}}async onCreateSubWalletAir(){let e=fe.dateStringToTimestamp(this.tf_startAir.text,`${this.startDate.hour}`),i=fe.dateStringToTimestamp(this.tf_startAir2.text,`${this.endDate.hour}`),n=fe.getCurrentDayTimestamp(),r=this.getEfficientList(this.airWalletDataArray);if(r.length<=0){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1352),W.YES);return}if(e<n){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1164),W.YES);return}if(i<=e){Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1165),W.YES);return}console.log(e,i,n);var s=await w.requestPost("wxgame/lease/mutiCreate",{startTime:e,endTime:i,ratio:0,type:2,data:r});s&&(C.instance.notice(p.instance.getLanguage(1168)),this.close(),Laya.timer.once(200,this,()=>{_.intance.event(b.CREATE_SUB_WALLET_SUCCESS)}))}getEfficientList(e){let i=[];for(let n=0;n<e.length;n++){let r=e[n];r.name.length>0&&r.hero&&i.push({address:r.walletAddress,heroPk:r.hero.pk.toLowerCase()})}return i}showHeroData(){if(this.heroVo){this.img_back.skin=M.instance.getHeroBackIcon(this.heroVo.heroItem.quality),this.img_front.skin=M.instance.getHeroFrontIcon(this.heroVo.heroItem.quality),this.img_hero.skin=this.heroVo.simgurl,this.tf_name.text=qe.shortHeroStr(this.heroVo.name);let e=this.heroVo.heroItem.level+"";ft.instance.setStar(this,e),this.box_show.visible=!0,this.img_back.visible=!0,this.img_noHero.visible=!1}else this.box_show.visible=!1,this.img_back.visible=!1,this.img_noHero.visible=!0}initDiciList(){var e=I.intance.getGeneralValueById(9);this.list_divi.array=e,this.list_divi.selectHandler=new Laya.Handler(this,this.handleSelectDiv),this.list_divi.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_divi.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_divi.scrollBar&&this.list_divi.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown),this.list_divi.selectedIndex=0}initDiciList2(e){if(e==1){var i=I.intance.getGeneralValueById(9);this.list_divi.array=i,this.list_divi.selectedIndex=0}else{var i=I.intance.getGeneralValueById(18);this.list_divi.array=i,this.list_divi.selectedIndex=0}this.handleSelectDiv(0)}handleSelectDiv(e){if(e!=-1){let i=this.list_divi.selectedItem;this.tf_div.text=`${i}%`}}handleSelectType(e){if(this.itemVo=null,e!=-1){let i=this.list_type.selectedItem;this.tf_type.text=`${p.instance.getLanguage(i.name)}`,e==0?(this.clearProp(),this.initDiciList2(1),this.img_lock.visible=!1,this.img_jia.visible=!0):e==2?(this.initDiciList2(2),this.clearProp()):(this.initDiciList2(1),this.img_lock.visible=!0,this.tf_div.text="0%",this.img_jia.visible=!1,this.PropBox.visible=!1)}}onCountryItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_divi.selectedIndex=i,this.onHideDivi())}onTypeItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_type.selectedIndex=i,this.onHideDivi())}onCountryItemRender(e,i){e.onChange(this.list_divi.selectedIndex==i)}onTypeItemRender(e,i){e.onChange(this.list_type.selectedIndex==i)}onOpeDividends(){this.list_type.selectedIndex!=1&&(this.img_divi_pad.visible=!0,this.img_bg.once(Laya.Event.MOUSE_DOWN,this,this.onHideDivi))}onHideDivi(){this.img_divi_pad.visible=!1,this.img_type_pad.visible=!1,this.img_bg.off(Laya.Event.MOUSE_DOWN,this,this.onHideDivi)}onScrollBarDown(e){e.stopPropagation()}onHeroChange(e){this.heroVo=e,this.showHeroData()}onOpenType(){this.img_type_pad.visible=!0,this.img_bg.once(Laya.Event.MOUSE_DOWN,this,this.onHideDivi)}onPropChange(e,i){this.itemVo||this.initDiciList2(1),this.itemVo=e;let n=I.intance.m_dicItems.get(e.itemItem.id.toString());this.PropBox.visible=!0,this.img_jia.visible=!1,n&&(this.img_prop_icon.skin=M.instance.getItemIcon(n.icon),this.img_prop_box.skin="gameIcon/items/itemBg/img_"+n.quality+".png",this.tf_all.text=""+Pe.formatNumber(e._m_iNum,2),this.tf_have.text=""+Pe.formatNumber(i,2))}clearProp(){this.PropBox.visible=!1,this.img_jia.visible=!0}onTabClick(e){e==1?(this.tab1.getChildByName("tf_tit").color="#143268",this.tab1.skin="res/scholarship/img_transfer_tab2.png",this.tab2.getChildByName("tf_tit").color="#429fdf",this.tab2.skin="res/scholarship/img_transfer_tab1.png",this.airBox.visible=!1,this.proBox.visible=!0,this.walletType=0,this.heroVo=null,this.heroPkList=[],this.showHeroData(),this.initTime()):(this.tab1.getChildByName("tf_tit").color="#429fdf",this.tab1.skin="res/scholarship/img_transfer_tab1.png",this.tab2.getChildByName("tf_tit").color="#143268",this.tab2.skin="res/scholarship/img_transfer_tab2.png",this.proBox.visible=!1,this.airBox.visible=!0,this.walletType=1,this.airWalletDataArray=[],this.initAirSubWallet(),this.initTime())}initTime(){let e=new Date;this.startDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours()},this.endDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours()},this.refreshStartTime(1),this.refreshStartTime(2)}initAirSubWallet(){this.airWalletDataArray=[],this.airWalletDataArray.push({hero:0,walletAddress:"",name:"",establish:!0,index:0}),this.airWalletDataArray.push({hero:0,walletAddress:"",name:"",establish:!1,index:1}),this.subAirdropWalletList.array=this.airWalletDataArray}addAirWalletItem(){let e={hero:0,walletAddress:"",name:"",establish:!1,index:this.airWalletDataArray.length};this.subAirdropWalletList.visible=!1,this.airWalletDataArray[this.airWalletDataArray.length-1].establish=!0,this.airWalletDataArray.push(e),this.subAirdropWalletList.array=[],this.subAirdropWalletList.array=this.airWalletDataArray,this.subAirdropWalletList.repeatY=this.airWalletDataArray.length-10,this.subAirdropWalletList.scrollTo(this.airWalletDataArray.length-1),this.subAirdropWalletList.visible=!0}addAirWalletNameItem(e){if(e){let i=e.index;this.airWalletDataArray[i].name=e.name,this.airWalletDataArray[i].walletAddress=e.walletAddress}}airdropOpenHeroView(e){O.intance.openModule(L.WalletChooseHeroDialog,[e,this.heroPkList])}onAirHeroChange(e,i){this.airWalletDataArray[i].hero=e,this.heroPkList.push(e.pk)}};hx=d([zN("_bHe6-EiQc-KiQ-mElnEIQ")],hx);var dx=class extends Laya.ComboBox{};var{regClass:KN}=Laya,fx=class extends dx{set defaultLabel(t){}onEnable(){this.getDateInfo()}set dataSource(t){super.dataSource=t;var e=t}set isOpen(t){console.log("isOpen: "+t),this._isOpen!=t&&(this._isOpen=t,this._isOpen?this.img_pad.visible=!0:this.img_pad.visible=!1)}};fx=d([KN("A2yeugt8S3Ot7ec482gdhQ")],fx);var yx=class extends Laya.Box{};var{regClass:qN}=Laya,bx=class extends yx{set dataSource(e){super.dataSource=e,this.tf_date.text=e}onDisable(){}};bx=d([qN("fCHaQKFSQ-ew26uygUCKnQ")],bx);var gx=class extends Laya.Box{};var{regClass:YN}=Laya,_x=class extends gx{set dataSource(e){super.dataSource=e,this.tf_rate.text=`${e}%`}onChange(e){e?(this.selectImg.visible=!0,this.tf_rate.color="#ffffff"):(this.tf_rate.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};_x=d([YN("TToplFpGQGmUqT5SfNnVIg")],_x);var Lx=class extends Laya.Dialog{};var{regClass:$N}=Laya,vx=class extends Lx{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){this.employList.visible=!1,this.btn_back.on(Laya.Event.CLICK,this,this.closeEmployView)}async setOpenData(e){this.employList.vScrollBarSkin="";let i=e.heroData,n="";if(i){let r=fe.formatTimeStamp(Number(i.startTime),"YY-MT-DD HH:MM:SS"),s=fe.formatTimeStamp(Number(i.endTime),"YY-MT-DD HH:MM:SS");var e=await w.requestPost("wxgame/lease/heroInfo",{heroPk:i.heroPk});if(e&&e.info){let l=I.intance.m_dicShops.values,u=i.leaseType;if(u==0){let Y=ce.getTitleByGoodsId(l,e.info.ticketId);Y&&(n=p.instance.getLanguage(Y)),e.info.ticketId==0&&(n=p.instance.getLanguage(1260))}else switch(u){case 1:n=p.instance.getLanguage(1261);break;case 2:n=p.instance.getLanguage(1260);break;case 3:n=`${p.instance.getLanguage(1260)}+${p.instance.getLanguage(1261)}`;break}let m="",h=e.info.allTicketCount,y=e.info.remainTicketCount,x=h-y;x<=0?m="0%":m=`${Math.round(e.info.winTimes/x*100)}%`;let E={Address:e.info.targetAddress,"Proxy player":i.playerName,Arena:n,"Remaining ticket":[i.remainCount,e.info.ticketId],"Combat scene":`${x}`,"Winner probability":`${m}`,Deserter:`${e.info.taopao}`,"Start date":r,"End date":s},T=Object.getOwnPropertyNames(E).map(Y=>[Y,E[Y]]);this.employList.array=T;let N=-1;this.employList.selectedIndex=N,this.employList.visible=!0;let F=v.instance.m_heroData.heroVoDic.get(i.heroPk);if(this.img_back.skin=M.instance.getHeroBackIcon(F.heroItem.quality),this.img_front.skin=M.instance.getHeroFrontIcon(F.heroItem.quality),this.img_hero.skin=F.simgurl,this.tf_name.text=qe.shortHeroStr(F.name),i.reward&&i.reward.length>0){let Y=ce.findFirstTypeAndNotGold(i.reward);Y?(this.tf_score.text=Y.count,this.img_money.skin=M.instance.getMoneyIcon(Y.id),this.img_money.visible=!0):(this.tf_score.text="0",this.img_money.visible=!1)}else this.tf_score.text="0",this.img_money.visible=!1;let G=F.heroItem.level+"";ft.instance.setStar(this,G)}}}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.closeEmployView)}closeEmployView(){this.close()}};vx=d([$N("4pjAWg8HScmRe8ukNRQsGg")],vx);var xx=class extends Laya.Box{};var{regClass:XN}=Laya,Ix=class extends xx{constructor(){super()}createChildren(){super.createChildren()}set dataSource(t){super.dataSource=t,this.setEmploy(t)}setEmploy(t){if(!t)return;let e=t[0],i=t[1];this.item_name.text=e,this.item_value.visible=!0,e!=="Remaining ticket"&&e!=="Received"&&e!=="Bonus"&&(this.moneyImg.visible=!1),this.tf_address.visible=!1,e==="Agent Date"||e==="End Date"?this.item_value.text=fe.formatTimeStamp(Number(i),"YY-MT-DD HH:MM:SS"):e=="Remaining ticket"?(this.item_value.text=i[0],this.moneyImg.skin=`gameIcon/items/item/img_${i[1]}.png`):e=="Address"?(this.tf_address.visible=!0,this.item_value.visible=!1,this.tf_address.text=`${ce.shortenString(i,8,6)}`,this.btn_copy.on(Laya.Event.CLICK,this,this.onClickCopy,[i])):this.item_value.text=i}onClickCopy(t){t&&(doCopy(t),C.instance.notice(p.instance.getLanguage(132)))}onDisable(){this.removeEvent()}removeEvent(){this.btn_copy.off(Laya.Event.CLICK,this,this.onClickCopy)}};Ix=d([XN("TAG-i7slRsKkXRu8SsaWHg")],Ix);var Ex=class extends Laya.Dialog{};var{regClass:QN}=Laya,wx=class extends Ex{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){this.list_rental.visible=!1,this.showRentalData(),this.tf_rentedEarned.text=p.instance.getUILang("Rented-earned"),this.tf_proxyEarned.text=p.instance.getUILang("Proxy-earned"),this.tf_winRate.text=p.instance.getUILang("victory")}async showRentalData(){var e=await w.requestPost("wxgame/lease/listAll",{});this.list_rental.array=e.list,this.list_rental.visible=!0,!e.list||e.list.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1,console.log(e)}onDisable(){this.removeEvent()}removeEvent(){}};wx=d([QN("peF5WS5zQgGqZq82ro5IyQ")],wx);var Tx=class extends Laya.Box{};var{regClass:JN}=Laya,Cx=class extends Tx{constructor(){super()}createChildren(){super.createChildren()}set dataSource(t){super.dataSource=t,this.setEmploy(t)}setEmploy(t){if(!t)return;let e=fe.formatDayAndTime(t.startTime),i=fe.formatDayAndTime(t.endTime);this.tf_createDate.text=e.date,this.tf_endDate.text=i.date,this.tf_player.text=t.playerName;let n=I.intance.m_dicShops.values,r=t.leaseType;if(r==0){let l=ce.getTitleByGoodsId(n,t.ticketId);l&&(this.tf_arena.text=p.instance.getLanguage(l)),t.ticketId==0&&(this.tf_arena.text=p.instance.getLanguage(1260))}else switch(r){case 1:this.tf_arena.text=p.instance.getLanguage(1261);break;case 2:this.tf_arena.text=p.instance.getLanguage(1260);break;case 3:this.tf_arena.text=`${p.instance.getLanguage(1260)}+${p.instance.getLanguage(1261)}`;break}this.tf_dividends.text=`${t.leaseRatio}%`,this.tf_fight.text=`${t.fightTimes}`,this.tf_vic.text=`${t.winRate}%`;let s=t.leaseReward,o=t.proxyReward;if(s&&s.length>0){let l=ce.findFirstTypeAndNotGold(s);l&&(this.tf_earned.text=Pe.filterNumFormat(l.count,2),this.img_coinType.skin=M.instance.getMoneyIcon(l.id),this.img_coinType.visible=!0)}else this.tf_earned.text="0",this.img_coinType.visible=!1;if(o&&o.length>0){let l=ce.findFirstTypeAndNotGold(o);l&&(this.tf_proxy.text=Pe.filterNumFormat(l.count,2),this.img_coinType2.skin=M.instance.getMoneyIcon(l.id),this.img_coinType2.visible=!0)}else this.tf_proxy.text="0",this.img_coinType2.visible=!1}};Cx=d([JN("bVHWCHZxQDSIcXWzNcq-MA")],Cx);var Sx=class extends Laya.Box{};var{regClass:ZN,property:g7e}=Laya,Dx=class extends Sx{constructor(){super();this.isAddEvent=!1}set dataSource(e){if(e){if(super.dataSource=e,this.heroVo=e,!this.heroVo){this.img_back.skin=M.instance.getHeroBackIcon(0),this.box_show.visible=!1;return}this.addEvent(),this.setCurrentOutPut()}}async setCurrentOutPut(){this.img_back.skin=M.instance.getHeroBackIcon(this.heroVo.heroItem.quality),this.img_front.skin=M.instance.getHeroFrontIcon(this.heroVo.heroItem.quality),this.img_hero.skin=this.heroVo.simgurl,this.tf_name.text=qe.shortHeroStr(this.heroVo.name);let e=this.heroVo.heroItem.level+"";ft.instance.setStar(this,e),this.box_show.visible=!0,this.heroVo.state==1?(this.img_state.skin="gameIcon/hero/heroDetail/img_hero_state_2.png",this.img_state.visible=!0):this.heroVo.state==2?(this.img_state.skin="gameIcon/hero/heroDetail/img_hero_state_3.png",this.img_state.visible=!0):this.img_state.visible=!1}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}onDisable(){this.off(Laya.Event.CLICK,this,this.toDetail)}toDetail(){this.heroVo.id&&O.intance.openModule(L.HeroDetailDialog,[this.heroVo])}};Dx=d([ZN("vJhsY0hvQjyUXjU0-8xV7g")],Dx);var kx=class extends Laya.Box{};var{regClass:e6}=Laya,Ax=class extends kx{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,e&&(this.img_coin.skin=M.instance.getMoneyIcon(e.id),this.money_value.text=e.count,this.addEvent())}};Ax=d([e6("TjAZ1yG-QkG5fetB03VUuA")],Ax);var Mx=class extends Laya.Scene{};var{regClass:t6,property:U7e}=Laya,Bx=class extends Mx{constructor(){super(...arguments);this.text=""}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onEnable(){this.list_hero.vScrollBarSkin="",this.RentalList.visible=!1,this.RevenueList.visible=!1,this.subWalletList.visible=!1,this.btn_sch.on(Laya.Event.CLICK,this,this.onClickSch),this.btn_jia.on(Laya.Event.CLICK,this,this.onClickJia),this.btn_yi.on(Laya.Event.CLICK,this,this.onClickYi),_.intance.on(b.CREATE_SUB_WALLET_SUCCESS,this,this.createSubWalletSuccess),this.btn_subwallet.on(Laya.Event.CLICK,this,this.onClickSubwallet),this.btn_createSubWallet.on(Laya.Event.CLICK,this,this.onClickCreateSubwallet),this.btn_rental.on(Laya.Event.CLICK,this,this.onClickRentalRecord),this.close&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.onClickSch(),this.initHeroData()}async setMoneyData(){let e=await w.requestPost("wxgame/lease/outline",{});if(e&&e.reward){let i=ce.processItemsArray(e.reward)[0];this.RentalList.array=i,this.RentalList.visible=!0}if(e&&e.childReward){let i=ce.processItemsArray(e.childReward)[0];this.RevenueList.array=i,this.RevenueList.visible=!0}}initContainer(e){this.list_hero.visible=!1,this.list_hero.vScrollBarSkin="",this.createHeadList(e)}async createHeadList(e){if(!this)return;let i=e;if(i){this.list_hero.selectedIndex=1,this.list_hero.array=i,this.list_hero.visible=!0,this.tf_heroTotal.text=`${this.list_hero.array.length}`;let n=-1;this.list_hero.selectedIndex=n}(!i||i.length<=0)&&(this.noDataBox.visible=!0)}async initHeroData(){await Qt.instance.ownerHero(!0)}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}setTabState(e,i,n,r){e.getChildByName("selectBox").visible=i,e.getChildByName("tf_txt").color=i?n:r}onClickSch(){this.box_1.visible=!0,this.list_hero.visible=!1,this.subWalletBox.visible=!1,this.noDataBox.visible=!1,this.setTabState(this.btn_sch,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_jia,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_yi,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_subwallet,!1,"#143f6b","#7ff1fe"),this.setMoneyData()}async onClickJia(){await Qt.instance.ownerHero(),this.box_1.visible=!1,this.list_hero.visible=!0,this.subWalletBox.visible=!1,this.noDataBox.visible=!1,this.setTabState(this.btn_jia,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_sch,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_yi,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_subwallet,!1,"#143f6b","#7ff1fe");let e=v.instance.m_heroData.heroVoDic.values,i=ce.filterObjectsByState(e,1);this.initContainer(i)}async onClickYi(){await Qt.instance.ownerHero(),this.box_1.visible=!1,this.list_hero.visible=!0,this.subWalletBox.visible=!1,this.noDataBox.visible=!1;let e=v.instance.m_heroData.heroVoDic.values,i=ce.filterObjectsByState(e,2);this.initContainer(i),this.setTabState(this.btn_yi,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_sch,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_jia,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_subwallet,!1,"#143f6b","#7ff1fe")}async onClickSubwallet(){this.box_1.visible=!1,this.list_hero.visible=!1,this.subWalletBox.visible=!0,this.noDataBox.visible=!1,this.setTabState(this.btn_subwallet,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_sch,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_jia,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_yi,!1,"#143f6b","#7ff1fe");var e=await w.requestPost("wxgame/lease/list",{});if(e){let i=e.list;i.sort((r,s)=>s.createTime-r.createTime);let n=e.list.length;for(let r=0;r<i.length;r++)i[r].rank=r+1;if(i){this.subWalletList.selectedIndex=1,i.push(void 0),i.push(void 0),i.push(void 0),this.subWalletList.array=i,this.tf_subTotal.text=`${n}`,this.subWalletList.visible=!0;let r=-1;this.subWalletList.selectedIndex=r}(!i||i.length<=0)&&(this.noDataBox.visible=!0)}}createSubWalletSuccess(){Laya.timer.once(800,this,this.onClickSubwallet)}onClickCreateSubwallet(){O.intance.openModule(L.CreateSubWalletDialog)}onClickRentalRecord(){O.intance.openModule(L.RentalRecordDialog)}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.btn_sch.off(Laya.Event.CLICK,this,this.onClickSch),this.btn_jia.off(Laya.Event.CLICK,this,this.onClickJia),this.btn_yi.off(Laya.Event.CLICK,this,this.onClickYi),this.btn_subwallet.off(Laya.Event.CLICK,this,this.onClickSubwallet),this.btn_createSubWallet.off(Laya.Event.CLICK,this,this.onClickCreateSubwallet),_.intance.offAllCaller(this)}};Bx=d([t6("eB5n1zn1RD2i2F-bAki-sQ")],Bx);var Rx=class extends Laya.Box{};var{regClass:i6}=Laya,Px=class extends Rx{constructor(){super();this.isAddEvent=!1;this.allData=null}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.allData=e,_.intance.on(b.CHANGE_WALLET_HERO_AIR,this,this.onAirHeroChange),this.btn_add.on(Laya.Event.CLICK,this,this.onClickAdd,[e]),this.img_noHero.on(Laya.Event.CLICK,this,this.onClickNohero),this.tf_address.on(Laya.Event.BLUR,this,this.setPlayerName),this.setData()}setData(){this.dataBox.visible=this.allData.establish,this.btn_add.visible=!this.allData.establish,this.allData.hero?this.showHeroData(this.allData.hero):(this.box_show.visible=!1,this.img_back.visible=!1,this.img_noHero.visible=!0),this.allData.walletAddress.length>0?this.tf_address.text=this.allData.walletAddress:this.tf_address.text="",this.allData.name.length>0?this.tf_playerName.text=this.allData.name:this.tf_playerName.text=""}onClickAdd(){_.intance.event(b.ADD_AIR_WALLET_ITEM,[this.allData.index])}onClickNohero(){_.intance.event(b.AIR_SUB_WALLET_OPENHERO,[this.allData.index])}onAirHeroChange(e,i){!e||i!==this.allData.index||this.showHeroData(e)}showHeroData(e){this.allData.hero=e,this.box_show.visible=!0,this.img_back.visible=!0,this.img_noHero.visible=!1,this.img_back.skin=M.instance.getHeroBackIcon(e.heroItem.quality),this.img_front.skin=M.instance.getHeroFrontIcon(e.heroItem.quality),this.img_hero.skin=e.simgurl,this.tf_name.text=qe.shortHeroStr(e.name);let i=e.heroItem.level+"";ft.instance.setStar(this,i)}async setPlayerName(){try{if(this.tf_address.text=="")return;if(this.tf_address.text==K.instance.walletAddress){C.instance.notice(p.instance.getLanguage(1162));return}var e=await w.requestPost("wxgame/sys/queryName",{openid:this.tf_address.text.toLowerCase()});e&&(console.log(e),this.tf_playerName.text=e.name,_.intance.event(b.ADD_AIR_SUB_WALLET_NAME,[{name:e.name,walletAddress:this.tf_address.text,index:this.allData.index}]))}catch{console.log("未找到该玩家，请核对地址")}}onDisable(){_.intance.off(b.CHANGE_WALLET_HERO_AIR,this,this.onAirHeroChange),this.btn_add.off(Laya.Event.CLICK,this,this.onClickAdd),this.img_noHero.off(Laya.Event.CLICK,this,this.onClickNohero),this.tf_address.off(Laya.Event.BLUR,this,this.setPlayerName)}};Px=d([i6("8bSpqI3UR8KoEpwSxDv_7g")],Px);var Nx=class extends Laya.Box{};var{regClass:a6}=Laya,Ox=class extends Nx{constructor(){super();this.isAddEvent=!1;this.heroPk=null}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}let{rank:i,heroPk:n,ticketId:r,playerName:s,remainCount:o,reward:l,leaseType:u}=e;this.tf_rank.text=i,this.heroPk=n;let m=I.intance.m_dicShops.values;if(u==0){let h=ce.getTitleByGoodsId(m,r);h&&(this.tf_arena.text=p.instance.getLanguage(h)),r==0&&(this.tf_arena.text=p.instance.getLanguage(1260))}else switch(u){case 1:this.tf_arena.text=p.instance.getLanguage(1261);break;case 2:this.tf_arena.text=p.instance.getLanguage(1260);break;case 3:this.tf_arena.text=`${p.instance.getLanguage(1260)}+${p.instance.getLanguage(1261)}`;break}if(this.tf_name.text=s,this.tf_venue.text=o,this.btn_detail.off(Laya.Event.CLICK,this,this.onClickDetail),this.btn_detail.on(Laya.Event.CLICK,this,this.onClickDetail,[e]),this.addEvent(),l&&l.length>0){let h=ce.findFirstTypeAndNotGold(l);h&&(this.tf_score.text=h.count,this.img_money.skin=M.instance.getMoneyIcon(h.id),this.img_money.visible=!0)}else this.tf_score.text="0",this.img_money.visible=!1}onClickDetail(e){O.intance.openModule(L.EmployInfoDialog,{heroData:e})}onDisable(){this.btn_detail&&this.btn_detail.off(Laya.Event.CLICK,this,this.onClickDetail)}};Ox=d([a6("5iGLLzQkR8mqhVsrdybXCQ")],Ox);var Hx=class extends Laya.Box{};var{regClass:n6}=Laya,Ux=class extends Hx{set dataSource(e){e&&(super.dataSource=e,e.name=="Professional & Airdrop"?this.tf_rate.text="Professional & Airdrop":this.tf_rate.text=`${p.instance.getLanguage(e.name)}`)}onChange(e){e?(this.selectImg.visible=!0,this.tf_rate.color="#ffffff"):(this.tf_rate.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};Ux=d([n6("_iWKrJX7QK6BqGFWXcrKUw")],Ux);var Fx=class extends Laya.Dialog{};var{regClass:r6}=Laya,Vx=class extends Fx{constructor(e){super();this.propValue=1;this.propNum=1;this.propData=null;this.heroPk=null;this.chooseType=1;this.subType=1;this.posNum=1;this.items=[]}onEnable(){this.txt_num.text="1",this.listPanel1.visible=!1,this.btn_subtract.on(Laya.Event.CLICK,this,this.changePropNum,[!1]),this.btn_add.on(Laya.Event.CLICK,this,this.changePropNum,[!0]),this.listPanel1.selectHandler=new Laya.Handler(this,this.handleSelectProp),this.btn_transfer.on(Laya.Event.CLICK,this,this.onBtnTramsfer),_.intance.on(b.SHOW_EQUIP_TIP,this,this.showEquipTip),this.initPropList()}setOpenData(e){e&&(this.chooseType=e[0],this.subType=e[1],this.posNum=e[3],this.equipList=e[4],this.chooseType==rt.CHOOSE_Wallet?(this.btn_transfer.label=p.instance.getUILang("Transfer in"),this.box_count.visible=!0,this.tf_title.text=p.instance.getUILang("Select tickets")):(this.heroPk=e[2],this.btn_transfer.label=p.instance.getUILang("Put on"),this.box_count.visible=!1,this.tf_title.text=p.instance.getUILang("Select equipment")))}changePropNum(e){e?this.propValue=Math.min(this.propValue+1,this.propNum):this.propValue=Math.max(this.propValue-1,1),this.txt_num.text=`${this.propValue}`}async initPropList(){await Qt.instance.ownerBag();var e=this.getItemByType();this.propData=e,this.listPanel1.array=e,this.listPanel1.selectedIndex=0,this.listPanel1.visible=!0}handleSelectProp(e){if(e!==-1){this.propValue=1,this.txt_num.text="1";let i=this.listPanel1.selectedItem;i&&(this.propNum=Number(i._m_iNum),console.log(this.propNum))}}showEquipTip(e){if(this.chooseType!==rt.CHOOSE_Wallet){let i=e.data;this.EquipDetailBox.dataSource=i,e.positionX<500?this.EquipDetailBox.x=e.positionX+175:this.EquipDetailBox.x=e.positionX-440,this.EquipDetailBox.visible=!0,this.equipBgBox.visible=!0,this.equipBgBox.on(Laya.Event.CLICK,this,this.hideTips)}}hideTips(){this.EquipDetailBox.visible=!1,this.equipBgBox.visible=!1,this.equipBgBox.off(Laya.Event.CLICK,this,this.hideTips)}async onBtnTramsfer(){let e=this.propData[this.listPanel1.selectedIndex],i=this.propValue;if(i<=0||!e){this.chooseType==rt.CHOOSE_Wallet?Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1166),W.YES):C.instance.notice(p.instance.getLanguage(1282,p.instance.getLanguage(e.itemItem.name)));return}if(this.chooseType==rt.CHOOSE_Wallet)_.intance.event(b.CHANGE_WALLET_PROP,[e,i]),this.close();else if(this.heroPk){let n=this.listPanel1.selectedItem,r=this.subType;this.subType==12&&(r=this.posNum);let s=await w.requestPost("wxgame/equip/wear",{heroPk:this.heroPk,bagPk:n.m_iPk,pos:r});s&&(console.log(s),s.cur.pos=s.pos,this.close(),_.intance.event(Hi.UPDATE_HERO_EQUIP,s.cur))}}getItemByType(){this.items=[];var e;if(this.chooseType==rt.CHOOSE_Wallet){this.subType=7;let r=v.instance.m_packageData.getListBySubType(this.subType),s=v.instance.m_packageData.getListBySubType(13);e=[...r,...s]}else e=v.instance.m_packageData.getListBySubType(this.subType);for(var i=0;i<e.length;i++){var n=e[i];this.equipList&&this.equipList.length>0?this.equipList.indexOf(n.itemItem.id)<0&&this.items.push(n):this.items.push(n)}return this.items}onDisable(){this.btn_subtract.off(Laya.Event.CLICK,this,this.changePropNum),this.btn_add.off(Laya.Event.CLICK,this,this.changePropNum),this.btn_transfer.off(Laya.Event.CLICK,this,this.onBtnTramsfer),this.stage.off(Laya.Event.CLICK,this,this.hideTips),_.intance.off(b.SHOW_EQUIP_TIP,this,this.showEquipTip)}};Vx=d([r6("WY66k0UbQfiwaG80emIzjA")],Vx);var Gx=class extends Laya.Box{};var{regClass:s6}=Laya,Wx=class extends Gx{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.addEvent(),this.setCurrentOutPut(e)}async setCurrentOutPut(e){if(e){let i=I.intance.m_dicItems.get(e.ticketId.toString());this.txt_num.text=""+Pe.formatNumber(e.ticketCount,8),this.img_icon.skin=M.instance.getItemIcon(i.icon),this.img_box.skin="gameIcon/items/itemBg/img_"+i.quality+".png"}else this.txt_num.text="",this.img_icon.skin=null,this.img_box.skin="gameIcon/items/itemBg/img_0.png"}};Wx=d([s6("QLIqcx2YSRWf6b4T0P4N6Q")],Wx);var jx=class extends Laya.Box{};var{regClass:o6}=Laya,zx=class extends jx{set dataSource(e){super.dataSource=e,e&&(this.tf_data.text=e)}onDisable(){}onChange(e){e?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};zx=d([o6("3viWNkWoRRS9EWM3SzguDg")],zx);var Kx=class extends Laya.Dialog{};var Zl=class a{constructor(){this.lastTime=0}static get instance(){return a._instance||(a._instance=new a),a._instance}async recruitItem(t,e,i,n=void 0){if(t.chainType>0)if(e&&e>1)await this.buyItemOnChain(t,t.id,i,n);else{let u=t.cost[0];var r=0;t.commission&&t.commission.length>1&&(r=t.commission[1]);var s=t.cost[1];let m=new Tt(s),h=new Tt(r),y=m.add(h);var o=new Tt(i);let x=y.multiply(o);var l=Number(x.getValue());if(v.instance.getConsumeValue(u)<l){C.instance.notice(p.instance.getLanguage(1840));return}await this.buyItemNormal(t,t.id,i,n)}else await this.buyItemNormal(t,t.id,i,n)}async buyItemNormal(t,e,i,n=void 0){let r=I.intance.m_dicShops.get(e),s=await w.requestPost("wxgame/hero/itemBuy",{shopId:r.id,count:i},!0,!0);s&&(s.reward&&O.intance.openModule(L.RewardGetDialog,s.reward),s.resChange&&v.instance.moneyInfoHander(s.resChange),s.fightHeroPk&&(v.instance.playerDto.fightHeroPk=s.fightHeroPk),_e.instance.hideLoading(),n&&n&&n.run())}async buyItemOnChain(t,e,i,n=void 0){var r=new Date().getTime();if(r-this.lastTime<1e3)return;this.lastTime=r;let s=t.coinType;var o=I.intance.getCurrencyByChainType(s,t.chainType),l=o.chainId;_e.instance.showLoadingByInfo(p.instance.getLanguage(1119));let u;t.type==2?u=o.tiketAddress:t.type==5&&(u=o.skillAddress);let m=K.instance.walletAddress,h=await K.instance.walletClient.getChainId();try{if(h!==l&&!await K.instance.switchChain(l)){this.onEndItemCallback(),console.log("切换失败，请手动切换");return}let Z=o.token;if(!Z){this.onEndItemCallback(),C.instance.notice(p.instance.getLanguage(1177,h));return}if(!u){this.onEndItemCallback(),C.instance.notice(p.instance.getLanguage(1174,h));return}var y=0;t.commission&&t.commission.length>1&&(y=t.commission[1]);var x=t.cost[1];let ne=new Tt(x),J=new Tt(y),ue=ne.add(J);var E=new Tt(i);let se=ue.multiply(E),Ie=await K.instance.getBalance2(Z),Ce=ia(se.getValue()+"",o.tokenDecimals);var S=o.token==0?Ce:ia("0",o.tokenDecimals);if(parseFloat(Ie)<parseFloat(Ce)){this.onEndItemCallback(),he.moneyNotEnought(s);return}if(console.log("判断授权 tokenAddress: "+Z+", chainIDData:"+l),!await K.instance.newAllowanceAddress(u,Z))return console.log("未授权"),this.onEndItemCallback(),C.instance.notice(p.instance.getLanguage(15)),_e.instance.hideLoading(),!1;let et=v.instance.playerDto.pid;var T;if(this.type=t.type,t.type==2){var N=t.goods;this.tid=N,T=await K.instance.walletClient.writeContract({address:u,abi:oe.buyTicket_ABI,functionName:"buyTicket",args:[et,N,i],account:m,value:S})}else if(t.type==5){var F=t.goods;this.tid=F,T=await K.instance.walletClient.writeContract({address:u,abi:oe.buySkillCard_ABI,functionName:"buySkillCard",args:[et,F,i],account:m,value:S})}let me;return me=await K.instance.publicClient.waitForTransactionReceipt({hash:T,pollingInterval:1e3}),console.log(`Tx with hash: ${T}`,me),me&&me.status=="success"?(this.waitGetQuanReward(l,T),console.log(`Tx successful with hash: ${T}`),T):(this.onEndItemCallback(),he.TransactionErrorTip(),!1)}catch(Z){var G=Z.shortMessage;if(G)if(G.indexOf("does not match")!=-1){var Y=K.instance.getChainName(l);G=p.instance.getLanguage(1172,Y),this.onEndItemCallback()}else this.onEndItemCallback();else this.onEndItemCallback();if(console.log(G),C.instance.notice(G),Z instanceof X){let ne=Z.walk(J=>J instanceof $t);if(ne instanceof $t){let J=ne.data?.errorName??"";console.log("============errorName: "+J)}}return null}}onEndItemCallback(t=null){_e.instance.hideLoading(),t&&_.intance.event(b.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,[t])}waitGetQuanReward(t,e){this.chainId=t,this.hashId=e,Laya.timer.loop(2e3,this,this.getItemReward)}async getItemReward(){if(this.type==2||this.type==5){var t;this.type==2?t=1:this.type==5&&(t=2);var e=await w.requestPost("paWallet/scanBuyBonusCheck",{type:t,chainId:this.chainId,hashId:this.hashId}).catch(n=>{}),i=e.status;i>0&&(Laya.timer.clear(this,this.getItemReward),C.instance.notice(p.instance.getLanguage(2e3)),_e.instance.hideLoading(),this.onEndItemCallback(1))}}};var{regClass:l6}=Laya,qx=class extends Kx{constructor(){super();this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.addL=1;this.payType=1}onEnable(){this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.btn_send.on(Laya.Event.CLICK,this,this.buyTicket),_.intance.on(b.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus),this.btn_radio1.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio1]),this.btn_radio2.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio2])}setOpenData(e){if(e){console.log(e),this.shopItem=e[0],this.img_icon.skin=M.instance.getItemIcon(this.shopItem.icon);var i=I.intance.m_dicItems.get(this.shopItem.icon);this.img_box.skin="gameIcon/items/itemBg/img_"+i.quality+".png",this.tf_name.text=p.instance.getLanguage(this.shopItem.title),this.tf_des.text=p.instance.getLanguage(this.shopItem.des),this.tf_price.text=`${this.shopItem.cost[1]}`,this.shopItem.commission&&this.shopItem.commission.length>1?this.tf_commission.text=`${this.shopItem.commission[1]}`:(this.tf_des.y=this.box_commission.y,this.box_commission.visible=!1),this.initRadio()}}initRadio(){if(this.shopItem.chainType>0)if(this.shopItem.type==2){var e=v.instance.getConsumeValue(this.shopItem.cost[0]),i=this.getItemJudgePrice();e>=i?this.selectRadio(1):this.selectRadio(2);let n=I.intance.getGeneralValueById(35);this.lable_text1.text=p.instance.getLanguage(n[0][1]),this.lable_text2.text=p.instance.getLanguage(n[1][1]),this.box_radio.visible=!0}else this.box_radio.visible=!1,this.payType=2,this.initTip();else this.box_radio.visible=!1,this.initTip()}selectRadio(e){this.payType=e;let i=e==1;this.btn_radio1.selected=i,this.btn_radio2.selected=!i,this.lable_text1.color=i?"#ffffff":"#939393",this.lable_text2.color=i?"#939393":"#ffffff",this.initTip()}initTip(){this.payType==2?(this.tf_tip.visible=!0,this.shopItem.type==2?this.tf_tip.text=p.instance.getLanguage(1836):this.shopItem.type==5&&(this.tf_tip.text=p.instance.getLanguage(1837)),this.addL=10,this.img_moneyIcon.skin=M.instance.getMoneyIcon(this.shopItem.coinType)):(this.tf_tip.visible=!1,this.img_moneyIcon.skin=M.instance.getMoneyIcon(this.shopItem.cost[0])),v.instance.pveOpen==1&&this.shopItem.id==2041?(this.addL=100,this.btn_plus.disabled=!0,this.btn_reduce.disabled=!0,this.tf_num.disabled=!0,this.setItemNum()):(this.btn_plus.disabled=!1,this.btn_reduce.disabled=!1,this.tf_num.disabled=!1,this.setItemNum())}onDisable(){_.intance.off(b.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus)}onRefreshItemStatus(){this.close()}handleClickBtn(e){switch(e){case this.btn_radio1:this.selectRadio(1);break;case this.btn_radio2:this.selectRadio(2);break;case this.btn_reduce:this.addL>1&&this.addL--,this.setItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setItemNum();break}}setItemNum(){this.tf_num.text=this.addL+"";var e=0;this.shopItem.commission&&this.shopItem.commission.length>1&&(e=this.shopItem.commission[1]);var i=this.shopItem.cost[1];let n=i+e;var r=Pe.formatNumber(n);let s=new Tt(this.addL),o=new Tt(r),l=s.multiply(o).getValue();this.tf_needMoney.text=`${l}`}getItemJudgePrice(){var e=0;this.shopItem.commission&&this.shopItem.commission.length>1&&(e=this.shopItem.commission[1]);var i=this.shopItem.cost[1];let n=i+e;var r=Pe.formatNumber(n);let s=new Tt(1),o=new Tt(r),l=s.multiply(o).getValue();return Number(l)}changeItemNum(){var e=parseInt(this.tf_num.text);(!e||e<1)&&(e=1),this.addL=e,this.setItemNum()}async buyTicket(){let e=Laya.Handler.create(this,()=>{this.close()});await Zl.instance.recruitItem(this.shopItem,this.payType,this.addL,e)}};qx=d([l6("HVS6mG75Rv-dixx4tHjp2g")],qx);var Yx=class extends Laya.Box{};var{regClass:c6}=Laya,$x=class extends Yx{constructor(){super(...arguments);this.coins=[[3022,2],[3001,2],[3011,2],[3013,4],[3010,2],[3007,4],[3006,6],[3015,2],[3016,2],[3005,0]]}onEnable(){let e=(Laya.stage.width-ie.DESIGN_WIDTH)/2;this.img_coinsBg.right-=e,console.log("dWidth: "+e),this.updateLocalAssets(),_.intance.on(b.ROLE_INFO_CHANGE,this,this.updateLocalAssets),_.intance.on(Mi.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),this.coins=I.intance.getGeneralValueById(19),this.list_coin.array=this.coins}onDisable(){_.intance.off(b.ROLE_INFO_CHANGE,this,this.updateLocalAssets),_.intance.off(Mi.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets)}updateLocalAssets(){this.list_coin.refresh()}};$x=d([c6("7P9MlqipSaG6QoKpQowDbQ")],$x);var Xx=class extends Laya.Dialog{};var{regClass:u6}=Laya,Qx=class extends Xx{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.heroVo=null;this.rentalDto=null;this.coinType=3001;this.rentalTypeDatas=[];this.coinIds=[]}onEnable(){_.intance.on(b.CHANGE_WALLET_HERO,this,this.onHeroChange),this.hero_box.on(Laya.Event.CLICK,this,this.onHeroBoxClick),this.btn_create.on(Laya.Event.CLICK,this,this.onCreate)}async setOpenData(e){e&&e.length>0&&(this.rentalDto=e[0]),this.initContainer()}initContainer(){if(this.rentalDto){this.alertTitle.text=p.instance.getUILang("Modify rental information"),this.heroVo=new _i;var e=this.rentalDto.heroDto;ft.instance.setHeroVoByHeroDto(this.heroVo,e),this.input_amount.text=this.rentalDto.amount+"",this.input_minPeriod.text=this.rentalDto.minPeriod+"",this.input_maxPeriod.text=this.rentalDto.maxPeriod+"",this.input_hoursPeriod.text=this.rentalDto.minPeriod+"",this.rentalDto.pwdStr&&(this.input_pwd.text=this.rentalDto.pwdStr+""),this.input_telegram.text=this.rentalDto.hostPlayer.telegram+"",this.btn_create.label=p.instance.getUILang("Modify"),this.box_postPin.visible=!1,this.btn_create.x=412}else{this.alertTitle.text=p.instance.getUILang("Post rental information");var i;if(this.rentalType||this.rentalType==2){i=I.intance.m_dicHeroRent.get(2);var n=i.timeRange;this.input_minPeriod.text=n[0]+"",this.input_maxPeriod.text=n[1]+""}else{i=I.intance.m_dicHeroRent.get(1);var r=i.timeRange;this.input_hoursPeriod.text=r[0]+""}var s=v.instance.playerDto.telegram;s&&(this.input_telegram.text=s+""),this.btn_create.label=p.instance.getUILang("Post rental"),this.btn_create.x=529}this.showHeroData(),this.initRentalTypeCombo(),this.initCoinCombo()}initRentalTypeCombo(){var e=I.intance.m_dicHeroRent.values;this.rentalTypeDatas=[],e.forEach(r=>{r.enable>0&&this.rentalTypeDatas.push([r.type,p.instance.getLanguage(r.name)])}),console.log("this.rentalTypeDatas: ",this.rentalTypeDatas),this.rentalTypeCombo.selectHandler=new Laya.Handler(this,this.onSelectedRentalType),this.rentalTypeCombo.dataSource=this.rentalTypeDatas;let i=-1,n=0;if(this.rentalTypeDatas.length>0&&(i=0),this.rentalDto)for(let r of this.rentalTypeDatas){if(r[0]==this.rentalDto.rentalType){i=n;break}n++}this.rentalTypeCombo.selectedIndex=i}onSelectedRentalType(e){e!=-1&&(this.rentalType=this.rentalTypeDatas[e][0],console.log("您选中了 rentalType"+this.rentalType),this.setRoomInfo())}setRoomInfo(){var e=this.rentalType;if(e==1?(this.input_amount.text="0",this.coinCombo.selectedIndex=0,this.input_amount.disabled=!0,this.coinCombo.disabled=!0,this.box_hour.visible=!0,this.box_day.visible=!1):(this.input_amount.disabled=!1,this.coinCombo.disabled=!1,this.box_hour.visible=!1,this.box_day.visible=!0),!this.rentalDto){var i;if(this.rentalType==2){i=I.intance.m_dicHeroRent.get(2);var n=i.timeRange;this.input_minPeriod.text=n[0]+"",this.input_maxPeriod.text=n[1]+"",this.input_amount.text="1"}else{i=I.intance.m_dicHeroRent.get(1);var r=i.timeRange;this.input_hoursPeriod.text=r[0]+"",this.input_amount.text="0"}}}initCoinCombo(){var e=I.intance.m_dicHeroRent.get(2);this.coinIds=e.rentToken;var i=[];this.coinIds.forEach(s=>{var o=I.intance.m_dicItems.get(s);i.push(p.instance.getLanguage(o.name))}),this.coinCombo.selectHandler=new Laya.Handler(this,this.onSelectCoin),this.coinCombo.dataSource=i;let n=-1,r=0;if(i.length>0&&(n=0),this.rentalDto)for(let s of this.coinIds){if(s==this.rentalDto.coinType){n=r;break}r++}this.coinCombo.selectedIndex=n}onSelectCoin(e){e!=-1&&(this.coinType=this.coinIds[e],console.log("您选中了 coinType"+this.coinType))}onHeroChange(e){this.heroVo=e,this.showHeroData()}onDisable(){this.removeEvent()}removeEvent(){this.hero_box.off(Laya.Event.CLICK,this,this.onHeroBoxClick),this.btn_create.off(Laya.Event.CLICK,this,this.onCreate),_.intance.off(b.CHANGE_WALLET_HERO,this,this.onHeroChange)}onHeroBoxClick(){O.intance.openModule(L.WalletChooseHeroDialog,[-1])}async onCreate(){if(We.instance.inMinWaiting){C.instance.notice(p.instance.getLanguage(1187));return}if(!this.heroVo){C.instance.notice(p.instance.getLanguage(1671));return}var e=parseFloat(this.input_amount.text),i;let n=parseInt(this.input_maxPeriod.text);var r;if(this.rentalType==2){if(!(e>0)){C.instance.notice(p.instance.getLanguage(1670));return}i=parseInt(this.input_minPeriod.text),r=I.intance.m_dicHeroRent.get(2);var s=r.timeRange;if(Number.isNaN(i)||i<s[0]){C.instance.notice(p.instance.getLanguage(1667,s[0]));return}if(Number.isNaN(i)||n>s[1]){C.instance.notice(p.instance.getLanguage(1666,s[1]));return}if(n<i){C.instance.notice(p.instance.getLanguage(1668));return}}else{i=parseInt(this.input_hoursPeriod.text),console.log("minPeriod: ",i),r=I.intance.m_dicHeroRent.get(1);var o=r.timeRange;if(Number.isNaN(i)||i<o[0]||i>o[1]){C.instance.notice(p.instance.getLanguage(1669,o[0],o[1]));return}}let l=this.input_telegram.text;if(l==""){C.instance.notice(p.instance.getLanguage(1672));return}let u=this.input_pwd.text,m=this.input_postPin.text,h=this.heroVo.pk;var y=0;if(this.rentalDto)y=this.rentalDto.id;else if(m==""){C.instance.notice(p.instance.getLanguage(1673));return}var x={pk:h,rentalType:this.rentalType,minPeriod:i,maxPeriod:n,amount:e,coinType:this.coinType,telegram:l,pwd:u,postPin:m,rentId:y};try{var E="wxgame/hero/postRental";this.rentalDto&&(E="wxgame/hero/updateRental");var S=await w.requestPost(E,x);S&&(C.instance.notice(p.instance.getLanguage(2e3)),this.heroVo.pk==v.instance.playerDto.fightHeroPk&&(v.instance.playerDto.fightHeroPk=""),Laya.timer.once(200,this,()=>{_.intance.event(b.CREATE_SUB_WALLET_SUCCESS)}),this.close())}catch{}}showHeroData(){if(this.heroVo){this.img_back.skin=M.instance.getHeroBackIcon(this.heroVo.heroItem.quality),this.img_front.skin=M.instance.getHeroFrontIcon(this.heroVo.heroItem.quality),this.img_hero.skin=this.heroVo.simgurl,this.tf_name.text=qe.shortHeroStr(this.heroVo.name);let e=this.heroVo.heroItem.level+"";ft.instance.setStar(this,e),this.box_show.visible=!0,this.img_back.visible=!0,this.img_noHero.visible=!1}else this.box_show.visible=!1,this.img_back.visible=!1,this.img_noHero.visible=!0}};Qx=d([u6("eequnT3KT7SdRQE-AcHqBw")],Qx);var Jx=class extends Laya.Box{};var{regClass:p6}=Laya,Zx=class extends Jx{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.heroVo=e,this.heroVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.heroSk.dataSource=this.heroVo,this.tf_name.text=qe.shortHeroStr(this.heroVo.name);let e=this.heroVo.heroItem.level+"";ft.instance.setStar(this,e)}};Zx=d([p6("IcuwbMwvRKqMyiXxDzW-dA")],Zx);var e0=class extends Laya.Dialog{};var{regClass:m6}=Laya,t0=class extends e0{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){this.initContainer(),ct.instance.playSoundByName(ct.soundName32)}initContainer(){var e=Bt.instance.getOneItem();e&&this.showItem(e)}showItem(e){let i=this.heroListItem;i.dataSource=e}onDisable(){_.intance.event(b.EVENT_CHECK_REMAIN,L.HeroGetDialog)}};t0=d([m6("mrqJhWahTxuTjeSGIs559Q")],t0);var i0=class extends Laya.Dialog{};var{regClass:h6}=Laya,a0=class extends i0{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.rentalDto=null}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_cancel.on(Laya.Event.CLICK,this,this.onCancel),this.btn_modify.on(Laya.Event.CLICK,this,this.onModify)}async setOpenData(e){e&&(this.rentalDto=e),this.initContainer()}initContainer(){if(this.rentalDto){if(this.rentalHeroListItem.needPop=!0,this.rentalHeroListItem.dataSource=this.rentalDto,this.tf_name.text=this.rentalDto.hostPlayer.name+"",this.rentalDto.rentalType==1)this.tf_amount.text=p.instance.getUILang("FREE"),this.tf_period.text=p.instance.getLanguage(1659,this.rentalDto.minPeriod);else{var e=I.intance.m_dicItems.get(this.rentalDto.coinType),i=p.instance.getLanguage(e.name),n=Pe.formatNumber(this.rentalDto.amount)+"",r=p.instance.getLanguage(1657,n,i);this.tf_amount.text=r,this.tf_period.text=p.instance.getLanguage(1658,this.rentalDto.minPeriod,this.rentalDto.maxPeriod)}this.tf_telegram.text="@"+this.rentalDto.hostPlayer.telegram}}onCopy(){let e=this.tf_telegram.text;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}onModify(){O.intance.openModule(L.CreateRentalDialog,[this.rentalDto])}async onCancel(){try{var e=await w.requestPost("wxgame/hero/cancelRental",{rentId:this.rentalDto.id});e&&(C.instance.notice(p.instance.getLanguage(2e3)),this.close())}catch{}}};a0=d([h6("1SOPEqweRfCcPk1cmtAm_w")],a0);var n0=class extends Laya.Dialog{};var r0=class a{constructor(){this.lastTime=0}static get instance(){return a._instance||(a._instance=new a),a._instance}async buyItemOnChain(t,e,i,n=void 0){var r=new Date().getTime();if(r-this.lastTime<1e3)return;this.lastTime=r;let s=t.coinType;var o=I.intance.getRentCurrency(s),l=o.chainId;_e.instance.showLoadingByInfo(p.instance.getLanguage(1119));let u=o.rentNftAddress,m=K.instance.walletAddress,h=await K.instance.walletClient.getChainId();try{if(h!==l&&!await K.instance.switchChain(l)){this.onEndItemCallback(),console.log("===>> 切换失败，请手动切换");return}let te=o.token;if(!te){this.onEndItemCallback(),C.instance.notice(p.instance.getLanguage(1177,h));return}if(!u){this.onEndItemCallback(),C.instance.notice(p.instance.getLanguage(1174,h));return}var y=0,x=t.amount;let et=new Tt(x),me=new Tt(y),ke=et.add(me);var E=new Tt(i);let Me=ke.multiply(E);console.log("===>> 获取当前余额 tokenAddress: "+te+", chainIDData:"+l);let V=await K.instance.getBalance2(te),Ye=ia(Me.getValue()+"",o.tokenDecimals);var S=o.token==0?Ye:ia("0",o.tokenDecimals);if(parseFloat(V)<parseFloat(Ye)){this.onEndItemCallback(),he.moneyNotEnought(s);return}if(console.log("===>> 判断授权 tokenAddress: "+te+", chainIDData:"+l+", need:"+Ye+", have:"+V+", 转换后 need:"+ii(Ye,o.tokenDecimals)+", have:"+ii(V,o.tokenDecimals)),!await K.instance.newAllowanceAddress(u,te))return console.log("===>> 未授权"),this.onEndItemCallback(),C.instance.notice(p.instance.getLanguage(15)),_e.instance.hideLoading(),!1;let lt=v.instance.playerDto.pid;var T={rentId:e.rentId,day:e.day,pwd:e.pwd,telegram:e.telegram,token:o.token,chainId:l};let yt=await w.requestPost("wxgame/hero/buyRentChain",T).catch(Ft=>{console.log("===>> 检验失败"),this.onEndItemCallback(),_e.instance.hideLoading()});if(!yt)return!1;var N=yt.sender,F=yt.to,G=yt.token;let qt=yt.amount,Vt=BigInt(qt.toString());var Y=yt.orderId,Z=e.day,ne=yt.deadline,J=yt.signature,ue=Number(Vt)==Number(Ye);if(console.log("===>> 服务端: amount: "+Vt+", 客户端: need:"+Ye+", 是否一致:"+ue+", signature:"+J),!ue||J==""||Y<=0)return C.instance.notice(p.instance.getLanguage(2001)),console.log("===>> 签名失败: 【amount不一致】 或者 【签名为空】 或者 【orderId是0】 orderId:"+Y),this.onEndItemCallback(),_e.instance.hideLoading(),!1;var se=await K.instance.walletClient.writeContract({address:u,abi:oe.rentNft_ABI,functionName:"rent",args:[N,F,G,Vt,Y,Z,ne,J],account:m,value:S});let at;return at=await K.instance.publicClient.waitForTransactionReceipt({hash:se,pollingInterval:1e3}),console.log(`Tx with hash: ${se}`,at),at&&at.status=="success"?(this.waitGetQuanReward(l,se),console.log(`Tx successful with hash: ${se}`),se):(this.onEndItemCallback(),he.TransactionErrorTip(),!1)}catch(te){this.onEndItemCallback();var Ie=te.shortMessage;if(Ie&&Ie.indexOf("does not match")!=-1){var Ce=K.instance.getChainName(l);Ie=p.instance.getLanguage(1172,Ce)}if(console.log(Ie),C.instance.notice(Ie),te instanceof X){let et=te.walk(me=>me instanceof $t);if(et instanceof $t){let me=et.data?.errorName??"";console.log("===>> ============errorName: "+me)}}return null}}onEndItemCallback(t=null){_e.instance.hideLoading(),t&&_.intance.event(b.EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS,[t])}waitGetQuanReward(t,e){this.chainId=t,this.hashId=e,Laya.timer.loop(2e3,this,this.getItemReward)}async getItemReward(){var t=3,e=await w.requestPost("paWallet/scanBuyBonusCheck",{type:t,chainId:this.chainId,hashId:this.hashId}).catch(n=>{}),i=e.status;e&&i>0&&(Laya.timer.clear(this,this.getItemReward),this.onEndItemCallback(1))}};var{regClass:d6}=Laya,s0=class extends n0{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.rentalDto=null;this.currencyAddressItem=null;this.addL=1}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.btn_rent.on(Laya.Event.CLICK,this,this.onBuyRent),_.intance.on(b.EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS,this,this.onRefreshRentStatus)}async setOpenData(e){e&&(this.rentalDto=e),this.initContainer()}initContainer(){if(this.rentalDto){if(this.rentalHeroListItem.needPop=!0,this.rentalHeroListItem.dataSource=this.rentalDto,this.tf_name.text=this.rentalDto.hostPlayer.name+"",this.rentalDto.rentalType==1)this.tf_amount.text=p.instance.getUILang("FREE"),this.tf_period.text=p.instance.getLanguage(1659,this.rentalDto.minPeriod);else{var e=I.intance.m_dicItems.get(this.rentalDto.coinType),i=p.instance.getLanguage(e.name),n=Pe.formatNumber(this.rentalDto.amount)+"",r=p.instance.getLanguage(1657,n,i);this.tf_amount.text=r,this.tf_period.text=p.instance.getLanguage(1658,this.rentalDto.minPeriod,this.rentalDto.maxPeriod),this.currencyAddressItem=I.intance.getRentCurrency(this.rentalDto.coinType)}if(this.tf_telegram.text="@"+this.rentalDto.hostPlayer.telegram,this.rentalDto.clientPlayer?this.tf_clientAddress.text=this.rentalDto.clientPlayer.address:this.tf_clientAddress.text=K.instance.walletAddress,this.addL=this.rentalDto.minPeriod,this.setItemNum(),this.rentalDto.rentalType==1)this.box_count.disabled=!0,this.tf_days.text=p.instance.getUILang("Hours"),this.img_coinType.visible=!1;else{this.box_count.disabled=!1,this.tf_days.text=p.instance.getUILang("Hours");let o=this.rentalDto.coinType;this.img_coinType.skin=M.instance.getMoneyIcon(o),this.img_coinType.visible=!0}var s=v.instance.playerDto.telegram;s&&(this.input_telegram.text=s+"")}}onCopy(){let e=this.tf_telegram.text;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}handleClickBtn(e){switch(e){case this.btn_reduce:this.addL>1&&this.addL--,this.onBtnchangeItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.onBtnchangeItemNum();break}}onBtnchangeItemNum(){console.log("changeItemNum");var e=this.addL;!e||e<this.rentalDto.minPeriod?e=this.rentalDto.minPeriod:(!e||e>this.rentalDto.maxPeriod)&&(e=this.rentalDto.maxPeriod),this.addL=e,this.setItemNum()}setItemNum(){this.tf_num.text=this.addL+"";let e=new Tt(this.addL),i=new Tt(this.rentalDto.amount);var n=.05,r=I.intance.m_dicHeroRent.get(2);this.currencyAddressItem?n=0:n=r.commission*.01;let s=new Tt(1+n),o=e.multiply(i).multiply(s).getValue();this.rentalDto.rentalType==1?this.tf_needMoney.text=p.instance.getUILang("FREE"):this.tf_needMoney.text=`${o}`}changeItemNum(){console.log("changeItemNum");var e=parseInt(this.tf_num.text);!e||e<this.rentalDto.minPeriod?e=this.rentalDto.minPeriod:(!e||e>this.rentalDto.maxPeriod)&&(e=this.rentalDto.maxPeriod),this.addL=e,this.setItemNum()}async onBuyRent(){let e=this.input_telegram.text;if(e==""){C.instance.notice(p.instance.getLanguage(1672));return}let i=this.input_pwd.text;var n=0;this.rentalDto&&(n=this.rentalDto.id);var r={rentId:n,day:this.addL,pwd:i,telegram:e};if(this.currencyAddressItem){let o=Laya.Handler.create(this,this.onRefreshRentStatus);await r0.instance.buyItemOnChain(this.rentalDto,r,this.addL,o)}else try{var s=await w.requestPost("wxgame/hero/buyRent",r);s&&this.onRefreshRentStatus()}catch{}}onRefreshRentStatus(){C.instance.notice(p.instance.getLanguage(2e3)),this.close()}onDisable(){_.intance.off(b.EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS,this,this.onRefreshRentStatus)}};s0=d([d6("LmvdC_zJSDCFyZNK7p5Jhw")],s0);var o0=class extends Laya.Dialog{};var{regClass:f6}=Laya,l0=class extends o0{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER;this.rentalDto=null}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_clientCopy.on(Laya.Event.CLICK,this,this.onClientCopy)}async setOpenData(e){e&&(this.rentalDto=e),this.initContainer()}initContainer(){if(this.rentalDto){if(v.instance.playerDto.pid==this.rentalDto.hostPlayer.id?this.alertTitle.text=p.instance.getUILang("My leased NFT information"):this.rentalDto.clientPlayer&&v.instance.playerDto.pid==this.rentalDto.clientPlayer.id?this.alertTitle.text=p.instance.getUILang("My rented NFT information"):this.alertTitle.text=p.instance.getUILang("Rented NFT information"),this.rentalHeroListItem.needPop=!0,this.rentalHeroListItem.dataSource=this.rentalDto,this.tf_name.text=this.rentalDto.hostPlayer.name+"",this.rentalDto.rentalType==1)this.tf_amount.text=p.instance.getUILang("FREE"),this.tf_period.text=p.instance.getLanguage(1659,this.rentalDto.minPeriod);else{var e=I.intance.m_dicItems.get(this.rentalDto.coinType),i=p.instance.getLanguage(e.name),n=Pe.formatNumber(this.rentalDto.amount)+"",r=p.instance.getLanguage(1657,n,i);this.tf_amount.text=r,this.tf_period.text=p.instance.getLanguage(1658,this.rentalDto.minPeriod,this.rentalDto.maxPeriod)}if(this.tf_telegram.text="@"+this.rentalDto.hostPlayer.telegram,this.rentalDto.clientPlayer){this.tf_clientName.text=this.rentalDto.clientPlayer.name,this.tf_clientTelegram.text="@"+this.rentalDto.clientPlayer.telegram,this.tf_clientAddress.text=this.rentalDto.clientPlayer.address;var s=fe.formatTimeStamp(this.rentalDto.startTime,"YY-MT-DD HH:MM:SS")+" ~ "+fe.formatTimeStamp(this.rentalDto.endTime,"YY-MT-DD HH:MM:SS");if(this.rentalDto.rentalType==1){var o=(this.rentalDto.endTime-this.rentalDto.startTime)/1e3/3600,l=Math.floor(o);this.tf_clientPeriod.text=s+`
(`+p.instance.getLanguage(1659,l)+")",this.tf_clientAmount.text=p.instance.getUILang("FREE"),this.img_coinType.visible=!1}else{var o=(this.rentalDto.endTime-this.rentalDto.startTime)/1e3/3600,l=Math.floor(o);this.tf_clientPeriod.text=s+`
(`+p.instance.getLanguage(1659,l)+")";var e=I.intance.m_dicItems.get(this.rentalDto.coinType),i=p.instance.getLanguage(e.name);this.tf_clientAmount.text=Pe.formatNumberStr(this.rentalDto.totalAmount,8)+" "+i,this.img_coinType.visible=!1}var u=(this.rentalDto.endTime-v.instance.m_serverTime)/1e3;u<0&&(u=0),this.tf_clientRemain.text=fe.formatWithDay(u)}}}onCopy(){let e=this.tf_telegram.text;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}onClientCopy(){let e=this.tf_clientTelegram.text;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}};l0=d([f6("fu0MF2szTCSq2tJ6Bpd2Bg")],l0);var ec=class extends Laya.Box{};var{regClass:y6}=Laya,c0=class extends ec{constructor(){super();this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.shopItem=e,this.shopItem&&(this.addEvent(),this.setCurrentOutPut())}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}onDisable(){this.off(Laya.Event.CLICK,this,this.toDetail)}async setCurrentOutPut(){let e=this.BagItem.getChildByName("selectBox");e.visible=!1,this.BagItem.dataSource=this.shopItem}toDetail(){console.log(this.x),this.shopItem&&(this.shopItem.type===rt.TYPE_Equipment||this.shopItem.type===rt.TYPE_CARD)&&_.intance.event(b.SHOW_EQUIP_SHOP_TIP,{data:this.shopItem,positionX:this.x})}};c0=d([y6("NeXqnO0GSzGqgAW6thqXMA")],c0);var u0=class extends Laya.Box{};var{regClass:b6}=Laya,p0=class extends u0{constructor(){super(...arguments);this.isAddEvent=!1;this.needPop=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0,this.on(Laya.Event.CLICK,this,this.toDetail))}set dataSource(e){super.dataSource=e,this.rentalDto=e,this.rentalDto&&(this.needPop&&this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){this.rentalDto.status==0?(this.img_jiaobiao.visible=!0,this.img_jiaobiao.skin="res/shop/img_com_weizu.png",this.tf_status.text=p.instance.getUILang("For rent")):this.rentalDto.status==1?(this.img_jiaobiao.visible=!0,this.img_jiaobiao.skin="res/shop/img_com_yizu.png",this.tf_status.text=p.instance.getUILang("Rented")):this.img_jiaobiao.visible=!1,this.rentalDto&&(this.heroVo=new _i,ft.instance.setHeroVoByHeroDto(this.heroVo,this.rentalDto.heroDto),this.heroListItem.needPop=!1,this.heroListItem.dataSource=this.heroVo),this.rentalDto.hostPlayer&&(this.hostPid=this.rentalDto.hostPlayer.id),this.rentalDto.clientPlayer&&(this.clientPid=this.rentalDto.clientPlayer.id)}toDetail(){this.heroVo.id&&(console.log("this.hostPid: ",this.hostPid,"this.clientPid: ",this.clientPid),O.intance.openModule(L.HeroDetailDialog,[this.heroVo,this.hostPid,this.clientPid]))}};p0=d([b6("O6PE6cUjT7yJadU6VROKcg")],p0);var m0=class extends Laya.Box{};var{regClass:g6}=Laya,h0=class extends m0{constructor(){super();this.isAddEvent=!1;this.needPop=!0}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.rentalDto=e,this.rentalDto&&(this.needPop&&this.addEvent(),this.setRentalData())}setRentalData(){if(this.img_my.visible=v.instance.playerDto.pid==this.rentalDto.hostPlayer.id,this.img_lock.visible=this.rentalDto.pwd,this.rentalDto.rentalType==2){this.tf_free.visible=!0;var e=I.intance.m_dicItems.get(this.rentalDto.coinType),i=p.instance.getLanguage(e.name),n=Pe.formatNumber(this.rentalDto.amount)+"",r=p.instance.getLanguage(1657,n,i);this.tf_free.text=r;var s=I.intance.getRentCurrency(this.rentalDto.coinType);this.tf_free.color=s?"#fdd378":"#ffffff",this.tf_period.text=p.instance.getLanguage(1658,this.rentalDto.minPeriod,this.rentalDto.maxPeriod)}else this.tf_free.color="#ffffff",this.tf_free.visible=!0,this.tf_free.text=p.instance.getUILang("FREE"),this.tf_period.text=p.instance.getLanguage(1659,this.rentalDto.minPeriod);this.rentalHeroListItem.dataSource=this.rentalDto}toDetail(){var e=this.parent.parent.parent.parent.parent,i=e.nftTabIndex;console.log("nftTabIndex: "+i),this.rentalDto.status==1?O.intance.openModule(L.MyRentedDialog,this.rentalDto):i==4?O.intance.openModule(L.MyLeasedDialog,this.rentalDto):this.rentalDto.status==0&&(v.instance.playerDto.pid==this.rentalDto.hostPlayer.id?O.intance.openModule(L.MyLeasedDialog,this.rentalDto):O.intance.openModule(L.MyRentalBuyDialog,this.rentalDto))}};h0=d([g6("B3yEIK7uQ02c8r0diwvrqg")],h0);var d0=class extends Laya.Box{};var{regClass:_6}=Laya,f0=class extends d0{constructor(){super();this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.shopItem=e,this.shopItem&&this.setCurrentOutPut()}async setCurrentOutPut(){if(this.tf_name.text=p.instance.getLanguage(this.shopItem.title),this.img_liked.visible=!1,this.img_red_shields_1.visible=!1,this.shopItem.cost.length>1){this.img_const.skin=M.instance.getMoneyIcon(this.shopItem.cost[0]);var e=0;this.shopItem.commission&&this.shopItem.commission.length>1&&(e=this.shopItem.commission[1]);var i=this.shopItem.cost[1];let l=i+e;var n=Pe.formatNumber(l);this.tf_const.text=n+"",this.tf_const.color=this.shopItem.chainType>0?"#fdd378":"#ffffff",this.img_const.visible=!0,this.tf_const.visible=!0,this.img_ask.visible=!1,this.shopItem.type==5?this.gray=!1:this.gray=this.shopItem.open==0,this.disabled=!1}else this.disabled=!0,this.img_const.visible=!1,this.tf_const.visible=!1,this.img_ask.visible=!1;if(this.shopItem.type==1)this.tf_name.color=si.qualityColors[parseInt(this.shopItem.icon)-1],this.img_bg.skin=M.instance.getHeroQuality(this.shopItem.icon),this.img_icon.skin=M.instance.getHeroEggIcon(this.shopItem.icon);else if(this.shopItem.type==4)this.tf_name.color=si.qualityColors[parseInt(this.shopItem.icon)-1],this.img_bg.skin=M.instance.getHeroQuality(this.shopItem.icon),this.img_icon.skin=M.instance.getChestIcon(this.shopItem.icon);else if(this.shopItem.type==5)if(this.shopItem.icon){var r=I.intance.m_dicItems.get(this.shopItem.icon);this.img_bg.skin=M.instance.getHeroQuality(r.quality+""),this.tf_name.color=si.qualityColors[r.quality-1],this.img_icon.skin=M.instance.getItemIcon(this.shopItem.icon),this.img_red_shields_1.visible=!1,this.img_liked.visible=!1;var s=this.shopItem.currLike>=this.shopItem.totalLike;this.tf_const.visible=!0}else{var o=6;this.img_bg.skin=M.instance.getHeroQuality(o+""),this.tf_name.color=si.qualityColors[o-1],this.img_icon.skin="res/shop/img_com_tub.png"}}};f0=d([_6("awS07ko0RBaxCnxXWqiR4g")],f0);var{regClass:L6}=Laya,y0=class extends ec{constructor(){super();this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.shopItem=e,this.shopItem&&(this.addEvent(),this.setCurrentOutPut())}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.buyTicket),this.isAddEvent=!0)}async setCurrentOutPut(){this.tf_name.text=p.instance.getLanguage(this.shopItem.title),this.img_const.skin=M.instance.getMoneyIcon(this.shopItem.chainType>0?this.shopItem.coinType:this.shopItem.cost[0]);var e=0;this.shopItem.commission&&this.shopItem.commission.length>1&&(e=this.shopItem.commission[1]);var i=this.shopItem.cost[1];let n=i+e;var r=Pe.formatNumber(n);if(this.tf_const.text=r+"",this.tf_const.color=this.shopItem.chainType>0?"#fdd378":"#ffffff",this.shopItem.type==2){var s=I.intance.m_dicItems.get(this.shopItem.icon);this.img_bg.skin=M.instance.getItemQualityIcon(s.quality+""),this.tf_name.color=si.qualityColors[s.quality-1],this.img_icon.skin=M.instance.getItemIcon(this.shopItem.icon)}}buyTicket(){O.intance.openModule(L.BuyTicketDialog,[this.shopItem])}};y0=d([L6("din69PYeRbSapMB2H6E06g")],y0);var b0=class extends Laya.Scene{};var{regClass:v6}=Laya,g0=class extends b0{constructor(){super(...arguments);this.currTab=0;this.type=1;this.selectItemId=-1;this.oid=1;this.addL=1;this.price=0;this.isSkReady=!1;this.nftType=1;this.nftTabIndex=1;this.coinTypes=[];this.coinDatas=[]}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onOpened(e){e&&e.length>0&&(this.type=e[0],e[1]!=null&&(this.selectItemId=e[1]),this.onClickTab(this.type))}onEnable(){_.intance.on(b.SHOW_EQUIP_SHOP_TIP,this,this.showEquipTip),_.intance.on(b.EVENT_HERO_DRAW_BACK,this,this.onDrawBack),_.intance.on(b.EVENT_END_HEROBUY,this,this.onWaitHeroInfoBack),_.intance.on(b.EVENT_CHECK_ICON_SELECT,this,this.onCoinSelected);for(let i=0;i<6;i++)this["tab"+i].on(Laya.Event.CLICK,this,this.onTabClick,[i]);for(let i=1;i<5;i++)this["tab_nft_"+i].on(Laya.Event.CLICK,this,this.onNftTabClick,[i]);this.btn_help.on(Laya.Event.CLICK,this,this.onHelp),this.tf_num.on(Laya.Event.BLUR,this,this.setItemNum),this.btn_recruit.on(Laya.Event.CLICK,this,this.onRecruit),this.btn_like.on(Laya.Event.CLICK,this,this.onLike),this.img_icon.on(Laya.Event.CLICK,this,this.onShowImg),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_offers.on(Laya.Event.CLICK,this,this.onOffer),this.btn_create.on(Laya.Event.CLICK,this,this.onCreateRental);for(let i=1;i<7;i++)this["btn_"+i].on(Laya.Event.CLICK,this,this.onClickTab,[i]);this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.listPanel1.vScrollBarSkin="",this.listPanel1.selectHandler=Laya.Handler.create(this,this.onSelectItem,[],!1),this.listPanel2.vScrollBarSkin="",this.listPanel2.selectHandler=Laya.Handler.create(this,this.onSelectItem,[],!1),this.img_sk.on(Laya.Event.PLAYED,this,this.stopAni,[2]),this.box_2.visible=!1,this.initLuckDrawView();let e=(Laya.stage.height-ie.DESIGN_HEIGHT)/2;Laya.timer.loop(1e3,this,this.refreshRedDot),this.img_red_offer.visible=v.instance.getRedDotById(Ae.ROOM_OFFER_CARD)}async onRecruit(){if(this.shopItem.type==1){if(this.shopItem.open==0){C.instance.notice(p.instance.getLanguage(12));return}ie.Debug==2?(this.setChou1Ani("animation"+this.shopItem.icon+"_1"),await Qt.instance.recruit1(this.shopItem.id)):C.instance.notice(p.instance.getLanguage(12))}else{if(this.shopItem.open==0){C.instance.notice(p.instance.getLanguage(12));return}this.shopItem.type==5?O.intance.openModule(L.BuyTicketDialog,[this.shopItem]):await Zl.instance.recruitItem(this.shopItem,null,this.addL)}}onWaitHeroInfoBack(){this.setChou2Ani("animation"+this.shopItem.icon+"_2"),_e.instance.hideLoading()}setTab(e){for(let i=1;i<7;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b",this["btn_"+i].getChildByName("img_tab_icon").skin="res/shop/img_shop_"+i+"_s.png"):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe",this["btn_"+i].getChildByName("img_tab_icon").skin="res/shop/img_shop_"+i+".png")}async initLuckDrawView(){this.destroyed||(this.type?this.onClickTab(this.type):this.onClickTab(1))}async onClickTab(e){if(this.currTab!=e){if(this.setTab(e),this.box_2.visible=!0,this.btn_help.visible=!1,Laya.timer.clear(this,this.getRoomByType),e==1){this.box_6.visible=!1;var i=this.getItemByType(1);this.shopItems=i[0],this.listPanel1.array=this.shopItems,this.listPanel1.selectedIndex=-1,this.listPanel1.selectedIndex=i[1],this.listPanel1.visible=!0,this.listPanel2.visible=!1,this.listPanel3.visible=!1,this.box_middle.visible=!0,this.box_offers.visible=!1,this.listPanel4.visible=!1}else if(e==2)this.box_6.visible=!1,this.selectItemId==-1?this.onTabClick(5):this.selectItemId==5?this.onTabClick(this.selectItemId):this.onTabClick(0),this.listPanel3.visible=!0,this.listPanel2.visible=!1,this.listPanel1.visible=!1,this.box_middle.visible=!1,this.box_offers.visible=!1,this.listPanel4.visible=!1;else if(e==3){this.box_6.visible=!1;var i=this.getItemByType(4);this.shopItems=i[0],this.listPanel1.dataSource=this.shopItems,this.listPanel1.selectedIndex=-1,this.listPanel1.selectedIndex=i[1],this.listPanel1.visible=!0,this.listPanel3.visible=!1,this.listPanel2.visible=!1,this.box_middle.visible=!0,this.box_offers.visible=!1,this.listPanel4.visible=!1}else if(e==4){this.box_6.visible=!1,this.btn_help.visible=!1,await this.getLikeInfo();var i=this.getItemByType(5);this.shopItems=i[0],this.listPanel1.dataSource=this.shopItems,this.listPanel1.selectedIndex=-1,this.listPanel1.selectedIndex=i[1],this.listPanel1.visible=!0,this.listPanel2.visible=!1,this.box_middle.visible=!0,this.listPanel3.visible=!1,this.box_offers.visible=!1,this.listPanel4.visible=!1}else e==5?(this.box_6.visible=!1,this.showOffer(),this.listPanel1.visible=!1,this.listPanel2.visible=!1,this.box_middle.visible=!1,this.listPanel3.visible=!1,this.box_offers.visible=!0,this.listPanel4.selectedIndex=-1):e==6&&(this.list_hero.array=null,this.initCoinCombo(),this.onNftTabClick(1),this.listPanel3.visible=!1,this.listPanel2.visible=!1,this.listPanel1.visible=!1,this.box_middle.visible=!1,this.box_offers.visible=!1,this.listPanel4.visible=!1,this.box_6.visible=!0);this.tabBox.visible=this.listPanel3.visible}}async showOffer(){let e=await w.requestPost("wxgame/offers/getInfo",{});if(e&&e.itemList){this.oid=e.oid,console.log(e);let r=e.itemList;var i=[];for(let s=0;s<r.length;s++){let o;if(r[s]instanceof Array){o=new Xt,o.id=r[s][0],o.count=r[s][1];var n=new Xe(o.id);n.newAddCnt=o.count,i.push(n)}}this.listPanel4.array=i,this.listPanel4.visible=!0,this.btn_offers.disabled=!e.receive,e.receive?this.btn_offers.label="claim with one click":this.btn_offers.label="Claimed"}}async getLikeInfo(){this.likeDic=new ye,this.likedDic=new ye;let e=await w.requestPost("wxgame/dun/info",{});var i=e.itemInfo,n=e.star;i&&i.forEach(r=>{this.likeDic.set(r[0],r)}),n&&n.forEach(r=>{this.likedDic.set(r,!0)})}async onLike(){let e=await w.requestPost("wxgame/dun/star",{id:this.shopItem.id});if(e){var i=e.id,n=e.star;this.likeDic.set(i,[i,n]),this.likedDic.set(i,!0),this.selectItemId=parseInt(this.shopItem.icon);var r=this.getItemByType(5);this.shopItems=r[0],this.listPanel1.dataSource=this.shopItems,this.listPanel1.selectedIndex=-1,this.listPanel1.selectedIndex=r[1],this.listPanel1.visible=!0,this.listPanel2.visible=!1,this.listPanel4.visible=!1,C.instance.notice(p.instance.getLanguage(2e3))}}getItemByType(e,i=3){var n=I.intance.m_dicShops.values,r=[],s=-1,o=0;return n.forEach(l=>{if(l.type==e){if(e==5){var u=this.likeDic.get(l.id),m=this.likedDic.get(l.id);if(u){var h=u[1];l.currLike=h||0,l.liked=!!m}else l.currLike=0,l.liked=!1}if(e==2&&i!==1){var y=I.intance.m_dicItems.get(l.icon);y.quality==i&&r.push(l)}else r.push(l);this.selectItemId!=-1&&parseInt(l.icon)==this.selectItemId&&(s=o,this.selectItemId=-1),o++}}),s==-1&&r.length>0&&(s=0),[r,s]}onSelectItem(e){if(this.shopItem=this.shopItems[e],console.log(this.shopItem),this.shopItem){if(this.tf_name.text=p.instance.getLanguage(this.shopItem.title),this.tf_des.text=p.instance.getLanguage(this.shopItem.des),this.shopItem.cost.length>1){this.img_const.skin=M.instance.getMoneyIcon(this.shopItem.cost[0]),this.addL=1;var i=0;this.shopItem.commission&&this.shopItem.commission.length>1&&(i=this.shopItem.commission[1]);var n=this.shopItem.cost[1];let o=n+i;this.price=Pe.formatNumber(o)}else if(this.shopItem.open==0){C.instance.notice(p.instance.getLanguage(12));return}this.setPriceByNum();var r=this.shopItem.type;if(this.btn_recruit.disabled=!1,this.btn_recruit.visible=!1,this.btn_like.visible=!1,this.img_liked.visible=!1,this.img_const.visible=!1,this.tf_const.visible=!1,this.img_ask.visible=!1,r==1)this.btn_recruit.visible=!0,this.img_const.visible=!0,this.tf_const.visible=!0,ie.Debug<2&&(this.btn_recruit.disabled=!0),this.img_icon.visible=!1,this.img_sk.visible=!0,this.setIdleAni("animation"+this.shopItem.icon+"_0"),this.box_count.visible=!1;else if(r==2)this.btn_recruit.visible=!0,this.img_const.visible=!0,this.tf_const.visible=!0,this.img_icon.skin=M.instance.getItemBigIcon(this.shopItem.icon),this.img_icon.y=60,this.img_icon.visible=!0,this.img_sk.visible=!1,this.box_count.visible=!0;else if(r==4)this.btn_recruit.visible=!0,this.img_const.visible=!0,this.tf_const.visible=!0,this.img_icon.skin=M.instance.getChestBigIcon(this.shopItem.icon),this.img_icon.y=110,this.img_icon.visible=!0,this.img_sk.visible=!1,this.box_count.visible=!1;else if(r==5){this.btn_recruit.visible=!0,this.img_const.visible=!0;var s=this.shopItem.currLike<this.shopItem.totalLike||this.shopItem.open==0;this.tf_const.visible=!0,this.img_ask.visible=!1,this.btn_recruit.gray=!1,this.btn_like.visible=!1,this.img_liked.visible=!1,this.img_red_shields_1.visible=!this.shopItem.liked,this.tf_like.text=this.shopItem.currLike+"/"+this.shopItem.totalLike,this.img_icon.skin=M.instance.getItemBigIcon(this.shopItem.icon),this.img_icon.y=80,this.img_icon.visible=!0,this.img_sk.visible=!1,this.box_count.visible=!1}}else this.tf_name.text="",this.tf_des.text="",this.img_icon.visible=!1,this.img_sk.visible=!1,this.box_count.visible=!1,this.btn_recruit.visible=!1}setItemNum(){var e=parseInt(this.tf_num.text);(!e||e<1)&&(e=1),this.addL=e,this.setPriceByNum()}handleClickBtn(e){switch(e){case this.btn_reduce:this.addL>1&&this.addL--,this.setPriceByNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setPriceByNum();break}}setPriceByNum(){this.tf_num.text=this.addL+"",this.tf_const.text=Pe.filterNumFormat(this.addL*this.price,8,!0)}onShowImg(){if(this.shopItem){var e=this.shopItem.type;if(e==5){var i=M.instance.getItemBigBigIcon(this.shopItem.icon);O.intance.openModule(L.ImgDialog,i)}}}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}stopAni(e){console.log("stopAni: "+e),this.isSkReady||(this.isSkReady=!0,this.callLater(this.stopSk))}stopSk(){this.img_sk.paused(),this.img_sk.stop()}setIdleAni(e){this.isSkReady?(this.img_sk.play(e,!1),this.img_sk.stop()):this.img_sk.animationName=e}setChou1Ani(e){this.isSkReady?this.img_sk.play(e,!0):this.img_sk.animationName=e}setChou2Ani(e){this.isSkReady?this.img_sk.play(e,!1):this.img_sk.animationName=e,Laya.timer.once(800,this,this.openHeroGetView)}openHeroGetView(){Bt.instance.autoPop=!0,fa.instance.startShow(),this.setIdleAni("animation"+this.shopItem.icon+"_0")}onDrawBack(e){}refreshRedDot(){this.img_red_shields.visible=v.instance.getRedDotById(Ae.RED_SHIELDS),this.img_red_6.visible=v.instance.getRedDotById(Ae.RED_RENTAL)}onHelp(){if(this.shopItem){var e=I.intance.m_dicLikeIt.get(this.shopItem.id),i;e&&(i=e.sign);var n=p.instance.getLanguage(1532),r=p.instance.getLanguage(i);O.intance.openModule(L.HelpDialog,[2,n,r])}}startAni(){this.img_sk.paused(),this.img_sk.play(0,!1)}removeEvent(){Laya.timer.clearAll(this),_.intance.off(b.EVENT_HERO_DRAW_BACK,this,this.onDrawBack),_.intance.off(b.EVENT_END_HEROBUY,this,this.onWaitHeroInfoBack),_.intance.off(b.SHOW_EQUIP_SHOP_TIP,this,this.showEquipTip),_.intance.off(b.EVENT_CHECK_ICON_SELECT,this,this.onCoinSelected)}onTabClick(e){for(let i=0;i<6;i++)e==i?(this["tab"+i].skin="res/shop/img_com_tab_1.png",this["tab"+i].getChildByName("tf_tit").color="#143268",this.getTicketDataByIndex(e+1)):(this["tab"+i].skin="",this["tab"+i].getChildByName("tf_tit").color="#79c7fe")}getTicketDataByIndex(e){var i=this.getItemByType(2,e);this.shopItems=i[0],this.listPanel3.dataSource=this.shopItems,this.listPanel3.selectedIndex=-1,this.listPanel3.selectedIndex=i[1],this.listPanel3.scrollTo(i[1])}async onOffer(){let e=await w.requestPost("wxgame/offers/receive",{oid:this.oid});if(e){if(e.reward.length>0){let i=e.reward,n=[];i.forEach(r=>{var s=new Xt;s.id=r.id,s.count=r.count,n.push(s)}),O.intance.openModule(L.RewardGetDialog,n)}this.img_red_offer.visible=!1,this.btn_offers.disabled=!e.receive,e.receive?this.btn_offers.label="claim with one click":this.btn_offers.label="Claimed"}}showEquipTip(e){let i=e.data;this.EquipDetailBox.dataSource=i,e.positionX<418?this.EquipDetailBox.x=e.positionX+200:this.EquipDetailBox.x=e.positionX-460,this.EquipDetailBox.visible=!0,this.equipBgBox.visible=!0,this.equipBgBox.on(Laya.Event.CLICK,this,this.hideTips)}hideTips(){this.EquipDetailBox.visible=!1,this.equipBgBox.visible=!1,this.equipBgBox.off(Laya.Event.CLICK,this,this.hideTips)}onNftTabClick(e){this.list_hero.array=null;for(let i=1;i<5;i++)e==i?(this["tab_nft_"+i].skin="res/shop/img_com_tab (2).png",this["tab_nft_"+i].getChildByName("tf_tit").color="#ffffff",this.getNftDataByIndex(e)):(this["tab_nft_"+i].skin="",this["tab_nft_"+i].getChildByName("tf_tit").color="#84ccff");e==1?this.list_nft_coin.visible=!1:this.list_nft_coin.visible=!1}getNftDataByIndex(e){if(this.btn_create.visible=e==4,this.nftTabIndex=e,e==1){this.nftType=2;var i=this.getRoomByType()}else if(e==2){this.nftType=1;var i=this.getRoomByType()}else if(e==3)var i=this.getRoomByType();else if(e==4)var i=this.getRoomByType();Laya.timer.loop(3e3,this,this.getRoomByType)}showCoinCombo(){this.nftTabIndex==1?this.list_nft_coin.visible=!1:this.list_nft_coin.visible=!1}initCoinCombo(){this.showCoinCombo();var e=I.intance.m_dicHeroRent.get(1),i=e.enable;i||(this.box_tab_3.x=this.tab_nft_2.x,this.tab_nft_2.visible=!1),this.coinTypes=[];var n=I.intance.m_dicHeroRent.get(2),r=n.rentToken;this.coinDatas=[],r.forEach(s=>{this.coinTypes.push(s);var o=I.intance.m_dicItems.get(s);this.coinDatas.push([s,!0,p.instance.getLanguage(o.name)])}),this.list_nft_coin.array=this.coinDatas}onCoinSelected(){this.coinTypes=[],this.coinDatas.forEach(e=>{e[1]&&this.coinTypes.push(e[0])}),console.log("您选中了 coinType"+this.coinTypes),this.getRoomByType()}async getRoomByType(){let e;if(this.nftTabIndex==3){if(e=await w.requestPost("wxgame/hero/myRented",{}),this.destroyed)return}else if(this.nftTabIndex==4){if(e=await w.requestPost("wxgame/hero/myRentedLeased",{}),this.destroyed)return}else if(e=await w.requestPost("wxgame/hero/rentalMarket",{type:this.nftType,coinTypeList:this.coinTypes}),this.destroyed)return;this.list_hero.array=e.list,this.list_hero.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0}onCreateRental(){O.intance.openModule(L.CreateRentalDialog,[])}onDisable(){Laya.timer.clear(this,this.getRoomByType)}};g0=d([v6("IPCUkD5kRse3Gz5tw0Aovw")],g0);var _0=class extends Laya.Image{};var{regClass:x6}=Laya,L0=class extends _0{constructor(){super(...arguments);this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200}init(e){this.skin=M.instance.getFoodIcon(e.icon)}startScalingAnimation(){let e=this.minScale+Math.random()*(this.maxScale-this.minScale),i=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:e,scaleY:e},i,null,Laya.Handler.create(this,()=>{let n=this.minScale+Math.random()*(1-this.minScale),r=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:n,scaleY:n},r,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}onDisable(){Laya.Tween.clearAll(this)}};L0=d([x6("j4yWA5APT7ipho7IOx4ryg")],L0);var v0=class extends Laya.Image{};var{regClass:I6}=Laya,x0=class extends v0{set dataSource(e){this.roomPlayerDto=e,this.roomPlayerDto&&this.setCurrentOutPut()}setCurrentOutPut(){this.skin=M.instance.getSnakeBodyIcon(this.roomPlayerDto.snakeId)}setRotation(e){this.rotation=e}setScale(e){let i=this.width,n=this.height,r=e*2/i,s=e*2/n;this.scaleX=r,this.scaleY=s}getRadio(){return this.width*this.scaleX/2}onDisable(){}};x0=d([I6("Aeyt_emSSaCC6Np5nR_evQ")],x0);var I0=class extends Laya.Sprite{};var{regClass:E6}=Laya,E0=class extends I0{constructor(){super();this.isAddEvent=!1;this.isMe=!1;this.inGround=!1;this.speedRate=1;this.moveSpeed=10;this._speed=10;this.biasSpeed=0;this._roleDirection=-1;this.inControl=!1;this.isStop=!1;this.isLockAni=!1;this.aniChange=!1;this.beyond=!1;this.displacementType=0;this.timeStamp=0;this.currArea=0;this._speedTransitionTime=0;this.flashCount=0}setClientPosLog(e,i){}setServerPosLog(e,i,n,r,s){}get speed(){return this._speed}set speed(e){this._speed=e,this.biasSpeed=Math.round(this.speed*Math.sin(45*Math.PI/180))}get roleDirection(){return this._roleDirection}set roleDirection(e){e!==-4&&(this._roleDirection=e)}set myRoleDirection(e){this.roleDirection!=e&&(this.roleDirection=e)}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){this.roomPlayerDto=e,this.roomPlayerDto&&this.setCurrentOutPut()}setCurrentOutPut(){this.heroSk.skin=M.instance.getSnakeHeadIcon(this.roomPlayerDto.snakeId),this.tf_name.text=qe.abbreviateString(this.roomPlayerDto.userName)}pos(e,i,n){if(super.pos(e,i,n),this.smallHeroImg){var r=q.instance.fromBigToSmall(e,i),s=r[0],o=r[1];this.smallHeroImg.pos(s,o,n)}return this}set visible(e){super.visible=e,this.smallHeroImg&&(this.smallHeroImg.visible=e)}set alpha(e){super.alpha=e,this.smallHeroImg&&(this.smallHeroImg.alpha=e)}onAwake(){}showDamageLabelDetailDelay(e,i,n){Laya.timer.once(i,this,this.showDamageLabelDetail,[e,n],!1)}showDamageLabelDetail(e,i){var n=Laya.Pool.getItemByCreateFun("damageNumber",q.instance.damageNumPrefab.create,q.instance.damageNumPrefab);n.init(e,i),this.addChild(n)}setRotation(e){this.heroSk.rotation=e}setScale(e){let i=this.heroSk.width,n=this.heroSk.height,r=e*2/i,s=e*2/n;this.heroSk.scaleX=r,this.heroSk.scaleY=s}getRadio(){return this.heroSk.width*this.heroSk.scaleX/2}onDisable(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null}destroy(e){this.owner=null,this.roomPlayerDto=null,super.destroy(e)}};E0=d([E6("tWPXV-AGQQ2kGHES5HnI0w")],E0);var w0=class extends Laya.Scene{};var{regClass:w6}=Laya,T0=class extends w0{constructor(){super(...arguments);this.liveNum=0;this.SnakeAINum=5;this.snakeAIArr=[]}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP,q.instance.init()}onOpened(e){var i=B.instance.matchDto.startTime-B.instance.matchDto.nowTime;i>0&&O.intance.openModule(L.MatchReadyView);var n=B.instance.matchDto.arenaId,r=B.instance.matchWatcher;r&&(this.btn_exit.on(Laya.Event.CLICK,this,this.onExitClick),this.img_kill.visible=!1,this.box_skills.visible=!1,this.img_smallMap.on(Laya.Event.CLICK,this,this.onSmallMapClick),v.instance.playerDto.killStatus==1&&(this.btn_banAccount.visible=!0,this.btn_banAccount.on(Laya.Event.CLICK,this,this.onBanAccountClick))),this.btn_exit.visible=r,this.tf_live.visible=r;var s=I.intance.m_dicArenaDic.get(n);B.instance.currArenaItem=s;var o=this.map_1001;q.instance.gameMap=o,q.instance.box_players=this.box_players,q.instance.box_behind=this.box_behind,q.instance.box_front=this.box_front,q.instance.img_smallMap=this.img_smallMap,this.onInitEnd(this),$e.instance.sendCustumEvent(42);var l=B.instance.matchDto.roomId;if(this.arenaNo.text=l+"",B.instance.roomDto){var u=B.instance.roomDto.nodeId;if(u){var m=I.intance.m_dicNodes.get(u);this.nodeDelaySign.dataSource=m,this.nodeDelaySign.startTest()}}this.init()}init(){this.registerEvents(),this.btn_addSpeed.on(Laya.Event.MOUSE_DOWN,this,this.onTouchSpeedUp),this.btn_addSpeed.on(Laya.Event.MOUSE_UP,this,this.onTouchSpeedUp),this.btn_addSpeed.on(Laya.Event.MOUSE_OUT,this,this.onTouchSpeedUp);var e=mn.getInstance(this.gameLayer);xt.instance.createSnakes(),q.instance.createFoods(),e.startGame()}onTouchSpeedUp(e){var i=e.type;e.stopPropagation(),console.log("onTouchSpeedUp"+e.type);let n=mn.getInstance();i===Laya.Event.MOUSE_DOWN?n.updateSpeedRate(we.snackType.SELF,we.snackSpeedRate.speedUp):(i===Laya.Event.MOUSE_UP||i===Laya.Event.MOUSE_OUT)&&(n.updateSpeedRate(we.snackType.SELF,we.snackSpeedRate.default),Vn.clearClickFilter(e.target))}onSmallMapClick(e){var i=new Laya.Point(e.stageX,e.stageY);let n=this.img_smallMap.globalToLocal(i,!1);q.instance.clickSmallMapToMove(n),console.log("onSmallMapClick: ",e.stageX,e.stageY,"====",n.x,n.y)}onStageClick(e){console.log("onStageClick: ",e.stageX,e.stageY,e)}onInitEnd(e){e.initSnake(),e.updateKill(),e.updateBattleCD()}registerEvents(){_.intance.on(b.LENGTH_CHANGE,this,this.updateLength),_.intance.on(b.KILL_SNAKE,this,this.updateKills)}removeEvents(){_.intance.off(b.LENGTH_CHANGE,this,this.updateLength),_.intance.off(b.KILL_SNAKE,this,this.updateKills)}gameLoop(){xt.instance.selfSnack&&(this.updateLength(xt.instance.selfSnack.getSkinLength()),xt.instance.selfSnack.tag&&this.updateKills(xt.instance.selfSnack.tag.kills))}updateKills(e){this.text_kill.text=`${e}`}updateLength(e){this.text_length.text=`${e}`}initSnake(){Laya.timer.frameLoop(1,this,this.gameLoop)}onRestoreData(){var e=mn.getInstance(this.gameLayer);e.clearTimer(),xt.instance.restoreSnakes(),q.instance.updateFoods(),e.startGame()}updateKill(){}getSortPlayer(e){var i=e.slice(),n=i.sort((o,l)=>l.score-o.score),r=[];this.liveNum=0;var s=1;return n.forEach(o=>{o.rankNum=s,o.hp>0&&this.liveNum++,(s<4||o.id==v.instance.playerDto.pid)&&r.push(o),s++}),r}updateBattleCD(){B.instance.matchDto.arenaType==ee.ARENA_TYPE_PVE?(this.list_rank.visible=!1,B.instance.matchCoolDownTime=Math.round((B.instance.matchDto.nowTime-B.instance.matchDto.startTime)/1e3),this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):(B.instance.matchCoolDownTime=Math.round(B.instance.matchDto.remainderCd/1e3),B.instance.matchCoolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):Laya.timer.clear(this,this.onSetCoolTime))}onSetCoolTime(){B.instance.matchDto.arenaType==ee.ARENA_TYPE_PVE?(this.fontClip_reduceTime.value=fe.format(B.instance.matchCoolDownTime,":",!1),this.fontClip_reduceTime.skin="res/match1/fontClip_1.png",B.instance.stopAll||B.instance.matchCoolDownTime++):B.instance.matchCoolDownTime>=0?(this.fontClip_reduceTime.value=fe.format(B.instance.matchCoolDownTime,":",!1),B.instance.matchCoolDownTime>90?this.fontClip_reduceTime.skin="res/match1/fontClip_1.png":B.instance.matchCoolDownTime>10?this.fontClip_reduceTime.skin="res/match1/fontClip_2.png":(this.fontClip_reduceTime.skin="res/match1/fontClip_3.png",this.scaleEffect()),B.instance.stopAll||B.instance.matchCoolDownTime--):(Laya.timer.clear(this,this.onSetCoolTime),Laya.timer.once(1e4,this,this.checkMatchRankData))}checkMatchRankData(){B.instance.checkMatchRankData()}scaleEffect(){var e=this;Laya.Tween.to(this.fontClip_reduceTime,{scaleX:1.3,scaleY:1.3},200,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){Laya.Tween.to(e.fontClip_reduceTime,{scaleX:1,scaleY:1},200,Laya.Ease.linearInOut)}))}updateCharactersOrder(){q.instance.allOrders.sort((e,i)=>e.y-i.y)}onFirstBloodPush(e){var i=e.pid,n=q.instance.matchHeroDic.get(i);let r=n.icon;this.playerIcon_first.headSkin=r,this.img_firstBlood.visible=!0,this.img_firstBlood.alpha=0,this.img_firstBlood.y=-200,Laya.Tween.to(this.img_firstBlood,{y:92,alpha:1},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onFirstBlood1))}onFirstBlood1(){this.zi_firstBlood.scale(1,1),Laya.Tween.to(this.zi_firstBlood,{scaleX:1.5,scaleY:1.5},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onFirstBlood2))}onFirstBlood2(){Laya.Tween.to(this.zi_firstBlood,{scaleX:1,scaleY:1},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onFirstBlood3))}onFirstBlood3(){Laya.Tween.to(this.img_firstBlood,{y:-200,alpha:0},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onFirstBlood4),1500)}onFirstBlood4(){this.img_firstBlood.visible=!1}onMutiKillPush(e){this.fontClip_kill.value=e.kill+"";var i=!1;e.kill>=3?(i=!0,this.img_mutiKill.skin="res/match1/img_kill_3s.png"):this.img_mutiKill.skin="res/match1/img_kill_2s.png";var n=e.pid,r=q.instance.matchHeroDic.get(n);let s=r.icon;this.playerIcon_second.headSkin=s,this.img_mutiKill.visible=!0,this.img_mutiKill.alpha=0,this.img_mutiKill.y=-200,Laya.Tween.to(this.img_mutiKill,{y:175,alpha:1},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onMutiKill1,[i]))}onMutiKill1(e){this.zi_mutiKill.scale(1,1),e?Laya.Tween.to(this.zi_mutiKill,{scaleX:1.5,scaleY:1.5},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onMutiKill2)):this.onMutiKill3(2e3)}onMutiKill2(){Laya.Tween.to(this.zi_mutiKill,{scaleX:1,scaleY:1},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onMutiKill3,[1500]))}onMutiKill3(e){Laya.Tween.to(this.img_mutiKill,{y:-200,alpha:0},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onMutiKill4),e)}onMutiKill4(){this.img_mutiKill.visible=!1}onGameSceneGray(){this.matchBox.gray=!0}onBanAccountClick(){O.intance.openModule(L.BanAccountView)}async onExitClick(){var e=B.instance.matchWatcher;e?await w.requestPost("wxgame/room/leave",{roomId:B.instance.matchDto.roomId})?(gt.instance.isMatching=!1,this.setToAirdropScene()):C.instance.notice(p.instance.getLanguage(135)):console.log("不是观察者，不能退出")}setToAirdropScene(){q.instance.arenaType=B.instance.matchDto.arenaType,q.instance.arenaType==ee.ARENA_TYPE_PVE?ge.intance.setCurrentScene(ae.M_SCENE_PVE):ge.intance.setCurrentScene(ae.M_SCENE_AIRDROP)}onEnable(){console.log("MatchScene onEnable"),_.intance.on(b.UPDATE_KILL_NUM,this,this.updateKill),_.intance.on(b.EVENT_RESTORE_DATA,this,this.onRestoreData),_.intance.on(b.EVENT_FirstBlood,this,this.onFirstBloodPush),_.intance.on(b.EVENT_MutiKill,this,this.onMutiKillPush),_.intance.on(b.EVENT_GameScene_Gray,this,this.onGameSceneGray),Laya.stage.on(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.stage.on(Laya.Event.KEY_DOWN,this,e=>{e.keyCode===Laya.Keyboard.X&&uo.getInstance().toggleVisible()})}onWindowFocus(){q.instance.sendRestoreData()}onDisable(){_.intance.off(b.UPDATE_KILL_NUM,this,this.updateKill),_.intance.off(b.EVENT_RESTORE_DATA,this,this.onRestoreData),_.intance.off(b.EVENT_FirstBlood,this,this.onFirstBloodPush),_.intance.off(b.EVENT_MutiKill,this,this.onMutiKillPush),_.intance.off(b.EVENT_GameScene_Gray,this,this.onGameSceneGray),this.removeEvents(),Laya.stage.off(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.timer.clearAll(this),B.instance.clearData()}};T0=d([w6("0r0gyiRERf6yXTGaGqWBvg")],T0);var C0=class extends Laya.Dialog{};var{regClass:T6}=Laya,S0=class extends C0{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_POP;this.m_iPositionType=A.CENTER}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.initContainer()}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList()}handleSelectHead(e){if(e!=-1){let i=this.list_head.selectedItem.id;v.instance.guildIcon=i,this.unionIcon.headSkin=v.instance.guildIcon}}createHeadList(){let e=I.intance.m_dicIconBadge;this.list_head.array=e.values,this.list_head.visible=!0;let i=-1,n=0;this.unionIcon.headSkin=v.instance.guildIcon;for(let r of e.values){if(r.id==v.instance.guildIcon){i=n;break}n++}this.list_head.selectedIndex=i}onRegister(){let e=v.instance.guildIcon;_.intance.event(b.EVENT_MODIFY_HEAD,[e]),this.close()}};S0=d([T6("VhAfw9RDSVu06yGY3eOJbg")],S0);var D0=class extends Laya.Dialog{};var{regClass:C6}=Laya,k0=class extends D0{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER}onEnable(){_.intance.on(b.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_change.on(Laya.Event.CLICK,this,this.onChangeHead),this.btn_apply.on(Laya.Event.CLICK,this,this.onApply)}setOpenData(e){if(console.log("setOpenData: ",e),e){var i=e[0];this.onSetUnionInfo(i),this.subUnionDto=e[1],this.onSetSubUnionInfo(this.subUnionDto)}}onBack(){this.close()}onSetUnionInfo(e){e&&(this.tf_guildName.text=p.instance.getMultiLan(e.unionName)),this.tf_heroNum.text=v.instance.m_heroData.getCount()+"",this.tf_address.text=qe.formatWalletAddress(K.instance.walletAddress)}onSetSubUnionInfo(e){if(this.subUnionDto){this.input_name.text=p.instance.getMultiLan(e.unionName),this.textArea_des.text=p.instance.getMultiLan(e.desc),this.input_address.text=e.collectionToken,this.unionIcon.headSkin=e.icon;var i=e.status;this.onSetState(i)}else this.unionIcon.headSkin=v.instance.guildIcon,this.onSetState(0)}onSetState(e){e==1?(this.img_underReview.visible=!0,this.img_notPassed.visible=!1,this.btn_apply.visible=!1):e==2?(this.img_underReview.visible=!1,this.img_notPassed.visible=!0,this.btn_apply.visible=!0):(this.img_underReview.visible=!1,this.img_notPassed.visible=!1,this.btn_apply.visible=!0)}onChangeModifyHead(e){v.instance.guildIcon=e,this.unionIcon.headSkin=e}onChangeHead(){O.intance.openModule(L.ChangeUnionIconDialog)}async onApply(){let e=this.input_name.text,i=this.textArea_des.text,n=this.input_address.text;if(e=e.trim(),!v.instance.guildIcon){C.instance.notice(p.instance.getLanguage(1189));return}if(e==""){C.instance.notice(p.instance.getLanguage(31));return}if(i==""){C.instance.notice(p.instance.getLanguage(1190));return}if(n==""){C.instance.notice(p.instance.getLanguage(1191));return}let r={icon:v.instance.guildIcon,name:e,intro:i,recAddress:n};var s=await w.requestPost("wxgame/union/create",r);if(s&&s.unionBaseDto){var o=s.unionBaseDto.status;this.onSetState(o),C.instance.notice(p.instance.getLanguage(1192)),_.intance.event(b.EVENT_SUB_GUILD_UPDATE)}}onDisable(){this.removeEvent()}removeEvent(){_.intance.off(b.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead)}};k0=d([C6("K1XqPbcNQUGnysSD4yhBLQ")],k0);var A0=class extends Laya.Dialog{};var{regClass:S6}=Laya,M0=class extends A0{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER}onEnable(){this.btn_memberList.on(Laya.Event.CLICK,this,this.onShowMemberList),this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_applicationList.on(Laya.Event.CLICK,this,this.onShowApplicationList),this.btn_referral.on(Laya.Event.CLICK,this,this.onShowReferralList),this.refreshApplyBtnRed(),Laya.timer.loop(1e3,this,this.refreshApplyBtnRed)}setOpenData(e){if(console.log("setOpenData: ",e),e){var i=e[0];this.onSetUnionInfo(i),this.subUnionDto=e[1],this.onSetSubUnionInfo(this.subUnionDto)}}onShowApplicationList(){O.intance.openModule(L.UnionMemberApplyView,this.subUnionDto.id)}onShowReferralList(){O.intance.openModule(L.UnionReferralView,this.subUnionDto.id)}onBack(){this.close()}onShowMemberList(){this.subUnionDto&&O.intance.openModule(L.UnionMemberView,[this.subUnionDto,!0])}onSetUnionInfo(e){e&&(this.tf_guildName.text=p.instance.getMultiLan(e.unionName)),this.tf_heroNum.text=v.instance.m_heroData.getCount()+"",this.tf_address.text=qe.formatWalletAddress(K.instance.walletAddress)}refreshApplyBtnRed(){this.img_red_1.visible=v.instance.getRedDotById(Ae.RED_GUILD_APPLY)}onSetSubUnionInfo(e){e?(this.unionIcon.dataSource=e,this.tf_name.text=p.instance.getMultiLan(e.unionName),this.tf_des.text=p.instance.getMultiLan(e.desc),this.tf_lv.text=p.instance.getUILang("LV.")+e.lv,this.tf_num.text="<font color='#25ff63'>"+e.memberNum+"</font>/"+e.maxMemberNum,this.img_lvIcon.skin=M.instance.getUnionLvIcon(e.lv),this.box_show.visible=!0,this.tf_receiveAddress.text=qe.formatWalletAddress(e.collectionToken),this.btn_applicationList.visible=e.leader==v.instance.playerDto.pid,this.btn_referral.visible=e.leader==v.instance.playerDto.pid):this.box_show.visible=!1}onDisable(){Laya.timer.clearAll(this)}};M0=d([S6("qhJFEWQoRbixaYt5MGd9TQ")],M0);var B0=class extends Laya.Scene{};var{regClass:D6}=Laya,R0=class extends B0{constructor(){super(...arguments);this.currTab=0;this.currUnionId=1;this.createStatus=0}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onOpened(e){this.box_show.visible=!1,this.currUnionId=e,this.initLuckDrawView()}onEnable(){_.intance.on(b.EVENT_SUB_GUILD_UPDATE,this,this.initSubGuild),this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_apply.on(Laya.Event.CLICK,this,this.onApply),this.btn_memberList.on(Laya.Event.CLICK,this,this.onShowMemberList),this.btn_guildList.on(Laya.Event.CLICK,this,this.onShowGuildList),this.btn_applicationList.on(Laya.Event.CLICK,this,this.onShowApplicationList),this.btn_referral.on(Laya.Event.CLICK,this,this.onShowReferralList),Laya.timer.loop(1e3,this,this.refreshApplyBtnRed)}refreshApplyBtnRed(){!this.btn_apply.disabled&&this.tf_createSub.text==p.instance.getUILang("My Guild")?this.img_red_1.visible=v.instance.getRedDotById(Ae.RED_GUILD_APPLY):this.img_red_1.visible=!1,this.btn_applicationList.disabled?this.img_red_2.visible=!1:this.img_red_2.visible=v.instance.getRedDotById(Ae.RED_GUILD_APPLY)}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}onApply(){this.createStatus==2?this.subUnionDto.status==0?O.intance.openModule(L.MySubUnionView,[this.unionDto,this.subUnionDto]):O.intance.openModule(L.CreateSubUnionView,[this.unionDto,this.subUnionDto]):O.intance.openModule(L.CreateSubUnionView,[this.unionDto,this.subUnionDto])}onShowMemberList(){this.unionDto&&O.intance.openModule(L.UnionMemberView,[this.unionDto,!1])}onShowGuildList(){O.intance.openModule(L.UnionListView)}onShowApplicationList(){O.intance.openModule(L.UnionMemberApplyView,this.unionDto.id)}onShowReferralList(){O.intance.openModule(L.UnionReferralView,this.unionDto.id)}async initLuckDrawView(){var e=v.instance.playerDto.union,i=await w.requestPost("wxgame/union/info",{unionId:this.currUnionId});this.unionDto=i.unionDto,this.unionDto?this.onSetUnionInfo(this.unionDto):C.instance.notice(p.instance.getLanguage(135)),this.initSubGuild()}async initSubGuild(){var e=await w.requestPost("wxgame/union/createInfo",{});e?(this.createStatus=e.createStatus,e.unionBaseDto?(this.subUnionDto=e.unionBaseDto,this.btn_apply.disabled=!1,this.tf_createSub.text=p.instance.getUILang("My Guild")):this.createStatus==0?this.btn_apply.disabled=!0:this.createStatus==1?this.btn_apply.disabled=!1:this.createStatus==2&&(e.unionBaseDto.status==0?(this.btn_apply.disabled=!1,this.tf_createSub.text=p.instance.getUILang("My Guild")):(this.btn_apply.disabled=!1,this.tf_createSub.text=p.instance.getUILang("My Guild")))):C.instance.notice(p.instance.getLanguage(135))}onSetUnionInfo(e){e?(this.unionIcon.dataSource=e,this.tf_name.text=p.instance.getMultiLan(e.unionName),this.tf_des.text=p.instance.getMultiLan(e.desc),this.tf_lv.text=p.instance.getUILang("LV.")+e.lv,this.tf_num.text="<font color='#25ff63'>"+e.memberNum+"</font>/"+e.maxMemberNum,this.img_lvIcon.skin=M.instance.getUnionLvIcon(e.lv),this.box_show.visible=!0,e.parentId>0?(this.btn_applicationList.disabled=!0,this.btn_referral.disabled=!0):e.leader!=v.instance.playerDto.pid?(this.btn_applicationList.disabled=!0,this.btn_referral.disabled=!0):this.subUnionDto?(this.btn_applicationList.disabled=!1,this.btn_referral.disabled=!1):(this.btn_applicationList.disabled=!1,this.btn_referral.disabled=!1)):this.box_show.visible=!1}onDisable(){_.intance.off(b.EVENT_SUB_GUILD_UPDATE,this,this.initSubGuild),Laya.timer.clearAll(this)}};R0=d([D6("KR8HZN1dSv2Bz_62yIgOrg")],R0);var P0=class extends Laya.Box{};var{regClass:k6}=Laya,N0=class extends P0{constructor(){super();this.isAddEvent=!1;this.addL=1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.tf_uid.on(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.on(Laya.Event.FOCUS,this,this.uidFocus),this.btn_add.on(Laya.Event.CLICK,this,this.onAdd),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.ticketMemberAddressVo=e,this.ticketMemberAddressVo?(this.btn_add.visible=!1,this.box_address.visible=!0,this.tf_uid.text=this.ticketMemberAddressVo.openid,this.tf_player_name.text=this.ticketMemberAddressVo.playerName,console.log("data1: ",e),this.knapsackItem.dataSource=this.ticketMemberAddressVo.itemVo,this.tf_num.text=this.ticketMemberAddressVo.num+""):(this.btn_add.visible=!0,this.box_address.visible=!1,console.log("data2: ",e)),this.addEvent()}onAdd(){_.intance.event(b.EVENT_ADD_TICKET_ADDRESS)}async setPlayerName(){try{if(this.tf_uid.text=="")return;this.ticketMemberAddressVo.openid=this.tf_uid.text.toLowerCase();var e=await w.requestPost("wxgame/sys/queryName",{openid:this.tf_uid.text.toLowerCase()});e&&(console.log(e),this.tf_player_name.text=e.name,this.ticketMemberAddressVo.checked=!0,this.ticketMemberAddressVo.playerName=e.name)}catch{console.log("未找到该玩家，请核对地址")}}uidFocus(){this.ticketMemberAddressVo.openid="",this.ticketMemberAddressVo.playerName="",this.ticketMemberAddressVo.checked=!1,this.tf_uid.text="",this.tf_player_name.text=""}changeItemNum(){var e=parseInt(this.tf_num.text);(!e||e<1)&&(e=1),this.addL=e,this.setItemNum()}handleClickBtn(e){switch(e){case this.btn_reduce:this.addL>1&&this.addL--,this.setItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setItemNum();break}}setItemNum(){this.tf_num.text=this.addL+"",this.ticketMemberAddressVo.num=this.addL}};N0=d([k6("KK3UEIk8ToiricaiUr9L3A")],N0);var O0=class extends Laya.Dialog{};var H0=class{};var{regClass:A6}=Laya,U0=class extends O0{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_transfer.on(Laya.Event.CLICK,this,this.onTransferItem),_.intance.on(b.EVENT_ADD_TICKET_ADDRESS,this,this.onAddticketAddress)}setOpenData(e){console.log("setOpenData: ",e),this.itemVo=e,this.itemVo.itemItem.subType==11?this.onAddticketAddress(!0):this.list_address.array=[null]}onBack(){this.close()}async onTransferItem(){var e=[];if(this.list_address.array.forEach(n=>{n&&n.checked&&n.playerName&&n.openid&&n.num>0&&e.push({address:n.openid,num:n.num})}),e.length>0){var i=await w.requestPost("wxgame/equip/ticketTransfer",{list:e,id:this.itemVo.m_iId});if(i){C.instance.notice(p.instance.getLanguage(2e3)),_.intance.event(b.EVENT_REFRESH_KNAPSACK);let n=Laya.Handler.create(this,()=>{this.list_address.array=[null]});Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1551),W.SURE,n)}else C.instance.notice(p.instance.getLanguage(135))}else C.instance.notice(p.instance.getLanguage(1348))}onAddticketAddress(e=!1){let i=new H0;i.num=1,i.itemVo=this.itemVo,e?this.list_address.array=[i]:(this.list_address.array||(this.list_address.array=[null]),this.list_address.setItem(this.list_address.array.length-1,i),this.list_address.addItem(null),this.list_address.refresh(),this.list_address.tweenTo(this.list_address.array.length-1))}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.onBack),this.btn_transfer.off(Laya.Event.CLICK,this,this.onTransferItem),_.intance.off(b.EVENT_ADD_TICKET_ADDRESS,this,this.onAddticketAddress)}};U0=d([A6("oLjG6sBpQqemEHt7q1F9GA")],U0);var F0=class extends Laya.Box{};var{regClass:M6}=Laya,V0=class extends F0{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){this.unionItem=e,this.unionItem&&(this.addEvent(),this.setCurrentOutPut())}set headSkin(e){this.img_head.skin=M.instance.getUnionIcon(e)}async setCurrentOutPut(){if(!this.unionItem)return;let e=this.unionItem.icon;this.img_head.skin=M.instance.getUnionIcon(e)}toDetail(){}};V0=d([M6("lK37x6YwQ9umJIqReZht4Q")],V0);var G0=class extends Laya.Box{};var{regClass:B6}=Laya,W0=class extends G0{set dataSource(e){super.dataSource=e,this.iconBadgeItem=e,this.iconBadgeItem&&this.setCurrentOutPut()}async setCurrentOutPut(){this.unionIcon.headSkin=this.iconBadgeItem.id}};W0=d([B6("TRVoEDtUSRaEW71V6oCpew")],W0);var j0=class extends Laya.Box{};var{regClass:R6}=Laya,z0=class extends j0{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_viewMembers.on(Laya.Event.CLICK,this,this.onViewMeber),this.isAddEvent=!0)}onViewMeber(){O.intance.openModule(L.UnionMemberView,[this.unionDto,!1])}set dataSource(e){super.dataSource=e,this.unionDto=e,this.unionDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.unionIcon.dataSource=this.unionDto,this.tf_name.text=p.instance.getMultiLan(this.unionDto.unionName),this.tf_lv.text=p.instance.getUILang("LV.")+this.unionDto.lv,this.tf_num.text="<font color='#25ff63'>"+this.unionDto.memberNum+"</font>/"+this.unionDto.maxMemberNum,this.tf_pendingMember.text=p.instance.getLanguage(1530,this.unionDto.noJoinNum),this.img_lvBg.skin=M.instance.getUnionLvDiIcon(this.unionDto.lv),this.img_lvIcon.skin=M.instance.getUnionLvIcon(this.unionDto.lv)}onChange(e){e?this.bg.skin="res/union1/img_trade_bg_2.png":this.bg.skin="res/union1/img_trade_bg_1.png"}};z0=d([R6("eauuiADeT9SAqEYe1ms81w")],z0);var K0=class extends Laya.Dialog{};var{regClass:P6}=Laya,q0=class extends K0{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack)}onOpened(e){this.initLuckDrawView()}setOpenData(e){}async initLuckDrawView(){var e=await w.requestPost("wxgame/union/list",{});if(e){this.list_guild.array=e.unionList;let i=-1;this.list_guild.selectedIndex=i}else C.instance.notice(p.instance.getLanguage(135))}onBack(){this.close()}onDisable(){this.removeEvent()}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}};q0=d([P6("vJwx3qloTmiGGRpFF6Qm1A")],q0);var Y0=class extends Laya.Box{};var{regClass:N6}=Laya,$0=class extends Y0{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.btn_agree.on(Laya.Event.CLICK,this,this.onAgree),this.btn_refuse.on(Laya.Event.CLICK,this,this.onRefuse),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}onCopy(){let e=this.unionApplyMemberDto.address;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}async onAgree(){if(this.unionApplyMemberDto.pid){var e=await w.requestPost("wxgame/union/doAudit",{uid:this.unionApplyMemberDto.uid,playerId:this.unionApplyMemberDto.pid,agree:!0});e&&C.instance.notice(p.instance.getLanguage(1193)),_.intance.event(b.EVENT_UNION_APPLY_MEMBER_UPDATE)}}async onRefuse(){if(this.unionApplyMemberDto.pid){var e=await w.requestPost("wxgame/union/doAudit",{uid:this.unionApplyMemberDto.uid,playerId:this.unionApplyMemberDto.pid,agree:!1});e&&C.instance.notice(p.instance.getLanguage(1194)),_.intance.event(b.EVENT_UNION_APPLY_MEMBER_UPDATE)}}set dataSource(e){super.dataSource=e,this.unionApplyMemberDto=e,this.unionApplyMemberDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.unionApplyMemberDto.head;this.playerIcon.headSkin=e,this.img_flag.skin=M.instance.getCountryIcon(this.unionApplyMemberDto.country),this.tf_name.text=this.unionApplyMemberDto.name,this.tf_fightTimes.text=this.unionApplyMemberDto.fightTimes+"",this.tf_state.text=fe.formatTimeAgo(this.unionApplyMemberDto.lastLoginTime),this.tf_state.color=fe.colorTimeAgo(this.unionApplyMemberDto.lastLoginTime),this.tf_address.text=qe.abbreviateString(this.unionApplyMemberDto.address,10)}};$0=d([N6("FPhs_TdtQbCxXS40Ic50Wg")],$0);var X0=class extends Laya.Dialog{};var{regClass:O6}=Laya,Q0=class extends X0{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_agreeAll.on(Laya.Event.CLICK,this,this.onAgreeAll),_.intance.on(b.EVENT_UNION_APPLY_MEMBER_UPDATE,this,this.onUpdateApplyMember),this.list_member.array=[]}setOpenData(e){console.log("setOpenData: ",e),Number.isInteger(e)&&(this.currUnionId=e,this.onUpdateApplyMember())}async onUpdateApplyMember(){var e=await w.requestPost("wxgame/union/auditList",{unionId:this.currUnionId});e&&e.auditList?this.list_member.array=e.auditList:C.instance.notice(p.instance.getLanguage(135))}onBack(){this.close()}async onAgreeAll(){if(this.list_member.array.length>0){var e=await w.requestPost("wxgame/union/doAudit",{uid:this.currUnionId,playerId:0,agree:!0});e&&C.instance.notice(p.instance.getLanguage(1195)),_.intance.event(b.EVENT_UNION_APPLY_MEMBER_UPDATE)}}onDisable(){this.removeEvent()}removeEvent(){_.intance.off(b.EVENT_UNION_APPLY_MEMBER_UPDATE,this,this.onUpdateApplyMember)}};Q0=d([O6("LXw-3_bwSmqCzdUAekakYg")],Q0);var J0=class extends Laya.Box{};var{regClass:H6}=Laya,Z0=class extends J0{constructor(){super();this.isAddEvent=!1;this.tgUrl=""}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.btn_add.on(Laya.Event.CLICK,this,this.onAdd),this.btn_move.on(Laya.Event.CLICK,this,this.onMoveClick),this.btn_tg.on(Laya.Event.CLICK,this,this.onBtnTgClick),this.isAddEvent=!0)}async onAdd(){if(this.unionMemberDto.isfriend){let e={icon:this.unionMemberDto.head,name:this.unionMemberDto.name,id:this.unionMemberDto.pid};O.intance.openModule(L.PrivateChatDialog,e);return}if(this.unionMemberDto.pid){let e=I.intance.getGeneralValueById(11);if(v.instance.friendNum>=e){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(301),W.YES);return}if(this.unionMemberDto.openid==K.instance.walletAddress){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(200),W.YES);return}if(this.unionMemberDto.isfriend){Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(202),W.YES);return}let i=await w.requestPost("wxgame/friend/addFriend",{openid:this.unionMemberDto.openid});console.log(i),i&&Le.instance().AlertByType(W.BASEALERTVIEW,Oe.instance.get(307),W.YES,Laya.Handler.create(this,()=>{this.btn_add.disabled=!0}))}}set dataSource(e){super.dataSource=e,this.unionMemberDto=e,this.unionMemberDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.unionMemberDto.head;this.playerIcon.headSkin=e,this.img_flag.skin=M.instance.getCountryIcon(this.unionMemberDto.country),this.tf_name.text=this.unionMemberDto.name;let i=this.unionMemberDto.isMy;v.instance.playerDto.unionLeader&&i&&this.unionMemberDto.pid!==v.instance.playerDto.pid?this.btn_move.visible=!0:this.btn_move.visible=!1,this.unionMemberDto.isLeader&&!i?(this.tgUrl=this.unionMemberDto.tgUrl,this.img_hui.visible=!0,this.btn_tg.visible=!0,!this.tgUrl||this.tgUrl.length<=0?this.btn_tg.visible=!1:this.btn_tg.visible=!0):(this.img_hui.visible=!1,this.btn_tg.visible=!1),this.tf_unionName.text=p.instance.getMultiLan(this.unionMemberDto.unionName),this.tf_fightTimes.text=this.unionMemberDto.fightTimes+"",this.tf_state.text=fe.formatTimeAgo(this.unionMemberDto.lastLoginTime),this.tf_state.color=fe.colorTimeAgo(this.unionMemberDto.lastLoginTime),this.unionMemberDto.openid==K.instance.walletAddress&&(this.btn_add.visible=!1),this.btn_add.label="Add as a friend",this.unionMemberDto.isfriend&&(this.btn_add.label="send msg")}async onMoveClick(){let e=this.unionMemberDto.unionId;await w.requestPost("wxgame/union/doKickOutMember",{unionId:e,playerId:this.unionMemberDto.pid})&&_.intance.event(b.UPDATE_UNION_MEMBER_LIST,this.unionMemberDto.pid)}onBtnTgClick(){this.tgUrl?window.open(this.tgUrl,"_blank"):C.instance.notice(p.instance.getLanguage(1524))}};Z0=d([H6("l73FEB2CRGihzisJBs63MQ")],Z0);var eI=class extends Laya.Dialog{};var{regClass:U6}=Laya,tI=class extends eI{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.pageIndex=1;this.pages=0;this.currUnionId=0;this.isMy=!1;this.scrolLock=!0;this.pageSize=20}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack),_.intance.on(b.UPDATE_UNION_MEMBER_LIST,this,this.updateUnionMemberList),this.list_member.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange)}async setOpenData(e){this.myFriendData=await w.requestPost("wxgame/friend/friendList",{}),this.myFriendData&&this.myFriendData.list&&(v.instance.friendNum=this.myFriendData.list.length),this.unionData=e[0],this.isMy=e[1],console.log("setOpenData: ",this.unionData);var i=this.unionData.id;this.initLuckDrawView(i)}async initLuckDrawView(e){this.currUnionId=e;var i;this.isMy?i=await w.requestPost("wxgame/union/myUnionMemberPageList",{pageSize:this.pageSize,pageIndex:this.pageIndex}):i=await w.requestPost("wxgame/union/memberPageList",{unionId:e,pageSize:this.pageSize,pageIndex:this.pageIndex});var n=i.list;this.pages=i.pages;var r=i.memberNum,s=i.maxMemberNum;this.tf_num.text="<font color='#25ff63'>"+r+"</font>/"+s;let o=this.isMyFriendData(n,this.myFriendData.list,e);console.log(o),this.list_member.array=o}isMyFriendData(e,i,n){for(let r of e){let s=!1;for(let o of i)if(r.openid===o.openid){s=!0;break}r.isfriend=s,r.unionId=n,r.isMy=this.isMy,r.isLeader=r.pid==this.unionData.leader,r.tgUrl=this.unionData.tgUrl}return e}onBack(){this.close()}updateUnionMemberList(e){console.log(e),console.log(this.list_member.array),this.list_member.array=this.deleteItemByPid(this.list_member.array,e),console.log(this.list_member.array)}deleteItemByPid(e,i){return e.filter(n=>n.pid!==i)}onDisable(){this.removeEvent()}onScrollBarChange(){this.list_member.scrollBar.value>=this.list_member.scrollBar.max&&this.loadMoreData()}refreshLock(){this.scrolLock=!0,console.log("重置锁")}async loadMoreData(){if(this.scrolLock&&(this.scrolLock=!1,console.log("到底了"),Laya.timer.once(1e4,this,this.refreshLock),this.pageIndex<this.pages)){this.pageIndex+=1;var e;if(this.isMy?e=await w.requestPost("wxgame/union/myUnionMemberPageList",{pageSize:this.pageSize,pageIndex:this.pageIndex}):e=await w.requestPost("wxgame/union/memberPageList",{unionId:this.currUnionId,pageSize:this.pageSize,pageIndex:this.pageIndex}),e){var i=e.list;this.pages=e.pages,this.scrolLock=!0;var n=e.memberNum,r=e.maxMemberNum;this.tf_num.text="<font color='#25ff63'>"+n+"</font>/"+r;let s=this.isMyFriendData(i,this.myFriendData.list,this.currUnionId);this.list_member.array.push(...s),this.list_member.array=this.list_member.array,Laya.timer.clear(this,this.refreshLock)}}}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this),_.intance.offAllCaller(this)}};tI=d([U6("439XbfImQxS4I-Vced8JKA")],tI);var iI=class extends Laya.Box{};var{regClass:F6}=Laya,aI=class extends iI{constructor(){super();this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.unionDto=e,this.unionDto&&this.setCurrentOutPut()}async setCurrentOutPut(){this.unionIcon.dataSource=this.unionDto,this.tf_name.text=p.instance.getMultiLan(this.unionDto.unionName),this.tf_lv.text=p.instance.getUILang("LV.")+this.unionDto.lv,this.tf_num.text="<font color='#25ff63'>"+this.unionDto.memberNum+"</font>/"+this.unionDto.maxMemberNum,this.img_lvBg.skin=M.instance.getUnionLvDiIcon(this.unionDto.lv),this.img_lvIcon.skin=M.instance.getUnionLvIcon(this.unionDto.lv),this.tf_pendingMember.text=p.instance.getLanguage(1530,this.unionDto.noJoinNum)}onChange(e){e?this.bg.skin="res/union1/img_trade_bg_2.png":this.bg.skin="res/union1/img_trade_bg_1.png"}};aI=d([F6("cbbqawzdSI2g161G69xpUg")],aI);var nI=class extends Laya.Box{};var{regClass:V6}=Laya,rI=class extends nI{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}onCopy(){let e=this.unionDto.collectionToken;doCopy(e),C.instance.notice(p.instance.getLanguage(132))}set dataSource(e){super.dataSource=e,this.unionDto=e,this.unionDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.unionIcon.dataSource=this.unionDto,this.tf_name.text=p.instance.getMultiLan(this.unionDto.unionName),this.tf_lv.text=p.instance.getUILang("LV.")+this.unionDto.lv,this.tf_num.text="<font color='#25ff63'>"+this.unionDto.memberNum+"</font>/"+this.unionDto.maxMemberNum,this.img_lvBg.skin=M.instance.getUnionLvDiIcon(this.unionDto.lv),this.img_lvIcon.skin=M.instance.getUnionLvIcon(this.unionDto.lv),this.tf_address.text=qe.abbreviateString(this.unionDto.collectionToken,24)}};rI=d([V6("NTRu0sy9SDCKgxglHtnEdw")],rI);var sI=class extends Laya.Dialog{};var{regClass:G6}=Laya,oI=class extends sI{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.list_junior.array=[]}setOpenData(e){console.log("setOpenData: ",e),Number.isInteger(e)&&(this.currUnionId=e,this.onUpdateApplyMember())}async onUpdateApplyMember(){var e=await w.requestPost("wxgame/union/unionRelation",{unionId:this.currUnionId});e?(this.tf_referralNum.text=p.instance.getLanguage(1308,e.childUnionNum),this.tf_memberNum.text=p.instance.getLanguage(1309,e.childUnionMemberNum),this.list_senior.array=e.parent?[e.parent]:[],!this.list_senior.array||this.list_senior.array.length<=0?this.noDataBox1.visible=!0:this.noDataBox1.visible=!1,e.childList&&(this.list_junior.array=e.childList),!e.childList||e.childList.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1):C.instance.notice(p.instance.getLanguage(135))}onBack(){this.close()}onDisable(){this.removeEvent()}removeEvent(){}};oI=d([G6("Ls1FVCY8RxeSChhaMnjcKA")],oI);var lI=class extends Laya.Scene{};var{regClass:W6}=Laya,cI=class extends lI{constructor(){super(...arguments);this.currTab=0;this.type=1;this.joinStatusDic=new ye;this.items=[]}onAwake(){this.m_iLayerType=A.M_POP,this.m_iPositionType=A.UP}onOpened(e){this.type=e}onEnable(){this.btn_search.on(Laya.Event.CLICK,this,this.onSearch),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.list_union.vScrollBarSkin="",this.list_union.selectHandler=Laya.Handler.create(this,this.onSelectItem,null,!1),this.list_union.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1),this.box_show.visible=!1,this.box_list.visible=!1,this.initLuckDrawView();let e=(Laya.stage.height-ie.DESIGN_HEIGHT)/2}async initLuckDrawView(){var e=await w.requestPost("wxgame/union/list",{});e?this.unionData=e.unionList:C.instance.notice(p.instance.getLanguage(135)),this.getJoinStatus()}async getJoinStatus(){var e=await w.requestPost("wxgame/union/joinStatus",{});e?(this.joinStatusDic=new ye,this.joinStatusDic.set(e.unionId,e.joinStatus)):C.instance.notice(p.instance.getLanguage(135)),this.getItemByName(""),this.box_list.visible=!0}getItemByName(e){if(this.list_union.selectedIndex=-1,this.items=[],this.unionData){var i=this.unionData.length;this.tf_totalNum.text=p.instance.getLanguage(1355,i);for(var n=0;n<i;n++){var r=this.unionData[n],s=p.instance.getMultiLan(r.unionName);qe.caseInsensitiveSearchWithRegex(s,e)&&this.items.push(r)}}this.list_union.array=this.items,this.items.length>0?this.list_union.selectedIndex=0:this.list_union.selectedIndex=-1}onSearch(){var e=this.input_search.text;this.getItemByName(e)}onJoin(){this.currUnionDto&&(v.instance.playerDto.union>0?ge.intance.setCurrentScene(ae.M_SCENE_MYUNION,this.currUnionDto.id):Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(141),W.CANCEL,Laya.Handler.create(this,this.onJoinSure)))}async onJoinSure(){if(this.currUnionDto){var e=await w.requestPost("wxgame/union/join",{unionId:this.currUnionDto.id});e.errorCode==0?e.unionId&&e.unionId>0?(v.instance.playerDto.union=e.unionId,ge.intance.setCurrentScene(ae.M_SCENE_MYUNION,v.instance.playerDto.union),C.instance.notice(p.instance.getLanguage(2e3))):C.instance.notice(p.instance.getLanguage(1196)):C.instance.notice(p.instance.getLanguage(135))}}onItemRender(e,i){e.onChange(this.list_union.selectedIndex==i)}onSelectItem(e,i){if(this.currUnionDto=this.items[e],console.log(this.currUnionDto),this.currUnionDto){this.unionIcon.dataSource=this.currUnionDto,this.tf_name.text=p.instance.getMultiLan(this.currUnionDto.unionName),this.tf_des.text=p.instance.getMultiLan(this.currUnionDto.desc),this.tf_lv.text=p.instance.getUILang("LV.")+this.currUnionDto.lv,this.tf_num.text="<font color='#25ff63'>"+this.currUnionDto.memberNum+"</font>/"+this.currUnionDto.maxMemberNum,this.img_lvBg.skin=M.instance.getUnionLvDiIcon(this.currUnionDto.lv),this.img_lvIcon.skin=M.instance.getUnionLvIcon(this.currUnionDto.lv);var n=this.joinStatusDic.get(this.currUnionDto.id);v.instance.playerDto.union>0?this.btn_join.label=p.instance.getUILang("Enter"):n?n==1?this.btn_join.label=p.instance.getLanguage(1210):n==2?this.btn_join.label=p.instance.getUILang("Enter"):this.btn_join.label=p.instance.getUILang("Join"):this.btn_join.label=p.instance.getUILang("Join"),this.box_show.visible=!0}else this.box_show.visible=!1}setToMainScene(){ge.intance.setCurrentScene(ae.M_SCENE_MAIN)}removeEvent(){}};cI=d([W6("VfpfbqXcSQalDIkuosz8Rw")],cI);var uI=class extends Laya.Box{};var{regClass:j6}=Laya,pI=class extends uI{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.tf_uid.on(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.on(Laya.Event.FOCUS,this,this.uidFocus),this.btn_add.on(Laya.Event.CLICK,this,this.onAdd),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.unionMemberAddressVo=e,console.log("data: ",e),this.unionMemberAddressVo?(this.btn_add.visible=!1,this.box_address.visible=!0,this.tf_uid.text=this.unionMemberAddressVo.openid,this.tf_player_name.text=this.unionMemberAddressVo.playerName,console.log("data1: ",e)):(this.btn_add.visible=!0,this.box_address.visible=!1,console.log("data2: ",e)),this.addEvent()}onAdd(){_.intance.event(b.EVENT_ADD_UNIONMEMBER_ADDRESS)}async setPlayerName(){try{if(this.tf_uid.text=="")return;this.unionMemberAddressVo.openid=this.tf_uid.text.toLowerCase();var e=await w.requestPost("wxgame/sys/queryName",{openid:this.tf_uid.text.toLowerCase()});e&&(console.log(e),this.tf_player_name.text=e.name,this.unionMemberAddressVo.checked=!0,this.unionMemberAddressVo.playerName=e.name)}catch{console.log("未找到该玩家，请核对地址")}}uidFocus(){this.unionMemberAddressVo.openid="",this.unionMemberAddressVo.playerName="",this.unionMemberAddressVo.checked=!1,this.tf_uid.text="",this.tf_player_name.text=""}};pI=d([j6("JU_R7IZ9Q9uq6BU_eahAuQ")],pI);var mI=class extends Laya.Box{};var{regClass:z6}=Laya,hI=class extends mI{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.onCheck),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,this.unionMemberVo=e,!this.unionMemberVo)return;this.check_coin.selected=this.unionMemberVo.checked,this.unionMemberDto=this.unionMemberVo.unionMemberDto;let i=this.unionMemberDto.head;this.playerIcon.headSkin=i,this.tf_name.text=this.unionMemberDto.name,this.addEvent()}onCheck(){this.unionMemberVo.checked=!this.unionMemberVo.checked,console.log("onCheck: ",this.unionMemberVo.checked),_.intance.event(b.EVENT_REFRESH_UNIONMEMBER_TRANSFER)}};hI=d([z6("gGFdZxctQPm-SO2zLew1hg")],hI);var dI=class{};var fI=class extends Laya.Dialog{};var yI=class{};var{regClass:K6}=Laya,bI=class extends fI{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=A.M_PANEL;this.m_iPositionType=A.CENTER;this.myHeroesNum=0;this.selectedNum=0;this.addL=1}onEnable(){this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_transfer.on(Laya.Event.CLICK,this,this.onTransferItem),this.btn_checkBox.on(Laya.Event.CLICK,this,this.onSelectAll),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),_.intance.on(b.EVENT_REFRESH_UNIONMEMBER_TRANSFER,this,this.onRefreshUnionMemberTransfer),_.intance.on(b.EVENT_ADD_UNIONMEMBER_ADDRESS,this,this.onAddUnionMemberAddress),this.list_members.array=[]}setOpenData(e){console.log("setOpenData: ",e),this.itemVo=e,this.showItem(),this.getUnionMembers(),this.list_address.array=[null]}showItem(){this.knapsackItem.dataSource=this.itemVo}async getUnionMembers(){var e=await w.requestPost("wxgame/union/members",{}),i=e.list;console.log("获得公会成员 unionMemberDtos: ",i),this.unionMemberVos=[],i&&i.length>0&&i.forEach(n=>{if(n&&n.pid!=v.instance.playerDto.pid){var r=new dI;r.unionMemberDto=n,this.unionMemberVos.push(r)}}),this.list_members.array=this.unionMemberVos,this.updateNum()}onAddUnionMemberAddress(){console.log("onAddUnionMemberAddress: ",this.list_address.array),this.list_address.setItem(this.list_address.array.length-1,new yI),this.list_address.addItem(null),this.list_address.refresh(),this.list_address.tweenTo(this.list_address.array.length-1)}onRefreshUnionMemberTransfer(){this.list_members.refresh(),this.updateNum()}updateNum(){!this.unionMemberVos||this.unionMemberVos.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1,this.selectedNum=0,this.unionMemberVos.forEach(e=>{e&&e.checked&&this.selectedNum++}),this.myHeroesNum=this.unionMemberVos.length,this.tf_selectedNum.text=p.instance.getLanguage(1223,this.selectedNum)}onSelectAll(){var e=this.btn_checkBox.selected;this.unionMemberVos.forEach(i=>{i&&(i.checked=e)}),this.list_members.refresh(),this.updateNum()}changeItemNum(){var e=parseInt(this.tf_num.text);(!e||e<1)&&(e=1),this.addL=e,this.setItemNum()}handleClickBtn(e){switch(e){case this.btn_reduce:this.addL>1&&this.addL--,this.setItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setItemNum();break}}setItemNum(){this.tf_num.text=this.addL+""}onBack(){this.close()}async onTransferItem(){var e=[];if(this.unionMemberVos.forEach(n=>{n.checked&&e.push(n.unionMemberDto.openid)}),this.list_address.array.forEach(n=>{n&&n.checked&&e.push(n.openid)}),e.length>0){var i=await w.requestPost("wxgame/equip/airdropTicketTransfer",{addressList:e,id:this.itemVo.m_iId,transferNum:this.addL});if(i){C.instance.notice(p.instance.getLanguage(2e3)),_.intance.event(b.EVENT_REFRESH_KNAPSACK);let n=Laya.Handler.create(this,()=>{this.list_address.array=[null],this.getUnionMembers()});Le.instance().AlertByType(W.BASEALERTVIEW,p.instance.getLanguage(1551),W.SURE,n)}else C.instance.notice(p.instance.getLanguage(135))}else C.instance.notice(p.instance.getLanguage(1348))}onDisable(){this.removeEvent()}removeEvent(){_.intance.off(b.EVENT_REFRESH_UNIONMEMBER_TRANSFER,this,this.onRefreshUnionMemberTransfer),_.intance.off(b.EVENT_ADD_UNIONMEMBER_ADDRESS,this,this.onAddUnionMemberAddress)}};bI=d([K6("xnUTxKqCQUuIl8QBpuYoxg")],bI);var{regClass:q6,property:EQe}=Laya,Uu=class extends Laya.Script{constructor(){super()}onEnable(){this.owner.getComponent(Laya.RigidBody).setVelocity({x:0,y:-10})}onTriggerEnter(t,e,i){this.owner.removeSelf()}onUpdate(){this.owner.y<-10&&this.owner.removeSelf()}onDisable(){Laya.Pool.recover("bullet",this.owner)}};Uu=d([q6("hIXP-u9_RfeIwPLhNGNjGw")],Uu);var{regClass:Y6,property:CQe}=Laya,Fu=class extends Laya.Script{constructor(){super()}onEnable(){this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onClick)}onClick(t){Laya.stage.width=1280,Laya.stage.height=720,Laya.stage.scaleMode=Laya.Stage.SCALE_FIXED_WIDTH,Laya.Scene.open("scenes/Index.ls")}onDisable(){this.owner.off(Laya.Event.MOUSE_DOWN,this)}};Fu=d([Y6("DQCudilORvOvMM7hTH8i7w")],Fu);var{regClass:$6,property:X6}=Laya,br=class extends Laya.Script{constructor(){super();this.level=1}get itemId(){return this._itemId}set itemId(e){this._itemId=e,this.owner.skin="resources/UI/images/bag/"+e+".png"}onEnable(){this._rig=this.owner.getComponent(Laya.RigidBody),this.level=Math.round(Math.random()*5)+1}onUpdate(){}onCollisionEnter(e){console.log("collision: ",e)}onTriggerEnter(e,i,n){var r=this.owner;if(console.log("owener: ",r),e.label==="buttle"&&r.parent){let s=Laya.Pool.getItemByCreateFun("effect",this.createEffect,this);s.pos(r.x,r.y),r.parent.addChild(s),s.play(0,!0),r.removeSelf(),Laya.SoundManager.playSound("resources/sound/destroy.wav")}}createEffect(){let e=new Laya.Animation;e.loadAnimation("resources/ani/TestAni.ani"),e.on(Laya.Event.COMPLETE,null,i);function i(){e.removeSelf(),Laya.Pool.recover("effect",e)}return e}onDisable(){Laya.Pool.recover("dropBox",this.owner)}};d([X6({type:"number"})],br.prototype,"level",2),br=d([$6("3L23NCFLSAieUApqTrVoCQ")],br);var ws=class ws{constructor(){this.beanSingleNumInit=100;this.beanMaxNum=300;this.beanNum=0;this.beanId=0;this.foods={}}init(){for(let t=0;t<this.beanSingleNumInit;t++)this.beanId++,this.addBean(this.beanId)}addBean(t){var e=Ct.getRandomPointInMap(),i=e.x,n=e.y,r=Math.floor(Math.random()*(6-1+1)+1);let s=q.instance.matchSnakeBeanPrefab.create();s.init(t,i,n,r),q.instance.box_players.addChild(s),this.foods[t]=s,this.beanNum++}addBeanByPos(t,e){var i=this.beanId++,n=t,r=e,s=Math.floor(Math.random()*(6-1+1)+1);let o=q.instance.matchSnakeBeanPrefab.create();o.init(i,n,r,s),q.instance.box_players.addChild(o),this.foods[i]=o,this.beanNum++}update(){if(this.beanNum<this.beanMaxNum)for(let t=0;t<20;t++)this.beanId++,this.addBean(this.beanId)}eateBean(t,e){if(!e.haveEaten){e.haveEaten=!0,delete this.foods[e.beanId],t.snakeLength++;var i=1;t.addBean(i),t.bodyCheck(),this.beanNum--,Laya.Tween.to(e,{x:t.x,y:t.y,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish,[e]))}}onFinish(t){t&&t.removeSelf()}clearData(){this.foods=[]}static get instance(){return ws._instance==null&&(ws._instance=new ws),ws._instance}};ws._instance=null;var Vu=ws;var{regClass:Q6,property:PQe}=Laya,fo=class extends Laya.Script{constructor(){super();this.touchHeroIds=new ye;this.touchGlasses=new ye;this.updateIndex=0;this.turnSpeed=1;this.turningSpeed=.1;this.lastDirectionAngle=0;this._state=Ui.STATE_Idle;this.lastState=Ui.STATE_Idle;this.isFirst=!1}onAwake(){}onEnable(){if(this.owner.roomPlayerDto.npc==Ui.TYPE_Monster){var e=B.instance.matchWatcher;e||(Laya.timer.frameLoop(1,this,this.updateMonster),Laya.timer.loop(3e3,this,this.rotationMonster))}}onCollisionEnter(e){console.log(this.constructor.name+" onCollisionEnter collision",e)}onCollisionStay(e){console.log(this.constructor.name+" onCollisionStay collision",e)}onCollisionExit(e){console.log(this.constructor.name+" onCollisionExit collision",e)}onTriggerEnter(e,i,n){if(i.label=="triger"){if(e.label==="food"){if(!this.owner._isDead){var r=e.owner;Vu.instance.eateBean(this.owner,r)}}else if(e.label==="ground"){var s=this.owner;if(s.roomPlayerDto.npc==Ui.TYPE_Monster){var o=B.instance.matchWatcher;o||s.reverseRotation()}}}else if(e.label==="body"){var l=e.owner;l.pid!=this.owner.roomPlayerDto.id&&l.head&&!l.head._isDead&&(this.owner._isDead||(l.head.addKill(),this.owner.die()))}else if(e.label==="ground")!this.owner._isDead&&this.owner.roomPlayerDto.npc!=Ui.TYPE_Monster&&this.owner.die();else if(e.label&&e.label.startsWith("grass"))this.owner.isMe&&(e.owner.alpha=.7,this.touchGlasses.set(e.label,!0),this.setMyCurrArea());else if(e.label==="item")this.owner.enterItemId=e.owner.getComponent(br).itemId;else if(e.label==="role"){var u=e.owner.roomPlayerDto.id;if(this.touchHeroIds.set(u,e.owner),this.owner.displacementType==2){var m=q.instance.canAttack(this.owner,e.owner);m&&Laya.Tween.clearAll(this.owner)}}}onTriggerStay(e,i,n){}onTriggerExit(e,i,n){if(e.label==="ground")this.owner.inGround=!1;else if(e.label&&e.label.startsWith("grass"))this.owner.isMe&&(e.owner.alpha=1,this.touchGlasses.remove(e.label),this.setMyCurrArea());else if(e.label==="item")this.owner.enterItemId==e.owner.getComponent(br).itemId&&(this.owner.enterItemId=0);else if(e.label==="role"){var r=e.owner.roomPlayerDto.id;this.touchHeroIds.remove(r)}}setMyCurrArea(){this.touchGlasses.keys.length>0?this.owner.currArea=1:this.owner.currArea=0,this.owner.onSendMoveData()}onLateUpdate(){var e=this.owner.parent,i=e.localToGlobal(Laya.Point.TEMP.setTo(this.owner.x,this.owner.y)),n=100;i.x>=0-n&&i.x<=Laya.stage.width+n&&i.y>=0-n&&i.y<=Laya.stage.height+n?this.owner.beyond=!1:this.owner.beyond=!0}onUpdate(){if(this.owner.isOneTeam){if(this.owner.isMe?this.owner._isDead||(SnackManager.instance.selfSnack.currArea>0?this.owner.alpha=.6:this.owner.alpha=1):this.owner._isRealDead?this.owner.visible=!1:this.owner.currArea>0?(this.owner.visible=!0,this.owner.alpha=.6):(this.owner.visible=!0,this.owner.alpha=1),this.owner._isDead)return}else{var e=B.instance.matchWatcher;if(this.owner._isRealDead?e||SnackManager.instance.selfSnack._isDead?this.owner.visible=!1:this.owner.visible=!1:this.owner.currArea>0?e||SnackManager.instance.selfSnack.currArea==this.owner.currArea?(this.owner.visible=!0,this.owner.alpha=.6):this.owner.visible=!1:(this.owner.visible=!0,this.owner.alpha=1),this.owner._isDead)return;this.onNpcMoveUpdate();return}if(!this.owner.isStop){if(this.owner.speed>0){this.owner.isLockAni||(this.lastSpeed!=this.owner.speed||this.owner.aniChange)&&(this.owner.aniChange=!1,this.lastSpeed=this.owner.speed);let i={x:this.owner.x,y:this.owner.y};if(this.owner.roleDirection>=0){let n=1*this.owner.speed*this.turnSpeed,r=this.owner.heroBox.rotation*(Math.PI/180),s=n*Math.cos(r),o=n*Math.sin(r);this.owner.pos(Math.round(this.owner.x+s),Math.round(this.owner.y+o))}this.owner.inControl&&!this.owner._isDead&&this.touchHeroIds.values.forEach(n=>{var r=q.instance.canTui(this.owner,n);r&&n.beiTui(this.owner.roomPlayerDto.id)})}else this.owner.isLockAni||(this.lastSpeed!=this.owner.speed||this.owner.aniChange)&&(this.owner.aniChange=!1,this.owner.idle(),this.lastSpeed=this.owner.speed);this.updateIndex==0&&this.owner.onSendMoveData(),this.updateIndex++,this.updateIndex>0&&(this.updateIndex=0),this.onNpcMoveUpdate()}}getJoystickDirectionAngle(){return this.owner.roleDirection}calculateAngleDifference(e,i){let n=Math.abs(e-i);return n>180?360-n:n}startTurning(){this.turnSpeed*=this.turningSpeed}stopTurning(){this.turnSpeed=1}onDisable(){Laya.timer.clearAll(this)}get state(){return this._state}set state(e){this._state=e}updateMonster(){if(!this.owner._isDead){var e=new Date().getTime();this.owner.move()}}rotationMonster(){this.owner._isDead||(this.owner.roleDirection=Math.random()*360,this.owner.speed=Math.random()>.9?Di.SPEED_QUICK:Di.SPEED_NORMAL)}onNpcMoveUpdate(){this.lastPos?this.owner.onRecordHead({x:this.owner.x,y:this.owner.y},this.lastPos):this.lastPos={x:0,y:0},this.lastPos.x=this.owner.x,this.lastPos.y=this.owner.y}};fo=d([Q6("DknC7B57SZi-09Mz092daQ")],fo);var{regClass:J6,property:gk}=Laya,gr=class extends Laya.Script{constructor(){super();this.createBoxInterval=1e3;this._time=0;this._started=!1;this.updateStop=!1}onEnable(){let e=["resources/UI/images/test/b1.png"];Laya.loader.load(e).then(i=>{this._time=Date.now(),this._gameBox=this.owner.getChildByName("gameBox"),Laya.stage.on(Laya.Event.BLUR,this,()=>{this.updateStop=!0}),Laya.stage.on(Laya.Event.FOCUS,this,()=>{this.updateStop=!1}),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onStageClick)})}onStart(){let e=this.owner.getChildByName("ground").getComponent(Laya.BoxCollider);e.width=Laya.stage.width}onUpdate(){if(this.updateStop)return;let e=Date.now();e-this._time>this.createBoxInterval&&this._started&&(this._time=e,this.createBox())}createBox(){let e=Laya.Pool.getItemByCreateFun("dropBox",this.dropBox.create,this.dropBox);e.pos(Math.random()*(Laya.stage.width-100),-100),this._gameBox.addChild(e)}onStageClick(e){e.stopPropagation();let i=Laya.Pool.getItemByCreateFun("bullet",this.bullet.create,this.bullet);i.pos(Laya.stage.mouseX,Laya.stage.mouseY),this._gameBox.addChild(i)}startGame(){this._started||(this._started=!0,this.enabled=!0)}stopGame(){this._started=!1,this.enabled=!1,this.createBoxInterval=1e3,this._gameBox.removeChildren()}};d([gk({type:Laya.Prefab})],gr.prototype,"dropBox",2),d([gk({type:Laya.Prefab})],gr.prototype,"bullet",2),gr=d([J6("5iJgbfCiSn6Rc8upAfHtjA")],gr);var gI=class extends Laya.Scene{};var{regClass:Z6,property:YQe}=Laya,yo=class extends gI{constructor(){super();yo.instance=this}onEnable(){this._control=this.getComponent(gr),this.tipLbll.on(Laya.Event.CLICK,this,this.onTipClick)}onTipClick(e){this.tipLbll.visible=!1,this._score=0,this.scoreLbl.text="分数：",this._control.startGame()}addScore(e=1){this._score+=e,this.scoreLbl.text="分数："+this._score,this._control.createBoxInterval>600&&this._score%20==0&&(this._control.createBoxInterval-=20)}stopGame(){this.tipLbll.visible=!0,this.tipLbll.text="游戏结束了，点击屏幕重新开始",this._control.stopGame()}};yo=d([Z6("Y5UkAabiTgWFZQnBL1EpEw")],yo);var _I=class extends Laya.Scene{};var{regClass:e5,property:tJe}=Laya,Gu=class extends _I{constructor(){super()}onOpened(t){t&&(this.msgLab.x=t.point&&t.point.x?t.point.x:Laya.stage.mouseX-50,this.msgLab.y=t.point&&t.point.y?t.point.y:Laya.stage.mouseY-80,this.msgLab.text=t.text,Laya.Tween.to(this.msgLab,{y:this.msgLab.y-100,alpha:0},1e3,Laya.Ease.linearNone))}};Gu=d([e5("9kGOzpbbSOWSAmN0l9VtfQ")],Gu);var LI=class extends Laya.Scene{};var{regClass:t5,property:rJe}=Laya,Wu=class extends LI{constructor(){super()}onEnable(){Laya.Physics2D.I&&(Laya.Physics2D.I.enableDebugDraw=!1),this.tabBindViewStack(),this.topTab.selectedIndex=0,this.item0Tab.selectedIndex=0}onClicked(){let t=this.item2Tab.getChildByName("item2"),e=this.item2Tab.getChildByName("item3"),i=this.item2Tab.getChildByName("item4");t.on(Laya.Event.MOUSE_DOWN,this,()=>{Laya.Scene.open("scenes/uiDemo/page/OpenMainScene.ls",!1)}),e.on(Laya.Event.MOUSE_DOWN,this,()=>{Laya.Scene.open("scenes/uiDemo/page/OpenScene.ls",!1)}),i.on(Laya.Event.MOUSE_DOWN,this,()=>{Laya.Scene.open("scenes/uiDemo/page/Dialog.ls",!1,{title:"弹窗的标题",text:"弹窗的具体文本……"})})}tabBindViewStack(){this.topTab.selectHandler=new Laya.Handler(this,t=>{this.tabPage.selectedIndex=t,t==1&&(this.item1Tab.selectedIndex=0),t==2&&(this.item2Tab.selectedIndex=0),t==3&&(this.item3Tab.selectedIndex=0),t==4&&(this.item4Tab.selectedIndex=0),Laya.Physics2D.I&&(Laya.Physics2D.I.enableDebugDraw=!1),St.instance.iframeElement&&St.instance.closeVideo(),t==2&&this.item2Page.selectedIndex==1&&!St.instance.iframeElement&&St.instance.createElementVideo()}),this.item0Tab.selectHandler=new Laya.Handler(this,t=>{this.item0Page.selectedIndex=t}),this.item1Tab.selectHandler=new Laya.Handler(this,t=>{this.item1Page.selectedIndex=t,t!==4&&Laya.Physics2D.I?Laya.Physics2D.I.enableDebugDraw=!1:t==4&&Laya.Physics2D.I&&(Laya.Physics2D.I.enableDebugDraw=!0)}),this.item2Tab.selectHandler=new Laya.Handler(this,t=>{switch(this.item2Page.selectedIndex=t,t){case 1:!St.instance.iframeElement&&St.instance.createElementVideo();break;case 2:Laya.Scene.open("scenes/uiDemo/page/OpenMainScene.ls",!1);break;case 3:Laya.loader.load("prefab/uiDemo/page/Win.lh").then(e=>{let i=e.create();this.tabPage.parent.addChild(i)});break;case 4:Laya.loader.load("prefab/uiDemo/page/Dialog.lh").then(e=>{e.create().show()});break}t!==1&&St.instance.iframeElement&&St.instance.closeVideo()}),this.item3Tab.selectHandler=new Laya.Handler(this,t=>{this.item3Page.selectedIndex=t}),this.item4Tab.selectHandler=new Laya.Handler(this,t=>{this.item4Page.selectedIndex=t})}onDisable(){}};Wu=d([t5("gbAKGLFtQ5WL6-NpVocAEA")],Wu);var{regClass:i5,property:vI}=Laya,_r=class extends Laya.Script{constructor(){super(...arguments);this.isPlay=!1}onAwake(){console.log("创建动画模板"),this.createAniTemplate("moveB"),this.createAniTemplate("moveC"),this.createAniTemplate("moveE"),this.createAniTemplate("moveF"),this.createAniTemplate("moveH"),this.createAniTemplate("moveI"),this.createAniTemplate("moveK"),this.createAniTemplate("moveL"),this.aniSource.play(0,!0,"moveB")}onEnable(){this.playAni.on(Laya.Event.MOUSE_DOWN,this,()=>{this.isPlay=!0,this.aniSource.play(0,!0,this.selectAni.selectedLabel)}),this.stopAni.on(Laya.Event.MOUSE_DOWN,this,()=>{this.isPlay=!1,this.aniSource.isPlaying&&this.aniSource.stop()}),this.selectAni.selectHandler=new Laya.Handler(this,()=>{this.isPlay?this.aniSource.play(0,!0,this.selectAni.selectedLabel):this.aniSource.play(0,!1,this.selectAni.selectedLabel)})}createAniTemplate(e,i=8){let n=[];for(let r=0;r<i;r++)n.push("resources/UI/role/atlasAni/139x/"+e+r+".png");Laya.Animation.createFrames(n,e)}onError(e){console.log("加载失败: "+e)}};d([vI({type:Laya.Button})],_r.prototype,"playAni",2),d([vI({type:Laya.Button})],_r.prototype,"stopAni",2),d([vI({type:Laya.ComboBox})],_r.prototype,"selectAni",2),d([vI({type:Laya.Animation})],_r.prototype,"aniSource",2),_r=d([i5("tmkUlMggQi20FZpy6nC1aw")],_r);var{regClass:a5,property:xI}=Laya,Lr=class extends Laya.Script{constructor(){super(...arguments);this.isPlay=!1}onEnable(){this.isPlay=!0,this.playAnimation(this.selectAni.selectedLabel),this.playAni.on(Laya.Event.MOUSE_DOWN,this,()=>{this.isPlay=!0,this.playAnimation(this.selectAni.selectedLabel)}),this.stopAni.on(Laya.Event.MOUSE_DOWN,this,()=>{this.isPlay=!1,this.aniSource.isPlaying&&this.aniSource.stop()}),this.selectAni.selectHandler=new Laya.Handler(this,()=>{this.isPlay?this.playAnimation(this.selectAni.selectedLabel):this.playAnimation(this.selectAni.selectedLabel,!1)})}playAnimation(e,i=!0,n=7){let r=[];for(let s=0;s<n;s++)r.push("resources/UI/role/frameAni/"+e+s+".png");this.aniSource.loadImages(r).play(0,i)}};d([xI({type:Laya.Button})],Lr.prototype,"playAni",2),d([xI({type:Laya.Button})],Lr.prototype,"stopAni",2),d([xI({type:Laya.ComboBox})],Lr.prototype,"selectAni",2),d([xI({type:Laya.Animation})],Lr.prototype,"aniSource",2),Lr=d([a5("8gw7FS4iT1q8EhdN3sWklQ")],Lr);var{regClass:n5,property:dJe}=Laya,_k=Laya.Event,r5=Laya.SpineSkeleton,ju=class extends Laya.Script{constructor(){super(...arguments);this.skinArray=["goblin","goblingirl"];this.skinIndex=0;this.spineAniIndex=6}onEnable(){this.createLayaSpine(),this.createSpine()}createLayaSpine(){this.skeletonNode=this.owner.getChildByName("skeletonNode"),Laya.loader.load("resources/UI/role/spineAni/goblins.sk").then(e=>{this.skeletonAni=e.buildArmature(1),this.skeletonNode.addChild(this.skeletonAni),this.skeletonAni.x=128,this.skeletonAni.y=390,this.spineAniNum=this.skeletonAni.getAnimNum(),this.skeletonAni.play(0,!0),this.changeSkin(),this.skeletonNode.on(_k.CLICK,this,this.changeSkin)})}parseComplete(){}createSpine(){this.spineNode=this.owner.getChildByName("spineNode"),Laya.loader.load("resources/UI/role/spineAni/spineboy-pma.skel",Laya.Loader.SPINE).then(e=>{this.spineAni=new r5,this.spineAni.templet=e,this.spineNode.addChild(this.spineAni),this.spineAni.scale(.3,.3),this.spineAni.pos(220,390),this.spineAniNum=this.spineAni.getAnimNum(),this.spineAni.play(this.spineAniIndex,!0),this.spineNode.on(_k.CLICK,this,this.changeAni)})}spineParseComplete(){}changeAni(){++this.spineAniIndex>=this.spineAniNum&&(this.spineAniIndex=5),this.spineAni.play(this.spineAniIndex,!0,!0)}changeSkin(){this.skeletonAni.showSkinByName(this.skinArray[this.skinIndex]),++this.skinIndex>=this.skinArray.length&&(this.skinIndex=0)}};ju=d([n5("qTd2xmRXT4i0Re94qly0Lg")],ju);var{regClass:s5,property:zu}=Laya,Lk=Laya.Event,o5=Laya.Point,Gn=class extends Laya.Script{constructor(){super();this.runAniName="runRight,runRDown1,runRDown2,runRDown3,runDown,runLDown3,runLDown2,runLDown1,runLeft,runLUp1,runLUp2,runLUp3,runUp,runRUp3,runRUp2,runRUp1";this.standAniName="right,Rdown,down,Ldown,left,Lup,up,Rup";this.stageMouse=new o5;this.angle=0;this.isMoving=!1;this.isRun=!1}onEnable(){this.createMap(),this.sceneWindow.on(Lk.MOUSE_UP,this,this.mouseUp),this.roleAniNode=this.roleAni.create(),this.sceneWindow.addChild(this.roleAniNode),this.roleAniNode.pivot(this.roleAniNode.width/2,this.roleAniNode.height/2+26),this.roleAniNode.scale(.6,.6),this.roleAniNode.x=this.lastX=26*32+16,this.roleAniNode.y=this.lastY=16*32+16,this._animator=this.roleAniNode.getComponent(Laya.Animator2D);let e=this._animator.getDefaultState();console.log(e.name),this.createWallMap()}createWallMap(){Laya.loader.load("resources/tiledMap/map1_32.json").then(()=>{let i=Laya.loader.getRes("resources/tiledMap/map1_32.json").data.layers[2],n=i.data,r=i.width,s=i.height;console.log(n);let o;o=new Array;for(var l=r,u=s,m=0;m<u;m++){o[m]=new Array;for(var h=0;h<l;h++)n[m*l+h]==0?o[m][h]=1:o[m][h]=0}console.log(o),this.graph=new window.Graph(o),this.opts=[],this.opts.closest=!0,this.opts.heuristic=window.astar.heuristics.diagonal})}mouseUp(e){if(this.isMoving)return;this.stageMouse.x=Laya.stage.mouseX,this.stageMouse.y=Laya.stage.mouseY;let i=this.gameMap.globalToLocal(this.stageMouse);console.log(i);var n=this.graph.grid[Math.ceil(this.roleAniNode.y/32)-1][Math.ceil(this.roleAniNode.x/32)-1],r=this.graph.grid[Math.ceil(i.y/32)-1][Math.ceil(i.x/32)-1];console.log(n,r),this._everyPath=window.astar.search(this.graph,n,r,{closest:this.opts.closest}),console.log(this._everyPath),this._everyPath.length>0&&(this.isMoving=!0),Laya.timer.loop(100,this,this.loopfun)}loopfun(){if(this._everyPath.length>0){let e=this._everyPath[0].y*32+16,i=this._everyPath[0].x*32+16;e==this.lastX?i>this.lastY?this.angle=90:this.angle=270:e>this.lastX?this.angle=0:this.angle=180,this.switchAni("run"),this.lastX=e,this.lastY=i,Laya.Tween.to(this.roleAniNode,{x:e,y:i},100),this._everyPath.splice(0,1)}else this.switchAni("stand"),Laya.timer.clear(this,this.loopfun),this.isMoving=!1}createMap(){this.tiledMap=new Laya.TiledMap,this.tiledMap.createMap("resources/tiledMap/map1_32.json",new Laya.Rectangle(0,0,this.sceneWindow.width,this.sceneWindow.height),new Laya.Handler(this,this.completeHandler))}onLoaded(){this.tiledMap.mapSprite().removeSelf(),this.gameMap.addChild(this.tiledMap.mapSprite())}completeHandler(e=null){this.onLoaded()}switchAni(e){if(e=="run"){let i=this.getOrientation(this.angle,this.runAniName);this._animator.play(i),this.isRun=!0}else{this.isRun=!1;let i=this.getOrientation(this.angle,this.standAniName);this.lastAngle!==this.angle&&this._animator.play(i)}}getOrientation(e,i){let n=i.split(","),r=360/n.length;return n[Math.floor(e/r)]}onDisable(){Laya.stage.off(Lk.MOUSE_UP,this,this.mouseUp),this.tiledMap&&this.tiledMap.destroy()}};d([zu({type:Laya.Sprite})],Gn.prototype,"gameMap",2),d([zu({type:Laya.Prefab})],Gn.prototype,"roleAni",2),d([zu({type:"string"})],Gn.prototype,"runAniName",2),d([zu({type:"string"})],Gn.prototype,"standAniName",2),d([zu({type:Laya.Panel})],Gn.prototype,"sceneWindow",2),Gn=d([s5("zBb5TGy7Swu5_GpFiGzUng")],Gn);var{regClass:l5,property:_Je}=Laya,vk=Laya.Rectangle,bo=class extends Laya.Script{constructor(){super(...arguments);this._rect1=vk.TEMP;this._rect2=vk.TEMP}rectDetection(e,i){return!(e.x>i.x+i.width||e.x+e.width<i.x||e.y>i.y+i.height||e.y+e.height<i.y)}collisionWith(e,i,n){let r=[];if(n==0){var s=Laya.Point.create(),o=e.width/2,l=e.height/2,u=Laya.Point.create(),m,h;s.x=e.x+o,s.y=e.y+l,m=this.rectToRadius(e.width,e.height)}else if(n==2){var y,x;x=this.arrayToPoint(e)}for(let E=0;E<i.length;E++)if(e!=i[E])switch(n){case 0:u.x=i[E].x+i[E].width/2,u.y=i[E].y+i[E].height/2,h=this.rectToRadius(i[E].width,i[E].height),this.circleDetection(s,u,m+h)&&r.push(i[E]);break;case 1:this.rectDetection(e,i[E])&&r.push(i[E]);break;case 2:e.name==="c1"?(y=this.arrayToPoint(i[E]),this.circleAndPolygonDetection(e,y,i[E])&&r.push(i[E])):i[E].name==="c1"?this.circleAndPolygonDetection(i[E],x,e)&&r.push(i[E]):(y=this.arrayToPoint(i[E]),this.polygonDetection(x,y,e,i[E])&&r.push(i[E]));break}return r}circleAndPolygonDetection(e,i,n){let r=this.getSides(i),s=[],o=Laya.Point.create(),l=Laya.Point.create(),u=e.hitArea._hit._cmds[0].radius,m=this.getNodeCoord(i,n);o.x=e.x+e.hitArea._hit._cmds[0].x,o.y=e.y+e.hitArea._hit._cmds[0].y,l=this.getNearestPoint(o,m),s.push(new Laya.Point(l.x-o.x,l.y-o.y));for(let h=0,y=r.length;h<y;h++)s.push(this.perpendicular(r[h]));for(let h=0,y=s.length;h<y;h++){let x=s[h],E=this.getCircleProjection(o,x,u),S=this.getPolygonProjection(m,x);if(!this.isOverlap(E,S))return!1}return!0}getNearestPoint(e,i){let n=i[0],r=this.getDistance(e,n),s,o;for(let l=1;l<i.length;l++)s=i[l],o=this.getDistance(e,s),o<r&&(r=o,n=s);return n}polygonDetection(e,i,n,r){let s=this.getSides(e).concat(this.getSides(i)),o=[],l=this.getNodeCoord(e,n),u=this.getNodeCoord(i,r);for(let m=0,h=s.length;m<h;m++)o.push(this.perpendicular(s[m]));for(let m=0,h=o.length;m<h;m++){let y=o[m],x=this.getPolygonProjection(l,y),E=this.getPolygonProjection(u,y);if(!this.isOverlap(x,E))return!1}return!0}isOverlap(e,i){let n,r;return n=e.min<i.min?e.min:i.min,r=e.max>i.max?e.max:i.max,e.max-e.min+(i.max-i.min)>=r-n}getNodeCoord(e,i){let n=[];for(let r=0;r<e.length;r++){let s=Laya.Point.create();s.x=e[r].x+i.x+i.hitArea._hit._cmds[0].x,s.y=e[r].y+i.y+i.hitArea._hit._cmds[0].y,n.push(s)}return n}getPolygonProjection(e,i){let n=null,r=null;for(let s=0;s<e.length;s++){let o=this.dotProduct(e[s],i)/this.getLength(i);(n===null||o<n)&&(n=o),(r===null||o>r)&&(r=o)}return{min:n,max:r}}getCircleProjection(e,i,n){let r=this.dotProduct(e,i)/this.getLength(i);return{min:r-n,max:r+n}}rectToRadius(e,i){let n;return e==i?n=e/2:n=Math.sqrt(e*e+i*i)/2,n}circleDetection(e,i,n){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))<=n}circlesCollision(e,i,n,r){let s=this.subtract(e,i),o=this.getCircleProjection(e,s,n),l=this.getCircleProjection(i,s,r);return!!this.isOverlap(o,l)}arrayToPoint(e){let i=[],n=[];if(n=e.hitArea._hit._cmds[0].points,n&&n.length>3)for(let r=0;r<n.length/2;r++)i[r]=Laya.Point.create(),i[r].x=n[r*2],i[r].y=n[r*2+1];return i}perpendicular(e){let i=Laya.Point.create();return i.x=e.y,i.y=-e.x,i}getNormal(e){let i=Math.sqrt(e.x*e.x+e.y*e.y);return new Laya.Point(e.y/i,(0-e.x)/i)}getSides(e){var i=e,n=i.length,r=new Array;if(n>=3){for(var s=1,o=i[0];s<n;s++){let l=i[s];r.push(this.subtract(l,o)),o=l}r.push(this.subtract(i[0],i[n-1]))}return r}getLength(e){return Math.sqrt(e.x*e.x+e.y*e.y)}dotProduct(e,i){return e.x*i.x+e.y*i.y}subtract(e,i){return Laya.Point.create().setTo(e.x-i.x,e.y-i.y)}getDistance(e,i){let n=e.x-i.x,r=e.y-i.y;return Math.sqrt(n*n+r*r)}};bo=d([l5("naI7Ga3ZQzuwHxZXbiaZEw")],bo);var II=class extends Laya.View{};var{regClass:c5,property:IJe}=Laya,vr=class extends II{constructor(){super();this._detectionType=0;this.collisionNodes=null;vr.i=this}onEnable(){this.collisionNodes=[this.c1,this.p1,this.p2],this._script=this.getComponent(bo),this.detectionType.selectHandler=new Laya.Handler(this,this.onSelected),this.detectionType.selectedIndex=0}onSelected(e){switch(console.log("onSelected:"+e),this._detectionType=e,e){case 0:this.setCircleLine([this.c11,this.p11,this.p22]);break;case 1:this.setRectLine([this.c11,this.p11,this.p22]);break;case 2:this.c11.graphics.clear(),this.p11.graphics.clear(),this.p22.graphics.clear();break}}collisionWith(e){let i;i=this._script.collisionWith(e,this.collisionNodes,this._detectionType),i.length>0?(i.push(e),this.setLineWidth(i)):this.retsetLineWidth()}setLineWidth(e){for(let i=0;i<e.length;i++)e[i]._graphics._cmds[0].lineWidth=3}retsetLineWidth(){for(let e=0;e<this.collisionNodes.length;e++)this.collisionNodes[e]._graphics._cmds[0].lineWidth=0}setCircleLine(e,i=1,n="#1e00fb"){for(let r=0;r<e.length;r++){e[r].graphics.clear();let s=e[r].width/2,o=e[r].height/2,l=this._script.rectToRadius(e[r].width,e[r].height);e[r].graphics.drawCircle(s,o,l,null,n,i)}}setRectLine(e,i=1,n="#1e00fb"){for(let r=0;r<e.length;r++)e[r].graphics.clear(),e[r].graphics.drawRect(e[r].x,e[r].y,e[r].width,e[r].height,null,n,i)}};vr=d([c5("RrGHZH_SROCrF5XxFa05sg")],vr);var{regClass:u5,property:tc}=Laya,go=Laya.Event,xk=Laya.Point,dn=class extends Laya.Script{constructor(){super();this.runAniName="runRight,runRDown1,runRDown2,runRDown3,runDown,runLDown3,runLDown2,runLDown1,runLeft,runLUp1,runLUp2,runLUp3,runUp,runRUp3,runRUp2,runRUp1";this.standAniName="right,Rdown,down,Ldown,left,Lup,up,Rup";this.stageMouse=new xk;this.axisPivot=new xk;this.angle=0;this.radian=0;this.isMoving=!1;this.isRun=!1;this.mLastX=0;this.mLastY=0}onEnable(){this.createMap(),this.joystickAxis=this.joystickBG.getChildByName("joystickAxis"),this.maxDistance=this.joystickBG.width-this.joystickAxis.width,this.axisPivot.x=this.joystickAxis.x,this.axisPivot.y=this.joystickAxis.y,this.sceneWindow.on(go.MOUSE_DOWN,this,this.mouseDown),this.sceneWindow.on(go.MOUSE_MOVE,this,this.mouseMove),this.sceneWindow.on(go.MOUSE_UP,this,this.mouseUp),this.sceneWindow.on(go.MOUSE_OUT,this,this.mouseUp),this.roleAniNode=this.roleAni.create(),this.sceneWindow.addChild(this.roleAniNode),this.roleAniNode.pivot(this.roleAniNode.width/2,this.roleAniNode.height/2),this.roleAniNode.x=this.sceneWindow.width/2,this.roleAniNode.y=this.sceneWindow.height/2,this._animator=this.roleAniNode.getComponent(Laya.Animator2D);let e=this._animator.getDefaultState();console.log(e.name)}createMap(){this.tiledMap=new Laya.TiledMap,this.tiledMap.createMap("resources/tiledMap/desert_new.json",new Laya.Rectangle(0,0,this.sceneWindow.width,this.sceneWindow.height),new Laya.Handler(this,this.completeHandler))}onLoaded(){this.tiledMap.mapSprite().removeSelf(),this.gameMap.addChild(this.tiledMap.mapSprite())}completeHandler(e=null){this.onLoaded()}mouseDown(e){this.touchId=e.touchId,this.isMoving=!0,this.updateJoystickPoint()}updateJoystickPoint(){this.stageMouse.x=Laya.stage.mouseX,this.stageMouse.y=Laya.stage.mouseY;let e=this.joystickBG.globalToLocal(this.stageMouse),i=e.x-this.joystickAxis.width/2,n=e.y-this.joystickAxis.height/2;this.radian=Math.atan2(n-this.axisPivot.y,i-this.axisPivot.x),this.lastAngle=this.angle,this.angle=Math.round(this.radian*180/Math.PI*10)/10,this.angle<0&&(this.angle+=360),this.getDistance(this.joystickBG.width/2,this.joystickBG.height/2,e.x,e.y)>this.maxDistance&&this.lastAngle!==this.angle?(this.joystickAxis.x=Math.floor(Math.cos(this.radian)*this.maxDistance)+this.axisPivot.x,this.joystickAxis.y=Math.floor(Math.sin(this.radian)*this.maxDistance)+this.axisPivot.y):this.joystickAxis.pos(e.x-this.joystickAxis.width/2,e.y-this.joystickAxis.height/2),this.switchAni("run")}switchAni(e){if(e=="run"){let i=this.getOrientation(this.angle,this.runAniName);i!==this.lastRunAniName&&(this.lastRunAniName=i,this._animator.play(i)),this.isRun=!0}else{this.isRun=!1;let i=this.getOrientation(this.angle,this.standAniName);this.lastAngle!==this.angle&&this._animator.play(i)}}mouseUp(e){e.touchId==this.touchId&&(this.touchId=null,this.isMoving=!1,this.joystickAxis.pos(this.axisPivot.x,this.axisPivot.y),this.switchAni("stand"))}mouseMove(e){e.touchId==this.touchId&&this.updateJoystickPoint()}getOrientation(e,i){let n=i.split(","),r=360/n.length;return n[Math.floor(e/r)]}onUpdate(){this.isMoving&&this.updateRoleMove()}updateRoleMove(){this.switchAni("run");let e=Math.cos(this.radian)*2*5,i=Math.sin(this.radian)*2*5;this.mLastX+=e,this.mLastY+=i,console.log("mLastX: "+this.mLastX,", mLastY: "+this.mLastY),this.tiledMap.moveViewPort(this.mLastX,this.mLastY)}getDistance(e,i,n,r){let s=e-n,o=i-r;return Math.sqrt(s*s+o*o)}onDisable(){Laya.stage.off(go.MOUSE_DOWN,this,this.mouseDown),Laya.stage.off(go.MOUSE_UP,this,this.mouseUp),Laya.stage.off(go.MOUSE_MOVE,this,this.mouseMove),this.tiledMap&&this.tiledMap.destroy()}};d([tc(Laya.Sprite)],dn.prototype,"gameMap",2),d([tc(Laya.Prefab)],dn.prototype,"roleAni",2),d([tc({type:"string"})],dn.prototype,"runAniName",2),d([tc({type:"string"})],dn.prototype,"standAniName",2),d([tc({type:Laya.Panel})],dn.prototype,"sceneWindow",2),d([tc(Laya.Image)],dn.prototype,"joystickBG",2),dn=d([u5("k2DFVaFIQEyMRaElgOWsVw")],dn);var EI=class extends Laya.Box{};var{regClass:p5}=Laya,Ku=class extends EI{constructor(){super();this.lastIndex=-1}onEnable(){let e="resources/json/bagList.json";Laya.loader.fetch(e,"json").then(i=>{i.bagList&&i.bagList.length>0&&(this.bagList.array=i.bagList,this.bagList.renderHandler=new Laya.Handler(this,this.onListRender),this.bagList.selectHandler=new Laya.Handler(this,this.onListSelect),this.bagList.mouseHandler=new Laya.Handler(this,this.onListMouse),this.bagList.vScrollBarSkin="")})}onListRender(e,i){i>this.bagList.array.length||i<0}onListSelect(e){this.tips.visible=!0,this.bagList.array[e].listItemBG={skin:"resources/UI/images/bg/bg100-1.png"},this.lastIndex!==-1&&(this.bagList.array[this.lastIndex].listItemBG={skin:"resources/UI/images/bg/bg100-0.png"}),this.lastIndex=e,this.itemImg.skin=this.bagList.array[e].listItemImg.skin,this.itemNumber.text="数量 "+this.bagList.array[e].listItemNumber.text,this.itemReadme.text=this.bagList.array[e].readme}onListMouse(e,i){}onDisable(){}};Ku=d([p5("fimeRTYXT46eMH6komwhJQ")],Ku);var{regClass:m5,property:K1}=Laya,Ts=class extends Laya.Script{constructor(){super()}onEnable(){var e=this.getDataSourece();Laya.loader.load("prefab/ComboList.lh").then(i=>{let n=i.create();this.comboList=n,this.comboList.array=e,this.comboList.repeatY=e.length,this.combo2.list=this.comboList,this.combo2.list.width=this.combo2.width,this.combo2.list.hScrollBarSkin="",this.combo2.selectHandler=new Laya.Handler(this,this.onSelected2)}),this.combo1.selectHandler=new Laya.Handler(this,this.onSelected1)}onSelected1(e){this.selectedText.text="您选中了："+this.combo1.selectedLabel}onSelected2(e){this.selectedText.text="您选中了："+(e<0?"":this.comboList.array[e].label)}getDataSourece(){for(var e=[],i=0;i<10;i++)e[i]={optText:{text:"选项"+(i+1)}};return e}onDisable(){}};d([K1({type:Laya.ComboBox})],Ts.prototype,"combo1",2),d([K1({type:Laya.ComboBox})],Ts.prototype,"combo2",2),d([K1({type:Laya.Label})],Ts.prototype,"selectedText",2),Ts=d([m5("M6bGyqDSRCGU3TkvNeqvRw")],Ts);var wI=class extends Laya.View{};var{regClass:h5}=Laya,qu=class extends wI{onEnable(){this.hList.array=this.getListDataSource(),this.hList.scrollTo(1);let e=this.hList.cells[1].getChildByName("icon");e.scaleX=e.scaleY=2,this.hList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange),this.leftLimit=this.getLeftLimit(),this.rightLimit=this.getRightLimit()}onScrollBarChange(){var e=this.hList.scrollBar.value,i=this.hList.array;if(e>this.leftLimit){var n=i.shift();i[i.length]=n,this.hList.array=i,this.hList.scrollBar.value=e-this.hList.cells[0].width-this.hList.spaceX,this.iconTweenToLeft()}else e<this.rightLimit&&(n=i.pop(),i.unshift(n),this.hList.array=i,this.hList.scrollBar.value=e+this.hList.cells[0].width+this.hList.spaceX,this.iconTweenToRight())}iconTweenToLeft(e=200){let i=this.hList.cells[0].getChildByName("icon");i.scaleX=i.scaleY=2,Laya.Tween.to(i,{scaleX:1,scaleY:1},e);let n=this.hList.cells[1].getChildByName("icon");n.scaleX=n.scaleY=1,Laya.Tween.to(n,{scaleX:2,scaleY:2},e)}iconTweenToRight(e=200){let i=this.hList.cells[1].getChildByName("icon");i.scaleX=i.scaleY=2,Laya.Tween.to(i,{scaleX:1,scaleY:1},e);let n=this.hList.cells[2].getChildByName("icon");n.scaleX=n.scaleY=1,Laya.Tween.to(n,{scaleX:2,scaleY:2},e)}getRightLimit(){return this.hList.cells[0].width-this.hList.spaceX}getLeftLimit(){return this.hList.cells[0].width*2+this.hList.spaceX}getListDataSource(e=5){let i=[];for(let n=0;n<e;n++)i[n]={},i[n].icon={skin:`resources/UI/role/r${n}.png`};return i}};qu=d([h5("WFag7yYwR9q-iI31OJUedg")],qu);var{regClass:d5,property:TI}=Laya,xr=class extends Laya.Script{constructor(){super();this.optStatus=[];this.timestampFormat=(e,i)=>{let n=i?new Date(i):new Date,r={"M+":n.getMonth()+1,"D+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"S+":n.getMilliseconds()};new RegExp("(Y+)").test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in r)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length==1?r[s]:("00"+r[s]).substr((""+r[s]).length)));return e}}onEnable(){let e="resources/json/mailList.json";Laya.loader.fetch(e,"json").then(i=>{let n=i.mailList;n&&n.length>0&&(this.mailList.array=n,this.mailList.mouseHandler=new Laya.Handler(this,this.onListMouse),this.mailList.repeatY=n.length,this.mailList.vScrollBarSkin=""),this.addMail.on(Laya.Event.CLICK,this,this.addMialItem),this.selectDel.on(Laya.Event.CLICK,this,this.listSelectDel),this.selectFlag.on(Laya.Event.CLICK,this,this.listSelectFlag)})}listSelectFlag(){if(this.optStatus.length>0){for(let e=0;e<this.optStatus.length;e++){let i=this.optStatus[e];this.mailList.array[i].flag=1,this.mailList.array[i].flagStatus={skin:"resources/UI/images/comp/img_mail_open.png"},this.mailList.array[i].flagBtn={label:"标为未读",labelColors:"#3277f3,#3277f3,#3277f3"}}this.mailList.refresh(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"已成功标记"})}else Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"没有勾选项，请先勾选"})}listSelectDel(){if(this.optStatus.length>0){this.optStatus.sort(function(e,i){return i-e});for(let e=0;e<this.optStatus.length;e++)this.mailList.array.splice(this.optStatus[e],1);this.optStatus=[],this.mailList.refresh(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"已成功删除"})}else Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"没有勾选项，请先勾选"})}addMialItem(){var e=this.mailList.startIndex+1;let i={mailTitle:{text:"这里是新增加的邮件"+e},mailDateTime:{text:this.timestampFormat("YYYY-MM-DD hh:mm")},opt:{visible:!1},flagStatus:{skin:"resources/UI/images/comp/img_mail.png"},flagBtn:{label:"标为已读",labelColors:"#000000,#000000,#000000"}};if(this.mailList.array.splice(e,0,i),this.optStatus.length>0)for(let n=0;n<this.optStatus.length;n++)this.optStatus[n]>=e&&(this.optStatus[n]+=1);this.mailList.refresh()}onListMouse(e,i){if(e.type==Laya.Event.CLICK){var n=this.optStatus.indexOf(i);switch(e.target.name){case"optBG":n===-1?(this.mailList.array[i].opt={visible:!0},this.optStatus.push(i)):(this.mailList.array[i].opt={visible:!1},this.optStatus.splice(n,1)),this.mailList.refresh();break;case"mailTitle":Laya.Scene.open("scenes/uiDemo/Dialog.scene",!1,{title:this.mailList.array[i].mailTitle.text,text:"邮件内容，此处省略1000字……………………"}),this.mailList.array[i].flag=1,this.mailList.array[i].flagStatus={skin:"resources/UI/images/comp/img_mail_open.png"},this.mailList.array[i].flagBtn={label:"标为未读",labelColors:"#3277f3,#3277f3,#3277f3"},this.mailList.refresh();break;case"flagBtn":this.mailList.array[i].flag===1?(this.mailList.array[i].flag=0,this.mailList.array[i].flagStatus={skin:"resources/UI/images/comp/img_mail.png"},this.mailList.array[i].flagBtn={label:"标为已读",labelColors:"#000000,#000000,#000000"}):(this.mailList.array[i].flag=1,this.mailList.array[i].flagStatus={skin:"resources/UI/images/comp/img_mail_open.png"},this.mailList.array[i].flagBtn={label:"标为未读",labelColors:"#3277f3,#3277f3,#3277f3"}),this.mailList.refresh();break;case"delBtn":if(this.mailList.array.splice(i,1),n>-1){this.optStatus.splice(n,1);for(let r=n;r<this.optStatus.length;r++)this.optStatus[r]-=1}this.mailList.refresh(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"删除成功"});break}}}};d([TI({type:Laya.List})],xr.prototype,"mailList",2),d([TI({type:Laya.Button})],xr.prototype,"addMail",2),d([TI({type:Laya.Button})],xr.prototype,"selectDel",2),d([TI({type:Laya.Button})],xr.prototype,"selectFlag",2),xr=d([d5("HzpJPDUEQN69Xg1VasHb-w")],xr);var{regClass:f5,property:ic}=Laya,fn=class extends Laya.Script{constructor(){super();this.scrollBarIsStop=!1;this.msgIdNow=1;this.itemIsOpen=!1;this.itemOpenId=-1;this.redHotStatus=[];this.mouseDown=!1}onEnable(){this.refreshList.array=this.createListData(9),this.refreshList.repeatY=this.refreshList.array.length,this.refreshList.vScrollBarSkin="",this.toLine.on(Laya.Event.CLICK,this,this.onToLineBtn),this.toTop.on(Laya.Event.CLICK,this,this.onToTopBtn),this.toBottom.on(Laya.Event.CLICK,this,this.onToBottomBtn),this.refreshList.on(Laya.Event.MOUSE_UP,this,this.stageOnMouseUp),this.refreshList.on(Laya.Event.MOUSE_OUT,this,this.stageOnMouseUp),this.refreshList.scrollBar.stopMoveLimit=this.scrollBarIsStopBind.bind(this),this.refreshLimit("dragTopLimit",80),this.refreshLimit("dragBottomLimit",80,20),this.refreshList.mouseHandler=new Laya.Handler(this,this.onListMouse)}stageOnMouseUp(){this.mouseDown=!1}refreshLimit(e,i,n=0,r=2e3){e==="dragTopLimit"?this.refreshList.scrollBar.topMoveLimit=i:e==="dragBottomLimit"&&(this.refreshList.scrollBar.bottomMoveLimit=i),this.refreshList.scrollBar.on(e,this,()=>{if(console.log("达到了滚动限制:"+e),this.refreshLoading.visible=!0,e==="dragTopLimit"){this.refreshLoading.bottom=NaN,this.refreshLoading.top=n;var s=this.createListData(5,"顶部新增的标题");s=s.concat(this.refreshList.array);var o=0+5,l=0;if(this.redHotStatus.length>0)for(let u=0;u<this.redHotStatus.length;u++)this.redHotStatus[u]+=5}else if(e==="dragBottomLimit"){this.refreshList.scrollBar.disableDrag=!0,this.refreshLoading.top=NaN,this.refreshLoading.bottom=n;var s=this.createListData(5,"底部新增的标题");s=this.refreshList.array.concat(s);var o=this.refreshList.array.length-1,l=o+5}this.scrollBarIsStop=!0,Laya.timer.once(r,this,()=>{this.refreshList.array=s,this.refreshList.scrollTo(l),this.refreshList.selectedIndex=o,this.scrollBarIsStop=!1,this.refreshList.scrollBar.backToNormal(),this.refreshLoading.visible=!1})})}onListMouse(e,i){e.type==Laya.Event.MOUSE_DOWN&&(this.mouseDown=!0,this.itemIsOpen?(this.itemIsOpen=!1,this.itemOpenId=-1,Laya.Tween.to(this.openedItem,{x:0},500,null,Laya.Handler.create(this,()=>{this.refreshList.scrollBar.disableDrag=!1}))):(this.moveLastPos=e.target.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),e.target.on(Laya.Event.MOUSE_MOVE,this,this.onItemBoxMouseMove,[e.target,i]))),e.type==Laya.Event.MOUSE_UP&&(this.mouseDown=!1,this.itemOnMouseUp()),e.type==Laya.Event.CLICK&&(e.target.name=="flag"&&this.onClickFlag(i),e.target.name=="del"&&this.onClickDel(i))}itemOnMouseUp(){if(this.itemIsOpen){var e;this.openedItem.x<-80?e=-262:(this.itemIsOpen=!1,e=0),e!==this.openedItem.x&&Laya.Tween.to(this.openedItem,{x:e},500),this.refreshList.scrollBar.disableDrag=!1,this.itemOpenId!==-1&&(this.openedItem.off(Laya.Event.MOUSE_MOVE,this,this.onItemBoxMouseMove),this.itemOpenId=-1)}}onClickFlag(e){var i=this.redHotStatus.indexOf(e);i==-1?(this.refreshList.array[e].avatar={},this.refreshList.array[e].avatar.redHot={visible:!0},this.refreshList.array[e].flag={flagText:{text:"标记已读"}},this.redHotStatus.push(e)):(this.refreshList.array[e].avatar={redHot:{visible:!1}},this.refreshList.array[e].flag={flagText:{text:"标记未读"}},this.redHotStatus.splice(i,1)),this.refreshList.refresh()}onClickDel(e){this.refreshList.array.splice(e,1),this.itemOpenId=-1;var i=this.redHotStatus.indexOf(e);if(i>-1&&this.redHotStatus.splice(e,1),this.redHotStatus.length>0)for(let n=0;n<this.redHotStatus.length;n++)this.redHotStatus[n]>e&&(this.redHotStatus[n]+=1);this.refreshList.refresh()}onItemBoxMouseMove(e,i){if(this.mouseDown){let n=e.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),r=this.moveLastPos.x-n.x,s=this.moveLastPos.y-n.y;Math.abs(r)>Math.abs(s)&&!this.itemIsOpen&&(this.openedItem=e,this.itemIsOpen=!0,this.refreshList.scrollBar.disableDrag=!0,this.itemOpenId=i),this.itemIsOpen&&(this.openedItem.x-=r,this.openedItem.x<-262?this.openedItem.x=-262:this.openedItem.x>0&&(this.openedItem.x=0))}else this.refreshList.scrollBar.disableDrag=!1}scrollBarIsStopBind(){return this.scrollBarIsStop}onToLineBtn(){let e=parseInt(this.lineNumber.text)-1;this.refreshList.scrollTo(e),e<this.refreshList.array.length&&(this.refreshList.selectedIndex=e)}onToTopBtn(){this.refreshList.scrollTo(0),this.refreshList.selectedIndex=0}onToBottomBtn(){let e=this.refreshList.array.length-1;this.refreshList.scrollTo(e),this.refreshList.selectedIndex=e}createListData(e=5,i="初始测试标题"){let n=new Date,r=n.getHours()<10?"0"+n.getHours():""+n.getHours(),s=n.getMinutes()<10?"0"+n.getMinutes():""+n.getMinutes();for(var o=[],l=0;l<e;l++){let u={text:r+" : "+s};o[l]={},o[l].msgTime=u,o[l].msgTitle={text:i+(this.msgIdNow+l)},o[l].avatar={redHot:{visible:!1}}}return this.msgIdNow+=l,o}onDisable(){}};d([ic({type:Laya.List})],fn.prototype,"refreshList",2),d([ic({type:Laya.Button})],fn.prototype,"toLine",2),d([ic({type:Laya.Button})],fn.prototype,"toTop",2),d([ic({type:Laya.Button})],fn.prototype,"toBottom",2),d([ic({type:Laya.Box})],fn.prototype,"refreshLoading",2),d([ic({type:Laya.Label})],fn.prototype,"lineNumber",2),fn=d([f5("m0TR8w0gTbWSvHbZTzrORA")],fn);var CI=class extends Laya.View{};var{regClass:y5,property:KJe}=Laya,Yu=class extends CI{onEnable(){this.tree1.xml=this.getTreeData(!0),this.tree2.xml=this.getTreeData(!1)}getTreeData(t){let e="<data>";if(t)e+="<dir itemLabel='一级目录一' isOpen='false'><file itemLabel='二级子项1 '/><file itemLabel='二级子项2 '/><file itemLabel='二级子项3 '/><file itemLabel='二级子项4 '/><file itemLabel='二级子项5 '/></dir><dir itemLabel='一级目录二' isOpen='true'><file itemLabel='二级子项1 '/><file itemLabel='二级子项2 '/><file itemLabel='二级子项3 '/></dir><dir itemLabel='一级目录三' isOpen='false'><file itemLabel='二级子项1 '/><file itemLabel='二级子项2 '/><file itemLabel='二级子项3 '/><file itemLabel='二级子项4 '/><file itemLabel='二级子项5 '/></dir><file itemLabel='一级子项1 '/><file itemLabel='一级子项2 '/>";else for(let i=0;i<5;i++){e+="<item title='目录"+(i+1)+"' isOpen='true'>";for(let n=0;n<5;n++)e+="<subpage title='子项标题"+(n+1)+"' />";e+="</item>"}return e+="</data>",new Laya.XML(e)}};Yu=d([y5("GJWtWFwsQoqNpjA1k42SpQ")],Yu);var SI=class extends Laya.Scene{};var{regClass:b5,property:QJe}=Laya,$u=class extends SI{onEnable(){}onDisable(){}};$u=d([b5("JQ1fkq03ThewqQWRXQPgmw")],$u);var{regClass:g5,property:eZe}=Laya,_o=class extends Laya.Script{constructor(){super()}baseUI(e){this.window=e,this.searchCloseButton(e)}searchCloseButton(e){for(let i=0;i<e.numChildren;i++){let n=e.getChildAt(i);n instanceof Laya.Button&&n.name=="closeBtn"?(n.on(Laya.Event.MOUSE_DOWN,this,()=>{this.window.close()}),console.log("baseUI 发现closeBtn，统一添加关闭事件")):this.searchCloseButton(n)}}onDisable(){}};_o=d([g5("7Fkz4T7JQ5ujwNcIx9lGNA")],_o);var{regClass:_5,property:aZe}=Laya,Xu=class extends _o{constructor(){super()}onEnable(){this.ui=this.owner,this.baseUI(this.ui)}onDisable(){}};Xu=d([_5("utN7JQs_T3iw6KqWT-beFQ")],Xu);var DI=class extends Laya.Box{};var{regClass:L5,property:lZe}=Laya,Ik=Laya.Event,Ek=Laya.Mouse,Qu=class extends DI{constructor(){super()}onEnable(){Laya.Browser.onPC?(this.panel.on(Ik.MOUSE_OVER,this,()=>{Ek.cursor="move"}),this.panel.on(Ik.MOUSE_OUT,this,()=>{Ek.cursor="auto"})):this.topLab.text="背景可拖拽，双指缩放改变大小"}};Qu=d([L5("9s1SW9WKRrSodo6JY27VSw")],Qu);var{regClass:v5,property:kI}=Laya,Ir=class extends Laya.Script{constructor(){super()}onEnable(){this.graphics=this.graphicsSprite.graphics,Laya.timer.loop(2e3,this,()=>{this.changeImgSkin(),this.changeSpriteTexture(),this.changeFillTexture(),this.changeTexture()})}changeImgSkin(){this.Img.skin=this.randomImg()}changeSpriteTexture(){this.spImg.loadImage(this.randomImg(!0,6,5))}changeFillTexture(){this.graphics.clear();let e=this.randomImg(!0,4);Laya.loader.load(e).then(i=>{this.graphics.fillTexture(i,0,0,1,1)})}changeTexture(){this.textureImg.graphics.clear();let e=Laya.loader.getRes(this.randomImg(!0,8));this.textureImg.graphics.drawTexture(e)}randomImg(e=!1,i=8,n=1){let r=Math.floor(Math.random()*(i-n+1))+n;return e?"resources/UI/role/m"+r+".png":"resources/UI/role/w"+r+".png"}onDisable(){}};d([kI({type:Laya.Image})],Ir.prototype,"Img",2),d([kI({type:Laya.Sprite})],Ir.prototype,"spImg",2),d([kI({type:Laya.Sprite})],Ir.prototype,"graphicsSprite",2),d([kI({type:Laya.Sprite})],Ir.prototype,"textureImg",2),Ir=d([v5("ulgCMWfCQKiihSJynpbJFg")],Ir);var AI=class extends Laya.View{};var{regClass:x5,property:fZe}=Laya,MI=Laya.Event,Ju=class extends AI{onEnable(){this._hitArea.on(MI.MOUSE_DOWN,this,()=>{this._hitArea.off(MI.MOUSE_MOVE,this,this.bg3MaskMove),this._hitArea.startDrag(),this._hitArea.on(MI.MOUSE_MOVE,this,this.bg3MaskMove)}),this._mask.on(MI.MOUSE_MOVE,this,this.maskMove)}bg3MaskMove(t){t.stopPropagation(),this.bg3Mask.x=this._hitArea.x,this.bg3Mask.y=this._hitArea.y}maskMove(){let t=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),e=t.x-this._mask.width/this.bg2.scaleX/2,i=t.y-this._mask.height/this.bg2.scaleY/2;e>80&&i>80&&(this._mask.x=t.x-this._mask.width/this.bg2.scaleX/2,this._mask.y=t.y-this._mask.height/this.bg2.scaleY/2,this.bg2.x=(-t.x-this._mask.width/2)*(this.bg2.scaleX-1),this.bg2.y=(-t.y-this._mask.height/2)*(this.bg2.scaleY-1))}};Ju=d([x5("zt0rBsEST9KVJgcimd7SFA")],Ju);var{regClass:I5,property:Lo}=Laya,ja=class extends Laya.Script{constructor(){super()}onEnable(){this.changeMouseCursor(),this.throughTab.selectHandler=new Laya.Handler(this,this.onSwitchTab)}onSwitchTab(e){switch(e){case 0:this.leftBg.hitTestPrior=!0,this.rightBg.hitTestPrior=!0;break;case 1:this.leftBg.hitTestPrior=!1,this.rightBg.hitTestPrior=!1;break}}changeMouseCursor(){this.leftBg.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Mouse.cursor="move"}),this.leftBg.on(Laya.Event.MOUSE_OUT,this,()=>{Laya.Mouse.cursor="auto"}),this.rightBg.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Mouse.cursor="move"}),this.rightBg.on(Laya.Event.MOUSE_OUT,this,()=>{Laya.Mouse.cursor="auto"}),this.leftBg.on(Laya.Event.CLICK,this,()=>{Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了左侧的可点击区域",point:{x:Laya.stage.mouseX-100}}),console.log("click "+this.leftBg.name)}),this.rightBg.on(Laya.Event.CLICK,this,()=>{Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了右侧的可点击区域",point:{x:Laya.stage.mouseX-120}}),console.log("click "+this.rightBg.name)}),this.btn1.on(Laya.Event.CLICK,this,e=>{e.stopPropagation(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了测试按钮1"}),console.log("click btn1")}),this.btn2.on(Laya.Event.CLICK,this,e=>{e.stopPropagation(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了测试按钮2"}),console.log("click btn2")}),this.close1.on(Laya.Event.CLICK,this,e=>{e.stopPropagation(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了左侧关闭按钮",point:{x:Laya.stage.mouseX-100}}),console.log("click "+this.close1.name)}),this.close2.on(Laya.Event.CLICK,this,e=>{e.stopPropagation(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了右侧关闭按钮",point:{x:Laya.stage.mouseX-120}}),console.log("click "+this.close2.name)})}onDisable(){}};d([Lo({type:Laya.Tab})],ja.prototype,"throughTab",2),d([Lo({type:Laya.Sprite})],ja.prototype,"leftBg",2),d([Lo({type:Laya.Sprite})],ja.prototype,"rightBg",2),d([Lo({type:Laya.Button})],ja.prototype,"btn1",2),d([Lo({type:Laya.Button})],ja.prototype,"btn2",2),d([Lo({type:Laya.Sprite})],ja.prototype,"close1",2),d([Lo({type:Laya.Sprite})],ja.prototype,"close2",2),ja=d([I5("AmLUThtNSaW6zL9W205gyg")],ja);var{regClass:E5,property:BI}=Laya,Er=class extends Laya.Script{onEnable(){this.bTop.getComponent(Laya.BoxCollider).width=this.bTop.width,this.bBottom.getComponent(Laya.BoxCollider).width=this.bBottom.width,this.bRight.getComponent(Laya.BoxCollider).height=this.bRight.height,this.bLeft.getComponent(Laya.BoxCollider).height=this.bLeft.height}};d([BI({type:Laya.Image})],Er.prototype,"bTop",2),d([BI({type:Laya.Image})],Er.prototype,"bBottom",2),d([BI({type:Laya.Image})],Er.prototype,"bRight",2),d([BI({type:Laya.Image})],Er.prototype,"bLeft",2),Er=d([E5("jp5l8WZtQLuVyfU4ljEFyQ")],Er);var RI=class extends Laya.View{};var{regClass:w5,property:wZe}=Laya,Zu=class extends RI{onEnable(){this.testProgress()}testProgress(){this.loading2.value=.01,this.loadText.text="资源加载中……",Laya.timer.loop(100,this,this.changeProgress)}changeProgress(){this.loading2.value+=.05,this.loading2.value==1&&(this.loadText.text="资源加载完成",Laya.timer.clear(this,this.changeProgress),Laya.timer.once(3e3,this,()=>{this.testProgress()}))}};Zu=d([w5("9w97n2rXRjiACN_vzizQPw")],Zu);var{regClass:T5,property:SZe}=Laya,Cs=class extends Laya.Script{constructor(){super()}onStart(){this._anim=this.owner.getComponent(Laya.Animator)}isPlayanimaByName(e=0){let i=this._anim.getControllerLayer(e);if(i==null)return!1;let n=i.getCurrentPlayState();return n==null?!1:n.animatorState.clip.islooping?!0:n._finish}isSameByName(e,i=0){let n=this._anim.getControllerLayer(i);if(n==null)return!1;let r=n.getCurrentPlayState();if(r==null)return!1;if(r.animatorState.name==e)return!0}playAnim(e,i=!1){if(i){if(this.isSameByName(e))return;this._anim.play(e,0,0);return}this.isPlayanimaByName()||this._anim.play(e,0,0)}};Cs=d([T5("q0uAMn-DTUm70T4fGtxGlw")],Cs);var zt=Laya.InputManager,{regClass:C5,property:NZe}=Laya,ep=class extends Laya.Script{constructor(){super(...arguments);this.currRockerBar=null;this.maxDistance=80;this.isMouseDown=!1;this.mouseDownPosition=new Laya.Point;this._currentMouse=new Laya.Point;this.initRockerBarPosition=new Laya.Point;this.key1Pressed=!1;this.key2Pressed=!1;this.key3Pressed=!1;this.key4Pressed=!1;this.key5Pressed=!1;this.key6Pressed=!1;this.key7Pressed=!1;this.key8Pressed=!1;this.directionOffset=0;this.isKeyRun=!1}onEnable(){Laya.InputManager.multiTouchEnabled=!0}onStart(){this.currRockerBar=this.owner.getChildByName("freebar"),this.img_freebar_arrow=this.owner.getChildByName("img_freebar_arrow"),this.freetrack=this.owner.getChildByName("freetrack"),this.img_arrow_left=this.freetrack.getChildByName("img_arrow_left"),this.img_arrow_right=this.freetrack.getChildByName("img_arrow_right"),this.img_arrow_up=this.freetrack.getChildByName("img_arrow_up"),this.img_arrow_down=this.freetrack.getChildByName("img_arrow_down"),this.img_freebar_arrow.visible=!1,Laya.Browser.onPC?this.freetrack.visible=!0:this.img_arrow_left.visible=this.img_arrow_right.visible=this.img_arrow_up.visible=this.img_arrow_down.visible=!1,this.initialise()}initialise(){this.initRockerBarPosition.setTo(this.currRockerBar.x,this.currRockerBar.y),this.currRockerBar.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)}onSkillKeyDown(e,i,n){switch(e.stopPropagation(),i){case 1:this.key1Pressed=n;break;case 2:this.key2Pressed=n;break;case 3:this.key3Pressed=n;break}}onMouseDown(e){B.instance.stopAll||(e.stopPropagation(),this.isMouseDown=!0,this.currRockerBar.selected=!0,Laya.Browser.onPC||(this.freetrack.visible=!0),this.mouseDownPosition.setTo(this.owner.mouseX,this.owner.mouseY),console.log("onMouseDown this.owner.mouse: ",this.owner.mouseX,this.owner.mouseY),this.isKeyRun=!1,this.touchId=e.touchId)}onMouseUp(e){!this.isMouseDown||e.touchId!==this.touchId||this.endClick(e)}endClick(e){this.isMouseDown=!1,this.currRockerBar.x=this.initRockerBarPosition.x,this.currRockerBar.y=this.initRockerBarPosition.y,this.currRockerBar.selected=!1,this.setDir(-4),this.touchId=-1}onMouseMove(e){if(!this.isMouseDown||!this.currRockerBar||e.touchId!==this.touchId)return;e.stopPropagation(),this._currentMouse.setTo(e.stageX,e.stageY);let i=this.owner.globalToLocal(this._currentMouse,!1),n=i.x-this.mouseDownPosition.x,r=i.y-this.mouseDownPosition.y;if(Math.sqrt(n**2+r**2)<this.maxDistance)this.currRockerBar.x=this.initRockerBarPosition.x+n,this.currRockerBar.y=this.initRockerBarPosition.y+r;else{let o=Math.atan2(n,r);this.currRockerBar.x=Math.sin(o)*this.maxDistance+this.initRockerBarPosition.x,this.currRockerBar.y=Math.cos(o)*this.maxDistance+this.initRockerBarPosition.y}if(Math.abs(n)>this.directionOffset||Math.abs(r)>this.directionOffset){let o=Ct.judgePosition(n,r);this.setDir(o)}}onUpdate(){B.instance.stopAll||this.getKeyboardPressed()}setDir(e){if(this.lastDirection!=e&&(q.instance.setMyHeroDirection(e),this.lastDirection=e),e==-4)this.img_freebar_arrow.visible=!1;else{let i=e+90;this.img_freebar_arrow.rotation=i}}getKeyboardPressed(){if(zt.hasKeyDown(Laya.Keyboard.W)&&zt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(225)):zt.hasKeyDown(Laya.Keyboard.W)&&zt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(315)):zt.hasKeyDown(Laya.Keyboard.S)&&zt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(135)):zt.hasKeyDown(Laya.Keyboard.S)&&zt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(45)):zt.hasKeyDown(Laya.Keyboard.W)?(this.isKeyRun=!0,this.setDir(270)):zt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(0)):zt.hasKeyDown(Laya.Keyboard.S)?(this.isKeyRun=!0,this.setDir(90)):zt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(180)):this.isKeyRun&&this.setDir(-4),zt.hasKeyDown(Laya.Keyboard.H)||zt.hasKeyDown(Laya.Keyboard.NUMPAD_1)){if(this.key1Pressed)return;this.key1Pressed=!0,_.intance.event(b.EVENT_CLICK_NUM,1),Laya.timer.once(500,this,this.notKey1Pressed)}if(zt.hasKeyDown(Laya.Keyboard.J)||zt.hasKeyDown(Laya.Keyboard.NUMPAD_2)){if(this.key2Pressed)return;this.key2Pressed=!0,_.intance.event(b.EVENT_CLICK_NUM,2),Laya.timer.once(500,this,this.notKey2Pressed)}if(zt.hasKeyDown(Laya.Keyboard.K)||zt.hasKeyDown(Laya.Keyboard.NUMPAD_3)){if(this.key3Pressed)return;this.key3Pressed=!0,_.intance.event(b.EVENT_CLICK_NUM,3),Laya.timer.once(500,this,this.notKey3Pressed)}if(zt.hasKeyDown(Laya.Keyboard.L)||zt.hasKeyDown(Laya.Keyboard.NUMPAD_4)){if(this.key4Pressed)return;this.key4Pressed=!0,_.intance.event(b.EVENT_CLICK_NUM,4),Laya.timer.once(500,this,this.notKey4Pressed)}if(zt.hasKeyDown(Laya.Keyboard.M)||zt.hasKeyDown(Laya.Keyboard.NUMPAD_5)){if(this.key5Pressed)return;this.key5Pressed=!0,_.intance.event(b.EVENT_CLICK_NUM,5),Laya.timer.once(500,this,this.notKey5Pressed)}if(zt.hasKeyDown(Laya.Keyboard.N)||zt.hasKeyDown(Laya.Keyboard.NUMPAD_6)){if(this.key6Pressed)return;this.key6Pressed=!0,_.intance.event(b.EVENT_CLICK_NUM,6),Laya.timer.once(500,this,this.notKey6Pressed)}if(zt.hasKeyDown(Laya.Keyboard.B)||zt.hasKeyDown(Laya.Keyboard.NUMPAD_7)){if(this.key7Pressed)return;this.key7Pressed=!0,_.intance.event(b.EVENT_CLICK_NUM,7),Laya.timer.once(500,this,this.notKey7Pressed)}if(zt.hasKeyDown(Laya.Keyboard.V)||zt.hasKeyDown(Laya.Keyboard.NUMPAD_8)){if(this.key8Pressed)return;this.key8Pressed=!0,_.intance.event(b.EVENT_CLICK_NUM,8),Laya.timer.once(500,this,this.notKey8Pressed)}}notKey1Pressed(){this.key1Pressed=!1}notKey2Pressed(){this.key2Pressed=!1}notKey3Pressed(){this.key3Pressed=!1}notKey4Pressed(){this.key4Pressed=!1}notKey5Pressed(){this.key5Pressed=!1}notKey6Pressed(){this.key6Pressed=!1}notKey7Pressed(){this.key7Pressed=!1}notKey8Pressed(){this.key8Pressed=!1}getKeyPressed(e){var i=e.toParentPoint(new Laya.Point(e.x,e.y));return i.x>e.x&&i.x<e.x+e.width&&i.y>e.y&&i.y<e.y+e.height}getDistance(e,i,n,r){let s=e-n,o=i-r;return Math.sqrt(s*s+o*o)}onDisable(){Laya.InputManager.multiTouchEnabled=!1}};ep=d([C5("7cTqWb35RwygSkuWy4QkgQ")],ep);var ac=class{static playSkillEffect(t,e,i){var n=["Attack01","Attack02","Attack03","Attack04"],r=n[e];Laya.Sprite3D.load(t,Laya.Handler.create(null,function(s){i.addChild(s);var o=s.getChildByName(r);o.active=!0;var l=o.getComponent(Laya.ShurikenParticleRenderer);l._particleSystem.play(),setTimeout(()=>{s.removeSelf()},1e3)}))}static playEnemyHurtSkillEffect(t,e){Laya.Sprite3D.load(t,Laya.Handler.create(null,function(i){e.addChild(i);var n="Attack",r=i.getChildByName(n),s=r.getComponent(Laya.ShurikenParticleRenderer);if(s._particleSystem.play(),r.numChildren>0)for(let u=0;u<r.numChildren;u++){var o=r.getChildAt(u),l=o.getComponent(Laya.ShurikenParticleRenderer);l._particleSystem.play()}setTimeout(()=>{i.removeSelf()},1e3)}))}static playNormalEffect(t,e){Laya.Sprite3D.load(t,Laya.Handler.create(null,function(i){e.addChild(i);var n=i,r=n.getComponent(Laya.ShurikenParticleRenderer);if(r._particleSystem.play(),n.numChildren>0)for(let l=0;l<n.numChildren;l++){var s=n.getChildAt(l),o=s.getComponent(Laya.ShurikenParticleRenderer);o._particleSystem.play()}setTimeout(()=>{i.removeSelf()},1e3)}))}};var{regClass:S5,property:wk}=Laya,vo=class extends Laya.Script{constructor(){super();this.followTarget=null;this.speed=.02;this.mLife=5;this.mIsEnd=!1;this.mIsAttack=!1;this.mIsAttackStart=!1;this.mCanPlayFirst=!0;this.mAttackDelayTime=0;this.mCurrentIndex=0;this.followTarget=q.instance.getCurrentHero()}onUpdate(){if(!this.mIsEnd){this.followTarget==null&&(this.followTarget=q.instance.getCurrentHero());var e=new Laya.Vector3(this.followTarget.transform.position.x,0,this.followTarget.transform.position.z),i=new Laya.Vector3(this.owner.transform.position.x,0,this.owner.transform.position.z),n=Laya.Vector3.distance(e,i);if(n<10)if(n<=1)this.mIsAttack?this.isAttackendByPlayer():(this.mCanPlayFirst?(this.mCanPlayFirst=!1,this.attackPlayer()):(this.mAttackDelayTime=this.mAttackDelayTime+Laya.timer.delta,this.mAttackDelayTime>1e3&&(this.mAttackDelayTime=0,this.attackPlayer())),this.mIsAttackStart=!1),q.instance.insertValidList(this.owner);else{this.mAttackDelayTime=0;var r=new Laya.Vector3;Laya.Vector3.subtract(e,i,r),Laya.Vector3.normalize(r,r),this.owner.transform.lookAt(e,Laya.Vector3.Up);var s=this.owner.transform.position;s.vadd(new Laya.Vector3(r.x*this.speed,0,r.z*this.speed),s),this.owner.transform.position=s,this.anim&&this.anim.playAnim("run",!0),this.mCanPlayFirst=!0,this.mIsAttackStart=!1,this.mIsAttack=!1}else this.anim&&this.anim.playAnim("ldle",!0),q.instance.removeValidListByValue(this.owner);this.mLife<=0&&(this.mIsEnd=!0,this.anim&&this.anim.playAnim("die",!0),setTimeout(()=>{q.instance.removeValidListByValue(this.owner),this.owner.removeSelf();var o=q.instance.getCurrentPlane(),l=this.mCurrentIndex;q.instance.createEnemy(o.getChildAt(l),l)},600))}}setCurrentIndex(e){this.mCurrentIndex=e}setLife(e){this.mLife=e}attackPlayer(){ac.playEnemyHurtSkillEffect("resources/prefab/eff_monster.lh",this.owner.getChildAt(0)),q.instance.playSound(2),this.anim&&this.anim.playAnim("attack",!0),setTimeout(()=>{this.mIsEnd||this.anim&&this.anim.playAnim("ldle",!0)},500)}isAttackendByPlayer(){this.mIsAttackStart||(this.anim&&this.anim.playAnim("shouji",!0),ac.playNormalEffect("resources/prefab/eff_shouji.lh",this.owner.getChildAt(0)),setTimeout(()=>{this.mIsEnd||(this.anim&&this.anim.playAnim("shouji",!0),this.mIsAttack=!1)},500),this.mIsAttackStart=!0)}getLife(){return this.mLife}setIsAttack(e){this.mIsAttack=e}};d([wk({type:Cs})],vo.prototype,"anim",2),d([wk({type:"number"})],vo.prototype,"speed",2),vo=d([S5("eWO-rqURQ6ag7phXtJPZCA")],vo);var{regClass:D5,property:tp}=Laya,Wn=class extends Laya.Script{constructor(){super();this.animname="";this.force=!1;this.isBig=!1;this.isCanClick=!0}onStart(){_.intance.on(b.EVENT_CLICK_NUM3,this,this.onMouseClick)}onMouseClick(e){this.isCanClick&&(Laya.Tween.to(this.btn_pic,{scaleX:1.1,scaleY:1.1},250,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this.btn_pic,{scaleX:1,scaleY:1},150,Laya.Ease.linearIn)})),SnackManager.instance.selfSnack.getComponent(fo).catchItem(),q.instance.playSound(1),this.anim1&&(this.anim1.playAnim(this.animname,this.force),setTimeout(()=>{this.anim1.playAnim("idle",this.force),this.isCanClick=!0},500)))}onDestroy(){_.intance.offAllCaller(this)}};d([tp({type:Cs})],Wn.prototype,"anim1",2),d([tp({type:"string"})],Wn.prototype,"animname",2),d([tp({type:"boolean"})],Wn.prototype,"force",2),d([tp({type:"boolean"})],Wn.prototype,"isBig",2),d([tp({type:Laya.Sprite})],Wn.prototype,"btn_pic",2),Wn=d([D5("xovkzdhOSuOc_JJKi_7s2g")],Wn);var{regClass:k5,property:Ck}=Laya,xo=class extends Laya.Script{constructor(){super();this.isBig=!1;this.isCanClick=!0}onStart(){_.intance.on(b.EVENT_CLICK_NUM,this,this.onNumberClick)}onNumberClick(e){e==1?this.isBig||this.onMouseClick(null):this.isBig&&this.onMouseClick(null)}onMouseClick(e){if(this.isCanClick){this.isCanClick&&(this.isCanClick=!1);var i=q.instance.getValidList();Laya.Tween.to(this,{scaleX:1.1,scaleY:1.1},250,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1},150,Laya.Ease.linearIn)}));var n=0;this.isBig?(SnackManager.instance.selfSnack.attack(),q.instance.playSound(3)):(SnackManager.instance.selfSnack.attack(),q.instance.playSound(1)),setTimeout(()=>{this.isCanClick=!0},500)}}getDistance(e,i){return Math.sqrt(e*e+i*i)}getDistanceByPoint(e,i,n,r){let s=e-n,o=i-r;return Math.sqrt(s*s+o*o)}onDestroy(){_.intance.offAllCaller(this)}};d([Ck({type:"boolean"})],xo.prototype,"isBig",2),d([Ck({type:Laya.Sprite})],xo.prototype,"btn_pic",2),xo=d([k5("ye1w48wgTbqktuLPDOjmkw")],xo);var{regClass:A5,property:aet}=Laya,ip=class extends Laya.Script{constructor(){super(...arguments);this.maxX=0;this.minX=-90;this.maxY=0;this.minY=-580;this.scaleSize=.1;this.lastDistance=0;this.startedSingleTouchDrag=!1}onEnable(){this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),this.onMouseWheel()}onMouseWheel(){this.owner.on(Laya.Event.MOUSE_WHEEL,this,e=>{let i=this.owner.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));e.delta>0&&(this.owner.scaleX+=this.scaleSize,this.owner.scaleY+=this.scaleSize),e.delta<0&&(this.owner.scaleX-=this.scaleSize,this.owner.scaleY-=this.scaleSize,this.owner.scaleX<1&&(this.owner.scaleX=1),this.owner.scaleY<1&&(this.owner.scaleY=1));let n=this.owner.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),r=(n.x-i.x)*this.owner.scaleX,s=(n.y-i.y)*this.owner.scaleY;r+=this.owner.x,s+=this.owner.y,this.updateLimit(),r>this.maxX?this.owner.x=this.maxX:r<this.minX?this.owner.x=this.minX:this.owner.x=r,s>this.maxY?this.owner.y=this.maxY:s<this.minY?this.owner.y=this.minY:this.owner.y=s})}onStart(){this.updateLimit()}updateLimit(){let e=this.owner.parent;this.minX=Math.min(e.width-this.owner.width*this.owner.scaleX,0),this.minY=Math.min(e.height-this.owner.height*this.owner.scaleY,0)}onMouseDown(e){if(e.stopPropagation(),e.touches&&e.touches.length>1){this.startedSingleTouchDrag&&(this.owner.stopDrag(),this.startedSingleTouchDrag=!1);let i=this.setPivot(e);!i.x||!i.y?console.log("(((((((((((((((((((((((",this.lastPivot,JSON.parse(JSON.stringify(e.touches))):(this.lastDistance=this.getDistance(e),this.lastPivot=i,this.owner.on(Laya.Event.MOUSE_MOVE,this,this.mouseMove))}else this.owner.startDrag(),this.startedSingleTouchDrag=!0}onMouseUp(e){this.owner.off(Laya.Event.MOUSE_MOVE,this,this.mouseMove)}getDistance(e){var i=0;if(e.touches&&e.touches.length>1){let n=e.touches[0].pos.x-e.touches[1].pos.x,r=e.touches[0].pos.y-e.touches[1].pos.y;i=Math.sqrt(n*n+r*r)}return i}mouseMove(e){let i=this.getDistance(e);this.owner.scaleX+=(i-this.lastDistance)*(this.scaleSize/10),this.owner.scaleY+=(i-this.lastDistance)*(this.scaleSize/10),this.owner.scaleX<1&&(this.owner.scaleX=1),this.owner.scaleY<1&&(this.owner.scaleY=1),this.owner.scaleX>5&&(this.owner.scaleX=5),this.owner.scaleY>5&&(this.owner.scaleY=5);let n=this.setPivot(e);if(!n.x||!n.y)console.log("$$$$$$$$$$$",n,JSON.parse(JSON.stringify(e.touches)));else{this.updateLimit();let r=(n.x-this.lastPivot.x)*this.owner.scaleX,s=(n.y-this.lastPivot.y)*this.owner.scaleY;r+=this.owner.x,s+=this.owner.y,r>this.maxX?this.owner.x=this.maxX:r<this.minX?this.owner.x=this.minX:this.owner.x=r,s>this.maxY?this.owner.y=this.maxY:s<this.minY?this.owner.y=this.minY:this.owner.y=s,this.lastDistance=i}}setPivot(e){if(e.touches&&e.touches.length>=2){let i=this.owner.globalToLocal(new Laya.Point(e.touches[0].pos.x,e.touches[0].pos.y)),n=this.owner.globalToLocal(new Laya.Point(e.touches[1].pos.x,e.touches[1].pos.y));return new Laya.Point((i.x+n.x)/2,(i.y+n.y)/2)}return this.lastPivot}onUpdate(){this.owner.x>this.maxX&&(this.owner.x=this.maxX),this.owner.x<this.minX&&(this.owner.x=this.minX),this.owner.y>this.maxY&&(this.owner.y=this.maxY),this.owner.y<this.minY&&(this.owner.y=this.minY)}addTestPoint(e,i="#ff0000",n=2){let r=new Laya.Sprite;r.graphics.drawCircle(0,0,n,i),this.owner.addChild(r),r.pos(e.x,e.y)}};ip=d([A5("c71-MoP2RIyCrdBAfjnIgw")],ip);var{regClass:M5,property:B5}=Laya,nc=class extends Laya.Script{constructor(){super(...arguments);this.tipsText="";this.isDown=!1}onEnable(){this.tipsText.replace(/(^\s*)|(\s*$)/g,"")}onMouseDown(){this.owner.startDrag(),this.isDown=!0}onMouseUp(){this.isDown=!1}onMouseMove(){this.isDown&&vr.i.collisionWith(this.owner)}onMouseOver(){Laya.Mouse.cursor="move",this.tipsText!==""&&Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:this.tipsText})}onMouseOut(){Laya.Mouse.cursor="auto"}};d([B5({type:"string"})],nc.prototype,"tipsText",2),nc=d([M5("oWa7FUgoQ6CqtyJh_D1Y2w")],nc);var{regClass:R5,property:ap}=Laya,PI=Laya.Event,Sk=Laya.Point,jn=class extends Laya.Script{constructor(){super();this.runAniName="runRight,runRDown1,runRDown2,runRDown3,runDown,runLDown3,runLDown2,runLDown1,runLeft,runLUp1,runLUp2,runLUp3,runUp,runRUp3,runRUp2,runRUp1";this.standAniName="right,Rdown,down,Ldown,left,Lup,up,Rup";this.stageMouse=new Sk;this.axisPivot=new Sk;this.angle=0;this.radian=0;this.isMoving=!1;this.isRun=!1}onEnable(){this.joystickBG=this.owner,this.joystickAxis=this.owner.getChildByName("joystickAxis"),this.maxDistance=this.joystickBG.width-this.joystickAxis.width,this.axisPivot.x=this.joystickAxis.x,this.axisPivot.y=this.joystickAxis.y,this.sceneWindow.on(PI.MOUSE_DOWN,this,this.mouseDown),this.sceneWindow.on(PI.MOUSE_MOVE,this,this.mouseMove),this.sceneWindow.on(PI.MOUSE_UP,this,this.mouseUp),this.sceneWindow.on(PI.MOUSE_OUT,this,this.mouseUp),this.roleAniNode=this.roleAni.create(),this.gameMap.addChild(this.roleAniNode),this.roleAniNode.pivot(this.roleAniNode.width/2,this.roleAniNode.height/2),this.roleAniNode.x=this.gameMap.width/2,this.roleAniNode.y=this.gameMap.height/2,this._animator=this.roleAniNode.getComponent(Laya.Animator2D)}mouseDown(e){this.touchId=e.touchId,this.isMoving=!0,this.updateJoystickPoint()}updateJoystickPoint(){this.stageMouse.x=Laya.stage.mouseX,this.stageMouse.y=Laya.stage.mouseY;let e=this.joystickBG.globalToLocal(this.stageMouse),i=e.x-this.joystickAxis.width/2,n=e.y-this.joystickAxis.height/2;this.radian=Math.atan2(n-this.axisPivot.y,i-this.axisPivot.x),this.lastAngle=this.angle,this.angle=Math.round(this.radian*180/Math.PI*10)/10,this.angle<0&&(this.angle+=360),console.log("radian: "+this.radian+", angle: "+this.angle),this.getDistance(this.joystickBG.width/2,this.joystickBG.height/2,e.x,e.y)>this.maxDistance&&this.lastAngle!==this.angle?(this.joystickAxis.x=Math.floor(Math.cos(this.radian)*this.maxDistance)+this.axisPivot.x,this.joystickAxis.y=Math.floor(Math.sin(this.radian)*this.maxDistance)+this.axisPivot.y):this.joystickAxis.pos(e.x-this.joystickAxis.width/2,e.y-this.joystickAxis.height/2),this.switchAni("run")}switchAni(e){if(e=="run"){let i=this.getOrientation(this.angle,this.runAniName);i!==this.lastRunAniName&&(this.lastRunAniName=i,this._animator.play(i)),this.isRun=!0}else{this.isRun=!1;let i=this.getOrientation(this.angle,this.standAniName);this.lastAngle!==this.angle&&this._animator.play(i)}}mouseUp(e){e.touchId==this.touchId&&(this.touchId=null,this.isMoving=!1,this.joystickAxis.pos(this.axisPivot.x,this.axisPivot.y),this.switchAni("stand"))}mouseMove(e){e.touchId==this.touchId&&this.updateJoystickPoint()}getOrientation(e,i){let n=i.split(","),r=360/n.length;return n[Math.floor(e/r)]}onUpdate(){this.isMoving&&this.updateRoleMove()}updateRoleMove(){this.switchAni("run");let e=Math.cos(this.radian)*2,i=Math.sin(this.radian)*2;(e<0&&this.gameMap.x<0||e>0&&this.gameMap.x>this.sceneWindow.width-this.gameMap.width)&&(this.gameMap.x-=e),(i<0&&this.gameMap.y<0||i>0&&this.gameMap.y>this.sceneWindow.height-this.gameMap.height)&&(this.gameMap.y-=i)}getDistance(e,i,n,r){let s=e-n,o=i-r;return Math.sqrt(s*s+o*o)}};d([ap({type:Laya.Prefab})],jn.prototype,"roleAni",2),d([ap({type:"string"})],jn.prototype,"runAniName",2),d([ap({type:"string"})],jn.prototype,"standAniName",2),d([ap({type:Laya.Sprite})],jn.prototype,"gameMap",2),d([ap({type:Laya.Box})],jn.prototype,"sceneWindow",2),jn=d([R5("Pl5-_PonSLe-7mCnxeXfRw")],jn);var{regClass:P5,property:met}=Laya,np=class extends Laya.Script{constructor(){super();this.isOpen=!0}onEnable(){this.toolbarBG=this.owner.parent,this._owner=this.owner,this.menu=this.owner.parent.getChildByName("menu")}onMouseDown(e){e.stopPropagation(),this.isOpen?(Laya.Tween.to(this.toolbarBG,{width:106},1e3,Laya.Ease.strongOut),Laya.Tween.to(this._owner,{x:52,rotation:540},1e3,Laya.Ease.strongOut,Laya.Handler.create(this,()=>{this.isOpen=!1})),Laya.Tween.to(this.menu,{alpha:0},300,Laya.Ease.strongOut,Laya.Handler.create(this,()=>{this.menu.visible=!1}))):(Laya.Tween.to(this.toolbarBG,{width:460},1e3,Laya.Ease.strongOut),Laya.Tween.to(this._owner,{x:402,rotation:-360},1e3,Laya.Ease.strongOut,Laya.Handler.create(this,()=>{this.isOpen=!0})),Laya.Tween.to(this.menu,{alpha:1},200,Laya.Ease.strongOut,Laya.Handler.create(this,()=>{this.menu.visible=!0})))}onDisable(){}};np=d([P5("hPkwKQvKQTaeBeEpHxNUEA")],np);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=bundle.js.map
