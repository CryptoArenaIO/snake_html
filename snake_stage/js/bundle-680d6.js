"use strict";(()=>{var rw=Object.create;var Zp=Object.defineProperty;var w1=Object.getOwnPropertyDescriptor;var iw=Object.getOwnPropertyNames;var nw=Object.getPrototypeOf,sw=Object.prototype.hasOwnProperty;var J=(r,e)=>()=>(r&&(e=r(r=0)),e);var E1=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),jy=(r,e)=>{for(var t in e)Zp(r,t,{get:e[t],enumerable:!0})},ow=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of iw(e))!sw.call(r,s)&&s!==t&&Zp(r,s,{get:()=>e[s],enumerable:!(i=w1(e,s))||i.enumerable});return r};var L1=(r,e,t)=>(t=r!=null?rw(nw(r)):{},ow(e||!r||!r.__esModule?Zp(t,"default",{value:r,enumerable:!0}):t,r));var P=(r,e,t,i)=>{for(var s=i>1?void 0:i?w1(e,t):e,o=r.length-1,a;o>=0;o--)(a=r[o])&&(s=(i?a(e,t,s):a(s))||s);return i&&s&&Zp(e,t,s),s};var aw=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var ye=(r,e,t)=>(aw(r,e,"read from private field"),t?t.call(r):e.get(r)),_e=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)};var T1=E1((Xy,Jy)=>{"use strict";(function(r,e){typeof Xy=="object"&&typeof Jy<"u"?Jy.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self).jsSHA=e()})(Xy,function(){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function e(D,_,C,B){var N,L,Y,X=_||[0],ne=(C=C||0)>>>3,me=B===-1?3:0;for(N=0;N<D.length;N+=1)L=(Y=N+ne)>>>2,X.length<=L&&X.push(0),X[L]|=D[N]<<8*(me+B*(Y%4));return{value:X,binLen:8*D.length+C}}function t(D,_,C){switch(_){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(D){case"HEX":return function(B,N,L){return function(Y,X,ne,me){var Re,ue,ke,Qe;if(Y.length%2!=0)throw new Error("String of HEX type must be in byte increments");var se=X||[0],lt=(ne=ne||0)>>>3,rt=me===-1?3:0;for(Re=0;Re<Y.length;Re+=2){if(ue=parseInt(Y.substr(Re,2),16),isNaN(ue))throw new Error("String of HEX type contains invalid characters");for(ke=(Qe=(Re>>>1)+lt)>>>2;se.length<=ke;)se.push(0);se[ke]|=ue<<8*(rt+me*(Qe%4))}return{value:se,binLen:4*Y.length+ne}}(B,N,L,C)};case"TEXT":return function(B,N,L){return function(Y,X,ne,me,Re){var ue,ke,Qe,se,lt,rt,at,It,Xr=0,ur=ne||[0],Rr=(me=me||0)>>>3;if(X==="UTF8")for(at=Re===-1?3:0,Qe=0;Qe<Y.length;Qe+=1)for(ke=[],128>(ue=Y.charCodeAt(Qe))?ke.push(ue):2048>ue?(ke.push(192|ue>>>6),ke.push(128|63&ue)):55296>ue||57344<=ue?ke.push(224|ue>>>12,128|ue>>>6&63,128|63&ue):(Qe+=1,ue=65536+((1023&ue)<<10|1023&Y.charCodeAt(Qe)),ke.push(240|ue>>>18,128|ue>>>12&63,128|ue>>>6&63,128|63&ue)),se=0;se<ke.length;se+=1){for(lt=(rt=Xr+Rr)>>>2;ur.length<=lt;)ur.push(0);ur[lt]|=ke[se]<<8*(at+Re*(rt%4)),Xr+=1}else for(at=Re===-1?2:0,It=X==="UTF16LE"&&Re!==1||X!=="UTF16LE"&&Re===1,Qe=0;Qe<Y.length;Qe+=1){for(ue=Y.charCodeAt(Qe),It===!0&&(ue=(se=255&ue)<<8|ue>>>8),lt=(rt=Xr+Rr)>>>2;ur.length<=lt;)ur.push(0);ur[lt]|=ue<<8*(at+Re*(rt%4)),Xr+=2}return{value:ur,binLen:8*Xr+me}}(B,_,N,L,C)};case"B64":return function(B,N,L){return function(Y,X,ne,me){var Re,ue,ke,Qe,se,lt,rt=0,at=X||[0],It=(ne=ne||0)>>>3,Xr=me===-1?3:0,ur=Y.indexOf("=");if(Y.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(Y=Y.replace(/=/g,""),ur!==-1&&ur<Y.length)throw new Error("Invalid '=' found in base-64 string");for(Re=0;Re<Y.length;Re+=4){for(Qe=Y.substr(Re,4),ke=0,ue=0;ue<Qe.length;ue+=1)ke|=r.indexOf(Qe.charAt(ue))<<18-6*ue;for(ue=0;ue<Qe.length-1;ue+=1){for(se=(lt=rt+It)>>>2;at.length<=se;)at.push(0);at[se]|=(ke>>>16-8*ue&255)<<8*(Xr+me*(lt%4)),rt+=1}}return{value:at,binLen:8*rt+ne}}(B,N,L,C)};case"BYTES":return function(B,N,L){return function(Y,X,ne,me){var Re,ue,ke,Qe,se=X||[0],lt=(ne=ne||0)>>>3,rt=me===-1?3:0;for(ue=0;ue<Y.length;ue+=1)Re=Y.charCodeAt(ue),ke=(Qe=ue+lt)>>>2,se.length<=ke&&se.push(0),se[ke]|=Re<<8*(rt+me*(Qe%4));return{value:se,binLen:8*Y.length+ne}}(B,N,L,C)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(B,N,L){return function(Y,X,ne,me){return e(new Uint8Array(Y),X,ne,me)}(B,N,L,C)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(B,N,L){return e(B,N,L,C)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function i(D,_,C,B){switch(D){case"HEX":return function(N){return function(L,Y,X,ne){var me,Re,ue="",ke=Y/8,Qe=X===-1?3:0;for(me=0;me<ke;me+=1)Re=L[me>>>2]>>>8*(Qe+X*(me%4)),ue+="0123456789abcdef".charAt(Re>>>4&15)+"0123456789abcdef".charAt(15&Re);return ne.outputUpper?ue.toUpperCase():ue}(N,_,C,B)};case"B64":return function(N){return function(L,Y,X,ne){var me,Re,ue,ke,Qe,se="",lt=Y/8,rt=X===-1?3:0;for(me=0;me<lt;me+=3)for(ke=me+1<lt?L[me+1>>>2]:0,Qe=me+2<lt?L[me+2>>>2]:0,ue=(L[me>>>2]>>>8*(rt+X*(me%4))&255)<<16|(ke>>>8*(rt+X*((me+1)%4))&255)<<8|Qe>>>8*(rt+X*((me+2)%4))&255,Re=0;Re<4;Re+=1)se+=8*me+6*Re<=Y?r.charAt(ue>>>6*(3-Re)&63):ne.b64Pad;return se}(N,_,C,B)};case"BYTES":return function(N){return function(L,Y,X){var ne,me,Re="",ue=Y/8,ke=X===-1?3:0;for(ne=0;ne<ue;ne+=1)me=L[ne>>>2]>>>8*(ke+X*(ne%4))&255,Re+=String.fromCharCode(me);return Re}(N,_,C)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(N){return function(L,Y,X){var ne,me=Y/8,Re=new ArrayBuffer(me),ue=new Uint8Array(Re),ke=X===-1?3:0;for(ne=0;ne<me;ne+=1)ue[ne]=L[ne>>>2]>>>8*(ke+X*(ne%4))&255;return Re}(N,_,C)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(N){return function(L,Y,X){var ne,me=Y/8,Re=X===-1?3:0,ue=new Uint8Array(me);for(ne=0;ne<me;ne+=1)ue[ne]=L[ne>>>2]>>>8*(Re+X*(ne%4))&255;return ue}(N,_,C)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],u="Chosen SHA variant is not supported";function p(D,_){var C,B,N=D.binLen>>>3,L=_.binLen>>>3,Y=N<<3,X=4-N<<3;if(N%4!=0){for(C=0;C<L;C+=4)B=N+C>>>2,D.value[B]|=_.value[C>>>2]<<Y,D.value.push(0),D.value[B+1]|=_.value[C>>>2]>>>X;return(D.value.length<<2)-4>=L+N&&D.value.pop(),{value:D.value,binLen:D.binLen+_.binLen}}return{value:D.value.concat(_.value),binLen:D.binLen+_.binLen}}function m(D){var _={outputUpper:!1,b64Pad:"=",outputLen:-1},C=D||{},B="Output length must be a multiple of 8";if(_.outputUpper=C.outputUpper||!1,C.b64Pad&&(_.b64Pad=C.b64Pad),C.outputLen){if(C.outputLen%8!=0)throw new Error(B);_.outputLen=C.outputLen}else if(C.shakeLen){if(C.shakeLen%8!=0)throw new Error(B);_.outputLen=C.shakeLen}if(typeof _.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof _.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return _}function h(D,_,C,B){var N=D+" must include a value and format";if(!_){if(!B)throw new Error(N);return B}if(_.value===void 0||!_.format)throw new Error(N);return t(_.format,_.encoding||"UTF8",C)(_.value)}var f=function(){function D(_,C,B){var N=B||{};if(this.t=C,this.i=N.encoding||"UTF8",this.numRounds=N.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=_,this.u=[],this.s=0,this.h=!1,this.v=0,this.A=!1,this.l=[],this.H=[]}return D.prototype.update=function(_){var C,B=0,N=this.S>>>5,L=this.p(_,this.u,this.s),Y=L.binLen,X=L.value,ne=Y>>>5;for(C=0;C<ne;C+=N)B+this.S<=Y&&(this.m=this.R(X.slice(C,C+N),this.m),B+=this.S);this.v+=B,this.u=X.slice(B>>>5),this.s=Y%this.S,this.h=!0},D.prototype.getHash=function(_,C){var B,N,L=this.U,Y=m(C);if(this.T){if(Y.outputLen===-1)throw new Error("Output length must be specified in options");L=Y.outputLen}var X=i(_,L,this.C,Y);if(this.A&&this.F)return X(this.F(Y));for(N=this.K(this.u.slice(),this.s,this.v,this.B(this.m),L),B=1;B<this.numRounds;B+=1)this.T&&L%32!=0&&(N[N.length-1]&=16777215>>>24-L%32),N=this.K(N,L,0,this.L(this.o),L);return X(N)},D.prototype.setHMACKey=function(_,C,B){if(!this.g)throw new Error("Variant does not support HMAC");if(this.h)throw new Error("Cannot set MAC key after calling update");var N=t(C,(B||{}).encoding||"UTF8",this.C);this.k(N(_))},D.prototype.k=function(_){var C,B=this.S>>>3,N=B/4-1;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(B<_.binLen/8&&(_.value=this.K(_.value,_.binLen,0,this.L(this.o),this.U));_.value.length<=N;)_.value.push(0);for(C=0;C<=N;C+=1)this.l[C]=909522486^_.value[C],this.H[C]=1549556828^_.value[C];this.m=this.R(this.l,this.m),this.v=this.S,this.A=!0},D.prototype.getHMAC=function(_,C){var B=m(C);return i(_,this.U,this.C,B)(this.Y())},D.prototype.Y=function(){var _;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");var C=this.K(this.u.slice(),this.s,this.v,this.B(this.m),this.U);return _=this.R(this.H,this.L(this.o)),_=this.K(C,this.U,this.S,_,this.U)},D}(),g=function(D,_){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,B){C.__proto__=B}||function(C,B){for(var N in B)Object.prototype.hasOwnProperty.call(B,N)&&(C[N]=B[N])})(D,_)};function b(D,_){function C(){this.constructor=D}g(D,_),D.prototype=_===null?Object.create(_):(C.prototype=_.prototype,new C)}function y(D,_){return D<<_|D>>>32-_}function k(D,_){return D>>>_|D<<32-_}function I(D,_){return D>>>_}function A(D,_,C){return D^_^C}function M(D,_,C){return D&_^~D&C}function O(D,_,C){return D&_^D&C^_&C}function G(D){return k(D,2)^k(D,13)^k(D,22)}function $(D,_){var C=(65535&D)+(65535&_);return(65535&(D>>>16)+(_>>>16)+(C>>>16))<<16|65535&C}function q(D,_,C,B){var N=(65535&D)+(65535&_)+(65535&C)+(65535&B);return(65535&(D>>>16)+(_>>>16)+(C>>>16)+(B>>>16)+(N>>>16))<<16|65535&N}function H(D,_,C,B,N){var L=(65535&D)+(65535&_)+(65535&C)+(65535&B)+(65535&N);return(65535&(D>>>16)+(_>>>16)+(C>>>16)+(B>>>16)+(N>>>16)+(L>>>16))<<16|65535&L}function K(D){return k(D,7)^k(D,18)^I(D,3)}function W(D){return k(D,6)^k(D,11)^k(D,25)}function he(D){return[1732584193,4023233417,2562383102,271733878,3285377520]}function xe(D,_){var C,B,N,L,Y,X,ne,me=[];for(C=_[0],B=_[1],N=_[2],L=_[3],Y=_[4],ne=0;ne<80;ne+=1)me[ne]=ne<16?D[ne]:y(me[ne-3]^me[ne-8]^me[ne-14]^me[ne-16],1),X=ne<20?H(y(C,5),M(B,N,L),Y,1518500249,me[ne]):ne<40?H(y(C,5),A(B,N,L),Y,1859775393,me[ne]):ne<60?H(y(C,5),O(B,N,L),Y,2400959708,me[ne]):H(y(C,5),A(B,N,L),Y,3395469782,me[ne]),Y=L,L=N,N=y(B,30),B=C,C=X;return _[0]=$(C,_[0]),_[1]=$(B,_[1]),_[2]=$(N,_[2]),_[3]=$(L,_[3]),_[4]=$(Y,_[4]),_}function Ae(D,_,C,B){for(var N,L=15+(_+65>>>9<<4),Y=_+C;D.length<=L;)D.push(0);for(D[_>>>5]|=128<<24-_%32,D[L]=4294967295&Y,D[L-1]=Y/4294967296|0,N=0;N<D.length;N+=16)B=xe(D.slice(N,N+16),B);return B}var ot=function(D){function _(C,B,N){var L=this;if(C!=="SHA-1")throw new Error(u);var Y=N||{};return(L=D.call(this,C,B,N)||this).g=!0,L.F=L.Y,L.C=-1,L.p=t(L.t,L.i,L.C),L.R=xe,L.B=function(X){return X.slice()},L.L=he,L.K=Ae,L.m=[1732584193,4023233417,2562383102,271733878,3285377520],L.S=512,L.U=160,L.T=!1,Y.hmacKey&&L.k(h("hmacKey",Y.hmacKey,L.C)),L}return b(_,D),_}(f);function le(D){return D=="SHA-224"?o.slice():a.slice()}function we(D,_){var C,B,N,L,Y,X,ne,me,Re,ue,ke,Qe,se=[];for(C=_[0],B=_[1],N=_[2],L=_[3],Y=_[4],X=_[5],ne=_[6],me=_[7],ke=0;ke<64;ke+=1)se[ke]=ke<16?D[ke]:q(k(Qe=se[ke-2],17)^k(Qe,19)^I(Qe,10),se[ke-7],K(se[ke-15]),se[ke-16]),Re=H(me,W(Y),M(Y,X,ne),s[ke],se[ke]),ue=$(G(C),O(C,B,N)),me=ne,ne=X,X=Y,Y=$(L,Re),L=N,N=B,B=C,C=$(Re,ue);return _[0]=$(C,_[0]),_[1]=$(B,_[1]),_[2]=$(N,_[2]),_[3]=$(L,_[3]),_[4]=$(Y,_[4]),_[5]=$(X,_[5]),_[6]=$(ne,_[6]),_[7]=$(me,_[7]),_}var Ie=function(D){function _(C,B,N){var L=this;if(C!=="SHA-224"&&C!=="SHA-256")throw new Error(u);var Y=N||{};return(L=D.call(this,C,B,N)||this).F=L.Y,L.g=!0,L.C=-1,L.p=t(L.t,L.i,L.C),L.R=we,L.B=function(X){return X.slice()},L.L=le,L.K=function(X,ne,me,Re){return function(ue,ke,Qe,se,lt){for(var rt,at=15+(ke+65>>>9<<4),It=ke+Qe;ue.length<=at;)ue.push(0);for(ue[ke>>>5]|=128<<24-ke%32,ue[at]=4294967295&It,ue[at-1]=It/4294967296|0,rt=0;rt<ue.length;rt+=16)se=we(ue.slice(rt,rt+16),se);return lt==="SHA-224"?[se[0],se[1],se[2],se[3],se[4],se[5],se[6]]:se}(X,ne,me,Re,C)},L.m=le(C),L.S=512,L.U=C==="SHA-224"?224:256,L.T=!1,Y.hmacKey&&L.k(h("hmacKey",Y.hmacKey,L.C)),L}return b(_,D),_}(f),R=function(D,_){this.N=D,this.I=_};function Ke(D,_){var C;return _>32?(C=64-_,new R(D.I<<_|D.N>>>C,D.N<<_|D.I>>>C)):_!==0?(C=32-_,new R(D.N<<_|D.I>>>C,D.I<<_|D.N>>>C)):D}function de(D,_){var C;return _<32?(C=32-_,new R(D.N>>>_|D.I<<C,D.I>>>_|D.N<<C)):(C=64-_,new R(D.I>>>_|D.N<<C,D.N>>>_|D.I<<C))}function et(D,_){return new R(D.N>>>_,D.I>>>_|D.N<<32-_)}function kt(D,_,C){return new R(D.N&_.N^~D.N&C.N,D.I&_.I^~D.I&C.I)}function $t(D,_,C){return new R(D.N&_.N^D.N&C.N^_.N&C.N,D.I&_.I^D.I&C.I^_.I&C.I)}function rr(D){var _=de(D,28),C=de(D,34),B=de(D,39);return new R(_.N^C.N^B.N,_.I^C.I^B.I)}function dt(D,_){var C,B;C=(65535&D.I)+(65535&_.I);var N=(65535&(B=(D.I>>>16)+(_.I>>>16)+(C>>>16)))<<16|65535&C;return C=(65535&D.N)+(65535&_.N)+(B>>>16),B=(D.N>>>16)+(_.N>>>16)+(C>>>16),new R((65535&B)<<16|65535&C,N)}function Mr(D,_,C,B){var N,L;N=(65535&D.I)+(65535&_.I)+(65535&C.I)+(65535&B.I);var Y=(65535&(L=(D.I>>>16)+(_.I>>>16)+(C.I>>>16)+(B.I>>>16)+(N>>>16)))<<16|65535&N;return N=(65535&D.N)+(65535&_.N)+(65535&C.N)+(65535&B.N)+(L>>>16),L=(D.N>>>16)+(_.N>>>16)+(C.N>>>16)+(B.N>>>16)+(N>>>16),new R((65535&L)<<16|65535&N,Y)}function wr(D,_,C,B,N){var L,Y;L=(65535&D.I)+(65535&_.I)+(65535&C.I)+(65535&B.I)+(65535&N.I);var X=(65535&(Y=(D.I>>>16)+(_.I>>>16)+(C.I>>>16)+(B.I>>>16)+(N.I>>>16)+(L>>>16)))<<16|65535&L;return L=(65535&D.N)+(65535&_.N)+(65535&C.N)+(65535&B.N)+(65535&N.N)+(Y>>>16),Y=(D.N>>>16)+(_.N>>>16)+(C.N>>>16)+(B.N>>>16)+(N.N>>>16)+(L>>>16),new R((65535&Y)<<16|65535&L,X)}function Yr(D,_){return new R(D.N^_.N,D.I^_.I)}function Qr(D){var _=de(D,1),C=de(D,8),B=et(D,7);return new R(_.N^C.N^B.N,_.I^C.I^B.I)}function pi(D){var _=de(D,14),C=de(D,18),B=de(D,41);return new R(_.N^C.N^B.N,_.I^C.I^B.I)}var An=[new R(s[0],3609767458),new R(s[1],602891725),new R(s[2],3964484399),new R(s[3],2173295548),new R(s[4],4081628472),new R(s[5],3053834265),new R(s[6],2937671579),new R(s[7],3664609560),new R(s[8],2734883394),new R(s[9],1164996542),new R(s[10],1323610764),new R(s[11],3590304994),new R(s[12],4068182383),new R(s[13],991336113),new R(s[14],633803317),new R(s[15],3479774868),new R(s[16],2666613458),new R(s[17],944711139),new R(s[18],2341262773),new R(s[19],2007800933),new R(s[20],1495990901),new R(s[21],1856431235),new R(s[22],3175218132),new R(s[23],2198950837),new R(s[24],3999719339),new R(s[25],766784016),new R(s[26],2566594879),new R(s[27],3203337956),new R(s[28],1034457026),new R(s[29],2466948901),new R(s[30],3758326383),new R(s[31],168717936),new R(s[32],1188179964),new R(s[33],1546045734),new R(s[34],1522805485),new R(s[35],2643833823),new R(s[36],2343527390),new R(s[37],1014477480),new R(s[38],1206759142),new R(s[39],344077627),new R(s[40],1290863460),new R(s[41],3158454273),new R(s[42],3505952657),new R(s[43],106217008),new R(s[44],3606008344),new R(s[45],1432725776),new R(s[46],1467031594),new R(s[47],851169720),new R(s[48],3100823752),new R(s[49],1363258195),new R(s[50],3750685593),new R(s[51],3785050280),new R(s[52],3318307427),new R(s[53],3812723403),new R(s[54],2003034995),new R(s[55],3602036899),new R(s[56],1575990012),new R(s[57],1125592928),new R(s[58],2716904306),new R(s[59],442776044),new R(s[60],593698344),new R(s[61],3733110249),new R(s[62],2999351573),new R(s[63],3815920427),new R(3391569614,3928383900),new R(3515267271,566280711),new R(3940187606,3454069534),new R(4118630271,4000239992),new R(116418474,1914138554),new R(174292421,2731055270),new R(289380356,3203993006),new R(460393269,320620315),new R(685471733,587496836),new R(852142971,1086792851),new R(1017036298,365543100),new R(1126000580,2618297676),new R(1288033470,3409855158),new R(1501505948,4234509866),new R(1607167915,987167468),new R(1816402316,1246189591)];function mi(D){return D==="SHA-384"?[new R(3418070365,o[0]),new R(1654270250,o[1]),new R(2438529370,o[2]),new R(355462360,o[3]),new R(1731405415,o[4]),new R(41048885895,o[5]),new R(3675008525,o[6]),new R(1203062813,o[7])]:[new R(a[0],4089235720),new R(a[1],2227873595),new R(a[2],4271175723),new R(a[3],1595750129),new R(a[4],2917565137),new R(a[5],725511199),new R(a[6],4215389547),new R(a[7],327033209)]}function Hr(D,_){var C,B,N,L,Y,X,ne,me,Re,ue,ke,Qe,se,lt,rt,at,It=[];for(C=_[0],B=_[1],N=_[2],L=_[3],Y=_[4],X=_[5],ne=_[6],me=_[7],ke=0;ke<80;ke+=1)ke<16?(Qe=2*ke,It[ke]=new R(D[Qe],D[Qe+1])):It[ke]=Mr((se=It[ke-2],lt=void 0,rt=void 0,at=void 0,lt=de(se,19),rt=de(se,61),at=et(se,6),new R(lt.N^rt.N^at.N,lt.I^rt.I^at.I)),It[ke-7],Qr(It[ke-15]),It[ke-16]),Re=wr(me,pi(Y),kt(Y,X,ne),An[ke],It[ke]),ue=dt(rr(C),$t(C,B,N)),me=ne,ne=X,X=Y,Y=dt(L,Re),L=N,N=B,B=C,C=dt(Re,ue);return _[0]=dt(C,_[0]),_[1]=dt(B,_[1]),_[2]=dt(N,_[2]),_[3]=dt(L,_[3]),_[4]=dt(Y,_[4]),_[5]=dt(X,_[5]),_[6]=dt(ne,_[6]),_[7]=dt(me,_[7]),_}var Bi=function(D){function _(C,B,N){var L=this;if(C!=="SHA-384"&&C!=="SHA-512")throw new Error(u);var Y=N||{};return(L=D.call(this,C,B,N)||this).F=L.Y,L.g=!0,L.C=-1,L.p=t(L.t,L.i,L.C),L.R=Hr,L.B=function(X){return X.slice()},L.L=mi,L.K=function(X,ne,me,Re){return function(ue,ke,Qe,se,lt){for(var rt,at=31+(ke+129>>>10<<5),It=ke+Qe;ue.length<=at;)ue.push(0);for(ue[ke>>>5]|=128<<24-ke%32,ue[at]=4294967295&It,ue[at-1]=It/4294967296|0,rt=0;rt<ue.length;rt+=32)se=Hr(ue.slice(rt,rt+32),se);return lt==="SHA-384"?[(se=se)[0].N,se[0].I,se[1].N,se[1].I,se[2].N,se[2].I,se[3].N,se[3].I,se[4].N,se[4].I,se[5].N,se[5].I]:[se[0].N,se[0].I,se[1].N,se[1].I,se[2].N,se[2].I,se[3].N,se[3].I,se[4].N,se[4].I,se[5].N,se[5].I,se[6].N,se[6].I,se[7].N,se[7].I]}(X,ne,me,Re,C)},L.m=mi(C),L.S=1024,L.U=C==="SHA-384"?384:512,L.T=!1,Y.hmacKey&&L.k(h("hmacKey",Y.hmacKey,L.C)),L}return b(_,D),_}(f),di=[new R(0,1),new R(0,32898),new R(2147483648,32906),new R(2147483648,2147516416),new R(0,32907),new R(0,2147483649),new R(2147483648,2147516545),new R(2147483648,32777),new R(0,138),new R(0,136),new R(0,2147516425),new R(0,2147483658),new R(0,2147516555),new R(2147483648,139),new R(2147483648,32905),new R(2147483648,32771),new R(2147483648,32770),new R(2147483648,128),new R(0,32778),new R(2147483648,2147483658),new R(2147483648,2147516545),new R(2147483648,32896),new R(0,2147483649),new R(2147483648,2147516424)],vs=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function yo(D){var _,C=[];for(_=0;_<5;_+=1)C[_]=[new R(0,0),new R(0,0),new R(0,0),new R(0,0),new R(0,0)];return C}function Mu(D){var _,C=[];for(_=0;_<5;_+=1)C[_]=D[_].slice();return C}function Is(D,_){var C,B,N,L,Y,X,ne,me,Re,ue=[],ke=[];if(D!==null)for(B=0;B<D.length;B+=2)_[(B>>>1)%5][(B>>>1)/5|0]=Yr(_[(B>>>1)%5][(B>>>1)/5|0],new R(D[B+1],D[B]));for(C=0;C<24;C+=1){for(L=yo(),B=0;B<5;B+=1)ue[B]=(Y=_[B][0],X=_[B][1],ne=_[B][2],me=_[B][3],Re=_[B][4],new R(Y.N^X.N^ne.N^me.N^Re.N,Y.I^X.I^ne.I^me.I^Re.I));for(B=0;B<5;B+=1)ke[B]=Yr(ue[(B+4)%5],Ke(ue[(B+1)%5],1));for(B=0;B<5;B+=1)for(N=0;N<5;N+=1)_[B][N]=Yr(_[B][N],ke[B]);for(B=0;B<5;B+=1)for(N=0;N<5;N+=1)L[N][(2*B+3*N)%5]=Ke(_[B][N],vs[B][N]);for(B=0;B<5;B+=1)for(N=0;N<5;N+=1)_[B][N]=Yr(L[B][N],new R(~L[(B+1)%5][N].N&L[(B+2)%5][N].N,~L[(B+1)%5][N].I&L[(B+2)%5][N].I));_[0][0]=Yr(_[0][0],di[C])}return _}function Xa(D){var _,C,B=0,N=[0,0],L=[4294967295&D,D/4294967296&2097151];for(_=6;_>=0;_--)(C=L[_>>2]>>>8*_&255)===0&&B===0||(N[B+1>>2]|=C<<8*(B+1),B+=1);return B=B!==0?B:1,N[0]|=B,{value:B+1>4?N:[N[0]],binLen:8+8*B}}function _o(D){return p(Xa(D.binLen),D)}function Ja(D,_){var C,B=Xa(_),N=_>>>2,L=(N-(B=p(B,D)).value.length%N)%N;for(C=0;C<L;C++)B.value.push(0);return B.value}var Ru=function(D){function _(C,B,N){var L=this,Y=6,X=0,ne=N||{};if((L=D.call(this,C,B,N)||this).numRounds!==1){if(ne.kmacKey||ne.hmacKey)throw new Error("Cannot set numRounds with MAC");if(L.o==="CSHAKE128"||L.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(L.C=1,L.p=t(L.t,L.i,L.C),L.R=Is,L.B=Mu,L.L=yo,L.m=yo(),L.T=!1,C){case"SHA3-224":L.S=X=1152,L.U=224,L.g=!0,L.F=L.Y;break;case"SHA3-256":L.S=X=1088,L.U=256,L.g=!0,L.F=L.Y;break;case"SHA3-384":L.S=X=832,L.U=384,L.g=!0,L.F=L.Y;break;case"SHA3-512":L.S=X=576,L.U=512,L.g=!0,L.F=L.Y;break;case"SHAKE128":Y=31,L.S=X=1344,L.U=-1,L.T=!0,L.g=!1,L.F=null;break;case"SHAKE256":Y=31,L.S=X=1088,L.U=-1,L.T=!0,L.g=!1,L.F=null;break;case"KMAC128":Y=4,L.S=X=1344,L.M(N),L.U=-1,L.T=!0,L.g=!1,L.F=L.X;break;case"KMAC256":Y=4,L.S=X=1088,L.M(N),L.U=-1,L.T=!0,L.g=!1,L.F=L.X;break;case"CSHAKE128":L.S=X=1344,Y=L.O(N),L.U=-1,L.T=!0,L.g=!1,L.F=null;break;case"CSHAKE256":L.S=X=1088,Y=L.O(N),L.U=-1,L.T=!0,L.g=!1,L.F=null;break;default:throw new Error(u)}return L.K=function(me,Re,ue,ke,Qe){return function(se,lt,rt,at,It,Xr,ur){var Rr,xo,an=0,Di=[],Oi=It>>>5,vo=lt>>>5;for(Rr=0;Rr<vo&&lt>=It;Rr+=Oi)at=Is(se.slice(Rr,Rr+Oi),at),lt-=It;for(se=se.slice(Rr),lt%=It;se.length<Oi;)se.push(0);for(se[(Rr=lt>>>3)>>2]^=Xr<<Rr%4*8,se[Oi-1]^=2147483648,at=Is(se,at);32*Di.length<ur&&(xo=at[an%5][an/5|0],Di.push(xo.I),!(32*Di.length>=ur));)Di.push(xo.N),64*(an+=1)%It==0&&(Is(null,at),an=0);return Di}(me,Re,0,ke,X,Y,Qe)},ne.hmacKey&&L.k(h("hmacKey",ne.hmacKey,L.C)),L}return b(_,D),_.prototype.O=function(C,B){var N=function(ne){var me=ne||{};return{funcName:h("funcName",me.funcName,1,{value:[],binLen:0}),customization:h("Customization",me.customization,1,{value:[],binLen:0})}}(C||{});B&&(N.funcName=B);var L=p(_o(N.funcName),_o(N.customization));if(N.customization.binLen!==0||N.funcName.binLen!==0){for(var Y=Ja(L,this.S>>>3),X=0;X<Y.length;X+=this.S>>>5)this.m=this.R(Y.slice(X,X+(this.S>>>5)),this.m),this.v+=this.S;return 4}return 31},_.prototype.M=function(C){var B=function(Y){var X=Y||{};return{kmacKey:h("kmacKey",X.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:h("Customization",X.customization,1,{value:[],binLen:0})}}(C||{});this.O(C,B.funcName);for(var N=Ja(_o(B.kmacKey),this.S>>>3),L=0;L<N.length;L+=this.S>>>5)this.m=this.R(N.slice(L,L+(this.S>>>5)),this.m),this.v+=this.S;this.A=!0},_.prototype.X=function(C){var B=p({value:this.u.slice(),binLen:this.s},function(N){var L,Y,X=0,ne=[0,0],me=[4294967295&N,N/4294967296&2097151];for(L=6;L>=0;L--)(Y=me[L>>2]>>>8*L&255)==0&&X===0||(ne[X>>2]|=Y<<8*X,X+=1);return ne[(X=X!==0?X:1)>>2]|=X<<8*X,{value:X+1>4?ne:[ne[0]],binLen:8+8*X}}(C.outputLen));return this.K(B.value,B.binLen,this.v,this.B(this.m),C.outputLen)},_}(f);return function(){function D(_,C,B){if(_=="SHA-1")this.j=new ot(_,C,B);else if(_=="SHA-224"||_=="SHA-256")this.j=new Ie(_,C,B);else if(_=="SHA-384"||_=="SHA-512")this.j=new Bi(_,C,B);else{if(_!="SHA3-224"&&_!="SHA3-256"&&_!="SHA3-384"&&_!="SHA3-512"&&_!="SHAKE128"&&_!="SHAKE256"&&_!="CSHAKE128"&&_!="CSHAKE256"&&_!="KMAC128"&&_!="KMAC256")throw new Error(u);this.j=new Ru(_,C,B)}}return D.prototype.update=function(_){this.j.update(_)},D.prototype.getHash=function(_,C){return this.j.getHash(_,C)},D.prototype.setHMACKey=function(_,C,B){this.j.setHMACKey(_,C,B)},D.prototype.getHMAC=function(_,C){return this.j.getHMAC(_,C)},D}()})});var A1,C1=J(()=>{"use strict";A1="1.0.8"});var Vt,So=J(()=>{"use strict";C1();Vt=class r extends Error{constructor(e,t={}){let i=t.cause instanceof r?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof r&&t.cause.docsPath||t.docsPath,o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...i?[`Details: ${i}`]:[],`Version: abitype@${A1}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=i,this.docsPath=s,this.metaMessages=t.metaMessages,this.shortMessage=e}}});function zr(r,e){return r.exec(e)?.groups}var Zy,e0,gm,xc=J(()=>{"use strict";Zy=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,e0=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,gm=/^\(.+?\).*?$/});function bm(r){let e=r.type;if(M1.test(r.type)&&"components"in r){e="(";let t=r.components.length;for(let s=0;s<t;s++){let o=r.components[s];e+=bm(o),s<t-1&&(e+=", ")}let i=zr(M1,r.type);return e+=`)${i?.array??""}`,bm({...r,type:e})}return"indexed"in r&&r.indexed&&(e=`${e} indexed`),r.name?`${e} ${r.name}`:e}var M1,R1=J(()=>{"use strict";xc();M1=/^tuple(?<array>(\[(\d*)\])*)$/});function ko(r){let e="",t=r.length;for(let i=0;i<t;i++){let s=r[i];e+=bm(s),i!==t-1&&(e+=", ")}return e}var B1=J(()=>{"use strict";R1()});function Es(r){return r.type==="function"?`function ${r.name}(${ko(r.inputs)})${r.stateMutability&&r.stateMutability!=="nonpayable"?` ${r.stateMutability}`:""}${r.outputs?.length?` returns (${ko(r.outputs)})`:""}`:r.type==="event"?`event ${r.name}(${ko(r.inputs)})`:r.type==="error"?`error ${r.name}(${ko(r.inputs)})`:r.type==="constructor"?`constructor(${ko(r.inputs)})${r.stateMutability==="payable"?" payable":""}`:r.type==="fallback"?`fallback() external${r.stateMutability==="payable"?" payable":""}`:"receive() external payable"}var D1=J(()=>{"use strict";B1()});function N1(r){return O1.test(r)}function P1(r){return zr(O1,r)}function U1(r){return F1.test(r)}function H1(r){return zr(F1,r)}function j1(r){return z1.test(r)}function G1(r){return zr(z1,r)}function wo(r){return V1.test(r)}function W1(r){return zr(V1,r)}function $1(r){return K1.test(r)}function q1(r){return zr(K1,r)}function Q1(r){return Y1.test(r)}function X1(r){return zr(Y1,r)}function J1(r){return lw.test(r)}var O1,F1,z1,V1,K1,Y1,lw,Z1,ym,vc=J(()=>{"use strict";xc();O1=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;F1=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;z1=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;V1=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;K1=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;Y1=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;lw=/^receive\(\) external payable$/;Z1=new Set(["indexed"]),ym=new Set(["calldata","memory","storage"])});var _m,xm,vm,Im=J(()=>{"use strict";So();_m=class extends Vt{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}},xm=class extends Vt{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},vm=class extends Vt{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}});var Sm,km,wm,Em,Lm,t0=J(()=>{"use strict";So();Sm=class extends Vt{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},km=class extends Vt{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},wm=class extends Vt{constructor({param:e,type:t,modifier:i}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${i}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},Em=class extends Vt{constructor({param:e,type:t,modifier:i}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${i}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${i}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},Lm=class extends Vt{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}});var Pi,Tm,Am,r0=J(()=>{"use strict";So();Pi=class extends Vt{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},Tm=class extends Vt{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},Am=class extends Vt{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}});var Cm,ex=J(()=>{"use strict";So();Cm=class extends Vt{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}});var Mm,tx=J(()=>{"use strict";So();Mm=class extends Vt{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}});function rx(r,e,t){let i="";if(t)for(let s of Object.entries(t)){if(!s)continue;let o="";for(let a of s[1])o+=`[${a.type}${a.name?`:${a.name}`:""}]`;i+=`(${s[0]}{${o}})`}return e?`${e}:${r}${i}`:r}var Rm,ix=J(()=>{"use strict";Rm=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]])});function Ic(r,e={}){if(j1(r))return cw(r,e);if(U1(r))return uw(r,e);if(N1(r))return pw(r,e);if($1(r))return mw(r,e);if(Q1(r))return dw(r);if(J1(r))return{type:"receive",stateMutability:"payable"};throw new Tm({signature:r})}function cw(r,e={}){let t=G1(r);if(!t)throw new Pi({signature:r,type:"function"});let i=hi(t.parameters),s=[],o=i.length;for(let u=0;u<o;u++)s.push(Mn(i[u],{modifiers:ym,structs:e,type:"function"}));let a=[];if(t.returns){let u=hi(t.returns),p=u.length;for(let m=0;m<p;m++)a.push(Mn(u[m],{modifiers:ym,structs:e,type:"function"}))}return{name:t.name,type:"function",stateMutability:t.stateMutability??"nonpayable",inputs:s,outputs:a}}function uw(r,e={}){let t=H1(r);if(!t)throw new Pi({signature:r,type:"event"});let i=hi(t.parameters),s=[],o=i.length;for(let a=0;a<o;a++)s.push(Mn(i[a],{modifiers:Z1,structs:e,type:"event"}));return{name:t.name,type:"event",inputs:s}}function pw(r,e={}){let t=P1(r);if(!t)throw new Pi({signature:r,type:"error"});let i=hi(t.parameters),s=[],o=i.length;for(let a=0;a<o;a++)s.push(Mn(i[a],{structs:e,type:"error"}));return{name:t.name,type:"error",inputs:s}}function mw(r,e={}){let t=q1(r);if(!t)throw new Pi({signature:r,type:"constructor"});let i=hi(t.parameters),s=[],o=i.length;for(let a=0;a<o;a++)s.push(Mn(i[a],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:t.stateMutability??"nonpayable",inputs:s}}function dw(r){let e=X1(r);if(!e)throw new Pi({signature:r,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}function Mn(r,e){let t=rx(r,e?.type,e?.structs);if(Rm.has(t))return Rm.get(t);let i=gm.test(r),s=zr(i?fw:hw,r);if(!s)throw new Sm({param:r});if(s.name&&yw(s.name))throw new km({param:r,name:s.name});let o=s.name?{name:s.name}:{},a=s.modifier==="indexed"?{indexed:!0}:{},u=e?.structs??{},p,m={};if(i){p="tuple";let f=hi(s.type),g=[],b=f.length;for(let y=0;y<b;y++)g.push(Mn(f[y],{structs:u}));m={components:g}}else if(s.type in u)p="tuple",m={components:u[s.type]};else if(gw.test(s.type))p=`${s.type}256`;else if(p=s.type,e?.type!=="struct"&&!i0(p))throw new vm({type:p});if(s.modifier){if(!e?.modifiers?.has?.(s.modifier))throw new wm({param:r,type:e?.type,modifier:s.modifier});if(ym.has(s.modifier)&&!_w(p,!!s.array))throw new Em({param:r,type:e?.type,modifier:s.modifier})}let h={type:`${p}${s.array??""}`,...o,...a,...m};return Rm.set(t,h),h}function hi(r,e=[],t="",i=0){let s=r.trim().length;for(let o=0;o<s;o++){let a=r[o],u=r.slice(o+1);switch(a){case",":return i===0?hi(u,[...e,t.trim()]):hi(u,e,`${t}${a}`,i);case"(":return hi(u,e,`${t}${a}`,i+1);case")":return hi(u,e,`${t}${a}`,i-1);default:return hi(u,e,`${t}${a}`,i)}}if(t==="")return e;if(i!==0)throw new Mm({current:t,depth:i});return e.push(t.trim()),e}function i0(r){return r==="address"||r==="bool"||r==="function"||r==="string"||Zy.test(r)||e0.test(r)}function yw(r){return r==="address"||r==="bool"||r==="function"||r==="string"||r==="tuple"||Zy.test(r)||e0.test(r)||bw.test(r)}function _w(r,e){return e||r==="bytes"||r==="string"||r==="tuple"}var hw,fw,gw,bw,Bm=J(()=>{"use strict";xc();Im();t0();r0();tx();ix();vc();hw=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,fw=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,gw=/^u?int$/;bw=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/});function Dm(r){let e={},t=r.length;for(let a=0;a<t;a++){let u=r[a];if(!wo(u))continue;let p=W1(u);if(!p)throw new Pi({signature:u,type:"struct"});let m=p.properties.split(";"),h=[],f=m.length;for(let g=0;g<f;g++){let y=m[g].trim();if(!y)continue;let k=Mn(y,{type:"struct"});h.push(k)}if(!h.length)throw new Am({signature:u});e[p.name]=h}let i={},s=Object.entries(e),o=s.length;for(let a=0;a<o;a++){let[u,p]=s[a];i[u]=nx(p,e)}return i}function nx(r,e,t=new Set){let i=[],s=r.length;for(let o=0;o<s;o++){let a=r[o];if(gm.test(a.type))i.push(a);else{let p=zr(xw,a.type);if(!p?.type)throw new Lm({abiParameter:a});let{array:m,type:h}=p;if(h in e){if(t.has(h))throw new Cm({type:h});i.push({...a,type:`tuple${m??""}`,components:nx(e[h]??[],e,new Set([...t,h]))})}else if(i0(h))i.push(a);else throw new xm({type:h})}}return i}var xw,n0=J(()=>{"use strict";xc();Im();t0();r0();ex();vc();Bm();xw=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/});function Om(r){let e=Dm(r),t=[],i=r.length;for(let s=0;s<i;s++){let o=r[s];wo(o)||t.push(Ic(o,e))}return t}var sx=J(()=>{"use strict";vc();n0();Bm()});function Nm(r){let e;if(typeof r=="string")e=Ic(r);else{let t=Dm(r),i=r.length;for(let s=0;s<i;s++){let o=r[s];if(!wo(o)){e=Ic(o,t);break}}}if(!e)throw new _m({signature:r});return e}var ox=J(()=>{"use strict";Im();vc();n0();Bm()});var Pm=J(()=>{"use strict";D1();sx();ox()});function Er(r,{includeName:e=!1}={}){if(r.type!=="function"&&r.type!=="event"&&r.type!=="error")throw new Fm(r.type);return`${r.name}(${Sc(r.inputs,{includeName:e})})`}function Sc(r,{includeName:e=!1}={}){return r?r.map(t=>Iw(t,{includeName:e})).join(e?", ":","):""}function Iw(r,{includeName:e}){return r.type.startsWith("tuple")?`(${Sc(r.components,{includeName:e})})${r.type.slice(5)}`:r.type+(e&&r.name?` ${r.name}`:"")}var Ls=J(()=>{"use strict";Yt()});function zt(r,{strict:e=!0}={}){return!r||typeof r!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(r):r.startsWith("0x")}var fi=J(()=>{"use strict"});function mt(r){return zt(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}var gi=J(()=>{"use strict";fi()});var s0,ax=J(()=>{"use strict";s0="2.26.2"});function lx(r,e){return e?.(r)?r:r&&typeof r=="object"&&"cause"in r&&r.cause!==void 0?lx(r.cause,e):e?null:r}var o0,F,Ze=J(()=>{"use strict";ax();o0={getDocsUrl:({docsBaseUrl:r,docsPath:e="",docsSlug:t})=>e?`${r??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${s0}`},F=class r extends Error{constructor(e,t={}){let i=(()=>t.cause instanceof r?t.cause.details:t.cause?.message?t.cause.message:t.details)(),s=(()=>t.cause instanceof r&&t.cause.docsPath||t.docsPath)(),o=o0.getDocsUrl?.({...t,docsPath:s}),a=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...i?[`Details: ${i}`]:[],...o0.version?[`Version: ${o0.version}`]:[]].join(`
`);super(a,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=s0}walk(e){return lx(this,e)}}});var Um,kc,Eo,Jr,Hm,zm,jm,Lo,Gm,To,wc,Rn,Vm,Wm,Km,bi,Fi,$m,qm,Ym,Fm,Yt=J(()=>{"use strict";Ls();gi();Ze();Um=class extends F{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}},kc=class extends F{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}},Eo=class extends F{constructor({data:e,params:t,size:i}){super([`Data size of ${i} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Sc(t,{includeName:!0})})`,`Data:   ${e} (${i} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=i}},Jr=class extends F{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}},Hm=class extends F{constructor({expectedLength:e,givenLength:t,type:i}){super([`ABI encoding array length mismatch for type ${i}.`,`Expected length: ${e}`,`Given length: ${t}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}},zm=class extends F{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${mt(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}},jm=class extends F{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}},Lo=class extends F{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}},Gm=class extends F{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}},To=class extends F{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiEventSignatureNotFoundError"})}},wc=class extends F{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:t,name:"AbiEventNotFoundError"})}},Rn=class extends F{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionNotFoundError"})}},Vm=class extends F{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}},Wm=class extends F{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Er(e.abiItem)}\`, and`,`\`${t.type}\` in \`${Er(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}},Km=class extends F{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}},bi=class extends F{constructor({abiItem:e,data:t,params:i,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Sc(i,{includeName:!0})})`,`Data:   ${t} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=i,this.size=s}},Fi=class extends F{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${Er(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}},$m=class extends F{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiEncodingType"})}},qm=class extends F{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiDecodingType"})}},Ym=class extends F{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}},Fm=class extends F{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}});var Ec,Lc,Tc,Xm=J(()=>{"use strict";Ze();Ec=class extends F{constructor({offset:e,position:t,size:i}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${i}).`,{name:"SliceOffsetOutOfBoundsError"})}},Lc=class extends F{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}},Tc=class extends F{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} is expected to be ${t} ${i} long, but is ${e} ${i} long.`,{name:"InvalidBytesLengthError"})}}});function Bn(r,{dir:e,size:t=32}={}){return typeof r=="string"?cn(r,{dir:e,size:t}):Sw(r,{dir:e,size:t})}function cn(r,{dir:e,size:t=32}={}){if(t===null)return r;let i=r.replace("0x","");if(i.length>t*2)throw new Lc({size:Math.ceil(i.length/2),targetSize:t,type:"hex"});return`0x${i[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function Sw(r,{dir:e,size:t=32}={}){if(t===null)return r;if(r.length>t)throw new Lc({size:r.length,targetSize:t,type:"bytes"});let i=new Uint8Array(t);for(let s=0;s<t;s++){let o=e==="right";i[o?s:t-s-1]=r[o?s:r.length-s-1]}return i}var Jm=J(()=>{"use strict";Xm()});var Ao,Zm,ed,td,Ac=J(()=>{"use strict";Ze();Ao=class extends F{constructor({max:e,min:t,signed:i,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},Zm=class extends F{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}},ed=class extends F{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}},td=class extends F{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}});function mr(r,{dir:e="left"}={}){let t=typeof r=="string"?r.replace("0x",""):r,i=0;for(let s=0;s<t.length-1&&t[e==="left"?s:t.length-s-1].toString()==="0";s++)i++;return t=e==="left"?t.slice(i):t.slice(0,t.length-i),typeof r=="string"?(t.length===1&&e==="right"&&(t=`${t}0`),`0x${t.length%2===1?`0${t}`:t}`):t}var Co=J(()=>{"use strict"});function Dr(r,{size:e}){if(mt(r)>e)throw new td({givenSize:mt(r),maxSize:e})}function Ct(r,e={}){let{signed:t}=e;e.size&&Dr(r,{size:e.size});let i=BigInt(r);if(!t)return i;let s=(r.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return i<=o?i:i-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function a0(r,e={}){let t=r;if(e.size&&(Dr(t,{size:e.size}),t=mr(t)),mr(t)==="0x00")return!1;if(mr(t)==="0x01")return!0;throw new ed(t)}function Wt(r,e={}){return Number(Ct(r,e))}var dr=J(()=>{"use strict";Ac();gi();Co()});function Ee(r,e={}){return typeof r=="number"||typeof r=="bigint"?be(r,e):typeof r=="string"?yi(r,e):typeof r=="boolean"?rd(r,e):ct(r,e)}function rd(r,e={}){let t=`0x${Number(r)}`;return typeof e.size=="number"?(Dr(t,{size:e.size}),Bn(t,{size:e.size})):t}function ct(r,e={}){let t="";for(let s=0;s<r.length;s++)t+=kw[r[s]];let i=`0x${t}`;return typeof e.size=="number"?(Dr(i,{size:e.size}),Bn(i,{dir:"right",size:e.size})):i}function be(r,e={}){let{signed:t,size:i}=e,s=BigInt(r),o;i?t?o=(1n<<BigInt(i)*8n-1n)-1n:o=2n**(BigInt(i)*8n)-1n:typeof r=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));let a=typeof o=="bigint"&&t?-o-1n:0;if(o&&s>o||s<a){let p=typeof r=="bigint"?"n":"";throw new Ao({max:o?`${o}${p}`:void 0,min:`${a}${p}`,signed:t,size:i,value:`${r}${p}`})}let u=`0x${(t&&s<0?(1n<<BigInt(i*8))+BigInt(s):s).toString(16)}`;return i?Bn(u,{size:i}):u}function yi(r,e={}){let t=ww.encode(r);return ct(t,e)}var kw,ww,He=J(()=>{"use strict";Ac();Jm();dr();kw=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));ww=new TextEncoder});function Zr(r,e={}){return typeof r=="number"||typeof r=="bigint"?Tw(r,e):typeof r=="boolean"?Lw(r,e):zt(r)?Qt(r,e):_i(r,e)}function Lw(r,e={}){let t=new Uint8Array(1);return t[0]=Number(r),typeof e.size=="number"?(Dr(t,{size:e.size}),Bn(t,{size:e.size})):t}function cx(r){if(r>=un.zero&&r<=un.nine)return r-un.zero;if(r>=un.A&&r<=un.F)return r-(un.A-10);if(r>=un.a&&r<=un.f)return r-(un.a-10)}function Qt(r,e={}){let t=r;e.size&&(Dr(t,{size:e.size}),t=Bn(t,{dir:"right",size:e.size}));let i=t.slice(2);i.length%2&&(i=`0${i}`);let s=i.length/2,o=new Uint8Array(s);for(let a=0,u=0;a<s;a++){let p=cx(i.charCodeAt(u++)),m=cx(i.charCodeAt(u++));if(p===void 0||m===void 0)throw new F(`Invalid byte sequence ("${i[u-2]}${i[u-1]}" in "${i}").`);o[a]=p*16+m}return o}function Tw(r,e){let t=be(r,e);return Qt(t)}function _i(r,e={}){let t=Ew.encode(r);return typeof e.size=="number"?(Dr(t,{size:e.size}),Bn(t,{dir:"right",size:e.size})):t}var Ew,un,ir=J(()=>{"use strict";Ze();fi();Jm();dr();He();Ew=new TextEncoder;un={zero:48,nine:57,A:65,F:70,a:97,f:102}});function Cc(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Aw(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Dn(r,...e){if(!Aw(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function ux(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Cc(r.outputLen),Cc(r.blockLen)}function pn(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function id(r,e){Dn(r);let t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}var Mc=J(()=>{"use strict"});function Cw(r,e=!1){return e?{h:Number(r&nd),l:Number(r>>px&nd)}:{h:Number(r>>px&nd)|0,l:Number(r&nd)|0}}function mx(r,e=!1){let t=new Uint32Array(r.length),i=new Uint32Array(r.length);for(let s=0;s<r.length;s++){let{h:o,l:a}=Cw(r[s],e);[t[s],i[s]]=[o,a]}return[t,i]}var nd,px,dx,hx,fx,gx,bx=J(()=>{"use strict";nd=BigInt(4294967295),px=BigInt(32);dx=(r,e,t)=>r<<t|e>>>32-t,hx=(r,e,t)=>e<<t|r>>>32-t,fx=(r,e,t)=>e<<t-32|r>>>64-t,gx=(r,e,t)=>r<<t-32|e>>>64-t});var Ts,yx=J(()=>{"use strict";Ts=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function _x(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function sd(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function xi(r,e){return r<<32-e|r>>>e}function Mw(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function c0(r){for(let e=0;e<r.length;e++)r[e]=Mw(r[e])}function Rw(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function Nn(r){return typeof r=="string"&&(r=Rw(r)),Dn(r),r}function xx(...r){let e=0;for(let i=0;i<r.length;i++){let s=r[i];Dn(s),e+=s.length}let t=new Uint8Array(e);for(let i=0,s=0;i<r.length;i++){let o=r[i];t.set(o,s),s+=o.length}return t}function od(r){let e=i=>r().update(Nn(i)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function vx(r){let e=(i,s)=>r(s).update(Nn(i)).digest(),t=r({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=i=>r(i),e}function ad(r=32){if(Ts&&typeof Ts.getRandomValues=="function")return Ts.getRandomValues(new Uint8Array(r));if(Ts&&typeof Ts.randomBytes=="function")return Ts.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}var l0,On,As=J(()=>{"use strict";yx();Mc();l0=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();On=class{clone(){return this._cloneInto()}}});function Hw(r,e=24){let t=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let a=0;a<10;a++)t[a]=r[a]^r[a+10]^r[a+20]^r[a+30]^r[a+40];for(let a=0;a<10;a+=2){let u=(a+8)%10,p=(a+2)%10,m=t[p],h=t[p+1],f=Ix(m,h,1)^t[u],g=Sx(m,h,1)^t[u+1];for(let b=0;b<50;b+=10)r[a+b]^=f,r[a+b+1]^=g}let s=r[2],o=r[3];for(let a=0;a<24;a++){let u=wx[a],p=Ix(s,o,u),m=Sx(s,o,u),h=kx[a];s=r[h],o=r[h+1],r[h]=p,r[h+1]=m}for(let a=0;a<50;a+=10){for(let u=0;u<10;u++)t[u]=r[a+u];for(let u=0;u<10;u++)r[a+u]^=~t[(u+2)%10]&t[(u+4)%10]}r[0]^=Fw[i],r[1]^=Uw[i]}t.fill(0)}var kx,wx,Ex,Bw,Rc,Dw,Ow,Nw,Pw,Fw,Uw,Ix,Sx,ld,Pn,XR,JR,ZR,eB,tB,cd,rB,iB,Lx,nB,sB,u0=J(()=>{"use strict";Mc();bx();As();kx=[],wx=[],Ex=[],Bw=BigInt(0),Rc=BigInt(1),Dw=BigInt(2),Ow=BigInt(7),Nw=BigInt(256),Pw=BigInt(113);for(let r=0,e=Rc,t=1,i=0;r<24;r++){[t,i]=[i,(2*t+3*i)%5],kx.push(2*(5*i+t)),wx.push((r+1)*(r+2)/2%64);let s=Bw;for(let o=0;o<7;o++)e=(e<<Rc^(e>>Ow)*Pw)%Nw,e&Dw&&(s^=Rc<<(Rc<<BigInt(o))-Rc);Ex.push(s)}[Fw,Uw]=mx(Ex,!0),Ix=(r,e,t)=>t>32?fx(r,e,t):dx(r,e,t),Sx=(r,e,t)=>t>32?gx(r,e,t):hx(r,e,t);ld=class r extends On{constructor(e,t,i,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=i,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Cc(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=_x(this.state)}keccak(){l0||c0(this.state32),Hw(this.state32,this.rounds),l0||c0(this.state32),this.posOut=0,this.pos=0}update(e){pn(this);let{blockLen:t,state:i}=this;e=Nn(e);let s=e.length;for(let o=0;o<s;){let a=Math.min(t-this.pos,s-o);for(let u=0;u<a;u++)i[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:i,blockLen:s}=this;e[i]^=t,t&128&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){pn(this,!1),Dn(e),this.finish();let t=this.state,{blockLen:i}=this;for(let s=0,o=e.length;s<o;){this.posOut>=i&&this.keccak();let a=Math.min(i-this.posOut,o-s);e.set(t.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Cc(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(id(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:i,outputLen:s,rounds:o,enableXOF:a}=this;return e||(e=new r(t,i,s,a,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=i,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}},Pn=(r,e,t)=>od(()=>new ld(e,r,t)),XR=Pn(6,144,224/8),JR=Pn(6,136,256/8),ZR=Pn(6,104,384/8),eB=Pn(6,72,512/8),tB=Pn(1,144,224/8),cd=Pn(1,136,256/8),rB=Pn(1,104,384/8),iB=Pn(1,72,512/8),Lx=(r,e,t)=>vx((i={})=>new ld(e,r,i.dkLen===void 0?t:i.dkLen,!0)),nB=Lx(31,168,128/8),sB=Lx(31,136,256/8)});function St(r,e){let t=e||"hex",i=cd(zt(r,{strict:!1})?Zr(r):r);return t==="bytes"?i:Ee(i)}var vi=J(()=>{"use strict";u0();fi();ir();He()});function Tx(r){return zw(r)}var zw,Ax=J(()=>{"use strict";ir();vi();zw=r=>St(Zr(r))});function Cx(r){let e=!0,t="",i=0,s="",o=!1;for(let a=0;a<r.length;a++){let u=r[a];if(["(",")",","].includes(u)&&(e=!0),u==="("&&i++,u===")"&&i--,!!e){if(i===0){if(u===" "&&["event","function",""].includes(s))s="";else if(s+=u,u===")"){o=!0;break}continue}if(u===" "){r[a-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}s+=u,t+=u}}if(!o)throw new F("Unable to normalize signature.");return s}var Mx=J(()=>{"use strict";Ze()});var Rx,Bx=J(()=>{"use strict";Pm();Mx();Rx=r=>{let e=(()=>typeof r=="string"?r:Es(r))();return Cx(e)}});function ud(r){return Tx(Rx(r))}var p0=J(()=>{"use strict";Ax();Bx()});var Fn,Bc=J(()=>{"use strict";p0();Fn=ud});var Et,Ui=J(()=>{"use strict";Ze();Et=class extends F{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}});var Hi,Dc=J(()=>{"use strict";Hi=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let i=this.keys().next().value;i&&this.delete(i)}return this}}});function mn(r,e){if(m0.has(`${r}.${e}`))return m0.get(`${r}.${e}`);let t=e?`${e}${r.toLowerCase()}`:r.substring(2).toLowerCase(),i=St(_i(t),"bytes"),s=(e?t.substring(`${e}0x`.length):t).split("");for(let a=0;a<40;a+=2)i[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(i[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());let o=`0x${s.join("")}`;return m0.set(`${r}.${e}`,o),o}function pd(r,e){if(!_t(r,{strict:!1}))throw new Et({address:r});return mn(r,e)}var m0,Cs=J(()=>{"use strict";Ui();ir();vi();Dc();Ii();m0=new Hi(8192)});function _t(r,e){let{strict:t=!0}=e??{},i=`${r}.${t}`;if(d0.has(i))return d0.get(i);let s=(()=>jw.test(r)?r.toLowerCase()===r?!0:t?mn(r)===r:!0:!1)();return d0.set(i,s),s}var jw,d0,Ii=J(()=>{"use strict";Dc();Cs();jw=/^0x[a-fA-F0-9]{40}$/,d0=new Hi(8192)});function Lr(r){return typeof r[0]=="string"?hr(r):Gw(r)}function Gw(r){let e=0;for(let s of r)e+=s.length;let t=new Uint8Array(e),i=0;for(let s of r)t.set(s,i),i+=s.length;return t}function hr(r){return`0x${r.reduce((e,t)=>e+t.replace("0x",""),"")}`}var ei=J(()=>{"use strict"});function dn(r,e,t,{strict:i}={}){return zt(r,{strict:!1})?f0(r,e,t,{strict:i}):h0(r,e,t,{strict:i})}function Dx(r,e){if(typeof e=="number"&&e>0&&e>mt(r)-1)throw new Ec({offset:e,position:"start",size:mt(r)})}function Ox(r,e,t){if(typeof e=="number"&&typeof t=="number"&&mt(r)!==t-e)throw new Ec({offset:t,position:"end",size:mt(r)})}function h0(r,e,t,{strict:i}={}){Dx(r,e);let s=r.slice(e,t);return i&&Ox(s,e,t),s}function f0(r,e,t,{strict:i}={}){Dx(r,e);let s=`0x${r.replace("0x","").slice((e??0)*2,(t??r.length)*2)}`;return i&&Ox(s,e,t),s}var Ms=J(()=>{"use strict";Xm();fi();gi()});var Nx,md,g0=J(()=>{"use strict";Nx=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,md=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/});function jr(r,e){if(r.length!==e.length)throw new jm({expectedLength:r.length,givenLength:e.length});let t=Vw({params:r,values:e}),i=y0(t);return i.length===0?"0x":i}function Vw({params:r,values:e}){let t=[];for(let i=0;i<r.length;i++)t.push(b0({param:r[i],value:e[i]}));return t}function b0({param:r,value:e}){let t=dd(r.type);if(t){let[i,s]=t;return Kw(e,{length:i,param:{...r,type:s}})}if(r.type==="tuple")return Xw(e,{param:r});if(r.type==="address")return Ww(e);if(r.type==="bool")return qw(e);if(r.type.startsWith("uint")||r.type.startsWith("int")){let i=r.type.startsWith("int"),[,,s="256"]=md.exec(r.type)??[];return Yw(e,{signed:i,size:Number(s)})}if(r.type.startsWith("bytes"))return $w(e,{param:r});if(r.type==="string")return Qw(e);throw new $m(r.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function y0(r){let e=0;for(let o=0;o<r.length;o++){let{dynamic:a,encoded:u}=r[o];a?e+=32:e+=mt(u)}let t=[],i=[],s=0;for(let o=0;o<r.length;o++){let{dynamic:a,encoded:u}=r[o];a?(t.push(be(e+s,{size:32})),i.push(u),s+=mt(u)):t.push(u)}return Lr([...t,...i])}function Ww(r){if(!_t(r))throw new Et({address:r});return{dynamic:!1,encoded:cn(r.toLowerCase())}}function Kw(r,{length:e,param:t}){let i=e===null;if(!Array.isArray(r))throw new Ym(r);if(!i&&r.length!==e)throw new Hm({expectedLength:e,givenLength:r.length,type:`${t.type}[${e}]`});let s=!1,o=[];for(let a=0;a<r.length;a++){let u=b0({param:t,value:r[a]});u.dynamic&&(s=!0),o.push(u)}if(i||s){let a=y0(o);if(i){let u=be(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?Lr([u,a]):u}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Lr(o.map(({encoded:a})=>a))}}function $w(r,{param:e}){let[,t]=e.type.split("bytes"),i=mt(r);if(!t){let s=r;return i%32!==0&&(s=cn(s,{dir:"right",size:Math.ceil((r.length-2)/2/32)*32})),{dynamic:!0,encoded:Lr([cn(be(i,{size:32})),s])}}if(i!==Number.parseInt(t))throw new zm({expectedSize:Number.parseInt(t),value:r});return{dynamic:!1,encoded:cn(r,{dir:"right"})}}function qw(r){if(typeof r!="boolean")throw new F(`Invalid boolean value: "${r}" (type: ${typeof r}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:cn(rd(r))}}function Yw(r,{signed:e,size:t=256}){if(typeof t=="number"){let i=2n**(BigInt(t)-(e?1n:0n))-1n,s=e?-i-1n:0n;if(r>i||r<s)throw new Ao({max:i.toString(),min:s.toString(),signed:e,size:t/8,value:r.toString()})}return{dynamic:!1,encoded:be(r,{size:32,signed:e})}}function Qw(r){let e=yi(r),t=Math.ceil(mt(e)/32),i=[];for(let s=0;s<t;s++)i.push(cn(dn(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Lr([cn(be(mt(e),{size:32})),...i])}}function Xw(r,{param:e}){let t=!1,i=[];for(let s=0;s<e.components.length;s++){let o=e.components[s],a=Array.isArray(r)?s:o.name,u=b0({param:o,value:r[a]});i.push(u),u.dynamic&&(t=!0)}return{dynamic:t,encoded:t?y0(i):Lr(i.map(({encoded:s})=>s))}}function dd(r){let e=r.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}var Un=J(()=>{"use strict";Yt();Ui();Ze();Ac();Ii();ei();Jm();gi();Ms();He();g0()});var Mo,hd=J(()=>{"use strict";Ms();p0();Mo=r=>dn(ud(r),0,4)});function zi(r){let{abi:e,args:t=[],name:i}=r,s=zt(i,{strict:!1}),o=e.filter(u=>s?u.type==="function"?Mo(u)===i:u.type==="event"?Fn(u)===i:!1:"name"in u&&u.name===i);if(o.length===0)return;if(o.length===1)return o[0];let a;for(let u of o){if(!("inputs"in u))continue;if(!t||t.length===0){if(!u.inputs||u.inputs.length===0)return u;continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==t.length)continue;if(t.every((m,h)=>{let f="inputs"in u&&u.inputs[h];return f?_0(m,f):!1})){if(a&&"inputs"in a&&a.inputs){let m=Px(u.inputs,a.inputs,t);if(m)throw new Wm({abiItem:u,type:m[0]},{abiItem:a,type:m[1]})}a=u}}return a||o[0]}function _0(r,e){let t=typeof r,i=e.type;switch(i){case"address":return _t(r,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return i==="tuple"&&"components"in e?Object.values(e.components).every((s,o)=>_0(Object.values(r)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?t==="string"||r instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)?Array.isArray(r)&&r.every(s=>_0(s,{...e,type:i.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Px(r,e,t){for(let i in r){let s=r[i],o=e[i];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return Px(s.components,o.components,t[i]);let a=[s.type,o.type];if((()=>a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?_t(t[i],{strict:!1}):a.includes("address")&&a.includes("bytes")?_t(t[i],{strict:!1}):!1)())return a}}var Ro=J(()=>{"use strict";Yt();fi();Ii();Bc();hd()});function it(r){return typeof r=="string"?{address:r,type:"json-rpc"}:r}var Xt=J(()=>{"use strict"});function zx(r){let{abi:e,args:t,functionName:i}=r,s=e[0];if(i){let o=zi({abi:e,args:t,name:i});if(!o)throw new Rn(i,{docsPath:Hx});s=o}if(s.type!=="function")throw new Rn(void 0,{docsPath:Hx});return{abi:[s],functionName:Mo(Er(s))}}var Hx,jx=J(()=>{"use strict";Yt();hd();Ls();Ro();Hx="/docs/contract/encodeFunctionData"});function Mt(r){let{args:e}=r,{abi:t,functionName:i}=(()=>r.abi.length===1&&r.functionName?.startsWith("0x")?r:zx(r))(),s=t[0],o=i,a="inputs"in s&&s.inputs?jr(s.inputs,e??[]):void 0;return hr([o,a??"0x"])}var ti=J(()=>{"use strict";ei();Un();jx()});var gd,Gx,Vx,bd=J(()=>{"use strict";gd={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Gx={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Vx={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}});var Oc,Bo,yd,x0=J(()=>{"use strict";Ze();Oc=class extends F{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}},Bo=class extends F{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}},yd=class extends F{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}});function Do(r,{recursiveReadLimit:e=8192}={}){let t=Object.create(Jw);return t.bytes=r,t.dataView=new DataView(r.buffer,r.byteOffset,r.byteLength),t.positionReadCount=new Map,t.recursiveReadLimit=e,t}var Jw,_d=J(()=>{"use strict";x0();Jw={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new yd({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(r){if(r<0||r>this.bytes.length-1)throw new Bo({length:this.bytes.length,position:r})},decrementPosition(r){if(r<0)throw new Oc({offset:r});let e=this.position-r;this.assertPosition(e),this.position=e},getReadCount(r){return this.positionReadCount.get(r||this.position)||0},incrementPosition(r){if(r<0)throw new Oc({offset:r});let e=this.position+r;this.assertPosition(e),this.position=e},inspectByte(r){let e=r??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(r,e){let t=e??this.position;return this.assertPosition(t+r-1),this.bytes.subarray(t,t+r)},inspectUint8(r){let e=r??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(r){let e=r??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(r){let e=r??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(r){let e=r??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(r){this.assertPosition(this.position),this.bytes[this.position]=r,this.position++},pushBytes(r){this.assertPosition(this.position+r.length-1),this.bytes.set(r,this.position),this.position+=r.length},pushUint8(r){this.assertPosition(this.position),this.bytes[this.position]=r,this.position++},pushUint16(r){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,r),this.position+=2},pushUint24(r){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,r>>8),this.dataView.setUint8(this.position+2,r&255),this.position+=3},pushUint32(r){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,r),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let r=this.inspectByte();return this.position++,r},readBytes(r,e){this.assertReadLimit(),this._touch();let t=this.inspectBytes(r);return this.position+=e??r,t},readUint8(){this.assertReadLimit(),this._touch();let r=this.inspectUint8();return this.position+=1,r},readUint16(){this.assertReadLimit(),this._touch();let r=this.inspectUint16();return this.position+=2,r},readUint24(){this.assertReadLimit(),this._touch();let r=this.inspectUint24();return this.position+=3,r},readUint32(){this.assertReadLimit(),this._touch();let r=this.inspectUint32();return this.position+=4,r},get remaining(){return this.bytes.length-this.position},setPosition(r){let e=this.position;return this.assertPosition(r),this.position=r,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let r=this.getReadCount();this.positionReadCount.set(this.position,r+1),r>0&&this.recursiveReadCount++}}});function Wx(r,e={}){typeof e.size<"u"&&Dr(r,{size:e.size});let t=ct(r,e);return Ct(t,e)}function Kx(r,e={}){let t=r;if(typeof e.size<"u"&&(Dr(t,{size:e.size}),t=mr(t)),t.length>1||t[0]>1)throw new Zm(t);return!!t[0]}function Gi(r,e={}){typeof e.size<"u"&&Dr(r,{size:e.size});let t=ct(r,e);return Wt(t,e)}function $x(r,e={}){let t=r;return typeof e.size<"u"&&(Dr(t,{size:e.size}),t=mr(t,{dir:"right"})),new TextDecoder().decode(t)}var qx=J(()=>{"use strict";Ac();Co();dr();He()});function Rs(r,e){let t=typeof e=="string"?Qt(e):e,i=Do(t);if(mt(t)===0&&r.length>0)throw new Jr;if(mt(e)&&mt(e)<32)throw new Eo({data:typeof e=="string"?e:ct(e),params:r,size:mt(e)});let s=0,o=[];for(let a=0;a<r.length;++a){let u=r[a];i.setPosition(s);let[p,m]=Oo(i,u,{staticPosition:0});s+=m,o.push(p)}return o}function Oo(r,e,{staticPosition:t}){let i=dd(e.type);if(i){let[s,o]=i;return eE(r,{...e,type:o},{length:s,staticPosition:t})}if(e.type==="tuple")return nE(r,e,{staticPosition:t});if(e.type==="address")return Zw(r);if(e.type==="bool")return tE(r);if(e.type.startsWith("bytes"))return rE(r,e,{staticPosition:t});if(e.type.startsWith("uint")||e.type.startsWith("int"))return iE(r,e);if(e.type==="string")return sE(r,{staticPosition:t});throw new qm(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function Zw(r){let e=r.readBytes(32);return[mn(ct(h0(e,-20))),32]}function eE(r,e,{length:t,staticPosition:i}){if(!t){let a=Gi(r.readBytes(v0)),u=i+a,p=u+Yx;r.setPosition(u);let m=Gi(r.readBytes(Yx)),h=Nc(e),f=0,g=[];for(let b=0;b<m;++b){r.setPosition(p+(h?b*32:f));let[y,k]=Oo(r,e,{staticPosition:p});f+=k,g.push(y)}return r.setPosition(i+32),[g,32]}if(Nc(e)){let a=Gi(r.readBytes(v0)),u=i+a,p=[];for(let m=0;m<t;++m){r.setPosition(u+m*32);let[h]=Oo(r,e,{staticPosition:u});p.push(h)}return r.setPosition(i+32),[p,32]}let s=0,o=[];for(let a=0;a<t;++a){let[u,p]=Oo(r,e,{staticPosition:i+s});s+=p,o.push(u)}return[o,s]}function tE(r){return[Kx(r.readBytes(32),{size:32}),32]}function rE(r,e,{staticPosition:t}){let[i,s]=e.type.split("bytes");if(!s){let a=Gi(r.readBytes(32));r.setPosition(t+a);let u=Gi(r.readBytes(32));if(u===0)return r.setPosition(t+32),["0x",32];let p=r.readBytes(u);return r.setPosition(t+32),[ct(p),32]}return[ct(r.readBytes(Number.parseInt(s),32)),32]}function iE(r,e){let t=e.type.startsWith("int"),i=Number.parseInt(e.type.split("int")[1]||"256"),s=r.readBytes(32);return[i>48?Wx(s,{signed:t}):Gi(s,{signed:t}),32]}function nE(r,e,{staticPosition:t}){let i=e.components.length===0||e.components.some(({name:a})=>!a),s=i?[]:{},o=0;if(Nc(e)){let a=Gi(r.readBytes(v0)),u=t+a;for(let p=0;p<e.components.length;++p){let m=e.components[p];r.setPosition(u+o);let[h,f]=Oo(r,m,{staticPosition:u});o+=f,s[i?p:m?.name]=h}return r.setPosition(t+32),[s,32]}for(let a=0;a<e.components.length;++a){let u=e.components[a],[p,m]=Oo(r,u,{staticPosition:t});s[i?a:u?.name]=p,o+=m}return[s,o]}function sE(r,{staticPosition:e}){let t=Gi(r.readBytes(32)),i=e+t;r.setPosition(i);let s=Gi(r.readBytes(32));if(s===0)return r.setPosition(e+32),["",32];let o=r.readBytes(s,32),a=$x(mr(o));return r.setPosition(e+32),[a,32]}function Nc(r){let{type:e}=r;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return r.components?.some(Nc);let t=dd(r.type);return!!(t&&Nc({...r,type:t[1]}))}var Yx,v0,xd=J(()=>{"use strict";Yt();Cs();_d();gi();Ms();Co();qx();ir();He();Un();Yx=32,v0=32});function vd(r){let{abi:e,data:t}=r,i=dn(t,0,4);if(i==="0x")throw new Jr;let o=[...e||[],Gx,Vx].find(a=>a.type==="error"&&i===Mo(Er(a)));if(!o)throw new Lo(i,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?Rs(o.inputs,dn(t,4)):void 0,errorName:o.name}}var I0=J(()=>{"use strict";bd();Yt();Ms();hd();xd();Ls()});var ut,Tr=J(()=>{"use strict";ut=(r,e,t)=>JSON.stringify(r,(i,s)=>{let o=typeof s=="bigint"?s.toString():s;return typeof e=="function"?e(i,o):o},t)});function S0({abiItem:r,args:e,includeFunctionName:t=!0,includeName:i=!1}){if("name"in r&&"inputs"in r&&r.inputs)return`${t?r.name:""}(${r.inputs.map((s,o)=>`${i&&s.name?`${s.name}: `:""}${typeof e[o]=="object"?ut(e[o]):e[o]}`).join(", ")})`}var Qx=J(()=>{"use strict";Tr()});var Xx,Jx,k0=J(()=>{"use strict";Xx={gwei:9,wei:18},Jx={ether:-9,wei:9}});function zn(r,e){let t=r.toString(),i=t.startsWith("-");i&&(t=t.slice(1)),t=t.padStart(e,"0");let[s,o]=[t.slice(0,t.length-e),t.slice(t.length-e)];return o=o.replace(/(0+)$/,""),`${i?"-":""}${s||"0"}${o?`.${o}`:""}`}var Id=J(()=>{"use strict"});function No(r,e="wei"){return zn(r,Xx[e])}var Sd=J(()=>{"use strict";k0();Id()});function Jt(r,e="wei"){return zn(r,Jx[e])}var Po=J(()=>{"use strict";k0();Id()});function Zx(r){return r.reduce((e,{slot:t,value:i})=>`${e}        ${t}: ${i}
`,"")}function ev(r){return r.reduce((e,{address:t,...i})=>{let s=`${e}    ${t}:
`;return i.nonce&&(s+=`      nonce: ${i.nonce}
`),i.balance&&(s+=`      balance: ${i.balance}
`),i.code&&(s+=`      code: ${i.code}
`),i.state&&(s+=`      state:
`,s+=Zx(i.state)),i.stateDiff&&(s+=`      stateDiff:
`,s+=Zx(i.stateDiff)),s},`  State Override:
`).slice(0,-1)}var kd,wd,w0=J(()=>{"use strict";Ze();kd=class extends F{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}},wd=class extends F{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}});function Bs(r){let e=Object.entries(r).map(([i,s])=>s===void 0||s===!1?null:[i,s]).filter(Boolean),t=e.reduce((i,[s])=>Math.max(i,s.length),0);return e.map(([i,s])=>`  ${`${i}:`.padEnd(t+1)}  ${s}`).join(`
`)}var Ed,Ld,Td,Ad,Cd,Fo,Uo,Md,Si=J(()=>{"use strict";Sd();Po();Ze();Ed=class extends F{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}},Ld=class extends F{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}},Td=class extends F{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Bs(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}},Ad=class extends F{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}},Cd=class extends F{constructor(e,{account:t,docsPath:i,chain:s,data:o,gas:a,gasPrice:u,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:h,to:f,value:g}){let b=Bs({chain:s&&`${s?.name} (id: ${s?.id})`,from:t?.address,to:f,value:typeof g<"u"&&`${No(g)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:a,gasPrice:typeof u<"u"&&`${Jt(u)} gwei`,maxFeePerGas:typeof p<"u"&&`${Jt(p)} gwei`,maxPriorityFeePerGas:typeof m<"u"&&`${Jt(m)} gwei`,nonce:h});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",b].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}},Fo=class extends F{constructor({blockHash:e,blockNumber:t,blockTag:i,hash:s,index:o}){let a="Transaction";i&&o!==void 0&&(a=`Transaction at block time "${i}" at index "${o}"`),e&&o!==void 0&&(a=`Transaction at block hash "${e}" at index "${o}"`),t&&o!==void 0&&(a=`Transaction at block number "${t}" at index "${o}"`),s&&(a=`Transaction with hash "${s}"`),super(`${a} could not be found.`,{name:"TransactionNotFoundError"})}},Uo=class extends F{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}},Md=class extends F{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}});var tv,Ds,Rd=J(()=>{"use strict";tv=r=>r,Ds=r=>r});var Ho,Bd,Os,Dd,Od,Vi,jn=J(()=>{"use strict";Xt();bd();I0();Ls();Qx();Ro();Sd();Po();Yt();Ze();w0();Si();Rd();Ho=class extends F{constructor(e,{account:t,docsPath:i,chain:s,data:o,gas:a,gasPrice:u,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:h,to:f,value:g,stateOverride:b}){let y=t?it(t):void 0,k=Bs({from:y?.address,to:f,value:typeof g<"u"&&`${No(g)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:a,gasPrice:typeof u<"u"&&`${Jt(u)} gwei`,maxFeePerGas:typeof p<"u"&&`${Jt(p)} gwei`,maxPriorityFeePerGas:typeof m<"u"&&`${Jt(m)} gwei`,nonce:h});b&&(k+=`
${ev(b)}`),super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",k].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}},Bd=class extends F{constructor(e,{abi:t,args:i,contractAddress:s,docsPath:o,functionName:a,sender:u}){let p=zi({abi:t,args:i,name:a}),m=p?S0({abiItem:p,args:i,includeFunctionName:!1,includeName:!1}):void 0,h=p?Er(p,{includeName:!0}):void 0,f=Bs({address:s&&tv(s),function:h,args:m&&m!=="()"&&`${[...Array(a?.length??0).keys()].map(()=>" ").join("")}${m}`,sender:u});super(e.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:e,docsPath:o,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],f&&"Contract Call:",f].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=i,this.cause=e,this.contractAddress=s,this.functionName=a,this.sender=u}},Os=class extends F{constructor({abi:e,data:t,functionName:i,message:s}){let o,a,u,p;if(t&&t!=="0x")try{a=vd({abi:e,data:t});let{abiItem:h,errorName:f,args:g}=a;if(f==="Error")p=g[0];else if(f==="Panic"){let[b]=g;p=gd[b]}else{let b=h?Er(h,{includeName:!0}):void 0,y=h&&g?S0({abiItem:h,args:g,includeFunctionName:!1,includeName:!1}):void 0;u=[b?`Error: ${b}`:"",y&&y!=="()"?`       ${[...Array(f?.length??0).keys()].map(()=>" ").join("")}${y}`:""]}}catch(h){o=h}else s&&(p=s);let m;o instanceof Lo&&(m=o.signature,u=[`Unable to decode signature "${m}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${m}.`]),super(p&&p!=="execution reverted"||m?[`The contract function "${i}" reverted with the following ${m?"signature":"reason"}:`,p||m].join(`
`):`The contract function "${i}" reverted.`,{cause:o,metaMessages:u,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.raw=t,this.reason=p,this.signature=m}},Dd=class extends F{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}},Od=class extends F{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}},Vi=class extends F{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}});var ri,Gn,Pc,Ns=J(()=>{"use strict";Tr();Ze();Rd();ri=class extends F{constructor({body:e,cause:t,details:i,headers:s,status:o,url:a}){super("HTTP request failed.",{cause:t,details:i,metaMessages:[o&&`Status: ${o}`,`URL: ${Ds(a)}`,e&&`Request body: ${ut(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=o,this.url=a}},Gn=class extends F{constructor({body:e,error:t,url:i}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${Ds(i)}`,`Request body: ${ut(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}},Pc=class extends F{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Ds(t)}`,`Request body: ${ut(e)}`],name:"TimeoutError"})}}});var oE,fr,Vn,zo,jo,Go,Vo,hn,Wi,Wo,Ko,$o,Wn,Ps,qo,Fs,Yo,Qo,Xo,Jo,Zo,Nd,Fc=J(()=>{"use strict";Ze();Ns();oE=-1,fr=class extends F{constructor(e,{code:t,docsPath:i,metaMessages:s,name:o,shortMessage:a}){super(a,{cause:e,docsPath:i,metaMessages:s||e?.metaMessages,name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||e.name,this.code=e instanceof Gn?e.code:t??oE}},Vn=class extends fr{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}},zo=class r extends fr{constructor(e){super(e,{code:r.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}};Object.defineProperty(zo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});jo=class r extends fr{constructor(e){super(e,{code:r.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}};Object.defineProperty(jo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});Go=class r extends fr{constructor(e,{method:t}={}){super(e,{code:r.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}};Object.defineProperty(Go,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});Vo=class r extends fr{constructor(e){super(e,{code:r.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(Vo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});hn=class r extends fr{constructor(e){super(e,{code:r.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}};Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});Wi=class r extends fr{constructor(e){super(e,{code:r.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(Wi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});Wo=class r extends fr{constructor(e){super(e,{code:r.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}};Object.defineProperty(Wo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});Ko=class r extends fr{constructor(e){super(e,{code:r.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}};Object.defineProperty(Ko,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});$o=class r extends fr{constructor(e){super(e,{code:r.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}};Object.defineProperty($o,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});Wn=class r extends fr{constructor(e,{method:t}={}){super(e,{code:r.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}};Object.defineProperty(Wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});Ps=class r extends fr{constructor(e){super(e,{code:r.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}};Object.defineProperty(Ps,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});qo=class r extends fr{constructor(e){super(e,{code:r.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}};Object.defineProperty(qo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});Fs=class r extends Vn{constructor(e){super(e,{code:r.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(Fs,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});Yo=class r extends Vn{constructor(e){super(e,{code:r.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}};Object.defineProperty(Yo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});Qo=class r extends Vn{constructor(e,{method:t}={}){super(e,{code:r.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}};Object.defineProperty(Qo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});Xo=class r extends Vn{constructor(e){super(e,{code:r.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}};Object.defineProperty(Xo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});Jo=class r extends Vn{constructor(e){super(e,{code:r.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}};Object.defineProperty(Jo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});Zo=class r extends Vn{constructor(e){super(e,{code:r.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(Zo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});Nd=class extends fr{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}});function lE(r,e,t,i){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,i);let s=BigInt(32),o=BigInt(4294967295),a=Number(t>>s&o),u=Number(t&o),p=i?4:0,m=i?0:4;r.setUint32(e+p,a,i),r.setUint32(e+m,u,i)}function iv(r,e,t){return r&e^~r&t}function nv(r,e,t){return r&e^r&t^e&t}var Pd,sv=J(()=>{"use strict";Mc();As();Pd=class extends On{constructor(e,t,i,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=sd(this.buffer)}update(e){pn(this);let{view:t,buffer:i,blockLen:s}=this;e=Nn(e);let o=e.length;for(let a=0;a<o;){let u=Math.min(s-this.pos,o-a);if(u===s){let p=sd(e);for(;s<=o-a;a+=s)this.process(p,a);continue}i.set(e.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){pn(this),id(e,this),this.finished=!0;let{buffer:t,view:i,blockLen:s,isLE:o}=this,{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(i,0),a=0);for(let f=a;f<s;f++)t[f]=0;lE(i,s-8,BigInt(this.length*8),o),this.process(i,0);let u=sd(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let m=p/4,h=this.get();if(m>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<m;f++)u.setUint32(4*f,h[f],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let i=e.slice(0,t);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:i,length:s,finished:o,destroyed:a,pos:u}=this;return e.length=s,e.pos=u,e.finished=o,e.destroyed=a,s%t&&e.buffer.set(i),e}}});var cE,Kn,$n,E0,Us,L0=J(()=>{"use strict";sv();As();cE=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$n=new Uint32Array(64),E0=class extends Pd{constructor(){super(64,32,8,!1),this.A=Kn[0]|0,this.B=Kn[1]|0,this.C=Kn[2]|0,this.D=Kn[3]|0,this.E=Kn[4]|0,this.F=Kn[5]|0,this.G=Kn[6]|0,this.H=Kn[7]|0}get(){let{A:e,B:t,C:i,D:s,E:o,F:a,G:u,H:p}=this;return[e,t,i,s,o,a,u,p]}set(e,t,i,s,o,a,u,p){this.A=e|0,this.B=t|0,this.C=i|0,this.D=s|0,this.E=o|0,this.F=a|0,this.G=u|0,this.H=p|0}process(e,t){for(let f=0;f<16;f++,t+=4)$n[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){let g=$n[f-15],b=$n[f-2],y=xi(g,7)^xi(g,18)^g>>>3,k=xi(b,17)^xi(b,19)^b>>>10;$n[f]=k+$n[f-7]+y+$n[f-16]|0}let{A:i,B:s,C:o,D:a,E:u,F:p,G:m,H:h}=this;for(let f=0;f<64;f++){let g=xi(u,6)^xi(u,11)^xi(u,25),b=h+g+iv(u,p,m)+cE[f]+$n[f]|0,k=(xi(i,2)^xi(i,13)^xi(i,22))+nv(i,s,o)|0;h=m,m=p,p=u,u=a+b|0,a=o,o=s,s=i,i=b+k|0}i=i+this.A|0,s=s+this.B|0,o=o+this.C|0,a=a+this.D|0,u=u+this.E|0,p=p+this.F|0,m=m+this.G|0,h=h+this.H|0,this.set(i,s,o,a,u,p,m,h)}roundClean(){$n.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Us=od(()=>new E0)});var Fd,T0,ov=J(()=>{"use strict";Mc();As();Fd=class extends On{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ux(e);let i=Nn(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,o=new Uint8Array(s);o.set(i.length>s?e.create().update(i).digest():i);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=e.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(e){return pn(this),this.iHash.update(e),this}digestInto(e){pn(this),Dn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:i,finished:s,destroyed:o,blockLen:a,outputLen:u}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=a,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},T0=(r,e,t)=>new Fd(r,e).update(t).digest();T0.create=(r,e)=>new Fd(r,e)});var D0={};jy(D0,{aInRange:()=>Ki,abool:()=>Hs,abytes:()=>ii,bitGet:()=>hE,bitLen:()=>R0,bitMask:()=>Hc,bitSet:()=>fE,bytesToHex:()=>zs,bytesToNumberBE:()=>Or,bytesToNumberLE:()=>zd,concatBytes:()=>gr,createHmacDrbg:()=>B0,ensureBytes:()=>Zt,equalBytes:()=>dE,hexToBytes:()=>Gs,hexToNumber:()=>M0,inRange:()=>Yn,isBytes:()=>qn,memoized:()=>Gd,notImplemented:()=>bE,numberToBytesBE:()=>ki,numberToBytesLE:()=>jd,numberToHexUnpadded:()=>js,numberToVarBytesBE:()=>mE,utf8ToBytes:()=>Uc,validateObject:()=>$i});function qn(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ii(r){if(!qn(r))throw new Error("Uint8Array expected")}function Hs(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}function zs(r){ii(r);let e="";for(let t=0;t<r.length;t++)e+=pE[r[t]];return e}function js(r){let e=r.toString(16);return e.length&1?"0"+e:e}function M0(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Ud:BigInt("0x"+r)}function av(r){if(r>=fn._0&&r<=fn._9)return r-fn._0;if(r>=fn.A&&r<=fn.F)return r-(fn.A-10);if(r>=fn.a&&r<=fn.f)return r-(fn.a-10)}function Gs(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);let e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(t);for(let s=0,o=0;s<t;s++,o+=2){let a=av(r.charCodeAt(o)),u=av(r.charCodeAt(o+1));if(a===void 0||u===void 0){let p=r[o]+r[o+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+o)}i[s]=a*16+u}return i}function Or(r){return M0(zs(r))}function zd(r){return ii(r),M0(zs(Uint8Array.from(r).reverse()))}function ki(r,e){return Gs(r.toString(16).padStart(e*2,"0"))}function jd(r,e){return ki(r,e).reverse()}function mE(r){return Gs(js(r))}function Zt(r,e,t){let i;if(typeof e=="string")try{i=Gs(e)}catch(o){throw new Error(r+" must be hex string or Uint8Array, cause: "+o)}else if(qn(e))i=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");let s=i.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return i}function gr(...r){let e=0;for(let i=0;i<r.length;i++){let s=r[i];ii(s),e+=s.length}let t=new Uint8Array(e);for(let i=0,s=0;i<r.length;i++){let o=r[i];t.set(o,s),s+=o.length}return t}function dE(r,e){if(r.length!==e.length)return!1;let t=0;for(let i=0;i<r.length;i++)t|=r[i]^e[i];return t===0}function Uc(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Yn(r,e,t){return A0(r)&&A0(e)&&A0(t)&&e<=r&&r<t}function Ki(r,e,t,i){if(!Yn(e,t,i))throw new Error("expected valid "+r+": "+t+" <= n < "+i+", got "+e)}function R0(r){let e;for(e=0;r>Ud;r>>=Hd,e+=1);return e}function hE(r,e){return r>>BigInt(e)&Hd}function fE(r,e,t){return r|(t?Hd:Ud)<<BigInt(e)}function B0(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let i=C0(r),s=C0(r),o=0,a=()=>{i.fill(1),s.fill(0),o=0},u=(...f)=>t(s,i,...f),p=(f=C0())=>{s=u(lv([0]),f),i=u(),f.length!==0&&(s=u(lv([1]),f),i=u())},m=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let f=0,g=[];for(;f<e;){i=u();let b=i.slice();g.push(b),f+=i.length}return gr(...g)};return(f,g)=>{a(),p(f);let b;for(;!(b=g(m()));)p();return a(),b}}function $i(r,e,t={}){let i=(s,o,a)=>{let u=gE[o];if(typeof u!="function")throw new Error("invalid validator function");let p=r[s];if(!(a&&p===void 0)&&!u(p,r))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+p)};for(let[s,o]of Object.entries(e))i(s,o,!1);for(let[s,o]of Object.entries(t))i(s,o,!0);return r}function Gd(r){let e=new WeakMap;return(t,...i)=>{let s=e.get(t);if(s!==void 0)return s;let o=r(t,...i);return e.set(t,o),o}}var Ud,Hd,uE,pE,fn,A0,Hc,C0,lv,gE,bE,Vs=J(()=>{"use strict";Ud=BigInt(0),Hd=BigInt(1),uE=BigInt(2);pE=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));fn={_0:48,_9:57,A:65,F:70,a:97,f:102};A0=r=>typeof r=="bigint"&&Ud<=r;Hc=r=>(uE<<BigInt(r-1))-Hd,C0=r=>new Uint8Array(r),lv=r=>Uint8Array.from(r);gE={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||qn(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};bE=()=>{throw new Error("not implemented")}});function jt(r,e){let t=r%e;return t>=er?t:e+t}function vE(r,e,t){if(e<er)throw new Error("invalid exponent, negatives unsupported");if(t<=er)throw new Error("invalid modulus");if(t===Bt)return er;let i=Bt;for(;e>er;)e&Bt&&(i=i*r%t),r=r*r%t,e>>=Bt;return i}function Vr(r,e,t){let i=r;for(;e-- >er;)i*=i,i%=t;return i}function Vd(r,e){if(r===er)throw new Error("invert: expected non-zero number");if(e<=er)throw new Error("invert: expected positive modulus, got "+e);let t=jt(r,e),i=e,s=er,o=Bt,a=Bt,u=er;for(;t!==er;){let m=i/t,h=i%t,f=s-a*m,g=o-u*m;i=t,t=h,s=a,o=u,a=f,u=g}if(i!==Bt)throw new Error("invert: does not exist");return jt(s,e)}function IE(r){let e=(r-Bt)/Ws,t,i,s;for(t=r-Bt,i=0;t%Ws===er;t/=Ws,i++);for(s=Ws;s<r&&vE(s,e,r)!==r-Bt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){let a=(r+Bt)/O0;return function(p,m){let h=p.pow(m,a);if(!p.eql(p.sqr(h),m))throw new Error("Cannot find square root");return h}}let o=(t+Bt)/Ws;return function(u,p){if(u.pow(p,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let m=i,h=u.pow(u.mul(u.ONE,s),t),f=u.pow(p,o),g=u.pow(p,t);for(;!u.eql(g,u.ONE);){if(u.eql(g,u.ZERO))return u.ZERO;let b=1;for(let k=u.sqr(g);b<m&&!u.eql(k,u.ONE);b++)k=u.sqr(k);let y=u.pow(h,Bt<<BigInt(m-b-1));h=u.sqr(y),f=u.mul(f,y),g=u.mul(g,h),m=b}return f}}function SE(r){if(r%O0===yE){let e=(r+Bt)/O0;return function(i,s){let o=i.pow(s,e);if(!i.eql(i.sqr(o),s))throw new Error("Cannot find square root");return o}}if(r%uv===cv){let e=(r-cv)/uv;return function(i,s){let o=i.mul(s,Ws),a=i.pow(o,e),u=i.mul(s,a),p=i.mul(i.mul(u,Ws),a),m=i.mul(u,i.sub(p,i.ONE));if(!i.eql(i.sqr(m),s))throw new Error("Cannot find square root");return m}}return r%xE,IE(r)}function Wd(r){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=kE.reduce((i,s)=>(i[s]="function",i),e);return $i(r,t)}function wE(r,e,t){if(t<er)throw new Error("invalid exponent, negatives unsupported");if(t===er)return r.ONE;if(t===Bt)return e;let i=r.ONE,s=e;for(;t>er;)t&Bt&&(i=r.mul(i,s)),s=r.sqr(s),t>>=Bt;return i}function EE(r,e){let t=new Array(e.length),i=e.reduce((o,a,u)=>r.is0(a)?o:(t[u]=o,r.mul(o,a)),r.ONE),s=r.inv(i);return e.reduceRight((o,a,u)=>r.is0(a)?o:(t[u]=r.mul(o,t[u]),r.mul(o,a)),s),t}function N0(r,e){let t=e!==void 0?e:r.toString(2).length,i=Math.ceil(t/8);return{nBitLength:t,nByteLength:i}}function Kd(r,e,t=!1,i={}){if(r<=er)throw new Error("invalid field: expected ORDER > 0, got "+r);let{nBitLength:s,nByteLength:o}=N0(r,e);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a,u=Object.freeze({ORDER:r,isLE:t,BITS:s,BYTES:o,MASK:Hc(s),ZERO:er,ONE:Bt,create:p=>jt(p,r),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return er<=p&&p<r},is0:p=>p===er,isOdd:p=>(p&Bt)===Bt,neg:p=>jt(-p,r),eql:(p,m)=>p===m,sqr:p=>jt(p*p,r),add:(p,m)=>jt(p+m,r),sub:(p,m)=>jt(p-m,r),mul:(p,m)=>jt(p*m,r),pow:(p,m)=>wE(u,p,m),div:(p,m)=>jt(p*Vd(m,r),r),sqrN:p=>p*p,addN:(p,m)=>p+m,subN:(p,m)=>p-m,mulN:(p,m)=>p*m,inv:p=>Vd(p,r),sqrt:i.sqrt||(p=>(a||(a=SE(r)),a(u,p))),invertBatch:p=>EE(u,p),cmov:(p,m,h)=>h?m:p,toBytes:p=>t?jd(p,o):ki(p,o),fromBytes:p=>{if(p.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+p.length);return t?zd(p):Or(p)}});return Object.freeze(u)}function pv(r){if(typeof r!="bigint")throw new Error("field order must be bigint");let e=r.toString(2).length;return Math.ceil(e/8)}function P0(r){let e=pv(r);return e+Math.ceil(e/2)}function mv(r,e,t=!1){let i=r.length,s=pv(e),o=P0(e);if(i<16||i<o||i>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+i);let a=t?zd(r):Or(r),u=jt(a,e-Bt)+Bt;return t?jd(u,s):ki(u,s)}var er,Bt,Ws,yE,O0,cv,uv,_E,xE,kE,zc=J(()=>{"use strict";Vs();er=BigInt(0),Bt=BigInt(1),Ws=BigInt(2),yE=BigInt(3),O0=BigInt(4),cv=BigInt(5),uv=BigInt(8),_E=BigInt(9),xE=BigInt(16);kE=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function F0(r,e){let t=e.negate();return r?t:e}function hv(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function U0(r,e){hv(r,e);let t=Math.ceil(e/r)+1,i=2**(r-1);return{windows:t,windowSize:i}}function LE(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,i)=>{if(!(t instanceof e))throw new Error("invalid point at index "+i)})}function TE(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,i)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+i)})}function z0(r){return fv.get(r)||1}function gv(r,e){return{constTimeNegate:F0,hasPrecomputes(t){return z0(t)!==1},unsafeLadder(t,i,s=r.ZERO){let o=t;for(;i>dv;)i&$d&&(s=s.add(o)),o=o.double(),i>>=$d;return s},precomputeWindow(t,i){let{windows:s,windowSize:o}=U0(i,e),a=[],u=t,p=u;for(let m=0;m<s;m++){p=u,a.push(p);for(let h=1;h<o;h++)p=p.add(u),a.push(p);u=p.double()}return a},wNAF(t,i,s){let{windows:o,windowSize:a}=U0(t,e),u=r.ZERO,p=r.BASE,m=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let g=0;g<o;g++){let b=g*a,y=Number(s&m);s>>=f,y>a&&(y-=h,s+=$d);let k=b,I=b+Math.abs(y)-1,A=g%2!==0,M=y<0;y===0?p=p.add(F0(A,i[k])):u=u.add(F0(M,i[I]))}return{p:u,f:p}},wNAFUnsafe(t,i,s,o=r.ZERO){let{windows:a,windowSize:u}=U0(t,e),p=BigInt(2**t-1),m=2**t,h=BigInt(t);for(let f=0;f<a;f++){let g=f*u;if(s===dv)break;let b=Number(s&p);if(s>>=h,b>u&&(b-=m,s+=$d),b===0)continue;let y=i[g+Math.abs(b)-1];b<0&&(y=y.negate()),o=o.add(y)}return o},getPrecomputes(t,i,s){let o=H0.get(i);return o||(o=this.precomputeWindow(i,t),t!==1&&H0.set(i,s(o))),o},wNAFCached(t,i,s){let o=z0(t);return this.wNAF(o,this.getPrecomputes(o,t,s),i)},wNAFCachedUnsafe(t,i,s,o){let a=z0(t);return a===1?this.unsafeLadder(t,i,o):this.wNAFUnsafe(a,this.getPrecomputes(a,t,s),i,o)},setWindowSize(t,i){hv(i,e),fv.set(t,i),H0.delete(t)}}}function bv(r,e,t,i){if(LE(t,r),TE(i,e),t.length!==i.length)throw new Error("arrays of points and scalars must have equal length");let s=r.ZERO,o=R0(BigInt(t.length)),a=o>12?o-3:o>4?o-2:o?2:1,u=(1<<a)-1,p=new Array(u+1).fill(s),m=Math.floor((e.BITS-1)/a)*a,h=s;for(let f=m;f>=0;f-=a){p.fill(s);for(let b=0;b<i.length;b++){let y=i[b],k=Number(y>>BigInt(f)&BigInt(u));p[k]=p[k].add(t[b])}let g=s;for(let b=p.length-1,y=s;b>0;b--)y=y.add(p[b]),g=g.add(y);if(h=h.add(g),f!==0)for(let b=0;b<a;b++)h=h.double()}return h}function j0(r){return Wd(r.Fp),$i(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...N0(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}var dv,$d,H0,fv,yv=J(()=>{"use strict";zc();Vs();dv=BigInt(0),$d=BigInt(1);H0=new WeakMap,fv=new WeakMap});function _v(r){r.lowS!==void 0&&Hs("lowS",r.lowS),r.prehash!==void 0&&Hs("prehash",r.prehash)}function AE(r){let e=j0(r);$i(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:i,a:s}=e;if(t){if(!i.eql(s,i.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}function RE(r){let e=AE(r),{Fp:t}=e,i=Kd(e.n,e.nBitLength),s=e.toBytes||((k,I,A)=>{let M=I.toAffine();return gr(Uint8Array.from([4]),t.toBytes(M.x),t.toBytes(M.y))}),o=e.fromBytes||(k=>{let I=k.subarray(1),A=t.fromBytes(I.subarray(0,t.BYTES)),M=t.fromBytes(I.subarray(t.BYTES,2*t.BYTES));return{x:A,y:M}});function a(k){let{a:I,b:A}=e,M=t.sqr(k),O=t.mul(M,k);return t.add(t.add(O,t.mul(k,I)),A)}if(!t.eql(t.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function u(k){return Yn(k,xt,e.n)}function p(k){let{allowedPrivateKeyLengths:I,nByteLength:A,wrapPrivateKey:M,n:O}=e;if(I&&typeof k!="bigint"){if(qn(k)&&(k=zs(k)),typeof k!="string"||!I.includes(k.length))throw new Error("invalid private key");k=k.padStart(A*2,"0")}let G;try{G=typeof k=="bigint"?k:Or(Zt("private key",k,A))}catch{throw new Error("invalid private key, expected hex or "+A+" bytes, got "+typeof k)}return M&&(G=jt(G,O)),Ki("private key",G,xt,O),G}function m(k){if(!(k instanceof g))throw new Error("ProjectivePoint expected")}let h=Gd((k,I)=>{let{px:A,py:M,pz:O}=k;if(t.eql(O,t.ONE))return{x:A,y:M};let G=k.is0();I==null&&(I=G?t.ONE:t.inv(O));let $=t.mul(A,I),q=t.mul(M,I),H=t.mul(O,I);if(G)return{x:t.ZERO,y:t.ZERO};if(!t.eql(H,t.ONE))throw new Error("invZ was invalid");return{x:$,y:q}}),f=Gd(k=>{if(k.is0()){if(e.allowInfinityPoint&&!t.is0(k.py))return;throw new Error("bad point: ZERO")}let{x:I,y:A}=k.toAffine();if(!t.isValid(I)||!t.isValid(A))throw new Error("bad point: x or y not FE");let M=t.sqr(A),O=a(I);if(!t.eql(M,O))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(I,A,M){if(this.px=I,this.py=A,this.pz=M,I==null||!t.isValid(I))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(M==null||!t.isValid(M))throw new Error("z required");Object.freeze(this)}static fromAffine(I){let{x:A,y:M}=I||{};if(!I||!t.isValid(A)||!t.isValid(M))throw new Error("invalid affine point");if(I instanceof g)throw new Error("projective point not allowed");let O=G=>t.eql(G,t.ZERO);return O(A)&&O(M)?g.ZERO:new g(A,M,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){let A=t.invertBatch(I.map(M=>M.pz));return I.map((M,O)=>M.toAffine(A[O])).map(g.fromAffine)}static fromHex(I){let A=g.fromAffine(o(Zt("pointHex",I)));return A.assertValidity(),A}static fromPrivateKey(I){return g.BASE.multiply(p(I))}static msm(I,A){return bv(g,i,I,A)}_setWindowSize(I){y.setWindowSize(this,I)}assertValidity(){f(this)}hasEvenY(){let{y:I}=this.toAffine();if(t.isOdd)return!t.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){m(I);let{px:A,py:M,pz:O}=this,{px:G,py:$,pz:q}=I,H=t.eql(t.mul(A,q),t.mul(G,O)),K=t.eql(t.mul(M,q),t.mul($,O));return H&&K}negate(){return new g(this.px,t.neg(this.py),this.pz)}double(){let{a:I,b:A}=e,M=t.mul(A,qd),{px:O,py:G,pz:$}=this,q=t.ZERO,H=t.ZERO,K=t.ZERO,W=t.mul(O,O),he=t.mul(G,G),xe=t.mul($,$),Ae=t.mul(O,G);return Ae=t.add(Ae,Ae),K=t.mul(O,$),K=t.add(K,K),q=t.mul(I,K),H=t.mul(M,xe),H=t.add(q,H),q=t.sub(he,H),H=t.add(he,H),H=t.mul(q,H),q=t.mul(Ae,q),K=t.mul(M,K),xe=t.mul(I,xe),Ae=t.sub(W,xe),Ae=t.mul(I,Ae),Ae=t.add(Ae,K),K=t.add(W,W),W=t.add(K,W),W=t.add(W,xe),W=t.mul(W,Ae),H=t.add(H,W),xe=t.mul(G,$),xe=t.add(xe,xe),W=t.mul(xe,Ae),q=t.sub(q,W),K=t.mul(xe,he),K=t.add(K,K),K=t.add(K,K),new g(q,H,K)}add(I){m(I);let{px:A,py:M,pz:O}=this,{px:G,py:$,pz:q}=I,H=t.ZERO,K=t.ZERO,W=t.ZERO,he=e.a,xe=t.mul(e.b,qd),Ae=t.mul(A,G),ot=t.mul(M,$),le=t.mul(O,q),we=t.add(A,M),Ie=t.add(G,$);we=t.mul(we,Ie),Ie=t.add(Ae,ot),we=t.sub(we,Ie),Ie=t.add(A,O);let R=t.add(G,q);return Ie=t.mul(Ie,R),R=t.add(Ae,le),Ie=t.sub(Ie,R),R=t.add(M,O),H=t.add($,q),R=t.mul(R,H),H=t.add(ot,le),R=t.sub(R,H),W=t.mul(he,Ie),H=t.mul(xe,le),W=t.add(H,W),H=t.sub(ot,W),W=t.add(ot,W),K=t.mul(H,W),ot=t.add(Ae,Ae),ot=t.add(ot,Ae),le=t.mul(he,le),Ie=t.mul(xe,Ie),ot=t.add(ot,le),le=t.sub(Ae,le),le=t.mul(he,le),Ie=t.add(Ie,le),Ae=t.mul(ot,Ie),K=t.add(K,Ae),Ae=t.mul(R,Ie),H=t.mul(we,H),H=t.sub(H,Ae),Ae=t.mul(we,ot),W=t.mul(R,W),W=t.add(W,Ae),new g(H,K,W)}subtract(I){return this.add(I.negate())}is0(){return this.equals(g.ZERO)}wNAF(I){return y.wNAFCached(this,I,g.normalizeZ)}multiplyUnsafe(I){let{endo:A,n:M}=e;Ki("scalar",I,wi,M);let O=g.ZERO;if(I===wi)return O;if(this.is0()||I===xt)return this;if(!A||y.hasPrecomputes(this))return y.wNAFCachedUnsafe(this,I,g.normalizeZ);let{k1neg:G,k1:$,k2neg:q,k2:H}=A.splitScalar(I),K=O,W=O,he=this;for(;$>wi||H>wi;)$&xt&&(K=K.add(he)),H&xt&&(W=W.add(he)),he=he.double(),$>>=xt,H>>=xt;return G&&(K=K.negate()),q&&(W=W.negate()),W=new g(t.mul(W.px,A.beta),W.py,W.pz),K.add(W)}multiply(I){let{endo:A,n:M}=e;Ki("scalar",I,xt,M);let O,G;if(A){let{k1neg:$,k1:q,k2neg:H,k2:K}=A.splitScalar(I),{p:W,f:he}=this.wNAF(q),{p:xe,f:Ae}=this.wNAF(K);W=y.constTimeNegate($,W),xe=y.constTimeNegate(H,xe),xe=new g(t.mul(xe.px,A.beta),xe.py,xe.pz),O=W.add(xe),G=he.add(Ae)}else{let{p:$,f:q}=this.wNAF(I);O=$,G=q}return g.normalizeZ([O,G])[0]}multiplyAndAddUnsafe(I,A,M){let O=g.BASE,G=(q,H)=>H===wi||H===xt||!q.equals(O)?q.multiplyUnsafe(H):q.multiply(H),$=G(this,A).add(G(I,M));return $.is0()?void 0:$}toAffine(I){return h(this,I)}isTorsionFree(){let{h:I,isTorsionFree:A}=e;if(I===xt)return!0;if(A)return A(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:I,clearCofactor:A}=e;return I===xt?this:A?A(g,this):this.multiplyUnsafe(e.h)}toRawBytes(I=!0){return Hs("isCompressed",I),this.assertValidity(),s(g,this,I)}toHex(I=!0){return Hs("isCompressed",I),zs(this.toRawBytes(I))}}g.BASE=new g(e.Gx,e.Gy,t.ONE),g.ZERO=new g(t.ZERO,t.ONE,t.ZERO);let b=e.nBitLength,y=gv(g,e.endo?Math.ceil(b/2):b);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:p,weierstrassEquation:a,isWithinCurveOrder:u}}function BE(r){let e=j0(r);return $i(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function vv(r){let e=BE(r),{Fp:t,n:i}=e,s=t.BYTES+1,o=2*t.BYTES+1;function a(le){return jt(le,i)}function u(le){return Vd(le,i)}let{ProjectivePoint:p,normPrivateKeyToScalar:m,weierstrassEquation:h,isWithinCurveOrder:f}=RE({...e,toBytes(le,we,Ie){let R=we.toAffine(),Ke=t.toBytes(R.x),de=gr;return Hs("isCompressed",Ie),Ie?de(Uint8Array.from([we.hasEvenY()?2:3]),Ke):de(Uint8Array.from([4]),Ke,t.toBytes(R.y))},fromBytes(le){let we=le.length,Ie=le[0],R=le.subarray(1);if(we===s&&(Ie===2||Ie===3)){let Ke=Or(R);if(!Yn(Ke,xt,t.ORDER))throw new Error("Point is not on curve");let de=h(Ke),et;try{et=t.sqrt(de)}catch(rr){let dt=rr instanceof Error?": "+rr.message:"";throw new Error("Point is not on curve"+dt)}let kt=(et&xt)===xt;return(Ie&1)===1!==kt&&(et=t.neg(et)),{x:Ke,y:et}}else if(we===o&&Ie===4){let Ke=t.fromBytes(R.subarray(0,t.BYTES)),de=t.fromBytes(R.subarray(t.BYTES,2*t.BYTES));return{x:Ke,y:de}}else{let Ke=s,de=o;throw new Error("invalid Point, expected length of "+Ke+", or uncompressed "+de+", got "+we)}}}),g=le=>zs(ki(le,e.nByteLength));function b(le){let we=i>>xt;return le>we}function y(le){return b(le)?a(-le):le}let k=(le,we,Ie)=>Or(le.slice(we,Ie));class I{constructor(we,Ie,R){this.r=we,this.s=Ie,this.recovery=R,this.assertValidity()}static fromCompact(we){let Ie=e.nByteLength;return we=Zt("compactSignature",we,Ie*2),new I(k(we,0,Ie),k(we,Ie,2*Ie))}static fromDER(we){let{r:Ie,s:R}=gn.toSig(Zt("DER",we));return new I(Ie,R)}assertValidity(){Ki("r",this.r,xt,i),Ki("s",this.s,xt,i)}addRecoveryBit(we){return new I(this.r,this.s,we)}recoverPublicKey(we){let{r:Ie,s:R,recovery:Ke}=this,de=q(Zt("msgHash",we));if(Ke==null||![0,1,2,3].includes(Ke))throw new Error("recovery id invalid");let et=Ke===2||Ke===3?Ie+e.n:Ie;if(et>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let kt=Ke&1?"03":"02",$t=p.fromHex(kt+g(et)),rr=u(et),dt=a(-de*rr),Mr=a(R*rr),wr=p.BASE.multiplyAndAddUnsafe($t,dt,Mr);if(!wr)throw new Error("point at infinify");return wr.assertValidity(),wr}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Gs(this.toDERHex())}toDERHex(){return gn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Gs(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}let A={isValidPrivateKey(le){try{return m(le),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{let le=P0(e.n);return mv(e.randomBytes(le),e.n)},precompute(le=8,we=p.BASE){return we._setWindowSize(le),we.multiply(BigInt(3)),we}};function M(le,we=!0){return p.fromPrivateKey(le).toRawBytes(we)}function O(le){let we=qn(le),Ie=typeof le=="string",R=(we||Ie)&&le.length;return we?R===s||R===o:Ie?R===2*s||R===2*o:le instanceof p}function G(le,we,Ie=!0){if(O(le))throw new Error("first arg must be private key");if(!O(we))throw new Error("second arg must be public key");return p.fromHex(we).multiply(m(le)).toRawBytes(Ie)}let $=e.bits2int||function(le){if(le.length>8192)throw new Error("input is too large");let we=Or(le),Ie=le.length*8-e.nBitLength;return Ie>0?we>>BigInt(Ie):we},q=e.bits2int_modN||function(le){return a($(le))},H=Hc(e.nBitLength);function K(le){return Ki("num < 2^"+e.nBitLength,le,wi,H),ki(le,e.nByteLength)}function W(le,we,Ie=he){if(["recovered","canonical"].some(Qr=>Qr in Ie))throw new Error("sign() legacy options not supported");let{hash:R,randomBytes:Ke}=e,{lowS:de,prehash:et,extraEntropy:kt}=Ie;de==null&&(de=!0),le=Zt("msgHash",le),_v(Ie),et&&(le=Zt("prehashed msgHash",R(le)));let $t=q(le),rr=m(we),dt=[K(rr),K($t)];if(kt!=null&&kt!==!1){let Qr=kt===!0?Ke(t.BYTES):kt;dt.push(Zt("extraEntropy",Qr))}let Mr=gr(...dt),wr=$t;function Yr(Qr){let pi=$(Qr);if(!f(pi))return;let An=u(pi),mi=p.BASE.multiply(pi).toAffine(),Hr=a(mi.x);if(Hr===wi)return;let Bi=a(An*a(wr+Hr*rr));if(Bi===wi)return;let di=(mi.x===Hr?0:2)|Number(mi.y&xt),vs=Bi;return de&&b(Bi)&&(vs=y(Bi),di^=1),new I(Hr,vs,di)}return{seed:Mr,k2sig:Yr}}let he={lowS:e.lowS,prehash:!1},xe={lowS:e.lowS,prehash:!1};function Ae(le,we,Ie=he){let{seed:R,k2sig:Ke}=W(le,we,Ie),de=e;return B0(de.hash.outputLen,de.nByteLength,de.hmac)(R,Ke)}p.BASE._setWindowSize(8);function ot(le,we,Ie,R=xe){let Ke=le;we=Zt("msgHash",we),Ie=Zt("publicKey",Ie);let{lowS:de,prehash:et,format:kt}=R;if(_v(R),"strict"in R)throw new Error("options.strict was renamed to lowS");if(kt!==void 0&&kt!=="compact"&&kt!=="der")throw new Error("format must be compact or der");let $t=typeof Ke=="string"||qn(Ke),rr=!$t&&!kt&&typeof Ke=="object"&&Ke!==null&&typeof Ke.r=="bigint"&&typeof Ke.s=="bigint";if(!$t&&!rr)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let dt,Mr;try{if(rr&&(dt=new I(Ke.r,Ke.s)),$t){try{kt!=="compact"&&(dt=I.fromDER(Ke))}catch(di){if(!(di instanceof gn.Err))throw di}!dt&&kt!=="der"&&(dt=I.fromCompact(Ke))}Mr=p.fromHex(Ie)}catch{return!1}if(!dt||de&&dt.hasHighS())return!1;et&&(we=e.hash(we));let{r:wr,s:Yr}=dt,Qr=q(we),pi=u(Yr),An=a(Qr*pi),mi=a(wr*pi),Hr=p.BASE.multiplyAndAddUnsafe(Mr,An,mi)?.toAffine();return Hr?a(Hr.x)===wr:!1}return{CURVE:e,getPublicKey:M,getSharedSecret:G,sign:Ae,verify:ot,ProjectivePoint:p,Signature:I,utils:A}}function DE(r,e){let t=r.ORDER,i=wi;for(let y=t-xt;y%Qn===wi;y/=Qn)i+=xt;let s=i,o=Qn<<s-xt-xt,a=o*Qn,u=(t-xt)/a,p=(u-xt)/Qn,m=a-xt,h=o,f=r.pow(e,u),g=r.pow(e,(u+xt)/Qn),b=(y,k)=>{let I=f,A=r.pow(k,m),M=r.sqr(A);M=r.mul(M,k);let O=r.mul(y,M);O=r.pow(O,p),O=r.mul(O,A),A=r.mul(O,k),M=r.mul(O,y);let G=r.mul(M,A);O=r.pow(G,h);let $=r.eql(O,r.ONE);A=r.mul(M,g),O=r.mul(G,I),M=r.cmov(A,M,$),G=r.cmov(O,G,$);for(let q=s;q>xt;q--){let H=q-Qn;H=Qn<<H-xt;let K=r.pow(G,H),W=r.eql(K,r.ONE);A=r.mul(M,I),I=r.mul(I,I),K=r.mul(G,I),M=r.cmov(A,M,W),G=r.cmov(K,G,W)}return{isValid:$,value:M}};if(r.ORDER%xv===qd){let y=(r.ORDER-qd)/xv,k=r.sqrt(r.neg(e));b=(I,A)=>{let M=r.sqr(A),O=r.mul(I,A);M=r.mul(M,O);let G=r.pow(M,y);G=r.mul(G,O);let $=r.mul(G,k),q=r.mul(r.sqr(G),A),H=r.eql(q,I),K=r.cmov($,G,H);return{isValid:H,value:K}}}return b}function Iv(r,e){if(Wd(r),!r.isValid(e.A)||!r.isValid(e.B)||!r.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let t=DE(r,e.Z);if(!r.isOdd)throw new Error("Fp.isOdd is not implemented!");return i=>{let s,o,a,u,p,m,h,f;s=r.sqr(i),s=r.mul(s,e.Z),o=r.sqr(s),o=r.add(o,s),a=r.add(o,r.ONE),a=r.mul(a,e.B),u=r.cmov(e.Z,r.neg(o),!r.eql(o,r.ZERO)),u=r.mul(u,e.A),o=r.sqr(a),m=r.sqr(u),p=r.mul(m,e.A),o=r.add(o,p),o=r.mul(o,a),m=r.mul(m,u),p=r.mul(m,e.B),o=r.add(o,p),h=r.mul(s,a);let{isValid:g,value:b}=t(o,m);f=r.mul(s,i),f=r.mul(f,b),h=r.cmov(h,a,g),f=r.cmov(f,b,g);let y=r.isOdd(i)===r.isOdd(f);return f=r.cmov(r.neg(f),f,y),h=r.div(h,u),{x:h,y:f}}}var CE,ME,G0,gn,wi,xt,Qn,qd,xv,V0=J(()=>{"use strict";yv();zc();Vs();Vs();({bytesToNumberBE:CE,hexToBytes:ME}=D0),G0=class extends Error{constructor(e=""){super(e)}},gn={Err:G0,_tlv:{encode:(r,e)=>{let{Err:t}=gn;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");let i=e.length/2,s=js(i);if(s.length/2&128)throw new t("tlv.encode: long form length too big");let o=i>127?js(s.length/2|128):"";return js(r)+o+s+e},decode(r,e){let{Err:t}=gn,i=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[i++]!==r)throw new t("tlv.decode: wrong tlv");let s=e[i++],o=!!(s&128),a=0;if(!o)a=s;else{let p=s&127;if(!p)throw new t("tlv.decode(long): indefinite length not supported");if(p>4)throw new t("tlv.decode(long): byte length is too big");let m=e.subarray(i,i+p);if(m.length!==p)throw new t("tlv.decode: length bytes not complete");if(m[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(let h of m)a=a<<8|h;if(i+=p,a<128)throw new t("tlv.decode(long): not minimal encoding")}let u=e.subarray(i,i+a);if(u.length!==a)throw new t("tlv.decode: wrong value length");return{v:u,l:e.subarray(i+a)}}},_int:{encode(r){let{Err:e}=gn;if(r<wi)throw new e("integer: negative integers are not allowed");let t=js(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){let{Err:e}=gn;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return CE(r)}},toSig(r){let{Err:e,_int:t,_tlv:i}=gn,s=typeof r=="string"?ME(r):r;ii(s);let{v:o,l:a}=i.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");let{v:u,l:p}=i.decode(2,o),{v:m,l:h}=i.decode(2,p);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(u),s:t.decode(m)}},hexFromSig(r){let{_tlv:e,_int:t}=gn,i=e.encode(2,t.encode(r.r)),s=e.encode(2,t.encode(r.s)),o=i+s;return e.encode(48,o)}},wi=BigInt(0),xt=BigInt(1),Qn=BigInt(2),qd=BigInt(3),xv=BigInt(4)});function OE(r){return{hash:r,hmac:(e,...t)=>T0(r,e,xx(...t)),randomBytes:ad}}function Sv(r,e){let t=i=>vv({...r,...OE(i)});return{...t(e),create:t}}var kv=J(()=>{"use strict";ov();As();V0();});function Xn(r,e){if(jc(r),jc(e),r<0||r>=1<<8*e)throw new Error("invalid I2OSP input: "+r);let t=Array.from({length:e}).fill(0);for(let i=e-1;i>=0;i--)t[i]=r&255,r>>>=8;return new Uint8Array(t)}function PE(r,e){let t=new Uint8Array(r.length);for(let i=0;i<r.length;i++)t[i]=r[i]^e[i];return t}function jc(r){if(!Number.isSafeInteger(r))throw new Error("number expected")}function FE(r,e,t,i){ii(r),ii(e),jc(t),e.length>255&&(e=i(gr(Uc("H2C-OVERSIZE-DST-"),e)));let{outputLen:s,blockLen:o}=i,a=Math.ceil(t/s);if(t>65535||a>255)throw new Error("expand_message_xmd: invalid lenInBytes");let u=gr(e,Xn(e.length,1)),p=Xn(0,o),m=Xn(t,2),h=new Array(a),f=i(gr(p,r,m,Xn(0,1),u));h[0]=i(gr(f,Xn(1,1),u));for(let b=1;b<=a;b++){let y=[PE(f,h[b-1]),Xn(b+1,1),u];h[b]=i(gr(...y))}return gr(...h).slice(0,t)}function UE(r,e,t,i,s){if(ii(r),ii(e),jc(t),e.length>255){let o=Math.ceil(2*i/8);e=s.create({dkLen:o}).update(Uc("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:t}).update(r).update(Xn(t,2)).update(e).update(Xn(e.length,1)).digest()}function wv(r,e,t){$i(t,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:i,k:s,m:o,hash:a,expand:u,DST:p}=t;ii(r),jc(e);let m=typeof p=="string"?Uc(p):p,h=i.toString(2).length,f=Math.ceil((h+s)/8),g=e*o*f,b;if(u==="xmd")b=FE(r,m,g,a);else if(u==="xof")b=UE(r,m,g,s,a);else if(u==="_internal_pass")b=r;else throw new Error('expand must be "xmd" or "xof"');let y=new Array(e);for(let k=0;k<e;k++){let I=new Array(o);for(let A=0;A<o;A++){let M=f*(A+k*o),O=b.subarray(M,M+f);I[A]=jt(NE(O),i)}y[k]=I}return y}function Ev(r,e){let t=e.map(i=>Array.from(i).reverse());return(i,s)=>{let[o,a,u,p]=t.map(m=>m.reduce((h,f)=>r.add(r.mul(h,i),f)));return i=r.div(o,a),s=r.mul(s,r.div(u,p)),{x:i,y:s}}}function Lv(r,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(i,s){let o=wv(i,2,{...t,DST:t.DST,...s}),a=r.fromAffine(e(o[0])),u=r.fromAffine(e(o[1])),p=a.add(u).clearCofactor();return p.assertValidity(),p},encodeToCurve(i,s){let o=wv(i,1,{...t,DST:t.encodeDST,...s}),a=r.fromAffine(e(o[0])).clearCofactor();return a.assertValidity(),a},mapToCurve(i){if(!Array.isArray(i))throw new Error("mapToCurve: expected array of bigints");for(let o of i)if(typeof o!="bigint")throw new Error("mapToCurve: expected array of bigints");let s=r.fromAffine(e(i)).clearCofactor();return s.assertValidity(),s}}}var NE,Tv=J(()=>{"use strict";zc();Vs();NE=Or});var Pv={};jy(Pv,{encodeToCurve:()=>$E,hashToCurve:()=>KE,schnorr:()=>GE,secp256k1:()=>bn});function Mv(r){let e=Wc,t=BigInt(3),i=BigInt(6),s=BigInt(11),o=BigInt(22),a=BigInt(23),u=BigInt(44),p=BigInt(88),m=r*r*r%e,h=m*m*r%e,f=Vr(h,t,e)*h%e,g=Vr(f,t,e)*h%e,b=Vr(g,Qd,e)*m%e,y=Vr(b,s,e)*b%e,k=Vr(y,o,e)*y%e,I=Vr(k,u,e)*k%e,A=Vr(I,p,e)*I%e,M=Vr(A,u,e)*k%e,O=Vr(M,t,e)*h%e,G=Vr(O,a,e)*y%e,$=Vr(G,i,e)*m%e,q=Vr($,Qd,e);if(!Jn.eql(Jn.sqr(q),r))throw new Error("Cannot find square root");return q}function Xd(r,...e){let t=Cv[r];if(t===void 0){let i=Us(Uint8Array.from(r,s=>s.charCodeAt(0)));t=gr(i,i),Cv[r]=t}return Us(gr(t,...e))}function $0(r){let e=bn.utils.normPrivateKeyToScalar(r),t=Y0.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:Vc(-e),bytes:q0(t)}}function Bv(r){Ki("x",r,Gc,Wc);let e=W0(r*r),t=W0(e*r+BigInt(7)),i=Mv(t);i%Qd!==Rv&&(i=W0(-i));let s=new Y0(r,i,Gc);return s.assertValidity(),s}function Dv(...r){return Vc(ea(Xd("BIP0340/challenge",...r)))}function zE(r){return $0(r).bytes}function jE(r,e,t=ad(32)){let i=Zt("message",r),{bytes:s,scalar:o}=$0(e),a=Zt("auxRand",t,32),u=K0(o^ea(Xd("BIP0340/aux",a))),p=Xd("BIP0340/nonce",u,s,i),m=Vc(ea(p));if(m===Rv)throw new Error("sign failed: k is zero");let{bytes:h,scalar:f}=$0(m),g=Dv(h,s,i),b=new Uint8Array(64);if(b.set(h,0),b.set(K0(Vc(f+g*o)),32),!Ov(b,i,s))throw new Error("sign: Invalid signature produced");return b}function Ov(r,e,t){let i=Zt("signature",r,64),s=Zt("message",e),o=Zt("publicKey",t,32);try{let a=Bv(ea(o)),u=ea(i.subarray(0,32));if(!Yn(u,Gc,Wc))return!1;let p=ea(i.subarray(32,64));if(!Yn(p,Gc,Yd))return!1;let m=Dv(K0(u),q0(a),s),h=HE(a,p,Vc(-m));return!(!h||!h.hasEvenY()||h.toAffine().x!==u)}catch{return!1}}var Wc,Yd,Gc,Qd,Av,Jn,bn,Rv,Cv,q0,K0,W0,Vc,Y0,HE,ea,GE,VE,WE,Nv,KE,$E,Jd=J(()=>{"use strict";L0();As();kv();Tv();zc();Vs();V0();Wc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Yd=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Gc=BigInt(1),Qd=BigInt(2),Av=(r,e)=>(r+e/Qd)/e;Jn=Kd(Wc,void 0,void 0,{sqrt:Mv}),bn=Sv({a:BigInt(0),b:BigInt(7),Fp:Jn,n:Yd,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{let e=Yd,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-Gc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,a=BigInt("0x100000000000000000000000000000000"),u=Av(o*r,e),p=Av(-i*r,e),m=jt(r-u*t-p*s,e),h=jt(-u*i-p*o,e),f=m>a,g=h>a;if(f&&(m=e-m),g&&(h=e-h),m>a||h>a)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:f,k1:m,k2neg:g,k2:h}}}},Us),Rv=BigInt(0),Cv={};q0=r=>r.toRawBytes(!0).slice(1),K0=r=>ki(r,32),W0=r=>jt(r,Wc),Vc=r=>jt(r,Yd),Y0=bn.ProjectivePoint,HE=(r,e,t)=>Y0.BASE.multiplyAndAddUnsafe(r,e,t);ea=Or;GE=(()=>({getPublicKey:zE,sign:jE,verify:Ov,utils:{randomPrivateKey:bn.utils.randomPrivateKey,lift_x:Bv,pointToBytes:q0,numberToBytesBE:ki,bytesToNumberBE:Or,taggedHash:Xd,mod:jt}}))(),VE=(()=>Ev(Jn,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(r=>r.map(e=>BigInt(e)))))(),WE=(()=>Iv(Jn,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Jn.create(BigInt("-11"))}))(),Nv=(()=>Lv(bn.ProjectivePoint,r=>{let{x:e,y:t}=WE(Jn.create(r[0]));return VE(e,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Jn.ORDER,m:1,k:128,expand:"xmd",hash:Us}))(),KE=(()=>Nv.hashToCurve)(),$E=(()=>Nv.encodeToCurve)()});var yn,ni,ta,ra,ia,na,sa,oa,aa,la,qi,si,Zn=J(()=>{"use strict";Po();Ze();yn=class extends F{constructor({cause:e,message:t}={}){let i=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${i?`with reason: ${i}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}};Object.defineProperty(yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(yn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});ni=class extends F{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Jt(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}};Object.defineProperty(ni,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});ta=class extends F{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Jt(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}};Object.defineProperty(ta,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});ra=class extends F{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}};Object.defineProperty(ra,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});ia=class extends F{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}};Object.defineProperty(ia,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});na=class extends F{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}};Object.defineProperty(na,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});sa=class extends F{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}};Object.defineProperty(sa,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});oa=class extends F{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}};Object.defineProperty(oa,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});aa=class extends F{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}};Object.defineProperty(aa,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});la=class extends F{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}};Object.defineProperty(la,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});qi=class extends F{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:i}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${Jt(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${i?` = ${Jt(i)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}};Object.defineProperty(qi,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});si=class extends F{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}});function es(r,e){let t=(r.details||"").toLowerCase(),i=r instanceof F?r.walk(s=>s?.code===yn.code):r;return i instanceof F?new yn({cause:r,message:i.details}):yn.nodeMessage.test(t)?new yn({cause:r,message:r.details}):ni.nodeMessage.test(t)?new ni({cause:r,maxFeePerGas:e?.maxFeePerGas}):ta.nodeMessage.test(t)?new ta({cause:r,maxFeePerGas:e?.maxFeePerGas}):ra.nodeMessage.test(t)?new ra({cause:r,nonce:e?.nonce}):ia.nodeMessage.test(t)?new ia({cause:r,nonce:e?.nonce}):na.nodeMessage.test(t)?new na({cause:r,nonce:e?.nonce}):sa.nodeMessage.test(t)?new sa({cause:r}):oa.nodeMessage.test(t)?new oa({cause:r,gas:e?.gas}):aa.nodeMessage.test(t)?new aa({cause:r,gas:e?.gas}):la.nodeMessage.test(t)?new la({cause:r}):qi.nodeMessage.test(t)?new qi({cause:r,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new si({cause:r})}var Kc=J(()=>{"use strict";Ze();Zn()});function ts(r,{format:e}){if(!e)return{};let t={};function i(o){let a=Object.keys(o);for(let u of a)u in r&&(t[u]=r[u]),o[u]&&typeof o[u]=="object"&&!Array.isArray(o[u])&&i(o[u])}let s=e(r||{});return i(s),t}var $c=J(()=>{"use strict"});function ca(r,e){return({exclude:t,format:i})=>({exclude:t,format:s=>{let o=e(s);if(t)for(let a of t)delete o[a];return{...o,...i(s)}},type:r})}var rh=J(()=>{"use strict"});function oi(r){let e={};return typeof r.authorizationList<"u"&&(e.authorizationList=XE(r.authorizationList)),typeof r.accessList<"u"&&(e.accessList=r.accessList),typeof r.blobVersionedHashes<"u"&&(e.blobVersionedHashes=r.blobVersionedHashes),typeof r.blobs<"u"&&(typeof r.blobs[0]!="string"?e.blobs=r.blobs.map(t=>ct(t)):e.blobs=r.blobs),typeof r.data<"u"&&(e.data=r.data),typeof r.from<"u"&&(e.from=r.from),typeof r.gas<"u"&&(e.gas=be(r.gas)),typeof r.gasPrice<"u"&&(e.gasPrice=be(r.gasPrice)),typeof r.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=be(r.maxFeePerBlobGas)),typeof r.maxFeePerGas<"u"&&(e.maxFeePerGas=be(r.maxFeePerGas)),typeof r.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=be(r.maxPriorityFeePerGas)),typeof r.nonce<"u"&&(e.nonce=be(r.nonce)),typeof r.to<"u"&&(e.to=r.to),typeof r.type<"u"&&(e.type=QE[r.type]),typeof r.value<"u"&&(e.value=be(r.value)),e}function XE(r){return r.map(e=>({address:e.address,r:e.r?be(BigInt(e.r)):e.r,s:e.s?be(BigInt(e.s)):e.s,chainId:be(e.chainId),nonce:be(e.nonce),...typeof e.yParity<"u"?{yParity:be(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:be(e.v)}:{}}))}var QE,Ks=J(()=>{"use strict";He();QE={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"}});function Vv(r){if(!(!r||r.length===0))return r.reduce((e,{slot:t,value:i})=>{if(t.length!==66)throw new Tc({size:t.length,targetSize:66,type:"hex"});if(i.length!==66)throw new Tc({size:i.length,targetSize:66,type:"hex"});return e[t]=i,e},{})}function JE(r){let{balance:e,nonce:t,state:i,stateDiff:s,code:o}=r,a={};if(o!==void 0&&(a.code=o),e!==void 0&&(a.balance=be(e)),t!==void 0&&(a.nonce=be(t)),i!==void 0&&(a.state=Vv(i)),s!==void 0){if(a.state)throw new wd;a.stateDiff=Vv(s)}return a}function ua(r){if(!r)return;let e={};for(let{address:t,...i}of r){if(!_t(t,{strict:!1}))throw new Et({address:t});if(e[t])throw new kd({address:t});e[t]=JE(i)}return e}var ih=J(()=>{"use strict";Ui();Xm();w0();Ii();He()});var E6,L6,T6,A6,C6,M6,R6,B6,D6,O6,N6,P6,F6,U6,H6,z6,j6,G6,V6,W6,K6,$6,q6,Y6,Q6,X6,J6,Z6,eP,tP,rP,iP,nP,sP,oP,aP,lP,cP,uP,pP,mP,dP,hP,fP,gP,bP,yP,_P,xP,vP,IP,SP,kP,wP,EP,LP,TP,AP,CP,MP,RP,BP,DP,OP,NP,PP,FP,UP,HP,zP,jP,GP,VP,WP,KP,$P,qP,YP,QP,XP,JP,ZP,eF,tF,rF,iF,nF,sF,oF,aF,lF,cF,uF,pF,mF,pa,Q0=J(()=>{"use strict";E6=2n**(8n-1n)-1n,L6=2n**(16n-1n)-1n,T6=2n**(24n-1n)-1n,A6=2n**(32n-1n)-1n,C6=2n**(40n-1n)-1n,M6=2n**(48n-1n)-1n,R6=2n**(56n-1n)-1n,B6=2n**(64n-1n)-1n,D6=2n**(72n-1n)-1n,O6=2n**(80n-1n)-1n,N6=2n**(88n-1n)-1n,P6=2n**(96n-1n)-1n,F6=2n**(104n-1n)-1n,U6=2n**(112n-1n)-1n,H6=2n**(120n-1n)-1n,z6=2n**(128n-1n)-1n,j6=2n**(136n-1n)-1n,G6=2n**(144n-1n)-1n,V6=2n**(152n-1n)-1n,W6=2n**(160n-1n)-1n,K6=2n**(168n-1n)-1n,$6=2n**(176n-1n)-1n,q6=2n**(184n-1n)-1n,Y6=2n**(192n-1n)-1n,Q6=2n**(200n-1n)-1n,X6=2n**(208n-1n)-1n,J6=2n**(216n-1n)-1n,Z6=2n**(224n-1n)-1n,eP=2n**(232n-1n)-1n,tP=2n**(240n-1n)-1n,rP=2n**(248n-1n)-1n,iP=2n**(256n-1n)-1n,nP=-(2n**(8n-1n)),sP=-(2n**(16n-1n)),oP=-(2n**(24n-1n)),aP=-(2n**(32n-1n)),lP=-(2n**(40n-1n)),cP=-(2n**(48n-1n)),uP=-(2n**(56n-1n)),pP=-(2n**(64n-1n)),mP=-(2n**(72n-1n)),dP=-(2n**(80n-1n)),hP=-(2n**(88n-1n)),fP=-(2n**(96n-1n)),gP=-(2n**(104n-1n)),bP=-(2n**(112n-1n)),yP=-(2n**(120n-1n)),_P=-(2n**(128n-1n)),xP=-(2n**(136n-1n)),vP=-(2n**(144n-1n)),IP=-(2n**(152n-1n)),SP=-(2n**(160n-1n)),kP=-(2n**(168n-1n)),wP=-(2n**(176n-1n)),EP=-(2n**(184n-1n)),LP=-(2n**(192n-1n)),TP=-(2n**(200n-1n)),AP=-(2n**(208n-1n)),CP=-(2n**(216n-1n)),MP=-(2n**(224n-1n)),RP=-(2n**(232n-1n)),BP=-(2n**(240n-1n)),DP=-(2n**(248n-1n)),OP=-(2n**(256n-1n)),NP=2n**8n-1n,PP=2n**16n-1n,FP=2n**24n-1n,UP=2n**32n-1n,HP=2n**40n-1n,zP=2n**48n-1n,jP=2n**56n-1n,GP=2n**64n-1n,VP=2n**72n-1n,WP=2n**80n-1n,KP=2n**88n-1n,$P=2n**96n-1n,qP=2n**104n-1n,YP=2n**112n-1n,QP=2n**120n-1n,XP=2n**128n-1n,JP=2n**136n-1n,ZP=2n**144n-1n,eF=2n**152n-1n,tF=2n**160n-1n,rF=2n**168n-1n,iF=2n**176n-1n,nF=2n**184n-1n,sF=2n**192n-1n,oF=2n**200n-1n,aF=2n**208n-1n,lF=2n**216n-1n,cF=2n**224n-1n,uF=2n**232n-1n,pF=2n**240n-1n,mF=2n**248n-1n,pa=2n**256n-1n});function Nr(r){let{account:e,gasPrice:t,maxFeePerGas:i,maxPriorityFeePerGas:s,to:o}=r,a=e?it(e):void 0;if(a&&!_t(a.address))throw new Et({address:a.address});if(o&&!_t(o))throw new Et({address:o});if(typeof t<"u"&&(typeof i<"u"||typeof s<"u"))throw new Ed;if(i&&i>pa)throw new ni({maxFeePerGas:i});if(s&&i&&s>i)throw new qi({maxFeePerGas:i,maxPriorityFeePerGas:s})}var rs=J(()=>{"use strict";Xt();Q0();Ui();Zn();Si();Ii()});function Yi(r,e){if(!_t(r,{strict:!1}))throw new Et({address:r});if(!_t(e,{strict:!1}))throw new Et({address:e});return r.toLowerCase()===e.toLowerCase()}var _a=J(()=>{"use strict";Ui();Ii()});function Pr(r){let{abi:e,args:t,functionName:i,data:s}=r,o=e[0];if(i){let u=zi({abi:e,args:t,name:i});if(!u)throw new Rn(i,{docsPath:e_});o=u}if(o.type!=="function")throw new Rn(void 0,{docsPath:e_});if(!o.outputs)throw new Vm(o.name,{docsPath:e_});let a=Rs(o.outputs,s);if(a&&a.length>1)return a;if(a&&a.length===1)return a[0]}var e_,ss=J(()=>{"use strict";Yt();xd();Ro();e_="/docs/contract/decodeFunctionResult"});var Yc,tI,fh,rI,t_,r_,i_,qs=J(()=>{"use strict";Yc=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],tI=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],fh=[...tI,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],rI=[...tI,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],t_=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],r_=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],i_=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}]});var iI,nI=J(()=>{"use strict";iI="0x82ad56cb"});var gh,sI,oI,bh=J(()=>{"use strict";gh="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",sI="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",oI="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"});var Ys,yh,_h,Qc,Qs,Xc=J(()=>{"use strict";Ze();Ys=class extends F{constructor({blockNumber:e,chain:t,contract:i}){super(`Chain "${t.name}" does not support contract "${i.name}".`,{metaMessages:["This could be due to any of the following:",...e&&i.blockCreated&&i.blockCreated>e?[`- The contract "${i.name}" was not deployed until block ${i.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${i.name}" configured.`]],name:"ChainDoesNotSupportContract"})}},yh=class extends F{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}},_h=class extends F{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}},Qc=class extends F{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}},Qs=class extends F{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}});function Xs(r){let{abi:e,args:t,bytecode:i}=r;if(!t||t.length===0)return i;let s=e.find(a=>"type"in a&&a.type==="constructor");if(!s)throw new Um({docsPath:n_});if(!("inputs"in s))throw new kc({docsPath:n_});if(!s.inputs||s.inputs.length===0)throw new kc({docsPath:n_});let o=jr(s.inputs,t);return hr([i,o])}var n_,xh=J(()=>{"use strict";Yt();ei();Un();n_="/docs/contract/encodeDeployData"});function li({blockNumber:r,chain:e,contract:t}){let i=e?.contracts?.[t];if(!i)throw new Ys({chain:e,contract:{name:t}});if(r&&i.blockCreated&&i.blockCreated>r)throw new Ys({blockNumber:r,chain:e,contract:{name:t,blockCreated:i.blockCreated}});return i.address}var Js=J(()=>{"use strict";Xc()});function vh(r,{docsPath:e,...t}){let i=(()=>{let s=es(r,t);return s instanceof si?r:s})();return new Ho(i,{docsPath:e,...t})}var s_=J(()=>{"use strict";jn();Zn();Kc()});function Ih(){let r=()=>{},e=()=>{};return{promise:new Promise((i,s)=>{r=i,e=s}),resolve:r,reject:e}}var o_=J(()=>{"use strict"});function Sh({fn:r,id:e,shouldSplitBatch:t,wait:i=0,sort:s}){let o=async()=>{let h=p();a();let f=h.map(({args:g})=>g);f.length!==0&&r(f).then(g=>{s&&Array.isArray(g)&&g.sort(s);for(let b=0;b<h.length;b++){let{resolve:y}=h[b];y?.([g[b],g])}}).catch(g=>{for(let b=0;b<h.length;b++){let{reject:y}=h[b];y?.(g)}})},a=()=>a_.delete(e),u=()=>p().map(({args:h})=>h),p=()=>a_.get(e)||[],m=h=>a_.set(e,[...p(),h]);return{flush:a,async schedule(h){let{promise:f,resolve:g,reject:b}=Ih();return t?.([...u(),h])&&o(),p().length>0?(m({args:h,resolve:g,reject:b}),f):(m({args:h,resolve:g,reject:b}),setTimeout(o,i),f)}}}var a_,l_=J(()=>{"use strict";o_();a_=new Map});var kh,wh,Eh,aI=J(()=>{"use strict";Tr();Ze();Rd();kh=class extends F{constructor({callbackSelector:e,cause:t,data:i,extraData:s,sender:o,urls:a}){super(t.shortMessage||"An error occurred while fetching for an offchain result.",{cause:t,metaMessages:[...t.metaMessages||[],t.metaMessages?.length?"":[],"Offchain Gateway Call:",a&&["  Gateway URL(s):",...a.map(u=>`    ${Ds(u)}`)],`  Sender: ${o}`,`  Data: ${i}`,`  Callback selector: ${e}`,`  Extra data: ${s}`].flat(),name:"OffchainLookupError"})}},wh=class extends F{constructor({result:e,url:t}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${Ds(t)}`,`Response: ${ut(e)}`],name:"OffchainLookupResponseMalformedError"})}},Eh=class extends F{constructor({sender:e,to:t}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${t}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}});var uI={};jy(uI,{ccipRequest:()=>cI,offchainLookup:()=>sL,offchainLookupAbiItem:()=>lI,offchainLookupSignature:()=>nL});async function sL(r,{blockNumber:e,blockTag:t,data:i,to:s}){let{args:o}=vd({data:i,abi:[lI]}),[a,u,p,m,h]=o,{ccipRead:f}=r,g=f&&typeof f?.request=="function"?f.request:cI;try{if(!Yi(s,a))throw new Eh({sender:a,to:s});let b=await g({data:p,sender:a,urls:u}),{data:y}=await Qi(r,{blockNumber:e,blockTag:t,data:Lr([m,jr([{type:"bytes"},{type:"bytes"}],[b,h])]),to:s});return y}catch(b){throw new kh({callbackSelector:m,cause:b,data:i,extraData:h,sender:a,urls:u})}}async function cI({data:r,sender:e,urls:t}){let i=new Error("An unknown error occurred.");for(let s=0;s<t.length;s++){let o=t[s],a=o.includes("{data}")?"GET":"POST",u=a==="POST"?{data:r,sender:e}:void 0,p=a==="POST"?{"Content-Type":"application/json"}:{};try{let m=await fetch(o.replace("{sender}",e.toLowerCase()).replace("{data}",r),{body:JSON.stringify(u),headers:p,method:a}),h;if(m.headers.get("Content-Type")?.startsWith("application/json")?h=(await m.json()).data:h=await m.text(),!m.ok){i=new ri({body:u,details:h?.error?ut(h.error):m.statusText,headers:m.headers,status:m.status,url:o});continue}if(!zt(h)){i=new wh({result:h,url:o});continue}return h}catch(m){i=new ri({body:u,details:m.message,url:o})}}throw i}var nL,lI,pI=J(()=>{"use strict";Sa();aI();Ns();I0();Un();_a();ei();fi();Tr();nL="0x556f1830",lI={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]}});async function Qi(r,e){let{account:t=r.account,batch:i=!!r.batch?.multicall,blockNumber:s,blockTag:o="latest",accessList:a,blobs:u,code:p,data:m,factory:h,factoryData:f,gas:g,gasPrice:b,maxFeePerBlobGas:y,maxFeePerGas:k,maxPriorityFeePerGas:I,nonce:A,to:M,value:O,stateOverride:G,...$}=e,q=t?it(t):void 0;if(p&&(h||f))throw new F("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(p&&M)throw new F("Cannot provide both `code` & `to` as parameters.");let H=p&&m,K=h&&f&&M&&m,W=H||K,he=(()=>H?lL({code:p,data:m}):K?cL({data:m,factory:h,factoryData:f,to:M}):m)();try{Nr(e);let Ae=(s?be(s):void 0)||o,ot=ua(G),le=r.chain?.formatters?.transactionRequest?.format,Ie=(le||oi)({...ts($,{format:le}),from:q?.address,accessList:a,blobs:u,data:he,gas:g,gasPrice:b,maxFeePerBlobGas:y,maxFeePerGas:k,maxPriorityFeePerGas:I,nonce:A,to:W?void 0:M,value:O});if(i&&oL({request:Ie})&&!ot)try{return await aL(r,{...Ie,blockNumber:s,blockTag:o})}catch(Ke){if(!(Ke instanceof Qc)&&!(Ke instanceof Ys))throw Ke}let R=await r.request({method:"eth_call",params:ot?[Ie,Ae,ot]:[Ie,Ae]});return R==="0x"?{data:void 0}:{data:R}}catch(xe){let Ae=uL(xe),{offchainLookup:ot,offchainLookupSignature:le}=await Promise.resolve().then(()=>(pI(),uI));if(r.ccipRead!==!1&&Ae?.slice(0,10)===le&&M)return{data:await ot(r,{data:Ae,to:M})};throw W&&Ae?.slice(0,10)==="0x101bb98d"?new Od({factory:h}):vh(xe,{...e,account:q,chain:r.chain})}}function oL({request:r}){let{data:e,to:t,...i}=r;return!(!e||e.startsWith(iI)||!t||Object.values(i).filter(s=>typeof s<"u").length>0)}async function aL(r,e){let{batchSize:t=1024,wait:i=0}=typeof r.batch?.multicall=="object"?r.batch.multicall:{},{blockNumber:s,blockTag:o="latest",data:a,multicallAddress:u,to:p}=e,m=u;if(!m){if(!r.chain)throw new Qc;m=li({blockNumber:s,chain:r.chain,contract:"multicall3"})}let f=(s?be(s):void 0)||o,{schedule:g}=Sh({id:`${r.uid}.${f}`,wait:i,shouldSplitBatch(k){return k.reduce((A,{data:M})=>A+(M.length-2),0)>t*2},fn:async k=>{let I=k.map(O=>({allowFailure:!0,callData:O.data,target:O.to})),A=Mt({abi:Yc,args:[I],functionName:"aggregate3"}),M=await r.request({method:"eth_call",params:[{data:A,to:m},f]});return Pr({abi:Yc,args:[I],functionName:"aggregate3",data:M||"0x"})}}),[{returnData:b,success:y}]=await g({data:a,to:p});if(!y)throw new Vi({data:b});return b==="0x"?{data:void 0}:{data:b}}function lL(r){let{code:e,data:t}=r;return Xs({abi:Om(["constructor(bytes, bytes)"]),bytecode:gh,args:[e,t]})}function cL(r){let{data:e,factory:t,factoryData:i,to:s}=r;return Xs({abi:Om(["constructor(address, bytes, address, bytes)"]),bytecode:sI,args:[s,e,t,i]})}function uL(r){if(!(r instanceof F))return;let e=r.walk();return typeof e?.data=="object"?e.data?.data:e.data}var Sa=J(()=>{"use strict";Pm();Xt();qs();nI();bh();Ze();Xc();jn();ss();xh();ti();Js();He();s_();$c();Ks();l_();ih();rs()});var zk=E1(ar=>{"use strict";var N_=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,e,t){r!=Array.prototype&&r!=Object.prototype&&(r[e]=t.value)},io=typeof window<"u"&&window===ar?ar:typeof global<"u"&&global!=null?global:ar;function xT(r,e){if(e){var t=io;r=r.split(".");for(var i=0;i<r.length-1;i++){var s=r[i];s in t||(t[s]={}),t=t[s]}r=r[r.length-1],i=t[r],e=e(i),e!=i&&e!=null&&N_(t,r,{configurable:!0,writable:!0,value:e})}}function vT(r){var e=0;return function(){return e<r.length?{done:!1,value:r[e++]}:{done:!0}}}function mk(){mk=function(){},io.Symbol||(io.Symbol=IT)}function dk(r,e){this.a=r,N_(this,"description",{configurable:!0,writable:!0,value:e})}dk.prototype.toString=function(){return this.a};var IT=function(){function r(t){if(this instanceof r)throw new TypeError("Symbol is not a constructor");return new dk("jscomp_symbol_"+(t||"")+"_"+e++,t)}var e=0;return r}();function P_(){mk();var r=io.Symbol.iterator;r||(r=io.Symbol.iterator=io.Symbol("Symbol.iterator")),typeof Array.prototype[r]!="function"&&N_(Array.prototype,r,{configurable:!0,writable:!0,value:function(){return ST(vT(this))}}),P_=function(){}}function ST(r){return P_(),r={next:r},r[io.Symbol.iterator]=function(){return this},r}function kT(r,e){P_(),r instanceof String&&(r+="");var t=0,i={next:function(){if(t<r.length){var s=t++;return{value:e(s,r[s]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}xT("Array.prototype.entries",function(r){return r||function(){return kT(this,function(e,t){return[e,t]})}});var wT=ar||self;function Le(r,e,t){r=r.split("."),t=t||wT,r[0]in t||typeof t.execScript>"u"||t.execScript("var "+r[0]);for(var i;r.length&&(i=r.shift());)r.length||e===void 0?t[i]&&t[i]!==Object.prototype[i]?t=t[i]:t=t[i]={}:t[i]=e}function vn(r){var e=typeof r;if(e=="object")if(r){if(r instanceof Array)return"array";if(r instanceof Object)return e;var t=Object.prototype.toString.call(r);if(t=="[object Window]")return"object";if(t=="[object Array]"||typeof r.length=="number"&&typeof r.splice<"u"&&typeof r.propertyIsEnumerable<"u"&&!r.propertyIsEnumerable("splice"))return"array";if(t=="[object Function]"||typeof r.call<"u"&&typeof r.propertyIsEnumerable<"u"&&!r.propertyIsEnumerable("call"))return"function"}else return"null";else if(e=="function"&&typeof r.call>"u")return"object";return e}function ak(r){var e=typeof r;return e=="object"&&r!=null||e=="function"}function ET(r,e,t){Le(r,e,t)}function LT(r,e){function t(){}t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}var lk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function TT(r,e){for(var t,i,s=1;s<arguments.length;s++){i=arguments[s];for(t in i)r[t]=i[t];for(var o=0;o<lk.length;o++)t=lk[o],Object.prototype.hasOwnProperty.call(i,t)&&(r[t]=i[t])}}var AT=Array.prototype.forEach?function(r,e){Array.prototype.forEach.call(r,e,void 0)}:function(r,e){for(var t=r.length,i=typeof r=="string"?r.split(""):r,s=0;s<t;s++)s in i&&e.call(void 0,i[s],s,r)},bu=Array.prototype.map?function(r,e){return Array.prototype.map.call(r,e,void 0)}:function(r,e){for(var t=r.length,i=Array(t),s=typeof r=="string"?r.split(""):r,o=0;o<t;o++)o in s&&(i[o]=e.call(void 0,s[o],o,r));return i};function CT(r,e,t){return 2>=arguments.length?Array.prototype.slice.call(r,e):Array.prototype.slice.call(r,e,t)}function Of(r,e,t,i){var s="Assertion failed";if(t){s+=": "+t;var o=i}else r&&(s+=": "+r,o=e);throw Error(s,o||[])}function V(r,e,t){for(var i=[],s=2;s<arguments.length;++s)i[s-2]=arguments[s];return r||Of("",null,e,i),r}function MT(r,e,t){for(var i=[],s=2;s<arguments.length;++s)i[s-2]=arguments[s];typeof r!="string"&&Of("Expected string but got %s: %s.",[vn(r),r],e,i)}function RT(r,e,t){for(var i=[],s=2;s<arguments.length;++s)i[s-2]=arguments[s];Array.isArray(r)||Of("Expected array but got %s: %s.",[vn(r),r],e,i)}function tr(r,e){for(var t=[],i=1;i<arguments.length;++i)t[i-1]=arguments[i];throw Error("Failure"+(r?": "+r:""),t)}function Ai(r,e,t,i){for(var s=[],o=3;o<arguments.length;++o)s[o-3]=arguments[o];r instanceof e||Of("Expected instanceof %s but got %s.",[ck(e),ck(r)],t,s)}function ck(r){return r instanceof Function?r.displayName||r.name||"unknown type name":r instanceof Object?r.constructor.displayName||r.constructor.name||Object.prototype.toString.call(r):r===null?"null":typeof r}function Ge(r,e){if(this.c=r,this.b=e,this.a={},this.arrClean=!0,0<this.c.length){for(r=0;r<this.c.length;r++){e=this.c[r];var t=e[0];this.a[t.toString()]=new hk(t,e[1])}this.arrClean=!0}}Le("jspb.Map",Ge,void 0);Ge.prototype.g=function(){if(this.arrClean){if(this.b){var r=this.a,e;for(e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var t=r[e].a;t&&t.g()}}}else{for(this.c.length=0,r=ps(this),r.sort(),e=0;e<r.length;e++){var i=this.a[r[e]];(t=i.a)&&t.g(),this.c.push([i.key,i.value])}this.arrClean=!0}return this.c};Ge.prototype.toArray=Ge.prototype.g;Ge.prototype.Mc=function(r,e){for(var t=this.g(),i=[],s=0;s<t.length;s++){var o=this.a[t[s][0].toString()];za(this,o);var a=o.a;a?(V(e),i.push([o.key,e(r,a)])):i.push([o.key,o.value])}return i};Ge.prototype.toObject=Ge.prototype.Mc;Ge.fromObject=function(r,e,t){e=new Ge([],e);for(var i=0;i<r.length;i++){var s=r[i][0],o=t(r[i][1]);e.set(s,o)}return e};function yu(r){this.a=0,this.b=r}yu.prototype.next=function(){return this.a<this.b.length?{done:!1,value:this.b[this.a++]}:{done:!0,value:void 0}};typeof Symbol<"u"&&(yu.prototype[Symbol.iterator]=function(){return this});Ge.prototype.Jb=function(){return ps(this).length};Ge.prototype.getLength=Ge.prototype.Jb;Ge.prototype.clear=function(){this.a={},this.arrClean=!1};Ge.prototype.clear=Ge.prototype.clear;Ge.prototype.Cb=function(r){r=r.toString();var e=this.a.hasOwnProperty(r);return delete this.a[r],this.arrClean=!1,e};Ge.prototype.del=Ge.prototype.Cb;Ge.prototype.Eb=function(){var r=[],e=ps(this);e.sort();for(var t=0;t<e.length;t++){var i=this.a[e[t]];r.push([i.key,i.value])}return r};Ge.prototype.getEntryList=Ge.prototype.Eb;Ge.prototype.entries=function(){var r=[],e=ps(this);e.sort();for(var t=0;t<e.length;t++){var i=this.a[e[t]];r.push([i.key,za(this,i)])}return new yu(r)};Ge.prototype.entries=Ge.prototype.entries;Ge.prototype.keys=function(){var r=[],e=ps(this);e.sort();for(var t=0;t<e.length;t++)r.push(this.a[e[t]].key);return new yu(r)};Ge.prototype.keys=Ge.prototype.keys;Ge.prototype.values=function(){var r=[],e=ps(this);e.sort();for(var t=0;t<e.length;t++)r.push(za(this,this.a[e[t]]));return new yu(r)};Ge.prototype.values=Ge.prototype.values;Ge.prototype.forEach=function(r,e){var t=ps(this);t.sort();for(var i=0;i<t.length;i++){var s=this.a[t[i]];r.call(e,za(this,s),s.key,this)}};Ge.prototype.forEach=Ge.prototype.forEach;Ge.prototype.set=function(r,e){var t=new hk(r);return this.b?(t.a=e,t.value=e.g()):t.value=e,this.a[r.toString()]=t,this.arrClean=!1,this};Ge.prototype.set=Ge.prototype.set;function za(r,e){return r.b?(e.a||(e.a=new r.b(e.value)),e.a):e.value}Ge.prototype.get=function(r){if(r=this.a[r.toString()])return za(this,r)};Ge.prototype.get=Ge.prototype.get;Ge.prototype.has=function(r){return r.toString()in this.a};Ge.prototype.has=Ge.prototype.has;Ge.prototype.Jc=function(r,e,t,i,s){var o=ps(this);o.sort();for(var a=0;a<o.length;a++){var u=this.a[o[a]];e.Va(r),t.call(e,1,u.key),this.b?i.call(e,2,za(this,u),s):i.call(e,2,u.value),e.Ya()}};Ge.prototype.serializeBinary=Ge.prototype.Jc;Ge.deserializeBinary=function(r,e,t,i,s,o,a){for(;e.oa()&&!e.bb();){var u=e.c;u==1?o=t.call(e):u==2&&(r.b?(V(s),a||(a=new r.b),i.call(e,a,s)):a=i.call(e))}V(o!=null),V(a!=null),r.set(o,a)};function ps(r){r=r.a;var e=[],t;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e}function hk(r,e){this.key=r,this.value=e,this.a=void 0}function fk(r){if(8192>=r.length)return String.fromCharCode.apply(null,r);for(var e="",t=0;t<r.length;t+=8192)e+=String.fromCharCode.apply(null,CT(r,t,t+8192));return e}var R_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},Df={"'":"\\'"},gk={},du=null;function bk(r,e){e===void 0&&(e=0),_k(),e=gk[e];for(var t=[],i=0;i<r.length;i+=3){var s=r[i],o=i+1<r.length,a=o?r[i+1]:0,u=i+2<r.length,p=u?r[i+2]:0,m=s>>2;s=(s&3)<<4|a>>4,a=(a&15)<<2|p>>6,p&=63,u||(p=64,o||(a=64)),t.push(e[m],e[s],e[a]||"",e[p]||"")}return t.join("")}function yk(r){var e=r.length,t=3*e/4;t%3?t=Math.floor(t):"=.".indexOf(r[e-1])!=-1&&(t="=.".indexOf(r[e-2])!=-1?t-2:t-1);var i=new Uint8Array(t),s=0;return BT(r,function(o){i[s++]=o}),i.subarray(0,s)}function BT(r,e){function t(p){for(;i<r.length;){var m=r.charAt(i++),h=du[m];if(h!=null)return h;if(!/^[\s\xa0]*$/.test(m))throw Error("Unknown base64 encoding at char: "+m)}return p}_k();for(var i=0;;){var s=t(-1),o=t(0),a=t(64),u=t(64);if(u===64&&s===-1)break;e(s<<2|o>>4),a!=64&&(e(o<<4&240|a>>2),u!=64&&e(a<<6&192|u))}}function _k(){if(!du){du={};for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++){var i=r.concat(e[t].split(""));gk[t]=i;for(var s=0;s<i.length;s++){var o=i[s];du[o]===void 0&&(du[o]=s)}}}}Le("jspb.ConstBinaryMessage",function(){},void 0);Le("jspb.BinaryMessage",function(){},void 0);Le("jspb.BinaryConstants.FieldType",{yb:-1,ee:1,FLOAT:2,ke:3,te:4,je:5,xb:6,wb:7,BOOL:8,re:9,ie:10,le:11,ce:12,se:13,ge:14,me:15,ne:16,oe:17,pe:18,he:30,ve:31},void 0);Le("jspb.BinaryConstants.WireType",{yb:-1,ue:0,xb:1,de:2,qe:3,fe:4,wb:5},void 0);Le("jspb.BinaryConstants.FieldTypeToWireType",function(r){switch(r){case 5:case 3:case 13:case 4:case 17:case 18:case 8:case 14:case 31:return 0;case 1:case 6:case 16:case 30:return 1;case 9:case 11:case 12:return 2;case 2:case 7:case 15:return 5;default:return-1}},void 0);Le("jspb.BinaryConstants.INVALID_FIELD_NUMBER",-1,void 0);Le("jspb.BinaryConstants.FLOAT32_EPS",1401298464324817e-60,void 0);Le("jspb.BinaryConstants.FLOAT32_MIN",11754943508222875e-54,void 0);Le("jspb.BinaryConstants.FLOAT32_MAX",34028234663852886e22,void 0);Le("jspb.BinaryConstants.FLOAT64_EPS",5e-324,void 0);Le("jspb.BinaryConstants.FLOAT64_MIN",22250738585072014e-324,void 0);Le("jspb.BinaryConstants.FLOAT64_MAX",17976931348623157e292,void 0);Le("jspb.BinaryConstants.TWO_TO_20",1048576,void 0);Le("jspb.BinaryConstants.TWO_TO_23",8388608,void 0);Le("jspb.BinaryConstants.TWO_TO_31",2147483648,void 0);Le("jspb.BinaryConstants.TWO_TO_32",4294967296,void 0);Le("jspb.BinaryConstants.TWO_TO_52",4503599627370496,void 0);Le("jspb.BinaryConstants.TWO_TO_63",9223372036854776e3,void 0);Le("jspb.BinaryConstants.TWO_TO_64",18446744073709552e3,void 0);Le("jspb.BinaryConstants.ZERO_HASH","\0\0\0\0\0\0\0\0",void 0);var ht=0,bt=0;Le("jspb.utils.getSplit64Low",function(){return ht},void 0);Le("jspb.utils.getSplit64High",function(){return bt},void 0);function F_(r){var e=r>>>0;r=Math.floor((r-e)/4294967296)>>>0,ht=e,bt=r}Le("jspb.utils.splitUint64",F_,void 0);function _u(r){var e=0>r;r=Math.abs(r);var t=r>>>0;r=Math.floor((r-t)/4294967296),r>>>=0,e&&(r=~r>>>0,t=(~t>>>0)+1,4294967295<t&&(t=0,r++,4294967295<r&&(r=0))),ht=t,bt=r}Le("jspb.utils.splitInt64",_u,void 0);function xk(r){var e=0>r;r=2*Math.abs(r),F_(r),r=ht;var t=bt;e&&(r==0?t==0?t=r=4294967295:(t--,r=4294967295):r--),ht=r,bt=t}Le("jspb.utils.splitZigzag64",xk,void 0);function vk(r){var e=0>r?1:0;if(r=e?-r:r,r===0)0<1/r?ht=bt=0:(bt=0,ht=2147483648);else if(isNaN(r))bt=0,ht=2147483647;else if(34028234663852886e22<r)bt=0,ht=(e<<31|2139095040)>>>0;else if(11754943508222875e-54>r)r=Math.round(r/Math.pow(2,-149)),bt=0,ht=(e<<31|r)>>>0;else{var t=Math.floor(Math.log(r)/Math.LN2);r*=Math.pow(2,-t),r=Math.round(8388608*r),16777216<=r&&++t,bt=0,ht=(e<<31|t+127<<23|r&8388607)>>>0}}Le("jspb.utils.splitFloat32",vk,void 0);function Ik(r){var e=0>r?1:0;if(r=e?-r:r,r===0)bt=0<1/r?0:2147483648,ht=0;else if(isNaN(r))bt=2147483647,ht=4294967295;else if(17976931348623157e292<r)bt=(e<<31|2146435072)>>>0,ht=0;else if(22250738585072014e-324>r)r/=Math.pow(2,-1074),bt=(e<<31|r/4294967296)>>>0,ht=r>>>0;else{var t=r,i=0;if(2<=t)for(;2<=t&&1023>i;)i++,t/=2;else for(;1>t&&-1022<i;)t*=2,i--;r*=Math.pow(2,-i),bt=(e<<31|i+1023<<20|1048576*r&1048575)>>>0,ht=4503599627370496*r>>>0}}Le("jspb.utils.splitFloat64",Ik,void 0);function ms(r){var e=r.charCodeAt(4),t=r.charCodeAt(5),i=r.charCodeAt(6),s=r.charCodeAt(7);ht=r.charCodeAt(0)+(r.charCodeAt(1)<<8)+(r.charCodeAt(2)<<16)+(r.charCodeAt(3)<<24)>>>0,bt=e+(t<<8)+(i<<16)+(s<<24)>>>0}Le("jspb.utils.splitHash64",ms,void 0);function ja(r,e){return 4294967296*e+(r>>>0)}Le("jspb.utils.joinUint64",ja,void 0);function xu(r,e){var t=e&2147483648;return t&&(r=~r+1>>>0,e=~e>>>0,r==0&&(e=e+1>>>0)),r=ja(r,e),t?-r:r}Le("jspb.utils.joinInt64",xu,void 0);function Nf(r,e,t){var i=e>>31;return t(r<<1^i,(e<<1|r>>>31)^i)}Le("jspb.utils.toZigzag64",Nf,void 0);function Sk(r,e){return Pf(r,e,xu)}Le("jspb.utils.joinZigzag64",Sk,void 0);function Pf(r,e,t){var i=-(r&1);return t((r>>>1|e<<31)^i,e>>>1^i)}Le("jspb.utils.fromZigzag64",Pf,void 0);function kk(r){var e=2*(r>>31)+1,t=r>>>23&255;return r&=8388607,t==255?r?NaN:1/0*e:t==0?e*Math.pow(2,-149)*r:e*Math.pow(2,t-150)*(r+Math.pow(2,23))}Le("jspb.utils.joinFloat32",kk,void 0);function wk(r,e){var t=2*(e>>31)+1,i=e>>>20&2047;return r=4294967296*(e&1048575)+r,i==2047?r?NaN:1/0*t:i==0?t*Math.pow(2,-1074)*r:t*Math.pow(2,i-1075)*(r+4503599627370496)}Le("jspb.utils.joinFloat64",wk,void 0);function Ff(r,e){return String.fromCharCode(r>>>0&255,r>>>8&255,r>>>16&255,r>>>24&255,e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255)}Le("jspb.utils.joinHash64",Ff,void 0);Le("jspb.utils.DIGITS","0123456789abcdef".split(""),void 0);function vu(r,e){function t(s,o){return s=s?String(s):"",o?"0000000".slice(s.length)+s:s}if(2097151>=e)return""+ja(r,e);var i=(r>>>24|e<<8)>>>0&16777215;return e=e>>16&65535,r=(r&16777215)+6777216*i+6710656*e,i+=8147497*e,e*=2,1e7<=r&&(i+=Math.floor(r/1e7),r%=1e7),1e7<=i&&(e+=Math.floor(i/1e7),i%=1e7),t(e,0)+t(i,e)+t(r,1)}Le("jspb.utils.joinUnsignedDecimalString",vu,void 0);function Iu(r,e){var t=e&2147483648;return t&&(r=~r+1>>>0,e=~e+(r==0?1:0)>>>0),r=vu(r,e),t?"-"+r:r}Le("jspb.utils.joinSignedDecimalString",Iu,void 0);function Ek(r,e){ms(r),r=ht;var t=bt;return e?Iu(r,t):vu(r,t)}Le("jspb.utils.hash64ToDecimalString",Ek,void 0);Le("jspb.utils.hash64ArrayToDecimalStrings",function(r,e){for(var t=Array(r.length),i=0;i<r.length;i++)t[i]=Ek(r[i],e);return t},void 0);function Su(r){function e(a,u){for(var p=0;8>p&&(a!==1||0<u);p++)u=a*s[p]+u,s[p]=u&255,u>>>=8}function t(){for(var a=0;8>a;a++)s[a]=~s[a]&255}V(0<r.length);var i=!1;r[0]==="-"&&(i=!0,r=r.slice(1));for(var s=[0,0,0,0,0,0,0,0],o=0;o<r.length;o++)e(10,r.charCodeAt(o)-48);return i&&(t(),e(1,1)),fk(s)}Le("jspb.utils.decimalStringToHash64",Su,void 0);Le("jspb.utils.splitDecimalString",function(r){ms(Su(r))},void 0);function uk(r){return String.fromCharCode(10>r?48+r:87+r)}function pk(r){return 97<=r?r-97+10:r-48}Le("jspb.utils.hash64ToHexString",function(r){var e=Array(18);e[0]="0",e[1]="x";for(var t=0;8>t;t++){var i=r.charCodeAt(7-t);e[2*t+2]=uk(i>>4),e[2*t+3]=uk(i&15)}return e.join("")},void 0);Le("jspb.utils.hexStringToHash64",function(r){r=r.toLowerCase(),V(r.length==18),V(r[0]=="0"),V(r[1]=="x");for(var e="",t=0;8>t;t++)e=String.fromCharCode(16*pk(r.charCodeAt(2*t+2))+pk(r.charCodeAt(2*t+3)))+e;return e},void 0);Le("jspb.utils.hash64ToNumber",function(r,e){ms(r),r=ht;var t=bt;return e?xu(r,t):ja(r,t)},void 0);Le("jspb.utils.numberToHash64",function(r){return _u(r),Ff(ht,bt)},void 0);Le("jspb.utils.countVarints",function(r,e,t){for(var i=0,s=e;s<t;s++)i+=r[s]>>7;return t-e-i},void 0);Le("jspb.utils.countVarintFields",function(r,e,t,i){var s=0;if(i*=8,128>i)for(;e<t&&r[e++]==i;)for(s++;;){var o=r[e++];if(!(o&128))break}else for(;e<t;){for(o=i;128<o;){if(r[e]!=(o&127|128))return s;e++,o>>=7}if(r[e++]!=o)break;for(s++;o=r[e++],(o&128)!=0;);}return s},void 0);function Lk(r,e,t,i,s){var o=0;if(128>i)for(;e<t&&r[e++]==i;)o++,e+=s;else for(;e<t;){for(var a=i;128<a;){if(r[e++]!=(a&127|128))return o;a>>=7}if(r[e++]!=a)break;o++,e+=s}return o}Le("jspb.utils.countFixed32Fields",function(r,e,t,i){return Lk(r,e,t,8*i+5,4)},void 0);Le("jspb.utils.countFixed64Fields",function(r,e,t,i){return Lk(r,e,t,8*i+1,8)},void 0);Le("jspb.utils.countDelimitedFields",function(r,e,t,i){var s=0;for(i=8*i+2;e<t;){for(var o=i;128<o;){if(r[e++]!=(o&127|128))return s;o>>=7}if(r[e++]!=o)break;s++;for(var a=0,u=1;o=r[e++],a+=(o&127)*u,u*=128,(o&128)!=0;);e+=a}return s},void 0);Le("jspb.utils.debugBytesToTextFormat",function(r){var e='"';if(r){r=Uf(r);for(var t=0;t<r.length;t++)e+="\\x",16>r[t]&&(e+="0"),e+=r[t].toString(16)}return e+'"'},void 0);Le("jspb.utils.debugScalarToTextFormat",function(r){if(typeof r=="string"){r=String(r);for(var e=['"'],t=0;t<r.length;t++){var i=r.charAt(t),s=i.charCodeAt(0),o=t+1,a;(a=R_[i])||(31<s&&127>s||(s=i,s in Df?i=Df[s]:s in R_?i=Df[s]=R_[s]:(a=s.charCodeAt(0),31<a&&127>a?i=s:(256>a?(i="\\x",(16>a||256<a)&&(i+="0")):(i="\\u",4096>a&&(i+="0")),i+=a.toString(16).toUpperCase()),i=Df[s]=i)),a=i),e[o]=a}e.push('"'),r=e.join("")}else r=r.toString();return r},void 0);Le("jspb.utils.stringToByteArray",function(r){for(var e=new Uint8Array(r.length),t=0;t<r.length;t++){var i=r.charCodeAt(t);if(255<i)throw Error("Conversion error: string contains codepoint outside of byte range");e[t]=i}return e},void 0);function Uf(r){return r.constructor===Uint8Array?r:r.constructor===ArrayBuffer?new Uint8Array(r):r.constructor===Array?new Uint8Array(r):r.constructor===String?yk(r):r instanceof Uint8Array?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):(tr("Type not convertible to Uint8Array."),new Uint8Array(0))}Le("jspb.utils.byteSourceToUint8Array",Uf,void 0);function U(r,e,t){this.b=null,this.a=this.c=this.h=0,this.v=!1,r&&this.H(r,e,t)}Le("jspb.BinaryDecoder",U,void 0);var hu=[];U.getInstanceCacheLength=function(){return hu.length};function Hf(r,e,t){if(hu.length){var i=hu.pop();return r&&i.H(r,e,t),i}return new U(r,e,t)}U.alloc=Hf;U.prototype.Ca=function(){this.clear(),100>hu.length&&hu.push(this)};U.prototype.free=U.prototype.Ca;U.prototype.clone=function(){return Hf(this.b,this.h,this.c-this.h)};U.prototype.clone=U.prototype.clone;U.prototype.clear=function(){this.b=null,this.a=this.c=this.h=0,this.v=!1};U.prototype.clear=U.prototype.clear;U.prototype.Y=function(){return this.b};U.prototype.getBuffer=U.prototype.Y;U.prototype.H=function(r,e,t){this.b=Uf(r),this.h=e!==void 0?e:0,this.c=t!==void 0?this.h+t:this.b.length,this.a=this.h};U.prototype.setBlock=U.prototype.H;U.prototype.Db=function(){return this.c};U.prototype.getEnd=U.prototype.Db;U.prototype.setEnd=function(r){this.c=r};U.prototype.setEnd=U.prototype.setEnd;U.prototype.reset=function(){this.a=this.h};U.prototype.reset=U.prototype.reset;U.prototype.B=function(){return this.a};U.prototype.getCursor=U.prototype.B;U.prototype.Ma=function(r){this.a=r};U.prototype.setCursor=U.prototype.Ma;U.prototype.advance=function(r){this.a+=r,V(this.a<=this.c)};U.prototype.advance=U.prototype.advance;U.prototype.ya=function(){return this.a==this.c};U.prototype.atEnd=U.prototype.ya;U.prototype.Qb=function(){return this.a>this.c};U.prototype.pastEnd=U.prototype.Qb;U.prototype.getError=function(){return this.v||0>this.a||this.a>this.c};U.prototype.getError=U.prototype.getError;U.prototype.w=function(r){for(var e=128,t=0,i=0,s=0;4>s&&128<=e;s++)e=this.b[this.a++],t|=(e&127)<<7*s;if(128<=e&&(e=this.b[this.a++],t|=(e&127)<<28,i|=(e&127)>>4),128<=e)for(s=0;5>s&&128<=e;s++)e=this.b[this.a++],i|=(e&127)<<7*s+3;if(128>e)return r(t>>>0,i>>>0);tr("Failed to read varint, encoding is invalid."),this.v=!0};U.prototype.readSplitVarint64=U.prototype.w;U.prototype.ea=function(r){return this.w(function(e,t){return Pf(e,t,r)})};U.prototype.readSplitZigzagVarint64=U.prototype.ea;U.prototype.ta=function(r){var e=this.b,t=this.a;this.a+=8;for(var i=0,s=0,o=t+7;o>=t;o--)i=i<<8|e[o],s=s<<8|e[o+4];return r(i,s)};U.prototype.readSplitFixed64=U.prototype.ta;U.prototype.kb=function(){for(;this.b[this.a]&128;)this.a++;this.a++};U.prototype.skipVarint=U.prototype.kb;U.prototype.mb=function(r){for(;128<r;)this.a--,r>>>=7;this.a--};U.prototype.unskipVarint=U.prototype.mb;U.prototype.o=function(){var r=this.b,e=r[this.a],t=e&127;return 128>e?(this.a+=1,V(this.a<=this.c),t):(e=r[this.a+1],t|=(e&127)<<7,128>e?(this.a+=2,V(this.a<=this.c),t):(e=r[this.a+2],t|=(e&127)<<14,128>e?(this.a+=3,V(this.a<=this.c),t):(e=r[this.a+3],t|=(e&127)<<21,128>e?(this.a+=4,V(this.a<=this.c),t):(e=r[this.a+4],t|=(e&15)<<28,128>e?(this.a+=5,V(this.a<=this.c),t>>>0):(this.a+=5,128<=r[this.a++]&&128<=r[this.a++]&&128<=r[this.a++]&&128<=r[this.a++]&&128<=r[this.a++]&&V(!1),V(this.a<=this.c),t)))))};U.prototype.readUnsignedVarint32=U.prototype.o;U.prototype.da=function(){return~~this.o()};U.prototype.readSignedVarint32=U.prototype.da;U.prototype.O=function(){return this.o().toString()};U.prototype.Ea=function(){return this.da().toString()};U.prototype.readSignedVarint32String=U.prototype.Ea;U.prototype.Ia=function(){var r=this.o();return r>>>1^-(r&1)};U.prototype.readZigzagVarint32=U.prototype.Ia;U.prototype.Ga=function(){return this.w(ja)};U.prototype.readUnsignedVarint64=U.prototype.Ga;U.prototype.Ha=function(){return this.w(vu)};U.prototype.readUnsignedVarint64String=U.prototype.Ha;U.prototype.sa=function(){return this.w(xu)};U.prototype.readSignedVarint64=U.prototype.sa;U.prototype.Fa=function(){return this.w(Iu)};U.prototype.readSignedVarint64String=U.prototype.Fa;U.prototype.Ja=function(){return this.w(Sk)};U.prototype.readZigzagVarint64=U.prototype.Ja;U.prototype.fb=function(){return this.ea(Ff)};U.prototype.readZigzagVarintHash64=U.prototype.fb;U.prototype.Ka=function(){return this.ea(Iu)};U.prototype.readZigzagVarint64String=U.prototype.Ka;U.prototype.Gc=function(){var r=this.b[this.a];return this.a+=1,V(this.a<=this.c),r};U.prototype.readUint8=U.prototype.Gc;U.prototype.Ec=function(){var r=this.b[this.a],e=this.b[this.a+1];return this.a+=2,V(this.a<=this.c),r<<0|e<<8};U.prototype.readUint16=U.prototype.Ec;U.prototype.m=function(){var r=this.b[this.a],e=this.b[this.a+1],t=this.b[this.a+2],i=this.b[this.a+3];return this.a+=4,V(this.a<=this.c),(r<<0|e<<8|t<<16|i<<24)>>>0};U.prototype.readUint32=U.prototype.m;U.prototype.ga=function(){var r=this.m(),e=this.m();return ja(r,e)};U.prototype.readUint64=U.prototype.ga;U.prototype.ha=function(){var r=this.m(),e=this.m();return vu(r,e)};U.prototype.readUint64String=U.prototype.ha;U.prototype.Xb=function(){var r=this.b[this.a];return this.a+=1,V(this.a<=this.c),r<<24>>24};U.prototype.readInt8=U.prototype.Xb;U.prototype.Vb=function(){var r=this.b[this.a],e=this.b[this.a+1];return this.a+=2,V(this.a<=this.c),(r<<0|e<<8)<<16>>16};U.prototype.readInt16=U.prototype.Vb;U.prototype.P=function(){var r=this.b[this.a],e=this.b[this.a+1],t=this.b[this.a+2],i=this.b[this.a+3];return this.a+=4,V(this.a<=this.c),r<<0|e<<8|t<<16|i<<24};U.prototype.readInt32=U.prototype.P;U.prototype.ba=function(){var r=this.m(),e=this.m();return xu(r,e)};U.prototype.readInt64=U.prototype.ba;U.prototype.ca=function(){var r=this.m(),e=this.m();return Iu(r,e)};U.prototype.readInt64String=U.prototype.ca;U.prototype.aa=function(){var r=this.m();return kk(r,0)};U.prototype.readFloat=U.prototype.aa;U.prototype.Z=function(){var r=this.m(),e=this.m();return wk(r,e)};U.prototype.readDouble=U.prototype.Z;U.prototype.pa=function(){return!!this.b[this.a++]};U.prototype.readBool=U.prototype.pa;U.prototype.ra=function(){return this.da()};U.prototype.readEnum=U.prototype.ra;U.prototype.fa=function(r){var e=this.b,t=this.a;r=t+r;for(var i=[],s="";t<r;){var o=e[t++];if(128>o)i.push(o);else{if(192>o)continue;if(224>o){var a=e[t++];i.push((o&31)<<6|a&63)}else if(240>o){a=e[t++];var u=e[t++];i.push((o&15)<<12|(a&63)<<6|u&63)}else if(248>o){a=e[t++],u=e[t++];var p=e[t++];o=(o&7)<<18|(a&63)<<12|(u&63)<<6|p&63,o-=65536,i.push((o>>10&1023)+55296,(o&1023)+56320)}}8192<=i.length&&(s+=String.fromCharCode.apply(null,i),i.length=0)}return s+=fk(i),this.a=t,s};U.prototype.readString=U.prototype.fa;U.prototype.Dc=function(){var r=this.o();return this.fa(r)};U.prototype.readStringWithLength=U.prototype.Dc;U.prototype.qa=function(r){if(0>r||this.a+r>this.b.length)return this.v=!0,tr("Invalid byte length!"),new Uint8Array(0);var e=this.b.subarray(this.a,this.a+r);return this.a+=r,V(this.a<=this.c),e};U.prototype.readBytes=U.prototype.qa;U.prototype.ia=function(){return this.w(Ff)};U.prototype.readVarintHash64=U.prototype.ia;U.prototype.$=function(){var r=this.b,e=this.a,t=r[e],i=r[e+1],s=r[e+2],o=r[e+3],a=r[e+4],u=r[e+5],p=r[e+6];return r=r[e+7],this.a+=8,String.fromCharCode(t,i,s,o,a,u,p,r)};U.prototype.readFixedHash64=U.prototype.$;function E(r,e,t){this.a=Hf(r,e,t),this.O=this.a.B(),this.b=this.c=-1,this.h=!1,this.v=null}Le("jspb.BinaryReader",E,void 0);var Ha=[];E.clearInstanceCache=function(){Ha=[]};E.getInstanceCacheLength=function(){return Ha.length};function Tk(r,e,t){if(Ha.length){var i=Ha.pop();return r&&i.a.H(r,e,t),i}return new E(r,e,t)}E.alloc=Tk;E.prototype.zb=Tk;E.prototype.alloc=E.prototype.zb;E.prototype.Ca=function(){this.a.clear(),this.b=this.c=-1,this.h=!1,this.v=null,100>Ha.length&&Ha.push(this)};E.prototype.free=E.prototype.Ca;E.prototype.Fb=function(){return this.O};E.prototype.getFieldCursor=E.prototype.Fb;E.prototype.B=function(){return this.a.B()};E.prototype.getCursor=E.prototype.B;E.prototype.Y=function(){return this.a.Y()};E.prototype.getBuffer=E.prototype.Y;E.prototype.Hb=function(){return this.c};E.prototype.getFieldNumber=E.prototype.Hb;E.prototype.Lb=function(){return this.b};E.prototype.getWireType=E.prototype.Lb;E.prototype.Mb=function(){return this.b==2};E.prototype.isDelimited=E.prototype.Mb;E.prototype.bb=function(){return this.b==4};E.prototype.isEndGroup=E.prototype.bb;E.prototype.getError=function(){return this.h||this.a.getError()};E.prototype.getError=E.prototype.getError;E.prototype.H=function(r,e,t){this.a.H(r,e,t),this.b=this.c=-1};E.prototype.setBlock=E.prototype.H;E.prototype.reset=function(){this.a.reset(),this.b=this.c=-1};E.prototype.reset=E.prototype.reset;E.prototype.advance=function(r){this.a.advance(r)};E.prototype.advance=E.prototype.advance;E.prototype.oa=function(){if(this.a.ya())return!1;if(this.getError())return tr("Decoder hit an error"),!1;this.O=this.a.B();var r=this.a.o(),e=r>>>3;return r&=7,r!=0&&r!=5&&r!=1&&r!=2&&r!=3&&r!=4?(tr("Invalid wire type: %s (at position %s)",r,this.O),this.h=!0,!1):(this.c=e,this.b=r,!0)};E.prototype.nextField=E.prototype.oa;E.prototype.Oa=function(){this.a.mb(this.c<<3|this.b)};E.prototype.unskipHeader=E.prototype.Oa;E.prototype.Lc=function(){var r=this.c;for(this.Oa();this.oa()&&this.c==r;)this.C();this.a.ya()||this.Oa()};E.prototype.skipMatchingFields=E.prototype.Lc;E.prototype.lb=function(){this.b!=0?(tr("Invalid wire type for skipVarintField"),this.C()):this.a.kb()};E.prototype.skipVarintField=E.prototype.lb;E.prototype.gb=function(){if(this.b!=2)tr("Invalid wire type for skipDelimitedField"),this.C();else{var r=this.a.o();this.a.advance(r)}};E.prototype.skipDelimitedField=E.prototype.gb;E.prototype.hb=function(){this.b!=5?(tr("Invalid wire type for skipFixed32Field"),this.C()):this.a.advance(4)};E.prototype.skipFixed32Field=E.prototype.hb;E.prototype.ib=function(){this.b!=1?(tr("Invalid wire type for skipFixed64Field"),this.C()):this.a.advance(8)};E.prototype.skipFixed64Field=E.prototype.ib;E.prototype.jb=function(){var r=this.c;do{if(!this.oa()){tr("Unmatched start-group tag: stream EOF"),this.h=!0;break}if(this.b==4){this.c!=r&&(tr("Unmatched end-group tag"),this.h=!0);break}this.C()}while(1)};E.prototype.skipGroup=E.prototype.jb;E.prototype.C=function(){switch(this.b){case 0:this.lb();break;case 1:this.ib();break;case 2:this.gb();break;case 5:this.hb();break;case 3:this.jb();break;default:tr("Invalid wire encoding for field.")}};E.prototype.skipField=E.prototype.C;E.prototype.Hc=function(r,e){this.v===null&&(this.v={}),V(!this.v[r]),this.v[r]=e};E.prototype.registerReadCallback=E.prototype.Hc;E.prototype.Ic=function(r){return V(this.v!==null),r=this.v[r],V(r),r(this)};E.prototype.runReadCallback=E.prototype.Ic;E.prototype.Yb=function(r,e){V(this.b==2);var t=this.a.c,i=this.a.o();i=this.a.B()+i,this.a.setEnd(i),e(r,this),this.a.Ma(i),this.a.setEnd(t)};E.prototype.readMessage=E.prototype.Yb;E.prototype.Ub=function(r,e,t){V(this.b==3),V(this.c==r),t(e,this),this.h||this.b==4||(tr("Group submessage did not end with an END_GROUP tag"),this.h=!0)};E.prototype.readGroup=E.prototype.Ub;E.prototype.Gb=function(){V(this.b==2);var r=this.a.o(),e=this.a.B(),t=e+r;return r=Hf(this.a.Y(),e,r),this.a.Ma(t),r};E.prototype.getFieldDecoder=E.prototype.Gb;E.prototype.P=function(){return V(this.b==0),this.a.da()};E.prototype.readInt32=E.prototype.P;E.prototype.Wb=function(){return V(this.b==0),this.a.Ea()};E.prototype.readInt32String=E.prototype.Wb;E.prototype.ba=function(){return V(this.b==0),this.a.sa()};E.prototype.readInt64=E.prototype.ba;E.prototype.ca=function(){return V(this.b==0),this.a.Fa()};E.prototype.readInt64String=E.prototype.ca;E.prototype.m=function(){return V(this.b==0),this.a.o()};E.prototype.readUint32=E.prototype.m;E.prototype.Fc=function(){return V(this.b==0),this.a.O()};E.prototype.readUint32String=E.prototype.Fc;E.prototype.ga=function(){return V(this.b==0),this.a.Ga()};E.prototype.readUint64=E.prototype.ga;E.prototype.ha=function(){return V(this.b==0),this.a.Ha()};E.prototype.readUint64String=E.prototype.ha;E.prototype.zc=function(){return V(this.b==0),this.a.Ia()};E.prototype.readSint32=E.prototype.zc;E.prototype.Ac=function(){return V(this.b==0),this.a.Ja()};E.prototype.readSint64=E.prototype.Ac;E.prototype.Bc=function(){return V(this.b==0),this.a.Ka()};E.prototype.readSint64String=E.prototype.Bc;E.prototype.Rb=function(){return V(this.b==5),this.a.m()};E.prototype.readFixed32=E.prototype.Rb;E.prototype.Sb=function(){return V(this.b==1),this.a.ga()};E.prototype.readFixed64=E.prototype.Sb;E.prototype.Tb=function(){return V(this.b==1),this.a.ha()};E.prototype.readFixed64String=E.prototype.Tb;E.prototype.vc=function(){return V(this.b==5),this.a.P()};E.prototype.readSfixed32=E.prototype.vc;E.prototype.wc=function(){return V(this.b==5),this.a.P().toString()};E.prototype.readSfixed32String=E.prototype.wc;E.prototype.xc=function(){return V(this.b==1),this.a.ba()};E.prototype.readSfixed64=E.prototype.xc;E.prototype.yc=function(){return V(this.b==1),this.a.ca()};E.prototype.readSfixed64String=E.prototype.yc;E.prototype.aa=function(){return V(this.b==5),this.a.aa()};E.prototype.readFloat=E.prototype.aa;E.prototype.Z=function(){return V(this.b==1),this.a.Z()};E.prototype.readDouble=E.prototype.Z;E.prototype.pa=function(){return V(this.b==0),!!this.a.o()};E.prototype.readBool=E.prototype.pa;E.prototype.ra=function(){return V(this.b==0),this.a.sa()};E.prototype.readEnum=E.prototype.ra;E.prototype.fa=function(){V(this.b==2);var r=this.a.o();return this.a.fa(r)};E.prototype.readString=E.prototype.fa;E.prototype.qa=function(){V(this.b==2);var r=this.a.o();return this.a.qa(r)};E.prototype.readBytes=E.prototype.qa;E.prototype.ia=function(){return V(this.b==0),this.a.ia()};E.prototype.readVarintHash64=E.prototype.ia;E.prototype.Cc=function(){return V(this.b==0),this.a.fb()};E.prototype.readSintHash64=E.prototype.Cc;E.prototype.w=function(r){return V(this.b==0),this.a.w(r)};E.prototype.readSplitVarint64=E.prototype.w;E.prototype.ea=function(r){return V(this.b==0),this.a.w(function(e,t){return Pf(e,t,r)})};E.prototype.readSplitZigzagVarint64=E.prototype.ea;E.prototype.$=function(){return V(this.b==1),this.a.$()};E.prototype.readFixedHash64=E.prototype.$;E.prototype.ta=function(r){return V(this.b==1),this.a.ta(r)};E.prototype.readSplitFixed64=E.prototype.ta;function Rt(r,e){V(r.b==2);var t=r.a.o();t=r.a.B()+t;for(var i=[];r.a.B()<t;)i.push(e.call(r.a));return i}E.prototype.gc=function(){return Rt(this,this.a.da)};E.prototype.readPackedInt32=E.prototype.gc;E.prototype.hc=function(){return Rt(this,this.a.Ea)};E.prototype.readPackedInt32String=E.prototype.hc;E.prototype.ic=function(){return Rt(this,this.a.sa)};E.prototype.readPackedInt64=E.prototype.ic;E.prototype.jc=function(){return Rt(this,this.a.Fa)};E.prototype.readPackedInt64String=E.prototype.jc;E.prototype.qc=function(){return Rt(this,this.a.o)};E.prototype.readPackedUint32=E.prototype.qc;E.prototype.rc=function(){return Rt(this,this.a.O)};E.prototype.readPackedUint32String=E.prototype.rc;E.prototype.sc=function(){return Rt(this,this.a.Ga)};E.prototype.readPackedUint64=E.prototype.sc;E.prototype.tc=function(){return Rt(this,this.a.Ha)};E.prototype.readPackedUint64String=E.prototype.tc;E.prototype.nc=function(){return Rt(this,this.a.Ia)};E.prototype.readPackedSint32=E.prototype.nc;E.prototype.oc=function(){return Rt(this,this.a.Ja)};E.prototype.readPackedSint64=E.prototype.oc;E.prototype.pc=function(){return Rt(this,this.a.Ka)};E.prototype.readPackedSint64String=E.prototype.pc;E.prototype.bc=function(){return Rt(this,this.a.m)};E.prototype.readPackedFixed32=E.prototype.bc;E.prototype.cc=function(){return Rt(this,this.a.ga)};E.prototype.readPackedFixed64=E.prototype.cc;E.prototype.dc=function(){return Rt(this,this.a.ha)};E.prototype.readPackedFixed64String=E.prototype.dc;E.prototype.kc=function(){return Rt(this,this.a.P)};E.prototype.readPackedSfixed32=E.prototype.kc;E.prototype.lc=function(){return Rt(this,this.a.ba)};E.prototype.readPackedSfixed64=E.prototype.lc;E.prototype.mc=function(){return Rt(this,this.a.ca)};E.prototype.readPackedSfixed64String=E.prototype.mc;E.prototype.fc=function(){return Rt(this,this.a.aa)};E.prototype.readPackedFloat=E.prototype.fc;E.prototype.$b=function(){return Rt(this,this.a.Z)};E.prototype.readPackedDouble=E.prototype.$b;E.prototype.Zb=function(){return Rt(this,this.a.pa)};E.prototype.readPackedBool=E.prototype.Zb;E.prototype.ac=function(){return Rt(this,this.a.ra)};E.prototype.readPackedEnum=E.prototype.ac;E.prototype.uc=function(){return Rt(this,this.a.ia)};E.prototype.readPackedVarintHash64=E.prototype.uc;E.prototype.ec=function(){return Rt(this,this.a.$)};E.prototype.readPackedFixedHash64=E.prototype.ec;function fu(r,e,t,i,s){this.ma=r,this.Ba=e,this.la=t,this.Na=i,this.na=s}Le("jspb.ExtensionFieldInfo",fu,void 0);function Ak(r,e,t,i,s,o){this.Za=r,this.za=e,this.Aa=t,this.Wa=i,this.Ab=s,this.Nb=o}Le("jspb.ExtensionFieldBinaryInfo",Ak,void 0);fu.prototype.F=function(){return!!this.la};fu.prototype.isMessageType=fu.prototype.F;function ge(){}Le("jspb.Message",ge,void 0);ge.GENERATE_TO_OBJECT=!0;ge.GENERATE_FROM_OBJECT=!0;var zf=typeof Uint8Array=="function";ge.prototype.Ib=function(){return this.b};ge.prototype.getJsPbMessageId=ge.prototype.Ib;ge.initialize=function(r,e,t,i,s,o){r.f=null,e||(e=t?[t]:[]),r.b=t?String(t):void 0,r.D=t===0?-1:0,r.u=e;e:{if(t=r.u.length,e=-1,t&&(e=t-1,t=r.u[e],!(t===null||typeof t!="object"||Array.isArray(t)||zf&&t instanceof Uint8Array))){r.G=e-r.D,r.i=t;break e}-1<i?(r.G=Math.max(i,e+1-r.D),r.i=null):r.G=Number.MAX_VALUE}if(r.a={},s)for(i=0;i<s.length;i++)e=s[i],e<r.G?(e+=r.D,r.u[e]=r.u[e]||gu):(jf(r),r.i[e]=r.i[e]||gu);if(o&&o.length)for(i=0;i<o.length;i++)U_(r,o[i])};var gu=Object.freeze?Object.freeze([]):[];function jf(r){var e=r.G+r.D;r.u[e]||(r.i=r.u[e]={})}function Ck(r,e,t){for(var i=[],s=0;s<r.length;s++)i[s]=e.call(r[s],t,r[s]);return i}ge.toObjectList=Ck;ge.toObjectExtension=function(r,e,t,i,s){for(var o in t){var a=t[o],u=i.call(r,a);if(u!=null){for(var p in a.Ba)if(a.Ba.hasOwnProperty(p))break;e[p]=a.Na?a.na?Ck(u,a.Na,s):a.Na(s,u):u}}};ge.serializeBinaryExtensions=function(r,e,t,i){for(var s in t){var o=t[s],a=o.Za;if(!o.Aa)throw Error("Message extension present that was generated without binary serialization support");var u=i.call(r,a);if(u!=null)if(a.F())if(o.Wa)o.Aa.call(e,a.ma,u,o.Wa);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else o.Aa.call(e,a.ma,u)}};ge.readBinaryExtension=function(r,e,t,i,s){var o=t[e.c];if(o){if(t=o.Za,!o.za)throw Error("Deserializing extension whose generated code does not support binary format");if(t.F()){var a=new t.la;o.za.call(e,a,o.Ab)}else a=o.za.call(e);t.na&&!o.Nb?(e=i.call(r,t))?e.push(a):s.call(r,t,[a]):s.call(r,t,a)}else e.C()};function Wr(r,e){if(e<r.G){e+=r.D;var t=r.u[e];return t===gu?r.u[e]=[]:t}if(r.i)return t=r.i[e],t===gu?r.i[e]=[]:t}ge.getField=Wr;ge.getRepeatedField=function(r,e){return Wr(r,e)};function Mk(r,e){return r=Wr(r,e),r==null?r:+r}ge.getOptionalFloatingPointField=Mk;function Rk(r,e){return r=Wr(r,e),r==null?r:!!r}ge.getBooleanField=Rk;ge.getRepeatedFloatingPointField=function(r,e){var t=Wr(r,e);if(r.a||(r.a={}),!r.a[e]){for(var i=0;i<t.length;i++)t[i]=+t[i];r.a[e]=!0}return t};ge.getRepeatedBooleanField=function(r,e){var t=Wr(r,e);if(r.a||(r.a={}),!r.a[e]){for(var i=0;i<t.length;i++)t[i]=!!t[i];r.a[e]=!0}return t};function Bk(r){return r==null||typeof r=="string"?r:zf&&r instanceof Uint8Array?bk(r):(tr("Cannot coerce to b64 string: "+vn(r)),null)}ge.bytesAsB64=Bk;function Dk(r){return r==null||r instanceof Uint8Array?r:typeof r=="string"?yk(r):(tr("Cannot coerce to Uint8Array: "+vn(r)),null)}ge.bytesAsU8=Dk;ge.bytesListAsB64=function(r){return Ok(r),r.length&&typeof r[0]!="string"?bu(r,Bk):r};ge.bytesListAsU8=function(r){return Ok(r),!r.length||r[0]instanceof Uint8Array?r:bu(r,Dk)};function Ok(r){if(r&&1<r.length){var e=vn(r[0]);AT(r,function(t){vn(t)!=e&&tr("Inconsistent type in JSPB repeated field array. Got "+vn(t)+" expected "+e)})}}function Nk(r,e,t){return r=Wr(r,e),r??t}ge.getFieldWithDefault=Nk;ge.getBooleanFieldWithDefault=function(r,e,t){return r=Rk(r,e),r??t};ge.getFloatingPointFieldWithDefault=function(r,e,t){return r=Mk(r,e),r??t};ge.getFieldProto3=Nk;ge.getMapField=function(r,e,t,i){if(r.f||(r.f={}),e in r.f)return r.f[e];var s=Wr(r,e);if(!s){if(t)return;s=[],In(r,e,s)}return r.f[e]=new Ge(s,i)};function In(r,e,t){return Ai(r,ge),e<r.G?r.u[e+r.D]=t:(jf(r),r.i[e]=t),r}ge.setField=In;ge.setProto3IntField=function(r,e,t){return no(r,e,t,0)};ge.setProto3FloatField=function(r,e,t){return no(r,e,t,0)};ge.setProto3BooleanField=function(r,e,t){return no(r,e,t,!1)};ge.setProto3StringField=function(r,e,t){return no(r,e,t,"")};ge.setProto3BytesField=function(r,e,t){return no(r,e,t,"")};ge.setProto3EnumField=function(r,e,t){return no(r,e,t,0)};ge.setProto3StringIntField=function(r,e,t){return no(r,e,t,"0")};function no(r,e,t,i){return Ai(r,ge),t!==i?In(r,e,t):e<r.G?r.u[e+r.D]=null:(jf(r),delete r.i[e]),r}ge.addToRepeatedField=function(r,e,t,i){return Ai(r,ge),e=Wr(r,e),i!=null?e.splice(i,0,t):e.push(t),r};function Pk(r,e,t,i){return Ai(r,ge),(t=U_(r,t))&&t!==e&&i!==void 0&&(r.f&&t in r.f&&(r.f[t]=void 0),In(r,t,void 0)),In(r,e,i)}ge.setOneofField=Pk;function U_(r,e){for(var t,i,s=0;s<e.length;s++){var o=e[s],a=Wr(r,o);a!=null&&(t=o,i=a,In(r,o,void 0))}return t?(In(r,t,i),t):0}ge.computeOneofCase=U_;ge.getWrapperField=function(r,e,t,i){if(r.f||(r.f={}),!r.f[t]){var s=Wr(r,t);(i||s)&&(r.f[t]=new e(s))}return r.f[t]};ge.getRepeatedWrapperField=function(r,e,t){return Fk(r,e,t),e=r.f[t],e==gu&&(e=r.f[t]=[]),e};function Fk(r,e,t){if(r.f||(r.f={}),!r.f[t]){for(var i=Wr(r,t),s=[],o=0;o<i.length;o++)s[o]=new e(i[o]);r.f[t]=s}}ge.setWrapperField=function(r,e,t){Ai(r,ge),r.f||(r.f={});var i=t&&t.g();return r.f[e]=t,In(r,e,i)};ge.setOneofWrapperField=function(r,e,t,i){Ai(r,ge),r.f||(r.f={});var s=i&&i.g();return r.f[e]=i,Pk(r,e,t,s)};ge.setRepeatedWrapperField=function(r,e,t){Ai(r,ge),r.f||(r.f={}),t=t||[];for(var i=[],s=0;s<t.length;s++)i[s]=t[s].g();return r.f[e]=t,In(r,e,i)};ge.addToRepeatedWrapperField=function(r,e,t,i,s){Fk(r,i,e);var o=r.f[e];return o||(o=r.f[e]=[]),t=t||new i,r=Wr(r,e),s!=null?(o.splice(s,0,t),r.splice(s,0,t.g())):(o.push(t),r.push(t.g())),t};ge.toMap=function(r,e,t,i){for(var s={},o=0;o<r.length;o++)s[e.call(r[o])]=t?t.call(r[o],i,r[o]):r[o];return s};function Uk(r){if(r.f)for(var e in r.f){var t=r.f[e];if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&t[i].g();else t&&t.g()}}ge.prototype.g=function(){return Uk(this),this.u};ge.prototype.toArray=ge.prototype.g;ge.prototype.toString=function(){return Uk(this),this.u.toString()};ge.prototype.getExtension=function(r){if(this.i){this.f||(this.f={});var e=r.ma;if(r.na){if(r.F())return this.f[e]||(this.f[e]=bu(this.i[e]||[],function(t){return new r.la(t)})),this.f[e]}else if(r.F())return!this.f[e]&&this.i[e]&&(this.f[e]=new r.la(this.i[e])),this.f[e];return this.i[e]}};ge.prototype.getExtension=ge.prototype.getExtension;ge.prototype.Kc=function(r,e){this.f||(this.f={}),jf(this);var t=r.ma;return r.na?(e=e||[],r.F()?(this.f[t]=e,this.i[t]=bu(e,function(i){return i.g()})):this.i[t]=e):r.F()?(this.f[t]=e,this.i[t]=e&&e.g()):this.i[t]=e,this};ge.prototype.setExtension=ge.prototype.Kc;ge.difference=function(r,e){if(!(r instanceof e.constructor))throw Error("Messages have different types.");var t=r.g();e=e.g();var i=[],s=0,o=t.length>e.length?t.length:e.length;for(r.b&&(i[0]=r.b,s=1);s<o;s++)ku(t[s],e[s])||(i[s]=e[s]);return new r.constructor(i)};ge.equals=function(r,e){return r==e||!(!r||!e)&&r instanceof e.constructor&&ku(r.g(),e.g())};function B_(r,e){r=r||{},e=e||{};var t={},i;for(i in r)t[i]=0;for(i in e)t[i]=0;for(i in t)if(!ku(r[i],e[i]))return!1;return!0}ge.compareExtensions=B_;function ku(r,e){if(r==e)return!0;if(!ak(r)||!ak(e))return typeof r=="number"&&isNaN(r)||typeof e=="number"&&isNaN(e)?String(r)==String(e):!1;if(r.constructor!=e.constructor)return!1;if(zf&&r.constructor===Uint8Array){if(r.length!=e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!=e[t])return!1;return!0}if(r.constructor===Array){var i=void 0,s=void 0,o=Math.max(r.length,e.length);for(t=0;t<o;t++){var a=r[t],u=e[t];if(a&&a.constructor==Object&&(V(i===void 0),V(t===r.length-1),i=a,a=void 0),u&&u.constructor==Object&&(V(s===void 0),V(t===e.length-1),s=u,u=void 0),!ku(a,u))return!1}return i||s?(i=i||{},s=s||{},B_(i,s)):!0}if(r.constructor===Object)return B_(r,e);throw Error("Invalid type in JSPB array")}ge.compareFields=ku;ge.prototype.Bb=function(){return Gf(this)};ge.prototype.cloneMessage=ge.prototype.Bb;ge.prototype.clone=function(){return Gf(this)};ge.prototype.clone=ge.prototype.clone;ge.clone=function(r){return Gf(r)};function Gf(r){return new r.constructor(D_(r.g()))}ge.copyInto=function(r,e){Ai(r,ge),Ai(e,ge),V(r.constructor==e.constructor,"Copy source and target message should have the same type."),r=Gf(r);for(var t=e.g(),i=r.g(),s=t.length=0;s<i.length;s++)t[s]=i[s];e.f=r.f,e.i=r.i};function D_(r){if(Array.isArray(r)){for(var e=Array(r.length),t=0;t<r.length;t++){var i=r[t];i!=null&&(e[t]=typeof i=="object"?D_(V(i)):i)}return e}if(zf&&r instanceof Uint8Array)return new Uint8Array(r);e={};for(t in r)i=r[t],i!=null&&(e[t]=typeof i=="object"?D_(V(i)):i);return e}ge.registerMessageType=function(r,e){e.we=r};var Ti={dump:function(r){return Ai(r,ge,"jspb.Message instance expected"),V(r.getExtension,"Only unobfuscated and unoptimized compilation modes supported."),Ti.X(r)}};Le("jspb.debug.dump",Ti.dump,void 0);Ti.X=function(r){var e=vn(r);if(e=="number"||e=="string"||e=="boolean"||e=="null"||e=="undefined"||typeof Uint8Array<"u"&&r instanceof Uint8Array)return r;if(e=="array")return RT(r),bu(r,Ti.X);if(r instanceof Ge){var t={};r=r.entries();for(var i=r.next();!i.done;i=r.next())t[i.value[0]]=Ti.X(i.value[1]);return t}Ai(r,ge,"Only messages expected: "+r),e=r.constructor;var s={$name:e.name||e.displayName};for(u in e.prototype){var o=/^get([A-Z]\w*)/.exec(u);if(o&&u!="getExtension"&&u!="getJsPbMessageId"){var a="has"+o[1];(!r[a]||r[a]())&&(a=r[u](),s[Ti.$a(o[1])]=Ti.X(a))}}if(r.extensionObject_)return s.$extensions="Recursive dumping of extensions not supported in compiled code. Switch to uncompiled or dump extension object directly",s;for(i in e.extensions)if(/^\d+$/.test(i)){a=e.extensions[i];var u=r.getExtension(a);o=void 0,a=a.Ba;var p=[],m=0;for(o in a)p[m++]=o;o=p[0],u!=null&&(t||(t=s.$extensions={}),t[Ti.$a(o)]=Ti.X(u))}return s};Ti.$a=function(r){return r.replace(/^[A-Z]/,function(e){return e.toLowerCase()})};function oe(){this.a=[]}Le("jspb.BinaryEncoder",oe,void 0);oe.prototype.length=function(){return this.a.length};oe.prototype.length=oe.prototype.length;oe.prototype.end=function(){var r=this.a;return this.a=[],r};oe.prototype.end=oe.prototype.end;oe.prototype.l=function(r,e){for(V(r==Math.floor(r)),V(e==Math.floor(e)),V(0<=r&&4294967296>r),V(0<=e&&4294967296>e);0<e||127<r;)this.a.push(r&127|128),r=(r>>>7|e<<25)>>>0,e>>>=7;this.a.push(r)};oe.prototype.writeSplitVarint64=oe.prototype.l;oe.prototype.A=function(r,e){V(r==Math.floor(r)),V(e==Math.floor(e)),V(0<=r&&4294967296>r),V(0<=e&&4294967296>e),this.s(r),this.s(e)};oe.prototype.writeSplitFixed64=oe.prototype.A;oe.prototype.j=function(r){for(V(r==Math.floor(r)),V(0<=r&&4294967296>r);127<r;)this.a.push(r&127|128),r>>>=7;this.a.push(r)};oe.prototype.writeUnsignedVarint32=oe.prototype.j;oe.prototype.M=function(r){if(V(r==Math.floor(r)),V(-2147483648<=r&&2147483648>r),0<=r)this.j(r);else{for(var e=0;9>e;e++)this.a.push(r&127|128),r>>=7;this.a.push(1)}};oe.prototype.writeSignedVarint32=oe.prototype.M;oe.prototype.va=function(r){V(r==Math.floor(r)),V(0<=r&&18446744073709552e3>r),_u(r),this.l(ht,bt)};oe.prototype.writeUnsignedVarint64=oe.prototype.va;oe.prototype.ua=function(r){V(r==Math.floor(r)),V(-9223372036854776e3<=r&&9223372036854776e3>r),_u(r),this.l(ht,bt)};oe.prototype.writeSignedVarint64=oe.prototype.ua;oe.prototype.wa=function(r){V(r==Math.floor(r)),V(-2147483648<=r&&2147483648>r),this.j((r<<1^r>>31)>>>0)};oe.prototype.writeZigzagVarint32=oe.prototype.wa;oe.prototype.xa=function(r){V(r==Math.floor(r)),V(-9223372036854776e3<=r&&9223372036854776e3>r),xk(r),this.l(ht,bt)};oe.prototype.writeZigzagVarint64=oe.prototype.xa;oe.prototype.Ta=function(r){this.W(Su(r))};oe.prototype.writeZigzagVarint64String=oe.prototype.Ta;oe.prototype.W=function(r){var e=this;ms(r),Nf(ht,bt,function(t,i){e.l(t>>>0,i>>>0)})};oe.prototype.writeZigzagVarintHash64=oe.prototype.W;oe.prototype.be=function(r){V(r==Math.floor(r)),V(0<=r&&256>r),this.a.push(r>>>0&255)};oe.prototype.writeUint8=oe.prototype.be;oe.prototype.ae=function(r){V(r==Math.floor(r)),V(0<=r&&65536>r),this.a.push(r>>>0&255),this.a.push(r>>>8&255)};oe.prototype.writeUint16=oe.prototype.ae;oe.prototype.s=function(r){V(r==Math.floor(r)),V(0<=r&&4294967296>r),this.a.push(r>>>0&255),this.a.push(r>>>8&255),this.a.push(r>>>16&255),this.a.push(r>>>24&255)};oe.prototype.writeUint32=oe.prototype.s;oe.prototype.V=function(r){V(r==Math.floor(r)),V(0<=r&&18446744073709552e3>r),F_(r),this.s(ht),this.s(bt)};oe.prototype.writeUint64=oe.prototype.V;oe.prototype.Qc=function(r){V(r==Math.floor(r)),V(-128<=r&&128>r),this.a.push(r>>>0&255)};oe.prototype.writeInt8=oe.prototype.Qc;oe.prototype.Pc=function(r){V(r==Math.floor(r)),V(-32768<=r&&32768>r),this.a.push(r>>>0&255),this.a.push(r>>>8&255)};oe.prototype.writeInt16=oe.prototype.Pc;oe.prototype.S=function(r){V(r==Math.floor(r)),V(-2147483648<=r&&2147483648>r),this.a.push(r>>>0&255),this.a.push(r>>>8&255),this.a.push(r>>>16&255),this.a.push(r>>>24&255)};oe.prototype.writeInt32=oe.prototype.S;oe.prototype.T=function(r){V(r==Math.floor(r)),V(-9223372036854776e3<=r&&9223372036854776e3>r),_u(r),this.A(ht,bt)};oe.prototype.writeInt64=oe.prototype.T;oe.prototype.ka=function(r){V(r==Math.floor(r)),V(-9223372036854776e3<=+r&&9223372036854776e3>+r),ms(Su(r)),this.A(ht,bt)};oe.prototype.writeInt64String=oe.prototype.ka;oe.prototype.L=function(r){V(r===1/0||r===-1/0||isNaN(r)||-34028234663852886e22<=r&&34028234663852886e22>=r),vk(r),this.s(ht)};oe.prototype.writeFloat=oe.prototype.L;oe.prototype.J=function(r){V(r===1/0||r===-1/0||isNaN(r)||-17976931348623157e292<=r&&17976931348623157e292>=r),Ik(r),this.s(ht),this.s(bt)};oe.prototype.writeDouble=oe.prototype.J;oe.prototype.I=function(r){V(typeof r=="boolean"||typeof r=="number"),this.a.push(r?1:0)};oe.prototype.writeBool=oe.prototype.I;oe.prototype.R=function(r){V(r==Math.floor(r)),V(-2147483648<=r&&2147483648>r),this.M(r)};oe.prototype.writeEnum=oe.prototype.R;oe.prototype.ja=function(r){this.a.push.apply(this.a,r)};oe.prototype.writeBytes=oe.prototype.ja;oe.prototype.N=function(r){ms(r),this.l(ht,bt)};oe.prototype.writeVarintHash64=oe.prototype.N;oe.prototype.K=function(r){ms(r),this.s(ht),this.s(bt)};oe.prototype.writeFixedHash64=oe.prototype.K;oe.prototype.U=function(r){var e=this.a.length;MT(r);for(var t=0;t<r.length;t++){var i=r.charCodeAt(t);if(128>i)this.a.push(i);else if(2048>i)this.a.push(i>>6|192),this.a.push(i&63|128);else if(65536>i)if(55296<=i&&56319>=i&&t+1<r.length){var s=r.charCodeAt(t+1);56320<=s&&57343>=s&&(i=1024*(i-55296)+s-56320+65536,this.a.push(i>>18|240),this.a.push(i>>12&63|128),this.a.push(i>>6&63|128),this.a.push(i&63|128),t++)}else this.a.push(i>>12|224),this.a.push(i>>6&63|128),this.a.push(i&63|128)}return this.a.length-e};oe.prototype.writeString=oe.prototype.U;function Pe(r,e){this.lo=r,this.hi=e}Le("jspb.arith.UInt64",Pe,void 0);Pe.prototype.cmp=function(r){return this.hi<r.hi||this.hi==r.hi&&this.lo<r.lo?-1:this.hi==r.hi&&this.lo==r.lo?0:1};Pe.prototype.cmp=Pe.prototype.cmp;Pe.prototype.La=function(){return new Pe((this.lo>>>1|(this.hi&1)<<31)>>>0,this.hi>>>1>>>0)};Pe.prototype.rightShift=Pe.prototype.La;Pe.prototype.Da=function(){return new Pe(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)};Pe.prototype.leftShift=Pe.prototype.Da;Pe.prototype.cb=function(){return!!(this.hi&2147483648)};Pe.prototype.msb=Pe.prototype.cb;Pe.prototype.Ob=function(){return!!(this.lo&1)};Pe.prototype.lsb=Pe.prototype.Ob;Pe.prototype.Ua=function(){return this.lo==0&&this.hi==0};Pe.prototype.zero=Pe.prototype.Ua;Pe.prototype.add=function(r){return new Pe((this.lo+r.lo&4294967295)>>>0>>>0,((this.hi+r.hi&4294967295)>>>0)+(4294967296<=this.lo+r.lo?1:0)>>>0)};Pe.prototype.add=Pe.prototype.add;Pe.prototype.sub=function(r){return new Pe((this.lo-r.lo&4294967295)>>>0>>>0,((this.hi-r.hi&4294967295)>>>0)-(0>this.lo-r.lo?1:0)>>>0)};Pe.prototype.sub=Pe.prototype.sub;function O_(r,e){var t=r&65535;r>>>=16;var i=e&65535,s=e>>>16;for(e=t*i+65536*(t*s&65535)+65536*(r*i&65535),t=r*s+(t*s>>>16)+(r*i>>>16);4294967296<=e;)e-=4294967296,t+=1;return new Pe(e>>>0,t>>>0)}Pe.mul32x32=O_;Pe.prototype.eb=function(r){var e=O_(this.lo,r);return r=O_(this.hi,r),r.hi=r.lo,r.lo=0,e.add(r)};Pe.prototype.mul=Pe.prototype.eb;Pe.prototype.Xa=function(r){if(r==0)return[];var e=new Pe(0,0),t=new Pe(this.lo,this.hi);r=new Pe(r,0);for(var i=new Pe(1,0);!r.cb();)r=r.Da(),i=i.Da();for(;!i.Ua();)0>=r.cmp(t)&&(e=e.add(i),t=t.sub(r)),r=r.La(),i=i.La();return[e,t]};Pe.prototype.div=Pe.prototype.Xa;Pe.prototype.toString=function(){for(var r="",e=this;!e.Ua();){e=e.Xa(10);var t=e[0];r=e[1].lo+r,e=t}return r==""&&(r="0"),r};Pe.prototype.toString=Pe.prototype.toString;function Ga(r){for(var e=new Pe(0,0),t=new Pe(0,0),i=0;i<r.length;i++){if("0">r[i]||"9"<r[i])return null;t.lo=parseInt(r[i],10),e=e.eb(10).add(t)}return e}Pe.fromString=Ga;Pe.prototype.clone=function(){return new Pe(this.lo,this.hi)};Pe.prototype.clone=Pe.prototype.clone;function sr(r,e){this.lo=r,this.hi=e}Le("jspb.arith.Int64",sr,void 0);sr.prototype.add=function(r){return new sr((this.lo+r.lo&4294967295)>>>0>>>0,((this.hi+r.hi&4294967295)>>>0)+(4294967296<=this.lo+r.lo?1:0)>>>0)};sr.prototype.add=sr.prototype.add;sr.prototype.sub=function(r){return new sr((this.lo-r.lo&4294967295)>>>0>>>0,((this.hi-r.hi&4294967295)>>>0)-(0>this.lo-r.lo?1:0)>>>0)};sr.prototype.sub=sr.prototype.sub;sr.prototype.clone=function(){return new sr(this.lo,this.hi)};sr.prototype.clone=sr.prototype.clone;sr.prototype.toString=function(){var r=(this.hi&2147483648)!=0,e=new Pe(this.lo,this.hi);return r&&(e=new Pe(0,0).sub(e)),(r?"-":"")+e.toString()};sr.prototype.toString=sr.prototype.toString;function Vf(r){var e=0<r.length&&r[0]=="-";return e&&(r=r.substring(1)),r=Ga(r),r===null?null:(e&&(r=new Pe(0,0).sub(r)),new sr(r.lo,r.hi))}sr.fromString=Vf;function x(){this.c=[],this.b=0,this.a=new oe,this.h=[]}Le("jspb.BinaryWriter",x,void 0);function Hk(r,e){var t=r.a.end();r.c.push(t),r.c.push(e),r.b+=t.length+e.length}function Ot(r,e){return je(r,e,2),e=r.a.end(),r.c.push(e),r.b+=e.length,e.push(r.b),e}function Nt(r,e){var t=e.pop();for(t=r.b+r.a.length()-t,V(0<=t);127<t;)e.push(t&127|128),t>>>=7,r.b++;e.push(t),r.b++}x.prototype.pb=function(r,e,t){Hk(this,r.subarray(e,t))};x.prototype.writeSerializedMessage=x.prototype.pb;x.prototype.Pb=function(r,e,t){r!=null&&e!=null&&t!=null&&this.pb(r,e,t)};x.prototype.maybeWriteSerializedMessage=x.prototype.Pb;x.prototype.reset=function(){this.c=[],this.a.end(),this.b=0,this.h=[]};x.prototype.reset=x.prototype.reset;x.prototype.ab=function(){V(this.h.length==0);for(var r=new Uint8Array(this.b+this.a.length()),e=this.c,t=e.length,i=0,s=0;s<t;s++){var o=e[s];r.set(o,i),i+=o.length}return e=this.a.end(),r.set(e,i),i+=e.length,V(i==r.length),this.c=[r],r};x.prototype.getResultBuffer=x.prototype.ab;x.prototype.Kb=function(r){return bk(this.ab(),r)};x.prototype.getResultBase64String=x.prototype.Kb;x.prototype.Va=function(r){this.h.push(Ot(this,r))};x.prototype.beginSubMessage=x.prototype.Va;x.prototype.Ya=function(){V(0<=this.h.length),Nt(this,this.h.pop())};x.prototype.endSubMessage=x.prototype.Ya;function je(r,e,t){V(1<=e&&e==Math.floor(e)),r.a.j(8*e+t)}x.prototype.Nc=function(r,e,t){switch(r){case 1:this.J(e,t);break;case 2:this.L(e,t);break;case 3:this.T(e,t);break;case 4:this.V(e,t);break;case 5:this.S(e,t);break;case 6:this.Qa(e,t);break;case 7:this.Pa(e,t);break;case 8:this.I(e,t);break;case 9:this.U(e,t);break;case 10:tr("Group field type not supported in writeAny()");break;case 11:tr("Message field type not supported in writeAny()");break;case 12:this.ja(e,t);break;case 13:this.s(e,t);break;case 14:this.R(e,t);break;case 15:this.Ra(e,t);break;case 16:this.Sa(e,t);break;case 17:this.rb(e,t);break;case 18:this.sb(e,t);break;case 30:this.K(e,t);break;case 31:this.N(e,t);break;default:tr("Invalid field type in writeAny()")}};x.prototype.writeAny=x.prototype.Nc;function H_(r,e,t){t!=null&&(je(r,e,0),r.a.j(t))}function z_(r,e,t){t!=null&&(je(r,e,0),r.a.M(t))}x.prototype.S=function(r,e){e!=null&&(V(-2147483648<=e&&2147483648>e),z_(this,r,e))};x.prototype.writeInt32=x.prototype.S;x.prototype.ob=function(r,e){e!=null&&(e=parseInt(e,10),V(-2147483648<=e&&2147483648>e),z_(this,r,e))};x.prototype.writeInt32String=x.prototype.ob;x.prototype.T=function(r,e){e!=null&&(V(-9223372036854776e3<=e&&9223372036854776e3>e),e!=null&&(je(this,r,0),this.a.ua(e)))};x.prototype.writeInt64=x.prototype.T;x.prototype.ka=function(r,e){e!=null&&(e=Vf(e),je(this,r,0),this.a.l(e.lo,e.hi))};x.prototype.writeInt64String=x.prototype.ka;x.prototype.s=function(r,e){e!=null&&(V(0<=e&&4294967296>e),H_(this,r,e))};x.prototype.writeUint32=x.prototype.s;x.prototype.ub=function(r,e){e!=null&&(e=parseInt(e,10),V(0<=e&&4294967296>e),H_(this,r,e))};x.prototype.writeUint32String=x.prototype.ub;x.prototype.V=function(r,e){e!=null&&(V(0<=e&&18446744073709552e3>e),e!=null&&(je(this,r,0),this.a.va(e)))};x.prototype.writeUint64=x.prototype.V;x.prototype.vb=function(r,e){e!=null&&(e=Ga(e),je(this,r,0),this.a.l(e.lo,e.hi))};x.prototype.writeUint64String=x.prototype.vb;x.prototype.rb=function(r,e){e!=null&&(V(-2147483648<=e&&2147483648>e),e!=null&&(je(this,r,0),this.a.wa(e)))};x.prototype.writeSint32=x.prototype.rb;x.prototype.sb=function(r,e){e!=null&&(V(-9223372036854776e3<=e&&9223372036854776e3>e),e!=null&&(je(this,r,0),this.a.xa(e)))};x.prototype.writeSint64=x.prototype.sb;x.prototype.$d=function(r,e){e!=null&&e!=null&&(je(this,r,0),this.a.W(e))};x.prototype.writeSintHash64=x.prototype.$d;x.prototype.Zd=function(r,e){e!=null&&e!=null&&(je(this,r,0),this.a.Ta(e))};x.prototype.writeSint64String=x.prototype.Zd;x.prototype.Pa=function(r,e){e!=null&&(V(0<=e&&4294967296>e),je(this,r,5),this.a.s(e))};x.prototype.writeFixed32=x.prototype.Pa;x.prototype.Qa=function(r,e){e!=null&&(V(0<=e&&18446744073709552e3>e),je(this,r,1),this.a.V(e))};x.prototype.writeFixed64=x.prototype.Qa;x.prototype.nb=function(r,e){e!=null&&(e=Ga(e),je(this,r,1),this.a.A(e.lo,e.hi))};x.prototype.writeFixed64String=x.prototype.nb;x.prototype.Ra=function(r,e){e!=null&&(V(-2147483648<=e&&2147483648>e),je(this,r,5),this.a.S(e))};x.prototype.writeSfixed32=x.prototype.Ra;x.prototype.Sa=function(r,e){e!=null&&(V(-9223372036854776e3<=e&&9223372036854776e3>e),je(this,r,1),this.a.T(e))};x.prototype.writeSfixed64=x.prototype.Sa;x.prototype.qb=function(r,e){e!=null&&(e=Vf(e),je(this,r,1),this.a.A(e.lo,e.hi))};x.prototype.writeSfixed64String=x.prototype.qb;x.prototype.L=function(r,e){e!=null&&(je(this,r,5),this.a.L(e))};x.prototype.writeFloat=x.prototype.L;x.prototype.J=function(r,e){e!=null&&(je(this,r,1),this.a.J(e))};x.prototype.writeDouble=x.prototype.J;x.prototype.I=function(r,e){e!=null&&(V(typeof e=="boolean"||typeof e=="number"),je(this,r,0),this.a.I(e))};x.prototype.writeBool=x.prototype.I;x.prototype.R=function(r,e){e!=null&&(V(-2147483648<=e&&2147483648>e),je(this,r,0),this.a.M(e))};x.prototype.writeEnum=x.prototype.R;x.prototype.U=function(r,e){e!=null&&(r=Ot(this,r),this.a.U(e),Nt(this,r))};x.prototype.writeString=x.prototype.U;x.prototype.ja=function(r,e){e!=null&&(e=Uf(e),je(this,r,2),this.a.j(e.length),Hk(this,e))};x.prototype.writeBytes=x.prototype.ja;x.prototype.Rc=function(r,e,t){e!=null&&(r=Ot(this,r),t(e,this),Nt(this,r))};x.prototype.writeMessage=x.prototype.Rc;x.prototype.Sc=function(r,e,t){e!=null&&(je(this,1,3),je(this,2,0),this.a.M(r),r=Ot(this,3),t(e,this),Nt(this,r),je(this,1,4))};x.prototype.writeMessageSet=x.prototype.Sc;x.prototype.Oc=function(r,e,t){e!=null&&(je(this,r,3),t(e,this),je(this,r,4))};x.prototype.writeGroup=x.prototype.Oc;x.prototype.K=function(r,e){e!=null&&(V(e.length==8),je(this,r,1),this.a.K(e))};x.prototype.writeFixedHash64=x.prototype.K;x.prototype.N=function(r,e){e!=null&&(V(e.length==8),je(this,r,0),this.a.N(e))};x.prototype.writeVarintHash64=x.prototype.N;x.prototype.A=function(r,e,t){je(this,r,1),this.a.A(e,t)};x.prototype.writeSplitFixed64=x.prototype.A;x.prototype.l=function(r,e,t){je(this,r,0),this.a.l(e,t)};x.prototype.writeSplitVarint64=x.prototype.l;x.prototype.tb=function(r,e,t){je(this,r,0);var i=this.a;Nf(e,t,function(s,o){i.l(s>>>0,o>>>0)})};x.prototype.writeSplitZigzagVarint64=x.prototype.tb;x.prototype.Ed=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)z_(this,r,e[t])};x.prototype.writeRepeatedInt32=x.prototype.Ed;x.prototype.Fd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.ob(r,e[t])};x.prototype.writeRepeatedInt32String=x.prototype.Fd;x.prototype.Gd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(je(this,r,0),this.a.ua(i))}};x.prototype.writeRepeatedInt64=x.prototype.Gd;x.prototype.Qd=function(r,e,t,i){if(e!=null)for(var s=0;s<e.length;s++)this.A(r,t(e[s]),i(e[s]))};x.prototype.writeRepeatedSplitFixed64=x.prototype.Qd;x.prototype.Rd=function(r,e,t,i){if(e!=null)for(var s=0;s<e.length;s++)this.l(r,t(e[s]),i(e[s]))};x.prototype.writeRepeatedSplitVarint64=x.prototype.Rd;x.prototype.Sd=function(r,e,t,i){if(e!=null)for(var s=0;s<e.length;s++)this.tb(r,t(e[s]),i(e[s]))};x.prototype.writeRepeatedSplitZigzagVarint64=x.prototype.Sd;x.prototype.Hd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.ka(r,e[t])};x.prototype.writeRepeatedInt64String=x.prototype.Hd;x.prototype.Ud=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)H_(this,r,e[t])};x.prototype.writeRepeatedUint32=x.prototype.Ud;x.prototype.Vd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.ub(r,e[t])};x.prototype.writeRepeatedUint32String=x.prototype.Vd;x.prototype.Wd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(je(this,r,0),this.a.va(i))}};x.prototype.writeRepeatedUint64=x.prototype.Wd;x.prototype.Xd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.vb(r,e[t])};x.prototype.writeRepeatedUint64String=x.prototype.Xd;x.prototype.Md=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(je(this,r,0),this.a.wa(i))}};x.prototype.writeRepeatedSint32=x.prototype.Md;x.prototype.Nd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(je(this,r,0),this.a.xa(i))}};x.prototype.writeRepeatedSint64=x.prototype.Nd;x.prototype.Od=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(je(this,r,0),this.a.Ta(i))}};x.prototype.writeRepeatedSint64String=x.prototype.Od;x.prototype.Pd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(je(this,r,0),this.a.W(i))}};x.prototype.writeRepeatedSintHash64=x.prototype.Pd;x.prototype.yd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.Pa(r,e[t])};x.prototype.writeRepeatedFixed32=x.prototype.yd;x.prototype.zd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.Qa(r,e[t])};x.prototype.writeRepeatedFixed64=x.prototype.zd;x.prototype.Ad=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.nb(r,e[t])};x.prototype.writeRepeatedFixed64String=x.prototype.Ad;x.prototype.Jd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.Ra(r,e[t])};x.prototype.writeRepeatedSfixed32=x.prototype.Jd;x.prototype.Kd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.Sa(r,e[t])};x.prototype.writeRepeatedSfixed64=x.prototype.Kd;x.prototype.Ld=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.qb(r,e[t])};x.prototype.writeRepeatedSfixed64String=x.prototype.Ld;x.prototype.Cd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.L(r,e[t])};x.prototype.writeRepeatedFloat=x.prototype.Cd;x.prototype.wd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.J(r,e[t])};x.prototype.writeRepeatedDouble=x.prototype.wd;x.prototype.ud=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.I(r,e[t])};x.prototype.writeRepeatedBool=x.prototype.ud;x.prototype.xd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.R(r,e[t])};x.prototype.writeRepeatedEnum=x.prototype.xd;x.prototype.Td=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.U(r,e[t])};x.prototype.writeRepeatedString=x.prototype.Td;x.prototype.vd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.ja(r,e[t])};x.prototype.writeRepeatedBytes=x.prototype.vd;x.prototype.Id=function(r,e,t){if(e!=null)for(var i=0;i<e.length;i++){var s=Ot(this,r);t(e[i],this),Nt(this,s)}};x.prototype.writeRepeatedMessage=x.prototype.Id;x.prototype.Dd=function(r,e,t){if(e!=null)for(var i=0;i<e.length;i++)je(this,r,3),t(e[i],this),je(this,r,4)};x.prototype.writeRepeatedGroup=x.prototype.Dd;x.prototype.Bd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.K(r,e[t])};x.prototype.writeRepeatedFixedHash64=x.prototype.Bd;x.prototype.Yd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.N(r,e[t])};x.prototype.writeRepeatedVarintHash64=x.prototype.Yd;x.prototype.ad=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.M(e[t]);Nt(this,r)}};x.prototype.writePackedInt32=x.prototype.ad;x.prototype.bd=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.M(parseInt(e[t],10));Nt(this,r)}};x.prototype.writePackedInt32String=x.prototype.bd;x.prototype.cd=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.ua(e[t]);Nt(this,r)}};x.prototype.writePackedInt64=x.prototype.cd;x.prototype.md=function(r,e,t,i){if(e!=null){r=Ot(this,r);for(var s=0;s<e.length;s++)this.a.A(t(e[s]),i(e[s]));Nt(this,r)}};x.prototype.writePackedSplitFixed64=x.prototype.md;x.prototype.nd=function(r,e,t,i){if(e!=null){r=Ot(this,r);for(var s=0;s<e.length;s++)this.a.l(t(e[s]),i(e[s]));Nt(this,r)}};x.prototype.writePackedSplitVarint64=x.prototype.nd;x.prototype.od=function(r,e,t,i){if(e!=null){r=Ot(this,r);for(var s=this.a,o=0;o<e.length;o++)Nf(t(e[o]),i(e[o]),function(a,u){s.l(a>>>0,u>>>0)});Nt(this,r)}};x.prototype.writePackedSplitZigzagVarint64=x.prototype.od;x.prototype.dd=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++){var i=Vf(e[t]);this.a.l(i.lo,i.hi)}Nt(this,r)}};x.prototype.writePackedInt64String=x.prototype.dd;x.prototype.pd=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.j(e[t]);Nt(this,r)}};x.prototype.writePackedUint32=x.prototype.pd;x.prototype.qd=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.j(parseInt(e[t],10));Nt(this,r)}};x.prototype.writePackedUint32String=x.prototype.qd;x.prototype.rd=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.va(e[t]);Nt(this,r)}};x.prototype.writePackedUint64=x.prototype.rd;x.prototype.sd=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++){var i=Ga(e[t]);this.a.l(i.lo,i.hi)}Nt(this,r)}};x.prototype.writePackedUint64String=x.prototype.sd;x.prototype.hd=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.wa(e[t]);Nt(this,r)}};x.prototype.writePackedSint32=x.prototype.hd;x.prototype.jd=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.xa(e[t]);Nt(this,r)}};x.prototype.writePackedSint64=x.prototype.jd;x.prototype.kd=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.W(Su(e[t]));Nt(this,r)}};x.prototype.writePackedSint64String=x.prototype.kd;x.prototype.ld=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.W(e[t]);Nt(this,r)}};x.prototype.writePackedSintHash64=x.prototype.ld;x.prototype.Wc=function(r,e){if(e!=null&&e.length)for(je(this,r,2),this.a.j(4*e.length),r=0;r<e.length;r++)this.a.s(e[r])};x.prototype.writePackedFixed32=x.prototype.Wc;x.prototype.Xc=function(r,e){if(e!=null&&e.length)for(je(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++)this.a.V(e[r])};x.prototype.writePackedFixed64=x.prototype.Xc;x.prototype.Yc=function(r,e){if(e!=null&&e.length)for(je(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++){var t=Ga(e[r]);this.a.A(t.lo,t.hi)}};x.prototype.writePackedFixed64String=x.prototype.Yc;x.prototype.ed=function(r,e){if(e!=null&&e.length)for(je(this,r,2),this.a.j(4*e.length),r=0;r<e.length;r++)this.a.S(e[r])};x.prototype.writePackedSfixed32=x.prototype.ed;x.prototype.fd=function(r,e){if(e!=null&&e.length)for(je(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++)this.a.T(e[r])};x.prototype.writePackedSfixed64=x.prototype.fd;x.prototype.gd=function(r,e){if(e!=null&&e.length)for(je(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++)this.a.ka(e[r])};x.prototype.writePackedSfixed64String=x.prototype.gd;x.prototype.$c=function(r,e){if(e!=null&&e.length)for(je(this,r,2),this.a.j(4*e.length),r=0;r<e.length;r++)this.a.L(e[r])};x.prototype.writePackedFloat=x.prototype.$c;x.prototype.Uc=function(r,e){if(e!=null&&e.length)for(je(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++)this.a.J(e[r])};x.prototype.writePackedDouble=x.prototype.Uc;x.prototype.Tc=function(r,e){if(e!=null&&e.length)for(je(this,r,2),this.a.j(e.length),r=0;r<e.length;r++)this.a.I(e[r])};x.prototype.writePackedBool=x.prototype.Tc;x.prototype.Vc=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.R(e[t]);Nt(this,r)}};x.prototype.writePackedEnum=x.prototype.Vc;x.prototype.Zc=function(r,e){if(e!=null&&e.length)for(je(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++)this.a.K(e[r])};x.prototype.writePackedFixedHash64=x.prototype.Zc;x.prototype.td=function(r,e){if(e!=null&&e.length){r=Ot(this,r);for(var t=0;t<e.length;t++)this.a.N(e[t]);Nt(this,r)}};x.prototype.writePackedVarintHash64=x.prototype.td;typeof ar=="object"&&(ar.debug=Ti,ar.Map=Ge,ar.Message=ge,ar.BinaryReader=E,ar.BinaryWriter=x,ar.ExtensionFieldInfo=fu,ar.ExtensionFieldBinaryInfo=Ak,ar.exportSymbol=ET,ar.inherits=LT,ar.object={extend:TT},ar.typeOf=vn)});var Gy=class r extends Laya.EventDispatcher{static getInstance(){return r._instance||(r._instance=new r),r._instance}},w=Gy.getInstance();var S=class{};S.MOUSE_HOLDON="MOUSE_HOLDON",S.EVENT_OPEN_MODULE="EVENT_OPEN_MODULE",S.EVENT_MODULE_ADDED="EVENT_MODULE_ADDED",S.EVENT_CLOSE_MODULE="EVENT_CLOSE_MODULE",S.EVENT_CHECK_REMAIN="EVENT_CHECK_REMAIN",S.EVENT_LOADED_COMPLETE="EVENT_LOAD_COMPLETE",S.EVENT_LOADED_SCENE_BG_COM="EVENT_LOADED_SCENE_BG_COM",S.EVENT_LOAD_SKIN_COMPLETE="EVENT_LOAD_SKIN_COMPLETE",S.EVENT_LOAD_HEAD_SKIN_COMPLETE="EVENT_LOAD_HEAD_SKIN_COMPLETE",S.EVENT_LOADING_SUC="EVENT_LOADING_SUC",S.EVENT_BACK_TO_LOGIN="EVENT_BACK_TO_LOGIN",S.EVENT_LOGIN_GAME_END="EVENT_LOGIN_GAME_END",S.EVENT_ENTER_MAIN="EVENT_ENTER_MAIN",S.EVENT_CHANGE_HEAD="EVENT_CHANGE_HEAD",S.EVENT_MODIFY_HEAD="EVENT_MODIFY_HEAD",S.EVENT_ITEM_UPDATE="EVENT_ITEM_UPDATE",S.EVENT_ROLE_UPDATE="EVENT_ROLE_UPDATE",S.STAGE_ON_BLUR="STAGE_ON_BLUR",S.STAGE_ON_FOCUS="STAGE_ON_FOCUS",S.ACCOUNTVO_UPDATE="ACCOUNTVO_UPDATE",S.EVENT_WAIT_PLAYERINFO="EVENT_WAIT_PLAYERINFO",S.EVENT_END_HEROBUY="EVENT_END_HEROBUY",S.EVENT_END_HEROTRANSFER="EVENT_END_HEROTRANSFER",S.EVENT_REFRESH_HEROTRANSFER="EVENT_REFRESH_HEROTRANSFER",S.EVENT_REFRESH_QUAN_STATUS="EVENT_REFRESH_QUAN_STATUS",S.EVENT_REFRESH_ITEM_ONCHAIN_STATUS="EVENT_REFRESH_ITEM_ONCHAIN_STATUS",S.EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS="EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS",S.EVENT_REFRESH_NODE_ONCHAIN_STATUS="EVENT_REFRESH_NODE_ONCHAIN_STATUS",S.EVENT_REFRESH_UNIONMEMBER_TRANSFER="EVENT_REFRESH_UNIONMEMBER_TRANSFER",S.EVENT_REFRESH_KNAPSACK="EVENT_REFRESH_KNAPSACK",S.EVENT_ADD_UNIONMEMBER_ADDRESS="EVENT_ADD_UNIONMEMBER_ADDRESS",S.EVENT_ADD_TICKET_ADDRESS="EVENT_ADD_TICKET_ADDRESS",S.EVENT_EMOJI_ICON_SELECT="EVENT_EMOJI_ICON_SELECT",S.EVENT_COLOR_ICON_SELECT="EVENT_COLOR_ICON_SELECT",S.EVENT_CHECK_ICON_SELECT="EVENT_CHECK_ICON_SELECT",S.EVENT_CHECK_PLAYER_NUM_SELECT="EVENT_CHECK_PLAYER_NUM_SELECT",S.EVENT_CHECK_NODE_SELECT="EVENT_CHECK_NODE_SELECT",S.PACKAGE_UPDATE_ITEM="PACKAGE_UPDATE_ITEM",S.IMPROVE_SUCESS_EVENT="IMPROVE_SUCESS_EVENT",S.CHANG_POTRAIT="CHANG_POTRAIT",S.ROLE_INFO_CHANGE="ROLE_INFO_CHANGE",S.ROLE_INFO_UPDATE="ROLE_INFO_UPDATE",S.UPDATE_ASSETS="UPDATE_ASSETS",S.REFRESH_MAIN_TASK="REFRESH_MAIN_TASK",S.RECIVE_SUCESS_SERVICE="RECIVE_SUCESS_SERVICE",S.SCENE_ROLE_COMPELTE="SCENE_ROLE_COMPELTE",S.FITTING_CLOTH_BTN="FITTING_CLOTH_BTN",S.STORE_CLICKBG_EVENT="STORE_CLICKBG_EVENT",S.CLOSE_BG_VIEW="CLOSE_BG_VIEW",S.EVENT_UPDATE_ONLINE="EVENT_UPDATE_ONLINE",S.VIP_INFO_CHANGE="VIP_INFO_CHANGE",S.EVENT_FUNCTION_OPEN_UPDATE="EVENT_FUNCTION_OPEN_UPDATE",S.EVENT_ADD_ACTIVITY="EVENT_ADD_ACTIVITY",S.EVENT_REMOVE_ACTIVITY="EVENT_REMOVE_ACTIVITY",S.UPDATE_CHAO_PIAO="UPDATE_CHAO_PIAO",S.UPDATE_EXCHANGE_INFO="UPDATE_EXCHANGE_INFO",S.UPDATE_RED_STATE_EVENT="UPDATE_RED_STATE_EVENT",S.SYSTEM_OPEN_TIME_INITED="SYSTEM_OPEN_TIME_INITED",S.EVENT_OPEN_SHARE="EVENT_OPEN_SHARE",S.CHANGE_SCENE_BASE_ROLE_LAYER="CHANGE_SCENE_BASE_ROLE_LAYER",S.EVENT_CLICK_NUM="EVENT_CLICK_NUM",S.EVENT_CLICK_SPACE="EVENT_CLICK_SPACE",S.EVENT_HERO_DRAW_BACK="EVENT_HERO_DRAW_BACK",S.EVENT_Close_CreateRoom="EVENT_Close_CreateRoom",S.EVENT_ENTER_MATCH_ROOM="EVENT_ENTER_MATCH_ROOM",S.EVENT_UPDATE_MATCH_ROOM="EVENT_UPDATE_MATCH_ROOM",S.EVENT_CLICK_HERO="EVENT_CLICK_HERO",S.UPDATE_KILL_NUM="UPDATE_KILL_NUM",S.EVENT_PVP_INIT_DATA="EVENT_PVP_INIT_DATA",S.EVENT_PVP_RESTORE_DATA="EVENT_PVP_RESTORE_DATA",S.EVENT_FirstBlood="EVENT_FirstBlood",S.EVENT_MutiKill="EVENT_MutiKill",S.EVENT_GameScene_Gray="EVENT_GameScene_Gray",S.EVENT_Game_Delay="EVENT_Game_Delay",S.EVENT_UPDATE_ITEM_SKILL_COOL="UPDATE_SKILL_COOLTIME",S.EVENT_UPDATE_GLOBAL_COOL="EVENT_UPDATE_GLOBAL_COOL",S.EVENT_UPDATE_REDECE_COOL="EVENT_UPDATE_REDECE_COOL",S.EVENT_REFRESH_BAN_ACCOUNT="EVENT_REFRESH_BAN_ACCOUNT",S.EVENT_SUB_GUILD_UPDATE="EVENT_SUB_GUILD_UPDATE",S.EVENT_UNION_APPLY_MEMBER_UPDATE="EVENT_UNION_APPLY_MEMBER_UPDATE",S.EVENT_WELFARE_CLAIM="EVENT_WELFARE_CLAIM",S.EVENT_RECHARGE_GET="EVENT_RECHARGE_GET",S.CHANGE_WALLET_HERO="CHANGE_WALLET_HERO",S.CHANGE_ASSET_CHAIN="CHANGE_ASSET_CHAIN",S.CHANGE_WALLET_PROP="CHANGE_WALLET_PROP",S.CREATE_SUB_WALLET_SUCCESS="CREATE_SUB_WALLET_SUCCESS",S.REFRESH_ALL_WITHDRAW_DATA="REFRESH_ALL_WITHDRAW_DATA",S.CHANGE_FRIEND_APPLY_LIST="CHANGE_FRIEND_APPLY_LIST",S.CHANGE_FRIEND_LIST="CHANGE_FRIEND_LIST",S.REFRSH_RED="REFRSH_RED",S.REFRSH_APPLY_FRIEND_LIST="REFRSH_APPLY_FRIEND_LIST",S.ADD_AIR_WALLET_ITEM="ADD_AIR_WALLET_ITEM",S.ADD_AIR_SUB_WALLET_NAME="ADD_AIR_SUB_WALLET_NAME",S.AIR_SUB_WALLET_OPENHERO="AIR_SUB_WALLET_OPENHERO",S.CHANGE_WALLET_HERO_AIR="CHANGE_WALLET_HERO_AIR",S.UPDATE_UNION_MEMBER_LIST="UPDATE_UNION_MEMBER_LIST",S.EVENT_ADD_MONEY_ADDRESS="EVENT_ADD_MONEY_ADDRESS",S.REFRESH_MAINSCENE_HEAD_RED="REFRESH_MAINSCENE_HEAD_RED",S.REFRESH_ROLEINFO_RED="REFRESH_ROLEINFO_RED",S.REFRESH_ACTIVITY_RED="REFRESH_ACTIVITY_RED",S.SHOW_EQUIP_TIP="SHOW_EQUIP_TIP",S.REFRESH_RANK_DIALOG_RED="REFRESH_RANK_DIALOG_RED",S.REFRESH_MAIL_RED="REFRESH_MAIL_RED",S.SHOW_EQUIP_SHOP_TIP="SHOW_EQUIP_SHOP_TIP",S.ON_CONNECT_GAME_SERVER="ON_CONNECT_GAME_SERVER",S.LENGTH_CHANGE="LENGTH_CHANGE",S.KILL_SNAKE="KILL_SNAKE",S.UPDATE_LOCAL_WALLET_LIST_EVENT="UPDATE_LOCAL_WALLET_LIST_EVENT",S.UPDATE_TOKEN_BALANCE="UPDATE_TOKEN_BALANCE",S.UPDATE_BAG_INFO="UPDATE_BAG_INFO",S.EVENT_CHANGE_NODE="EVENT_CHANGE_NODE",S.EVENT_NEW_NOTICE="EVENT_NEW_NOTICE",S.EVENT_CHANGE_CLUB_RATE="EVENT_CHANGE_CLUB_RATE";var ft=class r{constructor(e=0,t=0){this.x=e,this.y=t}static create(e=0,t=0){return new r(e,t)}assign(e){return this.x=e.x,this.y=e.y,this}add(e){return new r(this.x+e.x,this.y+e.y)}sub(e){return new r(this.x-e.x,this.y-e.y)}mul(e){return new r(this.x*e,this.y*e)}getRotation(){let e=Math.atan2(this.y,this.x)*180/Math.PI;return e<0&&(e+=360),e}getRotationTo(e){let t=e.x-this.x,i=e.y-this.y,s=Math.atan2(i,-t)*180/Math.PI;return s<0&&(s+=360),s}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y);return e!==0&&(this.x/=e,this.y/=e),this}rotate(e){let t=e*Math.PI/180,i=Math.sin(t),s=Math.cos(t),o=this.x,a=this.y;this.x=o*s-a*i,this.y=o*i+a*s}dot(e){return this.x*e.x+this.y*e.y}equal(e){return this.x===e.x&&this.y===e.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}init(e=0,t=0){return this.x=e,this.y=t,this}clone(){return new r(this.x,this.y)}clamp(e,t){let i=this.length();return i>t&&this.normalize().mul(t),i<e&&this.normalize().mul(e),this}reset(){return this.x=0,this.y=0,this}toString(){return`(${this.x},${this.y})`}};var ae=class ae{constructor(){this._touchEnabled=!0;if(ae._instance)throw new Error("LayerManager是单例,不可new.");ae._instance=this}get m_sprPanelLayer(){return this._m_sprPanelLayer}set m_sprPanelLayer(e){this._m_sprPanelLayer=e}get m_sprMainUILayer(){return this._m_sprMainUILayer}set m_sprMainUILayer(e){this._m_sprMainUILayer=e}get m_sprTipLayer(){return this._m_sprTipLayer}set m_sprTipLayer(e){this._m_sprTipLayer=e}static get instence(){return ae._instance||(ae._instance=new ae),ae._instance}init(){this.m_sprSceneLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprSceneLayer),this.m_sprMainUILayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprMainUILayer),this.m_sprPanelLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprPanelLayer),this.m_sprPopLayer=new Laya.Sprite,this.m_sprPopLayer.mouseThrough=!0,Laya.stage.addChild(this.m_sprPopLayer),this.m_sprTipLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTipLayer),this.m_sprGuideLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprGuideLayer),this.m_sprTopLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTopLayer)}get touchEnabled(){return this._touchEnabled}set touchEnabled(e){this._touchEnabled!=e&&(this._touchEnabled=e,this.m_sprSceneLayer.mouseEnabled=this._touchEnabled,this.m_sprMainUILayer.mouseEnabled=this._touchEnabled,this.m_sprPanelLayer.mouseEnabled=this._touchEnabled,this.m_sprPopLayer.mouseEnabled=this._touchEnabled,this.m_sprTipLayer.mouseEnabled=this._touchEnabled,this.m_sprGuideLayer.mouseEnabled=this._touchEnabled,this.m_sprTopLayer.mouseEnabled=this._touchEnabled)}addToLayerAndSet(e,t=ae.M_PANEL,i=ae.CENTER){this.addToLayer(e,t),this.setPosition(e,i)}getLayerIndex(e,t=ae.M_PANEL){let i;switch(t){case ae.M_SCENE:i=this.m_sprSceneLayer.getChildIndex(e);break;case ae.M_MAINUI:i=this.m_sprMainUILayer.getChildIndex(e);break;case ae.M_PANEL:i=this.m_sprPanelLayer.getChildIndex(e);break;case ae.M_POP:i=this.m_sprPopLayer.getChildIndex(e);break;case ae.M_TIP:i=this.m_sprTipLayer.getChildIndex(e);break;case ae.M_GUIDE:i=this.m_sprGuideLayer.getChildIndex(e);break;case ae.M_TOP:i=this.m_sprTopLayer.getChildIndex(e);break}return i}addToLayerAt(e,t=ae.M_PANEL,i=0){switch(t){case ae.M_SCENE:this.m_sprSceneLayer.addChildAt(e,i);break;case ae.M_MAINUI:this.m_sprMainUILayer.addChildAt(e,i);break;case ae.M_PANEL:this.m_sprPanelLayer.addChildAt(e,i);break;case ae.M_POP:this.m_sprPopLayer.addChildAt(e,i);break;case ae.M_TIP:this.m_sprTipLayer.addChildAt(e,i);break;case ae.M_GUIDE:this.m_sprGuideLayer.addChildAt(e,i);break;case ae.M_TOP:this.m_sprTopLayer.addChildAt(e,i);break}}addToLayer(e,t=ae.M_PANEL){switch(t){case ae.M_SCENE:this.m_sprSceneLayer.addChild(e);break;case ae.M_MAINUI:this.m_sprMainUILayer.addChild(e);break;case ae.M_PANEL:this.m_sprPanelLayer.addChild(e);break;case ae.M_POP:this.m_sprPopLayer.addChild(e);break;case ae.M_TIP:this.m_sprTipLayer.addChild(e);break;case ae.M_GUIDE:this.m_sprGuideLayer.addChild(e);break;case ae.M_TOP:this.m_sprTopLayer.addChild(e);break}}removeFromLayer(e,t){switch(t){case ae.M_SCENE:this.m_sprSceneLayer.removeChild(e);break;case ae.M_MAINUI:this.m_sprMainUILayer.removeChild(e);break;case ae.M_PANEL:this.m_sprPanelLayer.removeChild(e);break;case ae.M_POP:this.m_sprPopLayer.removeChild(e);break;case ae.M_GUIDE:this.m_sprGuideLayer.removeChild(e);break;case ae.M_TOP:this.m_sprTopLayer.removeChild(e);break}}clearLayer(e){switch(e){case ae.M_SCENE:this.m_sprSceneLayer.removeChildren();break;case ae.M_MAINUI:this.m_sprSceneLayer.removeChildren();break;case ae.M_PANEL:this.m_sprSceneLayer.removeChildren();break;case ae.M_POP:this.m_sprSceneLayer.removeChildren();break;case ae.M_TOP:this.m_sprSceneLayer.removeChildren();break}}get stageWidth(){let e;return e=Laya.stage.width,e}get stageHeight(){let e;return e=Laya.stage.height,e}setPosition(e,t,i=0,s=0,o=!1,a=!1){let u=Laya.stage.width,p=Laya.stage.height;switch(this.m_iStageWidth=u,this.m_iStageHeight=p,t){case ae.UP:e.x=o?u/2:(u-e.width*e.scaleX)/2,e.y=0;break;case ae.DOWN:e.x=o?u/2:(u-e.width*e.scaleX)/2,e.y=p-e.height*e.scaleY;break;case ae.LEFT:e.x=0,e.y=a?p/2:(p-e.height*e.scaleY)/2;break;case ae.RIGHT:e.x=u-e.width*e.scaleX,e.y=a?p/2:(p-e.height*e.scaleY)/2;break;case ae.LEFTUP:e.x=0,e.y=0;break;case ae.RIGHTUP:e.x=u-e.width*e.scaleX,e.y=0;break;case ae.LEFTDOWN:e.x=0,e.y=p-e.height*e.scaleY;break;case ae.RIGHTDOWN:e.x=u-e.width*e.scaleX,e.y=p-e.height*e.scaleY;break;case ae.CENTERLEFT:e.x=u/2-e.width*e.scaleX,e.y=a?p/2:(p-e.height*e.scaleY)/2;break;case ae.CENTERRIGHT:e.x=u/2,e.y=a?p/2:(p-e.height*e.scaleY)/2;break;case ae.CENTER:e.x=o?u/2:(u-e.width*e.scaleX)/2,e.y=a?p/2:(p-e.height*e.scaleY)/2;break;default:break}e.x+=i,e.y+=s}setLayer(e,t,i){if(!e||!t||e.parent!=t.parent)return;let s=e.parent.getChildIndex(e),o=t.parent.getChildIndex(t);i?s>o&&(e.parent.setChildIndex(e,o),e.parent.setChildIndex(t,s)):s<o&&(e.parent.setChildIndex(e,o),e.parent.setChildIndex(t,s))}};ae.M_SCENE=1,ae.M_MAINUI=2,ae.M_PANEL=3,ae.M_POP=4,ae.M_TIP=5,ae.M_GUIDE=7,ae.M_TOP=6,ae.UP=1,ae.DOWN=16,ae.LEFT=256,ae.RIGHT=4096,ae.CENTER=65536,ae.LEFTUP=ae.LEFT|ae.UP,ae.RIGHTUP=ae.RIGHT|ae.UP,ae.LEFTDOWN=ae.LEFT|ae.DOWN,ae.RIGHTDOWN=ae.RIGHT|ae.DOWN,ae.CENTERLEFT=ae.CENTER|ae.LEFT,ae.CENTERRIGHT=ae.CENTER|ae.RIGHT,ae.MOVE=-1;var te=ae;var Ne=class{constructor(e=!1){this._cachedValues=[];this._dirty=!0;this._needCache=!1;this._map=new Map;this.SERIALIZATION_NUM=new Date().getTime(),this._needCache=e}get values(){return this._needCache?(this._dirty&&(this._cachedValues=[...this._map.values()],this._dirty=!1),this._cachedValues):[...this._map.values()]}get keys(){return[...this._map.keys()]}set(e,t){this._map.set(e,t),this._dirty=!0}get(e){return this._map.get(e)}remove(e){return this._dirty=!0,this._map.delete(e)}clear(){this._map.clear(),this._cachedValues.length=0,this._dirty=!0}has(e){return this._map.has(e)}get size(){return this._map.size}getValues(){return this._map.values()}};var tt=class{constructor(){this._keys=[];this.THIS_ID="id"}init(e){for(let t in e){this._keys.push(t);let i=e[t];e[t]instanceof String&&String(e[t]).indexOf("[[")>=0&&(i=JSON.parse(e[t])),this[t]=i}}checkItems(){}};var ln=class extends tt{constructor(){super()}};var Cn=class Cn{constructor(){this._list=[];this._isNoticing=!1;this._isListener=!1}static getInstance(){return Cn._instance||(Cn._instance=new Cn),Cn._instance}notice(e){this._isNoticing?this._isListener||(this._isListener=!0,this._list.push(e),Laya.timer.loop(Cn.Tip_Interval,this,this.onInterVal)):(this._list.push(e),this.noticeOne())}noticeOne(){var e=re.m_objModuleViews.TxtNoticeView;let t;Laya.loader.load(e).then(i=>{if(!i){console.log("noticeOne : "+e+"  res is null");return}t=Laya.Pool.getItemByCreateFun("txtNotice",i.create,i);let s=this._list.shift();t.notice(s),Laya.stage.addChild(t),t.x=te.instence.stageWidth*.5-t.width*.5,t.y=te.instence.stageHeight*.5-t.height*.5,Laya.Tween.to(t,{y:t.y-250,alpha:.5},1e3,null,Laya.Handler.create(this,this.onFinish,[t]),1e3)})}onFinish(e){e&&(e.visible=!1,e.removeSelf())}onInterVal(){this._list.length>=1?this.noticeOne():(this._isNoticing=!1,this._isListener=!1,Laya.timer.clear(this,this.onInterVal))}};Cn.Tip_Interval=1e3;var Vy=Cn,De=Vy.getInstance();var Ss=class extends tt{};var ks=class{constructor(){}};ks.Lan_en=1,ks.Lan_zh=6,ks.Lan_tr=7;var Be=class{constructor(){}};Be.NO_ALL=-1,Be.YES=1,Be.NO=2,Be.SURE=4,Be.CANCEL=8,Be.CLOSE=16,Be.RETURN_YES=1,Be.RETURN_NO=2,Be.RETURN_NONE=3,Be.BASEALERTVIEW="BaseAlertDialog",Be.MatchConfimDialog="MatchConfimDialog",Be.InviteConfimDialog="InviteConfimDialog",Be.ApplyConfimDialog="ApplyConfimDialog",Be.BUYCONFIRMVIEW="BuyConfirmView",Be.GUILDQUITVIEW="GuildQuitView",Be.BuyItemConfirmView="BuyItemConfirmView",Be.DOWNLOADALERT="DownLoadAlert";var pe=class{};pe.M_SCENE_MAIN="M_SCENE_MAIN",pe.M_SCENE_SHOP="M_SCENE_SHOP",pe.M_SCENE_AIRDROP="M_SCENE_AIRDROP",pe.M_SCENE_HERO="M_SCENE_HERO",pe.M_SCENE_RANK="M_SCENE_RANK",pe.M_SCENE_CLUB="M_SCENE_CLUB",pe.M_SCENE_PRE_LOAD="M_SCENE_PRE_LOAD",pe.M_SCENE_MATCH_READY="M_SCENE_MATCH_READY",pe.M_SCENE_MATCH="M_SCENE_MATCH",pe.M_SCENE_SNAKE_MATCH="M_SCENE_SNAKE_MATCH",pe.M_SCENE_AI_ARENA="M_SCENE_AI_ARENA",pe.M_SCENE_OPEN_GAME="M_SCENE_OPEN_GAME",pe.M_SCENE_ASSET="M_SCENE_ASSET",pe.M_SCENE_DIG="M_SCENE_DIG",pe.M_SCENE_MAIL="M_SCENE_MAIL",pe.M_SCENE_KNAPSACK="M_SCENE_KNAPSACK",pe.M_SCENE_UNION="M_SCENE_UNION",pe.M_SCENE_MYUNION="M_SCENE_MYUNION",pe.M_SCENE_LCPOOL="M_SCENE_LCPOOL",pe.M_SCENE_ARENA="M_SCENE_ARENA",pe.M_SCENE_FRIEND="M_SCENE_FRIEND",pe.M_SCENE_IGO_PAGE="M_SCENE_IGO_PAGE",pe.M_SCENE_DAILY_TASK="M_SCENE_DAILY_TASK",pe.M_SCENE_PVE="M_SCENE_PVE",pe.M_SCENE_ROLE="M_SCENE_ROLE",pe.M_SCENE_SETTING="M_SCENE_SETTING";var $e=class{};$e.TYPE_EXP=3003,$e.TYPE_GOLD=3005,$e.TYPE_TOX=3001,$e.TYPE_USDT=3004,$e.TYPE_BTC=3006,$e.TYPE_ETH=3007,$e.TYPE_BTOX=3011,$e.TYPE_GALA=3010,$e.TYPE_BNB=3013,$e.TYPE_GGG=3017,$e.TYPE_KLAY=3015,$e.TYPE_BNRY=3016,$e.TYPE_LLE=3017,$e.TYPE_PC=3022,$e.TYPE_SOL=3023,$e.TYPE_MNT=3024,$e.TYPE_PAS=3025,$e.TYPE_QUAN_PVE=1980,$e.TYPE_QUAN_MNT=4001,$e.TYPE_REWARD_TOKEN=-9999;var Wy=class r{constructor(){}static getInstance(){return r._instance||(r._instance=new r),r._instance}AlertByType(e,t=null,i=0,s=null,o=null,a=!1,u=null){i==0&&(i=Be.YES|Be.NO),this.onLoaded(i,e,t,s,o,a,u)}onLoaded(e,t,i,s=null,o=null,a=!1,u=null){Fe.intance.openModule(t,{flag:e,okHandler:s,cancelHandler:o,data:i,destroyDoCancel:a,initHandler:u})}},pr=Wy.getInstance();var Io=class{constructor(e,t){this._valuesObject={};this.sheetObject=e,this.BaseItemClass=t}get keys(){if(this._keys)return this._keys;this._keys=[];for(let e in this.sheetObject)!e||e==""||this._keys.push(e);return this._keys}get values(){if(this._values)return this._values;this._values=[];let e;for(let t in this.sheetObject)this._valuesObject[t]?e=this._valuesObject[t]:(e=new this.BaseItemClass,e.init(this.sheetObject[t]),this._valuesObject[t]=e),this._values.push(e);return this._values}get(e){return this._valuesObject[e]?this._valuesObject[e]:this.sheetObject[e]}get1(e){if(this._valuesObject[e])return this._valuesObject[e];let t=this.sheetObject[e];if(t)return t;let i;this.BaseItemClass&&(i=new this.BaseItemClass,i.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig()  class : "+this.BaseItemClass),i.init(t)),this._valuesObject;let s=i||t;return this._valuesObject[e]=s,s}indexOf(e){let t=this._keys.indexOf(e);return t>=0?t:(e=e instanceof String?Number(e):e instanceof Number?e.toString():e,this._keys.indexOf(e))}clear(){this.sheetObject=null}};var Ky=class r{constructor(){}static getInstance(){return r._instance||(r._instance=new r),r._instance}initSpotCfgData(){if(this.spotDic==null){let e=re.getResByURL("config/spot.json");this.spotDic=new Io(e.data,ln)}}getSpotById(e){return this.initSpotCfgData(),this.spotDic.get(e)}get getSpotDic(){return this.initSpotCfgData(),this.spotDic}},em=Ky.getInstance();var $y=class r{constructor(){}static getInstance(){return r._instance||(r._instance=new r),r._instance}registerCommCallBack(e=null){Laya.LayaEnv.isConch}sendCustumEvent(e,t=null,i=null){let s;if(i?s=i:s=em.getSpotById(e),!s||!s.Event)return;let o=new Object;o.id=s.ID,o.eventKey=s.Event,o.type=s.type,this.sendWebEvent(o)}sendWebEvent(e){}dispose(){}reload(){Laya.Browser.window.location.reload()}},qe=$y.getInstance();var tm=class extends tt{constructor(){super()}};var ws=class extends tt{realIcon(){return"https://cdn.bunnyswap.cc/images/items/"+this.icon}get starArr(){if(this._starArr)return this._starArr;if(this._starArr=[],this.max_quality==0)return this._starArr;let t=this.quality/this.max_quality*5;for(let i=1;i<=5;i++)t>=i?this._starArr.push(0):i-t<=.5?this._starArr.push(2):this._starArr.push(1);return this._starArr}};var rm=class extends tt{};var im=class extends tt{constructor(){super()}};var nm=class extends tt{};var sm=class extends tt{constructor(){super()}};var om=class extends tt{};var am=class extends tt{};var lm=class extends tt{};var cm=class extends tt{constructor(){super(...arguments);this.dT=1e4}async testUrl(){}getUrl(){var t=this.url;let i=new Date().getTime(),s=this,o=new XMLHttpRequest;o.open("GET",t,!0),o.onload=function(){if(o.status>=200&&o.status<300)try{let u=o.responseText;var a=new Date().getTime()-i;s.dT=a}catch{console.log("Response is not valid JSON")}else console.error(`Error: ${o.status}`)},o.onerror=function(){console.error("Network error")},o.send()}};var um=class extends tt{};var pm=class extends tt{};var mm=class extends tt{};var dm=class extends tt{};var qy=class r{constructor(){this.IsRelease=!1;this.m_bInstantGame=!1;this.useWebVersion=!1;this.m_strVersionEX="V003";this.m_bIsMobWeb=!1;this.m_strWebTag="";this.Js_Version="1";this.Game_Version="20231227_01";this.App_Version="1.0.0";this.SDK_Version="1.0.0";this.M_strCountry="1";this.M_bAppData=!1;this.bookingId=0;this.teamId=0;this.referral="";this.showHeartLog=!1;this.ignoreLang=!1;this.ignoreSheetNo=!1;this.m_bIsIphoneX=!1;this.Debug=0;this.Res=0;this.isTest=!0;this.Server_URL="";this.IP_User="";this.Plantform_APPID="17";this.ServerId=22310001;this.Login_UID="-1";this._LoginType="gamecenter";this.isInto=!1;this.needDraw=!1;this.isFull=!1;this.justFull=!1;this.Login_UDID="81BC19A8-B49B-47CC-BEFE-193E723B521A";this.Device_Info="";this.FCM_Token="";this.APP_IsRelease=!0;this.User_Lan="en";this.UserAgent="";this.Login_UserName="";this.isWhite=!0;this.APP_RES="";this.COOKIE_CF_LAN="COOKIE_GG_LAN";this.COOKIE_CF_LoginType="COOKIE_CF_LoginType";this.IPHONEX_SCARE=1.22;this.IPHONEX_TOP=44;this.IPHONEX_BUTTOM=34;this.DESIGN_WIDTH=1280;this.DESIGN_HEIGHT=720;this._m_iTimeFrame=0}get LoginType(){return r._instance._LoginType}set LoginType(e){r._instance._LoginType=e,r._instance._LoginType&&r._instance._LoginType!=""&&Laya.LocalStorage.setItem(r._instance.COOKIE_CF_LoginType,r._instance._LoginType)}get isWhiteList(){return!0}static getInstance(){return r._instance||(r._instance=new r),r._instance}static get server(){return getServer()}get vType(){return getVType()}get vaddress(){return getVAddress()}get requestTime(){return 0}get loginTime(){return 0}set m_iTimeFrame(e){if(e>1500){let t=function(){r._instance._m_iTimeFrame=0};r._instance._m_iTimeFrame=e,Laya.timer.clear(Laya.timer,t),Laya.timer.once(500,Laya.timer,t)}}get m_iTimeFrame(){return r._instance._m_iTimeFrame}},ce=qy.getInstance();var hm=class extends tt{};var fm=class extends tt{};var Yy=class r{constructor(){if(r._instance)throw new Error("SheetDataManager是单例,不可new.");r._instance=this}static getInstance(){return r._instance||(r._instance=new r),r._instance}init(){let e=Laya.Browser.now();this.m_dicItems=this.initConfigObject("item",ws),this.m_dicShops=new Ne,this.m_dicShopMulDic=this.initConfig("shop",["type","icon"],rm,!0,Laya.Handler.create(this,this.onSetShopItem,null,!1)),this.m_dicSnakes=this.initConfigObject("snake",mm),this.m_dicFoods=this.initConfigObject("foods",pm),this.m_dicArenaDic=new Ne,this.m_dicArenaNumMulDic=new Ne,this.m_dicArenaMulDic=this.initConfig("arena",["type","lv","coinType"],nm,!0,Laya.Handler.create(this,this.onSetArena,null,!1)),this.m_dicArenaTypes=this.initConfig("arenaType",["id"],um),this.m_dicSnakeLengthRules=this.initConfig("snakeLengthRules",["snakeId","segments"],dm);var t=this.initConfig("node",["id"],cm);this.m_dicNodes=this.initNodes(t),this.m_dicHead=this.initConfig("head",["id"],im),this.m_dicCountry=this.initConfig("country",["id"],sm),this.m_dicCurrencyAddressMulDic=new Ne,this.m_dicCurrencyAddress=this.initConfig("currencyAddress",["sn"],om,!0,Laya.Handler.create(this,this.onSetCurrencyAddress,null,!1)),this.m_dicLanguage=this.initConfig("language",["id"],Ss),this.m_dicCoinAddress=this.initConfig("coinAddress",["id"],lm),this.m_dicLevel=this.initConfigObject("level",hm),this.m_dicACoin=this.initConfigObject("aCoin",am),this.m_dicGenerate=this.initConfigObject("general",tm),this.m_dicRoom=this.initConfig("room",["id"],fm),console.log("-----------------------sheetdata-time2:"+(Laya.Browser.now()-e))}getCharacterStars(e){e>4&&(e=4);for(let t of this.m_dicCharacterStars.values)if(t.starLv>e)return t;return null}getArenaTypesInSub(){var e=[];for(let t of this.m_dicArenaTypes.values)t.inSub==1&&e.push(t);return e}getArenaTypesInSubByType(e){for(let t of this.m_dicArenaTypes.values)if(t.arenaType==e)return t;return[]}getArenaTypesInSubByItemId(e,t){for(let i of this.m_dicArenaDic.values)if(i.type==e&&i.item[0]==t)return i}onSetShopItem(e){this.m_dicShops.set(e.id,e)}onSetCurrencyAddress(e){var t=e.token.toLowerCase();this.m_dicCurrencyAddressMulDic.set(this.getCompoundKey([e.isSN,t,e.chainId]),e)}onSetArena(e){this.m_dicArenaDic.set(e.id,e),this.m_dicArenaNumMulDic.set(this.getCompoundKey([e.type,e.lv,e.coinType]),e)}preInit(){}getGeneralValueById(e){return this.m_dicGenerate&&this.m_dicGenerate.get(e)?this.m_dicGenerate.get(e).value:0}initNodes(e){var t=new Ne;for(let s=0;s<e.values.length;s++){var i=e.values[s];i.open==1&&(ce.vType==2?i.type==2&&(t.set(i.id,i),i.testUrl()):i.type==1&&(t.set(i.id,i),i.testUrl()))}return t}testNodes(){var e=this.m_dicNodes;for(let i=0;i<e.values.length;i++){var t=e.values[i];t.testUrl()}}getNodeByAddr(e){var t=this.m_dicNodes;for(let s=0;s<t.values.length;s++){var i=t.values[s];if(i&&i.socketUrl==e)return i}return null}getCurrencyAddress(e){let i=r._instance.m_dicCurrencyAddress.values;for(let o=0;o<i.length;o++){var s=i[o];if(ce.vType==s.isSN&&e==s.id)return s.token}}getNodeRevenueCurrency(e){let i=r._instance.m_dicCurrencyAddress.values;for(let o=0;o<i.length;o++){var s=i[o];if(ce.vType==s.isSN&&e==s.id&&s.nodeRevenueAddress)return s}return null}getNodeCurrencyByTokenAndChainId(e,t){e=e.toLowerCase();var i=r._instance.getSheetDataByMultiKey(r._instance.m_dicCurrencyAddressMulDic,[ce.vType,e,t]);return i}getRentCurrency(e){let i=r._instance.m_dicCurrencyAddress.values;for(let o=0;o<i.length;o++){var s=i[o];if(ce.vType==s.isSN&&e==s.id&&s.rentNftAddress)return s}return null}getCurrencyByChainType(e,t){let s=r._instance.m_dicCurrencyAddress.values;for(let a=0;a<s.length;a++){var o=s[a];if(ce.vType==o.isSN&&e==o.id&&t==o.chainType)return o}}getCurrency(e,t){let s=r._instance.m_dicCurrencyAddress.values;for(let a=0;a<s.length;a++){var o=s[a];if(ce.vType==o.isSN&&e==o.id&&t==o.chainId)return o}}getTokensByChainId(e,t){let s=r._instance.m_dicCurrencyAddress.values;var o=[];for(let u=0;u<s.length;u++){var a=s[u];t==1?ce.vType==a.isSN&&a.openRecharge==1&&e==a.chainId&&o.push(a):t==2&&ce.vType==a.isSN&&a.openExtract==1&&e==a.chainId&&o.push(a)}return o}getNetAddress(e){let i=r._instance.m_dicCoinAddress.values;for(let o=0;o<i.length;o++){var s=i[o];if(ce.vType==s.type&&e==s.tokenid)return s.tokenAddress}}getACoin(e,t){let s=r._instance.m_dicACoin.values;for(let a=0;a<s.length;a++){var o=s[a];if(e==o.token&&t==o.currency)return o}}static getArrFromDictionary(e,t,i){let s=[];for(let o=0;o<e.values.length;o++)e.values[o][t]+""==i+""&&s.push(e.values[o]);return s}getArrFromDicItemByKey(e,t){let i=[];for(let s=0;s<this.m_dicItems.values.length;s++)this.m_dicItems.values[s][e]+""==t+""&&i.push(this.m_dicItems.values[s]);return i}initConfigObject(e,t=null,i=null){let s="config/"+e+".json";console.log("initConfigObject： url: "+s);let o=re.getResByURL(s).data;return new Io(o,t)}initConfig(e,t,i=null,s=!1,o=null){let a="config/"+e+".json";console.log("initConfig url: "+a);let u=re.getResByURL(a).data,p=new Ne;if(!u)return console.log("ERROR : SheetDataManager -->initConfig()  url:"+a),p;let m;for(let h=0;h<u.length;h++){let f=this.compoundKey(u[h],t);i?(m=new i,m.init==null&&console.log("ERROR :BaseItem> SheetDataManager -->initConfig()  url:"+a),m.init(u[h]),p.set(f,m),o&&o.runWith(m)):(p.set(f,u[h]),o&&o.runWith(u[h]))}if(s){let h=re.setResURL(a);Laya.Loader.clearRes(h)}return p}compoundKey(e,t){let i="",s=t.length;if(s>1)for(let o=0;o<s;o++)i+=e[t[o]],o!=s-1&&(i+="_");else i=e[t[0]];return i}getCompoundKey(e){let t="",i=e.length;if(i>1)for(let s=0;s<i;s++)t+=e[s],s!=i-1&&(t+="_");else t=e[0];return t}initConfig2(e,t,i,s=!0){let o="config/"+e+".json",a=re.getResByURL(o).data,u=new Ne;if(!a)return console.log("ERROR : SheetDataManager -->initConfig2()  url:"+o),u;let p;for(let m=0;m<a.length;m++){let h=a[m][t],f;u.get(h)==null?(f=[],u.set(h,f)):f=u.get(h),p=new i,p.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig2()  url:"+o),p.init(a[m]),f.push(p)}if(s&&e!="items"){let m=re.setResURL(o);Laya.Loader.clearRes(m)}return u}getItemsBy(e,t){let i=this.getArrFromDicItemByKey("itm_type",e),s=[];for(let o of i)o.child_type.toString()==t.toString()&&s.push(o);return s}getSheetDataByMultiKey(e,t){let i=this.getCompoundKey(t);return e.get(i)}getLevelById(e){for(let t of this.m_dicLevel.values)if(t.id==e)return t}},ee=Yy.getInstance();var Qy=class r{constructor(){this.mainSceneX=10086;this.isCloseAll=!0;w.on(S.EVENT_MODULE_ADDED,this,this.onAdded)}static getInstance(){return r._instance||(r._instance=new r),r._instance}init(){}setup(){}onAdded(e){}getPreSceneData(){if(this.m_arrFromScenes.length<1)return[pe.M_SCENE_MAIN,!0,1,null];{let e=this.m_arrFromScenes.pop();return console.log("pop-----------route："+this.m_arrFromScenes.join(" | ")),e}}removePreSceneData(){this.m_arrFromScenes=[]}setMainScene(e=1,t=null){this.setCurrentScene(pe.M_SCENE_MAIN,t)}async setCurrentScene(e,t=null){if(console.log("setCurrentScene: ",e,t),this.preSceneName=e,this.m_sceneCurrent&&this.m_sceneCurrent.name==e){console.log("currentScene："+this.m_sceneCurrent.name+"  openScene：："+e);return}switch(this.isCloseAll?Fe.intance.closeAll():this.isCloseAll=!0,this.m_sceneCurrent&&(this.m_arrFromScenes||(this.m_arrFromScenes=[]),console.log("open-----------scene："+this.m_arrFromScenes),this.fromScene=this.m_sceneCurrent.name,console.log("fromSceneName: "+this.fromScene)),e){case pe.M_SCENE_MAIN:this.m_arrFromScenes=[],this.m_sceneCurrent=await Laya.Scene.open("scenes/mainView/MainScene.ls");break;case pe.M_SCENE_SHOP:this.m_sceneCurrent=await Laya.Scene.open("scenes/shop/ShopScene.ls",!0,t);break;case pe.M_SCENE_RANK:this.m_sceneCurrent=await Laya.Scene.open("scenes/rank/RankScene.ls");break;case pe.M_SCENE_CLUB:this.m_sceneCurrent=await Laya.Scene.open("scenes/club/ClubScene.ls");break;case pe.M_SCENE_FRIEND:this.m_sceneCurrent=await Laya.Scene.open("scenes/friend/FriendScene.ls");break;case pe.M_SCENE_KNAPSACK:this.m_sceneCurrent=await Laya.Scene.open("scenes/knapsack/KnapsackScene.ls",!0,t);break;case pe.M_SCENE_MAIL:this.m_sceneCurrent=await Laya.Scene.open("scenes/mail/MailScene.ls");break;case pe.M_SCENE_SNAKE_MATCH:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/SnakeMatch.ls");break;case pe.M_SCENE_AI_ARENA:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/AiArenaScene.ls");break;case pe.M_SCENE_ASSET:this.m_sceneCurrent=await Laya.Scene.open("scenes/asset/AssetNewScene.ls",!0,t);break;case pe.M_SCENE_ROLE:this.m_sceneCurrent=await Laya.Scene.open("scenes/createRole/RoleInfoScene.ls",!1,t);break;case pe.M_SCENE_SETTING:this.m_sceneCurrent=await Laya.Scene.open("scenes/gameSetting/SettingScene.ls",!1,t);break;default:break}Ce.logs("======================  打开Scene: "+e+"  ======================"),this.m_sceneCurrent.name=e}get currSceneName(){return this.m_sceneCurrent?this.m_sceneCurrent.name:""}},Xe=Qy.getInstance();var Ue=class Ue{static getColorText(e,t="#FFFF00"){return'<font color="'+t+'">'+e+"</font>"}static getChildByName(e,t,i="name"){if(e&&e.hasOwnProperty(i)&&e[i]==t)return e;let s=e;if(s){let o=s.numChildren,a;for(let u=0;u<o;++u)if(a=s.getChildAt(u),a instanceof Laya.Sprite&&(a=Ue.getChildByName(a,t,i)),a&&a.hasOwnProperty(i)&&a[i]==t)return a}return null}static getChildByAttri(e,t){if(e&&e.hasOwnProperty(t)&&e[t])return e[t];let i=e;if(i){let s=i.numChildren,o;for(let a=0;a<s;++a)if(o=i.getChildAt(a),o instanceof Laya.Sprite){if(o=Ue.getChildByAttri(o,t),o)return o}else if(o&&o.hasOwnProperty(t)&&o[t])return o[t]}return null}static logs(e,t=0,i=!0,s=16777215){if(e=Ue.GetLogTime+" "+e,i)switch(t){case 0:s=16777215;break;case 1:s=16777215;break;case 2:s=16711680;break;case 3:s=16777215;break;case 4:s=13434777;break;case 5:s=16742399;break}}static get GetLogTime(){let e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()}static get GRAY(){return Ue._GRAY||(Ue._GRAY=new Laya.ColorFilter([.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0])),Ue._GRAY}static get GRAY1(){if(!Ue._GRAY1){let e=[.3086,.16094,.082,0,0,.2086,.26094,.082,0,0,.1086,.36094,.082,0,0,0,0,0,1,0];Ue._GRAY1=new Laya.ColorFilter(e)}return Ue._GRAY1}static get GLOW(){return Ue._GLOW||(Ue._GLOW=new Laya.GlowFilter("#ffffff",12,0,0)),Ue._GLOW}static get YELLOWGLOW(){return Ue._YELLOWGLOW||(Ue._YELLOWGLOW=new Laya.GlowFilter("#ffff00",10,0,0)),Ue._YELLOWGLOW}static get BLUR(){if(!Ue._BLUR){let e=new Laya.BlurFilter;e.strength=5,Ue._BLUR=[e]}return Ue._BLUR}static get isParseWWhiteUser(){return Ue._isParseWWhiteUser}static get isWhiteName(){return ce.isWhiteList}static itemListHandler(e,t){let i=e.dataSource,s=i[0],o=i[1],a=2,u=e.skin;u&&(u.indexOf("xinSmall")!=-1?a=1:u.indexOf("xinBig")!=-1&&(a=3));let p;a==1?p="common/common_clip/clip_xinSmall"+o+".png":a==3?p="common/common_clip/clip_xinBig"+o+".png":p="common/common_clip/clip_xinMiddle"+o+".png",e.skin=p,e.dataSource=s}static setStarList(e,t){e.renderHandler=new Laya.Handler(Ue,Ue.itemListHandler),e.dataSource=t}static get BLACK(){return Ue._BLACK||(Ue._BLACK=new Laya.ColorFilter,Ue._BLACK.setColor("#000000")),Ue._BLACK}static get YELLOW(){return Ue._YELLOW||(Ue._YELLOW=new Laya.ColorFilter,Ue._YELLOW.setColor("#ffe64b")),Ue._YELLOW}static get YELLOW1(){return Ue._YELLOW1||(Ue._YELLOW1=new Laya.ColorFilter,Ue._YELLOW1.setColor("#fee14e")),Ue._YELLOW1}static get RED1(){return Ue._RED1||(Ue._RED1=new Laya.ColorFilter,Ue._RED1.setColor("#ff4537")),Ue._RED1}static get BLUE(){return Ue._BLUE||(Ue._BLUE=new Laya.ColorFilter,Ue._BLUE.setColor("#2f72a7")),Ue._BLUE}static setColor(e="#13e2cf"){let t=new Laya.ColorFilter;return t.setColor(e),t}static heroNotEnought(e=1286){pr.AlertByType(Be.BASEALERTVIEW,z.getLanguage(e),Be.YES,null)}static popTip(e){pr.AlertByType(Be.BASEALERTVIEW,z.getLanguage(e),Be.YES,null)}static onGetHero(e=-1){Xe.setCurrentScene(pe.M_SCENE_SHOP,[1,e])}static popToMain(){var e="network error, back to mainscreen";pr.AlertByType(Be.BASEALERTVIEW,z.getLanguage(e),Be.YES,Laya.Handler.create(this,this.setToMainScene))}static setToMainScene(){Xe.setCurrentScene(pe.M_SCENE_MAIN)}static isFightHero(e){return j.playerDto.fightHeroPk==e||e==j.playerDto.newFightHeroPk}static titickNotEnought(e=-1){var t=2,i=ee.getSheetDataByMultiKey(ee.m_dicShopMulDic,[t,e]);if(i)pr.AlertByType(Be.BASEALERTVIEW,z.getLanguage(1060),Be.CANCEL,Laya.Handler.create(this,this.onGetTitck,[e]));else{var s=ee.m_dicItems.get(e);s?De.notice(z.getLanguage(42,z.getLanguage(s.name))):qt.showErrorWord(18)}}static RemError(){pr.AlertByType(Be.BASEALERTVIEW,z.getLanguage(35),Be.YES,null)}static NoHeroError(e){pr.AlertByType(Be.BASEALERTVIEW,e,Be.YES,null)}static TransactionErrorTip(){pr.AlertByType(Be.BASEALERTVIEW,z.getLanguage(41),Be.YES,null)}static alertNoAll(e){pr.AlertByType(Be.BASEALERTVIEW,e,Be.NO_ALL)}static onGetTitck(e=-1){Xe.setCurrentScene(pe.M_SCENE_SHOP,[2,e])}static moneyNotEnought(e=$e.TYPE_TOX){var t=ee.m_dicItems.get(e),i=z.getLanguage(t.name);De.notice(z.getLanguage(36,i))}static onGetMoney(e){Xe.setCurrentScene(pe.M_SCENE_ASSET,[1,e])}static openSquidGame(){pr.AlertByType(Be.BASEALERTVIEW,z.getLanguage(6056),Be.CANCEL,Laya.Handler.create(this,this.onOpenSquidGame))}static onOpenSquidGame(){window.location.href="https://squidgamefi.io/?invitationCode=2oi"}static onOpenSwapView(){window.open("https://swap.phantomarena.ai","_blank")}static otherLogin(){pr.AlertByType(Be.BASEALERTVIEW,z.getLanguage(32),Be.YES,Laya.Handler.create(this,qe.reload))}static netError(){pr.AlertByType(Be.BASEALERTVIEW,z.getLanguage(44),Be.YES,Laya.Handler.create(this,qe.reload))}static commTipWithYes(e){pr.AlertByType(Be.BASEALERTVIEW,e,Be.YES)}static shakeSprs(e,t=2,i=4,s=32){if(Ue.isShake)return;Ue.isShake=!0;let o=e.length,a=[];for(let h=0;h<o;h++){let f=e[h];a.push([f.x,f.y])}let u=[0,0],p=0,m=function(){u[p%2]=p++%4<2?0:i,p>t*4+1&&(Laya.timer.clear(Laya.stage,m),p=0,Ue.isShake=!1);for(let h=0;h<o;h++){let f=e[h];f.x=u[0]+a[h][0],f.y=u[1]+a[h][1]}};Laya.timer.loop(s,Laya.stage,m)}static shake(e,t=2,i=4,s=32){if(Ue.isShake)return;Ue.isShake=!0;let o=new Laya.Point(e.x,e.y),a=[0,0],u=0,p=function(){a[u%2]=u++%4<2?0:i,u>t*4+1&&(Laya.timer.clear(Laya.stage,p),u=0,Ue.isShake=!1),e.x=a[0]+o.x,e.y=a[1]+o.y};Laya.timer.loop(s,Laya.stage,p)}static async getNpcNames(e=1){var t=z.getLanTypeById(j.m_strLanguage);t.indexOf("-")!=-1&&(t=t.split("-")[0]);var i=`https://wss-room-sg.queengame.io/get-names?lang=${t}&count=${e}`,s=await wt.requestGet(i);return console.log("getNpcNames: ",s),s}};Ue._isParseWWhiteUser=!1,Ue.isWWhiteUser=!1,Ue.isShake=!1;var Ce=Ue;var Ht=class{static initConfig(e){this.configDic=new Ne;for(let t of e){let i=t.sstringvalue;t.sadditional==="JSON"&&(i=JSON.parse(i)),this.configDic.set(t.skey2,i),this[t.skey2]=i}}};Ht.ADDRESS0="0x0000000000000000000000000000000000000000",Ht.TOKEN_ERC20ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"miner",type:"address"}],name:"addMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_delMinter",type:"address"}],name:"delMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idx",type:"uint256"}],name:"getMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMinterLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Ht.WITHDRAW_AND_RECHARGE_ADDRESS="",Ht.WITHDRAW_AND_RECHARGE_ABI="";var rg=L1(T1());var Ni=class{static getInviteUrl(){return window.location.origin+"?invite="+this.encode(ze.walletAddress)}static encode(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=t.length,s=t.split(""),o="",a,u,p,m,h=0;h<e.length;h++)a=e.charCodeAt(h),u=a%i,a=(a-u)/i,p=a%i,a=(a-p)/i,m=a%i,o+=s[m]+s[p]+s[u];return window.btoa(o)}static decode(e){e=window.atob(e);var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=t.length,s,o,a,u,p=0,m;m=new Array(Math.floor(e.length/3)),s=m.length;for(var h=0;h<s;h++)o=t.indexOf(e.charAt(p)),p++,a=t.indexOf(e.charAt(p)),p++,u=t.indexOf(e.charAt(p)),p++,m[h]=o*i*i+a*i+u;return s=decodeCharCode(m.join(",")),s}static getQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return i!=null?i[2]:""}static getInviteWalletAddress(){let e=this.getQueryString("invite");return e&&(e=this.decode(e)),e}static toWei(e,t){let i=e*10**parseInt(t);return window.web3.utils.toBN("0x"+i.toString(16)).toString()}static fromWei(e,t,i=0){if(!e)return 0;let s=e.length-t+i;if(s<=0)return 0;let o=e.toString().slice(0,s);if(i){let a=o.length-i;if(a<=0){let u="0.";for(let p=0;p<Math.abs(a);p++)u+="0";o=u+o}else o=o.slice(0,o.length-i)+"."+o.slice(o.length-i)}return o}static deepClone(e){let t=new Ne;for(let i in e)typeof e[i]=="function"?t[i]=e[i]:t[i]=JSON.parse(JSON.stringify(e[i]));return t}};function fe(r,e,t){let i=r[e.name];if(typeof i=="function")return i;let s=r[t];return typeof s=="function"?s:o=>e(r,o)}Yt();Ze();var Qm=class extends F{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}};ir();vi();Bc();Un();Ls();Ro();var Fx="/docs/contract/encodeEventTopics";function ji(r){let{abi:e,eventName:t,args:i}=r,s=e[0];if(t){let p=zi({abi:e,name:t});if(!p)throw new wc(t,{docsPath:Fx});s=p}if(s.type!=="event")throw new wc(void 0,{docsPath:Fx});let o=Er(s),a=Fn(o),u=[];if(i&&"inputs"in s){let p=s.inputs?.filter(h=>"indexed"in h&&h.indexed),m=Array.isArray(i)?i:Object.values(i).length>0?p?.map(h=>i[h.name])??[]:[];m.length>0&&(u=p?.map((h,f)=>Array.isArray(m[f])?m[f].map((g,b)=>Ux({param:h,value:m[f][b]})):typeof m[f]<"u"&&m[f]!==null?Ux({param:h,value:m[f]}):null)??[])}return[a,...u]}function Ux({param:r,value:e}){if(r.type==="string"||r.type==="bytes")return St(Zr(e));if(r.type==="tuple"||r.type.match(/^(.*)\[(\d+)?\]$/))throw new Qm(r.type);return jr([r],[e])}He();function Hn(r,{method:e}){let t={};return r.transport.type==="fallback"&&r.transport.onResponse?.(({method:i,response:s,status:o,transport:a})=>{o==="success"&&e===i&&(t[s]=a.request)}),i=>t[i]||r.request}async function fd(r,e){let{address:t,abi:i,args:s,eventName:o,fromBlock:a,strict:u,toBlock:p}=e,m=Hn(r,{method:"eth_newFilter"}),h=o?ji({abi:i,args:s,eventName:o}):void 0,f=await r.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof a=="bigint"?be(a):a,toBlock:typeof p=="bigint"?be(p):p,topics:h}]});return{abi:i,args:s,eventName:o,id:f,request:m(f),strict:!!u,type:"event"}}Xt();ti();Yt();Ze();jn();Ns();Fc();var aE=3;function Gr(r,{abi:e,address:t,args:i,docsPath:s,functionName:o,sender:a}){let u=r instanceof Vi?r:r instanceof F?r.walk(y=>"data"in y)||r.walk():{},{code:p,data:m,details:h,message:f,shortMessage:g}=u,b=(()=>r instanceof Jr?new Dd({functionName:o}):[aE,hn.code].includes(p)&&(m||h||f||g)?new Os({abi:e,data:typeof m=="object"?m.data:m,functionName:o,message:u instanceof Gn?h:g??f}):r)();return new Bd(b,{abi:e,args:i,contractAddress:t,docsPath:s,functionName:o,sender:a})}Xt();Ze();Cs();vi();function rv(r){let e=St(`0x${r.substring(4)}`).substring(26);return mn(`0x${e}`)}fi();dr();He();async function Uv({hash:r,signature:e}){let t=zt(r)?r:Ee(r),{secp256k1:i}=await Promise.resolve().then(()=>(Jd(),Pv));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){let{r:m,s:h,v:f,yParity:g}=e,b=Number(g??f),y=Fv(b);return new i.Signature(Ct(m),Ct(h)).addRecoveryBit(y)}let a=zt(e)?e:Ee(e),u=Wt(`0x${a.slice(130)}`),p=Fv(u);return i.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(p)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function Fv(r){if(r===0||r===1)return r;if(r===27)return 0;if(r===28)return 1;throw new Error("Invalid yParityOrV value")}async function Zd({hash:r,signature:e}){return rv(await Uv({hash:r,signature:e}))}ei();ir();He();Ze();_d();ir();He();function Ei(r,e="hex"){let t=Hv(r),i=Do(new Uint8Array(t.length));return t.encode(i),e==="hex"?ct(i.bytes):i.bytes}function Hv(r){return Array.isArray(r)?qE(r.map(e=>Hv(e))):YE(r)}function qE(r){let e=r.reduce((s,o)=>s+o.length,0),t=zv(e);return{length:(()=>e<=55?1+e:1+t+e)(),encode(s){e<=55?s.pushByte(192+e):(s.pushByte(192+55+t),t===1?s.pushUint8(e):t===2?s.pushUint16(e):t===3?s.pushUint24(e):s.pushUint32(e));for(let{encode:o}of r)o(s)}}}function YE(r){let e=typeof r=="string"?Qt(r):r,t=zv(e.length);return{length:(()=>e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+t+e.length)(),encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(128+55+t),t===1?s.pushUint8(e.length):t===2?s.pushUint16(e.length):t===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function zv(r){if(r<2**8)return 1;if(r<2**16)return 2;if(r<2**24)return 3;if(r<2**32)return 4;throw new F("Length is too large.")}vi();function jv(r){let{chainId:e,nonce:t,to:i}=r,s=r.contractAddress??r.address,o=St(hr(["0x05",Ei([e?be(e):"0x",s,t?be(t):"0x"])]));return i==="bytes"?Qt(o):o}async function eh(r){let{authorization:e,signature:t}=r;return Zd({hash:jv(e),signature:t??e})}He();Sd();Po();Ze();Si();var th=class extends F{constructor(e,{account:t,docsPath:i,chain:s,data:o,gas:a,gasPrice:u,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:h,to:f,value:g}){let b=Bs({from:t?.address,to:f,value:typeof g<"u"&&`${No(g)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:a,gasPrice:typeof u<"u"&&`${Jt(u)} gwei`,maxFeePerGas:typeof p<"u"&&`${Jt(p)} gwei`,maxPriorityFeePerGas:typeof m<"u"&&`${Jt(m)} gwei`,nonce:h});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",b].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}};Zn();Kc();function Gv(r,{docsPath:e,...t}){let i=(()=>{let s=es(r,t);return s instanceof si?r:s})();return new th(i,{docsPath:e,...t})}$c();Ks();ih();rs();Xt();Po();Ze();var nh=class extends F{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},is=class extends F{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},sh=class extends F{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Jt(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}};dr();Ze();var ma=class extends F{constructor({blockHash:e,blockNumber:t}){let i="Block";e&&(i=`Block at hash "${e}"`),t&&(i=`Block at number "${t}"`),super(`${i} could not be found.`,{name:"BlockNotFoundError"})}};He();rh();dr();rh();var X0={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function $s(r){let e={...r,blockHash:r.blockHash?r.blockHash:null,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,chainId:r.chainId?Wt(r.chainId):void 0,gas:r.gas?BigInt(r.gas):void 0,gasPrice:r.gasPrice?BigInt(r.gasPrice):void 0,maxFeePerBlobGas:r.maxFeePerBlobGas?BigInt(r.maxFeePerBlobGas):void 0,maxFeePerGas:r.maxFeePerGas?BigInt(r.maxFeePerGas):void 0,maxPriorityFeePerGas:r.maxPriorityFeePerGas?BigInt(r.maxPriorityFeePerGas):void 0,nonce:r.nonce?Wt(r.nonce):void 0,to:r.to?r.to:null,transactionIndex:r.transactionIndex?Number(r.transactionIndex):null,type:r.type?X0[r.type]:void 0,typeHex:r.type?r.type:void 0,value:r.value?BigInt(r.value):void 0,v:r.v?BigInt(r.v):void 0};return r.authorizationList&&(e.authorizationList=ZE(r.authorizationList)),e.yParity=(()=>{if(r.yParity)return Number(r.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}var Wv=ca("transaction",$s);function ZE(r){return r.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function qc(r){let e=(r.transactions??[]).map(t=>typeof t=="string"?t:$s(t));return{...r,baseFeePerGas:r.baseFeePerGas?BigInt(r.baseFeePerGas):null,blobGasUsed:r.blobGasUsed?BigInt(r.blobGasUsed):void 0,difficulty:r.difficulty?BigInt(r.difficulty):void 0,excessBlobGas:r.excessBlobGas?BigInt(r.excessBlobGas):void 0,gasLimit:r.gasLimit?BigInt(r.gasLimit):void 0,gasUsed:r.gasUsed?BigInt(r.gasUsed):void 0,hash:r.hash?r.hash:null,logsBloom:r.logsBloom?r.logsBloom:null,nonce:r.nonce?r.nonce:null,number:r.number?BigInt(r.number):null,size:r.size?BigInt(r.size):void 0,timestamp:r.timestamp?BigInt(r.timestamp):void 0,transactions:e,totalDifficulty:r.totalDifficulty?BigInt(r.totalDifficulty):null}}var Kv=ca("block",qc);async function br(r,{blockHash:e,blockNumber:t,blockTag:i,includeTransactions:s}={}){let o=i??"latest",a=s??!1,u=t!==void 0?be(t):void 0,p=null;if(e?p=await r.request({method:"eth_getBlockByHash",params:[e,a]},{dedupe:!0}):p=await r.request({method:"eth_getBlockByNumber",params:[u||o,a]},{dedupe:!!u}),!p)throw new ma({blockHash:e,blockNumber:t});return(r.chain?.formatters?.block?.format||qc)(p)}async function da(r){let e=await r.request({method:"eth_gasPrice"});return BigInt(e)}async function $v(r,e){return J0(r,e)}async function J0(r,e){let{block:t,chain:i=r.chain,request:s}=e||{};try{let o=i?.fees?.maxPriorityFeePerGas??i?.fees?.defaultPriorityFee;if(typeof o=="function"){let u=t||await fe(r,br,"getBlock")({}),p=await o({block:u,client:r,request:s});if(p===null)throw new Error;return p}if(typeof o<"u")return o;let a=await r.request({method:"eth_maxPriorityFeePerGas"});return Ct(a)}catch{let[o,a]=await Promise.all([t?Promise.resolve(t):fe(r,br,"getBlock")({}),fe(r,da,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new is;let u=a-o.baseFeePerGas;return u<0n?0n:u}}async function qv(r,e){return oh(r,e)}async function oh(r,e){let{block:t,chain:i=r.chain,request:s,type:o="eip1559"}=e||{},a=await(async()=>typeof i?.fees?.baseFeeMultiplier=="function"?i.fees.baseFeeMultiplier({block:t,client:r,request:s}):i?.fees?.baseFeeMultiplier??1.2)();if(a<1)throw new nh;let p=10**(a.toString().split(".")[1]?.length??0),m=g=>g*BigInt(Math.ceil(a*p))/BigInt(p),h=t||await fe(r,br,"getBlock")({});if(typeof i?.fees?.estimateFeesPerGas=="function"){let g=await i.fees.estimateFeesPerGas({block:t,client:r,multiply:m,request:s,type:o});if(g!==null)return g}if(o==="eip1559"){if(typeof h.baseFeePerGas!="bigint")throw new is;let g=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await J0(r,{block:h,chain:i,request:s}),b=m(h.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??b+g,maxPriorityFeePerGas:g}}return{gasPrice:s?.gasPrice??m(await fe(r,da,"getGasPrice")({}))}}dr();He();async function ha(r,{address:e,blockTag:t="latest",blockNumber:i}){let s=await r.request({method:"eth_getTransactionCount",params:[e,i?be(i):t]},{dedupe:!!i});return Wt(s)}ir();He();function fa(r){let{kzg:e}=r,t=r.to??(typeof r.blobs[0]=="string"?"hex":"bytes"),i=typeof r.blobs[0]=="string"?r.blobs.map(o=>Qt(o)):r.blobs,s=[];for(let o of i)s.push(Uint8Array.from(e.blobToKzgCommitment(o)));return t==="bytes"?s:s.map(o=>ct(o))}ir();He();function ga(r){let{kzg:e}=r,t=r.to??(typeof r.blobs[0]=="string"?"hex":"bytes"),i=typeof r.blobs[0]=="string"?r.blobs.map(a=>Qt(a)):r.blobs,s=typeof r.commitments[0]=="string"?r.commitments.map(a=>Qt(a)):r.commitments,o=[];for(let a=0;a<i.length;a++){let u=i[a],p=s[a];o.push(Uint8Array.from(e.computeBlobKzgProof(u,p)))}return t==="bytes"?o:o.map(a=>ct(a))}He();L0();fi();ir();He();function Yv(r,e){let t=e||"hex",i=Us(zt(r,{strict:!1})?Zr(r):r);return t==="bytes"?i:Ee(i)}function Qv(r){let{commitment:e,version:t=1}=r,i=r.to??(typeof e=="string"?"hex":"bytes"),s=Yv(e,"bytes");return s.set([t],0),i==="bytes"?s:ct(s)}function ah(r){let{commitments:e,version:t}=r,i=r.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(let o of e)s.push(Qv({commitment:o,to:i,version:t}));return s}Ze();var lh=class extends F{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}},ba=class extends F{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}},ch=class extends F{constructor({hash:e,size:t}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${t}`],name:"InvalidVersionedHashSizeError"})}},uh=class extends F{constructor({hash:e,version:t}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${1}`,`Received: ${t}`],name:"InvalidVersionedHashVersionError"})}};_d();gi();ir();He();function Xv(r){let e=r.to??(typeof r.data=="string"?"hex":"bytes"),t=typeof r.data=="string"?Qt(r.data):r.data,i=mt(t);if(!i)throw new ba;if(i>761855)throw new lh({maxSize:761855,size:i});let s=[],o=!0,a=0;for(;o;){let u=Do(new Uint8Array(131072)),p=0;for(;p<4096;){let m=t.slice(a,a+(32-1));if(u.pushByte(0),u.pushBytes(m),m.length<31){u.pushByte(128),o=!1;break}p++,a+=31}s.push(u)}return e==="bytes"?s.map(u=>u.bytes):s.map(u=>ct(u.bytes))}function ph(r){let{data:e,kzg:t,to:i}=r,s=r.blobs??Xv({data:e,to:i}),o=r.commitments??fa({blobs:s,kzg:t,to:i}),a=r.proofs??ga({blobs:s,commitments:o,kzg:t,to:i}),u=[];for(let p=0;p<s.length;p++)u.push({blob:s[p],commitment:o[p],proof:a[p]});return u}rs();Si();function mh(r){if(r.type)return r.type;if(typeof r.authorizationList<"u")return"eip7702";if(typeof r.blobs<"u"||typeof r.blobVersionedHashes<"u"||typeof r.maxFeePerBlobGas<"u"||typeof r.sidecars<"u")return"eip4844";if(typeof r.maxFeePerGas<"u"||typeof r.maxPriorityFeePerGas<"u")return"eip1559";if(typeof r.gasPrice<"u")return typeof r.accessList<"u"?"eip2930":"legacy";throw new Td({transaction:r})}dr();async function ai(r){let e=await r.request({method:"eth_chainId"},{dedupe:!0});return Wt(e)}var Z0=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Jv=new Map;async function ns(r,e){let{account:t=r.account,blobs:i,chain:s,gas:o,kzg:a,nonce:u,nonceManager:p,parameters:m=Z0,type:h}=e,f=t&&it(t),g={...e,...f?{from:f?.address}:{}},b;async function y(){return b||(b=await fe(r,br,"getBlock")({blockTag:"latest"}),b)}let k;async function I(){return k||(s?s.id:typeof e.chainId<"u"?e.chainId:(k=await fe(r,ai,"getChainId")({}),k))}if(m.includes("nonce")&&typeof u>"u"&&f)if(p){let A=await I();g.nonce=await p.consume({address:f.address,chainId:A,client:r})}else g.nonce=await fe(r,ha,"getTransactionCount")({address:f.address,blockTag:"pending"});if((m.includes("blobVersionedHashes")||m.includes("sidecars"))&&i&&a){let A=fa({blobs:i,kzg:a});if(m.includes("blobVersionedHashes")){let M=ah({commitments:A,to:"hex"});g.blobVersionedHashes=M}if(m.includes("sidecars")){let M=ga({blobs:i,commitments:A,kzg:a}),O=ph({blobs:i,commitments:A,proofs:M,to:"hex"});g.sidecars=O}}if(m.includes("chainId")&&(g.chainId=await I()),(m.includes("fees")||m.includes("type"))&&typeof h>"u")try{g.type=mh(g)}catch{let A=Jv.get(r.uid);typeof A>"u"&&(A=typeof(await y())?.baseFeePerGas=="bigint",Jv.set(r.uid,A)),g.type=A?"eip1559":"legacy"}if(m.includes("fees"))if(g.type!=="legacy"&&g.type!=="eip2930"){if(typeof g.maxFeePerGas>"u"||typeof g.maxPriorityFeePerGas>"u"){let A=await y(),{maxFeePerGas:M,maxPriorityFeePerGas:O}=await oh(r,{block:A,chain:s,request:g});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<O)throw new sh({maxPriorityFeePerGas:O});g.maxPriorityFeePerGas=O,g.maxFeePerGas=M}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new is;if(typeof e.gasPrice>"u"){let A=await y(),{gasPrice:M}=await oh(r,{block:A,chain:s,request:g,type:"legacy"});g.gasPrice=M}}return m.includes("gas")&&typeof o>"u"&&(g.gas=await fe(r,ya,"estimateGas")({...g,account:f&&{address:f.address,type:"json-rpc"}})),Nr(g),delete g.parameters,g}He();async function dh(r,{address:e,blockNumber:t,blockTag:i="latest"}){let s=t?be(t):void 0,o=await r.request({method:"eth_getBalance",params:[e,s||i]});return BigInt(o)}async function ya(r,e){let{account:t=r.account}=e,i=t?it(t):void 0;try{let Ae=function(le){let{block:we,request:Ie,rpcStateOverride:R}=le;return r.request({method:"eth_estimateGas",params:R?[Ie,we??"latest",R]:we?[Ie,we]:[Ie]})};var s=Ae;let{accessList:o,authorizationList:a,blobs:u,blobVersionedHashes:p,blockNumber:m,blockTag:h,data:f,gas:g,gasPrice:b,maxFeePerBlobGas:y,maxFeePerGas:k,maxPriorityFeePerGas:I,nonce:A,value:M,stateOverride:O,...G}=await ns(r,{...e,parameters:i?.type==="local"?void 0:["blobVersionedHashes"]}),q=(m?be(m):void 0)||h,H=ua(O),K=await(async()=>{if(G.to)return G.to;if(a&&a.length>0)return await eh({authorization:a[0]}).catch(()=>{throw new F("`to` is required. Could not infer from `authorizationList`")})})();Nr(e);let W=r.chain?.formatters?.transactionRequest?.format,xe=(W||oi)({...ts(G,{format:W}),from:i?.address,accessList:o,authorizationList:a,blobs:u,blobVersionedHashes:p,data:f,gas:g,gasPrice:b,maxFeePerBlobGas:y,maxFeePerGas:k,maxPriorityFeePerGas:I,nonce:A,to:K,value:M}),ot=BigInt(await Ae({block:q,request:xe,rpcStateOverride:H}));if(a){let le=await dh(r,{address:xe.from}),we=await Promise.all(a.map(async Ie=>{let{address:R}=Ie,Ke=await Ae({block:q,request:{authorizationList:void 0,data:f,from:i?.address,to:R,value:be(le)},rpcStateOverride:H}).catch(()=>100000n);return 2n*BigInt(Ke)}));ot+=we.reduce((Ie,R)=>Ie+R,0n)}return ot}catch(o){throw Gv(o,{...e,account:i,chain:r.chain})}}async function Zv(r,e){let{abi:t,address:i,args:s,functionName:o,dataSuffix:a,...u}=e,p=Mt({abi:t,args:s,functionName:o});try{return await fe(r,ya,"estimateGas")({data:`${p}${a?a.replace("0x",""):""}`,to:i,...u})}catch(m){let h=u.account?it(u.account):void 0;throw Gr(m,{abi:t,address:i,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:h?.address})}}Ro();Yt();_a();ir();vi();Bc();Yt();gi();Bc();x0();xd();Ls();var eI="/docs/contract/decodeEventLog";function xa(r){let{abi:e,data:t,strict:i,topics:s}=r,o=i??!0,[a,...u]=s;if(!a)throw new Gm({docsPath:eI});let p=(()=>e.length===1?e[0]:e.find(k=>k.type==="event"&&a===Fn(Er(k))))();if(!(p&&"name"in p)||p.type!=="event")throw new To(a,{docsPath:eI});let{name:m,inputs:h}=p,f=h?.some(k=>!("name"in k&&k.name)),g=f?[]:{},b=h.filter(k=>"indexed"in k&&k.indexed);for(let k=0;k<b.length;k++){let I=b[k],A=u[k];if(!A)throw new Fi({abiItem:p,param:I});g[f?k:I.name||k]=rL({param:I,value:A})}let y=h.filter(k=>!("indexed"in k&&k.indexed));if(y.length>0){if(t&&t!=="0x")try{let k=Rs(y,t);if(k)if(f)g=[...g,...k];else for(let I=0;I<y.length;I++)g[y[I].name]=k[I]}catch(k){if(o)throw k instanceof Eo||k instanceof Bo?new bi({abiItem:p,data:t,params:y,size:mt(t)}):k}else if(o)throw new bi({abiItem:p,data:"0x",params:y,size:0})}return{eventName:m,args:Object.values(g).length>0?g:void 0}}function rL({param:r,value:e}){return r.type==="string"||r.type==="bytes"||r.type==="tuple"||r.type.match(/^(.*)\[(\d+)?\]$/)?e:(Rs([r],e)||[])[0]}function va(r){let{abi:e,args:t,logs:i,strict:s=!0}=r,o=(()=>{if(r.eventName)return Array.isArray(r.eventName)?r.eventName:[r.eventName]})();return i.map(a=>{try{let u=e.find(m=>m.type==="event"&&a.topics[0]===Fn(m));if(!u)return null;let p=xa({...a,abi:[u],strict:s});return o&&!o.includes(p.eventName)||!iL({args:p.args,inputs:u.inputs,matchArgs:t})?null:{...p,...a}}catch(u){let p,m;if(u instanceof To)return null;if(u instanceof bi||u instanceof Fi){if(s)return null;p=u.abiItem.name,m=u.abiItem.inputs?.some(h=>!("name"in h&&h.name))}return{...a,args:m?[]:{},eventName:p}}}).filter(Boolean)}function iL(r){let{args:e,inputs:t,matchArgs:i}=r;if(!i)return!0;if(!e)return!1;function s(o,a,u){try{return o.type==="address"?Yi(a,u):o.type==="string"||o.type==="bytes"?St(Zr(a))===u:a===u}catch{return!1}}return Array.isArray(e)&&Array.isArray(i)?i.every((o,a)=>{if(o==null)return!0;let u=t[a];return u?(Array.isArray(o)?o:[o]).some(m=>s(u,m,e[a])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof i=="object"&&!Array.isArray(i)?Object.entries(i).every(([o,a])=>{if(a==null)return!0;let u=t.find(m=>m.name===o);return u?(Array.isArray(a)?a:[a]).some(m=>s(u,m,e[o])):!1}):!1}He();function yr(r,{args:e,eventName:t}={}){return{...r,blockHash:r.blockHash?r.blockHash:null,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,logIndex:r.logIndex?Number(r.logIndex):null,transactionHash:r.transactionHash?r.transactionHash:null,transactionIndex:r.transactionIndex?Number(r.transactionIndex):null,...t?{args:e,eventName:t}:{}}}async function Ia(r,{address:e,blockHash:t,fromBlock:i,toBlock:s,event:o,events:a,args:u,strict:p}={}){let m=p??!1,h=a??(o?[o]:void 0),f=[];h&&(f=[h.flatMap(k=>ji({abi:[k],eventName:k.name,args:a?void 0:u}))],o&&(f=f[0]));let g;t?g=await r.request({method:"eth_getLogs",params:[{address:e,topics:f,blockHash:t}]}):g=await r.request({method:"eth_getLogs",params:[{address:e,topics:f,fromBlock:typeof i=="bigint"?be(i):i,toBlock:typeof s=="bigint"?be(s):s}]});let b=g.map(y=>yr(y));return h?va({abi:h,args:u,logs:b,strict:m}):b}async function hh(r,e){let{abi:t,address:i,args:s,blockHash:o,eventName:a,fromBlock:u,toBlock:p,strict:m}=e,h=a?zi({abi:t,name:a}):void 0,f=h?void 0:t.filter(g=>g.type==="event");return fe(r,Ia,"getLogs")({address:i,args:s,blockHash:o,event:h,events:f,fromBlock:u,toBlock:p,strict:m})}ss();ti();Sa();async function or(r,e){let{abi:t,address:i,args:s,functionName:o,...a}=e,u=Mt({abi:t,args:s,functionName:o});try{let{data:p}=await fe(r,Qi,"call")({...a,data:u,to:i});return Pr({abi:t,args:s,functionName:o,data:p||"0x"})}catch(p){throw Gr(p,{abi:t,address:i,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}Xt();ss();ti();Sa();async function mI(r,e){let{abi:t,address:i,args:s,dataSuffix:o,functionName:a,...u}=e,p=u.account?it(u.account):r.account,m=Mt({abi:t,args:s,functionName:a});try{let{data:h}=await fe(r,Qi,"call")({batch:!1,data:`${m}${o?o.replace("0x",""):""}`,to:i,...u,account:p}),f=Pr({abi:t,args:s,functionName:a,data:h||"0x"}),g=t.filter(b=>"name"in b&&b.name===e.functionName);return{result:f,request:{abi:g,address:i,args:s,dataSuffix:o,functionName:a,...u,account:p}}}catch(h){throw Gr(h,{abi:t,address:i,args:s,docsPath:"/docs/contract/simulateContract",functionName:a,sender:p?.address})}}Yt();Fc();var c_=new Map,dI=new Map,pL=0;function Fr(r,e,t){let i=++pL,s=()=>c_.get(r)||[],o=()=>{let h=s();c_.set(r,h.filter(f=>f.id!==i))},a=()=>{let h=s();if(!h.some(g=>g.id===i))return;let f=dI.get(r);h.length===1&&f&&f(),o()},u=s();if(c_.set(r,[...u,{id:i,fns:e}]),u&&u.length>0)return a;let p={};for(let h in e)p[h]=(...f)=>{let g=s();if(g.length!==0)for(let b of g)b.fns[h]?.(...f)};let m=t(p);return typeof m=="function"&&dI.set(r,m),a}async function Jc(r){return new Promise(e=>setTimeout(e,r))}function Xi(r,{emitOnBegin:e,initialWaitTime:t,interval:i}){let s=!0,o=()=>s=!1;return(async()=>{let u;e&&(u=await r({unpoll:o}));let p=await t?.(u)??i;await Jc(p);let m=async()=>{s&&(await r({unpoll:o}),await Jc(i),m())};m()})(),o}Tr();var mL=new Map,dL=new Map;function hI(r){let e=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:a=>o.set(s,a)}),t=e(r,mL),i=e(r,dL);return{clear:()=>{t.clear(),i.clear()},promise:t,response:i}}async function fI(r,{cacheKey:e,cacheTime:t=Number.POSITIVE_INFINITY}){let i=hI(e),s=i.response.get();if(s&&t>0&&new Date().getTime()-s.created.getTime()<t)return s.data;let o=i.promise.get();o||(o=r(),i.promise.set(o));try{let a=await o;return i.response.set({created:new Date,data:a}),a}finally{i.promise.clear()}}var hL=r=>`blockNumber.${r}`;async function Ji(r,{cacheTime:e=r.cacheTime}={}){let t=await fI(()=>r.request({method:"eth_blockNumber"}),{cacheKey:hL(r.uid),cacheTime:e});return BigInt(t)}async function os(r,{filter:e}){let t="strict"in e&&e.strict,i=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof i[0]=="string")return i;let s=i.map(o=>yr(o));return!("abi"in e)||!e.abi?s:va({abi:e.abi,logs:s,strict:t})}async function as(r,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function gI(r,e){let{abi:t,address:i,args:s,batch:o=!0,eventName:a,fromBlock:u,onError:p,onLogs:m,poll:h,pollingInterval:f=r.pollingInterval,strict:g}=e;return(()=>typeof h<"u"?h:typeof u=="bigint"?!0:!(r.transport.type==="webSocket"||r.transport.type==="fallback"&&r.transport.transports[0].config.type==="webSocket"))()?(()=>{let I=g??!1,A=ut(["watchContractEvent",i,s,o,r.uid,a,f,I,u]);return Fr(A,{onLogs:m,onError:p},M=>{let O;u!==void 0&&(O=u-1n);let G,$=!1,q=Xi(async()=>{if(!$){try{G=await fe(r,fd,"createContractEventFilter")({abi:t,address:i,args:s,eventName:a,strict:I,fromBlock:u})}catch{}$=!0;return}try{let H;if(G)H=await fe(r,os,"getFilterChanges")({filter:G});else{let K=await fe(r,Ji,"getBlockNumber")({});O&&O<K?H=await fe(r,hh,"getContractEvents")({abi:t,address:i,args:s,eventName:a,fromBlock:O+1n,toBlock:K,strict:I}):H=[],O=K}if(H.length===0)return;if(o)M.onLogs(H);else for(let K of H)M.onLogs([K])}catch(H){G&&H instanceof Wi&&($=!1),M.onError?.(H)}},{emitOnBegin:!0,interval:f});return async()=>{G&&await fe(r,as,"uninstallFilter")({filter:G}),q()}})})():(()=>{let I=g??!1,A=ut(["watchContractEvent",i,s,o,r.uid,a,f,I]),M=!0,O=()=>M=!1;return Fr(A,{onLogs:m,onError:p},G=>((async()=>{try{let $=(()=>{if(r.transport.type==="fallback"){let K=r.transport.transports.find(W=>W.config.type==="webSocket");return K?K.value:r.transport}return r.transport})(),q=a?ji({abi:t,eventName:a,args:s}):[],{unsubscribe:H}=await $.subscribe({params:["logs",{address:i,topics:q}],onData(K){if(!M)return;let W=K.result;try{let{eventName:he,args:xe}=xa({abi:t,data:W.data,topics:W.topics,strict:g}),Ae=yr(W,{args:xe,eventName:he});G.onLogs([Ae])}catch(he){let xe,Ae;if(he instanceof bi||he instanceof Fi){if(g)return;xe=he.abiItem.name,Ae=he.abiItem.inputs?.some(le=>!("name"in le&&le.name))}let ot=yr(W,{args:Ae?[]:{},eventName:xe});G.onLogs([ot])}},onError(K){G.onError?.(K)}});O=H,M||O()}catch($){p?.($)}})(),()=>O()))})()}Xt();Ze();var _r=class extends F{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}},ls=class extends F{constructor({docsPath:e,metaMessages:t,type:i}){super(`Account type "${i}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}};ti();Xt();Ze();Xc();function Lh({chain:r,currentChainId:e}){if(!r)throw new _h;if(e!==r.id)throw new yh({chain:r,currentChainId:e})}Zn();Si();Kc();function bI(r,{docsPath:e,...t}){let i=(()=>{let s=es(r,t);return s instanceof si?r:s})();return new Cd(i,{docsPath:e,...t})}$c();Ks();Dc();rs();async function ka(r,{serializedTransaction:e}){return r.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}var u_=new Hi(128);async function wa(r,e){let{account:t=r.account,chain:i=r.chain,accessList:s,authorizationList:o,blobs:a,data:u,gas:p,gasPrice:m,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,value:y,...k}=e;if(typeof t>"u")throw new _r({docsPath:"/docs/actions/wallet/sendTransaction"});let I=t?it(t):null;try{Nr(e);let A=await(async()=>{if(e.to)return e.to;if(e.to!==null&&o&&o.length>0)return await eh({authorization:o[0]}).catch(()=>{throw new F("`to` is required. Could not infer from `authorizationList`.")})})();if(I?.type==="json-rpc"||I===null){let M;i!==null&&(M=await fe(r,ai,"getChainId")({}),Lh({currentChainId:M,chain:i}));let O=r.chain?.formatters?.transactionRequest?.format,$=(O||oi)({...ts(k,{format:O}),accessList:s,authorizationList:o,blobs:a,chainId:M,data:u,from:I?.address,gas:p,gasPrice:m,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,to:A,value:y}),q=u_.get(r.uid),H=q?"wallet_sendTransaction":"eth_sendTransaction";try{return await r.request({method:H,params:[$]},{retryCount:0})}catch(K){if(q===!1)throw K;let W=K;if(W.name==="InvalidInputRpcError"||W.name==="InvalidParamsRpcError"||W.name==="MethodNotFoundRpcError"||W.name==="MethodNotSupportedRpcError")return await r.request({method:"wallet_sendTransaction",params:[$]},{retryCount:0}).then(he=>(u_.set(r.uid,!0),he)).catch(he=>{let xe=he;throw xe.name==="MethodNotFoundRpcError"||xe.name==="MethodNotSupportedRpcError"?(u_.set(r.uid,!1),W):xe});throw W}}if(I?.type==="local"){let M=await fe(r,ns,"prepareTransactionRequest")({account:I,accessList:s,authorizationList:o,blobs:a,chain:i,data:u,gas:p,gasPrice:m,maxFeePerBlobGas:h,maxFeePerGas:f,maxPriorityFeePerGas:g,nonce:b,nonceManager:I.nonceManager,parameters:[...Z0,"sidecars"],value:y,...k,to:A}),O=i?.serializers?.transaction,G=await I.signTransaction(M,{serializer:O});return await fe(r,ka,"sendRawTransaction")({serializedTransaction:G})}throw I?.type==="smart"?new ls({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ls({docsPath:"/docs/actions/wallet/sendTransaction",type:I?.type})}catch(A){throw A instanceof ls?A:bI(A,{...e,account:I,chain:e.chain||void 0})}}async function yI(r,e){let{abi:t,account:i=r.account,address:s,args:o,dataSuffix:a,functionName:u,...p}=e;if(typeof i>"u")throw new _r({docsPath:"/docs/contract/writeContract"});let m=i?it(i):null,h=Mt({abi:t,args:o,functionName:u});try{return await fe(r,wa,"sendTransaction")({data:`${h}${a?a.replace("0x",""):""}`,to:s,account:m,...p})}catch(f){throw Gr(f,{abi:t,address:s,args:o,docsPath:"/docs/contract/writeContract",functionName:u,sender:m?.address})}}Ze();var Th=class extends F{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}};async function _I(r,e){let{address:t,factory:i,factoryData:s}=e;try{let[o,a,u,p,m,h,f]=await fe(r,or,"readContract")({abi:fL,address:t,functionName:"eip712Domain",factory:i,factoryData:s});return{domain:{name:a,version:u,chainId:Number(p),verifyingContract:m,salt:h},extensions:f,fields:o}}catch(o){let a=o;throw a.name==="ContractFunctionExecutionError"&&a.cause.name==="ContractFunctionZeroDataError"?new Th({address:t}):a}}var fL=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];He();async function xI(r,{chain:e}){let{id:t,name:i,nativeCurrency:s,rpcUrls:o,blockExplorers:a}=e;await r.request({method:"wallet_addEthereumChain",params:[{chainId:be(t),chainName:i,nativeCurrency:s,rpcUrls:o.default.http,blockExplorerUrls:a?Object.values(a).map(({url:u})=>u):void 0}]},{dedupe:!0,retryCount:0})}Xt();var Ah=256,Ch;function Mh(r=11){if(!Ch||Ah+r>256*2){Ch="",Ah=0;for(let e=0;e<256;e++)Ch+=(256+Math.random()*256|0).toString(16).substring(1)}return Ch.substring(Ah,Ah+++r)}function Rh(r){let{batch:e,cacheTime:t=r.pollingInterval??4e3,ccipRead:i,key:s="base",name:o="Base Client",pollingInterval:a=4e3,type:u="base"}=r,p=r.chain,m=r.account?it(r.account):void 0,{config:h,request:f,value:g}=r.transport({chain:p,pollingInterval:a}),b={...h,...g},y={account:m,batch:e,cacheTime:t,ccipRead:i,chain:p,key:s,name:o,pollingInterval:a,request:f,transport:b,type:u,uid:Mh()};function k(I){return A=>{let M=A(I);for(let G in y)delete M[G];let O={...I,...M};return Object.assign(O,{extend:k(O)})}}return Object.assign(y,{extend:k(y)})}Ze();Ns();Fc();He();Dc();var Bh=new Hi(8192);function vI(r,{enabled:e=!0,id:t}){if(!e||!t)return r();if(Bh.get(t))return Bh.get(t);let i=r().finally(()=>Bh.delete(t));return Bh.set(t,i),i}function Zc(r,{delay:e=100,retryCount:t=2,shouldRetry:i=()=>!0}={}){return new Promise((s,o)=>{let a=async({count:u=0}={})=>{let p=async({error:m})=>{let h=typeof e=="function"?e({count:u,error:m}):e;h&&await Jc(h),a({count:u+1})};try{let m=await r();s(m)}catch(m){if(u<t&&await i({count:u,error:m}))return p({error:m});o(m)}};a()})}Tr();function II(r,e={}){return async(t,i={})=>{let{dedupe:s=!1,methods:o,retryDelay:a=150,retryCount:u=3,uid:p}={...e,...i},{method:m}=t;if(o?.exclude?.includes(m))throw new Wn(new Error("method not supported"),{method:m});if(o?.include&&!o.include.includes(m))throw new Wn(new Error("method not supported"),{method:m});let h=s?yi(`${p}.${ut(t)}`):void 0;return vI(()=>Zc(async()=>{try{return await r(t)}catch(f){let g=f;switch(g.code){case zo.code:throw new zo(g);case jo.code:throw new jo(g);case Go.code:throw new Go(g,{method:t.method});case Vo.code:throw new Vo(g);case hn.code:throw new hn(g);case Wi.code:throw new Wi(g);case Wo.code:throw new Wo(g);case Ko.code:throw new Ko(g);case $o.code:throw new $o(g);case Wn.code:throw new Wn(g,{method:t.method});case Ps.code:throw new Ps(g);case qo.code:throw new qo(g);case Fs.code:throw new Fs(g);case Yo.code:throw new Yo(g);case Qo.code:throw new Qo(g);case Xo.code:throw new Xo(g);case Jo.code:throw new Jo(g);case Zo.code:throw new Zo(g);case 5e3:throw new Fs(g);default:throw f instanceof F?f:new Nd(g)}}},{delay:({count:f,error:g})=>{if(g&&g instanceof ri){let b=g?.headers?.get("Retry-After");if(b?.match(/\d/))return Number.parseInt(b)*1e3}return~~(1<<f)*a},retryCount:u,shouldRetry:({error:f})=>gL(f)}),{enabled:s,id:h})}}function gL(r){return"code"in r&&typeof r.code=="number"?r.code===-1||r.code===Ps.code||r.code===hn.code:r instanceof ri&&r.status?r.status===403||r.status===408||r.status===413||r.status===429||r.status===500||r.status===502||r.status===503||r.status===504:!0}function Dh({key:r,methods:e,name:t,request:i,retryCount:s=3,retryDelay:o=150,timeout:a,type:u},p){let m=Mh();return{config:{key:r,methods:e,name:t,request:i,retryCount:s,retryDelay:o,timeout:a,type:u},request:II(i,{methods:e,retryCount:s,retryDelay:o,uid:m}),value:p}}function Ea(r,e={}){let{key:t="custom",methods:i,name:s="Custom Provider",retryDelay:o}=e;return({retryCount:a})=>Dh({key:t,methods:i,name:s,request:r.request.bind(r),retryCount:e.retryCount??a,retryDelay:o,type:"custom"})}Ns();Ze();var Oh=class extends F{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};l_();Ns();function SI(r,{errorInstance:e=new Error("timed out"),timeout:t,signal:i}){return new Promise((s,o)=>{(async()=>{let a;try{let u=new AbortController;t>0&&(a=setTimeout(()=>{i?u.abort():o(e)},t)),s(await r({signal:u?.signal||null}))}catch(u){u?.name==="AbortError"&&o(e),o(u)}finally{clearTimeout(a)}})()})}Tr();function bL(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var p_=bL();function kI(r,e={}){return{async request(t){let{body:i,onRequest:s=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=t,u={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:p,method:m,signal:h}=u;try{let f=await SI(async({signal:b})=>{let y={...u,body:Array.isArray(i)?ut(i.map(M=>({jsonrpc:"2.0",id:M.id??p_.take(),...M}))):ut({jsonrpc:"2.0",id:i.id??p_.take(),...i}),headers:{"Content-Type":"application/json",...p},method:m||"POST",signal:h||(a>0?b:null)},k=new Request(r,y),I=await s?.(k,y)??{...y,url:r};return await fetch(I.url??r,I)},{errorInstance:new Pc({body:i,url:r}),timeout:a,signal:!0});o&&await o(f);let g;if(f.headers.get("Content-Type")?.startsWith("application/json"))g=await f.json();else{g=await f.text();try{g=JSON.parse(g||"{}")}catch(b){if(f.ok)throw b;g={error:g}}}if(!f.ok)throw new ri({body:i,details:ut(g.error)||f.statusText,headers:f.headers,status:f.status,url:r});return g}catch(f){throw f instanceof ri||f instanceof Pc?f:new ri({body:i,cause:f,url:r})}}}}function eu(r,e={}){let{batch:t,fetchOptions:i,key:s="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:u,onFetchResponse:p,retryDelay:m,raw:h}=e;return({chain:f,retryCount:g,timeout:b})=>{let{batchSize:y=1e3,wait:k=0}=typeof t=="object"?t:{},I=e.retryCount??g,A=b??e.timeout??1e4,M=r||f?.rpcUrls.default.http[0];if(!M)throw new Oh;let O=kI(M,{fetchOptions:i,onRequest:u,onResponse:p,timeout:A});return Dh({key:s,methods:o,name:a,async request({method:G,params:$}){let q={method:G,params:$},{schedule:H}=Sh({id:M,wait:k,shouldSplitBatch(xe){return xe.length>y},fn:xe=>O.request({body:xe}),sort:(xe,Ae)=>xe.id-Ae.id}),K=async xe=>t?H(xe):[await O.request({body:xe})],[{error:W,result:he}]=await K(q);if(h)return{error:W,result:he};if(W)throw new Gn({body:q,error:W,url:M});return he},retryCount:I,retryDelay:m,timeout:A,type:"http"},{fetchOptions:i,url:M})}}qs();ss();ti();Js();Co();He();bd();Ze();jn();function La(r,e){if(!(r instanceof F))return!1;let t=r.walk(i=>i instanceof Os);return t instanceof Os?!!(t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ResolverWildcardNotSupported"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverError"||t.data?.errorName==="HttpError"||t.reason?.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&t.reason===gd[50]):!1}ei();ir();He();vi();fi();function Nh(r){if(r.length!==66||r.indexOf("[")!==0||r.indexOf("]")!==65)return null;let e=`0x${r.slice(1,65)}`;return zt(e)?e:null}function Ta(r){let e=new Uint8Array(32).fill(0);if(!r)return ct(e);let t=r.split(".");for(let i=t.length-1;i>=0;i-=1){let s=Nh(t[i]),o=s?Zr(s):St(_i(t[i]),"bytes");e=St(Lr([e,o]),"bytes")}return ct(e)}ir();function wI(r){return`[${r.slice(2)}]`}ir();He();vi();function EI(r){let e=new Uint8Array(32).fill(0);return r?Nh(r)||St(_i(r)):ct(e)}function cs(r){let e=r.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);let t=new Uint8Array(_i(e).byteLength+2),i=0,s=e.split(".");for(let o=0;o<s.length;o++){let a=_i(s[o]);a.byteLength>255&&(a=_i(wI(EI(s[o])))),t[i]=a.length,t.set(a,i+1),i+=a.length+1}return t.byteLength!==i+1?t.slice(0,i+1):t}async function LI(r,e){let{blockNumber:t,blockTag:i,coinType:s,name:o,gatewayUrls:a,strict:u}=e,{chain:p}=r,m=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!p)throw new Error("client chain not configured. universalResolverAddress is required.");return li({blockNumber:t,chain:p,contract:"ensUniversalResolver"})})(),h=p?.ensTlds;if(h&&!h.some(f=>o.endsWith(f)))return null;try{let f=Mt({abi:r_,functionName:"addr",...s!=null?{args:[Ta(o),BigInt(s)]}:{args:[Ta(o)]}}),g={address:m,abi:fh,functionName:"resolve",args:[Ee(cs(o)),f],blockNumber:t,blockTag:i},b=fe(r,or,"readContract"),y=a?await b({...g,args:[...g.args,a]}):await b(g);if(y[0]==="0x")return null;let k=Pr({abi:r_,args:s!=null?[Ta(o),BigInt(s)]:void 0,functionName:"addr",data:y[0]});return k==="0x"||mr(k)==="0x00"?null:k}catch(f){if(u)throw f;if(La(f,"resolve"))return null;throw f}}Ze();var Ph=class extends F{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}},us=class extends F{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}},Aa=class extends F{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},Fh=class extends F{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}};var yL=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,_L=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,xL=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,vL=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function IL(r){try{let e=await fetch(r,{method:"HEAD"});return e.status===200?e.headers.get("content-type")?.startsWith("image/"):!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(t=>{let i=new Image;i.onload=()=>{t(!0)},i.onerror=()=>{t(!1)},i.src=r})}}function TI(r,e){return r?r.endsWith("/")?r.slice(0,-1):r:e}function m_({uri:r,gatewayUrls:e}){let t=xL.test(r);if(t)return{uri:r,isOnChain:!0,isEncoded:t};let i=TI(e?.ipfs,"https://ipfs.io"),s=TI(e?.arweave,"https://arweave.net"),o=r.match(yL),{protocol:a,subpath:u,target:p,subtarget:m=""}=o?.groups||{},h=a==="ipns:/"||u==="ipns/",f=a==="ipfs:/"||u==="ipfs/"||_L.test(r);if(r.startsWith("http")&&!h&&!f){let b=r;return e?.arweave&&(b=r.replace(/https:\/\/arweave.net/g,e?.arweave)),{uri:b,isOnChain:!1,isEncoded:!1}}if((h||f)&&p)return{uri:`${i}/${h?"ipns":"ipfs"}/${p}${m}`,isOnChain:!1,isEncoded:!1};if(a==="ar:/"&&p)return{uri:`${s}/${p}${m||""}`,isOnChain:!1,isEncoded:!1};let g=r.replace(vL,"");if(g.startsWith("<svg")&&(g=`data:image/svg+xml;base64,${btoa(g)}`),g.startsWith("data:")||g.startsWith("{"))return{uri:g,isOnChain:!0,isEncoded:!1};throw new Aa({uri:r})}function d_(r){if(typeof r!="object"||!("image"in r)&&!("image_url"in r)&&!("image_data"in r))throw new Ph({data:r});return r.image||r.image_url||r.image_data}async function AI({gatewayUrls:r,uri:e}){try{let t=await fetch(e).then(s=>s.json());return await Uh({gatewayUrls:r,uri:d_(t)})}catch{throw new Aa({uri:e})}}async function Uh({gatewayUrls:r,uri:e}){let{uri:t,isOnChain:i}=m_({uri:e,gatewayUrls:r});if(i||await IL(t))return t;throw new Aa({uri:e})}function CI(r){let e=r;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));let[t,i,s]=e.split("/"),[o,a]=t.split(":"),[u,p]=i.split(":");if(!o||o.toLowerCase()!=="eip155")throw new us({reason:"Only EIP-155 supported"});if(!a)throw new us({reason:"Chain ID not found"});if(!p)throw new us({reason:"Contract address not found"});if(!s)throw new us({reason:"Token ID not found"});if(!u)throw new us({reason:"ERC namespace not found"});return{chainID:Number.parseInt(a),namespace:u.toLowerCase(),contractAddress:p,tokenID:s}}async function MI(r,{nft:e}){if(e.namespace==="erc721")return or(r,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return or(r,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Fh({namespace:e.namespace})}async function RI(r,{gatewayUrls:e,record:t}){return/eip155:/i.test(t)?SL(r,{gatewayUrls:e,record:t}):Uh({uri:t,gatewayUrls:e})}async function SL(r,{gatewayUrls:e,record:t}){let i=CI(t),s=await MI(r,{nft:i}),{uri:o,isOnChain:a,isEncoded:u}=m_({uri:s,gatewayUrls:e});if(a&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){let m=u?atob(o.replace("data:application/json;base64,","")):o,h=JSON.parse(m);return Uh({uri:d_(h),gatewayUrls:e})}let p=i.tokenID;return i.namespace==="erc1155"&&(p=p.replace("0x","").padStart(64,"0")),AI({gatewayUrls:e,uri:o.replace(/(?:0x)?{id}/,p)})}qs();ss();ti();Js();He();async function Hh(r,e){let{blockNumber:t,blockTag:i,key:s,name:o,gatewayUrls:a,strict:u}=e,{chain:p}=r,m=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!p)throw new Error("client chain not configured. universalResolverAddress is required.");return li({blockNumber:t,chain:p,contract:"ensUniversalResolver"})})(),h=p?.ensTlds;if(h&&!h.some(f=>o.endsWith(f)))return null;try{let f={address:m,abi:fh,functionName:"resolve",args:[Ee(cs(o)),Mt({abi:t_,functionName:"text",args:[Ta(o),s]})],blockNumber:t,blockTag:i},g=fe(r,or,"readContract"),b=a?await g({...f,args:[...f.args,a]}):await g(f);if(b[0]==="0x")return null;let y=Pr({abi:t_,functionName:"text",data:b[0]});return y===""?null:y}catch(f){if(u)throw f;if(La(f,"resolve"))return null;throw f}}async function BI(r,{blockNumber:e,blockTag:t,assetGatewayUrls:i,name:s,gatewayUrls:o,strict:a,universalResolverAddress:u}){let p=await fe(r,Hh,"getEnsText")({blockNumber:e,blockTag:t,key:"avatar",name:s,universalResolverAddress:u,gatewayUrls:o,strict:a});if(!p)return null;try{return await RI(r,{record:p,gatewayUrls:i})}catch{return null}}qs();Js();He();async function DI(r,{address:e,blockNumber:t,blockTag:i,gatewayUrls:s,strict:o,universalResolverAddress:a}){let u=a;if(!u){if(!r.chain)throw new Error("client chain not configured. universalResolverAddress is required.");u=li({blockNumber:t,chain:r.chain,contract:"ensUniversalResolver"})}let p=`${e.toLowerCase().substring(2)}.addr.reverse`;try{let m={address:u,abi:rI,functionName:"reverse",args:[Ee(cs(p))],blockNumber:t,blockTag:i},h=fe(r,or,"readContract"),[f,g]=s?await h({...m,args:[...m.args,s]}):await h(m);return e.toLowerCase()!==g.toLowerCase()?null:f}catch(m){if(o)throw m;if(La(m,"reverse"))return null;throw m}}Js();He();async function OI(r,e){let{blockNumber:t,blockTag:i,name:s}=e,{chain:o}=r,a=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!o)throw new Error("client chain not configured. universalResolverAddress is required.");return li({blockNumber:t,chain:o,contract:"ensUniversalResolver"})})(),u=o?.ensTlds;if(u&&!u.some(m=>s.endsWith(m)))throw new Error(`${s} is not a valid ENS TLD (${u?.join(", ")}) for chain "${o.name}" (id: ${o.id}).`);let[p]=await fe(r,or,"readContract")({address:a,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ee(cs(s))],blockNumber:t,blockTag:i});return p}Sa();Xt();He();s_();$c();Ks();rs();async function zh(r,e){let{account:t=r.account,blockNumber:i,blockTag:s="latest",blobs:o,data:a,gas:u,gasPrice:p,maxFeePerBlobGas:m,maxFeePerGas:h,maxPriorityFeePerGas:f,to:g,value:b,...y}=e,k=t?it(t):void 0;try{Nr(e);let A=(i?be(i):void 0)||s,M=r.chain?.formatters?.transactionRequest?.format,G=(M||oi)({...ts(y,{format:M}),from:k?.address,blobs:o,data:a,gas:u,gasPrice:p,maxFeePerBlobGas:m,maxFeePerGas:h,maxPriorityFeePerGas:f,to:g,value:b}),$=await r.request({method:"eth_createAccessList",params:[G,A]});return{accessList:$.accessList,gasUsed:BigInt($.gasUsed)}}catch(I){throw vh(I,{...e,account:k,chain:r.chain})}}async function NI(r){let e=Hn(r,{method:"eth_newBlockFilter"}),t=await r.request({method:"eth_newBlockFilter"});return{id:t,request:e(t),type:"block"}}He();async function jh(r,{address:e,args:t,event:i,events:s,fromBlock:o,strict:a,toBlock:u}={}){let p=s??(i?[i]:void 0),m=Hn(r,{method:"eth_newFilter"}),h=[];p&&(h=[p.flatMap(b=>ji({abi:[b],eventName:b.name,args:t}))],i&&(h=h[0]));let f=await r.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof o=="bigint"?be(o):o,toBlock:typeof u=="bigint"?be(u):u,...h.length?{topics:h}:{}}]});return{abi:p,args:t,eventName:i?i.name:void 0,fromBlock:o,id:f,request:m(f),strict:!!a,toBlock:u,type:"event"}}async function Gh(r){let e=Hn(r,{method:"eth_newPendingTransactionFilter"}),t=await r.request({method:"eth_newPendingTransactionFilter"});return{id:t,request:e(t),type:"transaction"}}async function PI(r){let e=await r.request({method:"eth_blobBaseFee"});return BigInt(e)}dr();He();async function FI(r,{blockHash:e,blockNumber:t,blockTag:i="latest"}={}){let s=t!==void 0?be(t):void 0,o;return e?o=await r.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):o=await r.request({method:"eth_getBlockTransactionCountByNumber",params:[s||i]},{dedupe:!!s}),Wt(o)}He();async function h_(r,{address:e,blockNumber:t,blockTag:i="latest"}){let s=t!==void 0?be(t):void 0,o=await r.request({method:"eth_getCode",params:[e,s||i]},{dedupe:!!s});if(o!=="0x")return o}He();function UI(r){return{baseFeePerGas:r.baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:r.gasUsedRatio,oldestBlock:BigInt(r.oldestBlock),reward:r.reward?.map(e=>e.map(t=>BigInt(t)))}}async function HI(r,{blockCount:e,blockNumber:t,blockTag:i="latest",rewardPercentiles:s}){let o=t?be(t):void 0,a=await r.request({method:"eth_feeHistory",params:[be(e),o||i,s]},{dedupe:!!o});return UI(a)}async function zI(r,{filter:e}){let t=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(o=>yr(o));return e.abi?va({abi:e.abi,logs:s,strict:t}):s}He();function Dt(r){return{formatters:void 0,fees:void 0,serializers:void 0,...r}}Yt();Ui();Tr();Ze();var Vh=class extends F{constructor({domain:e}){super(`Invalid domain "${ut(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},Wh=class extends F{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},Kh=class extends F{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}};Ii();gi();He();g0();Un();ei();He();vi();function jI(r){let{domain:e={},message:t,primaryType:i}=r,s={EIP712Domain:qh({domain:e}),...r.types};$h({domain:e,message:t,primaryType:i,types:s});let o=["0x1901"];return e&&o.push(kL({domain:e,types:s})),i!=="EIP712Domain"&&o.push(GI({data:t,primaryType:i,types:s})),St(Lr(o))}function kL({domain:r,types:e}){return GI({data:r,primaryType:"EIP712Domain",types:e})}function GI({data:r,primaryType:e,types:t}){let i=VI({data:r,primaryType:e,types:t});return St(i)}function VI({data:r,primaryType:e,types:t}){let i=[{type:"bytes32"}],s=[wL({primaryType:e,types:t})];for(let o of t[e]){let[a,u]=KI({types:t,name:o.name,type:o.type,value:r[o.name]});i.push(a),s.push(u)}return jr(i,s)}function wL({primaryType:r,types:e}){let t=Ee(EL({primaryType:r,types:e}));return St(t)}function EL({primaryType:r,types:e}){let t="",i=WI({primaryType:r,types:e});i.delete(r);let s=[r,...Array.from(i).sort()];for(let o of s)t+=`${o}(${e[o].map(({name:a,type:u})=>`${u} ${a}`).join(",")})`;return t}function WI({primaryType:r,types:e},t=new Set){let s=r.match(/^\w*/u)?.[0];if(t.has(s)||e[s]===void 0)return t;t.add(s);for(let o of e[s])WI({primaryType:o.type,types:e},t);return t}function KI({types:r,name:e,type:t,value:i}){if(r[t]!==void 0)return[{type:"bytes32"},St(VI({data:i,primaryType:t,types:r}))];if(t==="bytes")return i=`0x${(i.length%2?"0":"")+i.slice(2)}`,[{type:"bytes32"},St(i)];if(t==="string")return[{type:"bytes32"},St(Ee(i))];if(t.lastIndexOf("]")===t.length-1){let s=t.slice(0,t.lastIndexOf("[")),o=i.map(a=>KI({name:e,type:s,types:r,value:a}));return[{type:"bytes32"},St(jr(o.map(([a])=>a),o.map(([,a])=>a)))]}return[{type:t},i]}Tr();function $I(r){let{domain:e,message:t,primaryType:i,types:s}=r,o=(p,m)=>{let h={...m};for(let f of p){let{name:g,type:b}=f;b==="address"&&(h[g]=h[g].toLowerCase())}return h},a=(()=>s.EIP712Domain?e?o(s.EIP712Domain,e):{}:{})(),u=(()=>{if(i!=="EIP712Domain")return o(s[i],t)})();return ut({domain:a,message:u,primaryType:i,types:s})}function $h(r){let{domain:e,message:t,primaryType:i,types:s}=r,o=(a,u)=>{for(let p of a){let{name:m,type:h}=p,f=u[m],g=h.match(md);if(g&&(typeof f=="number"||typeof f=="bigint")){let[k,I,A]=g;be(f,{signed:I==="int",size:Number.parseInt(A)/8})}if(h==="address"&&typeof f=="string"&&!_t(f))throw new Et({address:f});let b=h.match(Nx);if(b){let[k,I]=b;if(I&&mt(f)!==Number.parseInt(I))throw new Km({expectedSize:Number.parseInt(I),givenSize:mt(f)})}let y=s[h];y&&(LL(h),o(y,f))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Vh({domain:e});o(s.EIP712Domain,e)}if(i!=="EIP712Domain")if(s[i])o(s[i],t);else throw new Wh({primaryType:i,types:s})}function qh({domain:r}){return[typeof r?.name=="string"&&{name:"name",type:"string"},r?.version&&{name:"version",type:"string"},(typeof r?.chainId=="number"||typeof r?.chainId=="bigint")&&{name:"chainId",type:"uint256"},r?.verifyingContract&&{name:"verifyingContract",type:"address"},r?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function LL(r){if(r==="address"||r==="bool"||r==="string"||r.startsWith("bytes")||r.startsWith("uint")||r.startsWith("int"))throw new Kh({type:r})}ti();He();Si();ei();Co();He();Q0();Ui();Ze();Xc();Zn();Ii();gi();Ms();dr();function qI(r){let{authorizationList:e}=r;if(e)for(let t of e){let{chainId:i}=t,s=t.address;if(!_t(s))throw new Et({address:s});if(i<0)throw new Qs({chainId:i})}Yh(r)}function YI(r){let{blobVersionedHashes:e}=r;if(e){if(e.length===0)throw new ba;for(let t of e){let i=mt(t),s=Wt(dn(t,0,1));if(i!==32)throw new ch({hash:t,size:i});if(s!==1)throw new uh({hash:t,version:s})}}Yh(r)}function Yh(r){let{chainId:e,maxPriorityFeePerGas:t,maxFeePerGas:i,to:s}=r;if(e<=0)throw new Qs({chainId:e});if(s&&!_t(s))throw new Et({address:s});if(i&&i>pa)throw new ni({maxFeePerGas:i});if(t&&i&&t>i)throw new qi({maxFeePerGas:i,maxPriorityFeePerGas:t})}function QI(r){let{chainId:e,maxPriorityFeePerGas:t,gasPrice:i,maxFeePerGas:s,to:o}=r;if(e<=0)throw new Qs({chainId:e});if(o&&!_t(o))throw new Et({address:o});if(t||s)throw new F("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(i&&i>pa)throw new ni({maxFeePerGas:i})}function XI(r){let{chainId:e,maxPriorityFeePerGas:t,gasPrice:i,maxFeePerGas:s,to:o}=r;if(o&&!_t(o))throw new Et({address:o});if(typeof e<"u"&&e<=0)throw new Qs({chainId:e});if(t||s)throw new F("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(i&&i>pa)throw new ni({maxFeePerGas:i})}Ui();Si();Ii();function tu(r){if(!r||r.length===0)return[];let e=[];for(let t=0;t<r.length;t++){let{address:i,storageKeys:s}=r[t];for(let o=0;o<s.length;o++)if(s[o].length-2!==64)throw new Ad({storageKey:s[o]});if(!_t(i,{strict:!1}))throw new Et({address:i});e.push([i,s])}return e}function JI(r,e){let t=mh(r);return t==="eip1559"?CL(r,e):t==="eip2930"?ML(r,e):t==="eip4844"?AL(r,e):t==="eip7702"?TL(r,e):RL(r,e)}function TL(r,e){let{authorizationList:t,chainId:i,gas:s,nonce:o,to:a,value:u,maxFeePerGas:p,maxPriorityFeePerGas:m,accessList:h,data:f}=r;qI(r);let g=tu(h),b=ZI(t);return hr(["0x04",Ei([Ee(i),o?Ee(o):"0x",m?Ee(m):"0x",p?Ee(p):"0x",s?Ee(s):"0x",a??"0x",u?Ee(u):"0x",f??"0x",g,b,...Ca(r,e)])])}function AL(r,e){let{chainId:t,gas:i,nonce:s,to:o,value:a,maxFeePerBlobGas:u,maxFeePerGas:p,maxPriorityFeePerGas:m,accessList:h,data:f}=r;YI(r);let g=r.blobVersionedHashes,b=r.sidecars;if(r.blobs&&(typeof g>"u"||typeof b>"u")){let O=typeof r.blobs[0]=="string"?r.blobs:r.blobs.map(q=>ct(q)),G=r.kzg,$=fa({blobs:O,kzg:G});if(typeof g>"u"&&(g=ah({commitments:$})),typeof b>"u"){let q=ga({blobs:O,commitments:$,kzg:G});b=ph({blobs:O,commitments:$,proofs:q})}}let y=tu(h),k=[Ee(t),s?Ee(s):"0x",m?Ee(m):"0x",p?Ee(p):"0x",i?Ee(i):"0x",o??"0x",a?Ee(a):"0x",f??"0x",y,u?Ee(u):"0x",g??[],...Ca(r,e)],I=[],A=[],M=[];if(b)for(let O=0;O<b.length;O++){let{blob:G,commitment:$,proof:q}=b[O];I.push(G),A.push($),M.push(q)}return hr(["0x03",b?Ei([k,I,A,M]):Ei(k)])}function CL(r,e){let{chainId:t,gas:i,nonce:s,to:o,value:a,maxFeePerGas:u,maxPriorityFeePerGas:p,accessList:m,data:h}=r;Yh(r);let f=tu(m),g=[Ee(t),s?Ee(s):"0x",p?Ee(p):"0x",u?Ee(u):"0x",i?Ee(i):"0x",o??"0x",a?Ee(a):"0x",h??"0x",f,...Ca(r,e)];return hr(["0x02",Ei(g)])}function ML(r,e){let{chainId:t,gas:i,data:s,nonce:o,to:a,value:u,accessList:p,gasPrice:m}=r;QI(r);let h=tu(p),f=[Ee(t),o?Ee(o):"0x",m?Ee(m):"0x",i?Ee(i):"0x",a??"0x",u?Ee(u):"0x",s??"0x",h,...Ca(r,e)];return hr(["0x01",Ei(f)])}function RL(r,e){let{chainId:t=0,gas:i,data:s,nonce:o,to:a,value:u,gasPrice:p}=r;XI(r);let m=[o?Ee(o):"0x",p?Ee(p):"0x",i?Ee(i):"0x",a??"0x",u?Ee(u):"0x",s??"0x"];if(e){let h=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(t>0)return BigInt(t*2)+BigInt(35n+e.v-27n);let b=27n+(e.v===27n?0n:1n);if(e.v!==b)throw new Ld({v:e.v});return b})(),f=mr(e.r),g=mr(e.s);m=[...m,Ee(h),f==="0x00"?"0x":f,g==="0x00"?"0x":g]}else t>0&&(m=[...m,Ee(t),"0x","0x"]);return Ei(m)}function Ca(r,e){let t=e??r,{v:i,yParity:s}=t;if(typeof t.r>"u")return[];if(typeof t.s>"u")return[];if(typeof i>"u"&&typeof s>"u")return[];let o=mr(t.r),a=mr(t.s);return[(()=>typeof s=="number"?s?Ee(1):"0x":i===0n?"0x":i===1n?Ee(1):i===27n?"0x":Ee(1))(),o==="0x00"?"0x":o,a==="0x00"?"0x":a]}function ZI(r){if(!r||r.length===0)return[];let e=[];for(let t of r){let{chainId:i,nonce:s,...o}=t,a=t.address;e.push([i?Ee(i):"0x",a,s?Ee(s):"0x",...Ca({},o)])}return e}dr();rh();var BL={"0x0":"reverted","0x1":"success"};function f_(r){let e={...r,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,contractAddress:r.contractAddress?r.contractAddress:null,cumulativeGasUsed:r.cumulativeGasUsed?BigInt(r.cumulativeGasUsed):null,effectiveGasPrice:r.effectiveGasPrice?BigInt(r.effectiveGasPrice):null,gasUsed:r.gasUsed?BigInt(r.gasUsed):null,logs:r.logs?r.logs.map(t=>yr(t)):null,to:r.to?r.to:null,transactionIndex:r.transactionIndex?Wt(r.transactionIndex):null,status:r.status?BL[r.status]:null,type:r.type?X0[r.type]||r.type:null};return r.blobGasPrice&&(e.blobGasPrice=BigInt(r.blobGasPrice)),r.blobGasUsed&&(e.blobGasUsed=BigInt(r.blobGasUsed)),e}var eS=ca("transactionReceipt",f_);dr();vi();var tS=`Ethereum Signed Message:
`;ei();gi();He();function rS(r){let e=(()=>typeof r=="string"?yi(r):typeof r.raw=="string"?r.raw:ct(r.raw))(),t=yi(`${tS}${mt(e)}`);return Lr([t,e])}function Qh(r,e){return St(rS(r),e)}var Xh="0x6492649264926492649264926492649264926492649264926492649264926492";Ms();function iS(r){return f0(r,-32)===Xh}Un();ei();ir();function nS(r){let{address:e,data:t,signature:i,to:s="hex"}=r,o=hr([jr([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,t,i]),Xh]);return s==="hex"?o:Qt(o)}Ze();var Jh=class extends F{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}};function g_(r,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(r))throw new Jh({value:r});let[t,i="0"]=r.split("."),s=t.startsWith("-");if(s&&(t=t.slice(1)),i=i.replace(/(0+)$/,""),e===0)Math.round(+`.${i}`)===1&&(t=`${BigInt(t)+1n}`),i="";else if(i.length>e){let[o,a,u]=[i.slice(0,e-1),i.slice(e-1,e),i.slice(e)],p=Math.round(+`${a}.${u}`);p>9?i=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):i=`${o}${p}`,i.length>e&&(i=i.slice(1),t=`${BigInt(t)+1n}`),i=i.slice(0,e)}else i=i.padEnd(e,"0");return BigInt(`${s?"-":""}${t}${i}`)}function DL(r){return r.map(e=>({...e,value:BigInt(e.value)}))}function sS(r){return{...r,balance:r.balance?BigInt(r.balance):void 0,nonce:r.nonce?Wt(r.nonce):void 0,storageProof:r.storageProof?DL(r.storageProof):void 0}}async function oS(r,{address:e,blockNumber:t,blockTag:i,storageKeys:s}){let o=i??"latest",a=t!==void 0?be(t):void 0,u=await r.request({method:"eth_getProof",params:[e,s,a||o]});return sS(u)}He();async function aS(r,{address:e,blockNumber:t,blockTag:i="latest",slot:s}){let o=t!==void 0?be(t):void 0;return await r.request({method:"eth_getStorageAt",params:[e,s,o||i]})}Si();He();async function Ma(r,{blockHash:e,blockNumber:t,blockTag:i,hash:s,index:o}){let a=i||"latest",u=t!==void 0?be(t):void 0,p=null;if(s?p=await r.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?p=await r.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,be(o)]},{dedupe:!0}):(u||a)&&(p=await r.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||a,be(o)]},{dedupe:!!u})),!p)throw new Fo({blockHash:e,blockNumber:t,blockTag:a,hash:s,index:o});return(r.chain?.formatters?.transaction?.format||$s)(p)}async function lS(r,{hash:e,transactionReceipt:t}){let[i,s]=await Promise.all([fe(r,Ji,"getBlockNumber")({}),e?fe(r,Ma,"getTransaction")({hash:e}):void 0]),o=t?.blockNumber||s?.blockNumber;return o?i-o+1n:0n}Si();async function ru(r,{hash:e}){let t=await r.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!t)throw new Uo({hash:e});return(r.chain?.formatters?.transactionReceipt?.format||f_)(t)}qs();Yt();Ze();jn();ss();ti();Js();async function cS(r,e){let{allowFailure:t=!0,batchSize:i,blockNumber:s,blockTag:o,multicallAddress:a,stateOverride:u}=e,p=e.contracts,m=i??(typeof r.batch?.multicall=="object"&&r.batch.multicall.batchSize||1024),h=a;if(!h){if(!r.chain)throw new Error("client chain not configured. multicallAddress is required.");h=li({blockNumber:s,chain:r.chain,contract:"multicall3"})}let f=[[]],g=0,b=0;for(let I=0;I<p.length;I++){let{abi:A,address:M,args:O,functionName:G}=p[I];try{let $=Mt({abi:A,args:O,functionName:G});b+=($.length-2)/2,m>0&&b>m&&f[g].length>0&&(g++,b=($.length-2)/2,f[g]=[]),f[g]=[...f[g],{allowFailure:!0,callData:$,target:M}]}catch($){let q=Gr($,{abi:A,address:M,args:O,docsPath:"/docs/contract/multicall",functionName:G});if(!t)throw q;f[g]=[...f[g],{allowFailure:!0,callData:"0x",target:M}]}}let y=await Promise.allSettled(f.map(I=>fe(r,or,"readContract")({abi:Yc,address:h,args:[I],blockNumber:s,blockTag:o,functionName:"aggregate3",stateOverride:u}))),k=[];for(let I=0;I<y.length;I++){let A=y[I];if(A.status==="rejected"){if(!t)throw A.reason;for(let O=0;O<f[I].length;O++)k.push({status:"failure",error:A.reason,result:void 0});continue}let M=A.value;for(let O=0;O<M.length;O++){let{returnData:G,success:$}=M[O],{callData:q}=f[I][O],{abi:H,address:K,functionName:W,args:he}=p[k.length];try{if(q==="0x")throw new Jr;if(!$)throw new Vi({data:G});let xe=Pr({abi:H,args:he,data:G,functionName:W});k.push(t?{result:xe,status:"success"}:xe)}catch(xe){let Ae=Gr(xe,{abi:H,address:K,args:he,docsPath:"/docs/contract/multicall",functionName:W});if(!t)throw Ae;k.push({error:Ae,result:void 0,status:"failure"})}}}if(k.length!==p.length)throw new F("multicall results mismatch");return k}var uS="0.1.1";function pS(){return uS}var gt=class r extends Error{constructor(e,t={}){let i=(()=>{if(t.cause instanceof r){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause?.message?t.cause.message:t.details})(),s=(()=>t.cause instanceof r&&t.cause.docsPath||t.docsPath)(),a=`https://oxlib.sh${s??""}`,u=[e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...i||s?["",i?`Details: ${i}`:void 0,s?`See: ${a}`:void 0]:[]].filter(p=>typeof p=="string").join(`
`);super(u,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${pS()}`}),this.cause=t.cause,this.details=i,this.docs=a,this.docsPath=s,this.shortMessage=e}walk(e){return mS(this,e)}};function mS(r,e){return e?.(r)?r:r&&typeof r=="object"&&"cause"in r&&r.cause?mS(r.cause,e):e?null:r}var OL="#__bigint";function dS(r,e,t){return JSON.stringify(r,(i,s)=>typeof e=="function"?e(i,s):typeof s=="bigint"?s.toString()+OL:s,t)}function hS(r,e){if(b_(r)>e)throw new Zh({givenSize:b_(r),maxSize:e})}var _n={zero:48,nine:57,A:65,F:70,a:97,f:102};function y_(r){if(r>=_n.zero&&r<=_n.nine)return r-_n.zero;if(r>=_n.A&&r<=_n.F)return r-(_n.A-10);if(r>=_n.a&&r<=_n.f)return r-(_n.a-10)}function fS(r,e={}){let{dir:t,size:i=32}=e;if(i===0)return r;if(r.length>i)throw new ef({size:r.length,targetSize:i,type:"Bytes"});let s=new Uint8Array(i);for(let o=0;o<i;o++){let a=t==="right";s[a?o:i-o-1]=r[a?o:r.length-o-1]}return s}function iu(r,e){if(nr(r)>e)throw new tf({givenSize:nr(r),maxSize:e})}function gS(r,e){if(typeof e=="number"&&e>0&&e>nr(r)-1)throw new nu({offset:e,position:"start",size:nr(r)})}function bS(r,e,t){if(typeof e=="number"&&typeof t=="number"&&nr(r)!==t-e)throw new nu({offset:t,position:"end",size:nr(r)})}function x_(r,e={}){let{dir:t,size:i=32}=e;if(i===0)return r;let s=r.replace("0x","");if(s.length>i*2)throw new rf({size:Math.ceil(s.length/2),targetSize:i,type:"Hex"});return`0x${s[t==="right"?"padEnd":"padStart"](i*2,"0")}`}var FL=new TextEncoder;function _S(r){return r instanceof Uint8Array?r:typeof r=="string"?HL(r):UL(r)}function UL(r){return r instanceof Uint8Array?r:new Uint8Array(r)}function HL(r,e={}){let{size:t}=e,i=r;t&&(iu(r,t),i=en(r,t));let s=i.slice(2);s.length%2&&(s=`0${s}`);let o=s.length/2,a=new Uint8Array(o);for(let u=0,p=0;u<o;u++){let m=y_(s.charCodeAt(p++)),h=y_(s.charCodeAt(p++));if(m===void 0||h===void 0)throw new gt(`Invalid byte sequence ("${s[p-2]}${s[p-1]}" in "${s}").`);a[u]=m*16+h}return a}function xS(r,e={}){let{size:t}=e,i=FL.encode(r);return typeof t=="number"?(hS(i,t),zL(i,t)):i}function zL(r,e){return fS(r,{dir:"right",size:e})}function b_(r){return r.length}var Zh=class extends gt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}};var ef=class extends gt{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};var jL=new TextEncoder,GL=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function VL(r,e={}){let{strict:t=!1}=e;if(!r)throw new nf(r);if(typeof r!="string")throw new nf(r);if(t&&!/^0x[0-9a-fA-F]*$/.test(r))throw new sf(r);if(!r.startsWith("0x"))throw new sf(r)}function Ur(...r){return`0x${r.reduce((e,t)=>e+t.replace("0x",""),"")}`}function of(r,e={}){let t=`0x${Number(r)}`;return typeof e.size=="number"?(iu(t,e.size),xn(t,e.size)):t}function Ra(r,e={}){let t="";for(let s=0;s<r.length;s++)t+=GL[r[s]];let i=`0x${t}`;return typeof e.size=="number"?(iu(i,e.size),en(i,e.size)):i}function Kt(r,e={}){let{signed:t,size:i}=e,s=BigInt(r),o;i?t?o=(1n<<BigInt(i)*8n-1n)-1n:o=2n**(BigInt(i)*8n)-1n:typeof r=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));let a=typeof o=="bigint"&&t?-o-1n:0;if(o&&s>o||s<a){let m=typeof r=="bigint"?"n":"";throw new su({max:o?`${o}${m}`:void 0,min:`${a}${m}`,signed:t,size:i,value:`${r}${m}`})}let p=`0x${(t&&s<0?(1n<<BigInt(i*8))+BigInt(s):s).toString(16)}`;return i?xn(p,i):p}function Ba(r,e={}){return Ra(jL.encode(r),e)}function xn(r,e){return x_(r,{dir:"left",size:e})}function en(r,e){return x_(r,{dir:"right",size:e})}function Da(r,e,t,i={}){let{strict:s}=i;gS(r,e);let o=`0x${r.replace("0x","").slice((e??0)*2,(t??r.length)*2)}`;return s&&bS(o,e,t),o}function nr(r){return Math.ceil((r.length-2)/2)}function v_(r,e={}){let{strict:t=!1}=e;try{return VL(r,{strict:t}),!0}catch{return!1}}var su=class extends gt{constructor({max:e,min:t,signed:i,size:s,value:o}){super(`Number \`${o}\` is not in safe${s?` ${s*8}-bit`:""}${i?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};var nf=class extends gt{constructor(e){super(`Value \`${typeof e=="object"?dS(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},sf=class extends gt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}};var tf=class extends gt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},nu=class extends gt{constructor({offset:e,position:t,size:i}){super(`Slice ${t==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${i}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},rf=class extends gt{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function vS(r){return{address:r.address,amount:Kt(r.amount),index:Kt(r.index),validatorIndex:Kt(r.validatorIndex)}}function IS(r){return{...typeof r.baseFeePerGas=="bigint"&&{baseFeePerGas:Kt(r.baseFeePerGas)},...typeof r.blobBaseFee=="bigint"&&{blobBaseFee:Kt(r.blobBaseFee)},...typeof r.feeRecipient=="string"&&{feeRecipient:r.feeRecipient},...typeof r.gasLimit=="bigint"&&{gasLimit:Kt(r.gasLimit)},...typeof r.number=="bigint"&&{number:Kt(r.number)},...typeof r.prevRandao=="bigint"&&{prevRandao:Kt(r.prevRandao)},...typeof r.time=="bigint"&&{time:Kt(r.time)},...r.withdrawals&&{withdrawals:r.withdrawals.map(vS)}}}Xt();Yt();jn();Zn();ss();ti();He();Kc();Ks();ih();rs();async function ou(r,e){let{blockNumber:t,blockTag:i="latest",blocks:s,returnFullTransactions:o,traceTransfers:a,validation:u}=e;try{let p=[];for(let g of s){let b=g.blockOverrides?IS(g.blockOverrides):void 0,y=g.calls.map(I=>{let A=I,M=A.account?it(A.account):void 0,O={...A,data:A.abi?Mt(A):A.data,from:A.from??M?.address};return Nr(O),oi(O)}),k=g.stateOverrides?ua(g.stateOverrides):void 0;p.push({blockOverrides:b,calls:y,stateOverrides:k})}let h=(t?be(t):void 0)||i;return(await r.request({method:"eth_simulateV1",params:[{blockStateCalls:p,returnFullTransactions:o,traceTransfers:a,validation:u},h]})).map((g,b)=>({...qc(g),calls:g.calls.map((y,k)=>{let{abi:I,args:A,functionName:M,to:O}=s[b].calls[k],G=y.error?.data??y.returnData,$=BigInt(y.gasUsed),q=y.logs?.map(he=>yr(he)),H=y.status==="0x1"?"success":"failure",K=I&&H==="success"&&G!=="0x"?Pr({abi:I,data:G,functionName:M}):null,W=(()=>{if(H==="success")return;let he;if(y.error?.data==="0x"?he=new Jr:y.error&&(he=new Vi(y.error)),!!he)return Gr(he,{abi:I??[],address:O,args:A,functionName:M??"<unknown>"})})();return{data:G,gasUsed:$,logs:q,status:H,...H==="success"?{result:K}:{error:W}}})}))}catch(p){let m=p,h=es(m,{});throw h instanceof si?m:h}}Pm();u0();function af(r,e={}){let{as:t=typeof r=="string"?"Hex":"Bytes"}=e,i=cd(_S(r));return t==="Bytes"?i:Ra(i)}var lf=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let i=this.keys().next().value;i&&this.delete(i)}return this}};var $L={checksum:new lf(8192)},cf=$L.checksum;var YL=/^0x[a-fA-F0-9]{40}$/;function Oa(r,e={}){let{strict:t=!0}=e;if(!YL.test(r))throw new uf({address:r,cause:new I_});if(t){if(r.toLowerCase()===r)return;if(kS(r)!==r)throw new uf({address:r,cause:new S_})}}function kS(r){if(cf.has(r))return cf.get(r);Oa(r,{strict:!1});let e=r.substring(2).toLowerCase(),t=af(xS(e),{as:"Bytes"}),i=e.split("");for(let o=0;o<40;o+=2)t[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(t[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());let s=`0x${i.join("")}`;return cf.set(r,s),s}function pf(r,e={}){let{strict:t=!0}=e??{};try{return Oa(r,{strict:t}),!0}catch{return!1}}var uf=class extends gt{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},I_=class extends gt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},S_=class extends gt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};function df(r){let e=!0,t="",i=0,s="",o=!1;for(let a=0;a<r.length;a++){let u=r[a];if(["(",")",","].includes(u)&&(e=!0),u==="("&&i++,u===")"&&i--,!!e){if(i===0){if(u===" "&&["event","function","error",""].includes(s))s="";else if(s+=u,u===")"){o=!0;break}continue}if(u===" "){r[a-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}s+=u,t+=u}}if(!o)throw new gt("Unable to normalize signature.");return s}function mf(r,e){let t=typeof r,i=e.type;switch(i){case"address":return pf(r,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return i==="tuple"&&"components"in e?Object.values(e.components).every((s,o)=>mf(Object.values(r)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?t==="string"||r instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)?Array.isArray(r)&&r.every(s=>mf(s,{...e,type:i.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function w_(r,e,t){for(let i in r){let s=r[i],o=e[i];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return w_(s.components,o.components,t[i]);let a=[s.type,o.type];if((()=>a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?pf(t[i],{strict:!1}):a.includes("address")&&a.includes("bytes")?pf(t[i],{strict:!1}):!1)())return a}}function hf(r,e={}){let{prepare:t=!0}=e,i=(()=>Array.isArray(r)?Nm(r):typeof r=="string"?Nm(r):r)();return{...i,...t?{hash:Na(i)}:{}}}function wS(r,e,t){let{args:i=[],prepare:s=!0}=t??{},o=v_(e,{strict:!1}),a=r.filter(m=>o?m.type==="function"||m.type==="error"?L_(m)===Da(e,0,4):m.type==="event"?Na(m)===e:!1:"name"in m&&m.name===e);if(a.length===0)throw new eo({name:e});if(a.length===1)return{...a[0],...s?{hash:Na(a[0])}:{}};let u;for(let m of a){if(!("inputs"in m))continue;if(!i||i.length===0){if(!m.inputs||m.inputs.length===0)return{...m,...s?{hash:Na(m)}:{}};continue}if(!m.inputs||m.inputs.length===0||m.inputs.length!==i.length)continue;if(i.every((f,g)=>{let b="inputs"in m&&m.inputs[g];return b?mf(f,b):!1})){if(u&&"inputs"in u&&u.inputs){let f=w_(m.inputs,u.inputs,i);if(f)throw new E_({abiItem:m,type:f[0]},{abiItem:u,type:f[1]})}u=m}}let p=(()=>{if(u)return u;let[m,...h]=a;return{...m,overloads:h}})();if(!p)throw new eo({name:e});return{...p,...s?{hash:Na(p)}:{}}}function L_(r){return Da(Na(r),0,4)}function XL(r){let e=(()=>typeof r=="string"?r:Es(r))();return df(e)}function Na(r){return typeof r!="string"&&"hash"in r&&r.hash?r.hash:af(Ba(XL(r)))}var E_=class extends gt{constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${df(Es(e.abiItem))}\`, and`,`\`${t.type}\` in \`${df(Es(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},eo=class extends gt{constructor({name:e,data:t,type:i="item"}){let s=(()=>e?` with name "${e}"`:t?` with data "${t}"`:"")();super(`ABI ${i}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};var LS=/^(.*)\[([0-9]*)\]$/,TS=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ff=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,y7=2n**(8n-1n)-1n,_7=2n**(16n-1n)-1n,x7=2n**(24n-1n)-1n,v7=2n**(32n-1n)-1n,I7=2n**(40n-1n)-1n,S7=2n**(48n-1n)-1n,k7=2n**(56n-1n)-1n,w7=2n**(64n-1n)-1n,E7=2n**(72n-1n)-1n,L7=2n**(80n-1n)-1n,T7=2n**(88n-1n)-1n,A7=2n**(96n-1n)-1n,C7=2n**(104n-1n)-1n,M7=2n**(112n-1n)-1n,R7=2n**(120n-1n)-1n,B7=2n**(128n-1n)-1n,D7=2n**(136n-1n)-1n,O7=2n**(144n-1n)-1n,N7=2n**(152n-1n)-1n,P7=2n**(160n-1n)-1n,F7=2n**(168n-1n)-1n,U7=2n**(176n-1n)-1n,H7=2n**(184n-1n)-1n,z7=2n**(192n-1n)-1n,j7=2n**(200n-1n)-1n,G7=2n**(208n-1n)-1n,V7=2n**(216n-1n)-1n,W7=2n**(224n-1n)-1n,K7=2n**(232n-1n)-1n,$7=2n**(240n-1n)-1n,q7=2n**(248n-1n)-1n,Y7=2n**(256n-1n)-1n,Q7=-(2n**(8n-1n)),X7=-(2n**(16n-1n)),J7=-(2n**(24n-1n)),Z7=-(2n**(32n-1n)),eG=-(2n**(40n-1n)),tG=-(2n**(48n-1n)),rG=-(2n**(56n-1n)),iG=-(2n**(64n-1n)),nG=-(2n**(72n-1n)),sG=-(2n**(80n-1n)),oG=-(2n**(88n-1n)),aG=-(2n**(96n-1n)),lG=-(2n**(104n-1n)),cG=-(2n**(112n-1n)),uG=-(2n**(120n-1n)),pG=-(2n**(128n-1n)),mG=-(2n**(136n-1n)),dG=-(2n**(144n-1n)),hG=-(2n**(152n-1n)),fG=-(2n**(160n-1n)),gG=-(2n**(168n-1n)),bG=-(2n**(176n-1n)),yG=-(2n**(184n-1n)),_G=-(2n**(192n-1n)),xG=-(2n**(200n-1n)),vG=-(2n**(208n-1n)),IG=-(2n**(216n-1n)),SG=-(2n**(224n-1n)),kG=-(2n**(232n-1n)),wG=-(2n**(240n-1n)),EG=-(2n**(248n-1n)),LG=-(2n**(256n-1n)),TG=2n**8n-1n,AG=2n**16n-1n,CG=2n**24n-1n,MG=2n**32n-1n,RG=2n**40n-1n,BG=2n**48n-1n,DG=2n**56n-1n,OG=2n**64n-1n,NG=2n**72n-1n,PG=2n**80n-1n,FG=2n**88n-1n,UG=2n**96n-1n,HG=2n**104n-1n,zG=2n**112n-1n,jG=2n**120n-1n,GG=2n**128n-1n,VG=2n**136n-1n,WG=2n**144n-1n,KG=2n**152n-1n,$G=2n**160n-1n,qG=2n**168n-1n,YG=2n**176n-1n,QG=2n**184n-1n,XG=2n**192n-1n,JG=2n**200n-1n,ZG=2n**208n-1n,eV=2n**216n-1n,tV=2n**224n-1n,rV=2n**232n-1n,iV=2n**240n-1n,nV=2n**248n-1n,sV=2n**256n-1n;function AS({checksumAddress:r,parameters:e,values:t}){let i=[];for(let s=0;s<e.length;s++)i.push(T_({checksumAddress:r,parameter:e[s],value:t[s]}));return i}function T_({checksumAddress:r=!1,parameter:e,value:t}){let i=e,s=oT(i.type);if(s){let[o,a]=s;return eT(t,{checksumAddress:r,length:o,parameter:{...i,type:a}})}if(i.type==="tuple")return sT(t,{checksumAddress:r,parameter:i});if(i.type==="address")return ZL(t,{checksum:r});if(i.type==="bool")return rT(t);if(i.type.startsWith("uint")||i.type.startsWith("int")){let o=i.type.startsWith("int"),[,,a="256"]=ff.exec(i.type)??[];return iT(t,{signed:o,size:Number(a)})}if(i.type.startsWith("bytes"))return tT(t,{type:i.type});if(i.type==="string")return nT(t);throw new lu(i.type)}function gf(r){let e=0;for(let o=0;o<r.length;o++){let{dynamic:a,encoded:u}=r[o];a?e+=32:e+=nr(u)}let t=[],i=[],s=0;for(let o=0;o<r.length;o++){let{dynamic:a,encoded:u}=r[o];a?(t.push(Kt(e+s,{size:32})),i.push(u),s+=nr(u)):t.push(u)}return Ur(...t,...i)}function ZL(r,e){let{checksum:t=!1}=e;return Oa(r,{strict:t}),{dynamic:!1,encoded:xn(r.toLowerCase())}}function eT(r,e){let{checksumAddress:t,length:i,parameter:s}=e,o=i===null;if(!Array.isArray(r))throw new yf(r);if(!o&&r.length!==i)throw new bf({expectedLength:i,givenLength:r.length,type:`${s.type}[${i}]`});let a=!1,u=[];for(let p=0;p<r.length;p++){let m=T_({checksumAddress:t,parameter:s,value:r[p]});m.dynamic&&(a=!0),u.push(m)}if(o||a){let p=gf(u);if(o){let m=Kt(u.length,{size:32});return{dynamic:!0,encoded:u.length>0?Ur(m,p):m}}if(a)return{dynamic:!0,encoded:p}}return{dynamic:!1,encoded:Ur(...u.map(({encoded:p})=>p))}}function tT(r,{type:e}){let[,t]=e.split("bytes"),i=nr(r);if(!t){let s=r;return i%32!==0&&(s=en(s,Math.ceil((r.length-2)/2/32)*32)),{dynamic:!0,encoded:Ur(xn(Kt(i,{size:32})),s)}}if(i!==Number.parseInt(t))throw new au({expectedSize:Number.parseInt(t),value:r});return{dynamic:!1,encoded:en(r)}}function rT(r){if(typeof r!="boolean")throw new gt(`Invalid boolean value: "${r}" (type: ${typeof r}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:xn(of(r))}}function iT(r,{signed:e,size:t}){if(typeof t=="number"){let i=2n**(BigInt(t)-(e?1n:0n))-1n,s=e?-i-1n:0n;if(r>i||r<s)throw new su({max:i.toString(),min:s.toString(),signed:e,size:t/8,value:r.toString()})}return{dynamic:!1,encoded:Kt(r,{size:32,signed:e})}}function nT(r){let e=Ba(r),t=Math.ceil(nr(e)/32),i=[];for(let s=0;s<t;s++)i.push(en(Da(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Ur(en(Kt(nr(e),{size:32})),...i)}}function sT(r,e){let{checksumAddress:t,parameter:i}=e,s=!1,o=[];for(let a=0;a<i.components.length;a++){let u=i.components[a],p=Array.isArray(r)?a:u.name,m=T_({checksumAddress:t,parameter:u,value:r[p]});o.push(m),m.dynamic&&(s=!0)}return{dynamic:s,encoded:s?gf(o):Ur(...o.map(({encoded:a})=>a))}}function oT(r){let e=r.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function xf(r,e,t){let{checksumAddress:i=!1}=t??{};if(r.length!==e.length)throw new _f({expectedLength:r.length,givenLength:e.length});let s=AS({checksumAddress:i,parameters:r,values:e}),o=gf(s);return o.length===0?"0x":o}function C_(r,e){if(r.length!==e.length)throw new _f({expectedLength:r.length,givenLength:e.length});let t=[];for(let i=0;i<r.length;i++){let s=r[i],o=e[i];t.push(C_.encode(s,o))}return Ur(...t)}(function(r){function e(t,i,s=!1){if(t==="address"){let p=i;return Oa(p),xn(p.toLowerCase(),s?32:0)}if(t==="string")return Ba(i);if(t==="bytes")return i;if(t==="bool")return xn(of(i),s?32:1);let o=t.match(ff);if(o){let[p,m,h="256"]=o,f=Number.parseInt(h)/8;return Kt(i,{size:s?32:f,signed:m==="int"})}let a=t.match(TS);if(a){let[p,m]=a;if(Number.parseInt(m)!==(i.length-2)/2)throw new au({expectedSize:Number.parseInt(m),value:i});return en(i,s?32:0)}let u=t.match(LS);if(u&&Array.isArray(i)){let[p,m]=u,h=[];for(let f=0;f<i.length;f++)h.push(e(m,i[f],!0));return h.length===0?"0x":Ur(...h)}throw new lu(t)}r.encode=e})(C_||(C_={}));var bf=class extends gt{constructor({expectedLength:e,givenLength:t,type:i}){super(`Array length mismatch for type \`${i}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},au=class extends gt{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${nr(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},_f=class extends gt{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${t}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},yf=class extends gt{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},lu=class extends gt{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};function CS(r,e){let{bytecode:t,args:i}=e;return Ur(t,r.inputs?.length&&i?.length?xf(r.inputs,i):"0x")}function MS(r){return hf(r)}function RS(r,...e){let{overloads:t}=r,i=t?uT([r,...t],r.name,{args:e[0]}):r,s=pT(i),o=e.length>0?xf(i.inputs,e[0]):void 0;return o?Ur(s,o):s}function to(r,e={}){return hf(r,e)}function uT(r,e,t){let i=wS(r,e,t);if(i.type!=="function")throw new eo({name:e,type:"function"});return i}function pT(r){return L_(r)}Xt();var BS="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Li="0x0000000000000000000000000000000000000000";bh();Ze();ti();var dT="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function DS(r,e){let{blockNumber:t,blockTag:i,calls:s,stateOverrides:o,traceAssetChanges:a,traceTransfers:u,validation:p}=e,m=e.account?it(e.account):void 0;if(a&&!m)throw new F("`account` is required when `traceAssetChanges` is true");let h=m?CS(MS("constructor(bytes, bytes)"),{bytecode:gh,args:[dT,RS(to("function getBalance(address)"),[m.address])]}):void 0,f=a?await Promise.all(e.calls.map(async de=>{if(!de.data&&!de.abi)return;let{accessList:et}=await zh(r,{account:m.address,...de,data:de.abi?Mt(de):de.data});return et.map(({address:kt,storageKeys:$t})=>$t.length>0?kt:null)})).then(de=>de.flat().filter(Boolean)):[],g=o?.map(de=>de.address===m?.address?{...de,nonce:0}:de),b=await ou(r,{blockNumber:t,blockTag:i,blocks:[...a?[{calls:[{data:h}],stateOverrides:o},{calls:f.map((de,et)=>({abi:[to("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[m.address],to:de,from:Li,nonce:et})),stateOverrides:[{address:Li,nonce:0}]}]:[],{calls:[...s,{}].map((de,et)=>({...de,from:m?.address,nonce:et})),stateOverrides:g},...a?[{calls:[{data:h}]},{calls:f.map((de,et)=>({abi:[to("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[m.address],to:de,from:Li,nonce:et})),stateOverrides:[{address:Li,nonce:0}]},{calls:f.map((de,et)=>({to:de,abi:[to("function decimals() returns (uint256)")],functionName:"decimals",from:Li,nonce:et})),stateOverrides:[{address:Li,nonce:0}]},{calls:f.map((de,et)=>({to:de,abi:[to("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Li,nonce:et})),stateOverrides:[{address:Li,nonce:0}]},{calls:f.map((de,et)=>({to:de,abi:[to("function symbol() returns (string)")],functionName:"symbol",from:Li,nonce:et})),stateOverrides:[{address:Li,nonce:0}]}]:[]],traceTransfers:u,validation:p}),y=a?b[2]:b[0],[k,I,,A,M,O,G,$]=a?b:[],{calls:q,...H}=y,K=q.slice(0,-1)??[],W=k?.calls??[],he=I?.calls??[],xe=[...W,...he].map(de=>de.status==="success"?Ct(de.data):null),Ae=A?.calls??[],ot=M?.calls??[],le=[...Ae,...ot].map(de=>de.status==="success"?Ct(de.data):null),we=(O?.calls??[]).map(de=>de.status==="success"?de.result:null),Ie=($?.calls??[]).map(de=>de.status==="success"?de.result:null),R=(G?.calls??[]).map(de=>de.status==="success"?de.result:null),Ke=[];for(let[de,et]of le.entries()){let kt=xe[de];if(typeof et!="bigint"||typeof kt!="bigint")continue;let $t=we[de-1],rr=Ie[de-1],dt=R[de-1],Mr=(()=>de===0?{address:BS,decimals:18,symbol:"ETH"}:{address:f[de-1],decimals:dt||$t?Number($t??1):void 0,symbol:rr??void 0})();Ke.some(wr=>wr.token.address===Mr.address)||Ke.push({token:Mr,value:{pre:kt,post:et,diff:et-kt}})}return{assetChanges:Ke,block:H,results:K}}qs();bh();jn();xh();Cs();_a();fi();He();Jd();dr();ir();function OS({r,s:e,to:t="hex",v:i,yParity:s}){let o=(()=>{if(s===0||s===1)return s;if(i&&(i===27n||i===28n||i>=35n))return i%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),a=`0x${new bn.Signature(Ct(r),Ct(e)).toCompactHex()}${o===0?"1b":"1c"}`;return t==="hex"?a:Qt(a)}Sa();async function Pa(r,e){let{address:t,factory:i,factoryData:s,hash:o,signature:a,universalSignatureVerifierAddress:u=r.chain?.contracts?.universalSignatureVerifier?.address,...p}=e,m=(()=>zt(a)?a:typeof a=="object"&&"r"in a&&"s"in a?OS(a):ct(a))(),h=await(async()=>!i&&!s||iS(m)?m:nS({address:i,data:s,signature:m}))();try{let f=u?{to:u,data:Mt({abi:i_,functionName:"isValidSig",args:[t,o,h]}),...p}:{data:Xs({abi:i_,args:[t,o,h],bytecode:oI}),...p},{data:g}=await fe(r,Qi,"call")(f);return a0(g??"0x0")}catch(f){try{if(Yi(pd(t),await Zd({hash:o,signature:a})))return!0}catch{}if(f instanceof Ho)return!1;throw f}}async function NS(r,{address:e,message:t,factory:i,factoryData:s,signature:o,...a}){let u=Qh(t);return Pa(r,{address:e,factory:i,factoryData:s,hash:u,signature:o,...a})}async function PS(r,e){let{address:t,factory:i,factoryData:s,signature:o,message:a,primaryType:u,types:p,domain:m,...h}=e,f=jI({message:a,primaryType:u,types:p,domain:m});return Pa(r,{address:t,factory:i,factoryData:s,hash:f,signature:o,...h})}Si();o_();Tr();dr();Tr();function vf(r,{emitOnBegin:e=!1,emitMissed:t=!1,onBlockNumber:i,onError:s,poll:o,pollingInterval:a=r.pollingInterval}){let u=(()=>typeof o<"u"?o:!(r.transport.type==="webSocket"||r.transport.type==="fallback"&&r.transport.transports[0].config.type==="webSocket"))(),p;return u?(()=>{let f=ut(["watchBlockNumber",r.uid,e,t,a]);return Fr(f,{onBlockNumber:i,onError:s},g=>Xi(async()=>{try{let b=await fe(r,Ji,"getBlockNumber")({cacheTime:0});if(p){if(b===p)return;if(b-p>1&&t)for(let y=p+1n;y<b;y++)g.onBlockNumber(y,p),p=y}(!p||b>p)&&(g.onBlockNumber(b,p),p=b)}catch(b){g.onError?.(b)}},{emitOnBegin:e,interval:a}))})():(()=>{let f=ut(["watchBlockNumber",r.uid,e,t]);return Fr(f,{onBlockNumber:i,onError:s},g=>{let b=!0,y=()=>b=!1;return(async()=>{try{let k=(()=>{if(r.transport.type==="fallback"){let A=r.transport.transports.find(M=>M.config.type==="webSocket");return A?A.value:r.transport}return r.transport})(),{unsubscribe:I}=await k.subscribe({params:["newHeads"],onData(A){if(!b)return;let M=Ct(A.result?.number);g.onBlockNumber(M,p),p=M},onError(A){g.onError?.(A)}});y=I,b||y()}catch(k){s?.(k)}})(),()=>y()})})()}async function FS(r,{confirmations:e=1,hash:t,onReplaced:i,pollingInterval:s=r.pollingInterval,retryCount:o=6,retryDelay:a=({count:p})=>~~(1<<p)*200,timeout:u=18e4}){let p=ut(["waitForTransactionReceipt",r.uid,t]),m,h,f,g=!1,{promise:b,resolve:y,reject:k}=Ih(),I=u?setTimeout(()=>k(new Md({hash:t})),u):void 0,A=Fr(p,{onReplaced:i,resolve:y,reject:k},M=>{let O=fe(r,vf,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(G){let $=H=>{clearTimeout(I),O(),H(),A()},q=G;if(!g)try{if(f){if(e>1&&(!f.blockNumber||q-f.blockNumber+1n<e))return;$(()=>M.resolve(f));return}if(m||(g=!0,await Zc(async()=>{m=await fe(r,Ma,"getTransaction")({hash:t}),m.blockNumber&&(q=m.blockNumber)},{delay:a,retryCount:o}),g=!1),f=await fe(r,ru,"getTransactionReceipt")({hash:t}),e>1&&(!f.blockNumber||q-f.blockNumber+1n<e))return;$(()=>M.resolve(f))}catch(H){if(H instanceof Fo||H instanceof Uo){if(!m){g=!1;return}try{h=m,g=!0;let K=await Zc(()=>fe(r,br,"getBlock")({blockNumber:q,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:xe})=>xe instanceof ma});g=!1;let W=K.transactions.find(({from:xe,nonce:Ae})=>xe===h.from&&Ae===h.nonce);if(!W||(f=await fe(r,ru,"getTransactionReceipt")({hash:W.hash}),e>1&&(!f.blockNumber||q-f.blockNumber+1n<e)))return;let he="replaced";W.to===h.to&&W.value===h.value&&W.input===h.input?he="repriced":W.from===W.to&&W.value===0n&&(he="cancelled"),$(()=>{M.onReplaced?.({reason:he,replacedTransaction:h,transaction:W,transactionReceipt:f}),M.resolve(f)})}catch(K){$(()=>M.reject(K))}}else $(()=>M.reject(H))}}})});return b}Tr();function US(r,{blockTag:e="latest",emitMissed:t=!1,emitOnBegin:i=!1,onBlock:s,onError:o,includeTransactions:a,poll:u,pollingInterval:p=r.pollingInterval}){let m=(()=>typeof u<"u"?u:!(r.transport.type==="webSocket"||r.transport.type==="fallback"&&r.transport.transports[0].config.type==="webSocket"))(),h=a??!1,f;return m?(()=>{let y=ut(["watchBlocks",r.uid,e,t,i,h,p]);return Fr(y,{onBlock:s,onError:o},k=>Xi(async()=>{try{let I=await fe(r,br,"getBlock")({blockTag:e,includeTransactions:h});if(I.number&&f?.number){if(I.number===f.number)return;if(I.number-f.number>1&&t)for(let A=f?.number+1n;A<I.number;A++){let M=await fe(r,br,"getBlock")({blockNumber:A,includeTransactions:h});k.onBlock(M,f),f=M}}(!f?.number||e==="pending"&&!I?.number||I.number&&I.number>f.number)&&(k.onBlock(I,f),f=I)}catch(I){k.onError?.(I)}},{emitOnBegin:i,interval:p}))})():(()=>{let y=!0,k=!0,I=()=>y=!1;return(async()=>{try{i&&fe(r,br,"getBlock")({blockTag:e,includeTransactions:h}).then(O=>{y&&k&&(s(O,void 0),k=!1)});let A=(()=>{if(r.transport.type==="fallback"){let O=r.transport.transports.find(G=>G.config.type==="webSocket");return O?O.value:r.transport}return r.transport})(),{unsubscribe:M}=await A.subscribe({params:["newHeads"],async onData(O){if(!y)return;let G=await fe(r,br,"getBlock")({blockNumber:O.blockNumber,includeTransactions:h}).catch(()=>{});y&&(s(G,f),k=!1,f=G)},onError(O){o?.(O)}});I=M,y||I()}catch(A){o?.(A)}})(),()=>I()})()}Tr();Yt();Fc();function HS(r,{address:e,args:t,batch:i=!0,event:s,events:o,fromBlock:a,onError:u,onLogs:p,poll:m,pollingInterval:h=r.pollingInterval,strict:f}){let g=(()=>typeof m<"u"?m:typeof a=="bigint"?!0:!(r.transport.type==="webSocket"||r.transport.type==="fallback"&&r.transport.transports[0].config.type==="webSocket"))(),b=f??!1;return g?(()=>{let I=ut(["watchEvent",e,t,i,r.uid,s,h,a]);return Fr(I,{onLogs:p,onError:u},A=>{let M;a!==void 0&&(M=a-1n);let O,G=!1,$=Xi(async()=>{if(!G){try{O=await fe(r,jh,"createEventFilter")({address:e,args:t,event:s,events:o,strict:b,fromBlock:a})}catch{}G=!0;return}try{let q;if(O)q=await fe(r,os,"getFilterChanges")({filter:O});else{let H=await fe(r,Ji,"getBlockNumber")({});M&&M!==H?q=await fe(r,Ia,"getLogs")({address:e,args:t,event:s,events:o,fromBlock:M+1n,toBlock:H}):q=[],M=H}if(q.length===0)return;if(i)A.onLogs(q);else for(let H of q)A.onLogs([H])}catch(q){O&&q instanceof Wi&&(G=!1),A.onError?.(q)}},{emitOnBegin:!0,interval:h});return async()=>{O&&await fe(r,as,"uninstallFilter")({filter:O}),$()}})})():(()=>{let I=!0,A=()=>I=!1;return(async()=>{try{let M=(()=>{if(r.transport.type==="fallback"){let q=r.transport.transports.find(H=>H.config.type==="webSocket");return q?q.value:r.transport}return r.transport})(),O=o??(s?[s]:void 0),G=[];O&&(G=[O.flatMap(H=>ji({abi:[H],eventName:H.name,args:t}))],s&&(G=G[0]));let{unsubscribe:$}=await M.subscribe({params:["logs",{address:e,topics:G}],onData(q){if(!I)return;let H=q.result;try{let{eventName:K,args:W}=xa({abi:O??[],data:H.data,topics:H.topics,strict:b}),he=yr(H,{args:W,eventName:K});p([he])}catch(K){let W,he;if(K instanceof bi||K instanceof Fi){if(f)return;W=K.abiItem.name,he=K.abiItem.inputs?.some(Ae=>!("name"in Ae&&Ae.name))}let xe=yr(H,{args:he?[]:{},eventName:W});p([xe])}},onError(q){u?.(q)}});A=$,I||A()}catch(M){u?.(M)}})(),()=>A()})()}Tr();function zS(r,{batch:e=!0,onError:t,onTransactions:i,poll:s,pollingInterval:o=r.pollingInterval}){return(typeof s<"u"?s:r.transport.type!=="webSocket")?(()=>{let m=ut(["watchPendingTransactions",r.uid,e,o]);return Fr(m,{onTransactions:i,onError:t},h=>{let f,g=Xi(async()=>{try{if(!f)try{f=await fe(r,Gh,"createPendingTransactionFilter")({});return}catch(y){throw g(),y}let b=await fe(r,os,"getFilterChanges")({filter:f});if(b.length===0)return;if(e)h.onTransactions(b);else for(let y of b)h.onTransactions([y])}catch(b){h.onError?.(b)}},{emitOnBegin:!0,interval:o});return async()=>{f&&await fe(r,as,"uninstallFilter")({filter:f}),g()}})})():(()=>{let m=!0,h=()=>m=!1;return(async()=>{try{let{unsubscribe:f}=await r.transport.subscribe({params:["newPendingTransactions"],onData(g){if(!m)return;let b=g.result;i([b])},onError(g){t?.(g)}});h=f,m||h()}catch(f){t?.(f)}})(),()=>h()})()}function jS(r){let{scheme:e,statement:t,...i}=r.match(hT)?.groups??{},{chainId:s,expirationTime:o,issuedAt:a,notBefore:u,requestId:p,...m}=r.match(fT)?.groups??{},h=r.split("Resources:")[1]?.split(`
- `).slice(1);return{...i,...m,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...a?{issuedAt:new Date(a)}:{},...u?{notBefore:new Date(u)}:{},...p?{requestId:p}:{},...h?{resources:h}:{},...e?{scheme:e}:{},...t?{statement:t}:{}}}var hT=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,fT=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;_a();function GS(r){let{address:e,domain:t,message:i,nonce:s,scheme:o,time:a=new Date}=r;if(t&&i.domain!==t||s&&i.nonce!==s||o&&i.scheme!==o||i.expirationTime&&a>=i.expirationTime||i.notBefore&&a<i.notBefore)return!1;try{if(!i.address||e&&!Yi(i.address,e))return!1}catch{return!1}return!0}async function VS(r,e){let{address:t,domain:i,message:s,nonce:o,scheme:a,signature:u,time:p=new Date,...m}=e,h=jS(s);if(!h.address||!GS({address:t,domain:i,message:h,nonce:o,scheme:a,time:p}))return!1;let g=Qh(s);return Pa(r,{address:h.address,hash:g,signature:u,...m})}function WS(r){return{call:e=>Qi(r,e),createAccessList:e=>zh(r,e),createBlockFilter:()=>NI(r),createContractEventFilter:e=>fd(r,e),createEventFilter:e=>jh(r,e),createPendingTransactionFilter:()=>Gh(r),estimateContractGas:e=>Zv(r,e),estimateGas:e=>ya(r,e),getBalance:e=>dh(r,e),getBlobBaseFee:()=>PI(r),getBlock:e=>br(r,e),getBlockNumber:e=>Ji(r,e),getBlockTransactionCount:e=>FI(r,e),getBytecode:e=>h_(r,e),getChainId:()=>ai(r),getCode:e=>h_(r,e),getContractEvents:e=>hh(r,e),getEip712Domain:e=>_I(r,e),getEnsAddress:e=>LI(r,e),getEnsAvatar:e=>BI(r,e),getEnsName:e=>DI(r,e),getEnsResolver:e=>OI(r,e),getEnsText:e=>Hh(r,e),getFeeHistory:e=>HI(r,e),estimateFeesPerGas:e=>qv(r,e),getFilterChanges:e=>os(r,e),getFilterLogs:e=>zI(r,e),getGasPrice:()=>da(r),getLogs:e=>Ia(r,e),getProof:e=>oS(r,e),estimateMaxPriorityFeePerGas:e=>$v(r,e),getStorageAt:e=>aS(r,e),getTransaction:e=>Ma(r,e),getTransactionConfirmations:e=>lS(r,e),getTransactionCount:e=>ha(r,e),getTransactionReceipt:e=>ru(r,e),multicall:e=>cS(r,e),prepareTransactionRequest:e=>ns(r,e),readContract:e=>or(r,e),sendRawTransaction:e=>ka(r,e),simulate:e=>ou(r,e),simulateBlocks:e=>ou(r,e),simulateCalls:e=>DS(r,e),simulateContract:e=>mI(r,e),verifyMessage:e=>NS(r,e),verifySiweMessage:e=>VS(r,e),verifyTypedData:e=>PS(r,e),uninstallFilter:e=>as(r,e),waitForTransactionReceipt:e=>FS(r,e),watchBlocks:e=>US(r,e),watchBlockNumber:e=>vf(r,e),watchContractEvent:e=>gI(r,e),watchEvent:e=>HS(r,e),watchPendingTransactions:e=>zS(r,e)}}function cu(r){let{key:e="public",name:t="Public Client"}=r;return Rh({...r,key:e,name:t,type:"publicClient"}).extend(WS)}xh();function KS(r,e){let{abi:t,args:i,bytecode:s,...o}=e,a=Xs({abi:t,args:i,bytecode:s});return wa(r,{...o,...o.authorizationList?{to:null}:{},data:a})}Cs();async function $S(r){return r.account?.type==="local"?[r.account.address]:(await r.request({method:"eth_accounts"},{dedupe:!0})).map(t=>mn(t))}async function qS(r){return await r.request({method:"wallet_getPermissions"},{dedupe:!0})}Xt();_a();async function If(r,e){let{account:t=r.account,chainId:i,nonce:s}=e;if(!t)throw new _r({docsPath:"/docs/eip7702/prepareAuthorization"});let o=it(t),a=(()=>{if(e.executor)return e.executor==="self"?e.executor:it(e.executor)})(),u={address:e.contractAddress??e.address,chainId:i,nonce:s};return typeof u.chainId>"u"&&(u.chainId=r.chain?.id??await fe(r,ai,"getChainId")({})),typeof u.nonce>"u"&&(u.nonce=await fe(r,ha,"getTransactionCount")({address:o.address,blockTag:"pending"}),(a==="self"||a?.address&&Yi(a.address,o.address))&&(u.nonce+=1)),u}Cs();async function YS(r){return(await r.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(t=>pd(t))}async function QS(r,e){return r.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}Xt();async function XS(r,e){let{account:t=r.account}=e;if(!t)throw new _r({docsPath:"/docs/eip7702/signAuthorization"});let i=it(t);if(!i.signAuthorization)throw new ls({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:i.type});let s=await If(r,e);return i.signAuthorization(s)}Xt();He();async function JS(r,{account:e=r.account,message:t}){if(!e)throw new _r({docsPath:"/docs/actions/wallet/signMessage"});let i=it(e);if(i.signMessage)return i.signMessage({message:t});let s=(()=>typeof t=="string"?yi(t):t.raw instanceof Uint8Array?Ee(t.raw):t.raw)();return r.request({method:"personal_sign",params:[s,i.address]},{retryCount:0})}Xt();He();Ks();rs();async function ZS(r,e){let{account:t=r.account,chain:i=r.chain,...s}=e;if(!t)throw new _r({docsPath:"/docs/actions/wallet/signTransaction"});let o=it(t);Nr({account:o,...e});let a=await fe(r,ai,"getChainId")({});i!==null&&Lh({currentChainId:a,chain:i});let p=(i?.formatters||r.chain?.formatters)?.transactionRequest?.format||oi;return o.signTransaction?o.signTransaction({...s,chainId:a},{serializer:r.chain?.serializers?.transaction}):await r.request({method:"eth_signTransaction",params:[{...p(s),chainId:be(a),from:o.address}]},{retryCount:0})}Xt();async function ek(r,e){let{account:t=r.account,domain:i,message:s,primaryType:o}=e;if(!t)throw new _r({docsPath:"/docs/actions/wallet/signTypedData"});let a=it(t),u={EIP712Domain:qh({domain:i}),...e.types};if($h({domain:i,message:s,primaryType:o,types:u}),a.signTypedData)return a.signTypedData({domain:i,message:s,primaryType:o,types:u});let p=$I({domain:i,message:s,primaryType:o,types:u});return r.request({method:"eth_signTypedData_v4",params:[a.address,p]},{retryCount:0})}He();async function tk(r,{id:e}){await r.request({method:"wallet_switchEthereumChain",params:[{chainId:be(e)}]},{retryCount:0})}async function rk(r,e){return await r.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function ik(r){return{addChain:e=>xI(r,e),deployContract:e=>KS(r,e),getAddresses:()=>$S(r),getChainId:()=>ai(r),getPermissions:()=>qS(r),prepareAuthorization:e=>If(r,e),prepareTransactionRequest:e=>ns(r,e),requestAddresses:()=>YS(r),requestPermissions:e=>QS(r,e),sendRawTransaction:e=>ka(r,e),sendTransaction:e=>wa(r,e),signAuthorization:e=>XS(r,e),signMessage:e=>JS(r,e),signTransaction:e=>ZS(r,e),signTypedData:e=>ek(r,e),switchChain:e=>tk(r,e),watchAsset:e=>rk(r,e),writeContract:e=>yI(r,e)}}function Fa(r){let{key:e="wallet",name:t="Wallet Client",transport:i}=r;return Rh({...r,key:e,name:t,transport:i,type:"walletClient"}).extend(ik)}He();Id();Jd();He();function uu(){return Ee(bn.utils.randomPrivateKey())}var nk={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}};dr();var sk={block:Kv({format(r){return{transactions:r.transactions?.map(t=>{if(typeof t=="string")return t;let i=$s(t);return i.typeHex==="0x7e"&&(i.isSystemTx=t.isSystemTx,i.mint=t.mint?Ct(t.mint):void 0,i.sourceHash=t.sourceHash,i.type="deposit"),i}),stateRoot:r.stateRoot}}}),transaction:Wv({format(r){let e={};return r.type==="0x7e"&&(e.isSystemTx=r.isSystemTx,e.mint=r.mint?Ct(r.mint):void 0,e.sourceHash=r.sourceHash,e.type="deposit"),e}}),transactionReceipt:eS({format(r){return{l1GasPrice:r.l1GasPrice?Ct(r.l1GasPrice):null,l1GasUsed:r.l1GasUsed?Ct(r.l1GasUsed):null,l1Fee:r.l1Fee?Ct(r.l1Fee):null,l1FeeScalar:r.l1FeeScalar?Number(r.l1FeeScalar):null}}})};Ui();Ii();ei();He();function gT(r,e){return yT(r)?bT(r):JI(r,e)}var ok={transaction:gT};function bT(r){_T(r);let{sourceHash:e,data:t,from:i,gas:s,isSystemTx:o,mint:a,to:u,value:p}=r,m=[e,i,u??"0x",a?Ee(a):"0x",p?Ee(p):"0x",s?Ee(s):"0x",o?"0x1":"0x",t??"0x"];return hr(["0x7e",Ei(m)])}function yT(r){return r.type==="deposit"||typeof r.sourceHash<"u"}function _T(r){let{from:e,to:t}=r;if(e&&!_t(e))throw new Et({address:e});if(t&&!_t(t))throw new Et({address:t})}var ro={contracts:nk,formatters:sk,serializers:ok};var pu=Dt({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}});var Sf=Dt({id:97,name:"Binance Smart Chain Testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.bnbchain.org:8545"]}},blockExplorers:{default:{name:"BscScan",url:"https://testnet.bscscan.com",apiUrl:"https://api-testnet.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0});var kf=Dt({id:8217,name:"Klaytn",nativeCurrency:{decimals:18,name:"Klaytn",symbol:"KLAY"},rpcUrls:{default:{http:["https://public-en-cypress.klaytn.net"]}},blockExplorers:{default:{name:"KlaytnScope",url:"https://scope.klaytn.com"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:96002415}}});var wf=Dt({id:1890,name:"LightLink Phoenix Mainnet",network:"lightlink-phoenix",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://replicator.phoenix.lightlink.io/rpc/v1"]}},blockExplorers:{default:{name:"LightLink Phoenix Explorer",url:"https://phoenix.lightlink.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:125499184}},testnet:!1});var Ua=Dt({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});var Ef=Dt({id:5e3,name:"Mantle",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Explorer",url:"https://mantlescan.xyz/",apiUrl:"https://api.mantlescan.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:304717}}});var Lf=Dt({id:5003,name:"Mantle Sepolia Testnet",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.sepolia.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Testnet Explorer",url:"https://explorer.sepolia.mantle.xyz/",apiUrl:"https://explorer.sepolia.mantle.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:4584012}},testnet:!0});var Tf=56,Af=Dt({id:204,name:"opBNB",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{default:{http:["https://opbnb-mainnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opBNB (BSCScan)",url:"https://opbnb.bscscan.com",apiUrl:"https://api-opbnb.bscscan.com/api"}},contracts:{...ro.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:512881},l2OutputOracle:{[Tf]:{address:"0x153CAB79f4767E2ff862C94aa49573294B13D169"}},portal:{[Tf]:{address:"0x1876EA7702C0ad0C6A2ae6036DE7733edfBca519"}},l1StandardBridge:{[Tf]:{address:"0xF05F0e4362859c3331Cb9395CBC201E3Fa6757Ea"}}},sourceId:Tf});var Cf=97,Mf=Dt({id:5611,name:"opBNB Testnet",nativeCurrency:{decimals:18,name:"tBNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://opbnb-testnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opbnbscan",url:"https://testnet.opbnbscan.com"}},contracts:{...ro.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:3705108},l2OutputOracle:{[Cf]:{address:"0xFf2394Bb843012562f4349C6632a0EcB92fC8810"}},portal:{[Cf]:{address:"0x4386C8ABf2009aC0c263462Da568DD9d46e52a31"}},l1StandardBridge:{[Cf]:{address:"0x677311Fd2cCc511Bbc0f581E8d9a07B033D5E840"}}},testnet:!0,sourceId:Cf});var mu=1,Rf=Dt({...ro,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...ro.contracts,disputeGameFactory:{[mu]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[mu]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[mu]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[mu]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:mu});var Bf=Dt({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});var M_=class r{constructor(){this._isLoading=!1}static getInstance(){return r._instance||(r._instance=new r),r._instance}get isLoading(){return this._isLoading}init(){if(!this.txtLoadingView){var e=Laya.loader.getRes("scenes/notice/TxtLoadingView.lh");this.txtLoadingView=e.create()}}showLoading(e=!1){if(console.log("showLoading..."+e),this.txtLoadingView)e?(this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this._isLoading=!1):(this._isLoading=!0,this.showMaskLoading(),Laya.timer.once(3e3,this,this.showLazyLoading)),this.txtLoadingView.m_txtLabel&&(this.txtLoadingView.m_txtLabel.visible=!1);else return}showLoadingByInfo(e=""){console.log("showLoadingByInfo..."+e),this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this.txtLoadingView.zOrder=1000001,this.txtLoadingView.m_txtLabel.text=e,this.txtLoadingView.m_txtLabel.visible=!0}showMaskLoading(){this._isLoading&&(this.txtLoadingView.backLayer.name="backLayer",this.txtLoadingView.backLayer.mouseEnabled=!0,this.txtLoadingView.backLayer.mouseThrough=!1,this.txtLoadingView.backLayer.visible=!0)}showLazyLoading(){this._isLoading&&(console.log("showLazyLoading..."),this.txtLoadingView.visible=!0,this.txtLoadingView.zOrder=1000001,Laya.stage.addChild(this.txtLoadingView),this.txtLoadingView.x=(Laya.stage.width-this.txtLoadingView.width)/2,this.txtLoadingView.y=(Laya.stage.height-this.txtLoadingView.height)/2),Laya.timer.clear(this,this.showLazyLoading)}hideLoading(){if(console.log("hideLoading..."),this._isLoading=!1,this.txtLoadingView)this.txtLoadingView.removeSelf();else return}dispose(){this.txtLoadingView&&(this.txtLoadingView.destroy(),this.txtLoadingView.removeSelf(),this.txtLoadingView=null),this.txtLoadingView.backLayer&&(this.txtLoadingView.backLayer.destroy(),this.txtLoadingView.backLayer.removeSelf(),this.txtLoadingView.backLayer=null)}},nt=M_.getInstance();var Je=class extends Laya.Event{constructor(){super()}};Je.EVENT_GLOBAL_ERROR_CODE="EVENT_GLOBAL_ERROR_CODE",Je.EVENT_HALL_SOCKET_OPEN="EVENT_HALL_SOCKET_OPEN",Je.EVENT_HALL_SOCKET_ERROR="EVENT_HALL_SOCKET_ERROR",Je.EVENT_HALL_SOCKET_CLOSE="EVENT_HALL_SOCKET_CLOSE",Je.EVENT_HALL_STOP_HEART="EVENT_HALL_STOP_HEART",Je.EVENT_HALL_SHOW_TIP_DELAY="EVENT_HALL_SHOW_TIP_DELAY",Je.EVENT_ROOM_SOCKET_OPEN="EVENT_ROOM_SOCKET_OPEN",Je.EVENT_ROOM_SOCKET_ERROR="EVENT_ROOM_SOCKET_ERROR",Je.EVENT_ROOM_SOCKET_CLOSE="EVENT_ROOM_SOCKET_CLOSE",Je.EVENT_ROOM_STOP_HEART="EVENT_ROOM_STOP_HEART",Je.EVENT_ROOM_SHOW_TIP_DELAY="EVENT_ROOM_SHOW_TIP_DELAY";var T=class{};T.FindView="FindView",T.FindEndView="FindEndView",T.FindAskDialog="FindAskDialog",T.FindRankUpDialog="FindRankUpDialog",T.QuickTipDialog="QuickTipDialog",T.QuickEndView="QuickEndView",T.QuickShareView="QuickShareView",T.QuickOperatorDialog="QuickOperatorDialog",T.MainView="MainView",T.RoleDialog="RoleDialog",T.RemGetDialog="RemGetDialog",T.QuickRechargeDialog="QuickRechargeDialog",T.CreateNameDialog="CreateNameDialog",T.DailyTaskDialog="DailyTaskDialog",T.ActivityTaskDialog="ActivityTaskDialog",T.ShareDialog="ShareDialog",T.InvitationCenterDialog="InvitationCenterDialog",T.DailyTaskDrawDialog="DailyTaskDrawDialog",T.GuideView="GuideView",T.GuideDialogView="GuideDialogView",T.ShareView="ShareView",T.MainTopView="MainTopView",T.GetMoreDialog="GetMoreDialog",T.ShopView="ShopView",T.ItemGetDialog="ItemGetDialog",T.EquipStarUpDialog="EquipStarUpDialog",T.RewardGetDialog="RewardGetDialog",T.AssetNewView="AssetNewView",T.GetTitleDialog="GetTitleDialog",T.NewFunUnLockDialog="NewFunUnLockDialog",T.DialogView="DialogView",T.MallView="MallView",T.MallCardView="MallCardView",T.MallBuyDialog="MallBuyDialog",T.FittingUiView="FittingUiView",T.TaskDialog="TaskDialog",T.CommentDialog="CommentDialog",T.PotraitChangDialog="PotraitChangDialog",T.ClothespressView="ClothespressView",T.ItemSellDialog="ItemSellDialog",T.ItemInfoDialog="ItemInfoDialog",T.OnlineAward="OnlineAward",T.MaillView="MailView",T.MailSendView="MailSendView",T.GameSettingDialog="GameSettingDialog",T.GamesettingSoundView="GamesettingSoundView",T.GameSettingLanguageDialog="GameSettingLanguageDialog",T.GameSettingVersionDialog="GameSettingVersionDialog",T.FriendMainView="FriendMainView",T.FriendSearchView="FriendSearchView",T.FriendGetRewardDialog="FriendGetRewardDialog",T.FriendRewardDialog="FriendRewardDialog",T.PreLoadingView="PreLoadingView",T.RechargeDialog="RechargeDialog",T.WalletChooseHeroDialog="WalletChooseHeroDialog",T.EmployInfoDialog="EmployInfoDialog",T.WalletChoosePropsDialog="WalletChoosePropsDialog",T.FirstRechargeDialog="FirstRechargeDialog",T.FirstWeekRechargeView="FirstWeekRechargeView",T.ClientErrView="ClientErrView",T.RoleUpgradeView="RoleUpgradeView",T.ActiveRechargeView="ActiveRechargeView",T.SmallSaleView="SmallSaleView",T.RechargeSelectDialog="RechargeSelectDialog",T.FBLikeView="FBLikeView",T.TurnSuitPreView="TurnSuitPreView",T.SlotMachineView="SlotMachineView",T.SlotMachineRewardPreDialog="SlotMachineRewardPreDialog",T.SlotMachineResultDialog="SlotMachineResultDialog",T.GashaponView="GashaponView",T.GashaponRewardView="GashaponRewardView",T.ActivityRankRewardView="ActivityRankRewardView",T.AddRechargeView="AddRechargeView",T.CupMatchStartDialog="CupMatchStartDialog",T.CupMatchEndDialog="CupMatchEndDialog",T.CreateLoginView="CreateLoginView",T.SelectHeadDialog="SelectHeadDialog",T.RoleInfoDialog="RoleInfoDialog",T.SelectHeroDialog="SelectHeroDialog",T.CreateSubWalletDialog="CreateSubWalletDialog",T.WalletDialog="WalletDialog",T.WalletTransferDialog="WalletTransferDialog",T.CardPayView="CardPayView",T.SwapView="SwapView",T.GamesettingView="GamesettingView",T.GameSettingGameAccountView="GameSettingGameAccountView",T.NoticeDialog="NoticeDialog",T.HelpDialog="HelpDialog",T.ImgDialog="ImgDialog",T.ChampDetailDialog="ChampDetailDialog",T.ChampRecordDialog="ChampRecordDialog",T.GuildInfoDialog="GuildInfoDialog",T.CreateUnionDialog="CreateUnionDialog",T.UnionInfoView="UnionInfoView",T.UnionEarningView="UnionEarningView",T.UnionRevenueDetailDialog="UnionRevenueDetailDialog",T.UnionSetRevenueDialog="UnionSetRevenueDialog",T.UnionBattleRecordDialog="UnionBattleRecordDialog",T.UnionRevenueRecordDialog="UnionRevenueRecordDialog",T.LoadDialog="LoadDialog",T.ChangeHeadDialog="ChangeHeadDialog",T.CreateRoomDialog="CreateRoomDialog",T.CreateRentalDialog="CreateRentalDialog",T.MyLeasedDialog="MyLeasedDialog",T.MyRentedDialog="MyRentedDialog",T.MyRentalBuyDialog="MyRentalBuyDialog",T.BuyTicketDialog="BuyTicketDialog",T.EnterRoomView="EnterRoomView",T.MatchEndRankView="MatchEndRankView",T.MatchEndTeamRankView="MatchEndTeamRankView",T.MatchReadyView="MatchReadyView",T.MatchEndView="MatchEndView",T.MatchEndRewardTokensDialog="MatchEndRewardTokensDialog",T.HeroGetDialog="HeroGetDialog",T.InputPwdDialog="InputPwdDialog",T.RoomInfoDialog="RoomInfoDialog",T.MailDialog="MailDialog",T.TeamCreateShareDialog="TeamCreateShareDialog",T.TeamShareDialog="TeamShareDialog",T.TeamJoinUsingDialog="TeamJoinUsingDialog",T.MyTeamDialog="MyTeamDialog",T.TeamInfoDialog="TeamInfoDialog",T.MyFriendDialog="MyFriendDialog",T.BuyPropDialog="BuyPropDialog",T.UnionAttrView="UnionAttrView",T.UnionAttrLvUpDialog="UnionAttrLvUpDialog",T.UnionAttributeDetailsDialog="UnionAttributeDetailsDialog",T.NoServerView="NoServerView",T.UnionMemberMoreDialog="UnionMemberMoreDialog",T.HeroUpgradeDialog="HeroUpgradeDialog",T.HeroDetailDialog="HeroDetailDialog",T.SkillTipDialog="SkillTipDialog",T.TransferRecordDialog="TransferRecordDialog",T.JoinRoomDialog="JoinRoomDialog",T.SnakeUpgradeDialog="SnakeUpgradeDialog",T.SnakeUpgradeSuccessDialog="SnakeUpgradeSuccessDialog",T.PlayerUpgradeSuccessDialog="PlayerUpgradeSuccessDialog",T.Knapsack="Knapsack",T.KnapsackTipDialog="KnapsackTipDialog",T.HeroFormationDialog="HeroFormationDialog",T.SignInDialog="SignInDialog",T.InviteRewardDialog="InviteRewardDialog",T.ChallengLoseDialog="ChallengLoseDialog",T.ChallengWinDialog="ChallengWinDialog",T.ChallengBossDialog="ChallengBossDialog",T.ThirbleDropDialog="ThirbleDropDialog",T.LevelDropDialog="LevelDropDialog",T.UseCardDialog="UseCardDialog",T.ArenaView="ArenaView",T.MyBookingView="MyBookingView",T.ArenaLoseDialog="ArenaLoseDialog",T.ArenaBattleDialog="ArenaBattleDialog",T.ArenaWinDialog="ArenaWinDialog",T.ArenaWarNotesView="ArenaWarNotesView",T.ArenaRuleDialog="ArenaRuleDialog",T.EquipSelectDialog="EquipSelectDialog",T.EquipDetailDialog="EquipDetailDialog",T.HireDetailDialog="HireDetailDialog",T.ProxyDetailDialog="ProxyDetailDialog",T.WithDrawRecordDialog="WithDrawRecordDialog",T.NodeRevenueRecordDialog="NodeRevenueRecordDialog",T.RentalRecordDialog="RentalRecordDialog",T.PrivateChatDialog="PrivateChatDialog",T.AirdropRecordDialog="AirdropRecordDialog",T.ActivityInfoDialog="ActivityInfoDialog",T.CharacterStarDialog="CharacterStarDialog",T.LastDrawDialog="LastDrawDialog",T.IgoPageView="IgoPageView",T.IgoJoinDialog="IgoJoinDialog",T.IgoRecordDialog="IgoRecordDialog",T.PveChoosePropsDialog="PveChoosePropsDialog",T.ReferralDialog="ReferralDialog",T.ReferralL2Dialog="ReferralL2Dialog",T.TotalBattlesDialog="TotalBattlesDialog",T.DepositDialog="DepositDialog",T.WithdrawDialog="WithdrawDialog",T.CreateClubDialog="CreateClubDialog",T.CreateClubRoomDialog="CreateClubRoomDialog",T.SettingRateDialog="SettingRateDialog";var c=L1(zk());var v;(e=>{let r;(i=>{let t;(an=>{var Di,vo,Bu,Du,Ou,Nu,Pu,Fu,Uu,Hu,zu,ju,Gu,Vu,Wu,Ku,$u,qu,Yu,Qu,Xu,Ju,Zu,ep,tp,rp,ip,np,sp,op,ap,lp,cp,up,pp,mp,dp,hp,fp,gp,bp,yp,_p,xp,vp,Ip,Sp,kp,wp,Ep,Lp,Tp,Ap,Cp,Mp,Rp,Bp,Dp,Op,Np,Pp,Fp,Up,Hp,zp,jp,Gp,Vp,Wp,Kp,$p,qp,Yp,Qp,Xp,Jp;let s;(Br=>(Br[Br.SYS_NORMAL=1]="SYS_NORMAL",Br[Br.UNKNOWN=2]="UNKNOWN",Br[Br.USER_NOT_EXIST=3]="USER_NOT_EXIST",Br[Br.SYS_DATA_ERROR=4]="SYS_DATA_ERROR",Br[Br.WALLET_ADDRESS_ERROR=5]="WALLET_ADDRESS_ERROR",Br[Br.NOT_ENOUGH_ITEM=6]="NOT_ENOUGH_ITEM",Br[Br.NOT_ENOUGH_TOKEN=7]="NOT_ENOUGH_TOKEN"))(s=an.MessageCode||(an.MessageCode={}));let o;(Z=>(Z[Z.MSG_HEART_BEAT=10001]="MSG_HEART_BEAT",Z[Z.MSG_REG_HALL=10002]="MSG_REG_HALL",Z[Z.MSG_REG_ROOM=10003]="MSG_REG_ROOM",Z[Z.MSG_REMOVE_HALL=11002]="MSG_REMOVE_HALL",Z[Z.MSG_REMOVE_ROOM=11003]="MSG_REMOVE_ROOM",Z[Z.MSG_USER_REGISTER=101]="MSG_USER_REGISTER",Z[Z.MSG_USER_LOGIN=102]="MSG_USER_LOGIN",Z[Z.MSG_REPEAT_LOGIN_NOTICE=103]="MSG_REPEAT_LOGIN_NOTICE",Z[Z.MSG_REQUEST_ROOM_ADDR=104]="MSG_REQUEST_ROOM_ADDR",Z[Z.MSG_ENTER_ROOM=105]="MSG_ENTER_ROOM",Z[Z.MSG_PLAYER_OPR=106]="MSG_PLAYER_OPR",Z[Z.MSG_PLAYER_STATE=107]="MSG_PLAYER_STATE",Z[Z.MSG_GEN_FOOD=108]="MSG_GEN_FOOD",Z[Z.MSG_UPDATE_ROLE=109]="MSG_UPDATE_ROLE",Z[Z.MSG_NOTICE_ENTER=110]="MSG_NOTICE_ENTER",Z[Z.MSG_BATTLE_END=111]="MSG_BATTLE_END",Z[Z.MSG_EAT_FOOD=112]="MSG_EAT_FOOD",Z[Z.MSG_PLAYER_COLLISION=113]="MSG_PLAYER_COLLISION",Z[Z.MSG_REQUEST_SERVER_TIME=114]="MSG_REQUEST_SERVER_TIME",Z[Z.MSG_REQUEST_ROOM_DATA=115]="MSG_REQUEST_ROOM_DATA",Z[Z.MSG_INVITE_LIST=116]="MSG_INVITE_LIST",Z[Z.MSG_REQUEST_INFO=117]="MSG_REQUEST_INFO",Z[Z.MSG_SHOP_BUY=118]="MSG_SHOP_BUY",Z[Z.MSG_PUSH=119]="MSG_PUSH",Z[Z.MSG_QUERY_TOKEN=120]="MSG_QUERY_TOKEN",Z[Z.MSG_PLAYER_OUT=121]="MSG_PLAYER_OUT",Z[Z.MSG_CHARGE=122]="MSG_CHARGE",Z[Z.MSG_WITHDRAW=123]="MSG_WITHDRAW",Z[Z.MSG_PACK_INFO=124]="MSG_PACK_INFO",Z[Z.MSG_TRANSFER=125]="MSG_TRANSFER",Z[Z.MSG_WITHDRAW_INFO=126]="MSG_WITHDRAW_INFO",Z[Z.MSG_CHARGE_RECORD=127]="MSG_CHARGE_RECORD",Z[Z.MSG_WITHDRAW_RECORD=128]="MSG_WITHDRAW_RECORD",Z[Z.MSG_SNAKE_UPGRADE=129]="MSG_SNAKE_UPGRADE",Z[Z.MSG_SNAKE_FIGHT=130]="MSG_SNAKE_FIGHT",Z[Z.MSG_MAIL_CHECK=131]="MSG_MAIL_CHECK",Z[Z.MSG_MAIL_LIST=132]="MSG_MAIL_LIST",Z[Z.MSG_MAIL_GET=133]="MSG_MAIL_GET",Z[Z.MSG_MAIL_DELETE=134]="MSG_MAIL_DELETE",Z[Z.MSG_NEW_MAIL=135]="MSG_NEW_MAIL",Z[Z.MSG_SYS_NOTICE=136]="MSG_SYS_NOTICE",Z[Z.MSG_CHANGE_INFO=137]="MSG_CHANGE_INFO",Z[Z.MSG_AI_ENTER=138]="MSG_AI_ENTER",Z[Z.MSG_AI_END=139]="MSG_AI_END",Z[Z.MSG_OPEN_BOX=140]="MSG_OPEN_BOX",Z[Z.MSG_REQUEST_PRICE=141]="MSG_REQUEST_PRICE",Z[Z.MSG_REQUEST_RANK=142]="MSG_REQUEST_RANK",Z[Z.MSG_LVUP_NOTICE=143]="MSG_LVUP_NOTICE",Z[Z.MSG_CREATE_CLUB=144]="MSG_CREATE_CLUB",Z[Z.MSG_CLUB_INFO=145]="MSG_CLUB_INFO",Z[Z.GM_SEND_SYS_NOTICE=2e3]="GM_SEND_SYS_NOTICE",Z[Z.GM_SEND_SYS_MAIL=2001]="GM_SEND_SYS_MAIL"))(o=an.MessageType||(an.MessageType={}));let Oi=class Oi extends c.Message{constructor(n){super();_e(this,Di,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Di)),!Array.isArray(n)&&typeof n=="object"&&(this.msghead=n.msghead,"msgbody"in n&&n.msgbody!=null&&(this.msgbody=n.msgbody))}get msghead(){return c.Message.getWrapperField(this,u,1)}set msghead(n){c.Message.setWrapperField(this,1,n)}get has_msghead(){return c.Message.getField(this,1)!=null}get msgbody(){return c.Message.getFieldWithDefault(this,2,new Uint8Array(0))}set msgbody(n){c.Message.setField(this,2,n)}get has_msgbody(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new Oi({msghead:u.fromObject(n.msghead)});return n.msgbody!=null&&(l.msgbody=n.msgbody),l}toObject(){let n={};return this.msghead!=null&&(n.msghead=this.msghead.toObject()),this.msgbody!=null&&(n.msgbody=this.msgbody),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_msghead&&l.writeMessage(1,this.msghead,()=>this.msghead.serialize(l)),this.has_msgbody&&this.msgbody.length&&l.writeBytes(2,this.msgbody),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Oi;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.msghead,()=>d.msghead=u.deserialize(l));break;case 2:d.msgbody=l.readBytes();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Oi.deserialize(n)}};Di=new WeakMap;let a=Oi;an.CMsgBase=Oi;let Za=class Za extends c.Message{constructor(n){super();_e(this,vo,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,vo)),!Array.isArray(n)&&typeof n=="object"&&(this.msgtype=n.msgtype,this.msgcode=n.msgcode,"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId))}get msgtype(){return c.Message.getField(this,1)}set msgtype(n){c.Message.setField(this,1,n)}get has_msgtype(){return c.Message.getField(this,1)!=null}get msgcode(){return c.Message.getField(this,2)}set msgcode(n){c.Message.setField(this,2,n)}get has_msgcode(){return c.Message.getField(this,2)!=null}get roleId(){return c.Message.getFieldWithDefault(this,3,"")}set roleId(n){c.Message.setField(this,3,n)}get has_roleId(){return c.Message.getField(this,3)!=null}static fromObject(n){let l=new Za({msgtype:n.msgtype,msgcode:n.msgcode});return n.roleId!=null&&(l.roleId=n.roleId),l}toObject(){let n={};return this.msgtype!=null&&(n.msgtype=this.msgtype),this.msgcode!=null&&(n.msgcode=this.msgcode),this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_msgtype&&l.writeInt32(1,this.msgtype),this.has_msgcode&&l.writeInt32(2,this.msgcode),this.has_roleId&&this.roleId.length&&l.writeString(3,this.roleId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Za;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.msgtype=l.readInt32();break;case 2:d.msgcode=l.readInt32();break;case 3:d.roleId=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Za.deserialize(n)}};vo=new WeakMap;let u=Za;an.CMsgHead=Za;let el=class el extends c.Message{constructor(n){super();_e(this,Bu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Bu)),!Array.isArray(n)&&typeof n=="object"&&("content"in n&&n.content!=null&&(this.content=n.content),"dif"in n&&n.dif!=null&&(this.dif=n.dif),"times"in n&&n.times!=null&&(this.times=n.times))}get content(){return c.Message.getFieldWithDefault(this,1,"")}set content(n){c.Message.setField(this,1,n)}get has_content(){return c.Message.getField(this,1)!=null}get dif(){return c.Message.getFieldWithDefault(this,2,0)}set dif(n){c.Message.setField(this,2,n)}get has_dif(){return c.Message.getField(this,2)!=null}get times(){return c.Message.getFieldWithDefault(this,3,0)}set times(n){c.Message.setField(this,3,n)}get has_times(){return c.Message.getField(this,3)!=null}static fromObject(n){let l=new el({});return n.content!=null&&(l.content=n.content),n.dif!=null&&(l.dif=n.dif),n.times!=null&&(l.times=n.times),l}toObject(){let n={};return this.content!=null&&(n.content=this.content),this.dif!=null&&(n.dif=this.dif),this.times!=null&&(n.times=this.times),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_content&&this.content.length&&l.writeString(1,this.content),this.has_dif&&l.writeInt32(2,this.dif),this.has_times&&l.writeInt32(3,this.times),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new el;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.content=l.readString();break;case 2:d.dif=l.readInt32();break;case 3:d.times=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return el.deserialize(n)}};Bu=new WeakMap;let p=el;an.CS_SEND_SYS_NOTICE=el;let tl=class tl extends c.Message{constructor(n){super();_e(this,Du,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[4,5],ye(this,Du)),!Array.isArray(n)&&typeof n=="object"&&("sendName"in n&&n.sendName!=null&&(this.sendName=n.sendName),"title"in n&&n.title!=null&&(this.title=n.title),"content"in n&&n.content!=null&&(this.content=n.content),this.items=n.items,this.recId=n.recId)}get sendName(){return c.Message.getFieldWithDefault(this,1,"")}set sendName(n){c.Message.setField(this,1,n)}get has_sendName(){return c.Message.getField(this,1)!=null}get title(){return c.Message.getFieldWithDefault(this,2,"")}set title(n){c.Message.setField(this,2,n)}get has_title(){return c.Message.getField(this,2)!=null}get content(){return c.Message.getFieldWithDefault(this,3,"")}set content(n){c.Message.setField(this,3,n)}get has_content(){return c.Message.getField(this,3)!=null}get items(){return c.Message.getFieldWithDefault(this,4,[])}set items(n){c.Message.setField(this,4,n)}get recId(){return c.Message.getFieldWithDefault(this,5,[])}set recId(n){c.Message.setField(this,5,n)}static fromObject(n){let l=new tl({items:n.items,recId:n.recId});return n.sendName!=null&&(l.sendName=n.sendName),n.title!=null&&(l.title=n.title),n.content!=null&&(l.content=n.content),l}toObject(){let n={items:this.items,recId:this.recId};return this.sendName!=null&&(n.sendName=this.sendName),this.title!=null&&(n.title=this.title),this.content!=null&&(n.content=this.content),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_sendName&&this.sendName.length&&l.writeString(1,this.sendName),this.has_title&&this.title.length&&l.writeString(2,this.title),this.has_content&&this.content.length&&l.writeString(3,this.content),this.items.length&&l.writeRepeatedString(4,this.items),this.recId.length&&l.writeRepeatedString(5,this.recId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new tl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.sendName=l.readString();break;case 2:d.title=l.readString();break;case 3:d.content=l.readString();break;case 4:c.Message.addToRepeatedField(d,4,l.readString());break;case 5:c.Message.addToRepeatedField(d,5,l.readString());break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return tl.deserialize(n)}};Du=new WeakMap;let m=tl;an.CS_SEND_SYS_MAIL=tl;let rl=class rl extends c.Message{constructor(n){super();_e(this,Ou,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Ou)),!Array.isArray(n)&&typeof n=="object"&&(this.hallId=n.hallId)}get hallId(){return c.Message.getField(this,1)}set hallId(n){c.Message.setField(this,1,n)}get has_hallId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new rl({hallId:n.hallId})}toObject(){let n={};return this.hallId!=null&&(n.hallId=this.hallId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_hallId&&this.hallId.length&&l.writeString(1,this.hallId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new rl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.hallId=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return rl.deserialize(n)}};Ou=new WeakMap;let h=rl;an.SS_REG_HALL=rl;let il=class il extends c.Message{constructor(n){super();_e(this,Nu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[12,19,24,25],ye(this,Nu)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,"userName"in n&&n.userName!=null&&(this.userName=n.userName),"icon"in n&&n.icon!=null&&(this.icon=n.icon),"createTime"in n&&n.createTime!=null&&(this.createTime=n.createTime),"score"in n&&n.score!=null&&(this.score=n.score),"country"in n&&n.country!=null&&(this.country=n.country),"club"in n&&n.club!=null&&(this.club=n.club),"code"in n&&n.code!=null&&(this.code=n.code),"walletAddr"in n&&n.walletAddr!=null&&(this.walletAddr=n.walletAddr),"snakeId"in n&&n.snakeId!=null&&(this.snakeId=n.snakeId),"kills"in n&&n.kills!=null&&(this.kills=n.kills),this.items=n.items,"invite"in n&&n.invite!=null&&(this.invite=n.invite),"source"in n&&n.source!=null&&(this.source=n.source),"num"in n&&n.num!=null&&(this.num=n.num),"stage"in n&&n.stage!=null&&(this.stage=n.stage),"invNum"in n&&n.invNum!=null&&(this.invNum=n.invNum),"exp"in n&&n.exp!=null&&(this.exp=n.exp),this.reward=n.reward,"ticketValue"in n&&n.ticketValue!=null&&(this.ticketValue=n.ticketValue),"lv"in n&&n.lv!=null&&(this.lv=n.lv),"ticketId"in n&&n.ticketId!=null&&(this.ticketId=n.ticketId),this.snake=n.snake,this.attr=n.attr,"recored"in n&&n.recored!=null&&(this.recored=n.recored),"maxKill"in n&&n.maxKill!=null&&(this.maxKill=n.maxKill),"maxAlive"in n&&n.maxAlive!=null&&(this.maxAlive=n.maxAlive),"skin"in n&&n.skin!=null&&(this.skin=n.skin))}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getFieldWithDefault(this,2,"")}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get icon(){return c.Message.getFieldWithDefault(this,3,"")}set icon(n){c.Message.setField(this,3,n)}get has_icon(){return c.Message.getField(this,3)!=null}get createTime(){return c.Message.getFieldWithDefault(this,4,0)}set createTime(n){c.Message.setField(this,4,n)}get has_createTime(){return c.Message.getField(this,4)!=null}get score(){return c.Message.getFieldWithDefault(this,5,0)}set score(n){c.Message.setField(this,5,n)}get has_score(){return c.Message.getField(this,5)!=null}get country(){return c.Message.getFieldWithDefault(this,6,0)}set country(n){c.Message.setField(this,6,n)}get has_country(){return c.Message.getField(this,6)!=null}get club(){return c.Message.getFieldWithDefault(this,7,"")}set club(n){c.Message.setField(this,7,n)}get has_club(){return c.Message.getField(this,7)!=null}get code(){return c.Message.getFieldWithDefault(this,8,"")}set code(n){c.Message.setField(this,8,n)}get has_code(){return c.Message.getField(this,8)!=null}get walletAddr(){return c.Message.getFieldWithDefault(this,9,"")}set walletAddr(n){c.Message.setField(this,9,n)}get has_walletAddr(){return c.Message.getField(this,9)!=null}get snakeId(){return c.Message.getFieldWithDefault(this,10,0)}set snakeId(n){c.Message.setField(this,10,n)}get has_snakeId(){return c.Message.getField(this,10)!=null}get kills(){return c.Message.getFieldWithDefault(this,11,0)}set kills(n){c.Message.setField(this,11,n)}get has_kills(){return c.Message.getField(this,11)!=null}get items(){return c.Message.getRepeatedWrapperField(this,y,12)}set items(n){c.Message.setRepeatedWrapperField(this,12,n)}get invite(){return c.Message.getFieldWithDefault(this,13,"")}set invite(n){c.Message.setField(this,13,n)}get has_invite(){return c.Message.getField(this,13)!=null}get source(){return c.Message.getFieldWithDefault(this,14,"")}set source(n){c.Message.setField(this,14,n)}get has_source(){return c.Message.getField(this,14)!=null}get num(){return c.Message.getFieldWithDefault(this,15,0)}set num(n){c.Message.setField(this,15,n)}get has_num(){return c.Message.getField(this,15)!=null}get stage(){return c.Message.getFieldWithDefault(this,16,0)}set stage(n){c.Message.setField(this,16,n)}get has_stage(){return c.Message.getField(this,16)!=null}get invNum(){return c.Message.getFieldWithDefault(this,17,0)}set invNum(n){c.Message.setField(this,17,n)}get has_invNum(){return c.Message.getField(this,17)!=null}get exp(){return c.Message.getFieldWithDefault(this,18,0)}set exp(n){c.Message.setField(this,18,n)}get has_exp(){return c.Message.getField(this,18)!=null}get reward(){return c.Message.getFieldWithDefault(this,19,[])}set reward(n){c.Message.setField(this,19,n)}get ticketValue(){return c.Message.getFieldWithDefault(this,20,0)}set ticketValue(n){c.Message.setField(this,20,n)}get has_ticketValue(){return c.Message.getField(this,20)!=null}get lv(){return c.Message.getFieldWithDefault(this,22,0)}set lv(n){c.Message.setField(this,22,n)}get has_lv(){return c.Message.getField(this,22)!=null}get ticketId(){return c.Message.getFieldWithDefault(this,23,0)}set ticketId(n){c.Message.setField(this,23,n)}get has_ticketId(){return c.Message.getField(this,23)!=null}get snake(){return c.Message.getRepeatedWrapperField(this,b,24)}set snake(n){c.Message.setRepeatedWrapperField(this,24,n)}get attr(){return c.Message.getFieldWithDefault(this,25,[])}set attr(n){c.Message.setField(this,25,n)}get recored(){return c.Message.getFieldWithDefault(this,26,"")}set recored(n){c.Message.setField(this,26,n)}get has_recored(){return c.Message.getField(this,26)!=null}get maxKill(){return c.Message.getFieldWithDefault(this,27,0)}set maxKill(n){c.Message.setField(this,27,n)}get has_maxKill(){return c.Message.getField(this,27)!=null}get maxAlive(){return c.Message.getFieldWithDefault(this,28,0)}set maxAlive(n){c.Message.setField(this,28,n)}get has_maxAlive(){return c.Message.getField(this,28)!=null}get skin(){return c.Message.getFieldWithDefault(this,29,0)}set skin(n){c.Message.setField(this,29,n)}get has_skin(){return c.Message.getField(this,29)!=null}static fromObject(n){let l=new il({roleId:n.roleId,items:n.items.map(d=>y.fromObject(d)),reward:n.reward,snake:n.snake.map(d=>b.fromObject(d)),attr:n.attr});return n.userName!=null&&(l.userName=n.userName),n.icon!=null&&(l.icon=n.icon),n.createTime!=null&&(l.createTime=n.createTime),n.score!=null&&(l.score=n.score),n.country!=null&&(l.country=n.country),n.club!=null&&(l.club=n.club),n.code!=null&&(l.code=n.code),n.walletAddr!=null&&(l.walletAddr=n.walletAddr),n.snakeId!=null&&(l.snakeId=n.snakeId),n.kills!=null&&(l.kills=n.kills),n.invite!=null&&(l.invite=n.invite),n.source!=null&&(l.source=n.source),n.num!=null&&(l.num=n.num),n.stage!=null&&(l.stage=n.stage),n.invNum!=null&&(l.invNum=n.invNum),n.exp!=null&&(l.exp=n.exp),n.ticketValue!=null&&(l.ticketValue=n.ticketValue),n.lv!=null&&(l.lv=n.lv),n.ticketId!=null&&(l.ticketId=n.ticketId),n.recored!=null&&(l.recored=n.recored),n.maxKill!=null&&(l.maxKill=n.maxKill),n.maxAlive!=null&&(l.maxAlive=n.maxAlive),n.skin!=null&&(l.skin=n.skin),l}toObject(){let n={reward:this.reward,attr:this.attr};return this.roleId!=null&&(n.roleId=this.roleId),this.userName!=null&&(n.userName=this.userName),this.icon!=null&&(n.icon=this.icon),this.createTime!=null&&(n.createTime=this.createTime),this.score!=null&&(n.score=this.score),this.country!=null&&(n.country=this.country),this.club!=null&&(n.club=this.club),this.code!=null&&(n.code=this.code),this.walletAddr!=null&&(n.walletAddr=this.walletAddr),this.snakeId!=null&&(n.snakeId=this.snakeId),this.kills!=null&&(n.kills=this.kills),this.items!=null&&(n.items=this.items.map(l=>l.toObject())),this.invite!=null&&(n.invite=this.invite),this.source!=null&&(n.source=this.source),this.num!=null&&(n.num=this.num),this.stage!=null&&(n.stage=this.stage),this.invNum!=null&&(n.invNum=this.invNum),this.exp!=null&&(n.exp=this.exp),this.ticketValue!=null&&(n.ticketValue=this.ticketValue),this.lv!=null&&(n.lv=this.lv),this.ticketId!=null&&(n.ticketId=this.ticketId),this.snake!=null&&(n.snake=this.snake.map(l=>l.toObject())),this.recored!=null&&(n.recored=this.recored),this.maxKill!=null&&(n.maxKill=this.maxKill),this.maxAlive!=null&&(n.maxAlive=this.maxAlive),this.skin!=null&&(n.skin=this.skin),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_userName&&this.userName.length&&l.writeString(2,this.userName),this.has_icon&&this.icon.length&&l.writeString(3,this.icon),this.has_createTime&&l.writeInt64(4,this.createTime),this.has_score&&l.writeInt32(5,this.score),this.has_country&&l.writeInt32(6,this.country),this.has_club&&this.club.length&&l.writeString(7,this.club),this.has_code&&this.code.length&&l.writeString(8,this.code),this.has_walletAddr&&this.walletAddr.length&&l.writeString(9,this.walletAddr),this.has_snakeId&&l.writeInt32(10,this.snakeId),this.has_kills&&l.writeInt32(11,this.kills),this.items.length&&l.writeRepeatedMessage(12,this.items,d=>d.serialize(l)),this.has_invite&&this.invite.length&&l.writeString(13,this.invite),this.has_source&&this.source.length&&l.writeString(14,this.source),this.has_num&&l.writeInt32(15,this.num),this.has_stage&&l.writeInt32(16,this.stage),this.has_invNum&&l.writeInt32(17,this.invNum),this.has_exp&&l.writeInt32(18,this.exp),this.reward.length&&l.writeRepeatedString(19,this.reward),this.has_ticketValue&&l.writeDouble(20,this.ticketValue),this.has_lv&&l.writeInt32(22,this.lv),this.has_ticketId&&l.writeInt32(23,this.ticketId),this.snake.length&&l.writeRepeatedMessage(24,this.snake,d=>d.serialize(l)),this.attr.length&&l.writeRepeatedString(25,this.attr),this.has_recored&&this.recored.length&&l.writeString(26,this.recored),this.has_maxKill&&l.writeInt32(27,this.maxKill),this.has_maxAlive&&l.writeInt32(28,this.maxAlive),this.has_skin&&l.writeInt32(29,this.skin),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new il;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.roleId=l.readString();break;case 2:d.userName=l.readString();break;case 3:d.icon=l.readString();break;case 4:d.createTime=l.readInt64();break;case 5:d.score=l.readInt32();break;case 6:d.country=l.readInt32();break;case 7:d.club=l.readString();break;case 8:d.code=l.readString();break;case 9:d.walletAddr=l.readString();break;case 10:d.snakeId=l.readInt32();break;case 11:d.kills=l.readInt32();break;case 12:l.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,12,y.deserialize(l),y));break;case 13:d.invite=l.readString();break;case 14:d.source=l.readString();break;case 15:d.num=l.readInt32();break;case 16:d.stage=l.readInt32();break;case 17:d.invNum=l.readInt32();break;case 18:d.exp=l.readInt32();break;case 19:c.Message.addToRepeatedField(d,19,l.readString());break;case 20:d.ticketValue=l.readDouble();break;case 22:d.lv=l.readInt32();break;case 23:d.ticketId=l.readInt32();break;case 24:l.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,24,b.deserialize(l),b));break;case 25:c.Message.addToRepeatedField(d,25,l.readString());break;case 26:d.recored=l.readString();break;case 27:d.maxKill=l.readInt32();break;case 28:d.maxAlive=l.readInt32();break;case 29:d.skin=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return il.deserialize(n)}};Nu=new WeakMap;let f=il;an.RoleObject=il;let nl=class nl extends c.Message{constructor(n){super();_e(this,Pu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[8],ye(this,Pu)),!Array.isArray(n)&&typeof n=="object"&&("mailId"in n&&n.mailId!=null&&(this.mailId=n.mailId),"sendId"in n&&n.sendId!=null&&(this.sendId=n.sendId),"sendName"in n&&n.sendName!=null&&(this.sendName=n.sendName),"title"in n&&n.title!=null&&(this.title=n.title),"content"in n&&n.content!=null&&(this.content=n.content),"sendTime"in n&&n.sendTime!=null&&(this.sendTime=n.sendTime),"read"in n&&n.read!=null&&(this.read=n.read),this.items=n.items,"get"in n&&n.get!=null&&(this.get=n.get))}get mailId(){return c.Message.getFieldWithDefault(this,1,0)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}get sendId(){return c.Message.getFieldWithDefault(this,2,"")}set sendId(n){c.Message.setField(this,2,n)}get has_sendId(){return c.Message.getField(this,2)!=null}get sendName(){return c.Message.getFieldWithDefault(this,3,"")}set sendName(n){c.Message.setField(this,3,n)}get has_sendName(){return c.Message.getField(this,3)!=null}get title(){return c.Message.getFieldWithDefault(this,4,"")}set title(n){c.Message.setField(this,4,n)}get has_title(){return c.Message.getField(this,4)!=null}get content(){return c.Message.getFieldWithDefault(this,5,"")}set content(n){c.Message.setField(this,5,n)}get has_content(){return c.Message.getField(this,5)!=null}get sendTime(){return c.Message.getFieldWithDefault(this,6,0)}set sendTime(n){c.Message.setField(this,6,n)}get has_sendTime(){return c.Message.getField(this,6)!=null}get read(){return c.Message.getFieldWithDefault(this,7,!1)}set read(n){c.Message.setField(this,7,n)}get has_read(){return c.Message.getField(this,7)!=null}get items(){return c.Message.getRepeatedWrapperField(this,y,8)}set items(n){c.Message.setRepeatedWrapperField(this,8,n)}get get(){return c.Message.getFieldWithDefault(this,9,!1)}set get(n){c.Message.setField(this,9,n)}get has_get(){return c.Message.getField(this,9)!=null}static fromObject(n){let l=new nl({items:n.items.map(d=>y.fromObject(d))});return n.mailId!=null&&(l.mailId=n.mailId),n.sendId!=null&&(l.sendId=n.sendId),n.sendName!=null&&(l.sendName=n.sendName),n.title!=null&&(l.title=n.title),n.content!=null&&(l.content=n.content),n.sendTime!=null&&(l.sendTime=n.sendTime),n.read!=null&&(l.read=n.read),n.get!=null&&(l.get=n.get),l}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),this.sendId!=null&&(n.sendId=this.sendId),this.sendName!=null&&(n.sendName=this.sendName),this.title!=null&&(n.title=this.title),this.content!=null&&(n.content=this.content),this.sendTime!=null&&(n.sendTime=this.sendTime),this.read!=null&&(n.read=this.read),this.items!=null&&(n.items=this.items.map(l=>l.toObject())),this.get!=null&&(n.get=this.get),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_mailId&&l.writeInt32(1,this.mailId),this.has_sendId&&this.sendId.length&&l.writeString(2,this.sendId),this.has_sendName&&this.sendName.length&&l.writeString(3,this.sendName),this.has_title&&this.title.length&&l.writeString(4,this.title),this.has_content&&this.content.length&&l.writeString(5,this.content),this.has_sendTime&&l.writeInt64(6,this.sendTime),this.has_read&&l.writeBool(7,this.read),this.items.length&&l.writeRepeatedMessage(8,this.items,d=>d.serialize(l)),this.has_get&&l.writeBool(9,this.get),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new nl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.mailId=l.readInt32();break;case 2:d.sendId=l.readString();break;case 3:d.sendName=l.readString();break;case 4:d.title=l.readString();break;case 5:d.content=l.readString();break;case 6:d.sendTime=l.readInt64();break;case 7:d.read=l.readBool();break;case 8:l.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,8,y.deserialize(l),y));break;case 9:d.get=l.readBool();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return nl.deserialize(n)}};Pu=new WeakMap;let g=nl;an.MailObject=nl;let sl=class sl extends c.Message{constructor(n){super();_e(this,Fu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[3],ye(this,Fu)),!Array.isArray(n)&&typeof n=="object"&&("id"in n&&n.id!=null&&(this.id=n.id),"unkey"in n&&n.unkey!=null&&(this.unkey=n.unkey),this.attr=n.attr,"skin"in n&&n.skin!=null&&(this.skin=n.skin),"upgrade"in n&&n.upgrade!=null&&(this.upgrade=n.upgrade))}get id(){return c.Message.getFieldWithDefault(this,1,0)}set id(n){c.Message.setField(this,1,n)}get has_id(){return c.Message.getField(this,1)!=null}get unkey(){return c.Message.getFieldWithDefault(this,2,0)}set unkey(n){c.Message.setField(this,2,n)}get has_unkey(){return c.Message.getField(this,2)!=null}get attr(){return c.Message.getFieldWithDefault(this,3,[])}set attr(n){c.Message.setField(this,3,n)}get skin(){return c.Message.getFieldWithDefault(this,4,0)}set skin(n){c.Message.setField(this,4,n)}get has_skin(){return c.Message.getField(this,4)!=null}get upgrade(){return c.Message.getFieldWithDefault(this,5,!1)}set upgrade(n){c.Message.setField(this,5,n)}get has_upgrade(){return c.Message.getField(this,5)!=null}static fromObject(n){let l=new sl({attr:n.attr});return n.id!=null&&(l.id=n.id),n.unkey!=null&&(l.unkey=n.unkey),n.skin!=null&&(l.skin=n.skin),n.upgrade!=null&&(l.upgrade=n.upgrade),l}toObject(){let n={attr:this.attr};return this.id!=null&&(n.id=this.id),this.unkey!=null&&(n.unkey=this.unkey),this.skin!=null&&(n.skin=this.skin),this.upgrade!=null&&(n.upgrade=this.upgrade),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_id&&l.writeInt32(1,this.id),this.has_unkey&&l.writeInt32(2,this.unkey),this.attr.length&&l.writeRepeatedString(3,this.attr),this.has_skin&&l.writeInt32(4,this.skin),this.has_upgrade&&l.writeBool(5,this.upgrade),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new sl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.id=l.readInt32();break;case 2:d.unkey=l.readInt32();break;case 3:c.Message.addToRepeatedField(d,3,l.readString());break;case 4:d.skin=l.readInt32();break;case 5:d.upgrade=l.readBool();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return sl.deserialize(n)}};Fu=new WeakMap;let b=sl;an.SnakeDto=sl;let ol=class ol extends c.Message{constructor(n){super();_e(this,Uu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Uu)),!Array.isArray(n)&&typeof n=="object"&&("itemId"in n&&n.itemId!=null&&(this.itemId=n.itemId),"num"in n&&n.num!=null&&(this.num=n.num),"chainId"in n&&n.chainId!=null&&(this.chainId=n.chainId))}get itemId(){return c.Message.getFieldWithDefault(this,1,0)}set itemId(n){c.Message.setField(this,1,n)}get has_itemId(){return c.Message.getField(this,1)!=null}get num(){return c.Message.getFieldWithDefault(this,2,0)}set num(n){c.Message.setField(this,2,n)}get has_num(){return c.Message.getField(this,2)!=null}get chainId(){return c.Message.getFieldWithDefault(this,3,0)}set chainId(n){c.Message.setField(this,3,n)}get has_chainId(){return c.Message.getField(this,3)!=null}static fromObject(n){let l=new ol({});return n.itemId!=null&&(l.itemId=n.itemId),n.num!=null&&(l.num=n.num),n.chainId!=null&&(l.chainId=n.chainId),l}toObject(){let n={};return this.itemId!=null&&(n.itemId=this.itemId),this.num!=null&&(n.num=this.num),this.chainId!=null&&(n.chainId=this.chainId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_itemId&&l.writeInt32(1,this.itemId),this.has_num&&l.writeDouble(2,this.num),this.has_chainId&&l.writeInt32(3,this.chainId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ol;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.itemId=l.readInt32();break;case 2:d.num=l.readDouble();break;case 3:d.chainId=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ol.deserialize(n)}};Uu=new WeakMap;let y=ol;an.ItemObject=ol;let al=class al extends c.Message{constructor(n){super();_e(this,Hu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Hu)),!Array.isArray(n)&&typeof n=="object"&&(this.icon=n.icon,this.userName=n.userName,this.country=n.country,"walletAddr"in n&&n.walletAddr!=null&&(this.walletAddr=n.walletAddr),"invite"in n&&n.invite!=null&&(this.invite=n.invite),"source"in n&&n.source!=null&&(this.source=n.source),"randomHex"in n&&n.randomHex!=null&&(this.randomHex=n.randomHex),"time"in n&&n.time!=null&&(this.time=n.time),"r"in n&&n.r!=null&&(this.r=n.r),"s"in n&&n.s!=null&&(this.s=n.s),"v"in n&&n.v!=null&&(this.v=n.v))}get icon(){return c.Message.getField(this,1)}set icon(n){c.Message.setField(this,1,n)}get has_icon(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getField(this,2)}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get country(){return c.Message.getField(this,3)}set country(n){c.Message.setField(this,3,n)}get has_country(){return c.Message.getField(this,3)!=null}get walletAddr(){return c.Message.getFieldWithDefault(this,4,"")}set walletAddr(n){c.Message.setField(this,4,n)}get has_walletAddr(){return c.Message.getField(this,4)!=null}get invite(){return c.Message.getFieldWithDefault(this,5,"")}set invite(n){c.Message.setField(this,5,n)}get has_invite(){return c.Message.getField(this,5)!=null}get source(){return c.Message.getFieldWithDefault(this,6,"")}set source(n){c.Message.setField(this,6,n)}get has_source(){return c.Message.getField(this,6)!=null}get randomHex(){return c.Message.getFieldWithDefault(this,7,"")}set randomHex(n){c.Message.setField(this,7,n)}get has_randomHex(){return c.Message.getField(this,7)!=null}get time(){return c.Message.getFieldWithDefault(this,8,0)}set time(n){c.Message.setField(this,8,n)}get has_time(){return c.Message.getField(this,8)!=null}get r(){return c.Message.getFieldWithDefault(this,9,"")}set r(n){c.Message.setField(this,9,n)}get has_r(){return c.Message.getField(this,9)!=null}get s(){return c.Message.getFieldWithDefault(this,10,"")}set s(n){c.Message.setField(this,10,n)}get has_s(){return c.Message.getField(this,10)!=null}get v(){return c.Message.getFieldWithDefault(this,11,"")}set v(n){c.Message.setField(this,11,n)}get has_v(){return c.Message.getField(this,11)!=null}static fromObject(n){let l=new al({icon:n.icon,userName:n.userName,country:n.country});return n.walletAddr!=null&&(l.walletAddr=n.walletAddr),n.invite!=null&&(l.invite=n.invite),n.source!=null&&(l.source=n.source),n.randomHex!=null&&(l.randomHex=n.randomHex),n.time!=null&&(l.time=n.time),n.r!=null&&(l.r=n.r),n.s!=null&&(l.s=n.s),n.v!=null&&(l.v=n.v),l}toObject(){let n={};return this.icon!=null&&(n.icon=this.icon),this.userName!=null&&(n.userName=this.userName),this.country!=null&&(n.country=this.country),this.walletAddr!=null&&(n.walletAddr=this.walletAddr),this.invite!=null&&(n.invite=this.invite),this.source!=null&&(n.source=this.source),this.randomHex!=null&&(n.randomHex=this.randomHex),this.time!=null&&(n.time=this.time),this.r!=null&&(n.r=this.r),this.s!=null&&(n.s=this.s),this.v!=null&&(n.v=this.v),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_icon&&this.icon.length&&l.writeString(1,this.icon),this.has_userName&&this.userName.length&&l.writeString(2,this.userName),this.has_country&&l.writeInt32(3,this.country),this.has_walletAddr&&this.walletAddr.length&&l.writeString(4,this.walletAddr),this.has_invite&&this.invite.length&&l.writeString(5,this.invite),this.has_source&&this.source.length&&l.writeString(6,this.source),this.has_randomHex&&this.randomHex.length&&l.writeString(7,this.randomHex),this.has_time&&l.writeInt64(8,this.time),this.has_r&&this.r.length&&l.writeString(9,this.r),this.has_s&&this.s.length&&l.writeString(10,this.s),this.has_v&&this.v.length&&l.writeString(11,this.v),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new al;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.icon=l.readString();break;case 2:d.userName=l.readString();break;case 3:d.country=l.readInt32();break;case 4:d.walletAddr=l.readString();break;case 5:d.invite=l.readString();break;case 6:d.source=l.readString();break;case 7:d.randomHex=l.readString();break;case 8:d.time=l.readInt64();break;case 9:d.r=l.readString();break;case 10:d.s=l.readString();break;case 11:d.v=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return al.deserialize(n)}};Hu=new WeakMap;let k=al;an.CS_USER_REGISTER=al;let ll=class ll extends c.Message{constructor(n){super();_e(this,zu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,zu)),!Array.isArray(n)&&typeof n=="object"&&(this.roleInfo=n.roleInfo)}get roleInfo(){return c.Message.getWrapperField(this,f,1)}set roleInfo(n){c.Message.setWrapperField(this,1,n)}get has_roleInfo(){return c.Message.getField(this,1)!=null}static fromObject(n){return new ll({roleInfo:f.fromObject(n.roleInfo)})}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleInfo&&l.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ll;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.roleInfo,()=>d.roleInfo=f.deserialize(l));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ll.deserialize(n)}};zu=new WeakMap;let I=ll;an.SC_USER_REGISTER=ll;let cl=class cl extends c.Message{constructor(n){super();_e(this,ju,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,ju)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,"randomHex"in n&&n.randomHex!=null&&(this.randomHex=n.randomHex),"time"in n&&n.time!=null&&(this.time=n.time),"r"in n&&n.r!=null&&(this.r=n.r),"s"in n&&n.s!=null&&(this.s=n.s),"v"in n&&n.v!=null&&(this.v=n.v))}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get randomHex(){return c.Message.getFieldWithDefault(this,2,"")}set randomHex(n){c.Message.setField(this,2,n)}get has_randomHex(){return c.Message.getField(this,2)!=null}get time(){return c.Message.getFieldWithDefault(this,3,0)}set time(n){c.Message.setField(this,3,n)}get has_time(){return c.Message.getField(this,3)!=null}get r(){return c.Message.getFieldWithDefault(this,4,"")}set r(n){c.Message.setField(this,4,n)}get has_r(){return c.Message.getField(this,4)!=null}get s(){return c.Message.getFieldWithDefault(this,5,"")}set s(n){c.Message.setField(this,5,n)}get has_s(){return c.Message.getField(this,5)!=null}get v(){return c.Message.getFieldWithDefault(this,6,"")}set v(n){c.Message.setField(this,6,n)}get has_v(){return c.Message.getField(this,6)!=null}static fromObject(n){let l=new cl({roleId:n.roleId});return n.randomHex!=null&&(l.randomHex=n.randomHex),n.time!=null&&(l.time=n.time),n.r!=null&&(l.r=n.r),n.s!=null&&(l.s=n.s),n.v!=null&&(l.v=n.v),l}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.randomHex!=null&&(n.randomHex=this.randomHex),this.time!=null&&(n.time=this.time),this.r!=null&&(n.r=this.r),this.s!=null&&(n.s=this.s),this.v!=null&&(n.v=this.v),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_randomHex&&this.randomHex.length&&l.writeString(2,this.randomHex),this.has_time&&l.writeInt64(3,this.time),this.has_r&&this.r.length&&l.writeString(4,this.r),this.has_s&&this.s.length&&l.writeString(5,this.s),this.has_v&&this.v.length&&l.writeString(6,this.v),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new cl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.roleId=l.readString();break;case 2:d.randomHex=l.readString();break;case 3:d.time=l.readInt64();break;case 4:d.r=l.readString();break;case 5:d.s=l.readString();break;case 6:d.v=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return cl.deserialize(n)}};ju=new WeakMap;let A=cl;an.CS_USER_LOGIN=cl;let ul=class ul extends c.Message{constructor(n){super();_e(this,Gu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Gu)),!Array.isArray(n)&&typeof n=="object"&&("roleInfo"in n&&n.roleInfo!=null&&(this.roleInfo=n.roleInfo),"loginToken"in n&&n.loginToken!=null&&(this.loginToken=n.loginToken))}get roleInfo(){return c.Message.getWrapperField(this,f,1)}set roleInfo(n){c.Message.setWrapperField(this,1,n)}get has_roleInfo(){return c.Message.getField(this,1)!=null}get loginToken(){return c.Message.getFieldWithDefault(this,2,"")}set loginToken(n){c.Message.setField(this,2,n)}get has_loginToken(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new ul({});return n.roleInfo!=null&&(l.roleInfo=f.fromObject(n.roleInfo)),n.loginToken!=null&&(l.loginToken=n.loginToken),l}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),this.loginToken!=null&&(n.loginToken=this.loginToken),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleInfo&&l.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(l)),this.has_loginToken&&this.loginToken.length&&l.writeString(2,this.loginToken),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ul;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.roleInfo,()=>d.roleInfo=f.deserialize(l));break;case 2:d.loginToken=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ul.deserialize(n)}};Gu=new WeakMap;let M=ul;an.SC_USER_LOGIN=ul;let pl=class pl extends c.Message{constructor(n){super();_e(this,Vu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Vu)),!Array.isArray(n)&&typeof n=="object"&&(this.type=n.type,"ticketId"in n&&n.ticketId!=null&&(this.ticketId=n.ticketId),"ticketValue"in n&&n.ticketValue!=null&&(this.ticketValue=n.ticketValue),"roomType"in n&&n.roomType!=null&&(this.roomType=n.roomType))}get type(){return c.Message.getField(this,1)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}get ticketId(){return c.Message.getFieldWithDefault(this,2,0)}set ticketId(n){c.Message.setField(this,2,n)}get has_ticketId(){return c.Message.getField(this,2)!=null}get ticketValue(){return c.Message.getFieldWithDefault(this,3,0)}set ticketValue(n){c.Message.setField(this,3,n)}get has_ticketValue(){return c.Message.getField(this,3)!=null}get roomType(){return c.Message.getFieldWithDefault(this,4,0)}set roomType(n){c.Message.setField(this,4,n)}get has_roomType(){return c.Message.getField(this,4)!=null}static fromObject(n){let l=new pl({type:n.type});return n.ticketId!=null&&(l.ticketId=n.ticketId),n.ticketValue!=null&&(l.ticketValue=n.ticketValue),n.roomType!=null&&(l.roomType=n.roomType),l}toObject(){let n={};return this.type!=null&&(n.type=this.type),this.ticketId!=null&&(n.ticketId=this.ticketId),this.ticketValue!=null&&(n.ticketValue=this.ticketValue),this.roomType!=null&&(n.roomType=this.roomType),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_type&&l.writeInt32(1,this.type),this.has_ticketId&&l.writeInt32(2,this.ticketId),this.has_ticketValue&&l.writeDouble(3,this.ticketValue),this.has_roomType&&l.writeInt32(4,this.roomType),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new pl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.type=l.readInt32();break;case 2:d.ticketId=l.readInt32();break;case 3:d.ticketValue=l.readDouble();break;case 4:d.roomType=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return pl.deserialize(n)}};Vu=new WeakMap;let O=pl;an.CS_REQUEST_ROOM_ADDR=pl;let ml=class ml extends c.Message{constructor(n){super();_e(this,Wu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Wu)),!Array.isArray(n)&&typeof n=="object"&&(this.addr=n.addr,"roleInfo"in n&&n.roleInfo!=null&&(this.roleInfo=n.roleInfo))}get addr(){return c.Message.getField(this,1)}set addr(n){c.Message.setField(this,1,n)}get has_addr(){return c.Message.getField(this,1)!=null}get roleInfo(){return c.Message.getWrapperField(this,f,2)}set roleInfo(n){c.Message.setWrapperField(this,2,n)}get has_roleInfo(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new ml({addr:n.addr});return n.roleInfo!=null&&(l.roleInfo=f.fromObject(n.roleInfo)),l}toObject(){let n={};return this.addr!=null&&(n.addr=this.addr),this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_addr&&this.addr.length&&l.writeString(1,this.addr),this.has_roleInfo&&l.writeMessage(2,this.roleInfo,()=>this.roleInfo.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ml;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.addr=l.readString();break;case 2:l.readMessage(d.roleInfo,()=>d.roleInfo=f.deserialize(l));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ml.deserialize(n)}};Wu=new WeakMap;let G=ml;an.SC_REQUEST_ROOM_ADDR=ml;let dl=class dl extends c.Message{constructor(n){super();_e(this,Ku,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Ku)),!Array.isArray(n)&&typeof n=="object"&&("tag"in n&&n.tag!=null&&(this.tag=n.tag),"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId))}get tag(){return c.Message.getFieldWithDefault(this,1,"")}set tag(n){c.Message.setField(this,1,n)}get has_tag(){return c.Message.getField(this,1)!=null}get roleId(){return c.Message.getFieldWithDefault(this,2,"")}set roleId(n){c.Message.setField(this,2,n)}get has_roleId(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new dl({});return n.tag!=null&&(l.tag=n.tag),n.roleId!=null&&(l.roleId=n.roleId),l}toObject(){let n={};return this.tag!=null&&(n.tag=this.tag),this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_tag&&this.tag.length&&l.writeString(1,this.tag),this.has_roleId&&this.roleId.length&&l.writeString(2,this.roleId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new dl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.tag=l.readString();break;case 2:d.roleId=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return dl.deserialize(n)}};Ku=new WeakMap;let $=dl;an.CS_ENTER_ROOM=dl;let hl=class hl extends c.Message{constructor(n){super();_e(this,$u,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],ye(this,$u)),!Array.isArray(n)&&typeof n=="object"&&(this.food=n.food,this.players=n.players)}get food(){return c.Message.getRepeatedWrapperField(this,H,1)}set food(n){c.Message.setRepeatedWrapperField(this,1,n)}get players(){return c.Message.getRepeatedWrapperField(this,K,2)}set players(n){c.Message.setRepeatedWrapperField(this,2,n)}static fromObject(n){return new hl({food:n.food.map(d=>H.fromObject(d)),players:n.players.map(d=>K.fromObject(d))})}toObject(){let n={};return this.food!=null&&(n.food=this.food.map(l=>l.toObject())),this.players!=null&&(n.players=this.players.map(l=>l.toObject())),n}serialize(n){let l=n||new c.BinaryWriter;if(this.food.length&&l.writeRepeatedMessage(1,this.food,d=>d.serialize(l)),this.players.length&&l.writeRepeatedMessage(2,this.players,d=>d.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new hl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,1,H.deserialize(l),H));break;case 2:l.readMessage(d.players,()=>c.Message.addToRepeatedWrapperField(d,2,K.deserialize(l),K));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return hl.deserialize(n)}};$u=new WeakMap;let q=hl;an.SC_ENTER_ROOM=hl;let fl=class fl extends c.Message{constructor(n){super();_e(this,qu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,qu)),!Array.isArray(n)&&typeof n=="object"&&("unkey"in n&&n.unkey!=null&&(this.unkey=n.unkey),"itemId"in n&&n.itemId!=null&&(this.itemId=n.itemId),"loc"in n&&n.loc!=null&&(this.loc=n.loc))}get unkey(){return c.Message.getFieldWithDefault(this,1,"")}set unkey(n){c.Message.setField(this,1,n)}get has_unkey(){return c.Message.getField(this,1)!=null}get itemId(){return c.Message.getFieldWithDefault(this,2,0)}set itemId(n){c.Message.setField(this,2,n)}get has_itemId(){return c.Message.getField(this,2)!=null}get loc(){return c.Message.getWrapperField(this,he,3)}set loc(n){c.Message.setWrapperField(this,3,n)}get has_loc(){return c.Message.getField(this,3)!=null}static fromObject(n){let l=new fl({});return n.unkey!=null&&(l.unkey=n.unkey),n.itemId!=null&&(l.itemId=n.itemId),n.loc!=null&&(l.loc=he.fromObject(n.loc)),l}toObject(){let n={};return this.unkey!=null&&(n.unkey=this.unkey),this.itemId!=null&&(n.itemId=this.itemId),this.loc!=null&&(n.loc=this.loc.toObject()),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_unkey&&this.unkey.length&&l.writeString(1,this.unkey),this.has_itemId&&l.writeInt32(2,this.itemId),this.has_loc&&l.writeMessage(3,this.loc,()=>this.loc.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new fl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.unkey=l.readString();break;case 2:d.itemId=l.readInt32();break;case 3:l.readMessage(d.loc,()=>d.loc=he.deserialize(l));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return fl.deserialize(n)}};qu=new WeakMap;let H=fl;an.FoodObject=fl;let gl=class gl extends c.Message{constructor(n){super();_e(this,Yu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[5,10,13,23],ye(this,Yu)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"userName"in n&&n.userName!=null&&(this.userName=n.userName),"snakeId"in n&&n.snakeId!=null&&(this.snakeId=n.snakeId),"speed"in n&&n.speed!=null&&(this.speed=n.speed),this.snake=n.snake,"kills"in n&&n.kills!=null&&(this.kills=n.kills),"state"in n&&n.state!=null&&(this.state=n.state),"score"in n&&n.score!=null&&(this.score=n.score),"wdTime"in n&&n.wdTime!=null&&(this.wdTime=n.wdTime),this.eatenIds=n.eatenIds,"dieTime"in n&&n.dieTime!=null&&(this.dieTime=n.dieTime),"revive"in n&&n.revive!=null&&(this.revive=n.revive),this.food=n.food,"direction"in n&&n.direction!=null&&(this.direction=n.direction),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"oprTime"in n&&n.oprTime!=null&&(this.oprTime=n.oprTime),"aimDir"in n&&n.aimDir!=null&&(this.aimDir=n.aimDir),"length"in n&&n.length!=null&&(this.length=n.length),"enterTime"in n&&n.enterTime!=null&&(this.enterTime=n.enterTime),"exp"in n&&n.exp!=null&&(this.exp=n.exp),"result"in n&&n.result!=null&&(this.result=n.result),"oprIndex"in n&&n.oprIndex!=null&&(this.oprIndex=n.oprIndex),this.attr=n.attr,"skin"in n&&n.skin!=null&&(this.skin=n.skin))}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getFieldWithDefault(this,2,"")}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get snakeId(){return c.Message.getFieldWithDefault(this,3,0)}set snakeId(n){c.Message.setField(this,3,n)}get has_snakeId(){return c.Message.getField(this,3)!=null}get speed(){return c.Message.getFieldWithDefault(this,4,0)}set speed(n){c.Message.setField(this,4,n)}get has_speed(){return c.Message.getField(this,4)!=null}get snake(){return c.Message.getRepeatedWrapperField(this,W,5)}set snake(n){c.Message.setRepeatedWrapperField(this,5,n)}get kills(){return c.Message.getFieldWithDefault(this,6,0)}set kills(n){c.Message.setField(this,6,n)}get has_kills(){return c.Message.getField(this,6)!=null}get state(){return c.Message.getFieldWithDefault(this,7,!1)}set state(n){c.Message.setField(this,7,n)}get has_state(){return c.Message.getField(this,7)!=null}get score(){return c.Message.getFieldWithDefault(this,8,0)}set score(n){c.Message.setField(this,8,n)}get has_score(){return c.Message.getField(this,8)!=null}get wdTime(){return c.Message.getFieldWithDefault(this,9,0)}set wdTime(n){c.Message.setField(this,9,n)}get has_wdTime(){return c.Message.getField(this,9)!=null}get eatenIds(){return c.Message.getFieldWithDefault(this,10,[])}set eatenIds(n){c.Message.setField(this,10,n)}get dieTime(){return c.Message.getFieldWithDefault(this,11,0)}set dieTime(n){c.Message.setField(this,11,n)}get has_dieTime(){return c.Message.getField(this,11)!=null}get revive(){return c.Message.getFieldWithDefault(this,12,0)}set revive(n){c.Message.setField(this,12,n)}get has_revive(){return c.Message.getField(this,12)!=null}get food(){return c.Message.getRepeatedWrapperField(this,H,13)}set food(n){c.Message.setRepeatedWrapperField(this,13,n)}get direction(){return c.Message.getFieldWithDefault(this,14,0)}set direction(n){c.Message.setField(this,14,n)}get has_direction(){return c.Message.getField(this,14)!=null}get frame(){return c.Message.getFieldWithDefault(this,15,0)}set frame(n){c.Message.setField(this,15,n)}get has_frame(){return c.Message.getField(this,15)!=null}get oprTime(){return c.Message.getFieldWithDefault(this,16,0)}set oprTime(n){c.Message.setField(this,16,n)}get has_oprTime(){return c.Message.getField(this,16)!=null}get aimDir(){return c.Message.getFieldWithDefault(this,17,0)}set aimDir(n){c.Message.setField(this,17,n)}get has_aimDir(){return c.Message.getField(this,17)!=null}get length(){return c.Message.getFieldWithDefault(this,18,0)}set length(n){c.Message.setField(this,18,n)}get has_length(){return c.Message.getField(this,18)!=null}get enterTime(){return c.Message.getFieldWithDefault(this,19,0)}set enterTime(n){c.Message.setField(this,19,n)}get has_enterTime(){return c.Message.getField(this,19)!=null}get exp(){return c.Message.getFieldWithDefault(this,20,0)}set exp(n){c.Message.setField(this,20,n)}get has_exp(){return c.Message.getField(this,20)!=null}get result(){return c.Message.getWrapperField(this,a,21)}set result(n){c.Message.setWrapperField(this,21,n)}get has_result(){return c.Message.getField(this,21)!=null}get oprIndex(){return c.Message.getFieldWithDefault(this,22,0)}set oprIndex(n){c.Message.setField(this,22,n)}get has_oprIndex(){return c.Message.getField(this,22)!=null}get attr(){return c.Message.getFieldWithDefault(this,23,[])}set attr(n){c.Message.setField(this,23,n)}get skin(){return c.Message.getFieldWithDefault(this,24,0)}set skin(n){c.Message.setField(this,24,n)}get has_skin(){return c.Message.getField(this,24)!=null}static fromObject(n){let l=new gl({snake:n.snake.map(d=>W.fromObject(d)),eatenIds:n.eatenIds,food:n.food.map(d=>H.fromObject(d)),attr:n.attr});return n.roleId!=null&&(l.roleId=n.roleId),n.userName!=null&&(l.userName=n.userName),n.snakeId!=null&&(l.snakeId=n.snakeId),n.speed!=null&&(l.speed=n.speed),n.kills!=null&&(l.kills=n.kills),n.state!=null&&(l.state=n.state),n.score!=null&&(l.score=n.score),n.wdTime!=null&&(l.wdTime=n.wdTime),n.dieTime!=null&&(l.dieTime=n.dieTime),n.revive!=null&&(l.revive=n.revive),n.direction!=null&&(l.direction=n.direction),n.frame!=null&&(l.frame=n.frame),n.oprTime!=null&&(l.oprTime=n.oprTime),n.aimDir!=null&&(l.aimDir=n.aimDir),n.length!=null&&(l.length=n.length),n.enterTime!=null&&(l.enterTime=n.enterTime),n.exp!=null&&(l.exp=n.exp),n.result!=null&&(l.result=a.fromObject(n.result)),n.oprIndex!=null&&(l.oprIndex=n.oprIndex),n.skin!=null&&(l.skin=n.skin),l}toObject(){let n={eatenIds:this.eatenIds,attr:this.attr};return this.roleId!=null&&(n.roleId=this.roleId),this.userName!=null&&(n.userName=this.userName),this.snakeId!=null&&(n.snakeId=this.snakeId),this.speed!=null&&(n.speed=this.speed),this.snake!=null&&(n.snake=this.snake.map(l=>l.toObject())),this.kills!=null&&(n.kills=this.kills),this.state!=null&&(n.state=this.state),this.score!=null&&(n.score=this.score),this.wdTime!=null&&(n.wdTime=this.wdTime),this.dieTime!=null&&(n.dieTime=this.dieTime),this.revive!=null&&(n.revive=this.revive),this.food!=null&&(n.food=this.food.map(l=>l.toObject())),this.direction!=null&&(n.direction=this.direction),this.frame!=null&&(n.frame=this.frame),this.oprTime!=null&&(n.oprTime=this.oprTime),this.aimDir!=null&&(n.aimDir=this.aimDir),this.length!=null&&(n.length=this.length),this.enterTime!=null&&(n.enterTime=this.enterTime),this.exp!=null&&(n.exp=this.exp),this.result!=null&&(n.result=this.result.toObject()),this.oprIndex!=null&&(n.oprIndex=this.oprIndex),this.skin!=null&&(n.skin=this.skin),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_userName&&this.userName.length&&l.writeString(2,this.userName),this.has_snakeId&&l.writeInt32(3,this.snakeId),this.has_speed&&l.writeFloat(4,this.speed),this.snake.length&&l.writeRepeatedMessage(5,this.snake,d=>d.serialize(l)),this.has_kills&&l.writeInt32(6,this.kills),this.has_state&&l.writeBool(7,this.state),this.has_score&&l.writeInt32(8,this.score),this.has_wdTime&&l.writeInt64(9,this.wdTime),this.eatenIds.length&&l.writeRepeatedString(10,this.eatenIds),this.has_dieTime&&l.writeInt64(11,this.dieTime),this.has_revive&&l.writeInt32(12,this.revive),this.food.length&&l.writeRepeatedMessage(13,this.food,d=>d.serialize(l)),this.has_direction&&l.writeFloat(14,this.direction),this.has_frame&&l.writeInt32(15,this.frame),this.has_oprTime&&l.writeInt64(16,this.oprTime),this.has_aimDir&&l.writeFloat(17,this.aimDir),this.has_length&&l.writeInt32(18,this.length),this.has_enterTime&&l.writeInt64(19,this.enterTime),this.has_exp&&l.writeInt32(20,this.exp),this.has_result&&l.writeMessage(21,this.result,()=>this.result.serialize(l)),this.has_oprIndex&&l.writeInt32(22,this.oprIndex),this.attr.length&&l.writeRepeatedString(23,this.attr),this.has_skin&&l.writeInt32(24,this.skin),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new gl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.roleId=l.readString();break;case 2:d.userName=l.readString();break;case 3:d.snakeId=l.readInt32();break;case 4:d.speed=l.readFloat();break;case 5:l.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,5,W.deserialize(l),W));break;case 6:d.kills=l.readInt32();break;case 7:d.state=l.readBool();break;case 8:d.score=l.readInt32();break;case 9:d.wdTime=l.readInt64();break;case 10:c.Message.addToRepeatedField(d,10,l.readString());break;case 11:d.dieTime=l.readInt64();break;case 12:d.revive=l.readInt32();break;case 13:l.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,13,H.deserialize(l),H));break;case 14:d.direction=l.readFloat();break;case 15:d.frame=l.readInt32();break;case 16:d.oprTime=l.readInt64();break;case 17:d.aimDir=l.readFloat();break;case 18:d.length=l.readInt32();break;case 19:d.enterTime=l.readInt64();break;case 20:d.exp=l.readInt32();break;case 21:l.readMessage(d.result,()=>d.result=a.deserialize(l));break;case 22:d.oprIndex=l.readInt32();break;case 23:c.Message.addToRepeatedField(d,23,l.readString());break;case 24:d.skin=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return gl.deserialize(n)}};Yu=new WeakMap;let K=gl;an.PlayerObject=gl;let bl=class bl extends c.Message{constructor(n){super();_e(this,Qu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Qu)),!Array.isArray(n)&&typeof n=="object"&&"loc"in n&&n.loc!=null&&(this.loc=n.loc)}get loc(){return c.Message.getWrapperField(this,he,2)}set loc(n){c.Message.setWrapperField(this,2,n)}get has_loc(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new bl({});return n.loc!=null&&(l.loc=he.fromObject(n.loc)),l}toObject(){let n={};return this.loc!=null&&(n.loc=this.loc.toObject()),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_loc&&l.writeMessage(2,this.loc,()=>this.loc.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new bl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 2:l.readMessage(d.loc,()=>d.loc=he.deserialize(l));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return bl.deserialize(n)}};Qu=new WeakMap;let W=bl;an.SnakeObject=bl;let yl=class yl extends c.Message{constructor(n){super();_e(this,Xu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Xu)),!Array.isArray(n)&&typeof n=="object"&&("x"in n&&n.x!=null&&(this.x=n.x),"y"in n&&n.y!=null&&(this.y=n.y))}get x(){return c.Message.getFieldWithDefault(this,1,0)}set x(n){c.Message.setField(this,1,n)}get has_x(){return c.Message.getField(this,1)!=null}get y(){return c.Message.getFieldWithDefault(this,2,0)}set y(n){c.Message.setField(this,2,n)}get has_y(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new yl({});return n.x!=null&&(l.x=n.x),n.y!=null&&(l.y=n.y),l}toObject(){let n={};return this.x!=null&&(n.x=this.x),this.y!=null&&(n.y=this.y),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_x&&l.writeDouble(1,this.x),this.has_y&&l.writeDouble(2,this.y),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new yl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.x=l.readDouble();break;case 2:d.y=l.readDouble();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return yl.deserialize(n)}};Xu=new WeakMap;let he=yl;an.PointObject=yl;let _l=class _l extends c.Message{constructor(n){super();_e(this,Ju,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[9],ye(this,Ju)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"opr"in n&&n.opr!=null&&(this.opr=n.opr),"value"in n&&n.value!=null&&(this.value=n.value),"head"in n&&n.head!=null&&(this.head=n.head),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"curDir"in n&&n.curDir!=null&&(this.curDir=n.curDir),"aimDir"in n&&n.aimDir!=null&&(this.aimDir=n.aimDir),"speed"in n&&n.speed!=null&&(this.speed=n.speed),this.snake=n.snake,"oprIndex"in n&&n.oprIndex!=null&&(this.oprIndex=n.oprIndex))}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get opr(){return c.Message.getFieldWithDefault(this,2,0)}set opr(n){c.Message.setField(this,2,n)}get has_opr(){return c.Message.getField(this,2)!=null}get value(){return c.Message.getFieldWithDefault(this,3,0)}set value(n){c.Message.setField(this,3,n)}get has_value(){return c.Message.getField(this,3)!=null}get head(){return c.Message.getWrapperField(this,W,4)}set head(n){c.Message.setWrapperField(this,4,n)}get has_head(){return c.Message.getField(this,4)!=null}get frame(){return c.Message.getFieldWithDefault(this,5,0)}set frame(n){c.Message.setField(this,5,n)}get has_frame(){return c.Message.getField(this,5)!=null}get curDir(){return c.Message.getFieldWithDefault(this,6,0)}set curDir(n){c.Message.setField(this,6,n)}get has_curDir(){return c.Message.getField(this,6)!=null}get aimDir(){return c.Message.getFieldWithDefault(this,7,0)}set aimDir(n){c.Message.setField(this,7,n)}get has_aimDir(){return c.Message.getField(this,7)!=null}get speed(){return c.Message.getFieldWithDefault(this,8,0)}set speed(n){c.Message.setField(this,8,n)}get has_speed(){return c.Message.getField(this,8)!=null}get snake(){return c.Message.getRepeatedWrapperField(this,W,9)}set snake(n){c.Message.setRepeatedWrapperField(this,9,n)}get oprIndex(){return c.Message.getFieldWithDefault(this,10,0)}set oprIndex(n){c.Message.setField(this,10,n)}get has_oprIndex(){return c.Message.getField(this,10)!=null}static fromObject(n){let l=new _l({snake:n.snake.map(d=>W.fromObject(d))});return n.roleId!=null&&(l.roleId=n.roleId),n.opr!=null&&(l.opr=n.opr),n.value!=null&&(l.value=n.value),n.head!=null&&(l.head=W.fromObject(n.head)),n.frame!=null&&(l.frame=n.frame),n.curDir!=null&&(l.curDir=n.curDir),n.aimDir!=null&&(l.aimDir=n.aimDir),n.speed!=null&&(l.speed=n.speed),n.oprIndex!=null&&(l.oprIndex=n.oprIndex),l}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.opr!=null&&(n.opr=this.opr),this.value!=null&&(n.value=this.value),this.head!=null&&(n.head=this.head.toObject()),this.frame!=null&&(n.frame=this.frame),this.curDir!=null&&(n.curDir=this.curDir),this.aimDir!=null&&(n.aimDir=this.aimDir),this.speed!=null&&(n.speed=this.speed),this.snake!=null&&(n.snake=this.snake.map(l=>l.toObject())),this.oprIndex!=null&&(n.oprIndex=this.oprIndex),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_opr&&l.writeInt32(2,this.opr),this.has_value&&l.writeInt32(3,this.value),this.has_head&&l.writeMessage(4,this.head,()=>this.head.serialize(l)),this.has_frame&&l.writeInt32(5,this.frame),this.has_curDir&&l.writeFloat(6,this.curDir),this.has_aimDir&&l.writeFloat(7,this.aimDir),this.has_speed&&l.writeFloat(8,this.speed),this.snake.length&&l.writeRepeatedMessage(9,this.snake,d=>d.serialize(l)),this.has_oprIndex&&l.writeInt32(10,this.oprIndex),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new _l;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.roleId=l.readString();break;case 2:d.opr=l.readInt32();break;case 3:d.value=l.readInt32();break;case 4:l.readMessage(d.head,()=>d.head=W.deserialize(l));break;case 5:d.frame=l.readInt32();break;case 6:d.curDir=l.readFloat();break;case 7:d.aimDir=l.readFloat();break;case 8:d.speed=l.readFloat();break;case 9:l.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,9,W.deserialize(l),W));break;case 10:d.oprIndex=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return _l.deserialize(n)}};Ju=new WeakMap;let xe=_l;an.CS_PLAYER_OPR=_l;let xl=class xl extends c.Message{constructor(n){super();_e(this,Zu,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,Zu)),!Array.isArray(n)&&typeof n=="object"&&(this.players=n.players,"frame"in n&&n.frame!=null&&(this.frame=n.frame))}get players(){return c.Message.getRepeatedWrapperField(this,K,1)}set players(n){c.Message.setRepeatedWrapperField(this,1,n)}get frame(){return c.Message.getFieldWithDefault(this,2,0)}set frame(n){c.Message.setField(this,2,n)}get has_frame(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new xl({players:n.players.map(d=>K.fromObject(d))});return n.frame!=null&&(l.frame=n.frame),l}toObject(){let n={};return this.players!=null&&(n.players=this.players.map(l=>l.toObject())),this.frame!=null&&(n.frame=this.frame),n}serialize(n){let l=n||new c.BinaryWriter;if(this.players.length&&l.writeRepeatedMessage(1,this.players,d=>d.serialize(l)),this.has_frame&&l.writeInt32(2,this.frame),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new xl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.players,()=>c.Message.addToRepeatedWrapperField(d,1,K.deserialize(l),K));break;case 2:d.frame=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return xl.deserialize(n)}};Zu=new WeakMap;let Ae=xl;an.SC_PLAYER_STATE=xl;let vl=class vl extends c.Message{constructor(n){super();_e(this,ep,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,ep)),!Array.isArray(n)&&typeof n=="object"&&(this.food=n.food,"frame"in n&&n.frame!=null&&(this.frame=n.frame))}get food(){return c.Message.getRepeatedWrapperField(this,H,1)}set food(n){c.Message.setRepeatedWrapperField(this,1,n)}get frame(){return c.Message.getFieldWithDefault(this,2,0)}set frame(n){c.Message.setField(this,2,n)}get has_frame(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new vl({food:n.food.map(d=>H.fromObject(d))});return n.frame!=null&&(l.frame=n.frame),l}toObject(){let n={};return this.food!=null&&(n.food=this.food.map(l=>l.toObject())),this.frame!=null&&(n.frame=this.frame),n}serialize(n){let l=n||new c.BinaryWriter;if(this.food.length&&l.writeRepeatedMessage(1,this.food,d=>d.serialize(l)),this.has_frame&&l.writeInt32(2,this.frame),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new vl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,1,H.deserialize(l),H));break;case 2:d.frame=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return vl.deserialize(n)}};ep=new WeakMap;let ot=vl;an.SC_GEN_FOOD=vl;let Il=class Il extends c.Message{constructor(n){super();_e(this,tp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,tp)),!Array.isArray(n)&&typeof n=="object"&&"players"in n&&n.players!=null&&(this.players=n.players)}get players(){return c.Message.getWrapperField(this,K,2)}set players(n){c.Message.setWrapperField(this,2,n)}get has_players(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new Il({});return n.players!=null&&(l.players=K.fromObject(n.players)),l}toObject(){let n={};return this.players!=null&&(n.players=this.players.toObject()),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_players&&l.writeMessage(2,this.players,()=>this.players.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Il;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 2:l.readMessage(d.players,()=>d.players=K.deserialize(l));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Il.deserialize(n)}};tp=new WeakMap;let le=Il;an.SS_NOTICE_ENTER=Il;let Sl=class Sl extends c.Message{constructor(n){super();_e(this,rp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[8,9],ye(this,rp)),!Array.isArray(n)&&typeof n=="object"&&("res"in n&&n.res!=null&&(this.res=n.res),"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"rank"in n&&n.rank!=null&&(this.rank=n.rank),"score"in n&&n.score!=null&&(this.score=n.score),"kills"in n&&n.kills!=null&&(this.kills=n.kills),"length"in n&&n.length!=null&&(this.length=n.length),"alive"in n&&n.alive!=null&&(this.alive=n.alive),this.items=n.items,this.token=n.token)}get res(){return c.Message.getFieldWithDefault(this,1,!1)}set res(n){c.Message.setField(this,1,n)}get has_res(){return c.Message.getField(this,1)!=null}get roleId(){return c.Message.getFieldWithDefault(this,2,"")}set roleId(n){c.Message.setField(this,2,n)}get has_roleId(){return c.Message.getField(this,2)!=null}get rank(){return c.Message.getFieldWithDefault(this,3,0)}set rank(n){c.Message.setField(this,3,n)}get has_rank(){return c.Message.getField(this,3)!=null}get score(){return c.Message.getFieldWithDefault(this,4,0)}set score(n){c.Message.setField(this,4,n)}get has_score(){return c.Message.getField(this,4)!=null}get kills(){return c.Message.getFieldWithDefault(this,5,0)}set kills(n){c.Message.setField(this,5,n)}get has_kills(){return c.Message.getField(this,5)!=null}get length(){return c.Message.getFieldWithDefault(this,6,0)}set length(n){c.Message.setField(this,6,n)}get has_length(){return c.Message.getField(this,6)!=null}get alive(){return c.Message.getFieldWithDefault(this,7,0)}set alive(n){c.Message.setField(this,7,n)}get has_alive(){return c.Message.getField(this,7)!=null}get items(){return c.Message.getRepeatedWrapperField(this,y,8)}set items(n){c.Message.setRepeatedWrapperField(this,8,n)}get token(){return c.Message.getFieldWithDefault(this,9,[])}set token(n){c.Message.setField(this,9,n)}static fromObject(n){let l=new Sl({items:n.items.map(d=>y.fromObject(d)),token:n.token});return n.res!=null&&(l.res=n.res),n.roleId!=null&&(l.roleId=n.roleId),n.rank!=null&&(l.rank=n.rank),n.score!=null&&(l.score=n.score),n.kills!=null&&(l.kills=n.kills),n.length!=null&&(l.length=n.length),n.alive!=null&&(l.alive=n.alive),l}toObject(){let n={token:this.token};return this.res!=null&&(n.res=this.res),this.roleId!=null&&(n.roleId=this.roleId),this.rank!=null&&(n.rank=this.rank),this.score!=null&&(n.score=this.score),this.kills!=null&&(n.kills=this.kills),this.length!=null&&(n.length=this.length),this.alive!=null&&(n.alive=this.alive),this.items!=null&&(n.items=this.items.map(l=>l.toObject())),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_res&&l.writeBool(1,this.res),this.has_roleId&&this.roleId.length&&l.writeString(2,this.roleId),this.has_rank&&l.writeInt32(3,this.rank),this.has_score&&l.writeInt32(4,this.score),this.has_kills&&l.writeInt32(5,this.kills),this.has_length&&l.writeInt32(6,this.length),this.has_alive&&l.writeInt32(7,this.alive),this.items.length&&l.writeRepeatedMessage(8,this.items,d=>d.serialize(l)),this.token.length&&l.writeRepeatedString(9,this.token),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Sl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.res=l.readBool();break;case 2:d.roleId=l.readString();break;case 3:d.rank=l.readInt32();break;case 4:d.score=l.readInt32();break;case 5:d.kills=l.readInt32();break;case 6:d.length=l.readInt32();break;case 7:d.alive=l.readInt32();break;case 8:l.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,8,y.deserialize(l),y));break;case 9:c.Message.addToRepeatedField(d,9,l.readString());break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Sl.deserialize(n)}};rp=new WeakMap;let we=Sl;an.SC_BATTLE_END=Sl;let kl=class kl extends c.Message{constructor(n){super();_e(this,ip,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,ip)),!Array.isArray(n)&&typeof n=="object"&&(this.fid=n.fid,"head"in n&&n.head!=null&&(this.head=n.head),this.roleId=n.roleId,"frame"in n&&n.frame!=null&&(this.frame=n.frame))}get fid(){return c.Message.getFieldWithDefault(this,1,[])}set fid(n){c.Message.setField(this,1,n)}get head(){return c.Message.getWrapperField(this,W,2)}set head(n){c.Message.setWrapperField(this,2,n)}get has_head(){return c.Message.getField(this,2)!=null}get roleId(){return c.Message.getField(this,3)}set roleId(n){c.Message.setField(this,3,n)}get has_roleId(){return c.Message.getField(this,3)!=null}get frame(){return c.Message.getFieldWithDefault(this,4,0)}set frame(n){c.Message.setField(this,4,n)}get has_frame(){return c.Message.getField(this,4)!=null}static fromObject(n){let l=new kl({fid:n.fid,roleId:n.roleId});return n.head!=null&&(l.head=W.fromObject(n.head)),n.frame!=null&&(l.frame=n.frame),l}toObject(){let n={fid:this.fid};return this.head!=null&&(n.head=this.head.toObject()),this.roleId!=null&&(n.roleId=this.roleId),this.frame!=null&&(n.frame=this.frame),n}serialize(n){let l=n||new c.BinaryWriter;if(this.fid.length&&l.writeRepeatedString(1,this.fid),this.has_head&&l.writeMessage(2,this.head,()=>this.head.serialize(l)),this.has_roleId&&this.roleId.length&&l.writeString(3,this.roleId),this.has_frame&&l.writeInt32(4,this.frame),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new kl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,l.readString());break;case 2:l.readMessage(d.head,()=>d.head=W.deserialize(l));break;case 3:d.roleId=l.readString();break;case 4:d.frame=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return kl.deserialize(n)}};ip=new WeakMap;let Ie=kl;an.CS_EAT_FOOD=kl;let wl=class wl extends c.Message{constructor(n){super();_e(this,np,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,7,11],ye(this,np)),!Array.isArray(n)&&typeof n=="object"&&(this.fid=n.fid,"head"in n&&n.head!=null&&(this.head=n.head),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"score"in n&&n.score!=null&&(this.score=n.score),"lenght"in n&&n.lenght!=null&&(this.lenght=n.lenght),this.roleId=n.roleId,this.remain=n.remain,"curDir"in n&&n.curDir!=null&&(this.curDir=n.curDir),"aimDir"in n&&n.aimDir!=null&&(this.aimDir=n.aimDir),"speed"in n&&n.speed!=null&&(this.speed=n.speed),this.snake=n.snake)}get fid(){return c.Message.getFieldWithDefault(this,1,[])}set fid(n){c.Message.setField(this,1,n)}get head(){return c.Message.getWrapperField(this,W,2)}set head(n){c.Message.setWrapperField(this,2,n)}get has_head(){return c.Message.getField(this,2)!=null}get frame(){return c.Message.getFieldWithDefault(this,3,0)}set frame(n){c.Message.setField(this,3,n)}get has_frame(){return c.Message.getField(this,3)!=null}get score(){return c.Message.getFieldWithDefault(this,4,0)}set score(n){c.Message.setField(this,4,n)}get has_score(){return c.Message.getField(this,4)!=null}get lenght(){return c.Message.getFieldWithDefault(this,5,0)}set lenght(n){c.Message.setField(this,5,n)}get has_lenght(){return c.Message.getField(this,5)!=null}get roleId(){return c.Message.getField(this,6)}set roleId(n){c.Message.setField(this,6,n)}get has_roleId(){return c.Message.getField(this,6)!=null}get remain(){return c.Message.getFieldWithDefault(this,7,[])}set remain(n){c.Message.setField(this,7,n)}get curDir(){return c.Message.getFieldWithDefault(this,8,0)}set curDir(n){c.Message.setField(this,8,n)}get has_curDir(){return c.Message.getField(this,8)!=null}get aimDir(){return c.Message.getFieldWithDefault(this,9,0)}set aimDir(n){c.Message.setField(this,9,n)}get has_aimDir(){return c.Message.getField(this,9)!=null}get speed(){return c.Message.getFieldWithDefault(this,10,0)}set speed(n){c.Message.setField(this,10,n)}get has_speed(){return c.Message.getField(this,10)!=null}get snake(){return c.Message.getRepeatedWrapperField(this,W,11)}set snake(n){c.Message.setRepeatedWrapperField(this,11,n)}static fromObject(n){let l=new wl({fid:n.fid,roleId:n.roleId,remain:n.remain,snake:n.snake.map(d=>W.fromObject(d))});return n.head!=null&&(l.head=W.fromObject(n.head)),n.frame!=null&&(l.frame=n.frame),n.score!=null&&(l.score=n.score),n.lenght!=null&&(l.lenght=n.lenght),n.curDir!=null&&(l.curDir=n.curDir),n.aimDir!=null&&(l.aimDir=n.aimDir),n.speed!=null&&(l.speed=n.speed),l}toObject(){let n={fid:this.fid,remain:this.remain};return this.head!=null&&(n.head=this.head.toObject()),this.frame!=null&&(n.frame=this.frame),this.score!=null&&(n.score=this.score),this.lenght!=null&&(n.lenght=this.lenght),this.roleId!=null&&(n.roleId=this.roleId),this.curDir!=null&&(n.curDir=this.curDir),this.aimDir!=null&&(n.aimDir=this.aimDir),this.speed!=null&&(n.speed=this.speed),this.snake!=null&&(n.snake=this.snake.map(l=>l.toObject())),n}serialize(n){let l=n||new c.BinaryWriter;if(this.fid.length&&l.writeRepeatedString(1,this.fid),this.has_head&&l.writeMessage(2,this.head,()=>this.head.serialize(l)),this.has_frame&&l.writeInt32(3,this.frame),this.has_score&&l.writeInt32(4,this.score),this.has_lenght&&l.writeInt32(5,this.lenght),this.has_roleId&&this.roleId.length&&l.writeString(6,this.roleId),this.remain.length&&l.writeRepeatedString(7,this.remain),this.has_curDir&&l.writeFloat(8,this.curDir),this.has_aimDir&&l.writeFloat(9,this.aimDir),this.has_speed&&l.writeFloat(10,this.speed),this.snake.length&&l.writeRepeatedMessage(11,this.snake,d=>d.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new wl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,l.readString());break;case 2:l.readMessage(d.head,()=>d.head=W.deserialize(l));break;case 3:d.frame=l.readInt32();break;case 4:d.score=l.readInt32();break;case 5:d.lenght=l.readInt32();break;case 6:d.roleId=l.readString();break;case 7:c.Message.addToRepeatedField(d,7,l.readString());break;case 8:d.curDir=l.readFloat();break;case 9:d.aimDir=l.readFloat();break;case 10:d.speed=l.readFloat();break;case 11:l.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,11,W.deserialize(l),W));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return wl.deserialize(n)}};np=new WeakMap;let R=wl;an.SC_EAT_FOOD=wl;let El=class El extends c.Message{constructor(n){super();_e(this,sp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,sp)),!Array.isArray(n)&&typeof n=="object"&&("target"in n&&n.target!=null&&(this.target=n.target),"head"in n&&n.head!=null&&(this.head=n.head),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"body"in n&&n.body!=null&&(this.body=n.body),"roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId))}get target(){return c.Message.getFieldWithDefault(this,1,"")}set target(n){c.Message.setField(this,1,n)}get has_target(){return c.Message.getField(this,1)!=null}get head(){return c.Message.getWrapperField(this,W,2)}set head(n){c.Message.setWrapperField(this,2,n)}get has_head(){return c.Message.getField(this,2)!=null}get frame(){return c.Message.getFieldWithDefault(this,3,0)}set frame(n){c.Message.setField(this,3,n)}get has_frame(){return c.Message.getField(this,3)!=null}get body(){return c.Message.getFieldWithDefault(this,4,!1)}set body(n){c.Message.setField(this,4,n)}get has_body(){return c.Message.getField(this,4)!=null}get roleId(){return c.Message.getFieldWithDefault(this,5,"")}set roleId(n){c.Message.setField(this,5,n)}get has_roleId(){return c.Message.getField(this,5)!=null}static fromObject(n){let l=new El({});return n.target!=null&&(l.target=n.target),n.head!=null&&(l.head=W.fromObject(n.head)),n.frame!=null&&(l.frame=n.frame),n.body!=null&&(l.body=n.body),n.roleId!=null&&(l.roleId=n.roleId),l}toObject(){let n={};return this.target!=null&&(n.target=this.target),this.head!=null&&(n.head=this.head.toObject()),this.frame!=null&&(n.frame=this.frame),this.body!=null&&(n.body=this.body),this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_target&&this.target.length&&l.writeString(1,this.target),this.has_head&&l.writeMessage(2,this.head,()=>this.head.serialize(l)),this.has_frame&&l.writeInt32(3,this.frame),this.has_body&&l.writeBool(4,this.body),this.has_roleId&&this.roleId.length&&l.writeString(5,this.roleId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new El;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.target=l.readString();break;case 2:l.readMessage(d.head,()=>d.head=W.deserialize(l));break;case 3:d.frame=l.readInt32();break;case 4:d.body=l.readBool();break;case 5:d.roleId=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return El.deserialize(n)}};sp=new WeakMap;let Ke=El;an.CS_PLAYER_COLLISION=El;let Ll=class Ll extends c.Message{constructor(n){super();_e(this,op,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[4,11],ye(this,op)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"head"in n&&n.head!=null&&(this.head=n.head),this.food=n.food,"taret"in n&&n.taret!=null&&(this.taret=n.taret),"frame"in n&&n.frame!=null&&(this.frame=n.frame),"curDir"in n&&n.curDir!=null&&(this.curDir=n.curDir),"aimDir"in n&&n.aimDir!=null&&(this.aimDir=n.aimDir),"speed"in n&&n.speed!=null&&(this.speed=n.speed),"die"in n&&n.die!=null&&(this.die=n.die),this.snake=n.snake)}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get head(){return c.Message.getWrapperField(this,W,2)}set head(n){c.Message.setWrapperField(this,2,n)}get has_head(){return c.Message.getField(this,2)!=null}get food(){return c.Message.getRepeatedWrapperField(this,H,4)}set food(n){c.Message.setRepeatedWrapperField(this,4,n)}get taret(){return c.Message.getFieldWithDefault(this,5,"")}set taret(n){c.Message.setField(this,5,n)}get has_taret(){return c.Message.getField(this,5)!=null}get frame(){return c.Message.getFieldWithDefault(this,6,0)}set frame(n){c.Message.setField(this,6,n)}get has_frame(){return c.Message.getField(this,6)!=null}get curDir(){return c.Message.getFieldWithDefault(this,7,0)}set curDir(n){c.Message.setField(this,7,n)}get has_curDir(){return c.Message.getField(this,7)!=null}get aimDir(){return c.Message.getFieldWithDefault(this,8,0)}set aimDir(n){c.Message.setField(this,8,n)}get has_aimDir(){return c.Message.getField(this,8)!=null}get speed(){return c.Message.getFieldWithDefault(this,9,0)}set speed(n){c.Message.setField(this,9,n)}get has_speed(){return c.Message.getField(this,9)!=null}get die(){return c.Message.getFieldWithDefault(this,10,"")}set die(n){c.Message.setField(this,10,n)}get has_die(){return c.Message.getField(this,10)!=null}get snake(){return c.Message.getRepeatedWrapperField(this,W,11)}set snake(n){c.Message.setRepeatedWrapperField(this,11,n)}static fromObject(n){let l=new Ll({food:n.food.map(d=>H.fromObject(d)),snake:n.snake.map(d=>W.fromObject(d))});return n.roleId!=null&&(l.roleId=n.roleId),n.head!=null&&(l.head=W.fromObject(n.head)),n.taret!=null&&(l.taret=n.taret),n.frame!=null&&(l.frame=n.frame),n.curDir!=null&&(l.curDir=n.curDir),n.aimDir!=null&&(l.aimDir=n.aimDir),n.speed!=null&&(l.speed=n.speed),n.die!=null&&(l.die=n.die),l}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.head!=null&&(n.head=this.head.toObject()),this.food!=null&&(n.food=this.food.map(l=>l.toObject())),this.taret!=null&&(n.taret=this.taret),this.frame!=null&&(n.frame=this.frame),this.curDir!=null&&(n.curDir=this.curDir),this.aimDir!=null&&(n.aimDir=this.aimDir),this.speed!=null&&(n.speed=this.speed),this.die!=null&&(n.die=this.die),this.snake!=null&&(n.snake=this.snake.map(l=>l.toObject())),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_head&&l.writeMessage(2,this.head,()=>this.head.serialize(l)),this.food.length&&l.writeRepeatedMessage(4,this.food,d=>d.serialize(l)),this.has_taret&&this.taret.length&&l.writeString(5,this.taret),this.has_frame&&l.writeInt32(6,this.frame),this.has_curDir&&l.writeFloat(7,this.curDir),this.has_aimDir&&l.writeFloat(8,this.aimDir),this.has_speed&&l.writeFloat(9,this.speed),this.has_die&&this.die.length&&l.writeString(10,this.die),this.snake.length&&l.writeRepeatedMessage(11,this.snake,d=>d.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ll;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.roleId=l.readString();break;case 2:l.readMessage(d.head,()=>d.head=W.deserialize(l));break;case 4:l.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,4,H.deserialize(l),H));break;case 5:d.taret=l.readString();break;case 6:d.frame=l.readInt32();break;case 7:d.curDir=l.readFloat();break;case 8:d.aimDir=l.readFloat();break;case 9:d.speed=l.readFloat();break;case 10:d.die=l.readString();break;case 11:l.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,11,W.deserialize(l),W));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ll.deserialize(n)}};op=new WeakMap;let de=Ll;an.SC_PLAYER_COLLISION=Ll;let Tl=class Tl extends c.Message{constructor(n){super();_e(this,ap,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,ap)),!Array.isArray(n)&&typeof n=="object"&&"time"in n&&n.time!=null&&(this.time=n.time)}get time(){return c.Message.getFieldWithDefault(this,1,0)}set time(n){c.Message.setField(this,1,n)}get has_time(){return c.Message.getField(this,1)!=null}static fromObject(n){let l=new Tl({});return n.time!=null&&(l.time=n.time),l}toObject(){let n={};return this.time!=null&&(n.time=this.time),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_time&&l.writeInt64(1,this.time),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Tl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.time=l.readInt64();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Tl.deserialize(n)}};ap=new WeakMap;let et=Tl;an.SC_REQUEST_SERVER_TIME=Tl;let Al=class Al extends c.Message{constructor(n){super();_e(this,lp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,lp)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Al({roleId:n.roleId})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Al;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.roleId=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Al.deserialize(n)}};lp=new WeakMap;let kt=Al;an.CS_REQUEST_ROOM_DATA=Al;let Cl=class Cl extends c.Message{constructor(n){super();_e(this,cp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],ye(this,cp)),!Array.isArray(n)&&typeof n=="object"&&(this.food=n.food,this.players=n.players)}get food(){return c.Message.getRepeatedWrapperField(this,H,1)}set food(n){c.Message.setRepeatedWrapperField(this,1,n)}get players(){return c.Message.getRepeatedWrapperField(this,K,2)}set players(n){c.Message.setRepeatedWrapperField(this,2,n)}static fromObject(n){return new Cl({food:n.food.map(d=>H.fromObject(d)),players:n.players.map(d=>K.fromObject(d))})}toObject(){let n={};return this.food!=null&&(n.food=this.food.map(l=>l.toObject())),this.players!=null&&(n.players=this.players.map(l=>l.toObject())),n}serialize(n){let l=n||new c.BinaryWriter;if(this.food.length&&l.writeRepeatedMessage(1,this.food,d=>d.serialize(l)),this.players.length&&l.writeRepeatedMessage(2,this.players,d=>d.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Cl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.food,()=>c.Message.addToRepeatedWrapperField(d,1,H.deserialize(l),H));break;case 2:l.readMessage(d.players,()=>c.Message.addToRepeatedWrapperField(d,2,K.deserialize(l),K));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Cl.deserialize(n)}};cp=new WeakMap;let $t=Cl;an.SC_REQUEST_ROOM_DATA=Cl;let Ml=class Ml extends c.Message{constructor(n){super();_e(this,up,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,up)),!Array.isArray(n)&&typeof n=="object"&&(this.info=n.info)}get info(){return c.Message.getFieldWithDefault(this,1,[])}set info(n){c.Message.setField(this,1,n)}static fromObject(n){return new Ml({info:n.info})}toObject(){return{info:this.info}}serialize(n){let l=n||new c.BinaryWriter;if(this.info.length&&l.writeRepeatedString(1,this.info),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ml;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,l.readString());break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ml.deserialize(n)}};up=new WeakMap;let rr=Ml;an.SC_INVITE_LIST=Ml;let Rl=class Rl extends c.Message{constructor(n){super();_e(this,pp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,pp)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId,"type"in n&&n.type!=null&&(this.type=n.type))}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getFieldWithDefault(this,2,0)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new Rl({roleId:n.roleId});return n.type!=null&&(l.type=n.type),l}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.type!=null&&(n.type=this.type),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_type&&l.writeInt32(2,this.type),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Rl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.roleId=l.readString();break;case 2:d.type=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Rl.deserialize(n)}};pp=new WeakMap;let dt=Rl;an.CS_REQUEST_INFO=Rl;let Bl=class Bl extends c.Message{constructor(n){super();_e(this,mp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,mp)),!Array.isArray(n)&&typeof n=="object"&&(this.roleInfo=n.roleInfo)}get roleInfo(){return c.Message.getWrapperField(this,f,1)}set roleInfo(n){c.Message.setWrapperField(this,1,n)}get has_roleInfo(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Bl({roleInfo:f.fromObject(n.roleInfo)})}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.toObject()),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleInfo&&l.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Bl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.roleInfo,()=>d.roleInfo=f.deserialize(l));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Bl.deserialize(n)}};mp=new WeakMap;let Mr=Bl;an.SC_REQUEST_INFO=Bl;let Dl=class Dl extends c.Message{constructor(n){super();_e(this,dp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,dp)),!Array.isArray(n)&&typeof n=="object"&&(this.id=n.id,"symbolId"in n&&n.symbolId!=null&&(this.symbolId=n.symbolId),"num"in n&&n.num!=null&&(this.num=n.num))}get id(){return c.Message.getField(this,1)}set id(n){c.Message.setField(this,1,n)}get has_id(){return c.Message.getField(this,1)!=null}get symbolId(){return c.Message.getFieldWithDefault(this,2,0)}set symbolId(n){c.Message.setField(this,2,n)}get has_symbolId(){return c.Message.getField(this,2)!=null}get num(){return c.Message.getFieldWithDefault(this,3,0)}set num(n){c.Message.setField(this,3,n)}get has_num(){return c.Message.getField(this,3)!=null}static fromObject(n){let l=new Dl({id:n.id});return n.symbolId!=null&&(l.symbolId=n.symbolId),n.num!=null&&(l.num=n.num),l}toObject(){let n={};return this.id!=null&&(n.id=this.id),this.symbolId!=null&&(n.symbolId=this.symbolId),this.num!=null&&(n.num=this.num),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_id&&l.writeInt32(1,this.id),this.has_symbolId&&l.writeInt32(2,this.symbolId),this.has_num&&l.writeInt32(3,this.num),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Dl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.id=l.readInt32();break;case 2:d.symbolId=l.readInt32();break;case 3:d.num=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Dl.deserialize(n)}};dp=new WeakMap;let wr=Dl;an.CS_SHOP_BUY=Dl;let Ol=class Ol extends c.Message{constructor(n){super();_e(this,hp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],ye(this,hp)),!Array.isArray(n)&&typeof n=="object"&&(this.cost=n.cost,this.items=n.items,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get cost(){return c.Message.getRepeatedWrapperField(this,y,1)}set cost(n){c.Message.setRepeatedWrapperField(this,1,n)}get items(){return c.Message.getRepeatedWrapperField(this,y,2)}set items(n){c.Message.setRepeatedWrapperField(this,2,n)}get snake(){return c.Message.getWrapperField(this,b,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let l=new Ol({cost:n.cost.map(d=>y.fromObject(d)),items:n.items.map(d=>y.fromObject(d))});return n.snake!=null&&(l.snake=b.fromObject(n.snake)),l}toObject(){let n={};return this.cost!=null&&(n.cost=this.cost.map(l=>l.toObject())),this.items!=null&&(n.items=this.items.map(l=>l.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let l=n||new c.BinaryWriter;if(this.cost.length&&l.writeRepeatedMessage(1,this.cost,d=>d.serialize(l)),this.items.length&&l.writeRepeatedMessage(2,this.items,d=>d.serialize(l)),this.has_snake&&l.writeMessage(3,this.snake,()=>this.snake.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ol;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.cost,()=>c.Message.addToRepeatedWrapperField(d,1,y.deserialize(l),y));break;case 2:l.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,2,y.deserialize(l),y));break;case 3:l.readMessage(d.snake,()=>d.snake=b.deserialize(l));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ol.deserialize(n)}};hp=new WeakMap;let Yr=Ol;an.SC_SHOP_BUY=Ol;let Nl=class Nl extends c.Message{constructor(n){super();_e(this,fp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,fp)),!Array.isArray(n)&&typeof n=="object"&&(this.msgList=n.msgList,this.frame=n.frame)}get msgList(){return c.Message.getRepeatedWrapperField(this,a,1)}set msgList(n){c.Message.setRepeatedWrapperField(this,1,n)}get frame(){return c.Message.getField(this,2)}set frame(n){c.Message.setField(this,2,n)}get has_frame(){return c.Message.getField(this,2)!=null}static fromObject(n){return new Nl({msgList:n.msgList.map(d=>a.fromObject(d)),frame:n.frame})}toObject(){let n={};return this.msgList!=null&&(n.msgList=this.msgList.map(l=>l.toObject())),this.frame!=null&&(n.frame=this.frame),n}serialize(n){let l=n||new c.BinaryWriter;if(this.msgList.length&&l.writeRepeatedMessage(1,this.msgList,d=>d.serialize(l)),this.has_frame&&l.writeInt32(2,this.frame),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Nl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.msgList,()=>c.Message.addToRepeatedWrapperField(d,1,a.deserialize(l),a));break;case 2:d.frame=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Nl.deserialize(n)}};fp=new WeakMap;let Qr=Nl;an.SC_PUSH=Nl;let Pl=class Pl extends c.Message{constructor(n){super();_e(this,gp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,gp)),!Array.isArray(n)&&typeof n=="object"&&(this.token=n.token)}get token(){return c.Message.getFieldWithDefault(this,1,[])}set token(n){c.Message.setField(this,1,n)}static fromObject(n){return new Pl({token:n.token})}toObject(){return{token:this.token}}serialize(n){let l=n||new c.BinaryWriter;if(this.token.length&&l.writeRepeatedString(1,this.token),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Pl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,l.readString());break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Pl.deserialize(n)}};gp=new WeakMap;let pi=Pl;an.SC_QUERY_TOKEN=Pl;let Fl=class Fl extends c.Message{constructor(n){super();_e(this,bp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,bp)),!Array.isArray(n)&&typeof n=="object"&&(this.roleId=n.roleId)}get roleId(){return c.Message.getField(this,1)}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Fl({roleId:n.roleId})}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Fl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.roleId=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Fl.deserialize(n)}};bp=new WeakMap;let An=Fl;an.SC_PLAYER_OUT=Fl;let Ul=class Ul extends c.Message{constructor(n){super();_e(this,yp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,yp)),!Array.isArray(n)&&typeof n=="object"&&"symbolId"in n&&n.symbolId!=null&&(this.symbolId=n.symbolId)}get symbolId(){return c.Message.getFieldWithDefault(this,2,0)}set symbolId(n){c.Message.setField(this,2,n)}get has_symbolId(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new Ul({});return n.symbolId!=null&&(l.symbolId=n.symbolId),l}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_symbolId&&l.writeInt32(2,this.symbolId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ul;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 2:d.symbolId=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ul.deserialize(n)}};yp=new WeakMap;let mi=Ul;an.CS_CHARGE=Ul;let Hl=class Hl extends c.Message{constructor(n){super();_e(this,_p,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,_p)),!Array.isArray(n)&&typeof n=="object"&&("symbolId"in n&&n.symbolId!=null&&(this.symbolId=n.symbolId),"depositAddress"in n&&n.depositAddress!=null&&(this.depositAddress=n.depositAddress),"abi"in n&&n.abi!=null&&(this.abi=n.abi),"chainId"in n&&n.chainId!=null&&(this.chainId=n.chainId))}get symbolId(){return c.Message.getFieldWithDefault(this,1,0)}set symbolId(n){c.Message.setField(this,1,n)}get has_symbolId(){return c.Message.getField(this,1)!=null}get depositAddress(){return c.Message.getFieldWithDefault(this,2,"")}set depositAddress(n){c.Message.setField(this,2,n)}get has_depositAddress(){return c.Message.getField(this,2)!=null}get abi(){return c.Message.getFieldWithDefault(this,3,"")}set abi(n){c.Message.setField(this,3,n)}get has_abi(){return c.Message.getField(this,3)!=null}get chainId(){return c.Message.getFieldWithDefault(this,4,0)}set chainId(n){c.Message.setField(this,4,n)}get has_chainId(){return c.Message.getField(this,4)!=null}static fromObject(n){let l=new Hl({});return n.symbolId!=null&&(l.symbolId=n.symbolId),n.depositAddress!=null&&(l.depositAddress=n.depositAddress),n.abi!=null&&(l.abi=n.abi),n.chainId!=null&&(l.chainId=n.chainId),l}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),this.depositAddress!=null&&(n.depositAddress=this.depositAddress),this.abi!=null&&(n.abi=this.abi),this.chainId!=null&&(n.chainId=this.chainId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_symbolId&&l.writeInt32(1,this.symbolId),this.has_depositAddress&&this.depositAddress.length&&l.writeString(2,this.depositAddress),this.has_abi&&this.abi.length&&l.writeString(3,this.abi),this.has_chainId&&l.writeInt32(4,this.chainId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Hl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.symbolId=l.readInt32();break;case 2:d.depositAddress=l.readString();break;case 3:d.abi=l.readString();break;case 4:d.chainId=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Hl.deserialize(n)}};_p=new WeakMap;let Hr=Hl;an.SC_CHARGE=Hl;let zl=class zl extends c.Message{constructor(n){super();_e(this,xp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,xp)),!Array.isArray(n)&&typeof n=="object"&&(this.symbolId=n.symbolId,this.amount=n.amount)}get symbolId(){return c.Message.getField(this,1)}set symbolId(n){c.Message.setField(this,1,n)}get has_symbolId(){return c.Message.getField(this,1)!=null}get amount(){return c.Message.getField(this,2)}set amount(n){c.Message.setField(this,2,n)}get has_amount(){return c.Message.getField(this,2)!=null}static fromObject(n){return new zl({symbolId:n.symbolId,amount:n.amount})}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),this.amount!=null&&(n.amount=this.amount),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_symbolId&&l.writeInt32(1,this.symbolId),this.has_amount&&l.writeDouble(2,this.amount),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new zl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.symbolId=l.readInt32();break;case 2:d.amount=l.readDouble();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return zl.deserialize(n)}};xp=new WeakMap;let Bi=zl;an.CS_WITHDRAW=zl;let jl=class jl extends c.Message{constructor(n){super();_e(this,vp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,vp)),!Array.isArray(n)&&typeof n=="object"&&"resp"in n&&n.resp!=null&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,"")}set resp(n){c.Message.setField(this,1,n)}get has_resp(){return c.Message.getField(this,1)!=null}static fromObject(n){let l=new jl({});return n.resp!=null&&(l.resp=n.resp),l}toObject(){let n={};return this.resp!=null&&(n.resp=this.resp),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_resp&&this.resp.length&&l.writeString(1,this.resp),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new jl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.resp=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return jl.deserialize(n)}};vp=new WeakMap;let di=jl;an.SC_WITHDRAW=jl;let Gl=class Gl extends c.Message{constructor(n){super();_e(this,Ip,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,Ip)),!Array.isArray(n)&&typeof n=="object"&&(this.roleInfo=n.roleInfo)}get roleInfo(){return c.Message.getRepeatedWrapperField(this,f,1)}set roleInfo(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new Gl({roleInfo:n.roleInfo.map(d=>f.fromObject(d))})}toObject(){let n={};return this.roleInfo!=null&&(n.roleInfo=this.roleInfo.map(l=>l.toObject())),n}serialize(n){let l=n||new c.BinaryWriter;if(this.roleInfo.length&&l.writeRepeatedMessage(1,this.roleInfo,d=>d.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Gl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.roleInfo,()=>c.Message.addToRepeatedWrapperField(d,1,f.deserialize(l),f));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Gl.deserialize(n)}};Ip=new WeakMap;let vs=Gl;an.SS_UPDATE_ROLE=Gl;let Vl=class Vl extends c.Message{constructor(n){super();_e(this,Sp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,Sp)),!Array.isArray(n)&&typeof n=="object"&&(this.ids=n.ids)}get ids(){return c.Message.getFieldWithDefault(this,1,[])}set ids(n){c.Message.setField(this,1,n)}static fromObject(n){return new Vl({ids:n.ids})}toObject(){return{ids:this.ids}}serialize(n){let l=n||new c.BinaryWriter;if(this.ids.length&&l.writeRepeatedString(1,this.ids),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Vl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,l.readString());break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Vl.deserialize(n)}};Sp=new WeakMap;let yo=Vl;an.SS_UPDATE_CALLBACK=Vl;let Wl=class Wl extends c.Message{constructor(n){super();_e(this,kp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],ye(this,kp)),!Array.isArray(n)&&typeof n=="object"&&(this.items=n.items,this.snake=n.snake)}get items(){return c.Message.getRepeatedWrapperField(this,y,1)}set items(n){c.Message.setRepeatedWrapperField(this,1,n)}get snake(){return c.Message.getRepeatedWrapperField(this,b,2)}set snake(n){c.Message.setRepeatedWrapperField(this,2,n)}static fromObject(n){return new Wl({items:n.items.map(d=>y.fromObject(d)),snake:n.snake.map(d=>b.fromObject(d))})}toObject(){let n={};return this.items!=null&&(n.items=this.items.map(l=>l.toObject())),this.snake!=null&&(n.snake=this.snake.map(l=>l.toObject())),n}serialize(n){let l=n||new c.BinaryWriter;if(this.items.length&&l.writeRepeatedMessage(1,this.items,d=>d.serialize(l)),this.snake.length&&l.writeRepeatedMessage(2,this.snake,d=>d.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Wl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,1,y.deserialize(l),y));break;case 2:l.readMessage(d.snake,()=>c.Message.addToRepeatedWrapperField(d,2,b.deserialize(l),b));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Wl.deserialize(n)}};kp=new WeakMap;let Mu=Wl;an.SC_PACK_INFO=Wl;let Kl=class Kl extends c.Message{constructor(n){super();_e(this,wp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,wp)),!Array.isArray(n)&&typeof n=="object"&&(this.toAddress=n.toAddress,this.symbolId=n.symbolId,this.amount=n.amount)}get toAddress(){return c.Message.getField(this,1)}set toAddress(n){c.Message.setField(this,1,n)}get has_toAddress(){return c.Message.getField(this,1)!=null}get symbolId(){return c.Message.getField(this,2)}set symbolId(n){c.Message.setField(this,2,n)}get has_symbolId(){return c.Message.getField(this,2)!=null}get amount(){return c.Message.getField(this,3)}set amount(n){c.Message.setField(this,3,n)}get has_amount(){return c.Message.getField(this,3)!=null}static fromObject(n){return new Kl({toAddress:n.toAddress,symbolId:n.symbolId,amount:n.amount})}toObject(){let n={};return this.toAddress!=null&&(n.toAddress=this.toAddress),this.symbolId!=null&&(n.symbolId=this.symbolId),this.amount!=null&&(n.amount=this.amount),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_toAddress&&this.toAddress.length&&l.writeString(1,this.toAddress),this.has_symbolId&&l.writeInt32(2,this.symbolId),this.has_amount&&l.writeDouble(3,this.amount),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Kl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.toAddress=l.readString();break;case 2:d.symbolId=l.readInt32();break;case 3:d.amount=l.readDouble();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Kl.deserialize(n)}};wp=new WeakMap;let Is=Kl;an.CS_TRANSFER=Kl;let $l=class $l extends c.Message{constructor(n){super();_e(this,Ep,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Ep)),!Array.isArray(n)&&typeof n=="object"&&(this.symbolId=n.symbolId)}get symbolId(){return c.Message.getField(this,1)}set symbolId(n){c.Message.setField(this,1,n)}get has_symbolId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new $l({symbolId:n.symbolId})}toObject(){let n={};return this.symbolId!=null&&(n.symbolId=this.symbolId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_symbolId&&l.writeInt32(1,this.symbolId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new $l;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.symbolId=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return $l.deserialize(n)}};Ep=new WeakMap;let Xa=$l;an.CS_WITHDRAW_INFO=$l;let ql=class ql extends c.Message{constructor(n){super();_e(this,Lp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Lp)),!Array.isArray(n)&&typeof n=="object"&&"resp"in n&&n.resp!=null&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,"")}set resp(n){c.Message.setField(this,1,n)}get has_resp(){return c.Message.getField(this,1)!=null}static fromObject(n){let l=new ql({});return n.resp!=null&&(l.resp=n.resp),l}toObject(){let n={};return this.resp!=null&&(n.resp=this.resp),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_resp&&this.resp.length&&l.writeString(1,this.resp),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ql;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.resp=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ql.deserialize(n)}};Lp=new WeakMap;let _o=ql;an.SC_WITHDRAW_INFO=ql;let Yl=class Yl extends c.Message{constructor(n){super();_e(this,Tp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,Tp)),!Array.isArray(n)&&typeof n=="object"&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,[])}set resp(n){c.Message.setField(this,1,n)}static fromObject(n){return new Yl({resp:n.resp})}toObject(){return{resp:this.resp}}serialize(n){let l=n||new c.BinaryWriter;if(this.resp.length&&l.writeRepeatedString(1,this.resp),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Yl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,l.readString());break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Yl.deserialize(n)}};Tp=new WeakMap;let Ja=Yl;an.SC_CHARGE_RECORD=Yl;let Ql=class Ql extends c.Message{constructor(n){super();_e(this,Ap,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,Ap)),!Array.isArray(n)&&typeof n=="object"&&(this.resp=n.resp)}get resp(){return c.Message.getFieldWithDefault(this,1,[])}set resp(n){c.Message.setField(this,1,n)}static fromObject(n){return new Ql({resp:n.resp})}toObject(){return{resp:this.resp}}serialize(n){let l=n||new c.BinaryWriter;if(this.resp.length&&l.writeRepeatedString(1,this.resp),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Ql;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,l.readString());break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Ql.deserialize(n)}};Ap=new WeakMap;let Ru=Ql;an.SC_WITHDRAW_RECORD=Ql;let Xl=class Xl extends c.Message{constructor(n){super();_e(this,Cp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Cp)),!Array.isArray(n)&&typeof n=="object"&&(this.unkey=n.unkey)}get unkey(){return c.Message.getField(this,1)}set unkey(n){c.Message.setField(this,1,n)}get has_unkey(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Xl({unkey:n.unkey})}toObject(){let n={};return this.unkey!=null&&(n.unkey=this.unkey),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_unkey&&l.writeInt32(1,this.unkey),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Xl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.unkey=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Xl.deserialize(n)}};Cp=new WeakMap;let D=Xl;an.CS_SNAKE_UPGRADE=Xl;let Jl=class Jl extends c.Message{constructor(n){super();_e(this,Mp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,Mp)),!Array.isArray(n)&&typeof n=="object"&&(this.cost=n.cost,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get cost(){return c.Message.getRepeatedWrapperField(this,y,1)}set cost(n){c.Message.setRepeatedWrapperField(this,1,n)}get snake(){return c.Message.getWrapperField(this,b,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let l=new Jl({cost:n.cost.map(d=>y.fromObject(d))});return n.snake!=null&&(l.snake=b.fromObject(n.snake)),l}toObject(){let n={};return this.cost!=null&&(n.cost=this.cost.map(l=>l.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let l=n||new c.BinaryWriter;if(this.cost.length&&l.writeRepeatedMessage(1,this.cost,d=>d.serialize(l)),this.has_snake&&l.writeMessage(3,this.snake,()=>this.snake.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Jl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.cost,()=>c.Message.addToRepeatedWrapperField(d,1,y.deserialize(l),y));break;case 3:l.readMessage(d.snake,()=>d.snake=b.deserialize(l));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Jl.deserialize(n)}};Mp=new WeakMap;let _=Jl;an.SC_SNAKE_UPGRADE=Jl;let Zl=class Zl extends c.Message{constructor(n){super();_e(this,Rp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Rp)),!Array.isArray(n)&&typeof n=="object"&&(this.unkey=n.unkey)}get unkey(){return c.Message.getField(this,1)}set unkey(n){c.Message.setField(this,1,n)}get has_unkey(){return c.Message.getField(this,1)!=null}static fromObject(n){return new Zl({unkey:n.unkey})}toObject(){let n={};return this.unkey!=null&&(n.unkey=this.unkey),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_unkey&&l.writeInt32(1,this.unkey),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new Zl;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.unkey=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return Zl.deserialize(n)}};Rp=new WeakMap;let C=Zl;an.CS_SNAKE_FIGHT=Zl;let ec=class ec extends c.Message{constructor(n){super();_e(this,Bp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Bp)),!Array.isArray(n)&&typeof n=="object"&&(this.mailId=n.mailId)}get mailId(){return c.Message.getField(this,1)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new ec({mailId:n.mailId})}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_mailId&&l.writeInt32(1,this.mailId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ec;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.mailId=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ec.deserialize(n)}};Bp=new WeakMap;let B=ec;an.CS_MAIL_CHECK=ec;let tc=class tc extends c.Message{constructor(n){super();_e(this,Dp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,Dp)),!Array.isArray(n)&&typeof n=="object"&&(this.mail=n.mail)}get mail(){return c.Message.getRepeatedWrapperField(this,g,1)}set mail(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new tc({mail:n.mail.map(d=>g.fromObject(d))})}toObject(){let n={};return this.mail!=null&&(n.mail=this.mail.map(l=>l.toObject())),n}serialize(n){let l=n||new c.BinaryWriter;if(this.mail.length&&l.writeRepeatedMessage(1,this.mail,d=>d.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new tc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.mail,()=>c.Message.addToRepeatedWrapperField(d,1,g.deserialize(l),g));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return tc.deserialize(n)}};Dp=new WeakMap;let N=tc;an.SC_MAIL_LIST=tc;let rc=class rc extends c.Message{constructor(n){super();_e(this,Op,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Op)),!Array.isArray(n)&&typeof n=="object"&&(this.mailId=n.mailId)}get mailId(){return c.Message.getField(this,1)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new rc({mailId:n.mailId})}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_mailId&&l.writeInt32(1,this.mailId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new rc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.mailId=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return rc.deserialize(n)}};Op=new WeakMap;let L=rc;an.CS_MAIL_GET=rc;let ic=class ic extends c.Message{constructor(n){super();_e(this,Np,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[2],ye(this,Np)),!Array.isArray(n)&&typeof n=="object"&&("mailId"in n&&n.mailId!=null&&(this.mailId=n.mailId),this.items=n.items,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get mailId(){return c.Message.getFieldWithDefault(this,1,0)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}get items(){return c.Message.getRepeatedWrapperField(this,y,2)}set items(n){c.Message.setRepeatedWrapperField(this,2,n)}get snake(){return c.Message.getWrapperField(this,b,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let l=new ic({items:n.items.map(d=>y.fromObject(d))});return n.mailId!=null&&(l.mailId=n.mailId),n.snake!=null&&(l.snake=b.fromObject(n.snake)),l}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),this.items!=null&&(n.items=this.items.map(l=>l.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_mailId&&l.writeInt32(1,this.mailId),this.items.length&&l.writeRepeatedMessage(2,this.items,d=>d.serialize(l)),this.has_snake&&l.writeMessage(3,this.snake,()=>this.snake.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ic;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.mailId=l.readInt32();break;case 2:l.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,2,y.deserialize(l),y));break;case 3:l.readMessage(d.snake,()=>d.snake=b.deserialize(l));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ic.deserialize(n)}};Np=new WeakMap;let Y=ic;an.SC_MAIL_GET=ic;let nc=class nc extends c.Message{constructor(n){super();_e(this,Pp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Pp)),!Array.isArray(n)&&typeof n=="object"&&(this.mailId=n.mailId)}get mailId(){return c.Message.getField(this,1)}set mailId(n){c.Message.setField(this,1,n)}get has_mailId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new nc({mailId:n.mailId})}toObject(){let n={};return this.mailId!=null&&(n.mailId=this.mailId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_mailId&&l.writeInt32(1,this.mailId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new nc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.mailId=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return nc.deserialize(n)}};Pp=new WeakMap;let X=nc;an.CS_MAIL_DELETE=nc;let sc=class sc extends c.Message{constructor(n){super();_e(this,Fp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Fp)),!Array.isArray(n)&&typeof n=="object"&&(this.msg=n.msg)}get msg(){return c.Message.getField(this,1)}set msg(n){c.Message.setField(this,1,n)}get has_msg(){return c.Message.getField(this,1)!=null}static fromObject(n){return new sc({msg:n.msg})}toObject(){let n={};return this.msg!=null&&(n.msg=this.msg),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_msg&&this.msg.length&&l.writeString(1,this.msg),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new sc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.msg=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return sc.deserialize(n)}};Fp=new WeakMap;let ne=sc;an.SC_SYS_NOTICE=sc;let oc=class oc extends c.Message{constructor(n){super();_e(this,Up,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Up)),!Array.isArray(n)&&typeof n=="object"&&(this.type=n.type,this.value=n.value)}get type(){return c.Message.getField(this,1)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}get value(){return c.Message.getField(this,2)}set value(n){c.Message.setField(this,2,n)}get has_value(){return c.Message.getField(this,2)!=null}static fromObject(n){return new oc({type:n.type,value:n.value})}toObject(){let n={};return this.type!=null&&(n.type=this.type),this.value!=null&&(n.value=this.value),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_type&&l.writeInt32(1,this.type),this.has_value&&this.value.length&&l.writeString(2,this.value),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new oc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.type=l.readInt32();break;case 2:d.value=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return oc.deserialize(n)}};Up=new WeakMap;let me=oc;an.CS_CHANGE_INFO=oc;let ac=class ac extends c.Message{constructor(n){super();_e(this,Hp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Hp)),!Array.isArray(n)&&typeof n=="object"&&("kills"in n&&n.kills!=null&&(this.kills=n.kills),"score"in n&&n.score!=null&&(this.score=n.score))}get kills(){return c.Message.getFieldWithDefault(this,1,0)}set kills(n){c.Message.setField(this,1,n)}get has_kills(){return c.Message.getField(this,1)!=null}get score(){return c.Message.getFieldWithDefault(this,2,0)}set score(n){c.Message.setField(this,2,n)}get has_score(){return c.Message.getField(this,2)!=null}static fromObject(n){let l=new ac({});return n.kills!=null&&(l.kills=n.kills),n.score!=null&&(l.score=n.score),l}toObject(){let n={};return this.kills!=null&&(n.kills=this.kills),this.score!=null&&(n.score=this.score),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_kills&&l.writeInt32(1,this.kills),this.has_score&&l.writeInt32(2,this.score),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new ac;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.kills=l.readInt32();break;case 2:d.score=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return ac.deserialize(n)}};Hp=new WeakMap;let Re=ac;an.CS_AI_END=ac;let lc=class lc extends c.Message{constructor(n){super();_e(this,zp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,zp)),!Array.isArray(n)&&typeof n=="object"&&(this.items=n.items)}get items(){return c.Message.getRepeatedWrapperField(this,y,1)}set items(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new lc({items:n.items.map(d=>y.fromObject(d))})}toObject(){let n={};return this.items!=null&&(n.items=this.items.map(l=>l.toObject())),n}serialize(n){let l=n||new c.BinaryWriter;if(this.items.length&&l.writeRepeatedMessage(1,this.items,d=>d.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new lc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,1,y.deserialize(l),y));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return lc.deserialize(n)}};zp=new WeakMap;let ue=lc;an.SC_AI_END=lc;let cc=class cc extends c.Message{constructor(n){super();_e(this,jp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,jp)),!Array.isArray(n)&&typeof n=="object"&&(this.boxId=n.boxId)}get boxId(){return c.Message.getField(this,1)}set boxId(n){c.Message.setField(this,1,n)}get has_boxId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new cc({boxId:n.boxId})}toObject(){let n={};return this.boxId!=null&&(n.boxId=this.boxId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_boxId&&l.writeInt32(1,this.boxId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new cc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.boxId=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return cc.deserialize(n)}};jp=new WeakMap;let ke=cc;an.CS_OPEN_BOX=cc;let uc=class uc extends c.Message{constructor(n){super();_e(this,Gp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1,2],ye(this,Gp)),!Array.isArray(n)&&typeof n=="object"&&(this.cost=n.cost,this.items=n.items,"snake"in n&&n.snake!=null&&(this.snake=n.snake))}get cost(){return c.Message.getRepeatedWrapperField(this,y,1)}set cost(n){c.Message.setRepeatedWrapperField(this,1,n)}get items(){return c.Message.getRepeatedWrapperField(this,y,2)}set items(n){c.Message.setRepeatedWrapperField(this,2,n)}get snake(){return c.Message.getWrapperField(this,b,3)}set snake(n){c.Message.setWrapperField(this,3,n)}get has_snake(){return c.Message.getField(this,3)!=null}static fromObject(n){let l=new uc({cost:n.cost.map(d=>y.fromObject(d)),items:n.items.map(d=>y.fromObject(d))});return n.snake!=null&&(l.snake=b.fromObject(n.snake)),l}toObject(){let n={};return this.cost!=null&&(n.cost=this.cost.map(l=>l.toObject())),this.items!=null&&(n.items=this.items.map(l=>l.toObject())),this.snake!=null&&(n.snake=this.snake.toObject()),n}serialize(n){let l=n||new c.BinaryWriter;if(this.cost.length&&l.writeRepeatedMessage(1,this.cost,d=>d.serialize(l)),this.items.length&&l.writeRepeatedMessage(2,this.items,d=>d.serialize(l)),this.has_snake&&l.writeMessage(3,this.snake,()=>this.snake.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new uc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.cost,()=>c.Message.addToRepeatedWrapperField(d,1,y.deserialize(l),y));break;case 2:l.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,2,y.deserialize(l),y));break;case 3:l.readMessage(d.snake,()=>d.snake=b.deserialize(l));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return uc.deserialize(n)}};Gp=new WeakMap;let Qe=uc;an.SC_OPEN_BOX=uc;let pc=class pc extends c.Message{constructor(n){super();_e(this,Vp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,Vp)),!Array.isArray(n)&&typeof n=="object"&&(this.price=n.price)}get price(){return c.Message.getFieldWithDefault(this,1,[])}set price(n){c.Message.setField(this,1,n)}static fromObject(n){return new pc({price:n.price})}toObject(){return{price:this.price}}serialize(n){let l=n||new c.BinaryWriter;if(this.price.length&&l.writeRepeatedString(1,this.price),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new pc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:c.Message.addToRepeatedField(d,1,l.readString());break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return pc.deserialize(n)}};Vp=new WeakMap;let se=pc;an.SC_REQUEST_PRICE=pc;let mc=class mc extends c.Message{constructor(n){super();_e(this,Wp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Wp)),!Array.isArray(n)&&typeof n=="object"&&(this.type=n.type)}get type(){return c.Message.getField(this,1)}set type(n){c.Message.setField(this,1,n)}get has_type(){return c.Message.getField(this,1)!=null}static fromObject(n){return new mc({type:n.type})}toObject(){let n={};return this.type!=null&&(n.type=this.type),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_type&&l.writeInt32(1,this.type),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new mc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.type=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return mc.deserialize(n)}};Wp=new WeakMap;let lt=mc;an.CS_RANK_LIST=mc;let dc=class dc extends c.Message{constructor(n){super();_e(this,Kp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[1],ye(this,Kp)),!Array.isArray(n)&&typeof n=="object"&&(this.rank=n.rank)}get rank(){return c.Message.getRepeatedWrapperField(this,at,1)}set rank(n){c.Message.setRepeatedWrapperField(this,1,n)}static fromObject(n){return new dc({rank:n.rank.map(d=>at.fromObject(d))})}toObject(){let n={};return this.rank!=null&&(n.rank=this.rank.map(l=>l.toObject())),n}serialize(n){let l=n||new c.BinaryWriter;if(this.rank.length&&l.writeRepeatedMessage(1,this.rank,d=>d.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new dc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(d.rank,()=>c.Message.addToRepeatedWrapperField(d,1,at.deserialize(l),at));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return dc.deserialize(n)}};Kp=new WeakMap;let rt=dc;an.SC_RANK_LIST=dc;let hc=class hc extends c.Message{constructor(n){super();_e(this,$p,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,$p)),!Array.isArray(n)&&typeof n=="object"&&("roleId"in n&&n.roleId!=null&&(this.roleId=n.roleId),"userName"in n&&n.userName!=null&&(this.userName=n.userName),"icon"in n&&n.icon!=null&&(this.icon=n.icon),"num"in n&&n.num!=null&&(this.num=n.num),"addr"in n&&n.addr!=null&&(this.addr=n.addr),"country"in n&&n.country!=null&&(this.country=n.country))}get roleId(){return c.Message.getFieldWithDefault(this,1,"")}set roleId(n){c.Message.setField(this,1,n)}get has_roleId(){return c.Message.getField(this,1)!=null}get userName(){return c.Message.getFieldWithDefault(this,2,"")}set userName(n){c.Message.setField(this,2,n)}get has_userName(){return c.Message.getField(this,2)!=null}get icon(){return c.Message.getFieldWithDefault(this,3,"")}set icon(n){c.Message.setField(this,3,n)}get has_icon(){return c.Message.getField(this,3)!=null}get num(){return c.Message.getFieldWithDefault(this,4,0)}set num(n){c.Message.setField(this,4,n)}get has_num(){return c.Message.getField(this,4)!=null}get addr(){return c.Message.getFieldWithDefault(this,5,"")}set addr(n){c.Message.setField(this,5,n)}get has_addr(){return c.Message.getField(this,5)!=null}get country(){return c.Message.getFieldWithDefault(this,6,0)}set country(n){c.Message.setField(this,6,n)}get has_country(){return c.Message.getField(this,6)!=null}static fromObject(n){let l=new hc({});return n.roleId!=null&&(l.roleId=n.roleId),n.userName!=null&&(l.userName=n.userName),n.icon!=null&&(l.icon=n.icon),n.num!=null&&(l.num=n.num),n.addr!=null&&(l.addr=n.addr),n.country!=null&&(l.country=n.country),l}toObject(){let n={};return this.roleId!=null&&(n.roleId=this.roleId),this.userName!=null&&(n.userName=this.userName),this.icon!=null&&(n.icon=this.icon),this.num!=null&&(n.num=this.num),this.addr!=null&&(n.addr=this.addr),this.country!=null&&(n.country=this.country),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_userName&&this.userName.length&&l.writeString(2,this.userName),this.has_icon&&this.icon.length&&l.writeString(3,this.icon),this.has_num&&l.writeInt64(4,this.num),this.has_addr&&this.addr.length&&l.writeString(5,this.addr),this.has_country&&l.writeInt32(6,this.country),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new hc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.roleId=l.readString();break;case 2:d.userName=l.readString();break;case 3:d.icon=l.readString();break;case 4:d.num=l.readInt64();break;case 5:d.addr=l.readString();break;case 6:d.country=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return hc.deserialize(n)}};$p=new WeakMap;let at=hc;an.RankObject=hc;let fc=class fc extends c.Message{constructor(n){super();_e(this,qp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[3],ye(this,qp)),!Array.isArray(n)&&typeof n=="object"&&("lv"in n&&n.lv!=null&&(this.lv=n.lv),"exp"in n&&n.exp!=null&&(this.exp=n.exp),this.items=n.items)}get lv(){return c.Message.getFieldWithDefault(this,1,0)}set lv(n){c.Message.setField(this,1,n)}get has_lv(){return c.Message.getField(this,1)!=null}get exp(){return c.Message.getFieldWithDefault(this,2,0)}set exp(n){c.Message.setField(this,2,n)}get has_exp(){return c.Message.getField(this,2)!=null}get items(){return c.Message.getRepeatedWrapperField(this,y,3)}set items(n){c.Message.setRepeatedWrapperField(this,3,n)}static fromObject(n){let l=new fc({items:n.items.map(d=>y.fromObject(d))});return n.lv!=null&&(l.lv=n.lv),n.exp!=null&&(l.exp=n.exp),l}toObject(){let n={};return this.lv!=null&&(n.lv=this.lv),this.exp!=null&&(n.exp=this.exp),this.items!=null&&(n.items=this.items.map(l=>l.toObject())),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_lv&&l.writeInt32(1,this.lv),this.has_exp&&l.writeInt32(2,this.exp),this.items.length&&l.writeRepeatedMessage(3,this.items,d=>d.serialize(l)),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new fc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.lv=l.readInt32();break;case 2:d.exp=l.readInt32();break;case 3:l.readMessage(d.items,()=>c.Message.addToRepeatedWrapperField(d,3,y.deserialize(l),y));break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return fc.deserialize(n)}};qp=new WeakMap;let It=fc;an.SC_LVUP_NOTICE=fc;let gc=class gc extends c.Message{constructor(n){super();_e(this,Yp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Yp)),!Array.isArray(n)&&typeof n=="object"&&(this.name=n.name,this.icon=n.icon,this.type=n.type)}get name(){return c.Message.getField(this,1)}set name(n){c.Message.setField(this,1,n)}get has_name(){return c.Message.getField(this,1)!=null}get icon(){return c.Message.getField(this,2)}set icon(n){c.Message.setField(this,2,n)}get has_icon(){return c.Message.getField(this,2)!=null}get type(){return c.Message.getField(this,3)}set type(n){c.Message.setField(this,3,n)}get has_type(){return c.Message.getField(this,3)!=null}static fromObject(n){return new gc({name:n.name,icon:n.icon,type:n.type})}toObject(){let n={};return this.name!=null&&(n.name=this.name),this.icon!=null&&(n.icon=this.icon),this.type!=null&&(n.type=this.type),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_name&&this.name.length&&l.writeString(1,this.name),this.has_icon&&this.icon.length&&l.writeString(2,this.icon),this.has_type&&l.writeInt32(3,this.type),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new gc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.name=l.readString();break;case 2:d.icon=l.readString();break;case 3:d.type=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return gc.deserialize(n)}};Yp=new WeakMap;let Xr=gc;an.CS_CREATE_CLUB=gc;let bc=class bc extends c.Message{constructor(n){super();_e(this,Qp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Qp)),!Array.isArray(n)&&typeof n=="object"&&(this.clubId=n.clubId,this.type=n.type)}get clubId(){return c.Message.getField(this,1)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}static fromObject(n){return new bc({clubId:n.clubId,type:n.type})}toObject(){let n={};return this.clubId!=null&&(n.clubId=this.clubId),this.type!=null&&(n.type=this.type),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_clubId&&this.clubId.length&&l.writeString(1,this.clubId),this.has_type&&l.writeInt32(2,this.type),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new bc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.clubId=l.readString();break;case 2:d.type=l.readInt32();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return bc.deserialize(n)}};Qp=new WeakMap;let ur=bc;an.SC_CREATE_CLUB=bc;let yc=class yc extends c.Message{constructor(n){super();_e(this,Xp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[],ye(this,Xp)),!Array.isArray(n)&&typeof n=="object"&&(this.clubId=n.clubId)}get clubId(){return c.Message.getField(this,1)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}static fromObject(n){return new yc({clubId:n.clubId})}toObject(){let n={};return this.clubId!=null&&(n.clubId=this.clubId),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_clubId&&this.clubId.length&&l.writeString(1,this.clubId),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new yc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.clubId=l.readString();break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return yc.deserialize(n)}};Xp=new WeakMap;let Rr=yc;an.CS_CLUB_INFO=yc;let _c=class _c extends c.Message{constructor(n){super();_e(this,Jp,[]);c.Message.initialize(this,Array.isArray(n)?n:[],0,-1,[7,8,9],ye(this,Jp)),!Array.isArray(n)&&typeof n=="object"&&(this.clubId=n.clubId,this.type=n.type,"name"in n&&n.name!=null&&(this.name=n.name),"icon"in n&&n.icon!=null&&(this.icon=n.icon),"creater"in n&&n.creater!=null&&(this.creater=n.creater),"createTime"in n&&n.createTime!=null&&(this.createTime=n.createTime),this.members=n.members,this.rooms=n.rooms,this.profits=n.profits)}get clubId(){return c.Message.getField(this,1)}set clubId(n){c.Message.setField(this,1,n)}get has_clubId(){return c.Message.getField(this,1)!=null}get type(){return c.Message.getField(this,2)}set type(n){c.Message.setField(this,2,n)}get has_type(){return c.Message.getField(this,2)!=null}get name(){return c.Message.getFieldWithDefault(this,3,"")}set name(n){c.Message.setField(this,3,n)}get has_name(){return c.Message.getField(this,3)!=null}get icon(){return c.Message.getFieldWithDefault(this,4,"")}set icon(n){c.Message.setField(this,4,n)}get has_icon(){return c.Message.getField(this,4)!=null}get creater(){return c.Message.getFieldWithDefault(this,5,"")}set creater(n){c.Message.setField(this,5,n)}get has_creater(){return c.Message.getField(this,5)!=null}get createTime(){return c.Message.getFieldWithDefault(this,6,"")}set createTime(n){c.Message.setField(this,6,n)}get has_createTime(){return c.Message.getField(this,6)!=null}get members(){return c.Message.getFieldWithDefault(this,7,[])}set members(n){c.Message.setField(this,7,n)}get rooms(){return c.Message.getFieldWithDefault(this,8,[])}set rooms(n){c.Message.setField(this,8,n)}get profits(){return c.Message.getFieldWithDefault(this,9,[])}set profits(n){c.Message.setField(this,9,n)}static fromObject(n){let l=new _c({clubId:n.clubId,type:n.type,members:n.members,rooms:n.rooms,profits:n.profits});return n.name!=null&&(l.name=n.name),n.icon!=null&&(l.icon=n.icon),n.creater!=null&&(l.creater=n.creater),n.createTime!=null&&(l.createTime=n.createTime),l}toObject(){let n={members:this.members,rooms:this.rooms,profits:this.profits};return this.clubId!=null&&(n.clubId=this.clubId),this.type!=null&&(n.type=this.type),this.name!=null&&(n.name=this.name),this.icon!=null&&(n.icon=this.icon),this.creater!=null&&(n.creater=this.creater),this.createTime!=null&&(n.createTime=this.createTime),n}serialize(n){let l=n||new c.BinaryWriter;if(this.has_clubId&&this.clubId.length&&l.writeString(1,this.clubId),this.has_type&&l.writeInt32(2,this.type),this.has_name&&this.name.length&&l.writeString(3,this.name),this.has_icon&&this.icon.length&&l.writeString(4,this.icon),this.has_creater&&this.creater.length&&l.writeString(5,this.creater),this.has_createTime&&this.createTime.length&&l.writeString(6,this.createTime),this.members.length&&l.writeRepeatedString(7,this.members),this.rooms.length&&l.writeRepeatedString(8,this.rooms),this.profits.length&&l.writeRepeatedString(9,this.profits),!n)return l.getResultBuffer()}static deserialize(n){let l=n instanceof c.BinaryReader?n:new c.BinaryReader(n),d=new _c;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:d.clubId=l.readString();break;case 2:d.type=l.readInt32();break;case 3:d.name=l.readString();break;case 4:d.icon=l.readString();break;case 5:d.creater=l.readString();break;case 6:d.createTime=l.readString();break;case 7:c.Message.addToRepeatedField(d,7,l.readString());break;case 8:c.Message.addToRepeatedField(d,8,l.readString());break;case 9:c.Message.addToRepeatedField(d,9,l.readString());break;default:l.skipField()}return d}serializeBinary(){return this.serialize()}static deserializeBinary(n){return _c.deserialize(n)}};Jp=new WeakMap;let xo=_c;an.SC_CLUB_INFO=_c})(t=i.socket||(i.socket={}))})(r=e.snake||(e.snake={}))})(v||(v={}));var Te=class r{static encodeMessage(e,t,i){var s=r.createHeadMessage(e,i),o=r.createMessageBase(s,t),a=o.serializeBinary(),u=a.length,p=new Uint8Array([(u&4278190080)>>>24,(u&16711680)>>>16,(u&65280)>>>8,(u&255)>>>0]),m=new Uint8Array(p.byteLength+a.byteLength);return m.set(new Uint8Array(p),0),m.set(new Uint8Array(a),p.byteLength),m}static decodeMessage(e,t){var i=new DataView(e,t+0,t+4).getInt32(0,!1),s=t+4+i,o=e.slice(t+4,t+4+i),a=v.snake.socket.CMsgBase.deserializeBinary(o);return[a,s]}static createHeadMessage(e,t,i,s){t||(i=!0),!s&&j.playerDto&&(s=j.playerDto.pid);var o=v.snake.socket.CMsgHead.fromObject({msgtype:e,msgcode:1,roleId:s});return o}static createMessageBase(e,t){var i=v.snake.socket.CMsgBase.fromObject({msghead:e,msgbody:t});return i}static getMsgBody(e,t=null){var i=null,s=e.msghead.msgtype,o=e.msghead.msgcode;return t||(t=Laya.ClassUtils.getClass(s+"")),t?(i=t.deserializeBinary(e.msgbody).toObject(),ce.Debug==2&&console.log(Ce.GetLogTime,"[DataUtil]  ------<<<<<<<< RECV CMD:"+s+", CODE:",o+", DATA:",i)):console.warn(Ce.GetLogTime,"[DataUtil]  ------<<<<<<<< RECV CMD:"+s+", CODE:",o+", className解析失败!"),i}};var Sn=class{};var so=class{};var xr=class xr{constructor(){this._m_bPlayMusic=!0;this._m_bPlayeSound=!0;this._musicVolume=1;this._soundVolume=1;this.soundName_bg="bgm";this.soundName_hit="hit.mp3";this.soundName_win="result_win.mp3";this.soundName_fail="result_fail.mp3";this.soundName_kill_1="kill_1.mp3";this.soundName_kill_2="kill_2.mp3";this.soundName_kill_3="kill_3.mp3";this.soundName_kill_4="kill_4.mp3";this.soundName_kill_5="kill_5.mp3";this.soundName_eat_food_1="eat_food1.mp3";this.soundName_eat_food_2="eat_food2.mp3";this.soundName_eat_food_3="eat_food3.mp3";this.soundName_kill_die="kill_die.mp3";this.soundName32="ui32.ogg"}static getInstance(){return xr._instance||(xr._instance=new xr),xr._instance}get m_bPlayMusic(){return this._m_bPlayMusic}set m_bPlayMusic(e){this._m_bPlayMusic=e,e?this.m_strMusicURL!=null&&this.playMusicByURL(this.m_strMusicURL):this.musicChannel&&this.musicChannel.stop()}getMusicVolume(){return this._musicVolume}setMusicVolume(e){this._musicVolume=e,Laya.SoundManager.setMusicVolume(e),this.saveMusicVolume()}getSoundVolume(){return this._soundVolume}setSoundVolume(e){this._soundVolume=e,Laya.SoundManager.setSoundVolume(e),this.saveSoundVolume()}saveMusicVolume(){Laya.LocalStorage.setItem(xr.COOKIE_CF_MUSIC,this._musicVolume.toString())}saveSoundVolume(){Laya.LocalStorage.setItem(xr.COOKIE_CF_SOUND,this._soundVolume.toString())}loadVolumeSettings(){let e=Laya.LocalStorage.getItem(xr.COOKIE_CF_MUSIC);e!=null&&e!==""&&(this._musicVolume=parseFloat(e),Laya.SoundManager.setMusicVolume(this._musicVolume));let t=Laya.LocalStorage.getItem(xr.COOKIE_CF_SOUND);t!=null&&t!==""&&(this._soundVolume=parseFloat(t),Laya.SoundManager.setSoundVolume(this._soundVolume))}init(){this.loadVolumeSettings();let e=Laya.LocalStorage.getItem(xr.COOKIE_CF_MUSIC);e!=null&&e!=""&&(this.m_bPlayMusic=parseFloat(e)>0);let t=Laya.LocalStorage.getItem(xr.COOKIE_CF_SOUND);t!=null&&t!=""&&(this.m_bPlayeSound=parseFloat(t)>0),this.switchMusic(this.m_bPlayMusic),this.switchSound(this.m_bPlayeSound)}get m_bPlayeSound(){return this._m_bPlayeSound}set m_bPlayeSound(e){this._m_bPlayeSound=e}playMusicByURL(e){this.m_bPlayMusic&&(this.m_strMusicURL,this.m_strMusicURL==e&&this.musicChannel,this.m_strMusicURL=e,Laya.SoundManager.stopMusic(),this.musicChannel=Laya.SoundManager.playMusic(e,0,new Laya.Handler(this,this.onComplete)))}playMusicByName(e,t=".ogg"){let i=re.getSoundURL(e,t);this.playMusicByURL(i)}playSound(e,t=1){this.m_bPlayeSound&&Laya.SoundManager.playSound(e,t,new Laya.Handler(this,this.onComplete))}playSoundByName(e,t=1){let i=re.getSoundURLogg(e);this.playSound(i,t)}stopSoundByName(e){let t=re.getSoundURLogg(e);Laya.SoundManager.stopSound(t)}switchMusic(e){let t=e?this._musicVolume:0;Laya.SoundManager.setMusicVolume(t),xr.getInstance().m_bPlayMusic=e}switchSound(e){let t=e?this._soundVolume:0;Laya.SoundManager.setSoundVolume(t),xr.getInstance().m_bPlayeSound=e}onComplete(){}};xr.COOKIE_CF_MUSIC="COOKIE_CF_MUSIC",xr.COOKIE_CF_SOUND="COOKIE_CF_SOUND";var j_=xr,Ye=j_.getInstance();var Q=class{};Q.GameConfig={debug:!1,version:"1.0.0",frameRate:"30",defaultVolume:.7,skills:{speedUp:{duration:5,cooldown:10},shield:{duration:3,cooldown:15},magnet:{duration:8,cooldown:20},invisible:{duration:4,cooldown:25}}},Q.uiZOrder={common:1e3,hint:2e3,loading:2001},Q.closeType={cancel:1,close:2,ok:3,keyback:4},Q.JoystickMODE={FIXED:1,MOVED:2},Q.JoystickEventType={JET_TOUCH_BEGIN:1,JET_TOUCH_MOVE:2,JET_TOUCH_END:3},Q.JoystickSize={JoyStickBg:80,JoyStickHandleBg:40},Q.snakeType={SELF:1,OTHERS:2},Q.roomType={1:{1:{1:2,2:3,3:4},2:5,3:6},2:7,3:1,4:8},Q.snakeSpeedRate={default:1,speedUp:2},Q.mapSize={offsetDistance:150,width:64+1280*3+64,height:60+720*4+60,offsetX:64,offsetY:60,defaultMapRes:{width:1280,height:720,resPath:"res/snake/manual/game/img_back.png"}},Q.collision={quadTree:{maxObjects:10,maxLevels:5},snake:{headRadius:18,bodyRadius:14},food:{radius:25,maxRadius:25}},Q.food={size:50,initCount:200,maxCount:300,spawnInterval:1e3},Q.res={snakeRingImg:"res/match2/img_ring.png"},Q.snake={defaultSpeed:6,defaultRotateSpeed:500,defaultLen:20,intervalBoneToDrawSkin:4,defaultRotation:270,defaultRadio:35/2,defaultMoveInterval:.033,defaultInvincibleTime:3,defaultShineInterval:.1,skinFlag:{head:1,body:2},initCount:20,maxCount:20,spawnInterval:1e3,aiMinLen:5,aiMaxLen:80,aiPrefix:"AI",battleCd:10*60*1e3,skinIds:[101,102,103,104,105]},Q.SYNC_CONFIG={MAX_ALLOWED_ERROR:50,CORRECTION_TIME:300,SYNC_INTERVAL:100,PREDICTION_MULTIPLIER:1.2},Q.invincibleRing={margin:2,minScale:.5};var Pt=class{static clamp(e,t,i){return Math.max(t,Math.min(i,e))}static lerp(e,t,i){return e+(t-e)*i}static angleToRadian(e){return e*Math.PI/180}static radianToAngle(e){return e*180/Math.PI}static randomRange(e,t){return e+Math.random()*(t-e)}static randomInt(e,t){return Math.floor(this.randomRange(e,t+1))}static getDistance(e,t){let i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)}static getVecDistance(e,t){let i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)}static distance(e,t,i,s){let o=e-i,a=t-s;return Math.sqrt(o*o+a*a)}static getAngle(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}};Pt.PI2=Math.PI*2;var wu=class r{constructor(e,t=0,i){this.bounds=e;this.level=t;this.objects=[];this.nodes=[];this.root=i||this}insert(e){if(this.nodes.length>0){let t=this.getIndex(e);if(t!==void 0&&t!==-1){this.nodes[t].insert(e);return}}this.objects.push(e),this.shouldSplit()&&this.splitAndRedistribute()}retrieve(e){let t=new Set,i=this.getIndexes(e);if(this.nodes.length>0)for(let s of i)s===-1?this.nodes.forEach(o=>{o.retrieve(e).forEach(a=>t.add(a))}):this.nodes[s]?.retrieve(e).forEach(o=>t.add(o));return this.objects.forEach(s=>{s!==e&&t.add(s)}),Array.from(t)}refresh(){let e=[];for(let t=this.objects.length-1;t>=0;t--){let i=this.objects[t];this.isInBounds(i)||(e.push(i),this.objects.splice(t,1))}e.forEach(t=>this.root.insert(t)),this.nodes.forEach(t=>t.refresh())}remove(e){let t=this.objects.indexOf(e);if(t>-1)return this.objects.splice(t,1),!0;if(this.nodes.length>0){for(let i of this.nodes)if(i.remove(e))return!0}return!1}isInBounds(e){return r.checkBounds(this.bounds,e.getBoundingBox())}shouldSplit(){return this.nodes.length===0&&this.objects.length>20&&this.level<8}splitAndRedistribute(){this.split();for(let e=this.objects.length-1;e>=0;e--){let t=this.objects[e],i=this.getIndex(t);i!==void 0&&i!==-1&&(this.nodes[i].insert(t),this.objects.splice(e,1))}}split(){if(this.nodes.length>0)return;let e=this.bounds.x,t=this.bounds.y,i=this.bounds.width/2,s=this.bounds.height/2;this.nodes=[new r(new Laya.Rectangle(e+i,t+s,i,s),this.level+1,this.root),new r(new Laya.Rectangle(e,t+s,i,s),this.level+1,this.root),new r(new Laya.Rectangle(e,t,i,s),this.level+1,this.root),new r(new Laya.Rectangle(e+i,t,i,s),this.level+1,this.root)]}getIndex(e){let t=e.getBoundingBox();if(!r.checkBounds(this.bounds,t))return;let i=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,o=t.y<s,a=t.y+t.height>s,u=t.x<i,p=t.x+t.width>i;return u&&p||o&&a?-1:t.x>=i?t.y>=s?0:3:t.y>=s?1:2}getIndexes(e){let t=e.getBoundingBox(),i=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,o=t.y<s,a=t.y+t.height>s,u=t.x<i,p=t.x+t.width>i,m=[];return u&&o&&m.push(2),p&&o&&m.push(3),u&&a&&m.push(1),p&&a&&m.push(0),u&&p&&(o?(m.push(2),m.push(3)):a&&(m.push(1),m.push(0))),o&&a&&(u?(m.push(2),m.push(1)):p&&(m.push(3),m.push(0))),m.length===4&&m.push(-1),m}static checkBounds(e,t){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}clear(){this.objects=[],this.nodes.forEach(e=>e.clear()),this.nodes=[]}drawDebug(e){this.bounds.width<3e3&&(e.drawRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height,this.level%2===0?"#ff0000":"#00ff00",this.level%2===0?"#ff0000":"#00ff00",this.level),e.fillText(`L: ${this.level}`,this.bounds.x+this.bounds.width/2,this.bounds.y+this.bounds.height/2,"16px Arial","#ffffff","center")),this.objects.forEach(t=>{let i=t.getBoundingBox();e.drawRect(i.x,i.y,i.width,i.height,this.level%2===0?"#0000ff":"#00ff00",this.level%2===0?"#ff0000":"#00ff00",this.level),e.fillText(`L: ${this.level}`,i.x+i.width/2,i.y+i.height/2,"14px Arial","#ffffff","center")}),this.nodes.forEach(t=>t.drawDebug(e))}};var oo=class oo{static getInstance(e=null){return oo.instance||(e||(e=new Laya.Rectangle(0,0,Q.mapSize.width,Q.mapSize.height)),oo.instance=new oo(e)),oo.instance}constructor(e){this.quadTree=new wu(e)}addSnake(e){e.forEach(t=>{this.quadTree.insert(t)})}addBodySkin(e){this.quadTree.insert(e)}removeSnake(e){e.forEach(t=>{this.quadTree.remove(t)})}removeBodySkin(e){this.quadTree.remove(e)}refresh(){this.quadTree.refresh()}drawDebug(e){this.quadTree.drawDebug(e)}retrieve(e){return this.quadTree.retrieve(e)}getAllCollidables(){return this._getAllFromQuadTree(this.quadTree)}_getAllFromQuadTree(e){let t=[...e.objects];return e.nodes.forEach(i=>{t=t.concat(this._getAllFromQuadTree(i))}),t}};oo.instance=null;var ci=oo;var Oe=class{};Oe.arenaType=0,Oe.ARENA_TYPE_PVP=1,Oe.ARENA_TYPE_JULEBU=2,Oe.ARENA_TYPE_PVE=3,Oe.ARENA_TYPE_TEAM=4,Oe.ROOM_TYPE_AI=1,Oe.ROOM_TYPE_SHEQU=2,Oe.ROOM_TYPE_VIP=3,Oe.ROOM_TYPE_JINGYING=4,Oe.ROOM_TYPE_JULEBU=5,Oe.ROOM_TYPE_CUSTOM=6,Oe.ROOM_TYPE_MATCH=7,Oe.ACTION_CREATE=1,Oe.ACTION_JOIN=2,Oe.ACTION_SIGNUP=3,Oe.ACTION_WATCH=4,Oe.ACTION_CREATE_BOOKING=5,Oe.ACTION_JOIN_BOOKING=6,Oe.STATE_WAIT=0,Oe.STATE_SIGNUP=2,Oe.STATE_GROUPED=3,Oe.STATE_START=10,Oe.CAMERA_IDLE=0,Oe.CAMERA_FOLLOW_ME=1,Oe.CAMERA_MAP_CLICK=2,Oe.CAMERA_DIRECT_OPERATE=3,Oe.CAMERA_FOLLOW_OTHER=4,Oe.MATCHEND_REWARD=1,Oe.MATCHEND_QUAN=2,Oe.MATCHEND_DIEJIA=3;var tn=class{constructor(e,t){this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200;this._collisionRadius=Q.collision.food.radius;this.position=ft.create(t.loc.x,t.loc.y),this.foodObject=t,this.init(e)}getHaveEaten(e){return e?this.haveEatenConfirm:this.haveEatenClient}setHaveEaten(e,t){t?this.haveEatenConfirm=e:this.haveEatenClient=e}init(e){this.sprite=re.matchSnakeBeanPrefab.create();var t=ee.m_dicFoods.get(this.foodObject.itemId);if(this.sprite.init(t),this._collisionRadius=t.collisionRadius,this.sprite.pos(this.position.x,this.position.y),this.sprite.zOrder=0,e.addChild(this.sprite),ce.needDraw){let i=new Laya.Label;i.text=`${this.foodObject.unkey}:(${Math.round(this.position.x)}, ${Math.round(this.position.y)})`,i.color="#FFFFFF",i.fontSize=18,i.font="Arial",i.align="center",i.anchorX=.5,i.anchorY=1,i.stroke=2,i.strokeColor="#000000",i.y=-this.sprite.height/2-2,this.sprite.addChild(i)}}reset(e,t){this.position=ft.create(t.loc.x,t.loc.y),this.foodObject=t,this.setHaveEaten(!1,!0),this.setHaveEaten(!1,!1);var i=ee.m_dicFoods.get(this.foodObject.itemId);this.sprite.init(i),this._collisionRadius=i.collisionRadius,this.sprite.alpha=1,this.sprite.pos(this.position.x,this.position.y),e.addChild(this.sprite)}resetForPool(){this.setHaveEaten(!1,!0),this.setHaveEaten(!1,!1),Laya.Tween.clearAll(this.sprite),this.sprite.removeSelf()}startScalingAnimation(){let e=this.minScale+Math.random()*(this.maxScale-this.minScale),t=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:e,scaleY:e},t,null,Laya.Handler.create(this,()=>{let i=this.minScale+Math.random()*(1-this.minScale),s=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:i,scaleY:i},s,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}getPosition(){return this.position}getScore(){var e=ee.m_dicFoods.get(this.foodObject.itemId);return e.points}beEatten(e,t,i){i?(Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:e,y:t,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish,[!0]))):ve.matchDto.arenaType==Oe.ARENA_TYPE_PVE?(Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:e,y:t,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish,[!0]))):this.getHaveEaten(!0)||(Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:e,y:t,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish,[!1]))),this.setHaveEaten(!0,i)}onFinish(e){e?(this.resetForPool(),pt.removeFood(this)):this.sprite.alpha=.5}destroy(){Laya.Tween.clearAll(this.sprite),this.sprite.removeSelf(),this.sprite.destroy(),this.sprite=null,this.position=null}getBoundingBox(){return new Laya.Rectangle(this.position.x-this._collisionRadius,this.position.y-this._collisionRadius,this._collisionRadius*2,this._collisionRadius*2)}checkCollision(e,t,i,s){let o=this.position;return Pt.distance(o.x,o.y,e,t)<i+this._collisionRadius}};var Wf=class{constructor(e){this.container=e;this.pool=[]}getFood(e){let t;return this.pool.length>0?(t=this.pool.pop(),t.reset(this.container,e)):t=new tn(this.container,e),t}returnFood(e){e.resetForPool(),this.pool.push(e)}clear(){this.pool.forEach(e=>e.destroy()),this.pool=[]}};var ds=class ds{constructor(){this.foods=[];this.foodDic=new Ne;this.spawnTimer=0;this.foodUnKey=0}static getInstance(){return ds._instance||(ds._instance=new ds),ds._instance}init(){this.container||(this.container=new Laya.Sprite),this._collision=ci.getInstance(),this.foodPool=new Wf(this.container)}spawnFoods(){var e=[],t=Q.food.initCount;for(let s=1;s<=t;s++){var i=this.spawnRandomFoodObject();e.push(i)}return e}spawnRandomFoodObject(){var e=Q.mapSize.offsetDistance,t=Pt.randomRange(e,Q.mapSize.width-e),i=Pt.randomRange(e,Q.mapSize.height-e),s=this.getFoodObjectByPos(t,i);return s}spawnFood(){if(!(this.foods.length>=Q.food.maxCount)){var e=this.spawnRandomFoodObject();this.addFood(e)}}update(e){this.spawnTimer+=e,this.spawnTimer>=Q.food.spawnInterval&&(this.spawnTimer=0,this.spawnFood())}addFoodByPosWithDie(e,t){if(!(this.foods.length>=Q.food.maxCount)){var i=this.getFoodObjectByPos(e,t);this.addFood(i)}}getFoodObjectByPos(e,t){this.foodUnKey+=1;var i=ee.m_dicFoods.keys.length,s=Math.floor(Math.random()*i),o=ee.m_dicFoods.keys[s],a=new v.snake.socket.FoodObject;a.itemId=o,a.unkey=this.foodUnKey+"";var u=new v.snake.socket.PointObject;return u.x=e,u.y=t,a.loc=u,a}addFoods(e){e&&e.forEach(t=>this.addFood(t))}addFood(e){if(!e)return;let t=this.foodPool.getFood(e);this._collision.addSnake([t]),this.foods.push(t),this.foodDic.set(e.unkey,t)}getFood(e){return this.foodDic.get(e)}eateFoodIds(e,t,i,s){ce.Debug==2&&e.setClientScore(i,s);var o=i-e.getScore(s);if(o&&e.showAddScore(o,s),e.isSelf&&t&&t.length){var a=Math.floor(Math.random()*3)+1;let u=`soundName_eat_food_${a}`;Ye[u]?Ye.playSoundByName(Ye[u]):console.warn(`音效 ${u} 不存在`)}}eateFood(e,t,i){t&&(t.setHaveEaten(!0,i),t.beEatten(e.getHead(i).node.x,e.getHead(i).node.y,i))}removeFood(e){this._collision.removeSnake([e]);let t=this.foods.indexOf(e);t!==-1&&this.foods.splice(t,1),this.foodDic.remove(e.foodObject.unkey),this.foodPool.returnFood(e)}removeAllFoods(){this._collision.removeSnake(this.foods),this.foods.forEach(e=>e.destroy()),this.foods=[],this.foodDic=new Ne,this.foodPool.clear()}getAllFoods(){return this.foods}clear(){this.container.removeSelf(),this.container=null,this.removeAllFoods(),this.foodPool.clear(),this.foodPool=null,ds._instance=null}restoreFoods(){this.removeAllFoods(),this.createFoodsByData()}createFoodsByData(){let e=ve.matchDto.item.length;for(var t=0;t<e;t++){var i=ve.matchDto.item[t];this.addFood(i)}}};ds._instance=null;var G_=ds,pt=G_.getInstance();var Kf=class extends Laya.Image{};var{regClass:DT}=Laya,Ci=class extends Kf{set dataSource(t){this.roomPlayerDto=t,this.roomPlayerDto&&(this.skin=re.getSnakeBodyIcon(this.roomPlayerDto.skin))}setRotation(t){this.rotation=t}setScale(t){let i=this.width,s=this.height,o=t*2/i,a=t*2/s;this.scaleX=o,this.scaleY=a}setAlpha(t){this.alpha=t}setGray(t){this.gray=t}getRadio(){return this.width*this.scaleX/2}onDisable(){this.setGray(!1),this.setAlpha(1),this.scale(1,1),Laya.Pool.recover(Ci.POOL_NAME,this)}};Ci.POOL_NAME="MatchSnakeBodySpr",Ci=P([DT("Aeyt_emSSaCC6Np5nR_evQ")],Ci);var Mi=class Mi{constructor(){}static trim(e,t=null){t||(t=[" ","\r",`
`,"	",String.fromCharCode(65279)]);var i,s,o;for(i=e,o=t.length,s=0;s<o;s++)i=Mi.getReplace(i,t[s],"");return i}static getReplace(e,t,i){if(!e)return"";var s;return s=e.replace(new RegExp(t,"g"),i),s}static isEmpty(e){return e.length<1?!0:Mi.emptyStrDic.hasOwnProperty(e)}static trimLeft(e){var t;t=0;var i;for(i=e.length;Mi.isEmpty(e.charAt(t))&&t<i;)t++;return t<i?e.substr(t):""}static trimRight(e){var t;for(t=e.length-1;Mi.isEmpty(e.charAt(t))&&t>=0;)t--;var i;return i=e.substring(0,t),t>=0?e.substring(0,t+1):""}static trimSide(e){var t;return t=Mi.trimLeft(e),t=Mi.trimRight(t),t}static shortStr(e,t){return e.length>t?e.substr(0,t)+"...":e}static shortHeroStr(e,t=10){return Mi.abbreviateString(e,t)}static abbreviateString(e,t=11){if(e.length<=t)return e;{let i=Math.floor((t-3)/2);return e.slice(0,i)+"..."+e.slice(-i)}}static caseInsensitiveSearchWithRegex(e,t){return new RegExp(t,"i").test(e)}static formatWalletAddress(e){let s="...";return e.length<=12+10?e:`${e.substring(0,12)}${s}${e.substring(e.length-10)}`}};Mi.ANONYMOUS_NAME="***",Mi.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"	":!0};var Kr=Mi;var $f=class extends Laya.Sprite{};var{regClass:OT}=Laya,Ri=class extends $f{constructor(){super();this.isMe=!1;this.inGround=!1;this.speedRate=1;this.moveSpeed=10;this._speed=10;this.biasSpeed=0;this._roleDirection=-1;this.lastX=0}get speed(){return this._speed}set speed(t){this._speed=t,this.biasSpeed=Math.round(this.speed*Math.sin(45*Math.PI/180))}get roleDirection(){return this._roleDirection}set roleDirection(t){t!==-4&&(this._roleDirection=t)}set dataSource(t){this.roomPlayerDto=t,this.roomPlayerDto&&(this.heroSk.skin=re.getSnakeHeadIcon(this.roomPlayerDto.skin),this.tf_name.text=Kr.abbreviateString(this.roomPlayerDto.userName))}set x(t){super.x=t}get x(){return super.x}set visible(t){super.visible=t,this.smallHeroImg&&(this.smallHeroImg.visible=t)}get visible(){return super.visible}set alpha(t){super.alpha=t,this.smallHeroImg&&(this.smallHeroImg.alpha=t)}onAwake(){}showDamageLabelDetailDelay(t,i,s){Laya.timer.once(i,this,this.showDamageLabelDetail,[t,s],!1)}showDamageLabelDetail(t,i){var s=Laya.Pool.getItemByCreateFun("damageNumber",re.damageNumPrefab.create,re.damageNumPrefab);s.init(t,i),this.addChild(s)}setRotation(t){this.heroSk.rotation=t}setScale(t){let i=this.heroSk.width,s=this.heroSk.height,o=t*2/i,a=t*2/s;this.heroSk.scaleX=o,this.heroSk.scaleY=a}setAlpha(t){this.heroSk.alpha=t}setGray(t){this.heroSk.gray=t}getRadio(){return this.heroSk.width*this.heroSk.scaleX/2}onDisable(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null,this.setGray(!1),this.setAlpha(1),this.scale(1,1),Laya.Pool.recover(Ri.POOL_NAME,this)}setClientScore(t){this.tf_pos.text=`${t}`}checkClientAndServerFrame(t,i){ce.Debug>=1&&ce.Debug==2&&Ve.checkClientAndServerFrame(Ve.clientConfirmedFrame,this.roomPlayerDto.roleId,t,i,this.owner.owner.speedRate,this.owner.owner.dir,this.owner.owner.aimDir)}setServerPosLog(t,i,s,o,a){ce.Debug==2&&console.log(Ce.GetLogTime+` ${this.roomPlayerDto.roleId} S：(${i.loc.x}, ${i.loc.y}, ${s}, dir：${o}, aimDir：${a}, ${t})`)}showLogInHead(t){this.tf_server_pos.text=`${t}`}destroy(t){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null,this.owner=null,this.roomPlayerDto=null,super.destroy(t)}};Ri.POOL_NAME="MatchSnakeSpr",Ri=P([OT("tWPXV-AGQQ2kGHES5HnI0w")],Ri);var ao=class ao{get gameMap(){return this._gameMap}set gameMap(e){this._gameMap=e}static getInstance(){return ao._instance||(ao._instance=new ao),ao._instance}constructor(){}init(){}destroy(){this._gameMap=null,this.img_smallMap=null}move(e){if(!e)return;let t=Q.mapSize,i=Laya.stage.width,s=Laya.stage.height;var o=0,a=0;e.x>i/2&&e.x<t.width-.5*i?o=-(e.x-i/2):e.x<=i/2?o=0:e.x>=t.width-.5*i&&(o=-(t.width-i)),e.y>s/2&&e.y<t.height-.5*s?a=-(e.y-s/2):e.y<=s/2?a=0:e.y>=t.height-.5*s&&(a=-(t.height-s));var u=Lt.distancePoint(o,a,this.gameMap.x,this.gameMap.y);u<200&&(o=Lt.lerp(this.gameMap.x,o,.1),a=Lt.lerp(this.gameMap.y,a,.1)),this.gameMap.pos(o,a)}};ao._instance=null;var V_=ao,Ar=V_.getInstance();var lo=class lo{constructor(e,t,i,s,o){this._manualVisible=!0;this.updateData(e,t,i,s,o)}updateData(e,t,i,s,o){if(this.pos=new ft(lo.INIT_POS,lo.INIT_POS),this.tag=s,this.owner=o,e===Q.snake.skinFlag.head){let a=Laya.Pool.getItemByCreateFun(Ri.POOL_NAME,re.roleAniPrefab.create,re.roleAniPrefab);a.owner=this,this.node=a,a.dataSource=s,this.owner.isConfirm||(this.smallHeroImg=new Laya.Image,this.updateSmallHeroImg(),Ar.img_smallMap.addChild(this.smallHeroImg))}else{let a=Laya.Pool.getItemByCreateFun(Ci.POOL_NAME,re.matchSnakeBodyPrefab.create,re.matchSnakeBodyPrefab);this.node=a,a.dataSource=s}this.skinFlag=e,this.node.tag=s,this.owner.isConfirm||t.addChild(this.node)}reset(e,t,i,s,o){this.updateData(e,t,i,s,o)}resetForPool(){this.destroy()}destroy(){ie.getInstance().removeBodySkin(this),Laya.Tween.clearAll(this.node),this.node.removeSelf(),this.smallHeroImg&&this.smallHeroImg.removeSelf()}updateSmallHeroImg(){if(this.smallHeroImg)if(this.owner.isSelf){this.smallHeroImg.skin="res/match2/img_dian1.png";var e=15,t=15;this.smallHeroImg.size(e,t),this.smallHeroImg.pivot(e/2,t/2)}else if(this.owner.tag.roleId==ie.getInstance().kingId){this.smallHeroImg.skin="res/match2/img_phb_icon2.png";var i=21,s=19;this.smallHeroImg.size(i,s),this.smallHeroImg.pivot(i/2,s/2)}else{this.smallHeroImg.skin="res/match2/img_dian2.png";var o=4,a=4;this.smallHeroImg.size(o,a),this.smallHeroImg.pivot(o/2,a/2)}}setPosition(e){if(this.smallHeroImg){var t=Lt.fromBigToSmall(e.x,e.y),i=t[0],s=t[1];this.smallHeroImg.pos(i,s)}var o,a;if(this.pos.x!=lo.INIT_POS||this.pos.y!=lo.INIT_POS)if(this.isHead){var u=Lt.distancePoint(e.x,e.y,this.node.x,this.node.y);let p=.3;o=Lt.lerp(this.node.x,e.x,p),a=Lt.lerp(this.node.y,e.y,p)}else o=Lt.lerp(this.node.x,e.x,.3),a=Lt.lerp(this.node.y,e.y,.3);else o=e.x,a=e.y;this.node.pos(o,a),this.pos.x=o,this.pos.y=a,this.skinFlag===Q.snake.skinFlag.head&&this.owner.isConfirm&&this.node.checkClientAndServerFrame(e.x,e.y),this.updateFinalVisibility()}getPosition(){return this.pos}setRotation(e){this.node.setRotation(e)}setLocalZOrder(e){this.node.zOrder=e}getDistant(e){let t=this.pos.x-e.pos.x,i=this.pos.y-e.pos.y;return Math.sqrt(t*t+i*i)}updateAlpha(e,t){let i=t==1?1:.75;this.node.setAlpha(i)}updateScale(e,t){let i=e*(1+.1*t);this.setScale(i)}setScale(e){this.node.setScale(e)}getRadio(){return this.node.getRadio()}setGray(e){this.node.setGray(e)}isVisible(){return this.node.visible}getBoundingBox(){let e;return this.isHead?e=this.owner.suctionRadius:e=this.getRadio(),new Laya.Rectangle(this.pos.x-e,this.pos.y-e,e*2,e*2)}getSkinFlag(){return this.skinFlag}checkCollision(e,t,i){let s=this.getPosition();return Pt.distance(s.x,s.y,e,t)<i+this.getRadio()}get isHead(){return this.skinFlag===Q.snake.skinFlag.head}setServerPosLog(e,t,i,s,o){this.skinFlag===Q.snake.skinFlag.head&&this.node.setServerPosLog(e,t,i,s,o)}showLogInHead(e){this.skinFlag===Q.snake.skinFlag.head&&this.node.showLogInHead(e)}setClientScore(e){this.skinFlag===Q.snake.skinFlag.head&&this.node.setClientScore(e)}setVisible(e){this._manualVisible=e,this.updateFinalVisibility(),this.smallHeroImg&&(this.smallHeroImg.visible=e)}updateFinalVisibility(){let e=this.checkInScreen(),t=this._manualVisible&&e;this.node.visible=t}checkInScreen(){let e=Ar.gameMap;if(!e)return!1;let t=-e.x,i=-e.y,s=this.pos.x-t,o=this.pos.y-i,a=Laya.stage.width,u=Laya.stage.height,p=this.isHead?this.owner.suctionRadius:this.getRadio()*this.node.scaleX,m=p*1.5;return s+p+m>0&&s-p-m<a&&o+p+m>0&&o-p-m<u}};lo.INIT_POS=-1e6;var rn=lo;var co=class{static checkCollisions(e,t,i,s){var o=!1;if(e.getIsSend(o))return;let a=Q.mapSize;if(e&&e.tag){let O=e.getHeadCollisionBounds(o);if(O&&(O.x<a.offsetX||O.x+O.width>a.width-a.offsetX||O.y<a.offsetY||O.y+O.height>a.height-a.offsetY)){if(e.isAlive(o)){e.readyDie();var u=e.getToServerHead(o),p=v.snake.socket.MessageType.MSG_PLAYER_COLLISION,m=v.snake.socket.CS_PLAYER_COLLISION.fromObject({roleId:e.tag.roleId,head:u,frame:Ve.getCurrentFrame(o),body:!1});st.sendData(p,m),e.setIsSend(!0,o)}return}if(e.isAlive(o)&&!e.isStop()){if(!e.getHeadCollisionBounds(o))return;if(s){let q=pt.getAllFoods();var h=[],f=0;if(q.forEach(H=>{if(!H.getHaveEaten(o)&&e.checkFoodCollision(H,o)){console.log("客户端先吃：",H.foodObject.unkey,o),pt.eateFood(e,H,o),h.push(H.foodObject.unkey);var K=H.getScore();f+=K}}),h&&h.length>0){var g=new v.snake.socket.SC_EAT_FOOD;g.fid=h,g.score=f;var b=e.getScore(o)+f,y=e.getSkinLength(o),k=e.tag.snakeId,I=ie.getInstance().countSnakeLen(k,y,b,e.intervalBoneToDrawSkin(o));if(g.lenght=I,g.roleId=e.tag.roleId,g.score=b,g.remain=[],ie.getInstance().eatFoodAndAddScore(g,o),ce.Debug==2&&console.log("吃豆人吃到了食物","roleId:"+e.tag.roleId,"foodIds:["+h+"], totalScore:"+b,"newLen:"+I,"currentFrame:"+Ve.currentFrame,"isConfirm:"+o),!o){var A=e.tag.roleId,u=e.getToServerHead(o),p=v.snake.socket.MessageType.MSG_EAT_FOOD,M=v.snake.socket.CS_EAT_FOOD.fromObject({roleId:A,fid:h,head:u,frame:Ve.currentFrame});st.sendData(p,M)}}}}ie.getInstance().getBodySkinsWithOutOne(e,o).forEach($=>{if($.owner.owner!==e&&e.checkBodyCollision($,o))if(!e.isInvincible(o)&&!$.owner.owner.isInvincible(o)){if(e.isAlive(o)&&$.owner.owner.isAlive(o)&&!e.isReadyDie&&!$.owner.owner.isReadyDie){var q=!1,H=!$.isHead;if((H||e.len(o)<$.owner.owner.len(o)||e.len(o)==$.owner.owner.len(o)&&e.tag.enterTime>=e.tag.enterTime)&&(q=!0),q){e.readyDie();var H=!$.isHead,K=$.owner.tag.roleId,W=e.getToServerHead(o),he=v.snake.socket.MessageType.MSG_PLAYER_COLLISION,xe=v.snake.socket.CS_PLAYER_COLLISION.fromObject({roleId:e.tag.roleId,target:K,head:W,frame:Ve.getCurrentFrame(o),body:H});st.sendData(he,xe),e.setIsSend(!0,o)}}}else console.log(e.tag.roleId+" 或者 "+$.owner.tag.roleId+" 处于无敌状态！")})}}static checkCollisionsWithConfirm(e,t,i,s){var o=!0;if(e.getIsSend(o))return;let a=Q.mapSize;if(e&&e.tag&&e.isAlive(o)&&!e.isStop()){if(!e.getHeadCollisionBounds(o))return;if(s){let O=pt.getAllFoods();var u=[],p=0;if(O.forEach(G=>{if(!G.getHaveEaten(o)&&e.checkFoodCollision(G,o)){console.log("客户端先吃：",G.foodObject.unkey,o),pt.eateFood(e,G,o),u.push(G.foodObject.unkey);var $=G.getScore();p+=$}}),u&&u.length>0){var m=new v.snake.socket.SC_EAT_FOOD;m.fid=u,m.score=p;var h=e.getScore(o)+p,f=e.getSkinLength(o),g=e.tag.snakeId,b=ie.getInstance().countSnakeLen(g,f,h,e.intervalBoneToDrawSkin(o));if(m.lenght=b,m.roleId=e.tag.roleId,m.score=h,m.remain=[],ie.getInstance().eatFoodAndAddScore(m,o),ce.Debug==2&&console.log("吃豆人吃到了食物","roleId:"+e.tag.roleId,"foodIds:["+u+"], totalScore:"+h,"newLen:"+b,"currentFrame:"+Ve.currentFrame,"isConfirm:"+o),!o){var y=e.tag.roleId,k=e.getToServerHead(o),I=v.snake.socket.MessageType.MSG_EAT_FOOD,A=v.snake.socket.CS_EAT_FOOD.fromObject({roleId:y,fid:u,head:k,frame:Ve.currentFrame});st.sendData(I,A)}}}}}static checkCollisionsWithPve(e,t,i,s){var o=!1;let a=Q.mapSize;if(e&&e.tag){ce.Debug==2&&console.log("碰撞检测",e.tag.roleId);let q=e.getHeadCollisionBounds(o);if(q){var u=a.offsetX,p=a.offsetY;if(e.isAi&&(u+=50,p+=50),q.x<u||q.x+q.width>a.width-u||q.y<p||q.y+q.height>a.height-p){if(e.isAlive(o))if(e.isAi){var m=ft.create(a.width/2,a.height/2);e.goTargetPos(m)}else e.pveDie();return}}if(e.isAlive(o)&&!e.isStop()){if(!e.getHeadCollisionBounds(o))return;if(s){let W=i.retrieve(e.getHead(o)).filter(he=>he instanceof tn);var h=[],f=[],g=0;if(W.forEach(he=>{if(f.push(he.foodObject.unkey),!he.getHaveEaten(o)&&e.checkFoodCollision(he,o)){pt.eateFood(e,he,o),h.push(he.foodObject.unkey);var xe=he.getScore();g+=xe}}),h&&h.length>0){var b=new v.snake.socket.SC_EAT_FOOD;b.fid=h,b.score=g;var y=e.getScore(o)+g,k=e.getSkinLength(o),I=e.tag.snakeId,A=ie.getInstance().countSnakeLen(I,k,y,e.intervalBoneToDrawSkin(o));b.lenght=A,b.roleId=e.tag.roleId,b.score=y,b.remain=[],ie.getInstance().eatFoodAndAddScore(b,o)}}}let H=i.retrieve(e.getHead(o)).filter(K=>K instanceof rn);for(let K of H)if(K.owner.owner!==e&&e.checkBodyCollision(K,o))if(!e.isInvincible(o)&&!K.owner.owner.isInvincible(o)){if(e.isAlive(o)&&K.owner.owner.isAlive(o)&&!e.isReadyDie&&!K.owner.owner.isReadyDie){var M=!1,O=!K.isHead;if((O||e.len(o)<K.owner.owner.len(o)||e.len(o)==K.owner.owner.len(o)&&e.tag.enterTime>=K.owner.tag.enterTime)&&(M=!0),M){e.pveDie(),K.owner.owner.addKill(1);var G=K.owner.owner,$=ee.getSheetDataByMultiKey(ee.m_dicSnakeLengthRules,[G.tag.snakeId,G.getSkinLength(!1)]),g=Math.ceil($.consumePoints/3),b=new v.snake.socket.SC_EAT_FOOD;b.fid=[],b.score=g;var y=G.getScore(o)+g,k=G.getSkinLength(o),I=G.tag.snakeId,A=ie.getInstance().countSnakeLen(I,k,y,G.intervalBoneToDrawSkin(o));b.lenght=A,b.roleId=G.tag.roleId,b.score=y,b.remain=[],ie.getInstance().eatFoodAndAddScore(b,o);break}}}else console.log(e.tag.roleId+" 或者 "+K.owner.tag.roleId+" 处于无敌状态！")}}};var qf=class{constructor(e){this.state="searching";this.target=null;this.dangerDistance=100;this.viewDistance=300;this.snake=e,this.collision=ci.getInstance(null)}update(){if(!this.snake.isAlive(!1))return;let e=this.findNearestFood(),t=this.findNearestThreat();switch(this.updateState(e,t),this.state){case"searching":this.searchBehavior(e);break;case"pursuing":this.pursueBehavior();break;case"escaping":this.escapeBehavior(t);break}}updateState(e,t){t&&this.isInDangerRange(t)?this.state="escaping":e&&this.target?this.state="pursuing":this.state="searching"}findNearestFood(){let e=this.snake.getHead(!1),t=this.collision.retrieve(e).filter(a=>a instanceof tn),i=null,s=this.viewDistance,o=this.snake.getHeadPosition(!1);for(let a of t){let u=Pt.distance(o.x,o.y,a.getPosition().x,a.getPosition().y);u<s&&(s=u,i=a)}return i}findNearestThreat(){let e=this.snake.getHead(!1),t=this.collision.retrieve(e).filter(a=>a instanceof rn&&a.getSkinFlag()===Q.snake.skinFlag.head).map(a=>a.owner.owner).filter(a=>a!==this.snake&&a.isAlive(!1)&&a.getLength(!1)>=this.snake.getLength(!1)),i=null,s=this.viewDistance,o=this.snake.getHeadPosition(!1);for(let a of t){let u=Pt.distance(o.x,o.y,a.getHeadPosition(!1).x,a.getHeadPosition(!1).y);u<s&&(s=u,i=a)}return i}searchBehavior(e){e?(this.target=e.getPosition(),this.state="pursuing"):(!this.target||Pt.getVecDistance(this.snake.getHeadPosition(!1),this.target)<50)&&(this.target=new ft(Pt.randomRange(0,Q.mapSize.width),Pt.randomRange(0,Q.mapSize.height)))}goTargetPos(e){this.target=e;var i=this.getDirectionToTarget(this.target).getRotation();this.snake.rorate(i,!1),this.state="pursuing"}pursueBehavior(){if(this.target){if(Pt.getVecDistance(this.snake.getHeadPosition(!1),this.target)<this.snake.getRadio(!1)*4)return;var e=this.getDirectionToTarget(this.target).getRotation();this.snake.rorate(e,!1)}}escapeBehavior(e){if(e){let i=this.getDirectionToTarget(e.getHeadPosition(!1));i.x*=-1,i.y*=-1;var t=i.getRotation();this.snake.rorate(t,!1)}else{let s=this.snake.getCurDir()+180;s=Lt.normalizeAngle(s),this.snake.rorate(s,!1)}}getDirectionToTarget(e){let t=this.snake.getHeadPosition(!1),i=e.x-t.x,s=e.y-t.y,o=new ft(i,s);if(o.length()<.1){var a=this.snake.getCurDir(),u=Lt.getAngleToVec(a);return u}return o.normalize(),o}isInDangerRange(e){return Pt.getVecDistance(this.snake.getHeadPosition(!1),e.getHeadPosition(!1))<this.dangerDistance}destroy(){this.snake=null,this.collision=null,this.target=null}};var $r=class r extends Laya.Sprite{constructor(){super(...arguments);this.collidables=[];this.isVisible=!1}static getInstance(){return r._instance||(r._instance=new r,r._instance.zOrder=9999,r._instance.mouseEnabled=!1),r._instance}toggleVisible(){this.isVisible=!this.isVisible,console.log("DebugLayer.toggleVisible",this.isVisible),this.graphics.clear()}updateCollidables(t){this.collidables=t}clearDraw(){this.graphics.clear(),this.graphics.alpha(.5)}draw(){this.isVisible&&(this.graphics.clear(),this.graphics.alpha(.5),this.collidables.forEach(t=>{t instanceof rn?this.drawSnakeBody(t):t instanceof tn&&this.drawFood(t)}))}drawSnakeBody(t){let i=t.getPosition(),s=t.getRadio();this.graphics.drawCircle(i.x,i.y,s,"#FF0000",2,.5)}drawFood(t){let i=t.getBoundingBox();this.graphics.drawRect(i.x,i.y,i.width,i.height,"#00FF00",2,.5)}};var uo=class uo{static getInstance(){return uo.instance||(uo.instance=new uo),uo.instance}init(e){if(!e)throw new Error("gameLayer Must Be Not Null");ie.getInstance().init(),pt.init();let t=ie.getInstance().container,i=pt.container,s=new Laya.Sprite;e.addChild(i),e.addChild(t),e.addChild(s),s.addChild($r.getInstance()),pt.init()}createData(){ie.getInstance().createSnakes(),pt.createFoodsByData()}startGame(){qr.start()}clearTimer(){}endTimer(){qr.end()}update(e,t,i){if(ie.getInstance().updateSnakes(Laya.timer.delta,t,i),!t&&(Ar.move(ie.getInstance().getSelfSnakePos()),ce.needDraw)){let s=$r.getInstance();s&&(s.clearDraw(),ci.getInstance(null).drawDebug(s.graphics))}}clear(){this.clearTimer()}};uo.instance=null;var W_=uo,hs=W_.getInstance();var K_=class r{constructor(){this._frameInterval=33;this._currentFrame=0;this.isStart=!1}static getInstance(){return r._instance||(r._instance=new r),r._instance}init(){this.stop(),this._currentFrame=0}start(){Laya.timer.loop(this._frameInterval,this,this.update)}stop(){Laya.timer.clear(this,this.update)}end(){this.stop(),this.isStart=!1}update(){this._currentFrame++,this.executeFrame(this._currentFrame)}executeFrame(e,t=!0){ie.getInstance().selfSnake&&ie.getInstance().selfSnake.tag==null||(hs.update(e,!1,t),pt.update(Laya.timer.delta),ie.getInstance().update(Laya.timer.delta))}get currentFrame(){return this._currentFrame}sendAiEnter(){var e=v.snake.socket.MessageType.MSG_AI_ENTER;Me.send(e,null)}sendAiEnd(e,t){var i=v.snake.socket.MessageType.MSG_AI_END,s=v.snake.socket.CS_AI_END.fromObject({kills:e,score:t});Me.send(i,s)}onPveEnd(){var e=new v.snake.socket.SC_BATTLE_END,t=ie.getInstance().selfSnake;e.res=!1,e.roleId=t.tag.roleId,e.score=t.clientSnake.score,e.kills=t.tag.kills,e.length=t.clientSnake.getSkinLength(),e.alive=Q.snake.battleCd/1e3-ve.matchCoolDownTime,e.rank=t.rankNum,e.items=[],console.log("onPveEnd",e),ve.onAiSetMatchEnd(e)}},qr=K_.getInstance();var Va=class{constructor(e,t,i,s){this.clientFrame=1;this.serverFrame=1;this.dFrame=0;this.oprIndex=-1;this.serverHeadPoss=[];this.ringCenter=new ft;this.baseRingSize=100;this.lastRingUpdate=0;this.lastSendFrame=-1;this.lastDir=-1;this.lastSendDir=-1;this.isConfirm=e,this.pnl=t,this.owner=s,this.bodySkinPool=ie.getInstance().getBodySkinPool(),this.updateData(i),this.showLogInHead(e+"")}updateData(e){if(this.skins)for(let t=0;t<this.skins.length;t++){let i=this.skins[t];i&&this.bodySkinPool.returnBodySkin(i)}this.skins=[],this._initData(e),this._initSnake(),this._updateSkinRadio()}_initData(e){this.snakeItem=ee.m_dicSnakes.get(e.snakeId),this.radio=this.snakeItem.bodyRadius,this.collisionHeadRadius=this.snakeItem.collisionHeadRadius,this.suctionRadius=this.snakeItem.suctionRadius,this.speed=this.snakeItem.baseSpeed,this.tag=e||null,this.score=e.score,this.speedRate=e.speed;var t=e.direction;this.dir=t;var i=e.aimDir;this.aimDir=i,this.rotateSpeed=Q.snake.defaultRotateSpeed,this.len=e.snake.length,this.intervalBoneToDrawSkin=this.snakeItem.intervalBoneToDrawSkin,this.skins=[],this.bones=[],this.alive=!0;var s=e.wdTime-e.enterTime;this.defaultInvincibleTime=Date.now()+s,this.isInvincible=s>0;let o=Math.random()+.5;o=o>1?o-.5:o;for(let a=0;a<this.len;a++){let u=e.snake[a].loc,p=ft.create(u.x,u.y);this.bones[a]=p}this.isConfirm||this.bodyRing||(this.bodyRing=new Laya.Image,this.bodyRing.skin=Q.res.snakeRingImg,this.bodyRing.width=this.bodyRing.height=this.baseRingSize,this.bodyRing.anchorX=this.bodyRing.anchorY=.5,this.bodyRing.visible=!1,this.pnl.addChild(this.bodyRing))}_updateBodyRing(){if(this.lastRingUpdate=Date.now(),!!this.isInvincible&&this.bodyRing){var e=this.getHeadPosition();this.bodyRing.pos(e.x,e.y)}}_initSnake(){console.log(Ce.GetLogTime,"初始化蛇的皮肤","isConfirm: "+this.isConfirm);let e=this.getSkinLength();for(let t=0;t<e;t++){t===0?this.skins[t]=this.bodySkinPool.getBodySkin(Q.snake.skinFlag.head,this.color,this.tag,this):this.skins[t]=this.bodySkinPool.getBodySkin(Q.snake.skinFlag.body,this.color,this.tag,this);let i=t*this.intervalBoneToDrawSkin;if(this.bones[i]){this.skins[t].setPosition(this.bones[i]),ie.getInstance().addBodySkin(this.skins[t]),this.skins[t].setLocalZOrder(-(t+1));let s;i+1<this.bones.length?s=this.bones[i+1]:i-1>=0?s=this.bones[i-1]:s=this.bones[i];let o=this.bones[i].getRotationTo(s),a=Q.snake.defaultRotation-o;this.skins[t].setRotation(a),this.skins[t].setVisible(!0)}else console.error("_initSnake error",e,t),this.skins[t].setVisible(!1)}}move(e,t){if(this.alive&&!this.owner.stop){for(let u=0;u<this.speedRate;u++){let p=this.aimDir-this.dir,m=this.rotateSpeed*Q.snake.defaultMoveInterval;if(Math.abs(p)<m)this.dir=this.aimDir;else{p=(p+360)%360,p>180&&(p-=360);var i=Math.abs(p)<m?p:m*(p>0?1:-1);this.dir+=i,this.dir>=360&&(this.dir-=360),this.dir<0&&(this.dir+=360)}let h=Lt.getAngleToVec(this.dir);var s=this.bones[0].add(h.mul(this.speed)),o=10,a=Q.mapSize;if(s.x<a.offsetX-o||s.x>a.width-a.offsetX+o||s.y<a.offsetY-o||s.y>a.height-a.offsetY+o)return;this.bones[0].assign(s);for(let f=1;f<this.bones.length;f++){let g=this.bones[f-1],b=this.bones[f],y=.6,k=b.add(g.sub(b).mul(y));this.bones[f].x=k.x,this.bones[f].y=k.y}u===this.speedRate-1&&this._processGrowth(),t||(this._moveBody(),this._updateSkinRadio())}this.isInvincible&&(this.bodyRing&&(this.bodyRing.visible||(this.bodyRing.visible=!0),this._updateBodyRing()),Date.now()>this.defaultInvincibleTime&&(this.isInvincible=!1,this.bodyRing&&(this.bodyRing.visible=!1)))}}getCurDir(){return this.dir}getAimDir(){return this.aimDir}rorateReadySend(){this.isSelf&&this.lastSendFrame!=Ve.currentFrame&&(this.rorateSend(),this.lastSendFrame=Ve.currentFrame)}showServerPos(e,t,i,s,o){this.getHead().setServerPosLog(e,t,i,s,o)}showLogInHead(e){this.getHead()&&this.getHead().showLogInHead(e)}setClientScore(e){this.getHead()&&this.getHead().setClientScore(e)}setLength(e){this.len=e}setScore(e){this.score=e}_processGrowth(){var e=this.len,t=this.bones.length;if(e>t){let m=this.bones[this.bones.length-1];for(var i,s=t+1;s<=e;s++)i=ft.create(m.x,m.y),this.bones.push(i)}else e<t&&this.bones.splice(e);var o=this.getSkinLength(),a=this.skins.length;if(o>a)for(var u=a+1;u<=o;u++){let m=(u-1)*this.intervalBoneToDrawSkin,h=this.bodySkinPool.getBodySkin(Q.snake.skinFlag.body,this.color,this.tag,this);h.setPosition(this.bones[m]),ie.getInstance().addBodySkin(h),h.setLocalZOrder(-(u+1));let f=this.bones[m],g=this.bones[m].getRotationTo(f);h.setRotation(Q.snake.defaultRotation-g),this.skins.push(h)}else if(o<a){for(var u=o+1;u<=a;u++){var p=this.skins[u-1];this.bodySkinPool.returnBodySkin(p)}this.skins.splice(o)}this._updateSkinRadio()}_moveBody(){let e=this.getSkinLength();for(let t=0;t<e;t++){let i=t*this.intervalBoneToDrawSkin;if(this.skins[t])if(this.bones[i]){this.skins[t].setPosition(this.bones[i]);let s;i+1<this.bones.length?s=this.bones[i+1]:i-1>=0?s=this.bones[i-1]:s=this.bones[i];let o=this.bones[i].getRotationTo(s);this.skins[t].setRotation(Q.snake.defaultRotation-o),this.skins[t].setVisible(!0)}else this.skins[t].setVisible(!1)}}_updateSkinRadio(){let e=this.getSkinLength();for(let t=0;t<e;t++)this.skins[t]&&this.skins[t].updateAlpha(this.radio,this.speedRate)}showAddScore(e){this.isSelf&&this.getHead().node.showDamageLabelDetailDelay(e,100,!1)}get isSelf(){return this.tag&&this.tag.roleId==j.playerDto.pid}getHeadCollisionBounds(){let e=this.collisionHeadRadius,t=this.getHeadPosition();return t?new Laya.Rectangle(t.x-e,t.y-e,e*2,e*2):null}checkBodyCollision(e){let t=this.getHeadPosition();return t?e.checkCollision(t.x,t.y,this.collisionHeadRadius):!1}checkFoodCollision(e,t){let i=this.getHeadPosition();return i?e.checkCollision(i.x,i.y,this.suctionRadius,t):!1}rorateControl(e,t=!1){this.lastDir!=e&&(this.lastDir=e)}rorateSend(){var e=j.playerDto.pid,t=this.getToServerHead(),i=v.snake.socket.MessageType.MSG_PLAYER_OPR,s=v.snake.socket.CS_PLAYER_OPR.fromObject({roleId:e,opr:1,value:this.lastDir,head:t,frame:Ve.currentFrame,curDir:this.getCurDir(),aimDir:this.getAimDir(),snake:[]});st.sendData(i,s),this.lastSendDir=this.lastDir}rorate(e,t=!1){this.aimDir=e}updateSpeedRate(e){this.speedRate=e}getHeadPosition(){return this.getHead()?this.getHead().getPosition():null}getHead(){return this.skins?this.skins[0]:null}getToServerHead(){var e=new v.snake.socket.SnakeObject,t=new v.snake.socket.PointObject;return t.x=this.bones[0].x,t.y=this.bones[0].y,e.loc=t,e}updateHead106(e,t,i,s,o,a){this.oprIndex=a}predictSnakePosition(e){if(e>0)for(var t=0;t<e;t++)this.move(0,!1)}shine(e){let t=this.skins.length;for(let i=0;i<t;i++)this.skins[i].setVisible(!this.skins[i].isVisible())}show(){let e=this.skins.length;for(let t=0;t<e;t++)this.skins[t].setVisible(!0)}getSkins(){return this.skins}getRadio(){return this.radio}setAlive(e){this.alive=e}setGray(e){for(let t=0;t<this.skins.length;t++)this.skins[t].setGray(e)}isAlive(){return this.alive}getLength(){return this.len}getScore(){return this.score}getSkinLength(){return Math.floor(this.len/this.intervalBoneToDrawSkin)}recordBones(){var e=[];for(let t=0;t<this.bones.length;t++){let i=this.bones[t];e.push(i.clone())}return e}getState(){return{dir:this.dir,aimDir:this.aimDir,bones:this.recordBones(),speedRate:this.speedRate,oprIndex:this.oprIndex,alive:this.isAlive()}}restoreState(e){this.dir=e.dir,this.aimDir=e.aimDir,this.bones=this.deepCopyBones(e.bones),this.speedRate=e.speedRate,this.oprIndex=e.oprIndex,this.alive=e.alive}deepCopyBones(e){var t=[];for(let i=0;i<e.length;i++){let s=e[i];t.push(s.clone())}return t}getDoublePointsProbability(){return this.snakeItem.doublePointsProbability}adjustVisualState(e){this.dir=e.dir,this.aimDir=e.aimDir,this.bones=this.deepCopyBones(e.bones),this.speedRate=e.speedRate,this.oprIndex=e.oprIndex,this.alive=e.alive,this.len=e.len,this.score=e.score}destroy(){Laya.timer.clearAll(this),this.isSelf&&(ie.getInstance().skinLen=this.getSkinLength(),ie.getInstance().kills=this.tag.kills),this.skins.forEach(e=>this.bodySkinPool.returnBodySkin(e)),this.skins=[],this.bodyRing&&this.bodyRing.removeSelf(),this.bodyRing=null,this.snakeItem=null,this.tag=null,this.owner=null}};var po=class{constructor(e,t){this.stop=!1;this.isSend=!1;this.isReadyDie=!1;this.isStartShineed=!1;this.isShineed=!1;this.isConfirmDied=!1;this.clientSnake=new Va(!1,e,t,this),ve.matchDto.arenaType!=Oe.ARENA_TYPE_PVE&&(this.serverSnake=new Va(!0,e,t,this)),this.tag=t}updateData(e){this.clientSnake.updateData(e),this.serverSnake.updateData(e),this.tag=e}getCurDir(){return this.clientSnake.dir}getAimDir(){return this.clientSnake.aimDir}getHead(e){return e?this.serverSnake.getHead():this.clientSnake.getHead()}showLogInHead(e,t){t?this.serverSnake.showLogInHead(e):this.clientSnake.showLogInHead(e)}setClientScore(e,t){t?this.serverSnake.setClientScore(e):this.clientSnake.setClientScore(e)}get isSelf(){return this.tag&&this.tag.roleId==j.playerDto.pid}move(e,t){t?this.serverSnake.move(e,!1):(this.clientSnake.move(e,!1),this.updateOther())}setLength(e,t){t?this.serverSnake.setLength(e):this.clientSnake.setLength(e)}setScore(e,t){t?this.serverSnake.setScore(e):this.clientSnake.setScore(e)}showAddScore(e,t){t?this.serverSnake.showAddScore(e):this.clientSnake.showAddScore(e)}rorateControl(e,t=!1){this.clientSnake&&this.clientSnake.rorateControl(e,t)}rorateSend(){this.clientSnake.rorateSend()}rorate(e,t){t?this.serverSnake.rorate(e):this.clientSnake.rorate(e)}updateSpeedRate(e,t){t?this.serverSnake.updateSpeedRate(e):this.clientSnake.updateSpeedRate(e)}getToServerHead(e){return e?this.serverSnake.getToServerHead():this.clientSnake.getToServerHead()}getHeadPosition(e){return e?this.serverSnake.getHeadPosition():this.clientSnake.getHeadPosition()}addKill(e){if(this.tag&&(this.tag.kills+=e),this.isSelf){var t=this.tag.kills>5?5:this.tag.kills;let i=`soundName_kill_${t}`;Ye[i]?Ye.playSoundByName(Ye[i]):console.warn(`音效 ${i} 不存在`),this.getHead(!1).node.showDamageLabelDetailDelay(e,100,!0)}}readyDie(){console.log(`Snake ${this.tag.roleId} `,"readyDie",this.isStartShineed),!this.isStartShineed&&(this.isStartShineed=!0,this.isReadyDie=!0,this.isShineed=!1,this.stop=!0,this.startShine())}startShine(){console.log(`Snake ${this.tag.roleId} `,"startShine"),Laya.timer.clear(this,this.shine),Laya.timer.frameLoop(5,this,this.shine),Laya.timer.once(2e3,this,this.haveShined)}shine(e){this.clientSnake.shine(e),this.serverSnake&&this.serverSnake.shine(e)}haveShined(){console.log(`Snake ${this.tag.roleId} `,"haveShined"),this.isStartShineed=!1,this.isShineed=!0,this.stopShine(),this.isConfirmDied&&this.die()}stopShine(){console.log(`Snake ${this.tag.roleId} `,"stopShine"),this.clientSnake.show(),this.serverSnake&&this.serverSnake.show(),Laya.timer.clear(this,this.shine)}confirmDie(){console.log(`Snake ${this.tag.roleId} `,"confirmDie","this.isShineed: "+this.isShineed),this.isShineed?(this.stopShine(),this.die()):(this.isConfirmDied=!0,this.clientSnake.setAlive(!1),this.serverSnake&&this.serverSnake.setAlive(!1))}die(){console.log(`Snake ${this.tag.roleId} has died.`),this.clientSnake.setAlive(!1),this.serverSnake&&this.serverSnake.setAlive(!1),this.isSelf?(this.clientSnake.setGray(!0),this.serverSnake&&this.serverSnake.setGray(!0),Ye.playSoundByName(Ye.soundName_kill_die),Laya.timer.once(1e3,this,this.goMatchEnd)):ie.getInstance().removeSnake(this.tag.roleId)}goMatchEnd(){ve.matchDto.arenaType==Oe.ARENA_TYPE_PVE?qr.onPveEnd():(ie.getInstance().removeSnake(this.tag.roleId),ve.onMockMatchEnd())}isAlive(e){return e?this.serverSnake.isAlive():this.clientSnake.isAlive()}isStop(){return this.tag?this.stop:!0}getSkinLength(e){return e?this.serverSnake.getSkinLength():this.clientSnake.getSkinLength()}getScore(e){return e?this.serverSnake.getScore():this.clientSnake.getScore()}getHeadCollisionBounds(e){return e?this.serverSnake.getHeadCollisionBounds():this.clientSnake.getHeadCollisionBounds()}isInvincible(e){return e?this.serverSnake.isInvincible:this.clientSnake.isInvincible}len(e){return e?this.serverSnake.len:this.clientSnake.len}intervalBoneToDrawSkin(e){return e?this.serverSnake.intervalBoneToDrawSkin:this.clientSnake.intervalBoneToDrawSkin}getSkins(e){return e?this.serverSnake.getSkins():this.clientSnake.getSkins()}getLength(e){return e?this.serverSnake.getLength():this.clientSnake.getLength()}getRadio(e){return e?this.serverSnake.getRadio():this.clientSnake.getRadio()}checkFoodCollision(e,t){return t?this.serverSnake.checkFoodCollision(e,t):this.clientSnake.checkFoodCollision(e,t)}getIsSend(e){return this.isSend}setIsSend(e,t){this.isSend=e}checkBodyCollision(e,t){return t?this.serverSnake.checkBodyCollision(e):this.clientSnake.checkBodyCollision(e)}updateOther(){}destroy(){console.log(`Snake ${this.tag.roleId} has been destroyed.`),Laya.timer.clearAll(this),this.clientSnake.destroy(),this.serverSnake&&this.serverSnake.destroy(),this.clientSnake=null,this.serverSnake=null,this.tag=null}};var Eu=class extends po{constructor(t,i){super(t,i);this.isAi=!1;this.tag.roleId&&this.tag.roleId.startsWith(Q.snake.aiPrefix)&&(this.aiController=new qf(this),this.isAi=!0)}pveDie(){this.isSelf?(this.isConfirmDied=!0,this.readyDie()):(this.toFood(),this.die())}toFood(){var t=this.getSkins(!1);for(let i=4;i<t.length;i+=5){let s=t[i],o=(Math.random()-.5)*20,a=(Math.random()-.5)*20,u=s.getPosition().x+o,p=s.getPosition().y+a;pt.addFoodByPosWithDie(u,p)}}goMatchEnd(){qr.onPveEnd()}updateOther(){this.aiController&&this.aiController.update()}goTargetPos(t){this.aiController&&this.aiController.goTargetPos(t)}destroy(){super.destroy(),this.aiController&&(this.aiController.destroy(),this.aiController=null)}};var Yf=class{constructor(e){this.pool=[];this.pnl=e}getBodySkin(e,t,i,s){if(this.pool.length>0){let o=this.pool.pop();return o.reset(e,this.pnl,t,i,s),o}else return new rn(e,this.pnl,t,i,s)}returnBodySkin(e){e.resetForPool(),this.pool.push(e)}clear(){this.pool.forEach(e=>e.destroy()),this.pool=[]}};var Qf=class{constructor(){this.selfSnake=null;this.isControl=!1}init(){this.container||(this.container=new Laya.Sprite),this.matchHeroSprDic=new Ne(!0),this.selfSnake=null,this.collision=ci.getInstance(null),this.bodySkinPool=new Yf(this.container)}updateSnake(e,t){return console.log("updateSnake: "+t.roleId,j.playerDto.pid),e.updateData(t),j.playerDto.pid==t.roleId&&(this.selfSnake=e),e}addBodySkin(e){this.collision.addBodySkin(e)}removeBodySkin(e){this.collision.removeBodySkin(e)}updateSnakes(e,t,i){this.moveSnakes(e,t),this.collision.refresh(),this.checkAllSnakeCollision(t,i)}getSnake(e){return this.matchHeroSprDic.get(e)}removeSnake(e){var t=this.matchHeroSprDic.get(e);t.destroy(),this.matchHeroSprDic.remove(e)}removeAllSnakes(){var e=this.matchHeroSprDic.getValues();for(let t of e)t.destroy();this.matchHeroSprDic=new Ne(!0)}moveSnakes(e,t){var i=this.matchHeroSprDic.getValues();for(let s of i)s.isAlive(t)&&s.move(e,t)}getSelfSnakePos(){return this.selfSnake?this.selfSnake.getHeadPosition(!1):null}createSnakes(){this.matchHeroSprDic=new Ne(!0);let e=ve.matchDto.members.length;for(var t=0;t<e;t++)var i=ve.matchDto.members[t],s=this.createSnake(i)}newAddSnake(e){var t=this.matchHeroSprDic.get(e.roleId);t?this.updateSnake(t,e):t=this.createSnake(e)}restoreSnakes(){this.removeAllSnakes(),this.matchHeroSprDic=new Ne(!0);let e=ve.matchDto.members.length;for(var t=0;t<e;t++){var i=ve.matchDto.members[t];try{var s=this.createSnake(i)}catch(o){console.warn(o)}}}getBodySkinsWithOutOne(e,t){var i=[],s=this.matchHeroSprDic.getValues();for(let a of s){var o=a;o.tag&&e.tag.roleId!=o.tag.roleId&&(i=i.concat(o.getSkins(t)))}return i}getBodySkinPool(){return this.bodySkinPool}showLogInHead(e,t){this.selfSnake&&this.selfSnake.tag&&this.selfSnake.showLogInHead(e,t)}countSnakeLen(e,t,i,s){var o=t+1,a=ee.getSheetDataByMultiKey(ee.m_dicSnakeLengthRules,[e,t+1]);return a&&i>=a.accumulatePoints?this.countSnakeLen(e,o,i,s):t*s}getRoleById(e){return this.matchHeroSprDic?this.matchHeroSprDic.get(e):null}setMyHeroDirection(e){this.selfSnake&&(e!=-4?(this.rorate(Q.snakeType.SELF,e),this.isControl=!0):this.isControl=!1)}eatFoodAndAddScore(e,t){var i=e.fid,s=e.score,o=e.lenght,a=e.roleId,u=this.getRoleById(a);u&&(u.setLength(o,t),pt.eateFoodIds(u,i,s,t),u.setScore(s,t))}clear(){this.removeAllSnakes(),this.container.removeSelf(),this.container=null,this.selfSnake=null,this.matchHeroSprDic=null,this.bodySkinPool.clear(),this.collision=null}};Qf._instance=null;var Xf=Qf;var mo=class mo extends Xf{constructor(){super(...arguments);this.spawnTimer=0;this.snakeUnKey=0}static getInstance(){return mo._instance||(mo._instance=new mo),mo._instance}createSnake(t){if(this.container==null){console.log(t.roleId+" 无法添加 container is null");return}let i=new Eu(this.container,t);if(this.matchHeroSprDic.get(t.roleId))throw new Error(t.roleId+" 被重复添加！");return this.matchHeroSprDic.set(t.roleId,i),console.log("createSnake: "+t.roleId,j.playerDto.pid),j.playerDto.pid==t.roleId&&(this.selfSnake=i),i}rorate(t,i){t===Q.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag&&this.selfSnake.rorate(i,!1)}updateSpeedRate(t,i){t===Q.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag&&this.selfSnake.updateSpeedRate(i,!1)}checkAllSnakeCollision(t,i){var s=this.matchHeroSprDic.getValues();for(let a of s){var o=a;o&&o.tag&&co.checkCollisionsWithPve(o,null,this.collision,i)}}async spawnSnakes(){var t=[],i=Q.snake.initCount-1,s=await Ce.getNpcNames(i);for(let u=1;u<=i;u++){var o=s[u-1],a=this.spawnRandomPlayerObject(o,!1,!1);t.push(a)}return t}spawnRandomPlayerObject(t,i=!0,s=!1){var o=Q.mapSize.offsetDistance,a=Pt.randomRange(o,Q.mapSize.width-o),u=Pt.randomRange(o,Q.mapSize.height-o),p=this.getPlayerObjectByPos(t,a,u,i,s);return p}playerLen(){var t=this.matchHeroSprDic.size;return t}async spawnSnake(){if(!(this.playerLen()>=Q.snake.maxCount)){var t=await Ce.getNpcNames(1),i=t[0],s=this.spawnRandomPlayerObject(i,!0,!1);this.createSnake(s)}}update(t){this.spawnTimer+=t,this.spawnTimer>=Q.snake.spawnInterval&&(this.spawnTimer=0,this.spawnSnake())}getPlayerObjectByPos(t,i,s,o=!0,a=!1){var u=new ft(i,s),p="",m,h=0,f=0,g=new v.snake.socket.PlayerObject;g.aimDir=g.direction=Math.floor(Math.random()*360)+1,g.speed=1,g.state=!0;var b;if(g.enterTime=Laya.timer.currTimer,o?g.wdTime=Laya.timer.currTimer+3e3:g.wdTime=Laya.timer.currTimer,a){var y=j.playerDto;h=y.snakeId,f=y.skinId,b=5,p=y.name,m=y.pid,g.roleId=m+""}else{this.snakeUnKey+=1,m=this.snakeUnKey;var k=ee.m_dicSnakes.keys.length,I=Math.floor(Math.random()*k);h=ee.m_dicSnakes.keys[I];var A=Q.snake.skinIds.length,M=Math.floor(Math.random()*A);f=Q.snake.skinIds[M],b=Pt.randomInt(Q.snake.aiMinLen,Q.snake.aiMaxLen),g.roleId=Q.snake.aiPrefix+m,p=t}var O=ee.m_dicSnakes.get(h);g.userName=p,g.snakeId=h,g.skin=f,g.length=b*O.intervalBoneToDrawSkin,g.score=0,g.kills=0;var G=[],$=O.baseSpeed;let q=g.direction*Math.PI/180,H=ft.create(Math.cos(q),Math.sin(q));for(let Ae=0;Ae<g.length;Ae++){let ot;if(Ae===0)ot=u||ft.create(0,0);else{var K=G[Ae-1],W=ft.create(K.loc.x,K.loc.y);let le=.6;ot=W.add(H.mul($*le))}var he=new v.snake.socket.SnakeObject,xe=new v.snake.socket.PointObject;xe.x=ot.x,xe.y=ot.y,he.loc=xe,G[Ae]=he}return g.snake=G,g}};mo._instance=null;var $_=mo,jk=$_;var Lu=class extends po{constructor(t,i){super(t,i);this.lastSendFrame=-1}rorateReadySend(){this.isSelf&&this.clientSnake&&this.lastSendFrame!=Ve.currentFrame&&(this.rorateSend(),this.lastSendFrame=Ve.currentFrame)}rorateSend(){this.clientSnake.rorateSend()}goMatchEnd(){ie.getInstance().removeSnake(this.tag.roleId),ve.onMockMatchEnd()}adjustVisualState(){this.clientSnake.adjustVisualState(this.serverSnake)}updateOther(){}};var ho=class ho extends Xf{static getInstance(){return ho._instance||(ho._instance=new ho),ho._instance}createSnake(e){let t=new Lu(this.container,e);if(this.matchHeroSprDic.get(e.roleId))throw new Error(e.roleId+" 被重复添加！");return this.matchHeroSprDic.set(e.roleId,t),console.log("createSnake: "+e.roleId,j.playerDto.pid),j.playerDto.pid==e.roleId&&(this.selfSnake=t),t}adjustVisualState(){console.log("adjustVisualState");var e=this.matchHeroSprDic.getValues();for(let t of e)t.tag&&t.adjustVisualState()}rorate(e,t){e===Q.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag&&this.selfSnake.rorateControl(t,!0)}rorateReadySend(){this.selfSnake&&(this.selfSnake.isStop()||this.selfSnake.tag==null)||this.selfSnake.rorateReadySend()}updateSpeedRate(e,t){if(e===Q.snakeType.SELF&&this.selfSnake&&this.selfSnake.tag){var i=j.playerDto.pid,s=this.selfSnake.getToServerHead(!1),o=v.snake.socket.MessageType.MSG_PLAYER_OPR,a=v.snake.socket.CS_PLAYER_OPR.fromObject({roleId:i,opr:2,value:t,head:s,frame:Ve.currentFrame,curDir:this.selfSnake.getCurDir(),aimDir:this.selfSnake.getAimDir(),snake:[]});st.sendData(o,a)}}checkAllSnakeCollision(e,t){var i=this.matchHeroSprDic.getValues();for(let o of i){var s=o;s&&s.tag&&(e?co.checkCollisionsWithConfirm(s,null,this.collision,t):co.checkCollisions(s,null,this.collision,t))}}restoreSnakes(){this.removeAllSnakes(),this.matchHeroSprDic=new Ne(!0);let e=ve.matchDto.members.length;for(var t=0;t<e;t++){var i=ve.matchDto.members[t];try{var s=this.createSnake(i)}catch(o){console.warn(o)}}}getSnakesState(){let e={snakes:{}};var t=this.matchHeroSprDic.getValues();for(let s of t){var i=s;let o=i.tag.roleId;e.snakes[o]=i.serverSnake.getState()}return e}restoreState(e){for(let i in e.snakes){var t=this.matchHeroSprDic.get(i);t&&t.serverSnake.restoreState(e.snakes[i])}}};ho._instance=null;var q_=ho,Gk=q_;var ie=class{static getInstance(){return Oe.arenaType===Oe.ARENA_TYPE_PVE?jk.getInstance():Gk.getInstance()}};var fo=class fo{static getInstance(){return fo.instance||(fo.instance=new fo),fo.instance}init(e=null){if(!e)throw new Error("gameLayer Must Be Not Null");ie.getInstance().init(),pt.init();let t=ie.getInstance().container,i=pt.container,s=new Laya.Sprite;e.addChild(i),e.addChild(t),e.addChild(s),s.addChild($r.getInstance()),pt.init(),this.onConnectRoom()}onConnectRoom(){st.initSocket()}createData(){ie.getInstance().createSnakes(),pt.createFoodsByData()}startGame(){Ve.start()}clearTimer(){Ve.stop()}endTimer(){Ve.end()}update(e,t,i){if(ie.getInstance().updateSnakes(Laya.timer.delta,t,i),!t&&(Ar.move(ie.getInstance().getSelfSnakePos()),ce.needDraw)){let s=$r.getInstance();s&&(s.clearDraw(),ci.getInstance(null).drawDebug(s.graphics))}}restoreData(){ie.getInstance().restoreSnakes(),pt.restoreFoods()}clear(){this.clearTimer()}};fo.instance=null;var Y_=fo,ui=Y_.getInstance();var Q_=class{constructor(){this.arenaId=0;this.coinType=0;this.roomId=0;this.members=[];this.item=[];this.remainderCd=0;this.startTime=0;this.nowTime=0;this.arenaType=0;this.watch=[];this.anonymous=0}},Tu=Q_;var Jf=class{constructor(){this.isStart=!1;this._operationQueue={}}enterRoom(e){var t=e.food,i=e.players;Ve.init();var s=1e12,o=0,a=null;i.sort((m,h)=>m.enterTime-h.enterTime),i.forEach(m=>{m.roleId==j.playerDto.pid&&(a=m,o=a.enterTime,s=a.frame)}),Ve.setStartFrame(s,o);var u=[];i.forEach(m=>{if(m.state){var h=m.frame;if(h==s)u.push(m);else if(h>s){var f=new Sn;f.msgtype=v.snake.socket.MessageType.MSG_NOTICE_ENTER,f.msgBody=m,this.addOperation(f)}}});var p=new Tu;p.members=u,p.myPlayerObject=a,p.item=t,p.arenaType=Oe.ARENA_TYPE_PVP,ve.matchDto=p,w.event(S.EVENT_PVP_INIT_DATA),ve.stopAll=!1}pushMsg(e){var t=e.frame,i=e.msgList,s=[],o=1e12;if(i.forEach(u=>{var p=u.msghead.msgtype,m=u.msghead.msgcode,h,f=Laya.ClassUtils.getClass(p+"");if(f){var g=Date.now();if(h=f.deserializeBinary(u.msgbody).toObject(),ce.Debug>=1){var b=Date.now();console.log(Ce.GetLogTime+" WS ------<<<<<<<< RECV BATCH_CMD:"+p+", CODE:",m+", DATA:",h," dt:",b-g)}}else ce.Debug>=1&&console.warn(Ce.GetLogTime+" WS ------<<<<<<<< RECV BATCH_CMD:"+p+", CODE:",m+", className解析失败!");if(p==v.snake.socket.MessageType.MSG_PLAYER_COLLISION)this.confirmPlayerCollision(h,!0);else{var y=new Sn;y.msgtype=p,y.msgBody=h;var k=h.frame;k<o&&(o=k),s.push(y)}}),s&&s.length){var a=new so;a.frame=t,a.minEventFrame=o,a.serverCmdDataDtos=s,this.handleFrameOperations(a)}}noticeEnter(e,t){var i=t.players,s=i.frame,o=[],a=s,u=new Sn;u.msgtype=e,u.msgBody=i,o.push(u);var p=new so;p.frame=s,p.minEventFrame=a,p.serverCmdDataDtos=o,this.handleFrameOperations(p)}handleOperationDetail(e){switch(e.msgtype){case v.snake.socket.MessageType.MSG_PLAYER_OPR:var t=e.msgBody;this.onRevOprPush(t,!0);break;case v.snake.socket.MessageType.MSG_EAT_FOOD:let s=e.msgBody;break;case v.snake.socket.MessageType.MSG_PLAYER_COLLISION:let o=e.msgBody;break;case v.snake.socket.MessageType.MSG_NOTICE_ENTER:var i=e.msgBody;ie.getInstance().newAddSnake(i);break}}confirmPlayerCollision(e,t){var i=e.roleId,s=e.food,o=e.taret,a=e.head,u=e.frame,p=e.die,m=ie.getInstance().getRoleById(i);if(m&&(m.setIsSend(!1,!1),p!="-1")){var h=ie.getInstance().getRoleById(o);p==i?(m.confirmDie(),h&&h.addKill(1)):(h&&h.confirmDie(),m.addKill(1)),s&&s.length&&pt.addFoods(s)}}handleFrameOperations(e){let t=e.frame,i=e.minEventFrame,s=e.serverCmdDataDtos,o=Ve.lastConfirmedFrame,a=o-t;ce.Debug==2&&console.log("execute handleFrameOperations: lastConfirmedFrame: ",o,"serverFrame: "+t,"minEventFrame: "+i,s,"clientConfirmedFrame: "+Ve.clientConfirmedFrame);for(let p of s)this.addOperation(p);var u=i+1;if(o<=u&&Ve.maxSnapshotFrame!=-1){ie.getInstance().showLogInHead("回滚",!0),ce.Debug==2&&console.warn("execute handleFrameOperations: lastConfirmedFrame: ",o,"minEventFrame: "+i,"过期帧 回滚","clientConfirmedFrame: "+Ve.clientConfirmedFrame);let p=o;Ve.goConfirmedFrame(p,u);return}ie.getInstance().showLogInHead("",!0)}addOperation(e){ce.Debug==2&&console.log("addOperation (frame+1): ",e.msgBody.frame+1,e),this._operationQueue[e.msgBody.frame+1]||(this._operationQueue[e.msgBody.frame+1]=[]),this._operationQueue[e.msgBody.frame+1].push(e)}onRevOprPush(e,t){if(e!=null){var i=ie.getInstance().getRoleById(e.roleId);if(i){if(t&&i.serverSnake.updateHead106(e.frame,e.head,e.speed,e.curDir,e.aimDir,e.oprIndex),e.opr==1){var s=e.value;i.rorate(s,t)}else if(e.opr==2){var o=e.value;i.updateSpeedRate(o,t)}}else console.log(e.roleId+" snake is null")}}onUpdatePlayerObject(e,t){if(e!=null){var i=ie.getInstance().getRoleById(e.roleId);if(i){if(e.state!=!1)var s=e.eatenIds}else console.log(e.roleId+" snake is null")}}sendRestoreData(){if(ve.msgEndbody==null&&ie.getInstance().selfSnake&&ie.getInstance().selfSnake.isAlive(!1)){var e=j.playerDto.pid,t=v.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA,i=v.snake.socket.CS_REQUEST_ROOM_DATA.fromObject({roleId:e});st.sendData(t,i)}}requestRoomData(e){var t=e.food,i=e.players;Ve.init();var s=1e12,o=0,a=null;i.sort((A,M)=>A.enterTime-M.enterTime),i.forEach(A=>{if(A.roleId==j.playerDto.pid&&(a=A,o=a.oprTime),A.state){var M=A.frame;M<s&&(s=M)}}),Ve.setStartFrame(s,o);var u=[];i.forEach(A=>{if(A.state){var M=A.frame;if(M==s)u.push(A);else if(M>s){var O=new Sn;O.msgtype=v.snake.socket.MessageType.MSG_NOTICE_ENTER,O.msgBody=A,this.addOperation(O)}}});var p=new Tu;if(p.members=u,p.myPlayerObject=a,p.item=t,a&&a.state)this.onRevRestorePush(p);else if(a.result){var m=a.result,h=m.msghead.msgtype,f=m.msghead.msgcode,g,b=Laya.ClassUtils.getClass(h+"");if(b){var y=Date.now();if(g=b.deserializeBinary(m.msgbody).toObject(),ce.Debug>=1){var k=Date.now();console.log(Ce.GetLogTime+" WS ------<<<<<<<< RECV INSERT_CMD:"+h+", CODE:",f+", DATA:",g," dt:",k-y)}}else ce.Debug>=1&&console.warn(Ce.GetLogTime+" WS ------<<<<<<<< RECV INSERT_CMD:"+h+", CODE:",f+", className解析失败!");var I=g;ve.onSetMatchEnd(I,!0)}else{var I=new v.snake.socket.SC_BATTLE_END;I.res=!1,I.roleId=a.roleId,I.score=a.score,I.kills=a.kills,I.length=a.length,I.alive=a.length,I.items=[],ve.onSetMatchEnd(I,!0)}}onRevRestorePush(e){e.arenaType=Oe.ARENA_TYPE_PVP,ve.matchDto=e,w.event(S.EVENT_PVP_RESTORE_DATA)}};var X_=class r{constructor(){this._frameRate=30;this._frameInterval=33;this.startFrameTime=0;this.startFrame=0;this._currentFrame=0;this.clientConfirmedFrame=0;this.lastLastConfirmedFrame=0;this.lastConfirmedFrame=0;this.confirmedFrame=0;this.dFrame=0;this._isRunning=!1;this._nextFrameTime=0;this._snakeStates={};this.maxSnapshotFrame=-1;this.frameNetQueue=new Jf}static getInstance(){return r._instance||(r._instance=new r),r._instance}init(){this.stop(),this.dFrame=0,this.frameNetQueue._operationQueue={},this._snakeStates={},this._currentFrame=0,this.startFrame=0,this.startFrameTime=Laya.Browser.now(),this._nextFrameTime=this.startFrameTime+this._frameInterval}setStartFrame(e,t){this.clientConfirmedFrame=e,this.lastLastConfirmedFrame=e+1,this.lastConfirmedFrame=e+1,this.confirmedFrame=e,this._currentFrame=e,this.startFrame=e,this.frameNetQueue.isStart=!0,this.startFrameTime=t+st.serverTimeOffset,console.log("setStartFrame: this.startFrameTime: "+this.startFrameTime,"server enterTime: "+t,"serverTimeOffset: "+st.serverTimeOffset),this._nextFrameTime=this.startFrameTime+this._frameInterval}start(){this._isRunning=!0,this.saveSnapshot(this.lastConfirmedFrame),Laya.timer.loop(33,this,this.update),this.initTimer()}initTimer(){Laya.timer.frameLoop(2,this,this.onFrameLoop)}clearTimer(){Laya.timer.clear(this,this.onFrameLoop)}onFrameLoop(){ie.getInstance().rorateReadySend()}stop(){this._isRunning=!1,Laya.timer.clear(this,this.update),this.clearTimer()}end(){this.stop(),this.frameNetQueue.isStart=!1}update(){let t=Laya.Browser.now()-this.startFrameTime,i=Math.floor(t/this._frameInterval),s=this.startFrame+i-this._currentFrame;if(console.log("update: ","framesToUpdate: "+s,"startFrame: "+this.startFrame,"needFrame: "+i,"this._currentFrame: "+this._currentFrame),s>0,s>0)for(let o=0;o<s;o++)this._currentFrame++,this.executeFrame(this._currentFrame)}executeFrame(e,t=!0){if(!(ie.getInstance().selfSnake&&(ie.getInstance().selfSnake.isStop()||ie.getInstance().selfSnake.tag==null))){if(ce.Debug==2){var i=Laya.Browser.now(),s=i-this.startFrameTime;let o=Math.floor(s/this._frameInterval);console.log(Ce.GetLogTime,"executeFrame",e,"startFrame: "+this.startFrame,"nowFrameTiem: "+i,"startFrameTime: "+this.startFrameTime,"dTime: "+(i-this.startFrameTime),"dFrame: "+o)}ui.update(e,!1,t)}}executeConfirmFrame(e,t=!1){if(ie.getInstance().selfSnake&&ie.getInstance().selfSnake.tag==null)return;ce.Debug==2&&console.log(Ce.GetLogTime,"executeConfirmFrame",e);let i=this.frameNetQueue._operationQueue[e]||[];i.length>0&&this.saveSnapshot(e);for(let s of i)this.frameNetQueue.handleOperationDetail(s);ui.update(e,!0,t),this.lastLastConfirmedFrame!=this.lastConfirmedFrame&&(console.log("executeConfirmFrame: 清理旧数据 从 [","lastLastConfirmedFrame: "+this.lastLastConfirmedFrame,"lastConfirmedFrame: "+this.lastConfirmedFrame+" )"),this.cleanupOldData(this.lastLastConfirmedFrame,this.lastConfirmedFrame),this.lastLastConfirmedFrame=this.lastConfirmedFrame)}saveSnapshot(e){this._snakeStates[e]==null?(e>this.maxSnapshotFrame&&(this.maxSnapshotFrame=e),this._snakeStates[e]=ie.getInstance().getSnakesState(),ce.Debug==2&&console.log("saveSnapshot","取帧"+(e-1)+"数据给帧",e,this._snakeStates[e])):ce.Debug==2&&console.log("saveSnapshot",e,this._snakeStates[e],"未保存,之前有保存的数据")}getSnapshot(e,t){var i=this._snakeStates[e];return i?i.snakes[t]:null}cleanupOldData(e,t){for(var i=e;i<t;i++)delete this.frameNetQueue._operationQueue[i];for(var i=e;i<t;i++)delete this._snakeStates[i]}get currentFrame(){return this._currentFrame}getCurrentFrame(e){return e?this.clientConfirmedFrame:this.currentFrame}goConfirmedFrame(e,t){this.goConfirmedFrameDetail(e,t),this.lastConfirmedFrame=t}goConfirmedFrameDetail(e,t){ce.Debug==2&&console.log("goConfirmedFrameDetail",e,t,this._snakeStates[e],"最大快照帧: "+this.maxSnapshotFrame),this._snakeStates[e]?ie.getInstance().restoreState(this._snakeStates[e]):console.error("不是上次确认帧",e,this._snakeStates);for(let s=e;s<=t;s++)this.clientConfirmedFrame=s,this.executeConfirmFrame(s,!0);var i=this._currentFrame;if(i>t)for(let s=t+1;s<=i;s++)this.clientConfirmedFrame=s,this.executeConfirmFrame(s,!1);ie.getInstance().adjustVisualState()}checkClientAndServerFrame(e,t,i,s,o,a,u){var p=this.frameNetQueue._operationQueue[e];p&&p.length&&p.forEach(m=>{if(m.msgBody.roleId==t){var h=m.msgBody.frame,f=this.getSnapshot(h+1,t);if(f)var g=f.bones,b=m.msgBody.head;return}})}},Ve=X_.getInstance();var Zf=class{constructor(){this._heartBeatInterval=30*1e3;this.init()}init(){w.on(Je.EVENT_ROOM_SOCKET_OPEN,this,this.onSocketOpen),w.on(Je.EVENT_ROOM_SOCKET_ERROR,this,this.onScoketError),w.on(Je.EVENT_ROOM_SOCKET_CLOSE,this,this.onSocketClose),w.on(Je.EVENT_ROOM_STOP_HEART,this,this.stopHeartbearTimer),w.on(Je.EVENT_ROOM_SHOW_TIP_DELAY,this,this.onShowTipDelay),w.on("msg_"+v.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME,this,this.onRecvServerTime),w.on("msg_"+v.snake.socket.MessageType.MSG_ENTER_ROOM,this,this.onGetEnterRoomDataBack),w.on("msg_"+v.snake.socket.MessageType.MSG_PUSH,this,this.onMsgPush),w.on("msg_"+v.snake.socket.MessageType.MSG_NOTICE_ENTER,this,this.onNoticeEnter),w.on("msg_"+v.snake.socket.MessageType.MSG_PLAYER_OUT,this,this.onPlayerOut),w.on("msg_"+v.snake.socket.MessageType.MSG_EAT_FOOD,this,this.onEatFood),w.on("msg_"+v.snake.socket.MessageType.MSG_PLAYER_COLLISION,this,this.onPlayerCollision),w.on("msg_"+v.snake.socket.MessageType.MSG_GEN_FOOD,this,this.onGenFood),w.on("msg_"+v.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA,this,this.onRequestRoomData),w.on("msg_"+v.snake.socket.MessageType.MSG_BATTLE_END,this,this.onBattleEnd),w.on("msg_"+v.snake.socket.MessageType.MSG_PLAYER_OPR,this,this.onPlayerOpr),w.on("msg_"+v.snake.socket.MessageType.MSG_AI_ENTER,this,this.onAiEnter)}onRecvServerTime(e,t){var i=Te.getMsgBody(e,v.snake.socket.SC_REQUEST_SERVER_TIME),s=i,o=s.time,u=(Date.now()+this.clientSendTime)/2;st.serverTimeOffset=u-o,console.log("this.serverTimeOffset: "+st.serverTimeOffset,"clientTimestamp: "+u,"serverTimestamp: "+o),this.onGetEnterRoomData()}onGetEnterRoomDataBack(e,t){var i=Te.getMsgBody(e,v.snake.socket.SC_ENTER_ROOM),s=i;Ve.frameNetQueue.enterRoom(s),this.clearShowTip(),this.heartbeatTimer()}onMsgPush(e,t){if(Ve.frameNetQueue.isStart){var i=Te.getMsgBody(e,v.snake.socket.SC_PUSH),s=i;Ve.frameNetQueue.pushMsg(s)}}onNoticeEnter(e,t){if(!Ve.frameNetQueue.isStart)return;var i=Te.getMsgBody(e,v.snake.socket.SS_NOTICE_ENTER);let s=i;var o=e.msghead.msgtype;Ve.frameNetQueue.noticeEnter(o,s)}onPlayerOut(e,t){if(!Ve.frameNetQueue.isStart)return;var i=Te.getMsgBody(e,v.snake.socket.SC_PLAYER_OUT),o=i.roleId;ie.getInstance().removeSnake(o)}onEatFood(e,t){if(!Ve.frameNetQueue.isStart)return;var i=Te.getMsgBody(e,v.snake.socket.SC_EAT_FOOD);let s=i}onPlayerCollision(e,t){if(!Ve.frameNetQueue.isStart)return;var i=Te.getMsgBody(e,v.snake.socket.SC_PLAYER_COLLISION);let s=i;Ve.frameNetQueue.confirmPlayerCollision(s,!0)}onGenFood(e,t){var i=Te.getMsgBody(e,v.snake.socket.SC_GEN_FOOD),s=i,o=s.frame;pt.addFoods(s.food)}onRequestRoomData(e,t){var i=Te.getMsgBody(e,v.snake.socket.SC_REQUEST_ROOM_DATA),s=i;console.log("收到了恢复数据返回"),Ve.frameNetQueue.requestRoomData(s)}onBattleEnd(e,t){var i=Te.getMsgBody(e,v.snake.socket.SC_BATTLE_END),s=i,o=s.res;ve.onSetMatchEnd(s)}onAiEnter(e,t){console.log("收到了进入AI房间返回")}onPlayerOpr(e,t){var i=Te.getMsgBody(e,v.snake.socket.CS_PLAYER_OPR);if(Ve.frameNetQueue.isStart){var s=i,o=s.frame,a=[],u=o,p=new Sn,m=e.msghead.msgtype;p.msgtype=m,p.msgBody=s,a.push(p);var h=new so;h.frame=o,h.minEventFrame=u,h.serverCmdDataDtos=a,Ve.frameNetQueue.handleFrameOperations(h)}}onRequestTime(){this.clientSendTime=Date.now();var e=v.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME,t=null;st.sendData(e,t)}onGetEnterRoomData(){var e=j.playerDto.pid,t=v.snake.socket.MessageType.MSG_ENTER_ROOM,i=v.snake.socket.CS_ENTER_ROOM.fromObject({tag:"1",roleId:e});st.sendData(t,i)}onSocketOpen(){this.onRequestTime()}onScoketError(){this.popToMain()}onSocketClose(){this.popToMain()}popToMain(){nt.hideLoading(),st.isMatching&&Ce.popToMain()}onShowTipDelay(){Laya.timer.once(1e4,this,this.showTip)}clearShowTip(){Laya.timer.clear(this,this.showTip)}showTip(){Ce.netError()}stopHeartbearTimer(){Laya.timer.clear(this,this.sendHeartBeat)}heartbeatTimer(){this.stopHeartbearTimer(),Laya.timer.loop(this._heartBeatInterval,this,this.sendHeartBeat)}sendHeartBeat(){st.sendData(v.snake.socket.MessageType.MSG_HEART_BEAT,null)}};var J_=class r{constructor(){this.m_strHttpHost=getWSServer();this.serverTimeOffset=0;this._headerLength=4;this._packetLength=-1;this._isMatching=!1;new Zf,this._byte=new Laya.Byte,this._byte.endian="bigEndian",this._socket=new Laya.Socket,this._socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this._socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this._socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this._socket.on(Laya.Event.ERROR,this,this.onConnectError)}static getInstance(){return r._instance==null&&(r._instance=new r),r._instance}get isMatching(){return this._isMatching}set isMatching(e){this._isMatching=e,e||(this.connected=!1)}close(){this._socket&&this._socket.close()}initSocket(){this.isMatching=!0;var e=ve.roomDto.connectAddr;this.m_strHttpHost=e,this.connect()}onSocketOpen(){this.connected=!0,this.emit(Je.EVENT_ROOM_SOCKET_OPEN)}onConnectError(e){this.connected=!1,this.emit(Je.EVENT_ROOM_SOCKET_ERROR)}onSocketClose(e){this.connected=!1,this.emit(Je.EVENT_ROOM_SOCKET_CLOSE)}connect(){this.isMatching&&(this.connected||(this._socket.connectByUrl(this.m_strHttpHost),this.emit(Je.EVENT_ROOM_SHOW_TIP_DELAY)))}sendData(e,t,i=!0){if(!(!this.isMatching&&i)&&this.connected){var s=t?t.serializeBinary():null,o=Te.encodeMessage(e,s,"");this._socket.send(o.buffer)}}async onMessageReveived(e){if(!(e instanceof ArrayBuffer))return;let t=new Uint8Array(e);for(this._byte.writeArrayBuffer(t.buffer),this._byte.pos=0;this._byte.bytesAvailable>0;){if(this._packetLength===-1)if(this._byte.bytesAvailable>=this._headerLength)this._packetLength=this._byte.getUint32();else break;if(this._byte.bytesAvailable>=this._packetLength){let i=this._byte.readUint8Array(this._headerLength,this._packetLength);this.processPacket(i),this._packetLength=-1}else break}if(this._byte.pos>0){let i=this._byte.bytesAvailable;if(i>0){let s=this._byte.readUint8Array(0,i);this._byte.clear(),this._byte.writeArrayBuffer(s.buffer)}else this._byte.clear()}}processPacket(e){try{var t=v.snake.socket.CMsgBase.deserializeBinary(e),i=t.msghead.msgtype;this.emitter(i,t)}catch{}}emitter(e,t){var i=t.msghead.msgcode;i!=v.snake.socket.MessageCode.SYS_NORMAL&&this.emit(Je.EVENT_GLOBAL_ERROR_CODE,i),this.emit("msg_"+e,t,i)}emit(e,...t){w.event(e,t)}clearAll(){Laya.timer.clearAll(this),this.close(),this.emit(Je.EVENT_ROOM_STOP_HEART)}},st=J_.getInstance();var eg=class{constructor(){this.connectTime=0;this.connectTimeMax=5;this.preTime=1e3;this.isOtherLogin=!1;this._heartBeatInterval=5e3;this.isFirst=!0;this.init()}init(){w.on(Je.EVENT_GLOBAL_ERROR_CODE,this,this.onShowGlobalErrorCode),w.on(Je.EVENT_HALL_SOCKET_OPEN,this,this.onSocketOpen),w.on(Je.EVENT_HALL_SOCKET_ERROR,this,this.onScoketError),w.on(Je.EVENT_HALL_SOCKET_CLOSE,this,this.onSocketClose),w.on(Je.EVENT_HALL_STOP_HEART,this,this.stopHeartbearTimer),w.on(Je.EVENT_HALL_SHOW_TIP_DELAY,this,this.onShowTipDelay),w.on("msg_"+v.snake.socket.MessageType.MSG_USER_LOGIN,this,this.onUserLogin),w.on("msg_"+v.snake.socket.MessageType.MSG_REPEAT_LOGIN_NOTICE,this,this.onOtherUserLogin),w.on("msg_"+v.snake.socket.MessageType.MSG_LVUP_NOTICE,this,this.onLvUpNotice),w.on("msg_"+v.snake.socket.MessageType.MSG_UPDATE_ROLE,this,this.onUpdateRole)}onSocketOpen(){this.onLogin()}onScoketError(){this.startReconnect()}onSocketClose(){this.startReconnect()}startReconnect(){if(!this.isOtherLogin)if(console.log("websocket----closed connectTime:"+this.connectTime+", connectTimeMax: "+this.connectTimeMax),this.connectTime<=this.connectTimeMax){var e=this.connectTime*this.preTime;Laya.timer.once(e,this,this.onReconnect)}else nt.hideLoading(),this.showTip()}onReconnect(){this.reconnect(),this.connectTime++}reconnect(){if(console.log(Ce.GetLogTime,"[HallWebSocket]  reconnect 开始重连服务器"),Me.connected)return;let e=String(this.connectTime)+"/"+String(this.connectTimeMax)+" "+z.getLanguage("正在尝试重连");nt.showLoadingByInfo(e),Me.connectWebSocket(),console.log(Ce.GetLogTime,"[HallWebSocket]  reconnect -------->",e)}onShowTipDelay(){Laya.timer.once(1e4,this,this.showTip)}clearShowTip(){Laya.timer.clear(this,this.showTip)}showTip(){Ce.netError()}onLogin(){var e=v.snake.socket.MessageType.MSG_USER_LOGIN;let t=ze.getloginRequestInfo;var i=v.snake.socket.CS_USER_LOGIN.fromObject(t);Me.send(e,i)}onUserLogin(e,t){var i=Te.getMsgBody(e,v.snake.socket.SC_USER_LOGIN);console.log("登录返回信息",i),t==v.snake.socket.MessageCode.USER_NOT_EXIST?(console.log("have no regist"),qe.sendCustumEvent(23),Fe.intance.openModule(T.CreateLoginView)):t==v.snake.socket.MessageCode.SYS_NORMAL&&(nt.hideLoading(),console.log("have regist"),j.updatePlayerInfo(i.roleInfo),this.isFirst&&(w.event(S.EVENT_ENTER_MAIN),this.isFirst=!1)),this.connectTime=0,this.clearShowTip(),this.heartbeatTimer()}onOtherUserLogin(e,t){this.isOtherLogin=!0,Me.clearAll(),Me.close(),st.isOtherLogin=!0,st.clearAll(),st.close(),Ce.otherLogin(),console.log("WS----------------------------otherLogin")}onShowGlobalErrorCode(e){if(e!=v.snake.socket.MessageCode.SYS_NORMAL){console.log(Ce.GetLogTime,"[HallMessageHandle]  msgcode--------------->",e);let t=qt.get(e);ce.vType!=2?e!==v.snake.socket.MessageCode.NOT_ENOUGH_TOKEN&&Ce.commTipWithYes(t+" code:"+e):Ce.commTipWithYes(t)}}stopHeartbearTimer(){Laya.timer.clear(this,this.sendHeartBeat)}heartbeatTimer(){this.stopHeartbearTimer(),Laya.timer.loop(this._heartBeatInterval,this,this.sendHeartBeat)}sendHeartBeat(){Me.send(v.snake.socket.MessageType.MSG_HEART_BEAT,null,!1)}onLvUpNotice(e,t){var i=Te.getMsgBody(e,v.snake.socket.SC_LVUP_NOTICE);let s=i;Fe.intance.openModule(T.PlayerUpgradeSuccessDialog,s),console.log("收到升级通知:",s)}onUpdateRole(e,t){var i=Te.getMsgBody(e,v.snake.socket.SS_UPDATE_ROLE);if(console.log("收到更新角色信息:",i),!i.roleInfo||i.roleInfo.length===0){console.log("收到的角色信息为空");return}j.updatePlayerInfo(i.roleInfo[0])}};var Z_=class r{constructor(){this._socket=null;this.wsUrl=getWSServer();this._headerLength=4;this._packetLength=-1;new eg,this._byte=new Laya.Byte,this._byte.endian="bigEndian",this._socket=new Laya.Socket,this._socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this._socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this._socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this._socket.on(Laya.Event.ERROR,this,this.onSocketError)}static getInstance(){return r._instance==null&&(r._instance=new r),r._instance}connect(){console.log(Ce.GetLogTime,"[HallWebSocket] Try to connect url = "+this.wsUrl),!this.connected&&(this.connectWebSocket(),this.emit(Je.EVENT_HALL_SHOW_TIP_DELAY))}connectWebSocket(){this._socket.connectByUrl(this.wsUrl)}onSocketOpen(){this.connected=!0,console.log(Ce.GetLogTime,"[HallWebSocket] ----onOpen------------> connected"),this.emit(Je.EVENT_HALL_SOCKET_OPEN)}onSocketError(e){this.connected=!1,console.log(Ce.GetLogTime,"[HallWebSocket] ----onError------------>",e),this.emit(Je.EVENT_HALL_SOCKET_ERROR)}onSocketClose(){this.connected=!1,console.log(Ce.GetLogTime,"[HallWebSocket] ----onClose------------>",this._socket),this.emit(Je.EVENT_HALL_SOCKET_CLOSE)}close(){this.connected=!1,console.log(Ce.GetLogTime,"[HallWebSocket] ----WS:close"),this._socket&&this._socket.close()}clearAll(){Laya.timer.clearAll(this),this.close(),this.emit(Je.EVENT_HALL_STOP_HEART)}send(e,t,i=!0){if(this.connected){var s=t?t.serializeBinary():null;e!=v.snake.socket.MessageType.MSG_HEART_BEAT&&console.log(Ce.GetLogTime,"[HallWebSocket]  ------>>>>>>>> SEND CMD:"+e,t?t.toObject():null);var o=Te.encodeMessage(e,s,"");this._socket.send(o.buffer)}else console.log(Ce.GetLogTime,"[HallWebSocket]  ------>>>>>>>> SENDE RROR CMD:"+e,t?t.toObject():null)}onMessageReveived(e=null){if(console.log(Ce.GetLogTime,"[HallWebSocket]: onMessage",e.byteLength),!(e instanceof ArrayBuffer)){console.warn(Ce.GetLogTime,"[HallWebSocket]: no ArrayBuffer data",e);return}let t=new Uint8Array(e);for(this._byte.writeArrayBuffer(t.buffer),this._byte.pos=0;this._byte.bytesAvailable>0;){if(this._packetLength===-1)if(this._byte.bytesAvailable>=this._headerLength)this._packetLength=this._byte.getUint32();else break;if(this._byte.bytesAvailable>=this._packetLength){let i=this._byte.readUint8Array(this._headerLength,this._packetLength);this.processPacket(i),this._packetLength=-1}else break}if(this._byte.pos>0){let i=this._byte.bytesAvailable;if(i>0){let s=this._byte.readUint8Array(0,i);this._byte.clear(),this._byte.writeArrayBuffer(s.buffer)}else this._byte.clear()}}processPacket(e){try{var t=v.snake.socket.CMsgBase.deserializeBinary(e),i=t.msghead.msgtype;console.log(Ce.GetLogTime,"[HallWebSocket]: onMessage",i.toString(),t),this.emitter(i,t)}catch(s){console.log(Ce.GetLogTime,"[HallWebSocket] onSocketError e:"+s)}}emitter(e,t){var i=t.msghead.msgcode;i!=v.snake.socket.MessageCode.SYS_NORMAL&&this.emit(Je.EVENT_GLOBAL_ERROR_CODE,i),this.emit("msg_"+e,t,i)}emit(e,...t){w.event(e,t)}},Me=Z_.getInstance();var nn=class{constructor(){}};nn.MONTH="months",nn.DAYS="days",nn.HOURS="hours",nn.MINUTES="minutes",nn.SECOUNDS="seconds",nn.MS="ms";var Ft=class Ft{constructor(){}static formatMM(e){if(e<=0)return"00:000";let t,i;t=e/1e3,i=e%1e3;let s="";return t<=9&&(s+="0"),s+=Math.floor(t),s+=":",i<=9?s+="00":i<=99&&(s+="0"),s+=i,s}static format(e,t=":",i=!0){if(e<=0)return i?"00:00:00":"00:00";let s,o,a,u,p;u=e/3600,a=e%3600,p=a/60,s=a%60;let m="";return i&&(u<=9&&(m+="0"),m+=Math.floor(u)+t),p<=9&&(m+="0"),m+=Math.floor(p)+t,Math.ceil(s)<=9&&(m+="0"),m+=Math.ceil(s),m}static formatWithDay(e,t=":",i=!1){if(e<=0)return"00:00";let s,o,a,u,p;o=e/86400,a=e%86400,u=a/3600,a=a%3600,p=a/60,s=a%60;let m="";return o>=1?(m=z.getLanguage(16,Math.floor(o))+" ",u<=9&&(m+="0"),i&&s%2!=0&&(t=Ce.getColorText(t,"#412b20")),m+=Math.floor(u)+t,p<=9&&(m+="0"),m+=Math.floor(p)):(u<=9&&(m+="0"),m=Math.floor(u)+t,p<=9&&(m+="0"),m+=Math.floor(p)+t,Math.ceil(s)<=9&&(m+="0"),m+=Math.ceil(s)),m}static formatWithSecondByMs(e){return`${e/1e3}`}static formatWithDayByMs(e,t=":",i=!1){if(e<=0)return"00:00";let s,o,a,u,p,m;a=e/864e5,u=e%864e5,p=u/36e5,u=u%36e5,m=u/6e4,u=u%6e4,o=u/1e3,s=u%1e3;let h="";return a>=1&&(h=z.getLanguage(16,Math.floor(a))+" "),p<=9&&(h+="0"),h+=Math.floor(p)+t,m<=9&&(h+="0"),h+=Math.floor(m)+t,Math.ceil(o)<=9&&(h+="0"),h+=Math.floor(o)+" ",h+=Math.ceil(s),h}static getTimeArray(e,t="HH-MM-SS"){if(e=Math.max(0,e),t.indexOf("-")==-1)return[];let i=[],s=t.split("-");for(let o of s)o=="DD"?i.push(Math.floor(e/Ft.OneDaySceond)):o=="HH"?i.push(Math.floor(e%Ft.OneDaySceond/Ft.OneHourSceond)):o=="MM"?i.push(Math.floor(e%Ft.OneHourSceond/Ft.OneMiniuteSecond)):o=="SS"&&i.push(e%Ft.OneMiniuteSecond);return i}static getServerDate(e){return new Date(e)}static formatTimeStamp(e,t="YY-MT-DD HH:MM:SS",i=!1){let s=Ft.getServerDate(e),o="";if(t.indexOf("YY")>=0&&(o=(i?s.getUTCFullYear():s.getFullYear())+"",t=t.replace("YY",o)),t.indexOf("MT")>=0){let a=(i?s.getUTCMonth():s.getMonth())+1;a>9?o=a+"":o="0"+a,t=t.replace("MT",o)}if(t.indexOf("DD")>=0){let a=i?s.getUTCDate():s.getDate();a>9?o=a+"":o="0"+a,t=t.replace("DD",o)}if(t.indexOf("HH")>=0){let a=i?s.getUTCHours():s.getHours();a>9?o=a+"":o="0"+a,t=t.replace("HH",o)}if(t.indexOf("MM")>=0){let a=i?s.getUTCMinutes():s.getMinutes();a>9?o=a+"":o="0"+a,t=t.replace("MM",o)}if(t.indexOf("SS")>=0){let a=i?s.getUTCSeconds():s.getSeconds();a>9?o=a+"":o="0"+a,t=t.replace("SS",o)}return t}static formatTimeStamps(e,t="YY-MT-DD HH:MM:SS"){let i=Ft.getServerDate(e),s=t;return s=Ft.parseTimeDetail(i,s,"YY",!1),s=Ft.parseTimeDetail(i,s,"MT",!1),s=Ft.parseTimeDetail(i,s,"DD",!1),s=Ft.parseTimeDetail(i,s,"HH",!0),s=Ft.parseTimeDetail(i,s,"MM",!0),s=Ft.parseTimeDetail(i,s,"SS",!0),s}static parseTimeDetail(e,t,i,s){if(t.indexOf(i)>=0){let o,a;i=="YY"?a=e.getFullYear():i=="MT"?a=e.getMonth()+1:i=="DD"?a=e.getDate():i=="HH"?a=e.getHours():i=="MM"?a=e.getMinutes():i=="SS"&&(a=e.getSeconds()),a>9||!s?o=a.toString():o="0"+a,t=t.replace(i,o)}return t}static getServerTimeStr(){return Ft.formatTimeStamp(Laya.timer.currTimer)}static getTimeArr(){return Ft.getServerTimeStr().split("/")}static get getDay(){let t=Ft.getServerTimeStr().split("/");return parseInt(t[2])}static parseSheetTime(e){let t="";if(e){let i=e.length;for(let s=0;s<i;s++){let o="";e[s]<10?o="0"+e[s]:o=e[s],s!==i-1&&(o=o+":"),t+=o}}return t}static dateStringToTimestamp(e,t){let[i,s,o]=e.split("-").map(Number),a=Number(t),u=new Date(i,s-1,o,a).getTime();return Number(u)}static getTimestamp(e,t,i,s,o){return new Date(e,t-1,i,s,o).getTime()}static getCurrentDayTimestamp(){let e=new Date,t=e.getHours();return e.setHours(t,0,0,0),e.getTime()}static getYearMonthDat(e){let t=new Date(e),i=t.getFullYear(),s=t.getMonth()+1<10?"0"+(t.getMonth()+1):""+(t.getMonth()+1),o=t.getDate()<10?"0"+t.getDate():""+t.getDate();return`${i}-${s}-${o}`}static formatDayAndTime(e,t="-"){let i=new Date(e),s=i.getFullYear(),o=String(i.getMonth()+1).padStart(2,"0"),a=String(i.getDate()).padStart(2,"0"),u=String(i.getHours()).padStart(2,"0"),p=String(i.getMinutes()).padStart(2,"0");return{date:`${s}${t}${o}${t}${a}`,time:`${u}:${p}`}}static formatTimeExpires(e){return e<60*1e3?z.getLanguage(1214,e):e<60*60*1e3?z.getLanguage(1215,Math.floor(e/6e4)):e<24*60*60*1e3?z.getLanguage(1216,Math.floor(e/36e5)):z.getLanguage(1217,Math.floor(e/(24*60*60*1e3)))}static getTimeDifference(e,t=nn.MONTH){let i=new Date,o=new Date(e*1e3).getTime()-i.getTime();if(o<0)return{months:0,days:0,hours:0,minutes:0,seconds:0,ms:0};let a=o,u=Math.floor(o/1e3),p=Math.floor(u/60),m=Math.floor(p/60),h=Math.floor(m/24),f=Math.floor(h/30);return t==="months"?(h%=30,m%=24,p%=60,u%=60,a%=1e3):t==="days"?(m%=24,p%=60,u%=60,a%=1e3,f=0):t==="hours"?(p%=60,u%=60,a%=1e3,f=0,h=0):t==="minutes"?(u%=60,a%=1e3,f=0,h=0,m=0):t==="seconds"?(a%=1e3,f=0,h=0,m=0,p=0):t==="ms"&&(f=0,h=0,m=0,p=0,u=0),{months:t==="months"?f:0,days:t==="months"||t==="days"?h:0,hours:t==="months"||t==="days"||t==="hours"?m:0,minutes:t==="months"||t==="days"||t==="hours"||t==="minutes"?p:0,seconds:t!=="ms"?u:0,ms:a}}static checkTimeValid(e){let t=Math.floor(Date.now()/1e3),i=24*60*60;return!(t-e>i)}static formatTimeAgoFromTimestamp(e){let i=new Date().getTime()-e,s=Math.floor(i/(60*1e3)),o="";if(s<60)o=z.getLanguage(17,s);else if(s<24*60){let a=Math.floor(s/60);o=z.getLanguage(15,a)}else{let a=Math.floor(s/1440);o=z.getLanguage(16,a)}return z.getLanguage(18,o)}static formatTimeAgo(e){if(e<60*1e3)return z.getLanguage(40);if(e<60*60*1e3){var t=z.getLanguage(17,Math.floor(e/6e4));return z.getLanguage(18,t)}else if(e<24*60*60*1e3){var t=z.getLanguage(15,Math.floor(e/36e5));return z.getLanguage(18,t)}else{var t=z.getLanguage(16,Math.floor(e/864e5));return z.getLanguage(18,t)}}static formatDateDDMMYYYY(e,t="/"){let i=new Date(e),s=String(i.getDate()).padStart(2,"0"),o=String(i.getMonth()+1).padStart(2,"0"),a=i.getFullYear();return`${s}${t}${o}${t}${a}`}static getRestTime(e){let t=Math.floor(Date.now()/1e3),i=e-t;if(i<=0)return"00:00:00";let s=Math.floor(i/3600);i%=3600;let o=Math.floor(i/60),a=i%60,u=s<10?`0${s}`:`${s}`,p=o<10?`0${o}`:`${o}`,m=a<10?`0${a}`:`${a}`;return`${u}:${p}:${m}`}};Ft.OneDaySceond=24*3600,Ft.OneHourSceond=3600,Ft.OneMiniuteSecond=60;var At=Ft;var fs=class{constructor(){this.coins={};this.needTip=!0}};var e1=class r{constructor(){this.account_contract=null;this.tokenId=0}static getInstance(){return r._instance||(r._instance=new r),r._instance}init(){typeof window.ethereum>"u"}async getAccountVoFromServer(){let e=await wt.requestPost("cybertron-sys-api/api/v1/account/find",{address:ze.walletAddress},!1,!1);if(e){let t=new fs;return Object.assign(t,e),console.log("info========"+JSON.stringify(t)),t}return e}async updateProfile(e,t,i){var s=j.playerDto.sex,o=j.playerDto;let a=await wt.requestPost("wxgame/player/changeInfo",{name:e,sex:s,icon:t,country:i});return a?(o.icon=a.icon,o.country=a.country,o.createTime=a.createTime,o.name=a.name,o.sex=a.sex,o.snakeId=a.snakeId,o.skinId=a.skinId,o.maxKill=a.maxKill,o.maxAlive=a.maxAlive,o.score=a.score,o.lv=a.lv,o):null}async getTokenId(){return this.tokenId?this.tokenId:(this.tokenId=await this.account_contract.methods.tokenOfOwnerByIndex(ze.walletAddress,0).call(),this.tokenId=parseInt(this.tokenId+""),this.tokenId)}},tg=e1.getInstance();var t1=class r{constructor(){this.loginRequestInfo={time:0,randomHex:"",r:"",s:"",v:"",roleId:""}}get getloginRequestInfo(){return this.loginRequestInfo}static getInstance(){return r._instance||(r._instance=new r),r._instance}async init(){if(typeof window.ethereum>"u"||ce.Debug==2){console.log(z.getLanguage(26));return}qe.sendCustumEvent(10),this.walletClient=Fa({transport:Ea(window.ethereum)});var e,t=await r._instance.walletClient.getChainId();e=this.getChain(t),e||(e=pu),this.publicClient=cu({chain:e,transport:eu()}),this.walletClient=Fa({chain:e,transport:Ea(window.ethereum)});let i=await r._instance.publicClient.getChainId();console.log("clientChainId",t,i),qe.sendCustumEvent(12),this.registerProxy(),qe.sendCustumEvent(17)}async registerProxy(){tg.init()}async getWalletAddress(){if(this.walletAddress)return this.walletAddress;let[e]=await this.walletClient.requestAddresses();return e}async dappLogin(){console.log("dappLogin this.walletAddress: "+this.walletAddress),qe.sendCustumEvent(13),this.walletAddress=await this.getWalletAddress(),qe.sendCustumEvent(14),await this.signAndLogin()}async signAndLogin(e=!1){var t=!0;let i=new Date().getTime(),s="",o="",a="",u="";if(ce.Debug!=0)t=!1;else{let h=localStorage.getItem("TOX-COOKIE-CODE"+r._instance.walletAddress);if(!e&&h){h=Ni.decode(h);let f=h.split("&");i=parseFloat(f[0]),s=f[1],o=f[2],a=f[3],u=f[4];let g=At.checkTimeValid(i);h&&i&&g&&s&&o&&a&&u&&(t=!1),console.log("needSign: "+t)}}if(t){console.log("111");var p=uu().substring(0,32);s=Ee(p,{size:32}),i=new Date().getTime();let f=this.walletAddress+s+i,g=new rg.default("SHA-256","TEXT",{encoding:"UTF8"});g.update(f);let b=g.getHash("HEX");if(console.log("进入签名",1),this.walletClient)try{let y=await this.walletClient.signMessage({account:this.walletAddress,message:b});console.log("签名结束",1);let k=y.substring(2);o="0x"+k.substring(0,64),a="0x"+k.substring(64,128),u="0x"+k.substring(128,130)}catch{De.notice("签名失败,重新签名"),Laya.timer.once(1e3,this,this.signAndLogin,[e]);return}}this.loginRequestInfo.time=i,this.loginRequestInfo.randomHex=s,this.loginRequestInfo.r=o,this.loginRequestInfo.s=a,this.loginRequestInfo.v=u,this.loginRequestInfo.roleId=this.walletAddress,qe.sendCustumEvent(15);var m=Ni.encode(i+"&"+s+"&"+o+"&"+a+"&"+u);localStorage.setItem("TOX-COOKIE-CODE"+r._instance.walletAddress,m),Me.connect()}async main(){let e=cu({chain:Ua,transport:eu()}),t=Fa({chain:Ua,transport:Ea(window.ethereum)}),[i]=await t.requestAddresses(),s=await t.signMessage({account:i,message:"Hello world!"}),o=await e.verifyMessage({address:i,message:"Hello world!",signature:s});console.log("valid: "+o);let a=await fetch("http://localhost:3000/api/login",{method:"POST",body:JSON.stringify({address:t.account.address,signature:s})})}async refreshToken(){let e,t=localStorage.getItem("TOX-COOKIE-CODE"+r._instance.walletAddress);t=Ni.decode(t);let i=t.split("&"),s=parseFloat(i[0]),o=i[1],a=i[2],u=i[3],p=i[4];if(s&&o&&a&&u&&p){let m={debug:ce.Debug,address:this.walletAddress,time:s,randomHex:o,r:a,s:u,v:p};e=await wt.requestPost("wxgame/player/getJwt",m,!1,!1).catch(h=>{}),e&&localStorage.setItem("TOX-COOKIE"+r._instance.walletAddress,e.loginToken)}return e}async checkNickName(e){let t={name:e,address:this.walletAddress};return await wt.requestPost("wxgame/player/nameCheck",t,!1,!1).catch(s=>{nt.hideLoading(),console.log("checkResult 失败")})}waitGetAccount(){Laya.timer.loop(2e3,this,this.getAcccount)}async getAcccount(){console.log("getAcccount");var e=!0;let t=new Date().getTime(),i="",s="",o="",a="";if(ce.Debug!=0)e=!1;else{let h=localStorage.getItem("TOX-COOKIE-CODE"+r._instance.walletAddress);h=Ni.decode(h);let f=h.split("&");t=parseFloat(f[0]),i=f[1],s=f[2],o=f[3],a=f[4],t&&i&&s&&o&&a&&(e=!1),console.log("needSign: "+e)}if(e){var u=uu().substring(0,32);i=Ee(u,{size:32}),t=new Date().getTime();let f=this.walletAddress+i+t,g=new rg.default("SHA-256","TEXT",{encoding:"UTF8"});g.update(f);let b=g.getHash("HEX");console.log("进入签名",1);let y=await this.walletClient.signMessage({account:this.walletAddress,message:b});console.log("签名结束",1);let k=y.substring(2);s="0x"+k.substring(0,64),o="0x"+k.substring(64,128),a="0x"+k.substring(128,130)}let p,m={address:this.walletAddress,time:t,randomHex:i,r:s,s:o,v:a};if(p=await wt.requestPost("wxgame/player/getAccount",m,!1,!1).catch(h=>{}),p){Laya.timer.clear(this,this.getAcccount);let h=p.playerDto;localStorage.setItem("TOX-COOKIE"+r._instance.walletAddress,p.loginToken),w.event(S.EVENT_WAIT_PLAYERINFO,h)}}async createAcccount(e,t,i,s,o){console.log("createAcccount");var a=!0;let u=new Date().getTime(),p="",m="",h="",f="";if(ce.Debug!=0)a=!1;else{let k=localStorage.getItem("TOX-COOKIE-CODE"+r._instance.walletAddress);k=Ni.decode(k);let I=k.split("&");u=parseFloat(I[0]),p=I[1],m=I[2],h=I[3],f=I[4],u&&p&&m&&h&&f&&(a=!1)}if(a){var g=uu().substring(0,32);p=Ee(g,{size:32}),u=new Date().getTime();let I=this.walletAddress+p+u,A=new rg.default("SHA-256","TEXT",{encoding:"UTF8"});A.update(I);let M=A.getHash("HEX");if(console.log("进入签名",1),this.walletClient){let O=await this.walletClient.signMessage({account:this.walletAddress,message:M});console.log("签名结束",1);let G=O.substring(2);m="0x"+G.substring(0,64),h="0x"+G.substring(64,128),f="0x"+G.substring(128,130)}}var b=v.snake.socket.MessageType.MSG_USER_REGISTER,y=v.snake.socket.CS_USER_REGISTER.fromObject({icon:i,userName:e,country:s,walletAddr:this.walletAddress,invite:o,time:this.loginRequestInfo.time,randomHex:this.loginRequestInfo.randomHex,r:this.loginRequestInfo.r,s:this.loginRequestInfo.s,v:this.loginRequestInfo.v});return Me.send(b,y),null}async newAllowanceAddress(e,t){let i=r._instance.walletAddress,s=e;try{if(console.log("查看是否已经授权, owner:"+i+", spender:"+s+", publicClient.chain.id:"+this.publicClient.chain.id),t==0)return!0;let o=await r._instance.publicClient.readContract({address:t,abi:Ht.TOKEN_ERC20ABI,functionName:"allowance",args:[i,s]});if(o=="0"){console.log("未授权，进行授权, owner:"+i+", allowance:"+o+", walletClient.chain.id:"+this.walletClient.chain.id);let a=await r._instance.walletClient.writeContract({address:t,abi:Ht.TOKEN_ERC20ABI,functionName:"approve",args:[s,"100000000000000000000000000000000000000000000000"],account:i});console.log("授权hash============"+a);let u=await r._instance.publicClient.waitForTransactionReceipt({hash:a});return console.log(`Tx with hash: ${a}`,u),u&&u.status=="success"?(console.log(`Tx successful with hash: ${a}`),!0):!1}else return console.log("已授权, owner:"+i+", allowance:"+o),!0}catch(o){if(console.log("授权错误====》",o),o instanceof Error){let a=o.message;console.log("授权错误====》",a)}}}async allowanceAddressByTokenAddress(e,t){let i=new window.web3.eth.Contract(Ht.TOKEN_ERC20ABI,t);return await i.methods.allowance(this.walletAddress,e).call()=="0"&&(console.log("ERC20 allowance!"),await i.methods.approve(e,"100000000000000000000000000000000000000000000000").send({from:this.walletAddress},(o,a)=>{if(o)return nt.hideLoading(),!1})),!0}async getERC20TokenBalance(e){return window.ethereum,await new window.web3.eth.Contract(Ht.TOKEN_ERC20ABI,e).methods.balanceOf(this.walletAddress).call()}async getBalance2(e,t=void 0){let i=this.walletAddress;t&&(i=t);let s;return!e||e==Ht.ADDRESS0?s=await r._instance.publicClient.getBalance({address:i}):s=await this.publicClient.readContract({address:e,abi:Ht.TOKEN_ERC20ABI,functionName:"balanceOf",args:[i]}),console.log("getBalance2 publicClient.chain.id:"+this.publicClient.chain.id,"代币地址",e,"余额：",s),s}async getBankBalance(e,t,i){if(i=="WBNB"){let s=await r._instance.publicClient.getBalance({address:t});if(s)return s}else{let s=this.getBalance2(e,t);if(s)return s}}async switchChain(e){var t=this.getChainName(e);let i=await r._instance.walletClient.getChainId();if(ce.isInto&&Laya.Browser.onIOS&&i!==e)return De.notice(z.getLanguage(37,t)),!1;try{console.log("switchChain id:"+e),await this.walletClient.switchChain({id:e})}catch(s){if(console.log(s),s instanceof Error){let o=s.message;console.log("切换错误====》",o)}return De.notice(z.getLanguage(37,t)),!1}return await this.resetPublicAndWallet(e),!0}async addChain(e){console.log(e);var t=this.getChain(e);return await this.walletClient.addChain({chain:t})}getChain(e){var t=null;switch(e){case pu.id:t=pu;break;case Sf.id:t=Sf;break;case Ua.id:t=Ua;break;case Rf.id:t=Rf;break;case Bf.id:t=Bf;break;case kf.id:t=kf;break;case wf.id:t=wf;break;case Af.id:t=Af;break;case Mf.id:t=Mf;break;case Ef.id:t=Ef;break;case Lf.id:t=Lf;break}return t}getChainName(e){var t="",i=this.getChain(e);return i&&(t=i.name),t}async resetPublicAndWallet(e){console.log("resetPublicAndWallet chain:"+e);var t=this.getChain(e);await r._instance.reInitPublicClient(t),await r._instance.reInitWalletClient(t)}reInitPublicClient(e){console.log("reInitPublicClient chain:"+e),this.publicClient=cu({chain:e,transport:eu()})}reInitWalletClient(e){console.log("reInitWalletClient chain:"+e),this.walletClient=Fa({chain:e,transport:Ea(window.ethereum)})}async getAuthStatus(){let e=r._instance.walletAddress;try{return await r._instance.publicClient.readContract({address:Ht.SAT_ADDRESS,abi:Ht.SAT_ABI,functionName:"getAuthStatus",args:[e]})}catch(t){if(console.log("授权错误====》",t),t instanceof Error){let i=t.message;console.log("授权错误====》",i)}}}},ze=t1.getInstance();var Vk=Laya.HttpRequest,lr=class lr{static requestGet(e,t,i=!1){return new Promise((s,o)=>{var a=Laya.Pool.getItem("HttpRequest");a||(a=new Vk),a.http.timeout=2e3,a.on(Laya.Event.COMPLETE,null,f),a.on(Laya.Event.ERROR,null,g),a.http.onreadystatechange=()=>{if(a.http.readyState===XMLHttpRequest.DONE){var y=a.http.status;y>=200&&y<400||(o(),b())}};let u=localStorage.getItem("TOX-COOKIE"+ze.walletAddress),p=["Content-Type","application/json"];u&&(p=[...p,"Authorization",u]);let m;e.startsWith("http")?m=e+h(t):m=lr.httpRoot+"/"+e+h(t),lr.httpRoot!="https://api.phantomarena.co"&&console.log("REQUEST_GET "+m,1),a.send(m,null,"get","json",p);function h(y){if(typeof y=="string")return y;let k="";for(let I in y)k+="&"+I+"="+y[I];return k}function f(y){i?y.code==="0"?s(y.data):(qt.showErrorWord(parseInt(y.code)),o(y.code)):s(y),b()}function g(y,k){o(y),b()}function b(){a.off(Laya.Event.COMPLETE,null,f),a.off(Laya.Event.ERROR,null,g),Laya.Pool.recover("HttpRequest",a)}})}static startHeart(){Laya.stage.on(Laya.Event.BLUR,this,()=>{this.stopHeartInStage=!0,console.log("失去焦点, 停止心跳")}),Laya.stage.on(Laya.Event.FOCUS,this,()=>{this.stopHeartInStage=!1,console.log("获取焦点, 开始心跳")}),Laya.timer.loop(3e3,this,this.onHeart)}static async onHeart(){console.log("onHeart")}static requestPost(e,t,i=!1,s=!0,o=!1){let a=localStorage.getItem("TOX-COOKIE"+ze.walletAddress);return i&&!a?[]:new Promise((u,p)=>{var m=Laya.Pool.getItem("HttpRequest");m||(m=new Vk),m.http.timeout=1e4,m.once(Laya.Event.COMPLETE,null,g),m.once(Laya.Event.ERROR,null,b);let h=[];a&&s&&(h=[...h,"Authorization",a]);var f=lr.seq+1;lr.seq=f,e=="wxgame/sys/ping"?ce.showHeartLog&&console.log(Ce.GetLogTime+" "+f+" >>> HTTP_POST "+lr.httpRoot+"/"+e+" "+JSON.stringify(t),a):console.log(Ce.GetLogTime+" "+f+" >>> HTTP_POST "+lr.httpRoot+"/"+e+" "+JSON.stringify(t),a),e.startsWith("http")?m.send(e,t,"post","json",h):m.send(lr.httpRoot+"/"+e,t,"post","json",h);async function g(k){if(e=="wxgame/sys/ping"?ce.showHeartLog&&console.log(Ce.GetLogTime+" "+f+" <<< hTTP_RCV data: "+JSON.stringify(k),1):console.log(Ce.GetLogTime+" "+f+" <<< hTTP_RCV data: "+JSON.stringify(k),1),k.errorCode==0||k.errorCode==="0")u(k);else{if(k.errorCode===18)Ce.titickNotEnought();else if(k.errorCode===26)Ce.RemError();else if(k.errorCode!==29)if(k.errorCode===30)Ce.NoHeroError(qt.get(k.errorCode));else if(k.errorCode===32)Ce.NoHeroError(qt.get(k.errorCode));else if(k.errorCode===2||k.errorCode===21)Ce.alertNoAll(qt.get(k.errorCode));else if(k.errorCode===5)if(ce.Debug==0){localStorage.setItem("TOX-COOKIE"+ze.walletAddress,"");var I=await ze.refreshToken();I&&lr.requestPost(e,t,i,s)}else localStorage.setItem("TOX-COOKIE"+ze.walletAddress,""),qt.showErrorWord(parseInt(k.errorCode));else k.errorCode===17?ce.Debug==0?(localStorage.setItem("TOX-COOKIE"+ze.walletAddress,""),ze.signAndLogin(),qt.showErrorWord(parseInt(k.errorCode))):(localStorage.setItem("TOX-COOKIE"+ze.walletAddress,""),qt.showErrorWord(parseInt(k.errorCode))):k.errorCode===51?Ce.commTipWithYes(qt.get(k.errorCode)):o||qt.showErrorWord(parseInt(k.errorCode),k.errorParams);p(k.errorCode)}y()}function b(k,I){console.log("errorHandler data: "+k,1),o||qt.showErrorWord(500),p(k),y()}function y(){m.off(Laya.Event.COMPLETE,null,g),m.off(Laya.Event.ERROR,null,b),Laya.Pool.recover("HttpRequest",m)}})}static async pingServer(e){return new Promise(t=>{if(!e){t(9999);return}e.startsWith("@")&&(e=e.substring(1));let i=e;i.includes("?")&&(i=i.split("?")[0]);let s=()=>{let a=Date.now(),u=!1,p=new XMLHttpRequest;p.onreadystatechange=function(){if(!u&&p.readyState>=1&&p.readyState<4){let m=Date.now()-a;m>0&&(u=!0,t(m))}},p.onload=function(){if(!u){let m=Date.now()-a;u=!0,t(m>0?m:1)}},p.onerror=function(m){if(!u){let h=Date.now()-a;u=!0,t(h>0?h:500)}},p.timeout=5e3,p.ontimeout=function(){u||(u=!0,t(5e3))};try{let m=Date.now(),h=Math.floor(Math.random()*1e4),f=`${i}?_t=${m}&r=${h}`;p.open("GET",f,!0),setTimeout(()=>{try{p.send()}catch{u||(u=!0,t(9999))}},10)}catch{u||(u=!0,t(9999))}setTimeout(()=>{u||(u=!0,t(9999))},5500)};(()=>{let a=Date.now(),u=!1,p=new Image;p.onload=function(){if(!u){let g=Date.now()-a;u=!0,t(g>0?g:1)}},p.onerror=function(){if(!u){let g=Date.now()-a;u=!0,g>0?t(g):s()}},setTimeout(()=>{u||(u=!0,s())},3e3);let m=Date.now(),h=Math.floor(Math.random()*1e4),f=`${i}?_t=${m}&r=${h}&type=image`;p.src=f})()})}};lr.httpRoot=getServer(),lr.needHeart=!0,lr.stopHeartInRoom=!1,lr.stopHeartInStage=!1,lr.lastPreContractstartRoomId=-1,lr.lastPrecontractReadyRoomId=-1,lr.seq=0;var wt=lr;var Wa=class{constructor(){this.extra={}}};var vr=class r{constructor(e=0){this._m_iLevel=0;this._m_arrDisc=[];this.newAddCnt=0;this.isScholarship=!1;this.isLvUp=!1;this.needTip=!0;this.m_bSalon=!1;this.m_bIsSetId=!1;e!=0&&(this.m_iId=e)}get m_sIcon(){return this._m_sIcon}set m_sIcon(e){this._m_sIcon=e}get m_iLevel(){return this._m_iLevel>0?this._m_iLevel:1}set m_iLevel(e){this._m_iLevel=e||0}get m_iNum(){return this._m_iNum}set m_iNum(e){this._m_iNum=e}get m_iPk(){return this._m_iPk}set m_iPk(e){this._m_iPk=e}copyItem(){let e=new r;return e.m_iId=this.m_iId,e.m_iOriginalId=this.m_iOriginalId,e}get m_bTry(){return this.m_iId==this.m_iOriginalId?this._m_bSet=!1:this._m_bSet=!0,this._m_bSet}get m_strName(){return z.getLanguage(this.itemItem.name)}set m_bTry(e){this._m_bSet=e}get m_iId(){return this._m_iId}set m_iId(e){this._m_iId=e,this.m_bIsSetId||(this.m_bIsSetId=!0,this.m_iOriginalId=e),this.setConfigData()}setConfigData(){if(this.m_iId!=0){if(this.itemItem=ee.m_dicItems.get(this.m_iId.toString()),!this.itemItem){console.log("[          <items> find out id:"+this.m_iId+"             ]");return}if(this.subType=parseInt(this.itemItem.subType+""),this.backType=parseInt(this.itemItem.backPack+""),this.type=parseInt(this.itemItem.type+""),this.m_sIcon=this.itemItem.icon+"",this.itemItem.buy_price){this.m_iPrice=this.itemItem.buy_price[0][1];let e=this.itemItem.buy_price[0][0],t=ee.m_dicItems.get(e);t&&(this.m_strBuyIcon=re.getItemIcon(t.icon))}this.itemItem.sell_price&&(this.m_iSellPrice=parseFloat(this.itemItem.sell_price[0][1])),this.m_iQuality=this.itemItem.quality,this.setQualityData()}}setQualityData(){this.m_arrQualityData=this.itemItem.starArr}get getIconURL(){return re.getItemIcon(this.itemItem.icon)}copy(){let e=new r(this.m_iId);return e.m_iLevel=this.m_iLevel,e}compareName(){return z.getLanguage(this.itemItem.name)}compareQuality(){return parseFloat(this.m_iQuality+"")}compareSellPrice(){return parseFloat(this.itemItem.sell_price[1]+"")}compareNum(){return parseFloat(this.m_iNum+"")}compareLevel(){return parseFloat(this.m_iLevel+"")}compareTypeId(){return parseInt(this.m_iId+"")}};var r1=class r{constructor(){this._isPop=!1;w.on(S.EVENT_CHECK_REMAIN,this,this.onCheckRemain)}static getInstance(){return r._instance||(r._instance=new r),r._instance}get model(){return cr}get isPop(){return this._isPop}startShow(){console.log("startShow");var e=this.model.hasRemain();!this._isPop&&e&&(this._isPop=!0,e instanceof vr?w.event(S.EVENT_OPEN_MODULE,T.ItemGetDialog):w.event(S.EVENT_OPEN_MODULE,T.HeroGetDialog))}onCheckRemain(e){if(e==T.ItemGetDialog||e==T.HeroGetDialog){var t=this.model.hasRemain();t?t instanceof vr?w.event(S.EVENT_OPEN_MODULE,T.ItemGetDialog):w.event(S.EVENT_OPEN_MODULE,T.HeroGetDialog):this._isPop=!1}}};var gs=r1.getInstance();var i1=class r{constructor(e){this._list=[];this.needPop=!0;this.autoPop=!0}static getInstance(){return r._instance||(r._instance=new r(new n1)),r._instance}get service(){return gs}addItem(e,t=!1){let i=new vr;i.m_iId=e.m_iId,i.newAddCnt=e.newAddCnt,i.m_iLevel=e.m_iLevel,i.isLvUp=e.isLvUp,i.m_bNew=e.m_bNew,this._list.push(i),t&&this.service.startShow()}addHeroItem(e,t=!1){let i={};i.id=e.id,i.newAddCnt=e.newAddCnt,i.lv=e.lv,i.isLvUp=e.isLvUp,i.m_bNew=e.m_bNew,this._list.push(i),t&&this.service.startShow()}addItems(e,t=!1){this._list=this._list.concat(e),t&&this.service.startShow()}hasRemain(){return this._list.length>0?this._list[0]:null}get needListener(){return this._list.length>=2}addConsumeByServer(e){this._list.push(e)}addConsume(e,t){this._list.push([e,t])}getNextItem(){return this._list.length>0?this._list[0]:null}getOneItem(){return this._list.length>0?this._list.shift():null}},n1=class{},cr=i1.getInstance();var ig=class{constructor(){this.m_dicItemList=new Ne,this.m_dicTypeList=new Ne,this.m_dicSubTypeList=new Ne,this.m_dicBackList=new Ne}initData(e){this.m_dicItemList=new Ne,this.m_dicTypeList=new Ne,this.m_dicSubTypeList=new Ne,this.m_dicBackList=new Ne;let t;for(let s=0;s<e.length;s++){t=new vr;var i=e[s];t.m_iId=i.id,i.pk&&(t.m_iPk=i.pk),t.m_iId=i.id,t.m_iNum=i.count,t.m_iNum>0&&this.pushItem(t)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}getCountById(e,t=!0){return ee.m_dicItems.get(e)==null?0:this.getItemCountById(e,t)}pushItem(e){this.m_dicItemList.set(e.m_iId,e),this.m_dicTypeList.get(e.type)==null&&this.m_dicTypeList.set(e.type,new Ne),this.m_dicSubTypeList.get(e.subType)==null&&this.m_dicSubTypeList.set(e.subType,new Ne),this.m_dicBackList.get(e.backType)==null&&this.m_dicBackList.set(e.backType,new Ne),this.m_dicTypeList.get(e.type).set(e.m_iId,e),this.m_dicSubTypeList.get(e.subType).set(e.m_iId,e),this.m_dicBackList.get(e.backType).set(e.m_iId,e)}removeItem(e){this.m_dicItemList.remove(e.m_iId),this.m_dicTypeList.get(e.type).remove(e.m_iId),this.m_dicSubTypeList.get(e.subType).remove(e.m_iId),this.m_dicBackList.get(e.backType).remove(e.m_iId)}updateData(e,t=!1,i=!0){console.log("updateData: ",e,t,i);let s=[],o=!1,a;for(let u=0;u<e.length;u++){e[u]instanceof Array?(a=new Wa,a.id=e[u][0],a.count=e[u][1]):a=e[u];let p=this.m_dicItemList.get(a.id);p==null&&(p=new vr(a.id),this.pushItem(p),p.m_bNew=!0),t?p.m_iNum=a.count:(p.newAddCnt=a.count,p.m_iNum=p.m_iNum+a.count),s.push(p.m_iId),p.m_iNum<=0&&this.removeItem(p),p.newAddCnt>0&&cr.needPop&&i&&(cr.addItem(p),o=!0)}o&&cr.needPop&&cr.autoPop&&gs.startShow(),s.length>0&&w.event(S.PACKAGE_UPDATE_ITEM,[s])}getItemById(e){return this.m_dicItemList.get(e)}getItemsBySubType(e){let t=this.m_dicSubTypeList.get(e);return t==null&&(t=[]),t}getListByType(e){let t=[];return this.m_dicTypeList.get(e)&&(t=this.m_dicTypeList.get(e).values.slice()),t.sort(this.sortOnQa),t}getBackByType(e){let t=[];return this.m_dicBackList.get(e)&&(t=this.m_dicBackList.get(e).values.slice()),t.sort(this.sortOnQa),t}async getQuan(e){let t=[];var s=(await wt.requestPost("wxgame/hero/loserTicketBagList",{type:e},!0,!0)).data;let o;for(let p=0;p<s.length;p++){o=new vr;var a=s[p];o.m_iId=a.id,a.pk&&(o.m_iPk=a.pk),o.m_iId=a.id,o.m_iNum=a.count,a.extra&&a.extra.prize&&(o.prizeStatus=2),a.extra&&a.extra.expTime?o.expTime=parseFloat(a.extra.expTime):o.expTime=0;var u=j.m_serverTime;u>o.expTime?e==3&&t.push(o):a.extra&&a.extra.onChain?(o.chainStatus=1,e==1&&t.push(o)):e==2&&t.push(o)}return t.sort(this.sortOnExpTime),t}getListBySubType(e){let t=[];return this.m_dicSubTypeList.get(e)&&(t=this.m_dicSubTypeList.get(e).values.slice()),t.sort(this.sortOnQa),t}sortOnQa(e,t){let i=e.itemItem.sort,s=t.itemItem.sort;return i<s?-1:i>s?1:0}sortOnExpTime(e,t){let i=e.expTime,s=t.expTime;return i<s?1:i>s?-1:0}getItemCountById(e,t=!0){let i=this.getItemById(e);return i?i.m_iNum:0}};var s1=class r{constructor(){this.pools=new Map;this.configs=new Map}static getInstance(){return r._instance||(r._instance=new r),r._instance}register(e,t,i=0,s=1/0){this.configs.set(e,{factory:t,maxSize:s}),this.pools.set(e,[]);for(let o=0;o<i;o++)this.release(e,t())}get(e,...t){let i=this.pools.get(e);if(!i)throw new Error(`Type ${e.name} not registered`);let s=i.length>0?i.pop():this.configs.get(e).factory();return s.init&&s.init(...t),s}release(e,t){let i=this.configs.get(e);if(!i)throw new Error(`Type ${e.name} not registered`);let s=this.pools.get(e);t.reset&&t.reset(),s.length<i.maxSize&&s.push(t)}clear(e){this.pools.set(e,[])}clearAll(){this.pools.clear()}},Wk=s1.getInstance();var o1=class r{constructor(){this.timeZoneOff=0;this.hearIntervalSceond=10*60;this.nodeId=1001;this.currentNodeUrl="https://wss-room-sg.queengame.io/test-ping";this._timeStamp=0;this._m_strLanguage=1;this.isLanChanged=!1;this.lastTimestamp=0;this._m_serverTime=0;this.redDotData=[];this.friendNum=0;this.headId=10001;this.countryId=1010;this.colorId=1;this._guildIcon=2006;this.tokenData=void 0;this.rechargeEnd=!1}async initData(){}get m_serverTime(){let e=Date.now();return this._m_serverTime+(e-this.lastTimestamp)}set m_serverTime(e){this._m_serverTime=e,this.lastTimestamp=Date.now()}get guildIcon(){return this._guildIcon}set guildIcon(e){this._guildIcon=e}get m_strLanguage(){return this._m_strLanguage}set m_strLanguage(e){this._m_strLanguage=e}static getInstance(){return r._instance||(r._instance=new r),r._instance}init(){this.m_packageData=new ig,Wk.register(ft,()=>new ft,5,200)}onLanChange(e){let t=parseInt(e[0]),i=parseInt(e[1]);switch(t){case 1:i==1&&qe.reload();break;case 2:break}}get timeStamp(){return this._timeStamp+(Laya.Browser.now()-this.recordStampTime)/1e3}set timeStamp(e){this.recordStampTime=Laya.Browser.now(),this._timeStamp=e}itemsDataUpdataHandler(e,t,i){this.m_packageData.updateData(e,t,i),w.event(S.EVENT_ITEM_UPDATE)}updatePlayerInfo(e){this.playerDto||(this.playerDto=new fs),this.playerDto.pid=e.roleId,this.playerDto.name=e.userName,this.playerDto.icon=e.icon,this.playerDto.exp=e.exp,this.playerDto.code=e.code,this.playerDto.country=e.country,this.playerDto.invite=e.invite,this.playerDto.invNum=e.invNum,this.playerDto.lv=e.lv,this.playerDto.snakeId=e.snakeId,this.playerDto.skinId=e.skinId,this.playerDto.score=e.score,this.playerDto.createTime=e.createTime,this.playerDto.maxKill=e.maxKill,this.playerDto.maxAlive=e.maxAlive,this.playerDto.skinId=e.skin,w.event(S.ROLE_INFO_CHANGE)}getConsumeValue(e){e=parseInt(e.toString());var t=this.playerDto.coins[e];return t>0?t:0}moneyInfoHander(e,t=!0,i=!0){let s=!1,o=!1,a=0;for(let u of e)o=!1,u[0]==$e.TYPE_EXP?(a=parseInt(u[1]+"")-this.playerDto.exp,this.playerDto.exp=parseInt(u[1]+""),o=a>0):(a=parseFloat(u[1]+"")-this.playerDto.coins[u[0]],this.playerDto.coins[u[0]]=parseFloat(u[1]+""),o=a>0),o&&cr.needPop&&i&&(s=!0,cr.addConsumeByServer([u[0],a]));t&&w.event(S.ROLE_INFO_CHANGE),s&&cr.autoPop&&gs.startShow()}getRedDotById(e){return!!(this.redDotData&&this.redDotData.indexOf(e)>-1)}},j=o1.getInstance();var a1=class r{constructor(){this._lanTypesById=new Ne,this._lanTypesByType=new Ne,this._configData=new Ne,this._configData1=new Ne}static getInstance(){return r._instance||(r._instance=new r),r._instance}initLanTypes(e){this._lanTypesById=new Ne,this._lanTypesByType=new Ne;for(let t in e){let i=new Ss;if(i.init(e[t]),parseInt(i.if_open)!=1)continue;let s=i.id,o=i.type;this._lanTypesById.set(s,i),o&&o!=""&&this._lanTypesByType.set(o,i)}}getLanTypes(){return this._lanTypesById}getLanIdByType(e){if(this._lanTypesByType){let t=this._lanTypesByType.get(e);if(t)return parseInt(t.id.toString())}return 1}getLanTypeById(e){if(this._lanTypesById){let t=this._lanTypesById.get(e);if(t)return t.type}return"en"}initConfigLan(e){this._configData=e}initConfigLan1(e){this._configData1=e}initUILan(e){Laya.Text.langPacks={};let t;for(t in e){let i=e[t].value;Laya.Text.langPacks[t]=i}}changeBrToN(e){let t=/<br>/g;for(;e.indexOf("<br>")!=-1;)e=e.replace(t,`
`);return e}replacePlaceholder(e,t){if(e=="")return"";let i=/{(\d+)}/g;return t.length>0&&(e=e.replace(i,function(){return t[arguments[1]]})),this.replaceLanByBR(e)}replaceLanByBR(e){return e+""}getEnglishLanguage(e,...t){return this.getEnglishLanguageReplace(e,t)}getEnglishLanguageReplace(e,t){if(this._configData1&&this._configData1[e]){let i=this._configData1[e].value;if(i&&i!="")return this.replacePlaceholder(i,t)}return this.replacePlaceholder(e+"",t)}getLanguage(e,...t){return this.getLanguageReplace(e,t)}getLanguageReplace(e,t){if(this._configData&&this._configData[e]){let i=this._configData[e].value;if(i&&i!="")return this.replacePlaceholder(i,t)}return this.replacePlaceholder(e+"",t)}getLanguageMulti(e,t){if(console.log("getLanguageMulti",t),this._configData&&this._configData[e]){let i=this._configData[e].value;if(i&&i!="")return this.replacePlaceholderMulti(i,t)}return this.replacePlaceholder(e+"",t)}replacePlaceholderMulti(e,t){if(e=="")return"";let i=/{(\d+)}/g;return t.length>0&&(e=e.replace(i,function(){var s=t[arguments[1]];if(typeof s=="object")s=JSON.parse(s),s=r.getInstance().parseObj(s);else if(typeof s=="string")try{s=JSON.parse(s),typeof s=="object"&&(s=r.getInstance().parseObj(s))}catch{}return s})),this.replaceLanByBR(e)}parseObj(e){if(e.hasOwnProperty("tableType")){if(e.tableType==1){var t=ee.m_dicItems.get(e.id);t&&(e=r.getInstance().getLanguage(t.name))}else if(e.tableType==2){var i=ee.m_dicArenaDic.get(e.id);i&&(e=r.getInstance().getLanguage(i.name))}}else e=r.getInstance().getMultiLan(e);return e}getUILang(e,t=null,i=null,s=null,o=null){if(e=Laya.Text.langPacks&&Laya.Text.langPacks[e]?Laya.Text.langPacks[e]:e,arguments.length>1)for(let a=0,u=arguments.length;a<u;a++)e=e.replace("{"+a+"}",arguments[a+1]);return e}getMultiLan(e){var t=parseInt(j.m_strLanguage.toString()),i;return e&&(i=e[t],i||(i=e[ks.Lan_en])),i}FGM_GetLanguage(){let e=function(i){console.log("initGame->-----------------------------FGM_GetLanguage:=="+i),i&&(ce.User_Lan=i)},t=Laya.LocalStorage.getItem(ce.COOKIE_CF_LAN);!t||t==""?e(this.language):e(t)}get language(){return"en"}FGM_SetLanguage(e){e&&e!=""&&Laya.LocalStorage.setItem(ce.COOKIE_CF_LAN,e)}dispose(){}},z=a1.getInstance();var l1=class r{constructor(){this._curErrTxt=""}static getInstance(){return r._instance||(r._instance=new r),r._instance}initErrData(e){this.errData=e}get(e){return this.errData[e]?this.errData[e].words:(console.warn("服务端错误码语言包未配表 错误码："+e),e)}showErrorWord(e,...t){var i=this.getLanguage2(e,t);De.notice(i)}getLanguage2(e,t){if(this.errData&&this.errData[e]){let i=this.errData[e].words;if(i&&i!="")return this._curErrTxt=z.replacePlaceholder(i,t),this._curErrTxt}return this._curErrTxt=z.replacePlaceholder(e+"",t),this._curErrTxt}showErrByString(e,t="#ff0000"){this._curErrTxt=e;let i=new Laya.Label(this._curErrTxt);i.width=500,i.align="center",i.height=40,i.fontSize=26,i.color=t,i.mouseEnabled=!1,i.strokeColor="#000000",i.stroke=.5,Laya.stage.addChild(i),i.x=(Laya.stage.width-i.width)/2,i.y=(Laya.stage.height-i.height)/2,Laya.Tween.to(i,{y:i.y-100,alpha:0},500,null,Laya.Handler.create(this,this.completeHandler,[i]),1e3)}completeHandler(e){e&&e.parent&&e.parent.removeChild(e)}dispose(){this.errData=null}},qt=l1.getInstance();var Gt=class Gt{constructor(){this.resArr=["gameIcon/snakeMatch/snakes/img_head101.png","gameIcon/snakeMatch/snakes/img_head102.png","gameIcon/snakeMatch/snakes/img_head103.png","gameIcon/snakeMatch/snakes/img_body101.png","gameIcon/snakeMatch/snakes/img_body102.png","gameIcon/snakeMatch/snakes/img_body103.png",{url:"scenes/mainView/MainScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBodySpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBeanSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/DamageNumber.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtLoadingView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtNoticeView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/asset/AssetNewScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/createRole/RoleInfoScene.ls",type:Laya.Loader.HIERARCHY},"gameIcon/spine/img_ziyousai.png","gameIcon/spine/img_she.png","gameIcon/spine/img_qianbao.png","gameIcon/spine/img_gonghui.png","gameIcon/spine/img_cion4.png","gameIcon/spine/img_cion2.png","gameIcon/spine/img_cion1.png","gameIcon/spine/img_anniu3.png","gameIcon/spine/img_anniu2.png","gameIcon/spine/img_anniu1.png","gameIcon/spine/img_jingjisai.png","gameIcon/spine/shop/egg/img_egg.png"];this.m_arrPreResource=["config/spot.json"];this.m_arrInitResource=["config/general.json","config/head.json","config/country.json","config/shop.json","config/snake.json","config/foods.json","config/item.json","config/arena.json","config/arenaType.json","config/snakeLengthRules.json","config/node.json","config/currencyAddress.json","config/aCoin.json","config/coinAddress.json","config/language.json","config/level.json","config/room.json"];this.m_objModuleReource={MainScene:["res/atlas/main.atlas"],ShopScene:[],MailScene:[],SettingScene:[],RoleInfoScene:[],RankSceneBase:[],RankScene:[],ClubScene:[],AssetNewScene:[],CommentDialog:["res/atlas/comment.atlas"],GuideView:["res/atlas/guide.atlas","res/atlas/ShopView.atlas","config/newplayer.json"],SelectHeadDialog:[],KnapsackScene:["res/atlas/mainUI1.atlas"]};this.m_objModuleViews={BaseAlertDialog:"scenes/baseAlert/BaseAlertDialog.lh",NoServerView:"scenes/createRole/NoServer.lh",CreateLoginView:"scenes/createRole/CreateLoginView.lh",ChangeHeadDialog:"scenes/createRole/ChangeHeadDialog.lh",HeroGetDialog:"scenes/shop/HeroGetDialog.lh",BuyTicketDialog:"scenes/shop/BuyTicketDialog.lh",ItemGetDialog:"scenes/item/ItemGetDialog.lh",EquipStarUpDialog:"scenes/item/EquipStarUpDialog.lh",RewardGetDialog:"scenes/item/RewardGetDialog.lh",KnapsackTipDialog:"scenes/item/KnapsackTipDialog.lh",SelectHeadDialog:"scenes/createRole/SelectHeadDialog.lh",TxtNoticeView:"scenes/notice/TxtNoticeView.lh",NoticeDialog:"scenes/notice/NoticeDialog.lh",HelpDialog:"scenes/notice/HelpDialog.lh",ImgDialog:"scenes/notice/ImgDialog.lh",ChampDetailDialog:"scenes/asset/ChampDetailDialog.lh",ChampRecordDialog:"scenes/asset/ChampRecordDialog.lh",RoleInfoDialog:"scenes/createRole/RoleInfoDialog.lh",RemGetDialog:"scenes/createRole/RemGetDialog.lh",CreateRoomDialog:"scenes/mainView/CreateRoomDialog.lh",CreateRentalDialog:"scenes/shop/CreateRentalDialog.lh",MyLeasedDialog:"scenes/shop/MyLeasedDialog.lh",MyRentedDialog:"scenes/shop/MyRentedDialog.lh",MyRentalBuyDialog:"scenes/shop/MyRentalBuyDialog.lh",EnterRoomView:"scenes/mainView/EnterRoomView.lh",InputPwdDialog:"scenes/mainView/InputPwdDialog.lh",RoomInfoDialog:"scenes/mainView/RoomInfoDialog.lh",HeroDetailDialog:"scenes/hero/HeroDetailDialog.lh",MatchEndRankView:"scenes/match/MatchEndRankView.lh",MatchEndTeamRankView:"scenes/match/MatchEndTeamRankView.lh",MatchEndRewardTokensDialog:"scenes/match/MatchEndRewardTokensDialog.lh",MyBookingView:"scenes/airdrop/MyBookingView.lh",UnionMemberView:"scenes/union/UnionMemberView.lh",UnionListView:"scenes/union/UnionListView.lh",CreateSubUnionView:"scenes/union/CreateSubUnionView.lh",ChangeUnionIconDialog:"scenes/union/ChangeUnionIconDialog.lh",MySubUnionView:"scenes/union/MySubUnionView.lh",UnionMemberApplyView:"scenes/union/UnionMemberApplyView.lh",UnionReferralView:"scenes/union/UnionReferralView.lh",UnionTransferView:"scenes/union/UnionTransferView.lh",TicketTransferView:"scenes/union/TicketTransferView.lh",HeroTransferView:"scenes/hero/HeroTransferView.lh",BanAccountView:"scenes/match/BanAccountView.lh",MatchReadyView:"scenes/match/MatchReadyView.lh",MatchEndView:"scenes/match/MatchEndView.lh",GameSettingLanguageDialog:"scenes/gameSetting/GameSettingLanguageDialog.lh",SkillTipDialog:"scenes/hero/SkillTipDialog.lh",TransferRecordDialog:"scenes/hero/TransferRecordDialog.lh",InviteConfimDialog:"scenes/airdrop/InviteConfimDialog.lh",ApplyConfimDialog:"scenes/airdrop/ApplyConfimDialog.lh",CreateSubWalletDialog:"scenes/scholarship/CreateSubWalletDialog.lh",WalletChooseHeroDialog:"scenes/scholarship/WalletChooseHeroDialog.lh",WalletChoosePropsDialog:"scenes/scholarship/WalletChoosePropsDialog.lh",EmployInfoDialog:"scenes/scholarship/EmployInfoDialog.lh",HireDetailDialog:"scenes/asset/HireDetailDialog.lh",ProxyDetailDialog:"scenes/asset/ProxyDetailDialog.lh",WithDrawRecordDialog:"scenes/asset/WithDrawRecordDialog.lh",NodeRevenueRecordDialog:"scenes/asset/NodeRevenueRecordDialog.lh",WithdrawDialog:"scenes/asset/WithdrawDialog.lh",DepositDialog:"scenes/asset/DepositDialog.lh",CreateClubDialog:"scenes/club/CreateClubDialog.lh",CreateClubRoomDialog:"scenes/club/CreateClubRoomDialog.lh",SettingRateDialog:"scenes/club/SettingRateDialog.lh",ReferralDialog:"scenes/createRole/ReferralDialog.lh",BuyPropDialog:"scenes/shop/BuyPropDialog.lh",JoinRoomDialog:"scenes/mainView/JoinRoomDialog.lh",SnakeUpgradeDialog:"scenes/knapsack/SnakeUpgradeDialog.lh",SnakeUpgradeSuccessDialog:"scenes/knapsack/SnakeUpgradeSuccessDialog.lh",PlayerUpgradeSuccessDialog:"scenes/mainView/PlayerUpgradeSuccessDialog.lh"};this.m_objConfigReource={};this.m_commonResource=new Ne;this.loadingView=Laya.Browser.window.loadingView;this.ii=100;this.baseUrl="https://cdn.snake.ai/snake/"}static getInstance(){return Gt._instance==null&&(Gt._instance=new Gt),Gt._instance}init(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),this.initGameLanguage()}initGameLanguage(){Gt.GameLanguage_URL="config/language.json",Laya.loader.load(Gt.GameLanguage_URL,Laya.Handler.create(this,this.initGameResource))}initGameResource(e){if(e==null)return;let t=Gt.getInstance().getResBySetURL(Gt.GameLanguage_URL);z.initLanTypes(t.data),Laya.loader.clearRes(Gt.GameLanguage_URL),this.onConfigLoaded()}onError(e){}onConfigLoaded(){let e=new ln;e.ID=4,e.Event="加载语言包信息",qe.sendCustumEvent(4,null,e),ce.ignoreLang||(j.m_strLanguage=z.getLanIdByType(ce.User_Lan)),this.m_UILang="config/lang_english"+j.m_strLanguage+".json",this.m_NomalLang="config/english"+j.m_strLanguage+".json",this.m_NomalLang1="config/english1.json",this.m_ErrorLang="config/error"+j.m_strLanguage+".json",this.m_arrPreResource.push(this.m_UILang),this.m_arrPreResource.push(this.m_NomalLang),this.m_arrPreResource.push(this.m_NomalLang1),this.m_arrPreResource.push(this.m_ErrorLang),this.initResourceURL(this.m_arrPreResource,!0),this.initResourceURL(this.m_arrInitResource,!0),this.addFont1()}addFont1(){Laya.loader.load("res/font/CookieRun Regular.otf",Laya.Loader.TTF).then(()=>{this.loadDemoResource()})}loadDemoResource(){Laya.loader.load(this.resArr,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{nt.init(),this.damageNumPrefab=Laya.loader.getRes("scenes/match/DamageNumber.lh"),this.aniSkPrefab=Laya.loader.getRes("scenes/hero/AniSk.lh"),this.roleAniPrefab=Laya.loader.getRes("scenes/match/MatchSnakeSpr.lh"),this.matchSnakeBodyPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBodySpr.lh"),this.matchSnakeBeanPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBeanSpr.lh");var e=this.roleAniPrefab.create();console.log(" ================ roleAniPrefab: "+e);var t=this.matchSnakeBodyPrefab.create();console.log(" ================ snakeBodyPrefab: "+t),this.onLoadThreeDimen()})}onLoadThreeDimen(){Laya.loader.load(this.m_arrPreResource,Laya.Handler.create(this,this.onPreAssetLoaded),Laya.Handler.create(this,this.onPreAssetPress2,null,!1))}onPreAssetPress1(e){this.va=(e*100*.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetPress2(e){this.va=(e*100*.5+.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetLoaded(e){if(!e)return;let t=Laya.Browser.now();em.initSpotCfgData(),this.initResourceURL(this.m_objModuleReource),this.initResourceURL(this.m_objConfigReource),qe.sendCustumEvent(5),ee.preInit(),this.setGlobalLanguage(),qe.sendCustumEvent(6),w.event(S.EVENT_BACK_TO_LOGIN),this.loadingView&&this.loadingView.loading(100),console.log("-----------------------preload-time:"+(Laya.Browser.now()-t))}setGlobalLanguage(){let e=Gt._instance.getResByURL(this.m_NomalLang);z.initConfigLan(e.data);let t=Gt._instance.getResByURL(this.m_NomalLang1);z.initConfigLan1(t.data);let i=Gt._instance.getResByURL(this.m_UILang);z.initUILan(i.data);let s=Gt._instance.getResByURL(this.m_ErrorLang);qt.initErrData(s.data),this.clearResUrlByRoot(this.m_UILang,!0),this.clearResUrlByRoot(this.m_NomalLang,!0),this.clearResUrlByRoot(this.m_NomalLang1,!0),this.clearResUrlByRoot(this.m_ErrorLang,!0)}initResourceURL(e,t=!1){if(e instanceof Array)this.setResURLArr(e,t);else if(e instanceof Object)for(let i in e)this.setResURLArr(e[i],t)}setResURLArr(e,t){let i,s;for(let o=0;o<e.length;o++)t?(this.m_commonResource.set(e[o],!0),s=this.setResURL(e[o]),i=this.getTypeFromUrl(s),e[o]={url:s,type:i,size:1,priority:1}):this.m_commonResource.get(e[o])?(e.splice(o,1),o--):(s=this.setResURL(e[o]),i=this.getTypeFromUrl(s),e[o]={url:s,type:i,size:1,priority:1})}getTypeFromUrl(e){let{ext:t,typeId:i,main:s,loaderType:o}=Laya.Loader.getURLInfo(e);Gt._extReg.lastIndex=e.lastIndexOf(".");let a=Gt._extReg.exec(e);return a&&a.length>1?a[1].toLowerCase():"text"}setResURL(e){return e}clearResUrlByRoot(e,t=!1){let i=e;Laya.loader.clearRes(i)}hasFormatEffectUrl(e){return e.indexOf("effect/")>=0}setItemResURL(e){return e&&e.hasOwnProperty("item_img")?this.setResURL("icon/"+e.item_img+".png"):""}setThreeDimenUrl(e){return e?this.setResURL("threeDimen/"+e):""}getThreeDimenUrl(e){let t=this.setResURL("threeDimen/"+e);return Laya.Loader.getRes(t)}getResByURL(e){let t=Gt.getInstance().setResURL(e);return Laya.Loader.getRes(t)}getResBySetURL(e){return Laya.Loader.getRes(e)}loadModuleUrl(e,t=null,i=null,s=1,o=!0){console.log("loadModuleUrl m_strName: "+e),this.ii++;let a=Gt.getInstance().m_objModuleReource[e];if(a==null||a.length<1){t.run();return}Laya.loader.load(a,Laya.Handler.create(this,this.loadItemComplete,[t,a]),Laya.Handler.create(this,this.onLoadProgress,[e],!1),i,s,o,this.ii.toString())}loadItemComplete(e,t){this.usedUrlDic||(this.usedUrlDic=new Ne);for(let i in t){let s=t[i].url,o=this.usedUrlDic.get(s);o?this.usedUrlDic.set(s,++o):this.usedUrlDic.set(s,1)}e.run()}clearModuleUrl(e){console.log("clearModuleUrl m_strName: "+e);let t=Gt.getInstance().m_objModuleReource[e];for(let i in t){let s=t[i].url;if(this.usedUrlDic){let o=this.usedUrlDic.get(s);o-=1,o<1?(this.usedUrlDic.remove(s),Laya.loader.clearRes(s)):this.usedUrlDic.set(s,o)}}}onLoadProgress(e,t){}loadResource(e,t=null,i=null,s=null,o=1,a=!0){Laya.loader.load(e,t,i,s,o,a)}getNodeIcon(e){return this.setResURL("gameIcon/node/img_"+e+".png")}getCountryIcon(e){return this.setResURL("gameIcon/country/img_"+e+".png")}getSnakeHeadIcon(e){return(e==0||e=="0")&&console.error("id is 0"),this.setResURL("gameIcon/snakeMatch/snakes/img_head"+e+".png")}getCurrencyIcon(e){return`https://static.cryptoarena.io/images/token/token_${e}.png`}getSnakeBodyIcon(e){return this.setResURL("gameIcon/snakeMatch/snakes/img_body"+e+".png")}getFoodIcon(e){return this.setResURL("gameIcon/snakeMatch/foods/img_"+e+".png")}getShopItemIcon(e){return this.setResURL("res/shop/img_"+e+".png")}getItemIcon(e){return`https://static.cryptoarena.io/images/item/img_${e}.png`}getSnakeIcon(e){return`https://static.cryptoarena.io/images/snake/snake_${e}.png`}getItemBgIcon(e){return this.setResURL("gameIcon/items/itemBg/img_"+e+".png")}getItemBigIcon(e){return this.setResURL("gameIcon/items/itemBig/img_"+e+".png")}getItemBigBigIcon(e){return this.setResURL("gameIcon/items/itemBigBig/img_"+e+".jpg")}getItemQualityIcon(e){return this.setResURL("gameIcon/items/itemQuality/img_"+e+".png")}getMoneyIcon(e){return this.setResURL("gameIcon/items/money/img_"+e+".png")}getMatchSkillIcon(e){return this.setResURL("gameIcon/skill/matchSkills/img_"+e+".png")}getSnakeAniJson(e){return this.setResURL(`gameIcon/spine/shop/snake${e}/img_she_${e}.json`)}getPlayerIcon(e){return parseInt(e)>0?this.setResURL("gameIcon/head/headCircle/img_"+e+".png"):e}getSoundURL(e,t=".ogg"){let i;return i=this.setResURL("mp3/"+e+t),i}getSoundURLogg(e){let t;return t=this.setResURL("mp3/"+e),t}getMapImg(e){return"gameIcon/map/"+e+"/img_map.jpg"}getHeroSkRes(){}getMapPrefab(e){return"gameIcon/map/map_"+e+".lh"}clearCache(){}};Gt._extReg=/\.(\w+)\??/g;var c1=Gt,re=c1.getInstance();var Fe=class r extends Laya.DialogManager{constructor(){super();this.views=new Ne;this.m_arrLoadingArr=[];if(r._instance)throw new Error("LayerManager是单例,不可new.");r._instance=this,Laya.Dialog.manager=this}static get intance(){return r._instance||(r._instance=new r),r._instance}openModule(t,i=null){w.event(S.EVENT_OPEN_MODULE,[t,i])}hasOpenView(t){return this.views.get(t)!=null}getOpenView(t){return this.views.get(t)}disposeView(t){if(this.getOpenView(t)){let i=this.getOpenView(t);if(i instanceof Array)for(let s=0;s<i.length;s++)i[s].close();else i.close()}}init(){w.on(S.EVENT_OPEN_MODULE,this,this.onModulePanel),w.on(S.EVENT_CLOSE_MODULE,this,this.disposeView)}initMainView(){}onModulePanel(t,i=null){console.log("ModuleManager.onModulePanel moudleName:"+t),this.m_arrLoadingArr.indexOf(t)==-1&&(this.getOpenView(t)||(nt.showLoading(!1),this.m_arrLoadingArr.push(t),re.loadModuleUrl(t,Laya.Handler.create(this,this.onLoaded,[t,i]))))}onLoaded(t,i=null){let s=this.m_arrLoadingArr.indexOf(t);s!=-1&&this.m_arrLoadingArr.splice(s,1);let o;var a=re.m_objModuleViews[t];console.log("onLoaded: ",t,a),Laya.loader.load(a).then(u=>{if(o=u.create(),i&&o.setOpenData(i),o.m_strName=t,this.getOpenView(t)){console.log("Module already open, skipping creation:",t),o.hideLoadingBySelf||nt.hideLoading();return}if(o instanceof Laya.Box)o=o,te.instence.addToLayer(o,o.m_iLayerType),te.instence.setPosition(o,o.m_iPositionType,o.m_ioffsetX,o.m_ioffsetY),this.addViewToModuleManger(o);else if(o instanceof Laya.Dialog){let p=o;p.m_iLayerType==te.M_POP?(p.isModal=!0,p.isShowEffect=!0,this.open(p,!1,!0)):(p.isShowEffect=!1,this.open(p)),this.addViewToModuleManger(p)}o&&w.event(S.EVENT_MODULE_ADDED,o),o.hideLoadingBySelf||nt.hideLoading()}).catch(u=>{console.error("onLoaded 加载失败",u)})}addViewToModuleManger(t){let i=t.m_strName;this.views.get(i)?this.views.get(i)instanceof Array?this.views.get(i).push(t):this.views.set(i,[this.views.get(i),t]):this.views.set(i,t),this.on(Laya.Event.CLOSE,this,this.removeViewFromModuleManger)}removeViewFromModuleManger(t){if(!t||!this.views)return;let i=t.m_strName;console.log("removeViewFromModuleManger viewName: "+i),t.off(Laya.Event.CLOSE,this,this.removeViewFromModuleManger);let s=this.views.get(i);if(s instanceof Array){let o=s.indexOf(t);o!=-1&&(s.splice(o,1),s.length==0&&this.views.remove(i))}else this.views.remove(i)}closeAll(){super.closeAll()}doClose(t){super.doClose(t),this.event(Laya.Event.CLOSE,t)}};var u1=class r{constructor(){this._inited=!1;this.stopAll=!1;this.roomWatcher=!1;this.matchWatcher=!1;this.heroReadyDic=new Ne;this.isPopUp=!1;this.frameIndex=0;this.rotateSpeed=500;this.speedRate=1;this.speed=6;this.time=0;this.dir=0;this.aimDir=0;this.bones=[ft.create(0,0)];this.init()}static getInstance(){return r._instance||(r._instance=new r),r._instance}init(){this._inited||(this._inited=!0)}get roomDto(){return this._roomDto}set roomDto(e){if(console.log("roomDto: ",e),this._roomDto=e,e){var t=j.playerDto.pid;if(e.watch){let i=e.watch.some(s=>s===t);this.roomWatcher=i}}}setRoomAnonymousLabel(e,t=-1){return t==-1&&(t=r._instance.roomDto.anonymous),t==1?Kr.ANONYMOUS_NAME:e}setMatchAnonymousLabel(e,t=-1){return t==-1&&(t=r._instance.matchDto.anonymous),!this.matchWatcher&&t==1?Kr.ANONYMOUS_NAME:e}setMatchAnonymousImg(e,t=-1){return t==-1&&(t=r._instance.matchDto.anonymous),!this.matchWatcher&&t==1?null:e}get matchDto(){return this._matchDto}set matchDto(e){if(console.log("matchDto: ",e),this._matchDto=e,e){var t=j.playerDto.pid;if(e.watch){let i=e.watch.some(s=>s===t);this.matchWatcher=i}e.startTime-e.nowTime>0?this.stopAll=!0:this.stopAll=!1}else this.stopAll=!1}setMatchRes(){this.heroReadyDic=new Ne;var e=this.roomDto.members.length,t=[],i=this.currArenaItem.mapid;if(this.heroReadyDic.get("map_"+i)==null){var i=r._instance.currArenaItem.mapid,s=re.getMapImg(i);t.push(s);var o=re.getMapPrefab(i);t.push(o),this.heroReadyDic.set("map_"+i,!0)}for(var a=0;a<e;a++){var u=this.roomDto.members[a];this.heroReadyDic.get(u.heroId+"_"+u.heroColor)==null&&this.heroReadyDic.set(u.heroId+"_"+u.heroColor,!0)}t.length>0&&Laya.loader.load(t,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{})}onPreAssetPress1(e){}async checkMatchRankData(){if(this.reward==null){let e=await wt.requestPost("wxgame/room/balanceInfo",{roomId:r._instance.matchDto.roomId});this.onGoMatchEndRank(e)}}onAiSetMatchEnd(e){this.msgEndbody=e,w.event(S.EVENT_GameScene_Gray),st.isMatching=!1,r._instance.stopAll=!0,Fe.intance.openModule(T.MatchEndView,[Oe.ARENA_TYPE_PVE,e])}onSetMatchEnd(e,t=!1){this.msgEndbody=e,(this.isPopUp||t)&&(w.event(S.EVENT_GameScene_Gray),this.onGoMatchEndRank(this.msgEndbody),this.isPopUp=!1)}onMockMatchEnd(){this.msgEndbody?(w.event(S.EVENT_GameScene_Gray),this.onGoMatchEndRank(this.msgEndbody)):this.isPopUp=!0}onGoMatchEndRank(e){st.isMatching=!1,r._instance.stopAll=!0,Fe.intance.openModule(T.MatchEndView,[Oe.ARENA_TYPE_PVP,e])}clearData(){console.log("clearData ",this.reward),this.roomDto=null,this.matchDto=null,this.reward=null,this.msgEndbody=null,this.isPopUp=!1,this.heroReadyDic=null,this.currArenaItem=null,this.roomWatcher=!1,this.matchWatcher=!1,st.close(),ie.getInstance().clear(),pt.clear(),Laya.Pool.clearBySign(Ri.POOL_NAME),Laya.Pool.clearBySign(Ci.POOL_NAME),Ar.destroy(),Ye.playMusicByName(Ye.soundName_bg,".mp3"),cr.needPop=!0,gs.startShow()}initMove(){var e=2643.420290296361,t=1137.5298576136008;this.frameIndex=6864922,console.log("TEST==== 蛇头坐标：",e,t,"当前帧：frameIndex: "+this.frameIndex),this.speedRate=1,console.log("TEST==== 加速倍数 speedRate：",this.speedRate),console.log("TEST==== 速度参数 speed：",this.speed,"rotateSpeed：",this.rotateSpeed,"defaultMoveInterval：",Q.snake.defaultMoveInterval),this.bones=[ft.create(e,t)];var i=74;this.dir=i;var s=Lt.getAngleToVec(i);s.normalize(),console.log("TEST==== 当前方向：",i,"向量：",s.x,s.y),this.toAimDir(78)}toAimDir(e){this.time=0,this.aimDir=e;var t=Lt.getAngleToVec(e);t.normalize(),console.log("TEST==== 目标方向：",e,"向量：",t.x,t.y);for(var i=0;i<30;i++)this.move(null)}move(e){this.time++,this.frameIndex++;for(let s=0;s<this.speedRate;s++){let o=this.aimDir-this.dir,a=this.rotateSpeed*Q.snake.defaultMoveInterval;if(Math.abs(o)<a)this.dir=this.aimDir;else{o=(o+360)%360,o>180&&(o-=360);var t=Math.abs(o)<a?o:a*(o>0?1:-1);this.dir+=t,this.dir>=360&&(this.dir-=360),this.dir<0&&(this.dir+=360)}let u=this.dir*Math.PI/180,p=ft.create(Math.cos(u),Math.sin(u));var i=this.bones[0].add(p.mul(this.speed));this.bones[0].assign(i),console.log("TEST==== 移动蛇头坐标：","第"+this.time+"次",this.bones[0].x,this.bones[0].y,"frameIndex: "+this.frameIndex)}}},ve=u1.getInstance();var Lt=class r{constructor(){}static judgePosition(e,t){let i=Math.atan2(t,e)*180/Math.PI;return i<0&&(i+=360),Math.floor(i)}static normalizeAngle(e){return e=e%360,e<0&&(e+=360),e}static distancePoint(e,t,i,s){return Math.sqrt((e-i)*(e-i)+(t-s)*(t-s))}get2D_Distance(e,t){return Math.sqrt(Math.pow(Math.abs(e),2)+Math.pow(Math.abs(t),2))}static rollCharacterByDir(e,t,i,s){let o=i;return r.rollCharacter(e,t,o,s)}static rollCharacter(e,t,i,s){let o=i*(Math.PI/180);var a=e+s*Math.cos(o),u=t+s*Math.sin(o),p=ve.currArenaItem.mapid,m=ee.m_dicMaps.get(p),h=m.offset;return a<h?a=h:a>m.width-h&&(a=m.width-h),u<h?u=h:u>m.height-h&&(u=m.height-h),console.log(`新的坐标：X=${a}, Y=${u}`),[a,u]}static getRandomPointInMap(){var e=ve.currArenaItem.mapid,t=ee.m_dicMaps.get(e),i=t.width,s=t.height,o=t.offset;let a=Math.floor(Math.random()*(i-2*o))+o,u=Math.floor(Math.random()*(s-2*o))+o;return{x:a,y:u}}static createDirectPath(e,t,i,s=40,o=25){for(var a=[],u=i*Math.PI/180,p=1;p<s;++p){var m=e,h=t+o*p,f=-(h-t)*Math.sin(u)+e,g=(h-t)*Math.cos(u)+t;a.push(f,g)}return a}static pointsBack(e,t){if(t<=0||!e||e.length<4)return e;for(var i=0,s=-1,o=-1,a=0;a<e.length;a+=2){var u=e[a],p=e[a+1];s>0&&o>0&&(i+=this.distancePoint(s,o,u,p)),s=u,o=p}if(i<t)return null;for(var m=e.concat(),h=0,f=0;m&&m.length>=4&&h<t;){var g=m.pop(),b=m.pop(),y=m[m.length-1],k=m[m.length-2];if(h+=this.distancePoint(k,y,b,g),f=h-t,f>0){var I=Math.atan2(y-g,k-b),A=I*180/Math.PI+90;I=A*Math.PI/180;var M=y+f,O=-(M-y)*Math.sin(I)+k,G=(M-y)*Math.cos(I)+y;m.push(O,G)}}return m}static createLinePath(e,t,i,s,o=25,a=0){var u=[],p=Math.atan2(s-t,i-e);p=(p*180/Math.PI-90)*Math.PI/180;for(var m=this.distancePoint(e,t,i,s)-a,h=0,f=0;m>h;){var g=e,b=t+o*f,y=-(b-t)*Math.sin(p)+e,k=(b-t)*Math.cos(p)+t;h=this.distancePoint(e,t,y,k),m>h&&u.push(y,k),f++}return a==0&&u.push(i,s),u}static rolePosTransform(e,t,i){var s=new Laya.Matrix;return s.rotate(Math.PI/180*(e.modelAngle-90)),s.translate(t.x,t.y),s.transformPoint(i)}static pointtInPolygon(e,t){for(var i=0,s=0;s<t.length;s++){var o=t[s],a=t[(s+1)%t.length];if(o.y!=a.y&&!(e.y<Math.min(o.y,a.y))&&!(e.y>=Math.max(o.y,a.y))){var u=(e.y-o.y)*(a.x-o.x)/(a.y-o.y)+o.x;u>e.x&&i++}}return i%2==1}static pointInPie(e,t,i,s,o,a){var u=Math.atan2(a.y-t,a.x-e)*180/Math.PI,p=this.distancePoint(e,t,a.x,a.y);return u>=i&&u<=s&&p<=o}static getRandInRound(e,t){return Math.floor(Math.random()*(t-e+1))+e}static getUnitVector(e){let i=e*(Math.PI/180),s=1*Math.cos(i),o=1*Math.sin(i);return new Laya.Point(s,o)}static getAngleToVec(e){let t=e*Math.PI/180,i=Math.cos(t),s=Math.sin(t);return ft.create(i,s)}static subtract(e,t){let i=new Laya.Point;return i.x=e.x-t.x,i.y=e.y-t.y,i}static getDistance(e,t){let i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)}static calculateDistance(e,t){let i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)}static lerp(e,t,i){return e+(t-e)*i}static fromBigToSmall(e,t){var i=e*185/Q.mapSize.width,s=t*185/Q.mapSize.height;return[i,s]}};var{regClass:NT}=Laya,yt=Laya.InputManager,Au=class extends Laya.Script{constructor(){super(...arguments);this.currRockerBar=null;this.maxDistance=80;this.isMouseDown=!1;this.mouseDownPosition=new Laya.Point;this._currentMouse=new Laya.Point;this.initRockerBarPosition=new Laya.Point;this.key1Pressed=!1;this.key2Pressed=!1;this.key3Pressed=!1;this.key4Pressed=!1;this.key5Pressed=!1;this.key6Pressed=!1;this.key7Pressed=!1;this.key8Pressed=!1;this.keySpacePressed=!1;this.directionOffset=0;this.isKeyRun=!1}onEnable(){Laya.InputManager.multiTouchEnabled=!0}onStart(){this.currRockerBar=this.owner.getChildByName("freebar"),this.freetrack=this.owner.getChildByName("freetrack"),this.img_arrow_left=this.freetrack.getChildByName("img_arrow_left"),this.img_arrow_right=this.freetrack.getChildByName("img_arrow_right"),this.img_arrow_up=this.freetrack.getChildByName("img_arrow_up"),this.img_arrow_down=this.freetrack.getChildByName("img_arrow_down"),Laya.Browser.onPC?this.freetrack.visible=!0:this.img_arrow_left.visible=this.img_arrow_right.visible=this.img_arrow_up.visible=this.img_arrow_down.visible=!1,this.initialise()}initialise(){this.initRockerBarPosition.setTo(this.currRockerBar.x,this.currRockerBar.y),this.currRockerBar.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)}onSkillKeyDown(t,i,s){switch(t.stopPropagation(),i){case 1:this.key1Pressed=s;break;case 2:this.key2Pressed=s;break;case 3:this.key3Pressed=s;break}}onMouseDown(t){ve.stopAll||(t.stopPropagation(),this.isMouseDown=!0,this.currRockerBar.selected=!0,Laya.Browser.onPC||(this.freetrack.visible=!0),this.mouseDownPosition.setTo(this.owner.mouseX,this.owner.mouseY),console.log("onMouseDown this.owner.mouse: ",this.owner.mouseX,this.owner.mouseY),this.isKeyRun=!1,this.touchId=t.touchId)}onMouseUp(t){!this.isMouseDown||t.touchId!==this.touchId||this.endClick(t)}endClick(t){this.isMouseDown=!1,this.currRockerBar.x=this.initRockerBarPosition.x,this.currRockerBar.y=this.initRockerBarPosition.y,this.currRockerBar.selected=!1,this.setDir(-4),this.touchId=-1}onMouseMove(t){if(!this.isMouseDown||!this.currRockerBar||t.touchId!==this.touchId)return;t.stopPropagation(),this._currentMouse.setTo(t.stageX,t.stageY);let i=this.owner.globalToLocal(this._currentMouse,!1),s=i.x-this.mouseDownPosition.x,o=i.y-this.mouseDownPosition.y;if(Math.sqrt(s**2+o**2)<this.maxDistance)this.currRockerBar.x=this.initRockerBarPosition.x+s,this.currRockerBar.y=this.initRockerBarPosition.y+o;else{let u=Math.atan2(s,o);this.currRockerBar.x=Math.sin(u)*this.maxDistance+this.initRockerBarPosition.x,this.currRockerBar.y=Math.cos(u)*this.maxDistance+this.initRockerBarPosition.y}if(Math.abs(s)>this.directionOffset||Math.abs(o)>this.directionOffset){let u=Lt.judgePosition(s,o);this.setDir(u)}}onUpdate(){ve.stopAll||this.getKeyboardPressed()}setDir(t){this.lastDirection!=t&&(ie.getInstance().setMyHeroDirection(t),this.lastDirection=t)}getKeyboardPressed(){if(yt.hasKeyDown(Laya.Keyboard.W)&&yt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(225)):yt.hasKeyDown(Laya.Keyboard.W)&&yt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(315)):yt.hasKeyDown(Laya.Keyboard.S)&&yt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(135)):yt.hasKeyDown(Laya.Keyboard.S)&&yt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(45)):yt.hasKeyDown(Laya.Keyboard.W)?(this.isKeyRun=!0,this.setDir(270)):yt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(0)):yt.hasKeyDown(Laya.Keyboard.S)?(this.isKeyRun=!0,this.setDir(90)):yt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(180)):this.isKeyRun&&this.setDir(-4),yt.hasKeyDown(Laya.Keyboard.H)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_1)){if(this.key1Pressed)return;this.key1Pressed=!0,w.event(S.EVENT_CLICK_NUM,1),Laya.timer.once(500,this,this.notKey1Pressed)}if(yt.hasKeyDown(Laya.Keyboard.J)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_2)){if(this.key2Pressed)return;this.key2Pressed=!0,w.event(S.EVENT_CLICK_NUM,2),Laya.timer.once(500,this,this.notKey2Pressed)}if(yt.hasKeyDown(Laya.Keyboard.K)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_3)){if(this.key3Pressed)return;this.key3Pressed=!0,w.event(S.EVENT_CLICK_NUM,3),Laya.timer.once(500,this,this.notKey3Pressed)}if(yt.hasKeyDown(Laya.Keyboard.L)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_4)){if(this.key4Pressed)return;this.key4Pressed=!0,w.event(S.EVENT_CLICK_NUM,4),Laya.timer.once(500,this,this.notKey4Pressed)}if(yt.hasKeyDown(Laya.Keyboard.M)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_5)){if(this.key5Pressed)return;this.key5Pressed=!0,w.event(S.EVENT_CLICK_NUM,5),Laya.timer.once(500,this,this.notKey5Pressed)}if(yt.hasKeyDown(Laya.Keyboard.N)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_6)){if(this.key6Pressed)return;this.key6Pressed=!0,w.event(S.EVENT_CLICK_NUM,6),Laya.timer.once(500,this,this.notKey6Pressed)}if(yt.hasKeyDown(Laya.Keyboard.B)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_7)){if(this.key7Pressed)return;this.key7Pressed=!0,w.event(S.EVENT_CLICK_NUM,7),Laya.timer.once(500,this,this.notKey7Pressed)}if(yt.hasKeyDown(Laya.Keyboard.V)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_8)){if(this.key8Pressed)return;this.key8Pressed=!0,w.event(S.EVENT_CLICK_NUM,8),Laya.timer.once(500,this,this.notKey8Pressed)}if(yt.hasKeyDown(Laya.Keyboard.SPACE)){if(this.keySpacePressed)return;this.keySpacePressed=!0,w.event(S.EVENT_CLICK_SPACE,!0)}else this.keySpacePressed&&(w.event(S.EVENT_CLICK_SPACE,!1),this.notKeySpacePressed(),Laya.timer.clear(this,this.notKeySpacePressed))}notKey1Pressed(){this.key1Pressed=!1}notKey2Pressed(){this.key2Pressed=!1}notKey3Pressed(){this.key3Pressed=!1}notKey4Pressed(){this.key4Pressed=!1}notKey5Pressed(){this.key5Pressed=!1}notKey6Pressed(){this.key6Pressed=!1}notKey7Pressed(){this.key7Pressed=!1}notKey8Pressed(){this.key8Pressed=!1}notKeySpacePressed(){this.keySpacePressed=!1}getKeyPressed(t){var i=t.toParentPoint(new Laya.Point(t.x,t.y));return i.x>t.x&&i.x<t.x+t.width&&i.y>t.y&&i.y<t.y+t.height}getDistance(t,i,s,o){let a=t-s,u=i-o;return Math.sqrt(a*a+u*u)}onDisable(){Laya.InputManager.multiTouchEnabled=!1}};Au=P([NT("7cTqWb35RwygSkuWy4QkgQ")],Au);var kn=class kn extends Laya.ColorFilter{constructor(e=null){super(e)}static addClickFilter(e){let t=e.filters||[];t.push(kn.clickFilter),e.filters=t}static addHoverFilter(e){let t=e.filters||[];t.push(kn.hoverFilter),e.filters=t}static clearClickFilter(e){let t=e.filters;if(t!=null&&t.length>0){for(let i=t.length-1;i>-1;i--)t[i]instanceof kn&&t.splice(i,1);e.filters=t}}static clearHoverFilter(e){this.clearClickFilter(e)}};kn.clickFilter=new kn([1,0,0,0,-34,0,1,0,0,-34,0,0,1,0,-34,0,0,0,1,0]),kn.hoverFilter=new kn([1,0,0,0,-34,0,1,0,0,-34,0,0,1,0,-34,0,0,0,1,0]);var Ir=kn;var{regClass:PT,property:FT}=Laya,Ka=class extends Laya.Script{constructor(){super();this.noSound=!1}onEnable(){this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onUp)}onDown(){this.noSound||Ye.playSoundByName(Ye.soundName_hit),Ir.addClickFilter(this.owner)}onUp(){Ir.clearClickFilter(this.owner)}onDisable(){Ir.clearClickFilter(this.owner),this.owner.off(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onUp)}};P([FT({type:"boolean"})],Ka.prototype,"noSound",2),Ka=P([PT("cL1AmqOiTHmtQWKayPNcTA")],Ka);var{regClass:UT,property:zre}=Laya,wn=class extends Laya.Script{constructor(){super(...arguments);this.currentValue=0;this.targetValue=100;this.duration=2;this.dataMode=1}onAwake(){}startIncrement(t,i=2,s=1){this.targetValue=t,this.duration=i,this.dataMode=s,this.currentValue=0,this.updateText(),Laya.Tween.to(this,{currentValue:this.targetValue,update:new Laya.Handler(this,this.updateText)},this.duration*1e3,Laya.Ease.linearIn,null,null,!0)}updateText(){this.dataMode==1?this.owner.value=Math.round(this.currentValue).toString():this.dataMode==3?this.owner.value=At.format(this.currentValue,":",!1):this.owner.value=this.currentValue.toFixed(2)}onDestroy(){Laya.Tween.clearAll(this)}};wn=P([UT("Uq3IEB9CSNSU6R4gjfo1lw")],wn);var ng=class extends Laya.Scene{};var{regClass:HT}=Laya,sg=class extends ng{constructor(){super(...arguments);this.liveNum=0;this.lastSeedRate=0;this.SnakeAINum=5;this.snakeAIArr=[]}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){var i=ve.matchDto.startTime-ve.matchDto.nowTime;i>0&&Fe.intance.openModule(T.MatchReadyView);var s=ve.matchDto.arenaId,o=ee.m_dicArenaDic.get(s);ve.currArenaItem=o,this.list_rank.array=[];var a=this.map_1001;Ar.gameMap=a,Ar.img_smallMap=this.img_smallMap,qe.sendCustumEvent(42);var u=ve.matchDto.roomId;u||(u=0),this.arenaNo.text=u+"",this.init(),this.onInitEnd(this),this.playMusic()}playMusic(){Ye.playMusicByURL("mp3/battle.mp3"),cr.needPop=!1}init(){this.registerEvents(),this.btn_addSpeed.on(Laya.Event.MOUSE_DOWN,this,this.onTouchSpeedDown),this.btn_addSpeed.on(Laya.Event.MOUSE_UP,this,this.onTouchSpeedUp),this.btn_addSpeed.on(Laya.Event.MOUSE_OUT,this,this.onTouchSpeedUp),hs.init(this.gameLayer),hs.createData(),hs.startGame()}onTouchSpeedDown(t){if(t){var i=t.type;t.stopPropagation(),console.log("onTouchSpeedDown "+t.type)}this.lastSeedRate!=Q.snakeSpeedRate.speedUp&&(this.lastSeedRate=Q.snakeSpeedRate.speedUp,ie.getInstance().updateSpeedRate(Q.snakeType.SELF,Q.snakeSpeedRate.speedUp))}onTouchSpeedUp(t){if(t){var i=t.type;t.stopPropagation(),console.log("onTouchSpeedUp "+t.type),Ir.clearClickFilter(t.target)}this.lastSeedRate!=Q.snakeSpeedRate.default&&(this.lastSeedRate=Q.snakeSpeedRate.default,ie.getInstance().updateSpeedRate(Q.snakeType.SELF,Q.snakeSpeedRate.default))}onSpaceClick(t){t?(this.onTouchSpeedDown(null),Ir.addClickFilter(this.btn_addSpeed)):(this.onTouchSpeedUp(null),Ir.clearClickFilter(this.btn_addSpeed))}onInitEnd(t){t.startGameLoop(),t.updateBattleCD()}startGameLoop(){Laya.timer.frameLoop(10,this,this.gameLoop)}registerEvents(){w.on(S.LENGTH_CHANGE,this,this.updateLength),w.on(S.KILL_SNAKE,this,this.updateKills)}removeEvents(){w.off(S.LENGTH_CHANGE,this,this.updateLength),w.off(S.KILL_SNAKE,this,this.updateKills)}gameLoop(){ie.getInstance().selfSnake&&ie.getInstance().selfSnake.tag&&(this.updateLength(ie.getInstance().selfSnake.getSkinLength(!1)),this.updateKills(ie.getInstance().selfSnake.tag.kills),this.updateSnakeLengthRule()),ie.getInstance().matchHeroSprDic&&(this.list_rank.array=this.getSortPlayer(ie.getInstance().matchHeroSprDic.values),this.tf_remainer.text=this.liveNum+"")}updateSnakeLengthRule(){var t=ie.getInstance().selfSnake.tag.snakeId,i=ie.getInstance().selfSnake.getSkinLength(!1),s=ee.getSheetDataByMultiKey(ee.m_dicSnakeLengthRules,[t,i]),o=ee.getSheetDataByMultiKey(ee.m_dicSnakeLengthRules,[t,i+1]),a=ie.getInstance().selfSnake.getScore(!1);if(s&&o){var u=a-s.accumulatePoints,p=o.accumulatePoints-s.accumulatePoints;this.text_score.text=`${u}/${p}`;var m=u/p*-180;m<-180?m=-180:m>0&&(m=0),this.img_socre_mask.rotation>m?Laya.Tween.to(this.img_socre_mask,{rotation:m},100):(Laya.Tween.clearAll(this.img_socre_mask),this.img_socre_mask.rotation=m,this.img_socre_mask.rotation=m)}}updateKills(t){this.text_kill.text=`${t}`}updateLength(t){this.text_length.text=`${t}`}getSortPlayer(t){let s=t.slice().sort((u,p)=>p.getScore(!1)-u.getScore(!1)),o=[];this.liveNum=0;let a=1;return s.forEach(u=>{u.rankNum=a,u.tag!=null&&this.liveNum++,u.tag!=null&&(a<=10?o.push(u):u.tag.roleId===j.playerDto.pid&&(o.length>=10?o.splice(-1,1,u):o.push(u))),a++}),o}updateBattleCD(){ve.matchCoolDownTime=Math.round(ve.matchDto.remainderCd/1e3),ve.matchCoolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):Laya.timer.clear(this,this.onSetCoolTime)}onSetCoolTime(){this.tf_reduceTime.text=At.format(ve.matchCoolDownTime,":",!1),ve.matchCoolDownTime>=0?(this.tf_reduceTime.text=At.format(ve.matchCoolDownTime,":",!1),ve.matchCoolDownTime<=10&&this.scaleEffect(),ve.stopAll||ve.matchCoolDownTime--):(Laya.timer.clear(this,this.onSetCoolTime),qr.onPveEnd())}scaleEffect(){var t=this;Laya.Tween.to(this.tf_reduceTime,{scaleX:1.3,scaleY:1.3},200,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){Laya.Tween.to(t.tf_reduceTime,{scaleX:1,scaleY:1},200,Laya.Ease.linearInOut)}))}onGameSceneGray(){this.matchBox.gray=!0,Laya.timer.once(1e3,this,this.stopUpdate)}stopUpdate(){hs.endTimer()}onEnable(){w.on(S.EVENT_GameScene_Gray,this,this.onGameSceneGray),w.on(S.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.on(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeyDown)}onKeyDown(t){t.keyCode===Laya.Keyboard.X&&$r.getInstance().toggleVisible()}onWindowFocus(){}onDisable(){this.stopUpdate(),w.off(S.EVENT_GameScene_Gray,this,this.onGameSceneGray),w.off(S.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.off(Laya.Event.KEY_DOWN,this,this.onKeyDown),this.removeEvents(),Laya.stage.off(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.timer.clearAll(this),hs.clear(),ve.clearData()}};sg=P([HT("xqHhdUJURkuoCmI0OKh8Kg")],sg);var og=class extends Laya.Image{};var{regClass:zT}=Laya,ag=class extends og{constructor(){super(...arguments);this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200}init(t){this.skin=re.getFoodIcon(t.icon)}startScalingAnimation(){let t=this.minScale+Math.random()*(this.maxScale-this.minScale),i=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:t,scaleY:t},i,null,Laya.Handler.create(this,()=>{let s=this.minScale+Math.random()*(1-this.minScale),o=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:s,scaleY:s},o,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}onDisable(){Laya.Tween.clearAll(this)}};ag=P([zT("j4yWA5APT7ipho7IOx4ryg")],ag);var lg=class extends Laya.Scene{};var{regClass:jT}=Laya,cg=class extends lg{constructor(){super(...arguments);this.liveNum=0;this.lastSeedRate=0;this.SnakeAINum=5;this.snakeAIArr=[]}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){this.list_rank.array=[];var i=this.map_1001;Ar.gameMap=i,Ar.img_smallMap=this.img_smallMap;var s=ve.roomDto.roomId;s||(s=0),this.arenaNo.text=s+"",this.init(),this.playMusic()}playMusic(){Ye.playMusicByURL("mp3/battle.mp3"),cr.needPop=!1}init(){this.registerEvents(),this.btn_addSpeed.on(Laya.Event.MOUSE_DOWN,this,this.onTouchSpeedDown),this.btn_addSpeed.on(Laya.Event.MOUSE_UP,this,this.onTouchSpeedUp),this.btn_addSpeed.on(Laya.Event.MOUSE_OUT,this,this.onTouchSpeedUp),ui.init(this.gameLayer)}onTouchSpeedDown(t){if(t){var i=t.type;t.stopPropagation(),console.log("onTouchSpeedDown "+t.type)}this.lastSeedRate!=Q.snakeSpeedRate.speedUp&&(this.lastSeedRate=Q.snakeSpeedRate.speedUp,ie.getInstance().updateSpeedRate(Q.snakeType.SELF,Q.snakeSpeedRate.speedUp))}onTouchSpeedUp(t){if(t){var i=t.type;t.stopPropagation(),console.log("onTouchSpeedUp "+t.type),Ir.clearClickFilter(t.target)}this.lastSeedRate!=Q.snakeSpeedRate.default&&(this.lastSeedRate=Q.snakeSpeedRate.default,ie.getInstance().updateSpeedRate(Q.snakeType.SELF,Q.snakeSpeedRate.default))}onSpaceClick(t){t?(this.onTouchSpeedDown(null),Ir.addClickFilter(this.btn_addSpeed)):(this.onTouchSpeedUp(null),Ir.clearClickFilter(this.btn_addSpeed))}startGameLoop(){Laya.timer.frameLoop(10,this,this.gameLoop)}registerEvents(){w.on(S.LENGTH_CHANGE,this,this.updateLength),w.on(S.KILL_SNAKE,this,this.updateKills)}removeEvents(){w.off(S.LENGTH_CHANGE,this,this.updateLength),w.off(S.KILL_SNAKE,this,this.updateKills)}gameLoop(){ie.getInstance().selfSnake&&ie.getInstance().selfSnake.tag&&(this.updateLength(ie.getInstance().selfSnake.getSkinLength(!0)),this.updateKills(ie.getInstance().selfSnake.tag.kills),this.updateSnakeLengthRule()),ie.getInstance().matchHeroSprDic&&(this.list_rank.array=this.getSortPlayer(ie.getInstance().matchHeroSprDic.values),this.tf_remainer.text=this.liveNum+"")}updateSnakeLengthRule(){var t=ie.getInstance().selfSnake.tag.snakeId,i=ie.getInstance().selfSnake.getSkinLength(!0),s=ee.getSheetDataByMultiKey(ee.m_dicSnakeLengthRules,[t,i]),o=ee.getSheetDataByMultiKey(ee.m_dicSnakeLengthRules,[t,i+1]),a=ie.getInstance().selfSnake.getScore(!0);if(s&&o){var u=a-s.accumulatePoints,p=o.accumulatePoints-s.accumulatePoints;this.text_score.text=`${u}/${p}`;var m=u/p*-180;m<-180?m=-180:m>0&&(m=0),this.img_socre_mask.rotation>m?Laya.Tween.to(this.img_socre_mask,{rotation:m},100):(Laya.Tween.clearAll(this.img_socre_mask),this.img_socre_mask.rotation=m,this.img_socre_mask.rotation=m)}}updateKills(t){this.text_kill.text=`${t}`}updateLength(t){this.text_length.text=`${t}`}onInitData(){ui.createData(),ui.startGame(),this.startGameLoop(),this.updateBattleCD()}onRestoreData(){ui.clearTimer(),ui.restoreData(),ui.startGame()}getSortPlayer(t){let s=t.slice().sort((u,p)=>p.getScore(!0)-u.getScore(!0)),o=[];this.liveNum=0;let a=1;return s.forEach(u=>{u.rankNum=a,u.tag!=null&&this.liveNum++,u.tag!=null&&(a<=10?o.push(u):u.tag.roleId===j.playerDto.pid&&(o.length>=10?o.splice(-1,1,u):o.push(u))),a++}),o}updateBattleCD(){ve.matchCoolDownTime=Math.round((ve.matchDto.myPlayerObject.oprTime-ve.matchDto.myPlayerObject.enterTime)/1e3),this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)}onSetCoolTime(){this.tf_reduceTime.text=At.format(ve.matchCoolDownTime,":",!1),ve.stopAll||ve.matchCoolDownTime++}checkMatchRankData(){ve.checkMatchRankData()}onGameSceneGray(){this.matchBox.gray=!0,Laya.timer.once(1e3,this,this.stopUpdate)}stopUpdate(){st.close(),ui.endTimer()}onEnable(){w.on(S.EVENT_PVP_INIT_DATA,this,this.onInitData),w.on(S.EVENT_PVP_RESTORE_DATA,this,this.onRestoreData),w.on(S.EVENT_GameScene_Gray,this,this.onGameSceneGray),w.on(S.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.on(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeyDown)}onKeyDown(t){t.keyCode===Laya.Keyboard.X&&$r.getInstance().toggleVisible()}onWindowFocus(){Ve.frameNetQueue.sendRestoreData()}onDisable(){this.stopUpdate(),w.off(S.EVENT_PVP_INIT_DATA,this,this.onInitData),w.off(S.EVENT_PVP_RESTORE_DATA,this,this.onRestoreData),w.off(S.EVENT_GameScene_Gray,this,this.onGameSceneGray),w.off(S.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.off(Laya.Event.KEY_DOWN,this,this.onKeyDown),this.removeEvents(),Laya.stage.off(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.timer.clearAll(this),ui.clear(),ve.clearData()}};cg=P([jT("0r0gyiRERf6yXTGaGqWBvg")],cg);var ug=class extends Laya.Box{};var{regClass:GT}=Laya,pg=class extends ug{constructor(){super()}set dataSource(t){super.dataSource=t,this.setData(t),this.addEvent()}addEvent(){this.btn_deposit.on(Laya.Event.CLICK,this,this.onDeposit),this.btn_withdraw.on(Laya.Event.CLICK,this,this.onWithdraw)}setData(t){t?(this.data=t,this.tf_coinNum.text=`${t.balance}`,this.tf_freeze.text=`${t.frozen}`,this.tf_prize.text=`${t.price}`,this.tf_valu.text=`${t.valuation}`,this.img_coin.skin=re.getCurrencyIcon(t.symbolId),this.img_coin.visible=!0,this.tf_coin.text=t.symbol,t.withdraw?this.btn_withdraw.visible=!0:this.btn_withdraw.visible=!1,t.recharge?this.btn_deposit.visible=!0:this.btn_deposit.visible=!1):this.visible=!1}onDeposit(){Fe.intance.openModule(T.DepositDialog,this.data)}onWithdraw(){Fe.intance.openModule(T.WithdrawDialog,this.data)}};pg=P([GT("oDHEPtPLT9SboHGJIeNVbA")],pg);var mg=class extends Laya.Scene{};var vt=class{static startCircleAnimation(e,t=Laya.stage.width/2,i=Laya.stage.height/2,s=200,o=5e3,a=!0,u=0,p){Laya.Tween.clearTween(e);let m=e.x,h=e.y,f=0,g=a?1:-1,b=0,y=.5,k=2e3,I=0,A=()=>{I+=16;let M=1+Math.sin(I*Math.PI*2/k)*y;f+=360/o*16*M*g;let O=f*Math.PI/180;e.x=t+Math.cos(O)*s,e.y=i+Math.sin(O)*s,Math.abs(f)>=360&&(f=f%360,b++,u>0&&b>=u&&(Laya.timer.clear(e,A),e.x=m,e.y=h,p&&p.run()))};Laya.timer.frameLoop(1,e,A)}static stopCircleAnimation(e){Laya.timer.clearAll(e),Laya.Tween.clearTween(e)}static startCircleAnimationWithSpeedControl(e,t=Laya.stage.width/2,i=Laya.stage.height/2,s=200,o=5e3,a=!0,u=0,p=.5,m=2e3,h){Laya.Tween.clearTween(e);let f=e.x,g=e.y,b=0,y=a?1:-1,k=0,I=0,A=()=>{I+=16;let M=1+Math.sin(I*Math.PI*2/m)*p;b+=360/o*16*M*y;let O=b*Math.PI/180;e.x=t+Math.cos(O)*s,e.y=i+Math.sin(O)*s,Math.abs(b)>=360&&(b=b%360,k++,u>0&&k>=u&&(Laya.timer.clear(e,A),e.x=f,e.y=g,h&&h.run()))};Laya.timer.frameLoop(1,e,A)}static startRotationAnimation(e,t=2e3,i=!0){this.stopRotationAnimation(e);let s="rotation_"+Date.now().toString(),o=i?1:-1,a=360/t*16*o,u=()=>{e.rotation=(e.rotation+a)%360},p="updateRotation_"+s;return e[p]=u,e.rotationAnimationId=s,Laya.timer.frameLoop(1,e,u),s}static stopRotationAnimation(e){if(e.rotationAnimationId){let t="updateRotation_"+e.rotationAnimationId,i=e[t];i?Laya.timer.clear(e,i):Laya.timer.clearAll(e),delete e.rotationAnimationId,i&&delete e[t]}}static startElasticPopupAnimation(e,t=150,i=1.1,s=100,o=.95,a=80,u){Laya.Tween.clearAll(e),e.scale(0,0),e.visible=!0,Laya.Tween.to(e,{scaleX:i,scaleY:i},t,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:o,scaleY:o},s,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:1,scaleY:1},a,Laya.Ease.linearNone,u)}))}))}static stopElasticPopupAnimation(e){Laya.Tween.clearAll(e)}static startLinearShrinkAnimation(e,t=80,i){Laya.Tween.clearAll(e),Laya.Tween.to(e,{scaleX:0,scaleY:0},t,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{e.visible=!1,i&&i.run()}))}static startJellyScaleAnimation(e,t=1.2,i=120,s=.85,o=90,a=80,u){Laya.Tween.clearAll(e),e.scale(1,1),e.visible=!0,Laya.Tween.to(e,{scaleX:t,scaleY:t},i,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:s,scaleY:s},o,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(e,{scaleX:1,scaleY:1},a,Laya.Ease.linearNone,u)}))}))}static playSpineAnimation(e,t=!1,i){let s=e.getChildByName("box_sk");return s?(s.play(null,t),i&&(s.once(Laya.Event.COMPLETE,null,()=>{i()}),t&&i()),!0):(console.warn("未找到box_sk Spine组件"),!1)}};function dg(r,e){var t;e===void 0&&(e="0");var i=0,s=-1;r[0]=="-"&&(r=r.substring(1),d1(r)||(i++,s=1,r.length)),e[0]=="-"&&(e=e.substring(1),d1(e)||(i++,s=2,e.length)),r=Sr(r),e=Sr(e),t=y1(Sr(r),Sr(e)),r=t[0],e=t[1],i==1&&(s===1?r=p1(r):s===2&&(e=p1(e)));var o=Xk(r,e);return i?i==2?"-"+Sr(o):r.length<o.length?Sr(o.substring(1)):"-"+Sr(p1(o)):Sr(o)}function p1(r){if(d1(r))return r;for(var e="",t=r.length,i=r.split(".")[1],s=i?i.length:0,o=0;o<t;o++)r[o]>="0"&&r[o]<="9"?e+=9-parseInt(r[o]):e+=r[o];var a=s>0?"0."+new Array(s).join("0")+"1":"1";return Xk(e,a)}function Sr(r){var e=r.split(".");for(e[0]||(e[0]="0");e[0][0]=="0"&&e[0].length>1;)e[0]=e[0].substring(1);return e[0]+(e[1]?"."+e[1]:"")}function y1(r,e){var t=r.split("."),i=e.split("."),s=t[0].length,o=i[0].length;return s>o?i[0]=new Array(Math.abs(s-o)+1).join("0")+(i[0]?i[0]:""):t[0]=new Array(Math.abs(s-o)+1).join("0")+(t[0]?t[0]:""),s=t[1]?t[1].length:0,o=i[1]?i[1].length:0,(s||o)&&(s>o?i[1]=(i[1]?i[1]:"")+new Array(Math.abs(s-o)+1).join("0"):t[1]=(t[1]?t[1]:"")+new Array(Math.abs(s-o)+1).join("0")),r=t[0]+(t[1]?"."+t[1]:""),e=i[0]+(i[1]?"."+i[1]:""),[r,e]}function Xk(r,e){var t;t=y1(r,e),r=t[0],e=t[1];for(var i="",s=0,o=r.length-1;o>=0;o--){if(r[o]==="."){i="."+i;continue}var a=parseInt(r[o])+parseInt(e[o])+s;i=a%10+i,s=Math.floor(a/10)}return s?s.toString()+i:i}function d1(r){return/^0[0]*[.]{0,1}[0]*$/.test(r)}function Kk(r){return(typeof r=="number"||typeof r=="bigint")&&(r=r.toString()),r[0]=="-"?r.substring(1):r}var Ut;(function(r){r[r.CEILING=0]="CEILING",r[r.DOWN=1]="DOWN",r[r.FLOOR=2]="FLOOR",r[r.HALF_DOWN=3]="HALF_DOWN",r[r.HALF_EVEN=4]="HALF_EVEN",r[r.HALF_UP=5]="HALF_UP",r[r.UNNECESSARY=6]="UNNECESSARY",r[r.UP=7]="UP"})(Ut||(Ut={}));function Cu(r,e,t){if(e===void 0&&(e=0),t===void 0&&(t=Ut.HALF_EVEN),t===Ut.UNNECESSARY)throw new Error("UNNECESSARY Rounding Mode has not yet been implemented");(typeof r=="number"||typeof r=="bigint")&&(r=r.toString());var i=!1;r[0]==="-"&&(i=!0,r=r.substring(1));var s=r.split("."),o=s[0],a=s[1];if(e<0){if(e=-e,o.length<=e)return"0";var u=o.substr(0,o.length-e);return r=u+"."+o.substr(o.length-e)+a,u=Cu(r,0,t),(i?"-":"")+u+new Array(e+1).join("0")}if(e==0)return o.length,$k(s[1],o,i,t)&&(o=m1(o)),(i&&parseInt(o)?"-":"")+o;if(s[1]){if(s[1].length<e)return(i?"-":"")+o+"."+s[1]+new Array(e-s[1].length+1).join("0")}else return(i?"-":"")+o+"."+new Array(e+1).join("0");a=s[1].substring(0,e);var p=s[1].substring(e);return p&&$k(p,a,i,t)&&(a=m1(a),a.length>e)?(i?"-":"")+m1(o,parseInt(a[0]))+"."+a.substring(1):(i&&(parseInt(o)||parseInt(a))?"-":"")+o+"."+a}function $k(r,e,t,i){if(!r||r===new Array(r.length+1).join("0")||i===Ut.DOWN||!t&&i===Ut.FLOOR||t&&i===Ut.CEILING)return!1;if(i===Ut.UP||t&&i===Ut.FLOOR||!t&&i===Ut.CEILING)return!0;var s="5"+new Array(r.length).join("0");if(r>s)return!0;if(r<s)return!1;switch(i){case Ut.HALF_DOWN:return!1;case Ut.HALF_UP:return!0;case Ut.HALF_EVEN:default:return parseInt(e[e.length-1])%2==1}}function m1(r,e){e===void 0&&(e=0),e||(e=1),typeof r=="number"&&r.toString();for(var t=r.length-1,i="",s=t;s>=0;s--){var o=parseInt(r[s])+e;o==10?(e=1,o=0):e=0,i+=o}return e&&(i+=e),i.split("").reverse().join("")}function bs(r){var e=r[0]==="-";for(e&&(r=r.substr(1));r[0]=="0";)r=r.substr(1);if(r.indexOf(".")!=-1)for(;r[r.length-1]=="0";)r=r.substr(0,r.length-1);return r==""||r=="."?r="0":r[r.length-1]=="."&&(r=r.substr(0,r.length-1)),r[0]=="."&&(r="0"+r),e&&r!="0"&&(r="-"+r),r}function h1(r,e){r=r.toString(),e=e.toString();var t=0;r[0]=="-"&&(t++,r=r.substr(1)),e[0]=="-"&&(t++,e=e.substr(1)),r=bs(r),e=bs(e);var i=0,s=0;r.indexOf(".")!=-1&&(i=r.length-r.indexOf(".")-1),e.indexOf(".")!=-1&&(s=e.length-e.indexOf(".")-1);var o=i+s;if(r=bs(r.replace(".","")),e=bs(e.replace(".","")),r.length<e.length){var a=r;r=e,e=a}if(e=="0")return"0";for(var u=e.length,p=0,m=[],h=u-1,f="",g=0;g<u;g++)m[g]=r.length-1;for(var g=0;g<2*r.length;g++){for(var b=0,y=e.length-1;y>=h&&y>=0;y--)m[y]>-1&&m[y]<r.length&&(b+=parseInt(r[m[y]--])*parseInt(e[y]));b+=p,p=Math.floor(b/10),f=b%10+f,h--}return f=bs(VT(f,o)),t==1&&(f="-"+f),f}function VT(r,e){return e==0?r:(r=e>=r.length?new Array(e-r.length+1).join("0")+r:r,r.substr(0,r.length-e)+"."+r.substr(r.length-e,e))}function f1(r,e,t,i){if(t===void 0&&(t=8),i===void 0&&(i=Ut.HALF_EVEN),e==0)throw new Error("Cannot divide by 0");if(r=r.toString(),e=e.toString(),r=r.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),e=e.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),r==0)return"0";var s=0;e[0]=="-"&&(e=e.substring(1),s++),r[0]=="-"&&(r=r.substring(1),s++);var o=e.indexOf(".")>0?e.length-e.indexOf(".")-1:-1;if(e=Sr(e.replace(".","")),o>=0){var a=r.indexOf(".")>0?r.length-r.indexOf(".")-1:-1;if(a==-1)r=Sr(r+new Array(o+1).join("0"));else if(o>a)r=r.replace(".",""),r=Sr(r+new Array(o-a+1).join("0"));else if(o<a){r=r.replace(".","");var u=r.length-a+o;r=Sr(r.substring(0,u)+"."+r.substring(u))}else o==a&&(r=Sr(r.replace(".","")))}var p=0,m=e.length,h="",f=r.indexOf(".")>-1&&r.indexOf(".")<m?r.substring(0,m+1):r.substring(0,m);if(r=r.indexOf(".")>-1&&r.indexOf(".")<m?r.substring(m+1):r.substring(m),f.indexOf(".")>-1){var g=f.length-f.indexOf(".")-1;f=f.replace(".",""),m>f.length&&(g+=m-f.length,f=f+new Array(m-f.length+1).join("0")),p=g,h="0."+new Array(g).join("0")}for(t=t+2;p<=t;){for(var b=0;parseInt(f)>=parseInt(e);)f=dg(f,"-"+e),b++;h+=b,r?(r[0]=="."&&(h+=".",p++,r=r.substring(1)),f=f+r.substring(0,1),r=r.substring(1)):(p||(h+="."),p++,f=f+"0")}return(s==1?"-":"")+Sr(Cu(h,t-2,i))}function g1(r,e){return r=r.toString(),e=e.toString(),e=b1(e),dg(r,e)}function b1(r){return r[0]=="-"?r=r.substr(1):r="-"+r,r}function qk(r,e){if(e==0)throw new Error("Cannot divide by 0");r=r.toString(),e=e.toString(),Yk(r),Yk(e);var t="";r[0]=="-"&&(t="-",r=r.substr(1)),e[0]=="-"&&(e=e.substr(1));var i=g1(r,h1(e,Cu(f1(r,e),0,Ut.FLOOR)));return t+i}function Yk(r){if(r.indexOf(".")!=-1)throw new Error("Modulus of non-integers not supported")}function Qk(r,e){var t,i,s=!1;if(t=[r,e].map(function(a){return bs(a)}),r=t[0],e=t[1],r[0]=="-"&&e[0]!="-")return-1;if(r[0]!="-"&&e[0]=="-")return 1;if(r[0]=="-"&&e[0]=="-"&&(r=r.substr(1),e=e.substr(1),s=!0),i=y1(r,e),r=i[0],e=i[1],r.localeCompare(e)==0)return 0;for(var o=0;o<r.length;o++)if(r[o]!=e[o])return r[o]>e[o]?s?-1:1:s?1:-1;return 0}var sn=function(){function r(e){e===void 0&&(e="0"),this.value=r.validate(e)}return r.validate=function(e){if(e){if(e=e.toString(),isNaN(e))throw Error("Parameter is not a number: "+e);e[0]=="+"&&(e=e.substring(1))}else e="0";if(e.startsWith(".")?e="0"+e:e.startsWith("-.")&&(e="-0"+e.substr(1)),/e/i.test(e)){var t=e.split(/[eE]/),i=t[0],s=t[1];i=Sr(i);var o="";i[0]=="-"&&(o="-",i=i.substring(1)),i.indexOf(".")>=0?(s=parseInt(s)+i.indexOf("."),i=i.replace(".","")):s=parseInt(s)+i.length,i.length<s?e=o+i+new Array(s-i.length+1).join("0"):i.length>=s&&s>0?e=o+Sr(i.substring(0,s))+(i.length>s?"."+i.substring(s):""):e=o+"0."+new Array(-s+1).join("0")+i}return e},r.prototype.getValue=function(){return this.value},r.prototype.setValue=function(e){this.value=r.validate(e)},r.getPrettyValue=function(e,t,i){t===void 0&&(t=3),i===void 0&&(i=","),e=r.validate(e);var s=e.charAt(0)=="-";s&&(e=e.substring(1));var o=e.indexOf(".");o=o>0?o:e.length;for(var a="",u=o;u>0;)u<t?(t=u,u=0):u-=t,a=e.substring(u,u+t)+(u<o-t&&u>=0?i:"")+a;return(s?"-":"")+a+e.substring(o)},r.prototype.getPrettyValue=function(e,t){return e===void 0&&(e=3),t===void 0&&(t=","),r.getPrettyValue(this.value,e,t)},r.round=function(e,t,i){if(t===void 0&&(t=0),i===void 0&&(i=Ut.HALF_EVEN),e=r.validate(e),isNaN(t))throw Error("Precision is not a number: "+t);return Cu(e,t,i)},r.prototype.round=function(e,t){if(e===void 0&&(e=0),t===void 0&&(t=Ut.HALF_EVEN),isNaN(e))throw Error("Precision is not a number: "+e);return new r(Cu(this.value,e,t))},r.abs=function(e){return e=r.validate(e),Kk(e)},r.prototype.abs=function(){return new r(Kk(this.value))},r.floor=function(e){return e=r.validate(e),e.indexOf(".")===-1?e:r.round(e,0,Ut.FLOOR)},r.prototype.floor=function(){return this.value.indexOf(".")===-1?new r(this.value):new r(this.value).round(0,Ut.FLOOR)},r.ceil=function(e){return e=r.validate(e),e.indexOf(".")===-1?e:r.round(e,0,Ut.CEILING)},r.prototype.ceil=function(){return this.value.indexOf(".")===-1?new r(this.value):new r(this.value).round(0,Ut.CEILING)},r.add=function(e,t){return e=r.validate(e),t=r.validate(t),dg(e,t)},r.prototype.add=function(e){return new r(dg(this.value,e.getValue()))},r.subtract=function(e,t){return e=r.validate(e),t=r.validate(t),g1(e,t)},r.prototype.subtract=function(e){return new r(g1(this.value,e.getValue()))},r.multiply=function(e,t){return e=r.validate(e),t=r.validate(t),h1(e,t)},r.prototype.multiply=function(e){return new r(h1(this.value,e.getValue()))},r.divide=function(e,t,i,s){return e=r.validate(e),t=r.validate(t),f1(e,t,i,s)},r.prototype.divide=function(e,t,i){return new r(f1(this.value,e.getValue(),t,i))},r.modulus=function(e,t){return e=r.validate(e),t=r.validate(t),qk(e,t)},r.prototype.modulus=function(e){return new r(qk(this.value,e.getValue()))},r.compareTo=function(e,t){return e=r.validate(e),t=r.validate(t),Qk(e,t)},r.prototype.compareTo=function(e){return Qk(this.value,e.getValue())},r.negate=function(e){return e=r.validate(e),b1(e)},r.prototype.negate=function(){return new r(b1(this.value))},r.stripTrailingZero=function(e){return e=r.validate(e),bs(e)},r.prototype.stripTrailingZero=function(){return new r(bs(this.value))},r.RoundingModes=Ut,r}();var We=class We{static get IsSetRelease(){return We._IsSetRelease}static get IsSetGuid(){return We._IsSetGuid}static initParms(){if(Laya.Browser.window.location){let i=Laya.Browser.window.location.href,s=this.getURLParameters(i);if(We.m_obj=s,console.log("1initgame-->urldata:",We.m_obj),We.m_obj.server&&We.m_obj.server!=""&&(Me.wsUrl=We.m_obj.server),We.m_obj.socket&&We.m_obj.socket!=""){var e=We.m_obj.socket;st.m_strHttpHost=e}if(We.m_obj.address&&We.m_obj.address!=""&&ce.vType==0&&(console.log("walletAddress: "+We.m_obj.address),ze.walletAddress=We.m_obj.address),We.m_obj.from&&We.m_obj.from=="into"&&(ce.isInto=!0),We.m_obj.isFull&&We.m_obj.isFull=="1"&&(ce.isFull=!0),We.m_obj.justFull&&We.m_obj.justFull=="1"&&(ce.justFull=!0),We.m_obj.white&&We.m_obj.white=="1"&&(ce.isWhite=!0),We.m_obj.needDraw&&We.m_obj.needDraw=="1"&&(ce.needDraw=!0),We.m_obj.log){var t=parseInt(We.m_obj.log);t>0&&initEruda(t)}if(We.m_obj.debug&&ce.vType==0&&(ce.Debug=parseInt(We.m_obj.debug)),We.m_obj.res&&We.m_obj.res!="0"&&(ce.Res=parseInt(We.m_obj.res)),We.m_obj.bookingId&&We.m_obj.bookingId!="0"&&(ce.bookingId=parseInt(We.m_obj.bookingId),We.m_obj.teamId&&We.m_obj.teamId!="0"&&(ce.teamId=parseInt(We.m_obj.teamId))),We.m_obj.referral&&We.m_obj.referral!=""&&(ce.referral=We.m_obj.referral),We.m_obj.lang&&We.m_obj.lang!=""){let o=parseInt(We.m_obj.lang);o<1&&(o=1),ce.ignoreLang=!0,j.m_strLanguage=o}}}static getURLParameters(e){let t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,(i,s,o)=>t[s]=decodeURIComponent(o)),t}static cheakStr(e){let t=new RegExp("[A-Za-z0-9_-\\s]","g"),i=e.match(t);return!!(i&&i.length==e.length)}static isNumber(e){return/^(?!0\d)\d*\.?\d*$/.test(e)}static roundToTwoDecimals(e){return e%1===0?e.toString():Number(e.toFixed(2)).toString()}static filterObjectsByNewFightFlag(e){return e.filter(t=>t.newFightFlag!==1)}static addIndexToObjects(e){return e.forEach((t,i)=>{t.index=i}),e}static findFirstTypeAndNotGold(e){for(let t=0;t<e.length;t++)if(e[t].id>=3001&&e[t].id<=3021&&e[t].id!==3005)return e[t]}static getCurrencyIdByName(e){let t=$e.TYPE_TOX;switch(e){case"TOX":t=$e.TYPE_TOX;break;case"ETH":t=$e.TYPE_ETH;break;case"BTC":t=$e.TYPE_BTC;break;case"USDT":t=$e.TYPE_USDT;break;case"BTOX":t=$e.TYPE_BTOX;break;case"GALA":t=$e.TYPE_GALA;break;case"BNRY":t=$e.TYPE_BNRY;break;case"KLAY":t=$e.TYPE_KLAY;break;case"BNB":t=$e.TYPE_BNB;break;case"GGG":t=$e.TYPE_GGG;break}return t}static formatNumber(e,t=7){let i=e.toString(),s=i.indexOf(".");return s!==-1&&i.length-s>t?(i=i.slice(0,s+t),parseFloat(i)):e}static truncateToTwoDecimalPlaces(e){let t=e.toString(),i=t.indexOf(".");if(i===-1)return e;let s=t.substring(0,i+5);return parseFloat(s)}static getKeyByValue(e,t){return Object.keys(e).find(i=>e[i]===t)}static powerOf10(e,t){return e*Math.pow(10,t)}static isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}static getDaysInMonth(e,t){return t===2?this.isLeapYear(e)?29:28:[4,6,9,11].includes(t)?30:31}static shortenString(e,t,i){return e.length<=t+i?e:e.substr(0,t)+"..."+e.substr(-i)}static multiplyBigDecimals(e,t){let s=Math.pow(10,1e4),o=parseFloat(String(e))*parseFloat(String(t));return Math.round(o*s)/s}static arraysEqual(e,t){return e.length===t.length&&e.every((i,s)=>i===t[s])}static categorizeArrays(e,t){let i=[];for(let s of t){let o=s[0],a=s[1],u=e.find(m=>m[0]===o),p=u?u[1]:0;i.push([o,p,a])}return i}static setMap(e,t){if(e.has(t[0])){let i=e.get(t[0]);i+=t[1],e.set(t[0],i)}else e.set(t[0],t[1]);return console.log(e),e}static getfrom(){return We.m_obj.from}static parseTokenData(e){try{return e.map(t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(i){return console.error("解析token字符串失败:",i),t}return t})}catch(t){return console.error("解析token数据时发生错误:",t),[]}}static multiplyWithPrecision(e,t){let i=new sn(e),s=new sn(t);return i.multiply(s).getValue()}static addWithPrecision(e,t){let i=new sn(e),s=new sn(t);return i.add(s).getValue()}static subtractWithPrecision(e,t){let i=new sn(e),s=new sn(t);return i.subtract(s).getValue()}static truncateString(e,t){return e.length>t?e.substring(0,t)+"...":e}static getLevelByExp(e){let t=ee.m_dicLevel,i=1;for(let s=0;s<t.values.length;s++){let o=t.values[s];if(e>=o.totalExp)i=o.id;else break}return i}};We._IsSetRelease=!1,We._IsSetGuid=!1;var Tt=We;var _1=class r{constructor(){this._tokenData=[];this.init()}static getInstance(){return this._instance||(this._instance=new r),this._instance}init(){w.on("msg_"+v.snake.socket.MessageType.MSG_QUERY_TOKEN,this,this.onRequestInfo)}destroy(){w.off("msg_"+v.snake.socket.MessageType.MSG_QUERY_TOKEN,this,this.onRequestInfo),r._instance=null}requestCoinInfo(){let e=v.snake.socket.MessageType.MSG_QUERY_TOKEN;Me.send(e)}onRequestInfo(e,t){var i=Te.getMsgBody(e,v.snake.socket.SC_QUERY_TOKEN);if(t==v.snake.socket.MessageCode.SYS_NORMAL){let s=Tt.parseTokenData(i.token);this._tokenData=s,w.event(S.UPDATE_TOKEN_BALANCE,[s])}}getTokenData(){return this._tokenData}calculateTotalValue(){try{return this._tokenData.reduce((e,t)=>{let i=t.balance,s=t.price;return isNaN(i)||isNaN(s)?e:e+i*s},0)}catch(e){return console.error("计算资产总额时发生错误:",e),0}}},ys=_1.getInstance();var{regClass:WT}=Laya,En=class extends mg{constructor(){super(...arguments);this.m_currentTabIndex=0}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onEnable(){this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.list_Record.visible=!1,this.btn_back_Record.on(Laya.Event.CLICK,this,this.openRecord,[!1]),this.btn_detail.on(Laya.Event.CLICK,this,this.openRecord,[!0]),w.on(S.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),w.on(S.UPDATE_ASSETS,this,this.onUpdateAssets),w.on("msg_"+v.snake.socket.MessageType.MSG_CHARGE_RECORD,this,this.onChargeRecord),w.on("msg_"+v.snake.socket.MessageType.MSG_WITHDRAW_RECORD,this,this.onWithdrawRecord),this.list_asset.visible=!1,ys.requestCoinInfo(),vt.startJellyScaleAnimation(this.tf_tittle);for(let t=0;t<2;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t,!1])}onDisable(){w.off(S.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),w.off(S.UPDATE_ASSETS,this,this.onUpdateAssets),w.off("msg_"+v.snake.socket.MessageType.MSG_CHARGE_RECORD,this,this.onChargeRecord),w.off("msg_"+v.snake.socket.MessageType.MSG_WITHDRAW_RECORD,this,this.onWithdrawRecord),this.btn_detail.off(Laya.Event.CLICK,this,this.openRecord,[!0]),this.btn_back_Record.off(Laya.Event.CLICK,this,this.openRecord)}onUpdateAssets(){ys.requestCoinInfo()}onTokenBalanceUpdate(t){this.showAssetData(t)}showAssetData(t){this.list_asset.array=t,this.list_asset.visible=!0;let i=this.calculateTotalValue(t);this.tf_total.text=`${i} USDT`}calculateTotalValue(t){try{return t.reduce((i,s)=>{let o=s.balance,a=s.price;return isNaN(o)||isNaN(a)?i:i+o*a},0)}catch(i){return console.error("计算资产总额时发生错误:",i),0}}setToMainScene(){Xe.setCurrentScene(pe.M_SCENE_MAIN)}openRecord(t){this.box_record.visible=t,this.box_all.visible=!t,t?this.onTabClick(this.m_currentTabIndex,!0):this.list_Record.visible=!1}onTabClick(t,i=!1){if(this.m_currentTabIndex===t&&!i)return;this.m_currentTabIndex=t;let s=2,o="res/common/comm/img_tab1.png",a="res/common/comm/img_tab2.png",u="#427030",p="#1449cb";for(let m=0;m<s;m++){let h=this[`tab${m}`],f=h.getChildByName("tf_tit"),g=t===m;if(h.skin=g?o:a,f.strokeColor=g?u:p,g)switch(En.isDepositRecord=t===0,t){case 0:Me.send(v.snake.socket.MessageType.MSG_CHARGE_RECORD);break;case 1:Me.send(v.snake.socket.MessageType.MSG_WITHDRAW_RECORD);break}}}onChargeRecord(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_CHARGE_RECORD);i==v.snake.socket.MessageCode.SYS_NORMAL&&(console.log("msgBody",s),this.list_Record.array=s.resp||[],this.list_Record.visible=!0)}onWithdrawRecord(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_WITHDRAW_RECORD);i==v.snake.socket.MessageCode.SYS_NORMAL&&(console.log("msgBody",s),this.list_Record.array=s.resp||[],this.list_Record.visible=!0)}};En.isDepositRecord=!0,En=P([WT("vDn8r-QeS5KzEmJcMsoY8w")],En);var hg=class extends Laya.Dialog{};var x1=class r{constructor(){this.assets_contract=null;this.startRecharge=!1}static getInstance(){return r._instance||(r._instance=new r),r._instance}async init(){typeof window.ethereum>"u"||(w.on(S.EVENT_RECHARGE_GET,this,this.rechargeEnd),this.assets_contract=new window.web3.eth.Contract(Ht.WITHDRAW_AND_RECHARGE_ABI,Ht.WITHDRAW_AND_RECHARGE_ADDRESS))}async depositWallet(e,t){if(nt.showLoading(!0),!await ze.allowanceAddressByTokenAddress(Ht.WITHDRAW_AND_RECHARGE_ADDRESS,e)){nt.hideLoading(),De.notice(z.getLanguage(23));return}return t=window.web3.utils.toWei(t+""),await this.assets_contract.methods.recharge(e.toLowerCase(),t).send({from:ze.walletAddress},(s,o)=>{if(s)return nt.hideLoading(),!1}),!0}async rechargeToken(e){try{let{amount:t,token:i,rechargeAddress:s,decimals:o=18,abi:a}=e;if(i!==Ht.ADDRESS0&&!await ze.newAllowanceAddress(s,i))return nt.hideLoading(),De.notice(z.getLanguage(23)),!1;let u=g_(t+"",o),p="depositToken",m;!i||i==Ht.ADDRESS0?m=await ze.walletClient.writeContract({account:ze.walletAddress,address:s,abi:a,functionName:"depositETH",value:u,args:[100001]}):m=await ze.walletClient.writeContract({account:ze.walletAddress,address:s,abi:a,functionName:p,args:[i,u,100001]}),this.startRecharge=!0,Laya.timer.once(6e4,this,this.clearRecharge);let h,f=!1;if(h=await ze.publicClient.waitForTransactionReceipt({hash:m,pollingInterval:1e3}),h&&h.status=="success"||f){if(!this.startRecharge)return;Laya.timer.clear(this,this.clearRecharge),console.log(`Tx successful with hash: ${m}`);let b=[await ze.walletClient.getChainId(),m];return nt.hideLoading(),m}else{nt.hideLoading(),Ce.TransactionErrorTip();return}}catch(t){nt.hideLoading(),console.log(t),t instanceof Error?t.message.includes("does not match the target chain for the transaction")?w.event(S.CHANGE_ASSET_CHAIN):console.log("Error message does not contain the specified character."):console.log("An error occurred, but it is not an instance of Error.")}}async getReward(e,t){let i=await wt.requestPost("wxgame/sys/payCallPack",{chainId:e,hashId:t});if(i&&i.coin){Laya.timer.clear(this,this.clearRecharge);let o=i.coin[0];if(!o)return;w.event(S.UPDATE_LOCAL_WALLET_LIST_EVENT);var s=new Wa;s.id=o[0],s.count=o[1],nt.hideLoading(),Fe.intance.openModule(T.RewardGetDialog,[s]),this.rechargeEnd()}}rechargeEnd(){j.rechargeEnd=!1,Laya.timer.clear(this,this.getReward)}clearRecharge(){this.startRecharge=!1,nt.hideLoading(),De.notice(z.getLanguage(45)),this.rechargeEnd()}},Jk=x1.getInstance();var{regClass:KT}=Laya,fg=class extends hg{constructor(){super();this.btnLock=!1}onEnable(){w.on("msg_"+v.snake.socket.MessageType.MSG_CHARGE,this,this.onRequestChargeInfo),this.btn_confirm.on(Laya.Event.CLICK,this,this.onbtnConfirm),this.rechargeCode.on(Laya.Event.INPUT,this,this.testRechargeCodeInput)}setOpenData(t){this.tf_adress.text=Tt.shortenString(ze.walletAddress,8,6),this.data=t,this.tf_web.text=t.chainName,this.tf_token.text=t.symbol,console.log("data",t),this.requestChargeInfo()}requestChargeInfo(){let t=v.snake.socket.MessageType.MSG_CHARGE,i=this.data.symbolId,s=v.snake.socket.CS_CHARGE.fromObject({symbolId:i});Me.send(t,s)}onRequestChargeInfo(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_CHARGE);i==v.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CHARGE",s),this.rechargeData=s,this.setDepositData(s))}async setDepositData(t){let i=await ze.walletClient.getChainId(),s=Number(t.chainId);try{if(i!==s&&!await ze.switchChain(s)){await ze.addChain(s)&&this.setDepositData(t);return}let o=await ze.getBalance2(this.data.tokenAddress),a=this.data.decimals,u=zn(o,a);this.tf_rest.text=`${Tt.truncateToTwoDecimalPlaces(Number(u))}`,console.log("tokenBalance",o)}catch(o){console.log("切换失败，请手动切换",o)}}async onbtnConfirm(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(2e3,this,()=>{this.btnLock=!1}),this.testRechargeCodeInput();let t=Number(this.tf_rest.text),i=Number(this.rechargeCode.text),s=await ze.walletClient.getChainId(),o=Number(this.data.chainId);try{if(s!==o&&!await ze.switchChain(o)){await ze.addChain(o)&&this.onbtnConfirm();return}}catch(m){console.log("切换失败，请手动切换",m)}if(!i){pr.AlertByType(Be.BASEALERTVIEW,z.getLanguage(53),Be.YES);return}if(t<i){pr.AlertByType(Be.BASEALERTVIEW,z.getLanguage(54),Be.YES);return}nt.showLoadingByInfo();let a=JSON.parse(this.rechargeData.abi);console.log(a);let u={amount:i,token:this.data.tokenAddress,rechargeAddress:this.rechargeData.depositAddress,decimals:this.data.decimals,abi:a};await Jk.rechargeToken(u)&&(this.getRestCoin(this.data.tokenAddress),j.rechargeEnd=!0)}testRechargeCodeInput(){let t=this.rechargeCode.text;if(t){if(!/^[0-9]+\.?[0-9]*$/.test(t)){let s="";for(let o=0;o<t.length;o++){let a=t.charAt(o);(a>="0"&&a<="9"||a==="."&&s.indexOf(".")===-1)&&(s+=a)}this.rechargeCode.text=s}t.length>1&&t.startsWith("0")&&t.charAt(1)!=="."&&(this.rechargeCode.text=t.substring(1))}}async getRestCoin(t){try{let i=await ze.getBalance2(t);if(i){let s=zn(i,this.data.decimals);this.tf_rest.text=`${Tt.truncateToTwoDecimalPlaces(Number(s))}`}nt.hideLoading()}catch(i){console.error("获取余额失败",i),nt.hideLoading()}}onDisable(){w.off("msg_"+v.snake.socket.MessageType.MSG_CHARGE,this,this.onRequestChargeInfo),this.rechargeCode.off(Laya.Event.INPUT,this,this.testRechargeCodeInput)}};fg=P([KT("O0v8EHpMT0-wWgB8t3D14A")],fg);var gg=class extends Laya.Dialog{};var{regClass:$T}=Laya,bg=class extends gg{constructor(){super()}onEnable(){this.list_champ.visible=!1}onDisable(){}};bg=P([$T("y0xiZs-qSDWRAXN_oE10yg")],bg);var yg=class extends Laya.Box{};var{regClass:qT}=Laya,_g=class extends yg{constructor(){super()}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}let t=JSON.parse(e),{createTime:i,coinType:s,amount:o}=t,{date:a,time:u}=At.formatDayAndTime(i);this.tf_time.text=`${a}  ${u}`,this.img_coinType.skin=re.getMoneyIcon(s),this.tf_amounte.text=`${o}`,this.tf_token.text=`${t.symbol}`,this.tf_operate.text=En.isDepositRecord?"Deposit":"Withdraw";let p=this.parent?.parent?.array?.indexOf(e)??0;this.img_bg.visible=p%2===1}};_g=P([qT("tbS8gPlOTWuMdXb9g8wZAg")],_g);var xg=class extends Laya.Dialog{};var{regClass:YT}=Laya,vg=class extends xg{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.btnLock=!1;this.withDrawData=null;this.withdrawText=null}onEnable(){w.on("msg_"+v.snake.socket.MessageType.MSG_WITHDRAW,this,this.onRequestWithdraw),w.on("msg_"+v.snake.socket.MessageType.MSG_WITHDRAW_INFO,this,this.onRequestChargeInfo),w.on(S.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),this.btn_withdraw.on(Laya.Event.CLICK,this,this.onBtnWithdraw),this.withdrawText=this.withdrawCode.prompt,this.withdrawCode.on(Laya.Event.INPUT,this,this.testRechargeCodeInput)}setOpenData(t){this.data=t,this.showWithDrawData(t),this.requestChargeInfo(),console.log("data",t)}async showWithDrawData(t){let i=ze.walletAddress;this.tf_address.text=Tt.shortenString(i,8,6),this.tf_token.text=t.symbol,this.tf_web.text=t.chainName,this.tf_appAmount.text=`${t.balance}`}requestChargeInfo(){let t=v.snake.socket.MessageType.MSG_WITHDRAW_INFO,i=this.data.symbolId,s=v.snake.socket.CS_WITHDRAW_INFO.fromObject({symbolId:i});Me.send(t,s)}async onBtnWithdraw(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(2e3,this,()=>{this.btnLock=!1}),this.testWithdrawCodeInput();let t=Number(this.withdrawCode.text);if(!t){De.notice("请输入提币数量");return}let i=Number(this.tf_appAmount.text);if(t>i){De.notice("超过可用余额");return}if(t>this.withDrawData.maxLimit){De.notice("超过最大限额");return}else if(t<this.withDrawData.minLimit){De.notice("低于最小限额");return}nt.showLoadingByInfo();let s=v.snake.socket.MessageType.MSG_WITHDRAW,o=v.snake.socket.CS_WITHDRAW.fromObject({symbolId:this.data.symbolId,amount:t});Me.send(s,o)}onRequestWithdraw(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_WITHDRAW);if(i==v.snake.socket.MessageCode.SYS_NORMAL){De.notice("WITHDRAW SUCCESS!!"),console.log("SC_WITHDRAW MsgBody",s);let o=JSON.parse(s.resp);console.log("resp",o),nt.hideLoading(),w.event(S.UPDATE_ASSETS)}}onRechargewithdrawCodeInput(){let t=Number(this.withdrawCode.text),i=Tt.isNumber(this.withdrawCode.text);(t<0||!i)&&this.withdrawCode.text!==this.withdrawText&&(this.withdrawCode.text="0");let s=Tt.multiplyWithPrecision(this.withDrawData.feeRate/100,t);this.tf_arrive.text=`${Tt.subtractWithPrecision(t,Number(s))}`}testWithdrawCodeInput(){let t=this.withdrawCode.text;if(t&&!/^[0-9]+\.?[0-9]*$/.test(t)){this.withdrawCode.text="",De.notice(z.getLanguage(1802));return}}onRequestChargeInfo(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_WITHDRAW_INFO);if(i==v.snake.socket.MessageCode.SYS_NORMAL){console.log("CS_WITHDRAW_INFO",s);let o=JSON.parse(s.resp);this.withDrawData=o,console.log("resp",o),this.showWithdrawData()}}showWithdrawData(){this.tf_fee.text=`${this.withDrawData.feeRate}%`}onDisable(){w.off("msg_"+v.snake.socket.MessageType.MSG_WITHDRAW,this,this.onRequestWithdraw),w.off("msg_"+v.snake.socket.MessageType.MSG_WITHDRAW_INFO,this,this.onRequestChargeInfo),w.off(S.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate),this.withdrawCode.off(Laya.Event.INPUT,this,this.onRechargewithdrawCodeInput),this.btn_withdraw.off(Laya.Event.CLICK,this,this.onBtnWithdraw)}onTokenBalanceUpdate(t){if(!this.data||!t)return;let i=t.find(s=>s.symbolId===this.data.symbolId);i&&(this.data.balance=i.balance,this.tf_appAmount.text=`${i.balance}`)}testRechargeCodeInput(){let t=this.withdrawCode.text;if(t){if(!/^[0-9]+\.?[0-9]*$/.test(t)){let a="";for(let u=0;u<t.length;u++){let p=t.charAt(u);(p>="0"&&p<="9"||p==="."&&a.indexOf(".")===-1)&&(a+=p)}this.withdrawCode.text=a}t.length>1&&t.startsWith("0")&&t.charAt(1)!=="."&&(this.withdrawCode.text=t.substring(1))}let i=Number(this.withdrawCode.text),s=Tt.multiplyWithPrecision(this.withDrawData.feeRate/100,i);this.tf_arrive.text=`${Tt.subtractWithPrecision(i,Number(s))}`}};vg=P([YT("-G96ocIBRFacV4Xozyt5NQ")],vg);var v1=class r{constructor(){this.currentBattleSnakeUnkey=0;this.m_dicKnapsackItems=new Ne}static getInstance(){return r._instance||(r._instance=new r),r._instance}initKnapsackData(e){if(this.m_dicKnapsackItems.clear(),e&&e.length>0)for(let t=0;t<e.length;t++){let i=e[t];if(i&&i.itemId&&i.num>0){let s=new ws;s.id=i.itemId,s.name=i.itemId;let o={item:s,num:i.num,chainId:i.itemId||0};this.m_dicKnapsackItems.set(i.itemId,o)}}}updateKnapsackItems(e){if(!(!e||e.length===0))for(let t=0;t<e.length;t++){let i=e[t];if(!(!i||!i.itemId))if(i.num<=0)this.m_dicKnapsackItems.remove(i.itemId);else{let s=this.m_dicKnapsackItems.get(i.itemId);if(s)s.num=i.num,i.chainId&&(s.pk=i.chainId);else{let o=new ws;o.id=i.itemId,o.name=i.itemId;let a={itemId:i.itemId,num:i.num,chainId:i.chainId||0};this.m_dicKnapsackItems.set(i.itemId,a)}}}}getAllKnapsackItems(){return this.m_dicKnapsackItems.values}getKnapsackItemById(e){return this.m_dicKnapsackItems.get(e)}getKnapsackItemCount(e){let t=this.m_dicKnapsackItems.get(e);return t?t.num:0}hasKnapsackItem(e){return this.m_dicKnapsackItems.get(e)}isKnapsackItemEnough(e,t){let i=this.m_dicKnapsackItems.get(e);return i&&i.num>=t}clearKnapsackData(){this.m_dicKnapsackItems.clear()}},$a=v1.getInstance();var Ig=class extends Laya.Scene{};var{regClass:QT}=Laya,Sg=class extends Ig{constructor(){super(...arguments);this.currTab=0;this.type=1;this.selectItemId=-1;this.shopId=1}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){t&&t.length>0?(this.type=t[0],t[1]!=null&&(this.selectItemId=t[1]),this.onClickTab(this.type)):(this.selectItemId=1,this.onClickTab(this.selectItemId)),this.initBagInfo()}onEnable(){for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);vt.startJellyScaleAnimation(this.tf_tittle),w.on("msg_"+v.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),w.on("msg_"+v.snake.socket.MessageType.MSG_PACK_INFO,this,this.onPackInfo),w.on(S.UPDATE_BAG_INFO,this,this.initBagInfo)}setTab(t){for(let i=1;i<3;i++)t==i?(this["btn_"+i].getChildByName("selectBox1").visible=!0,this["btn_"+i].getChildByName("selectBox2").visible=!1):(this["btn_"+i].getChildByName("selectBox1").visible=!1,this["btn_"+i].getChildByName("selectBox2").visible=!0)}async onClickTab(t){this.currTab!=t&&(this.type=t,this.setTab(t),t==1?(this.box_nft.visible=!0,this.box_prop.visible=!1,this.tf_nft.stroke=5,this.tf_nft.fontSize=32,this.tf_props.stroke=0,this.tf_props.fontSize=25):t==2&&(this.box_prop.visible=!0,this.box_nft.visible=!1,this.tf_nft.stroke=0,this.tf_nft.fontSize=25,this.tf_props.stroke=5,this.tf_props.fontSize=32))}setToMainScene(){Xe.setCurrentScene(pe.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<4;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onClickTab,[t]);for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}onTabClick(t){let s="res/shop/img_Button_1.png",o="res/shop/img_btlv.png",a="res/shop/img_bt1_2.png",u="res/shop/img_Button_4.png",p="#009815";for(let h=1;h<3;h++){let f=this[`btn${h}`],g=f.getChildByName("tf_tit"),b=t===h,y=h===0;this.selectItemId=t,f.skin=y?b?s:a:b?o:u,g.stroke=b?5:0,g.strokeColor=p}}onBuySuccess(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_SHOP_BUY);i==v.snake.socket.MessageCode.SYS_NORMAL?s&&s.items&&Laya.Scene.open("dialog/TipsDialog",!1,{content:"购买成功!",autoClose:!0}):Laya.Scene.open("dialog/TipsDialog",!1,{content:"购买失败，请稍后重试",autoClose:!0})}onRecruit(t=1){let i=v.snake.socket.MessageType.MSG_SHOP_BUY;var s=ee.m_dicSnakes.get(this.shopId);if(console.log(s),this.shopId){let o=v.snake.socket.CS_SHOP_BUY.fromObject({id:this.shopId});Me.send(i,o)}}initBagInfo(){let t=v.snake.socket.MessageType.MSG_PACK_INFO;Me.send(t)}onPackInfo(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_PACK_INFO);if(i===v.snake.socket.MessageCode.SYS_NORMAL){$a.updateKnapsackItems(s.items);let o=s.items.find(p=>p.itemId===10001);o&&s.items.splice(s.items.indexOf(o),1),this.propList.array=s.items;let a=s.snake;console.log("蛇信息返回处理",a);let u={id:-999,isShopEntry:!0};this.snakeList.array=[...a,u]}}onDisable(){for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab);w.off("msg_"+v.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),w.off("msg_"+v.snake.socket.MessageType.MSG_PACK_INFO,this,this.onPackInfo),w.off(S.UPDATE_BAG_INFO,this,this.initBagInfo)}};Sg=P([QT("fGHujQp_QpOG4OhbMXNszQ")],Sg);var kg=class extends Laya.Box{};var{regClass:XT}=Laya,wg=class extends kg{constructor(){super()}onEnable(){this.btn_upgrade.on(Laya.Event.CLICK,this,this.toUpGradeDialog),this.btn_battle.on(Laya.Event.CLICK,this,this.onBattleClick)}onDisable(){this.btn_upgrade.off(Laya.Event.CLICK,this,this.toUpGradeDialog),this.btn_battle.off(Laya.Event.CLICK,this,this.onBattleClick),this.box_emply.off(Laya.Event.CLICK,this,this.toShopScene),w.off("msg_"+v.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback)}set dataSource(t){if(super.dataSource=t,!t)return;if(t.isShopEntry){this.box_emply.visible=!0,this.box_nft.visible=!1,this.box_emply.hasListener(Laya.Event.CLICK)||this.box_emply.on(Laya.Event.CLICK,this,this.toShopScene);return}this.box_emply.visible=!1,this.box_nft.visible=!0,this.nftItem=t;let i=ee.m_dicItems.get(this.nftItem.id);this.tf_name.text=z.getLanguage(i.name),this.img_icon.skin=re.getSnakeIcon(this.nftItem.skin||101);let s=!this.nftItem.upgrade;this.btn_upgrade.visible=!s;let o=j.playerDto.snakeId==this.nftItem.unkey;this.Img_battleState.visible=o,this.btn_battle.visible=!o,s?this.btn_battle.x=58:(this.btn_battle.x=6,this.btn_upgrade.x=o?58:111)}toUpGradeDialog(){Fe.intance.openModule(T.SnakeUpgradeDialog,this.nftItem)}onBattleClick(){if(!this.nftItem)return;let t=v.snake.socket.MessageType.MSG_SNAKE_FIGHT;w.off("msg_"+v.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback),w.on("msg_"+v.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback);let i=v.snake.socket.CS_SNAKE_FIGHT.fromObject({unkey:this.nftItem.unkey});Me.send(t,i)}onBattleCallback(t,i){var s=Te.getMsgBody(t,v.snake.socket.CS_SNAKE_FIGHT);console.log(s),j.playerDto.snakeId=s.unkey,w.off("msg_"+v.snake.socket.MessageType.MSG_SNAKE_FIGHT,this,this.onBattleCallback);let o=v.snake.socket.MessageType.MSG_PACK_INFO;Me.send(o)}toShopScene(){Xe.setCurrentScene(pe.M_SCENE_SHOP)}};wg=P([XT("GyHLyzIaRva11NfPDbiBfw")],wg);var Eg=class extends Laya.Box{};var{regClass:JT}=Laya,Lg=class extends Eg{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.toShowBuyDialog)}set dataSource(t){if(super.dataSource=t,this.propItem=t,!this.propItem){this.visible=!1;return}this.visible=!0;let i=ee.m_dicItems.get(this.propItem.itemId);if(!i){this.visible=!1;return}this.updateUI(i)}updateUI(t){this.tf_name.text=z.getLanguage(t.name),console.log("itemItem",this.tf_name.text),this.tf_num.text=`x${this.propItem.num}`,this.img_icon.skin=re.getItemIcon(t.icon)}toShowBuyDialog(){console.log("点击事件")}};Lg=P([JT("TqPcmjhTSVerr9-YhbASXA")],Lg);var Tg=class extends Laya.Dialog{};var{regClass:ZT}=Laya,Ag=class extends Tg{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){this.backLayer.alpha=0,this.backLayer.visible=!0,Laya.Tween.to(this.backLayer,{alpha:1},200,Laya.Ease.linearIn),this.btn_upgrade.on(Laya.Event.CLICK,this,this.onUpdateClick),w.on("msg_"+v.snake.socket.MessageType.MSG_SNAKE_UPGRADE,this,this.onUpgradeCallback)}setOpenData(t){t&&(this.nftItem=t,this.initProp())}initProp(){let t=[1201,1202,1203,1204,1205],i=!0;for(let s=0;s<t.length;s++){let o=ee.m_dicItems.get(t[s]);if(o){let a=this["item_"+s];if(a){let u=a.getChildByName("tf_name"),p=$a.getKnapsackItemCount(t[s]);u.text=`${z.getLanguage(o.name)} x${p}`,console.log("num",p),p<1&&(i=!1)}}}}onUpdateClick(){this.close();let t=v.snake.socket.MessageType.MSG_SNAKE_UPGRADE,i=v.snake.socket.CS_SNAKE_UPGRADE.fromObject({unkey:this.nftItem.unkey});Me.send(t,i)}onUpgradeCallback(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_SNAKE_UPGRADE);if(i==v.snake.socket.MessageCode.SYS_NORMAL){s&&(w.event(S.UPDATE_BAG_INFO),Fe.intance.openModule(T.SnakeUpgradeSuccessDialog,s));let o=v.snake.socket.MessageType.MSG_PACK_INFO;Me.send(o)}}onDisable(){w.off("msg_"+v.snake.socket.MessageType.MSG_SNAKE_UPGRADE,this,this.onUpgradeCallback)}};Ag=P([ZT("K6ZKHKhaTvCBmQcFdrneHQ")],Ag);var Cg=class extends Laya.Dialog{};var{regClass:e2}=Laya,Mg=class extends Cg{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){this.backLayer.alpha=0,this.backLayer.visible=!0,Laya.Tween.to(this.backLayer,{alpha:1},200,Laya.Ease.linearIn),this.initProp()}setOpenData(t){if(t){let i=t.snake.attr;for(let s=0;s<i.length;s++)if(i[s]){let o=i[s].split(","),a=o[0],u=o[1];this["upgradeAwarditem_"+a].getChildByName("tf_award").text=u}}}onDisable(){}initProp(){vt.startElasticPopupAnimation(this.img_di,150,1.1,100,.95,80),this.box_snake.source="gameIcon/spine/snakeUpgrade/img_shengj.json",this.box_snake.on(Laya.Event.COMPLETE,this,this.onAnimationComplete),Laya.timer.once(1300,this,this.onAnimationComplete)}onAnimationComplete(){this.box_snake.off(Laya.Event.COMPLETE,this,this.onAnimationComplete),this.box_snake.animationName==="animation1"&&this.box_snake.play("animation2",!0)}};Mg=P([e2("OjPqAteAQeOIAjHFO-yihA")],Mg);var Rg=class extends Laya.Dialog{};var{regClass:t2}=Laya,Bg=class extends Rg{constructor(){super();this.destroyDoCancel=!1;this.canClose=!0}onEnable(){this.on(Laya.Event.CLICK,this,this.onClickEvent)}onClickEvent(t){let i=t.target;i.name=="okBtn"?(this._okHandler&&this._okHandler.runWith(null),this.close()):(i.name=="cancleBtn"||i.name=="btn_close")&&(this.destroyDoCancel=!1,this._cancelHandler&&this._cancelHandler.runWith(null),this.close())}setOpenData(t){t&&(this._okHandler=t.okHandler,this._cancelHandler=t.cancelHandler,this.destroyDoCancel=t.destroyDoCancel,t.flag<0?(this.cancleBtn.visible=!1,this.okBtn.visible=!1,this.canClose=!1):t.flag&Be.YES&&!(t.flag&Be.NO)?(this.okBtn.x=this.width-this.okBtn.width>>1,this.cancleBtn.visible=!1,this.okBtn.label="Sure"):t.flag&Be.NO&&!(t.flag&Be.YES)?this.okBtn.visible=!1:t.flag&Be.YES&&t.flag&Be.NO,t.data&&this.alertDesc&&(t.data instanceof Array?(this.alertTitle.text=t.data[0],this.alertDesc.text=t.data[1]):this.alertDesc.text=t.data),t.initHandler&&t.initHandler.runWith(this))}onDisable(){this.destroyDoCancel&&this._cancelHandler&&this._cancelHandler.run(),this._okHandler=null,this._cancelHandler=null}close(t){this.canClose&&super.close(t)}};Bg=P([t2("8G0DBvD7T_2CVupdfQXrBw")],Bg);var Dg=class extends Laya.Box{};var{regClass:r2}=Laya,Og=class extends Dg{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}onDisable(){}set dataSource(t){if(!t)return;super.dataSource=t,this.referralData=t,this.tf_roomId.text=t.roomId,this.tf_tickets.text=t.ticket,this.img_coin.skin=re.getCurrencyIcon(t.symbolId),this.tf_playerNum.text=t.playerNum;let i=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=i%2===1,this.updateEndTimeDisplay()}updateEndTimeDisplay(){this.referralData&&this.referralData.endTime&&(this.tf_endTime.text=At.getRestTime(this.referralData.endTime))}};Og=P([r2("euaIDdILQNabNW0qaF17nA")],Og);var Ng=class extends Laya.Scene{};var{regClass:i2}=Laya,Pg=class extends Ng{constructor(){super(...arguments);this.clubIndex=0;this.countdownTimer=null;this.roomData=[]}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onEnable(){for(let s=0;s<5;s++)this["btn_"+s].on(Laya.Event.CLICK,this,this.onTabClick,[s]);this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene);let i=2;for(let s=0;s<i;s++)this["btnMember"+s].on(Laya.Event.CLICK,this,this.onMembersTabClick,[s]);this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_createRoom.on(Laya.Event.CLICK,this,this.onCreateRoom),this.initRoomList(),this.initMemberList(),this.initProfitsList(),this.initProfile(),this.startCountdownTimer()}setToMainScene(){Xe.setCurrentScene(pe.M_SCENE_MAIN)}removeEvent(){for(let s=0;s<5;s++)this["btn_"+s].off(Laya.Event.CLICK,this,this.onTabClick,[s]);let i=2;for(let s=0;s<i;s++)this["btnMember"+s].off(Laya.Event.CLICK,this,this.onMembersTabClick,[s]);this.clearCountdownTimer()}startCountdownTimer(){this.clearCountdownTimer(),this.countdownTimer=Laya.timer.loop(1e3,this,this.updateAllCountdowns)}clearCountdownTimer(){this.countdownTimer&&(Laya.timer.clear(this,this.updateAllCountdowns),this.countdownTimer=null)}updateAllCountdowns(){for(let t=0;t<this.clubRoomList.cells.length;t++){let i=this.clubRoomList.cells[t];i&&i.updateEndTimeDisplay()}}onTabClick(t){this.clubIndex=t;for(let s=0;s<5;s++){let a=this[`btn_${s}`].getChildByName("tf_tittle"),u=t===s;switch(a.stroke=u?4:0,t==s?(this["btn_"+s].getChildByName("selectBox1").visible=!0,this["btn_"+s].getChildByName("selectBox2").visible=!1):(this["btn_"+s].getChildByName("selectBox1").visible=!1,this["btn_"+s].getChildByName("selectBox2").visible=!0),t){case 0:this.box_room.visible=!0,this.box_member.visible=!1,this.box_myProfits.visible=!1,this.box_profile.visible=!1,this.startCountdownTimer();break;case 1:this.box_room.visible=!1,this.box_member.visible=!0,this.box_myProfits.visible=!1,this.box_profile.visible=!1,this.clearCountdownTimer();break;case 2:this.box_room.visible=!1,this.box_member.visible=!1,this.box_myProfits.visible=!0,this.box_profile.visible=!1,this.clearCountdownTimer();break;case 3:this.box_room.visible=!1,this.box_member.visible=!1,this.box_myProfits.visible=!1,this.box_profile.visible=!0,this.clearCountdownTimer();break;default:break}}}onMembersTabClick(t){for(let s=0;s<2;s++){let o=this["btnMember"+s],a=t===s;o.getChildByName("tab1").visible=a,o.getChildByName("tab2").visible=!a;let u=o.getChildByName("tf_tit");u.stroke=a?5:0,u.fontSize=a?26:24,u.color=a?"#ffffff":"#7bc6fb"}switch(t){case 0:this.myCommuityBox.visible=!0,this.clubBox.visible=!1;break;case 1:this.myCommuityBox.visible=!1,this.clubBox.visible=!0;break}}onCopy(){let t=this.tf_clubId.text;doCopy(t),De.notice(z.getLanguage(19))}initRoomList(){this.roomData=[{roomId:"012",endTime:1746951935,symbolId:10,ticket:"10 USDT",playerNum:"5/20"},{roomId:"013",endTime:1747038335,symbolId:12,ticket:"10 tBNB",playerNum:"19/20"},{roomId:"014",endTime:1747037735,symbolId:17,ticket:"10 SN",playerNum:"15/20"},{roomId:"015",endTime:1747037710,symbolId:17,ticket:"20 SN",playerNum:"2/20"},{roomId:"016",endTime:1747037701,symbolId:10,ticket:"30 USDT",playerNum:"13/20"},{roomId:"017",endTime:1747037755,symbolId:12,ticket:"10 tBNB",playerNum:"15/20"},{roomId:"018",endTime:1746951935,symbolId:10,ticket:"10 USDT",playerNum:"5/20"},{roomId:"020",endTime:1746951938,symbolId:10,ticket:"10 USDT",playerNum:"5/20"},{roomId:"0221",endTime:1746951939,symbolId:10,ticket:"10 USDT",playerNum:"5/20"}],this.clubRoomList.array=this.roomData}initMemberList(){let t=[{userName:"John",icon:"10003",referrals:15,level:7,rate:5,country:1e3},{userName:"Emma",icon:"10002",referrals:20,level:10,rate:5.5,country:1010},{userName:"Michael",icon:"10005",referrals:8,level:4,rate:10.5,country:1013},{userName:"Sophia",icon:"10001",referrals:12,level:6,rate:5,country:1010},{userName:"William",icon:"10004",referrals:5,level:3,rate:5.5,country:1016},{userName:"Olivia",icon:"10006",referrals:18,level:9,rate:7.5,country:1e3},{userName:"James",icon:"10003",referrals:2,level:1,rate:5.5,country:1010},{userName:"Ava",icon:"10002",referrals:10,level:5,rate:5.5,country:1e3},{userName:"Robert",icon:"10005",referrals:7,level:4,rate:6.5,country:1010},{userName:"Isabella",icon:"10001",referrals:16,level:8,rate:5.5,country:1e3},{userName:"David",icon:"10004",referrals:3,level:2,rate:5.5,country:1010},{userName:"Mia",icon:"10006",referrals:19,level:9,rate:10,country:1e3},{userName:"Joseph",icon:"10003",referrals:6,level:3,rate:5.5,country:1010},{userName:"Charlotte",icon:"10002",referrals:11,level:6,rate:10,country:1010},{userName:"Thomas",icon:"10005",referrals:4,level:2,rate:6,country:1016},{userName:"Amelia",icon:"10001",referrals:17,level:8,rate:5.5,country:1013},{userName:"Charles",icon:"10004",referrals:9,level:5,rate:6.5,country:1016},{userName:"Harper",icon:"10006",referrals:14,level:7,rate:15,country:1010},{userName:"Daniel",icon:"10003",referrals:1,level:1,rate:5.5,country:1016},{userName:"Evelyn",icon:"10002",referrals:13,level:7,rate:7,country:1013}];this.memberMyList.array=t;let i=[{userName:"John",icon:"10003",level:7,country:1e3,matches:12},{userName:"Alexander",icon:"10004",level:10,country:1010,matches:256},{userName:"Elizabeth",icon:"10001",level:9,country:1013,matches:189},{userName:"Benjamin",icon:"10006",level:8,country:1016,matches:347},{userName:"Sofia",icon:"10003",level:6,country:1e3,matches:124},{userName:"Matthew",icon:"10005",level:5,country:1010,matches:78},{userName:"Ella",icon:"10002",level:4,country:1013,matches:45},{userName:"Jackson",icon:"10004",level:3,country:1016,matches:32},{userName:"Victoria",icon:"10001",level:2,country:1e3,matches:18},{userName:"Christopher",icon:"10006",level:1,country:1010,matches:5},{userName:"Grace",icon:"10003",level:10,country:1013,matches:781},{userName:"Andrew",icon:"10005",level:9,country:1016,matches:520},{userName:"Scarlett",icon:"10002",level:7,country:1e3,matches:286},{userName:"Joshua",icon:"10004",level:6,country:1010,matches:153},{userName:"Madison",icon:"10001",level:5,country:1013,matches:89},{userName:"Ryan",icon:"10006",level:4,country:1016,matches:67},{userName:"Chloe",icon:"10003",level:3,country:1e3,matches:41},{userName:"Samuel",icon:"10005",level:2,country:1010,matches:23},{userName:"Penelope",icon:"10002",level:1,country:1013,matches:7},{userName:"Nathan",icon:"10004",level:8,country:1016,matches:412},{userName:"Layla",icon:"10001",level:7,country:1e3,matches:231},{userName:"Henry",icon:"10006",level:6,country:1010,matches:176},{userName:"Zoe",icon:"10003",level:5,country:1013,matches:98},{userName:"Ethan",icon:"10005",level:4,country:1016,matches:63},{userName:"Lily",icon:"10002",level:3,country:1e3,matches:37},{userName:"Gabriel",icon:"10004",level:2,country:1010,matches:19},{userName:"Audrey",icon:"10001",level:1,country:1013,matches:4},{userName:"Carter",icon:"10006",level:9,country:1016,matches:543},{userName:"Hannah",icon:"10003",level:8,country:1e3,matches:375},{userName:"Owen",icon:"10005",level:7,country:1010,matches:267}];this.memberClubList.array=i,this.tf_numberOfFriend.text=`${i.length}`}initProfitsList(){let t=[{userName:"John",icon:"10003",symbolId:10,income:.2,timestamp:1718442845,incomeUsdt:380},{userName:"Emma",icon:"10002",symbolId:12,income:.3,timestamp:1718442845,incomeUsdt:570},{userName:"Michael",icon:"10005",symbolId:17,income:.2,timestamp:1718442845,incomeUsdt:380},{userName:"Sophia",icon:"10001",symbolId:10,income:.5,timestamp:1718442845,incomeUsdt:950},{userName:"William",icon:"10004",symbolId:12,income:.9,timestamp:1718442845,incomeUsdt:1710},{userName:"Olivia",icon:"10006",symbolId:17,income:.8,timestamp:1718442845,incomeUsdt:1520},{userName:"James",icon:"10003",symbolId:10,income:.08,timestamp:1718356445,incomeUsdt:152},{userName:"Ava",icon:"10002",symbolId:12,income:.3,timestamp:1718356445,incomeUsdt:570},{userName:"Robert",icon:"10005",symbolId:17,income:.75,timestamp:1718356445,incomeUsdt:1425},{userName:"Isabella",icon:"10001",symbolId:10,income:.15,timestamp:1718356445,incomeUsdt:285},{userName:"David",icon:"10004",symbolId:12,income:.18,timestamp:1718270045,incomeUsdt:342},{userName:"Mia",icon:"10006",symbolId:17,income:.4,timestamp:1718270045,incomeUsdt:760},{userName:"Joseph",icon:"10003",symbolId:10,income:.06,timestamp:1718270045,incomeUsdt:114},{userName:"Charlotte",icon:"10002",symbolId:12,income:.22,timestamp:1718270045,incomeUsdt:418},{userName:"Thomas",icon:"10005",symbolId:17,income:.6,timestamp:1718183645,incomeUsdt:1140},{userName:"Amelia",icon:"10001",symbolId:10,income:.09,timestamp:1718183645,incomeUsdt:171},{userName:"Charles",icon:"10004",symbolId:12,income:.16,timestamp:1718183645,incomeUsdt:304},{userName:"Harper",icon:"10006",symbolId:17,income:.35,timestamp:1718183645,incomeUsdt:665},{userName:"Daniel",icon:"10003",symbolId:10,income:.12,timestamp:1718097245,incomeUsdt:228},{userName:"Evelyn",icon:"10002",symbolId:12,income:.28,timestamp:1718097245,incomeUsdt:532}],i=t.reduce((s,o)=>s+o.income,0);console.log("总收益:",i.toFixed(2)),this.tf_totalIncome.text=`${Math.floor(i*1912)} USDT`,this.profitList.array=t}initProfile(){this.tf_createerName.text=j.playerDto.name}onCreateRoom(){Fe.intance.openModule(T.CreateClubRoomDialog)}onDisable(){this.clearCountdownTimer()}};Pg=P([i2("ONHYlGbrToqo_uNbZuaf3A")],Pg);var Fg=class extends Laya.Dialog{};var{regClass:n2}=Laya,Ug=class extends Fg{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){this.btn_create.on(Laya.Event.CLICK,this,this.onCreate)}onCreate(){this.close(),De.notice("Create Success"),Xe.setCurrentScene(pe.M_SCENE_CLUB)}onDisable(){this.btn_create.off(Laya.Event.CLICK,this,this.onCreate)}};Ug=P([n2("7vh7JPfDTn2jn2qa3Tzn4A")],Ug);var Hg=class extends Laya.Dialog{};var{regClass:s2}=Laya,zg=class extends Hg{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){this.btn_create.on(Laya.Event.CLICK,this,this.onCreate),this.btn_shop.on(Laya.Event.CLICK,this,this.onGoShop),w.on("msg_"+v.snake.socket.MessageType.MSG_PACK_INFO,this,this.onPackInfo),this.initBagInfo()}onCreate(){this.close()}onGoShop(){this.close(),Xe.setCurrentScene(pe.M_SCENE_SHOP)}initBagInfo(){}onPackInfo(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_PACK_INFO);if(i===v.snake.socket.MessageCode.SYS_NORMAL){$a.updateKnapsackItems(s.items);let o=[1101,1102,1103,1004],a=[],u=!1;o.forEach(p=>{a.push({id:p,count:0})}),s.items&&s.items.length>0&&s.items.forEach(p=>{let m=o.indexOf(p.itemId);m!==-1&&(a[m].count=p.num||0)}),u=a.some(p=>p.count>0),u?(this.tf_itemNo.visible=!1,this.btn_shop.visible=!1):(this.tf_itemNo.visible=!0,this.btn_shop.visible=!0),this.list_item.array=a}}onDisable(){this.btn_create.off(Laya.Event.CLICK,this,this.onCreate),this.btn_shop.off(Laya.Event.CLICK,this,this.onGoShop),w.off("msg_"+v.snake.socket.MessageType.MSG_PACK_INFO,this,this.onPackInfo)}};zg=P([s2("Trnh8WLVQT-6W4h3KUeNgA")],zg);var jg=class extends Laya.Box{};var{regClass:o2}=Laya,Gg=class extends jg{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}onDisable(){}set dataSource(t){if(!t)return;super.dataSource=t,this.referralData=t,console.log("MemberClubListItem",t),this.img_flag.skin=re.getCountryIcon(t.country),this.tf_name.text=t.userName,this.PlayerIcon.headSkin=t.icon,this.tf_memberLevel.text=t.level,this.tf_match.text=t.matches;let i=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=i%2===1}};Gg=P([o2("3U7la1usRgKQbfApkNfiHQ")],Gg);var Vg=class extends Laya.Box{};var{regClass:a2}=Laya,Wg=class extends Vg{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btnSetting.on(Laya.Event.CLICK,this,this.onOpenSettingDialog),w.on(S.EVENT_CHANGE_CLUB_RATE,this,this.onUpdateRate)}onDisable(){w.off(S.EVENT_CHANGE_CLUB_RATE,this,this.onUpdateRate)}set dataSource(t){if(!t)return;super.dataSource=t,this.referralData=t,console.log("MemberMyListItem",t),this.img_flag.skin=re.getCountryIcon(t.country),this.tf_name.text=t.userName,this.PlayerIcon.headSkin=t.icon,this.tf_memberLevel.text=t.level,this.tf_referrals.text=t.referrals,this.tf_rate.text=t.rate;let i=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=i%2===1}onOpenSettingDialog(){Fe.intance.openModule(T.SettingRateDialog,this.referralData)}onUpdateRate(t){t&&this.referralData&&t.userName===this.referralData.userName&&(this.tf_rate.text=t.rateValue,this.referralData.rate=t.rateValue)}};Wg=P([a2("_-8v_mmLR1CuN--HtoX-Uw")],Wg);var Kg=class extends Laya.Box{};var{regClass:l2}=Laya,$g=class extends Kg{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}onDisable(){}set dataSource(t){if(!t)return;super.dataSource=t,this.img_flag.skin=re.getCountryIcon(t.country),this.tf_name.text=t.userName,this.PlayerIcon.headSkin=t.icon,this.tf_income.text=`${t.income} ETH`,this.tf_rate.text=`${Math.floor(t.income*1901)} USDT`;let i=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=i%2===1;let s=new Date(t.timestamp*1e3),o=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0"),u=String(s.getHours()).padStart(2,"0"),p=String(s.getMinutes()).padStart(2,"0"),m=String(s.getSeconds()).padStart(2,"0");this.tf_time.text=`${o}/${a} ${u}:${p}:${m}`}};$g=P([l2("gevXZPT3TWCi4DUrM__uOg")],$g);var qg=class extends Laya.Dialog{};var{regClass:c2}=Laya,Yg=class extends qg{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.addL=1}onEnable(){this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_ok.on(Laya.Event.CLICK,this,this.onComfirm),this.btn_close.on(Laya.Event.CLICK,this,this.close)}setOpenData(t){this.data=t,t&&(this.addL=t.rate,this.tf_rateNum.text=`${t.rate} %`,console.log("data",t))}onComfirm(){let t={userName:this.data.userName,rateValue:this.addL};w.event(S.EVENT_CHANGE_CLUB_RATE,t),this.close()}handleClickBtn(t){switch(t){case this.btn_reduce:this.addL>5&&(this.addL-=.5),this.setItemNum();break;case this.btn_plus:this.addL<15&&(this.addL+=.5),this.setItemNum();break}}setItemNum(){this.tf_rateNum.text=`${this.addL} %`}onDisable(){this.btn_ok.off(Laya.Event.CLICK,this,this.onComfirm),this.btn_close.off(Laya.Event.CLICK,this,this.close)}};Yg=P([c2("T4HZSfZ-Ry6DwwvmwW29RA")],Yg);var Qg=class extends Laya.Dialog{};var{regClass:u2}=Laya,Xg=class extends Qg{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.dialogType=0}setOpenData(t){t&&t.length>0&&(this.dialogType=t[0])}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.btn_close.on(Laya.Event.CLICK,this,this.close),w.on("msg_"+v.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse),this.initContainer()}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList()}handleSelectHead(t){if(t!=-1){let i=this.list_head.selectedItem;j.headId=i.id,this.playerIcon.headSkin=j.headId}}createHeadList(){let t=ee.m_dicHead;this.list_head.array=t.values,this.list_head.visible=!0;let i=-1,s=0;this.playerIcon.headSkin=j.headId;for(let o of t.values){if(o.id==j.headId){i=s;break}s++}this.list_head.selectedIndex=i}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,i=z.getUILang("Upload picture"),s=z.getUILang("Select Image"),o=z.getUILang("Save changes");openUploadPic(this,t,i,s,o)}async openPicEnd(t,i){if(i.length>500){let s=await wt.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);s&&(j.headId=s.imgUrl,t.playerIcon.headSkin=s.imgUrl,console.log(s.imgUrl))}}onRegister(){let t=j.headId;this.dialogType===1?this.sendChangeInfoRequest(t):w.event(S.EVENT_MODIFY_HEAD,[t]),this.close()}sendChangeInfoRequest(t){let i=v.snake.socket.MessageType.MSG_CHANGE_INFO,s=v.snake.socket.CS_CHANGE_INFO.fromObject({type:1,value:t.toString()});Me.send(i,s),j.headId=t}onChangeInfoResponse(t,i){var s=Te.getMsgBody(t,v.snake.socket.CS_CHANGE_INFO);i==v.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CHANGE_INFO",s),j.playerDto.icon=s.value,w.event(S.ROLE_INFO_CHANGE),this.close())}onDisable(){w.off("msg_"+v.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse),this.btn_confirm.off(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.off(Laya.Event.CLICK,this,this.onBtnChangePic)}};Xg=P([u2("BmtPy79ySCyg4IuEQC4zsQ")],Xg);var Jg=class extends Laya.ComboBox{};var{regClass:p2}=Laya,Zg=class extends Jg{set defaultLabel(e){this._defaultLabel=e,this._selectedIndex<0&&(this._button.label=e)}onEnable(){this.list=this.comboList,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1)}set dataSource(e){super.dataSource=e;var t=e;if(t){this.list.repeatY=t.length,this.list.width=this.width;var i=[];t.forEach(s=>{s instanceof Array?i.push(s[1]):i.push(s)}),this.labels=i.join(","),console.log("comboData.length: "+t.length,this.labels)}}onCountryItemRender(e,t){e.onChange(this.list.selectedIndex==t)}set isOpen(e){if(console.log("isOpen: "+e),this._isOpen!=e)if(this._isOpen=e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),i=t.y+this._button.height;i=i+this._listHeight<=Laya.stage.height||t.y-this._listHeight<0?i:t.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(t.x,i),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};Zg=P([p2("AqEOSlrnRkmI9RUPCJUVqQ")],Zg);var eb=class extends Laya.List{};var{regClass:m2}=Laya,tb=class extends eb{};tb=P([m2("7DDHp602Rs6dL3bjAu4ArA")],tb);var rb=class extends Laya.Box{};var{regClass:d2}=Laya,ib=class extends rb{addEvent(){}set dataSource(t){super.dataSource=t;var i=t;i&&(this.addEvent(),t.id==999?(this.img_icon.visible=!1,this.tf_name.text="All"):(this.img_icon.visible=!0,this.img_icon.skin=re.getCountryIcon(i.id),this.tf_name.text=z.getLanguage(i.name)))}onChange(t){t?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};ib=P([d2("LJ8PUf7kRCGUr4eT8Mhy3g")],ib);var nb=class extends Laya.Dialog{};var qa=class extends Laya.Event{constructor(){super()}};qa.INIT_CREATELOGIN_EVENT="CreateLoginEvent:INIT_CREATELOGIN_EVENT";var{regClass:h2}=Laya,sb=class extends nb{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_PANEL;this.m_iPositionType=te.CENTER}onEnable(){w.on(qa.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),w.on("msg_"+v.snake.socket.MessageType.MSG_USER_REGISTER,this,this.onWaitPlayerInfoBack),w.on(S.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),w.on(S.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack),this.box_change.on(Laya.Event.CLICK,this,this.onChangeHead),w.on("msg_"+v.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),this.btn_register.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_register]),this.initCountry(),this.initCreateLoginView(),this.initReferral(),qe.sendCustumEvent(23)}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(t,i){t.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=i,this.onHideCountry())}handleClickBtn(t){switch(t){case this.btn_register:this.onRegister();break;case this.btn_setting:Fe.intance.openModule(T.GameSettingLanguageDialog);break}}onListDown(t){t.stopPropagation()}onScrollBarDown(t){t.stopPropagation()}onCountryItemRender(t,i){t.onChange(this.list_country.selectedIndex==i)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(t){if(console.log("handleSelectCountry: "+t),t!=-1){let i=this.list_country.selectedItem;j.countryId=i.id,this.img_flag.skin=re.getCountryIcon(i.id),this.tf_country.text=z.getLanguage(i.name)}}createCountryList(){let t=ee.m_dicCountry;this.list_country.array=t.values,this.list_country.visible=!0;let i=-1,s=0;for(let o of t.values){if(o.id==j.countryId){i=s;break}s++}this.list_country.selectedIndex=i}onChangeHeadBack(t,i){this.input_name.text=t,j.headId=i,this.playerIcon.headSkin=i}onChangeModifyHead(t){j.headId=t,this.playerIcon.headSkin=t}onChangeHead(){Fe.intance.openModule(T.ChangeHeadDialog,[0])}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,i=z.getUILang("Upload picture"),s=z.getUILang("Select Image"),o=z.getUILang("Save changes");openUploadPic(this,t,i,s,o)}async openPicEnd(t,i){if(i.length>500){let s=await wt.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);s&&(j.headId=s.imgUrl,t.playerIcon.headSkin=s.imgUrl,console.log(s.imgUrl))}}async onRegister(){let t=this.input_name.text,i=1;if(t=t.trim(),t==""){De.notice(z.getLanguage(25));return}if(j.countryId==-1){De.notice(z.getLanguage(33));return}let s=new URL(window.location.href),a=new URLSearchParams(s.search).get("referral");if(a||(a=new URLSearchParams(s.hash.substring(1)).get("referral")),!a){let p=window.location.href.match(/referral=([^&]+)/);p&&p[1]&&(a=p[1])}console.log("referral: ",a),await ze.createAcccount(t,i,j.headId.toString(),j.countryId,a)}onWaitPlayerInfoBack(t){var i=Te.getMsgBody(t,v.snake.socket.SC_USER_REGISTER);if(i){nt.hideLoading();var s=i.roleInfo,o=new fs;o.pid=s.roleId,o.name=s.userName,o.lv=s.lv,o.icon=s.icon,o.exp=s.score,o.code=s.code,o.country=s.country,o.invite=s.invite,o.snakeId=s.snakeId,o.skinId=s.skin,o.createTime=s.createTime,o.maxKill=s.maxKill,o.maxAlive=s.maxAlive,o.score=s.score,j.playerDto=o,this.close(),w.event(S.EVENT_ENTER_MAIN)}}requestInvitePlayerInfo(t){let i=v.snake.socket.MessageType.MSG_REQUEST_INFO,s=v.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t,type:2});Me.send(i,s)}initReferral(){let t=new URL(window.location.href),s=new URLSearchParams(t.search).get("referral");if(s)this.requestInvitePlayerInfo(s);else{let a=new URLSearchParams(t.hash.substring(1)).get("referral");if(a)this.requestInvitePlayerInfo(a);else{let p=window.location.href.match(/referral=([^&]+)/);p&&p[1]?this.requestInvitePlayerInfo(p[1]):this.box_code.visible=!1}}}initCreateLoginView(){}onDisable(){this.removeEvent()}removeEvent(){w.off(qa.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),w.off(S.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),w.off(S.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack)}onRequestInfo(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_REQUEST_INFO);if(i==v.snake.socket.MessageCode.SYS_NORMAL){var o=s.roleInfo;this.tf_inviteName.text=Tt.truncateString(o.userName,9),this.playerIcon2.headSkin=o.icon,o.club?(this.tf_clubName.text=Tt.truncateString("clubclubclubclub",9),this.clubBox.visible=!0,this.nameBox.x=318):(this.clubBox.visible=!1,this.nameBox.x=89),console.log("玩家信息",o)}}};sb=P([h2("1K2SyFxcQY-12SasSSRXyQ")],sb);var ob=class extends Laya.Dialog{};var{regClass:f2}=Laya,ab=class extends ob{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){w.on("msg_"+v.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onRequestInfo),this.initContainer()}initContainer(){let t=j.playerDto;var i=v.snake.socket.MessageType.MSG_INVITE_LIST,s=v.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t.pid});Me.send(i,s)}onRequestInfo(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_INVITE_LIST);if(i==v.snake.socket.MessageCode.SYS_NORMAL){var o=s.info;this.list_rental.array=o}}onDisable(){w.off("msg_"+v.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onRequestInfo)}};ab=P([f2("ULWdMgcOTD-Y9ATVEVTfpg")],ab);var lb=class extends Laya.Box{};var{regClass:g2}=Laya,cb=class extends lb{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}set dataSource(t){if(!t)return;super.dataSource=t,this.referralData=t;let[i,s,,o,a,u]=t.split(","),p={headId:i,nickName:s,country:Number(o),battle:a,online:u};this.tf_name.text=p.nickName,this.playerIcon.headSkin=p.headId;let m=ee.m_dicCountry.get(p.country);m&&(this.img_country.skin=re.getCountryIcon(m.id),this.tf_country.text=Tt.truncateString(z.getLanguage(m.name),9)),this.tf_battle.text=p.battle;let h=p.online==="0";this.tf_online.text=h?"online":At.formatTimeAgoFromTimestamp(Number(p.online)),this.tf_online.color=h?"#12f801":"#ffffff"}onBtn12(){this.referralData.remNum>0&&Fe.intance.openModule(T.ReferralL2Dialog,this.referralData)}};cb=P([g2("UE9rYjENQbOU-0ZTLzyHGw")],cb);var ub=class extends Laya.Dialog{};var{regClass:b2}=Laya,pb=class extends ub{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){Ye.playSoundByName(Ye.soundName32)}onDisable(){}};pb=P([b2("szfg-Zt_RRWZ_nHMppjUMA")],pb);var mb=class extends Laya.Box{};var{regClass:y2}=Laya,db=class extends mb{set dataSource(e){super.dataSource=e;var t=e;t&&(this.img_icon.skin="res/role/img_icon_"+t[0]+".png",this.tf_name.text=z.getUILang(t[1]),this.tf_num.text=t[2])}};db=P([y2("WJ5TDeRBSkC9yMqJ72B0Ow")],db);var hb=class extends Laya.Box{};var{regClass:_2}=Laya,fb=class extends hb{set dataSource(t){super.dataSource=t,this.headItem=t,this.headItem&&this.setCurrentOutPut()}async setCurrentOutPut(){let t=this.headItem.id;this.playerIcon.headSkin=t}onChange(t){}};fb=P([_2("AwN_JFPwQsKswm1N53Bmkg")],fb);var gb=class extends Laya.Scene{};var{regClass:x2}=Laya,bb=class extends gb{constructor(t){super()}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.on(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.on(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.on(Laya.Event.CLICK,this,this.onDetail),this.btn_changeName.on(Laya.Event.CLICK,this,this.onBtnChangeNameClick),this.btn_confirm.on(Laya.Event.CLICK,this,this.sendChangeInfoRequest),w.on("msg_"+v.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),w.on(S.ROLE_INFO_CHANGE,this,this.updateRoleInfo),w.on("msg_"+v.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse),this.updateRoleInfo(),vt.startJellyScaleAnimation(this.tf_tittle)}updateRoleInfo(){let t="1",i=j.playerDto;if(!i){console.warn("Player data is not available");return}this.requestPlayerInfo(i.pid),this.updateBasicInfo(i),this.updateReferralInfo(i),this.updateCountryInfo(i.country),this.updateWalletAddress(),this.updatePlayerIcon(i.icon||t)}requestPlayerInfo(t){let i=v.snake.socket.MessageType.MSG_REQUEST_INFO,s=v.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t,type:1});Me.send(i,s)}updateBasicInfo(t){this.tf_name.text=t.name,this.tf_roleId.text=t.pid,this.tf_createTime.text=`${At.formatDateDDMMYYYY(t.createTime)}`,this.tf_kill.text=`${t.maxKill}`,this.tf_longTime.text=`${t.maxAlive}`,this.tf_level.text=`${t.lv}`}updateReferralInfo(t){t.code?(this.tf_myCode.text=t.code,this.btn_copy2.disabled=!1):(this.tf_myCode.text="",this.btn_copy2.disabled=!0)}updateCountryInfo(t){let i=ee.m_dicCountry.get(t);i&&(this.tf_country.text=z.getLanguage(i.name),this.img_country.skin=re.getCountryIcon(i.id))}updateWalletAddress(){let t=ze.walletAddress;this.tf_address.text=Kr.formatWalletAddress(t)}updatePlayerIcon(t){this.playerIcon.headSkin=t}onChangeHead(){Fe.intance.openModule(T.ChangeHeadDialog,[1])}onCopy(){let t=ze.walletAddress;doCopy(t),De.notice(z.getLanguage(19))}onCopy2(){let t=this.tf_myCode.text,s=`${getVAddress()}?referral=${t}`;doCopy(s),De.notice(z.getLanguage(19))}onRequestInfo(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_REQUEST_INFO);if(i==v.snake.socket.MessageCode.SYS_NORMAL&&s.roleInfo){var o=s.roleInfo;if(s.roleInfo.roleId==j.playerDto.pid){let a=o.invNum;this.ally_num.text=`${a}`,this.tf_totalNum.text=`${o.num}`,this.tf_totalKill.text=`${o.kills}`,this.tf_kill.text=`${o.maxKill}`,this.tf_longTime.text=`${o.maxAlive}`,o.invite?this.requestPlayerInfo(o.invite):this.InviterPlayerIcon.visible=!1}else this.tf_myReferee.text=o.userName,this.InviterPlayerIcon.visible=!0,this.InviterPlayerIcon.headSkin=o.icon}}onDisable(){w.off(S.ROLE_INFO_CHANGE,this,this.updateRoleInfo),this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.off(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.off(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.off(Laya.Event.CLICK,this,this.onDetail),w.off("msg_"+v.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),w.offAllCaller(this),w.off("msg_"+v.snake.socket.MessageType.MSG_CHANGE_INFO,this,this.onChangeInfoResponse)}onDetail(){Fe.intance.openModule(T.ReferralDialog)}setToMainScene(){Xe.setCurrentScene(pe.M_SCENE_MAIN)}onBtnChangeNameClick(){this.nameBox.visible=!1,this.changeNameBox.visible=!0,this.input_name.text=this.tf_name.text}sendChangeInfoRequest(){let t=v.snake.socket.MessageType.MSG_CHANGE_INFO,i=v.snake.socket.CS_CHANGE_INFO.fromObject({type:2,value:this.input_name.text});Me.send(t,i)}onChangeInfoResponse(t,i){if(i==v.snake.socket.MessageCode.SYS_NORMAL){var s=Te.getMsgBody(t,v.snake.socket.CS_CHANGE_INFO);this.nameBox.visible=!0,this.changeNameBox.visible=!1,s.type==1?this.updatePlayerIcon(s.value):(this.tf_name.text=s.value,j.playerDto.name=s.value)}else this.nameBox.visible=!0,this.changeNameBox.visible=!1;w.event(S.ROLE_INFO_CHANGE)}};bb=P([x2("Ra6hof-DS3-o_gxRa_2t0g")],bb);var yb=class extends Laya.Dialog{};var{regClass:v2}=Laya,_b=class extends yb{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}setOpenData(t){}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.input_name.prompt=z.getLanguage(25),this.initContainer();let t=ee.getGeneralValueById(13);this.tf_nameGold.text=t[1],this.img_nameGold.skin=re.getMoneyIcon(t[0]),console.log(t)}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList(),this.initCountry()}handleSelectHead(t){if(t!=-1){let i=this.list_head.selectedItem;j.headId=i.id,this.playerIcon.headSkin=j.headId}}createHeadList(){let t=ee.m_dicHead;this.list_head.array=t.values,this.list_head.visible=!0;let i=-1,s=0;j.headId=j.playerDto.icon,this.playerIcon.headSkin=j.headId,this.input_name.text=j.playerDto.name;for(let o of t.values){if(o.id==j.headId){i=s;break}s++}this.list_head.selectedIndex=i}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(t,i){t.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=i,this.onHideCountry())}onListDown(t){t.stopPropagation()}onScrollBarDown(t){t.stopPropagation()}onCountryItemRender(t,i){t.onChange(this.list_country.selectedIndex==i)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(t){if(console.log("handleSelectCountry: "+t),t!=-1){let i=this.list_country.selectedItem;j.countryId=i.id,this.img_flag.skin=re.getCountryIcon(i.id),this.tf_country.text=z.getLanguage(i.name)}}createCountryList(){let t=ee.m_dicCountry;this.list_country.array=t.values,this.list_country.visible=!0;let i=-1,s=0;j.countryId=j.playerDto.country;for(let o of t.values){if(o.id==j.countryId){i=s;break}s++}this.list_country.selectedIndex=i}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,i=z.getUILang("Upload picture"),s=z.getUILang("Select Image"),o=z.getUILang("Save changes");openUploadPic(this,t,i,s,o)}async openPicEnd(t,i){if(i.length>500){let s=await wt.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);s&&(j.headId=s.imgUrl,t.playerIcon.headSkin=s.imgUrl,t.list_head.selectedIndex=-1,console.log(s.imgUrl))}}onRegister(){let t=this.input_name.text;if(t=t.trim(),t==""){De.notice(z.getLanguage(25));return}if(j.playerDto.name!==t&&j.getConsumeValue($e.TYPE_GOLD)<Number(this.tf_nameGold.text)){De.notice(qt.get(51));return}j.headId!=-1?this.onModify(t,j.headId,j.countryId):De.notice(z.getLanguage(28))}async onModify(t,i,s){if(t==""){De.notice(z.getLanguage(25));return}let o=await tg.updateProfile(t,i.toString(),s);this.destroyed||(o?(j.playerDto=o,this.close(),w.event(S.ROLE_INFO_CHANGE)):De.notice(z.getLanguage(29)))}};_b=P([v2("3CibwwHGSPG2Qkeq4rbMag")],_b);var xb=class extends Laya.ComboBox{};var{regClass:I2}=Laya,vb=class extends xb{set defaultLabel(e){this._defaultLabel=e,this._selectedIndex<0&&(this._button.label=e),this._button.labelAlign="center"}onEnable(){this.list=this.comboList}set dataSource(e){super.dataSource=e;var t=e;t&&(this.labels=t.join(","),console.log("comboData.length: "+t.length),this.list.repeatY=t.length,this.list.width=this.width,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1))}onCountryItemRender(e,t){e.onChange(this.list.selectedIndex==t)}set isOpen(e){if(console.log("isOpen: "+e),this._isOpen!=e)if(this._isOpen=e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),i=t.y+this._button.height;i=i+this._listHeight<=Laya.stage.height||t.y-this._listHeight<0?i:t.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(t.x,i),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};vb=P([I2("Fns-7UW3RpSb95NWnjiDFQ")],vb);var Ib=class extends Laya.Dialog{};var{regClass:S2}=Laya,_s=class extends Laya.Script{constructor(){super();this._isLeft=!1}onAwake(){}get isLeft(){return this._isLeft}set isLeft(t){this._isLeft=t,this.btn_bg=this.owner.getChildByName("btn_bg"),this.label_left=this.owner.getChildByName("label_left"),this.label_right=this.owner.getChildByName("label_right"),this.isLeft?(this.btn_bg.x=4,this.label_left.color="#213343",this.label_right.color="#52a5e0"):(this.btn_bg.x=this.owner.width-this.btn_bg.width-4,this.label_left.color="#52a5e0",this.label_right.color="#213343")}};_s=P([S2("-1MGS4JRSMOn_RKPUuuV9Q")],_s);var{regClass:k2}=Laya,Sb=class extends Ib{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.totalLans=[1,6,7];this.currLan=0}onEnable(){this.musicSwitchButton=this.box_music.getComponent(_s),this.soundSwitchButton=this.box_sound.getComponent(_s),this.initContainer(),this.box_music.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_music]),this.box_sound.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_sound]),this.btn_copy.clickHandler=new Laya.Handler(this,this.onClickHandler,[this.btn_copy]),this.btn_referral.on(Laya.Event.CLICK,this,this.onClickHandler,[this.btn_referral]);for(let i=0;i<this.totalLans.length;i++){var t=this.totalLans[i];this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t])}}onClickHandler(t){switch(t){case this.box_music:this.musicSwitchButton.isLeft=!this.musicSwitchButton.isLeft,Ye.switchMusic(this.musicSwitchButton.isLeft);break;case this.box_sound:this.soundSwitchButton.isLeft=!this.soundSwitchButton.isLeft,Ye.switchSound(this.soundSwitchButton.isLeft);break;case this.btn_referral:Fe.intance.openModule(T.InviteRewardDialog);break;case this.btn_copy:{let i=this.inviteUrl;doCopy(i),De.notice(z.getLanguage(19))}break}}initContainer(){this.musicSwitchButton.isLeft=Ye.m_bPlayMusic,this.soundSwitchButton.isLeft=Ye.m_bPlayeSound,this.currLan=j.m_strLanguage,this.setTab(j.m_strLanguage),this.inviteUrl=Ni.getInviteUrl(),this.label_url.text=Kr.shortStr(this.inviteUrl,50)}onClickTab(t){if(this.currLan==t)return;this.currLan=t,this.setTab(t);let i=z.getLanTypeById(t);z.FGM_SetLanguage(i),qe.reload()}setTab(t){for(let s=0;s<this.totalLans.length;s++){var i=this.totalLans[s];t==i?(this["btn_"+i].getChildByName("btn_yellowBg").visible=!0,this["btn_"+i].getChildByName("Label").color="#213343"):(this["btn_"+i].getChildByName("btn_yellowBg").visible=!1,this["btn_"+i].getChildByName("Label").color="#52a5e0")}}webCopyString(t){let i=t,s=window.document.createElement("textarea");s.value=i,s.setAttribute("readonly",""),s.style.contain="strict",s.style.position="absolute",s.style.left="-9999px",s.style.fontSize="12pt";let o=window.getSelection(),a=!1;o.rangeCount>0&&(a=o.getRangeAt(0)),window.document.body.appendChild(s),s.select(),s.selectionStart=0,s.selectionEnd=i.length;let u=!1;try{u=window.document.execCommand("copy")}catch(p){console.error(p)}return window.document.body.removeChild(s),a&&(o.removeAllRanges(),o.addRange(a)),u}};Sb=P([k2("yJfJZzgZRluE_rgB44yTvg")],Sb);var kb=class extends Laya.Dialog{};var wb=class{constructor(){this.connectAddr="ws://175.27.154.72:10001";this.groupApplyList=[];this.groupData=[];this.watch=[]}};var I1=class r{static getInstance(){return r._instance==null&&(r._instance=new r),r._instance}constructor(){this.init()}init(){w.on("msg_"+v.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR,this,this.onRequestRoomAddr)}onRequestRoomAddr(e,t){var i=Te.getMsgBody(e,v.snake.socket.SC_REQUEST_ROOM_ADDR);if(t==v.snake.socket.MessageCode.SYS_NORMAL){var s=i.addr;if(console.log("onRequestRoomAddr: "+s),s){var o=s.lastIndexOf("#");s=s.slice(0,o)}var a=new wb;a.connectAddr=s,ve.roomDto=a,Xe.setCurrentScene(pe.M_SCENE_SNAKE_MATCH)}else t==v.snake.socket.MessageCode.NOT_ENOUGH_TOKEN&&De.notice("Not enough tokens!")}goPvpArenaScene(e,t,i){Oe.arenaType=Oe.ARENA_TYPE_PVP;var s=v.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR,o=v.snake.socket.CS_REQUEST_ROOM_ADDR.fromObject({type:1,ticketId:t,ticketValue:i,roomType:e});Me.send(s,o)}async goAiArenaScene(){Oe.arenaType=Oe.ARENA_TYPE_PVE;var e=new Tu;e.members=await ie.getInstance().spawnSnakes();var t=ie.getInstance().spawnRandomPlayerObject("",!0,!0);e.members.push(t),e.myPlayerObject=t,e.item=pt.spawnFoods(),e.arenaType=Oe.ARENA_TYPE_PVE,e.remainderCd=Q.snake.battleCd,ve.matchDto=e,qr.sendAiEnter(),Xe.setCurrentScene(pe.M_SCENE_AI_ARENA)}},Eb=I1.getInstance();var{regClass:w2}=Laya,S1=3,Zk={selected:["res/main/join/img_tbl1.png","res/main/join/img_tbm1.png","res/main/join/img_tbr1.png"],unselected:["res/main/join/img_tbl2.png","res/main/join/img_tbm2.png","res/main/join/img_tbr2.png"]},ew={selected:"#0c6917",unselected:"#405073"},E2=[2,3,4],Lb=class extends kb{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){this.initEvents(),this.backLayer.alpha=0,this.backLayer.visible=!0,Laya.Tween.to(this.backLayer,{alpha:.7},200,Laya.Ease.linearIn),j.tokenData?this.onTabClick(0):this.requestCoinInfo()}onDisable(){this.removeEvents()}initEvents(){for(let t=0;t<S1;t++)this[`tab${t}`].on(Laya.Event.CLICK,this,this.onTabClick,[t]);w.on(`msg_${v.snake.socket.MessageType.MSG_QUERY_TOKEN}`,this,this.onRequestInfo),this.img_di1.on(Laya.Event.CLICK,this,this.onCheakTab),this.btn_hideBox.on(Laya.Event.CLICK,this,this.onCloseTab),this.btn_font.on(Laya.Event.CLICK,this,this.onEnterMatch),this.backLayer.on(Laya.Event.CLICK,this,this.closeDialog),this.list_token.renderHandler=Laya.Handler.create(this,this.onTokenItemRender,null,!1),this.list_token.selectHandler=new Laya.Handler(this,this.handleSelectToken)}removeEvents(){w.off(`msg_${v.snake.socket.MessageType.MSG_QUERY_TOKEN}`,this,this.onRequestInfo),this.img_di1.off(Laya.Event.CLICK,this,this.onCheakTab),this.btn_hideBox.off(Laya.Event.CLICK,this,this.onCloseTab),this.btn_font.off(Laya.Event.CLICK,this,this.onEnterMatch),this.backLayer.off(Laya.Event.CLICK,this,this.closeDialog);for(let t=0;t<S1;t++)this[`tab${t}`].off(Laya.Event.CLICK,this,this.onTabClick);this.list_token.renderHandler=null,this.list_token.selectHandler=null}onEnterMatch(){console.log(this.roomData),this.roomData&&Eb.goPvpArenaScene(this.roomData.roomType,this.roomData.ticketType[this.roomIndex],this.roomData.ticketAmount[this.roomIndex])}onCheakTab(){j.tokenData&&(this.img_token_pad.visible=!0,this.btn_hideBox.visible=!0)}onCloseTab(){this.img_token_pad.visible&&(this.btn_hideBox.visible=!1,this.img_token_pad.visible=!1)}onTabClick(t){j.tokenData&&(this.updateTabsAppearance(t),this.roomType=E2[t],this.updateRoomData())}updateTabsAppearance(t){for(let i=0;i<S1;i++){let s=this[`tab${i}`],o=s.getChildByName("tf_tit"),a=t===i;s.skin=a?Zk.selected[i]:Zk.unselected[i],o.strokeColor=a?ew.selected:ew.unselected}}updateRoomData(){let i=(ee.m_dicRoom?.values).filter(s=>s.roomType==this.roomType);i.length!==0&&(this.roomData=i[0],this.list_token.array=this.roomData.ticketType,this.list_token.selectedIndex=0,this.updateTokenInfo(0))}updateTokenInfo(t){this.roomIndex=t;let i=j.tokenData.find(s=>s.symbolId==this.roomData.ticketType[t]);i&&(this.tf_coin.text=i.symbol,this.img_coin.skin=re.getCurrencyIcon(this.roomData.ticketType[t]),this.tf_number.text=String(this.roomData.ticketAmount[t]))}onTokenItemRender(t,i){t&&t.onChange&&(t.onChange(this.list_token.selectedIndex==i),this.img_token_pad.visible=!1,this.btn_hideBox.visible=!1)}handleSelectToken(t){t!=-1&&this.updateTokenInfo(t)}requestCoinInfo(){let t=v.snake.socket.MessageType.MSG_QUERY_TOKEN;Me.send(t)}onRequestInfo(t,i){let s=Te.getMsgBody(t,v.snake.socket.SC_QUERY_TOKEN);if(i==v.snake.socket.MessageCode.SYS_NORMAL){let o=Tt.parseTokenData(s.token);j.tokenData=o,this.onTabClick(0)}}setOpenData(t){}closeDialog(){this.close()}};Lb=P([w2("NM3GHDnJRD6AnD7XkkQaig")],Lb);var Tb=class extends Laya.Scene{};var on=class r{constructor(){this._notices=[];this._isPlaying=!1;this._currentIndex=0;this._textField=null;this._container=null;this._speed=2}static get instance(){return this._instance||(this._instance=new r),this._instance}init(e,t,i=2){this._container=e,this._textField=t,this._speed=i,this._configureTextField(),this._textField.visible=!1,this._container.scrollRect=new Laya.Rectangle(0,0,this._container.width,this._container.height)}_configureTextField(){this._textField&&(this._textField instanceof Laya.Text&&(this._textField.overflow=Laya.Text.VISIBLE,this._textField.wordWrap=!1),this._textField instanceof Laya.Label&&(this._textField.overflow=Laya.Text.VISIBLE,this._textField.wordWrap=!1))}addNotice(e){this._notices.push(e),!this._isPlaying&&this._container&&this.play()}addNotices(e){this._notices=this._notices.concat(e),!this._isPlaying&&this._container&&this.play()}clearNotices(){this._notices=[],this._isPlaying=!1,this._currentIndex=0,this._textField&&(this._textField.visible=!1),Laya.timer.clearAll(this)}play(){this._notices.length===0||!this._container||(this._isPlaying=!0,this.showCurrentNotice())}showCurrentNotice(){if(this._notices.length===0){this._isPlaying=!1;return}let e=this._notices[this._currentIndex];this._textField.text=e,this._textField.visible=!0,this._textField instanceof Laya.Label?Laya.timer.frameOnce(1,this,()=>{this._textField.x=this._container.width,Laya.timer.frameLoop(1,this,this.scrollText)}):(this._textField.x=this._container.width,Laya.timer.frameLoop(1,this,this.scrollText))}scrollText(){this._textField.x-=this._speed,this._textField.x+this._textField.width<0&&(Laya.timer.clear(this,this.scrollText),this._currentIndex=(this._currentIndex+1)%this._notices.length,this.showCurrentNotice())}pause(){Laya.timer.clear(this,this.scrollText),this._isPlaying=!1}resume(){!this._isPlaying&&this._notices.length>0&&this.play()}setSpeed(e){this._speed=e}};var go=class{constructor(e=0,t="",i=0,s=0,o=0,a=1){this.id=e,this.content=t,this.priority=i,this.startTime=s,this.endTime=o,this.type=a}isValid(e){return this.startTime===0&&this.endTime===0?!0:this.startTime>0&&this.endTime===0?e>=this.startTime:this.startTime===0&&this.endTime>0?e<=this.endTime:e>=this.startTime&&e<=this.endTime}};var Ya=class{static pushNotice(e){w.event(S.EVENT_NEW_NOTICE,e)}static startAutoPush(e=6e4){let t=["测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试","欢迎来到nake游戏，祝您游戏愉快！","新版本V1.2.5已发布，增加了新的游戏玩法和优化了游戏体验。","游戏将于明日凌晨2:00-4:00进行维护，请提前做好准备。","服务器即将进行维护，预计停机时间2小时。"];Laya.timer.loop(e,null,()=>{let i=Math.floor(Math.random()*t.length),s=t[i];this.pushNotice(s)})}static stopAutoPush(){Laya.timer.clearAll(null)}static clearAllNotices(){on.instance.clearNotices()}};var{regClass:L2}=Laya,Ln=class extends Tb{constructor(){super(...arguments);this.isAnimationRunning=!1;this.currIconAni=1}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP,this.initSpineEvent(),this.initMarquee()}async onOpened(t){this.startBackgroundAnimation(),this.mouseThrough=this.mouseThrough=!0,this.headBox.mouseThrough=!0;let i=this.getChildByName("mcMain");if(i&&(i.mouseThrough=!0),this.updateTopInfo(),qe.sendCustumEvent(34),!!j.playerDto){var o=null;showChatBtn(!0,ze.walletAddress,o),Ln.hasTestedNodesThisSession||(console.log("本次游戏启动，测试节点延迟并选择最佳节点"),Ln.hasTestedNodesThisSession=!0,this.testNodeDelays())}}startBtnAni(){this.currIconAni>5&&(this.currIconAni=1),this["spine_"+this.currIconAni].play(0,!1),this["spine_"+this.currIconAni].visible=!0,this.currIconAni++,Laya.timer.once(2e3,this,this.startBtnAni)}updateTopInfo(){let t=j.playerDto;if(!t)return;this.tf_roleName.text=t.name,t.needTip=!0,this.playerIcon.dataSource=t,this.tf_lv.text=`${t.lv}`,this.tf_score.text=`${t.score}`;let i=ee.getLevelById(t.lv);this.prog_exp.value=t.exp/i.needExp,console.log("playerDto.exp / levelItem.needExp："+t.exp/i.needExp);let s=new Date(j.m_serverTime);console.log("server time toLocaleString："+s.toLocaleString()),console.log("server time offset date："+j.timeZoneOff/60/60)}onGetRoleInfo(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_REQUEST_INFO);if(i==v.snake.socket.MessageCode.SYS_NORMAL){var o=s.roleInfo;console.log("玩家信息",o)}}onEnable(){for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);for(let t=1;t<=4;t++)this[`btn_join_${t}`].on(Laya.Event.CLICK,this,this.joinRoomClick,[t]);this.playerIcon.on(Laya.Event.CLICK,this,this.onClickHead),this.btn_shop.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_shop]),this.btn_guild.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_guild]),this.btn_backpack.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_backpack]),this.btn_asset.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_asset]),this.btn_mail.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_mail]),this.btn_setting.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_setting]),this.btn_rank.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_rank]),this.btn_node.on(Laya.Event.CLICK,this,this.showNodeBox),this.backLayer.on(Laya.Event.CLICK,this,this.hideNodeBox),this.btn_1.on(Laya.Event.CLICK,this,this.showJoinBox),this.btn_closeJoin.on(Laya.Event.CLICK,this,this.hideJoinBox),w.on("msg_"+v.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onGetRoleInfo),w.on(S.ROLE_INFO_CHANGE,this,this.updateTopInfo),w.on(S.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),w.on(S.EVENT_CHANGE_NODE,this,this.initNodeList),w.on(S.EVENT_NEW_NOTICE,this,this.onReceiveNewNotice),this.initNodeList(),Laya.timer.loop(1e4,this,this.startPing)}onClickTab(t){t==2}onReceiveNewNotice(t){t&&t.trim()!==""&&on.instance.addNotice(t)}initSpineEvent(){this.initSpineLoadEvent(this.AniSk_shop,this.btn_shop),this.initSpineLoadEvent(this.AniSk_backpack,this.btn_backpack),this.initSpineLoadEvent(this.AniSk_asset,this.btn_asset),this.initSpineLoadEvent(this.AniSk_rank,this.btn_rank),this.initSpineLoadEvent(this.AniSk_guild,this.btn_guild),this.initSpineLoadEvent(this.AniSk_btn1,this.btn_1),this.initSpineLoadEvent(this.AniSk_btn2,this.btn_2)}async onclickBtnHandler(t){switch(t){case this.btn_shop:Xe.setCurrentScene(pe.M_SCENE_SHOP);break;case this.btn_backpack:Xe.setCurrentScene(pe.M_SCENE_KNAPSACK);break;case this.btn_setting:Xe.setCurrentScene(pe.M_SCENE_SETTING);break;case this.btn_asset:Xe.setCurrentScene(pe.M_SCENE_ASSET);break;case this.btn_rank:Xe.setCurrentScene(pe.M_SCENE_RANK);break;case this.btn_guild:Fe.intance.openModule(T.CreateClubDialog);break;case this.btn_mail:Xe.setCurrentScene(pe.M_SCENE_MAIL);break;default:De.notice(z.getLanguage(52));break}}onHideList(){this.Img_tele.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList)}async onClickHead(){Xe.setCurrentScene(pe.M_SCENE_ROLE)}onDisable(){this.stopBackgroundAnimation(),this.destroySpineEventListeners(),this.destroySpineAnimations(),on.instance.clearNotices(),Ya.stopAutoPush(),Laya.timer.clear(this,this.startPing),w.off(S.ROLE_INFO_CHANGE,this,this.updateTopInfo),w.off(S.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),w.off(S.EVENT_NEW_NOTICE,this,this.onReceiveNewNotice),this.btn_node.off(Laya.Event.CLICK,this,this.showNodeBox),this.backLayer.off(Laya.Event.CLICK,this,this.hideNodeBox),w.off("msg_"+v.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onGetRoleInfo),w.offAllCaller(this),Laya.Tween.clearAll(this),Laya.timer.clearAll(this),showChatBtn(!1),w.off(S.EVENT_CHANGE_NODE,this,this.initNodeList)}destroySpineAnimations(){for(let t=1;t<8;t++){let i=this["spine_"+t];i&&(i.stop(),i.removeSelf())}}onEnterMatchRoom(t){t?Laya.timer.once(2e3,this,this.startBtnAni):Laya.timer.clear(this,this.startBtnAni)}startBackgroundAnimation(){!this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!0,vt.startCircleAnimation(this.bgAni,Laya.stage.width/2,Laya.stage.height/2,30,3500,!0,0,null))}stopBackgroundAnimation(){this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!1,vt.stopCircleAnimation(this.bgAni))}onSpineReady(t){if(!t){console.warn("Button component is null in onSpineReady");return}t.skin=""}getSpineNode(t){return t?t.box_sk?t.box_sk:(console.warn("Spine skeleton node is null in AniSk component"),null):(console.warn("AniSk component is null"),null)}initSpineLoadEvent(t,i){if(!t||!i){console.warn("Invalid parameters in initSpineLoadEvent");return}let s=this.getSpineNode(t);s&&(s.off(Laya.Event.READY,this,this.onSpineReady),s.on(Laya.Event.READY,this,this.onSpineReady,[i]))}destroySpineEventListeners(){[{anisk:this.AniSk_shop,button:this.btn_shop},{anisk:this.AniSk_backpack,button:this.btn_backpack},{anisk:this.AniSk_asset,button:this.btn_asset},{anisk:this.AniSk_rank,button:this.btn_rank},{anisk:this.AniSk_guild,button:this.btn_guild},{anisk:this.AniSk_btn1,button:this.btn_1},{anisk:this.AniSk_btn2,button:this.btn_2}].forEach(({anisk:i,button:s})=>{if(i&&s){let o=this.getSpineNode(i);o&&o.off(Laya.Event.READY,this,this.onSpineReady)}})}showNodeBox(){if(!this.nodeBox){console.warn("nodeBox is not defined in MainScene");return}if(!this.btn_node){console.warn("btn_node is not defined in MainScene");return}this.testNodeDelays(),this.backLayer.visible=!0,this.nodeBox.scaleX=0,this.nodeBox.scaleY=0,this.nodeBox.visible=!1;let t=this.btn_node.localToGlobal(new Laya.Point(this.btn_node.width/2,this.btn_node.height/2));t.x+=90,t.y+=20;let i=this.nodeBox.parent;if(!i){console.warn("nodeBox parent is null");return}let s=i.globalToLocal(t);this.nodeBox.pos(s.x,s.y),vt.startElasticPopupAnimation(this.nodeBox,150,1.1,100,.95,80,Laya.Handler.create(this,()=>{console.log("NodeBox show animation complete")}))}hideNodeBox(){if(!this.nodeBox){console.warn("nodeBox is not defined in MainScene for hiding");return}vt.startLinearShrinkAnimation(this.nodeBox,80,Laya.Handler.create(this,()=>{this.backLayer.visible=!1,console.log("NodeBox hide animation complete")}))}initNodeList(){let t=ee.m_dicNodes.values,i=j.nodeId,s;for(let o=0;o<t.length;o++)if(t[o].id===i){s=t[o];break}if(s){let o=ee.m_dicCountry.get(s.area);o&&(this.tf_nowNodeFlag.skin=re.getNodeIcon(o.id),this.tf_nowNodeFlag2.skin=re.getCountryIcon(o.id)),this.tf_nowNode.text=z.getLanguage(s.name),this.tf_nowNode2.text=z.getLanguage(s.name);let a=t.filter(p=>p.id!==i);this.NodeList.array=a;let u=s.url;j.currentNodeUrl=u}else this.NodeList.array=t;this.startPing()}showJoinBox(){this.joinBox.scaleX=0,this.joinBox.scaleY=0,this.btn_closeJoin.visible=!1,this.img_guangTop.visible=!0,this.backLayer.visible=!0,this.joinBox.visible=!0,Laya.Tween.to(this.joinBox,{scaleX:1.15,scaleY:1.15},200,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this.joinBox,{scaleX:1,scaleY:1},60,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{this.btn_closeJoin.visible=!0}))}))}joinRoomClick(t){switch(this.hideJoinBox(),t){case 1:Fe.intance.openModule(T.JoinRoomDialog,t);break;case 2:break;case 3:Eb.goAiArenaScene();break;case 4:break}}hideJoinBox(){this.btn_closeJoin.visible=!1,Laya.Tween.to(this.joinBox,{scaleX:1.15,scaleY:1.15},50,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this.joinBox,{scaleX:.2,scaleY:.2},200,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{this.joinBox.visible=!1,this.backLayer.visible=!1,this.img_guangTop.visible=!1}))}))}startPing(t=!1){setTimeout(()=>{if(window.requestIdleCallback)window.requestIdleCallback(()=>this.executePing(t),{timeout:1e3});else{let s=0,o=a=>{requestAnimationFrame(()=>{++s>=3?a():o(a)})};o(()=>this.executePing(t))}},t?1e3:2e3)}executePing(t=!1){let i=j.currentNodeUrl||"https://wss-room-sg.queengame.io/test-ping";this.pingServerLite(i).then(s=>{w.event(S.EVENT_Game_Delay,s),(this.nodeBox&&this.nodeBox.visible||t)&&this.updateNodeListDelays()}).catch(s=>{})}pingServerLite(t){return new Promise(i=>{if(!t){i(9999);return}let s=new Image,o=Date.now(),a=!1,u=setTimeout(()=>{a||(a=!0,i(9999))},5e3),p=()=>{if(!a){clearTimeout(u),a=!0;let h=Date.now()-o;i(h)}};s.onload=p,s.onerror=p;let m=`?_t=${Date.now()}&r=${Math.random()}`;s.src=t+m})}updateNodeListDelays(){if(!this.NodeList||!this.NodeList.array||this.NodeList.array.length===0)return;let t=this.NodeList.array,i=(s,o,a)=>{if(s>=t.length)return;let u=Math.min(s+o,t.length);t.slice(s,u).forEach((m,h)=>{m&&m.url&&setTimeout(()=>{this.pingServerLite(m.url).then(f=>{this.updateNodeItemDelay(s+h,f)}).catch(()=>{this.updateNodeItemDelay(s+h,9999)})},h*100+Math.random()*50)}),setTimeout(()=>{i(u,o,a)},a)};setTimeout(()=>{i(0,2,1e3)},1500)}async testNodeDelays(){await new Promise(u=>setTimeout(u,2e3));let t=ee.m_dicNodes.values;if(!t||t.length===0){console.log("节点列表为空，无法进行延迟测试");return}let i=[],s=2,o=800,a=u=>new Promise(p=>{let m=0;u.forEach(h=>{h&&h.url&&h.open===1?setTimeout(()=>{this.pingServerLite(h.url).then(f=>{if(i.push({nodeId:h.id,url:h.url,delay:f}),console.log(`节点 ${h.id} (${h.name}) 延迟: ${f}ms`),this.NodeList&&this.NodeList.array&&this.NodeList.array.length>0){let b=this.NodeList.array.findIndex(y=>y.id===h.id);b!==-1&&this.updateNodeItemDelay(b,f)}}).catch(()=>{if(i.push({nodeId:h.id,url:h.url,delay:9999}),this.NodeList&&this.NodeList.array&&this.NodeList.array.length>0){let g=this.NodeList.array.findIndex(b=>b.id===h.id);g!==-1&&this.updateNodeItemDelay(g,9999)}}).finally(()=>{m++,m>=u.length&&p()})},Math.random()*200):(m++,m>=u.length&&p())}),u.length===0&&p()});for(let u=0;u<t.length;u+=s){let p=t.slice(u,u+s);await a(p),u+s<t.length&&await new Promise(m=>setTimeout(m,o))}if(i.length>0){i.sort((p,m)=>p.delay-m.delay);let u=i[0];if(u.delay<9999)console.log(`选择最佳节点: ${u.nodeId}，延迟: ${u.delay}ms`),j.nodeId=u.nodeId,j.currentNodeUrl=u.url;else{console.warn("所有节点测试都失败，使用默认节点1001"),j.nodeId=1001;let p=t.find(m=>m.id===1001);p&&p.url?j.currentNodeUrl=p.url:j.currentNodeUrl="https://wss-room-sg.queengame.io/test-ping"}}}initMarquee(){if(!this.runBox||!this.tf_run1){console.warn("跑马灯组件不存在，无法初始化");return}on.instance.init(this.runBox,this.tf_run1,2)}getMarqueeNotices(){let t=Date.now(),s=[new go(1,"欢迎来到Snake游戏，祝您游戏愉快！欢迎来到Snake游戏，祝您游戏愉快！欢迎来到Snake游戏，祝您游戏愉快！",1,0,0,1),new go(2,"新版本V1.2.5已发布，增加了新的游戏玩法和优化了游戏体验。新版本V1.2.5已发布，增加了新的游戏玩法和优化了游戏体验。新版本V1.2.5已发布，增加了新的游戏玩法和优化了游戏体验。",2,0,0,1),new go(3,"近期将举办线上锦标赛，请关注游戏内公告。近期将举办线上锦标赛，请关注游戏内公告。近期将举办线上锦标赛，请关注游戏内公告。",3,0,0,2),new go(4,"游戏将于明日凌晨2:00-4:00进行维护，请提前做好准备。游戏将于明日凌晨2:00-4:00进行维护，请提前做好准备。游戏将于明日凌晨2:00-4:00进行维护，请提前做好准备。",4,0,0,3)].filter(a=>a.isValid(t));s.sort((a,u)=>u.priority-a.priority);let o=s.map(a=>a.content);o.length>0&&on.instance.addNotices(o),Ya.startAutoPush(6e4)}async fetchMarqueeNoticesFromServer(){try{}catch(t){console.error("获取跑马灯公告失败:",t)}}updateNodeItemDelay(t,i){let s=this.NodeList.getCell(t);s&&s.setDelay&&s.setDelay(i)}};Ln.M_B_FIRST_Open=!0,Ln.hasTestedNodesThisSession=!1,Ln=P([L2("pxhiJrX5SkKKvyFr8uIlNA")],Ln);var Tn=class{constructor(){}};Tn.GREEN="#2ac84b",Tn.YELLOW="#e8c833",Tn.RED="#e04343";var Ab=class extends Laya.Box{};var{regClass:T2}=Laya,Cb=class extends Ab{constructor(){super()}onEnable(){w.on(S.EVENT_Game_Delay,this,this.onGameDelay)}onGameDelay(e){var t=ee.getGeneralValueById(6),i=t[0],s=t[1];this.tf_delay.text=e+"ms",e>s?(this.img_delay.skin="res/common/comm/img_xh1.png",this.tf_delay.color=Tn.RED):e>i?(this.img_delay.skin="res/common/comm/img_xh2.png",this.tf_delay.color=Tn.YELLOW):(this.img_delay.skin="res/common/comm/img_xh3.png",this.tf_delay.color=Tn.GREEN)}onDisable(){w.off(S.EVENT_Game_Delay,this,this.onGameDelay)}};Cb=P([T2("AhgzWGWoRFetvSMsEOSkSg")],Cb);var Mb=class extends Laya.Box{};var{regClass:A2}=Laya,Rb=class extends Mb{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.changeNode)}set dataSource(t){if(super.dataSource=t,!t)return;this.nodeItem=t,this.tf_country.text=z.getLanguage(t.name);let i=ee.m_dicCountry.get(t.area);this.img_flag.skin=re.getCountryIcon(i.id),this.tf_delay.text="100ms"}changeNode(){j.nodeId=this.nodeItem.id,w.event(S.EVENT_CHANGE_NODE)}setDelay(t){this.tf_delay&&(t>=9999?(this.tf_delay.text="超时",this.tf_delay.color="#FF0000"):t>500?(this.tf_delay.text=t+"ms",this.tf_delay.color="#FF0000"):t>200?(this.tf_delay.text=t+"ms",this.tf_delay.color="#FFFF00"):(this.tf_delay.text=t+"ms",this.tf_delay.color="#00FF00"))}};Rb=P([A2("PayHrcvHRHadv1wSa6XTzA")],Rb);var Bb=class extends Laya.Box{};var{regClass:C2}=Laya,Db=class extends Bb{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.playerDto=t,this.playerDto&&(this.addEvent(),this.setCurrentOutPut())}set headSkin(t){parseInt(t)>0?this.img_head.skin=re.getPlayerIcon(t):this.setImage(t)}async setCurrentOutPut(){if(!this.playerDto)return;let t=this.playerDto.icon;parseInt(t)>0?this.img_head.skin=re.getPlayerIcon(t):this.setImage(t)}setImage(t){this.clearImage();var i=this;Laya.loader.load(t,Laya.Handler.create(this,()=>{i.destroyed||(this.img_head.skin=t)}),null,Laya.Loader.IMAGE,-1,!0,"1111",!1,!1)}clearImage(){this.img_head&&(this.img_head.texture=null)}destroy(t=!0){this.clearImage(),super.destroy(t)}toDetail(){!this.playerDto||this.playerDto.needTip}};Db=P([C2("OPT5t2CoSmuYp2zUJWwUWA")],Db);var Ob=class extends Laya.Dialog{};var{regClass:M2}=Laya,Nb=class extends Ob{constructor(){super();this.m_iLayerType=te.M_TOP;this.m_iPositionType=te.CENTER}onEnable(){Laya.Tween.to(this.backLayer,{alpha:1},200,Laya.Ease.linearIn),vt.startElasticPopupAnimation(this.allBox,150,1.1,100,.95,80),this.btn_ok.on(Laya.Event.CLICK,this,this.close)}setOpenData(t){if(t){console.log("收到升级通知:",t);let i=t.items[0],s=i.itemId,o=i.num,a=ee.m_dicItems.get(s);this.img_icon.skin=re.getItemIcon(a.icon),this.tf_num.text=`+${o}`}}onDisable(){}};Nb=P([M2("gNPNtfC8SYW_NR7gSnpNlg")],Nb);var Pb=class extends Laya.Box{};var{regClass:R2}=Laya,Fb=class extends Pb{set dataSource(t){if(super.dataSource=t,t){let i=j.tokenData.find(s=>s.symbolId==t);this.tf_data.text=i.symbol,this.img_coin.skin=re.getCurrencyIcon(i.symbolId)}}onDisable(){}onChange(t){t?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};Fb=P([R2("7DyPeY0BQZaSycl2nmV5qg")],Fb);var Ub=class extends Laya.Box{};var{regClass:B2}=Laya,bo=class extends Ub{constructor(){super();this.isReady=!1;this.needChangeAni=!0;this.loop=!0;this.isInited=!1}onEnable(){this.sk=this.box_sk,this.sk.on(Laya.Event.READY,this,this.onSkReady),this.sk.loop=this.loop,console.log("onEnable: + this.animationName： "+this.animationName),this.animationName&&(this.sk.animationName=this.animationName),this.spineTemplet?(this.sk.templet=this.spineTemplet,console.log("onEnable: + this.spineTemplet ")):this.templateUrl?Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(t=>{this.destroyed||(this.sk.templet=t,console.log("this.templateUrl: "+this.templateUrl))}):this.animationName||(this.sk.animationName="animation"),this.isInited=!0}onSkReady(){this.isReady=!0,console.log("onSkReady this.visible: "+this.visible)}play(t,i,s,o,a,u,p){if(!this.isReady){console.log("动画未准备好，不能play");return}this.sk.play(t,i,s,o,a,u,p)}stop(){if(!this.isReady){console.log("动画未准备好，不能stop");return}this.sk.stop()}init(t,i="animation",s=!0){console.log("init: ",i,t),this.animationName=i,this.spineTemplet=t,this.loop=s,this.visible=!0,this.isInited&&(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=this.spineTemplet)}initUrl(t,i="animation",s=!0){console.log("initUrl: ",t),this.animationName=i,this.templateUrl=t,this.loop=s,this.visible=!0,this.isInited&&Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(o=>{this.destroyed||(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=o,console.log("this.templateUrl: "+this.templateUrl))})}onDisable(){Laya.Pool.recover(bo.aniSkPrefab,this),this.box_sk.off(Laya.Event.READY,this,this.onSkReady),this.sk.templet=null}};bo.aniSkPrefab="aniSkPrefab",bo=P([B2("2rJV0EbMT9K2L6-6HOpDHw")],bo);var xs=class r{static toFixed(e,t){if(e.toString().indexOf(".")==-1)return e;{let i=e.toFixed(t);return parseFloat(i)}}static toFixedWithPercent(e,t,i="+"){let s;return e.toString().indexOf(".")==-1?s=i+e*100+"%":(t=t-2,t<0&&(t=0),s=i+(e*100).toFixed(t)+"%"),s}static getGoldStr(e){let t;return e>999999?t=parseInt(String(e/1e5))+"m":t=e,t}static numStringFormat(e){let t=e;return j.m_strLanguage==2?e.length>4&&(t=String(e).replace(/(\d)(?=(\d{3})+$)/g,"$1 ")):t=String(e).replace(/(\d)(?=(\d{3})+$)/g,"$1,"),t}static numSimple(e){let t=e,i=parseInt(parseInt(t)/1e3+"");return i>0?i+"k":r.numStringFormat(t)}static numStringFormat2(e){let t;if(e>999999)t=r.getNumStr(e,1e6,"M");else if(e>999)t=r.getNumStr(e,1e3,"K");else return e+"";return t}static getNumStr(e,t,i){return parseInt(Math.floor(e/t)+"")+i}static getTimeStr(e){let t;return e<3600?t=z.getLanguage(9024,Math.ceil(e/60)):e<3600*24?t=z.getLanguage(9025,Math.ceil(e/3600)):t=z.getLanguage(9025,Math.ceil(e/(3600*24))),t}static isInteger(e){return e%1===0}static isNumber(e){return typeof e=="number"}static formatNumber(e,t=8){return Number.isInteger(e)?e:parseFloat(e.toFixed(t))}static formatNumberStr(e,t=2){return Number.isInteger(e)?e:parseFloat(e.toFixed(t)).toString()}static filterNumFormat(e,t=2,i=!1,s=!1){if(!e)return e;if(e<1e3&&e>0)if(s){var o=Math.floor(Number(parseFloat(e*10**t+"").toPrecision(16)))/10**t;return parseFloat(o.toFixed(t)).toString()}else return parseFloat(e.toFixed(t)).toString();if(e==="0.00")return e;var a=[{value:1,symbol:""},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}];i&&(a=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}]);var u=/\.0+$|(\.[0-9]*[1-9])0+$/,p;for(p=a.length-1;p>0&&!(e>=a[p].value);p--);let m=(e/a[p].value).toString();return m.indexOf(".")>-1&&(t>0?m=m.substr(0,m.indexOf(".")+t+1):m=m.substr(0,m.indexOf(".")+t)),m.replace(u,"$1")+a[p].symbol}static fromWei(e,t,i=0){if(!e)return 0;let s=e.length-t+i;if(s<=0)return 0;let o=e.toString().slice(0,s);if(i){let a=o.length-i;if(a<=0){let u="0.";for(let p=0;p<Math.abs(a);p++)u+="0";o=u+o}else o=o.slice(0,o.length-i)+"."+o.slice(o.length-i)}return o}static getNumberSuffix(e){let t=parseInt(e,10);return isNaN(t)?e:(t%1e9).toString()}};var Hb=class extends Laya.Box{};var{regClass:D2}=Laya,zb=class extends Hb{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.itemVo=t,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(!this.itemVo)return;this.itemVo.m_iId==$e.TYPE_QUAN_MNT?(this.tf_quanId.visible=!0,this.tf_quanId.text=this.itemVo.m_iPk):this.tf_quanId.visible=!1;let t=this.itemVo.itemItem;Fe.intance.hasOpenView(T.PveChoosePropsDialog)&&(this.txt_num.visible=!1),t?(this.showAdd?this.txt_num.text=""+xs.formatNumber(this.itemVo.newAddCnt,8):this.itemVo.m_iNum?this.txt_num.text=""+xs.formatNumber(this.itemVo.m_iNum,8):this.txt_num.text=""+xs.formatNumber(this.itemVo.newAddCnt,8),this.img_icon.skin=re.getItemIcon(t.icon),this.img_box.skin="gameIcon/items/itemBg/img_"+t.quality+".png"):(this.txt_num.text="",this.img_icon.skin=null,this.img_box.skin="gameIcon/items/itemBg/img_0.png"),this.tf_isSch.visible=this.itemVo.isScholarship}};zb=P([D2("LzxJYKybT_m3CJav3RyDmg")],zb);var jb=class extends Laya.Dialog{};var{regClass:O2}=Laya,Gb=class extends jb{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}setOpenData(t){if(t){this.itemVo=t;let i=this.itemVo.itemItem.id,s=ee.m_dicItems.get(i);this.txt_desc.text=z.getLanguage(s.des),this.txt_desc.visible=s.des!==0}}onEnable(){this.item.dataSource=this.itemVo;let t=this.itemVo.itemItem;this.tf_name.text=z.getLanguage(t.name),this.txt_type.text=z.getLanguage(6060)+z.getLanguage(t.type),this.txt_desc.text=z.getLanguage(t.des)}removeEvent(){}};Gb=P([O2("or8jNdIhRpSbAG2JBhH-wA")],Gb);var Vb=class extends Laya.Dialog{};var{regClass:N2}=Laya,Wb=class extends Vb{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){Ye.playSoundByName(Ye.soundName32)}setOpenData(t){t&&(this.reward=t);var i=[],s=this.reward;s.forEach(m=>{if(m.id&&m.id>0){var h=new vr(m.id);h.newAddCnt=m.count,m.id==3011&&(h.itemItem.icon=m.id),i.push(h)}});var o=this.list_reward.spaceX,a=this.list_reward.itemTemplate.width,u=i.length;this.list_reward.repeatX=u;var p=u*a+o*(u-1);this.list_reward.width=p,this.list_reward.x=this.width-p>>1,this.list_reward.array=i}};Wb=P([N2("xwYUFnd4S3uJGIJSjjbRag")],Wb);var Kb=class extends Laya.Scene{};var k1=class r{constructor(){this.comIdMap=new Map}static getInstance(){return r._instance||(r._instance=new r),r._instance}init(){this.comIdMap.set(v.snake.socket.MessageType.MSG_PLAYER_OPR,"CS_"),this.comIdMap.set(v.snake.socket.MessageType.MSG_AI_ENTER,"CS_"),this.comIdMap.set(v.snake.socket.MessageType.MSG_NOTICE_ENTER,"SS_");for(let t in v.snake.socket.MessageType)if(isNaN(Number(t))){let i=v.snake.socket.MessageType[t],s="";var e=this.comIdMap.get(i);if(e)if(!e.endsWith("_"))s=e;else{let a=this.comIdMap.get(i),u=t.substring(4);s=a+u}else{let a="SC_",u=t.substring(4);s=a+u}let o=v.snake.socket[s];o&&Laya.ClassUtils.regClass(i+"",o)}}},tw=k1.getInstance();var{regClass:P2}=Laya,Qa=class extends Kb{constructor(){super(...arguments);this.isLogout=!1;this.m_nProgress=0}onAwake(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),Laya.loader.load(["res/loading/progress_load1.png","res/loading/progress_load1$bar.png"]).then(()=>{this.createUI(),this.initBasic()})}onError(t){console.log("加载失败: "+t)}createUI(){Ye.init(),Ye.playMusicByName(Ye.soundName_bg,".mp3"),w.on(S.EVENT_BACK_TO_LOGIN,this,this.backToLogin),w.on(S.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),w.on(S.EVENT_ENTER_MAIN,this,this.loginCallBack),z.FGM_GetLanguage();var t=getGameVersion();this.txtLoad.text=t,console.log("VERSION: "+t);let i=new ln;i.ID=1,i.Event="加载版本信息 "+t,qe.sendCustumEvent(1,null,i)}initBasic(){tw.init(),te.instence.init(),Tt.initParms(),this.initLoad()}initLoad(){this.onAssetLoaded()}onAssetLoaded(){this.loadingProcess=.05,this.m_nProgress=.05,vt.startRotationAnimation(this.img_circle,2e3,!0),Laya.timer.once(500,this,()=>{this.loadFirstBatch()});let t=Laya.timer.loop(1e3,this,this.onLoading,[this.m_nProgress])}loadFirstBatch(){Xe.init(),this.m_nProgress=.15,this.loadingProcess=.15,Laya.timer.once(800,this,()=>{this.loadSecondBatch()})}loadSecondBatch(){Fe.intance.init(),this.m_nProgress=.3,this.loadingProcess=.3,Laya.timer.once(1e3,this,()=>{this.loadThirdBatch()})}loadThirdBatch(){j.init(),re.init(),this.m_nProgress=.5,this.loadingProcess=.5,Laya.timer.once(1e3,this,()=>{this.loadFinalBatch()})}loadFinalBatch(){let t=new ln;t.ID=3,t.Event="加载资源信息",qe.sendCustumEvent(3,null,t),this.m_nProgress=.8,this.loadingProcess=.8}set loadingProcess(t){if(!(this.mcProcess&&t<this.mcProcess.value)){t>1&&(t=1),t<.05&&(t=.05),this.mcProcess.value=t,this.txtProcess.text=Math.floor(t*100)+"%";var i=t*this.mcProcess.width-70;i<0&&(i=0)}}backToLogin(){Laya.timer.clear(this,this.onLoading),this.m_nProgress=0,Laya.loader.load(re.m_arrInitResource,Laya.Handler.create(this,this.getLoginData),Laya.Handler.create(this,this.onLoading2,null,!1))}getLoginData(){qe.sendCustumEvent(7),this.readyInitGame()}readyInitGame(){if(this.isLogout){w.event(S.EVENT_LOADING_SUC);return}this.mcProcess&&(this.loadingProcess=.9,Laya.timer.once(500,this,()=>{this.loadingProcess=1,Laya.timer.once(300,this,()=>{ee.init(),ce.isWhite?this.loginGame():this.onGetNotice()})}))}async onGetNotice(){Laya.loader.maxLoader=50,this.loginGame()}async loginGame(){w.event(S.EVENT_LOADED_COMPLETE),await ze.init(),await ze.dappLogin()}async loginGameEnd(t){if(nt.showLoading(!0),qe.sendCustumEvent(8),qe.sendCustumEvent(22),!t){Fe.intance.openModule(T.NoServerView);return}t.loginState==1?(console.log("have no regist"),qe.sendCustumEvent(23),Fe.intance.openModule(T.CreateLoginView)):(qe.sendCustumEvent(30),t.playerDto?(qe.sendCustumEvent(31),console.log("registed "+t.playerDto.name),j.playerDto=t.playerDto,this.loginCallBack()):(qe.sendCustumEvent(32),console.log("getRegisted error"),De.notice(z.getLanguage(29))))}async loginCallBack(){console.log("loginCallBack++++++++++++++++++++++++++++++++"),ce.vType==2&&ce.Debug==0&&(Laya.Browser.window.console.log=function(){}),j.initData(),nt.hideLoading();var t=j.playerDto;if(t.roomId>0){let i=await wt.requestPost("wxgame/room/info",{roomId:t.roomId});ve.roomDto=i.roomDto,i.roomDto?t.roomState==10?st.initSocket():Fe.intance.openModule(T.EnterRoomView):De.notice(z.getLanguage(29))}else Ce.logs("进入主界面",5),qe.sendCustumEvent(33),vt.stopCircleAnimation(this.img_circle),Xe.setCurrentScene(pe.M_SCENE_MAIN)}onLoading(t){let i=this.mcProcess?this.mcProcess.value:0,s=.01;this.m_nProgress<.15?s=.02:this.m_nProgress<.3?s=.015:this.m_nProgress<.5?s=.01:this.m_nProgress<.8?s=.005:s=.001,this.m_nProgress+=s,this.m_nProgress<i&&(this.m_nProgress=i),this.m_nProgress>.8&&(this.m_nProgress=.8),this.mcProcess&&t>this.mcProcess.value&&(this.loadingProcess=this.m_nProgress)}onLoading2(t){this.mcProcess&&(this.loadingProcess=0+t*1.1)}removeEvent(){w.off(S.EVENT_BACK_TO_LOGIN,this,this.backToLogin),w.off(S.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),w.off(S.EVENT_ENTER_MAIN,this,this.loginCallBack)}};Qa.m_iState=1,Qa=P([P2("xmaaYG8AQ1yC07pr_JvyPA")],Qa);var $b=class extends Laya.Box{};var{regClass:F2}=Laya,qb=class extends $b{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER}onEnable(){console.log("OpenScene onEnable："+this.m_strName)}getName(){console.log(this.m_strName)}onDisable(){}};qb=P([F2("sQS5mrqRQLWcBk-SgfBGJw")],qb);var Yb=class extends Laya.Box{};var{regClass:U2}=Laya,Qb=class extends Yb{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.toRead)}set dataSource(t){if(super.dataSource=t,this.rewardItem=t,!this.rewardItem){this.visible=!1;return}let i=ee.m_dicItems.get(this.rewardItem.itemId);if(!i){this.visible=!1;return}this.img_icon.skin=re.getItemIcon(i.icon),this.tf_num.text=`x${this.rewardItem.num}`}toRead(){}};Qb=P([U2("cVATpJOeQgeVQnaU8vno-g")],Qb);var Xb=class extends Laya.Scene{};var{regClass:H2}=Laya,Jb=class extends Xb{onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),w.on("msg_"+v.snake.socket.MessageType.MSG_MAIL_LIST,this,this.onGetRoleInfo),w.on("msg_"+v.snake.socket.MessageType.MSG_MAIL_DELETE,this,this.onDeleteResult),w.on("msg_"+v.snake.socket.MessageType.MSG_MAIL_CHECK,this,this.onReadResult),vt.startJellyScaleAnimation(this.tf_tittle),this.requestAllMailData(),this.mailList.selectHandler=new Laya.Handler(this,this.handleSelectMail),this.btn_delete.on(Laya.Event.CLICK,this,this.deleteMail),this.btn_receive.on(Laya.Event.CLICK,this,this.onReceiveClick),w.on("msg_"+v.snake.socket.MessageType.MSG_MAIL_GET,this,this.onMailGetBack)}requestAllMailData(t=1){let i=v.snake.socket.MessageType.MSG_MAIL_LIST;Me.send(i)}onGetRoleInfo(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_MAIL_LIST);i==v.snake.socket.MessageCode.SYS_NORMAL&&s&&(console.log("msgBody",s),this.mailList.array=s.mail,this.mailData=s.mail,this.checkReadNum(),s.mail.length>0?(this.box_1.visible=!1,this.box_2.visible=!0,this.mailList.selectedIndex=0):(this.box_1.visible=!0,this.box_2.visible=!1))}checkReadNum(){let i=`${this.mailData.filter(s=>s.read===!0).length}/${this.mailData.length}`;this.tf_read.text=z.getLanguage(20,i)}handleSelectMail(t){this.mailIndex=t;let i=this.mailData[t];this.tf_des.text=i.content;let s=At.formatDayAndTime(i.sendTime);if(this.tf_time.text=`${s.date} ${s.time}`,this.tf_title.text=i.title,this.tf_from.text=z.getLanguage(21,i.sendName),i.items&&i.items.length>0?(this.rewardList.array=i.items,this.rewardList.visible=!0,this.btn_receive.visible=!i.get):(this.rewardList.visible=!1,this.btn_receive.visible=!1),i.read==!1){let o=v.snake.socket.MessageType.MSG_MAIL_CHECK,a=v.snake.socket.CS_MAIL_CHECK.fromObject({mailId:i.mailId});Me.send(o,a)}}onDeleteResult(t,i){i===v.snake.socket.MessageCode.SYS_NORMAL&&(this.mailList.array=this.mailData,this.mailData.length===0&&(this.box_1.visible=!0,this.box_2.visible=!1),De.notice("删除成功"),this.mailData.splice(this.mailIndex,1),this.mailList.array=this.mailData,this.checkReadNum(),this.handleSelectMail(this.mailIndex))}onReadResult(t,i){if(i===v.snake.socket.MessageCode.SYS_NORMAL){let s=this.mailData[this.mailIndex];this.mailList.array=this.mailData,s.read=!0,this.checkReadNum()}}deleteMail(){if(this.mailIndex>=0&&this.mailData&&this.mailData.length>0){let t=this.mailData[this.mailIndex],i=v.snake.socket.MessageType.MSG_MAIL_DELETE,s=v.snake.socket.CS_MAIL_DELETE.fromObject({mailId:t.mailId});Me.send(i,s)}}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}setToMainScene(){Xe.setCurrentScene(pe.M_SCENE_MAIN)}onReceiveClick(){if(this.mailIndex==-1)return;let t=v.snake.socket.MessageType.MSG_MAIL_GET,i=this.mailData[this.mailIndex],s=v.snake.socket.CS_MAIL_GET.fromObject({mailId:i.mailId});Me.send(t,s)}onMailGetBack(t,i){if(i==v.snake.socket.MessageCode.SYS_NORMAL){De.notice("领取成功");var s=Te.getMsgBody(t,v.snake.socket.SC_MAIL_GET);console.log(s);let o=this.mailList.array.find(a=>a.mailId===s.mailId);o&&(o.get=!0,this.handleSelectMail(this.mailIndex))}}onDisable(){w.off("msg_"+v.snake.socket.MessageType.MSG_MAIL_LIST,this,this.onGetRoleInfo),w.off("msg_"+v.snake.socket.MessageType.MSG_MAIL_DELETE,this,this.onDeleteResult),w.off("msg_"+v.snake.socket.MessageType.MSG_MAIL_CHECK,this,this.onReadResult),w.off("msg_"+v.snake.socket.MessageType.MSG_MAIL_GET,this,this.onMailGetBack),this.removeEvent(),this.btn_delete.off(Laya.Event.CLICK,this,this.deleteMail),this.btn_receive.off(Laya.Event.CLICK,this,this.onReceiveClick)}};Jb=P([H2("25JYfnFtTzq1ju1OR6_GLQ")],Jb);var Zb=class extends Laya.Box{};var{regClass:z2}=Laya,ey=class extends Zb{constructor(){super()}onEnable(){}set dataSource(t){super.dataSource=t,this.mailItem=t,this.mailItem&&(this.tf_title.text=this.mailItem.title,this.tf_from.text=this.mailItem.sendName,this.img_red.visible=!this.mailItem.read,this.tf_time.text=At.formatTimeAgoFromTimestamp(this.mailItem.sendTime))}};ey=P([z2("3h2PsGTIQV6ilXcpYeJ0cQ")],ey);var ty=class extends Laya.Box{};var{regClass:j2}=Laya,kr=class extends ty{init(e,t,i=28){var s,o;switch(o=Lt.getRandInRound(-30,30),t?s=kr.TYPE_Kill:s=kr.TYPE_Normal,t?this.pos(o,-180):this.pos(o,-110),this.alpha=1,this.scale(1,1),this.tf_damage.visible=!1,this.box_crit.visible=!1,s){case kr.TYPE_Normal:this.tf_damage.text="+"+e,this.showNormalDamageEffect();break;case kr.TYPE_Kill:this.showCriticalDamageEffect();break}}showNormalDamageEffect(){this.tf_damage.visible=!0,Laya.Tween.to(this,{y:this.y-50,alpha:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,this.onComplete))}showCriticalDamageEffect(){this.box_crit.visible=!0,this.scale(.2,.2),Laya.Tween.to(this,{scaleX:1.3,scaleY:1.3,alpha:1,y:this.y-70},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1,alpha:0},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.onComplete()}))}))}onComplete(){this.removeSelf()}onDisable(){Laya.Pool.recover("damageNumber",this)}};kr.WHITE="#FFFFFF",kr.ORANGE="#FFA500",kr.RED="#FF0000",kr.GREEN="#119c09",kr.BLUE="#78cefd",kr.TYPE_Normal="Normal",kr.TYPE_Kill="Kill",kr=P([j2("nHp6WKzZRIWvyhguidEfqg")],kr);var ry=class extends Laya.Dialog{};var{regClass:G2}=Laya,iy=class extends ry{constructor(){super()}onEnable(){this.list.visible=!1;var e=ve.msgEndbody,t=e.token;this.list.renderHandler=new Laya.Handler(this,(i,s)=>{i.setDataIndex(s)}),this.list.array=t,this.list.visible=!0,!t||t.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}onDisable(){}};iy=P([G2("JH3DtUPTS_2FR6dTzhLHMw")],iy);var ny=class extends Laya.Box{};var{regClass:V2}=Laya,sy=class extends ny{constructor(){super()}addEvent(){}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.setData(e),this.addEvent()}setData(e){var t=e.split(","),i=t[1],s=t[2],o=t[3],a=t[4];this.tf_time.text=At.formatTimeStamp(Number.parseFloat(t[0]),"HH:MM:SS"),this.img_country.skin=re.getCountryIcon(i),this.tf_nickName.text=s;let u=ee.m_dicItems.get(o),p=z.getLanguage(u.name);this.tf_token.text=a+" "+p}setDataIndex(e){this.bg.skin=e%2===0?"res/common/comm/img_wzbg_1.png":"res/common/comm/img_wzbg_2.png"}};sy=P([V2("po6_Uf6sTlaC-xEazLOk5Q")],sy);var oy=class extends Laya.Dialog{};var{regClass:W2}=Laya,ay=class extends oy{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=te.M_PANEL;this.m_iPositionType=te.CENTER}onEnable(){w.on("msg_"+v.snake.socket.MessageType.MSG_AI_END,this,this.onAiEnd),Ye.playSoundByName(Ye.soundName_win),this.btn_next.on(Laya.Event.CLICK,this,this.onNext),this.btn_home.on(Laya.Event.CLICK,this,this.setToAirdropScene),this.btn_help.on(Laya.Event.CLICK,this,this.onNext),qe.sendCustumEvent(43)}onHelp(){Ce.commTipWithYes(z.getLanguage("HELP"))}onNext(){this.setToAirdropScene()}setToAirdropScene(){Xe.setCurrentScene(pe.M_SCENE_MAIN)}setOpenData(t){var i=t[0];this.btn_next.visible=!0,this.list_reward.visible=!1;var s,o;this.list_reward.vScrollBarSkin="",this.roomGameOverPush=ve.msgEndbody,this.tf_rank.text=`${this.roomGameOverPush.rank}`,this.tf_score.text=`${this.roomGameOverPush.score}`,this.fontClip_kill.getComponent(wn).startIncrement(this.roomGameOverPush.kills,1,1),this.fontClip_length.getComponent(wn).startIncrement(this.roomGameOverPush.length,1,1),this.fontClip_challengeDuration.getComponent(wn).startIncrement(this.roomGameOverPush.alive,1,3),i==Oe.ARENA_TYPE_PVP?(s=this.roomGameOverPush.items,o=this.roomGameOverPush.token,this.onSetReward(s,o)):qr.sendAiEnd(this.roomGameOverPush.kills,this.roomGameOverPush.score)}onSetReward(t,i){var s=[],o=new Ne;if(t&&t.length>0&&t.forEach(g=>{var b=o.get(g.itemId);b?b.newAddCnt=b.newAddCnt+g.num:(b=new vr(g.itemId),b.newAddCnt=g.num,s.push(b),o.set(g.itemId,b))}),i&&i.length>0){var a=new vr($e.TYPE_REWARD_TOKEN);s.push(a)}var u=this.list_reward.spaceX,p=this.list_reward.itemTemplate.width,m=s.length,h=m*p+u*(m-1);this.list_reward.repeatX=m,this.list_reward.width=h,this.btn_next.visible=!0,this.list_reward.x=this.box_outside.width-this.list_reward.width>>1,this.list_reward.array=s,this.list_reward.visible=!0,!this.list_reward.array||this.list_reward.array.length<=0?this.noDataBox1.visible=!0:this.noDataBox1.visible=!1;let f=-1;this.list_reward.selectedIndex=f}onAiEnd(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_AI_END),o=s,a=o.items;this.onSetReward(a,[])}onDisable(){this.removeEvent()}removeEvent(){w.off("msg_"+v.snake.socket.MessageType.MSG_AI_END,this,this.onAiEnd)}};ay=P([W2("y-nP_lRrQVef9uttVJ0rDw")],ay);var ly=class extends Laya.Box{};var{regClass:K2}=Laya,cy=class extends ly{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){this.snake=t,!(!this.snake||!this.snake.tag)&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){this.snake.tag&&(this.tf_rank.text=this.snake.rankNum+".  "+Kr.abbreviateString(this.snake.tag.userName));var t=0;ve.matchDto.arenaType==Oe.ARENA_TYPE_PVE?t=this.snake.getScore(!1):t=this.snake.getScore(!0),this.snake.rankNum==1?this.tf_kill.text=`<font><img src='res/match2/img_phb_icon2.png'/>${t}</font>`:this.tf_kill.text=`<font>${t}</font>`,this.snake.isSelf?(this.tf_rank.color="#ffe155",this.tf_kill.color="#ffe155"):(this.tf_rank.color="#ffffff",this.tf_kill.color="#ffffff")}};cy=P([K2("XTVFXeI_R768e0Elv_ePAA")],cy);var Cr=class{constructor(){}};Cr.TYPE_Consumption=1,Cr.TYPE_Equipment=2,Cr.TYPE_Currency=3,Cr.TYPE_Hero=4,Cr.TYPE_Fragment=5,Cr.TYPE_CARD=6,Cr.CHOOSE_Wallet=1,Cr.CHOOSE_PutOn=2,Cr.ITEM_PT=1086,Cr.ITEM_PT_EXP=1091,Cr.ITEM_SNAKE=3026;var uy=class extends Laya.Box{};var{regClass:$2}=Laya,py=class extends uy{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.itemVo=t,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.itemVo&&(this.itemVo.m_iId==$e.TYPE_REWARD_TOKEN?(this.img_tokens.visible=!0,this.knapsackItem.visible=!1):(this.img_tokens.visible=!1,this.knapsackItem.visible=!0,this.knapsackItem.showAdd=!0,this.knapsackItem.dataSource=this.itemVo))}toDetail(){!this.itemVo||!this.itemVo.needTip||(this.itemVo.m_iId==$e.TYPE_REWARD_TOKEN?Fe.intance.openModule(T.MatchEndRewardTokensDialog):this.itemVo.type===Cr.TYPE_Equipment?Fe.intance.openModule(T.EquipDetailDialog,this.itemVo):Fe.intance.openModule(T.KnapsackTipDialog,this.itemVo))}};py=P([$2("WXpxCvqlQ2mKdcJCYlqOeg")],py);var my=class extends Laya.Box{};var{regClass:q2}=Laya,dy=class extends my{constructor(){super();this.isBig=!1}set dataSource(t){super.dataSource=t,this.skillItem=t,this.skillItem&&(this.txt_num.text="",this.img_icon.skin=re.getMatchSkillIcon(this.skillItem.icon))}};dy=P([q2("iwuFUCOEQRyOjxpy6IkQ2Q")],dy);var hy=class extends Laya.Button{};var{regClass:Y2}=Laya,fy=class extends hy{constructor(){super();this.isAddEvent=!1;this.isCanClick=!0;this.skillCooldown=5e3;this.thisGlobalCooldown=1e4;this.globalCooldown=1e4;this.remainingSkillCooldown=0;this.remainingGlobalCooldown=0;this.reduceCooldown=0}onEnable(){this.addEvent()}addEvent(){this.isAddEvent||(w.on(S.EVENT_CLICK_NUM,this,this.onNumberClick),w.on(S.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),w.on(S.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),w.on(S.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),this.isAddEvent=!0,this.on(Laya.Event.CLICK,this,this.onSkillButtonClick),this.on(Laya.Event.MOUSE_UP,this,this.onSkillButtonUp))}onNumberClick(t){t==this.keyNum&&this.onSkillButtonClick(null)}set dataSource(t){super.dataSource=t,this.skillItem=t[0],this.itemItem=t[1],this.equipPos=t[2],this.count=t[3],this.skillItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.skillItem&&(this.skillIconItem.isBig=this.skillItem.icon=="1001",this.skillIconItem.dataSource=this.skillItem,this.itemItem?(this.txt_num.visible=!0,this.updateCount(),this.skillCooldown=this.itemItem.cd*1e3):(this.txt_num.visible=!1,this.skillCooldown=this.skillItem.cd),this.thisGlobalCooldown=this.skillItem.commCd,Laya.timer.frameLoop(1,this,this.updateCooldown))}onSkillButtonUp(t){t&&t.stopPropagation(),Ir.clearClickFilter(this)}onSkillButtonClick(t){t&&t.stopPropagation()}updateSkillCooldown(t){this.remainingSkillCooldown=t}updateItemRemainCooldown(t){var i=t[0];console.log("updateItemRemainCooldown _skillId: "+i),this.itemItem&&i==this.skillItem.id&&(this.count=t[1],this.updateCount(),this.updateSkillCooldown(this.skillCooldown))}updateCount(){this.txt_num.text=this.count+"",this.disabled=!this.count}updateReduceCooldown(t,i){console.log("updateReduceCooldown skillType: "+t),this.skillItem&&t==this.skillItem.type&&(this.reduceCooldown=this.skillCooldown*i)}updateGlobalCooldown(t){this.itemItem||(this.globalCooldown=t,this.remainingGlobalCooldown=t)}updateCooldown(){if(this.remainingSkillCooldown+this.reduceCooldown>0){this.remainingSkillCooldown-=Laya.timer.delta;let t=(this.remainingSkillCooldown+this.reduceCooldown)/1e3;this.txt_time.text=t.toFixed(1),this.updateCooldownMask(this.skillCooldownMask,(this.remainingSkillCooldown+this.reduceCooldown)/this.skillCooldown,"#000000"),this.img_djs.visible=!0,this.txt_time.visible=!0}else this.img_djs.visible=!1,this.txt_time.visible=!1;this.remainingGlobalCooldown+this.reduceCooldown>0?(this.remainingGlobalCooldown-=Laya.timer.delta,this.updateCooldownMask(this.globalCooldownMask,(this.remainingGlobalCooldown+this.reduceCooldown)/this.globalCooldown,"#00000036"),this.globalCooldownMask.visible=!0):this.globalCooldownMask.visible=!1,this.skillIconItem.gray=this.remainingSkillCooldown+this.reduceCooldown>0||this.remainingGlobalCooldown+this.reduceCooldown>0}updateCooldownMask(t,i,s){let o=this.width/2,a=this.width/2,u=this.height/2;t.graphics.clear(),t.graphics.drawPie(a,u,o,-90+360*(1-i),270,s)}onDisable(){w.off(S.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),w.off(S.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),w.off(S.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),w.offAllCaller(this),Laya.timer.clearAll(this)}};fy=P([Y2("x6t-z1VuR52yXWju0qxGBg")],fy);var gy=class extends Laya.Dialog{};var{regClass:Q2}=Laya,by=class extends gy{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink)}onLink(t){console.log("点击了超链接："+t)}onRefresh(){qe.reload()}setOpenData(t){if(t){var i=t[0];if(t.length>2?(this.alertTitle.text=t[1],this.alertDesc.text=t[2]):this.alertDesc.text=t[1],i==1){this.canClose=!1;var s=this.getChildByName("close");s.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1;this.alertDesc.height=this.alertDesc.textField.textHeight+20}}onDisable(){}close(t){this.canClose&&super.close(t)}};by=P([Q2("xATCTfSDSkaGtuYn669ofQ")],by);var yy=class extends Laya.Dialog{};var{regClass:X2}=Laya,_y=class extends yy{constructor(){super()}onEnable(){this.img_show.on(Laya.Event.CLICK,this,this.close)}setOpenData(e){e&&(this.img_show.skin=e)}onDisable(){}};_y=P([X2("RUMV5hpfRdCRzhO9yBDCzg")],_y);var xy=class extends Laya.Dialog{};var{regClass:J2}=Laya,vy=class extends xy{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink),this.btn_left.on(Laya.Event.CLICK,this,this.onChangePage,[!1]),this.btn_right.on(Laya.Event.CLICK,this,this.onChangePage,[!0])}onLink(t){console.log("点击了超链接："+t)}onRefresh(){qe.reload()}setOpenData(t){if(t){var i=t[0],s=t[1];if(this.list=s.list,this.pageNo=1,this.pageTotal=this.list.length,this.pageTotal<2&&(this.box_page.visible=!1),this.updatePageList(),i==1){this.canClose=!1;var o=this.getChildByName("close");o.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1}}async onChangePage(t){if(t)this.pageNo++;else{if(this.pageNo<=1)return;this.pageNo--}this.updatePageList()}updatePageList(){this.txt_page.text=this.pageNo+"/"+this.pageTotal,this.btn_left.disabled=this.pageNo<=1,this.btn_right.disabled=this.pageNo>=this.pageTotal,this.setNoticeDetail()}setNoticeDetail(){if(this.pageNo){var t=this.list[this.pageNo-1];t&&(this.alertTitle.text=z.getMultiLan(t.title),this.alertDesc.text=z.getMultiLan(t.contents))}}onDisable(){}close(t){this.canClose&&super.close(t)}};vy=P([J2("iB7UvqEcQ1GFKaVEIy6Bmw")],vy);var Iy=class extends Laya.Box{};var{regClass:Z2}=Laya,Sy=class extends Iy{};Sy=P([Z2("ON5bkSuKSE2gwPDUnRGmrw")],Sy);var ky=class extends Laya.Box{};var{regClass:eA}=Laya,wy=class extends ky{onEnable(){}notice(e){this.zOrder=1e7;let t=e;this.label_tf.text=t,this.label_tf.x=68,this.image_bg.width=68*2+this.label_tf.textField.textWidth,t.length/45>1&&(this.image_bg.height=this.label_tf.textField.textHeight+55),this.alpha=1,this.visible=!0}get view(){return this}get width(){return this.image_bg.width}onDisable(){console.log("txtNotice recover"),Laya.Pool.recover("txtNotice",this)}};wy=P([eA("Nm27xWbYSG6mj-EXqPOZ_A")],wy);var Ey=class extends Laya.Box{};var{regClass:tA}=Laya,Ly=class extends Ey{constructor(){super()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.copyAddress)}set dataSource(t){if(super.dataSource=t,!t){this.visible=!1;return}this.tf_address.text=Tt.shortenString(t.addr,8,6),this.PlayerIcon.headSkin=t.icon,this.tf_name.text=t.userName,this.tf_num.text=t.num,this.address=t.addr;let i=this.parent?.parent?.array?.indexOf(t)??0;this.img_bg.visible=i%2===1,this.tf_rank.text=`${i+1}`,this.img_flag.skin=re.getCountryIcon(t.country),i<3?(this.img_title.visible=!0,this.tf_rank.visible=!1,this.img_title.skin=`res/rank/img_b${i+1}.png`):(this.img_title.visible=!1,this.tf_rank.visible=!0)}copyAddress(){this.address&&(doCopy(this.address),De.notice(z.getLanguage(19)))}};Ly=P([tA("ILpWxZ9qRRiahqxWqEMA9g")],Ly);var Ty=class extends Laya.Scene{};var{regClass:rA}=Laya,Ay=class extends Ty{constructor(){super(...arguments);this.currentTabIndex=0;this.allRankData=new Map}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onEnable(){this.RankList.visible=!1;for(let t=0;t<3;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),vt.startJellyScaleAnimation(this.tf_tittle),w.on("msg_"+v.snake.socket.MessageType.MSG_REQUEST_RANK,this,this.onRankListReceived),this.onTabClick(0)}setTab(t){for(let i=1;i<3;i++)t==i?(this["btn_"+i].getChildByName("selectBox1").visible=!0,this["btn_"+i].getChildByName("selectBox2").visible=!1):(this["btn_"+i].getChildByName("selectBox1").visible=!1,this["btn_"+i].getChildByName("selectBox2").visible=!0)}setToMainScene(){Xe.setCurrentScene(pe.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<3;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),w.off("msg_"+v.snake.socket.MessageType.MSG_REQUEST_RANK,this,this.onRankListReceived)}onTabClick(t){this.currentTabIndex=t;let i=3,s="res/common/comm/img_tab1.png",o="res/common/comm/img_tab2.png",a="#427030",u="#1449cb";for(let p=0;p<i;p++){let m=this[`tab${p}`],h=m.getChildByName("tf_tit"),f=t===p;switch(m.skin=f?s:o,h.strokeColor=f?a:u,t){case 0:this.box_daily.visible=!0,this.box_dailybest.visible=!1,this.box_over.visible=!1;break;case 1:this.box_daily.visible=!1,this.box_dailybest.visible=!0,this.box_over.visible=!1;break;case 2:this.box_daily.visible=!1,this.box_dailybest.visible=!1,this.box_over.visible=!0;break}if(f){let g=t+1;if(this.allRankData.has(g)){let b=this.allRankData.get(g);this.displayRankData(t,b)}else this.requestRankData(g)}}}requestRankData(t){let i=v.snake.socket.MessageType.MSG_REQUEST_RANK,s=v.snake.socket.CS_RANK_LIST.fromObject({type:t});Me.send(i,s)}onRankListReceived(t){let i=Te.getMsgBody(t,v.snake.socket.SC_RANK_LIST);if(console.log(i),!i||!i.rank||i.rank.length===0){this.showEmptyRankTip(),this.noDataBox.visible=!0;return}else this.RankList.visible=!0,this.noDataBox.visible=!1;this.allRankData.set(this.currentTabIndex+1,i.rank),this.displayRankData(this.currentTabIndex,i.rank)}displayRankData(t,i){this.RankList.array=i,this.RankList.visible=!0,this.RankList.refresh(),this.RankList.scrollTo(0)}clearRankList(){[this.box_daily.getChildByName("list_rank"),this.box_dailybest.getChildByName("list_rank"),this.box_over.getChildByName("list_rank")].forEach(i=>{i&&(i.array=[],i.refresh())})}showEmptyRankTip(){this.RankList.visible=!1,this.noDataBox.visible=!0}onDisable(){this.removeEvent()}};Ay=P([rA("kxqXjP8sR7OnW67fK0960g")],Ay);var Cy=class extends Laya.Scene{};var{regClass:iA}=Laya,My=class extends Cy{onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){}onEnable(){for(let t=0;t<3;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_music_plus.on(Laya.Event.CLICK,this,this.onClickMusicPlus,[!0]),this.btn_music_reduce.on(Laya.Event.CLICK,this,this.onClickMusicPlus,[!1]),this.btn_sound_plus.on(Laya.Event.CLICK,this,this.onClickSoundPlus,[!0]),this.btn_sound_reduce.on(Laya.Event.CLICK,this,this.onClickSoundPlus,[!1]),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.initSettingData(),this.initLanguageData(),vt.startJellyScaleAnimation(this.tf_tittle)}setTab(t){for(let i=1;i<3;i++)t==i?(this["btn_"+i].getChildByName("selectBox1").visible=!0,this["btn_"+i].getChildByName("selectBox2").visible=!1):(this["btn_"+i].getChildByName("selectBox1").visible=!1,this["btn_"+i].getChildByName("selectBox2").visible=!0)}initSettingData(){let t=Ye.getMusicVolume();this.prog_music.value=t;let i=Ye.getSoundVolume();this.prog_sound.value=i}setToMainScene(){Xe.setCurrentScene(pe.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<4;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}onTabClick(t){let s="res/common/comm/img_tab1.png",o="res/common/comm/img_tab2.png",a="#427030",u="#1449cb";for(let p=0;p<3;p++){let m=this[`tab${p}`],h=m.getChildByName("tf_tit"),f=t===p;switch(m.skin=f?s:o,h.strokeColor=f?a:u,t){case 0:this.box_genred.visible=!0,this.box_language.visible=!1,this.box_saciel.visible=!1;break;case 1:this.box_genred.visible=!1,this.box_language.visible=!0,this.box_saciel.visible=!1;break;case 2:this.box_genred.visible=!1,this.box_language.visible=!1,this.box_saciel.visible=!0;break}}}onClickMusicPlus(t){let i=Ye.getMusicVolume(),s=.1;t?i=Math.min(1,i+s):i=Math.max(0,i-s),this.prog_music.value=i,Ye.setMusicVolume(i)}onClickSoundPlus(t){let i=Ye.getSoundVolume(),s=.1;t?i=Math.min(1,i+s):i=Math.max(0,i-s),this.prog_sound.value=i,Ye.setSoundVolume(i)}initLanguageData(){let t=ee.m_dicLanguage.values;if(t){let i=t.filter(o=>o.if_open===1);this.list_language.array=i,this.list_language.renderHandler=new Laya.Handler(this,this.handleSelectLanguage),this.list_language.mouseHandler=Laya.Handler.create(this,this.onLanguageItemMouse,null,!1);let s=i.findIndex(o=>o.id===j.m_strLanguage);this.list_language.selectedIndex=s||0}}handleSelectLanguage(t,i){t.onChange(this.list_language.selectedIndex==i)}onLanguageItemMouse(t,i){t.type===Laya.Event.CLICK&&(this.list_language.selectedIndex=i)}onDisable(){for(let t=0;t<3;t++)this[`tab${t}`].off(Laya.Event.CLICK,this,this.onTabClick,[t]);this.btn_music_plus.off(Laya.Event.CLICK,this,this.onClickMusicPlus,[!0]),this.btn_music_reduce.off(Laya.Event.CLICK,this,this.onClickMusicPlus,[!1]),this.btn_sound_plus.off(Laya.Event.CLICK,this,this.onClickSoundPlus,[!0]),this.btn_sound_reduce.off(Laya.Event.CLICK,this,this.onClickSoundPlus,[!1]),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.list_language&&this.list_language.mouseHandler.clear(),Laya.timer.clearAll(this)}};My=P([iA("MqlTAbYeQPe4_9ujUdePSg")],My);var Ry=class extends Laya.Box{};var{regClass:nA}=Laya,By=class extends Ry{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.checkSelect)}set dataSource(t){if(this.languageData=t,!t){this.visible=!1;return}this.languageData=t,this.tf_language.text=t.language}checkSelect(){let t=this.languageData.id,i=z.getLanTypeById(t);z.FGM_SetLanguage(i),qe.reload(),this.event("checkSelect",this.languageData)}onChange(t){console.log("isSelect",t),t?(this.img_btn.skin="res/setup/img_bt1.png",this.tf_language.fontSize=25,this.tf_language.color="#FFFFFF",this.tf_language.stroke=2,this.tf_language.strokeColor="#D26E02"):(this.img_btn.skin="res/setup/img_bt2.png",this.tf_language.fontSize=25,this.tf_language.color="#B8E5FE",this.tf_language.stroke=0)}onDisable(){this.languageData=null}};By=P([nA("SnCse2C4Qiq0GdwkQNE3PA")],By);var Dy=class extends Laya.Dialog{};var{regClass:sA}=Laya,Oy=class extends Dy{constructor(){super();this.m_iLayerType=te.M_POP;this.m_iPositionType=te.CENTER;this.addL=1;this.isButtonLocked=!1;this.buttonLockTime=2e3}onEnable(){this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.btn_buy.on(Laya.Event.CLICK,this,this.onRecruit),w.on("msg_"+v.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),w.on(S.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus)}setOpenData(t){if(t){this.shopItem=t;let i=ee.m_dicItems.get(this.shopItem.itemId);if(!i)return;this.alertTitle.text=z.getLanguage(i.name),this.tf_price.text=`${this.shopItem.cost} USDT`,this.img_icon.skin=re.getItemIcon(i.icon),this.tf_des.text=z.getLanguage(i.des)}}handleClickBtn(t){switch(t){case this.btn_reduce:this.addL>1&&this.addL--,this.setItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setItemNum();break}}onRefreshItemStatus(){this.close()}setItemNum(){this.tf_num.text=this.addL+"";let t=new sn(Number(this.shopItem.cost)),i=new sn(this.addL),s=t.multiply(i).getValue();this.tf_price.text=`${s} USDT`}changeItemNum(){var t=parseInt(this.tf_num.text);(!t||t<1)&&(t=1),this.addL=t,this.setItemNum()}onRecruit(){if(this.isButtonLocked)return;this.isButtonLocked=!0;let t=v.snake.socket.MessageType.MSG_SHOP_BUY;if(this.shopItem.id){let i=v.snake.socket.CS_SHOP_BUY.fromObject({id:this.shopItem.id,symbolId:10,num:this.addL});Me.send(t,i)}Laya.timer.once(this.buttonLockTime,this,()=>{this.isButtonLocked=!1})}onBuySuccess(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_SHOP_BUY);i==v.snake.socket.MessageCode.SYS_NORMAL?s&&s.items&&(De.notice("Purchase successful!"),ys.requestCoinInfo(),this.close()):i==v.snake.socket.MessageCode.NOT_ENOUGH_TOKEN?De.notice("Not enough tokens!"):De.notice("Purchase failed!")}onDisable(){this.btn_plus.clickHandler=null,this.btn_reduce.clickHandler=null,this.tf_num.off(Laya.Event.BLUR,this,this.changeItemNum),this.btn_buy.off(Laya.Event.CLICK,this,this.onRecruit),w.off(S.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus),w.off("msg_"+v.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),Laya.timer.clearAll(this)}};Oy=P([sA("LRfHnCX4RROGq5Y2JkrAZw")],Oy);var Ny=class extends Laya.Box{};var{regClass:oA}=Laya,Py=class extends Ny{constructor(){super(...arguments);this.coins=[[3022,2],[3001,2],[3011,2],[3013,4],[3010,2],[3007,4],[3006,6],[3015,2],[3016,2],[3005,0]]}onEnable(){let t=(Laya.stage.width-ce.DESIGN_WIDTH)/2;this.img_coinsBg.right-=t,console.log("dWidth: "+t),this.updateLocalAssets(),w.on(S.ROLE_INFO_CHANGE,this,this.updateLocalAssets),w.on(S.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),this.coins=ee.getGeneralValueById(19),this.list_coin.array=this.coins}onDisable(){w.off(S.ROLE_INFO_CHANGE,this,this.updateLocalAssets),w.off(S.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets)}updateLocalAssets(){this.list_coin.refresh()}};Py=P([oA("7P9MlqipSaG6QoKpQowDbQ")],Py);var Fy=class extends Laya.Box{};var{regClass:aA}=Laya,Uy=class extends Fy{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.toShowBuyDialog)}set dataSource(t){if(super.dataSource=t,this.shopItem=t,!this.shopItem)return;this.tf_const.text=`${this.shopItem.cost} USDT`;let i=ee.m_dicItems.get(this.shopItem.itemId);if(!i)return;this.tf_name.text=z.getLanguage(i.name);let s=this.tf_name.height,o=this.tf_name.fontSize;this.tf_name.y=s>o?226:244,this.img_icon.skin=re.getItemIcon(i.icon)}toShowBuyDialog(){Fe.intance.openModule(T.BuyPropDialog,this.shopItem)}};Uy=P([aA("awS07ko0RBaxCnxXWqiR4g")],Uy);var Hy=class extends Laya.Scene{};var{regClass:lA}=Laya,zy=class extends Hy{constructor(){super(...arguments);this.currTab=0;this.type=1;this.selectItemId=-1;this.shopId=1;this.isButtonLocked=!1;this.buttonLockTime=2e3}onAwake(){this.m_iLayerType=te.M_POP,this.m_iPositionType=te.UP}onOpened(t){t&&t.length>0?(this.type=t[0],t[1]!=null&&(this.selectItemId=t[1]),this.onClickTab(this.type)):(this.selectItemId=1,this.onTabClick(this.selectItemId))}onEnable(){ys.requestCoinInfo(),vt.startJellyScaleAnimation(this.tf_tittle),this.tf_diamon.text=`${j.playerDto.score}`;for(let t=0;t<4;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);this.initShopList(),w.on("msg_"+v.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_left.on(Laya.Event.CLICK,this,this.clickLeftAndRight,[!0]),this.btn_right.on(Laya.Event.CLICK,this,this.clickLeftAndRight,[!1]),this.btn_buy.on(Laya.Event.CLICK,this,this.onRecruit),w.on(S.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate)}setTab(t){for(let i=1;i<3;i++)t==i?(this["btn_"+i].getChildByName("selectBox1").visible=!0,this["btn_"+i].getChildByName("selectBox2").visible=!1):(this["btn_"+i].getChildByName("selectBox1").visible=!1,this["btn_"+i].getChildByName("selectBox2").visible=!0)}async onClickTab(t){this.currTab!=t&&(this.type=t,this.setTab(t),t==1?(this.box_middle.visible=!0,this.tabBox.visible=!0,this.box_shop.visible=!1,this.tf_nft2.stroke=5,this.tf_nft2.fontSize=32,this.tf_props2.stroke=0,this.tf_props2.fontSize=25):t==2&&(this.box_middle.visible=!1,this.tabBox.visible=!1,this.box_shop.visible=!0,this.tf_nft2.stroke=0,this.tf_nft2.fontSize=25,this.tf_props2.stroke=5,this.tf_props2.fontSize=32))}setToMainScene(){Xe.setCurrentScene(pe.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<4;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onTabClick,[t]);for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.btn_left.off(Laya.Event.CLICK,this,this.clickLeftAndRight,[!0]),this.btn_right.off(Laya.Event.CLICK,this,this.clickLeftAndRight,[!1]),this.btn_buy.off(Laya.Event.CLICK,this,this.onRecruit),w.off("msg_"+v.snake.socket.MessageType.MSG_SHOP_BUY,this,this.onBuySuccess),w.off(S.UPDATE_TOKEN_BALANCE,this,this.onTokenBalanceUpdate)}clearAllTimer(){Laya.timer.clearAll(this),this.isButtonLocked=!1}onTabClick(t){let s="res/shop/img_Button_1.png",o="res/shop/img_btlv.png",a="res/shop/img_bt1_2.png",u="res/shop/img_Button_4.png",p="#0785f5";this.snake_sk&&(this.snake_sk.visible=!1),this.clearAllTimer();for(let f=0;f<4;f++){let g=this[`tab${f}`],b=g.getChildByName("tf_tit"),y=t===f,k=f===0;this.selectItemId=t,g.skin=k?y?s:a:y?o:u,b.stroke=y?5:0,b.strokeColor=p;let I=1001,A=101;switch(t){case 0:I=null,A=101,y&&(this.snake_sk.source="gameIcon/spine/shop/snake1/img_she_1.json",this.snake_sk.visible=!0,this.snake_sk&&this.snake_sk.templet&&this.snake_sk.play("animation",!0),this.eggBox.visible=!1);break;case 1:I=1001,A=102,y&&(this.img_egg.visible=!1,this.egg_sk.visible=!0,this.egg_sk&&this.egg_sk.templet&&this.egg_sk.play("animation1",!0),this.eggBox.visible=!0);break;case 2:I=1002,A=103,y&&(this.img_egg.visible=!0,this.egg_sk.visible=!1,this.img_egg.skin="res/shop/img_dan_2.png",this.eggBox.visible=!0);break;case 3:A=null,I=null,A=104,y&&(this.img_egg.visible=!0,this.egg_sk.visible=!1,this.img_egg.skin="res/shop/img_dan_3.png",this.img_egg.visible=!0);break;default:break}if(this.shopId=I,A){var h=ee.m_dicSnakes.get(A);let M=this.attribute_1.getChildByName("tf_value"),O=this.attribute_2.getChildByName("tf_value"),G=this.attribute_3.getChildByName("tf_value"),$=this.attribute_4.getChildByName("tf_value"),q=this.attribute_5.getChildByName("tf_value");h&&(M.text=`${h.initLength}`,O.text=`${h.maxLength}`,G.text=`${h.suctionRadius}`,$.text=`${h.baseSpeed}`,q.text=`${h.accelerationFactor}`)}if(I){let M=ee.m_dicShops.get(I);M?(this.tf_price.text=`${M.cost} USDT`,this.btn_buy.visible=!0):this.btn_buy.visible=!1}else this.btn_buy.visible=!1;this.selectItemId<=0?this.btn_left.disabled=!0:this.btn_left.disabled=!1,this.selectItemId>=3?this.btn_right.disabled=!0:this.btn_right.disabled=!1}}clickLeftAndRight(t){t&&this.selectItemId>0&&(this.selectItemId--,this.onTabClick(this.selectItemId)),!t&&this.selectItemId<3&&(this.selectItemId++,this.onTabClick(this.selectItemId))}initShopList(){let t=[],i=ee.m_dicShops;i&&i.values&&(t=Array.from(i.values).filter(s=>s.type===2),this.shopList.array=t)}onBuySuccess(t,i){var s=Te.getMsgBody(t,v.snake.socket.SC_SHOP_BUY);if(i==v.snake.socket.MessageCode.SYS_NORMAL){if(s&&s.items&&(console.log("buySNake============>",s),s.snake&&s.snake.skin)){let o=s.snake.skin-100;this.egg_sk&&this.egg_sk.templet&&this.egg_sk.play("animation2",!1),this.btn_buy.visible=!1;let a=re.getSnakeAniJson(`${o}`);this.snake_sk.source=a,Laya.timer.once(500,this,()=>{this.snake_sk.visible=!0,this.snake_sk&&this.snake_sk.templet&&this.snake_sk.play("animation",!0)}),Laya.timer.once(7e3,this,()=>{this.selectItemId==1&&(this.snake_sk&&(this.snake_sk.visible=!1),this.egg_sk&&this.egg_sk.templet&&this.egg_sk.play("animation1",!0),this.btn_buy.visible=!0)}),ys.requestCoinInfo()}}else i==v.snake.socket.MessageCode.NOT_ENOUGH_TOKEN?De.notice("Not enough tokens!"):De.notice("Purchase failed!")}onRecruit(){if(this.isButtonLocked)return;this.isButtonLocked=!0,Laya.timer.once(this.buttonLockTime,this,()=>{this.isButtonLocked=!1});let t=v.snake.socket.MessageType.MSG_SHOP_BUY;var i=ee.m_dicSnakes.get(this.shopId);if(console.log(i),this.shopId){let s=v.snake.socket.CS_SHOP_BUY.fromObject({id:this.shopId,symbolId:10,num:1});Me.send(t,s)}}onTokenBalanceUpdate(t){this.showAssetData(t)}showAssetData(t){let i=t.find(a=>a.symbolId===10),s=i?i.balance:0,o=xs.getGoldStr(s);this.tf_usdt.text=`${o}`}onDisable(){this.removeEvent(),this.isButtonLocked=!1}};zy=P([lA("IPCUkD5kRse3Gz5tw0Aovw")],zy);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
