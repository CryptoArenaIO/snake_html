"use strict";(()=>{var xv=Object.create;var eu=Object.defineProperty;var qb=Object.getOwnPropertyDescriptor;var _v=Object.getOwnPropertyNames;var vv=Object.getPrototypeOf,wv=Object.prototype.hasOwnProperty;var X=(r,e)=>()=>(r&&(e=r(r=0)),e);var Yb=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Wh=(r,e)=>{for(var t in e)eu(r,t,{get:e[t],enumerable:!0})},Ev=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of _v(e))!wv.call(r,n)&&n!==t&&eu(r,n,{get:()=>e[n],enumerable:!(i=qb(e,n))||i.enumerable});return r};var Xb=(r,e,t)=>(t=r!=null?xv(vv(r)):{},Ev(e||!r||!r.__esModule?eu(t,"default",{value:r,enumerable:!0}):t,r));var q=(r,e,t,i)=>{for(var n=i>1?void 0:i?qb(e,t):e,s=r.length-1,a;s>=0;s--)(a=r[s])&&(n=(i?a(e,t,n):a(n))||n);return i&&n&&eu(e,t,n),n};var Iv=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var Ye=(r,e,t)=>(Iv(r,e,"read from private field"),t?t.call(r):e.get(r)),Xe=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)};var Qb=Yb(($h,Kh)=>{"use strict";(function(r,e){typeof $h=="object"&&typeof Kh<"u"?Kh.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self).jsSHA=e()})($h,function(){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function e(k,y,A,R){var B,I,$,K=y||[0],J=(A=A||0)>>>3,ce=R===-1?3:0;for(B=0;B<k.length;B+=1)I=($=B+J)>>>2,K.length<=I&&K.push(0),K[I]|=k[B]<<8*(ce+R*($%4));return{value:K,binLen:8*k.length+A}}function t(k,y,A){switch(y){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(k){case"HEX":return function(R,B,I){return function($,K,J,ce){var Ae,se,he,We;if($.length%2!=0)throw new Error("String of HEX type must be in byte increments");var te=K||[0],ot=(J=J||0)>>>3,Je=ce===-1?3:0;for(Ae=0;Ae<$.length;Ae+=2){if(se=parseInt($.substr(Ae,2),16),isNaN(se))throw new Error("String of HEX type contains invalid characters");for(he=(We=(Ae>>>1)+ot)>>>2;te.length<=he;)te.push(0);te[he]|=se<<8*(Je+ce*(We%4))}return{value:te,binLen:4*$.length+J}}(R,B,I,A)};case"TEXT":return function(R,B,I){return function($,K,J,ce,Ae){var se,he,We,te,ot,Je,pt,_t,zr=0,er=J||[0],vr=(ce=ce||0)>>>3;if(K==="UTF8")for(pt=Ae===-1?3:0,We=0;We<$.length;We+=1)for(he=[],128>(se=$.charCodeAt(We))?he.push(se):2048>se?(he.push(192|se>>>6),he.push(128|63&se)):55296>se||57344<=se?he.push(224|se>>>12,128|se>>>6&63,128|63&se):(We+=1,se=65536+((1023&se)<<10|1023&$.charCodeAt(We)),he.push(240|se>>>18,128|se>>>12&63,128|se>>>6&63,128|63&se)),te=0;te<he.length;te+=1){for(ot=(Je=zr+vr)>>>2;er.length<=ot;)er.push(0);er[ot]|=he[te]<<8*(pt+Ae*(Je%4)),zr+=1}else for(pt=Ae===-1?2:0,_t=K==="UTF16LE"&&Ae!==1||K!=="UTF16LE"&&Ae===1,We=0;We<$.length;We+=1){for(se=$.charCodeAt(We),_t===!0&&(se=(te=255&se)<<8|se>>>8),ot=(Je=zr+vr)>>>2;er.length<=ot;)er.push(0);er[ot]|=se<<8*(pt+Ae*(Je%4)),zr+=2}return{value:er,binLen:8*zr+ce}}(R,y,B,I,A)};case"B64":return function(R,B,I){return function($,K,J,ce){var Ae,se,he,We,te,ot,Je=0,pt=K||[0],_t=(J=J||0)>>>3,zr=ce===-1?3:0,er=$.indexOf("=");if($.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if($=$.replace(/=/g,""),er!==-1&&er<$.length)throw new Error("Invalid '=' found in base-64 string");for(Ae=0;Ae<$.length;Ae+=4){for(We=$.substr(Ae,4),he=0,se=0;se<We.length;se+=1)he|=r.indexOf(We.charAt(se))<<18-6*se;for(se=0;se<We.length-1;se+=1){for(te=(ot=Je+_t)>>>2;pt.length<=te;)pt.push(0);pt[te]|=(he>>>16-8*se&255)<<8*(zr+ce*(ot%4)),Je+=1}}return{value:pt,binLen:8*Je+J}}(R,B,I,A)};case"BYTES":return function(R,B,I){return function($,K,J,ce){var Ae,se,he,We,te=K||[0],ot=(J=J||0)>>>3,Je=ce===-1?3:0;for(se=0;se<$.length;se+=1)Ae=$.charCodeAt(se),he=(We=se+ot)>>>2,te.length<=he&&te.push(0),te[he]|=Ae<<8*(Je+ce*(We%4));return{value:te,binLen:8*$.length+J}}(R,B,I,A)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(R,B,I){return function($,K,J,ce){return e(new Uint8Array($),K,J,ce)}(R,B,I,A)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(R,B,I){return e(R,B,I,A)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function i(k,y,A,R){switch(k){case"HEX":return function(B){return function(I,$,K,J){var ce,Ae,se="",he=$/8,We=K===-1?3:0;for(ce=0;ce<he;ce+=1)Ae=I[ce>>>2]>>>8*(We+K*(ce%4)),se+="0123456789abcdef".charAt(Ae>>>4&15)+"0123456789abcdef".charAt(15&Ae);return J.outputUpper?se.toUpperCase():se}(B,y,A,R)};case"B64":return function(B){return function(I,$,K,J){var ce,Ae,se,he,We,te="",ot=$/8,Je=K===-1?3:0;for(ce=0;ce<ot;ce+=3)for(he=ce+1<ot?I[ce+1>>>2]:0,We=ce+2<ot?I[ce+2>>>2]:0,se=(I[ce>>>2]>>>8*(Je+K*(ce%4))&255)<<16|(he>>>8*(Je+K*((ce+1)%4))&255)<<8|We>>>8*(Je+K*((ce+2)%4))&255,Ae=0;Ae<4;Ae+=1)te+=8*ce+6*Ae<=$?r.charAt(se>>>6*(3-Ae)&63):J.b64Pad;return te}(B,y,A,R)};case"BYTES":return function(B){return function(I,$,K){var J,ce,Ae="",se=$/8,he=K===-1?3:0;for(J=0;J<se;J+=1)ce=I[J>>>2]>>>8*(he+K*(J%4))&255,Ae+=String.fromCharCode(ce);return Ae}(B,y,A)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(B){return function(I,$,K){var J,ce=$/8,Ae=new ArrayBuffer(ce),se=new Uint8Array(Ae),he=K===-1?3:0;for(J=0;J<ce;J+=1)se[J]=I[J>>>2]>>>8*(he+K*(J%4))&255;return Ae}(B,y,A)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(B){return function(I,$,K){var J,ce=$/8,Ae=K===-1?3:0,se=new Uint8Array(ce);for(J=0;J<ce;J+=1)se[J]=I[J>>>2]>>>8*(Ae+K*(J%4))&255;return se}(B,y,A)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],c="Chosen SHA variant is not supported";function u(k,y){var A,R,B=k.binLen>>>3,I=y.binLen>>>3,$=B<<3,K=4-B<<3;if(B%4!=0){for(A=0;A<I;A+=4)R=B+A>>>2,k.value[R]|=y.value[A>>>2]<<$,k.value.push(0),k.value[R+1]|=y.value[A>>>2]>>>K;return(k.value.length<<2)-4>=I+B&&k.value.pop(),{value:k.value,binLen:k.binLen+y.binLen}}return{value:k.value.concat(y.value),binLen:k.binLen+y.binLen}}function p(k){var y={outputUpper:!1,b64Pad:"=",outputLen:-1},A=k||{},R="Output length must be a multiple of 8";if(y.outputUpper=A.outputUpper||!1,A.b64Pad&&(y.b64Pad=A.b64Pad),A.outputLen){if(A.outputLen%8!=0)throw new Error(R);y.outputLen=A.outputLen}else if(A.shakeLen){if(A.shakeLen%8!=0)throw new Error(R);y.outputLen=A.shakeLen}if(typeof y.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof y.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return y}function f(k,y,A,R){var B=k+" must include a value and format";if(!y){if(!R)throw new Error(B);return R}if(y.value===void 0||!y.format)throw new Error(B);return t(y.format,y.encoding||"UTF8",A)(y.value)}var d=function(){function k(y,A,R){var B=R||{};if(this.t=A,this.i=B.encoding||"UTF8",this.numRounds=B.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=y,this.u=[],this.s=0,this.h=!1,this.v=0,this.A=!1,this.l=[],this.H=[]}return k.prototype.update=function(y){var A,R=0,B=this.S>>>5,I=this.p(y,this.u,this.s),$=I.binLen,K=I.value,J=$>>>5;for(A=0;A<J;A+=B)R+this.S<=$&&(this.m=this.R(K.slice(A,A+B),this.m),R+=this.S);this.v+=R,this.u=K.slice(R>>>5),this.s=$%this.S,this.h=!0},k.prototype.getHash=function(y,A){var R,B,I=this.U,$=p(A);if(this.T){if($.outputLen===-1)throw new Error("Output length must be specified in options");I=$.outputLen}var K=i(y,I,this.C,$);if(this.A&&this.F)return K(this.F($));for(B=this.K(this.u.slice(),this.s,this.v,this.B(this.m),I),R=1;R<this.numRounds;R+=1)this.T&&I%32!=0&&(B[B.length-1]&=16777215>>>24-I%32),B=this.K(B,I,0,this.L(this.o),I);return K(B)},k.prototype.setHMACKey=function(y,A,R){if(!this.g)throw new Error("Variant does not support HMAC");if(this.h)throw new Error("Cannot set MAC key after calling update");var B=t(A,(R||{}).encoding||"UTF8",this.C);this.k(B(y))},k.prototype.k=function(y){var A,R=this.S>>>3,B=R/4-1;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(R<y.binLen/8&&(y.value=this.K(y.value,y.binLen,0,this.L(this.o),this.U));y.value.length<=B;)y.value.push(0);for(A=0;A<=B;A+=1)this.l[A]=909522486^y.value[A],this.H[A]=1549556828^y.value[A];this.m=this.R(this.l,this.m),this.v=this.S,this.A=!0},k.prototype.getHMAC=function(y,A){var R=p(A);return i(y,this.U,this.C,R)(this.Y())},k.prototype.Y=function(){var y;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");var A=this.K(this.u.slice(),this.s,this.v,this.B(this.m),this.U);return y=this.R(this.H,this.L(this.o)),y=this.K(A,this.U,this.S,y,this.U)},k}(),h=function(k,y){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,R){A.__proto__=R}||function(A,R){for(var B in R)Object.prototype.hasOwnProperty.call(R,B)&&(A[B]=R[B])})(k,y)};function b(k,y){function A(){this.constructor=k}h(k,y),k.prototype=y===null?Object.create(y):(A.prototype=y.prototype,new A)}function w(k,y){return k<<y|k>>>32-y}function v(k,y){return k>>>y|k<<32-y}function _(k,y){return k>>>y}function T(k,y,A){return k^y^A}function M(k,y,A){return k&y^~k&A}function D(k,y,A){return k&y^k&A^y&A}function F(k){return v(k,2)^v(k,13)^v(k,22)}function O(k,y){var A=(65535&k)+(65535&y);return(65535&(k>>>16)+(y>>>16)+(A>>>16))<<16|65535&A}function W(k,y,A,R){var B=(65535&k)+(65535&y)+(65535&A)+(65535&R);return(65535&(k>>>16)+(y>>>16)+(A>>>16)+(R>>>16)+(B>>>16))<<16|65535&B}function V(k,y,A,R,B){var I=(65535&k)+(65535&y)+(65535&A)+(65535&R)+(65535&B);return(65535&(k>>>16)+(y>>>16)+(A>>>16)+(R>>>16)+(B>>>16)+(I>>>16))<<16|65535&I}function ee(k){return v(k,7)^v(k,18)^_(k,3)}function Q(k){return v(k,6)^v(k,11)^v(k,25)}function ve(k){return[1732584193,4023233417,2562383102,271733878,3285377520]}function be(k,y){var A,R,B,I,$,K,J,ce=[];for(A=y[0],R=y[1],B=y[2],I=y[3],$=y[4],J=0;J<80;J+=1)ce[J]=J<16?k[J]:w(ce[J-3]^ce[J-8]^ce[J-14]^ce[J-16],1),K=J<20?V(w(A,5),M(R,B,I),$,1518500249,ce[J]):J<40?V(w(A,5),T(R,B,I),$,1859775393,ce[J]):J<60?V(w(A,5),D(R,B,I),$,2400959708,ce[J]):V(w(A,5),T(R,B,I),$,3395469782,ce[J]),$=I,I=B,B=w(R,30),R=A,A=K;return y[0]=O(A,y[0]),y[1]=O(R,y[1]),y[2]=O(B,y[2]),y[3]=O(I,y[3]),y[4]=O($,y[4]),y}function j(k,y,A,R){for(var B,I=15+(y+65>>>9<<4),$=y+A;k.length<=I;)k.push(0);for(k[y>>>5]|=128<<24-y%32,k[I]=4294967295&$,k[I-1]=$/4294967296|0,B=0;B<k.length;B+=16)R=be(k.slice(B,B+16),R);return R}var qe=function(k){function y(A,R,B){var I=this;if(A!=="SHA-1")throw new Error(c);var $=B||{};return(I=k.call(this,A,R,B)||this).g=!0,I.F=I.Y,I.C=-1,I.p=t(I.t,I.i,I.C),I.R=be,I.B=function(K){return K.slice()},I.L=ve,I.K=j,I.m=[1732584193,4023233417,2562383102,271733878,3285377520],I.S=512,I.U=160,I.T=!1,$.hmacKey&&I.k(f("hmacKey",$.hmacKey,I.C)),I}return b(y,k),y}(d);function Z(k){return k=="SHA-224"?s.slice():a.slice()}function ye(k,y){var A,R,B,I,$,K,J,ce,Ae,se,he,We,te=[];for(A=y[0],R=y[1],B=y[2],I=y[3],$=y[4],K=y[5],J=y[6],ce=y[7],he=0;he<64;he+=1)te[he]=he<16?k[he]:W(v(We=te[he-2],17)^v(We,19)^_(We,10),te[he-7],ee(te[he-15]),te[he-16]),Ae=V(ce,Q($),M($,K,J),n[he],te[he]),se=O(F(A),D(A,R,B)),ce=J,J=K,K=$,$=O(I,Ae),I=B,B=R,R=A,A=O(Ae,se);return y[0]=O(A,y[0]),y[1]=O(R,y[1]),y[2]=O(B,y[2]),y[3]=O(I,y[3]),y[4]=O($,y[4]),y[5]=O(K,y[5]),y[6]=O(J,y[6]),y[7]=O(ce,y[7]),y}var re=function(k){function y(A,R,B){var I=this;if(A!=="SHA-224"&&A!=="SHA-256")throw new Error(c);var $=B||{};return(I=k.call(this,A,R,B)||this).F=I.Y,I.g=!0,I.C=-1,I.p=t(I.t,I.i,I.C),I.R=ye,I.B=function(K){return K.slice()},I.L=Z,I.K=function(K,J,ce,Ae){return function(se,he,We,te,ot){for(var Je,pt=15+(he+65>>>9<<4),_t=he+We;se.length<=pt;)se.push(0);for(se[he>>>5]|=128<<24-he%32,se[pt]=4294967295&_t,se[pt-1]=_t/4294967296|0,Je=0;Je<se.length;Je+=16)te=ye(se.slice(Je,Je+16),te);return ot==="SHA-224"?[te[0],te[1],te[2],te[3],te[4],te[5],te[6]]:te}(K,J,ce,Ae,A)},I.m=Z(A),I.S=512,I.U=A==="SHA-224"?224:256,I.T=!1,$.hmacKey&&I.k(f("hmacKey",$.hmacKey,I.C)),I}return b(y,k),y}(d),C=function(k,y){this.N=k,this.I=y};function Fe(k,y){var A;return y>32?(A=64-y,new C(k.I<<y|k.N>>>A,k.N<<y|k.I>>>A)):y!==0?(A=32-y,new C(k.N<<y|k.I>>>A,k.I<<y|k.N>>>A)):k}function ie(k,y){var A;return y<32?(A=32-y,new C(k.N>>>y|k.I<<A,k.I>>>y|k.N<<A)):(A=64-y,new C(k.I>>>y|k.N<<A,k.N>>>y|k.I<<A))}function Ce(k,y){return new C(k.N>>>y,k.I>>>y|k.N<<32-y)}function ht(k,y,A){return new C(k.N&y.N^~k.N&A.N,k.I&y.I^~k.I&A.I)}function ut(k,y,A){return new C(k.N&y.N^k.N&A.N^y.N&A.N,k.I&y.I^k.I&A.I^y.I&A.I)}function St(k){var y=ie(k,28),A=ie(k,34),R=ie(k,39);return new C(y.N^A.N^R.N,y.I^A.I^R.I)}function ct(k,y){var A,R;A=(65535&k.I)+(65535&y.I);var B=(65535&(R=(k.I>>>16)+(y.I>>>16)+(A>>>16)))<<16|65535&A;return A=(65535&k.N)+(65535&y.N)+(R>>>16),R=(k.N>>>16)+(y.N>>>16)+(A>>>16),new C((65535&R)<<16|65535&A,B)}function xr(k,y,A,R){var B,I;B=(65535&k.I)+(65535&y.I)+(65535&A.I)+(65535&R.I);var $=(65535&(I=(k.I>>>16)+(y.I>>>16)+(A.I>>>16)+(R.I>>>16)+(B>>>16)))<<16|65535&B;return B=(65535&k.N)+(65535&y.N)+(65535&A.N)+(65535&R.N)+(I>>>16),I=(k.N>>>16)+(y.N>>>16)+(A.N>>>16)+(R.N>>>16)+(B>>>16),new C((65535&I)<<16|65535&B,$)}function hr(k,y,A,R,B){var I,$;I=(65535&k.I)+(65535&y.I)+(65535&A.I)+(65535&R.I)+(65535&B.I);var K=(65535&($=(k.I>>>16)+(y.I>>>16)+(A.I>>>16)+(R.I>>>16)+(B.I>>>16)+(I>>>16)))<<16|65535&I;return I=(65535&k.N)+(65535&y.N)+(65535&A.N)+(65535&R.N)+(65535&B.N)+($>>>16),$=(k.N>>>16)+(y.N>>>16)+(A.N>>>16)+(R.N>>>16)+(B.N>>>16)+(I>>>16),new C((65535&$)<<16|65535&I,K)}function Mt(k,y){return new C(k.N^y.N,k.I^y.I)}function Yr(k){var y=ie(k,1),A=ie(k,8),R=Ce(k,7);return new C(y.N^A.N^R.N,y.I^A.I^R.I)}function Xr(k){var y=ie(k,14),A=ie(k,18),R=ie(k,41);return new C(y.N^A.N^R.N,y.I^A.I^R.I)}var mn=[new C(n[0],3609767458),new C(n[1],602891725),new C(n[2],3964484399),new C(n[3],2173295548),new C(n[4],4081628472),new C(n[5],3053834265),new C(n[6],2937671579),new C(n[7],3664609560),new C(n[8],2734883394),new C(n[9],1164996542),new C(n[10],1323610764),new C(n[11],3590304994),new C(n[12],4068182383),new C(n[13],991336113),new C(n[14],633803317),new C(n[15],3479774868),new C(n[16],2666613458),new C(n[17],944711139),new C(n[18],2341262773),new C(n[19],2007800933),new C(n[20],1495990901),new C(n[21],1856431235),new C(n[22],3175218132),new C(n[23],2198950837),new C(n[24],3999719339),new C(n[25],766784016),new C(n[26],2566594879),new C(n[27],3203337956),new C(n[28],1034457026),new C(n[29],2466948901),new C(n[30],3758326383),new C(n[31],168717936),new C(n[32],1188179964),new C(n[33],1546045734),new C(n[34],1522805485),new C(n[35],2643833823),new C(n[36],2343527390),new C(n[37],1014477480),new C(n[38],1206759142),new C(n[39],344077627),new C(n[40],1290863460),new C(n[41],3158454273),new C(n[42],3505952657),new C(n[43],106217008),new C(n[44],3606008344),new C(n[45],1432725776),new C(n[46],1467031594),new C(n[47],851169720),new C(n[48],3100823752),new C(n[49],1363258195),new C(n[50],3750685593),new C(n[51],3785050280),new C(n[52],3318307427),new C(n[53],3812723403),new C(n[54],2003034995),new C(n[55],3602036899),new C(n[56],1575990012),new C(n[57],1125592928),new C(n[58],2716904306),new C(n[59],442776044),new C(n[60],593698344),new C(n[61],3733110249),new C(n[62],2999351573),new C(n[63],3815920427),new C(3391569614,3928383900),new C(3515267271,566280711),new C(3940187606,3454069534),new C(4118630271,4000239992),new C(116418474,1914138554),new C(174292421,2731055270),new C(289380356,3203993006),new C(460393269,320620315),new C(685471733,587496836),new C(852142971,1086792851),new C(1017036298,365543100),new C(1126000580,2618297676),new C(1288033470,3409855158),new C(1501505948,4234509866),new C(1607167915,987167468),new C(1816402316,1246189591)];function _r(k){return k==="SHA-384"?[new C(3418070365,s[0]),new C(1654270250,s[1]),new C(2438529370,s[2]),new C(355462360,s[3]),new C(1731405415,s[4]),new C(41048885895,s[5]),new C(3675008525,s[6]),new C(1203062813,s[7])]:[new C(a[0],4089235720),new C(a[1],2227873595),new C(a[2],4271175723),new C(a[3],1595750129),new C(a[4],2917565137),new C(a[5],725511199),new C(a[6],4215389547),new C(a[7],327033209)]}function ur(k,y){var A,R,B,I,$,K,J,ce,Ae,se,he,We,te,ot,Je,pt,_t=[];for(A=y[0],R=y[1],B=y[2],I=y[3],$=y[4],K=y[5],J=y[6],ce=y[7],he=0;he<80;he+=1)he<16?(We=2*he,_t[he]=new C(k[We],k[We+1])):_t[he]=xr((te=_t[he-2],ot=void 0,Je=void 0,pt=void 0,ot=ie(te,19),Je=ie(te,61),pt=Ce(te,6),new C(ot.N^Je.N^pt.N,ot.I^Je.I^pt.I)),_t[he-7],Yr(_t[he-15]),_t[he-16]),Ae=hr(ce,Xr($),ht($,K,J),mn[he],_t[he]),se=ct(St(A),ut(A,R,B)),ce=J,J=K,K=$,$=ct(I,Ae),I=B,B=R,R=A,A=ct(Ae,se);return y[0]=ct(A,y[0]),y[1]=ct(R,y[1]),y[2]=ct(B,y[2]),y[3]=ct(I,y[3]),y[4]=ct($,y[4]),y[5]=ct(K,y[5]),y[6]=ct(J,y[6]),y[7]=ct(ce,y[7]),y}var Hr=function(k){function y(A,R,B){var I=this;if(A!=="SHA-384"&&A!=="SHA-512")throw new Error(c);var $=B||{};return(I=k.call(this,A,R,B)||this).F=I.Y,I.g=!0,I.C=-1,I.p=t(I.t,I.i,I.C),I.R=ur,I.B=function(K){return K.slice()},I.L=_r,I.K=function(K,J,ce,Ae){return function(se,he,We,te,ot){for(var Je,pt=31+(he+129>>>10<<5),_t=he+We;se.length<=pt;)se.push(0);for(se[he>>>5]|=128<<24-he%32,se[pt]=4294967295&_t,se[pt-1]=_t/4294967296|0,Je=0;Je<se.length;Je+=32)te=ur(se.slice(Je,Je+32),te);return ot==="SHA-384"?[(te=te)[0].N,te[0].I,te[1].N,te[1].I,te[2].N,te[2].I,te[3].N,te[3].I,te[4].N,te[4].I,te[5].N,te[5].I]:[te[0].N,te[0].I,te[1].N,te[1].I,te[2].N,te[2].I,te[3].N,te[3].I,te[4].N,te[4].I,te[5].N,te[5].I,te[6].N,te[6].I,te[7].N,te[7].I]}(K,J,ce,Ae,A)},I.m=_r(A),I.S=1024,I.U=A==="SHA-384"?384:512,I.T=!1,$.hmacKey&&I.k(f("hmacKey",$.hmacKey,I.C)),I}return b(y,k),y}(d),Ot=[new C(0,1),new C(0,32898),new C(2147483648,32906),new C(2147483648,2147516416),new C(0,32907),new C(0,2147483649),new C(2147483648,2147516545),new C(2147483648,32777),new C(0,138),new C(0,136),new C(0,2147516425),new C(0,2147483658),new C(0,2147516555),new C(2147483648,139),new C(2147483648,32905),new C(2147483648,32771),new C(2147483648,32770),new C(2147483648,128),new C(0,32778),new C(2147483648,2147483658),new C(2147483648,2147516545),new C(2147483648,32896),new C(0,2147483649),new C(2147483648,2147516424)],gr=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function it(k){var y,A=[];for(y=0;y<5;y+=1)A[y]=[new C(0,0),new C(0,0),new C(0,0),new C(0,0),new C(0,0)];return A}function Pt(k){var y,A=[];for(y=0;y<5;y+=1)A[y]=k[y].slice();return A}function Xt(k,y){var A,R,B,I,$,K,J,ce,Ae,se=[],he=[];if(k!==null)for(R=0;R<k.length;R+=2)y[(R>>>1)%5][(R>>>1)/5|0]=Mt(y[(R>>>1)%5][(R>>>1)/5|0],new C(k[R+1],k[R]));for(A=0;A<24;A+=1){for(I=it(),R=0;R<5;R+=1)se[R]=($=y[R][0],K=y[R][1],J=y[R][2],ce=y[R][3],Ae=y[R][4],new C($.N^K.N^J.N^ce.N^Ae.N,$.I^K.I^J.I^ce.I^Ae.I));for(R=0;R<5;R+=1)he[R]=Mt(se[(R+4)%5],Fe(se[(R+1)%5],1));for(R=0;R<5;R+=1)for(B=0;B<5;B+=1)y[R][B]=Mt(y[R][B],he[R]);for(R=0;R<5;R+=1)for(B=0;B<5;B+=1)I[B][(2*R+3*B)%5]=Fe(y[R][B],gr[R][B]);for(R=0;R<5;R+=1)for(B=0;B<5;B+=1)y[R][B]=Mt(I[R][B],new C(~I[(R+1)%5][B].N&I[(R+2)%5][B].N,~I[(R+1)%5][B].I&I[(R+2)%5][B].I));y[0][0]=Mt(y[0][0],Ot[A])}return y}function Qr(k){var y,A,R=0,B=[0,0],I=[4294967295&k,k/4294967296&2097151];for(y=6;y>=0;y--)(A=I[y>>2]>>>8*y&255)===0&&R===0||(B[R+1>>2]|=A<<8*(R+1),R+=1);return R=R!==0?R:1,B[0]|=R,{value:R+1>4?B:[B[0]],binLen:8+8*R}}function vi(k){return u(Qr(k.binLen),k)}function Hi(k,y){var A,R=Qr(y),B=y>>>2,I=(B-(R=u(R,k)).value.length%B)%B;for(A=0;A<I;A++)R.value.push(0);return R.value}var Bn=function(k){function y(A,R,B){var I=this,$=6,K=0,J=B||{};if((I=k.call(this,A,R,B)||this).numRounds!==1){if(J.kmacKey||J.hmacKey)throw new Error("Cannot set numRounds with MAC");if(I.o==="CSHAKE128"||I.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(I.C=1,I.p=t(I.t,I.i,I.C),I.R=Xt,I.B=Pt,I.L=it,I.m=it(),I.T=!1,A){case"SHA3-224":I.S=K=1152,I.U=224,I.g=!0,I.F=I.Y;break;case"SHA3-256":I.S=K=1088,I.U=256,I.g=!0,I.F=I.Y;break;case"SHA3-384":I.S=K=832,I.U=384,I.g=!0,I.F=I.Y;break;case"SHA3-512":I.S=K=576,I.U=512,I.g=!0,I.F=I.Y;break;case"SHAKE128":$=31,I.S=K=1344,I.U=-1,I.T=!0,I.g=!1,I.F=null;break;case"SHAKE256":$=31,I.S=K=1088,I.U=-1,I.T=!0,I.g=!1,I.F=null;break;case"KMAC128":$=4,I.S=K=1344,I.M(B),I.U=-1,I.T=!0,I.g=!1,I.F=I.X;break;case"KMAC256":$=4,I.S=K=1088,I.M(B),I.U=-1,I.T=!0,I.g=!1,I.F=I.X;break;case"CSHAKE128":I.S=K=1344,$=I.O(B),I.U=-1,I.T=!0,I.g=!1,I.F=null;break;case"CSHAKE256":I.S=K=1088,$=I.O(B),I.U=-1,I.T=!0,I.g=!1,I.F=null;break;default:throw new Error(c)}return I.K=function(ce,Ae,se,he,We){return function(te,ot,Je,pt,_t,zr,er){var vr,fn,dn=0,wi=[],hn=_t>>>5,ko=ot>>>5;for(vr=0;vr<ko&&ot>=_t;vr+=hn)pt=Xt(te.slice(vr,vr+hn),pt),ot-=_t;for(te=te.slice(vr),ot%=_t;te.length<hn;)te.push(0);for(te[(vr=ot>>>3)>>2]^=zr<<vr%4*8,te[hn-1]^=2147483648,pt=Xt(te,pt);32*wi.length<er&&(fn=pt[dn%5][dn/5|0],wi.push(fn.I),!(32*wi.length>=er));)wi.push(fn.N),64*(dn+=1)%_t==0&&(Xt(null,pt),dn=0);return wi}(ce,Ae,0,he,K,$,We)},J.hmacKey&&I.k(f("hmacKey",J.hmacKey,I.C)),I}return b(y,k),y.prototype.O=function(A,R){var B=function(J){var ce=J||{};return{funcName:f("funcName",ce.funcName,1,{value:[],binLen:0}),customization:f("Customization",ce.customization,1,{value:[],binLen:0})}}(A||{});R&&(B.funcName=R);var I=u(vi(B.funcName),vi(B.customization));if(B.customization.binLen!==0||B.funcName.binLen!==0){for(var $=Hi(I,this.S>>>3),K=0;K<$.length;K+=this.S>>>5)this.m=this.R($.slice(K,K+(this.S>>>5)),this.m),this.v+=this.S;return 4}return 31},y.prototype.M=function(A){var R=function($){var K=$||{};return{kmacKey:f("kmacKey",K.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:f("Customization",K.customization,1,{value:[],binLen:0})}}(A||{});this.O(A,R.funcName);for(var B=Hi(vi(R.kmacKey),this.S>>>3),I=0;I<B.length;I+=this.S>>>5)this.m=this.R(B.slice(I,I+(this.S>>>5)),this.m),this.v+=this.S;this.A=!0},y.prototype.X=function(A){var R=u({value:this.u.slice(),binLen:this.s},function(B){var I,$,K=0,J=[0,0],ce=[4294967295&B,B/4294967296&2097151];for(I=6;I>=0;I--)($=ce[I>>2]>>>8*I&255)==0&&K===0||(J[K>>2]|=$<<8*K,K+=1);return J[(K=K!==0?K:1)>>2]|=K<<8*K,{value:K+1>4?J:[J[0]],binLen:8+8*K}}(A.outputLen));return this.K(R.value,R.binLen,this.v,this.B(this.m),A.outputLen)},y}(d);return function(){function k(y,A,R){if(y=="SHA-1")this.j=new qe(y,A,R);else if(y=="SHA-224"||y=="SHA-256")this.j=new re(y,A,R);else if(y=="SHA-384"||y=="SHA-512")this.j=new Hr(y,A,R);else{if(y!="SHA3-224"&&y!="SHA3-256"&&y!="SHA3-384"&&y!="SHA3-512"&&y!="SHAKE128"&&y!="SHAKE256"&&y!="CSHAKE128"&&y!="CSHAKE256"&&y!="KMAC128"&&y!="KMAC256")throw new Error(c);this.j=new Bn(y,A,R)}}return k.prototype.update=function(y){this.j.update(y)},k.prototype.getHash=function(y,A){return this.j.getHash(y,A)},k.prototype.setHMACKey=function(y,A,R){this.j.setHMACKey(y,A,R)},k.prototype.getHMAC=function(y,A){return this.j.getHMAC(y,A)},k}()})});var Zb,Jb=X(()=>{"use strict";Zb="1.0.8"});var Qt,xs=X(()=>{"use strict";Jb();Qt=class r extends Error{constructor(e,t={}){let i=t.cause instanceof r?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof r&&t.cause.docsPath||t.docsPath,s=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: https://abitype.dev${n}`]:[],...i?[`Details: ${i}`]:[],`Version: abitype@${Zb}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=i,this.docsPath=n,this.metaMessages=t.metaMessages,this.shortMessage=e}}});function Zr(r,e){return r.exec(e)?.groups}var qh,Yh,yu,Ec=X(()=>{"use strict";qh=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Yh=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,yu=/^\(.+?\).*?$/});function xu(r){let e=r.type;if(ey.test(r.type)&&"components"in r){e="(";let t=r.components.length;for(let n=0;n<t;n++){let s=r.components[n];e+=xu(s),n<t-1&&(e+=", ")}let i=Zr(ey,r.type);return e+=`)${i?.array??""}`,xu({...r,type:e})}return"indexed"in r&&r.indexed&&(e=`${e} indexed`),r.name?`${e} ${r.name}`:e}var ey,ty=X(()=>{"use strict";Ec();ey=/^tuple(?<array>(\[(\d*)\])*)$/});function _s(r){let e="",t=r.length;for(let i=0;i<t;i++){let n=r[i];e+=xu(n),i!==t-1&&(e+=", ")}return e}var ry=X(()=>{"use strict";ty()});function Co(r){return r.type==="function"?`function ${r.name}(${_s(r.inputs)})${r.stateMutability&&r.stateMutability!=="nonpayable"?` ${r.stateMutability}`:""}${r.outputs?.length?` returns (${_s(r.outputs)})`:""}`:r.type==="event"?`event ${r.name}(${_s(r.inputs)})`:r.type==="error"?`error ${r.name}(${_s(r.inputs)})`:r.type==="constructor"?`constructor(${_s(r.inputs)})${r.stateMutability==="payable"?" payable":""}`:r.type==="fallback"?`fallback() external${r.stateMutability==="payable"?" payable":""}`:"receive() external payable"}var iy=X(()=>{"use strict";ry()});function oy(r){return ny.test(r)}function sy(r){return Zr(ny,r)}function cy(r){return ay.test(r)}function ly(r){return Zr(ay,r)}function py(r){return uy.test(r)}function my(r){return Zr(uy,r)}function vs(r){return fy.test(r)}function dy(r){return Zr(fy,r)}function gy(r){return hy.test(r)}function by(r){return Zr(hy,r)}function xy(r){return yy.test(r)}function _y(r){return Zr(yy,r)}function vy(r){return Sv.test(r)}var ny,ay,uy,fy,hy,yy,Sv,wy,_u,Ic=X(()=>{"use strict";Ec();ny=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;ay=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;uy=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;fy=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;hy=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;yy=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;Sv=/^receive\(\) external payable$/;wy=new Set(["indexed"]),_u=new Set(["calldata","memory","storage"])});var vu,wu,Eu,Iu=X(()=>{"use strict";xs();vu=class extends Qt{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}},wu=class extends Qt{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},Eu=class extends Qt{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}});var Su,Lu,Tu,Au,ku,Xh=X(()=>{"use strict";xs();Su=class extends Qt{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},Lu=class extends Qt{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},Tu=class extends Qt{constructor({param:e,type:t,modifier:i}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${i}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},Au=class extends Qt{constructor({param:e,type:t,modifier:i}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${i}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${i}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},ku=class extends Qt{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}});var Gi,Cu,Ru,Qh=X(()=>{"use strict";xs();Gi=class extends Qt{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},Cu=class extends Qt{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},Ru=class extends Qt{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}});var Mu,Ey=X(()=>{"use strict";xs();Mu=class extends Qt{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}});var Du,Iy=X(()=>{"use strict";xs();Du=class extends Qt{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}});function Sy(r,e,t){let i="";if(t)for(let n of Object.entries(t)){if(!n)continue;let s="";for(let a of n[1])s+=`[${a.type}${a.name?`:${a.name}`:""}]`;i+=`(${n[0]}{${s}})`}return e?`${e}:${r}${i}`:r}var Bu,Ly=X(()=>{"use strict";Bu=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]])});function Sc(r,e={}){if(py(r))return Lv(r,e);if(cy(r))return Tv(r,e);if(oy(r))return Av(r,e);if(gy(r))return kv(r,e);if(xy(r))return Cv(r);if(vy(r))return{type:"receive",stateMutability:"payable"};throw new Cu({signature:r})}function Lv(r,e={}){let t=my(r);if(!t)throw new Gi({signature:r,type:"function"});let i=Ei(t.parameters),n=[],s=i.length;for(let c=0;c<s;c++)n.push(Pn(i[c],{modifiers:_u,structs:e,type:"function"}));let a=[];if(t.returns){let c=Ei(t.returns),u=c.length;for(let p=0;p<u;p++)a.push(Pn(c[p],{modifiers:_u,structs:e,type:"function"}))}return{name:t.name,type:"function",stateMutability:t.stateMutability??"nonpayable",inputs:n,outputs:a}}function Tv(r,e={}){let t=ly(r);if(!t)throw new Gi({signature:r,type:"event"});let i=Ei(t.parameters),n=[],s=i.length;for(let a=0;a<s;a++)n.push(Pn(i[a],{modifiers:wy,structs:e,type:"event"}));return{name:t.name,type:"event",inputs:n}}function Av(r,e={}){let t=sy(r);if(!t)throw new Gi({signature:r,type:"error"});let i=Ei(t.parameters),n=[],s=i.length;for(let a=0;a<s;a++)n.push(Pn(i[a],{structs:e,type:"error"}));return{name:t.name,type:"error",inputs:n}}function kv(r,e={}){let t=by(r);if(!t)throw new Gi({signature:r,type:"constructor"});let i=Ei(t.parameters),n=[],s=i.length;for(let a=0;a<s;a++)n.push(Pn(i[a],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:t.stateMutability??"nonpayable",inputs:n}}function Cv(r){let e=_y(r);if(!e)throw new Gi({signature:r,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}function Pn(r,e){let t=Sy(r,e?.type,e?.structs);if(Bu.has(t))return Bu.get(t);let i=yu.test(r),n=Zr(i?Mv:Rv,r);if(!n)throw new Su({param:r});if(n.name&&Ov(n.name))throw new Lu({param:r,name:n.name});let s=n.name?{name:n.name}:{},a=n.modifier==="indexed"?{indexed:!0}:{},c=e?.structs??{},u,p={};if(i){u="tuple";let d=Ei(n.type),h=[],b=d.length;for(let w=0;w<b;w++)h.push(Pn(d[w],{structs:c}));p={components:h}}else if(n.type in c)u="tuple",p={components:c[n.type]};else if(Dv.test(n.type))u=`${n.type}256`;else if(u=n.type,e?.type!=="struct"&&!Zh(u))throw new Eu({type:u});if(n.modifier){if(!e?.modifiers?.has?.(n.modifier))throw new Tu({param:r,type:e?.type,modifier:n.modifier});if(_u.has(n.modifier)&&!Pv(u,!!n.array))throw new Au({param:r,type:e?.type,modifier:n.modifier})}let f={type:`${u}${n.array??""}`,...s,...a,...p};return Bu.set(t,f),f}function Ei(r,e=[],t="",i=0){let n=r.trim().length;for(let s=0;s<n;s++){let a=r[s],c=r.slice(s+1);switch(a){case",":return i===0?Ei(c,[...e,t.trim()]):Ei(c,e,`${t}${a}`,i);case"(":return Ei(c,e,`${t}${a}`,i+1);case")":return Ei(c,e,`${t}${a}`,i-1);default:return Ei(c,e,`${t}${a}`,i)}}if(t==="")return e;if(i!==0)throw new Du({current:t,depth:i});return e.push(t.trim()),e}function Zh(r){return r==="address"||r==="bool"||r==="function"||r==="string"||qh.test(r)||Yh.test(r)}function Ov(r){return r==="address"||r==="bool"||r==="function"||r==="string"||r==="tuple"||qh.test(r)||Yh.test(r)||Bv.test(r)}function Pv(r,e){return e||r==="bytes"||r==="string"||r==="tuple"}var Rv,Mv,Dv,Bv,Ou=X(()=>{"use strict";Ec();Iu();Xh();Qh();Iy();Ly();Ic();Rv=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Mv=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Dv=/^u?int$/;Bv=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/});function Pu(r){let e={},t=r.length;for(let a=0;a<t;a++){let c=r[a];if(!vs(c))continue;let u=dy(c);if(!u)throw new Gi({signature:c,type:"struct"});let p=u.properties.split(";"),f=[],d=p.length;for(let h=0;h<d;h++){let w=p[h].trim();if(!w)continue;let v=Pn(w,{type:"struct"});f.push(v)}if(!f.length)throw new Ru({signature:c});e[u.name]=f}let i={},n=Object.entries(e),s=n.length;for(let a=0;a<s;a++){let[c,u]=n[a];i[c]=Ty(u,e)}return i}function Ty(r,e,t=new Set){let i=[],n=r.length;for(let s=0;s<n;s++){let a=r[s];if(yu.test(a.type))i.push(a);else{let u=Zr(Nv,a.type);if(!u?.type)throw new ku({abiParameter:a});let{array:p,type:f}=u;if(f in e){if(t.has(f))throw new Mu({type:f});i.push({...a,type:`tuple${p??""}`,components:Ty(e[f]??[],e,new Set([...t,f]))})}else if(Zh(f))i.push(a);else throw new wu({type:f})}}return i}var Nv,Jh=X(()=>{"use strict";Ec();Iu();Xh();Qh();Ey();Ic();Ou();Nv=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/});function Nu(r){let e=Pu(r),t=[],i=r.length;for(let n=0;n<i;n++){let s=r[n];vs(s)||t.push(Sc(s,e))}return t}var Ay=X(()=>{"use strict";Ic();Jh();Ou()});function Fu(r){let e;if(typeof r=="string")e=Sc(r);else{let t=Pu(r),i=r.length;for(let n=0;n<i;n++){let s=r[n];if(!vs(s)){e=Sc(s,t);break}}}if(!e)throw new vu({signature:r});return e}var ky=X(()=>{"use strict";Iu();Ic();Jh();Ou()});var Uu=X(()=>{"use strict";iy();Ay();ky()});function Mr(r,{includeName:e=!1}={}){if(r.type!=="function"&&r.type!=="event"&&r.type!=="error")throw new Hu(r.type);return`${r.name}(${Lc(r.inputs,{includeName:e})})`}function Lc(r,{includeName:e=!1}={}){return r?r.map(t=>Uv(t,{includeName:e})).join(e?", ":","):""}function Uv(r,{includeName:e}){return r.type.startsWith("tuple")?`(${Lc(r.components,{includeName:e})})${r.type.slice(5)}`:r.type+(e&&r.name?` ${r.name}`:"")}var Ro=X(()=>{"use strict";tr()});function qt(r,{strict:e=!0}={}){return!r||typeof r!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(r):r.startsWith("0x")}var Ii=X(()=>{"use strict"});function bt(r){return qt(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}var Si=X(()=>{"use strict";Ii()});var eg,Cy=X(()=>{"use strict";eg="2.26.3"});function Ry(r,e){return e?.(r)?r:r&&typeof r=="object"&&"cause"in r&&r.cause!==void 0?Ry(r.cause,e):e?null:r}var tg,P,rt=X(()=>{"use strict";Cy();tg={getDocsUrl:({docsBaseUrl:r,docsPath:e="",docsSlug:t})=>e?`${r??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${eg}`},P=class r extends Error{constructor(e,t={}){let i=(()=>t.cause instanceof r?t.cause.details:t.cause?.message?t.cause.message:t.details)(),n=(()=>t.cause instanceof r&&t.cause.docsPath||t.docsPath)(),s=tg.getDocsUrl?.({...t,docsPath:n}),a=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...i?[`Details: ${i}`]:[],...tg.version?[`Version: ${tg.version}`]:[]].join(`
`);super(a,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=n,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=eg}walk(e){return Ry(this,e)}}});var zu,Tc,ws,ni,ju,Vu,Gu,Es,Wu,Is,Ac,Nn,$u,Ku,qu,Li,Wi,Yu,Xu,Qu,Hu,tr=X(()=>{"use strict";Ro();Si();rt();zu=class extends P{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}},Tc=class extends P{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}},ws=class extends P{constructor({data:e,params:t,size:i}){super([`Data size of ${i} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Lc(t,{includeName:!0})})`,`Data:   ${e} (${i} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=i}},ni=class extends P{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}},ju=class extends P{constructor({expectedLength:e,givenLength:t,type:i}){super([`ABI encoding array length mismatch for type ${i}.`,`Expected length: ${e}`,`Given length: ${t}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}},Vu=class extends P{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${bt(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}},Gu=class extends P{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}},Es=class extends P{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}},Wu=class extends P{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}},Is=class extends P{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiEventSignatureNotFoundError"})}},Ac=class extends P{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:t,name:"AbiEventNotFoundError"})}},Nn=class extends P{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionNotFoundError"})}},$u=class extends P{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}},Ku=class extends P{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Mr(e.abiItem)}\`, and`,`\`${t.type}\` in \`${Mr(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}},qu=class extends P{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}},Li=class extends P{constructor({abiItem:e,data:t,params:i,size:n}){super([`Data size of ${n} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Lc(i,{includeName:!0})})`,`Data:   ${t} (${n} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=i,this.size=n}},Wi=class extends P{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${Mr(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}},Yu=class extends P{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiEncodingType"})}},Xu=class extends P{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiDecodingType"})}},Qu=class extends P{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}},Hu=class extends P{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}});var kc,Cc,Rc,Ju=X(()=>{"use strict";rt();kc=class extends P{constructor({offset:e,position:t,size:i}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${i}).`,{name:"SliceOffsetOutOfBoundsError"})}},Cc=class extends P{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}},Rc=class extends P{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} is expected to be ${t} ${i} long, but is ${e} ${i} long.`,{name:"InvalidBytesLengthError"})}}});function Fn(r,{dir:e,size:t=32}={}){return typeof r=="string"?bn(r,{dir:e,size:t}):Hv(r,{dir:e,size:t})}function bn(r,{dir:e,size:t=32}={}){if(t===null)return r;let i=r.replace("0x","");if(i.length>t*2)throw new Cc({size:Math.ceil(i.length/2),targetSize:t,type:"hex"});return`0x${i[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function Hv(r,{dir:e,size:t=32}={}){if(t===null)return r;if(r.length>t)throw new Cc({size:r.length,targetSize:t,type:"bytes"});let i=new Uint8Array(t);for(let n=0;n<t;n++){let s=e==="right";i[s?n:t-n-1]=r[s?n:r.length-n-1]}return i}var ep=X(()=>{"use strict";Ju()});var Ss,tp,rp,ip,Mc=X(()=>{"use strict";rt();Ss=class extends P{constructor({max:e,min:t,signed:i,size:n,value:s}){super(`Number "${s}" is not in safe ${n?`${n*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},tp=class extends P{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}},rp=class extends P{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}},ip=class extends P{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}});function wr(r,{dir:e="left"}={}){let t=typeof r=="string"?r.replace("0x",""):r,i=0;for(let n=0;n<t.length-1&&t[e==="left"?n:t.length-n-1].toString()==="0";n++)i++;return t=e==="left"?t.slice(i):t.slice(0,t.length-i),typeof r=="string"?(t.length===1&&e==="right"&&(t=`${t}0`),`0x${t.length%2===1?`0${t}`:t}`):t}var Ls=X(()=>{"use strict"});function jr(r,{size:e}){if(bt(r)>e)throw new ip({givenSize:bt(r),maxSize:e})}function Nt(r,e={}){let{signed:t}=e;e.size&&jr(r,{size:e.size});let i=BigInt(r);if(!t)return i;let n=(r.length-2)/2,s=(1n<<BigInt(n)*8n-1n)-1n;return i<=s?i:i-BigInt(`0x${"f".padStart(n*2,"f")}`)-1n}function rg(r,e={}){let t=r;if(e.size&&(jr(t,{size:e.size}),t=wr(t)),wr(t)==="0x00")return!1;if(wr(t)==="0x01")return!0;throw new rp(t)}function Zt(r,e={}){return Number(Nt(r,e))}var Er=X(()=>{"use strict";Mc();Si();Ls()});function we(r,e={}){return typeof r=="number"||typeof r=="bigint"?de(r,e):typeof r=="string"?Ti(r,e):typeof r=="boolean"?np(r,e):ft(r,e)}function np(r,e={}){let t=`0x${Number(r)}`;return typeof e.size=="number"?(jr(t,{size:e.size}),Fn(t,{size:e.size})):t}function ft(r,e={}){let t="";for(let n=0;n<r.length;n++)t+=zv[r[n]];let i=`0x${t}`;return typeof e.size=="number"?(jr(i,{size:e.size}),Fn(i,{dir:"right",size:e.size})):i}function de(r,e={}){let{signed:t,size:i}=e,n=BigInt(r),s;i?t?s=(1n<<BigInt(i)*8n-1n)-1n:s=2n**(BigInt(i)*8n)-1n:typeof r=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));let a=typeof s=="bigint"&&t?-s-1n:0;if(s&&n>s||n<a){let u=typeof r=="bigint"?"n":"";throw new Ss({max:s?`${s}${u}`:void 0,min:`${a}${u}`,signed:t,size:i,value:`${r}${u}`})}let c=`0x${(t&&n<0?(1n<<BigInt(i*8))+BigInt(n):n).toString(16)}`;return i?Fn(c,{size:i}):c}function Ti(r,e={}){let t=jv.encode(r);return ft(t,e)}var zv,jv,Ne=X(()=>{"use strict";Mc();ep();Er();zv=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));jv=new TextEncoder});function oi(r,e={}){return typeof r=="number"||typeof r=="bigint"?Wv(r,e):typeof r=="boolean"?Gv(r,e):qt(r)?rr(r,e):Ai(r,e)}function Gv(r,e={}){let t=new Uint8Array(1);return t[0]=Number(r),typeof e.size=="number"?(jr(t,{size:e.size}),Fn(t,{size:e.size})):t}function My(r){if(r>=yn.zero&&r<=yn.nine)return r-yn.zero;if(r>=yn.A&&r<=yn.F)return r-(yn.A-10);if(r>=yn.a&&r<=yn.f)return r-(yn.a-10)}function rr(r,e={}){let t=r;e.size&&(jr(t,{size:e.size}),t=Fn(t,{dir:"right",size:e.size}));let i=t.slice(2);i.length%2&&(i=`0${i}`);let n=i.length/2,s=new Uint8Array(n);for(let a=0,c=0;a<n;a++){let u=My(i.charCodeAt(c++)),p=My(i.charCodeAt(c++));if(u===void 0||p===void 0)throw new P(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);s[a]=u*16+p}return s}function Wv(r,e){let t=de(r,e);return rr(t)}function Ai(r,e={}){let t=Vv.encode(r);return typeof e.size=="number"?(jr(t,{size:e.size}),Fn(t,{dir:"right",size:e.size})):t}var Vv,yn,pr=X(()=>{"use strict";rt();Ii();ep();Er();Ne();Vv=new TextEncoder;yn={zero:48,nine:57,A:65,F:70,a:97,f:102}});function Dc(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function $v(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Un(r,...e){if(!$v(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Dy(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Dc(r.outputLen),Dc(r.blockLen)}function xn(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function op(r,e){Un(r);let t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}var Bc=X(()=>{"use strict"});function Kv(r,e=!1){return e?{h:Number(r&sp),l:Number(r>>By&sp)}:{h:Number(r>>By&sp)|0,l:Number(r&sp)|0}}function Oy(r,e=!1){let t=new Uint32Array(r.length),i=new Uint32Array(r.length);for(let n=0;n<r.length;n++){let{h:s,l:a}=Kv(r[n],e);[t[n],i[n]]=[s,a]}return[t,i]}var sp,By,Py,Ny,Fy,Uy,Hy=X(()=>{"use strict";sp=BigInt(4294967295),By=BigInt(32);Py=(r,e,t)=>r<<t|e>>>32-t,Ny=(r,e,t)=>e<<t|r>>>32-t,Fy=(r,e,t)=>e<<t-32|r>>>64-t,Uy=(r,e,t)=>r<<t-32|e>>>64-t});var Mo,zy=X(()=>{"use strict";Mo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function jy(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function ap(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function ki(r,e){return r<<32-e|r>>>e}function qv(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function ng(r){for(let e=0;e<r.length;e++)r[e]=qv(r[e])}function Yv(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function zn(r){return typeof r=="string"&&(r=Yv(r)),Un(r),r}function Vy(...r){let e=0;for(let i=0;i<r.length;i++){let n=r[i];Un(n),e+=n.length}let t=new Uint8Array(e);for(let i=0,n=0;i<r.length;i++){let s=r[i];t.set(s,n),n+=s.length}return t}function cp(r){let e=i=>r().update(zn(i)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Gy(r){let e=(i,n)=>r(n).update(zn(i)).digest(),t=r({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=i=>r(i),e}function lp(r=32){if(Mo&&typeof Mo.getRandomValues=="function")return Mo.getRandomValues(new Uint8Array(r));if(Mo&&typeof Mo.randomBytes=="function")return Mo.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}var ig,Hn,Do=X(()=>{"use strict";zy();Bc();ig=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();Hn=class{clone(){return this._cloneInto()}}});function iw(r,e=24){let t=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let a=0;a<10;a++)t[a]=r[a]^r[a+10]^r[a+20]^r[a+30]^r[a+40];for(let a=0;a<10;a+=2){let c=(a+8)%10,u=(a+2)%10,p=t[u],f=t[u+1],d=Wy(p,f,1)^t[c],h=$y(p,f,1)^t[c+1];for(let b=0;b<50;b+=10)r[a+b]^=d,r[a+b+1]^=h}let n=r[2],s=r[3];for(let a=0;a<24;a++){let c=qy[a],u=Wy(n,s,c),p=$y(n,s,c),f=Ky[a];n=r[f],s=r[f+1],r[f]=u,r[f+1]=p}for(let a=0;a<50;a+=10){for(let c=0;c<10;c++)t[c]=r[a+c];for(let c=0;c<10;c++)r[a+c]^=~t[(c+2)%10]&t[(c+4)%10]}r[0]^=tw[i],r[1]^=rw[i]}t.fill(0)}var Ky,qy,Yy,Xv,Oc,Qv,Zv,Jv,ew,tw,rw,Wy,$y,up,jn,lk,uk,pk,mk,fk,pp,dk,hk,Xy,gk,bk,og=X(()=>{"use strict";Bc();Hy();Do();Ky=[],qy=[],Yy=[],Xv=BigInt(0),Oc=BigInt(1),Qv=BigInt(2),Zv=BigInt(7),Jv=BigInt(256),ew=BigInt(113);for(let r=0,e=Oc,t=1,i=0;r<24;r++){[t,i]=[i,(2*t+3*i)%5],Ky.push(2*(5*i+t)),qy.push((r+1)*(r+2)/2%64);let n=Xv;for(let s=0;s<7;s++)e=(e<<Oc^(e>>Zv)*ew)%Jv,e&Qv&&(n^=Oc<<(Oc<<BigInt(s))-Oc);Yy.push(n)}[tw,rw]=Oy(Yy,!0),Wy=(r,e,t)=>t>32?Fy(r,e,t):Py(r,e,t),$y=(r,e,t)=>t>32?Uy(r,e,t):Ny(r,e,t);up=class r extends Hn{constructor(e,t,i,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=i,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Dc(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=jy(this.state)}keccak(){ig||ng(this.state32),iw(this.state32,this.rounds),ig||ng(this.state32),this.posOut=0,this.pos=0}update(e){xn(this);let{blockLen:t,state:i}=this;e=zn(e);let n=e.length;for(let s=0;s<n;){let a=Math.min(t-this.pos,n-s);for(let c=0;c<a;c++)i[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:i,blockLen:n}=this;e[i]^=t,t&128&&i===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){xn(this,!1),Un(e),this.finish();let t=this.state,{blockLen:i}=this;for(let n=0,s=e.length;n<s;){this.posOut>=i&&this.keccak();let a=Math.min(i-this.posOut,s-n);e.set(t.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Dc(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(op(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:i,outputLen:n,rounds:s,enableXOF:a}=this;return e||(e=new r(t,i,n,a,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=i,e.outputLen=n,e.enableXOF=a,e.destroyed=this.destroyed,e}},jn=(r,e,t)=>cp(()=>new up(e,r,t)),lk=jn(6,144,224/8),uk=jn(6,136,256/8),pk=jn(6,104,384/8),mk=jn(6,72,512/8),fk=jn(1,144,224/8),pp=jn(1,136,256/8),dk=jn(1,104,384/8),hk=jn(1,72,512/8),Xy=(r,e,t)=>Gy((i={})=>new up(e,r,i.dkLen===void 0?t:i.dkLen,!0)),gk=Xy(31,168,128/8),bk=Xy(31,136,256/8)});function Rt(r,e){let t=e||"hex",i=pp(qt(r,{strict:!1})?oi(r):r);return t==="bytes"?i:we(i)}var Ci=X(()=>{"use strict";og();Ii();pr();Ne()});function Qy(r){return nw(r)}var nw,Zy=X(()=>{"use strict";pr();Ci();nw=r=>Rt(oi(r))});function Jy(r){let e=!0,t="",i=0,n="",s=!1;for(let a=0;a<r.length;a++){let c=r[a];if(["(",")",","].includes(c)&&(e=!0),c==="("&&i++,c===")"&&i--,!!e){if(i===0){if(c===" "&&["event","function",""].includes(n))n="";else if(n+=c,c===")"){s=!0;break}continue}if(c===" "){r[a-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}n+=c,t+=c}}if(!s)throw new P("Unable to normalize signature.");return n}var e0=X(()=>{"use strict";rt()});var t0,r0=X(()=>{"use strict";Uu();e0();t0=r=>{let e=(()=>typeof r=="string"?r:Co(r))();return Jy(e)}});function mp(r){return Qy(t0(r))}var sg=X(()=>{"use strict";Zy();r0()});var Vn,Pc=X(()=>{"use strict";sg();Vn=mp});var Bt,$i=X(()=>{"use strict";rt();Bt=class extends P{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}});var Ki,Nc=X(()=>{"use strict";Ki=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let i=this.keys().next().value;i&&this.delete(i)}return this}}});function _n(r,e){if(ag.has(`${r}.${e}`))return ag.get(`${r}.${e}`);let t=e?`${e}${r.toLowerCase()}`:r.substring(2).toLowerCase(),i=Rt(Ai(t),"bytes"),n=(e?t.substring(`${e}0x`.length):t).split("");for(let a=0;a<40;a+=2)i[a>>1]>>4>=8&&n[a]&&(n[a]=n[a].toUpperCase()),(i[a>>1]&15)>=8&&n[a+1]&&(n[a+1]=n[a+1].toUpperCase());let s=`0x${n.join("")}`;return ag.set(`${r}.${e}`,s),s}function fp(r,e){if(!At(r,{strict:!1}))throw new Bt({address:r});return _n(r,e)}var ag,Bo=X(()=>{"use strict";$i();pr();Ci();Nc();Ri();ag=new Ki(8192)});function At(r,e){let{strict:t=!0}=e??{},i=`${r}.${t}`;if(cg.has(i))return cg.get(i);let n=(()=>ow.test(r)?r.toLowerCase()===r?!0:t?_n(r)===r:!0:!1)();return cg.set(i,n),n}var ow,cg,Ri=X(()=>{"use strict";Nc();Bo();ow=/^0x[a-fA-F0-9]{40}$/,cg=new Ki(8192)});function Dr(r){return typeof r[0]=="string"?Ir(r):sw(r)}function sw(r){let e=0;for(let n of r)e+=n.length;let t=new Uint8Array(e),i=0;for(let n of r)t.set(n,i),i+=n.length;return t}function Ir(r){return`0x${r.reduce((e,t)=>e+t.replace("0x",""),"")}`}var si=X(()=>{"use strict"});function vn(r,e,t,{strict:i}={}){return qt(r,{strict:!1})?ug(r,e,t,{strict:i}):lg(r,e,t,{strict:i})}function i0(r,e){if(typeof e=="number"&&e>0&&e>bt(r)-1)throw new kc({offset:e,position:"start",size:bt(r)})}function n0(r,e,t){if(typeof e=="number"&&typeof t=="number"&&bt(r)!==t-e)throw new kc({offset:t,position:"end",size:bt(r)})}function lg(r,e,t,{strict:i}={}){i0(r,e);let n=r.slice(e,t);return i&&n0(n,e,t),n}function ug(r,e,t,{strict:i}={}){i0(r,e);let n=`0x${r.replace("0x","").slice((e??0)*2,(t??r.length)*2)}`;return i&&n0(n,e,t),n}var Oo=X(()=>{"use strict";Ju();Ii();Si()});var o0,dp,pg=X(()=>{"use strict";o0=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,dp=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/});function Jr(r,e){if(r.length!==e.length)throw new Gu({expectedLength:r.length,givenLength:e.length});let t=aw({params:r,values:e}),i=fg(t);return i.length===0?"0x":i}function aw({params:r,values:e}){let t=[];for(let i=0;i<r.length;i++)t.push(mg({param:r[i],value:e[i]}));return t}function mg({param:r,value:e}){let t=hp(r.type);if(t){let[i,n]=t;return lw(e,{length:i,param:{...r,type:n}})}if(r.type==="tuple")return dw(e,{param:r});if(r.type==="address")return cw(e);if(r.type==="bool")return pw(e);if(r.type.startsWith("uint")||r.type.startsWith("int")){let i=r.type.startsWith("int"),[,,n="256"]=dp.exec(r.type)??[];return mw(e,{signed:i,size:Number(n)})}if(r.type.startsWith("bytes"))return uw(e,{param:r});if(r.type==="string")return fw(e);throw new Yu(r.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function fg(r){let e=0;for(let s=0;s<r.length;s++){let{dynamic:a,encoded:c}=r[s];a?e+=32:e+=bt(c)}let t=[],i=[],n=0;for(let s=0;s<r.length;s++){let{dynamic:a,encoded:c}=r[s];a?(t.push(de(e+n,{size:32})),i.push(c),n+=bt(c)):t.push(c)}return Dr([...t,...i])}function cw(r){if(!At(r))throw new Bt({address:r});return{dynamic:!1,encoded:bn(r.toLowerCase())}}function lw(r,{length:e,param:t}){let i=e===null;if(!Array.isArray(r))throw new Qu(r);if(!i&&r.length!==e)throw new ju({expectedLength:e,givenLength:r.length,type:`${t.type}[${e}]`});let n=!1,s=[];for(let a=0;a<r.length;a++){let c=mg({param:t,value:r[a]});c.dynamic&&(n=!0),s.push(c)}if(i||n){let a=fg(s);if(i){let c=de(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?Dr([c,a]):c}}if(n)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Dr(s.map(({encoded:a})=>a))}}function uw(r,{param:e}){let[,t]=e.type.split("bytes"),i=bt(r);if(!t){let n=r;return i%32!==0&&(n=bn(n,{dir:"right",size:Math.ceil((r.length-2)/2/32)*32})),{dynamic:!0,encoded:Dr([bn(de(i,{size:32})),n])}}if(i!==Number.parseInt(t))throw new Vu({expectedSize:Number.parseInt(t),value:r});return{dynamic:!1,encoded:bn(r,{dir:"right"})}}function pw(r){if(typeof r!="boolean")throw new P(`Invalid boolean value: "${r}" (type: ${typeof r}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:bn(np(r))}}function mw(r,{signed:e,size:t=256}){if(typeof t=="number"){let i=2n**(BigInt(t)-(e?1n:0n))-1n,n=e?-i-1n:0n;if(r>i||r<n)throw new Ss({max:i.toString(),min:n.toString(),signed:e,size:t/8,value:r.toString()})}return{dynamic:!1,encoded:de(r,{size:32,signed:e})}}function fw(r){let e=Ti(r),t=Math.ceil(bt(e)/32),i=[];for(let n=0;n<t;n++)i.push(bn(vn(e,n*32,(n+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Dr([bn(de(bt(e),{size:32})),...i])}}function dw(r,{param:e}){let t=!1,i=[];for(let n=0;n<e.components.length;n++){let s=e.components[n],a=Array.isArray(r)?n:s.name,c=mg({param:s,value:r[a]});i.push(c),c.dynamic&&(t=!0)}return{dynamic:t,encoded:t?fg(i):Dr(i.map(({encoded:n})=>n))}}function hp(r){let e=r.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}var Gn=X(()=>{"use strict";tr();$i();rt();Mc();Ri();si();ep();Si();Oo();Ne();pg()});var Ts,gp=X(()=>{"use strict";Oo();sg();Ts=r=>vn(mp(r),0,4)});function qi(r){let{abi:e,args:t=[],name:i}=r,n=qt(i,{strict:!1}),s=e.filter(c=>n?c.type==="function"?Ts(c)===i:c.type==="event"?Vn(c)===i:!1:"name"in c&&c.name===i);if(s.length===0)return;if(s.length===1)return s[0];let a;for(let c of s){if(!("inputs"in c))continue;if(!t||t.length===0){if(!c.inputs||c.inputs.length===0)return c;continue}if(!c.inputs||c.inputs.length===0||c.inputs.length!==t.length)continue;if(t.every((p,f)=>{let d="inputs"in c&&c.inputs[f];return d?dg(p,d):!1})){if(a&&"inputs"in a&&a.inputs){let p=s0(c.inputs,a.inputs,t);if(p)throw new Ku({abiItem:c,type:p[0]},{abiItem:a,type:p[1]})}a=c}}return a||s[0]}function dg(r,e){let t=typeof r,i=e.type;switch(i){case"address":return At(r,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return i==="tuple"&&"components"in e?Object.values(e.components).every((n,s)=>dg(Object.values(r)[s],n)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?t==="string"||r instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)?Array.isArray(r)&&r.every(n=>dg(n,{...e,type:i.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function s0(r,e,t){for(let i in r){let n=r[i],s=e[i];if(n.type==="tuple"&&s.type==="tuple"&&"components"in n&&"components"in s)return s0(n.components,s.components,t[i]);let a=[n.type,s.type];if((()=>a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?At(t[i],{strict:!1}):a.includes("address")&&a.includes("bytes")?At(t[i],{strict:!1}):!1)())return a}}var As=X(()=>{"use strict";tr();Ii();Ri();Pc();gp()});function at(r){return typeof r=="string"?{address:r,type:"json-rpc"}:r}var ir=X(()=>{"use strict"});function u0(r){let{abi:e,args:t,functionName:i}=r,n=e[0];if(i){let s=qi({abi:e,args:t,name:i});if(!s)throw new Nn(i,{docsPath:l0});n=s}if(n.type!=="function")throw new Nn(void 0,{docsPath:l0});return{abi:[n],functionName:Ts(Mr(n))}}var l0,p0=X(()=>{"use strict";tr();gp();Ro();As();l0="/docs/contract/encodeFunctionData"});function Ft(r){let{args:e}=r,{abi:t,functionName:i}=(()=>r.abi.length===1&&r.functionName?.startsWith("0x")?r:u0(r))(),n=t[0],s=i,a="inputs"in n&&n.inputs?Jr(n.inputs,e??[]):void 0;return Ir([s,a??"0x"])}var ai=X(()=>{"use strict";si();Gn();p0()});var yp,m0,f0,xp=X(()=>{"use strict";yp={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},m0={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},f0={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}});var Fc,ks,_p,hg=X(()=>{"use strict";rt();Fc=class extends P{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}},ks=class extends P{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}},_p=class extends P{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}});function Cs(r,{recursiveReadLimit:e=8192}={}){let t=Object.create(hw);return t.bytes=r,t.dataView=new DataView(r.buffer,r.byteOffset,r.byteLength),t.positionReadCount=new Map,t.recursiveReadLimit=e,t}var hw,vp=X(()=>{"use strict";hg();hw={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new _p({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(r){if(r<0||r>this.bytes.length-1)throw new ks({length:this.bytes.length,position:r})},decrementPosition(r){if(r<0)throw new Fc({offset:r});let e=this.position-r;this.assertPosition(e),this.position=e},getReadCount(r){return this.positionReadCount.get(r||this.position)||0},incrementPosition(r){if(r<0)throw new Fc({offset:r});let e=this.position+r;this.assertPosition(e),this.position=e},inspectByte(r){let e=r??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(r,e){let t=e??this.position;return this.assertPosition(t+r-1),this.bytes.subarray(t,t+r)},inspectUint8(r){let e=r??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(r){let e=r??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(r){let e=r??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(r){let e=r??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(r){this.assertPosition(this.position),this.bytes[this.position]=r,this.position++},pushBytes(r){this.assertPosition(this.position+r.length-1),this.bytes.set(r,this.position),this.position+=r.length},pushUint8(r){this.assertPosition(this.position),this.bytes[this.position]=r,this.position++},pushUint16(r){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,r),this.position+=2},pushUint24(r){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,r>>8),this.dataView.setUint8(this.position+2,r&255),this.position+=3},pushUint32(r){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,r),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let r=this.inspectByte();return this.position++,r},readBytes(r,e){this.assertReadLimit(),this._touch();let t=this.inspectBytes(r);return this.position+=e??r,t},readUint8(){this.assertReadLimit(),this._touch();let r=this.inspectUint8();return this.position+=1,r},readUint16(){this.assertReadLimit(),this._touch();let r=this.inspectUint16();return this.position+=2,r},readUint24(){this.assertReadLimit(),this._touch();let r=this.inspectUint24();return this.position+=3,r},readUint32(){this.assertReadLimit(),this._touch();let r=this.inspectUint32();return this.position+=4,r},get remaining(){return this.bytes.length-this.position},setPosition(r){let e=this.position;return this.assertPosition(r),this.position=r,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let r=this.getReadCount();this.positionReadCount.set(this.position,r+1),r>0&&this.recursiveReadCount++}}});function d0(r,e={}){typeof e.size<"u"&&jr(r,{size:e.size});let t=ft(r,e);return Nt(t,e)}function h0(r,e={}){let t=r;if(typeof e.size<"u"&&(jr(t,{size:e.size}),t=wr(t)),t.length>1||t[0]>1)throw new tp(t);return!!t[0]}function Xi(r,e={}){typeof e.size<"u"&&jr(r,{size:e.size});let t=ft(r,e);return Zt(t,e)}function g0(r,e={}){let t=r;return typeof e.size<"u"&&(jr(t,{size:e.size}),t=wr(t,{dir:"right"})),new TextDecoder().decode(t)}var b0=X(()=>{"use strict";Mc();Ls();Er();Ne()});function Po(r,e){let t=typeof e=="string"?rr(e):e,i=Cs(t);if(bt(t)===0&&r.length>0)throw new ni;if(bt(e)&&bt(e)<32)throw new ws({data:typeof e=="string"?e:ft(e),params:r,size:bt(e)});let n=0,s=[];for(let a=0;a<r.length;++a){let c=r[a];i.setPosition(n);let[u,p]=Rs(i,c,{staticPosition:0});n+=p,s.push(u)}return s}function Rs(r,e,{staticPosition:t}){let i=hp(e.type);if(i){let[n,s]=i;return bw(r,{...e,type:s},{length:n,staticPosition:t})}if(e.type==="tuple")return vw(r,e,{staticPosition:t});if(e.type==="address")return gw(r);if(e.type==="bool")return yw(r);if(e.type.startsWith("bytes"))return xw(r,e,{staticPosition:t});if(e.type.startsWith("uint")||e.type.startsWith("int"))return _w(r,e);if(e.type==="string")return ww(r,{staticPosition:t});throw new Xu(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function gw(r){let e=r.readBytes(32);return[_n(ft(lg(e,-20))),32]}function bw(r,e,{length:t,staticPosition:i}){if(!t){let a=Xi(r.readBytes(gg)),c=i+a,u=c+y0;r.setPosition(c);let p=Xi(r.readBytes(y0)),f=Uc(e),d=0,h=[];for(let b=0;b<p;++b){r.setPosition(u+(f?b*32:d));let[w,v]=Rs(r,e,{staticPosition:u});d+=v,h.push(w)}return r.setPosition(i+32),[h,32]}if(Uc(e)){let a=Xi(r.readBytes(gg)),c=i+a,u=[];for(let p=0;p<t;++p){r.setPosition(c+p*32);let[f]=Rs(r,e,{staticPosition:c});u.push(f)}return r.setPosition(i+32),[u,32]}let n=0,s=[];for(let a=0;a<t;++a){let[c,u]=Rs(r,e,{staticPosition:i+n});n+=u,s.push(c)}return[s,n]}function yw(r){return[h0(r.readBytes(32),{size:32}),32]}function xw(r,e,{staticPosition:t}){let[i,n]=e.type.split("bytes");if(!n){let a=Xi(r.readBytes(32));r.setPosition(t+a);let c=Xi(r.readBytes(32));if(c===0)return r.setPosition(t+32),["0x",32];let u=r.readBytes(c);return r.setPosition(t+32),[ft(u),32]}return[ft(r.readBytes(Number.parseInt(n),32)),32]}function _w(r,e){let t=e.type.startsWith("int"),i=Number.parseInt(e.type.split("int")[1]||"256"),n=r.readBytes(32);return[i>48?d0(n,{signed:t}):Xi(n,{signed:t}),32]}function vw(r,e,{staticPosition:t}){let i=e.components.length===0||e.components.some(({name:a})=>!a),n=i?[]:{},s=0;if(Uc(e)){let a=Xi(r.readBytes(gg)),c=t+a;for(let u=0;u<e.components.length;++u){let p=e.components[u];r.setPosition(c+s);let[f,d]=Rs(r,p,{staticPosition:c});s+=d,n[i?u:p?.name]=f}return r.setPosition(t+32),[n,32]}for(let a=0;a<e.components.length;++a){let c=e.components[a],[u,p]=Rs(r,c,{staticPosition:t});n[i?a:c?.name]=u,s+=p}return[n,s]}function ww(r,{staticPosition:e}){let t=Xi(r.readBytes(32)),i=e+t;r.setPosition(i);let n=Xi(r.readBytes(32));if(n===0)return r.setPosition(e+32),["",32];let s=r.readBytes(n,32),a=g0(wr(s));return r.setPosition(e+32),[a,32]}function Uc(r){let{type:e}=r;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return r.components?.some(Uc);let t=hp(r.type);return!!(t&&Uc({...r,type:t[1]}))}var y0,gg,wp=X(()=>{"use strict";tr();Bo();vp();Si();Oo();Ls();b0();pr();Ne();Gn();y0=32,gg=32});function Ep(r){let{abi:e,data:t}=r,i=vn(t,0,4);if(i==="0x")throw new ni;let s=[...e||[],m0,f0].find(a=>a.type==="error"&&i===Ts(Mr(a)));if(!s)throw new Es(i,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Po(s.inputs,vn(t,4)):void 0,errorName:s.name}}var bg=X(()=>{"use strict";xp();tr();Oo();gp();wp();Ro()});var dt,Br=X(()=>{"use strict";dt=(r,e,t)=>JSON.stringify(r,(i,n)=>{let s=typeof n=="bigint"?n.toString():n;return typeof e=="function"?e(i,s):s},t)});function yg({abiItem:r,args:e,includeFunctionName:t=!0,includeName:i=!1}){if("name"in r&&"inputs"in r&&r.inputs)return`${t?r.name:""}(${r.inputs.map((n,s)=>`${i&&n.name?`${n.name}: `:""}${typeof e[s]=="object"?dt(e[s]):e[s]}`).join(", ")})`}var x0=X(()=>{"use strict";Br()});var _0,v0,xg=X(()=>{"use strict";_0={gwei:9,wei:18},v0={ether:-9,wei:9}});function No(r,e){let t=r.toString(),i=t.startsWith("-");i&&(t=t.slice(1)),t=t.padStart(e,"0");let[n,s]=[t.slice(0,t.length-e),t.slice(t.length-e)];return s=s.replace(/(0+)$/,""),`${i?"-":""}${n||"0"}${s?`.${s}`:""}`}var Ip=X(()=>{"use strict"});function Ms(r,e="wei"){return No(r,_0[e])}var Sp=X(()=>{"use strict";xg();Ip()});function nr(r,e="wei"){return No(r,v0[e])}var Ds=X(()=>{"use strict";xg();Ip()});function w0(r){return r.reduce((e,{slot:t,value:i})=>`${e}        ${t}: ${i}
`,"")}function E0(r){return r.reduce((e,{address:t,...i})=>{let n=`${e}    ${t}:
`;return i.nonce&&(n+=`      nonce: ${i.nonce}
`),i.balance&&(n+=`      balance: ${i.balance}
`),i.code&&(n+=`      code: ${i.code}
`),i.state&&(n+=`      state:
`,n+=w0(i.state)),i.stateDiff&&(n+=`      stateDiff:
`,n+=w0(i.stateDiff)),n},`  State Override:
`).slice(0,-1)}var Lp,Tp,_g=X(()=>{"use strict";rt();Lp=class extends P{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}},Tp=class extends P{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}});function Fo(r){let e=Object.entries(r).map(([i,n])=>n===void 0||n===!1?null:[i,n]).filter(Boolean),t=e.reduce((i,[n])=>Math.max(i,n.length),0);return e.map(([i,n])=>`  ${`${i}:`.padEnd(t+1)}  ${n}`).join(`
`)}var Ap,kp,Cp,Rp,Mp,Bs,Os,Dp,Mi=X(()=>{"use strict";Sp();Ds();rt();Ap=class extends P{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}},kp=class extends P{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}},Cp=class extends P{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Fo(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}},Rp=class extends P{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}},Mp=class extends P{constructor(e,{account:t,docsPath:i,chain:n,data:s,gas:a,gasPrice:c,maxFeePerGas:u,maxPriorityFeePerGas:p,nonce:f,to:d,value:h}){let b=Fo({chain:n&&`${n?.name} (id: ${n?.id})`,from:t?.address,to:d,value:typeof h<"u"&&`${Ms(h)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:a,gasPrice:typeof c<"u"&&`${nr(c)} gwei`,maxFeePerGas:typeof u<"u"&&`${nr(u)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${nr(p)} gwei`,nonce:f});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",b].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}},Bs=class extends P{constructor({blockHash:e,blockNumber:t,blockTag:i,hash:n,index:s}){let a="Transaction";i&&s!==void 0&&(a=`Transaction at block time "${i}" at index "${s}"`),e&&s!==void 0&&(a=`Transaction at block hash "${e}" at index "${s}"`),t&&s!==void 0&&(a=`Transaction at block number "${t}" at index "${s}"`),n&&(a=`Transaction with hash "${n}"`),super(`${a} could not be found.`,{name:"TransactionNotFoundError"})}},Os=class extends P{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}},Dp=class extends P{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}});var I0,Uo,Bp=X(()=>{"use strict";I0=r=>r,Uo=r=>r});var Ps,Op,Ho,Pp,Np,Qi,$n=X(()=>{"use strict";ir();xp();bg();Ro();x0();As();Sp();Ds();tr();rt();_g();Mi();Bp();Ps=class extends P{constructor(e,{account:t,docsPath:i,chain:n,data:s,gas:a,gasPrice:c,maxFeePerGas:u,maxPriorityFeePerGas:p,nonce:f,to:d,value:h,stateOverride:b}){let w=t?at(t):void 0,v=Fo({from:w?.address,to:d,value:typeof h<"u"&&`${Ms(h)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:a,gasPrice:typeof c<"u"&&`${nr(c)} gwei`,maxFeePerGas:typeof u<"u"&&`${nr(u)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${nr(p)} gwei`,nonce:f});b&&(v+=`
${E0(b)}`),super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",v].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}},Op=class extends P{constructor(e,{abi:t,args:i,contractAddress:n,docsPath:s,functionName:a,sender:c}){let u=qi({abi:t,args:i,name:a}),p=u?yg({abiItem:u,args:i,includeFunctionName:!1,includeName:!1}):void 0,f=u?Mr(u,{includeName:!0}):void 0,d=Fo({address:n&&I0(n),function:f,args:p&&p!=="()"&&`${[...Array(a?.length??0).keys()].map(()=>" ").join("")}${p}`,sender:c});super(e.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=i,this.cause=e,this.contractAddress=n,this.functionName=a,this.sender=c}},Ho=class extends P{constructor({abi:e,data:t,functionName:i,message:n}){let s,a,c,u;if(t&&t!=="0x")try{a=Ep({abi:e,data:t});let{abiItem:f,errorName:d,args:h}=a;if(d==="Error")u=h[0];else if(d==="Panic"){let[b]=h;u=yp[b]}else{let b=f?Mr(f,{includeName:!0}):void 0,w=f&&h?yg({abiItem:f,args:h,includeFunctionName:!1,includeName:!1}):void 0;c=[b?`Error: ${b}`:"",w&&w!=="()"?`       ${[...Array(d?.length??0).keys()].map(()=>" ").join("")}${w}`:""]}}catch(f){s=f}else n&&(u=n);let p;s instanceof Es&&(p=s.signature,c=[`Unable to decode signature "${p}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${p}.`]),super(u&&u!=="execution reverted"||p?[`The contract function "${i}" reverted with the following ${p?"signature":"reason"}:`,u||p].join(`
`):`The contract function "${i}" reverted.`,{cause:s,metaMessages:c,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.raw=t,this.reason=u,this.signature=p}},Pp=class extends P{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}},Np=class extends P{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}},Qi=class extends P{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}});var ci,Kn,Hc,zo=X(()=>{"use strict";Br();rt();Bp();ci=class extends P{constructor({body:e,cause:t,details:i,headers:n,status:s,url:a}){super("HTTP request failed.",{cause:t,details:i,metaMessages:[s&&`Status: ${s}`,`URL: ${Uo(a)}`,e&&`Request body: ${dt(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=n,this.status=s,this.url=a}},Kn=class extends P{constructor({body:e,error:t,url:i}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${Uo(i)}`,`Request body: ${dt(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}},Hc=class extends P{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Uo(t)}`,`Request body: ${dt(e)}`],name:"TimeoutError"})}}});var Ew,Sr,qn,Ns,Fs,Us,Hs,wn,Zi,zs,js,Vs,Yn,jo,Gs,Vo,Ws,$s,Ks,qs,Ys,Fp,zc=X(()=>{"use strict";rt();zo();Ew=-1,Sr=class extends P{constructor(e,{code:t,docsPath:i,metaMessages:n,name:s,shortMessage:a}){super(a,{cause:e,docsPath:i,metaMessages:n||e?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof Kn?e.code:t??Ew}},qn=class extends Sr{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}},Ns=class r extends Sr{constructor(e){super(e,{code:r.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}};Object.defineProperty(Ns,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});Fs=class r extends Sr{constructor(e){super(e,{code:r.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}};Object.defineProperty(Fs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});Us=class r extends Sr{constructor(e,{method:t}={}){super(e,{code:r.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}};Object.defineProperty(Us,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});Hs=class r extends Sr{constructor(e){super(e,{code:r.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(Hs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});wn=class r extends Sr{constructor(e){super(e,{code:r.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}};Object.defineProperty(wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});Zi=class r extends Sr{constructor(e){super(e,{code:r.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(Zi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});zs=class r extends Sr{constructor(e){super(e,{code:r.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}};Object.defineProperty(zs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});js=class r extends Sr{constructor(e){super(e,{code:r.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}};Object.defineProperty(js,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});Vs=class r extends Sr{constructor(e){super(e,{code:r.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}};Object.defineProperty(Vs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});Yn=class r extends Sr{constructor(e,{method:t}={}){super(e,{code:r.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}};Object.defineProperty(Yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});jo=class r extends Sr{constructor(e){super(e,{code:r.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}};Object.defineProperty(jo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});Gs=class r extends Sr{constructor(e){super(e,{code:r.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}};Object.defineProperty(Gs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});Vo=class r extends qn{constructor(e){super(e,{code:r.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(Vo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});Ws=class r extends qn{constructor(e){super(e,{code:r.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}};Object.defineProperty(Ws,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});$s=class r extends qn{constructor(e,{method:t}={}){super(e,{code:r.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}};Object.defineProperty($s,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});Ks=class r extends qn{constructor(e){super(e,{code:r.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}};Object.defineProperty(Ks,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});qs=class r extends qn{constructor(e){super(e,{code:r.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}};Object.defineProperty(qs,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});Ys=class r extends qn{constructor(e){super(e,{code:r.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(Ys,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});Fp=class extends Sr{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}});function Sw(r,e,t,i){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,i);let n=BigInt(32),s=BigInt(4294967295),a=Number(t>>n&s),c=Number(t&s),u=i?4:0,p=i?0:4;r.setUint32(e+u,a,i),r.setUint32(e+p,c,i)}function L0(r,e,t){return r&e^~r&t}function T0(r,e,t){return r&e^r&t^e&t}var Up,A0=X(()=>{"use strict";Bc();Do();Up=class extends Hn{constructor(e,t,i,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ap(this.buffer)}update(e){xn(this);let{view:t,buffer:i,blockLen:n}=this;e=zn(e);let s=e.length;for(let a=0;a<s;){let c=Math.min(n-this.pos,s-a);if(c===n){let u=ap(e);for(;n<=s-a;a+=n)this.process(u,a);continue}i.set(e.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){xn(this),op(e,this),this.finished=!0;let{buffer:t,view:i,blockLen:n,isLE:s}=this,{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(i,0),a=0);for(let d=a;d<n;d++)t[d]=0;Sw(i,n-8,BigInt(this.length*8),s),this.process(i,0);let c=ap(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=u/4,f=this.get();if(p>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<p;d++)c.setUint32(4*d,f[d],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let i=e.slice(0,t);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:i,length:n,finished:s,destroyed:a,pos:c}=this;return e.length=n,e.pos=c,e.finished=s,e.destroyed=a,n%t&&e.buffer.set(i),e}}});var Lw,Xn,Qn,vg,Go,wg=X(()=>{"use strict";A0();Do();Lw=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qn=new Uint32Array(64),vg=class extends Up{constructor(){super(64,32,8,!1),this.A=Xn[0]|0,this.B=Xn[1]|0,this.C=Xn[2]|0,this.D=Xn[3]|0,this.E=Xn[4]|0,this.F=Xn[5]|0,this.G=Xn[6]|0,this.H=Xn[7]|0}get(){let{A:e,B:t,C:i,D:n,E:s,F:a,G:c,H:u}=this;return[e,t,i,n,s,a,c,u]}set(e,t,i,n,s,a,c,u){this.A=e|0,this.B=t|0,this.C=i|0,this.D=n|0,this.E=s|0,this.F=a|0,this.G=c|0,this.H=u|0}process(e,t){for(let d=0;d<16;d++,t+=4)Qn[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){let h=Qn[d-15],b=Qn[d-2],w=ki(h,7)^ki(h,18)^h>>>3,v=ki(b,17)^ki(b,19)^b>>>10;Qn[d]=v+Qn[d-7]+w+Qn[d-16]|0}let{A:i,B:n,C:s,D:a,E:c,F:u,G:p,H:f}=this;for(let d=0;d<64;d++){let h=ki(c,6)^ki(c,11)^ki(c,25),b=f+h+L0(c,u,p)+Lw[d]+Qn[d]|0,v=(ki(i,2)^ki(i,13)^ki(i,22))+T0(i,n,s)|0;f=p,p=u,u=c,c=a+b|0,a=s,s=n,n=i,i=b+v|0}i=i+this.A|0,n=n+this.B|0,s=s+this.C|0,a=a+this.D|0,c=c+this.E|0,u=u+this.F|0,p=p+this.G|0,f=f+this.H|0,this.set(i,n,s,a,c,u,p,f)}roundClean(){Qn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Go=cp(()=>new vg)});var Hp,Eg,k0=X(()=>{"use strict";Bc();Do();Hp=class extends Hn{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Dy(e);let i=zn(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,s=new Uint8Array(n);s.set(i.length>n?e.create().update(i).digest():i);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(e){return xn(this),this.iHash.update(e),this}digestInto(e){xn(this),Un(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:i,finished:n,destroyed:s,blockLen:a,outputLen:c}=this;return e=e,e.finished=n,e.destroyed=s,e.blockLen=a,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Eg=(r,e,t)=>new Hp(r,e).update(t).digest();Eg.create=(r,e)=>new Hp(r,e)});var kg={};Wh(kg,{aInRange:()=>Ji,abool:()=>Wo,abytes:()=>li,bitGet:()=>Rw,bitLen:()=>Tg,bitMask:()=>Vc,bitSet:()=>Mw,bytesToHex:()=>$o,bytesToNumberBE:()=>Vr,bytesToNumberLE:()=>Vp,concatBytes:()=>Lr,createHmacDrbg:()=>Ag,ensureBytes:()=>or,equalBytes:()=>Cw,hexToBytes:()=>qo,hexToNumber:()=>Lg,inRange:()=>Jn,isBytes:()=>Zn,memoized:()=>Wp,notImplemented:()=>Bw,numberToBytesBE:()=>Di,numberToBytesLE:()=>Gp,numberToHexUnpadded:()=>Ko,numberToVarBytesBE:()=>kw,utf8ToBytes:()=>jc,validateObject:()=>en});function Zn(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function li(r){if(!Zn(r))throw new Error("Uint8Array expected")}function Wo(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}function $o(r){li(r);let e="";for(let t=0;t<r.length;t++)e+=Aw[r[t]];return e}function Ko(r){let e=r.toString(16);return e.length&1?"0"+e:e}function Lg(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?zp:BigInt("0x"+r)}function C0(r){if(r>=En._0&&r<=En._9)return r-En._0;if(r>=En.A&&r<=En.F)return r-(En.A-10);if(r>=En.a&&r<=En.f)return r-(En.a-10)}function qo(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);let e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(t);for(let n=0,s=0;n<t;n++,s+=2){let a=C0(r.charCodeAt(s)),c=C0(r.charCodeAt(s+1));if(a===void 0||c===void 0){let u=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}i[n]=a*16+c}return i}function Vr(r){return Lg($o(r))}function Vp(r){return li(r),Lg($o(Uint8Array.from(r).reverse()))}function Di(r,e){return qo(r.toString(16).padStart(e*2,"0"))}function Gp(r,e){return Di(r,e).reverse()}function kw(r){return qo(Ko(r))}function or(r,e,t){let i;if(typeof e=="string")try{i=qo(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(Zn(e))i=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");let n=i.length;if(typeof t=="number"&&n!==t)throw new Error(r+" of length "+t+" expected, got "+n);return i}function Lr(...r){let e=0;for(let i=0;i<r.length;i++){let n=r[i];li(n),e+=n.length}let t=new Uint8Array(e);for(let i=0,n=0;i<r.length;i++){let s=r[i];t.set(s,n),n+=s.length}return t}function Cw(r,e){if(r.length!==e.length)return!1;let t=0;for(let i=0;i<r.length;i++)t|=r[i]^e[i];return t===0}function jc(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Jn(r,e,t){return Ig(r)&&Ig(e)&&Ig(t)&&e<=r&&r<t}function Ji(r,e,t,i){if(!Jn(e,t,i))throw new Error("expected valid "+r+": "+t+" <= n < "+i+", got "+e)}function Tg(r){let e;for(e=0;r>zp;r>>=jp,e+=1);return e}function Rw(r,e){return r>>BigInt(e)&jp}function Mw(r,e,t){return r|(t?jp:zp)<<BigInt(e)}function Ag(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let i=Sg(r),n=Sg(r),s=0,a=()=>{i.fill(1),n.fill(0),s=0},c=(...d)=>t(n,i,...d),u=(d=Sg())=>{n=c(R0([0]),d),i=c(),d.length!==0&&(n=c(R0([1]),d),i=c())},p=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0,h=[];for(;d<e;){i=c();let b=i.slice();h.push(b),d+=i.length}return Lr(...h)};return(d,h)=>{a(),u(d);let b;for(;!(b=h(p()));)u();return a(),b}}function en(r,e,t={}){let i=(n,s,a)=>{let c=Dw[s];if(typeof c!="function")throw new Error("invalid validator function");let u=r[n];if(!(a&&u===void 0)&&!c(u,r))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+u)};for(let[n,s]of Object.entries(e))i(n,s,!1);for(let[n,s]of Object.entries(t))i(n,s,!0);return r}function Wp(r){let e=new WeakMap;return(t,...i)=>{let n=e.get(t);if(n!==void 0)return n;let s=r(t,...i);return e.set(t,s),s}}var zp,jp,Tw,Aw,En,Ig,Vc,Sg,R0,Dw,Bw,Yo=X(()=>{"use strict";zp=BigInt(0),jp=BigInt(1),Tw=BigInt(2);Aw=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));En={_0:48,_9:57,A:65,F:70,a:97,f:102};Ig=r=>typeof r=="bigint"&&zp<=r;Vc=r=>(Tw<<BigInt(r-1))-jp,Sg=r=>new Uint8Array(r),R0=r=>Uint8Array.from(r);Dw={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Zn(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};Bw=()=>{throw new Error("not implemented")}});function Yt(r,e){let t=r%e;return t>=sr?t:e+t}function Fw(r,e,t){if(e<sr)throw new Error("invalid exponent, negatives unsupported");if(t<=sr)throw new Error("invalid modulus");if(t===zt)return sr;let i=zt;for(;e>sr;)e&zt&&(i=i*r%t),r=r*r%t,e>>=zt;return i}function ti(r,e,t){let i=r;for(;e-- >sr;)i*=i,i%=t;return i}function $p(r,e){if(r===sr)throw new Error("invert: expected non-zero number");if(e<=sr)throw new Error("invert: expected positive modulus, got "+e);let t=Yt(r,e),i=e,n=sr,s=zt,a=zt,c=sr;for(;t!==sr;){let p=i/t,f=i%t,d=n-a*p,h=s-c*p;i=t,t=f,n=a,s=c,a=d,c=h}if(i!==zt)throw new Error("invert: does not exist");return Yt(n,e)}function Uw(r){let e=(r-zt)/Xo,t,i,n;for(t=r-zt,i=0;t%Xo===sr;t/=Xo,i++);for(n=Xo;n<r&&Fw(n,e,r)!==r-zt;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){let a=(r+zt)/Cg;return function(u,p){let f=u.pow(p,a);if(!u.eql(u.sqr(f),p))throw new Error("Cannot find square root");return f}}let s=(t+zt)/Xo;return function(c,u){if(c.pow(u,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let p=i,f=c.pow(c.mul(c.ONE,n),t),d=c.pow(u,s),h=c.pow(u,t);for(;!c.eql(h,c.ONE);){if(c.eql(h,c.ZERO))return c.ZERO;let b=1;for(let v=c.sqr(h);b<p&&!c.eql(v,c.ONE);b++)v=c.sqr(v);let w=c.pow(f,zt<<BigInt(p-b-1));f=c.sqr(w),d=c.mul(d,w),h=c.mul(h,f),p=b}return d}}function Hw(r){if(r%Cg===Ow){let e=(r+zt)/Cg;return function(i,n){let s=i.pow(n,e);if(!i.eql(i.sqr(s),n))throw new Error("Cannot find square root");return s}}if(r%D0===M0){let e=(r-M0)/D0;return function(i,n){let s=i.mul(n,Xo),a=i.pow(s,e),c=i.mul(n,a),u=i.mul(i.mul(c,Xo),a),p=i.mul(c,i.sub(u,i.ONE));if(!i.eql(i.sqr(p),n))throw new Error("Cannot find square root");return p}}return r%Nw,Uw(r)}function Kp(r){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=zw.reduce((i,n)=>(i[n]="function",i),e);return en(r,t)}function jw(r,e,t){if(t<sr)throw new Error("invalid exponent, negatives unsupported");if(t===sr)return r.ONE;if(t===zt)return e;let i=r.ONE,n=e;for(;t>sr;)t&zt&&(i=r.mul(i,n)),n=r.sqr(n),t>>=zt;return i}function Vw(r,e){let t=new Array(e.length),i=e.reduce((s,a,c)=>r.is0(a)?s:(t[c]=s,r.mul(s,a)),r.ONE),n=r.inv(i);return e.reduceRight((s,a,c)=>r.is0(a)?s:(t[c]=r.mul(s,t[c]),r.mul(s,a)),n),t}function Rg(r,e){let t=e!==void 0?e:r.toString(2).length,i=Math.ceil(t/8);return{nBitLength:t,nByteLength:i}}function qp(r,e,t=!1,i={}){if(r<=sr)throw new Error("invalid field: expected ORDER > 0, got "+r);let{nBitLength:n,nByteLength:s}=Rg(r,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a,c=Object.freeze({ORDER:r,isLE:t,BITS:n,BYTES:s,MASK:Vc(n),ZERO:sr,ONE:zt,create:u=>Yt(u,r),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return sr<=u&&u<r},is0:u=>u===sr,isOdd:u=>(u&zt)===zt,neg:u=>Yt(-u,r),eql:(u,p)=>u===p,sqr:u=>Yt(u*u,r),add:(u,p)=>Yt(u+p,r),sub:(u,p)=>Yt(u-p,r),mul:(u,p)=>Yt(u*p,r),pow:(u,p)=>jw(c,u,p),div:(u,p)=>Yt(u*$p(p,r),r),sqrN:u=>u*u,addN:(u,p)=>u+p,subN:(u,p)=>u-p,mulN:(u,p)=>u*p,inv:u=>$p(u,r),sqrt:i.sqrt||(u=>(a||(a=Hw(r)),a(c,u))),invertBatch:u=>Vw(c,u),cmov:(u,p,f)=>f?p:u,toBytes:u=>t?Gp(u,s):Di(u,s),fromBytes:u=>{if(u.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+u.length);return t?Vp(u):Vr(u)}});return Object.freeze(c)}function B0(r){if(typeof r!="bigint")throw new Error("field order must be bigint");let e=r.toString(2).length;return Math.ceil(e/8)}function Mg(r){let e=B0(r);return e+Math.ceil(e/2)}function O0(r,e,t=!1){let i=r.length,n=B0(e),s=Mg(e);if(i<16||i<s||i>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+i);let a=t?Vp(r):Vr(r),c=Yt(a,e-zt)+zt;return t?Gp(c,n):Di(c,n)}var sr,zt,Xo,Ow,Cg,M0,D0,Pw,Nw,zw,Gc=X(()=>{"use strict";Yo();sr=BigInt(0),zt=BigInt(1),Xo=BigInt(2),Ow=BigInt(3),Cg=BigInt(4),M0=BigInt(5),D0=BigInt(8),Pw=BigInt(9),Nw=BigInt(16);zw=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function Dg(r,e){let t=e.negate();return r?t:e}function N0(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function Bg(r,e){N0(r,e);let t=Math.ceil(e/r)+1,i=2**(r-1);return{windows:t,windowSize:i}}function Gw(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,i)=>{if(!(t instanceof e))throw new Error("invalid point at index "+i)})}function Ww(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,i)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+i)})}function Pg(r){return F0.get(r)||1}function U0(r,e){return{constTimeNegate:Dg,hasPrecomputes(t){return Pg(t)!==1},unsafeLadder(t,i,n=r.ZERO){let s=t;for(;i>P0;)i&Yp&&(n=n.add(s)),s=s.double(),i>>=Yp;return n},precomputeWindow(t,i){let{windows:n,windowSize:s}=Bg(i,e),a=[],c=t,u=c;for(let p=0;p<n;p++){u=c,a.push(u);for(let f=1;f<s;f++)u=u.add(c),a.push(u);c=u.double()}return a},wNAF(t,i,n){let{windows:s,windowSize:a}=Bg(t,e),c=r.ZERO,u=r.BASE,p=BigInt(2**t-1),f=2**t,d=BigInt(t);for(let h=0;h<s;h++){let b=h*a,w=Number(n&p);n>>=d,w>a&&(w-=f,n+=Yp);let v=b,_=b+Math.abs(w)-1,T=h%2!==0,M=w<0;w===0?u=u.add(Dg(T,i[v])):c=c.add(Dg(M,i[_]))}return{p:c,f:u}},wNAFUnsafe(t,i,n,s=r.ZERO){let{windows:a,windowSize:c}=Bg(t,e),u=BigInt(2**t-1),p=2**t,f=BigInt(t);for(let d=0;d<a;d++){let h=d*c;if(n===P0)break;let b=Number(n&u);if(n>>=f,b>c&&(b-=p,n+=Yp),b===0)continue;let w=i[h+Math.abs(b)-1];b<0&&(w=w.negate()),s=s.add(w)}return s},getPrecomputes(t,i,n){let s=Og.get(i);return s||(s=this.precomputeWindow(i,t),t!==1&&Og.set(i,n(s))),s},wNAFCached(t,i,n){let s=Pg(t);return this.wNAF(s,this.getPrecomputes(s,t,n),i)},wNAFCachedUnsafe(t,i,n,s){let a=Pg(t);return a===1?this.unsafeLadder(t,i,s):this.wNAFUnsafe(a,this.getPrecomputes(a,t,n),i,s)},setWindowSize(t,i){N0(i,e),F0.set(t,i),Og.delete(t)}}}function H0(r,e,t,i){if(Gw(t,r),Ww(i,e),t.length!==i.length)throw new Error("arrays of points and scalars must have equal length");let n=r.ZERO,s=Tg(BigInt(t.length)),a=s>12?s-3:s>4?s-2:s?2:1,c=(1<<a)-1,u=new Array(c+1).fill(n),p=Math.floor((e.BITS-1)/a)*a,f=n;for(let d=p;d>=0;d-=a){u.fill(n);for(let b=0;b<i.length;b++){let w=i[b],v=Number(w>>BigInt(d)&BigInt(c));u[v]=u[v].add(t[b])}let h=n;for(let b=u.length-1,w=n;b>0;b--)w=w.add(u[b]),h=h.add(w);if(f=f.add(h),d!==0)for(let b=0;b<a;b++)f=f.double()}return f}function Ng(r){return Kp(r.Fp),en(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Rg(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}var P0,Yp,Og,F0,z0=X(()=>{"use strict";Gc();Yo();P0=BigInt(0),Yp=BigInt(1);Og=new WeakMap,F0=new WeakMap});function j0(r){r.lowS!==void 0&&Wo("lowS",r.lowS),r.prehash!==void 0&&Wo("prehash",r.prehash)}function $w(r){let e=Ng(r);en(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:i,a:n}=e;if(t){if(!i.eql(n,i.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}function Yw(r){let e=$w(r),{Fp:t}=e,i=qp(e.n,e.nBitLength),n=e.toBytes||((v,_,T)=>{let M=_.toAffine();return Lr(Uint8Array.from([4]),t.toBytes(M.x),t.toBytes(M.y))}),s=e.fromBytes||(v=>{let _=v.subarray(1),T=t.fromBytes(_.subarray(0,t.BYTES)),M=t.fromBytes(_.subarray(t.BYTES,2*t.BYTES));return{x:T,y:M}});function a(v){let{a:_,b:T}=e,M=t.sqr(v),D=t.mul(M,v);return t.add(t.add(D,t.mul(v,_)),T)}if(!t.eql(t.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function c(v){return Jn(v,kt,e.n)}function u(v){let{allowedPrivateKeyLengths:_,nByteLength:T,wrapPrivateKey:M,n:D}=e;if(_&&typeof v!="bigint"){if(Zn(v)&&(v=$o(v)),typeof v!="string"||!_.includes(v.length))throw new Error("invalid private key");v=v.padStart(T*2,"0")}let F;try{F=typeof v=="bigint"?v:Vr(or("private key",v,T))}catch{throw new Error("invalid private key, expected hex or "+T+" bytes, got "+typeof v)}return M&&(F=Yt(F,D)),Ji("private key",F,kt,D),F}function p(v){if(!(v instanceof h))throw new Error("ProjectivePoint expected")}let f=Wp((v,_)=>{let{px:T,py:M,pz:D}=v;if(t.eql(D,t.ONE))return{x:T,y:M};let F=v.is0();_==null&&(_=F?t.ONE:t.inv(D));let O=t.mul(T,_),W=t.mul(M,_),V=t.mul(D,_);if(F)return{x:t.ZERO,y:t.ZERO};if(!t.eql(V,t.ONE))throw new Error("invZ was invalid");return{x:O,y:W}}),d=Wp(v=>{if(v.is0()){if(e.allowInfinityPoint&&!t.is0(v.py))return;throw new Error("bad point: ZERO")}let{x:_,y:T}=v.toAffine();if(!t.isValid(_)||!t.isValid(T))throw new Error("bad point: x or y not FE");let M=t.sqr(T),D=a(_);if(!t.eql(M,D))throw new Error("bad point: equation left != right");if(!v.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(_,T,M){if(this.px=_,this.py=T,this.pz=M,_==null||!t.isValid(_))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(M==null||!t.isValid(M))throw new Error("z required");Object.freeze(this)}static fromAffine(_){let{x:T,y:M}=_||{};if(!_||!t.isValid(T)||!t.isValid(M))throw new Error("invalid affine point");if(_ instanceof h)throw new Error("projective point not allowed");let D=F=>t.eql(F,t.ZERO);return D(T)&&D(M)?h.ZERO:new h(T,M,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){let T=t.invertBatch(_.map(M=>M.pz));return _.map((M,D)=>M.toAffine(T[D])).map(h.fromAffine)}static fromHex(_){let T=h.fromAffine(s(or("pointHex",_)));return T.assertValidity(),T}static fromPrivateKey(_){return h.BASE.multiply(u(_))}static msm(_,T){return H0(h,i,_,T)}_setWindowSize(_){w.setWindowSize(this,_)}assertValidity(){d(this)}hasEvenY(){let{y:_}=this.toAffine();if(t.isOdd)return!t.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){p(_);let{px:T,py:M,pz:D}=this,{px:F,py:O,pz:W}=_,V=t.eql(t.mul(T,W),t.mul(F,D)),ee=t.eql(t.mul(M,W),t.mul(O,D));return V&&ee}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){let{a:_,b:T}=e,M=t.mul(T,Xp),{px:D,py:F,pz:O}=this,W=t.ZERO,V=t.ZERO,ee=t.ZERO,Q=t.mul(D,D),ve=t.mul(F,F),be=t.mul(O,O),j=t.mul(D,F);return j=t.add(j,j),ee=t.mul(D,O),ee=t.add(ee,ee),W=t.mul(_,ee),V=t.mul(M,be),V=t.add(W,V),W=t.sub(ve,V),V=t.add(ve,V),V=t.mul(W,V),W=t.mul(j,W),ee=t.mul(M,ee),be=t.mul(_,be),j=t.sub(Q,be),j=t.mul(_,j),j=t.add(j,ee),ee=t.add(Q,Q),Q=t.add(ee,Q),Q=t.add(Q,be),Q=t.mul(Q,j),V=t.add(V,Q),be=t.mul(F,O),be=t.add(be,be),Q=t.mul(be,j),W=t.sub(W,Q),ee=t.mul(be,ve),ee=t.add(ee,ee),ee=t.add(ee,ee),new h(W,V,ee)}add(_){p(_);let{px:T,py:M,pz:D}=this,{px:F,py:O,pz:W}=_,V=t.ZERO,ee=t.ZERO,Q=t.ZERO,ve=e.a,be=t.mul(e.b,Xp),j=t.mul(T,F),qe=t.mul(M,O),Z=t.mul(D,W),ye=t.add(T,M),re=t.add(F,O);ye=t.mul(ye,re),re=t.add(j,qe),ye=t.sub(ye,re),re=t.add(T,D);let C=t.add(F,W);return re=t.mul(re,C),C=t.add(j,Z),re=t.sub(re,C),C=t.add(M,D),V=t.add(O,W),C=t.mul(C,V),V=t.add(qe,Z),C=t.sub(C,V),Q=t.mul(ve,re),V=t.mul(be,Z),Q=t.add(V,Q),V=t.sub(qe,Q),Q=t.add(qe,Q),ee=t.mul(V,Q),qe=t.add(j,j),qe=t.add(qe,j),Z=t.mul(ve,Z),re=t.mul(be,re),qe=t.add(qe,Z),Z=t.sub(j,Z),Z=t.mul(ve,Z),re=t.add(re,Z),j=t.mul(qe,re),ee=t.add(ee,j),j=t.mul(C,re),V=t.mul(ye,V),V=t.sub(V,j),j=t.mul(ye,qe),Q=t.mul(C,Q),Q=t.add(Q,j),new h(V,ee,Q)}subtract(_){return this.add(_.negate())}is0(){return this.equals(h.ZERO)}wNAF(_){return w.wNAFCached(this,_,h.normalizeZ)}multiplyUnsafe(_){let{endo:T,n:M}=e;Ji("scalar",_,Bi,M);let D=h.ZERO;if(_===Bi)return D;if(this.is0()||_===kt)return this;if(!T||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,_,h.normalizeZ);let{k1neg:F,k1:O,k2neg:W,k2:V}=T.splitScalar(_),ee=D,Q=D,ve=this;for(;O>Bi||V>Bi;)O&kt&&(ee=ee.add(ve)),V&kt&&(Q=Q.add(ve)),ve=ve.double(),O>>=kt,V>>=kt;return F&&(ee=ee.negate()),W&&(Q=Q.negate()),Q=new h(t.mul(Q.px,T.beta),Q.py,Q.pz),ee.add(Q)}multiply(_){let{endo:T,n:M}=e;Ji("scalar",_,kt,M);let D,F;if(T){let{k1neg:O,k1:W,k2neg:V,k2:ee}=T.splitScalar(_),{p:Q,f:ve}=this.wNAF(W),{p:be,f:j}=this.wNAF(ee);Q=w.constTimeNegate(O,Q),be=w.constTimeNegate(V,be),be=new h(t.mul(be.px,T.beta),be.py,be.pz),D=Q.add(be),F=ve.add(j)}else{let{p:O,f:W}=this.wNAF(_);D=O,F=W}return h.normalizeZ([D,F])[0]}multiplyAndAddUnsafe(_,T,M){let D=h.BASE,F=(W,V)=>V===Bi||V===kt||!W.equals(D)?W.multiplyUnsafe(V):W.multiply(V),O=F(this,T).add(F(_,M));return O.is0()?void 0:O}toAffine(_){return f(this,_)}isTorsionFree(){let{h:_,isTorsionFree:T}=e;if(_===kt)return!0;if(T)return T(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:_,clearCofactor:T}=e;return _===kt?this:T?T(h,this):this.multiplyUnsafe(e.h)}toRawBytes(_=!0){return Wo("isCompressed",_),this.assertValidity(),n(h,this,_)}toHex(_=!0){return Wo("isCompressed",_),$o(this.toRawBytes(_))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);let b=e.nBitLength,w=U0(h,e.endo?Math.ceil(b/2):b);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:u,weierstrassEquation:a,isWithinCurveOrder:c}}function Xw(r){let e=Ng(r);return en(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function G0(r){let e=Xw(r),{Fp:t,n:i}=e,n=t.BYTES+1,s=2*t.BYTES+1;function a(Z){return Yt(Z,i)}function c(Z){return $p(Z,i)}let{ProjectivePoint:u,normPrivateKeyToScalar:p,weierstrassEquation:f,isWithinCurveOrder:d}=Yw({...e,toBytes(Z,ye,re){let C=ye.toAffine(),Fe=t.toBytes(C.x),ie=Lr;return Wo("isCompressed",re),re?ie(Uint8Array.from([ye.hasEvenY()?2:3]),Fe):ie(Uint8Array.from([4]),Fe,t.toBytes(C.y))},fromBytes(Z){let ye=Z.length,re=Z[0],C=Z.subarray(1);if(ye===n&&(re===2||re===3)){let Fe=Vr(C);if(!Jn(Fe,kt,t.ORDER))throw new Error("Point is not on curve");let ie=f(Fe),Ce;try{Ce=t.sqrt(ie)}catch(St){let ct=St instanceof Error?": "+St.message:"";throw new Error("Point is not on curve"+ct)}let ht=(Ce&kt)===kt;return(re&1)===1!==ht&&(Ce=t.neg(Ce)),{x:Fe,y:Ce}}else if(ye===s&&re===4){let Fe=t.fromBytes(C.subarray(0,t.BYTES)),ie=t.fromBytes(C.subarray(t.BYTES,2*t.BYTES));return{x:Fe,y:ie}}else{let Fe=n,ie=s;throw new Error("invalid Point, expected length of "+Fe+", or uncompressed "+ie+", got "+ye)}}}),h=Z=>$o(Di(Z,e.nByteLength));function b(Z){let ye=i>>kt;return Z>ye}function w(Z){return b(Z)?a(-Z):Z}let v=(Z,ye,re)=>Vr(Z.slice(ye,re));class _{constructor(ye,re,C){this.r=ye,this.s=re,this.recovery=C,this.assertValidity()}static fromCompact(ye){let re=e.nByteLength;return ye=or("compactSignature",ye,re*2),new _(v(ye,0,re),v(ye,re,2*re))}static fromDER(ye){let{r:re,s:C}=In.toSig(or("DER",ye));return new _(re,C)}assertValidity(){Ji("r",this.r,kt,i),Ji("s",this.s,kt,i)}addRecoveryBit(ye){return new _(this.r,this.s,ye)}recoverPublicKey(ye){let{r:re,s:C,recovery:Fe}=this,ie=W(or("msgHash",ye));if(Fe==null||![0,1,2,3].includes(Fe))throw new Error("recovery id invalid");let Ce=Fe===2||Fe===3?re+e.n:re;if(Ce>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let ht=Fe&1?"03":"02",ut=u.fromHex(ht+h(Ce)),St=c(Ce),ct=a(-ie*St),xr=a(C*St),hr=u.BASE.multiplyAndAddUnsafe(ut,ct,xr);if(!hr)throw new Error("point at infinify");return hr.assertValidity(),hr}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return qo(this.toDERHex())}toDERHex(){return In.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return qo(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}let T={isValidPrivateKey(Z){try{return p(Z),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{let Z=Mg(e.n);return O0(e.randomBytes(Z),e.n)},precompute(Z=8,ye=u.BASE){return ye._setWindowSize(Z),ye.multiply(BigInt(3)),ye}};function M(Z,ye=!0){return u.fromPrivateKey(Z).toRawBytes(ye)}function D(Z){let ye=Zn(Z),re=typeof Z=="string",C=(ye||re)&&Z.length;return ye?C===n||C===s:re?C===2*n||C===2*s:Z instanceof u}function F(Z,ye,re=!0){if(D(Z))throw new Error("first arg must be private key");if(!D(ye))throw new Error("second arg must be public key");return u.fromHex(ye).multiply(p(Z)).toRawBytes(re)}let O=e.bits2int||function(Z){if(Z.length>8192)throw new Error("input is too large");let ye=Vr(Z),re=Z.length*8-e.nBitLength;return re>0?ye>>BigInt(re):ye},W=e.bits2int_modN||function(Z){return a(O(Z))},V=Vc(e.nBitLength);function ee(Z){return Ji("num < 2^"+e.nBitLength,Z,Bi,V),Di(Z,e.nByteLength)}function Q(Z,ye,re=ve){if(["recovered","canonical"].some(Yr=>Yr in re))throw new Error("sign() legacy options not supported");let{hash:C,randomBytes:Fe}=e,{lowS:ie,prehash:Ce,extraEntropy:ht}=re;ie==null&&(ie=!0),Z=or("msgHash",Z),j0(re),Ce&&(Z=or("prehashed msgHash",C(Z)));let ut=W(Z),St=p(ye),ct=[ee(St),ee(ut)];if(ht!=null&&ht!==!1){let Yr=ht===!0?Fe(t.BYTES):ht;ct.push(or("extraEntropy",Yr))}let xr=Lr(...ct),hr=ut;function Mt(Yr){let Xr=O(Yr);if(!d(Xr))return;let mn=c(Xr),_r=u.BASE.multiply(Xr).toAffine(),ur=a(_r.x);if(ur===Bi)return;let Hr=a(mn*a(hr+ur*St));if(Hr===Bi)return;let Ot=(_r.x===ur?0:2)|Number(_r.y&kt),gr=Hr;return ie&&b(Hr)&&(gr=w(Hr),Ot^=1),new _(ur,gr,Ot)}return{seed:xr,k2sig:Mt}}let ve={lowS:e.lowS,prehash:!1},be={lowS:e.lowS,prehash:!1};function j(Z,ye,re=ve){let{seed:C,k2sig:Fe}=Q(Z,ye,re),ie=e;return Ag(ie.hash.outputLen,ie.nByteLength,ie.hmac)(C,Fe)}u.BASE._setWindowSize(8);function qe(Z,ye,re,C=be){let Fe=Z;ye=or("msgHash",ye),re=or("publicKey",re);let{lowS:ie,prehash:Ce,format:ht}=C;if(j0(C),"strict"in C)throw new Error("options.strict was renamed to lowS");if(ht!==void 0&&ht!=="compact"&&ht!=="der")throw new Error("format must be compact or der");let ut=typeof Fe=="string"||Zn(Fe),St=!ut&&!ht&&typeof Fe=="object"&&Fe!==null&&typeof Fe.r=="bigint"&&typeof Fe.s=="bigint";if(!ut&&!St)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ct,xr;try{if(St&&(ct=new _(Fe.r,Fe.s)),ut){try{ht!=="compact"&&(ct=_.fromDER(Fe))}catch(Ot){if(!(Ot instanceof In.Err))throw Ot}!ct&&ht!=="der"&&(ct=_.fromCompact(Fe))}xr=u.fromHex(re)}catch{return!1}if(!ct||ie&&ct.hasHighS())return!1;Ce&&(ye=e.hash(ye));let{r:hr,s:Mt}=ct,Yr=W(ye),Xr=c(Mt),mn=a(Yr*Xr),_r=a(hr*Xr),ur=u.BASE.multiplyAndAddUnsafe(xr,mn,_r)?.toAffine();return ur?a(ur.x)===hr:!1}return{CURVE:e,getPublicKey:M,getSharedSecret:F,sign:j,verify:qe,ProjectivePoint:u,Signature:_,utils:T}}function Qw(r,e){let t=r.ORDER,i=Bi;for(let w=t-kt;w%eo===Bi;w/=eo)i+=kt;let n=i,s=eo<<n-kt-kt,a=s*eo,c=(t-kt)/a,u=(c-kt)/eo,p=a-kt,f=s,d=r.pow(e,c),h=r.pow(e,(c+kt)/eo),b=(w,v)=>{let _=d,T=r.pow(v,p),M=r.sqr(T);M=r.mul(M,v);let D=r.mul(w,M);D=r.pow(D,u),D=r.mul(D,T),T=r.mul(D,v),M=r.mul(D,w);let F=r.mul(M,T);D=r.pow(F,f);let O=r.eql(D,r.ONE);T=r.mul(M,h),D=r.mul(F,_),M=r.cmov(T,M,O),F=r.cmov(D,F,O);for(let W=n;W>kt;W--){let V=W-eo;V=eo<<V-kt;let ee=r.pow(F,V),Q=r.eql(ee,r.ONE);T=r.mul(M,_),_=r.mul(_,_),ee=r.mul(F,_),M=r.cmov(T,M,Q),F=r.cmov(ee,F,Q)}return{isValid:O,value:M}};if(r.ORDER%V0===Xp){let w=(r.ORDER-Xp)/V0,v=r.sqrt(r.neg(e));b=(_,T)=>{let M=r.sqr(T),D=r.mul(_,T);M=r.mul(M,D);let F=r.pow(M,w);F=r.mul(F,D);let O=r.mul(F,v),W=r.mul(r.sqr(F),T),V=r.eql(W,_),ee=r.cmov(O,F,V);return{isValid:V,value:ee}}}return b}function W0(r,e){if(Kp(r),!r.isValid(e.A)||!r.isValid(e.B)||!r.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let t=Qw(r,e.Z);if(!r.isOdd)throw new Error("Fp.isOdd is not implemented!");return i=>{let n,s,a,c,u,p,f,d;n=r.sqr(i),n=r.mul(n,e.Z),s=r.sqr(n),s=r.add(s,n),a=r.add(s,r.ONE),a=r.mul(a,e.B),c=r.cmov(e.Z,r.neg(s),!r.eql(s,r.ZERO)),c=r.mul(c,e.A),s=r.sqr(a),p=r.sqr(c),u=r.mul(p,e.A),s=r.add(s,u),s=r.mul(s,a),p=r.mul(p,c),u=r.mul(p,e.B),s=r.add(s,u),f=r.mul(n,a);let{isValid:h,value:b}=t(s,p);d=r.mul(n,i),d=r.mul(d,b),f=r.cmov(f,a,h),d=r.cmov(d,b,h);let w=r.isOdd(i)===r.isOdd(d);return d=r.cmov(r.neg(d),d,w),f=r.div(f,c),{x:f,y:d}}}var Kw,qw,Fg,In,Bi,kt,eo,Xp,V0,Ug=X(()=>{"use strict";z0();Gc();Yo();Yo();({bytesToNumberBE:Kw,hexToBytes:qw}=kg),Fg=class extends Error{constructor(e=""){super(e)}},In={Err:Fg,_tlv:{encode:(r,e)=>{let{Err:t}=In;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");let i=e.length/2,n=Ko(i);if(n.length/2&128)throw new t("tlv.encode: long form length too big");let s=i>127?Ko(n.length/2|128):"";return Ko(r)+s+n+e},decode(r,e){let{Err:t}=In,i=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[i++]!==r)throw new t("tlv.decode: wrong tlv");let n=e[i++],s=!!(n&128),a=0;if(!s)a=n;else{let u=n&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");let p=e.subarray(i,i+u);if(p.length!==u)throw new t("tlv.decode: length bytes not complete");if(p[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(let f of p)a=a<<8|f;if(i+=u,a<128)throw new t("tlv.decode(long): not minimal encoding")}let c=e.subarray(i,i+a);if(c.length!==a)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(i+a)}}},_int:{encode(r){let{Err:e}=In;if(r<Bi)throw new e("integer: negative integers are not allowed");let t=Ko(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){let{Err:e}=In;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Kw(r)}},toSig(r){let{Err:e,_int:t,_tlv:i}=In,n=typeof r=="string"?qw(r):r;li(n);let{v:s,l:a}=i.decode(48,n);if(a.length)throw new e("invalid signature: left bytes after parsing");let{v:c,l:u}=i.decode(2,s),{v:p,l:f}=i.decode(2,u);if(f.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(p)}},hexFromSig(r){let{_tlv:e,_int:t}=In,i=e.encode(2,t.encode(r.r)),n=e.encode(2,t.encode(r.s)),s=i+n;return e.encode(48,s)}},Bi=BigInt(0),kt=BigInt(1),eo=BigInt(2),Xp=BigInt(3),V0=BigInt(4)});function Zw(r){return{hash:r,hmac:(e,...t)=>Eg(r,e,Vy(...t)),randomBytes:lp}}function $0(r,e){let t=i=>G0({...r,...Zw(i)});return{...t(e),create:t}}var K0=X(()=>{"use strict";k0();Do();Ug();});function to(r,e){if(Wc(r),Wc(e),r<0||r>=1<<8*e)throw new Error("invalid I2OSP input: "+r);let t=Array.from({length:e}).fill(0);for(let i=e-1;i>=0;i--)t[i]=r&255,r>>>=8;return new Uint8Array(t)}function eE(r,e){let t=new Uint8Array(r.length);for(let i=0;i<r.length;i++)t[i]=r[i]^e[i];return t}function Wc(r){if(!Number.isSafeInteger(r))throw new Error("number expected")}function tE(r,e,t,i){li(r),li(e),Wc(t),e.length>255&&(e=i(Lr(jc("H2C-OVERSIZE-DST-"),e)));let{outputLen:n,blockLen:s}=i,a=Math.ceil(t/n);if(t>65535||a>255)throw new Error("expand_message_xmd: invalid lenInBytes");let c=Lr(e,to(e.length,1)),u=to(0,s),p=to(t,2),f=new Array(a),d=i(Lr(u,r,p,to(0,1),c));f[0]=i(Lr(d,to(1,1),c));for(let b=1;b<=a;b++){let w=[eE(d,f[b-1]),to(b+1,1),c];f[b]=i(Lr(...w))}return Lr(...f).slice(0,t)}function rE(r,e,t,i,n){if(li(r),li(e),Wc(t),e.length>255){let s=Math.ceil(2*i/8);e=n.create({dkLen:s}).update(jc("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return n.create({dkLen:t}).update(r).update(to(t,2)).update(e).update(to(e.length,1)).digest()}function q0(r,e,t){en(t,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:i,k:n,m:s,hash:a,expand:c,DST:u}=t;li(r),Wc(e);let p=typeof u=="string"?jc(u):u,f=i.toString(2).length,d=Math.ceil((f+n)/8),h=e*s*d,b;if(c==="xmd")b=tE(r,p,h,a);else if(c==="xof")b=rE(r,p,h,n,a);else if(c==="_internal_pass")b=r;else throw new Error('expand must be "xmd" or "xof"');let w=new Array(e);for(let v=0;v<e;v++){let _=new Array(s);for(let T=0;T<s;T++){let M=d*(T+v*s),D=b.subarray(M,M+d);_[T]=Yt(Jw(D),i)}w[v]=_}return w}function Y0(r,e){let t=e.map(i=>Array.from(i).reverse());return(i,n)=>{let[s,a,c,u]=t.map(p=>p.reduce((f,d)=>r.add(r.mul(f,i),d)));return i=r.div(s,a),n=r.mul(n,r.div(c,u)),{x:i,y:n}}}function X0(r,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(i,n){let s=q0(i,2,{...t,DST:t.DST,...n}),a=r.fromAffine(e(s[0])),c=r.fromAffine(e(s[1])),u=a.add(c).clearCofactor();return u.assertValidity(),u},encodeToCurve(i,n){let s=q0(i,1,{...t,DST:t.encodeDST,...n}),a=r.fromAffine(e(s[0])).clearCofactor();return a.assertValidity(),a},mapToCurve(i){if(!Array.isArray(i))throw new Error("mapToCurve: expected array of bigints");for(let s of i)if(typeof s!="bigint")throw new Error("mapToCurve: expected array of bigints");let n=r.fromAffine(e(i)).clearCofactor();return n.assertValidity(),n}}}var Jw,Q0=X(()=>{"use strict";Gc();Yo();Jw=Vr});var s1={};Wh(s1,{encodeToCurve:()=>uE,hashToCurve:()=>lE,schnorr:()=>sE,secp256k1:()=>Sn});function e1(r){let e=qc,t=BigInt(3),i=BigInt(6),n=BigInt(11),s=BigInt(22),a=BigInt(23),c=BigInt(44),u=BigInt(88),p=r*r*r%e,f=p*p*r%e,d=ti(f,t,e)*f%e,h=ti(d,t,e)*f%e,b=ti(h,Zp,e)*p%e,w=ti(b,n,e)*b%e,v=ti(w,s,e)*w%e,_=ti(v,c,e)*v%e,T=ti(_,u,e)*_%e,M=ti(T,c,e)*v%e,D=ti(M,t,e)*f%e,F=ti(D,a,e)*w%e,O=ti(F,i,e)*p%e,W=ti(O,Zp,e);if(!ro.eql(ro.sqr(W),r))throw new Error("Cannot find square root");return W}function Jp(r,...e){let t=J0[r];if(t===void 0){let i=Go(Uint8Array.from(r,n=>n.charCodeAt(0)));t=Lr(i,i),J0[r]=t}return Go(Lr(t,...e))}function jg(r){let e=Sn.utils.normPrivateKeyToScalar(r),t=Gg.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:Kc(-e),bytes:Vg(t)}}function r1(r){Ji("x",r,$c,qc);let e=Hg(r*r),t=Hg(e*r+BigInt(7)),i=e1(t);i%Zp!==t1&&(i=Hg(-i));let n=new Gg(r,i,$c);return n.assertValidity(),n}function i1(...r){return Kc(Xs(Jp("BIP0340/challenge",...r)))}function nE(r){return jg(r).bytes}function oE(r,e,t=lp(32)){let i=or("message",r),{bytes:n,scalar:s}=jg(e),a=or("auxRand",t,32),c=zg(s^Xs(Jp("BIP0340/aux",a))),u=Jp("BIP0340/nonce",c,n,i),p=Kc(Xs(u));if(p===t1)throw new Error("sign failed: k is zero");let{bytes:f,scalar:d}=jg(p),h=i1(f,n,i),b=new Uint8Array(64);if(b.set(f,0),b.set(zg(Kc(d+h*s)),32),!n1(b,i,n))throw new Error("sign: Invalid signature produced");return b}function n1(r,e,t){let i=or("signature",r,64),n=or("message",e),s=or("publicKey",t,32);try{let a=r1(Xs(s)),c=Xs(i.subarray(0,32));if(!Jn(c,$c,qc))return!1;let u=Xs(i.subarray(32,64));if(!Jn(u,$c,Qp))return!1;let p=i1(zg(c),Vg(a),n),f=iE(a,u,Kc(-p));return!(!f||!f.hasEvenY()||f.toAffine().x!==c)}catch{return!1}}var qc,Qp,$c,Zp,Z0,ro,Sn,t1,J0,Vg,zg,Hg,Kc,Gg,iE,Xs,sE,aE,cE,o1,lE,uE,em=X(()=>{"use strict";wg();Do();K0();Q0();Gc();Yo();Ug();qc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Qp=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$c=BigInt(1),Zp=BigInt(2),Z0=(r,e)=>(r+e/Zp)/e;ro=qp(qc,void 0,void 0,{sqrt:e1}),Sn=$0({a:BigInt(0),b:BigInt(7),Fp:ro,n:Qp,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{let e=Qp,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-$c*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,a=BigInt("0x100000000000000000000000000000000"),c=Z0(s*r,e),u=Z0(-i*r,e),p=Yt(r-c*t-u*n,e),f=Yt(-c*i-u*s,e),d=p>a,h=f>a;if(d&&(p=e-p),h&&(f=e-f),p>a||f>a)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:d,k1:p,k2neg:h,k2:f}}}},Go),t1=BigInt(0),J0={};Vg=r=>r.toRawBytes(!0).slice(1),zg=r=>Di(r,32),Hg=r=>Yt(r,qc),Kc=r=>Yt(r,Qp),Gg=Sn.ProjectivePoint,iE=(r,e,t)=>Gg.BASE.multiplyAndAddUnsafe(r,e,t);Xs=Vr;sE=(()=>({getPublicKey:nE,sign:oE,verify:n1,utils:{randomPrivateKey:Sn.utils.randomPrivateKey,lift_x:r1,pointToBytes:Vg,numberToBytesBE:Di,bytesToNumberBE:Vr,taggedHash:Jp,mod:Yt}}))(),aE=(()=>Y0(ro,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(r=>r.map(e=>BigInt(e)))))(),cE=(()=>W0(ro,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:ro.create(BigInt("-11"))}))(),o1=(()=>X0(Sn.ProjectivePoint,r=>{let{x:e,y:t}=cE(ro.create(r[0]));return aE(e,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:ro.ORDER,m:1,k:128,expand:"xmd",hash:Go}))(),lE=(()=>o1.hashToCurve)(),uE=(()=>o1.encodeToCurve)()});var Ln,ui,Qs,Zs,Js,ea,ta,ra,ia,na,tn,pi,io=X(()=>{"use strict";Ds();rt();Ln=class extends P{constructor({cause:e,message:t}={}){let i=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${i?`with reason: ${i}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}};Object.defineProperty(Ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Ln,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});ui=class extends P{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${nr(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}};Object.defineProperty(ui,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});Qs=class extends P{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${nr(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}};Object.defineProperty(Qs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});Zs=class extends P{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}};Object.defineProperty(Zs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});Js=class extends P{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}};Object.defineProperty(Js,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});ea=class extends P{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}};Object.defineProperty(ea,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});ta=class extends P{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}};Object.defineProperty(ta,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});ra=class extends P{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}};Object.defineProperty(ra,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});ia=class extends P{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}};Object.defineProperty(ia,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});na=class extends P{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}};Object.defineProperty(na,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});tn=class extends P{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:i}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${nr(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${i?` = ${nr(i)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}};Object.defineProperty(tn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});pi=class extends P{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}});function no(r,e){let t=(r.details||"").toLowerCase(),i=r instanceof P?r.walk(n=>n?.code===Ln.code):r;return i instanceof P?new Ln({cause:r,message:i.details}):Ln.nodeMessage.test(t)?new Ln({cause:r,message:r.details}):ui.nodeMessage.test(t)?new ui({cause:r,maxFeePerGas:e?.maxFeePerGas}):Qs.nodeMessage.test(t)?new Qs({cause:r,maxFeePerGas:e?.maxFeePerGas}):Zs.nodeMessage.test(t)?new Zs({cause:r,nonce:e?.nonce}):Js.nodeMessage.test(t)?new Js({cause:r,nonce:e?.nonce}):ea.nodeMessage.test(t)?new ea({cause:r,nonce:e?.nonce}):ta.nodeMessage.test(t)?new ta({cause:r}):ra.nodeMessage.test(t)?new ra({cause:r,gas:e?.gas}):ia.nodeMessage.test(t)?new ia({cause:r,gas:e?.gas}):na.nodeMessage.test(t)?new na({cause:r}):tn.nodeMessage.test(t)?new tn({cause:r,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new pi({cause:r})}var Yc=X(()=>{"use strict";rt();io()});function oo(r,{format:e}){if(!e)return{};let t={};function i(s){let a=Object.keys(s);for(let c of a)c in r&&(t[c]=r[c]),s[c]&&typeof s[c]=="object"&&!Array.isArray(s[c])&&i(s[c])}let n=e(r||{});return i(n),t}var Xc=X(()=>{"use strict"});function oa(r,e){return({exclude:t,format:i})=>({exclude:t,format:n=>{let s=e(n);if(t)for(let a of t)delete s[a];return{...s,...i(n)}},type:r})}var nm=X(()=>{"use strict"});function mi(r){let e={};return typeof r.authorizationList<"u"&&(e.authorizationList=dE(r.authorizationList)),typeof r.accessList<"u"&&(e.accessList=r.accessList),typeof r.blobVersionedHashes<"u"&&(e.blobVersionedHashes=r.blobVersionedHashes),typeof r.blobs<"u"&&(typeof r.blobs[0]!="string"?e.blobs=r.blobs.map(t=>ft(t)):e.blobs=r.blobs),typeof r.data<"u"&&(e.data=r.data),typeof r.from<"u"&&(e.from=r.from),typeof r.gas<"u"&&(e.gas=de(r.gas)),typeof r.gasPrice<"u"&&(e.gasPrice=de(r.gasPrice)),typeof r.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=de(r.maxFeePerBlobGas)),typeof r.maxFeePerGas<"u"&&(e.maxFeePerGas=de(r.maxFeePerGas)),typeof r.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=de(r.maxPriorityFeePerGas)),typeof r.nonce<"u"&&(e.nonce=de(r.nonce)),typeof r.to<"u"&&(e.to=r.to),typeof r.type<"u"&&(e.type=fE[r.type]),typeof r.value<"u"&&(e.value=de(r.value)),e}function dE(r){return r.map(e=>({address:e.address,r:e.r?de(BigInt(e.r)):e.r,s:e.s?de(BigInt(e.s)):e.s,chainId:de(e.chainId),nonce:de(e.nonce),...typeof e.yParity<"u"?{yParity:de(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:de(e.v)}:{}}))}var fE,Qo=X(()=>{"use strict";Ne();fE={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"}});function f1(r){if(!(!r||r.length===0))return r.reduce((e,{slot:t,value:i})=>{if(t.length!==66)throw new Rc({size:t.length,targetSize:66,type:"hex"});if(i.length!==66)throw new Rc({size:i.length,targetSize:66,type:"hex"});return e[t]=i,e},{})}function hE(r){let{balance:e,nonce:t,state:i,stateDiff:n,code:s}=r,a={};if(s!==void 0&&(a.code=s),e!==void 0&&(a.balance=de(e)),t!==void 0&&(a.nonce=de(t)),i!==void 0&&(a.state=f1(i)),n!==void 0){if(a.state)throw new Tp;a.stateDiff=f1(n)}return a}function sa(r){if(!r)return;let e={};for(let{address:t,...i}of r){if(!At(t,{strict:!1}))throw new Bt({address:t});if(e[t])throw new Lp({address:t});e[t]=hE(i)}return e}var om=X(()=>{"use strict";$i();Ju();_g();Ri();Ne()});var FD,UD,HD,zD,jD,VD,GD,WD,$D,KD,qD,YD,XD,QD,ZD,JD,e6,t6,r6,i6,n6,o6,s6,a6,c6,l6,u6,p6,m6,f6,d6,h6,g6,b6,y6,x6,_6,v6,w6,E6,I6,S6,L6,T6,A6,k6,C6,R6,M6,D6,B6,O6,P6,N6,F6,U6,H6,z6,j6,V6,G6,W6,$6,K6,q6,Y6,X6,Q6,Z6,J6,eB,tB,rB,iB,nB,oB,sB,aB,cB,lB,uB,pB,mB,fB,dB,hB,gB,bB,yB,xB,_B,vB,wB,EB,IB,aa,Wg=X(()=>{"use strict";FD=2n**(8n-1n)-1n,UD=2n**(16n-1n)-1n,HD=2n**(24n-1n)-1n,zD=2n**(32n-1n)-1n,jD=2n**(40n-1n)-1n,VD=2n**(48n-1n)-1n,GD=2n**(56n-1n)-1n,WD=2n**(64n-1n)-1n,$D=2n**(72n-1n)-1n,KD=2n**(80n-1n)-1n,qD=2n**(88n-1n)-1n,YD=2n**(96n-1n)-1n,XD=2n**(104n-1n)-1n,QD=2n**(112n-1n)-1n,ZD=2n**(120n-1n)-1n,JD=2n**(128n-1n)-1n,e6=2n**(136n-1n)-1n,t6=2n**(144n-1n)-1n,r6=2n**(152n-1n)-1n,i6=2n**(160n-1n)-1n,n6=2n**(168n-1n)-1n,o6=2n**(176n-1n)-1n,s6=2n**(184n-1n)-1n,a6=2n**(192n-1n)-1n,c6=2n**(200n-1n)-1n,l6=2n**(208n-1n)-1n,u6=2n**(216n-1n)-1n,p6=2n**(224n-1n)-1n,m6=2n**(232n-1n)-1n,f6=2n**(240n-1n)-1n,d6=2n**(248n-1n)-1n,h6=2n**(256n-1n)-1n,g6=-(2n**(8n-1n)),b6=-(2n**(16n-1n)),y6=-(2n**(24n-1n)),x6=-(2n**(32n-1n)),_6=-(2n**(40n-1n)),v6=-(2n**(48n-1n)),w6=-(2n**(56n-1n)),E6=-(2n**(64n-1n)),I6=-(2n**(72n-1n)),S6=-(2n**(80n-1n)),L6=-(2n**(88n-1n)),T6=-(2n**(96n-1n)),A6=-(2n**(104n-1n)),k6=-(2n**(112n-1n)),C6=-(2n**(120n-1n)),R6=-(2n**(128n-1n)),M6=-(2n**(136n-1n)),D6=-(2n**(144n-1n)),B6=-(2n**(152n-1n)),O6=-(2n**(160n-1n)),P6=-(2n**(168n-1n)),N6=-(2n**(176n-1n)),F6=-(2n**(184n-1n)),U6=-(2n**(192n-1n)),H6=-(2n**(200n-1n)),z6=-(2n**(208n-1n)),j6=-(2n**(216n-1n)),V6=-(2n**(224n-1n)),G6=-(2n**(232n-1n)),W6=-(2n**(240n-1n)),$6=-(2n**(248n-1n)),K6=-(2n**(256n-1n)),q6=2n**8n-1n,Y6=2n**16n-1n,X6=2n**24n-1n,Q6=2n**32n-1n,Z6=2n**40n-1n,J6=2n**48n-1n,eB=2n**56n-1n,tB=2n**64n-1n,rB=2n**72n-1n,iB=2n**80n-1n,nB=2n**88n-1n,oB=2n**96n-1n,sB=2n**104n-1n,aB=2n**112n-1n,cB=2n**120n-1n,lB=2n**128n-1n,uB=2n**136n-1n,pB=2n**144n-1n,mB=2n**152n-1n,fB=2n**160n-1n,dB=2n**168n-1n,hB=2n**176n-1n,gB=2n**184n-1n,bB=2n**192n-1n,yB=2n**200n-1n,xB=2n**208n-1n,_B=2n**216n-1n,vB=2n**224n-1n,wB=2n**232n-1n,EB=2n**240n-1n,IB=2n**248n-1n,aa=2n**256n-1n});function Gr(r){let{account:e,gasPrice:t,maxFeePerGas:i,maxPriorityFeePerGas:n,to:s}=r,a=e?at(e):void 0;if(a&&!At(a.address))throw new Bt({address:a.address});if(s&&!At(s))throw new Bt({address:s});if(typeof t<"u"&&(typeof i<"u"||typeof n<"u"))throw new Ap;if(i&&i>aa)throw new ui({maxFeePerGas:i});if(n&&i&&n>i)throw new tn({maxFeePerGas:i,maxPriorityFeePerGas:n})}var so=X(()=>{"use strict";ir();Wg();$i();io();Mi();Ri()});function rn(r,e){if(!At(r,{strict:!1}))throw new Bt({address:r});if(!At(e,{strict:!1}))throw new Bt({address:e});return r.toLowerCase()===e.toLowerCase()}var ha=X(()=>{"use strict";$i();Ri()});function Wr(r){let{abi:e,args:t,functionName:i,data:n}=r,s=e[0];if(i){let c=qi({abi:e,args:t,name:i});if(!c)throw new Nn(i,{docsPath:Yg});s=c}if(s.type!=="function")throw new Nn(void 0,{docsPath:Yg});if(!s.outputs)throw new $u(s.name,{docsPath:Yg});let a=Po(s.outputs,n);if(a&&a.length>1)return a;if(a&&a.length===1)return a[0]}var Yg,lo=X(()=>{"use strict";tr();wp();As();Yg="/docs/contract/decodeFunctionResult"});var Zc,I1,bm,S1,Xg,Qg,Zg,Jo=X(()=>{"use strict";Zc=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],I1=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],bm=[...I1,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],S1=[...I1,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],Xg=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],Qg=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Zg=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}]});var L1,T1=X(()=>{"use strict";L1="0x82ad56cb"});var ym,A1,k1,xm=X(()=>{"use strict";ym="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",A1="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",k1="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"});var es,_m,vm,Jc,ts,el=X(()=>{"use strict";rt();es=class extends P{constructor({blockNumber:e,chain:t,contract:i}){super(`Chain "${t.name}" does not support contract "${i.name}".`,{metaMessages:["This could be due to any of the following:",...e&&i.blockCreated&&i.blockCreated>e?[`- The contract "${i.name}" was not deployed until block ${i.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${i.name}" configured.`]],name:"ChainDoesNotSupportContract"})}},_m=class extends P{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}},vm=class extends P{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}},Jc=class extends P{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}},ts=class extends P{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}});function rs(r){let{abi:e,args:t,bytecode:i}=r;if(!t||t.length===0)return i;let n=e.find(a=>"type"in a&&a.type==="constructor");if(!n)throw new zu({docsPath:Jg});if(!("inputs"in n))throw new Tc({docsPath:Jg});if(!n.inputs||n.inputs.length===0)throw new Tc({docsPath:Jg});let s=Jr(n.inputs,t);return Ir([i,s])}var Jg,wm=X(()=>{"use strict";tr();si();Gn();Jg="/docs/contract/encodeDeployData"});function di({blockNumber:r,chain:e,contract:t}){let i=e?.contracts?.[t];if(!i)throw new es({chain:e,contract:{name:t}});if(r&&i.blockCreated&&i.blockCreated>r)throw new es({blockNumber:r,chain:e,contract:{name:t,blockCreated:i.blockCreated}});return i.address}var is=X(()=>{"use strict";el()});function Em(r,{docsPath:e,...t}){let i=(()=>{let n=no(r,t);return n instanceof pi?r:n})();return new Ps(i,{docsPath:e,...t})}var eb=X(()=>{"use strict";$n();io();Yc()});function Im(){let r=()=>{},e=()=>{};return{promise:new Promise((i,n)=>{r=i,e=n}),resolve:r,reject:e}}var tb=X(()=>{"use strict"});function Sm({fn:r,id:e,shouldSplitBatch:t,wait:i=0,sort:n}){let s=async()=>{let f=u();a();let d=f.map(({args:h})=>h);d.length!==0&&r(d).then(h=>{n&&Array.isArray(h)&&h.sort(n);for(let b=0;b<f.length;b++){let{resolve:w}=f[b];w?.([h[b],h])}}).catch(h=>{for(let b=0;b<f.length;b++){let{reject:w}=f[b];w?.(h)}})},a=()=>rb.delete(e),c=()=>u().map(({args:f})=>f),u=()=>rb.get(e)||[],p=f=>rb.set(e,[...u(),f]);return{flush:a,async schedule(f){let{promise:d,resolve:h,reject:b}=Im();return t?.([...c(),f])&&s(),u().length>0?(p({args:f,resolve:h,reject:b}),d):(p({args:f,resolve:h,reject:b}),setTimeout(s,i),d)}}}var rb,ib=X(()=>{"use strict";tb();rb=new Map});var Lm,Tm,Am,C1=X(()=>{"use strict";Br();rt();Bp();Lm=class extends P{constructor({callbackSelector:e,cause:t,data:i,extraData:n,sender:s,urls:a}){super(t.shortMessage||"An error occurred while fetching for an offchain result.",{cause:t,metaMessages:[...t.metaMessages||[],t.metaMessages?.length?"":[],"Offchain Gateway Call:",a&&["  Gateway URL(s):",...a.map(c=>`    ${Uo(c)}`)],`  Sender: ${s}`,`  Data: ${i}`,`  Callback selector: ${e}`,`  Extra data: ${n}`].flat(),name:"OffchainLookupError"})}},Tm=class extends P{constructor({result:e,url:t}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${Uo(t)}`,`Response: ${dt(e)}`],name:"OffchainLookupResponseMalformedError"})}},Am=class extends P{constructor({sender:e,to:t}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${t}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}});var D1={};Wh(D1,{ccipRequest:()=>M1,offchainLookup:()=>wE,offchainLookupAbiItem:()=>R1,offchainLookupSignature:()=>vE});async function wE(r,{blockNumber:e,blockTag:t,data:i,to:n}){let{args:s}=Ep({data:i,abi:[R1]}),[a,c,u,p,f]=s,{ccipRead:d}=r,h=d&&typeof d?.request=="function"?d.request:M1;try{if(!rn(n,a))throw new Am({sender:a,to:n});let b=await h({data:u,sender:a,urls:c}),{data:w}=await nn(r,{blockNumber:e,blockTag:t,data:Dr([p,Jr([{type:"bytes"},{type:"bytes"}],[b,f])]),to:n});return w}catch(b){throw new Lm({callbackSelector:p,cause:b,data:i,extraData:f,sender:a,urls:c})}}async function M1({data:r,sender:e,urls:t}){let i=new Error("An unknown error occurred.");for(let n=0;n<t.length;n++){let s=t[n],a=s.includes("{data}")?"GET":"POST",c=a==="POST"?{data:r,sender:e}:void 0,u=a==="POST"?{"Content-Type":"application/json"}:{};try{let p=await fetch(s.replace("{sender}",e.toLowerCase()).replace("{data}",r),{body:JSON.stringify(c),headers:u,method:a}),f;if(p.headers.get("Content-Type")?.startsWith("application/json")?f=(await p.json()).data:f=await p.text(),!p.ok){i=new ci({body:c,details:f?.error?dt(f.error):p.statusText,headers:p.headers,status:p.status,url:s});continue}if(!qt(f)){i=new Tm({result:f,url:s});continue}return f}catch(p){i=new ci({body:c,details:p.message,url:s})}}throw i}var vE,R1,B1=X(()=>{"use strict";xa();C1();zo();bg();Gn();ha();si();Ii();Br();vE="0x556f1830",R1={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]}});async function nn(r,e){let{account:t=r.account,batch:i=!!r.batch?.multicall,blockNumber:n,blockTag:s="latest",accessList:a,blobs:c,code:u,data:p,factory:f,factoryData:d,gas:h,gasPrice:b,maxFeePerBlobGas:w,maxFeePerGas:v,maxPriorityFeePerGas:_,nonce:T,to:M,value:D,stateOverride:F,...O}=e,W=t?at(t):void 0;if(u&&(f||d))throw new P("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&M)throw new P("Cannot provide both `code` & `to` as parameters.");let V=u&&p,ee=f&&d&&M&&p,Q=V||ee,ve=(()=>V?SE({code:u,data:p}):ee?LE({data:p,factory:f,factoryData:d,to:M}):p)();try{Gr(e);let j=(n?de(n):void 0)||s,qe=sa(F),Z=r.chain?.formatters?.transactionRequest?.format,re=(Z||mi)({...oo(O,{format:Z}),from:W?.address,accessList:a,blobs:c,data:ve,gas:h,gasPrice:b,maxFeePerBlobGas:w,maxFeePerGas:v,maxPriorityFeePerGas:_,nonce:T,to:Q?void 0:M,value:D});if(i&&EE({request:re})&&!qe)try{return await IE(r,{...re,blockNumber:n,blockTag:s})}catch(Fe){if(!(Fe instanceof Jc)&&!(Fe instanceof es))throw Fe}let C=await r.request({method:"eth_call",params:qe?[re,j,qe]:[re,j]});return C==="0x"?{data:void 0}:{data:C}}catch(be){let j=TE(be),{offchainLookup:qe,offchainLookupSignature:Z}=await Promise.resolve().then(()=>(B1(),D1));if(r.ccipRead!==!1&&j?.slice(0,10)===Z&&M)return{data:await qe(r,{data:j,to:M})};throw Q&&j?.slice(0,10)==="0x101bb98d"?new Np({factory:f}):Em(be,{...e,account:W,chain:r.chain})}}function EE({request:r}){let{data:e,to:t,...i}=r;return!(!e||e.startsWith(L1)||!t||Object.values(i).filter(n=>typeof n<"u").length>0)}async function IE(r,e){let{batchSize:t=1024,wait:i=0}=typeof r.batch?.multicall=="object"?r.batch.multicall:{},{blockNumber:n,blockTag:s="latest",data:a,multicallAddress:c,to:u}=e,p=c;if(!p){if(!r.chain)throw new Jc;p=di({blockNumber:n,chain:r.chain,contract:"multicall3"})}let d=(n?de(n):void 0)||s,{schedule:h}=Sm({id:`${r.uid}.${d}`,wait:i,shouldSplitBatch(v){return v.reduce((T,{data:M})=>T+(M.length-2),0)>t*2},fn:async v=>{let _=v.map(D=>({allowFailure:!0,callData:D.data,target:D.to})),T=Ft({abi:Zc,args:[_],functionName:"aggregate3"}),M=await r.request({method:"eth_call",params:[{data:T,to:p},d]});return Wr({abi:Zc,args:[_],functionName:"aggregate3",data:M||"0x"})}}),[{returnData:b,success:w}]=await h({data:a,to:u});if(!w)throw new Qi({data:b});return b==="0x"?{data:void 0}:{data:b}}function SE(r){let{code:e,data:t}=r;return rs({abi:Nu(["constructor(bytes, bytes)"]),bytecode:ym,args:[e,t]})}function LE(r){let{data:e,factory:t,factoryData:i,to:n}=r;return rs({abi:Nu(["constructor(address, bytes, address, bytes)"]),bytecode:A1,args:[n,e,t,i]})}function TE(r){if(!(r instanceof P))return;let e=r.walk();return typeof e?.data=="object"?e.data?.data:e.data}var xa=X(()=>{"use strict";Uu();ir();Jo();T1();xm();rt();el();$n();lo();wm();ai();is();Ne();eb();Xc();Qo();ib();om();so()});var uv=Yb(yr=>{"use strict";var Cb=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,e,t){r!=Array.prototype&&r!=Object.prototype&&(r[e]=t.value)},ls=typeof window<"u"&&window===yr?yr:typeof global<"u"&&global!=null?global:yr;function NI(r,e){if(e){var t=ls;r=r.split(".");for(var i=0;i<r.length-1;i++){var n=r[i];n in t||(t[n]={}),t=t[n]}r=r[r.length-1],i=t[r],e=e(i),e!=i&&e!=null&&Cb(t,r,{configurable:!0,writable:!0,value:e})}}function FI(r){var e=0;return function(){return e<r.length?{done:!1,value:r[e++]}:{done:!0}}}function O_(){O_=function(){},ls.Symbol||(ls.Symbol=UI)}function P_(r,e){this.a=r,Cb(this,"description",{configurable:!0,writable:!0,value:e})}P_.prototype.toString=function(){return this.a};var UI=function(){function r(t){if(this instanceof r)throw new TypeError("Symbol is not a constructor");return new P_("jscomp_symbol_"+(t||"")+"_"+e++,t)}var e=0;return r}();function Rb(){O_();var r=ls.Symbol.iterator;r||(r=ls.Symbol.iterator=ls.Symbol("Symbol.iterator")),typeof Array.prototype[r]!="function"&&Cb(Array.prototype,r,{configurable:!0,writable:!0,value:function(){return HI(FI(this))}}),Rb=function(){}}function HI(r){return Rb(),r={next:r},r[ls.Symbol.iterator]=function(){return this},r}function zI(r,e){Rb(),r instanceof String&&(r+="");var t=0,i={next:function(){if(t<r.length){var n=t++;return{value:e(n,r[n]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}NI("Array.prototype.entries",function(r){return r||function(){return zI(this,function(e,t){return[e,t]})}});var jI=yr||self;function Ee(r,e,t){r=r.split("."),t=t||jI,r[0]in t||typeof t.execScript>"u"||t.execScript("var "+r[0]);for(var i;r.length&&(i=r.shift());)r.length||e===void 0?t[i]&&t[i]!==Object.prototype[i]?t=t[i]:t=t[i]={}:t[i]=e}function kn(r){var e=typeof r;if(e=="object")if(r){if(r instanceof Array)return"array";if(r instanceof Object)return e;var t=Object.prototype.toString.call(r);if(t=="[object Window]")return"object";if(t=="[object Array]"||typeof r.length=="number"&&typeof r.splice<"u"&&typeof r.propertyIsEnumerable<"u"&&!r.propertyIsEnumerable("splice"))return"array";if(t=="[object Function]"||typeof r.call<"u"&&typeof r.propertyIsEnumerable<"u"&&!r.propertyIsEnumerable("call"))return"function"}else return"null";else if(e=="function"&&typeof r.call>"u")return"object";return e}function C_(r){var e=typeof r;return e=="object"&&r!=null||e=="function"}function VI(r,e,t){Ee(r,e,t)}function GI(r,e){function t(){}t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}var R_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WI(r,e){for(var t,i,n=1;n<arguments.length;n++){i=arguments[n];for(t in i)r[t]=i[t];for(var s=0;s<R_.length;s++)t=R_[s],Object.prototype.hasOwnProperty.call(i,t)&&(r[t]=i[t])}}var $I=Array.prototype.forEach?function(r,e){Array.prototype.forEach.call(r,e,void 0)}:function(r,e){for(var t=r.length,i=typeof r=="string"?r.split(""):r,n=0;n<t;n++)n in i&&e.call(void 0,i[n],n,r)},xl=Array.prototype.map?function(r,e){return Array.prototype.map.call(r,e,void 0)}:function(r,e){for(var t=r.length,i=Array(t),n=typeof r=="string"?r.split(""):r,s=0;s<t;s++)s in n&&(i[s]=e.call(void 0,n[s],s,r));return i};function KI(r,e,t){return 2>=arguments.length?Array.prototype.slice.call(r,e):Array.prototype.slice.call(r,e,t)}function Bf(r,e,t,i){var n="Assertion failed";if(t){n+=": "+t;var s=i}else r&&(n+=": "+r,s=e);throw Error(n,s||[])}function z(r,e,t){for(var i=[],n=2;n<arguments.length;++n)i[n-2]=arguments[n];return r||Bf("",null,e,i),r}function qI(r,e,t){for(var i=[],n=2;n<arguments.length;++n)i[n-2]=arguments[n];typeof r!="string"&&Bf("Expected string but got %s: %s.",[kn(r),r],e,i)}function YI(r,e,t){for(var i=[],n=2;n<arguments.length;++n)i[n-2]=arguments[n];Array.isArray(r)||Bf("Expected array but got %s: %s.",[kn(r),r],e,i)}function ar(r,e){for(var t=[],i=1;i<arguments.length;++i)t[i-1]=arguments[i];throw Error("Failure"+(r?": "+r:""),t)}function Fi(r,e,t,i){for(var n=[],s=3;s<arguments.length;++s)n[s-3]=arguments[s];r instanceof e||Bf("Expected instanceof %s but got %s.",[M_(e),M_(r)],t,n)}function M_(r){return r instanceof Function?r.displayName||r.name||"unknown type name":r instanceof Object?r.constructor.displayName||r.constructor.name||Object.prototype.toString.call(r):r===null?"null":typeof r}function je(r,e){if(this.c=r,this.b=e,this.a={},this.arrClean=!0,0<this.c.length){for(r=0;r<this.c.length;r++){e=this.c[r];var t=e[0];this.a[t.toString()]=new N_(t,e[1])}this.arrClean=!0}}Ee("jspb.Map",je,void 0);je.prototype.g=function(){if(this.arrClean){if(this.b){var r=this.a,e;for(e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var t=r[e].a;t&&t.g()}}}else{for(this.c.length=0,r=go(this),r.sort(),e=0;e<r.length;e++){var i=this.a[r[e]];(t=i.a)&&t.g(),this.c.push([i.key,i.value])}this.arrClean=!0}return this.c};je.prototype.toArray=je.prototype.g;je.prototype.Mc=function(r,e){for(var t=this.g(),i=[],n=0;n<t.length;n++){var s=this.a[t[n][0].toString()];Ha(this,s);var a=s.a;a?(z(e),i.push([s.key,e(r,a)])):i.push([s.key,s.value])}return i};je.prototype.toObject=je.prototype.Mc;je.fromObject=function(r,e,t){e=new je([],e);for(var i=0;i<r.length;i++){var n=r[i][0],s=t(r[i][1]);e.set(n,s)}return e};function _l(r){this.a=0,this.b=r}_l.prototype.next=function(){return this.a<this.b.length?{done:!1,value:this.b[this.a++]}:{done:!0,value:void 0}};typeof Symbol<"u"&&(_l.prototype[Symbol.iterator]=function(){return this});je.prototype.Jb=function(){return go(this).length};je.prototype.getLength=je.prototype.Jb;je.prototype.clear=function(){this.a={},this.arrClean=!1};je.prototype.clear=je.prototype.clear;je.prototype.Cb=function(r){r=r.toString();var e=this.a.hasOwnProperty(r);return delete this.a[r],this.arrClean=!1,e};je.prototype.del=je.prototype.Cb;je.prototype.Eb=function(){var r=[],e=go(this);e.sort();for(var t=0;t<e.length;t++){var i=this.a[e[t]];r.push([i.key,i.value])}return r};je.prototype.getEntryList=je.prototype.Eb;je.prototype.entries=function(){var r=[],e=go(this);e.sort();for(var t=0;t<e.length;t++){var i=this.a[e[t]];r.push([i.key,Ha(this,i)])}return new _l(r)};je.prototype.entries=je.prototype.entries;je.prototype.keys=function(){var r=[],e=go(this);e.sort();for(var t=0;t<e.length;t++)r.push(this.a[e[t]].key);return new _l(r)};je.prototype.keys=je.prototype.keys;je.prototype.values=function(){var r=[],e=go(this);e.sort();for(var t=0;t<e.length;t++)r.push(Ha(this,this.a[e[t]]));return new _l(r)};je.prototype.values=je.prototype.values;je.prototype.forEach=function(r,e){var t=go(this);t.sort();for(var i=0;i<t.length;i++){var n=this.a[t[i]];r.call(e,Ha(this,n),n.key,this)}};je.prototype.forEach=je.prototype.forEach;je.prototype.set=function(r,e){var t=new N_(r);return this.b?(t.a=e,t.value=e.g()):t.value=e,this.a[r.toString()]=t,this.arrClean=!1,this};je.prototype.set=je.prototype.set;function Ha(r,e){return r.b?(e.a||(e.a=new r.b(e.value)),e.a):e.value}je.prototype.get=function(r){if(r=this.a[r.toString()])return Ha(this,r)};je.prototype.get=je.prototype.get;je.prototype.has=function(r){return r.toString()in this.a};je.prototype.has=je.prototype.has;je.prototype.Jc=function(r,e,t,i,n){var s=go(this);s.sort();for(var a=0;a<s.length;a++){var c=this.a[s[a]];e.Va(r),t.call(e,1,c.key),this.b?i.call(e,2,Ha(this,c),n):i.call(e,2,c.value),e.Ya()}};je.prototype.serializeBinary=je.prototype.Jc;je.deserializeBinary=function(r,e,t,i,n,s,a){for(;e.oa()&&!e.bb();){var c=e.c;c==1?s=t.call(e):c==2&&(r.b?(z(n),a||(a=new r.b),i.call(e,a,n)):a=i.call(e))}z(s!=null),z(a!=null),r.set(s,a)};function go(r){r=r.a;var e=[],t;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e}function N_(r,e){this.key=r,this.value=e,this.a=void 0}function F_(r){if(8192>=r.length)return String.fromCharCode.apply(null,r);for(var e="",t=0;t<r.length;t+=8192)e+=String.fromCharCode.apply(null,KI(r,t,t+8192));return e}var Lb={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},Df={"'":"\\'"},U_={},hl=null;function H_(r,e){e===void 0&&(e=0),j_(),e=U_[e];for(var t=[],i=0;i<r.length;i+=3){var n=r[i],s=i+1<r.length,a=s?r[i+1]:0,c=i+2<r.length,u=c?r[i+2]:0,p=n>>2;n=(n&3)<<4|a>>4,a=(a&15)<<2|u>>6,u&=63,c||(u=64,s||(a=64)),t.push(e[p],e[n],e[a]||"",e[u]||"")}return t.join("")}function z_(r){var e=r.length,t=3*e/4;t%3?t=Math.floor(t):"=.".indexOf(r[e-1])!=-1&&(t="=.".indexOf(r[e-2])!=-1?t-2:t-1);var i=new Uint8Array(t),n=0;return XI(r,function(s){i[n++]=s}),i.subarray(0,n)}function XI(r,e){function t(u){for(;i<r.length;){var p=r.charAt(i++),f=hl[p];if(f!=null)return f;if(!/^[\s\xa0]*$/.test(p))throw Error("Unknown base64 encoding at char: "+p)}return u}j_();for(var i=0;;){var n=t(-1),s=t(0),a=t(64),c=t(64);if(c===64&&n===-1)break;e(n<<2|s>>4),a!=64&&(e(s<<4&240|a>>2),c!=64&&e(a<<6&192|c))}}function j_(){if(!hl){hl={};for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++){var i=r.concat(e[t].split(""));U_[t]=i;for(var n=0;n<i.length;n++){var s=i[n];hl[s]===void 0&&(hl[s]=n)}}}}Ee("jspb.ConstBinaryMessage",function(){},void 0);Ee("jspb.BinaryMessage",function(){},void 0);Ee("jspb.BinaryConstants.FieldType",{yb:-1,ee:1,FLOAT:2,ke:3,te:4,je:5,xb:6,wb:7,BOOL:8,re:9,ie:10,le:11,ce:12,se:13,ge:14,me:15,ne:16,oe:17,pe:18,he:30,ve:31},void 0);Ee("jspb.BinaryConstants.WireType",{yb:-1,ue:0,xb:1,de:2,qe:3,fe:4,wb:5},void 0);Ee("jspb.BinaryConstants.FieldTypeToWireType",function(r){switch(r){case 5:case 3:case 13:case 4:case 17:case 18:case 8:case 14:case 31:return 0;case 1:case 6:case 16:case 30:return 1;case 9:case 11:case 12:return 2;case 2:case 7:case 15:return 5;default:return-1}},void 0);Ee("jspb.BinaryConstants.INVALID_FIELD_NUMBER",-1,void 0);Ee("jspb.BinaryConstants.FLOAT32_EPS",1401298464324817e-60,void 0);Ee("jspb.BinaryConstants.FLOAT32_MIN",11754943508222875e-54,void 0);Ee("jspb.BinaryConstants.FLOAT32_MAX",34028234663852886e22,void 0);Ee("jspb.BinaryConstants.FLOAT64_EPS",5e-324,void 0);Ee("jspb.BinaryConstants.FLOAT64_MIN",22250738585072014e-324,void 0);Ee("jspb.BinaryConstants.FLOAT64_MAX",17976931348623157e292,void 0);Ee("jspb.BinaryConstants.TWO_TO_20",1048576,void 0);Ee("jspb.BinaryConstants.TWO_TO_23",8388608,void 0);Ee("jspb.BinaryConstants.TWO_TO_31",2147483648,void 0);Ee("jspb.BinaryConstants.TWO_TO_32",4294967296,void 0);Ee("jspb.BinaryConstants.TWO_TO_52",4503599627370496,void 0);Ee("jspb.BinaryConstants.TWO_TO_63",9223372036854776e3,void 0);Ee("jspb.BinaryConstants.TWO_TO_64",18446744073709552e3,void 0);Ee("jspb.BinaryConstants.ZERO_HASH","\0\0\0\0\0\0\0\0",void 0);var xt=0,wt=0;Ee("jspb.utils.getSplit64Low",function(){return xt},void 0);Ee("jspb.utils.getSplit64High",function(){return wt},void 0);function Mb(r){var e=r>>>0;r=Math.floor((r-e)/4294967296)>>>0,xt=e,wt=r}Ee("jspb.utils.splitUint64",Mb,void 0);function vl(r){var e=0>r;r=Math.abs(r);var t=r>>>0;r=Math.floor((r-t)/4294967296),r>>>=0,e&&(r=~r>>>0,t=(~t>>>0)+1,4294967295<t&&(t=0,r++,4294967295<r&&(r=0))),xt=t,wt=r}Ee("jspb.utils.splitInt64",vl,void 0);function V_(r){var e=0>r;r=2*Math.abs(r),Mb(r),r=xt;var t=wt;e&&(r==0?t==0?t=r=4294967295:(t--,r=4294967295):r--),xt=r,wt=t}Ee("jspb.utils.splitZigzag64",V_,void 0);function G_(r){var e=0>r?1:0;if(r=e?-r:r,r===0)0<1/r?xt=wt=0:(wt=0,xt=2147483648);else if(isNaN(r))wt=0,xt=2147483647;else if(34028234663852886e22<r)wt=0,xt=(e<<31|2139095040)>>>0;else if(11754943508222875e-54>r)r=Math.round(r/Math.pow(2,-149)),wt=0,xt=(e<<31|r)>>>0;else{var t=Math.floor(Math.log(r)/Math.LN2);r*=Math.pow(2,-t),r=Math.round(8388608*r),16777216<=r&&++t,wt=0,xt=(e<<31|t+127<<23|r&8388607)>>>0}}Ee("jspb.utils.splitFloat32",G_,void 0);function W_(r){var e=0>r?1:0;if(r=e?-r:r,r===0)wt=0<1/r?0:2147483648,xt=0;else if(isNaN(r))wt=2147483647,xt=4294967295;else if(17976931348623157e292<r)wt=(e<<31|2146435072)>>>0,xt=0;else if(22250738585072014e-324>r)r/=Math.pow(2,-1074),wt=(e<<31|r/4294967296)>>>0,xt=r>>>0;else{var t=r,i=0;if(2<=t)for(;2<=t&&1023>i;)i++,t/=2;else for(;1>t&&-1022<i;)t*=2,i--;r*=Math.pow(2,-i),wt=(e<<31|i+1023<<20|1048576*r&1048575)>>>0,xt=4503599627370496*r>>>0}}Ee("jspb.utils.splitFloat64",W_,void 0);function bo(r){var e=r.charCodeAt(4),t=r.charCodeAt(5),i=r.charCodeAt(6),n=r.charCodeAt(7);xt=r.charCodeAt(0)+(r.charCodeAt(1)<<8)+(r.charCodeAt(2)<<16)+(r.charCodeAt(3)<<24)>>>0,wt=e+(t<<8)+(i<<16)+(n<<24)>>>0}Ee("jspb.utils.splitHash64",bo,void 0);function za(r,e){return 4294967296*e+(r>>>0)}Ee("jspb.utils.joinUint64",za,void 0);function wl(r,e){var t=e&2147483648;return t&&(r=~r+1>>>0,e=~e>>>0,r==0&&(e=e+1>>>0)),r=za(r,e),t?-r:r}Ee("jspb.utils.joinInt64",wl,void 0);function Of(r,e,t){var i=e>>31;return t(r<<1^i,(e<<1|r>>>31)^i)}Ee("jspb.utils.toZigzag64",Of,void 0);function $_(r,e){return Pf(r,e,wl)}Ee("jspb.utils.joinZigzag64",$_,void 0);function Pf(r,e,t){var i=-(r&1);return t((r>>>1|e<<31)^i,e>>>1^i)}Ee("jspb.utils.fromZigzag64",Pf,void 0);function K_(r){var e=2*(r>>31)+1,t=r>>>23&255;return r&=8388607,t==255?r?NaN:1/0*e:t==0?e*Math.pow(2,-149)*r:e*Math.pow(2,t-150)*(r+Math.pow(2,23))}Ee("jspb.utils.joinFloat32",K_,void 0);function q_(r,e){var t=2*(e>>31)+1,i=e>>>20&2047;return r=4294967296*(e&1048575)+r,i==2047?r?NaN:1/0*t:i==0?t*Math.pow(2,-1074)*r:t*Math.pow(2,i-1075)*(r+4503599627370496)}Ee("jspb.utils.joinFloat64",q_,void 0);function Nf(r,e){return String.fromCharCode(r>>>0&255,r>>>8&255,r>>>16&255,r>>>24&255,e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255)}Ee("jspb.utils.joinHash64",Nf,void 0);Ee("jspb.utils.DIGITS","0123456789abcdef".split(""),void 0);function El(r,e){function t(n,s){return n=n?String(n):"",s?"0000000".slice(n.length)+n:n}if(2097151>=e)return""+za(r,e);var i=(r>>>24|e<<8)>>>0&16777215;return e=e>>16&65535,r=(r&16777215)+6777216*i+6710656*e,i+=8147497*e,e*=2,1e7<=r&&(i+=Math.floor(r/1e7),r%=1e7),1e7<=i&&(e+=Math.floor(i/1e7),i%=1e7),t(e,0)+t(i,e)+t(r,1)}Ee("jspb.utils.joinUnsignedDecimalString",El,void 0);function Il(r,e){var t=e&2147483648;return t&&(r=~r+1>>>0,e=~e+(r==0?1:0)>>>0),r=El(r,e),t?"-"+r:r}Ee("jspb.utils.joinSignedDecimalString",Il,void 0);function Y_(r,e){bo(r),r=xt;var t=wt;return e?Il(r,t):El(r,t)}Ee("jspb.utils.hash64ToDecimalString",Y_,void 0);Ee("jspb.utils.hash64ArrayToDecimalStrings",function(r,e){for(var t=Array(r.length),i=0;i<r.length;i++)t[i]=Y_(r[i],e);return t},void 0);function Sl(r){function e(a,c){for(var u=0;8>u&&(a!==1||0<c);u++)c=a*n[u]+c,n[u]=c&255,c>>>=8}function t(){for(var a=0;8>a;a++)n[a]=~n[a]&255}z(0<r.length);var i=!1;r[0]==="-"&&(i=!0,r=r.slice(1));for(var n=[0,0,0,0,0,0,0,0],s=0;s<r.length;s++)e(10,r.charCodeAt(s)-48);return i&&(t(),e(1,1)),F_(n)}Ee("jspb.utils.decimalStringToHash64",Sl,void 0);Ee("jspb.utils.splitDecimalString",function(r){bo(Sl(r))},void 0);function D_(r){return String.fromCharCode(10>r?48+r:87+r)}function B_(r){return 97<=r?r-97+10:r-48}Ee("jspb.utils.hash64ToHexString",function(r){var e=Array(18);e[0]="0",e[1]="x";for(var t=0;8>t;t++){var i=r.charCodeAt(7-t);e[2*t+2]=D_(i>>4),e[2*t+3]=D_(i&15)}return e.join("")},void 0);Ee("jspb.utils.hexStringToHash64",function(r){r=r.toLowerCase(),z(r.length==18),z(r[0]=="0"),z(r[1]=="x");for(var e="",t=0;8>t;t++)e=String.fromCharCode(16*B_(r.charCodeAt(2*t+2))+B_(r.charCodeAt(2*t+3)))+e;return e},void 0);Ee("jspb.utils.hash64ToNumber",function(r,e){bo(r),r=xt;var t=wt;return e?wl(r,t):za(r,t)},void 0);Ee("jspb.utils.numberToHash64",function(r){return vl(r),Nf(xt,wt)},void 0);Ee("jspb.utils.countVarints",function(r,e,t){for(var i=0,n=e;n<t;n++)i+=r[n]>>7;return t-e-i},void 0);Ee("jspb.utils.countVarintFields",function(r,e,t,i){var n=0;if(i*=8,128>i)for(;e<t&&r[e++]==i;)for(n++;;){var s=r[e++];if(!(s&128))break}else for(;e<t;){for(s=i;128<s;){if(r[e]!=(s&127|128))return n;e++,s>>=7}if(r[e++]!=s)break;for(n++;s=r[e++],(s&128)!=0;);}return n},void 0);function X_(r,e,t,i,n){var s=0;if(128>i)for(;e<t&&r[e++]==i;)s++,e+=n;else for(;e<t;){for(var a=i;128<a;){if(r[e++]!=(a&127|128))return s;a>>=7}if(r[e++]!=a)break;s++,e+=n}return s}Ee("jspb.utils.countFixed32Fields",function(r,e,t,i){return X_(r,e,t,8*i+5,4)},void 0);Ee("jspb.utils.countFixed64Fields",function(r,e,t,i){return X_(r,e,t,8*i+1,8)},void 0);Ee("jspb.utils.countDelimitedFields",function(r,e,t,i){var n=0;for(i=8*i+2;e<t;){for(var s=i;128<s;){if(r[e++]!=(s&127|128))return n;s>>=7}if(r[e++]!=s)break;n++;for(var a=0,c=1;s=r[e++],a+=(s&127)*c,c*=128,(s&128)!=0;);e+=a}return n},void 0);Ee("jspb.utils.debugBytesToTextFormat",function(r){var e='"';if(r){r=Ff(r);for(var t=0;t<r.length;t++)e+="\\x",16>r[t]&&(e+="0"),e+=r[t].toString(16)}return e+'"'},void 0);Ee("jspb.utils.debugScalarToTextFormat",function(r){if(typeof r=="string"){r=String(r);for(var e=['"'],t=0;t<r.length;t++){var i=r.charAt(t),n=i.charCodeAt(0),s=t+1,a;(a=Lb[i])||(31<n&&127>n||(n=i,n in Df?i=Df[n]:n in Lb?i=Df[n]=Lb[n]:(a=n.charCodeAt(0),31<a&&127>a?i=n:(256>a?(i="\\x",(16>a||256<a)&&(i+="0")):(i="\\u",4096>a&&(i+="0")),i+=a.toString(16).toUpperCase()),i=Df[n]=i)),a=i),e[s]=a}e.push('"'),r=e.join("")}else r=r.toString();return r},void 0);Ee("jspb.utils.stringToByteArray",function(r){for(var e=new Uint8Array(r.length),t=0;t<r.length;t++){var i=r.charCodeAt(t);if(255<i)throw Error("Conversion error: string contains codepoint outside of byte range");e[t]=i}return e},void 0);function Ff(r){return r.constructor===Uint8Array?r:r.constructor===ArrayBuffer?new Uint8Array(r):r.constructor===Array?new Uint8Array(r):r.constructor===String?z_(r):r instanceof Uint8Array?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):(ar("Type not convertible to Uint8Array."),new Uint8Array(0))}Ee("jspb.utils.byteSourceToUint8Array",Ff,void 0);function N(r,e,t){this.b=null,this.a=this.c=this.h=0,this.v=!1,r&&this.H(r,e,t)}Ee("jspb.BinaryDecoder",N,void 0);var gl=[];N.getInstanceCacheLength=function(){return gl.length};function Uf(r,e,t){if(gl.length){var i=gl.pop();return r&&i.H(r,e,t),i}return new N(r,e,t)}N.alloc=Uf;N.prototype.Ca=function(){this.clear(),100>gl.length&&gl.push(this)};N.prototype.free=N.prototype.Ca;N.prototype.clone=function(){return Uf(this.b,this.h,this.c-this.h)};N.prototype.clone=N.prototype.clone;N.prototype.clear=function(){this.b=null,this.a=this.c=this.h=0,this.v=!1};N.prototype.clear=N.prototype.clear;N.prototype.Y=function(){return this.b};N.prototype.getBuffer=N.prototype.Y;N.prototype.H=function(r,e,t){this.b=Ff(r),this.h=e!==void 0?e:0,this.c=t!==void 0?this.h+t:this.b.length,this.a=this.h};N.prototype.setBlock=N.prototype.H;N.prototype.Db=function(){return this.c};N.prototype.getEnd=N.prototype.Db;N.prototype.setEnd=function(r){this.c=r};N.prototype.setEnd=N.prototype.setEnd;N.prototype.reset=function(){this.a=this.h};N.prototype.reset=N.prototype.reset;N.prototype.B=function(){return this.a};N.prototype.getCursor=N.prototype.B;N.prototype.Ma=function(r){this.a=r};N.prototype.setCursor=N.prototype.Ma;N.prototype.advance=function(r){this.a+=r,z(this.a<=this.c)};N.prototype.advance=N.prototype.advance;N.prototype.ya=function(){return this.a==this.c};N.prototype.atEnd=N.prototype.ya;N.prototype.Qb=function(){return this.a>this.c};N.prototype.pastEnd=N.prototype.Qb;N.prototype.getError=function(){return this.v||0>this.a||this.a>this.c};N.prototype.getError=N.prototype.getError;N.prototype.w=function(r){for(var e=128,t=0,i=0,n=0;4>n&&128<=e;n++)e=this.b[this.a++],t|=(e&127)<<7*n;if(128<=e&&(e=this.b[this.a++],t|=(e&127)<<28,i|=(e&127)>>4),128<=e)for(n=0;5>n&&128<=e;n++)e=this.b[this.a++],i|=(e&127)<<7*n+3;if(128>e)return r(t>>>0,i>>>0);ar("Failed to read varint, encoding is invalid."),this.v=!0};N.prototype.readSplitVarint64=N.prototype.w;N.prototype.ea=function(r){return this.w(function(e,t){return Pf(e,t,r)})};N.prototype.readSplitZigzagVarint64=N.prototype.ea;N.prototype.ta=function(r){var e=this.b,t=this.a;this.a+=8;for(var i=0,n=0,s=t+7;s>=t;s--)i=i<<8|e[s],n=n<<8|e[s+4];return r(i,n)};N.prototype.readSplitFixed64=N.prototype.ta;N.prototype.kb=function(){for(;this.b[this.a]&128;)this.a++;this.a++};N.prototype.skipVarint=N.prototype.kb;N.prototype.mb=function(r){for(;128<r;)this.a--,r>>>=7;this.a--};N.prototype.unskipVarint=N.prototype.mb;N.prototype.o=function(){var r=this.b,e=r[this.a],t=e&127;return 128>e?(this.a+=1,z(this.a<=this.c),t):(e=r[this.a+1],t|=(e&127)<<7,128>e?(this.a+=2,z(this.a<=this.c),t):(e=r[this.a+2],t|=(e&127)<<14,128>e?(this.a+=3,z(this.a<=this.c),t):(e=r[this.a+3],t|=(e&127)<<21,128>e?(this.a+=4,z(this.a<=this.c),t):(e=r[this.a+4],t|=(e&15)<<28,128>e?(this.a+=5,z(this.a<=this.c),t>>>0):(this.a+=5,128<=r[this.a++]&&128<=r[this.a++]&&128<=r[this.a++]&&128<=r[this.a++]&&128<=r[this.a++]&&z(!1),z(this.a<=this.c),t)))))};N.prototype.readUnsignedVarint32=N.prototype.o;N.prototype.da=function(){return~~this.o()};N.prototype.readSignedVarint32=N.prototype.da;N.prototype.O=function(){return this.o().toString()};N.prototype.Ea=function(){return this.da().toString()};N.prototype.readSignedVarint32String=N.prototype.Ea;N.prototype.Ia=function(){var r=this.o();return r>>>1^-(r&1)};N.prototype.readZigzagVarint32=N.prototype.Ia;N.prototype.Ga=function(){return this.w(za)};N.prototype.readUnsignedVarint64=N.prototype.Ga;N.prototype.Ha=function(){return this.w(El)};N.prototype.readUnsignedVarint64String=N.prototype.Ha;N.prototype.sa=function(){return this.w(wl)};N.prototype.readSignedVarint64=N.prototype.sa;N.prototype.Fa=function(){return this.w(Il)};N.prototype.readSignedVarint64String=N.prototype.Fa;N.prototype.Ja=function(){return this.w($_)};N.prototype.readZigzagVarint64=N.prototype.Ja;N.prototype.fb=function(){return this.ea(Nf)};N.prototype.readZigzagVarintHash64=N.prototype.fb;N.prototype.Ka=function(){return this.ea(Il)};N.prototype.readZigzagVarint64String=N.prototype.Ka;N.prototype.Gc=function(){var r=this.b[this.a];return this.a+=1,z(this.a<=this.c),r};N.prototype.readUint8=N.prototype.Gc;N.prototype.Ec=function(){var r=this.b[this.a],e=this.b[this.a+1];return this.a+=2,z(this.a<=this.c),r<<0|e<<8};N.prototype.readUint16=N.prototype.Ec;N.prototype.m=function(){var r=this.b[this.a],e=this.b[this.a+1],t=this.b[this.a+2],i=this.b[this.a+3];return this.a+=4,z(this.a<=this.c),(r<<0|e<<8|t<<16|i<<24)>>>0};N.prototype.readUint32=N.prototype.m;N.prototype.ga=function(){var r=this.m(),e=this.m();return za(r,e)};N.prototype.readUint64=N.prototype.ga;N.prototype.ha=function(){var r=this.m(),e=this.m();return El(r,e)};N.prototype.readUint64String=N.prototype.ha;N.prototype.Xb=function(){var r=this.b[this.a];return this.a+=1,z(this.a<=this.c),r<<24>>24};N.prototype.readInt8=N.prototype.Xb;N.prototype.Vb=function(){var r=this.b[this.a],e=this.b[this.a+1];return this.a+=2,z(this.a<=this.c),(r<<0|e<<8)<<16>>16};N.prototype.readInt16=N.prototype.Vb;N.prototype.P=function(){var r=this.b[this.a],e=this.b[this.a+1],t=this.b[this.a+2],i=this.b[this.a+3];return this.a+=4,z(this.a<=this.c),r<<0|e<<8|t<<16|i<<24};N.prototype.readInt32=N.prototype.P;N.prototype.ba=function(){var r=this.m(),e=this.m();return wl(r,e)};N.prototype.readInt64=N.prototype.ba;N.prototype.ca=function(){var r=this.m(),e=this.m();return Il(r,e)};N.prototype.readInt64String=N.prototype.ca;N.prototype.aa=function(){var r=this.m();return K_(r,0)};N.prototype.readFloat=N.prototype.aa;N.prototype.Z=function(){var r=this.m(),e=this.m();return q_(r,e)};N.prototype.readDouble=N.prototype.Z;N.prototype.pa=function(){return!!this.b[this.a++]};N.prototype.readBool=N.prototype.pa;N.prototype.ra=function(){return this.da()};N.prototype.readEnum=N.prototype.ra;N.prototype.fa=function(r){var e=this.b,t=this.a;r=t+r;for(var i=[],n="";t<r;){var s=e[t++];if(128>s)i.push(s);else{if(192>s)continue;if(224>s){var a=e[t++];i.push((s&31)<<6|a&63)}else if(240>s){a=e[t++];var c=e[t++];i.push((s&15)<<12|(a&63)<<6|c&63)}else if(248>s){a=e[t++],c=e[t++];var u=e[t++];s=(s&7)<<18|(a&63)<<12|(c&63)<<6|u&63,s-=65536,i.push((s>>10&1023)+55296,(s&1023)+56320)}}8192<=i.length&&(n+=String.fromCharCode.apply(null,i),i.length=0)}return n+=F_(i),this.a=t,n};N.prototype.readString=N.prototype.fa;N.prototype.Dc=function(){var r=this.o();return this.fa(r)};N.prototype.readStringWithLength=N.prototype.Dc;N.prototype.qa=function(r){if(0>r||this.a+r>this.b.length)return this.v=!0,ar("Invalid byte length!"),new Uint8Array(0);var e=this.b.subarray(this.a,this.a+r);return this.a+=r,z(this.a<=this.c),e};N.prototype.readBytes=N.prototype.qa;N.prototype.ia=function(){return this.w(Nf)};N.prototype.readVarintHash64=N.prototype.ia;N.prototype.$=function(){var r=this.b,e=this.a,t=r[e],i=r[e+1],n=r[e+2],s=r[e+3],a=r[e+4],c=r[e+5],u=r[e+6];return r=r[e+7],this.a+=8,String.fromCharCode(t,i,n,s,a,c,u,r)};N.prototype.readFixedHash64=N.prototype.$;function E(r,e,t){this.a=Uf(r,e,t),this.O=this.a.B(),this.b=this.c=-1,this.h=!1,this.v=null}Ee("jspb.BinaryReader",E,void 0);var Ua=[];E.clearInstanceCache=function(){Ua=[]};E.getInstanceCacheLength=function(){return Ua.length};function Q_(r,e,t){if(Ua.length){var i=Ua.pop();return r&&i.a.H(r,e,t),i}return new E(r,e,t)}E.alloc=Q_;E.prototype.zb=Q_;E.prototype.alloc=E.prototype.zb;E.prototype.Ca=function(){this.a.clear(),this.b=this.c=-1,this.h=!1,this.v=null,100>Ua.length&&Ua.push(this)};E.prototype.free=E.prototype.Ca;E.prototype.Fb=function(){return this.O};E.prototype.getFieldCursor=E.prototype.Fb;E.prototype.B=function(){return this.a.B()};E.prototype.getCursor=E.prototype.B;E.prototype.Y=function(){return this.a.Y()};E.prototype.getBuffer=E.prototype.Y;E.prototype.Hb=function(){return this.c};E.prototype.getFieldNumber=E.prototype.Hb;E.prototype.Lb=function(){return this.b};E.prototype.getWireType=E.prototype.Lb;E.prototype.Mb=function(){return this.b==2};E.prototype.isDelimited=E.prototype.Mb;E.prototype.bb=function(){return this.b==4};E.prototype.isEndGroup=E.prototype.bb;E.prototype.getError=function(){return this.h||this.a.getError()};E.prototype.getError=E.prototype.getError;E.prototype.H=function(r,e,t){this.a.H(r,e,t),this.b=this.c=-1};E.prototype.setBlock=E.prototype.H;E.prototype.reset=function(){this.a.reset(),this.b=this.c=-1};E.prototype.reset=E.prototype.reset;E.prototype.advance=function(r){this.a.advance(r)};E.prototype.advance=E.prototype.advance;E.prototype.oa=function(){if(this.a.ya())return!1;if(this.getError())return ar("Decoder hit an error"),!1;this.O=this.a.B();var r=this.a.o(),e=r>>>3;return r&=7,r!=0&&r!=5&&r!=1&&r!=2&&r!=3&&r!=4?(ar("Invalid wire type: %s (at position %s)",r,this.O),this.h=!0,!1):(this.c=e,this.b=r,!0)};E.prototype.nextField=E.prototype.oa;E.prototype.Oa=function(){this.a.mb(this.c<<3|this.b)};E.prototype.unskipHeader=E.prototype.Oa;E.prototype.Lc=function(){var r=this.c;for(this.Oa();this.oa()&&this.c==r;)this.C();this.a.ya()||this.Oa()};E.prototype.skipMatchingFields=E.prototype.Lc;E.prototype.lb=function(){this.b!=0?(ar("Invalid wire type for skipVarintField"),this.C()):this.a.kb()};E.prototype.skipVarintField=E.prototype.lb;E.prototype.gb=function(){if(this.b!=2)ar("Invalid wire type for skipDelimitedField"),this.C();else{var r=this.a.o();this.a.advance(r)}};E.prototype.skipDelimitedField=E.prototype.gb;E.prototype.hb=function(){this.b!=5?(ar("Invalid wire type for skipFixed32Field"),this.C()):this.a.advance(4)};E.prototype.skipFixed32Field=E.prototype.hb;E.prototype.ib=function(){this.b!=1?(ar("Invalid wire type for skipFixed64Field"),this.C()):this.a.advance(8)};E.prototype.skipFixed64Field=E.prototype.ib;E.prototype.jb=function(){var r=this.c;do{if(!this.oa()){ar("Unmatched start-group tag: stream EOF"),this.h=!0;break}if(this.b==4){this.c!=r&&(ar("Unmatched end-group tag"),this.h=!0);break}this.C()}while(1)};E.prototype.skipGroup=E.prototype.jb;E.prototype.C=function(){switch(this.b){case 0:this.lb();break;case 1:this.ib();break;case 2:this.gb();break;case 5:this.hb();break;case 3:this.jb();break;default:ar("Invalid wire encoding for field.")}};E.prototype.skipField=E.prototype.C;E.prototype.Hc=function(r,e){this.v===null&&(this.v={}),z(!this.v[r]),this.v[r]=e};E.prototype.registerReadCallback=E.prototype.Hc;E.prototype.Ic=function(r){return z(this.v!==null),r=this.v[r],z(r),r(this)};E.prototype.runReadCallback=E.prototype.Ic;E.prototype.Yb=function(r,e){z(this.b==2);var t=this.a.c,i=this.a.o();i=this.a.B()+i,this.a.setEnd(i),e(r,this),this.a.Ma(i),this.a.setEnd(t)};E.prototype.readMessage=E.prototype.Yb;E.prototype.Ub=function(r,e,t){z(this.b==3),z(this.c==r),t(e,this),this.h||this.b==4||(ar("Group submessage did not end with an END_GROUP tag"),this.h=!0)};E.prototype.readGroup=E.prototype.Ub;E.prototype.Gb=function(){z(this.b==2);var r=this.a.o(),e=this.a.B(),t=e+r;return r=Uf(this.a.Y(),e,r),this.a.Ma(t),r};E.prototype.getFieldDecoder=E.prototype.Gb;E.prototype.P=function(){return z(this.b==0),this.a.da()};E.prototype.readInt32=E.prototype.P;E.prototype.Wb=function(){return z(this.b==0),this.a.Ea()};E.prototype.readInt32String=E.prototype.Wb;E.prototype.ba=function(){return z(this.b==0),this.a.sa()};E.prototype.readInt64=E.prototype.ba;E.prototype.ca=function(){return z(this.b==0),this.a.Fa()};E.prototype.readInt64String=E.prototype.ca;E.prototype.m=function(){return z(this.b==0),this.a.o()};E.prototype.readUint32=E.prototype.m;E.prototype.Fc=function(){return z(this.b==0),this.a.O()};E.prototype.readUint32String=E.prototype.Fc;E.prototype.ga=function(){return z(this.b==0),this.a.Ga()};E.prototype.readUint64=E.prototype.ga;E.prototype.ha=function(){return z(this.b==0),this.a.Ha()};E.prototype.readUint64String=E.prototype.ha;E.prototype.zc=function(){return z(this.b==0),this.a.Ia()};E.prototype.readSint32=E.prototype.zc;E.prototype.Ac=function(){return z(this.b==0),this.a.Ja()};E.prototype.readSint64=E.prototype.Ac;E.prototype.Bc=function(){return z(this.b==0),this.a.Ka()};E.prototype.readSint64String=E.prototype.Bc;E.prototype.Rb=function(){return z(this.b==5),this.a.m()};E.prototype.readFixed32=E.prototype.Rb;E.prototype.Sb=function(){return z(this.b==1),this.a.ga()};E.prototype.readFixed64=E.prototype.Sb;E.prototype.Tb=function(){return z(this.b==1),this.a.ha()};E.prototype.readFixed64String=E.prototype.Tb;E.prototype.vc=function(){return z(this.b==5),this.a.P()};E.prototype.readSfixed32=E.prototype.vc;E.prototype.wc=function(){return z(this.b==5),this.a.P().toString()};E.prototype.readSfixed32String=E.prototype.wc;E.prototype.xc=function(){return z(this.b==1),this.a.ba()};E.prototype.readSfixed64=E.prototype.xc;E.prototype.yc=function(){return z(this.b==1),this.a.ca()};E.prototype.readSfixed64String=E.prototype.yc;E.prototype.aa=function(){return z(this.b==5),this.a.aa()};E.prototype.readFloat=E.prototype.aa;E.prototype.Z=function(){return z(this.b==1),this.a.Z()};E.prototype.readDouble=E.prototype.Z;E.prototype.pa=function(){return z(this.b==0),!!this.a.o()};E.prototype.readBool=E.prototype.pa;E.prototype.ra=function(){return z(this.b==0),this.a.sa()};E.prototype.readEnum=E.prototype.ra;E.prototype.fa=function(){z(this.b==2);var r=this.a.o();return this.a.fa(r)};E.prototype.readString=E.prototype.fa;E.prototype.qa=function(){z(this.b==2);var r=this.a.o();return this.a.qa(r)};E.prototype.readBytes=E.prototype.qa;E.prototype.ia=function(){return z(this.b==0),this.a.ia()};E.prototype.readVarintHash64=E.prototype.ia;E.prototype.Cc=function(){return z(this.b==0),this.a.fb()};E.prototype.readSintHash64=E.prototype.Cc;E.prototype.w=function(r){return z(this.b==0),this.a.w(r)};E.prototype.readSplitVarint64=E.prototype.w;E.prototype.ea=function(r){return z(this.b==0),this.a.w(function(e,t){return Pf(e,t,r)})};E.prototype.readSplitZigzagVarint64=E.prototype.ea;E.prototype.$=function(){return z(this.b==1),this.a.$()};E.prototype.readFixedHash64=E.prototype.$;E.prototype.ta=function(r){return z(this.b==1),this.a.ta(r)};E.prototype.readSplitFixed64=E.prototype.ta;function Ut(r,e){z(r.b==2);var t=r.a.o();t=r.a.B()+t;for(var i=[];r.a.B()<t;)i.push(e.call(r.a));return i}E.prototype.gc=function(){return Ut(this,this.a.da)};E.prototype.readPackedInt32=E.prototype.gc;E.prototype.hc=function(){return Ut(this,this.a.Ea)};E.prototype.readPackedInt32String=E.prototype.hc;E.prototype.ic=function(){return Ut(this,this.a.sa)};E.prototype.readPackedInt64=E.prototype.ic;E.prototype.jc=function(){return Ut(this,this.a.Fa)};E.prototype.readPackedInt64String=E.prototype.jc;E.prototype.qc=function(){return Ut(this,this.a.o)};E.prototype.readPackedUint32=E.prototype.qc;E.prototype.rc=function(){return Ut(this,this.a.O)};E.prototype.readPackedUint32String=E.prototype.rc;E.prototype.sc=function(){return Ut(this,this.a.Ga)};E.prototype.readPackedUint64=E.prototype.sc;E.prototype.tc=function(){return Ut(this,this.a.Ha)};E.prototype.readPackedUint64String=E.prototype.tc;E.prototype.nc=function(){return Ut(this,this.a.Ia)};E.prototype.readPackedSint32=E.prototype.nc;E.prototype.oc=function(){return Ut(this,this.a.Ja)};E.prototype.readPackedSint64=E.prototype.oc;E.prototype.pc=function(){return Ut(this,this.a.Ka)};E.prototype.readPackedSint64String=E.prototype.pc;E.prototype.bc=function(){return Ut(this,this.a.m)};E.prototype.readPackedFixed32=E.prototype.bc;E.prototype.cc=function(){return Ut(this,this.a.ga)};E.prototype.readPackedFixed64=E.prototype.cc;E.prototype.dc=function(){return Ut(this,this.a.ha)};E.prototype.readPackedFixed64String=E.prototype.dc;E.prototype.kc=function(){return Ut(this,this.a.P)};E.prototype.readPackedSfixed32=E.prototype.kc;E.prototype.lc=function(){return Ut(this,this.a.ba)};E.prototype.readPackedSfixed64=E.prototype.lc;E.prototype.mc=function(){return Ut(this,this.a.ca)};E.prototype.readPackedSfixed64String=E.prototype.mc;E.prototype.fc=function(){return Ut(this,this.a.aa)};E.prototype.readPackedFloat=E.prototype.fc;E.prototype.$b=function(){return Ut(this,this.a.Z)};E.prototype.readPackedDouble=E.prototype.$b;E.prototype.Zb=function(){return Ut(this,this.a.pa)};E.prototype.readPackedBool=E.prototype.Zb;E.prototype.ac=function(){return Ut(this,this.a.ra)};E.prototype.readPackedEnum=E.prototype.ac;E.prototype.uc=function(){return Ut(this,this.a.ia)};E.prototype.readPackedVarintHash64=E.prototype.uc;E.prototype.ec=function(){return Ut(this,this.a.$)};E.prototype.readPackedFixedHash64=E.prototype.ec;function bl(r,e,t,i,n){this.ma=r,this.Ba=e,this.la=t,this.Na=i,this.na=n}Ee("jspb.ExtensionFieldInfo",bl,void 0);function Z_(r,e,t,i,n,s){this.Za=r,this.za=e,this.Aa=t,this.Wa=i,this.Ab=n,this.Nb=s}Ee("jspb.ExtensionFieldBinaryInfo",Z_,void 0);bl.prototype.F=function(){return!!this.la};bl.prototype.isMessageType=bl.prototype.F;function fe(){}Ee("jspb.Message",fe,void 0);fe.GENERATE_TO_OBJECT=!0;fe.GENERATE_FROM_OBJECT=!0;var Hf=typeof Uint8Array=="function";fe.prototype.Ib=function(){return this.b};fe.prototype.getJsPbMessageId=fe.prototype.Ib;fe.initialize=function(r,e,t,i,n,s){r.f=null,e||(e=t?[t]:[]),r.b=t?String(t):void 0,r.D=t===0?-1:0,r.u=e;e:{if(t=r.u.length,e=-1,t&&(e=t-1,t=r.u[e],!(t===null||typeof t!="object"||Array.isArray(t)||Hf&&t instanceof Uint8Array))){r.G=e-r.D,r.i=t;break e}-1<i?(r.G=Math.max(i,e+1-r.D),r.i=null):r.G=Number.MAX_VALUE}if(r.a={},n)for(i=0;i<n.length;i++)e=n[i],e<r.G?(e+=r.D,r.u[e]=r.u[e]||yl):(zf(r),r.i[e]=r.i[e]||yl);if(s&&s.length)for(i=0;i<s.length;i++)Db(r,s[i])};var yl=Object.freeze?Object.freeze([]):[];function zf(r){var e=r.G+r.D;r.u[e]||(r.i=r.u[e]={})}function J_(r,e,t){for(var i=[],n=0;n<r.length;n++)i[n]=e.call(r[n],t,r[n]);return i}fe.toObjectList=J_;fe.toObjectExtension=function(r,e,t,i,n){for(var s in t){var a=t[s],c=i.call(r,a);if(c!=null){for(var u in a.Ba)if(a.Ba.hasOwnProperty(u))break;e[u]=a.Na?a.na?J_(c,a.Na,n):a.Na(n,c):c}}};fe.serializeBinaryExtensions=function(r,e,t,i){for(var n in t){var s=t[n],a=s.Za;if(!s.Aa)throw Error("Message extension present that was generated without binary serialization support");var c=i.call(r,a);if(c!=null)if(a.F())if(s.Wa)s.Aa.call(e,a.ma,c,s.Wa);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else s.Aa.call(e,a.ma,c)}};fe.readBinaryExtension=function(r,e,t,i,n){var s=t[e.c];if(s){if(t=s.Za,!s.za)throw Error("Deserializing extension whose generated code does not support binary format");if(t.F()){var a=new t.la;s.za.call(e,a,s.Ab)}else a=s.za.call(e);t.na&&!s.Nb?(e=i.call(r,t))?e.push(a):n.call(r,t,[a]):n.call(r,t,a)}else e.C()};function ri(r,e){if(e<r.G){e+=r.D;var t=r.u[e];return t===yl?r.u[e]=[]:t}if(r.i)return t=r.i[e],t===yl?r.i[e]=[]:t}fe.getField=ri;fe.getRepeatedField=function(r,e){return ri(r,e)};function ev(r,e){return r=ri(r,e),r==null?r:+r}fe.getOptionalFloatingPointField=ev;function tv(r,e){return r=ri(r,e),r==null?r:!!r}fe.getBooleanField=tv;fe.getRepeatedFloatingPointField=function(r,e){var t=ri(r,e);if(r.a||(r.a={}),!r.a[e]){for(var i=0;i<t.length;i++)t[i]=+t[i];r.a[e]=!0}return t};fe.getRepeatedBooleanField=function(r,e){var t=ri(r,e);if(r.a||(r.a={}),!r.a[e]){for(var i=0;i<t.length;i++)t[i]=!!t[i];r.a[e]=!0}return t};function rv(r){return r==null||typeof r=="string"?r:Hf&&r instanceof Uint8Array?H_(r):(ar("Cannot coerce to b64 string: "+kn(r)),null)}fe.bytesAsB64=rv;function iv(r){return r==null||r instanceof Uint8Array?r:typeof r=="string"?z_(r):(ar("Cannot coerce to Uint8Array: "+kn(r)),null)}fe.bytesAsU8=iv;fe.bytesListAsB64=function(r){return nv(r),r.length&&typeof r[0]!="string"?xl(r,rv):r};fe.bytesListAsU8=function(r){return nv(r),!r.length||r[0]instanceof Uint8Array?r:xl(r,iv)};function nv(r){if(r&&1<r.length){var e=kn(r[0]);$I(r,function(t){kn(t)!=e&&ar("Inconsistent type in JSPB repeated field array. Got "+kn(t)+" expected "+e)})}}function ov(r,e,t){return r=ri(r,e),r??t}fe.getFieldWithDefault=ov;fe.getBooleanFieldWithDefault=function(r,e,t){return r=tv(r,e),r??t};fe.getFloatingPointFieldWithDefault=function(r,e,t){return r=ev(r,e),r??t};fe.getFieldProto3=ov;fe.getMapField=function(r,e,t,i){if(r.f||(r.f={}),e in r.f)return r.f[e];var n=ri(r,e);if(!n){if(t)return;n=[],Cn(r,e,n)}return r.f[e]=new je(n,i)};function Cn(r,e,t){return Fi(r,fe),e<r.G?r.u[e+r.D]=t:(zf(r),r.i[e]=t),r}fe.setField=Cn;fe.setProto3IntField=function(r,e,t){return us(r,e,t,0)};fe.setProto3FloatField=function(r,e,t){return us(r,e,t,0)};fe.setProto3BooleanField=function(r,e,t){return us(r,e,t,!1)};fe.setProto3StringField=function(r,e,t){return us(r,e,t,"")};fe.setProto3BytesField=function(r,e,t){return us(r,e,t,"")};fe.setProto3EnumField=function(r,e,t){return us(r,e,t,0)};fe.setProto3StringIntField=function(r,e,t){return us(r,e,t,"0")};function us(r,e,t,i){return Fi(r,fe),t!==i?Cn(r,e,t):e<r.G?r.u[e+r.D]=null:(zf(r),delete r.i[e]),r}fe.addToRepeatedField=function(r,e,t,i){return Fi(r,fe),e=ri(r,e),i!=null?e.splice(i,0,t):e.push(t),r};function sv(r,e,t,i){return Fi(r,fe),(t=Db(r,t))&&t!==e&&i!==void 0&&(r.f&&t in r.f&&(r.f[t]=void 0),Cn(r,t,void 0)),Cn(r,e,i)}fe.setOneofField=sv;function Db(r,e){for(var t,i,n=0;n<e.length;n++){var s=e[n],a=ri(r,s);a!=null&&(t=s,i=a,Cn(r,s,void 0))}return t?(Cn(r,t,i),t):0}fe.computeOneofCase=Db;fe.getWrapperField=function(r,e,t,i){if(r.f||(r.f={}),!r.f[t]){var n=ri(r,t);(i||n)&&(r.f[t]=new e(n))}return r.f[t]};fe.getRepeatedWrapperField=function(r,e,t){return av(r,e,t),e=r.f[t],e==yl&&(e=r.f[t]=[]),e};function av(r,e,t){if(r.f||(r.f={}),!r.f[t]){for(var i=ri(r,t),n=[],s=0;s<i.length;s++)n[s]=new e(i[s]);r.f[t]=n}}fe.setWrapperField=function(r,e,t){Fi(r,fe),r.f||(r.f={});var i=t&&t.g();return r.f[e]=t,Cn(r,e,i)};fe.setOneofWrapperField=function(r,e,t,i){Fi(r,fe),r.f||(r.f={});var n=i&&i.g();return r.f[e]=i,sv(r,e,t,n)};fe.setRepeatedWrapperField=function(r,e,t){Fi(r,fe),r.f||(r.f={}),t=t||[];for(var i=[],n=0;n<t.length;n++)i[n]=t[n].g();return r.f[e]=t,Cn(r,e,i)};fe.addToRepeatedWrapperField=function(r,e,t,i,n){av(r,i,e);var s=r.f[e];return s||(s=r.f[e]=[]),t=t||new i,r=ri(r,e),n!=null?(s.splice(n,0,t),r.splice(n,0,t.g())):(s.push(t),r.push(t.g())),t};fe.toMap=function(r,e,t,i){for(var n={},s=0;s<r.length;s++)n[e.call(r[s])]=t?t.call(r[s],i,r[s]):r[s];return n};function cv(r){if(r.f)for(var e in r.f){var t=r.f[e];if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&t[i].g();else t&&t.g()}}fe.prototype.g=function(){return cv(this),this.u};fe.prototype.toArray=fe.prototype.g;fe.prototype.toString=function(){return cv(this),this.u.toString()};fe.prototype.getExtension=function(r){if(this.i){this.f||(this.f={});var e=r.ma;if(r.na){if(r.F())return this.f[e]||(this.f[e]=xl(this.i[e]||[],function(t){return new r.la(t)})),this.f[e]}else if(r.F())return!this.f[e]&&this.i[e]&&(this.f[e]=new r.la(this.i[e])),this.f[e];return this.i[e]}};fe.prototype.getExtension=fe.prototype.getExtension;fe.prototype.Kc=function(r,e){this.f||(this.f={}),zf(this);var t=r.ma;return r.na?(e=e||[],r.F()?(this.f[t]=e,this.i[t]=xl(e,function(i){return i.g()})):this.i[t]=e):r.F()?(this.f[t]=e,this.i[t]=e&&e.g()):this.i[t]=e,this};fe.prototype.setExtension=fe.prototype.Kc;fe.difference=function(r,e){if(!(r instanceof e.constructor))throw Error("Messages have different types.");var t=r.g();e=e.g();var i=[],n=0,s=t.length>e.length?t.length:e.length;for(r.b&&(i[0]=r.b,n=1);n<s;n++)Ll(t[n],e[n])||(i[n]=e[n]);return new r.constructor(i)};fe.equals=function(r,e){return r==e||!(!r||!e)&&r instanceof e.constructor&&Ll(r.g(),e.g())};function Tb(r,e){r=r||{},e=e||{};var t={},i;for(i in r)t[i]=0;for(i in e)t[i]=0;for(i in t)if(!Ll(r[i],e[i]))return!1;return!0}fe.compareExtensions=Tb;function Ll(r,e){if(r==e)return!0;if(!C_(r)||!C_(e))return typeof r=="number"&&isNaN(r)||typeof e=="number"&&isNaN(e)?String(r)==String(e):!1;if(r.constructor!=e.constructor)return!1;if(Hf&&r.constructor===Uint8Array){if(r.length!=e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!=e[t])return!1;return!0}if(r.constructor===Array){var i=void 0,n=void 0,s=Math.max(r.length,e.length);for(t=0;t<s;t++){var a=r[t],c=e[t];if(a&&a.constructor==Object&&(z(i===void 0),z(t===r.length-1),i=a,a=void 0),c&&c.constructor==Object&&(z(n===void 0),z(t===e.length-1),n=c,c=void 0),!Ll(a,c))return!1}return i||n?(i=i||{},n=n||{},Tb(i,n)):!0}if(r.constructor===Object)return Tb(r,e);throw Error("Invalid type in JSPB array")}fe.compareFields=Ll;fe.prototype.Bb=function(){return jf(this)};fe.prototype.cloneMessage=fe.prototype.Bb;fe.prototype.clone=function(){return jf(this)};fe.prototype.clone=fe.prototype.clone;fe.clone=function(r){return jf(r)};function jf(r){return new r.constructor(Ab(r.g()))}fe.copyInto=function(r,e){Fi(r,fe),Fi(e,fe),z(r.constructor==e.constructor,"Copy source and target message should have the same type."),r=jf(r);for(var t=e.g(),i=r.g(),n=t.length=0;n<i.length;n++)t[n]=i[n];e.f=r.f,e.i=r.i};function Ab(r){if(Array.isArray(r)){for(var e=Array(r.length),t=0;t<r.length;t++){var i=r[t];i!=null&&(e[t]=typeof i=="object"?Ab(z(i)):i)}return e}if(Hf&&r instanceof Uint8Array)return new Uint8Array(r);e={};for(t in r)i=r[t],i!=null&&(e[t]=typeof i=="object"?Ab(z(i)):i);return e}fe.registerMessageType=function(r,e){e.we=r};var Ni={dump:function(r){return Fi(r,fe,"jspb.Message instance expected"),z(r.getExtension,"Only unobfuscated and unoptimized compilation modes supported."),Ni.X(r)}};Ee("jspb.debug.dump",Ni.dump,void 0);Ni.X=function(r){var e=kn(r);if(e=="number"||e=="string"||e=="boolean"||e=="null"||e=="undefined"||typeof Uint8Array<"u"&&r instanceof Uint8Array)return r;if(e=="array")return YI(r),xl(r,Ni.X);if(r instanceof je){var t={};r=r.entries();for(var i=r.next();!i.done;i=r.next())t[i.value[0]]=Ni.X(i.value[1]);return t}Fi(r,fe,"Only messages expected: "+r),e=r.constructor;var n={$name:e.name||e.displayName};for(c in e.prototype){var s=/^get([A-Z]\w*)/.exec(c);if(s&&c!="getExtension"&&c!="getJsPbMessageId"){var a="has"+s[1];(!r[a]||r[a]())&&(a=r[c](),n[Ni.$a(s[1])]=Ni.X(a))}}if(r.extensionObject_)return n.$extensions="Recursive dumping of extensions not supported in compiled code. Switch to uncompiled or dump extension object directly",n;for(i in e.extensions)if(/^\d+$/.test(i)){a=e.extensions[i];var c=r.getExtension(a);s=void 0,a=a.Ba;var u=[],p=0;for(s in a)u[p++]=s;s=u[0],c!=null&&(t||(t=n.$extensions={}),t[Ni.$a(s)]=Ni.X(c))}return n};Ni.$a=function(r){return r.replace(/^[A-Z]/,function(e){return e.toLowerCase()})};function ne(){this.a=[]}Ee("jspb.BinaryEncoder",ne,void 0);ne.prototype.length=function(){return this.a.length};ne.prototype.length=ne.prototype.length;ne.prototype.end=function(){var r=this.a;return this.a=[],r};ne.prototype.end=ne.prototype.end;ne.prototype.l=function(r,e){for(z(r==Math.floor(r)),z(e==Math.floor(e)),z(0<=r&&4294967296>r),z(0<=e&&4294967296>e);0<e||127<r;)this.a.push(r&127|128),r=(r>>>7|e<<25)>>>0,e>>>=7;this.a.push(r)};ne.prototype.writeSplitVarint64=ne.prototype.l;ne.prototype.A=function(r,e){z(r==Math.floor(r)),z(e==Math.floor(e)),z(0<=r&&4294967296>r),z(0<=e&&4294967296>e),this.s(r),this.s(e)};ne.prototype.writeSplitFixed64=ne.prototype.A;ne.prototype.j=function(r){for(z(r==Math.floor(r)),z(0<=r&&4294967296>r);127<r;)this.a.push(r&127|128),r>>>=7;this.a.push(r)};ne.prototype.writeUnsignedVarint32=ne.prototype.j;ne.prototype.M=function(r){if(z(r==Math.floor(r)),z(-2147483648<=r&&2147483648>r),0<=r)this.j(r);else{for(var e=0;9>e;e++)this.a.push(r&127|128),r>>=7;this.a.push(1)}};ne.prototype.writeSignedVarint32=ne.prototype.M;ne.prototype.va=function(r){z(r==Math.floor(r)),z(0<=r&&18446744073709552e3>r),vl(r),this.l(xt,wt)};ne.prototype.writeUnsignedVarint64=ne.prototype.va;ne.prototype.ua=function(r){z(r==Math.floor(r)),z(-9223372036854776e3<=r&&9223372036854776e3>r),vl(r),this.l(xt,wt)};ne.prototype.writeSignedVarint64=ne.prototype.ua;ne.prototype.wa=function(r){z(r==Math.floor(r)),z(-2147483648<=r&&2147483648>r),this.j((r<<1^r>>31)>>>0)};ne.prototype.writeZigzagVarint32=ne.prototype.wa;ne.prototype.xa=function(r){z(r==Math.floor(r)),z(-9223372036854776e3<=r&&9223372036854776e3>r),V_(r),this.l(xt,wt)};ne.prototype.writeZigzagVarint64=ne.prototype.xa;ne.prototype.Ta=function(r){this.W(Sl(r))};ne.prototype.writeZigzagVarint64String=ne.prototype.Ta;ne.prototype.W=function(r){var e=this;bo(r),Of(xt,wt,function(t,i){e.l(t>>>0,i>>>0)})};ne.prototype.writeZigzagVarintHash64=ne.prototype.W;ne.prototype.be=function(r){z(r==Math.floor(r)),z(0<=r&&256>r),this.a.push(r>>>0&255)};ne.prototype.writeUint8=ne.prototype.be;ne.prototype.ae=function(r){z(r==Math.floor(r)),z(0<=r&&65536>r),this.a.push(r>>>0&255),this.a.push(r>>>8&255)};ne.prototype.writeUint16=ne.prototype.ae;ne.prototype.s=function(r){z(r==Math.floor(r)),z(0<=r&&4294967296>r),this.a.push(r>>>0&255),this.a.push(r>>>8&255),this.a.push(r>>>16&255),this.a.push(r>>>24&255)};ne.prototype.writeUint32=ne.prototype.s;ne.prototype.V=function(r){z(r==Math.floor(r)),z(0<=r&&18446744073709552e3>r),Mb(r),this.s(xt),this.s(wt)};ne.prototype.writeUint64=ne.prototype.V;ne.prototype.Qc=function(r){z(r==Math.floor(r)),z(-128<=r&&128>r),this.a.push(r>>>0&255)};ne.prototype.writeInt8=ne.prototype.Qc;ne.prototype.Pc=function(r){z(r==Math.floor(r)),z(-32768<=r&&32768>r),this.a.push(r>>>0&255),this.a.push(r>>>8&255)};ne.prototype.writeInt16=ne.prototype.Pc;ne.prototype.S=function(r){z(r==Math.floor(r)),z(-2147483648<=r&&2147483648>r),this.a.push(r>>>0&255),this.a.push(r>>>8&255),this.a.push(r>>>16&255),this.a.push(r>>>24&255)};ne.prototype.writeInt32=ne.prototype.S;ne.prototype.T=function(r){z(r==Math.floor(r)),z(-9223372036854776e3<=r&&9223372036854776e3>r),vl(r),this.A(xt,wt)};ne.prototype.writeInt64=ne.prototype.T;ne.prototype.ka=function(r){z(r==Math.floor(r)),z(-9223372036854776e3<=+r&&9223372036854776e3>+r),bo(Sl(r)),this.A(xt,wt)};ne.prototype.writeInt64String=ne.prototype.ka;ne.prototype.L=function(r){z(r===1/0||r===-1/0||isNaN(r)||-34028234663852886e22<=r&&34028234663852886e22>=r),G_(r),this.s(xt)};ne.prototype.writeFloat=ne.prototype.L;ne.prototype.J=function(r){z(r===1/0||r===-1/0||isNaN(r)||-17976931348623157e292<=r&&17976931348623157e292>=r),W_(r),this.s(xt),this.s(wt)};ne.prototype.writeDouble=ne.prototype.J;ne.prototype.I=function(r){z(typeof r=="boolean"||typeof r=="number"),this.a.push(r?1:0)};ne.prototype.writeBool=ne.prototype.I;ne.prototype.R=function(r){z(r==Math.floor(r)),z(-2147483648<=r&&2147483648>r),this.M(r)};ne.prototype.writeEnum=ne.prototype.R;ne.prototype.ja=function(r){this.a.push.apply(this.a,r)};ne.prototype.writeBytes=ne.prototype.ja;ne.prototype.N=function(r){bo(r),this.l(xt,wt)};ne.prototype.writeVarintHash64=ne.prototype.N;ne.prototype.K=function(r){bo(r),this.s(xt),this.s(wt)};ne.prototype.writeFixedHash64=ne.prototype.K;ne.prototype.U=function(r){var e=this.a.length;qI(r);for(var t=0;t<r.length;t++){var i=r.charCodeAt(t);if(128>i)this.a.push(i);else if(2048>i)this.a.push(i>>6|192),this.a.push(i&63|128);else if(65536>i)if(55296<=i&&56319>=i&&t+1<r.length){var n=r.charCodeAt(t+1);56320<=n&&57343>=n&&(i=1024*(i-55296)+n-56320+65536,this.a.push(i>>18|240),this.a.push(i>>12&63|128),this.a.push(i>>6&63|128),this.a.push(i&63|128),t++)}else this.a.push(i>>12|224),this.a.push(i>>6&63|128),this.a.push(i&63|128)}return this.a.length-e};ne.prototype.writeString=ne.prototype.U;function Be(r,e){this.lo=r,this.hi=e}Ee("jspb.arith.UInt64",Be,void 0);Be.prototype.cmp=function(r){return this.hi<r.hi||this.hi==r.hi&&this.lo<r.lo?-1:this.hi==r.hi&&this.lo==r.lo?0:1};Be.prototype.cmp=Be.prototype.cmp;Be.prototype.La=function(){return new Be((this.lo>>>1|(this.hi&1)<<31)>>>0,this.hi>>>1>>>0)};Be.prototype.rightShift=Be.prototype.La;Be.prototype.Da=function(){return new Be(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)};Be.prototype.leftShift=Be.prototype.Da;Be.prototype.cb=function(){return!!(this.hi&2147483648)};Be.prototype.msb=Be.prototype.cb;Be.prototype.Ob=function(){return!!(this.lo&1)};Be.prototype.lsb=Be.prototype.Ob;Be.prototype.Ua=function(){return this.lo==0&&this.hi==0};Be.prototype.zero=Be.prototype.Ua;Be.prototype.add=function(r){return new Be((this.lo+r.lo&4294967295)>>>0>>>0,((this.hi+r.hi&4294967295)>>>0)+(4294967296<=this.lo+r.lo?1:0)>>>0)};Be.prototype.add=Be.prototype.add;Be.prototype.sub=function(r){return new Be((this.lo-r.lo&4294967295)>>>0>>>0,((this.hi-r.hi&4294967295)>>>0)-(0>this.lo-r.lo?1:0)>>>0)};Be.prototype.sub=Be.prototype.sub;function kb(r,e){var t=r&65535;r>>>=16;var i=e&65535,n=e>>>16;for(e=t*i+65536*(t*n&65535)+65536*(r*i&65535),t=r*n+(t*n>>>16)+(r*i>>>16);4294967296<=e;)e-=4294967296,t+=1;return new Be(e>>>0,t>>>0)}Be.mul32x32=kb;Be.prototype.eb=function(r){var e=kb(this.lo,r);return r=kb(this.hi,r),r.hi=r.lo,r.lo=0,e.add(r)};Be.prototype.mul=Be.prototype.eb;Be.prototype.Xa=function(r){if(r==0)return[];var e=new Be(0,0),t=new Be(this.lo,this.hi);r=new Be(r,0);for(var i=new Be(1,0);!r.cb();)r=r.Da(),i=i.Da();for(;!i.Ua();)0>=r.cmp(t)&&(e=e.add(i),t=t.sub(r)),r=r.La(),i=i.La();return[e,t]};Be.prototype.div=Be.prototype.Xa;Be.prototype.toString=function(){for(var r="",e=this;!e.Ua();){e=e.Xa(10);var t=e[0];r=e[1].lo+r,e=t}return r==""&&(r="0"),r};Be.prototype.toString=Be.prototype.toString;function ja(r){for(var e=new Be(0,0),t=new Be(0,0),i=0;i<r.length;i++){if("0">r[i]||"9"<r[i])return null;t.lo=parseInt(r[i],10),e=e.eb(10).add(t)}return e}Be.fromString=ja;Be.prototype.clone=function(){return new Be(this.lo,this.hi)};Be.prototype.clone=Be.prototype.clone;function fr(r,e){this.lo=r,this.hi=e}Ee("jspb.arith.Int64",fr,void 0);fr.prototype.add=function(r){return new fr((this.lo+r.lo&4294967295)>>>0>>>0,((this.hi+r.hi&4294967295)>>>0)+(4294967296<=this.lo+r.lo?1:0)>>>0)};fr.prototype.add=fr.prototype.add;fr.prototype.sub=function(r){return new fr((this.lo-r.lo&4294967295)>>>0>>>0,((this.hi-r.hi&4294967295)>>>0)-(0>this.lo-r.lo?1:0)>>>0)};fr.prototype.sub=fr.prototype.sub;fr.prototype.clone=function(){return new fr(this.lo,this.hi)};fr.prototype.clone=fr.prototype.clone;fr.prototype.toString=function(){var r=(this.hi&2147483648)!=0,e=new Be(this.lo,this.hi);return r&&(e=new Be(0,0).sub(e)),(r?"-":"")+e.toString()};fr.prototype.toString=fr.prototype.toString;function Vf(r){var e=0<r.length&&r[0]=="-";return e&&(r=r.substring(1)),r=ja(r),r===null?null:(e&&(r=new Be(0,0).sub(r)),new fr(r.lo,r.hi))}fr.fromString=Vf;function x(){this.c=[],this.b=0,this.a=new ne,this.h=[]}Ee("jspb.BinaryWriter",x,void 0);function lv(r,e){var t=r.a.end();r.c.push(t),r.c.push(e),r.b+=t.length+e.length}function Vt(r,e){return Ue(r,e,2),e=r.a.end(),r.c.push(e),r.b+=e.length,e.push(r.b),e}function Gt(r,e){var t=e.pop();for(t=r.b+r.a.length()-t,z(0<=t);127<t;)e.push(t&127|128),t>>>=7,r.b++;e.push(t),r.b++}x.prototype.pb=function(r,e,t){lv(this,r.subarray(e,t))};x.prototype.writeSerializedMessage=x.prototype.pb;x.prototype.Pb=function(r,e,t){r!=null&&e!=null&&t!=null&&this.pb(r,e,t)};x.prototype.maybeWriteSerializedMessage=x.prototype.Pb;x.prototype.reset=function(){this.c=[],this.a.end(),this.b=0,this.h=[]};x.prototype.reset=x.prototype.reset;x.prototype.ab=function(){z(this.h.length==0);for(var r=new Uint8Array(this.b+this.a.length()),e=this.c,t=e.length,i=0,n=0;n<t;n++){var s=e[n];r.set(s,i),i+=s.length}return e=this.a.end(),r.set(e,i),i+=e.length,z(i==r.length),this.c=[r],r};x.prototype.getResultBuffer=x.prototype.ab;x.prototype.Kb=function(r){return H_(this.ab(),r)};x.prototype.getResultBase64String=x.prototype.Kb;x.prototype.Va=function(r){this.h.push(Vt(this,r))};x.prototype.beginSubMessage=x.prototype.Va;x.prototype.Ya=function(){z(0<=this.h.length),Gt(this,this.h.pop())};x.prototype.endSubMessage=x.prototype.Ya;function Ue(r,e,t){z(1<=e&&e==Math.floor(e)),r.a.j(8*e+t)}x.prototype.Nc=function(r,e,t){switch(r){case 1:this.J(e,t);break;case 2:this.L(e,t);break;case 3:this.T(e,t);break;case 4:this.V(e,t);break;case 5:this.S(e,t);break;case 6:this.Qa(e,t);break;case 7:this.Pa(e,t);break;case 8:this.I(e,t);break;case 9:this.U(e,t);break;case 10:ar("Group field type not supported in writeAny()");break;case 11:ar("Message field type not supported in writeAny()");break;case 12:this.ja(e,t);break;case 13:this.s(e,t);break;case 14:this.R(e,t);break;case 15:this.Ra(e,t);break;case 16:this.Sa(e,t);break;case 17:this.rb(e,t);break;case 18:this.sb(e,t);break;case 30:this.K(e,t);break;case 31:this.N(e,t);break;default:ar("Invalid field type in writeAny()")}};x.prototype.writeAny=x.prototype.Nc;function Bb(r,e,t){t!=null&&(Ue(r,e,0),r.a.j(t))}function Ob(r,e,t){t!=null&&(Ue(r,e,0),r.a.M(t))}x.prototype.S=function(r,e){e!=null&&(z(-2147483648<=e&&2147483648>e),Ob(this,r,e))};x.prototype.writeInt32=x.prototype.S;x.prototype.ob=function(r,e){e!=null&&(e=parseInt(e,10),z(-2147483648<=e&&2147483648>e),Ob(this,r,e))};x.prototype.writeInt32String=x.prototype.ob;x.prototype.T=function(r,e){e!=null&&(z(-9223372036854776e3<=e&&9223372036854776e3>e),e!=null&&(Ue(this,r,0),this.a.ua(e)))};x.prototype.writeInt64=x.prototype.T;x.prototype.ka=function(r,e){e!=null&&(e=Vf(e),Ue(this,r,0),this.a.l(e.lo,e.hi))};x.prototype.writeInt64String=x.prototype.ka;x.prototype.s=function(r,e){e!=null&&(z(0<=e&&4294967296>e),Bb(this,r,e))};x.prototype.writeUint32=x.prototype.s;x.prototype.ub=function(r,e){e!=null&&(e=parseInt(e,10),z(0<=e&&4294967296>e),Bb(this,r,e))};x.prototype.writeUint32String=x.prototype.ub;x.prototype.V=function(r,e){e!=null&&(z(0<=e&&18446744073709552e3>e),e!=null&&(Ue(this,r,0),this.a.va(e)))};x.prototype.writeUint64=x.prototype.V;x.prototype.vb=function(r,e){e!=null&&(e=ja(e),Ue(this,r,0),this.a.l(e.lo,e.hi))};x.prototype.writeUint64String=x.prototype.vb;x.prototype.rb=function(r,e){e!=null&&(z(-2147483648<=e&&2147483648>e),e!=null&&(Ue(this,r,0),this.a.wa(e)))};x.prototype.writeSint32=x.prototype.rb;x.prototype.sb=function(r,e){e!=null&&(z(-9223372036854776e3<=e&&9223372036854776e3>e),e!=null&&(Ue(this,r,0),this.a.xa(e)))};x.prototype.writeSint64=x.prototype.sb;x.prototype.$d=function(r,e){e!=null&&e!=null&&(Ue(this,r,0),this.a.W(e))};x.prototype.writeSintHash64=x.prototype.$d;x.prototype.Zd=function(r,e){e!=null&&e!=null&&(Ue(this,r,0),this.a.Ta(e))};x.prototype.writeSint64String=x.prototype.Zd;x.prototype.Pa=function(r,e){e!=null&&(z(0<=e&&4294967296>e),Ue(this,r,5),this.a.s(e))};x.prototype.writeFixed32=x.prototype.Pa;x.prototype.Qa=function(r,e){e!=null&&(z(0<=e&&18446744073709552e3>e),Ue(this,r,1),this.a.V(e))};x.prototype.writeFixed64=x.prototype.Qa;x.prototype.nb=function(r,e){e!=null&&(e=ja(e),Ue(this,r,1),this.a.A(e.lo,e.hi))};x.prototype.writeFixed64String=x.prototype.nb;x.prototype.Ra=function(r,e){e!=null&&(z(-2147483648<=e&&2147483648>e),Ue(this,r,5),this.a.S(e))};x.prototype.writeSfixed32=x.prototype.Ra;x.prototype.Sa=function(r,e){e!=null&&(z(-9223372036854776e3<=e&&9223372036854776e3>e),Ue(this,r,1),this.a.T(e))};x.prototype.writeSfixed64=x.prototype.Sa;x.prototype.qb=function(r,e){e!=null&&(e=Vf(e),Ue(this,r,1),this.a.A(e.lo,e.hi))};x.prototype.writeSfixed64String=x.prototype.qb;x.prototype.L=function(r,e){e!=null&&(Ue(this,r,5),this.a.L(e))};x.prototype.writeFloat=x.prototype.L;x.prototype.J=function(r,e){e!=null&&(Ue(this,r,1),this.a.J(e))};x.prototype.writeDouble=x.prototype.J;x.prototype.I=function(r,e){e!=null&&(z(typeof e=="boolean"||typeof e=="number"),Ue(this,r,0),this.a.I(e))};x.prototype.writeBool=x.prototype.I;x.prototype.R=function(r,e){e!=null&&(z(-2147483648<=e&&2147483648>e),Ue(this,r,0),this.a.M(e))};x.prototype.writeEnum=x.prototype.R;x.prototype.U=function(r,e){e!=null&&(r=Vt(this,r),this.a.U(e),Gt(this,r))};x.prototype.writeString=x.prototype.U;x.prototype.ja=function(r,e){e!=null&&(e=Ff(e),Ue(this,r,2),this.a.j(e.length),lv(this,e))};x.prototype.writeBytes=x.prototype.ja;x.prototype.Rc=function(r,e,t){e!=null&&(r=Vt(this,r),t(e,this),Gt(this,r))};x.prototype.writeMessage=x.prototype.Rc;x.prototype.Sc=function(r,e,t){e!=null&&(Ue(this,1,3),Ue(this,2,0),this.a.M(r),r=Vt(this,3),t(e,this),Gt(this,r),Ue(this,1,4))};x.prototype.writeMessageSet=x.prototype.Sc;x.prototype.Oc=function(r,e,t){e!=null&&(Ue(this,r,3),t(e,this),Ue(this,r,4))};x.prototype.writeGroup=x.prototype.Oc;x.prototype.K=function(r,e){e!=null&&(z(e.length==8),Ue(this,r,1),this.a.K(e))};x.prototype.writeFixedHash64=x.prototype.K;x.prototype.N=function(r,e){e!=null&&(z(e.length==8),Ue(this,r,0),this.a.N(e))};x.prototype.writeVarintHash64=x.prototype.N;x.prototype.A=function(r,e,t){Ue(this,r,1),this.a.A(e,t)};x.prototype.writeSplitFixed64=x.prototype.A;x.prototype.l=function(r,e,t){Ue(this,r,0),this.a.l(e,t)};x.prototype.writeSplitVarint64=x.prototype.l;x.prototype.tb=function(r,e,t){Ue(this,r,0);var i=this.a;Of(e,t,function(n,s){i.l(n>>>0,s>>>0)})};x.prototype.writeSplitZigzagVarint64=x.prototype.tb;x.prototype.Ed=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)Ob(this,r,e[t])};x.prototype.writeRepeatedInt32=x.prototype.Ed;x.prototype.Fd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.ob(r,e[t])};x.prototype.writeRepeatedInt32String=x.prototype.Fd;x.prototype.Gd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(Ue(this,r,0),this.a.ua(i))}};x.prototype.writeRepeatedInt64=x.prototype.Gd;x.prototype.Qd=function(r,e,t,i){if(e!=null)for(var n=0;n<e.length;n++)this.A(r,t(e[n]),i(e[n]))};x.prototype.writeRepeatedSplitFixed64=x.prototype.Qd;x.prototype.Rd=function(r,e,t,i){if(e!=null)for(var n=0;n<e.length;n++)this.l(r,t(e[n]),i(e[n]))};x.prototype.writeRepeatedSplitVarint64=x.prototype.Rd;x.prototype.Sd=function(r,e,t,i){if(e!=null)for(var n=0;n<e.length;n++)this.tb(r,t(e[n]),i(e[n]))};x.prototype.writeRepeatedSplitZigzagVarint64=x.prototype.Sd;x.prototype.Hd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.ka(r,e[t])};x.prototype.writeRepeatedInt64String=x.prototype.Hd;x.prototype.Ud=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)Bb(this,r,e[t])};x.prototype.writeRepeatedUint32=x.prototype.Ud;x.prototype.Vd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.ub(r,e[t])};x.prototype.writeRepeatedUint32String=x.prototype.Vd;x.prototype.Wd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(Ue(this,r,0),this.a.va(i))}};x.prototype.writeRepeatedUint64=x.prototype.Wd;x.prototype.Xd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.vb(r,e[t])};x.prototype.writeRepeatedUint64String=x.prototype.Xd;x.prototype.Md=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(Ue(this,r,0),this.a.wa(i))}};x.prototype.writeRepeatedSint32=x.prototype.Md;x.prototype.Nd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(Ue(this,r,0),this.a.xa(i))}};x.prototype.writeRepeatedSint64=x.prototype.Nd;x.prototype.Od=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(Ue(this,r,0),this.a.Ta(i))}};x.prototype.writeRepeatedSint64String=x.prototype.Od;x.prototype.Pd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++){var i=e[t];i!=null&&(Ue(this,r,0),this.a.W(i))}};x.prototype.writeRepeatedSintHash64=x.prototype.Pd;x.prototype.yd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.Pa(r,e[t])};x.prototype.writeRepeatedFixed32=x.prototype.yd;x.prototype.zd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.Qa(r,e[t])};x.prototype.writeRepeatedFixed64=x.prototype.zd;x.prototype.Ad=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.nb(r,e[t])};x.prototype.writeRepeatedFixed64String=x.prototype.Ad;x.prototype.Jd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.Ra(r,e[t])};x.prototype.writeRepeatedSfixed32=x.prototype.Jd;x.prototype.Kd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.Sa(r,e[t])};x.prototype.writeRepeatedSfixed64=x.prototype.Kd;x.prototype.Ld=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.qb(r,e[t])};x.prototype.writeRepeatedSfixed64String=x.prototype.Ld;x.prototype.Cd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.L(r,e[t])};x.prototype.writeRepeatedFloat=x.prototype.Cd;x.prototype.wd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.J(r,e[t])};x.prototype.writeRepeatedDouble=x.prototype.wd;x.prototype.ud=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.I(r,e[t])};x.prototype.writeRepeatedBool=x.prototype.ud;x.prototype.xd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.R(r,e[t])};x.prototype.writeRepeatedEnum=x.prototype.xd;x.prototype.Td=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.U(r,e[t])};x.prototype.writeRepeatedString=x.prototype.Td;x.prototype.vd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.ja(r,e[t])};x.prototype.writeRepeatedBytes=x.prototype.vd;x.prototype.Id=function(r,e,t){if(e!=null)for(var i=0;i<e.length;i++){var n=Vt(this,r);t(e[i],this),Gt(this,n)}};x.prototype.writeRepeatedMessage=x.prototype.Id;x.prototype.Dd=function(r,e,t){if(e!=null)for(var i=0;i<e.length;i++)Ue(this,r,3),t(e[i],this),Ue(this,r,4)};x.prototype.writeRepeatedGroup=x.prototype.Dd;x.prototype.Bd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.K(r,e[t])};x.prototype.writeRepeatedFixedHash64=x.prototype.Bd;x.prototype.Yd=function(r,e){if(e!=null)for(var t=0;t<e.length;t++)this.N(r,e[t])};x.prototype.writeRepeatedVarintHash64=x.prototype.Yd;x.prototype.ad=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.M(e[t]);Gt(this,r)}};x.prototype.writePackedInt32=x.prototype.ad;x.prototype.bd=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.M(parseInt(e[t],10));Gt(this,r)}};x.prototype.writePackedInt32String=x.prototype.bd;x.prototype.cd=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.ua(e[t]);Gt(this,r)}};x.prototype.writePackedInt64=x.prototype.cd;x.prototype.md=function(r,e,t,i){if(e!=null){r=Vt(this,r);for(var n=0;n<e.length;n++)this.a.A(t(e[n]),i(e[n]));Gt(this,r)}};x.prototype.writePackedSplitFixed64=x.prototype.md;x.prototype.nd=function(r,e,t,i){if(e!=null){r=Vt(this,r);for(var n=0;n<e.length;n++)this.a.l(t(e[n]),i(e[n]));Gt(this,r)}};x.prototype.writePackedSplitVarint64=x.prototype.nd;x.prototype.od=function(r,e,t,i){if(e!=null){r=Vt(this,r);for(var n=this.a,s=0;s<e.length;s++)Of(t(e[s]),i(e[s]),function(a,c){n.l(a>>>0,c>>>0)});Gt(this,r)}};x.prototype.writePackedSplitZigzagVarint64=x.prototype.od;x.prototype.dd=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++){var i=Vf(e[t]);this.a.l(i.lo,i.hi)}Gt(this,r)}};x.prototype.writePackedInt64String=x.prototype.dd;x.prototype.pd=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.j(e[t]);Gt(this,r)}};x.prototype.writePackedUint32=x.prototype.pd;x.prototype.qd=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.j(parseInt(e[t],10));Gt(this,r)}};x.prototype.writePackedUint32String=x.prototype.qd;x.prototype.rd=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.va(e[t]);Gt(this,r)}};x.prototype.writePackedUint64=x.prototype.rd;x.prototype.sd=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++){var i=ja(e[t]);this.a.l(i.lo,i.hi)}Gt(this,r)}};x.prototype.writePackedUint64String=x.prototype.sd;x.prototype.hd=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.wa(e[t]);Gt(this,r)}};x.prototype.writePackedSint32=x.prototype.hd;x.prototype.jd=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.xa(e[t]);Gt(this,r)}};x.prototype.writePackedSint64=x.prototype.jd;x.prototype.kd=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.W(Sl(e[t]));Gt(this,r)}};x.prototype.writePackedSint64String=x.prototype.kd;x.prototype.ld=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.W(e[t]);Gt(this,r)}};x.prototype.writePackedSintHash64=x.prototype.ld;x.prototype.Wc=function(r,e){if(e!=null&&e.length)for(Ue(this,r,2),this.a.j(4*e.length),r=0;r<e.length;r++)this.a.s(e[r])};x.prototype.writePackedFixed32=x.prototype.Wc;x.prototype.Xc=function(r,e){if(e!=null&&e.length)for(Ue(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++)this.a.V(e[r])};x.prototype.writePackedFixed64=x.prototype.Xc;x.prototype.Yc=function(r,e){if(e!=null&&e.length)for(Ue(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++){var t=ja(e[r]);this.a.A(t.lo,t.hi)}};x.prototype.writePackedFixed64String=x.prototype.Yc;x.prototype.ed=function(r,e){if(e!=null&&e.length)for(Ue(this,r,2),this.a.j(4*e.length),r=0;r<e.length;r++)this.a.S(e[r])};x.prototype.writePackedSfixed32=x.prototype.ed;x.prototype.fd=function(r,e){if(e!=null&&e.length)for(Ue(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++)this.a.T(e[r])};x.prototype.writePackedSfixed64=x.prototype.fd;x.prototype.gd=function(r,e){if(e!=null&&e.length)for(Ue(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++)this.a.ka(e[r])};x.prototype.writePackedSfixed64String=x.prototype.gd;x.prototype.$c=function(r,e){if(e!=null&&e.length)for(Ue(this,r,2),this.a.j(4*e.length),r=0;r<e.length;r++)this.a.L(e[r])};x.prototype.writePackedFloat=x.prototype.$c;x.prototype.Uc=function(r,e){if(e!=null&&e.length)for(Ue(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++)this.a.J(e[r])};x.prototype.writePackedDouble=x.prototype.Uc;x.prototype.Tc=function(r,e){if(e!=null&&e.length)for(Ue(this,r,2),this.a.j(e.length),r=0;r<e.length;r++)this.a.I(e[r])};x.prototype.writePackedBool=x.prototype.Tc;x.prototype.Vc=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.R(e[t]);Gt(this,r)}};x.prototype.writePackedEnum=x.prototype.Vc;x.prototype.Zc=function(r,e){if(e!=null&&e.length)for(Ue(this,r,2),this.a.j(8*e.length),r=0;r<e.length;r++)this.a.K(e[r])};x.prototype.writePackedFixedHash64=x.prototype.Zc;x.prototype.td=function(r,e){if(e!=null&&e.length){r=Vt(this,r);for(var t=0;t<e.length;t++)this.a.N(e[t]);Gt(this,r)}};x.prototype.writePackedVarintHash64=x.prototype.td;typeof yr=="object"&&(yr.debug=Ni,yr.Map=je,yr.Message=fe,yr.BinaryReader=E,yr.BinaryWriter=x,yr.ExtensionFieldInfo=bl,yr.ExtensionFieldBinaryInfo=Z_,yr.exportSymbol=VI,yr.inherits=GI,yr.object={extend:WI},yr.typeOf=kn)});var tu=class extends Laya.Scene{};var mt=class{constructor(){this._keys=[];this.THIS_ID="id"}init(e){for(let t in e){this._keys.push(t);let i=e[t];e[t]instanceof String&&String(e[t]).indexOf("[[")>=0&&(i=JSON.parse(e[t])),this[t]=i}}checkItems(){}};var vc=class extends mt{};var Ie=class{constructor(){this._values=[];this._keys=[];this.SERIALIZATION_NUM=new Date().getTime()}get values(){return this._values}get keys(){return this._keys}set(e,t){let i=this.indexOf(e);if(i>=0){this._values[i]=t;return}this._keys.push(e),this._values.push(t)}unshift(e,t){let i=this.indexOf(e);if(i>=0){this._values[i]=t;return}this._keys.unshift(e),this._values.unshift(t)}indexOf(e){let t=this._keys.indexOf(e);return t>=0?t:(e=e instanceof String?Number(e):e instanceof Number?e.toString():e,this._keys.indexOf(e))}get(e){let t=this.indexOf(e);return t<0?null:this._values[t]}remove(e){let t=this.indexOf(e);return t>=0?(this._keys.splice(t,1),this._values.splice(t,1),!0):!1}clear(){this._values.length=0,this._keys.length=0}};var Te=class Te{constructor(){}static get LoginType(){return Te._LoginType}static set LoginType(e){Te._LoginType=e,Te._LoginType&&Te._LoginType!=""&&Laya.LocalStorage.setItem(Te.COOKIE_CF_LoginType,Te._LoginType)}static get isWhiteList(){return!0}static get intance(){return Te._instance||(Te._instance=new Te),Te._instance}static get server(){return getServer()}static get vType(){return getVType()}static get vaddress(){return getVAddress()}static get requestTime(){return 0}static get loginTime(){return 0}static set m_iTimeFrame(e){if(e>1500){let t=function(){Te._m_iTimeFrame=0};Te._m_iTimeFrame=e,Laya.timer.clear(Laya.timer,t),Laya.timer.once(500,Laya.timer,t)}}static get m_iTimeFrame(){return Te._m_iTimeFrame}};Te.IsRelease=!1,Te.m_bInstantGame=!1,Te.useWebVersion=!1,Te.m_strVersionEX="V003",Te.m_bIsMobWeb=!1,Te.m_strWebTag="",Te.Js_Version="1",Te.Game_Version="20231227_01",Te.App_Version="1.0.0",Te.SDK_Version="1.0.0",Te.M_strCountry="1",Te.M_bAppData=!1,Te.bookingId=0,Te.teamId=0,Te.referral="",Te.showHeartLog=!1,Te.ignoreLang=!1,Te.ignoreSheetNo=!1,Te.m_bIsIphoneX=!1,Te.Debug=0,Te.Res=0,Te.isTest=!0,Te.Server_URL="",Te.IP_User="",Te.Plantform_APPID="17",Te.ServerId=22310001,Te.Login_UID="-1",Te._LoginType="gamecenter",Te.isInto=!1,Te.needDraw=!1,Te.isFull=!1,Te.justFull=!1,Te.Login_UDID="81BC19A8-B49B-47CC-BEFE-193E723B521A",Te.Device_Info="",Te.FCM_Token="",Te.APP_IsRelease=!0,Te.User_Lan="en",Te.UserAgent="",Te.Login_UserName="",Te.isWhite=!0,Te.APP_RES="",Te.COOKIE_CF_LAN="COOKIE_GG_LAN",Te.COOKIE_CF_LoginType="COOKIE_CF_LoginType",Te.IPHONEX_SCARE=1.22,Te.IPHONEX_TOP=44,Te.IPHONEX_BUTTOM=34,Te.DESIGN_WIDTH=1280,Te.DESIGN_HEIGHT=720,Te._m_iTimeFrame=0;var ae=Te;var Ke=class r{constructor(){this._isLoading=!1}static get instance(){return r._instance||(r._instance=new r),r._instance}get isLoading(){return this._isLoading}init(){if(!this.txtLoadingView){var e=Laya.loader.getRes("scenes/notice/TxtLoadingView.lh");this.txtLoadingView=e.create()}}showLoading(e=!1){if(console.log("showLoading..."+e),this.txtLoadingView)e?(this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this._isLoading=!1):(this._isLoading=!0,this.showMaskLoading(),Laya.timer.once(3e3,this,this.showLazyLoading)),this.txtLoadingView.m_txtLabel&&(this.txtLoadingView.m_txtLabel.visible=!1);else return}showLoadingByInfo(e=""){console.log("showLoadingByInfo..."+e),this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this.txtLoadingView.m_txtLabel.text=e,this.txtLoadingView.m_txtLabel.visible=!0}showMaskLoading(){this._isLoading&&(this.txtLoadingView.backLayer.name="backLayer",this.txtLoadingView.backLayer.mouseEnabled=!0,this.txtLoadingView.backLayer.mouseThrough=!1,this.txtLoadingView.backLayer.visible=!0)}showLazyLoading(){this._isLoading&&(console.log("showLazyLoading..."),this.txtLoadingView.visible=!0,Laya.stage.addChild(this.txtLoadingView),this.txtLoadingView.x=(Laya.stage.width-this.txtLoadingView.width)/2,this.txtLoadingView.y=(Laya.stage.height-this.txtLoadingView.height)/2),Laya.timer.clear(this,this.showLazyLoading)}hideLoading(){if(console.log("hideLoading..."),this._isLoading=!1,this.txtLoadingView)this.txtLoadingView.removeSelf();else return}dispose(){this.txtLoadingView&&(this.txtLoadingView.destroy(),this.txtLoadingView.removeSelf(),this.txtLoadingView=null),this.txtLoadingView.backLayer&&(this.txtLoadingView.backLayer.destroy(),this.txtLoadingView.backLayer.removeSelf(),this.txtLoadingView.backLayer=null)}};var gn=class extends mt{constructor(){super()}};var gs=class{constructor(e,t){this._valuesObject={};this.sheetObject=e,this.BaseItemClass=t}get keys(){if(this._keys)return this._keys;this._keys=[];let e;for(let t in this.sheetObject)!t||t==""||this._keys.push(t);return this._keys}get values(){if(this._values)return this._values;this._values=[];let e;for(let t in this.sheetObject)this._valuesObject[t]?e=this._valuesObject[t]:(e=new this.BaseItemClass,e.init(this.sheetObject[t]),this._valuesObject[t]=e),this._values.push(e);return this._values}get(e){return this._valuesObject[e]?this._valuesObject[e]:this.sheetObject[e]}get1(e){if(this._valuesObject[e])return this._valuesObject[e];let t=this.sheetObject[e];if(t)return t;let i;this.BaseItemClass&&(i=new this.BaseItemClass,i.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig()  class : "+this.BaseItemClass),i.init(t)),this._valuesObject;let n=i||t;return this._valuesObject[e]=n,n}indexOf(e){let t=this._keys.indexOf(e);return t>=0?t:(e=e instanceof String?Number(e):e instanceof Number?e.toString():e,this._keys.indexOf(e))}clear(){this.sheetObject=null}};var bs=class r{constructor(){}static get instance(){return r._instance||(r._instance=new r),r._instance}initSpotCfgData(){if(this.spotDic==null){let e=_e.instance.getResByURL("config/spot.json");this.spotDic=new gs(e.data,gn)}}getSpotById(e){return this.initSpotCfgData(),this.spotDic.get(e)}get getSpotDic(){return this.initSpotCfgData(),this.spotDic}};var Ge=class r{constructor(){}registerCommCallBack(e=null){Laya.LayaEnv.isConch}static get instance(){return r._instance||(r._instance=new r),r._instance}sendCustumEvent(e,t=null,i=null){let n;if(i?n=i:n=bs.instance.getSpotById(e),!n||!n.Event)return;let s,a=new Object;a.id=n.ID,a.eventKey=n.Event,a.type=n.type,this.sendWebEvent(a)}sendWebEvent(e){}dispose(){}reload(){Laya.Browser.window.location.reload()}testEvnt(){}};var wc=class r{constructor(){this._mapUrl="";this._mapWidth=0;this._mapHeight=0;this._gridWidth=0;this._gridHeight=0;this._xPics=0;this._yPics=0;this._fuzzyName=""}static get instance(){return r._instance||(r._instance=new r),r._instance}loadScene(e,t,i,n,s,a,c){this._fuzzyName!=""&&this._fuzzyName!=a&&this.dispose(),this._mapWidth=e,this._mapHeight=t,this._gridWidth=i,this._gridHeight=n,this._fuzzySprite=s,this._xPics=Math.floor(this._mapWidth/i),this._yPics=Math.floor(this._mapHeight/n),this._fuzzyName=a,this._fuzzyCallBack=c;let u=_e.instance.setResURL("scene/subScene/test1/"+a+".json");Laya.loader.load([{url:u,type:Laya.Loader.ATLAS}],Laya.Handler.create(this,this.loadSceneComplete),Laya.Handler.create(this,this.loadProcess,null,!1),null,0,!0,null,!0)}loadProcess(){}loadSceneComplete(){let e=Laya.Loader.getAtlas(_e.instance.setResURL("scene/subScene/test1/"+this._fuzzyName+".json"));if(this._fuzzySprite){this._fuzzySprite.graphics.clear();let t=0,i=new Laya.Sprite;i.name="mapSprite",this._fuzzySprite.addChildAt(i,0);for(let n=0;n<this._yPics;n++)for(let s=0;s<this._xPics;s++){let a=Laya.loader.getRes(e[t]),c=new Laya.Image;i.addChild(c),c.texture=a,c.size(a.width,a.height),c.pos(s*this._gridWidth,n*this._gridHeight),t++}}this._fuzzyCallBack!=null&&this._fuzzyCallBack.run()}dispose(){this._fuzzyCallBack=null,this._fuzzyName&&this._fuzzyName!=""&&Laya.loader.clearRes(_e.instance.setResURL("atlas/"+this._fuzzyName+".json"))}};var oe=class oe{constructor(){this._touchEnabled=!0;if(oe._instance)throw new Error("LayerManager是单例,不可new.");oe._instance=this}get m_sprPanelLayer(){return this._m_sprPanelLayer}set m_sprPanelLayer(e){this._m_sprPanelLayer=e}get m_sprMainUILayer(){return this._m_sprMainUILayer}set m_sprMainUILayer(e){this._m_sprMainUILayer=e}get m_sprTipLayer(){return this._m_sprTipLayer}set m_sprTipLayer(e){this._m_sprTipLayer=e}static get instence(){return oe._instance||(oe._instance=new oe),oe._instance}init(){this.m_sprSceneLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprSceneLayer),this.m_sprMainUILayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprMainUILayer),this.m_sprPanelLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprPanelLayer),this.m_sprPopLayer=new Laya.Sprite,this.m_sprPopLayer.mouseThrough=!0,Laya.stage.addChild(this.m_sprPopLayer),this.m_sprTipLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTipLayer),this.m_sprGuideLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprGuideLayer),this.m_sprTopLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTopLayer)}get touchEnabled(){return this._touchEnabled}set touchEnabled(e){this._touchEnabled!=e&&(this._touchEnabled=e,this.m_sprSceneLayer.mouseEnabled=this._touchEnabled,this.m_sprMainUILayer.mouseEnabled=this._touchEnabled,this.m_sprPanelLayer.mouseEnabled=this._touchEnabled,this.m_sprPopLayer.mouseEnabled=this._touchEnabled,this.m_sprTipLayer.mouseEnabled=this._touchEnabled,this.m_sprGuideLayer.mouseEnabled=this._touchEnabled,this.m_sprTopLayer.mouseEnabled=this._touchEnabled)}addToLayerAndSet(e,t=oe.M_PANEL,i=oe.CENTER){this.addToLayer(e,t),this.setPosition(e,i)}getLayerIndex(e,t=oe.M_PANEL){let i;switch(t){case oe.M_SCENE:i=this.m_sprSceneLayer.getChildIndex(e);break;case oe.M_MAINUI:i=this.m_sprMainUILayer.getChildIndex(e);break;case oe.M_PANEL:i=this.m_sprPanelLayer.getChildIndex(e);break;case oe.M_POP:i=this.m_sprPopLayer.getChildIndex(e);break;case oe.M_TIP:i=this.m_sprTipLayer.getChildIndex(e);break;case oe.M_GUIDE:i=this.m_sprGuideLayer.getChildIndex(e);break;case oe.M_TOP:i=this.m_sprTopLayer.getChildIndex(e);break}return i}addToLayerAt(e,t=oe.M_PANEL,i=0){switch(t){case oe.M_SCENE:this.m_sprSceneLayer.addChildAt(e,i);break;case oe.M_MAINUI:this.m_sprMainUILayer.addChildAt(e,i);break;case oe.M_PANEL:this.m_sprPanelLayer.addChildAt(e,i);break;case oe.M_POP:this.m_sprPopLayer.addChildAt(e,i);break;case oe.M_TIP:this.m_sprTipLayer.addChildAt(e,i);break;case oe.M_GUIDE:this.m_sprGuideLayer.addChildAt(e,i);break;case oe.M_TOP:this.m_sprTopLayer.addChildAt(e,i);break}}addToLayer(e,t=oe.M_PANEL){switch(t){case oe.M_SCENE:this.m_sprSceneLayer.addChild(e);break;case oe.M_MAINUI:this.m_sprMainUILayer.addChild(e);break;case oe.M_PANEL:this.m_sprPanelLayer.addChild(e);break;case oe.M_POP:this.m_sprPopLayer.addChild(e);break;case oe.M_TIP:this.m_sprTipLayer.addChild(e);break;case oe.M_GUIDE:this.m_sprGuideLayer.addChild(e);break;case oe.M_TOP:this.m_sprTopLayer.addChild(e);break}}removeFromLayer(e,t){switch(t){case oe.M_SCENE:this.m_sprSceneLayer.removeChild(e);break;case oe.M_MAINUI:this.m_sprMainUILayer.removeChild(e);break;case oe.M_PANEL:this.m_sprPanelLayer.removeChild(e);break;case oe.M_POP:this.m_sprPopLayer.removeChild(e);break;case oe.M_GUIDE:this.m_sprGuideLayer.removeChild(e);break;case oe.M_TOP:this.m_sprTopLayer.removeChild(e);break}}clearLayer(e){switch(e){case oe.M_SCENE:this.m_sprSceneLayer.removeChildren();break;case oe.M_MAINUI:this.m_sprSceneLayer.removeChildren();break;case oe.M_PANEL:this.m_sprSceneLayer.removeChildren();break;case oe.M_POP:this.m_sprSceneLayer.removeChildren();break;case oe.M_TOP:this.m_sprSceneLayer.removeChildren();break}}get stageWidth(){let e;return e=Laya.stage.width,e}get stageHeight(){let e;return e=Laya.stage.height,e}setPosition(e,t,i=0,n=0,s=!1,a=!1){let c=Laya.stage.width,u=Laya.stage.height;switch(this.m_iStageWidth=c,this.m_iStageHeight=u,t){case oe.UP:e.x=s?c/2:(c-e.width*e.scaleX)/2,e.y=0;break;case oe.DOWN:e.x=s?c/2:(c-e.width*e.scaleX)/2,e.y=u-e.height*e.scaleY;break;case oe.LEFT:e.x=0,e.y=a?u/2:(u-e.height*e.scaleY)/2;break;case oe.RIGHT:e.x=c-e.width*e.scaleX,e.y=a?u/2:(u-e.height*e.scaleY)/2;break;case oe.LEFTUP:e.x=0,e.y=0;break;case oe.RIGHTUP:e.x=c-e.width*e.scaleX,e.y=0;break;case oe.LEFTDOWN:e.x=0,e.y=u-e.height*e.scaleY;break;case oe.RIGHTDOWN:e.x=c-e.width*e.scaleX,e.y=u-e.height*e.scaleY;break;case oe.CENTERLEFT:e.x=c/2-e.width*e.scaleX,e.y=a?u/2:(u-e.height*e.scaleY)/2;break;case oe.CENTERRIGHT:e.x=c/2,e.y=a?u/2:(u-e.height*e.scaleY)/2;break;case oe.CENTER:e.x=s?c/2:(c-e.width*e.scaleX)/2,e.y=a?u/2:(u-e.height*e.scaleY)/2;break;default:break}e.x+=i,e.y+=n}setLayer(e,t,i){if(!e||!t||e.parent!=t.parent)return;let n=e.parent.getChildIndex(e),s=t.parent.getChildIndex(t);i?n>s&&(e.parent.setChildIndex(e,s),e.parent.setChildIndex(t,n)):n<s&&(e.parent.setChildIndex(e,s),e.parent.setChildIndex(t,n))}};oe.M_SCENE=1,oe.M_MAINUI=2,oe.M_PANEL=3,oe.M_POP=4,oe.M_TIP=5,oe.M_GUIDE=7,oe.M_TOP=6,oe.UP=1,oe.DOWN=16,oe.LEFT=256,oe.RIGHT=4096,oe.CENTER=65536,oe.LEFTUP=oe.LEFT|oe.UP,oe.RIGHTUP=oe.RIGHT|oe.UP,oe.LEFTDOWN=oe.LEFT|oe.DOWN,oe.RIGHTDOWN=oe.RIGHT|oe.DOWN,oe.CENTERLEFT=oe.CENTER|oe.LEFT,oe.CENTERRIGHT=oe.CENTER|oe.RIGHT,oe.MOVE=-1;var Se=oe;var le=class{};le.M_SCENE_MAIN="M_SCENE_MAIN",le.M_SCENE_SHOP="M_SCENE_SHOP",le.M_SCENE_AIRDROP="M_SCENE_AIRDROP",le.M_SCENE_HERO="M_SCENE_HERO",le.M_SCENE_PRE_LOAD="M_SCENE_PRE_LOAD",le.M_SCENE_MATCH_READY="M_SCENE_MATCH_READY",le.M_SCENE_MATCH="M_SCENE_MATCH",le.M_SCENE_SNAKE_MATCH="M_SCENE_SNAKE_MATCH",le.M_SCENE_AFKBATTLE="M_SCENE_AFKBATTLE",le.M_SCENE_GUILD="M_SCENE_GUILD",le.M_SCENE_RANK="M_SCENE_RANK",le.M_SCENE_SHOLARSHIP="M_SCENE_SHOLARSHIP",le.M_SCENE_GET_MAT="M_SCENE_GET_MAT",le.M_SCENE_OPEN_GAME="M_SCENE_OPEN_GAME",le.M_SCENE_ASSET="M_SCENE_ASSET",le.M_SCENE_DIG="M_SCENE_DIG",le.M_SCENE_MAIL="M_SCENE_MAIL",le.M_SCENE_KNAPSACK="M_SCENE_KNAPSACK",le.M_SCENE_UNION="M_SCENE_UNION",le.M_SCENE_MYUNION="M_SCENE_MYUNION",le.M_SCENE_LCPOOL="M_SCENE_LCPOOL",le.M_SCENE_ARENA="M_SCENE_ARENA",le.M_SCENE_FRIEND="M_SCENE_FRIEND",le.M_SCENE_IGO_PAGE="M_SCENE_IGO_PAGE",le.M_SCENE_DAILY_TASK="M_SCENE_DAILY_TASK",le.M_SCENE_PVE="M_SCENE_PVE",le.M_SCENE_ROLE="M_SCENE_ROLE";var L=class{};L.MOUSE_HOLDON="MOUSE_HOLDON",L.EVENT_OPEN_MODULE="EVENT_OPEN_MODULE",L.EVENT_MODULE_ADDED="EVENT_MODULE_ADDED",L.EVENT_CLOSE_MODULE="EVENT_CLOSE_MODULE",L.EVENT_CHECK_REMAIN="EVENT_CHECK_REMAIN",L.EVENT_LOADED_COMPLETE="EVENT_LOAD_COMPLETE",L.EVENT_LOADED_SCENE_BG_COM="EVENT_LOADED_SCENE_BG_COM",L.EVENT_LOAD_SKIN_COMPLETE="EVENT_LOAD_SKIN_COMPLETE",L.EVENT_LOAD_HEAD_SKIN_COMPLETE="EVENT_LOAD_HEAD_SKIN_COMPLETE",L.EVENT_LOADING_SUC="EVENT_LOADING_SUC",L.EVENT_BACK_TO_LOGIN="EVENT_BACK_TO_LOGIN",L.EVENT_LOGIN_GAME_END="EVENT_LOGIN_GAME_END",L.EVENT_ENTER_MAIN="EVENT_ENTER_MAIN",L.EVENT_CHANGE_HEAD="EVENT_CHANGE_HEAD",L.EVENT_MODIFY_HEAD="EVENT_MODIFY_HEAD",L.EVENT_ITEM_UPDATE="EVENT_ITEM_UPDATE",L.EVENT_ROLE_UPDATE="EVENT_ROLE_UPDATE",L.STAGE_ON_BLUR="STAGE_ON_BLUR",L.STAGE_ON_FOCUS="STAGE_ON_FOCUS",L.ACCOUNTVO_UPDATE="ACCOUNTVO_UPDATE",L.EVENT_WAIT_PLAYERINFO="EVENT_WAIT_PLAYERINFO",L.EVENT_END_HEROBUY="EVENT_END_HEROBUY",L.EVENT_END_HEROTRANSFER="EVENT_END_HEROTRANSFER",L.EVENT_REFRESH_HEROTRANSFER="EVENT_REFRESH_HEROTRANSFER",L.EVENT_REFRESH_QUAN_STATUS="EVENT_REFRESH_QUAN_STATUS",L.EVENT_REFRESH_ITEM_ONCHAIN_STATUS="EVENT_REFRESH_ITEM_ONCHAIN_STATUS",L.EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS="EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS",L.EVENT_REFRESH_NODE_ONCHAIN_STATUS="EVENT_REFRESH_NODE_ONCHAIN_STATUS",L.EVENT_REFRESH_UNIONMEMBER_TRANSFER="EVENT_REFRESH_UNIONMEMBER_TRANSFER",L.EVENT_REFRESH_KNAPSACK="EVENT_REFRESH_KNAPSACK",L.EVENT_ADD_UNIONMEMBER_ADDRESS="EVENT_ADD_UNIONMEMBER_ADDRESS",L.EVENT_ADD_TICKET_ADDRESS="EVENT_ADD_TICKET_ADDRESS",L.EVENT_EMOJI_ICON_SELECT="EVENT_EMOJI_ICON_SELECT",L.EVENT_COLOR_ICON_SELECT="EVENT_COLOR_ICON_SELECT",L.EVENT_CHECK_ICON_SELECT="EVENT_CHECK_ICON_SELECT",L.EVENT_CHECK_PLAYER_NUM_SELECT="EVENT_CHECK_PLAYER_NUM_SELECT",L.EVENT_CHECK_NODE_SELECT="EVENT_CHECK_NODE_SELECT",L.PACKAGE_UPDATE_ITEM="PACKAGE_UPDATE_ITEM",L.IMPROVE_SUCESS_EVENT="IMPROVE_SUCESS_EVENT",L.CHANG_POTRAIT="CHANG_POTRAIT",L.ROLE_INFO_CHANGE="ROLE_INFO_CHANGE",L.UPDATE_ASSETS="UPDATE_ASSETS",L.REFRESH_MAIN_TASK="REFRESH_MAIN_TASK",L.RECIVE_SUCESS_SERVICE="RECIVE_SUCESS_SERVICE",L.SCENE_ROLE_COMPELTE="SCENE_ROLE_COMPELTE",L.FITTING_CLOTH_BTN="FITTING_CLOTH_BTN",L.STORE_CLICKBG_EVENT="STORE_CLICKBG_EVENT",L.CLOSE_BG_VIEW="CLOSE_BG_VIEW",L.EVENT_UPDATE_ONLINE="EVENT_UPDATE_ONLINE",L.VIP_INFO_CHANGE="VIP_INFO_CHANGE",L.EVENT_FUNCTION_OPEN_UPDATE="EVENT_FUNCTION_OPEN_UPDATE",L.EVENT_ADD_ACTIVITY="EVENT_ADD_ACTIVITY",L.EVENT_REMOVE_ACTIVITY="EVENT_REMOVE_ACTIVITY",L.UPDATE_CHAO_PIAO="UPDATE_CHAO_PIAO",L.UPDATE_EXCHANGE_INFO="UPDATE_EXCHANGE_INFO",L.UPDATE_RED_STATE_EVENT="UPDATE_RED_STATE_EVENT",L.SYSTEM_OPEN_TIME_INITED="SYSTEM_OPEN_TIME_INITED",L.EVENT_OPEN_SHARE="EVENT_OPEN_SHARE",L.CHANGE_SCENE_BASE_ROLE_LAYER="CHANGE_SCENE_BASE_ROLE_LAYER",L.EVENT_CLICK_NUM="EVENT_CLICK_NUM",L.EVENT_CLICK_SPACE="EVENT_CLICK_SPACE",L.EVENT_HERO_DRAW_BACK="EVENT_HERO_DRAW_BACK",L.EVENT_Close_CreateRoom="EVENT_Close_CreateRoom",L.EVENT_ENTER_MATCH_ROOM="EVENT_ENTER_MATCH_ROOM",L.EVENT_UPDATE_MATCH_ROOM="EVENT_UPDATE_MATCH_ROOM",L.EVENT_CLICK_HERO="EVENT_CLICK_HERO",L.UPDATE_KILL_NUM="UPDATE_KILL_NUM",L.EVENT_RESTORE_DATA="EVENT_RESTORE_DATA",L.EVENT_FirstBlood="EVENT_FirstBlood",L.EVENT_MutiKill="EVENT_MutiKill",L.EVENT_GameScene_Gray="EVENT_GameScene_Gray",L.EVENT_Game_Delay="EVENT_Game_Delay",L.EVENT_UPDATE_ITEM_SKILL_COOL="UPDATE_SKILL_COOLTIME",L.EVENT_UPDATE_GLOBAL_COOL="EVENT_UPDATE_GLOBAL_COOL",L.EVENT_UPDATE_REDECE_COOL="EVENT_UPDATE_REDECE_COOL",L.EVENT_REFRESH_BAN_ACCOUNT="EVENT_REFRESH_BAN_ACCOUNT",L.EVENT_SUB_GUILD_UPDATE="EVENT_SUB_GUILD_UPDATE",L.EVENT_UNION_APPLY_MEMBER_UPDATE="EVENT_UNION_APPLY_MEMBER_UPDATE",L.EVENT_WELFARE_CLAIM="EVENT_WELFARE_CLAIM",L.EVENT_RECHARGE_GET="EVENT_RECHARGE_GET",L.CHANGE_WALLET_HERO="CHANGE_WALLET_HERO",L.CHANGE_ASSET_CHAIN="CHANGE_ASSET_CHAIN",L.CHANGE_WALLET_PROP="CHANGE_WALLET_PROP",L.CREATE_SUB_WALLET_SUCCESS="CREATE_SUB_WALLET_SUCCESS",L.REFRESH_ALL_WITHDRAW_DATA="REFRESH_ALL_WITHDRAW_DATA",L.CHANGE_FRIEND_APPLY_LIST="CHANGE_FRIEND_APPLY_LIST",L.CHANGE_FRIEND_LIST="CHANGE_FRIEND_LIST",L.REFRSH_RED="REFRSH_RED",L.REFRSH_APPLY_FRIEND_LIST="REFRSH_APPLY_FRIEND_LIST",L.ADD_AIR_WALLET_ITEM="ADD_AIR_WALLET_ITEM",L.ADD_AIR_SUB_WALLET_NAME="ADD_AIR_SUB_WALLET_NAME",L.AIR_SUB_WALLET_OPENHERO="AIR_SUB_WALLET_OPENHERO",L.CHANGE_WALLET_HERO_AIR="CHANGE_WALLET_HERO_AIR",L.UPDATE_UNION_MEMBER_LIST="UPDATE_UNION_MEMBER_LIST",L.EVENT_ADD_MONEY_ADDRESS="EVENT_ADD_MONEY_ADDRESS",L.REFRESH_MAINSCENE_HEAD_RED="REFRESH_MAINSCENE_HEAD_RED",L.REFRESH_ROLEINFO_RED="REFRESH_ROLEINFO_RED",L.REFRESH_ACTIVITY_RED="REFRESH_ACTIVITY_RED",L.SHOW_EQUIP_TIP="SHOW_EQUIP_TIP",L.REFRESH_RANK_DIALOG_RED="REFRESH_RANK_DIALOG_RED",L.REFRESH_MAIL_RED="REFRESH_MAIL_RED",L.SHOW_EQUIP_SHOP_TIP="SHOW_EQUIP_SHOP_TIP",L.ON_CONNECT_GAME_SERVER="ON_CONNECT_GAME_SERVER",L.LENGTH_CHANGE="LENGTH_CHANGE",L.KILL_SNAKE="KILL_SNAKE",L.UPDATE_LOCAL_WALLET_LIST_EVENT="UPDATE_LOCAL_WALLET_LIST_EVENT";var U=class r extends Laya.EventDispatcher{static get intance(){return r._instance||(r._instance=new r),r._instance}};var ge=class{constructor(){}};ge.NO_ALL=-1,ge.YES=1,ge.NO=2,ge.SURE=4,ge.CANCEL=8,ge.CLOSE=16,ge.RETURN_YES=1,ge.RETURN_NO=2,ge.RETURN_NONE=3,ge.BASEALERTVIEW="BaseAlertDialog",ge.MatchConfimDialog="MatchConfimDialog",ge.InviteConfimDialog="InviteConfimDialog",ge.ApplyConfimDialog="ApplyConfimDialog",ge.BUYCONFIRMVIEW="BuyConfirmView",ge.GUILDQUITVIEW="GuildQuitView",ge.BuyItemConfirmView="BuyItemConfirmView",ge.DOWNLOADALERT="DownLoadAlert";var Lt=class r{constructor(){}static instance(){return r._instance||(r._instance=new r),r._instance}AlertByType(e,t=null,i=0,n=null,s=null,a=!1,c=null){i==0&&(i=ge.YES|ge.NO),this.onLoaded(i,e,t,n,s,a,c)}onLoaded(e,t,i,n=null,s=null,a=!1,c=null){Oe.intance.openModule(t,{flag:e,okHandler:n,cancelHandler:s,data:i,destroyDoCancel:a,initHandler:c})}};var On=class On{constructor(){this._list=[];this._isNoticing=!1;this._isListener=!1}static get instance(){return On._instance||(On._instance=new On),On._instance}notice(e){this._isNoticing?this._isListener||(this._isListener=!0,this._list.push(e),Laya.timer.loop(On.Tip_Interval,this,this.onInterVal)):(this._list.push(e),this.noticeOne())}noticeOne(){var e=_e.instance.m_objModuleViews.TxtNoticeView;let t;Laya.loader.load(e).then(i=>{if(!i){console.log("noticeOne : "+e+"  res is null");return}t=Laya.Pool.getItemByCreateFun("txtNotice",i.create,i);let n=this._list.shift();t.notice(n),Laya.stage.addChild(t),t.x=Se.instence.stageWidth*.5-t.width*.5,t.y=Se.instence.stageHeight*.5-t.height*.5,Laya.Tween.to(t,{y:t.y-250,alpha:.5},1e3,null,Laya.Handler.create(this,this.onFinish,[t]),1e3)})}onFinish(e){e&&(e.visible=!1,e.removeSelf())}onInterVal(){this._list.length>=1?this.noticeOne():(this._isNoticing=!1,this._isListener=!1,Laya.timer.clear(this,this.onInterVal))}};On.Tip_Interval=1e3;var De=On;var st=class r{constructor(){this._curErrTxt=""}static get instance(){return r._instance||(r._instance=new r),r._instance}initErrData(e){this.errData=e}get(e){return this.errData[e]?this.errData[e].words:(console.warn("服务端错误码语言包未配表 错误码："+e),e)}showErrorWord(e,...t){var i=this.getLanguage2(e,t);De.instance.notice(i)}getLanguage2(e,t){if(this.errData&&this.errData[e]){let i=this.errData[e].words;if(i&&i!="")return this._curErrTxt=H.instance.replacePlaceholder(i,t),this._curErrTxt}return this._curErrTxt=H.instance.replacePlaceholder(e+"",t),this._curErrTxt}showErrByString(e,t="#ff0000"){this._curErrTxt=e;let i=new Laya.Label(this._curErrTxt);i.width=500,i.align="center",i.height=40,i.fontSize=26,i.color=t,i.mouseEnabled=!1,i.strokeColor="#000000",i.stroke=.5,Laya.stage.addChild(i),i.x=(Laya.stage.width-i.width)/2,i.y=(Laya.stage.height-i.height)/2,Laya.Tween.to(i,{y:i.y-100,alpha:0},500,null,Laya.Handler.create(this,this.completeHandler,[i]),1e3)}completeHandler(e){e&&e.parent&&e.parent.removeChild(e)}dispose(){this.errData=null}};var ru=class extends mt{constructor(){super()}};var iu=class{constructor(e,t,i){this._idKeyName="";this._jsonName="";this._sheetItemCls=null;this._isParse=!1;this._idKeyName=t,this._jsonName=e,this._sheetItemCls=i,this._idToValueMap=new Ie,this._items=[]}parseJson(){if(this._isParse)return;let e=_e.instance.getResByURL("config/"+this._jsonName+".json");if(!e)throw new Error("无效的配置数据"+this._jsonName);for(let t of e){let i=new this._sheetItemCls;i.beFill(t),this._idToValueMap.set(t[this._idKeyName],i),this._items.push(i),this.addItemProcess(i)}this._isParse=!0}addItemProcess(e){}getItemById(e){return this.excuteIsParse()&&this._idToValueMap.get(e)?this._idToValueMap.get(e):null}getAllItems(){return this.excuteIsParse()?this._items:null}excuteIsParse(){return this._isParse,this._isParse}};var nu=class extends iu{constructor(){super("","","");this._itemsTypeMap=null;this._itemsTypeMap=new Ie}getCombineKey(t,i,n){return t+n.toString()+i}getItemsByChildType(t,i){let n=this.getCombineKey(t,i,"childType_itemType");if(this._itemsTypeMap.get(n))return this._itemsTypeMap.get(n);this._itemsTypeMap.set(n,[]);let s=xe.intance.m_dicItems.values;for(let a of s)a.child_type==t&&a.itm_type==i&&this._itemsTypeMap.get(n).push(a);return this._itemsTypeMap.get(n)}};var ou=class extends mt{realIcon(){return"https://cdn.bunnyswap.cc/images/items/"+this.icon}get starArr(){if(this._starArr)return this._starArr;if(this._starArr=[],this.max_quality==0)return this._starArr;let t=this.quality/this.max_quality*5;for(let i=1;i<=5;i++)t>=i?this._starArr.push(0):i-t<=.5?this._starArr.push(2):this._starArr.push(1);return this._starArr}};var su=class extends mt{};var au=class extends mt{constructor(){super()}};var cu=class extends mt{};var lu=class extends mt{constructor(){super()}};var uu=class extends mt{};var pu=class extends mt{};var mu=class extends mt{};var fu=class extends mt{constructor(){super(...arguments);this.dT=1e4}async testUrl(){}getUrl(){var t=this.url;let i=new Date().getTime(),n=this,s=new XMLHttpRequest;s.open("GET",t,!0),s.onload=function(){if(s.status>=200&&s.status<300)try{let c=s.responseText;var a=new Date().getTime()-i;n.dT=a}catch{console.log("Response is not valid JSON")}else console.error(`Error: ${s.status}`)},s.onerror=function(){console.error("Network error")},s.send()}};var du=class extends mt{};var hu=class extends mt{};var gu=class extends mt{};var bu=class extends mt{};var Tt=class Tt{constructor(){if(Tt._instance)throw new Error("SheetDataManager是单例,不可new.");Tt._instance=this,this._modelList=new Ie}static get intance(){return Tt._instance||(Tt._instance=new Tt),Tt._instance}init(){let e=Laya.Browser.now();this.m_dicItems=this.initConfigObject("item",ou),this.m_dicShops=new Ie,this.m_dicShopMulDic=this.initConfig("shop",["type","icon"],su,!0,Laya.Handler.create(this,this.onSetShopItem,null,!1)),this.m_dicSnakes=this.initConfigObject("snake",gu),this.m_dicFoods=this.initConfigObject("foods",hu),this.m_dicArenaDic=new Ie,this.m_dicArenaNumMulDic=new Ie,this.m_dicArenaMulDic=this.initConfig("arena",["type","lv","coinType"],cu,!0,Laya.Handler.create(this,this.onSetArena,null,!1)),this.m_dicArenaTypes=this.initConfig("arenaType",["id"],du),this.m_dicSnakeLengthRules=this.initConfig("snakeLengthRules",["snakeId","segments"],bu);var t=this.initConfig("node",["id"],fu);this.m_dicNodes=this.initNodes(t),this.m_dicHead=this.initConfig("head",["id"],au),this.m_dicCountry=this.initConfig("country",["id"],lu),this.m_dicCurrencyAddressMulDic=new Ie,this.m_dicCurrencyAddress=this.initConfig("currencyAddress",["sn"],uu,!0,Laya.Handler.create(this,this.onSetCurrencyAddress,null,!1)),this.m_dicCoinAddress=this.initConfig("coinAddress",["id"],mu),this.m_dicACoin=this.initConfigObject("aCoin",pu),this.m_dicGenerate=this.initConfigObject("general",ru),console.log("-----------------------sheetdata-time2:"+(Laya.Browser.now()-e))}getCharacterStars(e){e>4&&(e=4);for(let t of this.m_dicCharacterStars.values)if(t.starLv>e)return t;return null}getArenaTypesInSub(){var e=[];for(let t of this.m_dicArenaTypes.values)t.inSub==1&&e.push(t);return e}getArenaTypesInSubByType(e){for(let t of this.m_dicArenaTypes.values)if(t.arenaType==e)return t;return[]}getArenaTypesInSubByItemId(e,t){for(let i of this.m_dicArenaDic.values)if(i.type==e&&i.item[0]==t)return i}onSetShopItem(e){this.m_dicShops.set(e.id,e)}onSetCurrencyAddress(e){var t=e.token.toLowerCase();this.m_dicCurrencyAddressMulDic.set(this.getCompoundKey([e.isSN,t,e.chainId]),e)}onSetArena(e){this.m_dicArenaDic.set(e.id,e),this.m_dicArenaNumMulDic.set(this.getCompoundKey([e.type,e.lv,e.coinType]),e)}preInit(){}getItemModel(){return this.getDataModel(Tt.DataType_Items)}getGeneralValueById(e){return this.m_dicGenerate&&this.m_dicGenerate.get(e)?this.m_dicGenerate.get(e).value:0}getDataModel(e){if(!this._modelList.get(e))switch(e){case Tt.DataType_Items:this._modelList.set(e,new nu);break}return this._modelList.get(e)}initNodes(e){var t=new Ie;for(let n=0;n<e.values.length;n++){var i=e.values[n];i.open==1&&(ae.vType==2?i.type==2&&(t.set(i.id,i),i.testUrl()):i.type==1&&(t.set(i.id,i),i.testUrl()))}return t}testNodes(){var e=this.m_dicNodes;for(let i=0;i<e.values.length;i++){var t=e.values[i];t.testUrl()}}getNodeByAddr(e){var t=this.m_dicNodes;for(let n=0;n<t.values.length;n++){var i=t.values[n];if(i&&i.socketUrl==e)return i}return null}getCurrencyAddress(e){let i=Tt.intance.m_dicCurrencyAddress.values;for(let s=0;s<i.length;s++){var n=i[s];if(ae.vType==n.isSN&&e==n.id)return n.token}}getNodeRevenueCurrency(e){let i=Tt.intance.m_dicCurrencyAddress.values;for(let s=0;s<i.length;s++){var n=i[s];if(ae.vType==n.isSN&&e==n.id&&n.nodeRevenueAddress)return n}return null}getNodeCurrencyByTokenAndChainId(e,t){e=e.toLowerCase();var i=Tt.intance.getSheetDataByMultiKey(Tt.intance.m_dicCurrencyAddressMulDic,[ae.vType,e,t]);return i}getRentCurrency(e){let i=Tt.intance.m_dicCurrencyAddress.values;for(let s=0;s<i.length;s++){var n=i[s];if(ae.vType==n.isSN&&e==n.id&&n.rentNftAddress)return n}return null}getCurrencyByChainType(e,t){let n=Tt.intance.m_dicCurrencyAddress.values;for(let a=0;a<n.length;a++){var s=n[a];if(ae.vType==s.isSN&&e==s.id&&t==s.chainType)return s}}getCurrency(e,t){let n=Tt.intance.m_dicCurrencyAddress.values;for(let a=0;a<n.length;a++){var s=n[a];if(ae.vType==s.isSN&&e==s.id&&t==s.chainId)return s}}getTokensByChainId(e,t){let n=Tt.intance.m_dicCurrencyAddress.values;var s=[];for(let c=0;c<n.length;c++){var a=n[c];t==1?ae.vType==a.isSN&&a.openRecharge==1&&e==a.chainId&&s.push(a):t==2&&ae.vType==a.isSN&&a.openExtract==1&&e==a.chainId&&s.push(a)}return s}getNetAddress(e){let i=Tt.intance.m_dicCoinAddress.values;for(let s=0;s<i.length;s++){var n=i[s];if(ae.vType==n.type&&e==n.tokenid)return n.tokenAddress}}getACoin(e,t){let n=Tt.intance.m_dicACoin.values;for(let a=0;a<n.length;a++){var s=n[a];if(e==s.token&&t==s.currency)return s}}static getArrFromDictionary(e,t,i){let n=[];for(let s=0;s<e.values.length;s++)e.values[s][t]+""==i+""&&n.push(e.values[s]);return n}getArrFromDicItemByKey(e,t){let i=[];for(let n=0;n<this.m_dicItems.values.length;n++)this.m_dicItems.values[n][e]+""==t+""&&i.push(this.m_dicItems.values[n]);return i}initConfigObject(e,t=null,i=null){let n="config/"+e+".json";console.log("initConfigObject： url: "+n);let s=_e.instance.getResByURL(n).data;return new gs(s,t)}initConfig(e,t,i=null,n=!1,s=null){let a="config/"+e+".json";console.log("initConfig url: "+a);let c=_e.instance.getResByURL(a).data,u=new Ie;if(!c)return console.log("ERROR : SheetDataManager -->initConfig()  url:"+a),u;let p;for(let f=0;f<c.length;f++){let d=this.compoundKey(c[f],t);i?(p=new i,p.init==null&&console.log("ERROR :BaseItem> SheetDataManager -->initConfig()  url:"+a),p.init(c[f]),u.set(d,p),s&&s.runWith(p)):(u.set(d,c[f]),s&&s.runWith(c[f]))}if(n){let f=_e.instance.setResURL(a);Laya.Loader.clearRes(f)}return u}compoundKey(e,t){let i="",n=t.length;if(n>1)for(let s=0;s<n;s++)i+=e[t[s]],s!=n-1&&(i+="_");else i=e[t[0]];return i}getCompoundKey(e){let t="",i=e.length;if(i>1)for(let n=0;n<i;n++)t+=e[n],n!=i-1&&(t+="_");else t=e[0];return t}initConfig2(e,t,i,n=!0){let s="config/"+e+".json",a=_e.instance.getResByURL(s).data,c=new Ie;if(!a)return console.log("ERROR : SheetDataManager -->initConfig2()  url:"+s),c;let u;for(let p=0;p<a.length;p++){let f=a[p][t],d;c.get(f)==null?(d=[],c.set(f,d)):d=c.get(f),u=new i,u.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig2()  url:"+s),u.init(a[p]),d.push(u)}if(n&&e!="items"){let p=_e.instance.setResURL(s);Laya.Loader.clearRes(p)}return c}getItemsBy(e,t){let i=this.getArrFromDicItemByKey("itm_type",e),n=[];for(let s of i)s.child_type.toString()==t.toString()&&n.push(s);return n}getSheetDataByMultiKey(e,t){let i=this.getCompoundKey(t);return e.get(i)}getEquipDataById(e,t=null){let n=Tt.intance.m_dicEquip.values;for(let a=0;a<n.length;a++){var s=n[a];if(t){if(e==s.id&&t==s.quality)return s}else if(e==s.id)return s}}getEquipSuitDataById(e){let i=Tt.intance.m_dicEquipSuit.values;for(let s=0;s<i.length;s++){var n=i[s];if(n.parts.indexOf(e)>-1)return n}}};Tt.DataType_Items="SheetDataManager:items",Tt.DataType_CatagoryChildType="SheetDataManager:CatagoryChildType",Tt.DataType_BeautyPiece="SheetDataManager:beautypiece",Tt.DataType_BeautyExp="SheetDataManager:beautyexp",Tt.DataType_ClothStyleScore="SheetDataManager:clothStyleScore";var xe=Tt;var ze=class{};ze.TYPE_EXP=3003,ze.TYPE_GOLD=3005,ze.TYPE_TOX=3001,ze.TYPE_USDT=3004,ze.TYPE_BTC=3006,ze.TYPE_ETH=3007,ze.TYPE_BTOX=3011,ze.TYPE_GALA=3010,ze.TYPE_BNB=3013,ze.TYPE_GGG=3017,ze.TYPE_KLAY=3015,ze.TYPE_BNRY=3016,ze.TYPE_LLE=3017,ze.TYPE_PC=3022,ze.TYPE_SOL=3023,ze.TYPE_MNT=3024,ze.TYPE_PAS=3025,ze.TYPE_QUAN_PVE=1980,ze.TYPE_QUAN_MNT=4001,ze.TYPE_REWARD_TOKEN=-9999;var Pe=class Pe{static getColorText(e,t="#FFFF00"){return'<font color="'+t+'">'+e+"</font>"}static getChildByName(e,t,i="name"){if(e&&e.hasOwnProperty(i)&&e[i]==t)return e;let n=e;if(n){let s=n.numChildren,a;for(let c=0;c<s;++c)if(a=n.getChildAt(c),a instanceof Laya.Sprite&&(a=Pe.getChildByName(a,t,i)),a&&a.hasOwnProperty(i)&&a[i]==t)return a}return null}static getChildByAttri(e,t){if(e&&e.hasOwnProperty(t)&&e[t])return e[t];let i=e;if(i){let n=i.numChildren,s;for(let a=0;a<n;++a)if(s=i.getChildAt(a),s instanceof Laya.Sprite){if(s=Pe.getChildByAttri(s,t),s)return s}else if(s&&s.hasOwnProperty(t)&&s[t])return s[t]}return null}static logs(e,t=0,i=!0,n=16777215){if(e=Pe.GetLogTime+" "+e,i)switch(t){case 0:n=16777215;break;case 1:n=16777215;break;case 2:n=16711680;break;case 3:n=16777215;break;case 4:n=13434777;break;case 5:n=16742399;break}}static get GetLogTime(){let e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()}static get GRAY(){return Pe._GRAY||(Pe._GRAY=new Laya.ColorFilter([.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0])),Pe._GRAY}static get GRAY1(){if(!Pe._GRAY1){let e=[.3086,.16094,.082,0,0,.2086,.26094,.082,0,0,.1086,.36094,.082,0,0,0,0,0,1,0];Pe._GRAY1=new Laya.ColorFilter(e)}return Pe._GRAY1}static get GLOW(){return Pe._GLOW||(Pe._GLOW=new Laya.GlowFilter("#ffffff",12,0,0)),Pe._GLOW}static get YELLOWGLOW(){return Pe._YELLOWGLOW||(Pe._YELLOWGLOW=new Laya.GlowFilter("#ffff00",10,0,0)),Pe._YELLOWGLOW}static get BLUR(){if(!Pe._BLUR){let e=new Laya.BlurFilter;e.strength=5,Pe._BLUR=[e]}return Pe._BLUR}static get isParseWWhiteUser(){return Pe._isParseWWhiteUser}static get isWhiteName(){return ae.isWhiteList}static itemListHandler(e,t){let i=e.dataSource,n=i[0],s=i[1],a=2,c=e.skin;c&&(c.indexOf("xinSmall")!=-1?a=1:c.indexOf("xinBig")!=-1&&(a=3));let u;a==1?u="common/common_clip/clip_xinSmall"+s+".png":a==3?u="common/common_clip/clip_xinBig"+s+".png":u="common/common_clip/clip_xinMiddle"+s+".png",e.skin=u,e.dataSource=n}static setStarList(e,t){e.renderHandler=new Laya.Handler(Pe,Pe.itemListHandler),e.dataSource=t}static get BLACK(){return Pe._BLACK||(Pe._BLACK=new Laya.ColorFilter,Pe._BLACK.setColor("#000000")),Pe._BLACK}static get YELLOW(){return Pe._YELLOW||(Pe._YELLOW=new Laya.ColorFilter,Pe._YELLOW.setColor("#ffe64b")),Pe._YELLOW}static get YELLOW1(){return Pe._YELLOW1||(Pe._YELLOW1=new Laya.ColorFilter,Pe._YELLOW1.setColor("#fee14e")),Pe._YELLOW1}static get RED1(){return Pe._RED1||(Pe._RED1=new Laya.ColorFilter,Pe._RED1.setColor("#ff4537")),Pe._RED1}static get BLUE(){return Pe._BLUE||(Pe._BLUE=new Laya.ColorFilter,Pe._BLUE.setColor("#2f72a7")),Pe._BLUE}static setColor(e="#13e2cf"){let t=new Laya.ColorFilter;return t.setColor(e),t}static heroNotEnought(e=1286){Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(e),ge.YES,null)}static popTip(e){Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(e),ge.YES,null)}static onGetHero(e=-1){lt.intance.setCurrentScene(le.M_SCENE_SHOP,[1,e])}static popToMain(){var e="network error, back to mainscreen";Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(e),ge.YES,Laya.Handler.create(this,this.setToMainScene))}static setToMainScene(){lt.intance.setCurrentScene(le.M_SCENE_MAIN)}static isFightHero(e){return G.instance.playerDto.fightHeroPk==e||e==G.instance.playerDto.newFightHeroPk}static titickNotEnought(e=-1){var t=2,i=xe.intance.getSheetDataByMultiKey(xe.intance.m_dicShopMulDic,[t,e]);if(i&&i.open==1)Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(1060),ge.CANCEL,Laya.Handler.create(this,this.onGetTitck,[e]));else{var n=xe.intance.m_dicItems.get(e);n?De.instance.notice(H.instance.getLanguage(1282,H.instance.getLanguage(n.name))):st.instance.showErrorWord(18)}}static RemError(){Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(1124),ge.YES,null)}static NoHeroError(e){Lt.instance().AlertByType(ge.BASEALERTVIEW,e,ge.YES,null)}static TransactionErrorTip(){Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(1224),ge.YES,null)}static alertNoAll(e){Lt.instance().AlertByType(ge.BASEALERTVIEW,e,ge.NO_ALL)}static onGetTitck(e=-1){lt.intance.setCurrentScene(le.M_SCENE_SHOP,[2,e])}static moneyNotEnought(e=ze.TYPE_TOX){var t=xe.intance.m_dicItems.get(e),i=H.instance.getLanguage(t.name);De.instance.notice(H.instance.getLanguage(1170,i))}static onGetMoney(e){lt.intance.setCurrentScene(le.M_SCENE_ASSET,[1,e])}static openSquidGame(){Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(6056),ge.CANCEL,Laya.Handler.create(this,this.onOpenSquidGame))}static onOpenSquidGame(){window.location.href="https://squidgamefi.io/?invitationCode=2oi"}static onOpenSwapView(){window.open("https://swap.phantomarena.ai","_blank")}static otherLogin(){Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(6054),ge.YES,Laya.Handler.create(this,Ge.instance.reload))}static netError(){Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(1307),ge.YES,Laya.Handler.create(this,Ge.instance.reload))}static commTipWithYes(e){Lt.instance().AlertByType(ge.BASEALERTVIEW,e,ge.YES)}static shakeSprs(e,t=2,i=4,n=32){if(Pe.isShake)return;Pe.isShake=!0;let s=e.length,a=[];for(let f=0;f<s;f++){let d=e[f];a.push([d.x,d.y])}let c=[0,0],u=0,p=function(){c[u%2]=u++%4<2?0:i,u>t*4+1&&(Laya.timer.clear(Laya.stage,p),u=0,Pe.isShake=!1);for(let f=0;f<s;f++){let d=e[f];d.x=c[0]+a[f][0],d.y=c[1]+a[f][1]}};Laya.timer.loop(n,Laya.stage,p)}static shake(e,t=2,i=4,n=32){if(Pe.isShake)return;Pe.isShake=!0;let s=new Laya.Point(e.x,e.y),a=[0,0],c=0,u=function(){a[c%2]=c++%4<2?0:i,c>t*4+1&&(Laya.timer.clear(Laya.stage,u),c=0,Pe.isShake=!1),e.x=a[0]+s.x,e.y=a[1]+s.y};Laya.timer.loop(n,Laya.stage,u)}static checkIsFull(){}static fullScreen(e){var t,i=Laya.Browser.window.location.href;e?(i+="&isFull=1",t={type:"openChildPage",data:{url:i,fullScreen:"1",close:"0"}}):t={type:"closePage",data:""};var n=JSON.stringify(t);Laya.Browser.onIOS?(console.log("onIOS"),typeof webkit<"u"&&(console.log("onIOS1"),webkit.messageHandlers._tw_.postMessage(n),console.log("onIOS2"))):Laya.Browser.onAndroid&&(console.log("onAndriod0"),window&&typeof window._tw_<"u"&&(console.log("onAndriod1 str: "+n),window._tw_.callInto(n),console.log("onAndriod2")))}};Pe._isParseWWhiteUser=!1,Pe.isWWhiteUser=!1,Pe.isShake=!1,Pe.isFullScreen=!1;var ue=Pe;var zi=class zi{constructor(){this.mainSceneX=10086;this.isCloseAll=!0;this.enterMainSceneTimes=0;this.isTopOpening=!1;this.isBottomOpening=!1;U.intance.on(L.EVENT_MODULE_ADDED,this,this.onAdded)}static get intance(){return zi._instance||(zi._instance=new zi),zi._instance}init(){}setup(){}onAdded(e){}getPreSceneData(){if(this.m_arrFromScenes.length<1)return[le.M_SCENE_MAIN,!0,1,null];{let e=this.m_arrFromScenes.pop();return console.log("pop-----------route："+this.m_arrFromScenes.join(" | ")),e}return[le.M_SCENE_MAIN,!0,1,null]}removePreSceneData(){this.m_arrFromScenes=[]}setBackScene(){let e=this.getPreSceneData();this.setCurrentScene(e[0],e[1],!1)}setMainScene(e=1,t=null){this.setCurrentScene(le.M_SCENE_MAIN,t)}async setCurrentScene(e,t=null,i=!1,n=!0){console.log("setCurrentScene: ",e,t),this.preSceneName=e;let s=!1;if(this.m_sceneCurrent&&this.m_sceneCurrent.name==e){console.log("currentScene："+this.m_sceneCurrent.name+"  openScene：："+e);return}switch(this.isCloseAll?Oe.intance.closeAll():this.isCloseAll=!0,this.m_sceneCurrent&&(this.m_arrFromScenes||(this.m_arrFromScenes=[]),i&&this.m_sceneCurrent.m_arrOpenSceneData[3]&&this.m_arrFromScenes.push(this.m_sceneCurrent.m_arrOpenSceneData),console.log("open-----------scene："+this.m_arrFromScenes),this.fromScene=this.m_sceneCurrent.name,console.log("fromSceneName: "+this.fromScene),zi.m_arrSceneToDialog.indexOf(e)==-1?(this.m_sceneCurrent==this.m_preScene&&(this.m_preScene=null),this.m_sceneCurrent.toScene=e,this.m_sceneCurrent.removeSelf(),this.m_sceneCurrent=null,Laya.loader.clearUnLoaded(),wc.instance.dispose()):this.m_preScene=this.m_sceneCurrent,!i&&zi.m_arrSceneToDialog.indexOf(e)==-1&&this.m_preScene&&(this.m_sceneCurrent=this.m_preScene,this.m_sceneCurrent.toScene=e,this.m_sceneCurrent.removeSelf(),this.m_sceneCurrent=null,Laya.loader.clearUnLoaded(),wc.instance.dispose())),e){case le.M_SCENE_MAIN:this.m_arrFromScenes=[],this.m_sceneCurrent=await Laya.Scene.open("scenes/mainView/MainScene.ls"),this.enterMainSceneTimes++;break;case le.M_SCENE_AIRDROP:this.m_sceneCurrent=await Laya.Scene.open("scenes/airdrop/AirdropScene.ls",!0,t);break;case le.M_SCENE_SHOP:this.m_sceneCurrent=await Laya.Scene.open("scenes/shop/ShopScene.ls",!0,t);break;case le.M_SCENE_RANK:this.m_sceneCurrent=await Laya.Scene.open("scenes/rank/RankScene.ls");break;case le.M_SCENE_SHOLARSHIP:this.m_sceneCurrent=await Laya.Scene.open("scenes/scholarship/ScholarshipScene.ls");break;case le.M_SCENE_FRIEND:this.m_sceneCurrent=await Laya.Scene.open("scenes/friend/FriendScene.ls");break;case le.M_SCENE_HERO:this.m_sceneCurrent=await Laya.Scene.open("scenes/hero/MyHeroScene.ls");break;case le.M_SCENE_KNAPSACK:this.m_sceneCurrent=await Laya.Scene.open("scenes/item/KnapsackScene.ls",!0,t);break;case le.M_SCENE_MAIL:this.m_sceneCurrent=await Laya.Scene.open("scenes/mail/MailScene.ls");break;case le.M_SCENE_UNION:this.m_sceneCurrent=await Laya.Scene.open("scenes/union/UnionScene.ls");break;case le.M_SCENE_MYUNION:this.m_sceneCurrent=await Laya.Scene.open("scenes/union/MyUnionScene.ls",!0,t);break;case le.M_SCENE_LCPOOL:this.m_sceneCurrent=await Laya.Scene.open("scenes/lcPool/LcPoolScene.ls",!0,t);break;case le.M_SCENE_MATCH_READY:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/MatchReady.ls");break;case le.M_SCENE_MATCH:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/Match.ls");break;case le.M_SCENE_SNAKE_MATCH:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/SnakeMatch.ls");break;case le.M_SCENE_ASSET:this.m_sceneCurrent=await Laya.Scene.open("scenes/asset/AssetNewScene.ls",!0,t);break;case le.M_SCENE_GET_MAT:this.m_sceneCurrent=await Laya.Scene.open("scenes/getMat/GetMatScene.ls",!1,t);break;case le.M_SCENE_OPEN_GAME:this.m_sceneCurrent=await Laya.Scene.open("scenes/getMat/OpenGameScene.ls",!1,t);break;case le.M_SCENE_IGO_PAGE:this.m_sceneCurrent=await Laya.Scene.open("scenes/igoPage/IgoPageScene.ls");break;case le.M_SCENE_DAILY_TASK:this.m_sceneCurrent=await Laya.Scene.open("scenes/dailyTasks/GhostRaffleScene.ls",!1,t);break;case le.M_SCENE_PVE:this.m_sceneCurrent=await Laya.Scene.open("scenes/pve/PveScene.ls",!1,t);break;case le.M_SCENE_ROLE:this.m_sceneCurrent=await Laya.Scene.open("scenes/createRole/RoleInfoScene.ls",!1,t);break;default:break}ue.logs("======================  打开Scene: "+e+"  ======================"),this.m_sceneCurrent.name=e,this.m_sceneCurrent.fromScene=this.fromScene,this.m_sceneCurrent.m_arrOpenSceneData=[e,t,i,n];let a=Se.M_SCENE}onLoaded(e,t){let i=Laya.ClassUtils.getClass(t.type),n=new i;t.tip=n,this.tipMap.set(e,t)}initPreload(){}get currSceneName(){return this.m_sceneCurrent?this.m_sceneCurrent.name:""}};zi.m_arrSceneToDialog=[];var lt=zi;var yt=class yt{constructor(){this._m_bPlayMusic=!0;this._m_bPlayeSound=!0}static get instance(){return yt._instance||(yt._instance=new yt),yt._instance}get m_bPlayMusic(){return this._m_bPlayMusic}set m_bPlayMusic(e){this._m_bPlayMusic=e,e?this.m_strMusicURL!=null&&this.playMusicByURL(this.m_strMusicURL):this.musicChannel&&this.musicChannel.stop()}init(){let e=Laya.LocalStorage.getItem(yt.COOKIE_CF_MUSIC);e!=null&&e!=""&&(yt.instance.m_bPlayMusic=parseInt(e)==1);let t=Laya.LocalStorage.getItem(yt.COOKIE_CF_SOUND);t!=null&&t!=""&&(yt.instance.m_bPlayeSound=parseInt(t)==1)}get m_bPlayeSound(){return this._m_bPlayeSound}set m_bPlayeSound(e){this._m_bPlayeSound=e}playMusicByURL(e){this.m_bPlayMusic&&(this.m_strMusicURL,this.m_strMusicURL==e&&this.musicChannel,this.m_strMusicURL=e,Laya.SoundManager.stopMusic(),this.musicChannel=Laya.SoundManager.playMusic(e,0,new Laya.Handler(this,this.onComplete)))}playMusicByName(e,t=".ogg"){let i=_e.instance.getSoundURL(e,t);this.playMusicByURL(i)}playSound(e,t=1){this.m_bPlayeSound&&Laya.SoundManager.playSound(e,t,new Laya.Handler(this,this.onComplete))}playSoundByName(e,t=1){let i=_e.instance.getSoundURLogg(e);this.playSound(i,t)}stopSoundByName(e){let t=_e.instance.getSoundURLogg(e);Laya.SoundManager.stopSound(t)}switchMusic(e){let t=e?1:0;yt.instance.m_bPlayMusic=e,Laya.LocalStorage.setItem(yt.COOKIE_CF_MUSIC,t.toString())}switchSound(e){let t=e?1:0;yt.instance.m_bPlayeSound=e,Laya.LocalStorage.setItem(yt.COOKIE_CF_SOUND,t.toString())}onComplete(){}};yt.COOKIE_CF_MUSIC="COOKIE_CF_MUSIC",yt.COOKIE_CF_SOUND="COOKIE_CF_SOUND",yt.soundName_bg="bgm",yt.soundName_hit="hit.mp3",yt.soundName_win="result_win.mp3",yt.soundName_fail="result_fail.mp3",yt.soundName_kill_1="kill_1.mp3",yt.soundName_kill_2="kill_2.mp3",yt.soundName_kill_3="kill_3.mp3",yt.soundName_kill_4="kill_4.mp3",yt.soundName_kill_5="kill_5.mp3",yt.soundName_eat_food_1="eat_food1.mp3",yt.soundName_eat_food_2="eat_food2.mp3",yt.soundName_eat_food_3="eat_food3.mp3",yt.soundName_kill_die="kill_die.mp3",yt.soundName32="ui32.ogg";var Qe=yt;var pe=class{};pe.Sound={btnClick:""},pe.GameConfig={debug:!1,version:"1.0.0",frameRate:"30",defaultVolume:.7,skills:{speedUp:{duration:5,cooldown:10},shield:{duration:3,cooldown:15},magnet:{duration:8,cooldown:20},invisible:{duration:4,cooldown:25}}},pe.uiZOrder={common:1e3,hint:2e3,loading:2001},pe.closeType={cancel:1,close:2,ok:3,keyback:4},pe.JoystickMODE={FIXED:1,MOVED:2},pe.JoystickEventType={JET_TOUCH_BEGIN:1,JET_TOUCH_MOVE:2,JET_TOUCH_END:3},pe.JoystickSize={JoyStickBg:80,JoyStickHandleBg:40},pe.snackType={SELF:1,OTHERS:2},pe.snackSpeedRate={default:1,speedUp:2},pe.mapSize={width:64+1280*3+64,height:60+720*4+60,offsetX:64,offsetY:60,defaultMapRes:{width:1280,height:720,resPath:"res/snake/manual/game/img_back.png"}},pe.gameZordels={map:1,snacks:2},pe.snackGount=100,pe.collision={quadTree:{maxObjects:10,maxLevels:5},snake:{headRadius:18,bodyRadius:14},food:{radius:25,maxRadius:25}},pe.food={size:50,initCount:100,maxCount:200,spawnInterval:1e3,types:{NORMAL:1,GOLDEN:2,RAINBOW:3,POISON:4}},pe.score={kill:100,food:{NORMAL:1,GOLDEN:5,RAINBOW:10,POISON:-3}},pe.res={snackRingImg:"res/match2/img_ring.png"},pe.snack={defaultSpeed:6,defaultRotateSpeed:500,defaultLen:20,intervalBoneToDrawSkin:4,defaultRotation:270,defaultRadio:35/2,defaultMoveInterval:.033,defaultInvincibleTime:3,defaultShineInterval:.1,skinFlag:{head:1,body:2},useServer:!1},pe.SYNC_CONFIG={MAX_ALLOWED_ERROR:50,CORRECTION_TIME:300,SYNC_INTERVAL:100,PREDICTION_MULTIPLIER:1.2},pe.invincibleRing={margin:2,minScale:.5};var Et=class r{constructor(e=0,t=0){this.x=e,this.y=t}static create(e=0,t=0){return new r(e,t)}assign(e){return this.x=e.x,this.y=e.y,this}add(e){return new r(this.x+e.x,this.y+e.y)}sub(e){return new r(this.x-e.x,this.y-e.y)}mul(e){return new r(this.x*e,this.y*e)}getRotation(){let e=Math.atan2(this.y,this.x)*180/Math.PI;return e<0&&(e+=360),e}getRotationTo(e){let t=e.x-this.x,i=e.y-this.y,n=Math.atan2(i,-t)*180/Math.PI;return n<0&&(n+=360),n}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y);return e!==0&&(this.x/=e,this.y/=e),this}rotate(e){let t=e*Math.PI/180,i=Math.sin(t),n=Math.cos(t),s=this.x,a=this.y;this.x=s*n-a*i,this.y=s*i+a*n}dot(e){return this.x*e.x+this.y*e.y}equal(e){return this.x===e.x&&this.y===e.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}init(e=0,t=0){return this.x=e,this.y=t,this}clone(){return new r(this.x,this.y)}clamp(e,t){let i=this.length();return i>t&&this.normalize().mul(t),i<e&&this.normalize().mul(e),this}reset(){return this.x=0,this.y=0,this}toString(){return`(${this.x},${this.y})`}};var gt=class r{constructor(){}static judgePosition(e,t){let i=Math.atan2(t,e)*180/Math.PI;return i<0&&(i+=360),Math.floor(i)}static distancePoint(e,t,i,n){return Math.sqrt((e-i)*(e-i)+(t-n)*(t-n))}get2D_Distance(e,t){return Math.sqrt(Math.pow(Math.abs(e),2)+Math.pow(Math.abs(t),2))}static rollCharacterByDir(e,t,i,n){let s=i;return r.rollCharacter(e,t,s,n)}static rollCharacter(e,t,i,n){let s=i*(Math.PI/180);var a=e+n*Math.cos(s),c=t+n*Math.sin(s),u=Le.instance.currArenaItem.mapid,p=xe.intance.m_dicMaps.get(u),f=p.offset;return a<f?a=f:a>p.width-f&&(a=p.width-f),c<f?c=f:c>p.height-f&&(c=p.height-f),console.log(`新的坐标：X=${a}, Y=${c}`),[a,c]}static getRandomPointInMap(){var e=Le.instance.currArenaItem.mapid,t=xe.intance.m_dicMaps.get(e),i=t.width,n=t.height,s=t.offset;let a=Math.floor(Math.random()*(i-2*s))+s,c=Math.floor(Math.random()*(n-2*s))+s;return{x:a,y:c}}static createDirectPath(e,t,i,n=40,s=25){for(var a=[],c=i*Math.PI/180,u=1;u<n;++u){var p=e,f=t+s*u,d=-(f-t)*Math.sin(c)+e,h=(f-t)*Math.cos(c)+t;a.push(d,h)}return a}static pointsBack(e,t){if(t<=0||!e||e.length<4)return e;for(var i=0,n=-1,s=-1,a=0;a<e.length;a+=2){var c=e[a],u=e[a+1];n>0&&s>0&&(i+=this.distancePoint(n,s,c,u)),n=c,s=u}if(i<t)return null;for(var p=e.concat(),f=0,d=0;p&&p.length>=4&&f<t;){var h=p.pop(),b=p.pop(),w=p[p.length-1],v=p[p.length-2];if(f+=this.distancePoint(v,w,b,h),d=f-t,d>0){var _=Math.atan2(w-h,v-b),T=_*180/Math.PI+90;_=T*Math.PI/180;var M=w+d,D=-(M-w)*Math.sin(_)+v,F=(M-w)*Math.cos(_)+w;p.push(D,F)}}return p}static createLinePath(e,t,i,n,s=25,a=0){var c=[],u=Math.atan2(n-t,i-e);u=(u*180/Math.PI-90)*Math.PI/180;for(var p=this.distancePoint(e,t,i,n)-a,f=0,d=0;p>f;){var h=e,b=t+s*d,w=-(b-t)*Math.sin(u)+e,v=(b-t)*Math.cos(u)+t;f=this.distancePoint(e,t,w,v),p>f&&c.push(w,v),d++}return a==0&&c.push(i,n),c}static rolePosTransform(e,t,i){var n=new Laya.Matrix;return n.rotate(Math.PI/180*(e.modelAngle-90)),n.translate(t.x,t.y),n.transformPoint(i)}static pointtInPolygon(e,t){for(var i=0,n=0;n<t.length;n++){var s=t[n],a=t[(n+1)%t.length];if(s.y!=a.y&&!(e.y<Math.min(s.y,a.y))&&!(e.y>=Math.max(s.y,a.y))){var c=(e.y-s.y)*(a.x-s.x)/(a.y-s.y)+s.x;c>e.x&&i++}}return i%2==1}static pointInPie(e,t,i,n,s,a){var c=Math.atan2(a.y-t,a.x-e)*180/Math.PI,u=this.distancePoint(e,t,a.x,a.y);return c>=i&&c<=n&&u<=s}static getRandInRound(e,t){return Math.floor(Math.random()*(t-e+1))+e}static getUnitVector(e){let i=e*(Math.PI/180),n=1*Math.cos(i),s=1*Math.sin(i);return new Laya.Point(n,s)}static getAngleToVec(e){let t=e*Math.PI/180,i=Math.cos(t),n=Math.sin(t);return Et.create(i,n)}static subtract(e,t){let i=new Laya.Point;return i.x=e.x-t.x,i.y=e.y-t.y,i}static getDistance(e,t){let i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}static calculateDistance(e,t){let i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}static lerp(e,t,i){return e+(t-e)*i}};var S=class{};S.FindView="FindView",S.FindEndView="FindEndView",S.FindAskDialog="FindAskDialog",S.FindRankUpDialog="FindRankUpDialog",S.QuickTipDialog="QuickTipDialog",S.QuickEndView="QuickEndView",S.QuickShareView="QuickShareView",S.QuickOperatorDialog="QuickOperatorDialog",S.MainView="MainView",S.RoleDialog="RoleDialog",S.RemGetDialog="RemGetDialog",S.QuickRechargeDialog="QuickRechargeDialog",S.CreateNameDialog="CreateNameDialog",S.DailyTaskDialog="DailyTaskDialog",S.ActivityTaskDialog="ActivityTaskDialog",S.ShareDialog="ShareDialog",S.InvitationCenterDialog="InvitationCenterDialog",S.DailyTaskDrawDialog="DailyTaskDrawDialog",S.GuideView="GuideView",S.GuideDialogView="GuideDialogView",S.ShareView="ShareView",S.MainTopView="MainTopView",S.GetMoreDialog="GetMoreDialog",S.ShopView="ShopView",S.ItemGetDialog="ItemGetDialog",S.EquipStarUpDialog="EquipStarUpDialog",S.RewardGetDialog="RewardGetDialog",S.AssetNewView="AssetNewView",S.GetTitleDialog="GetTitleDialog",S.NewFunUnLockDialog="NewFunUnLockDialog",S.DialogView="DialogView",S.MallView="MallView",S.MallCardView="MallCardView",S.MallBuyDialog="MallBuyDialog",S.FittingUiView="FittingUiView",S.TaskDialog="TaskDialog",S.CommentDialog="CommentDialog",S.PotraitChangDialog="PotraitChangDialog",S.ClothespressView="ClothespressView",S.ItemSellDialog="ItemSellDialog",S.ItemInfoDialog="ItemInfoDialog",S.OnlineAward="OnlineAward",S.MaillView="MailView",S.MailSendView="MailSendView",S.GameSettingDialog="GameSettingDialog",S.GamesettingSoundView="GamesettingSoundView",S.GameSettingLanguageDialog="GameSettingLanguageDialog",S.GameSettingVersionDialog="GameSettingVersionDialog",S.FriendMainView="FriendMainView",S.FriendSearchView="FriendSearchView",S.FriendGetRewardDialog="FriendGetRewardDialog",S.FriendRewardDialog="FriendRewardDialog",S.PreLoadingView="PreLoadingView",S.RechargeDialog="RechargeDialog",S.WalletChooseHeroDialog="WalletChooseHeroDialog",S.EmployInfoDialog="EmployInfoDialog",S.WalletChoosePropsDialog="WalletChoosePropsDialog",S.FirstRechargeDialog="FirstRechargeDialog",S.FirstWeekRechargeView="FirstWeekRechargeView",S.ClientErrView="ClientErrView",S.RoleUpgradeView="RoleUpgradeView",S.ActiveRechargeView="ActiveRechargeView",S.SmallSaleView="SmallSaleView",S.RechargeSelectDialog="RechargeSelectDialog",S.FBLikeView="FBLikeView",S.TurnSuitPreView="TurnSuitPreView",S.SlotMachineView="SlotMachineView",S.SlotMachineRewardPreDialog="SlotMachineRewardPreDialog",S.SlotMachineResultDialog="SlotMachineResultDialog",S.GashaponView="GashaponView",S.GashaponRewardView="GashaponRewardView",S.ActivityRankRewardView="ActivityRankRewardView",S.AddRechargeView="AddRechargeView",S.CupMatchStartDialog="CupMatchStartDialog",S.CupMatchEndDialog="CupMatchEndDialog",S.CreateLoginView="CreateLoginView",S.SelectHeadDialog="SelectHeadDialog",S.RoleInfoDialog="RoleInfoDialog",S.SelectHeroDialog="SelectHeroDialog",S.CreateSubWalletDialog="CreateSubWalletDialog",S.WalletDialog="WalletDialog",S.WalletTransferDialog="WalletTransferDialog",S.CardPayView="CardPayView",S.SwapView="SwapView",S.GuildInfoDialog="GuildInfoDialog",S.CreateUnionDialog="CreateUnionDialog",S.UnionInfoView="UnionInfoView",S.UnionEarningView="UnionEarningView",S.UnionRevenueDetailDialog="UnionRevenueDetailDialog",S.UnionSetRevenueDialog="UnionSetRevenueDialog",S.UnionBattleRecordDialog="UnionBattleRecordDialog",S.UnionRevenueRecordDialog="UnionRevenueRecordDialog",S.GamesettingView="GamesettingView",S.GameSettingGameAccountView="GameSettingGameAccountView",S.NoticeDialog="NoticeDialog",S.HelpDialog="HelpDialog",S.ImgDialog="ImgDialog",S.ChampDetailDialog="ChampDetailDialog",S.ChampRecordDialog="ChampRecordDialog",S.LoadDialog="LoadDialog",S.ChangeHeadDialog="ChangeHeadDialog",S.CreateRoomDialog="CreateRoomDialog",S.CreateRentalDialog="CreateRentalDialog",S.MyLeasedDialog="MyLeasedDialog",S.MyRentedDialog="MyRentedDialog",S.MyRentalBuyDialog="MyRentalBuyDialog",S.BuyTicketDialog="BuyTicketDialog",S.EnterRoomView="EnterRoomView",S.MatchEndRankView="MatchEndRankView",S.MatchEndTeamRankView="MatchEndTeamRankView",S.MatchReadyView="MatchReadyView",S.MatchEndView="MatchEndView",S.MatchEndRewardTokensDialog="MatchEndRewardTokensDialog",S.HeroGetDialog="HeroGetDialog",S.InputPwdDialog="InputPwdDialog",S.RoomInfoDialog="RoomInfoDialog",S.MailDialog="MailDialog",S.TeamCreateShareDialog="TeamCreateShareDialog",S.TeamShareDialog="TeamShareDialog",S.TeamJoinUsingDialog="TeamJoinUsingDialog",S.MyTeamDialog="MyTeamDialog",S.TeamInfoDialog="TeamInfoDialog",S.MyFriendDialog="MyFriendDialog",S.BuyPropDialog="BuyPropDialog",S.UnionAttrView="UnionAttrView",S.UnionAttrLvUpDialog="UnionAttrLvUpDialog",S.UnionAttributeDetailsDialog="UnionAttributeDetailsDialog",S.NoServerView="NoServerView",S.UnionMemberMoreDialog="UnionMemberMoreDialog",S.HeroUpgradeDialog="HeroUpgradeDialog",S.HeroDetailDialog="HeroDetailDialog",S.SkillTipDialog="SkillTipDialog",S.TransferRecordDialog="TransferRecordDialog",S.AFKView="AFKView",S.AFKBagDialog="AFKBagDialog",S.AFKDropDetailDialog="AFKDropDetailDialog",S.AFKMapView="AFKMapView",S.AFKSelectLevelDialog="AFKSelectLevelDialog",S.Knapsack="Knapsack",S.KnapsackTipDialog="KnapsackTipDialog",S.HeroFormationDialog="HeroFormationDialog",S.SignInDialog="SignInDialog",S.InviteRewardDialog="InviteRewardDialog",S.ChallengLoseDialog="ChallengLoseDialog",S.ChallengWinDialog="ChallengWinDialog",S.ChallengBossDialog="ChallengBossDialog",S.ThirbleDropDialog="ThirbleDropDialog",S.LevelDropDialog="LevelDropDialog",S.UseCardDialog="UseCardDialog",S.ArenaView="ArenaView",S.MyBookingView="MyBookingView",S.ArenaLoseDialog="ArenaLoseDialog",S.ArenaBattleDialog="ArenaBattleDialog",S.ArenaWinDialog="ArenaWinDialog",S.ArenaWarNotesView="ArenaWarNotesView",S.ArenaRuleDialog="ArenaRuleDialog",S.EquipSelectDialog="EquipSelectDialog",S.EquipDetailDialog="EquipDetailDialog",S.HireDetailDialog="HireDetailDialog",S.ProxyDetailDialog="ProxyDetailDialog",S.WithDrawRecordDialog="WithDrawRecordDialog",S.NodeRevenueRecordDialog="NodeRevenueRecordDialog",S.RentalRecordDialog="RentalRecordDialog",S.PrivateChatDialog="PrivateChatDialog",S.AirdropRecordDialog="AirdropRecordDialog",S.ActivityInfoDialog="ActivityInfoDialog",S.CharacterStarDialog="CharacterStarDialog",S.LastDrawDialog="LastDrawDialog",S.IgoPageView="IgoPageView",S.IgoJoinDialog="IgoJoinDialog",S.IgoRecordDialog="IgoRecordDialog",S.PveChoosePropsDialog="PveChoosePropsDialog",S.ReferralDialog="ReferralDialog",S.ReferralL2Dialog="ReferralL2Dialog",S.TotalBattlesDialog="TotalBattlesDialog",S.DepositDialog="DepositDialog",S.WithdrawDialog="WithdrawDialog";var Dt=class{static initConfig(e){this.configDic=new Ie;for(let t of e){let i=t.sstringvalue;t.sadditional==="JSON"&&(i=JSON.parse(i)),this.configDic.set(t.skey2,i),this[t.skey2]=i}}};Dt.ADDRESS0="0x0000000000000000000000000000000000000000",Dt.TOKEN_ERC20ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"miner",type:"address"}],name:"addMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_delMinter",type:"address"}],name:"delMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idx",type:"uint256"}],name:"getMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMinterLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Dt.WITHDRAW_AND_RECHARGE_ADDRESS="",Dt.WITHDRAW_AND_RECHARGE_ABI="";var ji=class{constructor(){this.coins={};this.needTip=!0}};var ys=class r{constructor(){this.account_contract=null;this.tokenId=0}static get instance(){return r._instance||(r._instance=new r),r._instance}init(){typeof window.ethereum>"u"}async getAccountVoFromServer(){let e=await Ze.requestPost("cybertron-sys-api/api/v1/account/find",{address:Me.instance.walletAddress},!1,!1);if(e){let t=new ji;return Object.assign(t,e),console.log("info========"+JSON.stringify(t)),t}return e}async updateProfile(e,t,i){var n=G.instance.playerDto.sex,s=G.instance.playerDto;let a=await Ze.requestPost("wxgame/player/changeInfo",{name:e,sex:n,icon:t,country:i});return a?(s.icon=a.icon,s.country=a.country,s.name=a.name,s.sex=a.sex,s):null}async getTokenId(){return this.tokenId?this.tokenId:(this.tokenId=await this.account_contract.methods.tokenOfOwnerByIndex(Me.instance.walletAddress,0).call(),this.tokenId=parseInt(this.tokenId+""),this.tokenId)}};var Wf=Xb(Qb());var Vi=class{static getInviteUrl(){return window.location.origin+"?invite="+this.encode(Me.instance.walletAddress)}static encode(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=t.length,n=t.split(""),s="",a,c,u,p,f=0;f<e.length;f++)a=e.charCodeAt(f),c=a%i,a=(a-c)/i,u=a%i,a=(a-u)/i,p=a%i,s+=n[p]+n[u]+n[c];return window.btoa(s)}static decode(e){e=window.atob(e);var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=t.length,n,s,a,c,u=0,p;p=new Array(Math.floor(e.length/3)),n=p.length;for(var f=0;f<n;f++)s=t.indexOf(e.charAt(u)),u++,a=t.indexOf(e.charAt(u)),u++,c=t.indexOf(e.charAt(u)),u++,p[f]=s*i*i+a*i+c;return n=decodeCharCode(p.join(",")),n}static getQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return i!=null?i[2]:""}static getInviteWalletAddress(){let e=this.getQueryString("invite");return e&&(e=this.decode(e)),e}static toWei(e,t){let i=e*10**parseInt(t);return window.web3.utils.toBN("0x"+i.toString(16)).toString()}static fromWei(e,t,i=0){if(!e)return 0;let n=e.length-t+i;if(n<=0)return 0;let s=e.toString().slice(0,n);if(i){let a=s.length-i;if(a<=0){let c="0.";for(let u=0;u<Math.abs(a);u++)c+="0";s=c+s}else s=s.slice(0,s.length-i)+"."+s.slice(s.length-i)}return s}static deepClone(e){let t=new Ie;for(let i in e)typeof e[i]=="function"?t[i]=e[i]:t[i]=JSON.parse(JSON.stringify(e[i]));return t}};function me(r,e,t){let i=r[e.name];if(typeof i=="function")return i;let n=r[t];return typeof n=="function"?n:s=>e(r,s)}tr();rt();var Zu=class extends P{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}};pr();Ci();Pc();Gn();Ro();As();var a0="/docs/contract/encodeEventTopics";function Yi(r){let{abi:e,eventName:t,args:i}=r,n=e[0];if(t){let u=qi({abi:e,name:t});if(!u)throw new Ac(t,{docsPath:a0});n=u}if(n.type!=="event")throw new Ac(void 0,{docsPath:a0});let s=Mr(n),a=Vn(s),c=[];if(i&&"inputs"in n){let u=n.inputs?.filter(f=>"indexed"in f&&f.indexed),p=Array.isArray(i)?i:Object.values(i).length>0?u?.map(f=>i[f.name])??[]:[];p.length>0&&(c=u?.map((f,d)=>Array.isArray(p[d])?p[d].map((h,b)=>c0({param:f,value:p[d][b]})):typeof p[d]<"u"&&p[d]!==null?c0({param:f,value:p[d]}):null)??[])}return[a,...c]}function c0({param:r,value:e}){if(r.type==="string"||r.type==="bytes")return Rt(oi(e));if(r.type==="tuple"||r.type.match(/^(.*)\[(\d+)?\]$/))throw new Zu(r.type);return Jr([r],[e])}Ne();function Wn(r,{method:e}){let t={};return r.transport.type==="fallback"&&r.transport.onResponse?.(({method:i,response:n,status:s,transport:a})=>{s==="success"&&e===i&&(t[n]=a.request)}),i=>t[i]||r.request}async function bp(r,e){let{address:t,abi:i,args:n,eventName:s,fromBlock:a,strict:c,toBlock:u}=e,p=Wn(r,{method:"eth_newFilter"}),f=s?Yi({abi:i,args:n,eventName:s}):void 0,d=await r.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof a=="bigint"?de(a):a,toBlock:typeof u=="bigint"?de(u):u,topics:f}]});return{abi:i,args:n,eventName:s,id:d,request:p(d),strict:!!c,type:"event"}}ir();ai();tr();rt();$n();zo();zc();var Iw=3;function ei(r,{abi:e,address:t,args:i,docsPath:n,functionName:s,sender:a}){let c=r instanceof Qi?r:r instanceof P?r.walk(w=>"data"in w)||r.walk():{},{code:u,data:p,details:f,message:d,shortMessage:h}=c,b=(()=>r instanceof ni?new Pp({functionName:s}):[Iw,wn.code].includes(u)&&(p||f||d||h)?new Ho({abi:e,data:typeof p=="object"?p.data:p,functionName:s,message:c instanceof Kn?f:h??d}):r)();return new Op(b,{abi:e,args:i,contractAddress:t,docsPath:n,functionName:s,sender:a})}ir();rt();Bo();Ci();function S0(r){let e=Rt(`0x${r.substring(4)}`).substring(26);return _n(`0x${e}`)}Ii();Er();Ne();async function c1({hash:r,signature:e}){let t=qt(r)?r:we(r),{secp256k1:i}=await Promise.resolve().then(()=>(em(),s1));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){let{r:p,s:f,v:d,yParity:h}=e,b=Number(h??d),w=a1(b);return new i.Signature(Nt(p),Nt(f)).addRecoveryBit(w)}let a=qt(e)?e:we(e),c=Zt(`0x${a.slice(130)}`),u=a1(c);return i.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(u)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function a1(r){if(r===0||r===1)return r;if(r===27)return 0;if(r===28)return 1;throw new Error("Invalid yParityOrV value")}async function tm({hash:r,signature:e}){return S0(await c1({hash:r,signature:e}))}si();pr();Ne();rt();vp();pr();Ne();function Oi(r,e="hex"){let t=l1(r),i=Cs(new Uint8Array(t.length));return t.encode(i),e==="hex"?ft(i.bytes):i.bytes}function l1(r){return Array.isArray(r)?pE(r.map(e=>l1(e))):mE(r)}function pE(r){let e=r.reduce((n,s)=>n+s.length,0),t=u1(e);return{length:(()=>e<=55?1+e:1+t+e)(),encode(n){e<=55?n.pushByte(192+e):(n.pushByte(192+55+t),t===1?n.pushUint8(e):t===2?n.pushUint16(e):t===3?n.pushUint24(e):n.pushUint32(e));for(let{encode:s}of r)s(n)}}}function mE(r){let e=typeof r=="string"?rr(r):r,t=u1(e.length);return{length:(()=>e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+t+e.length)(),encode(n){e.length===1&&e[0]<128?n.pushBytes(e):e.length<=55?(n.pushByte(128+e.length),n.pushBytes(e)):(n.pushByte(128+55+t),t===1?n.pushUint8(e.length):t===2?n.pushUint16(e.length):t===3?n.pushUint24(e.length):n.pushUint32(e.length),n.pushBytes(e))}}}function u1(r){if(r<2**8)return 1;if(r<2**16)return 2;if(r<2**24)return 3;if(r<2**32)return 4;throw new P("Length is too large.")}Ci();function p1(r){let{chainId:e,nonce:t,to:i}=r,n=r.contractAddress??r.address,s=Rt(Ir(["0x05",Oi([e?de(e):"0x",n,t?de(t):"0x"])]));return i==="bytes"?rr(s):s}async function rm(r){let{authorization:e,signature:t}=r;return tm({hash:p1(e),signature:t??e})}Ne();Sp();Ds();rt();Mi();var im=class extends P{constructor(e,{account:t,docsPath:i,chain:n,data:s,gas:a,gasPrice:c,maxFeePerGas:u,maxPriorityFeePerGas:p,nonce:f,to:d,value:h}){let b=Fo({from:t?.address,to:d,value:typeof h<"u"&&`${Ms(h)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:a,gasPrice:typeof c<"u"&&`${nr(c)} gwei`,maxFeePerGas:typeof u<"u"&&`${nr(u)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${nr(p)} gwei`,nonce:f});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",b].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}};io();Yc();function m1(r,{docsPath:e,...t}){let i=(()=>{let n=no(r,t);return n instanceof pi?r:n})();return new im(i,{docsPath:e,...t})}Xc();Qo();om();so();ir();Ds();rt();var sm=class extends P{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},ao=class extends P{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},am=class extends P{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${nr(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}};Er();rt();var ca=class extends P{constructor({blockHash:e,blockNumber:t}){let i="Block";e&&(i=`Block at hash "${e}"`),t&&(i=`Block at number "${t}"`),super(`${i} could not be found.`,{name:"BlockNotFoundError"})}};Ne();nm();Er();nm();var $g={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Zo(r){let e={...r,blockHash:r.blockHash?r.blockHash:null,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,chainId:r.chainId?Zt(r.chainId):void 0,gas:r.gas?BigInt(r.gas):void 0,gasPrice:r.gasPrice?BigInt(r.gasPrice):void 0,maxFeePerBlobGas:r.maxFeePerBlobGas?BigInt(r.maxFeePerBlobGas):void 0,maxFeePerGas:r.maxFeePerGas?BigInt(r.maxFeePerGas):void 0,maxPriorityFeePerGas:r.maxPriorityFeePerGas?BigInt(r.maxPriorityFeePerGas):void 0,nonce:r.nonce?Zt(r.nonce):void 0,to:r.to?r.to:null,transactionIndex:r.transactionIndex?Number(r.transactionIndex):null,type:r.type?$g[r.type]:void 0,typeHex:r.type?r.type:void 0,value:r.value?BigInt(r.value):void 0,v:r.v?BigInt(r.v):void 0};return r.authorizationList&&(e.authorizationList=gE(r.authorizationList)),e.yParity=(()=>{if(r.yParity)return Number(r.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}var d1=oa("transaction",Zo);function gE(r){return r.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function Qc(r){let e=(r.transactions??[]).map(t=>typeof t=="string"?t:Zo(t));return{...r,baseFeePerGas:r.baseFeePerGas?BigInt(r.baseFeePerGas):null,blobGasUsed:r.blobGasUsed?BigInt(r.blobGasUsed):void 0,difficulty:r.difficulty?BigInt(r.difficulty):void 0,excessBlobGas:r.excessBlobGas?BigInt(r.excessBlobGas):void 0,gasLimit:r.gasLimit?BigInt(r.gasLimit):void 0,gasUsed:r.gasUsed?BigInt(r.gasUsed):void 0,hash:r.hash?r.hash:null,logsBloom:r.logsBloom?r.logsBloom:null,nonce:r.nonce?r.nonce:null,number:r.number?BigInt(r.number):null,size:r.size?BigInt(r.size):void 0,timestamp:r.timestamp?BigInt(r.timestamp):void 0,transactions:e,totalDifficulty:r.totalDifficulty?BigInt(r.totalDifficulty):null}}var h1=oa("block",Qc);async function Tr(r,{blockHash:e,blockNumber:t,blockTag:i,includeTransactions:n}={}){let s=i??"latest",a=n??!1,c=t!==void 0?de(t):void 0,u=null;if(e?u=await r.request({method:"eth_getBlockByHash",params:[e,a]},{dedupe:!0}):u=await r.request({method:"eth_getBlockByNumber",params:[c||s,a]},{dedupe:!!c}),!u)throw new ca({blockHash:e,blockNumber:t});return(r.chain?.formatters?.block?.format||Qc)(u)}async function la(r){let e=await r.request({method:"eth_gasPrice"});return BigInt(e)}async function g1(r,e){return Kg(r,e)}async function Kg(r,e){let{block:t,chain:i=r.chain,request:n}=e||{};try{let s=i?.fees?.maxPriorityFeePerGas??i?.fees?.defaultPriorityFee;if(typeof s=="function"){let c=t||await me(r,Tr,"getBlock")({}),u=await s({block:c,client:r,request:n});if(u===null)throw new Error;return u}if(typeof s<"u")return s;let a=await r.request({method:"eth_maxPriorityFeePerGas"});return Nt(a)}catch{let[s,a]=await Promise.all([t?Promise.resolve(t):me(r,Tr,"getBlock")({}),me(r,la,"getGasPrice")({})]);if(typeof s.baseFeePerGas!="bigint")throw new ao;let c=a-s.baseFeePerGas;return c<0n?0n:c}}async function b1(r,e){return cm(r,e)}async function cm(r,e){let{block:t,chain:i=r.chain,request:n,type:s="eip1559"}=e||{},a=await(async()=>typeof i?.fees?.baseFeeMultiplier=="function"?i.fees.baseFeeMultiplier({block:t,client:r,request:n}):i?.fees?.baseFeeMultiplier??1.2)();if(a<1)throw new sm;let u=10**(a.toString().split(".")[1]?.length??0),p=h=>h*BigInt(Math.ceil(a*u))/BigInt(u),f=t||await me(r,Tr,"getBlock")({});if(typeof i?.fees?.estimateFeesPerGas=="function"){let h=await i.fees.estimateFeesPerGas({block:t,client:r,multiply:p,request:n,type:s});if(h!==null)return h}if(s==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new ao;let h=typeof n?.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:await Kg(r,{block:f,chain:i,request:n}),b=p(f.baseFeePerGas);return{maxFeePerGas:n?.maxFeePerGas??b+h,maxPriorityFeePerGas:h}}return{gasPrice:n?.gasPrice??p(await me(r,la,"getGasPrice")({}))}}Er();Ne();async function ua(r,{address:e,blockTag:t="latest",blockNumber:i}){let n=await r.request({method:"eth_getTransactionCount",params:[e,i?de(i):t]},{dedupe:!!i});return Zt(n)}pr();Ne();function pa(r){let{kzg:e}=r,t=r.to??(typeof r.blobs[0]=="string"?"hex":"bytes"),i=typeof r.blobs[0]=="string"?r.blobs.map(s=>rr(s)):r.blobs,n=[];for(let s of i)n.push(Uint8Array.from(e.blobToKzgCommitment(s)));return t==="bytes"?n:n.map(s=>ft(s))}pr();Ne();function ma(r){let{kzg:e}=r,t=r.to??(typeof r.blobs[0]=="string"?"hex":"bytes"),i=typeof r.blobs[0]=="string"?r.blobs.map(a=>rr(a)):r.blobs,n=typeof r.commitments[0]=="string"?r.commitments.map(a=>rr(a)):r.commitments,s=[];for(let a=0;a<i.length;a++){let c=i[a],u=n[a];s.push(Uint8Array.from(e.computeBlobKzgProof(c,u)))}return t==="bytes"?s:s.map(a=>ft(a))}Ne();wg();Ii();pr();Ne();function y1(r,e){let t=e||"hex",i=Go(qt(r,{strict:!1})?oi(r):r);return t==="bytes"?i:we(i)}function x1(r){let{commitment:e,version:t=1}=r,i=r.to??(typeof e=="string"?"hex":"bytes"),n=y1(e,"bytes");return n.set([t],0),i==="bytes"?n:ft(n)}function lm(r){let{commitments:e,version:t}=r,i=r.to??(typeof e[0]=="string"?"hex":"bytes"),n=[];for(let s of e)n.push(x1({commitment:s,to:i,version:t}));return n}rt();var um=class extends P{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}},fa=class extends P{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}},pm=class extends P{constructor({hash:e,size:t}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${t}`],name:"InvalidVersionedHashSizeError"})}},mm=class extends P{constructor({hash:e,version:t}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${1}`,`Received: ${t}`],name:"InvalidVersionedHashVersionError"})}};vp();Si();pr();Ne();function _1(r){let e=r.to??(typeof r.data=="string"?"hex":"bytes"),t=typeof r.data=="string"?rr(r.data):r.data,i=bt(t);if(!i)throw new fa;if(i>761855)throw new um({maxSize:761855,size:i});let n=[],s=!0,a=0;for(;s;){let c=Cs(new Uint8Array(131072)),u=0;for(;u<4096;){let p=t.slice(a,a+(32-1));if(c.pushByte(0),c.pushBytes(p),p.length<31){c.pushByte(128),s=!1;break}u++,a+=31}n.push(c)}return e==="bytes"?n.map(c=>c.bytes):n.map(c=>ft(c.bytes))}function fm(r){let{data:e,kzg:t,to:i}=r,n=r.blobs??_1({data:e,to:i}),s=r.commitments??pa({blobs:n,kzg:t,to:i}),a=r.proofs??ma({blobs:n,commitments:s,kzg:t,to:i}),c=[];for(let u=0;u<n.length;u++)c.push({blob:n[u],commitment:s[u],proof:a[u]});return c}so();Mi();function dm(r){if(r.type)return r.type;if(typeof r.authorizationList<"u")return"eip7702";if(typeof r.blobs<"u"||typeof r.blobVersionedHashes<"u"||typeof r.maxFeePerBlobGas<"u"||typeof r.sidecars<"u")return"eip4844";if(typeof r.maxFeePerGas<"u"||typeof r.maxPriorityFeePerGas<"u")return"eip1559";if(typeof r.gasPrice<"u")return typeof r.accessList<"u"?"eip2930":"legacy";throw new Cp({transaction:r})}Er();async function fi(r){let e=await r.request({method:"eth_chainId"},{dedupe:!0});return Zt(e)}var qg=["blobVersionedHashes","chainId","fees","gas","nonce","type"],v1=new Map;async function co(r,e){let{account:t=r.account,blobs:i,chain:n,gas:s,kzg:a,nonce:c,nonceManager:u,parameters:p=qg,type:f}=e,d=t&&at(t),h={...e,...d?{from:d?.address}:{}},b;async function w(){return b||(b=await me(r,Tr,"getBlock")({blockTag:"latest"}),b)}let v;async function _(){return v||(n?n.id:typeof e.chainId<"u"?e.chainId:(v=await me(r,fi,"getChainId")({}),v))}if(p.includes("nonce")&&typeof c>"u"&&d)if(u){let T=await _();h.nonce=await u.consume({address:d.address,chainId:T,client:r})}else h.nonce=await me(r,ua,"getTransactionCount")({address:d.address,blockTag:"pending"});if((p.includes("blobVersionedHashes")||p.includes("sidecars"))&&i&&a){let T=pa({blobs:i,kzg:a});if(p.includes("blobVersionedHashes")){let M=lm({commitments:T,to:"hex"});h.blobVersionedHashes=M}if(p.includes("sidecars")){let M=ma({blobs:i,commitments:T,kzg:a}),D=fm({blobs:i,commitments:T,proofs:M,to:"hex"});h.sidecars=D}}if(p.includes("chainId")&&(h.chainId=await _()),(p.includes("fees")||p.includes("type"))&&typeof f>"u")try{h.type=dm(h)}catch{let T=v1.get(r.uid);typeof T>"u"&&(T=typeof(await w())?.baseFeePerGas=="bigint",v1.set(r.uid,T)),h.type=T?"eip1559":"legacy"}if(p.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){let T=await w(),{maxFeePerGas:M,maxPriorityFeePerGas:D}=await cm(r,{block:T,chain:n,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<D)throw new am({maxPriorityFeePerGas:D});h.maxPriorityFeePerGas=D,h.maxFeePerGas=M}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new ao;if(typeof e.gasPrice>"u"){let T=await w(),{gasPrice:M}=await cm(r,{block:T,chain:n,request:h,type:"legacy"});h.gasPrice=M}}return p.includes("gas")&&typeof s>"u"&&(h.gas=await me(r,da,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Gr(h),delete h.parameters,h}Ne();async function hm(r,{address:e,blockNumber:t,blockTag:i="latest"}){let n=t?de(t):void 0,s=await r.request({method:"eth_getBalance",params:[e,n||i]});return BigInt(s)}async function da(r,e){let{account:t=r.account}=e,i=t?at(t):void 0;try{let j=function(Z){let{block:ye,request:re,rpcStateOverride:C}=Z;return r.request({method:"eth_estimateGas",params:C?[re,ye??"latest",C]:ye?[re,ye]:[re]})};var n=j;let{accessList:s,authorizationList:a,blobs:c,blobVersionedHashes:u,blockNumber:p,blockTag:f,data:d,gas:h,gasPrice:b,maxFeePerBlobGas:w,maxFeePerGas:v,maxPriorityFeePerGas:_,nonce:T,value:M,stateOverride:D,...F}=await co(r,{...e,parameters:i?.type==="local"?void 0:["blobVersionedHashes"]}),W=(p?de(p):void 0)||f,V=sa(D),ee=await(async()=>{if(F.to)return F.to;if(a&&a.length>0)return await rm({authorization:a[0]}).catch(()=>{throw new P("`to` is required. Could not infer from `authorizationList`")})})();Gr(e);let Q=r.chain?.formatters?.transactionRequest?.format,be=(Q||mi)({...oo(F,{format:Q}),from:i?.address,accessList:s,authorizationList:a,blobs:c,blobVersionedHashes:u,data:d,gas:h,gasPrice:b,maxFeePerBlobGas:w,maxFeePerGas:v,maxPriorityFeePerGas:_,nonce:T,to:ee,value:M}),qe=BigInt(await j({block:W,request:be,rpcStateOverride:V}));if(a){let Z=await hm(r,{address:be.from}),ye=await Promise.all(a.map(async re=>{let{address:C}=re,Fe=await j({block:W,request:{authorizationList:void 0,data:d,from:i?.address,to:C,value:de(Z)},rpcStateOverride:V}).catch(()=>100000n);return 2n*BigInt(Fe)}));qe+=ye.reduce((re,C)=>re+C,0n)}return qe}catch(s){throw m1(s,{...e,account:i,chain:r.chain})}}async function w1(r,e){let{abi:t,address:i,args:n,functionName:s,dataSuffix:a,...c}=e,u=Ft({abi:t,args:n,functionName:s});try{return await me(r,da,"estimateGas")({data:`${u}${a?a.replace("0x",""):""}`,to:i,...c})}catch(p){let f=c.account?at(c.account):void 0;throw ei(p,{abi:t,address:i,args:n,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:f?.address})}}As();tr();ha();pr();Ci();Pc();tr();Si();Pc();hg();wp();Ro();var E1="/docs/contract/decodeEventLog";function ga(r){let{abi:e,data:t,strict:i,topics:n}=r,s=i??!0,[a,...c]=n;if(!a)throw new Wu({docsPath:E1});let u=(()=>e.length===1?e[0]:e.find(v=>v.type==="event"&&a===Vn(Mr(v))))();if(!(u&&"name"in u)||u.type!=="event")throw new Is(a,{docsPath:E1});let{name:p,inputs:f}=u,d=f?.some(v=>!("name"in v&&v.name)),h=d?[]:{},b=f.filter(v=>"indexed"in v&&v.indexed);for(let v=0;v<b.length;v++){let _=b[v],T=c[v];if(!T)throw new Wi({abiItem:u,param:_});h[d?v:_.name||v]=xE({param:_,value:T})}let w=f.filter(v=>!("indexed"in v&&v.indexed));if(w.length>0){if(t&&t!=="0x")try{let v=Po(w,t);if(v)if(d)h=[...h,...v];else for(let _=0;_<w.length;_++)h[w[_].name]=v[_]}catch(v){if(s)throw v instanceof ws||v instanceof ks?new Li({abiItem:u,data:t,params:w,size:bt(t)}):v}else if(s)throw new Li({abiItem:u,data:"0x",params:w,size:0})}return{eventName:p,args:Object.values(h).length>0?h:void 0}}function xE({param:r,value:e}){return r.type==="string"||r.type==="bytes"||r.type==="tuple"||r.type.match(/^(.*)\[(\d+)?\]$/)?e:(Po([r],e)||[])[0]}function ba(r){let{abi:e,args:t,logs:i,strict:n=!0}=r,s=(()=>{if(r.eventName)return Array.isArray(r.eventName)?r.eventName:[r.eventName]})();return i.map(a=>{try{let c=e.find(p=>p.type==="event"&&a.topics[0]===Vn(p));if(!c)return null;let u=ga({...a,abi:[c],strict:n});return s&&!s.includes(u.eventName)||!_E({args:u.args,inputs:c.inputs,matchArgs:t})?null:{...u,...a}}catch(c){let u,p;if(c instanceof Is)return null;if(c instanceof Li||c instanceof Wi){if(n)return null;u=c.abiItem.name,p=c.abiItem.inputs?.some(f=>!("name"in f&&f.name))}return{...a,args:p?[]:{},eventName:u}}}).filter(Boolean)}function _E(r){let{args:e,inputs:t,matchArgs:i}=r;if(!i)return!0;if(!e)return!1;function n(s,a,c){try{return s.type==="address"?rn(a,c):s.type==="string"||s.type==="bytes"?Rt(oi(a))===c:a===c}catch{return!1}}return Array.isArray(e)&&Array.isArray(i)?i.every((s,a)=>{if(s==null)return!0;let c=t[a];return c?(Array.isArray(s)?s:[s]).some(p=>n(c,p,e[a])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof i=="object"&&!Array.isArray(i)?Object.entries(i).every(([s,a])=>{if(a==null)return!0;let c=t.find(p=>p.name===s);return c?(Array.isArray(a)?a:[a]).some(p=>n(c,p,e[s])):!1}):!1}Ne();function Ar(r,{args:e,eventName:t}={}){return{...r,blockHash:r.blockHash?r.blockHash:null,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,logIndex:r.logIndex?Number(r.logIndex):null,transactionHash:r.transactionHash?r.transactionHash:null,transactionIndex:r.transactionIndex?Number(r.transactionIndex):null,...t?{args:e,eventName:t}:{}}}async function ya(r,{address:e,blockHash:t,fromBlock:i,toBlock:n,event:s,events:a,args:c,strict:u}={}){let p=u??!1,f=a??(s?[s]:void 0),d=[];f&&(d=[f.flatMap(v=>Yi({abi:[v],eventName:v.name,args:a?void 0:c}))],s&&(d=d[0]));let h;t?h=await r.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:t}]}):h=await r.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof i=="bigint"?de(i):i,toBlock:typeof n=="bigint"?de(n):n}]});let b=h.map(w=>Ar(w));return f?ba({abi:f,args:c,logs:b,strict:p}):b}async function gm(r,e){let{abi:t,address:i,args:n,blockHash:s,eventName:a,fromBlock:c,toBlock:u,strict:p}=e,f=a?qi({abi:t,name:a}):void 0,d=f?void 0:t.filter(h=>h.type==="event");return me(r,ya,"getLogs")({address:i,args:n,blockHash:s,event:f,events:d,fromBlock:c,toBlock:u,strict:p})}lo();ai();xa();async function br(r,e){let{abi:t,address:i,args:n,functionName:s,...a}=e,c=Ft({abi:t,args:n,functionName:s});try{let{data:u}=await me(r,nn,"call")({...a,data:c,to:i});return Wr({abi:t,args:n,functionName:s,data:u||"0x"})}catch(u){throw ei(u,{abi:t,address:i,args:n,docsPath:"/docs/contract/readContract",functionName:s})}}ir();lo();ai();xa();async function O1(r,e){let{abi:t,address:i,args:n,dataSuffix:s,functionName:a,...c}=e,u=c.account?at(c.account):r.account,p=Ft({abi:t,args:n,functionName:a});try{let{data:f}=await me(r,nn,"call")({batch:!1,data:`${p}${s?s.replace("0x",""):""}`,to:i,...c,account:u}),d=Wr({abi:t,args:n,functionName:a,data:f||"0x"}),h=t.filter(b=>"name"in b&&b.name===e.functionName);return{result:d,request:{abi:h,address:i,args:n,dataSuffix:s,functionName:a,...c,account:u}}}catch(f){throw ei(f,{abi:t,address:i,args:n,docsPath:"/docs/contract/simulateContract",functionName:a,sender:u?.address})}}tr();zc();var nb=new Map,P1=new Map,AE=0;function $r(r,e,t){let i=++AE,n=()=>nb.get(r)||[],s=()=>{let f=n();nb.set(r,f.filter(d=>d.id!==i))},a=()=>{let f=n();if(!f.some(h=>h.id===i))return;let d=P1.get(r);f.length===1&&d&&d(),s()},c=n();if(nb.set(r,[...c,{id:i,fns:e}]),c&&c.length>0)return a;let u={};for(let f in e)u[f]=(...d)=>{let h=n();if(h.length!==0)for(let b of h)b.fns[f]?.(...d)};let p=t(u);return typeof p=="function"&&P1.set(r,p),a}async function tl(r){return new Promise(e=>setTimeout(e,r))}function on(r,{emitOnBegin:e,initialWaitTime:t,interval:i}){let n=!0,s=()=>n=!1;return(async()=>{let c;e&&(c=await r({unpoll:s}));let u=await t?.(c)??i;await tl(u);let p=async()=>{n&&(await r({unpoll:s}),await tl(i),p())};p()})(),s}Br();var kE=new Map,CE=new Map;function N1(r){let e=(n,s)=>({clear:()=>s.delete(n),get:()=>s.get(n),set:a=>s.set(n,a)}),t=e(r,kE),i=e(r,CE);return{clear:()=>{t.clear(),i.clear()},promise:t,response:i}}async function F1(r,{cacheKey:e,cacheTime:t=Number.POSITIVE_INFINITY}){let i=N1(e),n=i.response.get();if(n&&t>0&&new Date().getTime()-n.created.getTime()<t)return n.data;let s=i.promise.get();s||(s=r(),i.promise.set(s));try{let a=await s;return i.response.set({created:new Date,data:a}),a}finally{i.promise.clear()}}var RE=r=>`blockNumber.${r}`;async function sn(r,{cacheTime:e=r.cacheTime}={}){let t=await F1(()=>r.request({method:"eth_blockNumber"}),{cacheKey:RE(r.uid),cacheTime:e});return BigInt(t)}async function uo(r,{filter:e}){let t="strict"in e&&e.strict,i=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof i[0]=="string")return i;let n=i.map(s=>Ar(s));return!("abi"in e)||!e.abi?n:ba({abi:e.abi,logs:n,strict:t})}async function po(r,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function U1(r,e){let{abi:t,address:i,args:n,batch:s=!0,eventName:a,fromBlock:c,onError:u,onLogs:p,poll:f,pollingInterval:d=r.pollingInterval,strict:h}=e;return(()=>typeof f<"u"?f:typeof c=="bigint"?!0:!(r.transport.type==="webSocket"||r.transport.type==="fallback"&&r.transport.transports[0].config.type==="webSocket"))()?(()=>{let _=h??!1,T=dt(["watchContractEvent",i,n,s,r.uid,a,d,_,c]);return $r(T,{onLogs:p,onError:u},M=>{let D;c!==void 0&&(D=c-1n);let F,O=!1,W=on(async()=>{if(!O){try{F=await me(r,bp,"createContractEventFilter")({abi:t,address:i,args:n,eventName:a,strict:_,fromBlock:c})}catch{}O=!0;return}try{let V;if(F)V=await me(r,uo,"getFilterChanges")({filter:F});else{let ee=await me(r,sn,"getBlockNumber")({});D&&D<ee?V=await me(r,gm,"getContractEvents")({abi:t,address:i,args:n,eventName:a,fromBlock:D+1n,toBlock:ee,strict:_}):V=[],D=ee}if(V.length===0)return;if(s)M.onLogs(V);else for(let ee of V)M.onLogs([ee])}catch(V){F&&V instanceof Zi&&(O=!1),M.onError?.(V)}},{emitOnBegin:!0,interval:d});return async()=>{F&&await me(r,po,"uninstallFilter")({filter:F}),W()}})})():(()=>{let _=h??!1,T=dt(["watchContractEvent",i,n,s,r.uid,a,d,_]),M=!0,D=()=>M=!1;return $r(T,{onLogs:p,onError:u},F=>((async()=>{try{let O=(()=>{if(r.transport.type==="fallback"){let ee=r.transport.transports.find(Q=>Q.config.type==="webSocket");return ee?ee.value:r.transport}return r.transport})(),W=a?Yi({abi:t,eventName:a,args:n}):[],{unsubscribe:V}=await O.subscribe({params:["logs",{address:i,topics:W}],onData(ee){if(!M)return;let Q=ee.result;try{let{eventName:ve,args:be}=ga({abi:t,data:Q.data,topics:Q.topics,strict:h}),j=Ar(Q,{args:be,eventName:ve});F.onLogs([j])}catch(ve){let be,j;if(ve instanceof Li||ve instanceof Wi){if(h)return;be=ve.abiItem.name,j=ve.abiItem.inputs?.some(Z=>!("name"in Z&&Z.name))}let qe=Ar(Q,{args:j?[]:{},eventName:be});F.onLogs([qe])}},onError(ee){F.onError?.(ee)}});D=V,M||D()}catch(O){u?.(O)}})(),()=>D()))})()}ir();rt();var kr=class extends P{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}},mo=class extends P{constructor({docsPath:e,metaMessages:t,type:i}){super(`Account type "${i}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}};ai();ir();rt();el();function km({chain:r,currentChainId:e}){if(!r)throw new vm;if(e!==r.id)throw new _m({chain:r,currentChainId:e})}io();Mi();Yc();function H1(r,{docsPath:e,...t}){let i=(()=>{let n=no(r,t);return n instanceof pi?r:n})();return new Mp(i,{docsPath:e,...t})}Xc();Qo();Nc();so();async function _a(r,{serializedTransaction:e}){return r.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}var ob=new Ki(128);async function va(r,e){let{account:t=r.account,chain:i=r.chain,accessList:n,authorizationList:s,blobs:a,data:c,gas:u,gasPrice:p,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:b,value:w,...v}=e;if(typeof t>"u")throw new kr({docsPath:"/docs/actions/wallet/sendTransaction"});let _=t?at(t):null;try{Gr(e);let T=await(async()=>{if(e.to)return e.to;if(e.to!==null&&s&&s.length>0)return await rm({authorization:s[0]}).catch(()=>{throw new P("`to` is required. Could not infer from `authorizationList`.")})})();if(_?.type==="json-rpc"||_===null){let M;i!==null&&(M=await me(r,fi,"getChainId")({}),km({currentChainId:M,chain:i}));let D=r.chain?.formatters?.transactionRequest?.format,O=(D||mi)({...oo(v,{format:D}),accessList:n,authorizationList:s,blobs:a,chainId:M,data:c,from:_?.address,gas:u,gasPrice:p,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:b,to:T,value:w}),W=ob.get(r.uid),V=W?"wallet_sendTransaction":"eth_sendTransaction";try{return await r.request({method:V,params:[O]},{retryCount:0})}catch(ee){if(W===!1)throw ee;let Q=ee;if(Q.name==="InvalidInputRpcError"||Q.name==="InvalidParamsRpcError"||Q.name==="MethodNotFoundRpcError"||Q.name==="MethodNotSupportedRpcError")return await r.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(ve=>(ob.set(r.uid,!0),ve)).catch(ve=>{let be=ve;throw be.name==="MethodNotFoundRpcError"||be.name==="MethodNotSupportedRpcError"?(ob.set(r.uid,!1),Q):be});throw Q}}if(_?.type==="local"){let M=await me(r,co,"prepareTransactionRequest")({account:_,accessList:n,authorizationList:s,blobs:a,chain:i,data:c,gas:u,gasPrice:p,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:b,nonceManager:_.nonceManager,parameters:[...qg,"sidecars"],value:w,...v,to:T}),D=i?.serializers?.transaction,F=await _.signTransaction(M,{serializer:D});return await me(r,_a,"sendRawTransaction")({serializedTransaction:F})}throw _?.type==="smart"?new mo({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new mo({docsPath:"/docs/actions/wallet/sendTransaction",type:_?.type})}catch(T){throw T instanceof mo?T:H1(T,{...e,account:_,chain:e.chain||void 0})}}async function z1(r,e){let{abi:t,account:i=r.account,address:n,args:s,dataSuffix:a,functionName:c,...u}=e;if(typeof i>"u")throw new kr({docsPath:"/docs/contract/writeContract"});let p=i?at(i):null,f=Ft({abi:t,args:s,functionName:c});try{return await me(r,va,"sendTransaction")({data:`${f}${a?a.replace("0x",""):""}`,to:n,account:p,...u})}catch(d){throw ei(d,{abi:t,address:n,args:s,docsPath:"/docs/contract/writeContract",functionName:c,sender:p?.address})}}rt();var Cm=class extends P{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}};async function j1(r,e){let{address:t,factory:i,factoryData:n}=e;try{let[s,a,c,u,p,f,d]=await me(r,br,"readContract")({abi:ME,address:t,functionName:"eip712Domain",factory:i,factoryData:n});return{domain:{name:a,version:c,chainId:Number(u),verifyingContract:p,salt:f},extensions:d,fields:s}}catch(s){let a=s;throw a.name==="ContractFunctionExecutionError"&&a.cause.name==="ContractFunctionZeroDataError"?new Cm({address:t}):a}}var ME=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];Ne();async function V1(r,{chain:e}){let{id:t,name:i,nativeCurrency:n,rpcUrls:s,blockExplorers:a}=e;await r.request({method:"wallet_addEthereumChain",params:[{chainId:de(t),chainName:i,nativeCurrency:n,rpcUrls:s.default.http,blockExplorerUrls:a?Object.values(a).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}ir();var Rm=256,Mm;function Dm(r=11){if(!Mm||Rm+r>256*2){Mm="",Rm=0;for(let e=0;e<256;e++)Mm+=(256+Math.random()*256|0).toString(16).substring(1)}return Mm.substring(Rm,Rm+++r)}function Bm(r){let{batch:e,cacheTime:t=r.pollingInterval??4e3,ccipRead:i,key:n="base",name:s="Base Client",pollingInterval:a=4e3,type:c="base"}=r,u=r.chain,p=r.account?at(r.account):void 0,{config:f,request:d,value:h}=r.transport({chain:u,pollingInterval:a}),b={...f,...h},w={account:p,batch:e,cacheTime:t,ccipRead:i,chain:u,key:n,name:s,pollingInterval:a,request:d,transport:b,type:c,uid:Dm()};function v(_){return T=>{let M=T(_);for(let F in w)delete M[F];let D={..._,...M};return Object.assign(D,{extend:v(D)})}}return Object.assign(w,{extend:v(w)})}rt();zo();zc();Ne();Nc();var Om=new Ki(8192);function G1(r,{enabled:e=!0,id:t}){if(!e||!t)return r();if(Om.get(t))return Om.get(t);let i=r().finally(()=>Om.delete(t));return Om.set(t,i),i}function rl(r,{delay:e=100,retryCount:t=2,shouldRetry:i=()=>!0}={}){return new Promise((n,s)=>{let a=async({count:c=0}={})=>{let u=async({error:p})=>{let f=typeof e=="function"?e({count:c,error:p}):e;f&&await tl(f),a({count:c+1})};try{let p=await r();n(p)}catch(p){if(c<t&&await i({count:c,error:p}))return u({error:p});s(p)}};a()})}Br();function W1(r,e={}){return async(t,i={})=>{let{dedupe:n=!1,methods:s,retryDelay:a=150,retryCount:c=3,uid:u}={...e,...i},{method:p}=t;if(s?.exclude?.includes(p))throw new Yn(new Error("method not supported"),{method:p});if(s?.include&&!s.include.includes(p))throw new Yn(new Error("method not supported"),{method:p});let f=n?Ti(`${u}.${dt(t)}`):void 0;return G1(()=>rl(async()=>{try{return await r(t)}catch(d){let h=d;switch(h.code){case Ns.code:throw new Ns(h);case Fs.code:throw new Fs(h);case Us.code:throw new Us(h,{method:t.method});case Hs.code:throw new Hs(h);case wn.code:throw new wn(h);case Zi.code:throw new Zi(h);case zs.code:throw new zs(h);case js.code:throw new js(h);case Vs.code:throw new Vs(h);case Yn.code:throw new Yn(h,{method:t.method});case jo.code:throw new jo(h);case Gs.code:throw new Gs(h);case Vo.code:throw new Vo(h);case Ws.code:throw new Ws(h);case $s.code:throw new $s(h);case Ks.code:throw new Ks(h);case qs.code:throw new qs(h);case Ys.code:throw new Ys(h);case 5e3:throw new Vo(h);default:throw d instanceof P?d:new Fp(h)}}},{delay:({count:d,error:h})=>{if(h&&h instanceof ci){let b=h?.headers?.get("Retry-After");if(b?.match(/\d/))return Number.parseInt(b)*1e3}return~~(1<<d)*a},retryCount:c,shouldRetry:({error:d})=>DE(d)}),{enabled:n,id:f})}}function DE(r){return"code"in r&&typeof r.code=="number"?r.code===-1||r.code===jo.code||r.code===wn.code:r instanceof ci&&r.status?r.status===403||r.status===408||r.status===413||r.status===429||r.status===500||r.status===502||r.status===503||r.status===504:!0}function Pm({key:r,methods:e,name:t,request:i,retryCount:n=3,retryDelay:s=150,timeout:a,type:c},u){let p=Dm();return{config:{key:r,methods:e,name:t,request:i,retryCount:n,retryDelay:s,timeout:a,type:c},request:W1(i,{methods:e,retryCount:n,retryDelay:s,uid:p}),value:u}}function wa(r,e={}){let{key:t="custom",methods:i,name:n="Custom Provider",retryDelay:s}=e;return({retryCount:a})=>Pm({key:t,methods:i,name:n,request:r.request.bind(r),retryCount:e.retryCount??a,retryDelay:s,type:"custom"})}zo();rt();var Nm=class extends P{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};ib();zo();function $1(r,{errorInstance:e=new Error("timed out"),timeout:t,signal:i}){return new Promise((n,s)=>{(async()=>{let a;try{let c=new AbortController;t>0&&(a=setTimeout(()=>{i?c.abort():s(e)},t)),n(await r({signal:c?.signal||null}))}catch(c){c?.name==="AbortError"&&s(e),s(c)}finally{clearTimeout(a)}})()})}Br();function BE(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var sb=BE();function K1(r,e={}){return{async request(t){let{body:i,onRequest:n=e.onRequest,onResponse:s=e.onResponse,timeout:a=e.timeout??1e4}=t,c={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:u,method:p,signal:f}=c;try{let d=await $1(async({signal:b})=>{let w={...c,body:Array.isArray(i)?dt(i.map(M=>({jsonrpc:"2.0",id:M.id??sb.take(),...M}))):dt({jsonrpc:"2.0",id:i.id??sb.take(),...i}),headers:{"Content-Type":"application/json",...u},method:p||"POST",signal:f||(a>0?b:null)},v=new Request(r,w),_=await n?.(v,w)??{...w,url:r};return await fetch(_.url??r,_)},{errorInstance:new Hc({body:i,url:r}),timeout:a,signal:!0});s&&await s(d);let h;if(d.headers.get("Content-Type")?.startsWith("application/json"))h=await d.json();else{h=await d.text();try{h=JSON.parse(h||"{}")}catch(b){if(d.ok)throw b;h={error:h}}}if(!d.ok)throw new ci({body:i,details:dt(h.error)||d.statusText,headers:d.headers,status:d.status,url:r});return h}catch(d){throw d instanceof ci||d instanceof Hc?d:new ci({body:i,cause:d,url:r})}}}}function il(r,e={}){let{batch:t,fetchOptions:i,key:n="http",methods:s,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:p,raw:f}=e;return({chain:d,retryCount:h,timeout:b})=>{let{batchSize:w=1e3,wait:v=0}=typeof t=="object"?t:{},_=e.retryCount??h,T=b??e.timeout??1e4,M=r||d?.rpcUrls.default.http[0];if(!M)throw new Nm;let D=K1(M,{fetchOptions:i,onRequest:c,onResponse:u,timeout:T});return Pm({key:n,methods:s,name:a,async request({method:F,params:O}){let W={method:F,params:O},{schedule:V}=Sm({id:M,wait:v,shouldSplitBatch(be){return be.length>w},fn:be=>D.request({body:be}),sort:(be,j)=>be.id-j.id}),ee=async be=>t?V(be):[await D.request({body:be})],[{error:Q,result:ve}]=await ee(W);if(f)return{error:Q,result:ve};if(Q)throw new Kn({body:W,error:Q,url:M});return ve},retryCount:_,retryDelay:p,timeout:T,type:"http"},{fetchOptions:i,url:M})}}Jo();lo();ai();is();Ls();Ne();xp();rt();$n();function Ea(r,e){if(!(r instanceof P))return!1;let t=r.walk(i=>i instanceof Ho);return t instanceof Ho?!!(t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ResolverWildcardNotSupported"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverError"||t.data?.errorName==="HttpError"||t.reason?.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&t.reason===yp[50]):!1}si();pr();Ne();Ci();Ii();function Fm(r){if(r.length!==66||r.indexOf("[")!==0||r.indexOf("]")!==65)return null;let e=`0x${r.slice(1,65)}`;return qt(e)?e:null}function Ia(r){let e=new Uint8Array(32).fill(0);if(!r)return ft(e);let t=r.split(".");for(let i=t.length-1;i>=0;i-=1){let n=Fm(t[i]),s=n?oi(n):Rt(Ai(t[i]),"bytes");e=Rt(Dr([e,s]),"bytes")}return ft(e)}pr();function q1(r){return`[${r.slice(2)}]`}pr();Ne();Ci();function Y1(r){let e=new Uint8Array(32).fill(0);return r?Fm(r)||Rt(Ai(r)):ft(e)}function fo(r){let e=r.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);let t=new Uint8Array(Ai(e).byteLength+2),i=0,n=e.split(".");for(let s=0;s<n.length;s++){let a=Ai(n[s]);a.byteLength>255&&(a=Ai(q1(Y1(n[s])))),t[i]=a.length,t.set(a,i+1),i+=a.length+1}return t.byteLength!==i+1?t.slice(0,i+1):t}async function X1(r,e){let{blockNumber:t,blockTag:i,coinType:n,name:s,gatewayUrls:a,strict:c}=e,{chain:u}=r,p=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!u)throw new Error("client chain not configured. universalResolverAddress is required.");return di({blockNumber:t,chain:u,contract:"ensUniversalResolver"})})(),f=u?.ensTlds;if(f&&!f.some(d=>s.endsWith(d)))return null;try{let d=Ft({abi:Qg,functionName:"addr",...n!=null?{args:[Ia(s),BigInt(n)]}:{args:[Ia(s)]}}),h={address:p,abi:bm,functionName:"resolve",args:[we(fo(s)),d],blockNumber:t,blockTag:i},b=me(r,br,"readContract"),w=a?await b({...h,args:[...h.args,a]}):await b(h);if(w[0]==="0x")return null;let v=Wr({abi:Qg,args:n!=null?[Ia(s),BigInt(n)]:void 0,functionName:"addr",data:w[0]});return v==="0x"||wr(v)==="0x00"?null:v}catch(d){if(c)throw d;if(Ea(d,"resolve"))return null;throw d}}rt();var Um=class extends P{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}},ho=class extends P{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}},Sa=class extends P{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},Hm=class extends P{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}};var OE=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,PE=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,NE=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,FE=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function UE(r){try{let e=await fetch(r,{method:"HEAD"});return e.status===200?e.headers.get("content-type")?.startsWith("image/"):!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(t=>{let i=new Image;i.onload=()=>{t(!0)},i.onerror=()=>{t(!1)},i.src=r})}}function Q1(r,e){return r?r.endsWith("/")?r.slice(0,-1):r:e}function ab({uri:r,gatewayUrls:e}){let t=NE.test(r);if(t)return{uri:r,isOnChain:!0,isEncoded:t};let i=Q1(e?.ipfs,"https://ipfs.io"),n=Q1(e?.arweave,"https://arweave.net"),s=r.match(OE),{protocol:a,subpath:c,target:u,subtarget:p=""}=s?.groups||{},f=a==="ipns:/"||c==="ipns/",d=a==="ipfs:/"||c==="ipfs/"||PE.test(r);if(r.startsWith("http")&&!f&&!d){let b=r;return e?.arweave&&(b=r.replace(/https:\/\/arweave.net/g,e?.arweave)),{uri:b,isOnChain:!1,isEncoded:!1}}if((f||d)&&u)return{uri:`${i}/${f?"ipns":"ipfs"}/${u}${p}`,isOnChain:!1,isEncoded:!1};if(a==="ar:/"&&u)return{uri:`${n}/${u}${p||""}`,isOnChain:!1,isEncoded:!1};let h=r.replace(FE,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new Sa({uri:r})}function cb(r){if(typeof r!="object"||!("image"in r)&&!("image_url"in r)&&!("image_data"in r))throw new Um({data:r});return r.image||r.image_url||r.image_data}async function Z1({gatewayUrls:r,uri:e}){try{let t=await fetch(e).then(n=>n.json());return await zm({gatewayUrls:r,uri:cb(t)})}catch{throw new Sa({uri:e})}}async function zm({gatewayUrls:r,uri:e}){let{uri:t,isOnChain:i}=ab({uri:e,gatewayUrls:r});if(i||await UE(t))return t;throw new Sa({uri:e})}function J1(r){let e=r;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));let[t,i,n]=e.split("/"),[s,a]=t.split(":"),[c,u]=i.split(":");if(!s||s.toLowerCase()!=="eip155")throw new ho({reason:"Only EIP-155 supported"});if(!a)throw new ho({reason:"Chain ID not found"});if(!u)throw new ho({reason:"Contract address not found"});if(!n)throw new ho({reason:"Token ID not found"});if(!c)throw new ho({reason:"ERC namespace not found"});return{chainID:Number.parseInt(a),namespace:c.toLowerCase(),contractAddress:u,tokenID:n}}async function ex(r,{nft:e}){if(e.namespace==="erc721")return br(r,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return br(r,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Hm({namespace:e.namespace})}async function tx(r,{gatewayUrls:e,record:t}){return/eip155:/i.test(t)?HE(r,{gatewayUrls:e,record:t}):zm({uri:t,gatewayUrls:e})}async function HE(r,{gatewayUrls:e,record:t}){let i=J1(t),n=await ex(r,{nft:i}),{uri:s,isOnChain:a,isEncoded:c}=ab({uri:n,gatewayUrls:e});if(a&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){let p=c?atob(s.replace("data:application/json;base64,","")):s,f=JSON.parse(p);return zm({uri:cb(f),gatewayUrls:e})}let u=i.tokenID;return i.namespace==="erc1155"&&(u=u.replace("0x","").padStart(64,"0")),Z1({gatewayUrls:e,uri:s.replace(/(?:0x)?{id}/,u)})}Jo();lo();ai();is();Ne();async function jm(r,e){let{blockNumber:t,blockTag:i,key:n,name:s,gatewayUrls:a,strict:c}=e,{chain:u}=r,p=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!u)throw new Error("client chain not configured. universalResolverAddress is required.");return di({blockNumber:t,chain:u,contract:"ensUniversalResolver"})})(),f=u?.ensTlds;if(f&&!f.some(d=>s.endsWith(d)))return null;try{let d={address:p,abi:bm,functionName:"resolve",args:[we(fo(s)),Ft({abi:Xg,functionName:"text",args:[Ia(s),n]})],blockNumber:t,blockTag:i},h=me(r,br,"readContract"),b=a?await h({...d,args:[...d.args,a]}):await h(d);if(b[0]==="0x")return null;let w=Wr({abi:Xg,functionName:"text",data:b[0]});return w===""?null:w}catch(d){if(c)throw d;if(Ea(d,"resolve"))return null;throw d}}async function rx(r,{blockNumber:e,blockTag:t,assetGatewayUrls:i,name:n,gatewayUrls:s,strict:a,universalResolverAddress:c}){let u=await me(r,jm,"getEnsText")({blockNumber:e,blockTag:t,key:"avatar",name:n,universalResolverAddress:c,gatewayUrls:s,strict:a});if(!u)return null;try{return await tx(r,{record:u,gatewayUrls:i})}catch{return null}}Jo();is();Ne();async function ix(r,{address:e,blockNumber:t,blockTag:i,gatewayUrls:n,strict:s,universalResolverAddress:a}){let c=a;if(!c){if(!r.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=di({blockNumber:t,chain:r.chain,contract:"ensUniversalResolver"})}let u=`${e.toLowerCase().substring(2)}.addr.reverse`;try{let p={address:c,abi:S1,functionName:"reverse",args:[we(fo(u))],blockNumber:t,blockTag:i},f=me(r,br,"readContract"),[d,h]=n?await f({...p,args:[...p.args,n]}):await f(p);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(p){if(s)throw p;if(Ea(p,"reverse"))return null;throw p}}is();Ne();async function nx(r,e){let{blockNumber:t,blockTag:i,name:n}=e,{chain:s}=r,a=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!s)throw new Error("client chain not configured. universalResolverAddress is required.");return di({blockNumber:t,chain:s,contract:"ensUniversalResolver"})})(),c=s?.ensTlds;if(c&&!c.some(p=>n.endsWith(p)))throw new Error(`${n} is not a valid ENS TLD (${c?.join(", ")}) for chain "${s.name}" (id: ${s.id}).`);let[u]=await me(r,br,"readContract")({address:a,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[we(fo(n))],blockNumber:t,blockTag:i});return u}xa();ir();Ne();eb();Xc();Qo();so();async function Vm(r,e){let{account:t=r.account,blockNumber:i,blockTag:n="latest",blobs:s,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:p,maxFeePerGas:f,maxPriorityFeePerGas:d,to:h,value:b,...w}=e,v=t?at(t):void 0;try{Gr(e);let T=(i?de(i):void 0)||n,M=r.chain?.formatters?.transactionRequest?.format,F=(M||mi)({...oo(w,{format:M}),from:v?.address,blobs:s,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:p,maxFeePerGas:f,maxPriorityFeePerGas:d,to:h,value:b}),O=await r.request({method:"eth_createAccessList",params:[F,T]});return{accessList:O.accessList,gasUsed:BigInt(O.gasUsed)}}catch(_){throw Em(_,{...e,account:v,chain:r.chain})}}async function ox(r){let e=Wn(r,{method:"eth_newBlockFilter"}),t=await r.request({method:"eth_newBlockFilter"});return{id:t,request:e(t),type:"block"}}Ne();async function Gm(r,{address:e,args:t,event:i,events:n,fromBlock:s,strict:a,toBlock:c}={}){let u=n??(i?[i]:void 0),p=Wn(r,{method:"eth_newFilter"}),f=[];u&&(f=[u.flatMap(b=>Yi({abi:[b],eventName:b.name,args:t}))],i&&(f=f[0]));let d=await r.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof s=="bigint"?de(s):s,toBlock:typeof c=="bigint"?de(c):c,...f.length?{topics:f}:{}}]});return{abi:u,args:t,eventName:i?i.name:void 0,fromBlock:s,id:d,request:p(d),strict:!!a,toBlock:c,type:"event"}}async function Wm(r){let e=Wn(r,{method:"eth_newPendingTransactionFilter"}),t=await r.request({method:"eth_newPendingTransactionFilter"});return{id:t,request:e(t),type:"transaction"}}async function sx(r){let e=await r.request({method:"eth_blobBaseFee"});return BigInt(e)}Er();Ne();async function ax(r,{blockHash:e,blockNumber:t,blockTag:i="latest"}={}){let n=t!==void 0?de(t):void 0,s;return e?s=await r.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):s=await r.request({method:"eth_getBlockTransactionCountByNumber",params:[n||i]},{dedupe:!!n}),Zt(s)}Ne();async function lb(r,{address:e,blockNumber:t,blockTag:i="latest"}){let n=t!==void 0?de(t):void 0,s=await r.request({method:"eth_getCode",params:[e,n||i]},{dedupe:!!n});if(s!=="0x")return s}Ne();function cx(r){return{baseFeePerGas:r.baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:r.gasUsedRatio,oldestBlock:BigInt(r.oldestBlock),reward:r.reward?.map(e=>e.map(t=>BigInt(t)))}}async function lx(r,{blockCount:e,blockNumber:t,blockTag:i="latest",rewardPercentiles:n}){let s=t?de(t):void 0,a=await r.request({method:"eth_feeHistory",params:[de(e),s||i,n]},{dedupe:!!s});return cx(a)}async function ux(r,{filter:e}){let t=e.strict??!1,n=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(s=>Ar(s));return e.abi?ba({abi:e.abi,logs:n,strict:t}):n}Ne();function jt(r){return{formatters:void 0,fees:void 0,serializers:void 0,...r}}tr();$i();Br();rt();var $m=class extends P{constructor({domain:e}){super(`Invalid domain "${dt(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},Km=class extends P{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},qm=class extends P{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}};Ri();Si();Ne();pg();Gn();si();Ne();Ci();function px(r){let{domain:e={},message:t,primaryType:i}=r,n={EIP712Domain:Xm({domain:e}),...r.types};Ym({domain:e,message:t,primaryType:i,types:n});let s=["0x1901"];return e&&s.push(zE({domain:e,types:n})),i!=="EIP712Domain"&&s.push(mx({data:t,primaryType:i,types:n})),Rt(Dr(s))}function zE({domain:r,types:e}){return mx({data:r,primaryType:"EIP712Domain",types:e})}function mx({data:r,primaryType:e,types:t}){let i=fx({data:r,primaryType:e,types:t});return Rt(i)}function fx({data:r,primaryType:e,types:t}){let i=[{type:"bytes32"}],n=[jE({primaryType:e,types:t})];for(let s of t[e]){let[a,c]=hx({types:t,name:s.name,type:s.type,value:r[s.name]});i.push(a),n.push(c)}return Jr(i,n)}function jE({primaryType:r,types:e}){let t=we(VE({primaryType:r,types:e}));return Rt(t)}function VE({primaryType:r,types:e}){let t="",i=dx({primaryType:r,types:e});i.delete(r);let n=[r,...Array.from(i).sort()];for(let s of n)t+=`${s}(${e[s].map(({name:a,type:c})=>`${c} ${a}`).join(",")})`;return t}function dx({primaryType:r,types:e},t=new Set){let n=r.match(/^\w*/u)?.[0];if(t.has(n)||e[n]===void 0)return t;t.add(n);for(let s of e[n])dx({primaryType:s.type,types:e},t);return t}function hx({types:r,name:e,type:t,value:i}){if(r[t]!==void 0)return[{type:"bytes32"},Rt(fx({data:i,primaryType:t,types:r}))];if(t==="bytes")return i=`0x${(i.length%2?"0":"")+i.slice(2)}`,[{type:"bytes32"},Rt(i)];if(t==="string")return[{type:"bytes32"},Rt(we(i))];if(t.lastIndexOf("]")===t.length-1){let n=t.slice(0,t.lastIndexOf("[")),s=i.map(a=>hx({name:e,type:n,types:r,value:a}));return[{type:"bytes32"},Rt(Jr(s.map(([a])=>a),s.map(([,a])=>a)))]}return[{type:t},i]}Br();function gx(r){let{domain:e,message:t,primaryType:i,types:n}=r,s=(u,p)=>{let f={...p};for(let d of u){let{name:h,type:b}=d;b==="address"&&(f[h]=f[h].toLowerCase())}return f},a=(()=>n.EIP712Domain?e?s(n.EIP712Domain,e):{}:{})(),c=(()=>{if(i!=="EIP712Domain")return s(n[i],t)})();return dt({domain:a,message:c,primaryType:i,types:n})}function Ym(r){let{domain:e,message:t,primaryType:i,types:n}=r,s=(a,c)=>{for(let u of a){let{name:p,type:f}=u,d=c[p],h=f.match(dp);if(h&&(typeof d=="number"||typeof d=="bigint")){let[v,_,T]=h;de(d,{signed:_==="int",size:Number.parseInt(T)/8})}if(f==="address"&&typeof d=="string"&&!At(d))throw new Bt({address:d});let b=f.match(o0);if(b){let[v,_]=b;if(_&&bt(d)!==Number.parseInt(_))throw new qu({expectedSize:Number.parseInt(_),givenSize:bt(d)})}let w=n[f];w&&(GE(f),s(w,d))}};if(n.EIP712Domain&&e){if(typeof e!="object")throw new $m({domain:e});s(n.EIP712Domain,e)}if(i!=="EIP712Domain")if(n[i])s(n[i],t);else throw new Km({primaryType:i,types:n})}function Xm({domain:r}){return[typeof r?.name=="string"&&{name:"name",type:"string"},r?.version&&{name:"version",type:"string"},(typeof r?.chainId=="number"||typeof r?.chainId=="bigint")&&{name:"chainId",type:"uint256"},r?.verifyingContract&&{name:"verifyingContract",type:"address"},r?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function GE(r){if(r==="address"||r==="bool"||r==="string"||r.startsWith("bytes")||r.startsWith("uint")||r.startsWith("int"))throw new qm({type:r})}ai();Ne();Mi();si();Ls();Ne();Wg();$i();rt();el();io();Ri();Si();Oo();Er();function bx(r){let{authorizationList:e}=r;if(e)for(let t of e){let{chainId:i}=t,n=t.address;if(!At(n))throw new Bt({address:n});if(i<0)throw new ts({chainId:i})}Qm(r)}function yx(r){let{blobVersionedHashes:e}=r;if(e){if(e.length===0)throw new fa;for(let t of e){let i=bt(t),n=Zt(vn(t,0,1));if(i!==32)throw new pm({hash:t,size:i});if(n!==1)throw new mm({hash:t,version:n})}}Qm(r)}function Qm(r){let{chainId:e,maxPriorityFeePerGas:t,maxFeePerGas:i,to:n}=r;if(e<=0)throw new ts({chainId:e});if(n&&!At(n))throw new Bt({address:n});if(i&&i>aa)throw new ui({maxFeePerGas:i});if(t&&i&&t>i)throw new tn({maxFeePerGas:i,maxPriorityFeePerGas:t})}function xx(r){let{chainId:e,maxPriorityFeePerGas:t,gasPrice:i,maxFeePerGas:n,to:s}=r;if(e<=0)throw new ts({chainId:e});if(s&&!At(s))throw new Bt({address:s});if(t||n)throw new P("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(i&&i>aa)throw new ui({maxFeePerGas:i})}function _x(r){let{chainId:e,maxPriorityFeePerGas:t,gasPrice:i,maxFeePerGas:n,to:s}=r;if(s&&!At(s))throw new Bt({address:s});if(typeof e<"u"&&e<=0)throw new ts({chainId:e});if(t||n)throw new P("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(i&&i>aa)throw new ui({maxFeePerGas:i})}$i();Mi();Ri();function nl(r){if(!r||r.length===0)return[];let e=[];for(let t=0;t<r.length;t++){let{address:i,storageKeys:n}=r[t];for(let s=0;s<n.length;s++)if(n[s].length-2!==64)throw new Rp({storageKey:n[s]});if(!At(i,{strict:!1}))throw new Bt({address:i});e.push([i,n])}return e}function vx(r,e){let t=dm(r);return t==="eip1559"?KE(r,e):t==="eip2930"?qE(r,e):t==="eip4844"?$E(r,e):t==="eip7702"?WE(r,e):YE(r,e)}function WE(r,e){let{authorizationList:t,chainId:i,gas:n,nonce:s,to:a,value:c,maxFeePerGas:u,maxPriorityFeePerGas:p,accessList:f,data:d}=r;bx(r);let h=nl(f),b=wx(t);return Ir(["0x04",Oi([we(i),s?we(s):"0x",p?we(p):"0x",u?we(u):"0x",n?we(n):"0x",a??"0x",c?we(c):"0x",d??"0x",h,b,...La(r,e)])])}function $E(r,e){let{chainId:t,gas:i,nonce:n,to:s,value:a,maxFeePerBlobGas:c,maxFeePerGas:u,maxPriorityFeePerGas:p,accessList:f,data:d}=r;yx(r);let h=r.blobVersionedHashes,b=r.sidecars;if(r.blobs&&(typeof h>"u"||typeof b>"u")){let D=typeof r.blobs[0]=="string"?r.blobs:r.blobs.map(W=>ft(W)),F=r.kzg,O=pa({blobs:D,kzg:F});if(typeof h>"u"&&(h=lm({commitments:O})),typeof b>"u"){let W=ma({blobs:D,commitments:O,kzg:F});b=fm({blobs:D,commitments:O,proofs:W})}}let w=nl(f),v=[we(t),n?we(n):"0x",p?we(p):"0x",u?we(u):"0x",i?we(i):"0x",s??"0x",a?we(a):"0x",d??"0x",w,c?we(c):"0x",h??[],...La(r,e)],_=[],T=[],M=[];if(b)for(let D=0;D<b.length;D++){let{blob:F,commitment:O,proof:W}=b[D];_.push(F),T.push(O),M.push(W)}return Ir(["0x03",b?Oi([v,_,T,M]):Oi(v)])}function KE(r,e){let{chainId:t,gas:i,nonce:n,to:s,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:p,data:f}=r;Qm(r);let d=nl(p),h=[we(t),n?we(n):"0x",u?we(u):"0x",c?we(c):"0x",i?we(i):"0x",s??"0x",a?we(a):"0x",f??"0x",d,...La(r,e)];return Ir(["0x02",Oi(h)])}function qE(r,e){let{chainId:t,gas:i,data:n,nonce:s,to:a,value:c,accessList:u,gasPrice:p}=r;xx(r);let f=nl(u),d=[we(t),s?we(s):"0x",p?we(p):"0x",i?we(i):"0x",a??"0x",c?we(c):"0x",n??"0x",f,...La(r,e)];return Ir(["0x01",Oi(d)])}function YE(r,e){let{chainId:t=0,gas:i,data:n,nonce:s,to:a,value:c,gasPrice:u}=r;_x(r);let p=[s?we(s):"0x",u?we(u):"0x",i?we(i):"0x",a??"0x",c?we(c):"0x",n??"0x"];if(e){let f=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(t>0)return BigInt(t*2)+BigInt(35n+e.v-27n);let b=27n+(e.v===27n?0n:1n);if(e.v!==b)throw new kp({v:e.v});return b})(),d=wr(e.r),h=wr(e.s);p=[...p,we(f),d==="0x00"?"0x":d,h==="0x00"?"0x":h]}else t>0&&(p=[...p,we(t),"0x","0x"]);return Oi(p)}function La(r,e){let t=e??r,{v:i,yParity:n}=t;if(typeof t.r>"u")return[];if(typeof t.s>"u")return[];if(typeof i>"u"&&typeof n>"u")return[];let s=wr(t.r),a=wr(t.s);return[(()=>typeof n=="number"?n?we(1):"0x":i===0n?"0x":i===1n?we(1):i===27n?"0x":we(1))(),s==="0x00"?"0x":s,a==="0x00"?"0x":a]}function wx(r){if(!r||r.length===0)return[];let e=[];for(let t of r){let{chainId:i,nonce:n,...s}=t,a=t.address;e.push([i?we(i):"0x",a,n?we(n):"0x",...La({},s)])}return e}Er();nm();var XE={"0x0":"reverted","0x1":"success"};function ub(r){let e={...r,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,contractAddress:r.contractAddress?r.contractAddress:null,cumulativeGasUsed:r.cumulativeGasUsed?BigInt(r.cumulativeGasUsed):null,effectiveGasPrice:r.effectiveGasPrice?BigInt(r.effectiveGasPrice):null,gasUsed:r.gasUsed?BigInt(r.gasUsed):null,logs:r.logs?r.logs.map(t=>Ar(t)):null,to:r.to?r.to:null,transactionIndex:r.transactionIndex?Zt(r.transactionIndex):null,status:r.status?XE[r.status]:null,type:r.type?$g[r.type]||r.type:null};return r.blobGasPrice&&(e.blobGasPrice=BigInt(r.blobGasPrice)),r.blobGasUsed&&(e.blobGasUsed=BigInt(r.blobGasUsed)),e}var Ex=oa("transactionReceipt",ub);Er();Ci();var Ix=`Ethereum Signed Message:
`;si();Si();Ne();function Sx(r){let e=(()=>typeof r=="string"?Ti(r):typeof r.raw=="string"?r.raw:ft(r.raw))(),t=Ti(`${Ix}${bt(e)}`);return Dr([t,e])}function Zm(r,e){return Rt(Sx(r),e)}var Jm="0x6492649264926492649264926492649264926492649264926492649264926492";Oo();function Lx(r){return ug(r,-32)===Jm}Gn();si();pr();function Tx(r){let{address:e,data:t,signature:i,to:n="hex"}=r,s=Ir([Jr([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,t,i]),Jm]);return n==="hex"?s:rr(s)}rt();var ef=class extends P{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}};function pb(r,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(r))throw new ef({value:r});let[t,i="0"]=r.split("."),n=t.startsWith("-");if(n&&(t=t.slice(1)),i=i.replace(/(0+)$/,""),e===0)Math.round(+`.${i}`)===1&&(t=`${BigInt(t)+1n}`),i="";else if(i.length>e){let[s,a,c]=[i.slice(0,e-1),i.slice(e-1,e),i.slice(e)],u=Math.round(+`${a}.${c}`);u>9?i=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):i=`${s}${u}`,i.length>e&&(i=i.slice(1),t=`${BigInt(t)+1n}`),i=i.slice(0,e)}else i=i.padEnd(e,"0");return BigInt(`${n?"-":""}${t}${i}`)}function QE(r){return r.map(e=>({...e,value:BigInt(e.value)}))}function Ax(r){return{...r,balance:r.balance?BigInt(r.balance):void 0,nonce:r.nonce?Zt(r.nonce):void 0,storageProof:r.storageProof?QE(r.storageProof):void 0}}async function kx(r,{address:e,blockNumber:t,blockTag:i,storageKeys:n}){let s=i??"latest",a=t!==void 0?de(t):void 0,c=await r.request({method:"eth_getProof",params:[e,n,a||s]});return Ax(c)}Ne();async function Cx(r,{address:e,blockNumber:t,blockTag:i="latest",slot:n}){let s=t!==void 0?de(t):void 0;return await r.request({method:"eth_getStorageAt",params:[e,n,s||i]})}Mi();Ne();async function Ta(r,{blockHash:e,blockNumber:t,blockTag:i,hash:n,index:s}){let a=i||"latest",c=t!==void 0?de(t):void 0,u=null;if(n?u=await r.request({method:"eth_getTransactionByHash",params:[n]},{dedupe:!0}):e?u=await r.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,de(s)]},{dedupe:!0}):(c||a)&&(u=await r.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[c||a,de(s)]},{dedupe:!!c})),!u)throw new Bs({blockHash:e,blockNumber:t,blockTag:a,hash:n,index:s});return(r.chain?.formatters?.transaction?.format||Zo)(u)}async function Rx(r,{hash:e,transactionReceipt:t}){let[i,n]=await Promise.all([me(r,sn,"getBlockNumber")({}),e?me(r,Ta,"getTransaction")({hash:e}):void 0]),s=t?.blockNumber||n?.blockNumber;return s?i-s+1n:0n}Mi();async function ol(r,{hash:e}){let t=await r.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!t)throw new Os({hash:e});return(r.chain?.formatters?.transactionReceipt?.format||ub)(t)}Jo();tr();rt();$n();lo();ai();is();async function Mx(r,e){let{allowFailure:t=!0,batchSize:i,blockNumber:n,blockTag:s,multicallAddress:a,stateOverride:c}=e,u=e.contracts,p=i??(typeof r.batch?.multicall=="object"&&r.batch.multicall.batchSize||1024),f=a;if(!f){if(!r.chain)throw new Error("client chain not configured. multicallAddress is required.");f=di({blockNumber:n,chain:r.chain,contract:"multicall3"})}let d=[[]],h=0,b=0;for(let _=0;_<u.length;_++){let{abi:T,address:M,args:D,functionName:F}=u[_];try{let O=Ft({abi:T,args:D,functionName:F});b+=(O.length-2)/2,p>0&&b>p&&d[h].length>0&&(h++,b=(O.length-2)/2,d[h]=[]),d[h]=[...d[h],{allowFailure:!0,callData:O,target:M}]}catch(O){let W=ei(O,{abi:T,address:M,args:D,docsPath:"/docs/contract/multicall",functionName:F});if(!t)throw W;d[h]=[...d[h],{allowFailure:!0,callData:"0x",target:M}]}}let w=await Promise.allSettled(d.map(_=>me(r,br,"readContract")({abi:Zc,address:f,args:[_],blockNumber:n,blockTag:s,functionName:"aggregate3",stateOverride:c}))),v=[];for(let _=0;_<w.length;_++){let T=w[_];if(T.status==="rejected"){if(!t)throw T.reason;for(let D=0;D<d[_].length;D++)v.push({status:"failure",error:T.reason,result:void 0});continue}let M=T.value;for(let D=0;D<M.length;D++){let{returnData:F,success:O}=M[D],{callData:W}=d[_][D],{abi:V,address:ee,functionName:Q,args:ve}=u[v.length];try{if(W==="0x")throw new ni;if(!O)throw new Qi({data:F});let be=Wr({abi:V,args:ve,data:F,functionName:Q});v.push(t?{result:be,status:"success"}:be)}catch(be){let j=ei(be,{abi:V,address:ee,args:ve,docsPath:"/docs/contract/multicall",functionName:Q});if(!t)throw j;v.push({error:j,result:void 0,status:"failure"})}}}if(v.length!==u.length)throw new P("multicall results mismatch");return v}var Dx="0.1.1";function Bx(){return Dx}var vt=class r extends Error{constructor(e,t={}){let i=(()=>{if(t.cause instanceof r){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause?.message?t.cause.message:t.details})(),n=(()=>t.cause instanceof r&&t.cause.docsPath||t.docsPath)(),a=`https://oxlib.sh${n??""}`,c=[e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...i||n?["",i?`Details: ${i}`:void 0,n?`See: ${a}`:void 0]:[]].filter(u=>typeof u=="string").join(`
`);super(c,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Bx()}`}),this.cause=t.cause,this.details=i,this.docs=a,this.docsPath=n,this.shortMessage=e}walk(e){return Ox(this,e)}};function Ox(r,e){return e?.(r)?r:r&&typeof r=="object"&&"cause"in r&&r.cause?Ox(r.cause,e):e?null:r}var ZE="#__bigint";function Px(r,e,t){return JSON.stringify(r,(i,n)=>typeof e=="function"?e(i,n):typeof n=="bigint"?n.toString()+ZE:n,t)}function Nx(r,e){if(mb(r)>e)throw new tf({givenSize:mb(r),maxSize:e})}var Tn={zero:48,nine:57,A:65,F:70,a:97,f:102};function fb(r){if(r>=Tn.zero&&r<=Tn.nine)return r-Tn.zero;if(r>=Tn.A&&r<=Tn.F)return r-(Tn.A-10);if(r>=Tn.a&&r<=Tn.f)return r-(Tn.a-10)}function Fx(r,e={}){let{dir:t,size:i=32}=e;if(i===0)return r;if(r.length>i)throw new rf({size:r.length,targetSize:i,type:"Bytes"});let n=new Uint8Array(i);for(let s=0;s<i;s++){let a=t==="right";n[a?s:i-s-1]=r[a?s:r.length-s-1]}return n}function sl(r,e){if(mr(r)>e)throw new nf({givenSize:mr(r),maxSize:e})}function Ux(r,e){if(typeof e=="number"&&e>0&&e>mr(r)-1)throw new al({offset:e,position:"start",size:mr(r)})}function Hx(r,e,t){if(typeof e=="number"&&typeof t=="number"&&mr(r)!==t-e)throw new al({offset:t,position:"end",size:mr(r)})}function hb(r,e={}){let{dir:t,size:i=32}=e;if(i===0)return r;let n=r.replace("0x","");if(n.length>i*2)throw new of({size:Math.ceil(n.length/2),targetSize:i,type:"Hex"});return`0x${n[t==="right"?"padEnd":"padStart"](i*2,"0")}`}var tI=new TextEncoder;function jx(r){return r instanceof Uint8Array?r:typeof r=="string"?iI(r):rI(r)}function rI(r){return r instanceof Uint8Array?r:new Uint8Array(r)}function iI(r,e={}){let{size:t}=e,i=r;t&&(sl(r,t),i=cn(r,t));let n=i.slice(2);n.length%2&&(n=`0${n}`);let s=n.length/2,a=new Uint8Array(s);for(let c=0,u=0;c<s;c++){let p=fb(n.charCodeAt(u++)),f=fb(n.charCodeAt(u++));if(p===void 0||f===void 0)throw new vt(`Invalid byte sequence ("${n[u-2]}${n[u-1]}" in "${n}").`);a[c]=p*16+f}return a}function Vx(r,e={}){let{size:t}=e,i=tI.encode(r);return typeof t=="number"?(Nx(i,t),nI(i,t)):i}function nI(r,e){return Fx(r,{dir:"right",size:e})}function mb(r){return r.length}var tf=class extends vt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}};var rf=class extends vt{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};var oI=new TextEncoder,sI=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function aI(r,e={}){let{strict:t=!1}=e;if(!r)throw new sf(r);if(typeof r!="string")throw new sf(r);if(t&&!/^0x[0-9a-fA-F]*$/.test(r))throw new af(r);if(!r.startsWith("0x"))throw new af(r)}function Kr(...r){return`0x${r.reduce((e,t)=>e+t.replace("0x",""),"")}`}function cf(r,e={}){let t=`0x${Number(r)}`;return typeof e.size=="number"?(sl(t,e.size),An(t,e.size)):t}function Aa(r,e={}){let t="";for(let n=0;n<r.length;n++)t+=sI[r[n]];let i=`0x${t}`;return typeof e.size=="number"?(sl(i,e.size),cn(i,e.size)):i}function Jt(r,e={}){let{signed:t,size:i}=e,n=BigInt(r),s;i?t?s=(1n<<BigInt(i)*8n-1n)-1n:s=2n**(BigInt(i)*8n)-1n:typeof r=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));let a=typeof s=="bigint"&&t?-s-1n:0;if(s&&n>s||n<a){let p=typeof r=="bigint"?"n":"";throw new cl({max:s?`${s}${p}`:void 0,min:`${a}${p}`,signed:t,size:i,value:`${r}${p}`})}let u=`0x${(t&&n<0?(1n<<BigInt(i*8))+BigInt(n):n).toString(16)}`;return i?An(u,i):u}function ka(r,e={}){return Aa(oI.encode(r),e)}function An(r,e){return hb(r,{dir:"left",size:e})}function cn(r,e){return hb(r,{dir:"right",size:e})}function Ca(r,e,t,i={}){let{strict:n}=i;Ux(r,e);let s=`0x${r.replace("0x","").slice((e??0)*2,(t??r.length)*2)}`;return n&&Hx(s,e,t),s}function mr(r){return Math.ceil((r.length-2)/2)}function gb(r,e={}){let{strict:t=!1}=e;try{return aI(r,{strict:t}),!0}catch{return!1}}var cl=class extends vt{constructor({max:e,min:t,signed:i,size:n,value:s}){super(`Number \`${s}\` is not in safe${n?` ${n*8}-bit`:""}${i?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};var sf=class extends vt{constructor(e){super(`Value \`${typeof e=="object"?Px(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},af=class extends vt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}};var nf=class extends vt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},al=class extends vt{constructor({offset:e,position:t,size:i}){super(`Slice ${t==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${i}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},of=class extends vt{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Gx(r){return{address:r.address,amount:Jt(r.amount),index:Jt(r.index),validatorIndex:Jt(r.validatorIndex)}}function Wx(r){return{...typeof r.baseFeePerGas=="bigint"&&{baseFeePerGas:Jt(r.baseFeePerGas)},...typeof r.blobBaseFee=="bigint"&&{blobBaseFee:Jt(r.blobBaseFee)},...typeof r.feeRecipient=="string"&&{feeRecipient:r.feeRecipient},...typeof r.gasLimit=="bigint"&&{gasLimit:Jt(r.gasLimit)},...typeof r.number=="bigint"&&{number:Jt(r.number)},...typeof r.prevRandao=="bigint"&&{prevRandao:Jt(r.prevRandao)},...typeof r.time=="bigint"&&{time:Jt(r.time)},...r.withdrawals&&{withdrawals:r.withdrawals.map(Gx)}}}ir();tr();$n();io();lo();ai();Ne();Yc();Qo();om();so();async function ll(r,e){let{blockNumber:t,blockTag:i="latest",blocks:n,returnFullTransactions:s,traceTransfers:a,validation:c}=e;try{let u=[];for(let h of n){let b=h.blockOverrides?Wx(h.blockOverrides):void 0,w=h.calls.map(_=>{let T=_,M=T.account?at(T.account):void 0,D={...T,data:T.abi?Ft(T):T.data,from:T.from??M?.address};return Gr(D),mi(D)}),v=h.stateOverrides?sa(h.stateOverrides):void 0;u.push({blockOverrides:b,calls:w,stateOverrides:v})}let f=(t?de(t):void 0)||i;return(await r.request({method:"eth_simulateV1",params:[{blockStateCalls:u,returnFullTransactions:s,traceTransfers:a,validation:c},f]})).map((h,b)=>({...Qc(h),calls:h.calls.map((w,v)=>{let{abi:_,args:T,functionName:M,to:D}=n[b].calls[v],F=w.error?.data??w.returnData,O=BigInt(w.gasUsed),W=w.logs?.map(ve=>Ar(ve)),V=w.status==="0x1"?"success":"failure",ee=_&&V==="success"&&F!=="0x"?Wr({abi:_,data:F,functionName:M}):null,Q=(()=>{if(V==="success")return;let ve;if(w.error?.data==="0x"?ve=new ni:w.error&&(ve=new Qi(w.error)),!!ve)return ei(ve,{abi:_??[],address:D,args:T,functionName:M??"<unknown>"})})();return{data:F,gasUsed:O,logs:W,status:V,...V==="success"?{result:ee}:{error:Q}}})}))}catch(u){let p=u,f=no(p,{});throw f instanceof pi?p:f}}Uu();og();function lf(r,e={}){let{as:t=typeof r=="string"?"Hex":"Bytes"}=e,i=pp(jx(r));return t==="Bytes"?i:Aa(i)}var uf=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let i=this.keys().next().value;i&&this.delete(i)}return this}};var uI={checksum:new uf(8192)},pf=uI.checksum;var mI=/^0x[a-fA-F0-9]{40}$/;function Ra(r,e={}){let{strict:t=!0}=e;if(!mI.test(r))throw new mf({address:r,cause:new bb});if(t){if(r.toLowerCase()===r)return;if(Kx(r)!==r)throw new mf({address:r,cause:new yb})}}function Kx(r){if(pf.has(r))return pf.get(r);Ra(r,{strict:!1});let e=r.substring(2).toLowerCase(),t=lf(Vx(e),{as:"Bytes"}),i=e.split("");for(let s=0;s<40;s+=2)t[s>>1]>>4>=8&&i[s]&&(i[s]=i[s].toUpperCase()),(t[s>>1]&15)>=8&&i[s+1]&&(i[s+1]=i[s+1].toUpperCase());let n=`0x${i.join("")}`;return pf.set(r,n),n}function ff(r,e={}){let{strict:t=!0}=e??{};try{return Ra(r,{strict:t}),!0}catch{return!1}}var mf=class extends vt{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},bb=class extends vt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},yb=class extends vt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};function hf(r){let e=!0,t="",i=0,n="",s=!1;for(let a=0;a<r.length;a++){let c=r[a];if(["(",")",","].includes(c)&&(e=!0),c==="("&&i++,c===")"&&i--,!!e){if(i===0){if(c===" "&&["event","function","error",""].includes(n))n="";else if(n+=c,c===")"){s=!0;break}continue}if(c===" "){r[a-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}n+=c,t+=c}}if(!s)throw new vt("Unable to normalize signature.");return n}function df(r,e){let t=typeof r,i=e.type;switch(i){case"address":return ff(r,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return i==="tuple"&&"components"in e?Object.values(e.components).every((n,s)=>df(Object.values(r)[s],n)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?t==="string"||r instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)?Array.isArray(r)&&r.every(n=>df(n,{...e,type:i.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function _b(r,e,t){for(let i in r){let n=r[i],s=e[i];if(n.type==="tuple"&&s.type==="tuple"&&"components"in n&&"components"in s)return _b(n.components,s.components,t[i]);let a=[n.type,s.type];if((()=>a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?ff(t[i],{strict:!1}):a.includes("address")&&a.includes("bytes")?ff(t[i],{strict:!1}):!1)())return a}}function gf(r,e={}){let{prepare:t=!0}=e,i=(()=>Array.isArray(r)?Fu(r):typeof r=="string"?Fu(r):r)();return{...i,...t?{hash:Ma(i)}:{}}}function qx(r,e,t){let{args:i=[],prepare:n=!0}=t??{},s=gb(e,{strict:!1}),a=r.filter(p=>s?p.type==="function"||p.type==="error"?wb(p)===Ca(e,0,4):p.type==="event"?Ma(p)===e:!1:"name"in p&&p.name===e);if(a.length===0)throw new os({name:e});if(a.length===1)return{...a[0],...n?{hash:Ma(a[0])}:{}};let c;for(let p of a){if(!("inputs"in p))continue;if(!i||i.length===0){if(!p.inputs||p.inputs.length===0)return{...p,...n?{hash:Ma(p)}:{}};continue}if(!p.inputs||p.inputs.length===0||p.inputs.length!==i.length)continue;if(i.every((d,h)=>{let b="inputs"in p&&p.inputs[h];return b?df(d,b):!1})){if(c&&"inputs"in c&&c.inputs){let d=_b(p.inputs,c.inputs,i);if(d)throw new vb({abiItem:p,type:d[0]},{abiItem:c,type:d[1]})}c=p}}let u=(()=>{if(c)return c;let[p,...f]=a;return{...p,overloads:f}})();if(!u)throw new os({name:e});return{...u,...n?{hash:Ma(u)}:{}}}function wb(r){return Ca(Ma(r),0,4)}function dI(r){let e=(()=>typeof r=="string"?r:Co(r))();return hf(e)}function Ma(r){return typeof r!="string"&&"hash"in r&&r.hash?r.hash:lf(ka(dI(r)))}var vb=class extends vt{constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${hf(Co(e.abiItem))}\`, and`,`\`${t.type}\` in \`${hf(Co(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},os=class extends vt{constructor({name:e,data:t,type:i="item"}){let n=(()=>e?` with name "${e}"`:t?` with data "${t}"`:"")();super(`ABI ${i}${n} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};var Xx=/^(.*)\[([0-9]*)\]$/,Qx=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,bf=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,CH=2n**(8n-1n)-1n,RH=2n**(16n-1n)-1n,MH=2n**(24n-1n)-1n,DH=2n**(32n-1n)-1n,BH=2n**(40n-1n)-1n,OH=2n**(48n-1n)-1n,PH=2n**(56n-1n)-1n,NH=2n**(64n-1n)-1n,FH=2n**(72n-1n)-1n,UH=2n**(80n-1n)-1n,HH=2n**(88n-1n)-1n,zH=2n**(96n-1n)-1n,jH=2n**(104n-1n)-1n,VH=2n**(112n-1n)-1n,GH=2n**(120n-1n)-1n,WH=2n**(128n-1n)-1n,$H=2n**(136n-1n)-1n,KH=2n**(144n-1n)-1n,qH=2n**(152n-1n)-1n,YH=2n**(160n-1n)-1n,XH=2n**(168n-1n)-1n,QH=2n**(176n-1n)-1n,ZH=2n**(184n-1n)-1n,JH=2n**(192n-1n)-1n,e9=2n**(200n-1n)-1n,t9=2n**(208n-1n)-1n,r9=2n**(216n-1n)-1n,i9=2n**(224n-1n)-1n,n9=2n**(232n-1n)-1n,o9=2n**(240n-1n)-1n,s9=2n**(248n-1n)-1n,a9=2n**(256n-1n)-1n,c9=-(2n**(8n-1n)),l9=-(2n**(16n-1n)),u9=-(2n**(24n-1n)),p9=-(2n**(32n-1n)),m9=-(2n**(40n-1n)),f9=-(2n**(48n-1n)),d9=-(2n**(56n-1n)),h9=-(2n**(64n-1n)),g9=-(2n**(72n-1n)),b9=-(2n**(80n-1n)),y9=-(2n**(88n-1n)),x9=-(2n**(96n-1n)),_9=-(2n**(104n-1n)),v9=-(2n**(112n-1n)),w9=-(2n**(120n-1n)),E9=-(2n**(128n-1n)),I9=-(2n**(136n-1n)),S9=-(2n**(144n-1n)),L9=-(2n**(152n-1n)),T9=-(2n**(160n-1n)),A9=-(2n**(168n-1n)),k9=-(2n**(176n-1n)),C9=-(2n**(184n-1n)),R9=-(2n**(192n-1n)),M9=-(2n**(200n-1n)),D9=-(2n**(208n-1n)),B9=-(2n**(216n-1n)),O9=-(2n**(224n-1n)),P9=-(2n**(232n-1n)),N9=-(2n**(240n-1n)),F9=-(2n**(248n-1n)),U9=-(2n**(256n-1n)),H9=2n**8n-1n,z9=2n**16n-1n,j9=2n**24n-1n,V9=2n**32n-1n,G9=2n**40n-1n,W9=2n**48n-1n,$9=2n**56n-1n,K9=2n**64n-1n,q9=2n**72n-1n,Y9=2n**80n-1n,X9=2n**88n-1n,Q9=2n**96n-1n,Z9=2n**104n-1n,J9=2n**112n-1n,e7=2n**120n-1n,t7=2n**128n-1n,r7=2n**136n-1n,i7=2n**144n-1n,n7=2n**152n-1n,o7=2n**160n-1n,s7=2n**168n-1n,a7=2n**176n-1n,c7=2n**184n-1n,l7=2n**192n-1n,u7=2n**200n-1n,p7=2n**208n-1n,m7=2n**216n-1n,f7=2n**224n-1n,d7=2n**232n-1n,h7=2n**240n-1n,g7=2n**248n-1n,b7=2n**256n-1n;function Zx({checksumAddress:r,parameters:e,values:t}){let i=[];for(let n=0;n<e.length;n++)i.push(Eb({checksumAddress:r,parameter:e[n],value:t[n]}));return i}function Eb({checksumAddress:r=!1,parameter:e,value:t}){let i=e,n=EI(i.type);if(n){let[s,a]=n;return bI(t,{checksumAddress:r,length:s,parameter:{...i,type:a}})}if(i.type==="tuple")return wI(t,{checksumAddress:r,parameter:i});if(i.type==="address")return gI(t,{checksum:r});if(i.type==="bool")return xI(t);if(i.type.startsWith("uint")||i.type.startsWith("int")){let s=i.type.startsWith("int"),[,,a="256"]=bf.exec(i.type)??[];return _I(t,{signed:s,size:Number(a)})}if(i.type.startsWith("bytes"))return yI(t,{type:i.type});if(i.type==="string")return vI(t);throw new pl(i.type)}function yf(r){let e=0;for(let s=0;s<r.length;s++){let{dynamic:a,encoded:c}=r[s];a?e+=32:e+=mr(c)}let t=[],i=[],n=0;for(let s=0;s<r.length;s++){let{dynamic:a,encoded:c}=r[s];a?(t.push(Jt(e+n,{size:32})),i.push(c),n+=mr(c)):t.push(c)}return Kr(...t,...i)}function gI(r,e){let{checksum:t=!1}=e;return Ra(r,{strict:t}),{dynamic:!1,encoded:An(r.toLowerCase())}}function bI(r,e){let{checksumAddress:t,length:i,parameter:n}=e,s=i===null;if(!Array.isArray(r))throw new _f(r);if(!s&&r.length!==i)throw new xf({expectedLength:i,givenLength:r.length,type:`${n.type}[${i}]`});let a=!1,c=[];for(let u=0;u<r.length;u++){let p=Eb({checksumAddress:t,parameter:n,value:r[u]});p.dynamic&&(a=!0),c.push(p)}if(s||a){let u=yf(c);if(s){let p=Jt(c.length,{size:32});return{dynamic:!0,encoded:c.length>0?Kr(p,u):p}}if(a)return{dynamic:!0,encoded:u}}return{dynamic:!1,encoded:Kr(...c.map(({encoded:u})=>u))}}function yI(r,{type:e}){let[,t]=e.split("bytes"),i=mr(r);if(!t){let n=r;return i%32!==0&&(n=cn(n,Math.ceil((r.length-2)/2/32)*32)),{dynamic:!0,encoded:Kr(An(Jt(i,{size:32})),n)}}if(i!==Number.parseInt(t))throw new ul({expectedSize:Number.parseInt(t),value:r});return{dynamic:!1,encoded:cn(r)}}function xI(r){if(typeof r!="boolean")throw new vt(`Invalid boolean value: "${r}" (type: ${typeof r}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:An(cf(r))}}function _I(r,{signed:e,size:t}){if(typeof t=="number"){let i=2n**(BigInt(t)-(e?1n:0n))-1n,n=e?-i-1n:0n;if(r>i||r<n)throw new cl({max:i.toString(),min:n.toString(),signed:e,size:t/8,value:r.toString()})}return{dynamic:!1,encoded:Jt(r,{size:32,signed:e})}}function vI(r){let e=ka(r),t=Math.ceil(mr(e)/32),i=[];for(let n=0;n<t;n++)i.push(cn(Ca(e,n*32,(n+1)*32)));return{dynamic:!0,encoded:Kr(cn(Jt(mr(e),{size:32})),...i)}}function wI(r,e){let{checksumAddress:t,parameter:i}=e,n=!1,s=[];for(let a=0;a<i.components.length;a++){let c=i.components[a],u=Array.isArray(r)?a:c.name,p=Eb({checksumAddress:t,parameter:c,value:r[u]});s.push(p),p.dynamic&&(n=!0)}return{dynamic:n,encoded:n?yf(s):Kr(...s.map(({encoded:a})=>a))}}function EI(r){let e=r.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function wf(r,e,t){let{checksumAddress:i=!1}=t??{};if(r.length!==e.length)throw new vf({expectedLength:r.length,givenLength:e.length});let n=Zx({checksumAddress:i,parameters:r,values:e}),s=yf(n);return s.length===0?"0x":s}function Sb(r,e){if(r.length!==e.length)throw new vf({expectedLength:r.length,givenLength:e.length});let t=[];for(let i=0;i<r.length;i++){let n=r[i],s=e[i];t.push(Sb.encode(n,s))}return Kr(...t)}(function(r){function e(t,i,n=!1){if(t==="address"){let u=i;return Ra(u),An(u.toLowerCase(),n?32:0)}if(t==="string")return ka(i);if(t==="bytes")return i;if(t==="bool")return An(cf(i),n?32:1);let s=t.match(bf);if(s){let[u,p,f="256"]=s,d=Number.parseInt(f)/8;return Jt(i,{size:n?32:d,signed:p==="int"})}let a=t.match(Qx);if(a){let[u,p]=a;if(Number.parseInt(p)!==(i.length-2)/2)throw new ul({expectedSize:Number.parseInt(p),value:i});return cn(i,n?32:0)}let c=t.match(Xx);if(c&&Array.isArray(i)){let[u,p]=c,f=[];for(let d=0;d<i.length;d++)f.push(e(p,i[d],!0));return f.length===0?"0x":Kr(...f)}throw new pl(t)}r.encode=e})(Sb||(Sb={}));var xf=class extends vt{constructor({expectedLength:e,givenLength:t,type:i}){super(`Array length mismatch for type \`${i}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},ul=class extends vt{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${mr(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},vf=class extends vt{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${t}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},_f=class extends vt{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},pl=class extends vt{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};function Jx(r,e){let{bytecode:t,args:i}=e;return Kr(t,r.inputs?.length&&i?.length?wf(r.inputs,i):"0x")}function e_(r){return gf(r)}function t_(r,...e){let{overloads:t}=r,i=t?TI([r,...t],r.name,{args:e[0]}):r,n=AI(i),s=e.length>0?wf(i.inputs,e[0]):void 0;return s?Kr(n,s):n}function ss(r,e={}){return gf(r,e)}function TI(r,e,t){let i=qx(r,e,t);if(i.type!=="function")throw new os({name:e,type:"function"});return i}function AI(r){return wb(r)}ir();var r_="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Pi="0x0000000000000000000000000000000000000000";xm();rt();ai();var CI="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function i_(r,e){let{blockNumber:t,blockTag:i,calls:n,stateOverrides:s,traceAssetChanges:a,traceTransfers:c,validation:u}=e,p=e.account?at(e.account):void 0;if(a&&!p)throw new P("`account` is required when `traceAssetChanges` is true");let f=p?Jx(e_("constructor(bytes, bytes)"),{bytecode:ym,args:[CI,t_(ss("function getBalance(address)"),[p.address])]}):void 0,d=a?await Promise.all(e.calls.map(async ie=>{if(!ie.data&&!ie.abi)return;let{accessList:Ce}=await Vm(r,{account:p.address,...ie,data:ie.abi?Ft(ie):ie.data});return Ce.map(({address:ht,storageKeys:ut})=>ut.length>0?ht:null)})).then(ie=>ie.flat().filter(Boolean)):[],h=s?.map(ie=>ie.address===p?.address?{...ie,nonce:0}:ie),b=await ll(r,{blockNumber:t,blockTag:i,blocks:[...a?[{calls:[{data:f}],stateOverrides:s},{calls:d.map((ie,Ce)=>({abi:[ss("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[p.address],to:ie,from:Pi,nonce:Ce})),stateOverrides:[{address:Pi,nonce:0}]}]:[],{calls:[...n,{}].map((ie,Ce)=>({...ie,from:p?.address,nonce:Ce})),stateOverrides:h},...a?[{calls:[{data:f}]},{calls:d.map((ie,Ce)=>({abi:[ss("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[p.address],to:ie,from:Pi,nonce:Ce})),stateOverrides:[{address:Pi,nonce:0}]},{calls:d.map((ie,Ce)=>({to:ie,abi:[ss("function decimals() returns (uint256)")],functionName:"decimals",from:Pi,nonce:Ce})),stateOverrides:[{address:Pi,nonce:0}]},{calls:d.map((ie,Ce)=>({to:ie,abi:[ss("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Pi,nonce:Ce})),stateOverrides:[{address:Pi,nonce:0}]},{calls:d.map((ie,Ce)=>({to:ie,abi:[ss("function symbol() returns (string)")],functionName:"symbol",from:Pi,nonce:Ce})),stateOverrides:[{address:Pi,nonce:0}]}]:[]],traceTransfers:c,validation:u}),w=a?b[2]:b[0],[v,_,,T,M,D,F,O]=a?b:[],{calls:W,...V}=w,ee=W.slice(0,-1)??[],Q=v?.calls??[],ve=_?.calls??[],be=[...Q,...ve].map(ie=>ie.status==="success"?Nt(ie.data):null),j=T?.calls??[],qe=M?.calls??[],Z=[...j,...qe].map(ie=>ie.status==="success"?Nt(ie.data):null),ye=(D?.calls??[]).map(ie=>ie.status==="success"?ie.result:null),re=(O?.calls??[]).map(ie=>ie.status==="success"?ie.result:null),C=(F?.calls??[]).map(ie=>ie.status==="success"?ie.result:null),Fe=[];for(let[ie,Ce]of Z.entries()){let ht=be[ie];if(typeof Ce!="bigint"||typeof ht!="bigint")continue;let ut=ye[ie-1],St=re[ie-1],ct=C[ie-1],xr=(()=>ie===0?{address:r_,decimals:18,symbol:"ETH"}:{address:d[ie-1],decimals:ct||ut?Number(ut??1):void 0,symbol:St??void 0})();Fe.some(hr=>hr.token.address===xr.address)||Fe.push({token:xr,value:{pre:ht,post:Ce,diff:Ce-ht}})}return{assetChanges:Fe,block:V,results:ee}}Jo();xm();$n();wm();Bo();ha();Ii();Ne();em();Er();pr();function n_({r,s:e,to:t="hex",v:i,yParity:n}){let s=(()=>{if(n===0||n===1)return n;if(i&&(i===27n||i===28n||i>=35n))return i%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),a=`0x${new Sn.Signature(Nt(r),Nt(e)).toCompactHex()}${s===0?"1b":"1c"}`;return t==="hex"?a:rr(a)}xa();async function Da(r,e){let{address:t,factory:i,factoryData:n,hash:s,signature:a,universalSignatureVerifierAddress:c=r.chain?.contracts?.universalSignatureVerifier?.address,...u}=e,p=(()=>qt(a)?a:typeof a=="object"&&"r"in a&&"s"in a?n_(a):ft(a))(),f=await(async()=>!i&&!n||Lx(p)?p:Tx({address:i,data:n,signature:p}))();try{let d=c?{to:c,data:Ft({abi:Zg,functionName:"isValidSig",args:[t,s,f]}),...u}:{data:rs({abi:Zg,args:[t,s,f],bytecode:k1}),...u},{data:h}=await me(r,nn,"call")(d);return rg(h??"0x0")}catch(d){try{if(rn(fp(t),await tm({hash:s,signature:a})))return!0}catch{}if(d instanceof Ps)return!1;throw d}}async function o_(r,{address:e,message:t,factory:i,factoryData:n,signature:s,...a}){let c=Zm(t);return Da(r,{address:e,factory:i,factoryData:n,hash:c,signature:s,...a})}async function s_(r,e){let{address:t,factory:i,factoryData:n,signature:s,message:a,primaryType:c,types:u,domain:p,...f}=e,d=px({message:a,primaryType:c,types:u,domain:p});return Da(r,{address:t,factory:i,factoryData:n,hash:d,signature:s,...f})}Mi();tb();Br();Er();Br();function Ef(r,{emitOnBegin:e=!1,emitMissed:t=!1,onBlockNumber:i,onError:n,poll:s,pollingInterval:a=r.pollingInterval}){let c=(()=>typeof s<"u"?s:!(r.transport.type==="webSocket"||r.transport.type==="fallback"&&r.transport.transports[0].config.type==="webSocket"))(),u;return c?(()=>{let d=dt(["watchBlockNumber",r.uid,e,t,a]);return $r(d,{onBlockNumber:i,onError:n},h=>on(async()=>{try{let b=await me(r,sn,"getBlockNumber")({cacheTime:0});if(u){if(b===u)return;if(b-u>1&&t)for(let w=u+1n;w<b;w++)h.onBlockNumber(w,u),u=w}(!u||b>u)&&(h.onBlockNumber(b,u),u=b)}catch(b){h.onError?.(b)}},{emitOnBegin:e,interval:a}))})():(()=>{let d=dt(["watchBlockNumber",r.uid,e,t]);return $r(d,{onBlockNumber:i,onError:n},h=>{let b=!0,w=()=>b=!1;return(async()=>{try{let v=(()=>{if(r.transport.type==="fallback"){let T=r.transport.transports.find(M=>M.config.type==="webSocket");return T?T.value:r.transport}return r.transport})(),{unsubscribe:_}=await v.subscribe({params:["newHeads"],onData(T){if(!b)return;let M=Nt(T.result?.number);h.onBlockNumber(M,u),u=M},onError(T){h.onError?.(T)}});w=_,b||w()}catch(v){n?.(v)}})(),()=>w()})})()}async function a_(r,{confirmations:e=1,hash:t,onReplaced:i,pollingInterval:n=r.pollingInterval,retryCount:s=6,retryDelay:a=({count:u})=>~~(1<<u)*200,timeout:c=18e4}){let u=dt(["waitForTransactionReceipt",r.uid,t]),p,f,d,h=!1,{promise:b,resolve:w,reject:v}=Im(),_=c?setTimeout(()=>v(new Dp({hash:t})),c):void 0,T=$r(u,{onReplaced:i,resolve:w,reject:v},M=>{let D=me(r,Ef,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:n,async onBlockNumber(F){let O=V=>{clearTimeout(_),D(),V(),T()},W=F;if(!h)try{if(d){if(e>1&&(!d.blockNumber||W-d.blockNumber+1n<e))return;O(()=>M.resolve(d));return}if(p||(h=!0,await rl(async()=>{p=await me(r,Ta,"getTransaction")({hash:t}),p.blockNumber&&(W=p.blockNumber)},{delay:a,retryCount:s}),h=!1),d=await me(r,ol,"getTransactionReceipt")({hash:t}),e>1&&(!d.blockNumber||W-d.blockNumber+1n<e))return;O(()=>M.resolve(d))}catch(V){if(V instanceof Bs||V instanceof Os){if(!p){h=!1;return}try{f=p,h=!0;let ee=await rl(()=>me(r,Tr,"getBlock")({blockNumber:W,includeTransactions:!0}),{delay:a,retryCount:s,shouldRetry:({error:be})=>be instanceof ca});h=!1;let Q=ee.transactions.find(({from:be,nonce:j})=>be===f.from&&j===f.nonce);if(!Q||(d=await me(r,ol,"getTransactionReceipt")({hash:Q.hash}),e>1&&(!d.blockNumber||W-d.blockNumber+1n<e)))return;let ve="replaced";Q.to===f.to&&Q.value===f.value&&Q.input===f.input?ve="repriced":Q.from===Q.to&&Q.value===0n&&(ve="cancelled"),O(()=>{M.onReplaced?.({reason:ve,replacedTransaction:f,transaction:Q,transactionReceipt:d}),M.resolve(d)})}catch(ee){O(()=>M.reject(ee))}}else O(()=>M.reject(V))}}})});return b}Br();function c_(r,{blockTag:e="latest",emitMissed:t=!1,emitOnBegin:i=!1,onBlock:n,onError:s,includeTransactions:a,poll:c,pollingInterval:u=r.pollingInterval}){let p=(()=>typeof c<"u"?c:!(r.transport.type==="webSocket"||r.transport.type==="fallback"&&r.transport.transports[0].config.type==="webSocket"))(),f=a??!1,d;return p?(()=>{let w=dt(["watchBlocks",r.uid,e,t,i,f,u]);return $r(w,{onBlock:n,onError:s},v=>on(async()=>{try{let _=await me(r,Tr,"getBlock")({blockTag:e,includeTransactions:f});if(_.number&&d?.number){if(_.number===d.number)return;if(_.number-d.number>1&&t)for(let T=d?.number+1n;T<_.number;T++){let M=await me(r,Tr,"getBlock")({blockNumber:T,includeTransactions:f});v.onBlock(M,d),d=M}}(!d?.number||e==="pending"&&!_?.number||_.number&&_.number>d.number)&&(v.onBlock(_,d),d=_)}catch(_){v.onError?.(_)}},{emitOnBegin:i,interval:u}))})():(()=>{let w=!0,v=!0,_=()=>w=!1;return(async()=>{try{i&&me(r,Tr,"getBlock")({blockTag:e,includeTransactions:f}).then(D=>{w&&v&&(n(D,void 0),v=!1)});let T=(()=>{if(r.transport.type==="fallback"){let D=r.transport.transports.find(F=>F.config.type==="webSocket");return D?D.value:r.transport}return r.transport})(),{unsubscribe:M}=await T.subscribe({params:["newHeads"],async onData(D){if(!w)return;let F=await me(r,Tr,"getBlock")({blockNumber:D.blockNumber,includeTransactions:f}).catch(()=>{});w&&(n(F,d),v=!1,d=F)},onError(D){s?.(D)}});_=M,w||_()}catch(T){s?.(T)}})(),()=>_()})()}Br();tr();zc();function l_(r,{address:e,args:t,batch:i=!0,event:n,events:s,fromBlock:a,onError:c,onLogs:u,poll:p,pollingInterval:f=r.pollingInterval,strict:d}){let h=(()=>typeof p<"u"?p:typeof a=="bigint"?!0:!(r.transport.type==="webSocket"||r.transport.type==="fallback"&&r.transport.transports[0].config.type==="webSocket"))(),b=d??!1;return h?(()=>{let _=dt(["watchEvent",e,t,i,r.uid,n,f,a]);return $r(_,{onLogs:u,onError:c},T=>{let M;a!==void 0&&(M=a-1n);let D,F=!1,O=on(async()=>{if(!F){try{D=await me(r,Gm,"createEventFilter")({address:e,args:t,event:n,events:s,strict:b,fromBlock:a})}catch{}F=!0;return}try{let W;if(D)W=await me(r,uo,"getFilterChanges")({filter:D});else{let V=await me(r,sn,"getBlockNumber")({});M&&M!==V?W=await me(r,ya,"getLogs")({address:e,args:t,event:n,events:s,fromBlock:M+1n,toBlock:V}):W=[],M=V}if(W.length===0)return;if(i)T.onLogs(W);else for(let V of W)T.onLogs([V])}catch(W){D&&W instanceof Zi&&(F=!1),T.onError?.(W)}},{emitOnBegin:!0,interval:f});return async()=>{D&&await me(r,po,"uninstallFilter")({filter:D}),O()}})})():(()=>{let _=!0,T=()=>_=!1;return(async()=>{try{let M=(()=>{if(r.transport.type==="fallback"){let W=r.transport.transports.find(V=>V.config.type==="webSocket");return W?W.value:r.transport}return r.transport})(),D=s??(n?[n]:void 0),F=[];D&&(F=[D.flatMap(V=>Yi({abi:[V],eventName:V.name,args:t}))],n&&(F=F[0]));let{unsubscribe:O}=await M.subscribe({params:["logs",{address:e,topics:F}],onData(W){if(!_)return;let V=W.result;try{let{eventName:ee,args:Q}=ga({abi:D??[],data:V.data,topics:V.topics,strict:b}),ve=Ar(V,{args:Q,eventName:ee});u([ve])}catch(ee){let Q,ve;if(ee instanceof Li||ee instanceof Wi){if(d)return;Q=ee.abiItem.name,ve=ee.abiItem.inputs?.some(j=>!("name"in j&&j.name))}let be=Ar(V,{args:ve?[]:{},eventName:Q});u([be])}},onError(W){c?.(W)}});T=O,_||T()}catch(M){c?.(M)}})(),()=>T()})()}Br();function u_(r,{batch:e=!0,onError:t,onTransactions:i,poll:n,pollingInterval:s=r.pollingInterval}){return(typeof n<"u"?n:r.transport.type!=="webSocket")?(()=>{let p=dt(["watchPendingTransactions",r.uid,e,s]);return $r(p,{onTransactions:i,onError:t},f=>{let d,h=on(async()=>{try{if(!d)try{d=await me(r,Wm,"createPendingTransactionFilter")({});return}catch(w){throw h(),w}let b=await me(r,uo,"getFilterChanges")({filter:d});if(b.length===0)return;if(e)f.onTransactions(b);else for(let w of b)f.onTransactions([w])}catch(b){f.onError?.(b)}},{emitOnBegin:!0,interval:s});return async()=>{d&&await me(r,po,"uninstallFilter")({filter:d}),h()}})})():(()=>{let p=!0,f=()=>p=!1;return(async()=>{try{let{unsubscribe:d}=await r.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!p)return;let b=h.result;i([b])},onError(h){t?.(h)}});f=d,p||f()}catch(d){t?.(d)}})(),()=>f()})()}function p_(r){let{scheme:e,statement:t,...i}=r.match(RI)?.groups??{},{chainId:n,expirationTime:s,issuedAt:a,notBefore:c,requestId:u,...p}=r.match(MI)?.groups??{},f=r.split("Resources:")[1]?.split(`
- `).slice(1);return{...i,...p,...n?{chainId:Number(n)}:{},...s?{expirationTime:new Date(s)}:{},...a?{issuedAt:new Date(a)}:{},...c?{notBefore:new Date(c)}:{},...u?{requestId:u}:{},...f?{resources:f}:{},...e?{scheme:e}:{},...t?{statement:t}:{}}}var RI=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,MI=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;ha();function m_(r){let{address:e,domain:t,message:i,nonce:n,scheme:s,time:a=new Date}=r;if(t&&i.domain!==t||n&&i.nonce!==n||s&&i.scheme!==s||i.expirationTime&&a>=i.expirationTime||i.notBefore&&a<i.notBefore)return!1;try{if(!i.address||e&&!rn(i.address,e))return!1}catch{return!1}return!0}async function f_(r,e){let{address:t,domain:i,message:n,nonce:s,scheme:a,signature:c,time:u=new Date,...p}=e,f=p_(n);if(!f.address||!m_({address:t,domain:i,message:f,nonce:s,scheme:a,time:u}))return!1;let h=Zm(n);return Da(r,{address:f.address,hash:h,signature:c,...p})}function d_(r){return{call:e=>nn(r,e),createAccessList:e=>Vm(r,e),createBlockFilter:()=>ox(r),createContractEventFilter:e=>bp(r,e),createEventFilter:e=>Gm(r,e),createPendingTransactionFilter:()=>Wm(r),estimateContractGas:e=>w1(r,e),estimateGas:e=>da(r,e),getBalance:e=>hm(r,e),getBlobBaseFee:()=>sx(r),getBlock:e=>Tr(r,e),getBlockNumber:e=>sn(r,e),getBlockTransactionCount:e=>ax(r,e),getBytecode:e=>lb(r,e),getChainId:()=>fi(r),getCode:e=>lb(r,e),getContractEvents:e=>gm(r,e),getEip712Domain:e=>j1(r,e),getEnsAddress:e=>X1(r,e),getEnsAvatar:e=>rx(r,e),getEnsName:e=>ix(r,e),getEnsResolver:e=>nx(r,e),getEnsText:e=>jm(r,e),getFeeHistory:e=>lx(r,e),estimateFeesPerGas:e=>b1(r,e),getFilterChanges:e=>uo(r,e),getFilterLogs:e=>ux(r,e),getGasPrice:()=>la(r),getLogs:e=>ya(r,e),getProof:e=>kx(r,e),estimateMaxPriorityFeePerGas:e=>g1(r,e),getStorageAt:e=>Cx(r,e),getTransaction:e=>Ta(r,e),getTransactionConfirmations:e=>Rx(r,e),getTransactionCount:e=>ua(r,e),getTransactionReceipt:e=>ol(r,e),multicall:e=>Mx(r,e),prepareTransactionRequest:e=>co(r,e),readContract:e=>br(r,e),sendRawTransaction:e=>_a(r,e),simulate:e=>ll(r,e),simulateBlocks:e=>ll(r,e),simulateCalls:e=>i_(r,e),simulateContract:e=>O1(r,e),verifyMessage:e=>o_(r,e),verifySiweMessage:e=>f_(r,e),verifyTypedData:e=>s_(r,e),uninstallFilter:e=>po(r,e),waitForTransactionReceipt:e=>a_(r,e),watchBlocks:e=>c_(r,e),watchBlockNumber:e=>Ef(r,e),watchContractEvent:e=>U1(r,e),watchEvent:e=>l_(r,e),watchPendingTransactions:e=>u_(r,e)}}function ml(r){let{key:e="public",name:t="Public Client"}=r;return Bm({...r,key:e,name:t,type:"publicClient"}).extend(d_)}wm();function h_(r,e){let{abi:t,args:i,bytecode:n,...s}=e,a=rs({abi:t,args:i,bytecode:n});return va(r,{...s,...s.authorizationList?{to:null}:{},data:a})}Bo();async function g_(r){return r.account?.type==="local"?[r.account.address]:(await r.request({method:"eth_accounts"},{dedupe:!0})).map(t=>_n(t))}async function b_(r){return await r.request({method:"wallet_getPermissions"},{dedupe:!0})}ir();ha();async function If(r,e){let{account:t=r.account,chainId:i,nonce:n}=e;if(!t)throw new kr({docsPath:"/docs/eip7702/prepareAuthorization"});let s=at(t),a=(()=>{if(e.executor)return e.executor==="self"?e.executor:at(e.executor)})(),c={address:e.contractAddress??e.address,chainId:i,nonce:n};return typeof c.chainId>"u"&&(c.chainId=r.chain?.id??await me(r,fi,"getChainId")({})),typeof c.nonce>"u"&&(c.nonce=await me(r,ua,"getTransactionCount")({address:s.address,blockTag:"pending"}),(a==="self"||a?.address&&rn(a.address,s.address))&&(c.nonce+=1)),c}Bo();async function y_(r){return(await r.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(t=>fp(t))}async function x_(r,e){return r.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}ir();async function __(r,e){let{account:t=r.account}=e;if(!t)throw new kr({docsPath:"/docs/eip7702/signAuthorization"});let i=at(t);if(!i.signAuthorization)throw new mo({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:i.type});let n=await If(r,e);return i.signAuthorization(n)}ir();Ne();async function v_(r,{account:e=r.account,message:t}){if(!e)throw new kr({docsPath:"/docs/actions/wallet/signMessage"});let i=at(e);if(i.signMessage)return i.signMessage({message:t});let n=(()=>typeof t=="string"?Ti(t):t.raw instanceof Uint8Array?we(t.raw):t.raw)();return r.request({method:"personal_sign",params:[n,i.address]},{retryCount:0})}ir();Ne();Qo();so();async function w_(r,e){let{account:t=r.account,chain:i=r.chain,...n}=e;if(!t)throw new kr({docsPath:"/docs/actions/wallet/signTransaction"});let s=at(t);Gr({account:s,...e});let a=await me(r,fi,"getChainId")({});i!==null&&km({currentChainId:a,chain:i});let u=(i?.formatters||r.chain?.formatters)?.transactionRequest?.format||mi;return s.signTransaction?s.signTransaction({...n,chainId:a},{serializer:r.chain?.serializers?.transaction}):await r.request({method:"eth_signTransaction",params:[{...u(n),chainId:de(a),from:s.address}]},{retryCount:0})}ir();async function E_(r,e){let{account:t=r.account,domain:i,message:n,primaryType:s}=e;if(!t)throw new kr({docsPath:"/docs/actions/wallet/signTypedData"});let a=at(t),c={EIP712Domain:Xm({domain:i}),...e.types};if(Ym({domain:i,message:n,primaryType:s,types:c}),a.signTypedData)return a.signTypedData({domain:i,message:n,primaryType:s,types:c});let u=gx({domain:i,message:n,primaryType:s,types:c});return r.request({method:"eth_signTypedData_v4",params:[a.address,u]},{retryCount:0})}Ne();async function I_(r,{id:e}){await r.request({method:"wallet_switchEthereumChain",params:[{chainId:de(e)}]},{retryCount:0})}async function S_(r,e){return await r.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function L_(r){return{addChain:e=>V1(r,e),deployContract:e=>h_(r,e),getAddresses:()=>g_(r),getChainId:()=>fi(r),getPermissions:()=>b_(r),prepareAuthorization:e=>If(r,e),prepareTransactionRequest:e=>co(r,e),requestAddresses:()=>y_(r),requestPermissions:e=>x_(r,e),sendRawTransaction:e=>_a(r,e),sendTransaction:e=>va(r,e),signAuthorization:e=>__(r,e),signMessage:e=>v_(r,e),signTransaction:e=>w_(r,e),signTypedData:e=>E_(r,e),switchChain:e=>I_(r,e),watchAsset:e=>S_(r,e),writeContract:e=>z1(r,e)}}function Ba(r){let{key:e="wallet",name:t="Wallet Client",transport:i}=r;return Bm({...r,key:e,name:t,transport:i,type:"walletClient"}).extend(L_)}Ne();Ip();em();Ne();function fl(){return we(Sn.utils.randomPrivateKey())}var T_={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}};Er();var A_={block:h1({format(r){return{transactions:r.transactions?.map(t=>{if(typeof t=="string")return t;let i=Zo(t);return i.typeHex==="0x7e"&&(i.isSystemTx=t.isSystemTx,i.mint=t.mint?Nt(t.mint):void 0,i.sourceHash=t.sourceHash,i.type="deposit"),i}),stateRoot:r.stateRoot}}}),transaction:d1({format(r){let e={};return r.type==="0x7e"&&(e.isSystemTx=r.isSystemTx,e.mint=r.mint?Nt(r.mint):void 0,e.sourceHash=r.sourceHash,e.type="deposit"),e}}),transactionReceipt:Ex({format(r){return{l1GasPrice:r.l1GasPrice?Nt(r.l1GasPrice):null,l1GasUsed:r.l1GasUsed?Nt(r.l1GasUsed):null,l1Fee:r.l1Fee?Nt(r.l1Fee):null,l1FeeScalar:r.l1FeeScalar?Number(r.l1FeeScalar):null}}})};$i();Ri();si();Ne();function DI(r,e){return OI(r)?BI(r):vx(r,e)}var k_={transaction:DI};function BI(r){PI(r);let{sourceHash:e,data:t,from:i,gas:n,isSystemTx:s,mint:a,to:c,value:u}=r,p=[e,i,c??"0x",a?we(a):"0x",u?we(u):"0x",n?we(n):"0x",s?"0x1":"0x",t??"0x"];return Ir(["0x7e",Oi(p)])}function OI(r){return r.type==="deposit"||typeof r.sourceHash<"u"}function PI(r){let{from:e,to:t}=r;if(e&&!At(e))throw new Bt({address:e});if(t&&!At(t))throw new Bt({address:t})}var as={contracts:T_,formatters:A_,serializers:k_};var cs=jt({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}});var Sf=jt({id:97,name:"Binance Smart Chain Testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.bnbchain.org:8545"]}},blockExplorers:{default:{name:"BscScan",url:"https://testnet.bscscan.com",apiUrl:"https://api-testnet.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0});var Lf=jt({id:8217,name:"Klaytn",nativeCurrency:{decimals:18,name:"Klaytn",symbol:"KLAY"},rpcUrls:{default:{http:["https://public-en-cypress.klaytn.net"]}},blockExplorers:{default:{name:"KlaytnScope",url:"https://scope.klaytn.com"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:96002415}}});var Tf=jt({id:1890,name:"LightLink Phoenix Mainnet",network:"lightlink-phoenix",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://replicator.phoenix.lightlink.io/rpc/v1"]}},blockExplorers:{default:{name:"LightLink Phoenix Explorer",url:"https://phoenix.lightlink.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:125499184}},testnet:!1});var Oa=jt({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});var Pa=jt({id:5e3,name:"Mantle",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Explorer",url:"https://mantlescan.xyz/",apiUrl:"https://api.mantlescan.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:304717}}});var Na=jt({id:5003,name:"Mantle Sepolia Testnet",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.sepolia.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Testnet Explorer",url:"https://explorer.sepolia.mantle.xyz/",apiUrl:"https://explorer.sepolia.mantle.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:4584012}},testnet:!0});var Af=56,Fa=jt({id:204,name:"opBNB",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{default:{http:["https://opbnb-mainnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opBNB (BSCScan)",url:"https://opbnb.bscscan.com",apiUrl:"https://api-opbnb.bscscan.com/api"}},contracts:{...as.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:512881},l2OutputOracle:{[Af]:{address:"0x153CAB79f4767E2ff862C94aa49573294B13D169"}},portal:{[Af]:{address:"0x1876EA7702C0ad0C6A2ae6036DE7733edfBca519"}},l1StandardBridge:{[Af]:{address:"0xF05F0e4362859c3331Cb9395CBC201E3Fa6757Ea"}}},sourceId:Af});var kf=97,Cf=jt({id:5611,name:"opBNB Testnet",nativeCurrency:{decimals:18,name:"tBNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://opbnb-testnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opbnbscan",url:"https://testnet.opbnbscan.com"}},contracts:{...as.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:3705108},l2OutputOracle:{[kf]:{address:"0xFf2394Bb843012562f4349C6632a0EcB92fC8810"}},portal:{[kf]:{address:"0x4386C8ABf2009aC0c263462Da568DD9d46e52a31"}},l1StandardBridge:{[kf]:{address:"0x677311Fd2cCc511Bbc0f581E8d9a07B033D5E840"}}},testnet:!0,sourceId:kf});var dl=1,Rf=jt({...as,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...as.contracts,disputeGameFactory:{[dl]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[dl]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[dl]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[dl]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:dl});var Mf=jt({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});var m=Xb(uv());var Y;(e=>{let r;(i=>{let t;(_r=>{var ur,Ot,it,Xt,vi,Bn,y,R,I,K,ce,se,We,ot,pt,zr,vr,dn,hn,Ml,Dl,Bl,Ol,Pl,Nl,Fl,Ul,Hl,zl,jl,Vl,Gl,Wl,$l,Kl,ql,Yl,Xl,Ql,Zl,Jl;let n;(ii=>(ii[ii.SYS_NORMAL=1]="SYS_NORMAL",ii[ii.UNKNOWN=2]="UNKNOWN",ii[ii.USER_NOT_EXIST=3]="USER_NOT_EXIST",ii[ii.SYS_DATA_ERROR=4]="SYS_DATA_ERROR",ii[ii.WALLET_ADDRESS_ERROR=5]="WALLET_ADDRESS_ERROR",ii[ii.NOT_ENOUGH_ITEM=6]="NOT_ENOUGH_ITEM"))(n=_r.MessageCode||(_r.MessageCode={}));let s;(Re=>(Re[Re.MSG_HEART_BEAT=10001]="MSG_HEART_BEAT",Re[Re.MSG_REG_HALL=10002]="MSG_REG_HALL",Re[Re.MSG_REG_ROOM=10003]="MSG_REG_ROOM",Re[Re.MSG_REMOVE_HALL=11002]="MSG_REMOVE_HALL",Re[Re.MSG_REMOVE_ROOM=11003]="MSG_REMOVE_ROOM",Re[Re.MSG_USER_REGISTER=101]="MSG_USER_REGISTER",Re[Re.MSG_USER_LOGIN=102]="MSG_USER_LOGIN",Re[Re.MSG_REPEAT_LOGIN_NOTICE=103]="MSG_REPEAT_LOGIN_NOTICE",Re[Re.MSG_REQUEST_ROOM_ADDR=104]="MSG_REQUEST_ROOM_ADDR",Re[Re.MSG_ENTER_ROOM=105]="MSG_ENTER_ROOM",Re[Re.MSG_PLAYER_OPR=106]="MSG_PLAYER_OPR",Re[Re.MSG_PLAYER_STATE=107]="MSG_PLAYER_STATE",Re[Re.MSG_GEN_FOOD=108]="MSG_GEN_FOOD",Re[Re.MSG_UPDATE_ROLE=109]="MSG_UPDATE_ROLE",Re[Re.MSG_NOTICE_ENTER=110]="MSG_NOTICE_ENTER",Re[Re.MSG_BATTLE_END=111]="MSG_BATTLE_END",Re[Re.MSG_EAT_FOOD=112]="MSG_EAT_FOOD",Re[Re.MSG_PLAYER_COLLISION=113]="MSG_PLAYER_COLLISION",Re[Re.MSG_REQUEST_SERVER_TIME=114]="MSG_REQUEST_SERVER_TIME",Re[Re.MSG_REQUEST_ROOM_DATA=115]="MSG_REQUEST_ROOM_DATA",Re[Re.MSG_INVITE_LIST=116]="MSG_INVITE_LIST",Re[Re.MSG_REQUEST_INFO=117]="MSG_REQUEST_INFO",Re[Re.MSG_SHOP_BUY=118]="MSG_SHOP_BUY",Re[Re.MSG_PUSH=119]="MSG_PUSH",Re[Re.MSG_QUERY_TOKEN=120]="MSG_QUERY_TOKEN",Re[Re.MSG_PLAYER_OUT=121]="MSG_PLAYER_OUT",Re[Re.MSG_CHARGE=122]="MSG_CHARGE",Re[Re.MSG_WITHDRAW=123]="MSG_WITHDRAW"))(s=_r.MessageType||(_r.MessageType={}));let Hr=class Hr extends m.Message{constructor(o){super();Xe(this,ur,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,ur)),!Array.isArray(o)&&typeof o=="object"&&(this.msghead=o.msghead,"msgbody"in o&&o.msgbody!=null&&(this.msgbody=o.msgbody))}get msghead(){return m.Message.getWrapperField(this,c,1)}set msghead(o){m.Message.setWrapperField(this,1,o)}get has_msghead(){return m.Message.getField(this,1)!=null}get msgbody(){return m.Message.getFieldWithDefault(this,2,new Uint8Array(0))}set msgbody(o){m.Message.setField(this,2,o)}get has_msgbody(){return m.Message.getField(this,2)!=null}static fromObject(o){let l=new Hr({msghead:c.fromObject(o.msghead)});return o.msgbody!=null&&(l.msgbody=o.msgbody),l}toObject(){let o={};return this.msghead!=null&&(o.msghead=this.msghead.toObject()),this.msgbody!=null&&(o.msgbody=this.msgbody),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_msghead&&l.writeMessage(1,this.msghead,()=>this.msghead.serialize(l)),this.has_msgbody&&this.msgbody.length&&l.writeBytes(2,this.msgbody),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new Hr;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(g.msghead,()=>g.msghead=c.deserialize(l));break;case 2:g.msgbody=l.readBytes();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return Hr.deserialize(o)}};ur=new WeakMap;let a=Hr;_r.CMsgBase=Hr;let gr=class gr extends m.Message{constructor(o){super();Xe(this,Ot,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Ot)),!Array.isArray(o)&&typeof o=="object"&&(this.msgtype=o.msgtype,this.msgcode=o.msgcode,"roleId"in o&&o.roleId!=null&&(this.roleId=o.roleId))}get msgtype(){return m.Message.getField(this,1)}set msgtype(o){m.Message.setField(this,1,o)}get has_msgtype(){return m.Message.getField(this,1)!=null}get msgcode(){return m.Message.getField(this,2)}set msgcode(o){m.Message.setField(this,2,o)}get has_msgcode(){return m.Message.getField(this,2)!=null}get roleId(){return m.Message.getFieldWithDefault(this,3,"")}set roleId(o){m.Message.setField(this,3,o)}get has_roleId(){return m.Message.getField(this,3)!=null}static fromObject(o){let l=new gr({msgtype:o.msgtype,msgcode:o.msgcode});return o.roleId!=null&&(l.roleId=o.roleId),l}toObject(){let o={};return this.msgtype!=null&&(o.msgtype=this.msgtype),this.msgcode!=null&&(o.msgcode=this.msgcode),this.roleId!=null&&(o.roleId=this.roleId),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_msgtype&&l.writeInt32(1,this.msgtype),this.has_msgcode&&l.writeInt32(2,this.msgcode),this.has_roleId&&this.roleId.length&&l.writeString(3,this.roleId),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new gr;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.msgtype=l.readInt32();break;case 2:g.msgcode=l.readInt32();break;case 3:g.roleId=l.readString();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return gr.deserialize(o)}};Ot=new WeakMap;let c=gr;_r.CMsgHead=gr;let Pt=class Pt extends m.Message{constructor(o){super();Xe(this,it,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,it)),!Array.isArray(o)&&typeof o=="object"&&(this.hallId=o.hallId)}get hallId(){return m.Message.getField(this,1)}set hallId(o){m.Message.setField(this,1,o)}get has_hallId(){return m.Message.getField(this,1)!=null}static fromObject(o){return new Pt({hallId:o.hallId})}toObject(){let o={};return this.hallId!=null&&(o.hallId=this.hallId),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_hallId&&this.hallId.length&&l.writeString(1,this.hallId),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new Pt;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.hallId=l.readString();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return Pt.deserialize(o)}};it=new WeakMap;let u=Pt;_r.SS_REG_HALL=Pt;let Qr=class Qr extends m.Message{constructor(o){super();Xe(this,Xt,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[12,19,21],Ye(this,Xt)),!Array.isArray(o)&&typeof o=="object"&&(this.roleId=o.roleId,"userName"in o&&o.userName!=null&&(this.userName=o.userName),"icon"in o&&o.icon!=null&&(this.icon=o.icon),"createTime"in o&&o.createTime!=null&&(this.createTime=o.createTime),"score"in o&&o.score!=null&&(this.score=o.score),"country"in o&&o.country!=null&&(this.country=o.country),"club"in o&&o.club!=null&&(this.club=o.club),"code"in o&&o.code!=null&&(this.code=o.code),"walletAddr"in o&&o.walletAddr!=null&&(this.walletAddr=o.walletAddr),"snakeId"in o&&o.snakeId!=null&&(this.snakeId=o.snakeId),"kills"in o&&o.kills!=null&&(this.kills=o.kills),this.items=o.items,"invite"in o&&o.invite!=null&&(this.invite=o.invite),"source"in o&&o.source!=null&&(this.source=o.source),"num"in o&&o.num!=null&&(this.num=o.num),"stage"in o&&o.stage!=null&&(this.stage=o.stage),"invNum"in o&&o.invNum!=null&&(this.invNum=o.invNum),"exp"in o&&o.exp!=null&&(this.exp=o.exp),this.reward=o.reward,"ticketValue"in o&&o.ticketValue!=null&&(this.ticketValue=o.ticketValue),this.coins=o.coins,"lv"in o&&o.lv!=null&&(this.lv=o.lv),"ticketId"in o&&o.ticketId!=null&&(this.ticketId=o.ticketId))}get roleId(){return m.Message.getField(this,1)}set roleId(o){m.Message.setField(this,1,o)}get has_roleId(){return m.Message.getField(this,1)!=null}get userName(){return m.Message.getFieldWithDefault(this,2,"")}set userName(o){m.Message.setField(this,2,o)}get has_userName(){return m.Message.getField(this,2)!=null}get icon(){return m.Message.getFieldWithDefault(this,3,"")}set icon(o){m.Message.setField(this,3,o)}get has_icon(){return m.Message.getField(this,3)!=null}get createTime(){return m.Message.getFieldWithDefault(this,4,0)}set createTime(o){m.Message.setField(this,4,o)}get has_createTime(){return m.Message.getField(this,4)!=null}get score(){return m.Message.getFieldWithDefault(this,5,0)}set score(o){m.Message.setField(this,5,o)}get has_score(){return m.Message.getField(this,5)!=null}get country(){return m.Message.getFieldWithDefault(this,6,0)}set country(o){m.Message.setField(this,6,o)}get has_country(){return m.Message.getField(this,6)!=null}get club(){return m.Message.getFieldWithDefault(this,7,"")}set club(o){m.Message.setField(this,7,o)}get has_club(){return m.Message.getField(this,7)!=null}get code(){return m.Message.getFieldWithDefault(this,8,"")}set code(o){m.Message.setField(this,8,o)}get has_code(){return m.Message.getField(this,8)!=null}get walletAddr(){return m.Message.getFieldWithDefault(this,9,"")}set walletAddr(o){m.Message.setField(this,9,o)}get has_walletAddr(){return m.Message.getField(this,9)!=null}get snakeId(){return m.Message.getFieldWithDefault(this,10,0)}set snakeId(o){m.Message.setField(this,10,o)}get has_snakeId(){return m.Message.getField(this,10)!=null}get kills(){return m.Message.getFieldWithDefault(this,11,0)}set kills(o){m.Message.setField(this,11,o)}get has_kills(){return m.Message.getField(this,11)!=null}get items(){return m.Message.getRepeatedWrapperField(this,f,12)}set items(o){m.Message.setRepeatedWrapperField(this,12,o)}get invite(){return m.Message.getFieldWithDefault(this,13,"")}set invite(o){m.Message.setField(this,13,o)}get has_invite(){return m.Message.getField(this,13)!=null}get source(){return m.Message.getFieldWithDefault(this,14,"")}set source(o){m.Message.setField(this,14,o)}get has_source(){return m.Message.getField(this,14)!=null}get num(){return m.Message.getFieldWithDefault(this,15,0)}set num(o){m.Message.setField(this,15,o)}get has_num(){return m.Message.getField(this,15)!=null}get stage(){return m.Message.getFieldWithDefault(this,16,0)}set stage(o){m.Message.setField(this,16,o)}get has_stage(){return m.Message.getField(this,16)!=null}get invNum(){return m.Message.getFieldWithDefault(this,17,0)}set invNum(o){m.Message.setField(this,17,o)}get has_invNum(){return m.Message.getField(this,17)!=null}get exp(){return m.Message.getFieldWithDefault(this,18,0)}set exp(o){m.Message.setField(this,18,o)}get has_exp(){return m.Message.getField(this,18)!=null}get reward(){return m.Message.getFieldWithDefault(this,19,[])}set reward(o){m.Message.setField(this,19,o)}get ticketValue(){return m.Message.getFieldWithDefault(this,20,0)}set ticketValue(o){m.Message.setField(this,20,o)}get has_ticketValue(){return m.Message.getField(this,20)!=null}get coins(){return m.Message.getRepeatedWrapperField(this,f,21)}set coins(o){m.Message.setRepeatedWrapperField(this,21,o)}get lv(){return m.Message.getFieldWithDefault(this,22,0)}set lv(o){m.Message.setField(this,22,o)}get has_lv(){return m.Message.getField(this,22)!=null}get ticketId(){return m.Message.getFieldWithDefault(this,23,0)}set ticketId(o){m.Message.setField(this,23,o)}get has_ticketId(){return m.Message.getField(this,23)!=null}static fromObject(o){let l=new Qr({roleId:o.roleId,items:o.items.map(g=>f.fromObject(g)),reward:o.reward,coins:o.coins.map(g=>f.fromObject(g))});return o.userName!=null&&(l.userName=o.userName),o.icon!=null&&(l.icon=o.icon),o.createTime!=null&&(l.createTime=o.createTime),o.score!=null&&(l.score=o.score),o.country!=null&&(l.country=o.country),o.club!=null&&(l.club=o.club),o.code!=null&&(l.code=o.code),o.walletAddr!=null&&(l.walletAddr=o.walletAddr),o.snakeId!=null&&(l.snakeId=o.snakeId),o.kills!=null&&(l.kills=o.kills),o.invite!=null&&(l.invite=o.invite),o.source!=null&&(l.source=o.source),o.num!=null&&(l.num=o.num),o.stage!=null&&(l.stage=o.stage),o.invNum!=null&&(l.invNum=o.invNum),o.exp!=null&&(l.exp=o.exp),o.ticketValue!=null&&(l.ticketValue=o.ticketValue),o.lv!=null&&(l.lv=o.lv),o.ticketId!=null&&(l.ticketId=o.ticketId),l}toObject(){let o={reward:this.reward};return this.roleId!=null&&(o.roleId=this.roleId),this.userName!=null&&(o.userName=this.userName),this.icon!=null&&(o.icon=this.icon),this.createTime!=null&&(o.createTime=this.createTime),this.score!=null&&(o.score=this.score),this.country!=null&&(o.country=this.country),this.club!=null&&(o.club=this.club),this.code!=null&&(o.code=this.code),this.walletAddr!=null&&(o.walletAddr=this.walletAddr),this.snakeId!=null&&(o.snakeId=this.snakeId),this.kills!=null&&(o.kills=this.kills),this.items!=null&&(o.items=this.items.map(l=>l.toObject())),this.invite!=null&&(o.invite=this.invite),this.source!=null&&(o.source=this.source),this.num!=null&&(o.num=this.num),this.stage!=null&&(o.stage=this.stage),this.invNum!=null&&(o.invNum=this.invNum),this.exp!=null&&(o.exp=this.exp),this.ticketValue!=null&&(o.ticketValue=this.ticketValue),this.coins!=null&&(o.coins=this.coins.map(l=>l.toObject())),this.lv!=null&&(o.lv=this.lv),this.ticketId!=null&&(o.ticketId=this.ticketId),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_userName&&this.userName.length&&l.writeString(2,this.userName),this.has_icon&&this.icon.length&&l.writeString(3,this.icon),this.has_createTime&&l.writeInt64(4,this.createTime),this.has_score&&l.writeInt32(5,this.score),this.has_country&&l.writeInt32(6,this.country),this.has_club&&this.club.length&&l.writeString(7,this.club),this.has_code&&this.code.length&&l.writeString(8,this.code),this.has_walletAddr&&this.walletAddr.length&&l.writeString(9,this.walletAddr),this.has_snakeId&&l.writeInt32(10,this.snakeId),this.has_kills&&l.writeInt32(11,this.kills),this.items.length&&l.writeRepeatedMessage(12,this.items,g=>g.serialize(l)),this.has_invite&&this.invite.length&&l.writeString(13,this.invite),this.has_source&&this.source.length&&l.writeString(14,this.source),this.has_num&&l.writeInt32(15,this.num),this.has_stage&&l.writeInt32(16,this.stage),this.has_invNum&&l.writeInt32(17,this.invNum),this.has_exp&&l.writeInt32(18,this.exp),this.reward.length&&l.writeRepeatedString(19,this.reward),this.has_ticketValue&&l.writeDouble(20,this.ticketValue),this.coins.length&&l.writeRepeatedMessage(21,this.coins,g=>g.serialize(l)),this.has_lv&&l.writeInt32(22,this.lv),this.has_ticketId&&l.writeInt32(23,this.ticketId),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new Qr;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.roleId=l.readString();break;case 2:g.userName=l.readString();break;case 3:g.icon=l.readString();break;case 4:g.createTime=l.readInt64();break;case 5:g.score=l.readInt32();break;case 6:g.country=l.readInt32();break;case 7:g.club=l.readString();break;case 8:g.code=l.readString();break;case 9:g.walletAddr=l.readString();break;case 10:g.snakeId=l.readInt32();break;case 11:g.kills=l.readInt32();break;case 12:l.readMessage(g.items,()=>m.Message.addToRepeatedWrapperField(g,12,f.deserialize(l),f));break;case 13:g.invite=l.readString();break;case 14:g.source=l.readString();break;case 15:g.num=l.readInt32();break;case 16:g.stage=l.readInt32();break;case 17:g.invNum=l.readInt32();break;case 18:g.exp=l.readInt32();break;case 19:m.Message.addToRepeatedField(g,19,l.readString());break;case 20:g.ticketValue=l.readDouble();break;case 21:l.readMessage(g.coins,()=>m.Message.addToRepeatedWrapperField(g,21,f.deserialize(l),f));break;case 22:g.lv=l.readInt32();break;case 23:g.ticketId=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return Qr.deserialize(o)}};Xt=new WeakMap;let p=Qr;_r.RoleObject=Qr;let Hi=class Hi extends m.Message{constructor(o){super();Xe(this,vi,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,vi)),!Array.isArray(o)&&typeof o=="object"&&("itemId"in o&&o.itemId!=null&&(this.itemId=o.itemId),"num"in o&&o.num!=null&&(this.num=o.num),"chainId"in o&&o.chainId!=null&&(this.chainId=o.chainId))}get itemId(){return m.Message.getFieldWithDefault(this,1,0)}set itemId(o){m.Message.setField(this,1,o)}get has_itemId(){return m.Message.getField(this,1)!=null}get num(){return m.Message.getFieldWithDefault(this,2,0)}set num(o){m.Message.setField(this,2,o)}get has_num(){return m.Message.getField(this,2)!=null}get chainId(){return m.Message.getFieldWithDefault(this,3,0)}set chainId(o){m.Message.setField(this,3,o)}get has_chainId(){return m.Message.getField(this,3)!=null}static fromObject(o){let l=new Hi({});return o.itemId!=null&&(l.itemId=o.itemId),o.num!=null&&(l.num=o.num),o.chainId!=null&&(l.chainId=o.chainId),l}toObject(){let o={};return this.itemId!=null&&(o.itemId=this.itemId),this.num!=null&&(o.num=this.num),this.chainId!=null&&(o.chainId=this.chainId),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_itemId&&l.writeInt32(1,this.itemId),this.has_num&&l.writeDouble(2,this.num),this.has_chainId&&l.writeInt32(3,this.chainId),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new Hi;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.itemId=l.readInt32();break;case 2:g.num=l.readDouble();break;case 3:g.chainId=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return Hi.deserialize(o)}};vi=new WeakMap;let f=Hi;_r.ItemObject=Hi;let k=class k extends m.Message{constructor(o){super();Xe(this,Bn,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Bn)),!Array.isArray(o)&&typeof o=="object"&&(this.icon=o.icon,this.userName=o.userName,this.country=o.country,"walletAddr"in o&&o.walletAddr!=null&&(this.walletAddr=o.walletAddr),"invite"in o&&o.invite!=null&&(this.invite=o.invite),"source"in o&&o.source!=null&&(this.source=o.source))}get icon(){return m.Message.getField(this,1)}set icon(o){m.Message.setField(this,1,o)}get has_icon(){return m.Message.getField(this,1)!=null}get userName(){return m.Message.getField(this,2)}set userName(o){m.Message.setField(this,2,o)}get has_userName(){return m.Message.getField(this,2)!=null}get country(){return m.Message.getField(this,3)}set country(o){m.Message.setField(this,3,o)}get has_country(){return m.Message.getField(this,3)!=null}get walletAddr(){return m.Message.getFieldWithDefault(this,4,"")}set walletAddr(o){m.Message.setField(this,4,o)}get has_walletAddr(){return m.Message.getField(this,4)!=null}get invite(){return m.Message.getFieldWithDefault(this,5,"")}set invite(o){m.Message.setField(this,5,o)}get has_invite(){return m.Message.getField(this,5)!=null}get source(){return m.Message.getFieldWithDefault(this,6,"")}set source(o){m.Message.setField(this,6,o)}get has_source(){return m.Message.getField(this,6)!=null}static fromObject(o){let l=new k({icon:o.icon,userName:o.userName,country:o.country});return o.walletAddr!=null&&(l.walletAddr=o.walletAddr),o.invite!=null&&(l.invite=o.invite),o.source!=null&&(l.source=o.source),l}toObject(){let o={};return this.icon!=null&&(o.icon=this.icon),this.userName!=null&&(o.userName=this.userName),this.country!=null&&(o.country=this.country),this.walletAddr!=null&&(o.walletAddr=this.walletAddr),this.invite!=null&&(o.invite=this.invite),this.source!=null&&(o.source=this.source),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_icon&&this.icon.length&&l.writeString(1,this.icon),this.has_userName&&this.userName.length&&l.writeString(2,this.userName),this.has_country&&l.writeInt32(3,this.country),this.has_walletAddr&&this.walletAddr.length&&l.writeString(4,this.walletAddr),this.has_invite&&this.invite.length&&l.writeString(5,this.invite),this.has_source&&this.source.length&&l.writeString(6,this.source),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new k;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.icon=l.readString();break;case 2:g.userName=l.readString();break;case 3:g.country=l.readInt32();break;case 4:g.walletAddr=l.readString();break;case 5:g.invite=l.readString();break;case 6:g.source=l.readString();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return k.deserialize(o)}};Bn=new WeakMap;let d=k;_r.CS_USER_REGISTER=k;let A=class A extends m.Message{constructor(o){super();Xe(this,y,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,y)),!Array.isArray(o)&&typeof o=="object"&&(this.roleInfo=o.roleInfo)}get roleInfo(){return m.Message.getWrapperField(this,p,1)}set roleInfo(o){m.Message.setWrapperField(this,1,o)}get has_roleInfo(){return m.Message.getField(this,1)!=null}static fromObject(o){return new A({roleInfo:p.fromObject(o.roleInfo)})}toObject(){let o={};return this.roleInfo!=null&&(o.roleInfo=this.roleInfo.toObject()),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_roleInfo&&l.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(l)),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new A;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(g.roleInfo,()=>g.roleInfo=p.deserialize(l));break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return A.deserialize(o)}};y=new WeakMap;let h=A;_r.SC_USER_REGISTER=A;let B=class B extends m.Message{constructor(o){super();Xe(this,R,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,R)),!Array.isArray(o)&&typeof o=="object"&&(this.roleId=o.roleId,"randomHex"in o&&o.randomHex!=null&&(this.randomHex=o.randomHex),"time"in o&&o.time!=null&&(this.time=o.time),"r"in o&&o.r!=null&&(this.r=o.r),"s"in o&&o.s!=null&&(this.s=o.s),"v"in o&&o.v!=null&&(this.v=o.v))}get roleId(){return m.Message.getField(this,1)}set roleId(o){m.Message.setField(this,1,o)}get has_roleId(){return m.Message.getField(this,1)!=null}get randomHex(){return m.Message.getFieldWithDefault(this,2,"")}set randomHex(o){m.Message.setField(this,2,o)}get has_randomHex(){return m.Message.getField(this,2)!=null}get time(){return m.Message.getFieldWithDefault(this,3,0)}set time(o){m.Message.setField(this,3,o)}get has_time(){return m.Message.getField(this,3)!=null}get r(){return m.Message.getFieldWithDefault(this,4,"")}set r(o){m.Message.setField(this,4,o)}get has_r(){return m.Message.getField(this,4)!=null}get s(){return m.Message.getFieldWithDefault(this,5,"")}set s(o){m.Message.setField(this,5,o)}get has_s(){return m.Message.getField(this,5)!=null}get v(){return m.Message.getFieldWithDefault(this,6,"")}set v(o){m.Message.setField(this,6,o)}get has_v(){return m.Message.getField(this,6)!=null}static fromObject(o){let l=new B({roleId:o.roleId});return o.randomHex!=null&&(l.randomHex=o.randomHex),o.time!=null&&(l.time=o.time),o.r!=null&&(l.r=o.r),o.s!=null&&(l.s=o.s),o.v!=null&&(l.v=o.v),l}toObject(){let o={};return this.roleId!=null&&(o.roleId=this.roleId),this.randomHex!=null&&(o.randomHex=this.randomHex),this.time!=null&&(o.time=this.time),this.r!=null&&(o.r=this.r),this.s!=null&&(o.s=this.s),this.v!=null&&(o.v=this.v),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_randomHex&&this.randomHex.length&&l.writeString(2,this.randomHex),this.has_time&&l.writeInt64(3,this.time),this.has_r&&this.r.length&&l.writeString(4,this.r),this.has_s&&this.s.length&&l.writeString(5,this.s),this.has_v&&this.v.length&&l.writeString(6,this.v),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new B;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.roleId=l.readString();break;case 2:g.randomHex=l.readString();break;case 3:g.time=l.readInt64();break;case 4:g.r=l.readString();break;case 5:g.s=l.readString();break;case 6:g.v=l.readString();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return B.deserialize(o)}};R=new WeakMap;let b=B;_r.CS_USER_LOGIN=B;let $=class $ extends m.Message{constructor(o){super();Xe(this,I,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,I)),!Array.isArray(o)&&typeof o=="object"&&("roleInfo"in o&&o.roleInfo!=null&&(this.roleInfo=o.roleInfo),"loginToken"in o&&o.loginToken!=null&&(this.loginToken=o.loginToken))}get roleInfo(){return m.Message.getWrapperField(this,p,1)}set roleInfo(o){m.Message.setWrapperField(this,1,o)}get has_roleInfo(){return m.Message.getField(this,1)!=null}get loginToken(){return m.Message.getFieldWithDefault(this,2,"")}set loginToken(o){m.Message.setField(this,2,o)}get has_loginToken(){return m.Message.getField(this,2)!=null}static fromObject(o){let l=new $({});return o.roleInfo!=null&&(l.roleInfo=p.fromObject(o.roleInfo)),o.loginToken!=null&&(l.loginToken=o.loginToken),l}toObject(){let o={};return this.roleInfo!=null&&(o.roleInfo=this.roleInfo.toObject()),this.loginToken!=null&&(o.loginToken=this.loginToken),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_roleInfo&&l.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(l)),this.has_loginToken&&this.loginToken.length&&l.writeString(2,this.loginToken),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new $;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(g.roleInfo,()=>g.roleInfo=p.deserialize(l));break;case 2:g.loginToken=l.readString();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return $.deserialize(o)}};I=new WeakMap;let w=$;_r.SC_USER_LOGIN=$;let J=class J extends m.Message{constructor(o){super();Xe(this,K,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,K)),!Array.isArray(o)&&typeof o=="object"&&(this.type=o.type)}get type(){return m.Message.getField(this,1)}set type(o){m.Message.setField(this,1,o)}get has_type(){return m.Message.getField(this,1)!=null}static fromObject(o){return new J({type:o.type})}toObject(){let o={};return this.type!=null&&(o.type=this.type),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_type&&l.writeInt32(1,this.type),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new J;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.type=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return J.deserialize(o)}};K=new WeakMap;let v=J;_r.CS_REQUEST_ROOM_ADDR=J;let Ae=class Ae extends m.Message{constructor(o){super();Xe(this,ce,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,ce)),!Array.isArray(o)&&typeof o=="object"&&(this.addr=o.addr,"roleInfo"in o&&o.roleInfo!=null&&(this.roleInfo=o.roleInfo))}get addr(){return m.Message.getField(this,1)}set addr(o){m.Message.setField(this,1,o)}get has_addr(){return m.Message.getField(this,1)!=null}get roleInfo(){return m.Message.getWrapperField(this,p,2)}set roleInfo(o){m.Message.setWrapperField(this,2,o)}get has_roleInfo(){return m.Message.getField(this,2)!=null}static fromObject(o){let l=new Ae({addr:o.addr});return o.roleInfo!=null&&(l.roleInfo=p.fromObject(o.roleInfo)),l}toObject(){let o={};return this.addr!=null&&(o.addr=this.addr),this.roleInfo!=null&&(o.roleInfo=this.roleInfo.toObject()),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_addr&&this.addr.length&&l.writeString(1,this.addr),this.has_roleInfo&&l.writeMessage(2,this.roleInfo,()=>this.roleInfo.serialize(l)),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new Ae;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.addr=l.readString();break;case 2:l.readMessage(g.roleInfo,()=>g.roleInfo=p.deserialize(l));break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return Ae.deserialize(o)}};ce=new WeakMap;let _=Ae;_r.SC_REQUEST_ROOM_ADDR=Ae;let he=class he extends m.Message{constructor(o){super();Xe(this,se,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,se)),!Array.isArray(o)&&typeof o=="object"&&("tag"in o&&o.tag!=null&&(this.tag=o.tag),"roleId"in o&&o.roleId!=null&&(this.roleId=o.roleId))}get tag(){return m.Message.getFieldWithDefault(this,1,"")}set tag(o){m.Message.setField(this,1,o)}get has_tag(){return m.Message.getField(this,1)!=null}get roleId(){return m.Message.getFieldWithDefault(this,2,"")}set roleId(o){m.Message.setField(this,2,o)}get has_roleId(){return m.Message.getField(this,2)!=null}static fromObject(o){let l=new he({});return o.tag!=null&&(l.tag=o.tag),o.roleId!=null&&(l.roleId=o.roleId),l}toObject(){let o={};return this.tag!=null&&(o.tag=this.tag),this.roleId!=null&&(o.roleId=this.roleId),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_tag&&this.tag.length&&l.writeString(1,this.tag),this.has_roleId&&this.roleId.length&&l.writeString(2,this.roleId),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new he;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.tag=l.readString();break;case 2:g.roleId=l.readString();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return he.deserialize(o)}};se=new WeakMap;let T=he;_r.CS_ENTER_ROOM=he;let te=class te extends m.Message{constructor(o){super();Xe(this,We,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[1,2],Ye(this,We)),!Array.isArray(o)&&typeof o=="object"&&(this.food=o.food,this.players=o.players)}get food(){return m.Message.getRepeatedWrapperField(this,D,1)}set food(o){m.Message.setRepeatedWrapperField(this,1,o)}get players(){return m.Message.getRepeatedWrapperField(this,F,2)}set players(o){m.Message.setRepeatedWrapperField(this,2,o)}static fromObject(o){return new te({food:o.food.map(g=>D.fromObject(g)),players:o.players.map(g=>F.fromObject(g))})}toObject(){let o={};return this.food!=null&&(o.food=this.food.map(l=>l.toObject())),this.players!=null&&(o.players=this.players.map(l=>l.toObject())),o}serialize(o){let l=o||new m.BinaryWriter;if(this.food.length&&l.writeRepeatedMessage(1,this.food,g=>g.serialize(l)),this.players.length&&l.writeRepeatedMessage(2,this.players,g=>g.serialize(l)),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new te;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(g.food,()=>m.Message.addToRepeatedWrapperField(g,1,D.deserialize(l),D));break;case 2:l.readMessage(g.players,()=>m.Message.addToRepeatedWrapperField(g,2,F.deserialize(l),F));break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return te.deserialize(o)}};We=new WeakMap;let M=te;_r.SC_ENTER_ROOM=te;let Je=class Je extends m.Message{constructor(o){super();Xe(this,ot,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,ot)),!Array.isArray(o)&&typeof o=="object"&&("unkey"in o&&o.unkey!=null&&(this.unkey=o.unkey),"itemId"in o&&o.itemId!=null&&(this.itemId=o.itemId),"loc"in o&&o.loc!=null&&(this.loc=o.loc))}get unkey(){return m.Message.getFieldWithDefault(this,1,"")}set unkey(o){m.Message.setField(this,1,o)}get has_unkey(){return m.Message.getField(this,1)!=null}get itemId(){return m.Message.getFieldWithDefault(this,2,0)}set itemId(o){m.Message.setField(this,2,o)}get has_itemId(){return m.Message.getField(this,2)!=null}get loc(){return m.Message.getWrapperField(this,W,3)}set loc(o){m.Message.setWrapperField(this,3,o)}get has_loc(){return m.Message.getField(this,3)!=null}static fromObject(o){let l=new Je({});return o.unkey!=null&&(l.unkey=o.unkey),o.itemId!=null&&(l.itemId=o.itemId),o.loc!=null&&(l.loc=W.fromObject(o.loc)),l}toObject(){let o={};return this.unkey!=null&&(o.unkey=this.unkey),this.itemId!=null&&(o.itemId=this.itemId),this.loc!=null&&(o.loc=this.loc.toObject()),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_unkey&&this.unkey.length&&l.writeString(1,this.unkey),this.has_itemId&&l.writeInt32(2,this.itemId),this.has_loc&&l.writeMessage(3,this.loc,()=>this.loc.serialize(l)),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new Je;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.unkey=l.readString();break;case 2:g.itemId=l.readInt32();break;case 3:l.readMessage(g.loc,()=>g.loc=W.deserialize(l));break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return Je.deserialize(o)}};ot=new WeakMap;let D=Je;_r.FoodObject=Je;let _t=class _t extends m.Message{constructor(o){super();Xe(this,pt,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[5,10,13],Ye(this,pt)),!Array.isArray(o)&&typeof o=="object"&&("roleId"in o&&o.roleId!=null&&(this.roleId=o.roleId),"userName"in o&&o.userName!=null&&(this.userName=o.userName),"snakeId"in o&&o.snakeId!=null&&(this.snakeId=o.snakeId),"speed"in o&&o.speed!=null&&(this.speed=o.speed),this.snake=o.snake,"kills"in o&&o.kills!=null&&(this.kills=o.kills),"state"in o&&o.state!=null&&(this.state=o.state),"score"in o&&o.score!=null&&(this.score=o.score),"wdTime"in o&&o.wdTime!=null&&(this.wdTime=o.wdTime),this.eatenIds=o.eatenIds,"dieTime"in o&&o.dieTime!=null&&(this.dieTime=o.dieTime),"revive"in o&&o.revive!=null&&(this.revive=o.revive),this.food=o.food,"direction"in o&&o.direction!=null&&(this.direction=o.direction),"frame"in o&&o.frame!=null&&(this.frame=o.frame),"oprTime"in o&&o.oprTime!=null&&(this.oprTime=o.oprTime),"aimDir"in o&&o.aimDir!=null&&(this.aimDir=o.aimDir),"length"in o&&o.length!=null&&(this.length=o.length),"enterTime"in o&&o.enterTime!=null&&(this.enterTime=o.enterTime),"exp"in o&&o.exp!=null&&(this.exp=o.exp),"result"in o&&o.result!=null&&(this.result=o.result),"oprIndex"in o&&o.oprIndex!=null&&(this.oprIndex=o.oprIndex))}get roleId(){return m.Message.getFieldWithDefault(this,1,"")}set roleId(o){m.Message.setField(this,1,o)}get has_roleId(){return m.Message.getField(this,1)!=null}get userName(){return m.Message.getFieldWithDefault(this,2,"")}set userName(o){m.Message.setField(this,2,o)}get has_userName(){return m.Message.getField(this,2)!=null}get snakeId(){return m.Message.getFieldWithDefault(this,3,0)}set snakeId(o){m.Message.setField(this,3,o)}get has_snakeId(){return m.Message.getField(this,3)!=null}get speed(){return m.Message.getFieldWithDefault(this,4,0)}set speed(o){m.Message.setField(this,4,o)}get has_speed(){return m.Message.getField(this,4)!=null}get snake(){return m.Message.getRepeatedWrapperField(this,O,5)}set snake(o){m.Message.setRepeatedWrapperField(this,5,o)}get kills(){return m.Message.getFieldWithDefault(this,6,0)}set kills(o){m.Message.setField(this,6,o)}get has_kills(){return m.Message.getField(this,6)!=null}get state(){return m.Message.getFieldWithDefault(this,7,!1)}set state(o){m.Message.setField(this,7,o)}get has_state(){return m.Message.getField(this,7)!=null}get score(){return m.Message.getFieldWithDefault(this,8,0)}set score(o){m.Message.setField(this,8,o)}get has_score(){return m.Message.getField(this,8)!=null}get wdTime(){return m.Message.getFieldWithDefault(this,9,0)}set wdTime(o){m.Message.setField(this,9,o)}get has_wdTime(){return m.Message.getField(this,9)!=null}get eatenIds(){return m.Message.getFieldWithDefault(this,10,[])}set eatenIds(o){m.Message.setField(this,10,o)}get dieTime(){return m.Message.getFieldWithDefault(this,11,0)}set dieTime(o){m.Message.setField(this,11,o)}get has_dieTime(){return m.Message.getField(this,11)!=null}get revive(){return m.Message.getFieldWithDefault(this,12,0)}set revive(o){m.Message.setField(this,12,o)}get has_revive(){return m.Message.getField(this,12)!=null}get food(){return m.Message.getRepeatedWrapperField(this,D,13)}set food(o){m.Message.setRepeatedWrapperField(this,13,o)}get direction(){return m.Message.getFieldWithDefault(this,14,0)}set direction(o){m.Message.setField(this,14,o)}get has_direction(){return m.Message.getField(this,14)!=null}get frame(){return m.Message.getFieldWithDefault(this,15,0)}set frame(o){m.Message.setField(this,15,o)}get has_frame(){return m.Message.getField(this,15)!=null}get oprTime(){return m.Message.getFieldWithDefault(this,16,0)}set oprTime(o){m.Message.setField(this,16,o)}get has_oprTime(){return m.Message.getField(this,16)!=null}get aimDir(){return m.Message.getFieldWithDefault(this,17,0)}set aimDir(o){m.Message.setField(this,17,o)}get has_aimDir(){return m.Message.getField(this,17)!=null}get length(){return m.Message.getFieldWithDefault(this,18,0)}set length(o){m.Message.setField(this,18,o)}get has_length(){return m.Message.getField(this,18)!=null}get enterTime(){return m.Message.getFieldWithDefault(this,19,0)}set enterTime(o){m.Message.setField(this,19,o)}get has_enterTime(){return m.Message.getField(this,19)!=null}get exp(){return m.Message.getFieldWithDefault(this,20,0)}set exp(o){m.Message.setField(this,20,o)}get has_exp(){return m.Message.getField(this,20)!=null}get result(){return m.Message.getWrapperField(this,a,21)}set result(o){m.Message.setWrapperField(this,21,o)}get has_result(){return m.Message.getField(this,21)!=null}get oprIndex(){return m.Message.getFieldWithDefault(this,22,0)}set oprIndex(o){m.Message.setField(this,22,o)}get has_oprIndex(){return m.Message.getField(this,22)!=null}static fromObject(o){let l=new _t({snake:o.snake.map(g=>O.fromObject(g)),eatenIds:o.eatenIds,food:o.food.map(g=>D.fromObject(g))});return o.roleId!=null&&(l.roleId=o.roleId),o.userName!=null&&(l.userName=o.userName),o.snakeId!=null&&(l.snakeId=o.snakeId),o.speed!=null&&(l.speed=o.speed),o.kills!=null&&(l.kills=o.kills),o.state!=null&&(l.state=o.state),o.score!=null&&(l.score=o.score),o.wdTime!=null&&(l.wdTime=o.wdTime),o.dieTime!=null&&(l.dieTime=o.dieTime),o.revive!=null&&(l.revive=o.revive),o.direction!=null&&(l.direction=o.direction),o.frame!=null&&(l.frame=o.frame),o.oprTime!=null&&(l.oprTime=o.oprTime),o.aimDir!=null&&(l.aimDir=o.aimDir),o.length!=null&&(l.length=o.length),o.enterTime!=null&&(l.enterTime=o.enterTime),o.exp!=null&&(l.exp=o.exp),o.result!=null&&(l.result=a.fromObject(o.result)),o.oprIndex!=null&&(l.oprIndex=o.oprIndex),l}toObject(){let o={eatenIds:this.eatenIds};return this.roleId!=null&&(o.roleId=this.roleId),this.userName!=null&&(o.userName=this.userName),this.snakeId!=null&&(o.snakeId=this.snakeId),this.speed!=null&&(o.speed=this.speed),this.snake!=null&&(o.snake=this.snake.map(l=>l.toObject())),this.kills!=null&&(o.kills=this.kills),this.state!=null&&(o.state=this.state),this.score!=null&&(o.score=this.score),this.wdTime!=null&&(o.wdTime=this.wdTime),this.dieTime!=null&&(o.dieTime=this.dieTime),this.revive!=null&&(o.revive=this.revive),this.food!=null&&(o.food=this.food.map(l=>l.toObject())),this.direction!=null&&(o.direction=this.direction),this.frame!=null&&(o.frame=this.frame),this.oprTime!=null&&(o.oprTime=this.oprTime),this.aimDir!=null&&(o.aimDir=this.aimDir),this.length!=null&&(o.length=this.length),this.enterTime!=null&&(o.enterTime=this.enterTime),this.exp!=null&&(o.exp=this.exp),this.result!=null&&(o.result=this.result.toObject()),this.oprIndex!=null&&(o.oprIndex=this.oprIndex),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_userName&&this.userName.length&&l.writeString(2,this.userName),this.has_snakeId&&l.writeInt32(3,this.snakeId),this.has_speed&&l.writeFloat(4,this.speed),this.snake.length&&l.writeRepeatedMessage(5,this.snake,g=>g.serialize(l)),this.has_kills&&l.writeInt32(6,this.kills),this.has_state&&l.writeBool(7,this.state),this.has_score&&l.writeInt32(8,this.score),this.has_wdTime&&l.writeInt64(9,this.wdTime),this.eatenIds.length&&l.writeRepeatedString(10,this.eatenIds),this.has_dieTime&&l.writeInt64(11,this.dieTime),this.has_revive&&l.writeInt32(12,this.revive),this.food.length&&l.writeRepeatedMessage(13,this.food,g=>g.serialize(l)),this.has_direction&&l.writeFloat(14,this.direction),this.has_frame&&l.writeInt32(15,this.frame),this.has_oprTime&&l.writeInt64(16,this.oprTime),this.has_aimDir&&l.writeFloat(17,this.aimDir),this.has_length&&l.writeInt32(18,this.length),this.has_enterTime&&l.writeInt64(19,this.enterTime),this.has_exp&&l.writeInt32(20,this.exp),this.has_result&&l.writeMessage(21,this.result,()=>this.result.serialize(l)),this.has_oprIndex&&l.writeInt32(22,this.oprIndex),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new _t;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.roleId=l.readString();break;case 2:g.userName=l.readString();break;case 3:g.snakeId=l.readInt32();break;case 4:g.speed=l.readFloat();break;case 5:l.readMessage(g.snake,()=>m.Message.addToRepeatedWrapperField(g,5,O.deserialize(l),O));break;case 6:g.kills=l.readInt32();break;case 7:g.state=l.readBool();break;case 8:g.score=l.readInt32();break;case 9:g.wdTime=l.readInt64();break;case 10:m.Message.addToRepeatedField(g,10,l.readString());break;case 11:g.dieTime=l.readInt64();break;case 12:g.revive=l.readInt32();break;case 13:l.readMessage(g.food,()=>m.Message.addToRepeatedWrapperField(g,13,D.deserialize(l),D));break;case 14:g.direction=l.readFloat();break;case 15:g.frame=l.readInt32();break;case 16:g.oprTime=l.readInt64();break;case 17:g.aimDir=l.readFloat();break;case 18:g.length=l.readInt32();break;case 19:g.enterTime=l.readInt64();break;case 20:g.exp=l.readInt32();break;case 21:l.readMessage(g.result,()=>g.result=a.deserialize(l));break;case 22:g.oprIndex=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return _t.deserialize(o)}};pt=new WeakMap;let F=_t;_r.PlayerObject=_t;let er=class er extends m.Message{constructor(o){super();Xe(this,zr,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,zr)),!Array.isArray(o)&&typeof o=="object"&&"loc"in o&&o.loc!=null&&(this.loc=o.loc)}get loc(){return m.Message.getWrapperField(this,W,2)}set loc(o){m.Message.setWrapperField(this,2,o)}get has_loc(){return m.Message.getField(this,2)!=null}static fromObject(o){let l=new er({});return o.loc!=null&&(l.loc=W.fromObject(o.loc)),l}toObject(){let o={};return this.loc!=null&&(o.loc=this.loc.toObject()),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_loc&&l.writeMessage(2,this.loc,()=>this.loc.serialize(l)),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new er;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 2:l.readMessage(g.loc,()=>g.loc=W.deserialize(l));break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return er.deserialize(o)}};zr=new WeakMap;let O=er;_r.SnakeObject=er;let fn=class fn extends m.Message{constructor(o){super();Xe(this,vr,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,vr)),!Array.isArray(o)&&typeof o=="object"&&("x"in o&&o.x!=null&&(this.x=o.x),"y"in o&&o.y!=null&&(this.y=o.y))}get x(){return m.Message.getFieldWithDefault(this,1,0)}set x(o){m.Message.setField(this,1,o)}get has_x(){return m.Message.getField(this,1)!=null}get y(){return m.Message.getFieldWithDefault(this,2,0)}set y(o){m.Message.setField(this,2,o)}get has_y(){return m.Message.getField(this,2)!=null}static fromObject(o){let l=new fn({});return o.x!=null&&(l.x=o.x),o.y!=null&&(l.y=o.y),l}toObject(){let o={};return this.x!=null&&(o.x=this.x),this.y!=null&&(o.y=this.y),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_x&&l.writeDouble(1,this.x),this.has_y&&l.writeDouble(2,this.y),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new fn;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.x=l.readDouble();break;case 2:g.y=l.readDouble();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return fn.deserialize(o)}};vr=new WeakMap;let W=fn;_r.PointObject=fn;let wi=class wi extends m.Message{constructor(o){super();Xe(this,dn,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[9],Ye(this,dn)),!Array.isArray(o)&&typeof o=="object"&&("roleId"in o&&o.roleId!=null&&(this.roleId=o.roleId),"opr"in o&&o.opr!=null&&(this.opr=o.opr),"value"in o&&o.value!=null&&(this.value=o.value),"head"in o&&o.head!=null&&(this.head=o.head),"frame"in o&&o.frame!=null&&(this.frame=o.frame),"curDir"in o&&o.curDir!=null&&(this.curDir=o.curDir),"aimDir"in o&&o.aimDir!=null&&(this.aimDir=o.aimDir),"speed"in o&&o.speed!=null&&(this.speed=o.speed),this.snake=o.snake,"oprIndex"in o&&o.oprIndex!=null&&(this.oprIndex=o.oprIndex))}get roleId(){return m.Message.getFieldWithDefault(this,1,"")}set roleId(o){m.Message.setField(this,1,o)}get has_roleId(){return m.Message.getField(this,1)!=null}get opr(){return m.Message.getFieldWithDefault(this,2,0)}set opr(o){m.Message.setField(this,2,o)}get has_opr(){return m.Message.getField(this,2)!=null}get value(){return m.Message.getFieldWithDefault(this,3,0)}set value(o){m.Message.setField(this,3,o)}get has_value(){return m.Message.getField(this,3)!=null}get head(){return m.Message.getWrapperField(this,O,4)}set head(o){m.Message.setWrapperField(this,4,o)}get has_head(){return m.Message.getField(this,4)!=null}get frame(){return m.Message.getFieldWithDefault(this,5,0)}set frame(o){m.Message.setField(this,5,o)}get has_frame(){return m.Message.getField(this,5)!=null}get curDir(){return m.Message.getFieldWithDefault(this,6,0)}set curDir(o){m.Message.setField(this,6,o)}get has_curDir(){return m.Message.getField(this,6)!=null}get aimDir(){return m.Message.getFieldWithDefault(this,7,0)}set aimDir(o){m.Message.setField(this,7,o)}get has_aimDir(){return m.Message.getField(this,7)!=null}get speed(){return m.Message.getFieldWithDefault(this,8,0)}set speed(o){m.Message.setField(this,8,o)}get has_speed(){return m.Message.getField(this,8)!=null}get snake(){return m.Message.getRepeatedWrapperField(this,O,9)}set snake(o){m.Message.setRepeatedWrapperField(this,9,o)}get oprIndex(){return m.Message.getFieldWithDefault(this,10,0)}set oprIndex(o){m.Message.setField(this,10,o)}get has_oprIndex(){return m.Message.getField(this,10)!=null}static fromObject(o){let l=new wi({snake:o.snake.map(g=>O.fromObject(g))});return o.roleId!=null&&(l.roleId=o.roleId),o.opr!=null&&(l.opr=o.opr),o.value!=null&&(l.value=o.value),o.head!=null&&(l.head=O.fromObject(o.head)),o.frame!=null&&(l.frame=o.frame),o.curDir!=null&&(l.curDir=o.curDir),o.aimDir!=null&&(l.aimDir=o.aimDir),o.speed!=null&&(l.speed=o.speed),o.oprIndex!=null&&(l.oprIndex=o.oprIndex),l}toObject(){let o={};return this.roleId!=null&&(o.roleId=this.roleId),this.opr!=null&&(o.opr=this.opr),this.value!=null&&(o.value=this.value),this.head!=null&&(o.head=this.head.toObject()),this.frame!=null&&(o.frame=this.frame),this.curDir!=null&&(o.curDir=this.curDir),this.aimDir!=null&&(o.aimDir=this.aimDir),this.speed!=null&&(o.speed=this.speed),this.snake!=null&&(o.snake=this.snake.map(l=>l.toObject())),this.oprIndex!=null&&(o.oprIndex=this.oprIndex),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_opr&&l.writeInt32(2,this.opr),this.has_value&&l.writeInt32(3,this.value),this.has_head&&l.writeMessage(4,this.head,()=>this.head.serialize(l)),this.has_frame&&l.writeInt32(5,this.frame),this.has_curDir&&l.writeFloat(6,this.curDir),this.has_aimDir&&l.writeFloat(7,this.aimDir),this.has_speed&&l.writeFloat(8,this.speed),this.snake.length&&l.writeRepeatedMessage(9,this.snake,g=>g.serialize(l)),this.has_oprIndex&&l.writeInt32(10,this.oprIndex),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new wi;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.roleId=l.readString();break;case 2:g.opr=l.readInt32();break;case 3:g.value=l.readInt32();break;case 4:l.readMessage(g.head,()=>g.head=O.deserialize(l));break;case 5:g.frame=l.readInt32();break;case 6:g.curDir=l.readFloat();break;case 7:g.aimDir=l.readFloat();break;case 8:g.speed=l.readFloat();break;case 9:l.readMessage(g.snake,()=>m.Message.addToRepeatedWrapperField(g,9,O.deserialize(l),O));break;case 10:g.oprIndex=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return wi.deserialize(o)}};dn=new WeakMap;let V=wi;_r.CS_PLAYER_OPR=wi;let ko=class ko extends m.Message{constructor(o){super();Xe(this,hn,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[1],Ye(this,hn)),!Array.isArray(o)&&typeof o=="object"&&(this.players=o.players,"frame"in o&&o.frame!=null&&(this.frame=o.frame))}get players(){return m.Message.getRepeatedWrapperField(this,F,1)}set players(o){m.Message.setRepeatedWrapperField(this,1,o)}get frame(){return m.Message.getFieldWithDefault(this,2,0)}set frame(o){m.Message.setField(this,2,o)}get has_frame(){return m.Message.getField(this,2)!=null}static fromObject(o){let l=new ko({players:o.players.map(g=>F.fromObject(g))});return o.frame!=null&&(l.frame=o.frame),l}toObject(){let o={};return this.players!=null&&(o.players=this.players.map(l=>l.toObject())),this.frame!=null&&(o.frame=this.frame),o}serialize(o){let l=o||new m.BinaryWriter;if(this.players.length&&l.writeRepeatedMessage(1,this.players,g=>g.serialize(l)),this.has_frame&&l.writeInt32(2,this.frame),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new ko;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(g.players,()=>m.Message.addToRepeatedWrapperField(g,1,F.deserialize(l),F));break;case 2:g.frame=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return ko.deserialize(o)}};hn=new WeakMap;let ee=ko;_r.SC_PLAYER_STATE=ko;let Ja=class Ja extends m.Message{constructor(o){super();Xe(this,Ml,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[1],Ye(this,Ml)),!Array.isArray(o)&&typeof o=="object"&&(this.food=o.food,"frame"in o&&o.frame!=null&&(this.frame=o.frame))}get food(){return m.Message.getRepeatedWrapperField(this,D,1)}set food(o){m.Message.setRepeatedWrapperField(this,1,o)}get frame(){return m.Message.getFieldWithDefault(this,2,0)}set frame(o){m.Message.setField(this,2,o)}get has_frame(){return m.Message.getField(this,2)!=null}static fromObject(o){let l=new Ja({food:o.food.map(g=>D.fromObject(g))});return o.frame!=null&&(l.frame=o.frame),l}toObject(){let o={};return this.food!=null&&(o.food=this.food.map(l=>l.toObject())),this.frame!=null&&(o.frame=this.frame),o}serialize(o){let l=o||new m.BinaryWriter;if(this.food.length&&l.writeRepeatedMessage(1,this.food,g=>g.serialize(l)),this.has_frame&&l.writeInt32(2,this.frame),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new Ja;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(g.food,()=>m.Message.addToRepeatedWrapperField(g,1,D.deserialize(l),D));break;case 2:g.frame=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return Ja.deserialize(o)}};Ml=new WeakMap;let Q=Ja;_r.SC_GEN_FOOD=Ja;let ec=class ec extends m.Message{constructor(o){super();Xe(this,Dl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Dl)),!Array.isArray(o)&&typeof o=="object"&&"players"in o&&o.players!=null&&(this.players=o.players)}get players(){return m.Message.getWrapperField(this,F,2)}set players(o){m.Message.setWrapperField(this,2,o)}get has_players(){return m.Message.getField(this,2)!=null}static fromObject(o){let l=new ec({});return o.players!=null&&(l.players=F.fromObject(o.players)),l}toObject(){let o={};return this.players!=null&&(o.players=this.players.toObject()),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_players&&l.writeMessage(2,this.players,()=>this.players.serialize(l)),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new ec;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 2:l.readMessage(g.players,()=>g.players=F.deserialize(l));break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return ec.deserialize(o)}};Dl=new WeakMap;let ve=ec;_r.SS_NOTICE_ENTER=ec;let tc=class tc extends m.Message{constructor(o){super();Xe(this,Bl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[8,9],Ye(this,Bl)),!Array.isArray(o)&&typeof o=="object"&&("res"in o&&o.res!=null&&(this.res=o.res),"roleId"in o&&o.roleId!=null&&(this.roleId=o.roleId),"rank"in o&&o.rank!=null&&(this.rank=o.rank),"score"in o&&o.score!=null&&(this.score=o.score),"kills"in o&&o.kills!=null&&(this.kills=o.kills),"length"in o&&o.length!=null&&(this.length=o.length),"alive"in o&&o.alive!=null&&(this.alive=o.alive),this.items=o.items,this.token=o.token)}get res(){return m.Message.getFieldWithDefault(this,1,!1)}set res(o){m.Message.setField(this,1,o)}get has_res(){return m.Message.getField(this,1)!=null}get roleId(){return m.Message.getFieldWithDefault(this,2,"")}set roleId(o){m.Message.setField(this,2,o)}get has_roleId(){return m.Message.getField(this,2)!=null}get rank(){return m.Message.getFieldWithDefault(this,3,0)}set rank(o){m.Message.setField(this,3,o)}get has_rank(){return m.Message.getField(this,3)!=null}get score(){return m.Message.getFieldWithDefault(this,4,0)}set score(o){m.Message.setField(this,4,o)}get has_score(){return m.Message.getField(this,4)!=null}get kills(){return m.Message.getFieldWithDefault(this,5,0)}set kills(o){m.Message.setField(this,5,o)}get has_kills(){return m.Message.getField(this,5)!=null}get length(){return m.Message.getFieldWithDefault(this,6,0)}set length(o){m.Message.setField(this,6,o)}get has_length(){return m.Message.getField(this,6)!=null}get alive(){return m.Message.getFieldWithDefault(this,7,0)}set alive(o){m.Message.setField(this,7,o)}get has_alive(){return m.Message.getField(this,7)!=null}get items(){return m.Message.getRepeatedWrapperField(this,f,8)}set items(o){m.Message.setRepeatedWrapperField(this,8,o)}get token(){return m.Message.getFieldWithDefault(this,9,[])}set token(o){m.Message.setField(this,9,o)}static fromObject(o){let l=new tc({items:o.items.map(g=>f.fromObject(g)),token:o.token});return o.res!=null&&(l.res=o.res),o.roleId!=null&&(l.roleId=o.roleId),o.rank!=null&&(l.rank=o.rank),o.score!=null&&(l.score=o.score),o.kills!=null&&(l.kills=o.kills),o.length!=null&&(l.length=o.length),o.alive!=null&&(l.alive=o.alive),l}toObject(){let o={token:this.token};return this.res!=null&&(o.res=this.res),this.roleId!=null&&(o.roleId=this.roleId),this.rank!=null&&(o.rank=this.rank),this.score!=null&&(o.score=this.score),this.kills!=null&&(o.kills=this.kills),this.length!=null&&(o.length=this.length),this.alive!=null&&(o.alive=this.alive),this.items!=null&&(o.items=this.items.map(l=>l.toObject())),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_res&&l.writeBool(1,this.res),this.has_roleId&&this.roleId.length&&l.writeString(2,this.roleId),this.has_rank&&l.writeInt32(3,this.rank),this.has_score&&l.writeInt32(4,this.score),this.has_kills&&l.writeInt32(5,this.kills),this.has_length&&l.writeInt32(6,this.length),this.has_alive&&l.writeInt32(7,this.alive),this.items.length&&l.writeRepeatedMessage(8,this.items,g=>g.serialize(l)),this.token.length&&l.writeRepeatedString(9,this.token),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new tc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.res=l.readBool();break;case 2:g.roleId=l.readString();break;case 3:g.rank=l.readInt32();break;case 4:g.score=l.readInt32();break;case 5:g.kills=l.readInt32();break;case 6:g.length=l.readInt32();break;case 7:g.alive=l.readInt32();break;case 8:l.readMessage(g.items,()=>m.Message.addToRepeatedWrapperField(g,8,f.deserialize(l),f));break;case 9:m.Message.addToRepeatedField(g,9,l.readString());break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return tc.deserialize(o)}};Bl=new WeakMap;let be=tc;_r.SC_BATTLE_END=tc;let rc=class rc extends m.Message{constructor(o){super();Xe(this,Ol,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[1],Ye(this,Ol)),!Array.isArray(o)&&typeof o=="object"&&(this.fid=o.fid,"head"in o&&o.head!=null&&(this.head=o.head),this.roleId=o.roleId,"frame"in o&&o.frame!=null&&(this.frame=o.frame))}get fid(){return m.Message.getFieldWithDefault(this,1,[])}set fid(o){m.Message.setField(this,1,o)}get head(){return m.Message.getWrapperField(this,O,2)}set head(o){m.Message.setWrapperField(this,2,o)}get has_head(){return m.Message.getField(this,2)!=null}get roleId(){return m.Message.getField(this,3)}set roleId(o){m.Message.setField(this,3,o)}get has_roleId(){return m.Message.getField(this,3)!=null}get frame(){return m.Message.getFieldWithDefault(this,4,0)}set frame(o){m.Message.setField(this,4,o)}get has_frame(){return m.Message.getField(this,4)!=null}static fromObject(o){let l=new rc({fid:o.fid,roleId:o.roleId});return o.head!=null&&(l.head=O.fromObject(o.head)),o.frame!=null&&(l.frame=o.frame),l}toObject(){let o={fid:this.fid};return this.head!=null&&(o.head=this.head.toObject()),this.roleId!=null&&(o.roleId=this.roleId),this.frame!=null&&(o.frame=this.frame),o}serialize(o){let l=o||new m.BinaryWriter;if(this.fid.length&&l.writeRepeatedString(1,this.fid),this.has_head&&l.writeMessage(2,this.head,()=>this.head.serialize(l)),this.has_roleId&&this.roleId.length&&l.writeString(3,this.roleId),this.has_frame&&l.writeInt32(4,this.frame),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new rc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:m.Message.addToRepeatedField(g,1,l.readString());break;case 2:l.readMessage(g.head,()=>g.head=O.deserialize(l));break;case 3:g.roleId=l.readString();break;case 4:g.frame=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return rc.deserialize(o)}};Ol=new WeakMap;let j=rc;_r.CS_EAT_FOOD=rc;let ic=class ic extends m.Message{constructor(o){super();Xe(this,Pl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[1,7,11],Ye(this,Pl)),!Array.isArray(o)&&typeof o=="object"&&(this.fid=o.fid,"head"in o&&o.head!=null&&(this.head=o.head),"frame"in o&&o.frame!=null&&(this.frame=o.frame),"score"in o&&o.score!=null&&(this.score=o.score),"lenght"in o&&o.lenght!=null&&(this.lenght=o.lenght),this.roleId=o.roleId,this.remain=o.remain,"curDir"in o&&o.curDir!=null&&(this.curDir=o.curDir),"aimDir"in o&&o.aimDir!=null&&(this.aimDir=o.aimDir),"speed"in o&&o.speed!=null&&(this.speed=o.speed),this.snake=o.snake)}get fid(){return m.Message.getFieldWithDefault(this,1,[])}set fid(o){m.Message.setField(this,1,o)}get head(){return m.Message.getWrapperField(this,O,2)}set head(o){m.Message.setWrapperField(this,2,o)}get has_head(){return m.Message.getField(this,2)!=null}get frame(){return m.Message.getFieldWithDefault(this,3,0)}set frame(o){m.Message.setField(this,3,o)}get has_frame(){return m.Message.getField(this,3)!=null}get score(){return m.Message.getFieldWithDefault(this,4,0)}set score(o){m.Message.setField(this,4,o)}get has_score(){return m.Message.getField(this,4)!=null}get lenght(){return m.Message.getFieldWithDefault(this,5,0)}set lenght(o){m.Message.setField(this,5,o)}get has_lenght(){return m.Message.getField(this,5)!=null}get roleId(){return m.Message.getField(this,6)}set roleId(o){m.Message.setField(this,6,o)}get has_roleId(){return m.Message.getField(this,6)!=null}get remain(){return m.Message.getFieldWithDefault(this,7,[])}set remain(o){m.Message.setField(this,7,o)}get curDir(){return m.Message.getFieldWithDefault(this,8,0)}set curDir(o){m.Message.setField(this,8,o)}get has_curDir(){return m.Message.getField(this,8)!=null}get aimDir(){return m.Message.getFieldWithDefault(this,9,0)}set aimDir(o){m.Message.setField(this,9,o)}get has_aimDir(){return m.Message.getField(this,9)!=null}get speed(){return m.Message.getFieldWithDefault(this,10,0)}set speed(o){m.Message.setField(this,10,o)}get has_speed(){return m.Message.getField(this,10)!=null}get snake(){return m.Message.getRepeatedWrapperField(this,O,11)}set snake(o){m.Message.setRepeatedWrapperField(this,11,o)}static fromObject(o){let l=new ic({fid:o.fid,roleId:o.roleId,remain:o.remain,snake:o.snake.map(g=>O.fromObject(g))});return o.head!=null&&(l.head=O.fromObject(o.head)),o.frame!=null&&(l.frame=o.frame),o.score!=null&&(l.score=o.score),o.lenght!=null&&(l.lenght=o.lenght),o.curDir!=null&&(l.curDir=o.curDir),o.aimDir!=null&&(l.aimDir=o.aimDir),o.speed!=null&&(l.speed=o.speed),l}toObject(){let o={fid:this.fid,remain:this.remain};return this.head!=null&&(o.head=this.head.toObject()),this.frame!=null&&(o.frame=this.frame),this.score!=null&&(o.score=this.score),this.lenght!=null&&(o.lenght=this.lenght),this.roleId!=null&&(o.roleId=this.roleId),this.curDir!=null&&(o.curDir=this.curDir),this.aimDir!=null&&(o.aimDir=this.aimDir),this.speed!=null&&(o.speed=this.speed),this.snake!=null&&(o.snake=this.snake.map(l=>l.toObject())),o}serialize(o){let l=o||new m.BinaryWriter;if(this.fid.length&&l.writeRepeatedString(1,this.fid),this.has_head&&l.writeMessage(2,this.head,()=>this.head.serialize(l)),this.has_frame&&l.writeInt32(3,this.frame),this.has_score&&l.writeInt32(4,this.score),this.has_lenght&&l.writeInt32(5,this.lenght),this.has_roleId&&this.roleId.length&&l.writeString(6,this.roleId),this.remain.length&&l.writeRepeatedString(7,this.remain),this.has_curDir&&l.writeFloat(8,this.curDir),this.has_aimDir&&l.writeFloat(9,this.aimDir),this.has_speed&&l.writeFloat(10,this.speed),this.snake.length&&l.writeRepeatedMessage(11,this.snake,g=>g.serialize(l)),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new ic;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:m.Message.addToRepeatedField(g,1,l.readString());break;case 2:l.readMessage(g.head,()=>g.head=O.deserialize(l));break;case 3:g.frame=l.readInt32();break;case 4:g.score=l.readInt32();break;case 5:g.lenght=l.readInt32();break;case 6:g.roleId=l.readString();break;case 7:m.Message.addToRepeatedField(g,7,l.readString());break;case 8:g.curDir=l.readFloat();break;case 9:g.aimDir=l.readFloat();break;case 10:g.speed=l.readFloat();break;case 11:l.readMessage(g.snake,()=>m.Message.addToRepeatedWrapperField(g,11,O.deserialize(l),O));break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return ic.deserialize(o)}};Pl=new WeakMap;let qe=ic;_r.SC_EAT_FOOD=ic;let nc=class nc extends m.Message{constructor(o){super();Xe(this,Nl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Nl)),!Array.isArray(o)&&typeof o=="object"&&("target"in o&&o.target!=null&&(this.target=o.target),"head"in o&&o.head!=null&&(this.head=o.head),"frame"in o&&o.frame!=null&&(this.frame=o.frame),"body"in o&&o.body!=null&&(this.body=o.body))}get target(){return m.Message.getFieldWithDefault(this,1,"")}set target(o){m.Message.setField(this,1,o)}get has_target(){return m.Message.getField(this,1)!=null}get head(){return m.Message.getWrapperField(this,O,2)}set head(o){m.Message.setWrapperField(this,2,o)}get has_head(){return m.Message.getField(this,2)!=null}get frame(){return m.Message.getFieldWithDefault(this,3,0)}set frame(o){m.Message.setField(this,3,o)}get has_frame(){return m.Message.getField(this,3)!=null}get body(){return m.Message.getFieldWithDefault(this,4,!1)}set body(o){m.Message.setField(this,4,o)}get has_body(){return m.Message.getField(this,4)!=null}static fromObject(o){let l=new nc({});return o.target!=null&&(l.target=o.target),o.head!=null&&(l.head=O.fromObject(o.head)),o.frame!=null&&(l.frame=o.frame),o.body!=null&&(l.body=o.body),l}toObject(){let o={};return this.target!=null&&(o.target=this.target),this.head!=null&&(o.head=this.head.toObject()),this.frame!=null&&(o.frame=this.frame),this.body!=null&&(o.body=this.body),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_target&&this.target.length&&l.writeString(1,this.target),this.has_head&&l.writeMessage(2,this.head,()=>this.head.serialize(l)),this.has_frame&&l.writeInt32(3,this.frame),this.has_body&&l.writeBool(4,this.body),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new nc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.target=l.readString();break;case 2:l.readMessage(g.head,()=>g.head=O.deserialize(l));break;case 3:g.frame=l.readInt32();break;case 4:g.body=l.readBool();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return nc.deserialize(o)}};Nl=new WeakMap;let Z=nc;_r.CS_PLAYER_COLLISION=nc;let oc=class oc extends m.Message{constructor(o){super();Xe(this,Fl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[4,11],Ye(this,Fl)),!Array.isArray(o)&&typeof o=="object"&&("roleId"in o&&o.roleId!=null&&(this.roleId=o.roleId),"head"in o&&o.head!=null&&(this.head=o.head),this.food=o.food,"taret"in o&&o.taret!=null&&(this.taret=o.taret),"frame"in o&&o.frame!=null&&(this.frame=o.frame),"curDir"in o&&o.curDir!=null&&(this.curDir=o.curDir),"aimDir"in o&&o.aimDir!=null&&(this.aimDir=o.aimDir),"speed"in o&&o.speed!=null&&(this.speed=o.speed),"die"in o&&o.die!=null&&(this.die=o.die),this.snake=o.snake)}get roleId(){return m.Message.getFieldWithDefault(this,1,"")}set roleId(o){m.Message.setField(this,1,o)}get has_roleId(){return m.Message.getField(this,1)!=null}get head(){return m.Message.getWrapperField(this,O,2)}set head(o){m.Message.setWrapperField(this,2,o)}get has_head(){return m.Message.getField(this,2)!=null}get food(){return m.Message.getRepeatedWrapperField(this,D,4)}set food(o){m.Message.setRepeatedWrapperField(this,4,o)}get taret(){return m.Message.getFieldWithDefault(this,5,"")}set taret(o){m.Message.setField(this,5,o)}get has_taret(){return m.Message.getField(this,5)!=null}get frame(){return m.Message.getFieldWithDefault(this,6,0)}set frame(o){m.Message.setField(this,6,o)}get has_frame(){return m.Message.getField(this,6)!=null}get curDir(){return m.Message.getFieldWithDefault(this,7,0)}set curDir(o){m.Message.setField(this,7,o)}get has_curDir(){return m.Message.getField(this,7)!=null}get aimDir(){return m.Message.getFieldWithDefault(this,8,0)}set aimDir(o){m.Message.setField(this,8,o)}get has_aimDir(){return m.Message.getField(this,8)!=null}get speed(){return m.Message.getFieldWithDefault(this,9,0)}set speed(o){m.Message.setField(this,9,o)}get has_speed(){return m.Message.getField(this,9)!=null}get die(){return m.Message.getFieldWithDefault(this,10,"")}set die(o){m.Message.setField(this,10,o)}get has_die(){return m.Message.getField(this,10)!=null}get snake(){return m.Message.getRepeatedWrapperField(this,O,11)}set snake(o){m.Message.setRepeatedWrapperField(this,11,o)}static fromObject(o){let l=new oc({food:o.food.map(g=>D.fromObject(g)),snake:o.snake.map(g=>O.fromObject(g))});return o.roleId!=null&&(l.roleId=o.roleId),o.head!=null&&(l.head=O.fromObject(o.head)),o.taret!=null&&(l.taret=o.taret),o.frame!=null&&(l.frame=o.frame),o.curDir!=null&&(l.curDir=o.curDir),o.aimDir!=null&&(l.aimDir=o.aimDir),o.speed!=null&&(l.speed=o.speed),o.die!=null&&(l.die=o.die),l}toObject(){let o={};return this.roleId!=null&&(o.roleId=this.roleId),this.head!=null&&(o.head=this.head.toObject()),this.food!=null&&(o.food=this.food.map(l=>l.toObject())),this.taret!=null&&(o.taret=this.taret),this.frame!=null&&(o.frame=this.frame),this.curDir!=null&&(o.curDir=this.curDir),this.aimDir!=null&&(o.aimDir=this.aimDir),this.speed!=null&&(o.speed=this.speed),this.die!=null&&(o.die=this.die),this.snake!=null&&(o.snake=this.snake.map(l=>l.toObject())),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),this.has_head&&l.writeMessage(2,this.head,()=>this.head.serialize(l)),this.food.length&&l.writeRepeatedMessage(4,this.food,g=>g.serialize(l)),this.has_taret&&this.taret.length&&l.writeString(5,this.taret),this.has_frame&&l.writeInt32(6,this.frame),this.has_curDir&&l.writeFloat(7,this.curDir),this.has_aimDir&&l.writeFloat(8,this.aimDir),this.has_speed&&l.writeFloat(9,this.speed),this.has_die&&this.die.length&&l.writeString(10,this.die),this.snake.length&&l.writeRepeatedMessage(11,this.snake,g=>g.serialize(l)),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new oc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.roleId=l.readString();break;case 2:l.readMessage(g.head,()=>g.head=O.deserialize(l));break;case 4:l.readMessage(g.food,()=>m.Message.addToRepeatedWrapperField(g,4,D.deserialize(l),D));break;case 5:g.taret=l.readString();break;case 6:g.frame=l.readInt32();break;case 7:g.curDir=l.readFloat();break;case 8:g.aimDir=l.readFloat();break;case 9:g.speed=l.readFloat();break;case 10:g.die=l.readString();break;case 11:l.readMessage(g.snake,()=>m.Message.addToRepeatedWrapperField(g,11,O.deserialize(l),O));break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return oc.deserialize(o)}};Fl=new WeakMap;let ye=oc;_r.SC_PLAYER_COLLISION=oc;let sc=class sc extends m.Message{constructor(o){super();Xe(this,Ul,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Ul)),!Array.isArray(o)&&typeof o=="object"&&"time"in o&&o.time!=null&&(this.time=o.time)}get time(){return m.Message.getFieldWithDefault(this,1,0)}set time(o){m.Message.setField(this,1,o)}get has_time(){return m.Message.getField(this,1)!=null}static fromObject(o){let l=new sc({});return o.time!=null&&(l.time=o.time),l}toObject(){let o={};return this.time!=null&&(o.time=this.time),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_time&&l.writeInt64(1,this.time),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new sc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.time=l.readInt64();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return sc.deserialize(o)}};Ul=new WeakMap;let re=sc;_r.SC_REQUEST_SERVER_TIME=sc;let ac=class ac extends m.Message{constructor(o){super();Xe(this,Hl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Hl)),!Array.isArray(o)&&typeof o=="object"&&(this.roleId=o.roleId)}get roleId(){return m.Message.getField(this,1)}set roleId(o){m.Message.setField(this,1,o)}get has_roleId(){return m.Message.getField(this,1)!=null}static fromObject(o){return new ac({roleId:o.roleId})}toObject(){let o={};return this.roleId!=null&&(o.roleId=this.roleId),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new ac;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.roleId=l.readString();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return ac.deserialize(o)}};Hl=new WeakMap;let C=ac;_r.CS_REQUEST_ROOM_DATA=ac;let cc=class cc extends m.Message{constructor(o){super();Xe(this,zl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[1,2],Ye(this,zl)),!Array.isArray(o)&&typeof o=="object"&&(this.food=o.food,this.players=o.players)}get food(){return m.Message.getRepeatedWrapperField(this,D,1)}set food(o){m.Message.setRepeatedWrapperField(this,1,o)}get players(){return m.Message.getRepeatedWrapperField(this,F,2)}set players(o){m.Message.setRepeatedWrapperField(this,2,o)}static fromObject(o){return new cc({food:o.food.map(g=>D.fromObject(g)),players:o.players.map(g=>F.fromObject(g))})}toObject(){let o={};return this.food!=null&&(o.food=this.food.map(l=>l.toObject())),this.players!=null&&(o.players=this.players.map(l=>l.toObject())),o}serialize(o){let l=o||new m.BinaryWriter;if(this.food.length&&l.writeRepeatedMessage(1,this.food,g=>g.serialize(l)),this.players.length&&l.writeRepeatedMessage(2,this.players,g=>g.serialize(l)),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new cc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(g.food,()=>m.Message.addToRepeatedWrapperField(g,1,D.deserialize(l),D));break;case 2:l.readMessage(g.players,()=>m.Message.addToRepeatedWrapperField(g,2,F.deserialize(l),F));break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return cc.deserialize(o)}};zl=new WeakMap;let Fe=cc;_r.SC_REQUEST_ROOM_DATA=cc;let lc=class lc extends m.Message{constructor(o){super();Xe(this,jl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[1],Ye(this,jl)),!Array.isArray(o)&&typeof o=="object"&&(this.info=o.info)}get info(){return m.Message.getFieldWithDefault(this,1,[])}set info(o){m.Message.setField(this,1,o)}static fromObject(o){return new lc({info:o.info})}toObject(){return{info:this.info}}serialize(o){let l=o||new m.BinaryWriter;if(this.info.length&&l.writeRepeatedString(1,this.info),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new lc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:m.Message.addToRepeatedField(g,1,l.readString());break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return lc.deserialize(o)}};jl=new WeakMap;let ie=lc;_r.SC_INVITE_LIST=lc;let uc=class uc extends m.Message{constructor(o){super();Xe(this,Vl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Vl)),!Array.isArray(o)&&typeof o=="object"&&(this.roleId=o.roleId)}get roleId(){return m.Message.getField(this,1)}set roleId(o){m.Message.setField(this,1,o)}get has_roleId(){return m.Message.getField(this,1)!=null}static fromObject(o){return new uc({roleId:o.roleId})}toObject(){let o={};return this.roleId!=null&&(o.roleId=this.roleId),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new uc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.roleId=l.readString();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return uc.deserialize(o)}};Vl=new WeakMap;let Ce=uc;_r.CS_REQUEST_INFO=uc;let pc=class pc extends m.Message{constructor(o){super();Xe(this,Gl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Gl)),!Array.isArray(o)&&typeof o=="object"&&(this.roleInfo=o.roleInfo)}get roleInfo(){return m.Message.getWrapperField(this,p,1)}set roleInfo(o){m.Message.setWrapperField(this,1,o)}get has_roleInfo(){return m.Message.getField(this,1)!=null}static fromObject(o){return new pc({roleInfo:p.fromObject(o.roleInfo)})}toObject(){let o={};return this.roleInfo!=null&&(o.roleInfo=this.roleInfo.toObject()),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_roleInfo&&l.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(l)),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new pc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(g.roleInfo,()=>g.roleInfo=p.deserialize(l));break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return pc.deserialize(o)}};Gl=new WeakMap;let ht=pc;_r.SC_REQUEST_INFO=pc;let mc=class mc extends m.Message{constructor(o){super();Xe(this,Wl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Wl)),!Array.isArray(o)&&typeof o=="object"&&(this.id=o.id)}get id(){return m.Message.getField(this,1)}set id(o){m.Message.setField(this,1,o)}get has_id(){return m.Message.getField(this,1)!=null}static fromObject(o){return new mc({id:o.id})}toObject(){let o={};return this.id!=null&&(o.id=this.id),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_id&&l.writeInt32(1,this.id),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new mc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.id=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return mc.deserialize(o)}};Wl=new WeakMap;let ut=mc;_r.CS_SHOP_BUY=mc;let fc=class fc extends m.Message{constructor(o){super();Xe(this,$l,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[1,2],Ye(this,$l)),!Array.isArray(o)&&typeof o=="object"&&(this.cost=o.cost,this.items=o.items)}get cost(){return m.Message.getRepeatedWrapperField(this,f,1)}set cost(o){m.Message.setRepeatedWrapperField(this,1,o)}get items(){return m.Message.getRepeatedWrapperField(this,f,2)}set items(o){m.Message.setRepeatedWrapperField(this,2,o)}static fromObject(o){return new fc({cost:o.cost.map(g=>f.fromObject(g)),items:o.items.map(g=>f.fromObject(g))})}toObject(){let o={};return this.cost!=null&&(o.cost=this.cost.map(l=>l.toObject())),this.items!=null&&(o.items=this.items.map(l=>l.toObject())),o}serialize(o){let l=o||new m.BinaryWriter;if(this.cost.length&&l.writeRepeatedMessage(1,this.cost,g=>g.serialize(l)),this.items.length&&l.writeRepeatedMessage(2,this.items,g=>g.serialize(l)),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new fc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(g.cost,()=>m.Message.addToRepeatedWrapperField(g,1,f.deserialize(l),f));break;case 2:l.readMessage(g.items,()=>m.Message.addToRepeatedWrapperField(g,2,f.deserialize(l),f));break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return fc.deserialize(o)}};$l=new WeakMap;let St=fc;_r.SC_SHOP_BUY=fc;let dc=class dc extends m.Message{constructor(o){super();Xe(this,Kl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[1],Ye(this,Kl)),!Array.isArray(o)&&typeof o=="object"&&(this.msgList=o.msgList,this.frame=o.frame)}get msgList(){return m.Message.getRepeatedWrapperField(this,a,1)}set msgList(o){m.Message.setRepeatedWrapperField(this,1,o)}get frame(){return m.Message.getField(this,2)}set frame(o){m.Message.setField(this,2,o)}get has_frame(){return m.Message.getField(this,2)!=null}static fromObject(o){return new dc({msgList:o.msgList.map(g=>a.fromObject(g)),frame:o.frame})}toObject(){let o={};return this.msgList!=null&&(o.msgList=this.msgList.map(l=>l.toObject())),this.frame!=null&&(o.frame=this.frame),o}serialize(o){let l=o||new m.BinaryWriter;if(this.msgList.length&&l.writeRepeatedMessage(1,this.msgList,g=>g.serialize(l)),this.has_frame&&l.writeInt32(2,this.frame),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new dc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:l.readMessage(g.msgList,()=>m.Message.addToRepeatedWrapperField(g,1,a.deserialize(l),a));break;case 2:g.frame=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return dc.deserialize(o)}};Kl=new WeakMap;let ct=dc;_r.SC_PUSH=dc;let hc=class hc extends m.Message{constructor(o){super();Xe(this,ql,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[1],Ye(this,ql)),!Array.isArray(o)&&typeof o=="object"&&(this.token=o.token)}get token(){return m.Message.getFieldWithDefault(this,1,[])}set token(o){m.Message.setField(this,1,o)}static fromObject(o){return new hc({token:o.token})}toObject(){return{token:this.token}}serialize(o){let l=o||new m.BinaryWriter;if(this.token.length&&l.writeRepeatedString(1,this.token),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new hc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:m.Message.addToRepeatedField(g,1,l.readString());break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return hc.deserialize(o)}};ql=new WeakMap;let xr=hc;_r.SC_QUERY_TOKEN=hc;let gc=class gc extends m.Message{constructor(o){super();Xe(this,Yl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Yl)),!Array.isArray(o)&&typeof o=="object"&&(this.roleId=o.roleId)}get roleId(){return m.Message.getField(this,1)}set roleId(o){m.Message.setField(this,1,o)}get has_roleId(){return m.Message.getField(this,1)!=null}static fromObject(o){return new gc({roleId:o.roleId})}toObject(){let o={};return this.roleId!=null&&(o.roleId=this.roleId),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&l.writeString(1,this.roleId),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new gc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.roleId=l.readString();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return gc.deserialize(o)}};Yl=new WeakMap;let hr=gc;_r.SC_PLAYER_OUT=gc;let bc=class bc extends m.Message{constructor(o){super();Xe(this,Xl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Xl)),!Array.isArray(o)&&typeof o=="object"&&"symbolId"in o&&o.symbolId!=null&&(this.symbolId=o.symbolId)}get symbolId(){return m.Message.getFieldWithDefault(this,2,0)}set symbolId(o){m.Message.setField(this,2,o)}get has_symbolId(){return m.Message.getField(this,2)!=null}static fromObject(o){let l=new bc({});return o.symbolId!=null&&(l.symbolId=o.symbolId),l}toObject(){let o={};return this.symbolId!=null&&(o.symbolId=this.symbolId),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_symbolId&&l.writeInt32(2,this.symbolId),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new bc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 2:g.symbolId=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return bc.deserialize(o)}};Xl=new WeakMap;let Mt=bc;_r.CS_CHARGE=bc;let yc=class yc extends m.Message{constructor(o){super();Xe(this,Ql,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Ql)),!Array.isArray(o)&&typeof o=="object"&&("symbolId"in o&&o.symbolId!=null&&(this.symbolId=o.symbolId),"depositAddress"in o&&o.depositAddress!=null&&(this.depositAddress=o.depositAddress),"abi"in o&&o.abi!=null&&(this.abi=o.abi),"chainId"in o&&o.chainId!=null&&(this.chainId=o.chainId))}get symbolId(){return m.Message.getFieldWithDefault(this,1,0)}set symbolId(o){m.Message.setField(this,1,o)}get has_symbolId(){return m.Message.getField(this,1)!=null}get depositAddress(){return m.Message.getFieldWithDefault(this,2,"")}set depositAddress(o){m.Message.setField(this,2,o)}get has_depositAddress(){return m.Message.getField(this,2)!=null}get abi(){return m.Message.getFieldWithDefault(this,3,"")}set abi(o){m.Message.setField(this,3,o)}get has_abi(){return m.Message.getField(this,3)!=null}get chainId(){return m.Message.getFieldWithDefault(this,4,0)}set chainId(o){m.Message.setField(this,4,o)}get has_chainId(){return m.Message.getField(this,4)!=null}static fromObject(o){let l=new yc({});return o.symbolId!=null&&(l.symbolId=o.symbolId),o.depositAddress!=null&&(l.depositAddress=o.depositAddress),o.abi!=null&&(l.abi=o.abi),o.chainId!=null&&(l.chainId=o.chainId),l}toObject(){let o={};return this.symbolId!=null&&(o.symbolId=this.symbolId),this.depositAddress!=null&&(o.depositAddress=this.depositAddress),this.abi!=null&&(o.abi=this.abi),this.chainId!=null&&(o.chainId=this.chainId),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_symbolId&&l.writeInt32(1,this.symbolId),this.has_depositAddress&&this.depositAddress.length&&l.writeString(2,this.depositAddress),this.has_abi&&this.abi.length&&l.writeString(3,this.abi),this.has_chainId&&l.writeInt32(4,this.chainId),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new yc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.symbolId=l.readInt32();break;case 2:g.depositAddress=l.readString();break;case 3:g.abi=l.readString();break;case 4:g.chainId=l.readInt32();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return yc.deserialize(o)}};Ql=new WeakMap;let Yr=yc;_r.SC_CHARGE=yc;let xc=class xc extends m.Message{constructor(o){super();Xe(this,Zl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Zl)),!Array.isArray(o)&&typeof o=="object"&&(this.symbolId=o.symbolId,this.amount=o.amount)}get symbolId(){return m.Message.getField(this,1)}set symbolId(o){m.Message.setField(this,1,o)}get has_symbolId(){return m.Message.getField(this,1)!=null}get amount(){return m.Message.getField(this,2)}set amount(o){m.Message.setField(this,2,o)}get has_amount(){return m.Message.getField(this,2)!=null}static fromObject(o){return new xc({symbolId:o.symbolId,amount:o.amount})}toObject(){let o={};return this.symbolId!=null&&(o.symbolId=this.symbolId),this.amount!=null&&(o.amount=this.amount),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_symbolId&&l.writeInt32(1,this.symbolId),this.has_amount&&l.writeDouble(2,this.amount),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new xc;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.symbolId=l.readInt32();break;case 2:g.amount=l.readDouble();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return xc.deserialize(o)}};Zl=new WeakMap;let Xr=xc;_r.CS_WITHDRAW=xc;let _c=class _c extends m.Message{constructor(o){super();Xe(this,Jl,[]);m.Message.initialize(this,Array.isArray(o)?o:[],0,-1,[],Ye(this,Jl)),!Array.isArray(o)&&typeof o=="object"&&"resp"in o&&o.resp!=null&&(this.resp=o.resp)}get resp(){return m.Message.getFieldWithDefault(this,1,"")}set resp(o){m.Message.setField(this,1,o)}get has_resp(){return m.Message.getField(this,1)!=null}static fromObject(o){let l=new _c({});return o.resp!=null&&(l.resp=o.resp),l}toObject(){let o={};return this.resp!=null&&(o.resp=this.resp),o}serialize(o){let l=o||new m.BinaryWriter;if(this.has_resp&&this.resp.length&&l.writeString(1,this.resp),!o)return l.getResultBuffer()}static deserialize(o){let l=o instanceof m.BinaryReader?o:new m.BinaryReader(o),g=new _c;for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:g.resp=l.readString();break;default:l.skipField()}return g}serializeBinary(){return this.serialize()}static deserializeBinary(o){return _c.deserialize(o)}};Jl=new WeakMap;let mn=_c;_r.SC_WITHDRAW=_c})(t=i.socket||(i.socket={}))})(r=e.snake||(e.snake={}))})(Y||(Y={}));var yo=class r{static encodeMessage(e,t,i){var n=r.createHeadMessage(e,i),s=r.createMessageBase(n,t),a=s.serializeBinary(),c=a.length,u=new Uint8Array([(c&4278190080)>>>24,(c&16711680)>>>16,(c&65280)>>>8,(c&255)>>>0]),p=new Uint8Array(u.byteLength+a.byteLength);return p.set(new Uint8Array(u),0),p.set(new Uint8Array(a),u.byteLength),p}static decodeMessage(e){var t=new DataView(e,0,4).getInt32(0,!1),i=e.slice(4,4+t),n=Y.snake.socket.CMsgBase.deserializeBinary(i);return n}static createHeadMessage(e,t,i,n){t||(i=!0),!n&&G.instance.playerDto&&(n=G.instance.playerDto.pid);var s=Y.snake.socket.CMsgHead.fromObject({msgtype:e,msgcode:1,roleId:n});return s}static createMessageBase(e,t){var i=Y.snake.socket.CMsgBase.fromObject({msghead:e,msgbody:t});return i}};var xo=class{};var Va=class{};var Tl=class r{constructor(e,t=0){this.objects=[],this.nodes=[],this.level=t,this.bounds=e}static checkBounds(e,t){let i=[new Laya.Point(t.x,t.y),new Laya.Point(t.x+t.width,t.y),new Laya.Point(t.x+t.width,t.y+t.height),new Laya.Point(t.x,t.y+t.height)];for(let n of i)if(!e.contains(n.x,n.y))return!1;return!0}getIndex(e){let t=e.getBoundingBox();if(!r.checkBounds(this.bounds,t))return;let i=this.bounds.x,n=this.bounds.y,s=this.bounds.width/2,a=this.bounds.height/2,c=new Laya.Rectangle(i+s,n+a,s,a),u=new Laya.Rectangle(i,n+a,s,a),p=new Laya.Rectangle(i,n,s,a),f=new Laya.Rectangle(i+s,n,s,a);return r.checkBounds(c,t)?0:r.checkBounds(u,t)?1:r.checkBounds(p,t)?2:r.checkBounds(f,t)?3:-1}getIndexSuction(e){let t=e.getSuctionBoundingBox()();if(!r.checkBounds(this.bounds,t))return;let i=this.bounds.x,n=this.bounds.y,s=this.bounds.width/2,a=this.bounds.height/2,c=new Laya.Rectangle(i+s,n+a,s,a),u=new Laya.Rectangle(i,n+a,s,a),p=new Laya.Rectangle(i,n,s,a),f=new Laya.Rectangle(i+s,n,s,a);return r.checkBounds(c,t)?0:r.checkBounds(u,t)?1:r.checkBounds(p,t)?2:r.checkBounds(f,t)?3:-1}split(){if(this.nodes.length>0)return;let e=this.bounds.x,t=this.bounds.y,i=this.bounds.width/2,n=this.bounds.height/2;this.nodes[0]=new r(new Laya.Rectangle(e+i,t+n,i,n),this.level+1),this.nodes[1]=new r(new Laya.Rectangle(e,t+n,i,n),this.level+1),this.nodes[2]=new r(new Laya.Rectangle(e,t,i,n),this.level+1),this.nodes[3]=new r(new Laya.Rectangle(e+i,t,i,n),this.level+1)}insert(e){if(this.nodes.length>0){let t=this.getIndex(e);if(t!==void 0&&t!==-1){this.nodes[t].insert(e);return}}if(this.objects.push(e),this.nodes.length===0&&this.objects.length>10&&this.level<5){this.split();let t=[];this.objects.forEach((i,n)=>{let s=this.getIndex(i);s!==void 0&&s!==-1&&(this.nodes[s].insert(i),t.push(n))}),this.objects=this.objects.filter((i,n)=>!t.includes(n))}}retrieve(e){let t=[];if(this.nodes.length>0){let i=this.getIndex(e);if(i!==void 0&&i!==-1)t=t.concat(this.nodes[i].retrieve(e));else if(i===-1)for(let n=0;n<this.nodes.length;n++)t=t.concat(this.nodes[n].retrieve(e))}return t=t.concat(this.objects),t}retrieveSuction(e){let t=[];if(this.nodes.length>0){let i=this.getIndexSuction(e);if(i!==void 0&&i!==-1)t=t.concat(this.nodes[i].retrieveSuction(e));else if(i===-1)for(let n=0;n<this.nodes.length;n++)t=t.concat(this.nodes[n].retrieveSuction(e))}return t=t.concat(this.objects),t}refresh(e){let t=e||this,i=[];this.objects.forEach((n,s)=>{let a=this.getIndex(n);a!==void 0&&a!==-1?this.nodes.length>0&&(i.push(s),this.nodes[a].insert(n)):a===void 0&&t!==this&&(i.push(s),t.insert(n))}),this.objects=this.objects.filter((n,s)=>!i.includes(s));for(let n=0;n<this.nodes.length;n++)this.nodes[n].refresh(t)}remove(e){let t=!1,i=[];if(this.objects.forEach((n,s)=>{n===e&&(i.push(s),t=!0)}),this.objects=this.objects.filter((n,s)=>!i.includes(s)),t)return!0;for(let n=0;n<this.nodes.length;n++)if(this.nodes[n].remove(e))return!0;return!1}clear(){this.objects=[];for(let e=0;e<this.nodes.length;e++)this.nodes[e].clear()}};var ps=class ps{static getInstance(e=null){return ps.instance||(e||(e=new Laya.Rectangle(0,0,pe.mapSize.width,pe.mapSize.height)),ps.instance=new ps(e)),ps.instance}constructor(e){this.snacks=[],this.quadTree=new Tl(e)}addSnack(e){e.forEach(t=>{this.quadTree.insert(t)})}removeSnack(e){e.forEach(t=>{this.quadTree.remove(t)})}refresh(){this.quadTree.refresh()}retrieve(e){return this.quadTree.retrieve(e)}retrieveSuction(e){return this.quadTree.retrieveSuction(e)}getAllCollidables(){return this._getAllFromQuadTree(this.quadTree)}_getAllFromQuadTree(e){let t=[...e.objects];return e.nodes.forEach(i=>{t=t.concat(this._getAllFromQuadTree(i))}),t}};ps.instance=null;var ln=ps;var ms=class{static clamp(e,t,i){return Math.max(t,Math.min(i,e))}static lerp(e,t,i){return e+(t-e)*i}static angleToRadian(e){return e*Math.PI/180}static radianToAngle(e){return e*180/Math.PI}static randomRange(e,t){return e+Math.random()*(t-e)}static randomInt(e,t){return Math.floor(this.randomRange(e,t+1))}static getDistance(e,t){let i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}static getVecDistance(e,t){let i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}static distance(e,t,i,n){let s=e-i,a=t-n;return Math.sqrt(s*s+a*a)}static getAngle(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}};ms.PI2=Math.PI*2;var Ga=class{constructor(e,t){this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200;this._collisionRadius=pe.collision.food.radius;this.isCollidable=!0;this.position=Et.create(t.loc.x,t.loc.y),this.foodObject=t,this.init(e)}init(e){this.sprite=ke.instance.matchSnakeBeanPrefab.create();var t=xe.intance.m_dicFoods.get(this.foodObject.itemId);this.sprite.init(t),this._collisionRadius=t.collisionRadius,this.sprite.pos(this.position.x,this.position.y),this.sprite.zOrder=0,e.addChild(this.sprite)}reset(e,t){this.position=Et.create(t.loc.x,t.loc.y),this.foodObject=t,this.haveEaten=!1;var i=xe.intance.m_dicFoods.get(this.foodObject.itemId);this.sprite.init(i),this._collisionRadius=i.collisionRadius,this.sprite.alpha=1,this.sprite.pos(this.position.x,this.position.y),e.addChild(this.sprite)}resetForPool(){Laya.Tween.clearAll(this.sprite),this.sprite.removeSelf()}startScalingAnimation(){let e=this.minScale+Math.random()*(this.maxScale-this.minScale),t=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:e,scaleY:e},t,null,Laya.Handler.create(this,()=>{let i=this.minScale+Math.random()*(1-this.minScale),n=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:i,scaleY:i},n,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}getPosition(){return this.position}getScore(){var e=xe.intance.m_dicFoods.get(this.foodObject.itemId);return e.points}beEatten(e,t){Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:e,y:t,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish)),this.haveEaten=!0}onFinish(){this.resetForPool(),dr.instance.removeFood(this)}destroy(){Laya.Tween.clearAll(this.sprite),this.sprite.removeSelf(),this.sprite.destroy(),this.sprite=null,this.position=null}getBoundingBox(){return new Laya.Rectangle(this.position.x-this._collisionRadius,this.position.y-this._collisionRadius,this._collisionRadius*2,this._collisionRadius*2)}checkCollision(e,t,i){let n=this.position;return ms.distance(n.x,n.y,e,t)<i+this._collisionRadius}};var Gf=class{constructor(e){this.container=e;this.pool=[]}getFood(e){let t;return this.pool.length>0?(t=this.pool.pop(),t.reset(this.container,e)):t=new Ga(this.container,e),t}returnFood(e){e.resetForPool(),this.pool.push(e)}clear(){this.pool.forEach(e=>e.destroy()),this.pool=[]}};var _o=class _o{constructor(){this.foods=[];this.foodDic=new Ie;this.container||(this.container=new Laya.Sprite),this._collision=ln.getInstance(),this.foodPool=new Gf(this.container)}static get instance(){return _o._instance||(_o._instance=new _o),_o._instance}init(){}addFoods(e){e&&e.forEach(t=>this.addFood(t))}addFood(e){if(!e)return;let t=this.foodPool.getFood(e);this._collision.addSnack([t]),this.foods.push(t),this.foodDic.set(e.unkey,t)}eateFoodIds(e,t,i){t.forEach(a=>this.eateFood(e,a));var n=i-e.score;if(n&&e.showAddScore(n),e.isSelf&&t&&t.length){var s=Math.floor(Math.random()*3)+1;let a=`soundName_eat_food_${s}`;Qe[a]?Qe.instance.playSoundByName(Qe[a]):console.warn(`音效 ${a} 不存在`)}}eateFood(e,t){var i=this.foodDic.get(t);i&&(i.haveEaten=!0,i.beEatten(e.getHead().node.x,e.getHead().node.y))}showRemain(e){e&&e.length&&e.forEach(t=>{var i=this.foodDic.get(t);i&&(i.haveEaten=!1)})}removeFood(e){this._collision.removeSnack([e]);let t=this.foods.indexOf(e);t!==-1&&this.foods.splice(t,1),this.foodDic.remove(e.foodObject.unkey),this.foodPool.returnFood(e)}removeAllFoods(){this._collision.removeSnack(this.foods),this.foods.forEach(e=>e.destroy()),this.foods=[],this.foodDic=new Ie,this.foodPool.clear()}getAllFoods(){return this.foods}clear(){this.container.removeSelf(),this.container=null,this.removeAllFoods(),this.foodPool.clear(),this.foodPool=null,_o._instance=null}};_o._instance=null;var dr=_o;var He=class{};He.ARENA_TYPE_PROFESSIONAL=1,He.ARENA_TYPE_AIRDROP=2,He.ARENA_TYPE_TRAINING=3,He.ARENA_TYPE_PVE=4,He.ARENA_TYPE_TEAM=5,He.ACTION_CREATE=1,He.ACTION_JOIN=2,He.ACTION_SIGNUP=3,He.ACTION_WATCH=4,He.ACTION_CREATE_BOOKING=5,He.ACTION_JOIN_BOOKING=6,He.STATE_WAIT=0,He.STATE_SIGNUP=2,He.STATE_GROUPED=3,He.STATE_START=10,He.CAMERA_IDLE=0,He.CAMERA_FOLLOW_ME=1,He.CAMERA_MAP_CLICK=2,He.CAMERA_DIRECT_OPERATE=3,He.CAMERA_FOLLOW_OTHER=4,He.MATCHEND_REWARD=1,He.MATCHEND_QUAN=2,He.MATCHEND_DIEJIA=3;var hi=class r{constructor(){this.inMinWaiting=!1;this.needGetRoomInfo=!1}static get instance(){return r._instance==null&&(r._instance=new r),r._instance}init(){this.closeMinView(),this.initRoomData(),this.needGetRoomInfo=!0,Laya.timer.loop(1500,this,this.onRefreshRoom)}onRefreshRoomImditely(){Laya.timer.clear(this,this.onRefreshRoom),this.needGetRoomInfo=!0,this.onRefreshRoom(),Laya.timer.loop(1500,this,this.onRefreshRoom)}updateBattleCD(){Le.instance.coolDownTime=Math.round(Le.instance.roomDto.joinCd/1e3),U.intance.event(L.EVENT_UPDATE_MATCH_ROOM),Le.instance.coolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):this.onGoMatch()}onSetCoolTime(){Le.instance.coolDownTime>=0?Le.instance.coolDownTime--:this.onGoMatch()}async onGoMatch(){Laya.timer.clear(this,this.onSetCoolTime),Laya.timer.clear(this,this.onRefreshRoom);let e=await Ze.requestPost("wxgame/room/info",{roomId:Le.instance.roomDto.roomId});if(!this.needGetRoomInfo){console.log("界面已经关掉了，不能再继续了。。。");return}var t=e.roomDto;t.joinCd==0?e.roomDto.enterGame==1?(Laya.timer.clearAll(this),Ct.instance.initSocket(),this.closeMinView()):(this.close(),U.intance.event(L.EVENT_ENTER_MATCH_ROOM,!0),ue.commTipWithYes(st.instance.get(25))):(Le.instance.roomDto=t,this.updateBattleCD())}initRoomData(){var e=Le.instance.roomDto.members.length,t=Le.instance.roomDto.maxCount;if(Le.instance.roomDto.state==He.STATE_START&&e>=t){this.onGoMatch();return}this.updateBattleCD()}async onRefreshRoom(){console.log("onRefreshRoom");let e=await Ze.requestPost("wxgame/room/info",{roomId:Le.instance.roomDto.roomId});if(!this.needGetRoomInfo){console.log("界面已经关掉了，不能再继续了!");return}Le.instance.roomDto=e.roomDto,this.initRoomData(),Le.instance.setMatchRes()}close(){this.needGetRoomInfo=!1,Laya.timer.clearAll(this),U.intance.event(L.EVENT_CLOSE_MODULE,S.EnterRoomView),this.closeMinView()}async onCreateAndJoinWithPwd(e,t,i){var n=t.isBookingMust;if(e!=He.ACTION_SIGNUP&&e!=He.ACTION_CREATE_BOOKING){var s=xe.intance.m_dicNodes.get(t.nodeId);if(s&&s.dT>800&&ae.Debug<2){De.instance.notice(H.instance.getLanguage(1306));return}}var a=!1;if(e==He.ACTION_WATCH||e==He.ACTION_JOIN&&n?a=!1:a=!0,a){let ve=!1;var c=xe.intance.m_dicArenaDic.get(t.arenaId),u=c.item[0];let be=G.instance.playerDto;if(c.type==3){if(!be.newFightHeroPk){ue.heroNotEnought(1353);return}}else if(be.fightHeroPk){let j=G.instance.m_heroData.heroVoDic.get(be.fightHeroPk);if(j){if(ve=j.state==2,e!=He.ACTION_SIGNUP&&j.state==1){Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(1176),ge.YES,null);return}}else if(e!=He.ACTION_SIGNUP){ue.heroNotEnought();return}}else if(e!=He.ACTION_SIGNUP){ue.heroNotEnought();return}if(c.item&&c.item.length>1){var u=c.item[0],p=c.item[1];e==He.ACTION_SIGNUP&&!t.preContract&&(p=p*2);var f=G.instance.m_packageData.getCountById(u);let qe=xe.intance.getArenaTypesInSubByType(c.type).heroType;var d=ke.instance.arenaType;if(ve){var h=await Ze.requestPost("wxgame/lease/heroInfo",{heroPk:be.fightHeroPk});if(h.info.leaseType==1){if(h.info.remainTicketCount<=0&&d==1){Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(1175),ge.YES,null);return}if(qe.indexOf(h.info.leaseType)<0){Lt.instance().AlertByType(ge.BASEALERTVIEW,st.instance.get(127),ge.YES,null);return}if(u!==h.info.ticketId){console.log("票不一样不能进: ","需要的门票类型："+u,"代打英雄随身带的门票类型："+h.info.ticketId),Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(1178),ge.YES,null);return}}else if(h.info.leaseType==2&&qe.indexOf(h.info.leaseType)<0){Lt.instance().AlertByType(ge.BASEALERTVIEW,H.instance.getLanguage(1299),ge.YES,null);return}}if(console.log("currNum: "+f,"needNum: "+p,"itemId: "+u),e!=He.ACTION_SIGNUP&&f<p&&(!ve||h.info.leaseType==2)){ue.titickNotEnought(u);return}}}let b=!1,w;if(e==He.ACTION_CREATE)w=await Ze.requestPost("wxgame/room/create",{numIndex:t.numIndex,nodeId:t.nodeId,password:i,arenaId:t.arenaId,roomName:t.roomName,customName:t.customName,anonymous:t.anonymous,closeLive:t.closeLive});else if(e==He.ACTION_JOIN)w=await Ze.requestPost("wxgame/room/join",{roomId:t.roomId,pass:i});else if(e==He.ACTION_CREATE_BOOKING)t.groupId&&(b=!0),w=await Ze.requestPost("wxgame/roomPreContract/create",{numIndex:t.numIndex,groupId:t.groupId,nodeId:t.nodeId,password:i,arenaId:t.arenaId,roomName:t.roomName,customName:t.customName,startTime:t.startTime,anonymous:t.anonymous,closeLive:t.closeLive});else if(e==He.ACTION_JOIN_BOOKING){var v=0;t.teamDto&&(v=t.teamDto.teamId),t.groupId&&v==0&&(b=!0),w=await Ze.requestPost("wxgame/roomPreContract/apply",{teamId:v,roomId:t.roomId,password:i})}else if(e==He.ACTION_WATCH)w=await Ze.requestPost("wxgame/room/joinWatch",{roomId:t.roomId});else if(e==He.ACTION_SIGNUP&&(w=await Ze.requestPost("wxgame/room/joinGroup",{roomId:t.roomId}),w)){De.instance.notice(H.instance.getLanguage(1373)),this.onRefreshRoomImditely();return}if(w.roomDto&&(Le.instance.roomDto=w.roomDto),w.roomDto||w.dto){if(U.intance.event(L.EVENT_Close_CreateRoom),e==He.ACTION_CREATE_BOOKING||e==He.ACTION_JOIN_BOOKING)if(b){var _=w.dto,T=_.roomId,v=_.teamDto.teamId,M=_.teamDto.leaderPlayer.name;Oe.intance.openModule(S.TeamCreateShareDialog,[T,v,M])}else De.instance.notice(H.instance.getLanguage(2e3));else e==He.ACTION_WATCH&&w.roomDto&&w.roomDto.state==10?Ct.instance.initSocket():r.instance.openEnterView();if(e==He.ACTION_CREATE||e==He.ACTION_CREATE_BOOKING){var D=c.type,F="";D==1?F="Professional Arena":D==2?F="Airdrop Arena":D==3&&(F="Training Arena");var O=c.lv,W="";O==1?W="Novice":O==2?W="Elite":O==3&&(W="Master");var V=c.coinType,ee=xe.intance.m_dicItems.get(V),Q=H.instance.getEnglishLanguage(ee.name);gtag("event","new_arena",{event_category:F,arena_type:F,coin_type:Q,arena_lv:W})}}else De.instance.notice(H.instance.getLanguage(135))}async goBookingCreateRoomDialog(e,t=0){var i=await Ze.requestPost("wxgame/roomPreContract/info",{roomId:e,teamId:t});i.dto&&(U.intance.event(L.EVENT_CLOSE_MODULE,S.CreateRoomDialog),Oe.intance.openModule(S.CreateRoomDialog,[He.ACTION_JOIN_BOOKING,!1,!0,[i.dto,i.inApply]]))}async goMatchCreateRoomDialog(e){var t=await Ze.requestPost("wxgame/room/info2",{roomId:e});t.roomDto&&(U.intance.event(L.EVENT_CLOSE_MODULE,S.CreateRoomDialog),Oe.intance.openModule(S.CreateRoomDialog,[He.ACTION_JOIN,!1,!1,t.roomDto,!0]))}goBookingInviteConfimDialog(e){Lt.instance().AlertByType(ge.InviteConfimDialog,e,ge.CANCEL,Laya.Handler.create(this,this.onAcceptInvite,[e]))}onAcceptInvite(e){console.log("onAcceptInvitation");var t=new RoomDto;t.roomId=e.roomId,t.arenaId=e.arenaId;var i=new TeamDto;i.teamId=e.teamId,t.teamDto=i,r.instance.onCreateAndJoinWithPwd(He.ACTION_JOIN_BOOKING,t,"")}goBookingApplyConfimDialog(e){Lt.instance().AlertByType(ge.ApplyConfimDialog,e,ge.CANCEL,Laya.Handler.create(this,this.onAcceptApply,[e,1]),Laya.Handler.create(this,this.onAcceptApply,[e,2]))}async onAcceptApply(e,t){console.log("onAcceptInvitation");var i=e.roomId,n=e.teamId,s=e.applicant.id,a=await Ze.requestPost("wxgame/roomPreContract/groupJoinApply",{roomId:i,teamId:n,targetPid:s,type:t});De.instance.notice(H.instance.getLanguage(2e3))}onGetBookingId(e){var t,i;let n=/\[([^\]]+)\]/g,s,a=[];for(;(s=n.exec(e))!==null&&(a.push(s[1]),a.length!==2););if(a.length>0)t=a[0],a.length>1&&(i=a[1]),console.log("中括号内容:",t,i);else{console.log("未找到中括号内容，检查链接中的 bookingId...");let u=/https?:\/\/[^\s]+/g.exec(e);if(u){let p=new URL(u[0]),f=p.searchParams.get("bookingId");if(f){t=f,console.log("链接中的 bookingId:",f);let d=p.searchParams.get("teamId");d&&(i=d,console.log("链接中的 teamId:",d))}else console.log("链接中未包含 bookingId 参数")}else console.log("文本中未找到链接")}return[t,i]}onGetNewUrl(e,t){let i=new URL(window.location.href),n=i.searchParams;n.get("bookingId")&&n.delete("bookingId"),n.has("debug")&&n.delete("debug"),n.has("address")&&n.delete("address");let a=e;return n.append("bookingId",a+""),t&&n.append("teamId",t+""),i.search=n.toString(),i.toString()}goPveMatch(){var e={arenaId:4001,coinType:0,roomId:4563,members:[{id:1000000026,x:1706,y:1350,dire:0,speed:320,heroId:15000020003,heroColor:2,name:"1000000026",icon:"10015",leader:0,kill:0,hp:899,maxHp:899,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1000000027,x:952,y:1735,dire:0,speed:320,heroId:15000030003,heroColor:2,name:"1000000027",icon:"10015",leader:0,kill:0,hp:919,maxHp:919,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1000000007,x:952,y:965,dire:0,speed:320,heroId:12000010003,heroColor:2,name:"1000000007",icon:"10015",leader:0,kill:0,hp:1018,maxHp:1018,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1003,x:2083,y:2120,dire:0,speed:0,heroId:15000010006,heroColor:1,name:"h1",icon:"10005",leader:1,kill:0,hp:1828,maxHp:1828,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:1017,nodeId:1,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!1,startTime:1727683479461}],remainderCd:604799998,startTime:1727683478029,nowTime:1727683479462,arenaType:4,watch:[],anonymous:0},t=e.members.length,i=e.members[t-1];i&&(i.id=G.instance.playerDto.pid),Le.instance.matchDto=e,lt.intance.setCurrentScene(le.M_SCENE_MATCH)}goSnakeMatch(){var e={arenaId:4001,coinType:0,roomId:4563,members:[{id:1003,x:2083,y:2120,dire:0,speed:10,heroId:15000010006,heroColor:1,name:"h1",icon:"10005",leader:1,kill:0,hp:1828,maxHp:1828,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:1017,nodeId:1,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!1,startTime:1727683479461}],remainderCd:604799998,startTime:1727683478029,nowTime:1727683479462,arenaType:4,watch:[],anonymous:0};let t=new ji;t.pid=1003,t.name="h1",t.icon="10005",t.lv=1,t.sex=1,t.country=1,t.exp=1,t.telegram=1,G.instance.playerDto=t;var i=e.members.length,n=e.members[i-1];n&&(n.id=G.instance.playerDto.pid);let s=[[1329,1350],[575,580],[952,580],[1329,580],[1706,580],[2083,580],[2460,580],[575,965],[952,965],[1329,965],[1706,965],[2083,965],[2460,965],[575,1350],[952,1350],[1706,1350],[2083,1350],[2460,1350],[575,1735],[952,1735],[1329,1735],[1706,1735],[2083,1735],[2460,1735],[575,2120],[952,2120],[1329,2120],[1706,2120],[2083,2120],[2460,2120],[982,1380],[1736,1380],[2113,1380],[675,1250]];for(let p=1;p<34;p++){let[f,d]=s[p-1],h=Math.floor(Math.random()*5)+1;e.members.push({id:1e9+p,x:f,y:d,dire:0,speed:10,heroId:12000010003,heroColor:h,name:"1000000007",icon:"10015",leader:0,kill:0,hp:1018,maxHp:1018,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461}),1e9+p===10005&&p<s.length-1}var a=34;let[c,u]=s[a-1];e.members.find(p=>p.id===1003).x=c,e.members.find(p=>p.id===1003).y=u,console.log("matchDto.members: "+e.members.length),Le.instance.matchDto=e,lt.intance.setCurrentScene(le.M_SCENE_SNAKE_MATCH)}};var Pb=class{constructor(){this.arenaId=0;this.coinType=0;this.roomId=0;this.members=[];this.item=[];this.remainderCd=0;this.startTime=0;this.nowTime=0;this.arenaType=0;this.watch=[];this.anonymous=0}},Nb=Pb;var Or=class Or{constructor(){this.m_iConnectTimes=0;this.serverTimeOffset=0;this._isMatching=!1;this.isFirst=!0;this.m_socket=new Laya.Socket,this.m_socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this.m_socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this.m_socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this.m_socket.on(Laya.Event.ERROR,this,this.onConnectError)}static get instance(){return Or._instance==null&&(Or._instance=new Or),Or._instance}get isMatching(){return this._isMatching}set isMatching(e){this._isMatching=e,e||(this.isConnect=!1)}close(){this.m_socket&&this.m_socket.close()}initSocket(){this.isMatching=!0,this.isFirst=!0;var e=Le.instance.roomDto.connectAddr;Or.m_strHttpHost=e,this.connect()}onSocketOpen(){this.isConnect=!0,this.m_iConnectTimes=0,console.log("WS----WS connected",1),Laya.timer.loop(30*1e3,this,this.sendHeart),this.onRequestTime()}onRequestTime(){var e=Y.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME,t=null;this.sendData(e,t)}onLogin(){var e=G.instance.playerDto.pid,t=Y.snake.socket.MessageType.MSG_ENTER_ROOM,i=Y.snake.socket.CS_ENTER_ROOM.fromObject({tag:"1",roleId:e});this.sendData(t,i)}onSocketClose(e){console.log("WS----closed",1),this.isMatching&&(this.isOtherLogin||(this.isConnect=!1,Ke.instance.hideLoading(),ue.popToMain()))}onReconnect(){Or.instance.reconnect(),Or.instance.m_iConnectTimes++}onConnectError(e){console.log("WS----onConnectError e:"+e,1),this.isMatching&&(this.isOtherLogin||(this.isConnect=!1,Ke.instance.hideLoading(),ue.popToMain()))}connect(){console.log("WS----connect: "+Or.m_strHttpHost,1),this.isMatching&&(this.isConnect||(Laya.timer.once(1e4,this,this.showTip),this.m_socket.connectByUrl(Or.m_strHttpHost),console.log("WS----connect websocket",1)))}clearShowTip(){Laya.timer.clear(this,this.showTip)}showTip(){ue.netError()}reconnect(){console.log("WS----reconnect: "+Or.m_strHttpHost,1),this.isMatching&&(this.isConnect||(this.m_socket.connectByUrl(Or.m_strHttpHost),console.log("WS----reconnect WS",1)))}onSendMessage(){}sendData(e,t){if(this.isMatching)if(this.isConnect){var i=t?t.serializeBinary():null;console.log(ue.GetLogTime+" WS ------>>>>>>>> SEND CMD:"+e,t?t.toObject():null);var n=yo.encodeMessage(e,i,"");this.m_socket.send(n.buffer)}else console.log(ue.GetLogTime+" WS ------>>>>>>>> SENDE RROR CMD:"+e,t?t.toObject():null)}async onMessageReveived(e){var t=yo.decodeMessage(e),i=t.msghead.msgtype,n=t.msghead.msgcode;if(i==Y.snake.socket.MessageType.MSG_HEART_BEAT)return;var s,a=Laya.ClassUtils.getClass(i+"");a?(s=a.deserializeBinary(t.msgbody).toObject(),console.log(ue.GetLogTime+" WS ------<<<<<<<< RECV CMD:"+i+", CODE:",n+", DATA:",s)):console.warn(ue.GetLogTime+" WS ------<<<<<<<< RECV CMD:"+i+", CODE:",n+", className解析失败!"),n==Y.snake.socket.MessageCode.SYS_NORMAL?i==Y.snake.socket.MessageType.MSG_USER_LOGIN||i==Y.snake.socket.MessageType.MSG_REPEAT_LOGIN_NOTICE&&(this.isOtherLogin=!0,Laya.timer.clearAll(this),this.close(),ue.otherLogin(),console.log("WS----------------------------otherLogin")):console.log(ue.GetLogTime+" msgcode------------<<<",n);let c=t,u=c.msghead.msgtype,p=c.msghead.msgcode;if(p&&p!=Y.snake.socket.MessageCode.SYS_NORMAL){console.warn("errorCode "+p+", errorMessage： "+st.instance.get(p)),p==24||p==25?(this.isMatching=!1,hi.instance.close(),Or.instance.clearShowTip(),lt.intance.currSceneName!=le.M_SCENE_MATCH&&(lt.intance.setCurrentScene(le.M_SCENE_MAIN),ue.commTipWithYes(st.instance.get(p)))):p==69&&st.instance.showErrorWord(p);return}switch(u){case Y.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME:var f=s,d=f.time;let Xr=Date.now();this.serverTimeOffset=Xr-d,this.onLogin();break;case Y.snake.socket.MessageType.MSG_ENTER_ROOM:this.isFirst=!1;var h=s,Fe=h.food,ie=h.players;tt.Instance.init();var Ce=1e12;ie.forEach(it=>{if(it.state){var Pt=it.frame;Pt<Ce&&(Ce=Pt)}}),tt.Instance.setStartFrame(Ce);var ht=[],ut=null;ie.forEach(it=>{if(it.roleId==G.instance.playerDto.pid&&(ut=it),it.state){var Pt=it.frame;if(Pt==Ce)ht.push(it);else if(Pt>Ce){var Xt=new xo;Xt.msgtype=Y.snake.socket.MessageType.MSG_NOTICE_ENTER,Xt.msgBody=it,tt.Instance.addOperation(Xt)}}});var St=new Nb;St.members=ht,St.myPlayerObject=ut,St.item=Fe,Le.instance.matchDto=St,lt.intance.setCurrentScene(le.M_SCENE_SNAKE_MATCH),this.clearShowTip(),Le.instance.stopAll=!1;break;case Y.snake.socket.MessageType.MSG_PUSH:if(!tt.Instance.isStart)return;var b=s,re=b.frame,w=b.msgList,j=[],Ce=1e12;w.forEach(it=>{var Pt=it.msghead.msgtype,Xt=it.msghead.msgcode,Qr,vi=Laya.ClassUtils.getClass(Pt+"");if(vi){var Hi=Date.now();if(Qr=vi.deserializeBinary(it.msgbody).toObject(),ae.Debug>=1){var Bn=Date.now();console.log(ue.GetLogTime+" WS ------<<<<<<<< RECV BATCH_CMD:"+Pt+", CODE:",Xt+", DATA:",Qr," dt:",Bn-Hi)}}else ae.Debug>=1&&console.warn(ue.GetLogTime+" WS ------<<<<<<<< RECV BATCH_CMD:"+Pt+", CODE:",Xt+", className解析失败!");var k=new xo;k.msgtype=Pt,k.msgBody=Qr;var y=Qr.frame;y<Ce&&(Ce=y),j.push(k)});var Z=new Va;Z.frame=re,Z.minEventFrame=Ce,Z.serverCmdDataDtos=j,ke.instance.handleFrameOperations(Z);break;case Y.snake.socket.MessageType.MSG_PLAYER_OPR:if(!tt.Instance.isStart)return;var v=s,re=v.frame,V=v.roleId;ke.instance.onRevOprPush(v);break;case Y.snake.socket.MessageType.MSG_NOTICE_ENTER:if(!tt.Instance.isStart)return;var _=s.players,re=_.frame,j=[],Ce=re,qe=new xo;qe.msgtype=i,qe.msgBody=_,j.push(qe);var Z=new Va;Z.frame=re,Z.minEventFrame=Ce,Z.serverCmdDataDtos=j,ke.instance.handleFrameOperations(Z);break;case Y.snake.socket.MessageType.MSG_PLAYER_STATE:return;var re,ie,T;case Y.snake.socket.MessageType.MSG_PLAYER_OUT:if(!tt.Instance.isStart)return;var V=s.roleId;$e.instance.removeSnake(V);break;case Y.snake.socket.MessageType.MSG_EAT_FOOD:if(!tt.Instance.isStart)return;let Ot=s;var M=Ot.fid,D=Ot.score,F=Ot.lenght,V=Ot.roleId,O=Ot.remain;dr.instance.showRemain(O);var ve=Ot.head,re=Ot.frame,W=ke.instance.getRoleById(V);W&&(W.updateHead(re,ve,Ot.speed,Ot.curDir,Ot.aimDir),W.updateLen(F),dr.instance.eateFoodIds(W,M,D),W.score=D);break;case Y.snake.socket.MessageType.MSG_PLAYER_COLLISION:if(!tt.Instance.isStart)return;let gr=s;var V=gr.roleId,ee=gr.food,Q=gr.taret,ve=gr.head,re=gr.frame,be=gr.die,j=[],Ce=re,qe=new xo;qe.msgtype=i,qe.msgBody=s,j.push(qe);var Z=new Va;Z.frame=re,Z.minEventFrame=Ce,Z.serverCmdDataDtos=j,ke.instance.handleFrameOperations(Z);break;case Y.snake.socket.MessageType.MSG_GEN_FOOD:var ye=s,re=ye.frame;dr.instance.addFoods(ye.food);break;case Y.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA:var C=s;console.log("收到了恢复数据返回");var Fe=C.food,ie=C.players;tt.Instance.init();var Ce=1e12;ie.forEach(it=>{if(it.state){var Pt=it.frame;Pt<Ce&&(Ce=Pt)}}),tt.Instance.setStartFrame(Ce);var ht=[],ut=null;ie.forEach(it=>{if(it.roleId==G.instance.playerDto.pid&&(ut=it),it.state){var Pt=it.frame;if(Pt==Ce)ht.push(it);else if(Pt>Ce){var Xt=new xo;Xt.msgtype=Y.snake.socket.MessageType.MSG_NOTICE_ENTER,Xt.msgBody=it,tt.Instance.addOperation(Xt)}}});var St=new Nb;if(St.members=ht,St.myPlayerObject=ut,St.item=Fe,ut&&ut.state)ke.instance.onRevRestorePush(St);else if(ut.result){var ct=ut.result,i=ct.msghead.msgtype,n=ct.msghead.msgcode,s,a=Laya.ClassUtils.getClass(i+"");if(a){var xr=Date.now();if(s=a.deserializeBinary(ct.msgbody).toObject(),ae.Debug>=1){var hr=Date.now();console.log(ue.GetLogTime+" WS ------<<<<<<<< RECV INSERT_CMD:"+i+", CODE:",n+", DATA:",s," dt:",hr-xr)}}else ae.Debug>=1&&console.warn(ue.GetLogTime+" WS ------<<<<<<<< RECV INSERT_CMD:"+i+", CODE:",n+", className解析失败!");var Mt=s;Le.instance.onSetMatchEnd(Mt,!0)}else{var Mt=new Y.snake.socket.SC_BATTLE_END;Mt.res=!1,Mt.roleId=ut.roleId,Mt.score=ut.score,Mt.kills=ut.kills,Mt.length=ut.length,Mt.alive=ut.length,Mt.items=[],Le.instance.onSetMatchEnd(Mt,!0)}break;case Y.snake.socket.MessageType.MSG_BATTLE_END:var Mt=s,Yr=Mt.res;Le.instance.onSetMatchEnd(Mt);break;default:break}}sendHeart(){this.m_socket.connected&&this.sendData(Y.snake.socket.MessageType.MSG_HEART_BEAT,null)}};Or.m_strHttpHost=getWSServer();var Ct=Or;var Al=class Al{constructor(){this._ws=null;this._magicstr=null;this._heartBeatMissed=0;this._heartBeatMissedMax=3;this._heartBeatInterval=5e3;this.wsUrl=getWSServer();this.interval=0;this.trySendNum=0;this.trySendMax=3;this.isShowReLogin=!1;this.isInFightNotFinishShowRelogin=!1;this.login_manual_close_socket=!1;this.isPopClose=!1;this.isOtherLogin=!1;this._serverTimeDiff=0;this._serverTime=0}get magicstr(){return this._magicstr}set magicstr(e){this._magicstr=e}getServerTimeDiff(){return this._serverTimeDiff}getServerTime(){return this._serverTime}static getInstance(){return Al.singleton}createWebSocket(){try{this._ws=new WebSocket(this.wsUrl),this.init()}catch(e){console.log("%c WSM","color:#2a5caa","创建 WebSocket 异常",e),this.reconnect()}}connect(){console.log("%c WSM","color:#2a5caa","connect url = "+this.wsUrl),this.trySendNum=0,this.close(),Laya.timer.once(100,this,this.createWebSocket)}init(){this._ws.binaryType="arraybuffer",this._ws.onopen=e=>{console.log(ue.GetLogTime+" websocket ----_ws.onopen"),this.onOpen()},this._ws.onmessage=e=>{this.onMessage(e.data)},this._ws.onerror=e=>{console.log("%c WSM","color:#2a5caa","_ws.onerror",e),this.onError(e)},this._ws.onclose=e=>{console.log("%c WSM","color:#2a5caa","_ws.onclose",e),this.onClose()}}onOpen(){this.heartbeatTimer(),this.isShowReLogin=!1,this.stopReconnectTimer(),Ke.instance.hideLoading(),U.intance.event(L.ON_CONNECT_GAME_SERVER)}onError(e){console.log(ue.GetLogTime+" websocket ----onError------------>",e),this.onClose()}onClose(){console.log(ue.GetLogTime+" websocket ----onClose------------>",this._ws),this.login_manual_close_socket,this.close(),this.login_manual_close_socket=!1}stopTimer(){this.stopHeartbearTimer(),this.stopRequestMagicstrTimer()}close(){console.log(ue.GetLogTime+" websocket ----WS:close"),this.login_manual_close_socket=!0,this._ws&&(this._ws.close(),this._ws=null)}clear(){this.isPopClose=!1,this._ws&&(this._ws.onclose&&(this._ws.onclose=null),this._ws.onerror&&(this._ws.onerror=null),this._ws.close(),this._ws=null)}clearAll(){this.isPopClose=!1,this.stopShowLoad(),this.close(),this.stopTimer()}isConnected(){return this._ws&&this._ws.readyState===WebSocket.OPEN}send(e,t,i=!0){if(this.isPopClose||this.startShowLoad(),this.isConnected()){var n=this._magicstr,s=t?t.serializeBinary():null;e!=Y.snake.socket.MessageType.MSG_HEART_BEAT&&console.log(ue.GetLogTime+" WSM ------>>>>>>>> SEND CMD:"+e,t?t.toObject():null);var a=yo.encodeMessage(e,s,n);this._ws.send(a.buffer)}else console.log(ue.GetLogTime+" WSM ------>>>>>>>> SENDE RROR CMD:"+e,t?t.toObject():null)}onMessage(e){this.stopShowLoad();var t=yo.decodeMessage(e);this._heartBeatMissed=-1;var i=t.msghead.msgtype,n=t.msghead.msgcode;if(i!=Y.snake.socket.MessageType.MSG_HEART_BEAT){var s,a=Laya.ClassUtils.getClass(i+"");if(a?(s=a.deserializeBinary(t.msgbody).toObject(),console.log(ue.GetLogTime+" WSM ------<<<<<<<< RECV CMD:"+i+", CODE:",n+", DATA:",s)):console.warn(ue.GetLogTime+" WSM ------<<<<<<<< RECV CMD:"+i+", CODE:",n+", className解析失败!"),n==Y.snake.socket.MessageCode.SYS_NORMAL)i==Y.snake.socket.MessageType.MSG_USER_LOGIN?(this.requireMagicstrTimer(),this.requireMagicstr(),this.heartbeatTimer()):i==Y.snake.socket.MessageType.MSG_REPEAT_LOGIN_NOTICE&&(this.isOtherLogin=!0,Laya.timer.clearAll(this),this.close(),Ct.instance.close(),ue.otherLogin(),console.log("WS----------------------------otherLogin"));else if(console.log("%c WSM","color:#2a5caa","msgcode--------------->",n),n==3)this.requireMagicstrTimer(),this.requireMagicstr(),this.heartbeatTimer();else{let c=st.instance.get(n);n==4&&(this.startShowLoad(0),Laya.timer.clear(this,this.dataErrorFun),Laya.timer.once(3e3,this,this.dataErrorFun)),ae.vType!=2?ue.commTipWithYes(c+" code:"+n):ue.commTipWithYes(c)}U.intance.event("msg_"+i,[s,n])}}dataErrorFun(){Laya.timer.clear(this,this.dataErrorFun),this.stopShowLoad()}reconnect(){if(this.isPopClose){this.stopShowLoad();return}if(console.log("%c WSM","color:#2a5caa","reconnect 开始重连服务器"),this.isConnected())return;if(this.isShowReLogin){this.stopTimer();return}if(this.isOtherLogin){this.stopTimer();return}this.stopShowLoad();let e=String(this.trySendNum)+"/"+String(this.trySendMax)+" "+H.instance.getLanguage("正在尝试重连");Ke.instance.showLoadingByInfo(e),this.startReconnectTimer()}startReconnectTimer(){this.stopReconnectTimer(),this.trySendNum=0,console.log("%c WSM","color:#2a5caa","startReconnectTimer this.trySendNum-------->",this.trySendNum),Laya.timer.clear(this,this.reconnectFun),Laya.timer.loop(3e3,this,this.reconnectFun)}reconnectFun(){if(this.trySendNum++,this.trySendNum>this.trySendMax)console.log("%c WSM","color:#2a5caa","重连次数超过"),this.trySendNum=0,Ke.instance.hideLoading(),this.stopReconnectTimer(),this.onClose(),ue.netError();else{console.log("%c WSM","color:#2a5caa","开始重连次数",String(this.trySendNum));let e=String(this.trySendNum)+"/"+String(this.trySendMax)+" "+H.instance.getLanguage("正在尝试重连");Ke.instance.showLoadingByInfo(e),this.createWebSocket()}}stopReconnectTimer(){Laya.timer.clear(this,this.reconnectFun),this._heartBeatMissed=0}stopHeartbearTimer(){Laya.timer.clear(this,this.sendHeartBeat),this._heartBeatMissed=0}heartbeatTimer(){this.stopHeartbearTimer(),Laya.timer.loop(this._heartBeatInterval,this,this.sendHeartBeat)}sendHeartBeat(){this.send(Y.snake.socket.MessageType.MSG_HEART_BEAT,null,!1),this._heartBeatMissed+=1,this._heartBeatMissed>=this._heartBeatMissedMax&&(console.log("%c WSM","color:#2a5caa","发送大厅心跳超过最大次数,关闭Socket",this._heartBeatMissed),this.stopHeartbearTimer(),this.stopRequestMagicstrTimer(),this.close(),this.reconnect())}stopRequestMagicstrTimer(){Laya.timer.clear(this,this.requireMagicFun)}requireMagicstrTimer(){return;var e}requireMagicFun(){}requireMagicstr(){}getConnectType(){}startShowLoad(e=1e3){Laya.timer.clear(this,this.showLoadingFun),Laya.timer.once(e,this,this.showLoadingFun)}showLoadingFun(){console.log("%c WSM","color:#2a5caa","startShowLoad","开始显示loading"),Ke.instance.showLoadingByInfo(H.instance.getLanguage("开始重连服务器"))}stopShowLoad(){Ke.instance.hideLoading(),console.log("%c WSM","color:#2a5caa","停止显示loading"),Laya.timer.clear(this,this.showLoadingFun)}showLog(e,...t){console.log("%c WSM","color:#2a5caa",e,...t)}};Al.singleton=new Al;var Fb=Al,cr=Fb.getInstance();var un=class{constructor(){}};un.MONTH="months",un.DAYS="days",un.HOURS="hours",un.MINUTES="minutes",un.SECOUNDS="seconds",un.MS="ms";var Wt=class Wt{constructor(){}static formatMM(e){if(e<=0)return"00:000";let t,i;t=e/1e3,i=e%1e3;let n="";return t<=9&&(n+="0"),n+=Math.floor(t),n+=":",i<=9?n+="00":i<=99&&(n+="0"),n+=i,n}static format(e,t=":",i=!0){if(e<=0)return i?"00:00:00":"00:00";let n,s,a,c,u;c=e/3600,a=e%3600,u=a/60,n=a%60;let p="";return i&&(c<=9&&(p+="0"),p+=Math.floor(c)+t),u<=9&&(p+="0"),p+=Math.floor(u)+t,Math.ceil(n)<=9&&(p+="0"),p+=Math.ceil(n),p}static formatWithDay(e,t=":",i=!1){if(e<=0)return"00:00";let n,s,a,c,u;s=e/86400,a=e%86400,c=a/3600,a=a%3600,u=a/60,n=a%60;let p="";return s>=1?(p=H.instance.getLanguage(1660,Math.floor(s))+" ",c<=9&&(p+="0"),i&&n%2!=0&&(t=ue.getColorText(t,"#412b20")),p+=Math.floor(c)+t,u<=9&&(p+="0"),p+=Math.floor(u)):(c<=9&&(p+="0"),p=Math.floor(c)+t,u<=9&&(p+="0"),p+=Math.floor(u)+t,Math.ceil(n)<=9&&(p+="0"),p+=Math.ceil(n)),p}static formatWithSecondByMs(e){return`${e/1e3}`}static formatWithDayByMs(e,t=":",i=!1){if(e<=0)return"00:00";let n,s,a,c,u,p;a=e/864e5,c=e%864e5,u=c/36e5,c=c%36e5,p=c/6e4,c=c%6e4,s=c/1e3,n=c%1e3;let f="";return a>=1&&(f=H.instance.getLanguage(1660,Math.floor(a))+" "),u<=9&&(f+="0"),f+=Math.floor(u)+t,p<=9&&(f+="0"),f+=Math.floor(p)+t,Math.ceil(s)<=9&&(f+="0"),f+=Math.floor(s)+" ",f+=Math.ceil(n),f}static getTimeArray(e,t="HH-MM-SS"){if(e=Math.max(0,e),t.indexOf("-")==-1)return[];let i=[],n=t.split("-");for(let s of n)s=="DD"?i.push(Math.floor(e/Wt.OneDaySceond)):s=="HH"?i.push(Math.floor(e%Wt.OneDaySceond/Wt.OneHourSceond)):s=="MM"?i.push(Math.floor(e%Wt.OneHourSceond/Wt.OneMiniuteSecond)):s=="SS"&&i.push(e%Wt.OneMiniuteSecond);return i}static getServerDate(e){return new Date(e)}static formatTimeStamp(e,t="YY-MT-DD HH:MM:SS",i=!1){let n=Wt.getServerDate(e),s="";if(t.indexOf("YY")>=0&&(s=(i?n.getUTCFullYear():n.getFullYear())+"",t=t.replace("YY",s)),t.indexOf("MT")>=0){let a=(i?n.getUTCMonth():n.getMonth())+1;a>9?s=a+"":s="0"+a,t=t.replace("MT",s)}if(t.indexOf("DD")>=0){let a=i?n.getUTCDate():n.getDate();a>9?s=a+"":s="0"+a,t=t.replace("DD",s)}if(t.indexOf("HH")>=0){let a=i?n.getUTCHours():n.getHours();a>9?s=a+"":s="0"+a,t=t.replace("HH",s)}if(t.indexOf("MM")>=0){let a=i?n.getUTCMinutes():n.getMinutes();a>9?s=a+"":s="0"+a,t=t.replace("MM",s)}if(t.indexOf("SS")>=0){let a=i?n.getUTCSeconds():n.getSeconds();a>9?s=a+"":s="0"+a,t=t.replace("SS",s)}return t}static formatTimeStamps(e,t="YY-MT-DD HH:MM:SS"){let i=Wt.getServerDate(e),n=t;return n=Wt.parseTimeDetail(i,n,"YY",!1),n=Wt.parseTimeDetail(i,n,"MT",!1),n=Wt.parseTimeDetail(i,n,"DD",!1),n=Wt.parseTimeDetail(i,n,"HH",!0),n=Wt.parseTimeDetail(i,n,"MM",!0),n=Wt.parseTimeDetail(i,n,"SS",!0),n}static parseTimeDetail(e,t,i,n){if(t.indexOf(i)>=0){let s,a;i=="YY"?a=e.getFullYear():i=="MT"?a=e.getMonth()+1:i=="DD"?a=e.getDate():i=="HH"?a=e.getHours():i=="MM"?a=e.getMinutes():i=="SS"&&(a=e.getSeconds()),a>9||!n?s=a.toString():s="0"+a,t=t.replace(i,s)}return t}static getServerTimeStr(){return Wt.formatTimeStamp(Laya.timer.currTimer)}static getTimeArr(){return Wt.getServerTimeStr().split("/")}static get getDay(){let t=Wt.getServerTimeStr().split("/");return parseInt(t[2])}static parseSheetTime(e){let t="";if(e){let i=e.length;for(let n=0;n<i;n++){let s="";e[n]<10?s="0"+e[n]:s=e[n],n!==i-1&&(s=s+":"),t+=s}}return t}static dateStringToTimestamp(e,t){let[i,n,s]=e.split("-").map(Number),a=Number(t),c=new Date(i,n-1,s,a).getTime();return Number(c)}static getTimestamp(e,t,i,n,s){return new Date(e,t-1,i,n,s).getTime()}static getCurrentDayTimestamp(){let e=new Date,t=e.getHours();return e.setHours(t,0,0,0),e.getTime()}static getYearMonthDat(e){let t=new Date(e),i=t.getFullYear(),n=t.getMonth()+1<10?"0"+(t.getMonth()+1):""+(t.getMonth()+1),s=t.getDate()<10?"0"+t.getDate():""+t.getDate();return`${i}-${n}-${s}`}static formatDayAndTime(e,t="-"){let i=new Date(e),n=i.getFullYear(),s=String(i.getMonth()+1).padStart(2,"0"),a=String(i.getDate()).padStart(2,"0"),c=String(i.getHours()).padStart(2,"0"),u=String(i.getMinutes()).padStart(2,"0");return{date:`${n}${t}${s}${t}${a}`,time:`${c}:${u}`}}static formatTimeAgo(e){return e<60*1e3?H.instance.getLanguage(1188):e<60*60*1e3?H.instance.getLanguage(2004,Math.floor(e/6e4)):e<24*60*60*1e3?H.instance.getLanguage(2003,Math.floor(e/36e5)):H.instance.getLanguage(2002,Math.floor(e/(24*60*60*1e3)))}static formatTimeExpires(e){return e<60*1e3?H.instance.getLanguage(1214,e):e<60*60*1e3?H.instance.getLanguage(1215,Math.floor(e/6e4)):e<24*60*60*1e3?H.instance.getLanguage(1216,Math.floor(e/36e5)):H.instance.getLanguage(1217,Math.floor(e/(24*60*60*1e3)))}static getTimeDifference(e,t=un.MONTH){let i=new Date,s=new Date(e*1e3).getTime()-i.getTime();if(s<0)return{months:0,days:0,hours:0,minutes:0,seconds:0,ms:0};let a=s,c=Math.floor(s/1e3),u=Math.floor(c/60),p=Math.floor(u/60),f=Math.floor(p/24),d=Math.floor(f/30);return t==="months"?(f%=30,p%=24,u%=60,c%=60,a%=1e3):t==="days"?(p%=24,u%=60,c%=60,a%=1e3,d=0):t==="hours"?(u%=60,c%=60,a%=1e3,d=0,f=0):t==="minutes"?(c%=60,a%=1e3,d=0,f=0,p=0):t==="seconds"?(a%=1e3,d=0,f=0,p=0,u=0):t==="ms"&&(d=0,f=0,p=0,u=0,c=0),{months:t==="months"?d:0,days:t==="months"||t==="days"?f:0,hours:t==="months"||t==="days"||t==="hours"?p:0,minutes:t==="months"||t==="days"||t==="hours"||t==="minutes"?u:0,seconds:t!=="ms"?c:0,ms:a}}static checkTimeValid(e){let t=Math.floor(Date.now()/1e3),i=24*60*60;return!(t-e>i)}};Wt.OneDaySceond=24*3600,Wt.OneHourSceond=3600,Wt.OneMiniuteSecond=60;var gi=Wt;var Me=class r{constructor(){this.loginRequestInfo={time:0,randomHex:"",r:"",s:"",v:"",roleId:""}}get getloginRequestInfo(){return this.loginRequestInfo}static get instance(){return r._instance||(r._instance=new r),r._instance}async init(){if(typeof window.ethereum>"u"||ae.Debug==2){De.instance.notice(H.instance.getLanguage(130));return}Ge.instance.sendCustumEvent(10),this.walletClient=Ba({transport:wa(window.ethereum)});var e,t=await r.instance.walletClient.getChainId();e=this.getChain(t),e||(e=cs),this.publicClient=ml({chain:e,transport:il()}),this.walletClient=Ba({chain:e,transport:wa(window.ethereum)});let i=await r.instance.publicClient.getChainId();console.log("clientChainId",t,i),Ge.instance.sendCustumEvent(12),this.registerProxy(),Ge.instance.sendCustumEvent(17)}async registerProxy(){ys.instance.init()}async getWalletAddress(){if(this.walletAddress)return this.walletAddress;let[e]=await this.walletClient.requestAddresses();return e}async dappLogin(){console.log("dappLogin this.walletAddress: "+this.walletAddress),Ge.instance.sendCustumEvent(13),this.walletAddress=await this.getWalletAddress(),Ge.instance.sendCustumEvent(14),await this.signAndLogin()}async signAndLogin(e=!1){var t=!1;let i=new Date().getTime(),n="",s="",a="",c="";if(ae.Debug!=0)t=!1;else{let f=localStorage.getItem("TOX-COOKIE-CODE"+r.instance.walletAddress);if(!e&&f){f=Vi.decode(f);let d=f.split("&");i=parseFloat(d[0]),n=d[1],s=d[2],a=d[3],c=d[4];let h=gi.checkTimeValid(i);f&&i&&h&&n&&s&&a&&c&&(t=!1),console.log("needSign: "+t)}}if(t){console.log("111");var u=fl().substring(0,32);n=we(u,{size:32}),i=new Date().getTime();let d=this.walletAddress+n+i,h=new Wf.default("SHA-256","TEXT",{encoding:"UTF8"});h.update(d);let b=h.getHash("HEX");if(console.log("进入签名",1),this.walletClient)try{let w=await this.walletClient.signMessage({account:this.walletAddress,message:b});console.log("签名结束",1);let v=w.substring(2);s="0x"+v.substring(0,64),a="0x"+v.substring(64,128),c="0x"+v.substring(128,130)}catch{De.instance.notice("签名失败,重新签名"),Laya.timer.once(1e3,this,this.signAndLogin,[e]);return}}this.loginRequestInfo.time=i,this.loginRequestInfo.randomHex=n,this.loginRequestInfo.r=s,this.loginRequestInfo.s=a,this.loginRequestInfo.v=c,this.loginRequestInfo.roleId=this.walletAddress,Ge.instance.sendCustumEvent(15);var p=Vi.encode(i+"&"+n+"&"+s+"&"+a+"&"+c);localStorage.setItem("TOX-COOKIE-CODE"+r.instance.walletAddress,p),cr.connect()}async main(){let e=ml({chain:Oa,transport:il()}),t=Ba({chain:Oa,transport:wa(window.ethereum)}),[i]=await t.requestAddresses(),n=await t.signMessage({account:i,message:"Hello world!"}),s=await e.verifyMessage({address:i,message:"Hello world!",signature:n});console.log("valid: "+s);let a=await fetch("http://localhost:3000/api/login",{method:"POST",body:JSON.stringify({address:t.account.address,signature:n})})}async refreshToken(){let e,t=localStorage.getItem("TOX-COOKIE-CODE"+r.instance.walletAddress);t=Vi.decode(t);let i=t.split("&"),n=parseFloat(i[0]),s=i[1],a=i[2],c=i[3],u=i[4];if(n&&s&&a&&c&&u){let p={debug:ae.Debug,address:this.walletAddress,time:n,randomHex:s,r:a,s:c,v:u};e=await Ze.requestPost("wxgame/player/getJwt",p,!1,!1).catch(f=>{}),e&&localStorage.setItem("TOX-COOKIE"+r.instance.walletAddress,e.loginToken)}return e}async checkNickName(e){let t={name:e,address:this.walletAddress};return await Ze.requestPost("wxgame/player/nameCheck",t,!1,!1).catch(n=>{Ke.instance.hideLoading(),console.log("checkResult 失败")})}waitGetAccount(){Laya.timer.loop(2e3,this,this.getAcccount)}async getAcccount(){console.log("getAcccount");var e=!0;let t=new Date().getTime(),i="",n="",s="",a="";if(ae.Debug!=0)e=!1;else{let f=localStorage.getItem("TOX-COOKIE-CODE"+r.instance.walletAddress);f=Vi.decode(f);let d=f.split("&");t=parseFloat(d[0]),i=d[1],n=d[2],s=d[3],a=d[4],t&&i&&n&&s&&a&&(e=!1),console.log("needSign: "+e)}if(e){var c=fl().substring(0,32);i=we(c,{size:32}),t=new Date().getTime();let d=this.walletAddress+i+t,h=new Wf.default("SHA-256","TEXT",{encoding:"UTF8"});h.update(d);let b=h.getHash("HEX");console.log("进入签名",1);let w=await this.walletClient.signMessage({account:this.walletAddress,message:b});console.log("签名结束",1);let v=w.substring(2);n="0x"+v.substring(0,64),s="0x"+v.substring(64,128),a="0x"+v.substring(128,130)}let u,p={address:this.walletAddress,time:t,randomHex:i,r:n,s,v:a};if(u=await Ze.requestPost("wxgame/player/getAccount",p,!1,!1).catch(f=>{}),u){Laya.timer.clear(this,this.getAcccount);let f=u.playerDto;localStorage.setItem("TOX-COOKIE"+r.instance.walletAddress,u.loginToken),U.intance.event(L.EVENT_WAIT_PLAYERINFO,f)}}async createAcccount(e,t,i,n,s){console.log("createAcccount");var a=!0;let c=new Date().getTime(),u="",p="",f="",d="";if(ae.Debug!=0)a=!1;else{let v=localStorage.getItem("TOX-COOKIE-CODE"+r.instance.walletAddress);v=Vi.decode(v);let _=v.split("&");c=parseFloat(_[0]),u=_[1],p=_[2],f=_[3],d=_[4],c&&u&&p&&f&&d&&(a=!1)}if(a){var h=fl().substring(0,32);u=we(h,{size:32}),c=new Date().getTime();let _=this.walletAddress+u+c,T=new Wf.default("SHA-256","TEXT",{encoding:"UTF8"});T.update(_);let M=T.getHash("HEX");if(console.log("进入签名",1),this.walletClient){let D=await this.walletClient.signMessage({account:this.walletAddress,message:M});console.log("签名结束",1);let F=D.substring(2);p="0x"+F.substring(0,64),f="0x"+F.substring(64,128),d="0x"+F.substring(128,130)}}var b=Y.snake.socket.MessageType.MSG_USER_REGISTER,w=Y.snake.socket.CS_USER_REGISTER.fromObject({icon:i,userName:e,country:n,walletAddr:this.walletAddress,invite:s});return cr.send(b,w),null}async newAllowanceAddress(e,t){let i=r.instance.walletAddress,n=e;try{if(console.log("查看是否已经授权, owner:"+i+", spender:"+n+", publicClient.chain.id:"+this.publicClient.chain.id),t==0)return!0;let s=await r.instance.publicClient.readContract({address:t,abi:Dt.TOKEN_ERC20ABI,functionName:"allowance",args:[i,n]});if(s=="0"){console.log("未授权，进行授权, owner:"+i+", allowance:"+s+", walletClient.chain.id:"+this.walletClient.chain.id);let a=await r.instance.walletClient.writeContract({address:t,abi:Dt.TOKEN_ERC20ABI,functionName:"approve",args:[n,"100000000000000000000000000000000000000000000000"],account:i});console.log("授权hash============"+a);let c=await r.instance.publicClient.waitForTransactionReceipt({hash:a});return console.log(`Tx with hash: ${a}`,c),c&&c.status=="success"?(console.log(`Tx successful with hash: ${a}`),!0):!1}else return console.log("已授权, owner:"+i+", allowance:"+s),!0}catch(s){if(console.log("授权错误====》",s),s instanceof Error){let a=s.message;console.log("授权错误====》",a)}}}async allowanceAddressByTokenAddress(e,t){let i=new window.web3.eth.Contract(Dt.TOKEN_ERC20ABI,t);return await i.methods.allowance(this.walletAddress,e).call()=="0"&&(console.log("ERC20 allowance!"),await i.methods.approve(e,"100000000000000000000000000000000000000000000000").send({from:this.walletAddress},(s,a)=>{if(s)return Ke.instance.hideLoading(),!1})),!0}async getERC20TokenBalance(e){return window.ethereum,await new window.web3.eth.Contract(Dt.TOKEN_ERC20ABI,e).methods.balanceOf(this.walletAddress).call()}async getBalance2(e,t=void 0){let i=this.walletAddress;t&&(i=t);let n;return!e||e==Dt.ADDRESS0?n=await r.instance.publicClient.getBalance({address:i}):n=await this.publicClient.readContract({address:e,abi:Dt.TOKEN_ERC20ABI,functionName:"balanceOf",args:[i]}),console.log("getBalance2 publicClient.chain.id:"+this.publicClient.chain.id,"代币地址",e,"余额：",n),n}async getBankBalance(e,t,i){if(i=="WBNB"){let n=await r.instance.publicClient.getBalance({address:t});if(n)return n}else{let n=this.getBalance2(e,t);if(n)return n}}async switchChain(e){var t=this.getChainName(e);let i=await r.instance.walletClient.getChainId();if(ae.isInto&&Laya.Browser.onIOS&&i!==e)return De.instance.notice(H.instance.getLanguage(1172,t)),!1;try{console.log("switchChain id:"+e),await this.walletClient.switchChain({id:e})}catch(n){if(console.log(n),n instanceof Error){let s=n.message;console.log("切换错误====》",s)}return De.instance.notice(H.instance.getLanguage(1172,t)),!1}return await this.resetPublicAndWallet(e),!0}async addChain(e){console.log(e);var t=this.getChain(e);let i=await this.walletClient.addChain({chain:t});console.log(i)}getChain(e){var t=null;switch(e){case cs.id:t=cs;break;case Sf.id:t=Sf;break;case Oa.id:t=Oa;break;case Rf.id:t=Rf;break;case Mf.id:t=Mf;break;case Lf.id:t=Lf;break;case Tf.id:t=Tf;break;case Fa.id:t=Fa;break;case Cf.id:t=Cf;break;case Pa.id:t=Pa;break;case Na.id:t=Na;break}return t}getChainName(e){var t="",i=this.getChain(e);return i&&(t=i.name),t}async resetPublicAndWallet(e){console.log("resetPublicAndWallet chain:"+e);var t=this.getChain(e);await r.instance.reInitPublicClient(t),await r.instance.reInitWalletClient(t)}reInitPublicClient(e){console.log("reInitPublicClient chain:"+e),this.publicClient=ml({chain:e,transport:il()})}reInitWalletClient(e){console.log("reInitWalletClient chain:"+e),this.walletClient=Ba({chain:e,transport:wa(window.ethereum)})}async getAuthStatus(){let e=r.instance.walletAddress;try{return await r.instance.publicClient.readContract({address:Dt.SAT_ADDRESS,abi:Dt.SAT_ABI,functionName:"getAuthStatus",args:[e]})}catch(t){if(console.log("授权错误====》",t),t instanceof Error){let i=t.message;console.log("授权错误====》",i)}}}};var Rn=class Rn{constructor(e,t){this._lineIndex=0;this._isShow=!1;this._alpha=.6;this.isInit=!1;this._isRelease=!0;this._count=0;this.maxCount=1e3;this.prevX=0;this.prevY=0;this._stage=e,this._isRelease=t,this._actionLineList=[],this._time=new Date().getTime();let i,n,s,a,c=function(f){i=f.stageX,n=f.stageY,s=i,a=n},u=function(f){s=f.stageX,a=f.stageY},p=function(f){let d=Laya.stage.width-(s-i)<160,h=Laya.stage.height-(a-n)<160;d&&h&&vo.debugger&&(Laya.Browser.window.console.log=vo.addConsoleLog,vo.debugger.showOrHide())};Laya.stage.on(Laya.Event.MOUSE_DOWN,this,c),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,u),Laya.stage.on(Laya.Event.MOUSE_UP,this,p)}initDebugView(){if(!this.isInit){this.totalW=Laya.stage.width,this.totalH=Laya.stage.height/2,this.bigContainer=new Laya.Sprite,this.bigContainer.zOrder=2e3,this.bigContainer.name="bigContainerDebug",this.bgContainer=new Laya.Sprite,this._bgSp=new Laya.Sprite,this._bgSp.alpha=this._alpha,this._bgSp.graphics.drawRect(0,0,this.totalW,this.totalH,"#000000"),this._bgSp.mouseEnabled=!1,this._debugInfoTf=new Laya.Text,this._debugInfoTf.color="#ffffff",this._debugInfoTf.width=this.totalW-10,this._debugInfoTf.height=this.totalH-10,this._debugInfoTf.overflow="scroll",this._debugInfoTf.wordWrap=!0;let e="[LOADINFO - DEBUGGER]";this.appendText("加载调试信息 "+e,0,!1),this._closeTf=new Laya.Label,this._closeTf.color="#ff0000",this._closeTf.valign="middle",this._closeTf.width=55,this._closeTf.height=55,this._closeTf.borderColor=Rn.DEFAULT_COLOR,this._closeTf.text="关闭",this._autoScrollTf=new Laya.Label,this._autoScrollTf.color="#ff0000",this._autoScrollTf.valign="middle",this._autoScrollTf.width=55,this._autoScrollTf.height=55,this._autoScrollTf.borderColor=Rn.DEFAULT_COLOR,this._autoScrollTf.text="自动卷屏",this._bgAlpha0=new Laya.Label,this._bgAlpha0.color="#ff0000",this._bgAlpha0.valign="middle",this._bgAlpha0.width=55,this._bgAlpha0.height=55,this._bgAlpha0.borderColor=Rn.DEFAULT_COLOR,this._bgAlpha0.text="背景-",this._bgAlpha1=new Laya.Label,this._bgAlpha1.color="#ff0000",this._bgAlpha1.valign="middle",this._bgAlpha1.width=55,this._bgAlpha1.height=55,this._bgAlpha1.borderColor=Rn.DEFAULT_COLOR,this._bgAlpha1.text="背景+",this._clearTf=new Laya.Label,this._clearTf.color="#ff0000",this._clearTf.valign="middle",this._clearTf.width=55,this._clearTf.height=55,this._clearTf.borderColor=Rn.DEFAULT_COLOR,this._clearTf.text="清理",this._testTf=new Laya.Label,this._testTf.color="#ff0000",this._testTf.width=55,this._testTf.height=55,this._testTf.borderColor=Rn.DEFAULT_COLOR,this._testTf.text="点穿",this.bgContainer.x=5,this.bgContainer.y=5,this._debugInfoTf.x=5,this._debugInfoTf.y=5,this.bgContainer.addChild(this._bgSp),this.bgContainer.addChild(this._debugInfoTf),this._closeTf.x=this.totalW-60,this._closeTf.y=5,this.bgContainer.addChild(this._closeTf),this._autoScrollTf.x=this.totalW-60,this._autoScrollTf.y=105,this.bgContainer.addChild(this._autoScrollTf),this._bgAlpha0.x=this.totalW-60,this._bgAlpha0.y=205,this.bgContainer.addChild(this._bgAlpha0),this._bgAlpha1.x=this.totalW-60,this._bgAlpha1.y=305,this.bgContainer.addChild(this._bgAlpha1),this._clearTf.x=this.totalW-60,this._clearTf.y=405,this.bgContainer.addChild(this._clearTf),this._testTf.x=this.totalW-60,this._testTf.y=505,this.bigContainer.addChild(this.bgContainer),this.bigContainer.addChild(this._testTf),this._autoScroll=!0,this._hide=!0,this._debugInfoTf.on(Laya.Event.MOUSE_DOWN,this,this.startScrollText),this._closeTf.on(Laya.Event.CLICK,this,this.onCloseTfClick),this._autoScrollTf.on(Laya.Event.CLICK,this,this.onAutoScrollTfClick),this._bgAlpha0.on(Laya.Event.CLICK,this,this.onBgAlpha0),this._bgAlpha1.on(Laya.Event.CLICK,this,this.onBgAlpha1),this._clearTf.on(Laya.Event.CLICK,this,this.onClearTfClick),this._testTf.on(Laya.Event.CLICK,this,this.onTestTfClick),this.isInit=!0}}show(){this.initDebugView(),this._stage.addChild(this.bigContainer),this._isShow=!0,this.updateView()}hide(){this.initDebugView(),this.bigContainer.parent&&this.bigContainer.parent.removeChild(this.bigContainer),this._isShow=!1,this.updateView()}showOrHide(){this._isShow=!this._isShow,this._isShow?this.show():this.hide()}appendText(e,t=0,i=!0){if(i){let n=new Date().getTime()-this._time;e+="  ["+(n/1e3).toFixed(3)+"]"}this._actionLineList.push([e+`
`,t]),this._lineIndex>=200&&(this._actionLineList.splice(0,20),this._lineIndex-=20),this._count++,this._count>this.maxCount&&(this._count=0,this._debugInfoTf&&(this._debugInfoTf.text="")),this._isShow&&(this._currentLine=this._actionLineList[this._lineIndex++],this._debugInfoTf&&(this._debugInfoTf.text+=this._currentLine[0]),this._autoScroll&&this._debugInfoTf&&(this._debugInfoTf.scrollY=this._debugInfoTf.maxScrollY))}updateView(){if(this._isShow){this._count=0,this._debugInfoTf.text="";let e=this._actionLineList.length;for(this._lineIndex=0;this._lineIndex<e;++this._lineIndex)this._currentLine=this._actionLineList[this._lineIndex],this._debugInfoTf.text+=this._currentLine[0],this._count++,this._count>this.maxCount&&(this._count=0,this._debugInfoTf.text="");this._autoScroll&&(this._debugInfoTf.scrollY=this._debugInfoTf.maxScrollY)}else this._debugInfoTf.text=""}onCloseTfClick(e){this.hide()}onAutoScrollTfClick(e){this._autoScroll=!this._autoScroll,this._autoScroll?this._autoScrollTf.text="自动卷屏":this._autoScrollTf.text="手动卷屏"}onBgAlpha0(e){this._alpha-=.1,this._alpha<=0&&(this._alpha=0),this._bgSp.alpha=this._alpha}onBgAlpha1(e){this._alpha+=.1,this._alpha>=1&&(this._alpha=1),this._bgSp.alpha=this._alpha}onClearTfClick(e){this._debugInfoTf.text="",this._actionLineList.length=0,this._lineIndex=0}onTestTfClick(e){this.bgContainer.mouseEnabled=!this.bgContainer.mouseEnabled}set testFun(e){this._testFun=e}get bgSp(){return this._bgSp}startScrollText(e){this.prevX=this._debugInfoTf.mouseX,this.prevY=this._debugInfoTf.mouseY,Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.scrollText),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.finishScrollText)}finishScrollText(e){Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.scrollText),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.finishScrollText)}scrollText(e){let t=this._debugInfoTf.mouseX,i=this._debugInfoTf.mouseY;this._debugInfoTf.scrollX+=this.prevX-t,this._debugInfoTf.scrollY+=this.prevY-i,this.prevX=t,this.prevY=i}};Rn.DEFAULT_COLOR="#ffffff";var $f=Rn;var vo=class r{static Initialize(e,t){r.isRelease=t,this.debugger==null&&(this.debugger=new $f(e,t))}static log(e,t=0,i=0){var n=ue.GetLogTime+" "+e;t&&r.addLog(n,t,i)}static addLog(e,t=0,i=0){this.debugger&&this.debugger.appendText(e,i),console.log(e)}static addConsoleLog(...e){r.debugger&&r.debugger.appendText(e,0)}};var Ve=class Ve{static get IsSetRelease(){return Ve._IsSetRelease}static get IsSetGuid(){return Ve._IsSetGuid}static initParms(){if(Laya.Browser.window.location){let i=Laya.Browser.window.location.href,n=this.getURLParameters(i);if(Ve.m_obj=n,console.log("1initgame-->urldata:",Ve.m_obj),Ve.m_obj.server&&Ve.m_obj.server!=""&&(cr.wsUrl=Ve.m_obj.server),Ve.m_obj.socket&&Ve.m_obj.socket!=""){var e=Ve.m_obj.socket;Ct.m_strHttpHost=e}if(Ve.m_obj.address&&Ve.m_obj.address!=""&&(Me.instance.walletAddress=Ve.m_obj.address),Ve.m_obj.from&&Ve.m_obj.from=="into"&&(ae.isInto=!0),Ve.m_obj.isFull&&Ve.m_obj.isFull=="1"&&(ae.isFull=!0),Ve.m_obj.justFull&&Ve.m_obj.justFull=="1"&&(ae.justFull=!0),Ve.m_obj.white&&Ve.m_obj.white=="1"&&(ae.isWhite=!0),Ve.m_obj.needDraw&&Ve.m_obj.needDraw=="1"&&(ae.needDraw=!0),Ve.m_obj.log){var t=parseInt(Ve.m_obj.log);t>0&&initEruda(t)}if(Ve.m_obj.debug&&Ve.m_obj.debug!="0"&&(ae.Debug=parseInt(Ve.m_obj.debug)),Ve.m_obj.res&&Ve.m_obj.res!="0"&&(ae.Res=parseInt(Ve.m_obj.res)),Ve.m_obj.bookingId&&Ve.m_obj.bookingId!="0"&&(ae.bookingId=parseInt(Ve.m_obj.bookingId),Ve.m_obj.teamId&&Ve.m_obj.teamId!="0"&&(ae.teamId=parseInt(Ve.m_obj.teamId))),Ve.m_obj.referral&&Ve.m_obj.referral!=""&&(ae.referral=Ve.m_obj.referral),Ve.m_obj.lang&&Ve.m_obj.lang!=""){let s=parseInt(Ve.m_obj.lang);s<1&&(s=1),ae.ignoreLang=!0,G.instance.m_strLanguage=s}}}static getURLParameters(e){let t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,(i,n,s)=>t[n]=decodeURIComponent(s)),t}static cheakStr(e){let t=new RegExp("[A-Za-z0-9_-\\s]","g"),i=e.match(t);return!!(i&&i.length==e.length)}static isNumber(e){return/^(?!0\d)\d*\.?\d*$/.test(e)}static roundToTwoDecimals(e){return e%1===0?e.toString():Number(e.toFixed(2)).toString()}static filterObjectsByNewFightFlag(e){return e.filter(t=>t.newFightFlag!==1)}static addIndexToObjects(e){return e.forEach((t,i)=>{t.index=i}),e}static findFirstTypeAndNotGold(e){for(let t=0;t<e.length;t++)if(e[t].id>=3001&&e[t].id<=3021&&e[t].id!==3005)return e[t]}static getCurrencyIdByName(e){let t=ze.TYPE_TOX;switch(e){case"TOX":t=ze.TYPE_TOX;break;case"ETH":t=ze.TYPE_ETH;break;case"BTC":t=ze.TYPE_BTC;break;case"USDT":t=ze.TYPE_USDT;break;case"BTOX":t=ze.TYPE_BTOX;break;case"GALA":t=ze.TYPE_GALA;break;case"BNRY":t=ze.TYPE_BNRY;break;case"KLAY":t=ze.TYPE_KLAY;break;case"BNB":t=ze.TYPE_BNB;break;case"GGG":t=ze.TYPE_GGG;break}return t}static formatNumber(e,t=7){let i=e.toString(),n=i.indexOf(".");return n!==-1&&i.length-n>t?(i=i.slice(0,n+t),parseFloat(i)):e}static truncateToTwoDecimalPlaces(e){let t=e.toString(),i=t.indexOf(".");if(i===-1)return e;let n=t.substring(0,i+5);return parseFloat(n)}static getKeyByValue(e,t){return Object.keys(e).find(i=>e[i]===t)}static powerOf10(e,t){return e*Math.pow(10,t)}static isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}static getDaysInMonth(e,t){return t===2?this.isLeapYear(e)?29:28:[4,6,9,11].includes(t)?30:31}static shortenString(e,t,i){return e.length<=t+i?e:e.substr(0,t)+"..."+e.substr(-i)}static multiplyBigDecimals(e,t){let n=Math.pow(10,1e4),s=parseFloat(String(e))*parseFloat(String(t));return Math.round(s*n)/n}static arraysEqual(e,t){return e.length===t.length&&e.every((i,n)=>i===t[n])}static categorizeArrays(e,t){let i=[];for(let n of t){let s=n[0],a=n[1],c=e.find(p=>p[0]===s),u=c?c[1]:0;i.push([s,u,a])}return i}static setMap(e,t){if(e.has(t[0])){let i=e.get(t[0]);i+=t[1],e.set(t[0],i)}else e.set(t[0],t[1]);return console.log(e),e}static getfrom(){return Ve.m_obj.from}static parseTokenData(e){try{return e.map(t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(i){return console.error("解析token字符串失败:",i),t}return t})}catch(t){return console.error("解析token数据时发生错误:",t),[]}}};Ve._IsSetRelease=!1,Ve._IsSetGuid=!1;var wo=Ve;var pv=Laya.HttpRequest,lr=class lr{static requestGet(e,t,i=!1,n=!0,s=!1){return new Promise((a,c)=>{var u=Laya.Pool.getItem("HttpRequest");u||(u=new pv),u.http.timeout=2e3,u.on(Laya.Event.COMPLETE,null,b),u.on(Laya.Event.ERROR,null,w),u.http.onreadystatechange=()=>{if(u.http.readyState===XMLHttpRequest.DONE){var _=u.http.status;_>=200&&_<400||(c(),v())}};let p=localStorage.getItem("TOX-COOKIE"+Me.instance.walletAddress),f=["Content-Type","application/json"];p&&(f=[...f,"Authorization",p]);let d;e.startsWith("http")?d=e+h(t):d=lr.httpRoot+"/"+e+h(t),lr.httpRoot!="https://api.phantomarena.co"&&vo.log("REQUEST_GET "+d,1),u.send(d,null,"get","json",f);function h(_){if(typeof _=="string")return _;let T="";for(let M in _)T+="&"+M+"="+_[M];return T}function b(_){_.code==="0"?a(_.data):(st.instance.showErrorWord(parseInt(_.code)),c(_.code)),v()}function w(_,T){debugger;c(_),v()}function v(){u.off(Laya.Event.COMPLETE,null,b),u.off(Laya.Event.ERROR,null,w),Laya.Pool.recover("HttpRequest",u)}})}static startHeart(){Laya.stage.on(Laya.Event.BLUR,this,()=>{this.stopHeartInStage=!0,console.log("失去焦点, 停止心跳")}),Laya.stage.on(Laya.Event.FOCUS,this,()=>{this.stopHeartInStage=!1,console.log("获取焦点, 开始心跳")}),Laya.timer.loop(3e3,this,this.onHeart)}static async onHeart(){console.log("onHeart");return;var t,n,s,a,c,u}static requestPost(e,t,i=!1,n=!0,s=!1){let a=localStorage.getItem("TOX-COOKIE"+Me.instance.walletAddress);return i&&!a?[]:new Promise((c,u)=>{var p=Laya.Pool.getItem("HttpRequest");p||(p=new pv),p.http.timeout=1e4,p.once(Laya.Event.COMPLETE,null,h),p.once(Laya.Event.ERROR,null,b);let f=[];a&&n&&(f=[...f,"Authorization",a]);var d=lr.seq+1;lr.seq=d,e=="wxgame/sys/ping"?ae.showHeartLog&&console.log(ue.GetLogTime+" "+d+" >>> HTTP_POST "+lr.httpRoot+"/"+e+" "+JSON.stringify(t),a):console.log(ue.GetLogTime+" "+d+" >>> HTTP_POST "+lr.httpRoot+"/"+e+" "+JSON.stringify(t),a),e.startsWith("http")?p.send(e,t,"post","json",f):p.send(lr.httpRoot+"/"+e,t,"post","json",f);async function h(v){if(e=="wxgame/sys/ping"?ae.showHeartLog&&console.log(ue.GetLogTime+" "+d+" <<< hTTP_RCV data: "+JSON.stringify(v),1):console.log(ue.GetLogTime+" "+d+" <<< hTTP_RCV data: "+JSON.stringify(v),1),v.errorCode==0||v.errorCode==="0")c(v);else{if(v.errorCode===10)ue.heroNotEnought();else if(v.errorCode===18)ue.titickNotEnought();else if(v.errorCode===26)ue.RemError();else if(v.errorCode!==29)if(v.errorCode===30)ue.NoHeroError(st.instance.get(v.errorCode));else if(v.errorCode===32)ue.NoHeroError(st.instance.get(v.errorCode));else if(v.errorCode===2||v.errorCode===21)ue.alertNoAll(st.instance.get(v.errorCode));else if(v.errorCode===5)if(ae.Debug==0){localStorage.setItem("TOX-COOKIE"+Me.instance.walletAddress,"");var _=await Me.instance.refreshToken();_&&lr.requestPost(e,t,i,n)}else localStorage.setItem("TOX-COOKIE"+Me.instance.walletAddress,""),st.instance.showErrorWord(parseInt(v.errorCode));else v.errorCode===17?ae.Debug==0?(localStorage.setItem("TOX-COOKIE"+Me.instance.walletAddress,""),Me.instance.signAndLogin(),st.instance.showErrorWord(parseInt(v.errorCode))):(localStorage.setItem("TOX-COOKIE"+Me.instance.walletAddress,""),st.instance.showErrorWord(parseInt(v.errorCode))):v.errorCode===9?(hi.instance.close(),ue.commTipWithYes(st.instance.get(v.errorCode))):v.errorCode===51?ue.commTipWithYes(st.instance.get(v.errorCode)):s||st.instance.showErrorWord(parseInt(v.errorCode),v.errorParams);u(v.errorCode)}w()}function b(v,_){console.log("errorHandler data: "+v,1),s||st.instance.showErrorWord(500),u(v),w()}function w(){p.off(Laya.Event.COMPLETE,null,h),p.off(Laya.Event.ERROR,null,b),Laya.Pool.recover("HttpRequest",p)}})}};lr.httpRoot=getServer(),lr.needHeart=!0,lr.stopHeartInRoom=!1,lr.stopHeartInStage=!1,lr.lastPreContractstartRoomId=-1,lr.lastPrecontractReadyRoomId=-1,lr.seq=0;var Ze=lr;var Ui=class Ui{constructor(){}static trim(e,t=null){t||(t=[" ","\r",`
`,"	",String.fromCharCode(65279)]);var i,n,s;for(i=e,s=t.length,n=0;n<s;n++)i=Ui.getReplace(i,t[n],"");return i}static getReplace(e,t,i){if(!e)return"";var n;return n=e.replace(new RegExp(t,"g"),i),n}static isEmpty(e){return e.length<1?!0:Ui.emptyStrDic.hasOwnProperty(e)}static trimLeft(e){var t;t=0;var i;for(i=e.length;Ui.isEmpty(e.charAt(t))&&t<i;)t++;return t<i?e.substr(t):""}static trimRight(e){var t;for(t=e.length-1;Ui.isEmpty(e.charAt(t))&&t>=0;)t--;var i;return i=e.substring(0,t),t>=0?e.substring(0,t+1):""}static trimSide(e){var t;return t=Ui.trimLeft(e),t=Ui.trimRight(t),t}static shortStr(e,t){return e.length>t?e.substr(0,t)+"...":e}static shortHeroStr(e,t=10){return Ui.abbreviateString(e,t)}static abbreviateString(e,t=11){if(e.length<=t)return e;{let i=Math.floor((t-3)/2);return e.slice(0,i)+"..."+e.slice(-i)}}static caseInsensitiveSearchWithRegex(e,t){return new RegExp(t,"i").test(e)}static formatWalletAddress(e){let n="...";return e.length<=12+10?e:`${e.substring(0,12)}${n}${e.substring(e.length-10)}`}};Ui.ANONYMOUS_NAME="***",Ui.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"	":!0};var Pr=Ui;var Nr=class r{constructor(e=0){this._m_iLevel=0;this._m_arrDisc=[];this.newAddCnt=0;this.isScholarship=!1;this.isLvUp=!1;this.needTip=!0;this.m_bSalon=!1;this.m_bIsSetId=!1;e!=0&&(this.m_iId=e)}get m_sIcon(){return this._m_sIcon}set m_sIcon(e){this._m_sIcon=e}get m_iLevel(){return this._m_iLevel>0?this._m_iLevel:1}set m_iLevel(e){this._m_iLevel=e||0}get m_iNum(){return this._m_iNum}set m_iNum(e){this._m_iNum=e}get m_iPk(){return this._m_iPk}set m_iPk(e){this._m_iPk=e}copyItem(){let e=new r;return e.m_iId=this.m_iId,e.m_iOriginalId=this.m_iOriginalId,e}get m_bTry(){return this.m_iId==this.m_iOriginalId?this._m_bSet=!1:this._m_bSet=!0,this._m_bSet}get m_strName(){return H.instance.getLanguage(this.itemItem.name)}set m_bTry(e){this._m_bSet=e}get m_iId(){return this._m_iId}set m_iId(e){this._m_iId=e,this.m_bIsSetId||(this.m_bIsSetId=!0,this.m_iOriginalId=e),this.setConfigData()}setConfigData(){if(this.m_iId!=0){if(this.itemItem=xe.intance.m_dicItems.get(this.m_iId.toString()),!this.itemItem){console.log("[          <items> find out id:"+this.m_iId+"             ]");return}if(this.subType=parseInt(this.itemItem.subType+""),this.backType=parseInt(this.itemItem.backPack+""),this.type=parseInt(this.itemItem.type+""),this.m_sIcon=this.itemItem.icon,this.itemItem.buy_price){this.m_iPrice=this.itemItem.buy_price[0][1];let e=this.itemItem.buy_price[0][0],t=xe.intance.m_dicItems.get(e);t&&(this.m_strBuyIcon=_e.instance.getItemIcon(t.icon))}this.itemItem.sell_price&&(this.m_iSellPrice=parseFloat(this.itemItem.sell_price[0][1])),this.m_iQuality=this.itemItem.quality,this.setQualityData()}}setQualityData(){this.m_arrQualityData=this.itemItem.starArr}get getIconURL(){return _e.instance.getItemIcon(this.itemItem.icon)}copy(){let e=new r(this.m_iId);return e.m_iLevel=this.m_iLevel,e}compareName(){return H.instance.getLanguage(this.itemItem.name)}compareQuality(){return parseFloat(this.m_iQuality+"")}compareSellPrice(){return parseFloat(this.itemItem.sell_price[1]+"")}compareNum(){return parseFloat(this.m_iNum+"")}compareLevel(){return parseFloat(this.m_iLevel+"")}compareFragment(){let e=this.itemItem.id;return 0}compareTypeId(){return parseInt(this.m_iId+"")}};var bi=class r{constructor(){this._isPop=!1;U.intance.on(L.EVENT_CHECK_REMAIN,this,this.onCheckRemain)}static get instance(){return r._instance||(r._instance=new r),r._instance}get model(){return $t.instance}get isPop(){return this._isPop}startShow(){console.log("startShow");var e=this.model.hasRemain();!this._isPop&&e&&(this._isPop=!0,e instanceof HeroVo?U.intance.event(L.EVENT_OPEN_MODULE,S.HeroGetDialog):U.intance.event(L.EVENT_OPEN_MODULE,S.ItemGetDialog))}onCheckRemain(e){if(e==S.ItemGetDialog||e==S.HeroGetDialog){var t=this.model.hasRemain();t?t instanceof HeroVo?U.intance.event(L.EVENT_OPEN_MODULE,S.HeroGetDialog):U.intance.event(L.EVENT_OPEN_MODULE,S.ItemGetDialog):this._isPop=!1}}};var $t=class r{constructor(e){this._list=[];this.needPop=!0;this.autoPop=!0}static get instance(){return r._instance||(r._instance=new r(new Ub)),r._instance}get service(){return bi.instance}addItem(e,t=!1){let i=new Nr;i.m_iId=e.m_iId,i.newAddCnt=e.newAddCnt,i.m_iLevel=e.m_iLevel,i.isLvUp=e.isLvUp,i.m_bNew=e.m_bNew,this._list.push(i),t&&this.service.startShow()}addHeroItem(e,t=!1){let i=new HeroVo;i.id=e.id,i.newAddCnt=e.newAddCnt,i.lv=e.lv,i.isLvUp=e.isLvUp,i.m_bNew=e.m_bNew,this._list.push(i),t&&this.service.startShow()}addItems(e,t=!1){this._list=this._list.concat(e),t&&this.service.startShow()}hasRemain(){return this._list.length>0?this._list[0]:null}get needListener(){return this._list.length>=2}addConsumeByServer(e){this._list.push(e)}addConsume(e,t){this._list.push([e,t])}getNextItem(){return this._list.length>0?this._list[0]:null}getOneItem(){return this._list.length>0?this._list.shift():null}},Ub=class{};var Le=class r{constructor(){this._inited=!1;this.stopAll=!1;this.roomWatcher=!1;this.matchWatcher=!1;this.heroReadyDic=new Ie;this.isPopUp=!1;this.init()}static get instance(){return r._instance||(r._instance=new r),r._instance}init(){this._inited||(this._inited=!0)}get roomDto(){return this._roomDto}set roomDto(e){if(console.log("roomDto: ",e),this._roomDto=e,e){var t=G.instance.playerDto.pid;if(e.watch){let i=e.watch.some(n=>n===t);this.roomWatcher=i}}}setRoomAnonymousLabel(e,t=-1){return t==-1&&(t=r.instance.roomDto.anonymous),t==1?Pr.ANONYMOUS_NAME:e}setMatchAnonymousLabel(e,t=-1){return t==-1&&(t=r.instance.matchDto.anonymous),!this.matchWatcher&&t==1?Pr.ANONYMOUS_NAME:e}setMatchAnonymousImg(e,t=-1){return t==-1&&(t=r.instance.matchDto.anonymous),!this.matchWatcher&&t==1?null:e}get matchDto(){return this._matchDto}set matchDto(e){if(console.log("matchDto: ",e),this._matchDto=e,e){var t=G.instance.playerDto.pid;if(e.watch){let i=e.watch.some(n=>n===t);this.matchWatcher=i}e.startTime-e.nowTime>0?this.stopAll=!0:this.stopAll=!1}else this.stopAll=!1}setMatchRes(){this.heroReadyDic=new Ie;var e=this.roomDto.members.length,t=[],i=this.currArenaItem.mapid;if(this.heroReadyDic.get("map_"+i)==null){var i=r.instance.currArenaItem.mapid,n=_e.instance.getMapImg(i);t.push(n);var s=_e.instance.getMapPrefab(i);t.push(s),this.heroReadyDic.set("map_"+i,!0)}for(var a=0;a<e;a++){var c=this.roomDto.members[a];if(this.heroReadyDic.get(c.heroId+"_"+c.heroColor)==null){var u=xe.intance.m_dicHeros.get(c.heroId),p=_e.instance.getHeroSkRes(u.serialId,c.heroColor);t.push({url:p,type:Laya.Loader.SPINE}),this.heroReadyDic.set(c.heroId+"_"+c.heroColor,!0)}}t.length>0&&Laya.loader.load(t,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{})}onPreAssetPress1(e){}async checkMatchRankData(){if(this.reward==null){let e=await Ze.requestPost("wxgame/room/balanceInfo",{roomId:r.instance.matchDto.roomId});this.onGoMatchEndRank(e)}}onSetMatchEnd(e,t=!1){this.msgEndbody=e,(this.isPopUp||t)&&(U.intance.event(L.EVENT_GameScene_Gray),r.instance.onGoMatchEndRank(this.msgEndbody),this.isPopUp=!1)}onMockMatchEnd(){this.msgEndbody?(U.intance.event(L.EVENT_GameScene_Gray),r.instance.onGoMatchEndRank(this.msgEndbody)):this.isPopUp=!0}onGoMatchEndRank(e){Ct.instance.isMatching=!1,r.instance.stopAll=!0,Oe.intance.openModule(S.MatchEndView,[null,null,null,e])}mockMoves(e,t,i,n,s,a){this.mockSpeedRate=t,this.speed=a,this.mockDir=gt.getAngleToVec(i),this.mockAimDir=gt.getAngleToVec(n),this.rotateSpeed=pe.snack.defaultRotateSpeed,this.bones=[],this.bones.push(Et.create(e.x,e.y));for(var c=0;c<s;c++)this.mockMove();return this.bones[0]}mockMove(){for(let n=0;n<this.mockSpeedRate;n++){if(this.mockDir.equal(this.mockAimDir)||Math.abs(Math.acos(this.mockDir.dot(this.mockAimDir))*180/Math.PI)<this.rotateSpeed*pe.snack.defaultMoveInterval)this.mockDir=this.mockAimDir;else{let s=this.mockDir.getRotation(),c=(this.mockAimDir.getRotation()-s+360)%360;c>180&&(c-=360);let u=this.rotateSpeed*pe.snack.defaultMoveInterval,p=Math.abs(c)<u?c:u*(c>0?1:-1);console.log(p),this.mockDir.rotate(p)}var e=this.bones[0].add(this.mockDir.mul(this.speed)),t=10,i=pe.mapSize;if(e.x<i.offsetX-t||e.x>i.width-i.offsetX+t||e.y<i.offsetY-t||e.y>i.height-i.offsetY+t)return;this.bones[0].x=e.x,this.bones[0].y=e.y}}clearData(){console.log("clearData ",this.reward),this.roomDto=null,this.matchDto=null,this.reward=null,this.msgEndbody=null,this.isPopUp=!1,this.playerJoinDic=null,this.playerEndDic=null,this.heroReadyDic=null,this.currArenaItem=null,this.roomWatcher=!1,this.matchWatcher=!1,ke.instance.clearData(),Ze.needHeart=!0,Qe.instance.playMusicByName(Qe.soundName_bg,".mp3"),$t.instance.needPop=!0,bi.instance.startShow()}};var Kf=class extends Laya.Image{};var{regClass:QI}=Laya,yi=class extends Kf{set dataSource(t){this.roomPlayerDto=t,this.roomPlayerDto&&(this.skin=_e.instance.getSnakeBodyIcon(this.roomPlayerDto.snakeId))}setRotation(t){this.rotation=t}setScale(t){let i=this.width,n=this.height,s=t*2/i,a=t*2/n;this.scaleX=s,this.scaleY=a}setAlpha(t){this.alpha=t}setGray(t){this.gray=t}getRadio(){return this.width*this.scaleX/2}onDisable(){this.setGray(!1),this.setAlpha(1),this.scale(1,1),Laya.Pool.recover(yi.POOL_NAME,this)}};yi.POOL_NAME="MatchSnakeBodySpr",yi=q([QI("Aeyt_emSSaCC6Np5nR_evQ")],yi);var qf=class extends Laya.Sprite{};var{regClass:ZI}=Laya,xi=class extends qf{constructor(){super();this.isAddEvent=!1;this.isMe=!1;this.inGround=!1;this.speedRate=1;this.moveSpeed=10;this._speed=10;this.biasSpeed=0;this._roleDirection=-1;this.lastX=0}setClientPosLog(t,i){ae.Debug==2&&(console.log(ue.GetLogTime+` ${this.roomPlayerDto.roleId} C：(${t}, ${i}, ${this.owner.owner.speedRate}, dir：${this.owner.owner.dir}, aimDir：${this.owner.owner.aimDir}, ${tt.Instance.currentFrame})`),tt.Instance.checkServerFrame(tt.Instance.currentFrame,this.roomPlayerDto.roleId,t,i,this.owner.owner.speedRate,this.owner.owner.dir,this.owner.owner.aimDir))}setServerPosLog(t,i,n,s,a){ae.Debug==2&&console.log(ue.GetLogTime+` ${this.roomPlayerDto.roleId} S：(${i.loc.x}, ${i.loc.y}, ${n}, dir：${s}, aimDir：${a}, ${t})`)}setServerPosLog1(t){this.tf_server_pos.text=`${t}`}get speed(){return this._speed}set speed(t){this._speed=t,this.biasSpeed=Math.round(this.speed*Math.sin(45*Math.PI/180))}get roleDirection(){return this._roleDirection}set roleDirection(t){t!==-4&&(this._roleDirection=t)}set dataSource(t){this.roomPlayerDto=t,this.roomPlayerDto&&(this.heroSk.skin=_e.instance.getSnakeHeadIcon(this.roomPlayerDto.snakeId),this.tf_name.text=Pr.abbreviateString(this.roomPlayerDto.userName))}set x(t){super.x=t}get x(){return super.x}set visible(t){super.visible=t,this.smallHeroImg&&(this.smallHeroImg.visible=t)}get visible(){return super.visible}set alpha(t){super.alpha=t,this.smallHeroImg&&(this.smallHeroImg.alpha=t)}onAwake(){}showDamageLabelDetailDelay(t,i,n){Laya.timer.once(i,this,this.showDamageLabelDetail,[t,n],!1)}showDamageLabelDetail(t,i){var n=Laya.Pool.getItemByCreateFun("damageNumber",ke.instance.damageNumPrefab.create,ke.instance.damageNumPrefab);n.init(t,i),this.addChild(n)}setRotation(t){this.heroSk.rotation=t}setScale(t){let i=this.heroSk.width,n=this.heroSk.height,s=t*2/i,a=t*2/n;this.heroSk.scaleX=s,this.heroSk.scaleY=a}setAlpha(t){this.heroSk.alpha=t}setGray(t){this.heroSk.gray=t}getRadio(){return this.heroSk.width*this.heroSk.scaleX/2}onDisable(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null,this.setGray(!1),this.setAlpha(1),this.scale(1,1),Laya.Pool.recover(xi.POOL_NAME,this)}destroy(t){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null,this.owner=null,this.roomPlayerDto=null,super.destroy(t)}};xi.POOL_NAME="MatchSnakeSpr",xi=q([ZI("tWPXV-AGQQ2kGHES5HnI0w")],xi);var pn=class{get isHead(){return this.skinFlag===pe.snack.skinFlag.head}setServerPosLog(e,t,i,n,s){this.skinFlag===pe.snack.skinFlag.head&&this.node.setServerPosLog(e,t,i,n,s)}setServerPosLog1(e){this.skinFlag===pe.snack.skinFlag.head&&this.node.setServerPosLog1(e)}constructor(e,t,i,n,s){if(this.pos=new Et(-1e6,-1e6),this.tag=n,this.owner=s,e===pe.snack.skinFlag.head){let a=Laya.Pool.getItemByCreateFun(xi.POOL_NAME,ke.instance.roleAniPrefab.create,ke.instance.roleAniPrefab);a.owner=this,this.node=a,a.dataSource=n,this.smallHeroImg=new Laya.Image,this.updateSmallHeroImg(),ke.instance.img_smallMap.addChild(this.smallHeroImg)}else{let a=Laya.Pool.getItemByCreateFun(yi.POOL_NAME,ke.instance.matchSnakeBodyPrefab.create,ke.instance.matchSnakeBodyPrefab);this.node=a,a.dataSource=n}this.skinFlag=e,this.node.tag=n,t.addChild(this.node)}reset(e,t,i,n,s){if(this.pos=new Et(-1e6,-1e6),this.tag=n,this.owner=s,this.skinFlag=e,e===pe.snack.skinFlag.head){let a=Laya.Pool.getItemByCreateFun(xi.POOL_NAME,ke.instance.roleAniPrefab.create,ke.instance.roleAniPrefab);a.owner=this,this.node=a,a.dataSource=n,this.smallHeroImg=new Laya.Image,this.updateSmallHeroImg(),ke.instance.img_smallMap.addChild(this.smallHeroImg)}else{let a=Laya.Pool.getItemByCreateFun(yi.POOL_NAME,ke.instance.matchSnakeBodyPrefab.create,ke.instance.matchSnakeBodyPrefab);this.node=a,a.dataSource=n}this.node.tag=n,t.addChild(this.node)}resetForPool(){Laya.Tween.clearAll(this.node),this.node.removeSelf(),this.smallHeroImg&&this.smallHeroImg.removeSelf()}updateSmallHeroImg(){if(this.smallHeroImg)if(this.owner.isSelf){this.smallHeroImg.skin="res/match2/img_dian1.png";var e=15,t=15;this.smallHeroImg.size(e,t),this.smallHeroImg.pivot(e/2,t/2)}else if(this.owner.tag.roleId==$e.instance.kingId){this.smallHeroImg.skin="res/match2/img_phb_icon2.png";var i=21,n=19;this.smallHeroImg.size(i,n),this.smallHeroImg.pivot(i/2,n/2)}else{this.smallHeroImg.skin="res/match2/img_dian2.png";var s=4,a=4;this.smallHeroImg.size(s,a),this.smallHeroImg.pivot(s/2,a/2)}}setPosition(e){if(this.smallHeroImg){var t=ke.instance.fromBigToSmall(e.x,e.y),i=t[0],n=t[1];this.smallHeroImg.pos(i,n)}var s,a;if(this.pos.x!=-1e6||this.pos.y!=-1e6)if(this.isHead){var c=gt.distancePoint(e.x,e.y,this.node.x,this.node.y);c>50?(s=gt.lerp(this.node.x,e.x,.3),a=gt.lerp(this.node.y,e.y,.3)):c>30?(s=gt.lerp(this.node.x,e.x,.3),a=gt.lerp(this.node.y,e.y,.3)):(s=gt.lerp(this.node.x,e.x,.3),a=gt.lerp(this.node.y,e.y,.3))}else s=gt.lerp(this.node.x,e.x,.3),a=gt.lerp(this.node.y,e.y,.3);else s=e.x,a=e.y;this.node.pos(s,a),this.pos.x=s,this.pos.y=a,this.skinFlag===pe.snack.skinFlag.head&&this.node.setClientPosLog(e.x,e.y)}getPosition(){return this.pos}setRotation(e){this.node.setRotation(e)}setLocalZOrder(e){this.node.zOrder=e}getDistant(e){let t=this.pos.x-e.pos.x,i=this.pos.y-e.pos.y;return Math.sqrt(t*t+i*i)}updateAlpha(e,t){let i=t==1?1:.75;this.node.setAlpha(i)}updateScale(e,t){let i=e*(1+.1*t);this.setScale(i)}setScale(e){this.node.setScale(e)}getRadio(){return this.node.getRadio()}setVisible(e){this.node.visible=e,this.smallHeroImg&&(this.smallHeroImg.visible=e)}setGray(e){this.node.setGray(e)}isVisible(){return this.node.visible}destroy(){this.node.removeSelf(),this.smallHeroImg&&this.smallHeroImg.removeSelf()}getSuctionBoundingBox(){let e=this.owner.suctionRadius;return new Laya.Rectangle(this.pos.x-e,this.pos.y-e,e*2,e*2)}getBoundingBox(){let e;return this.isHead?e=this.owner.suctionRadius:e=this.getRadio(),new Laya.Rectangle(this.pos.x-e,this.pos.y-e,e*2,e*2)}getSkinFlag(){return this.skinFlag}checkCollision(e,t,i){let n=this.getPosition();return ms.distance(n.x,n.y,e,t)<i+this.getRadio()}};var Yf=class{static checkCollisions(e,t,i){let n=pe.mapSize;if(e){let d=e.getHeadCollisionBounds();if(d&&(d.x<n.offsetX||d.x+d.width>n.width-n.offsetX||d.y<n.offsetY||d.y+d.height>n.height-n.offsetY)){if(e.isSelf){if(e.isAlive()){if(e.isSend)return;var s=e.getToServerHead(),a=Y.snake.socket.MessageType.MSG_PLAYER_COLLISION,c=Y.snake.socket.CS_PLAYER_COLLISION.fromObject({head:s,frame:tt.Instance.currentFrame,body:!1});Ct.instance.sendData(a,c),e.isSend=!0}}else e.stop=!0;return}}if(e&&e.isSelf){let d=e.getHeadCollisionBounds();if(!d)return;let h=d.x+d.width/2,b=d.y+d.height/2,w=d.width/2,v=pe.collision.food.maxRadius,_=w+v,T=new Laya.Rectangle(h-_,b-_,_*2,_*2),M={getBoundingBox:()=>T},D=dr.instance.getAllFoods();var u=[];if(D.forEach(O=>{e.checkFoodCollision(O)&&(O.haveEaten||(O.haveEaten=!0,console.log(O.foodObject.unkey,O.getPosition()),u.push(O.foodObject.unkey)))}),u&&u.length>0){console.log("吃豆人吃到了食物");var p=G.instance.playerDto.pid,s=e.getToServerHead(),a=Y.snake.socket.MessageType.MSG_EAT_FOOD,f=Y.snake.socket.CS_EAT_FOOD.fromObject({roleId:p,fid:u,head:s,frame:tt.Instance.currentFrame});Ct.instance.sendData(a,f)}i.retrieve(e.getHead()).filter(O=>O instanceof pn).forEach(O=>{if(O.owner!==e&&e.checkBodyCollision(O))if(!e.isInvincible&&!O.owner.isInvincible){if(e.isAlive()&&O.owner.isAlive()){if(e.isSend){console.log("playerSnake.isSend: "+e.isSend);return}var W=!O.isHead,V=O.owner.tag.roleId,ee=e.getToServerHead(),Q=Y.snake.socket.MessageType.MSG_PLAYER_COLLISION,ve=Y.snake.socket.CS_PLAYER_COLLISION.fromObject({target:V,head:ee,frame:tt.Instance.currentFrame,body:W});Ct.instance.sendData(Q,ve),e.isSend=!0}}else console.log(e.tag.roleId+" 或者 "+O.owner.tag.roleId+" 处于无敌状态！")})}}};var Xf=class{constructor(e){this.pool=[];this.pnl=e}getBodySkin(e,t,i,n){if(this.pool.length>0){let s=this.pool.pop();return s.reset(e,this.pnl,t,i,n),s}else return new pn(e,this.pnl,t,i,n)}returnBodySkin(e){e.resetForPool(),this.pool.push(e)}clear(){this.pool.forEach(e=>e.destroy()),this.pool=[]}};var Mn=class r{constructor(){this.pools=new Map;this.configs=new Map}static get instance(){return this._instance||(this._instance=new r),this._instance}register(e,t,i=0,n=1/0){this.configs.set(e,{factory:t,maxSize:n}),this.pools.set(e,[]);for(let s=0;s<i;s++)this.release(e,t())}get(e,...t){let i=this.pools.get(e);if(!i)throw new Error(`Type ${e.name} not registered`);let n=i.length>0?i.pop():this.configs.get(e).factory();return n.init&&n.init(...t),n}release(e,t){let i=this.configs.get(e);if(!i)throw new Error(`Type ${e.name} not registered`);let n=this.pools.get(e);t.reset&&t.reset(),n.length<i.maxSize&&n.push(t)}clear(e){this.pools.set(e,[])}clearAll(){this.pools.clear()}};var kl=class{constructor(e,t){this.clientFrame=1;this.serverFrame=1;this.dFrame=0;this.oprIndex=0;this.serverHeadPoss=[];this.stop=!1;this.ringCenter=new Et;this.baseRingSize=100;this.lastRingUpdate=0;this.lastSendFrame=-1;this.pendingGrow=0;this.lastDir=-1;this.lastSendDir=-1;this.isSend=!1;this.pnl=e,this.bodySkinPool=$e.instance.getBodySkinPool(),this.updateData(t)}setClientDir(e){this.tag&&(this.tag.direction=e)}showServerPos(e,t,i,n,s){this.getHead().setServerPosLog(e,t,i,n,s)}showServerPos1(e){this.getHead()&&this.getHead().setServerPosLog1(e)}updateLen(e){if(this.alive){var t=e-(this.len+this.pendingGrow);t>0&&this.requestGrow(t)}}updateData(e){if(this.skin)for(let t=0;t<this.skin.length;t++){let i=this.skin[t];i&&this.bodySkinPool.returnBodySkin(i)}this.skin=[],this._initData(e),this._initSnack(),this._updateSkinRadio()}_initData(e){var t=xe.intance.m_dicSnakes.get(e.snakeId);this.radio=t.bodyRadius,this.collisionHeadRadius=t.collisionHeadRadius,this.suctionRadius=t.suctionRadius,this.speed=t.baseSpeed,this.tag=e||null,this.score=e.score,this.speedRate=e.speed;var i=e.direction;this.dir=i;var n=e.aimDir;this.aimDir=n,this.rotateSpeed=pe.snack.defaultRotateSpeed;var s=e.snake.length;this.len=s||t.initLength,this.intervalBoneToDrawSkin=t.intervalBoneToDrawSkin,this.skin=[],this.bones=[],this._moveDelta=0,this.alive=!0;var a=e.wdTime-e.oprTime;this.defaultInvincibleTime=Date.now()+a,this.isInvincible=a>0;let c=Math.random()+.5;c=c>1?c-.5:c,this.color={r:Math.random(),g:Math.random(),b:Math.random(),a:c};for(let u=0;u<this.len;u++){let p=e.snake[u].loc,f=Et.create(p.x,p.y);this.bones[u]=f}this.bodyRing=new Laya.Image,this.bodyRing.skin=pe.res.snackRingImg,this.bodyRing.width=this.bodyRing.height=this.baseRingSize,this.bodyRing.anchorX=this.bodyRing.anchorY=.5,this.bodyRing.visible=!1,this.pnl.addChild(this.bodyRing)}_updateBodyRing(){if(this.lastRingUpdate=Date.now(),!this.isInvincible)return;let e=Mn.instance.get(Et,1/0,1/0),t=Mn.instance.get(Et,-1/0,-1/0);this.bones.forEach(s=>{e.x=Math.min(e.x,s.x),e.y=Math.min(e.y,s.y),t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y)}),this.ringCenter.x=(e.x+t.x)/2,this.ringCenter.y=(e.y+t.y)/2;let i=Math.max((t.x-e.x)/2+this.radio*pe.invincibleRing.margin,(t.y-e.y)/2+this.radio*pe.invincibleRing.margin),n=Math.max(i*2/this.baseRingSize,pe.invincibleRing.minScale);this.bodyRing.pos(this.ringCenter.x,this.ringCenter.y),this.bodyRing.scale(n,n),Mn.instance.release(Et,e),Mn.instance.release(Et,t)}_initSnack(){console.log(ue.GetLogTime,"初始化蛇的皮肤");let e=this.getSkinLength();for(let t=0;t<e;t++){t===0?this.skin[t]=this.bodySkinPool.getBodySkin(pe.snack.skinFlag.head,this.color,this.tag,this):this.skin[t]=this.bodySkinPool.getBodySkin(pe.snack.skinFlag.body,this.color,this.tag,this);let i=t*this.intervalBoneToDrawSkin;if(this.bones[i]){this.skin[t].setPosition(this.bones[i]),this.skin[t].setLocalZOrder(-(t+1));let n;i+1<this.bones.length?n=this.bones[i+1]:i-1>=0?n=this.bones[i-1]:n=this.bones[i];let s=this.bones[i].getRotationTo(n),a=pe.snack.defaultRotation-s;this.skin[t].setRotation(a),this.skin[t].setVisible(!0)}else this.skin[t].setVisible(!1)}}move(e,t){if(!this.alive||this.stop)return;this._moveDelta+=e,this._moveDelta-=pe.snack.defaultMoveInterval;let i=this.pendingGrow>0;for(let u=0;u<this.speedRate;u++){let p=this.aimDir-this.dir,f=this.rotateSpeed*pe.snack.defaultMoveInterval;if(Math.abs(p)<f)this.dir=this.aimDir;else{p=(p+360)%360,p>180&&(p-=360);var n=Math.abs(p)<f?p:f*(p>0?1:-1);this.dir+=n,this.dir>=360&&(this.dir-=360),this.dir<0&&(this.dir+=360)}let d=this.dir*Math.PI/180,h=Et.create(Math.cos(d),Math.sin(d));var s=this.bones[0].add(h.mul(this.speed)),a=10,c=pe.mapSize;if(s.x<c.offsetX-a||s.x>c.width-c.offsetX+a||s.y<c.offsetY-a||s.y>c.height-c.offsetY+a)return;this.bones[0].assign(s);for(let b=1;b<this.bones.length;b++){let w=this.bones[b-1],v=this.bones[b],_=.6,T=v.add(w.sub(v).mul(_));this.bones[b].x=T.x,this.bones[b].y=T.y}i&&u===this.speedRate-1&&this._processGrowth(),t||(this._moveBody(),this._updateSkinRadio())}this.isInvincible&&(this.bodyRing.visible||(this.bodyRing.visible=!0),this._updateBodyRing(),Date.now()>this.defaultInvincibleTime&&(this.isInvincible=!1,this.bodyRing.visible=!1))}getCurDir(){return this.dir}getAimDir(){return this.aimDir}rorateSendReady(){this.isSelf&&this.lastSendFrame!=tt.Instance.currentFrame&&(this.rorateSend(),this.lastSendFrame=tt.Instance.currentFrame)}_processGrowth(){if(this.pendingGrow<=0)return;let e=this.bones[this.bones.length-1],t=Et.create(e.x,e.y);this.bones.push(t),this.len++,this.pendingGrow--;let i=this.getSkinLength();if(i>this.skin.length){let s=new pn(pe.snack.skinFlag.body,this.pnl,this.color,this.tag,this),a=(i-1)*this.intervalBoneToDrawSkin;if(this.bones[a]){s.setPosition(this.bones[a]),s.setLocalZOrder(-(i+1));let c;a+1<this.bones.length?c=this.bones[a+1]:c=this.bones[a];let u=this.bones[a].getRotationTo(c);s.setRotation(pe.snack.defaultRotation-u),this.skin.push(s);var n=ln.getInstance(null);n.addSnack([s])}}this._updateSkinRadio()}_moveBody(){let e=this.getSkinLength();for(let t=0;t<e;t++){let i=t*this.intervalBoneToDrawSkin;if(this.skin[t])if(this.bones[i]){this.skin[t].setPosition(this.bones[i]);let n;i+1<this.bones.length?n=this.bones[i+1]:i-1>=0?n=this.bones[i-1]:n=this.bones[i];let s=this.bones[i].getRotationTo(n);this.skin[t].setRotation(pe.snack.defaultRotation-s),this.skin[t].setVisible(!0)}else this.skin[t].setVisible(!1)}}_updateSkinRadio(){let e=this.getSkinLength();for(let t=0;t<e;t++)this.skin[t]&&this.skin[t].updateAlpha(this.radio,this.speedRate)}requestGrow(e=1){this.pendingGrow+=e}showAddScore(e){this.isSelf&&this.getHead().node.showDamageLabelDetailDelay(e,100,!1)}get isSelf(){return this.tag&&this.tag.roleId==G.instance.playerDto.pid}addKill(e){if(this.tag&&(this.tag.kills+=e),this.isSelf){var t=this.tag.kills>5?5:this.tag.kills;let i=`soundName_kill_${t}`;Qe[i]?Qe.instance.playSoundByName(Qe[i]):console.warn(`音效 ${i} 不存在`),this.getHead().node.showDamageLabelDetailDelay(e,100,!0)}}getHeadCollisionBounds(){let e=this.collisionHeadRadius,t=this.getHeadPosition();return t?new Laya.Rectangle(t.x-e,t.y-e,e*2,e*2):null}checkBodyCollision(e){let t=this.getHeadPosition();return t?e.checkCollision(t.x,t.y,this.collisionHeadRadius):!1}checkFoodCollision(e){let t=this.getHeadPosition();return t?e.checkCollision(t.x,t.y,this.suctionRadius):!1}rorateControl(e,t=!1){this.lastDir!=e&&(this.lastDir=e)}rorateSend(){if(this.lastDir!=-1&&this.lastSendDir!=this.lastDir){var e=G.instance.playerDto.pid,t=this.getToServerHead(),i=Y.snake.socket.MessageType.MSG_PLAYER_OPR,n=Y.snake.socket.CS_PLAYER_OPR.fromObject({roleId:e,opr:1,value:this.lastDir,head:t,frame:tt.Instance.currentFrame,curDir:this.getCurDir(),aimDir:this.getAimDir(),snake:[]});Ct.instance.sendData(i,n),this.lastSendDir=this.lastDir}}rorate(e,t=!1){this.setClientDir(e),this.aimDir=e}updateSpeedRate(e){this.speedRate=e}getHeadPosition(){return this.getHead()?this.getHead().getPosition():null}getHead(){return this.skin?this.skin[0]:null}getToServerHead(){var e=new Y.snake.socket.SnakeObject,t=new Y.snake.socket.PointObject;return t.x=this.bones[0].x,t.y=this.bones[0].y,e.loc=t,e}updateHead106(e,t,i,n,s,a){if(a<=this.oprIndex){var c=this.tag.roleId;console.error("检测到106 操作序号异常，保留控制台日志。"+ue.GetLogTime+" "+c+" 当前序号："+this.oprIndex+" 收到序号："+a,"C:",this.bones[0].x,this.bones[0].y,this.clientFrame,"S:",t.loc,e),ue.alertNoAll("检测到106 操作序号异常，保留控制台日志。"+ue.GetLogTime+" "+c+" 当前序号："+this.oprIndex+" 收到序号："+a+", C: ("+this.bones[0].x+", "+this.bones[0].y+"), "+this.clientFrame+" S:("+t.loc.x+", "+t.loc.y+"), "+e);return}this.oprIndex=a}updateHead(e,t,i,n,s){}updateHead107(e,t,i,n,s,a){if(a<this.oprIndex){var c=this.tag.roleId;console.error("检测到107 操作序号异常，保留控制台日志。"+ue.GetLogTime+" "+c+" 当前序号："+this.oprIndex+" 收到序号："+a,"C:",this.bones[0].x,this.bones[0].y,this.clientFrame,"S:",t.loc,e),ue.alertNoAll("检测到107 操作序号异常，保留控制台日志。"+ue.GetLogTime+" "+c+" 当前序号："+this.oprIndex+" 收到序号："+a+", C: ("+this.bones[0].x+", "+this.bones[0].y+"), "+this.clientFrame+" S:("+t.loc.x+", "+t.loc.y+"), "+e);return}this.oprIndex=a}applyHardCorrection(e,t,i=null,n=null){e.x=t.x,e.y=t.y}applySoftCorrection(e,t,i=null,n=null){var s=Et.create(t.x,t.y);let a=.2;e.x=gt.lerp(e.x,s.x,a),e.y=gt.lerp(e.y,s.y,a)}predictSnakePosition(e){if(e>0)for(var t=0;t<e;t++)this.move(0,!1)}shine(e){let t=this.skin.length;for(let i=0;i<t;i++)this.skin[i].setVisible(!this.skin[i].isVisible())}show(){let e=this.skin.length;for(let t=0;t<e;t++)this.skin[t].setVisible(!0)}getSkins(){return this.skin}getRadio(){return this.radio}setAlive(e){this.alive=e}die(){console.log(`Snack ${this.tag.roleId} has died.`),this.setAlive(!1),this.isSelf?(this.setGray(!0),Qe.instance.playSoundByName(Qe.soundName_kill_die),Laya.timer.frameLoop(5,this,this.shine),Laya.timer.once(2e3,this,this.setDead)):$e.instance.removeSnake(this.tag.roleId)}setDead(){Laya.timer.clear(this,this.shine),this.show(),$e.instance.removeSnake(this.tag.roleId),Le.instance.onMockMatchEnd()}setGray(e){for(let t=0;t<this.skin.length;t++)this.skin[t].setGray(e)}isAlive(){return this.alive}getLength(){return this.len}getSkinLength(){return Math.floor(this.len/this.intervalBoneToDrawSkin)}recordBones(){var e=[];for(let t=0;t<this.bones.length;t++){let i=this.bones[t];e.push(i.clone())}return e}getState(){return{dir:this.dir,aimDir:this.aimDir,bones:this.recordBones(),speedRate:this.speedRate,oprIndex:this.oprIndex,alive:this.isAlive()}}restoreState(e){this.dir=e.dir,this.aimDir=e.aimDir,this.bones=this.restoreBones(e.bones),this.speedRate=e.speedRate,this.oprIndex=e.oprIndex,this.alive=e.alive}restoreBones(e){var t=[];for(let i=0;i<e.length;i++){let n=e[i];t.push(n.clone())}return t}destroy(){Laya.timer.clearAll(this),this.isSelf&&($e.instance.skinLen=this.getSkinLength(),$e.instance.kills=this.tag.kills),this.skin.forEach(e=>this.bodySkinPool.returnBodySkin(e)),this.skin=[],this.bodyRing.removeSelf(),this.bodyRing=null,this.tag=null}};var Eo=class Eo{constructor(){this.selfSnack=null;this.container||(this.container=new Laya.Sprite),this.matchHeroSprDic=new Ie,this.selfSnack=null,this.collision=ln.getInstance(null),this.bodySkinPool=new Xf(this.container)}static get instance(){return Eo._instance||(Eo._instance=new Eo),Eo._instance}createSnack(e){let t=new kl(this.container,e);if(this.matchHeroSprDic.get(e.roleId))throw new Error(e.roleId+" 被重复添加！");return this.matchHeroSprDic.set(e.roleId,t),console.log("createSnack: "+e.roleId,G.instance.playerDto.pid),G.instance.playerDto.pid==e.roleId&&(this.selfSnack=t),this.collision.addSnack(t.getSkins()),t}updateSnack(e,t){return console.log("updateSnack: "+t.roleId,G.instance.playerDto.pid),this.collision.removeSnack(e.getSkins()),e.updateData(t),G.instance.playerDto.pid==t.roleId&&(this.selfSnack=e),this.collision.addSnack(e.getSkins()),e}updateSnakes(e,t){this.moveSnacks(e,t),this.collision.refresh(),this.checkMySnackCollision()}initSnacks(){var e=this.matchHeroSprDic.values;let t=e.length;console.log("startGame 蛇的数量: "+t)}removeSnake(e){var t=this.matchHeroSprDic.get(e);t&&(this.collision.removeSnack(t.getSkins()),t.destroy(),this.matchHeroSprDic.remove(e))}removeAllSnakes(){var e=this.matchHeroSprDic.values;let t=e.length;for(let i=0;i<t;i++)this.collision.removeSnack(e[i].getSkins()),e[i].destroy();this.matchHeroSprDic=new Ie}moveSnacks(e,t){var i=this.matchHeroSprDic.values;let n=i.length;for(let s=0;s<n;s++)i[s].clientFrame++,i[s].isAlive()&&i[s].move(e,t)}rorate(e,t){e===pe.snackType.SELF&&this.selfSnack&&this.selfSnack.rorateControl(t,!0)}updateSpeedRate(e,t,i){if(e===pe.snackType.SELF&&this.selfSnack){var n=G.instance.playerDto.pid,s=this.selfSnack.getToServerHead(),a=Y.snake.socket.MessageType.MSG_PLAYER_OPR,c=Y.snake.socket.CS_PLAYER_OPR.fromObject({roleId:n,opr:2,value:t,head:s,frame:tt.Instance.currentFrame,curDir:this.selfSnack.getCurDir(),aimDir:this.selfSnack.getAimDir(),snake:[]});Ct.instance.sendData(a,c)}}getSelfSnackPos(){return this.selfSnack?this.selfSnack.getHeadPosition():null}checkMySnackCollision(){Yf.checkCollisions(this.selfSnack,null,this.collision)}createSnakes(){this.matchHeroSprDic=new Ie;let e=Le.instance.matchDto.members.length;for(var t=0;t<e;t++)var i=Le.instance.matchDto.members[t],n=this.createSnack(i)}newAddSnake(e){var t=this.matchHeroSprDic.get(e.roleId);t?this.updateSnack(t,e):t=this.createSnack(e)}restoreSnakes(){this.removeAllSnakes(),this.matchHeroSprDic=new Ie;let e=Le.instance.matchDto.members.length;for(var t=0;t<e;t++){var i=Le.instance.matchDto.members[t];try{var n=this.createSnack(i)}catch(s){console.warn(s)}}}getBodySkinPool(){return this.bodySkinPool}getSnakesState(){let e={snakes:{}};var t=this.matchHeroSprDic.values;let i=t.length;for(let s=0;s<i;s++){var n=t[s];let a=n.tag.roleId;e.snakes[a]=n.getState()}return e}restoreState(e){for(let i in e.snakes){var t=this.matchHeroSprDic.get(i);t&&t.restoreState(e.snakes[i])}}clear(){this.removeAllSnakes(),this.container.removeSelf(),this.container=null,this.selfSnack=null,this.collision=null,this.matchHeroSprDic=null,this.bodySkinPool.clear(),Eo._instance=null}};Eo._instance=null;var $e=Eo;var tt=class r{constructor(){this._frameRate=30;this._frameInterval=1e3/this._frameRate;this._lastFrameTime=0;this._currentFrame=0;this._confirmedFrame=0;this.dFrame=0;this._isRunning=!1;this.isStart=!1;this._operationQueue={};this._lockStep=!0;this._nextFrameTime=0;this._snakeStates={};this.maxSnapshotFrame=-1}checkServerFrame(e,t,i,n,s,a,c){var u=this._operationQueue[e];u&&u.length&&u.forEach(p=>{if(p.msgBody.roleId==t){var f=p.msgBody.frame,d=this.getSnapshot(f+1,t);if(d){var h=d.dir,b=d.aimDir,w=d.bones,v=d.speedRate,_=d.alive,T=e-f,M=p.msgBody.head,D=gt.distancePoint(M.loc.x,M.loc.y,w[0].x,w[0].y);D>.01?(console.error(ue.GetLogTime+" "+t," checkServerFrame 前后端位移相差：",D,"C:",w[0].x,w[0].y,e,"S:",M.loc,f),ue.alertNoAll("检测到坐标异常，保留控制台日志。"+ue.GetLogTime+" "+t+" checkServerFrame 前后端位移相差："+D+", C: ("+w[0].x+", "+w[0].y+"), "+e+" S:("+M.loc.x+", "+M.loc.y+"), "+f)):ae.Debug==2&&console.warn(ue.GetLogTime+" "+t," checkServerFrame 前后端位移相差：",D,"C:",w[0].x,w[0].y,e,"S:",M.loc,f)}return}})}static get Instance(){return this._instance||(this._instance=new r),this._instance}init(){this.stop(),this.dFrame=0,this._operationQueue={},this._snakeStates={},this._currentFrame=0,this._lastFrameTime=Laya.Browser.now(),this._nextFrameTime=this._lastFrameTime+this._frameInterval}setStartFrame(e){this._confirmedFrame=e,this._currentFrame=e,this.isStart=!0}start(){this._isRunning=!0,Laya.timer.loop(33,this,this.update)}stop(){this._isRunning=!1,Laya.timer.clear(this,this.update)}end(){this.stop(),this.isStart=!1}update(){let e=Laya.Browser.now();if(this._lockStep&&e<this._nextFrameTime)return;let t=e-this._lastFrameTime,i=Math.floor(t/this._frameInterval);if(i>0){this._lastFrameTime=e-t%this._frameInterval,this._nextFrameTime=this._lastFrameTime+this._frameInterval;for(let n=0;n<i;n++)this._currentFrame++,this.executeFrame(this._currentFrame),this._confirmedFrame++}this.dFrame>0&&(console.warn("dFrame: ",this.dFrame),this.dFrame--,this._currentFrame++,this.executeFrame(this._currentFrame))}addOperation(e){ae.Debug==2&&console.warn("addOperation (frame+1): ",e.msgBody.frame+1,e),this._operationQueue[e.msgBody.frame+1]||(this._operationQueue[e.msgBody.frame+1]=[]),this._operationQueue[e.msgBody.frame+1].push(e)}executeFrame(e,t=!1){console.log(ue.GetLogTime,"executeFrame",e),this.saveSnapshot(e);let i=this._operationQueue[e]||[];for(let n of i)ke.instance.handleOperationDetail(n);Fr.getInstance().update(e,t),this.cleanupOldData(e)}saveSnapshot(e){this._snakeStates[e]==null?(e>this.maxSnapshotFrame&&(this.maxSnapshotFrame=e),this._snakeStates[e]=$e.instance.getSnakesState(),ae.Debug==2&&console.log("saveSnapshot","取帧"+(e-1)+"数据给帧",e,this._snakeStates[e])):ae.Debug==2&&console.log("saveSnapshot",e,this._snakeStates[e],"未保存,之前有保存的数据")}getSnapshot(e,t){var i=this._snakeStates[e];return i?i.snakes[t]:null}cleanupOldData(e){let i=e-60;for(let n in this._operationQueue)parseInt(n)<i&&delete this._operationQueue[n];for(let n in this._snakeStates)parseInt(n)<i&&delete this._snakeStates[n]}rollbackAndReplay(e,t){if(ae.Debug==2&&console.log("rollbackAndReplay",e,t,this._snakeStates[e],"清理快照到："+this.maxSnapshotFrame),this._snakeStates[e]){$e.instance.restoreState(this._snakeStates[e]);for(var i=e+1;i<=this.maxSnapshotFrame;i++)delete this._snakeStates[i]}for(let n=e;n<=t;n++)this._currentFrame=n,this.executeFrame(n,!1)}quickPlay(){this.dFrame=2}get currentFrame(){return this._currentFrame}handleLateFrame(e,t){let i=Math.max(e-1,0);this.rollbackAndReplay(i,e)}};var Wa=class r extends Laya.Sprite{constructor(){super(...arguments);this.collidables=[];this.isVisible=!1}static getInstance(){return r._instance||(r._instance=new r,r._instance.zOrder=9999,r._instance.mouseEnabled=!1),r._instance}toggleVisible(){this.isVisible=!this.isVisible,console.log("DebugLayer.toggleVisible",this.isVisible),this.graphics.clear()}updateCollidables(t){this.collidables=t}draw(){this.isVisible&&(this.graphics.clear(),this.graphics.alpha(.5),this.collidables.forEach(t=>{t instanceof pn?this.drawSnakeBody(t):t instanceof Ga&&this.drawFood(t)}))}drawSnakeBody(t){let i=t.getPosition(),n=t.getRadio();this.graphics.drawCircle(i.x,i.y,n,"#FF0000",2,.5)}drawFood(t){let i=t.getBoundingBox();this.graphics.drawRect(i.x,i.y,i.width,i.height,"#00FF00",2,.5)}};var Qf=class{constructor(e){this.root=e,this.mapContainer=e.getChildByName("box_front")}destroy(){this.root=null,this.mapContainer=null}initMap(e){let t=pe.mapSize,i=t.defaultMapRes,n=Math.floor(t.width/i.width),s=Math.floor(t.height/i.height),a=255;for(let c=1;c<=n;c++)for(let u=1;u<=s;u++){let p=new Laya.Image(i.resPath);p.size(i.width,i.height);let f=Math.floor(Math.random()*255),d=Math.floor(Math.random()*255),h=Math.floor(Math.random()*255),b=f/255,w=d/255,v=h/255,_=[b,0,0,0,0,0,w,0,0,0,0,0,v,0,0,0,0,0,1,0];p.filters=[new Laya.ColorFilter(_)],p.alpha=a/255,p.anchorX=0,p.anchorY=0,e.addChild(p),p.pos(t.offsetX+(c-1)*i.width,t.offsetY+(u-1)*i.height)}}move(e){if(!e)return;let t=pe.mapSize,i=Laya.stage.width,n=Laya.stage.height;var s=ke.instance.gameMap,a=0,c=0;e.x>i/2&&e.x<t.width-.5*i?a=-(e.x-i/2):e.x<=i/2?a=0:e.x>=t.width-.5*i&&(a=-(t.width-i)),e.y>n/2&&e.y<t.height-.5*n?c=-(e.y-n/2):e.y<=n/2?c=0:e.y>=t.height-.5*n&&(c=-(t.height-n));var u=gt.distancePoint(a,c,s.x,s.y);u<200&&(a=gt.lerp(s.x,a,.1),c=gt.lerp(s.y,c,.1)),s.pos(a,c)}};var Io=class Io{static getInstance(e=null,t=null){return Io.instance||(Io.instance=new Io(e,t)),Io.instance}constructor(e,t){if(!e)throw new Error("gameLayer Must Be Not Null");this.foodManager=dr.instance,this.snackManager=$e.instance;let i=this.snackManager.container,n=this.foodManager.container,s=new Laya.Sprite;e.addChild(n),e.addChild(i),e.addChild(s),s.addChild(Wa.getInstance()),this.foodManager.init(),this.initGameMap(e)}startGame(){this.snackManager.initSnacks(),tt.Instance.start(),this.initTimer()}initTimer(){Laya.timer.frameLoop(3,this,this.updateMove)}clearTimer(){tt.Instance.stop(),Laya.timer.clear(this,this.updateMove)}endTimer(){tt.Instance.end(),Laya.timer.clear(this,this.updateMove),Ct.instance.close()}updateMove(){this.snackManager.selfSnack&&this.snackManager.selfSnack.rorateSendReady()}update(e,t){if(this.snackManager.updateSnakes(Laya.timer.delta,t),this.gameMap.move(this.snackManager.getSelfSnackPos()),ae.needDraw){let i=Wa.getInstance();if(i){let n=ln.getInstance(null).getAllCollidables();i.updateCollidables(n),i.draw()}}}initGameMap(e){this.gameMap=new Qf(e)}updateSpeedRate(e=pe.snackType.SELF,t=pe.snackSpeedRate.speedUp){this.snackManager.updateSpeedRate(e,t,!0)}createFood(e){return this.foodManager.addFood(e)}removeAllFoods(){this.foodManager.removeAllFoods()}clear(){this.clearTimer(),this.snackManager=null,this.foodManager=null,this.gameMap.destroy(),this.gameMap=null,Io.instance=null}};Io.instance=null;var Fr=Io;var qr=class qr{constructor(){this.arenaType=1;this.isControl=!1;this.rotateSpeed=500;this.speedRate=1;this.speed=6;this.time=0;this.dir=0;this.aimDir=0;this.bones=[Et.create(0,0)]}get gameMap(){return this._gameMap}set gameMap(e){this._gameMap=e}clearData(){Ct.instance.close(),$e.instance.clear(),dr.instance.clear(),Fr.getInstance().clear(),Laya.Pool.clearBySign(xi.POOL_NAME),Laya.Pool.clearBySign(yi.POOL_NAME),this.gameMap=null,this.box_players=null,this.box_behind=null,this.box_front=null,this.img_smallMap=null}static get instance(){return qr._instance==null&&(qr._instance=new qr),qr._instance}init(){}updateFoods(){Fr.getInstance().removeAllFoods(),this.createFoods()}createFoods(){let e=Le.instance.matchDto.item.length;for(var t=0;t<e;t++){var i=Le.instance.matchDto.item[t];Fr.getInstance().createFood(i)}}handleOperationDetail(e){switch(e.msgtype){case Y.snake.socket.MessageType.MSG_PLAYER_OPR:var t=e.msgBody,d=t.frame,c=t.roleId;qr.instance.onRevOprPush(t);break;case Y.snake.socket.MessageType.MSG_EAT_FOOD:let _=e.msgBody;var i=_.fid,n=_.score,s=_.lenght,c=_.roleId,a=_.remain;dr.instance.showRemain(a);var f=_.head,d=_.frame,b=qr.instance.getRoleById(c);b&&(b.updateHead(d,f,_.speed,_.curDir,_.aimDir),b.updateLen(s),dr.instance.eateFoodIds(b,i,n),b.score=n);break;case Y.snake.socket.MessageType.MSG_PLAYER_COLLISION:let T=e.msgBody;var c=T.roleId,u=T.food,p=T.taret,f=T.head,d=T.frame,h=T.die,b=qr.instance.getRoleById(c);if(b&&(b.updateHead(d,f,T.speed,T.curDir,T.aimDir),b.isSend=!1,h!="-1")){var w=qr.instance.getRoleById(p);h==c?(b.die(),w&&w.addKill(1)):(w&&w.die(),b.addKill(1)),u&&u.length&&dr.instance.addFoods(u)}break;case Y.snake.socket.MessageType.MSG_NOTICE_ENTER:var v=e.msgBody;$e.instance.newAddSnake(v);break}}handleFrameOperations(e){let t=e.frame,i=e.minEventFrame,n=e.serverCmdDataDtos,s=tt.Instance.currentFrame,a=s-t;ae.Debug==2&&console.log("handleFrameOperations: localFrame: ",s,"serverFrame: "+t,"minEventFrame: "+i,n);for(let c of n)tt.Instance.addOperation(c);if(s>=i+1){$e.instance.selfSnack.showServerPos1("回滚"),console.warn("handleFrameOperations: currentFrame: ",s,"minEventFrame: "+i,"过期帧 回滚"),tt.Instance.handleLateFrame(i+1,n);return}if(s<i-2){$e.instance.selfSnack.showServerPos1("追赶"),console.warn("handleFrameOperations: currentFrame: ",s,"serverFrame: "+t,"追赶"),tt.Instance.quickPlay();return}$e.instance.selfSnack.showServerPos1("")}onRevOprPush(e){if(e!=null){var t=qr.instance.getRoleById(e.roleId);if(t){if(t.updateHead106(e.frame,e.head,e.speed,e.curDir,e.aimDir,e.oprIndex),e.opr==1){var i=e.value;t.rorate(i)}else if(e.opr==2){var n=e.value;t.updateSpeedRate(n)}}else console.log(e.roleId+" snake is null")}}onUpdatePlayerObject(e,t){if(e!=null){var i=qr.instance.getRoleById(e.roleId);if(i)if(e.state==!1){if(i.isAlive()){var n=i.tag.roleId==G.instance.playerDto.pid;i.die()}console.log("收到数据 玩家死了：",e.state)}else{var s=e.eatenIds;s&&s.length&&console.log("服务端自动吃食物: ",s);var a=e.score,c=e.length,u=e.snake[0],t=e.frame;i.updateHead107(t,u,e.speed,e.direction,e.aimDir,e.oprIndex),i.updateLen(c),dr.instance.eateFoodIds(i,s,a),i.score=a}else console.log(e.roleId+" snake is null")}}sendRestoreData(){if(Le.instance.msgEndbody==null&&$e.instance.selfSnack&&$e.instance.selfSnack.isAlive()){var e=G.instance.playerDto.pid,t=Y.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA,i=Y.snake.socket.CS_REQUEST_ROOM_DATA.fromObject({roleId:e});Ct.instance.sendData(t,i)}}onRevRestorePush(e){Le.instance.matchDto=e,U.intance.event(L.EVENT_RESTORE_DATA)}getRoleById(e){return $e.instance.matchHeroSprDic?$e.instance.matchHeroSprDic.get(e):null}playMusic(){Qe.instance.playMusicByURL("mp3/battle.mp3"),$t.instance.needPop=!1}setMyHeroDirection(e){$e.instance.selfSnack&&(e!=-4?(Fr.getInstance().snackManager.rorate(pe.snackType.SELF,e),this.isControl=!0):this.isControl=!1)}fromBigToSmall(e,t){var i=e*185/pe.mapSize.width,n=t*185/pe.mapSize.height;return[i,n]}fromSmallToBig(e,t){var i=Le.instance.currArenaItem.mapid,n=e/(185/3040),s=t/(185/3040);return i==1002&&(n+=160,s+=160),[n,s]}initMove(){var e=870.9040904578862,t=1487.9661486407304;console.log("TEST==== 蛇头坐标：",e,t),this.speedRate=1,console.log("TEST==== 加速倍数 speedRate：",this.speedRate),console.log("TEST==== 速度参数 speed：",this.speed,"rotateSpeed：",this.rotateSpeed,"defaultMoveInterval：",pe.snack.defaultMoveInterval),this.bones=[Et.create(e,t)];var i=105;this.dir=i;var n=gt.getAngleToVec(i);n.normalize(),console.log("TEST==== 当前方向：",i,"向量：",n.x,n.y),this.toAimDir(100)}toAimDir(e){this.time=0,this.aimDir=e;var t=gt.getAngleToVec(e);t.normalize(),console.log("TEST==== 目标方向：",e,"向量：",t.x,t.y);for(var i=0;i<30;i++)this.move(null)}move(e){this.time++;for(let n=0;n<this.speedRate;n++){let s=this.aimDir-this.dir,a=this.rotateSpeed*pe.snack.defaultMoveInterval;if(Math.abs(s)<a)this.dir=this.aimDir,console.log("move:============  当前直接设目标方向"," aimDir"+this.aimDir," dir："+this.dir);else{s=(s+360)%360,s>180&&(s-=360);var t=Math.abs(s)<a?s:a*(s>0?1:-1);this.dir+=t,this.dir>=360&&(this.dir-=360),this.dir<0&&(this.dir+=360),console.log("第"+this.time+"次"," ============  rotateAngle："+t," aimDir"+this.aimDir," dir："+this.dir)}let c=this.dir*Math.PI/180,u=Et.create(Math.cos(c),Math.sin(c));var i=this.bones[0].add(u.mul(this.speed));this.bones[0].assign(i),console.log("TEST==== 移动蛇头坐标：","第"+this.time+"次",this.bones[0].x,this.bones[0].y)}}};qr._instance=null;var ke=qr;var Ht=class Ht{constructor(){this.resArr=["gameIcon/snakeMatch/snakes/img_head1001.png","gameIcon/snakeMatch/snakes/img_head1002.png","gameIcon/snakeMatch/snakes/img_head1003.png","gameIcon/snakeMatch/snakes/img_body1001.png","gameIcon/snakeMatch/snakes/img_body1002.png","gameIcon/snakeMatch/snakes/img_body1003.png",{url:"scenes/mainView/MainScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBodySpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBeanSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/DamageNumber.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtLoadingView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtNoticeView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/asset/AssetNewScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/createRole/RoleInfoScene.ls",type:Laya.Loader.HIERARCHY},"gameIcon/spine/img_ziyousai.png","gameIcon/spine/img_she.png","gameIcon/spine/img_qianbao.png","gameIcon/spine/img_gonghui.png","gameIcon/spine/img_cion4.png","gameIcon/spine/img_cion2.png","gameIcon/spine/img_cion1.png","gameIcon/spine/img_anniu3.png","gameIcon/spine/img_anniu2.png","gameIcon/spine/img_anniu1.png","gameIcon/spine/img_jingjisai.png"];this.m_arrPreResource=["config/spot.json"];this.m_arrInitResource=["config/general.json","config/head.json","config/country.json","config/shop.json","config/snake.json","config/foods.json","config/item.json","config/arena.json","config/arenaType.json","config/snakeLengthRules.json","config/node.json","config/currencyAddress.json","config/aCoin.json","config/coinAddress.json"];this.m_objModuleReource={MainScene:["res/atlas/main.atlas"],ShopScene:[],RoleInfoScene:[],RankScene:[],AssetNewScene:[],CommentDialog:["res/atlas/comment.atlas"],GuideView:["res/atlas/guide.atlas","res/atlas/ShopView.atlas","config/newplayer.json"],SelectHeadDialog:[],KnapsackScene:["res/atlas/mainUI1.atlas"]};this.m_objModuleViews={BaseAlertDialog:"scenes/baseAlert/BaseAlertDialog.lh",NoServerView:"scenes/createRole/NoServer.lh",CreateLoginView:"scenes/createRole/CreateLoginView.lh",ChangeHeadDialog:"scenes/createRole/ChangeHeadDialog.lh",HeroGetDialog:"scenes/shop/HeroGetDialog.lh",BuyTicketDialog:"scenes/shop/BuyTicketDialog.lh",ItemGetDialog:"scenes/item/ItemGetDialog.lh",EquipStarUpDialog:"scenes/item/EquipStarUpDialog.lh",RewardGetDialog:"scenes/item/RewardGetDialog.lh",KnapsackTipDialog:"scenes/item/KnapsackTipDialog.lh",SelectHeadDialog:"scenes/createRole/SelectHeadDialog.lh",TxtNoticeView:"scenes/notice/TxtNoticeView.lh",NoticeDialog:"scenes/notice/NoticeDialog.lh",HelpDialog:"scenes/notice/HelpDialog.lh",ImgDialog:"scenes/notice/ImgDialog.lh",ChampDetailDialog:"scenes/asset/ChampDetailDialog.lh",ChampRecordDialog:"scenes/asset/ChampRecordDialog.lh",RoleInfoDialog:"scenes/createRole/RoleInfoDialog.lh",RemGetDialog:"scenes/createRole/RemGetDialog.lh",CreateRoomDialog:"scenes/mainView/CreateRoomDialog.lh",CreateRentalDialog:"scenes/shop/CreateRentalDialog.lh",MyLeasedDialog:"scenes/shop/MyLeasedDialog.lh",MyRentedDialog:"scenes/shop/MyRentedDialog.lh",MyRentalBuyDialog:"scenes/shop/MyRentalBuyDialog.lh",EnterRoomView:"scenes/mainView/EnterRoomView.lh",InputPwdDialog:"scenes/mainView/InputPwdDialog.lh",RoomInfoDialog:"scenes/mainView/RoomInfoDialog.lh",HeroDetailDialog:"scenes/hero/HeroDetailDialog.lh",MatchEndRankView:"scenes/match/MatchEndRankView.lh",MatchEndTeamRankView:"scenes/match/MatchEndTeamRankView.lh",MatchEndRewardTokensDialog:"scenes/match/MatchEndRewardTokensDialog.lh",MyBookingView:"scenes/airdrop/MyBookingView.lh",UnionMemberView:"scenes/union/UnionMemberView.lh",UnionListView:"scenes/union/UnionListView.lh",CreateSubUnionView:"scenes/union/CreateSubUnionView.lh",ChangeUnionIconDialog:"scenes/union/ChangeUnionIconDialog.lh",MySubUnionView:"scenes/union/MySubUnionView.lh",UnionMemberApplyView:"scenes/union/UnionMemberApplyView.lh",UnionReferralView:"scenes/union/UnionReferralView.lh",UnionTransferView:"scenes/union/UnionTransferView.lh",TicketTransferView:"scenes/union/TicketTransferView.lh",HeroTransferView:"scenes/hero/HeroTransferView.lh",BanAccountView:"scenes/match/BanAccountView.lh",MatchReadyView:"scenes/match/MatchReadyView.lh",MatchEndView:"scenes/match/MatchEndView.lh",GameSettingLanguageDialog:"scenes/gameSetting/GameSettingLanguageDialog.lh",SkillTipDialog:"scenes/hero/SkillTipDialog.lh",TransferRecordDialog:"scenes/hero/TransferRecordDialog.lh",InviteConfimDialog:"scenes/airdrop/InviteConfimDialog.lh",ApplyConfimDialog:"scenes/airdrop/ApplyConfimDialog.lh",CreateSubWalletDialog:"scenes/scholarship/CreateSubWalletDialog.lh",WalletChooseHeroDialog:"scenes/scholarship/WalletChooseHeroDialog.lh",WalletChoosePropsDialog:"scenes/scholarship/WalletChoosePropsDialog.lh",EmployInfoDialog:"scenes/scholarship/EmployInfoDialog.lh",HireDetailDialog:"scenes/asset/HireDetailDialog.lh",ProxyDetailDialog:"scenes/asset/ProxyDetailDialog.lh",WithDrawRecordDialog:"scenes/asset/WithDrawRecordDialog.lh",NodeRevenueRecordDialog:"scenes/asset/NodeRevenueRecordDialog.lh",WithdrawDialog:"scenes/asset/WithdrawDialog.lh",BuyPropDialog:"scenes/shop/BuyPropDialog.lh"};this.m_objConfigReource={};this.m_commonResource=new Ie;this.loadingView=Laya.Browser.window.loadingView;this.ii=100;this.baseUrl="https://cdn.snake.ai/snake/";if(Ht._instance)throw new Error("LayerManager是单例,不可new.");Ht._instance=this}static get instance(){return Ht._instance==null&&(Ht._instance=new Ht),Ht._instance}init(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),this.initGameLanguage()}initGameLanguage(){Ht.GameLanguage_URL="config/language.json",Laya.loader.load(Ht.GameLanguage_URL,Laya.Handler.create(this,this.initGameResource))}initGameResource(e){if(e==null)return;let t=Ht.instance.getResBySetURL(Ht.GameLanguage_URL);H.instance.initLanTypes(t.data),Laya.loader.clearRes(Ht.GameLanguage_URL),this.onConfigLoaded()}onError(e){}onConfigLoaded(){let e=new gn;e.ID=4,e.Event="加载语言包信息",Ge.instance.sendCustumEvent(4,null,e),ae.ignoreLang||(G.instance.m_strLanguage=H.instance.getLanIdByType(ae.User_Lan)),this.m_UILang="config/lang_english"+G.instance.m_strLanguage+".json",this.m_NomalLang="config/english"+G.instance.m_strLanguage+".json",this.m_NomalLang1="config/english1.json",this.m_ErrorLang="config/error"+G.instance.m_strLanguage+".json",this.m_arrPreResource.push(this.m_UILang),this.m_arrPreResource.push(this.m_NomalLang),this.m_arrPreResource.push(this.m_NomalLang1),this.m_arrPreResource.push(this.m_ErrorLang),this.initResourceURL(this.m_arrPreResource,!0),this.initResourceURL(this.m_arrInitResource,!0),this.addFont1()}addFont1(){Laya.loader.load("res/font/CookieRun Regular.otf",Laya.Loader.TTF).then(()=>{this.loadDemoResource()})}loadDemoResource(){Laya.loader.load(this.resArr,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{Ke.instance.init(),ke.instance.damageNumPrefab=Laya.loader.getRes("scenes/match/DamageNumber.lh"),ke.instance.aniSkPrefab=Laya.loader.getRes("scenes/hero/AniSk.lh"),ke.instance.roleAniPrefab=Laya.loader.getRes("scenes/match/MatchSnakeSpr.lh"),ke.instance.matchSnakeBodyPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBodySpr.lh"),ke.instance.matchSnakeBeanPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBeanSpr.lh");var e=ke.instance.roleAniPrefab.create();console.log(" ================ roleAniPrefab: "+e);var t=ke.instance.matchSnakeBodyPrefab.create();console.log(" ================ snakeBodyPrefab: "+t),this.onLoadThreeDimen()})}onLoadThreeDimen(){Laya.loader.load(this.m_arrPreResource,Laya.Handler.create(this,this.onPreAssetLoaded),Laya.Handler.create(this,this.onPreAssetPress2,null,!1))}onPreAssetPress1(e){this.va=(e*100*.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetPress2(e){this.va=(e*100*.5+.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetLoaded(e){if(!e)return;let t=Laya.Browser.now();bs.instance.initSpotCfgData(),this.initResourceURL(this.m_objModuleReource),this.initResourceURL(this.m_objConfigReource),Ge.instance.sendCustumEvent(5),xe.intance.preInit(),this.setGlobalLanguage(),Ge.instance.sendCustumEvent(6),U.intance.event(L.EVENT_BACK_TO_LOGIN),lt.intance.initPreload(),this.loadingView&&this.loadingView.loading(100),console.log("-----------------------preload-time:"+(Laya.Browser.now()-t))}setGlobalLanguage(){let e=Ht.instance.getResByURL(this.m_NomalLang);H.instance.initConfigLan(e.data);let t=Ht.instance.getResByURL(this.m_NomalLang1);H.instance.initConfigLan1(t.data);let i=Ht.instance.getResByURL(this.m_UILang);H.instance.initUILan(i.data);let n=Ht.instance.getResByURL(this.m_ErrorLang);st.instance.initErrData(n.data),this.clearResUrlByRoot(this.m_UILang,!0),this.clearResUrlByRoot(this.m_NomalLang,!0),this.clearResUrlByRoot(this.m_NomalLang1,!0),this.clearResUrlByRoot(this.m_ErrorLang,!0)}initResourceURL(e,t=!1){if(e instanceof Array)this.setResURLArr(e,t);else if(e instanceof Object)for(let i in e)this.setResURLArr(e[i],t)}setResURLArr(e,t){let i,n;for(let s=0;s<e.length;s++)t?(this.m_commonResource.set(e[s],!0),n=this.setResURL(e[s]),i=this.getTypeFromUrl(n),e[s]={url:n,type:i,size:1,priority:1}):this.m_commonResource.get(e[s])?(e.splice(s,1),s--):(n=this.setResURL(e[s]),i=this.getTypeFromUrl(n),e[s]={url:n,type:i,size:1,priority:1})}getTypeFromUrl(e){let{ext:t,typeId:i,main:n,loaderType:s}=Laya.Loader.getURLInfo(e);Ht._extReg.lastIndex=e.lastIndexOf(".");let a=Ht._extReg.exec(e);return a&&a.length>1?a[1].toLowerCase():"text"}setResURL(e){return e}clearResUrlByRoot(e,t=!1){let i=e;Laya.loader.clearRes(i)}hasFormatEffectUrl(e){return e.indexOf("effect/")>=0}setItemResURL(e){return e&&e.hasOwnProperty("item_img")?this.setResURL("icon/"+e.item_img+".png"):""}setThreeDimenUrl(e){return e?this.setResURL("threeDimen/"+e):""}getThreeDimenUrl(e){let t=this.setResURL("threeDimen/"+e);return Laya.Loader.getRes(t)}getResByURL(e){let t=Ht.instance.setResURL(e);return Laya.Loader.getRes(t)}getResBySetURL(e){return Laya.Loader.getRes(e)}loadModuleUrl(e,t=null,i=null,n=1,s=!0){console.log("loadModuleUrl m_strName: "+e),this.ii++;let a=Ht.instance.m_objModuleReource[e];if(a==null||a.length<1){t.run();return}Laya.loader.load(a,Laya.Handler.create(this,this.loadItemComplete,[t,a]),Laya.Handler.create(this,this.onLoadProgress,[e],!1),i,n,s,this.ii.toString())}loadItemComplete(e,t){this.usedUrlDic||(this.usedUrlDic=new Ie);for(let i in t){let n=t[i].url,s=this.usedUrlDic.get(n);s?this.usedUrlDic.set(n,++s):this.usedUrlDic.set(n,1)}e.run()}clearModuleUrl(e){console.log("clearModuleUrl m_strName: "+e);let t=Ht.instance.m_objModuleReource[e];for(let i in t){let n=t[i].url;if(this.usedUrlDic){let s=this.usedUrlDic.get(n);s-=1,s<1?(this.usedUrlDic.remove(n),Laya.loader.clearRes(n)):this.usedUrlDic.set(n,s)}}}onLoadProgress(e,t){}loadResource(e,t=null,i=null,n=null,s=1,a=!0){Laya.loader.load(e,t,i,n,s,a)}getNodeIcon(e){return this.setResURL("gameIcon/node/img_"+e+".png")}getCountryIcon(e){return this.setResURL("gameIcon/country/img_"+e+".png")}getTeamFlag(e){return this.setResURL("gameIcon/hero/teamFlag/img_"+e+".png")}getChestIcon(e){return this.setResURL("gameIcon/items/chest/img_"+e+".png")}getChestBigIcon(e){return this.setResURL("gameIcon/items/chestBig/img_"+e+".png")}getHeroEggIcon(e){return this.setResURL("gameIcon/hero/heroEgg/img_"+e+".png")}getHeroEggBigIcon(e){return this.setResURL("gameIcon/hero/heroEggBig/img_"+e+".png")}getSnakeHeadIcon(e){return this.setResURL("gameIcon/snakeMatch/snakes/img_head"+e+".png")}getSnakeBodyIcon(e){return this.setResURL("gameIcon/snakeMatch/snakes/img_body"+e+".png")}getFoodIcon(e){return this.setResURL("gameIcon/snakeMatch/foods/img_"+e+".png")}getHeroHeadIcon(e){return this.setResURL("gameIcon/hero/heroHead/img_"+e+".png")}getHeroQuality(e){return this.setResURL("gameIcon/hero/heroQuality/img_"+e+".png")}getHeroBackIcon(e){return this.setResURL("gameIcon/hero/heroDetail/img_hero_di_"+e+".png")}getHeroFrontIcon(e){return this.setResURL("gameIcon/hero/heroDetail/img_hero_"+e+".png")}getItemIcon(e){return this.setResURL("gameIcon/items/item/img_"+e+".png")}getItemBgIcon(e){return this.setResURL("gameIcon/items/itemBg/img_"+e+".png")}getItemBigIcon(e){return this.setResURL("gameIcon/items/itemBig/img_"+e+".png")}getItemBigBigIcon(e){return this.setResURL("gameIcon/items/itemBigBig/img_"+e+".jpg")}getItemQualityIcon(e){return this.setResURL("gameIcon/items/itemQuality/img_"+e+".png")}getMoneyIcon(e){return this.setResURL("gameIcon/items/money/img_"+e+".png")}getAttrIcon(e){return this.setResURL("gameIcon/attr/img_attr_"+e+".png")}getSkillIcon(e,t=!1){let i;return t?i=this.setResURL("gameIcon/skill/skills/img_big_"+e+".png"):i=this.setResURL("gameIcon/skill/skills/img_"+e+".png"),i}getMatchSkillIcon(e){return this.setResURL("gameIcon/skill/matchSkills/img_"+e+".png")}getPlayerIcon(e){return parseInt(e)>0?this.setResURL("gameIcon/head/headCircle/img_"+e+".png"):e}getSceneBgUrl(e){return"scene/"+e+".jpg"}clearSKinUrl(e){for(let t in e)e[t]instanceof String&&e[t].indexOf("skincolor")==-1&&Laya.loader.clearRes(e[t]);e=[]}getSoundURL(e,t=".ogg"){let i;return i=this.setResURL("mp3/"+e+t),i}getSoundURLogg(e){let t;return t=this.setResURL("mp3/"+e),t}getSceneUrl(e){return"scene/sceneBg/"+e+".jpg"}getMianSysIcon(e){return this.setResURL("icon/mainSysIcon/btn_"+e+".png")}getEffectUrl(e){return this.setResURL("effect/"+e+".json")}getLoadingUrl(e){return this.setResURL("effect/"+e)}getHeadUrl(e){return"common/common_icon/"+e+".png"}getMapImg(e){return"gameIcon/map/"+e+"/img_map.jpg"}getMapPrefab(e){return"gameIcon/map/map_"+e+".lh"}clearCache(){}};Ht._extReg=/\.(\w+)\??/g;var _e=Ht;var $a=class extends Laya.Script{constructor(){super();this.m_ioffsetX=0;this.m_ioffsetY=0}onAdded(){this.m_iLayerType=Se.M_POP,this.m_iPositionType=Se.CENTER,this.m_canTouch_all=!1,this.selfMaskAlpha=.8,this.m_arrMapEvent=[],this.canClickMask=!0,this.maskLayer=new Laya.Sprite,this.useShowAnimation=!0,this.useHideAnimation=!0,this.isAutoRealseRes=!0,this.m_strSound=Qe.soundName3}onClickMask(t){this.canClickMask&&this.maskClose()}maskClose(){this.close()}onStageResize(){}onEnable(){this._view=this.owner,this._view.addChild(this.maskLayer),this.createUI(),this.createUIEnd(),this.initializeLater()}createUI(){}createUIEnd(){}initializeLater(){this._addEvent(),this.initData(),this.useShowAnimation?(this._view.visible=!1,this.showAnimationEnd=!1,Laya.timer.frameOnce(5,this,this.popTimeOut,[this._view])):this.showAnimationEnd=!0}popTimeOut(t){Laya.timer.clear(this,this.popTimeOut),t.scale(.5,.5),t.visible=!0,Laya.Tween.to(t,{scaleX:1,scaleY:1,ease:Laya.Ease.backOut},300,null,Laya.Handler.create(this,this.onShowAnimationEnd),2),Qe.instance.playSoundByName(this.m_strSound),this._view.event(Laya.Event.OPEN)}onShowAnimationEnd(){this.showAnimationEnd=!0}_addEvent(){this.maskLayer.on(Laya.Event.CLICK,this,this.onClickMask),Laya.stage.on(Laya.Event.RESIZE,this,this.onStageResize),this.btn_com_back&&this.btn_com_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_com_help&&this.btn_com_help.on(Laya.Event.CLICK,this,this.onHelp),this.addEvent()}addEvent(){}initData(){}_removeEvent(){this.maskLayer.offAll(),Laya.stage.off(Laya.Event.RESIZE,this,this.onStageResize),this.removeEvent()}removeEvent(){}addMapEvent(t,i,n,s,a=null){t.on(i,n,s,a),this.m_arrMapEvent.push(t)}removeAllMapEvent(){if(this.m_arrMapEvent){for(let t=0;t<this.m_arrMapEvent.length;t++)this.m_arrMapEvent[t].offAll();this.m_arrMapEvent.splice(0,this.m_arrMapEvent.length)}}dispose(){if(this.newRoleSpr){for(;this.newRoleSpr.numChildren>0;)this.newRoleSpr.removeChildAt(0);this.newRoleSpr=null}this.isDispose=!0,Oe.intance.removeViewFromModuleManger(this),this.m_strName=null,this.m_strSound=null,this._removeEvent(),this.removeAllMapEvent(),Laya.Tween.clearAll(this._view),this.m_arrMapEvent=null,this.btn_com_back&&this.btn_com_back.offAll(),this.btn_com_help&&this.btn_com_help.offAll(),this.maskLayer&&(Laya.timer.clearAll(this.maskLayer),Laya.Tween.clearAll(this.maskLayer),this.maskLayer.offAll(),this.maskLayer.graphics.destroy(),this.maskLayer.removeSelf(),this.maskLayer.destroy(!0)),this.isAutoRealseRes&&_e.instance.clearModuleUrl(this.m_strName),this._view&&(Laya.timer.clearAll(this._view),Laya.Tween.clearAll(this._view),this._view.offAll(),this._view.graphics.destroy(),this._view.removeSelf(),this._view.destroy(!0),this._view=null),Laya.timer.clearAll(this),Laya.Tween.clearAll(this),U.intance.event(L.EVENT_CLOSE_MODULE)}sendData(t,i=null){i==null&&(i=[])}close(t=null){this.useHideAnimation&&this._view?Laya.Tween.to(this._view,{scaleX:.5,scaleY:.5,ease:Laya.Ease.backIn},200,null,Laya.Handler.create(this,this.dispose,null),2):this.dispose()}static closeAll(){Oe.intance.closeAll()}backToPreScene(){let t=lt.intance.getPreSceneData();lt.intance.setCurrentScene(t[0],t[1],t[2],t[3],!1)}get btn_com_back(){return this._view?this._view.getChildByName("btn_com_back"):null}get btn_com_help(){return this._view?this._view.getChildByName("btn_com_help"):null}onHelp(){this.m_helpId&&Oe.intance.openModule(S.HelpDialog,this.m_helpId)}onBack(){this.close()}};var Oe=class r extends Laya.DialogManager{constructor(){super();this.views=new Ie;this.m_arrLoadingArr=[];if(r._instance)throw new Error("LayerManager是单例,不可new.");r._instance=this,Laya.Dialog.manager=this}static get intance(){return r._instance||(r._instance=new r),r._instance}openModule(t,i=null){U.intance.event(L.EVENT_OPEN_MODULE,[t,i])}hasOpenView(t){return this.views.get(t)!=null}getOpenView(t){return this.views.get(t)}disposeView(t){if(this.getOpenView(t)){let i=this.getOpenView(t);if(i instanceof Array)for(let n=0;n<i.length;n++)i[n].close();else i.close()}}init(){U.intance.on(L.EVENT_OPEN_MODULE,this,this.onModulePanel),U.intance.on(L.EVENT_CLOSE_MODULE,this,this.disposeView)}initMainView(){}onModulePanel(t,i=null){console.log("ModuleManager.onModulePanel moudleName:"+t),this.m_arrLoadingArr.indexOf(t)==-1&&(this.getOpenView(t)||(Ke.instance.showLoading(!1),this.m_arrLoadingArr.push(t),_e.instance.loadModuleUrl(t,Laya.Handler.create(this,this.onLoaded,[t,i]))))}onLoaded(t,i=null){let n=this.m_arrLoadingArr.indexOf(t);n!=-1&&this.m_arrLoadingArr.splice(n,1);let s;var a=_e.instance.m_objModuleViews[t];console.log("onLoaded: ",t,a),Laya.loader.load(a).then(c=>{if(s=c.create(),i&&s.setOpenData(i),s.m_strName=t,this.getOpenView(t)){console.log("Module already open, skipping creation:",t),s.hideLoadingBySelf||Ke.instance.hideLoading();return}if(s instanceof Laya.Box)Se.instence.addToLayer(s,s.m_iLayerType),Se.instence.setPosition(s,s.m_iPositionType,s.m_ioffsetX,s.m_ioffsetY),this.addViewToModuleManger(s);else if(s instanceof Laya.Dialog){let u=s;u.m_iLayerType==Se.M_POP?(u.isModal=!0,u.isShowEffect=!0,this.open(u,!1,!0)):(u.isShowEffect=!1,this.open(u)),this.addViewToModuleManger(u)}s&&U.intance.event(L.EVENT_MODULE_ADDED,s),s.hideLoadingBySelf||Ke.instance.hideLoading()}).catch(c=>{console.error("onLoaded 加载失败",c)})}addViewToModuleManger(t){let i=t.m_strName;this.views.get(i)?this.views.get(i)instanceof Array?this.views.get(i).push(t):this.views.set(i,[this.views.get(i),t]):this.views.set(i,t),this.on(Laya.Event.CLOSE,this,this.removeViewFromModuleManger)}removeViewFromModuleManger(t){if(!t||!this.views)return;let i=t.m_strName;console.log("removeViewFromModuleManger viewName: "+i),t.off(Laya.Event.CLOSE,this,this.removeViewFromModuleManger);let n=this.views.get(i);if(n instanceof Array){let s=n.indexOf(t);s!=-1&&(n.splice(s,1),n.length==0&&this.views.remove(i))}else this.views.remove(i)}closeAll(){let t=[];for(let i of this.views.values)if(i instanceof Array)for(let n=0;n<i.length;n++){let s=i[n];s instanceof $a&&t.push(s)}else i instanceof $a&&t.push(i);for(let i=0;i<t.length;i++)t[i].dispose();t=[],super.closeAll()}doClose(t){super.doClose(t),this.event(Laya.Event.CLOSE,t)}};var Ka=class{constructor(){this.extra={}}};var Zf=class{constructor(){this.m_dicItemList=new Ie,this.m_dicTypeList=new Ie,this.m_dicSubTypeList=new Ie,this.m_dicBackList=new Ie}initData(e){this.m_dicItemList=new Ie,this.m_dicTypeList=new Ie,this.m_dicSubTypeList=new Ie,this.m_dicBackList=new Ie;let t;for(let n=0;n<e.length;n++){t=new Nr;var i=e[n];t.m_iId=i.id,i.pk&&(t.m_iPk=i.pk),t.m_iId=i.id,t.m_iNum=i.count,t.m_iNum>0&&this.pushItem(t)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}getCountById(e,t=!0){return xe.intance.m_dicItems.get(e)==null?0:this.getItemCountById(e,t)}pushItem(e){this.m_dicItemList.set(e.m_iId,e),this.m_dicTypeList.get(e.type)==null&&this.m_dicTypeList.set(e.type,new Ie),this.m_dicSubTypeList.get(e.subType)==null&&this.m_dicSubTypeList.set(e.subType,new Ie),this.m_dicBackList.get(e.backType)==null&&this.m_dicBackList.set(e.backType,new Ie),this.m_dicTypeList.get(e.type).set(e.m_iId,e),this.m_dicSubTypeList.get(e.subType).set(e.m_iId,e),this.m_dicBackList.get(e.backType).set(e.m_iId,e)}removeItem(e){this.m_dicItemList.remove(e.m_iId),this.m_dicTypeList.get(e.type).remove(e.m_iId),this.m_dicSubTypeList.get(e.subType).remove(e.m_iId),this.m_dicBackList.get(e.backType).remove(e.m_iId)}updateData(e,t=!1,i=!0){console.log("updateData: ",e,t,i);let n=[],s=!1,a;for(let c=0;c<e.length;c++){e[c]instanceof Array?(a=new Ka,a.id=e[c][0],a.count=e[c][1]):a=e[c];let u=this.m_dicItemList.get(a.id);u==null&&(u=new Nr(a.id),this.pushItem(u),u.m_bNew=!0),t?u.m_iNum=a.count:(u.newAddCnt=a.count,u.m_iNum=u.m_iNum+a.count),n.push(u.m_iId),u.m_iNum<=0&&this.removeItem(u),u.newAddCnt>0&&$t.instance.needPop&&i&&($t.instance.addItem(u),s=!0)}s&&$t.instance.needPop&&$t.instance.autoPop&&bi.instance.startShow(),n.length>0&&U.intance.event(L.PACKAGE_UPDATE_ITEM,[n])}getItemById(e){return this.m_dicItemList.get(e)}getItemsBySubType(e){let t=this.m_dicSubTypeList.get(e);return t==null&&(t=[]),t}getListByType(e){let t=[];return this.m_dicTypeList.get(e)&&(t=this.m_dicTypeList.get(e).values.slice()),t.sort(this.sortOnQa),t}getBackByType(e){let t=[];return this.m_dicBackList.get(e)&&(t=this.m_dicBackList.get(e).values.slice()),t.sort(this.sortOnQa),t}async getQuan(e){let t=[];var n=(await Ze.requestPost("wxgame/hero/loserTicketBagList",{type:e},!0,!0)).data;let s;for(let u=0;u<n.length;u++){s=new Nr;var a=n[u];s.m_iId=a.id,a.pk&&(s.m_iPk=a.pk),s.m_iId=a.id,s.m_iNum=a.count,a.extra&&a.extra.prize&&(s.prizeStatus=2),a.extra&&a.extra.expTime?s.expTime=parseFloat(a.extra.expTime):s.expTime=0;var c=G.instance.m_serverTime;c>s.expTime?e==3&&t.push(s):a.extra&&a.extra.onChain?(s.chainStatus=1,e==1&&t.push(s)):e==2&&t.push(s)}return t.sort(this.sortOnExpTime),t}getListBySubType(e){let t=[];return this.m_dicSubTypeList.get(e)&&(t=this.m_dicSubTypeList.get(e).values.slice()),t.sort(this.sortOnQa),t}sortOnQa(e,t){let i=e.itemItem.sort,n=t.itemItem.sort;return i<n?-1:i>n?1:0}sortOnExpTime(e,t){let i=e.expTime,n=t.expTime;return i<n?1:i>n?-1:0}getItemCountById(e,t=!0){let i=this.getItemById(e);return i?i.m_iNum:0}};var nt=class nt{constructor(){}};nt.DEFAULT_HERO_ID=11000010003,nt.DEFAULT_HERO_COLOR=1,nt.TYPE_Professional=1,nt.TYPE_Training=2,nt.ANI_beiji="beiji",nt.ANI_daiji="daiji",nt.ANI_gongji="gongji",nt.ANI_ti="ti",nt.ANI_hua="hua",nt.ANI_dang="gedang",nt.ANI_dazhao="z_dazhao",nt.ANI_ruchang="ruchang",nt.ANI_siwang="siwang",nt.ANI_xingzou="xingzou",nt.ANI_chongzhuang="z_chongzhuang",nt.ANI_chongzhuang2="z_chongzhuang2",nt.ANI_daodi="z_daodi",nt.ANI_shanbi="z_shanbi",nt.ANIS=[nt.ANI_daiji,nt.ANI_xingzou,nt.ANI_gongji,nt.ANI_ti,nt.ANI_hua,nt.ANI_dang,nt.ANI_beiji,nt.ANI_siwang],nt.TYPE_GONGJI=1,nt.TYPE_TI=2,nt.TYPE_HUA=3,nt.TYPE_DANG=4,nt.TYPE_FEI=5,nt.TYPE_DAZHAO=6,nt.TYPE_HUOJIANDAN=7,nt.SPEED_NORMAL=10,nt.SPEED_QUICK=20;var Jf=nt;var ed=class{constructor(){this.heroVoDic=new Ie}initData(e,t=!1){(!this.heroVoDic||t)&&(this.heroVoDic=new Ie);let i;for(let s=0;s<e.length;s++){i=new HeroVo;var n=e[s];HeroModel.instance.setHeroVoByHeroDto(i,n),this.pushItem(i)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}updateData(e){console.dir("更新英雄："+e),this.updataItemVoByArr(e)}herosDataRemoveHandler(e){console.dir("删除英雄："+e);for(let i=0;i<e.length;i++){var t=e[i];this.removeItemPk(t)}}pushItem(e){this.heroVoDic.set(e.pk,e)}removeItem(e){this.removeItemPk(e.pk)}removeItemPk(e){this.heroVoDic.remove(e+"")}updataItemVoByArr(e,t=!1){let i=[],n=!1,s;for(let a=0;a<e.length;a++){s=e[a];let c=this.heroVoDic.get(s.pk);c==null?(c=new HeroVo,HeroModel.instance.setHeroVoByHeroDto(c,s),c.m_bNew=!0,c.newAddCnt=1,c.newAddCnt>0&&this.pushItem(c)):c.newAddCnt=1,c.isLvUp=t,i.push(c.pk),c.m_iNum<=0&&this.removeItem(c),c.newAddCnt>0&&$t.instance.needPop&&($t.instance.addHeroItem(c),n=!0)}n&&$t.instance.needPop&&$t.instance.autoPop&&bi.instance.startShow(),i.length>0&&U.intance.event(L.PACKAGE_UPDATE_ITEM,[i])}getItemById(e){return this.heroVoDic.get(e)}getCount(){return this.heroVoDic.values.length}getCanTransferHero(e){let t=this.heroVoDic.get(e+"");return t&&t.state==0&&t.pk!=G.instance.playerDto.fightHeroPk?t:null}getListByType(e){let t=[],i=e==Jf.TYPE_Training?1:0;for(let n=0;n<this.heroVoDic.values.length;n++){let s=this.heroVoDic.values[n];s.newFightFlag==i&&t.push(s)}return t}};var td=class{constructor(){this.m_redData={system:!1,friend:!1,announce:!1};this.m_dicItemList=new Ie,this.m_dicTypeList=new Ie}initData(e){this.m_dicItemList=new Ie,this.m_dicTypeList=new Ie,this.m_redData={system:!1,friend:!1,announce:!1};let t;for(let i=0;i<e.length;i++)switch(t=e[i],this.pushItem(t),t.type){case 1:t.state==0&&(this.m_redData.system=!0);break;case 2:t.state==0&&(this.m_redData.friend=!0);break;case 3:t.state==0&&(this.m_redData.announce=!0);break}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}parseItem(e){if(e.mailId>0){var t=xe.intance.m_dicMail.get(e.mailId);e.title=H.instance.getLanguage(t.title),e.content=H.instance.getLanguageMulti(t.text,e.params)}}pushItem(e){this.parseItem(e),this.m_dicItemList.set(e.id,e),this.m_dicTypeList.get(e.type)==null&&this.m_dicTypeList.set(e.type,new Ie),this.m_dicTypeList.get(e.type).set(e.id,e)}removeItem(e){this.m_dicItemList.remove(e.id),this.m_dicTypeList.get(e.type).remove(e.id)}getItemById(e){return this.m_dicItemList.get(e)}getListByType(e){let t=[];return this.m_dicTypeList.get(e)&&(t=this.m_dicTypeList.get(e).values.slice()),t}getRedData(){return this.m_redData}};var G=class r{constructor(){this.timeZoneOff=0;this.hearIntervalSceond=10*60;this._timeStamp=0;this._m_strLanguage=1;this.isLanChanged=!1;this.pveOpen=2;this.lastTimestamp=0;this._m_serverTime=0;this.M_S_VersionServer="1.0.0";this.redDotData=[];this.friendNum=0;this.headId=10001;this.countryId=1010;this.colorId=1;this._guildIcon=2006;this.rechargeEnd=!1;this.isFirst=!0}async initData(){Ge.instance.sendCustumEvent(20),Ge.instance.sendCustumEvent(21)}get m_serverTime(){let e=Date.now();return this._m_serverTime+(e-this.lastTimestamp)}set m_serverTime(e){this._m_serverTime=e,this.lastTimestamp=Date.now()}get guildIcon(){return this._guildIcon}set guildIcon(e){this._guildIcon=e}get m_strLanguage(){return this._m_strLanguage}set m_strLanguage(e){this._m_strLanguage=e}static get instance(){return r._instance||(r._instance=new r),r._instance}init(){this.m_packageData=new Zf,this.m_mailData=new td,this.m_heroData=new ed,this.m_dicCustomerVo=new Ie,U.intance.on(L.ON_CONNECT_GAME_SERVER,this,this.onLogin),U.intance.on("msg_"+Y.snake.socket.MessageType.MSG_USER_LOGIN,this,this.onUserLogin),Mn.instance.register(Et,()=>new Et,5,200)}onLanChange(e){let t=parseInt(e[0]),i=parseInt(e[1]);switch(t){case 1:i==1&&Ge.instance.reload();break;case 2:break}}get timeStamp(){return this._timeStamp+(Laya.Browser.now()-this.recordStampTime)/1e3}set timeStamp(e){this.recordStampTime=Laya.Browser.now(),this._timeStamp=e}itemsDataUpdataHandler(e,t,i){this.m_packageData.updateData(e,t,i),U.intance.event(L.EVENT_ITEM_UPDATE)}herosDataUpdataHandler(e){this.m_heroData.updateData(e)}onLogin(){var e=Me.instance.walletAddress,t=Y.snake.socket.MessageType.MSG_USER_LOGIN;let i=Me.instance.getloginRequestInfo;var n=Y.snake.socket.CS_USER_LOGIN.fromObject(i);console.log("登录请求信息",n.loginToken),cr.send(t,n)}onUserLogin(e,t){if(t==Y.snake.socket.MessageCode.USER_NOT_EXIST)console.log("have no regist"),Ge.instance.sendCustumEvent(23),Oe.intance.openModule(S.CreateLoginView);else if(t==Y.snake.socket.MessageCode.SYS_NORMAL){console.log("have regist");var i=e.roleInfo,n=new ji;n.pid=i.roleId,n.name=i.userName,n.icon=i.icon,n.exp=i.score,n.code=i.code,n.country=i.country,n.invite=i.invite,n.invNum=i.invNum,n.lv=i.lv,r.instance.playerDto=n,this.isFirst&&(U.intance.event(L.EVENT_ENTER_MAIN),this.isFirst=!1)}}getConsumeValue(e){e=parseInt(e.toString());var t=this.playerDto.coins[e];return t>0?t:0}moneyInfoHander(e,t=!0,i=!0){let n=!1,s=!1,a=0;for(let c of e)s=!1,c[0]==ze.TYPE_EXP?(a=parseInt(c[1]+"")-this.playerDto.exp,this.playerDto.exp=parseInt(c[1]+""),s=a>0):(a=parseFloat(c[1]+"")-this.playerDto.coins[c[0]],this.playerDto.coins[c[0]]=parseFloat(c[1]+""),s=a>0),s&&$t.instance.needPop&&i&&(n=!0,$t.instance.addConsumeByServer([c[0],a]));t&&U.intance.event(L.ROLE_INFO_CHANGE),n&&$t.instance.autoPop&&bi.instance.startShow()}parseNumber(e){let t=[];for(let i=0;i<e.length;i++){let n=e[i];n=this.dividedNumber(n),t.push(n.toString())}return t}dividedNumber(e){return e/1e4}getRedDotById(e){return!!(this.redDotData&&this.redDotData.indexOf(e)>-1)}};var fs=class{constructor(){}};fs.Lan_en=1,fs.Lan_zh=6,fs.Lan_tr=7;var H=class r{constructor(){this._lanTypesById=new Ie,this._lanTypesByType=new Ie,this._configData=new Ie,this._configData1=new Ie}static get instance(){return r._instance||(r._instance=new r),r._instance}initLanTypes(e){this._lanTypesById=new Ie,this._lanTypesByType=new Ie;for(let t in e){let i=new vc;if(i.init(e[t]),parseInt(i.if_open)!=1)continue;let n=i.id,s=i.type;this._lanTypesById.set(n,i),s&&s!=""&&this._lanTypesByType.set(s,i)}}getLanTypes(){return this._lanTypesById}getLanIdByType(e){if(this._lanTypesByType){let t=this._lanTypesByType.get(e);if(t)return parseInt(t.id.toString())}return 1}getLanTypeById(e){if(this._lanTypesById){let t=this._lanTypesById.get(e);if(t)return t.type}return"en"}initConfigLan(e){this._configData=e}initConfigLan1(e){this._configData1=e}initUILan(e){Laya.Text.langPacks={};let t;for(t in e){let i=e[t].value;Laya.Text.langPacks[t]=i}}changeBrToN(e){let t=/<br>/g;for(;e.indexOf("<br>")!=-1;)e=e.replace(t,`
`);return e}replacePlaceholder(e,t){if(e=="")return"";let i=/{(\d+)}/g;return t.length>0&&(e=e.replace(i,function(){return t[arguments[1]]})),this.replaceLanByBR(e)}replaceLanByBR(e){return e+""}getEnglishLanguage(e,...t){return this.getEnglishLanguageReplace(e,t)}getEnglishLanguageReplace(e,t){if(this._configData1&&this._configData1[e]){let i=this._configData1[e].value;if(i&&i!="")return this.replacePlaceholder(i,t)}return this.replacePlaceholder(e+"",t)}getLanguage(e,...t){return this.getLanguageReplace(e,t)}getLanguageReplace(e,t){if(this._configData&&this._configData[e]){let i=this._configData[e].value;if(i&&i!="")return this.replacePlaceholder(i,t)}return this.replacePlaceholder(e+"",t)}getLanguageMulti(e,t){if(console.log("getLanguageMulti",t),this._configData&&this._configData[e]){let i=this._configData[e].value;if(i&&i!="")return this.replacePlaceholderMulti(i,t)}return this.replacePlaceholder(e+"",t)}replacePlaceholderMulti(e,t){if(e=="")return"";let i=/{(\d+)}/g;return t.length>0&&(e=e.replace(i,function(){var n=t[arguments[1]];if(typeof n=="object")n=JSON.parse(n),n=r.instance.parseObj(n);else if(typeof n=="string")try{n=JSON.parse(n),typeof n=="object"&&(n=r.instance.parseObj(n))}catch{}return n})),this.replaceLanByBR(e)}parseObj(e){if(e.hasOwnProperty("tableType")){if(e.tableType==1){var t=xe.intance.m_dicItems.get(e.id);t&&(e=r.instance.getLanguage(t.name))}else if(e.tableType==2){var i=xe.intance.m_dicArenaDic.get(e.id);i&&(e=r.instance.getLanguage(i.name))}}else e=r.instance.getMultiLan(e);return e}getUILang(e,t=null,i=null,n=null,s=null){if(e=Laya.Text.langPacks&&Laya.Text.langPacks[e]?Laya.Text.langPacks[e]:e,arguments.length>1)for(let a=0,c=arguments.length;a<c;a++)e=e.replace("{"+a+"}",arguments[a+1]);return e}getMultiLan(e){var t=parseInt(G.instance.m_strLanguage.toString()),i;return e&&(i=e[t],i||(i=e[fs.Lan_en])),i}FGM_GetLanguage(){let e=function(i){console.log("initGame->-----------------------------FGM_GetLanguage:=="+i),i&&(i=i.substring(0,2),ae.User_Lan=i)},t=Laya.LocalStorage.getItem(ae.COOKIE_CF_LAN);!t||t==""?e(this.language):e(t)}get language(){return"en"}FGM_SetLanguage(e){e&&e!=""&&Laya.LocalStorage.setItem(ae.COOKIE_CF_LAN,e)}dispose(){}};var rd=class r{constructor(){if(r._instance)throw new Error("LayerManager是单例,不可new.");r._instance=this}static get intance(){return r._instance||(r._instance=new r),r._instance}init(){for(let e in Y.snake.socket.MessageType)if(isNaN(Number(e))){let t=Y.snake.socket.MessageType[e],i=t===106?"CS_":t===110?"SS_":"SC_",n=e.substring(4),s=i+n,a=Y.snake.socket[s];a&&Laya.ClassUtils.regClass(t+"",a)}}};var id=class r{constructor(){this.m_sprMap=new Laya.Sprite;this.m_Image=new Laya.Image}static get instance(){return r._instance||(r._instance=new r),r._instance}init(){}showLoading(e=!1){if(this.loadingMc)this.m_sprMap.size(Laya.stage.width,Laya.stage.height),ae.m_bIsIphoneX&&(this.m_Image.scaleX=ae.IPHONEX_SCARE,this.m_Image.scaleY=ae.IPHONEX_SCARE),this.m_Image.x=(this.m_sprMap.width-this.m_Image.width*this.m_Image.scaleX)/2,this.m_Image.y=(this.m_sprMap.height-this.m_Image.height*this.m_Image.scaleY)/2,this.m_sprMap.x=(Se.instence.m_iStageWidth-this.m_sprMap.width*this.m_sprMap.scaleX)/2,this.m_sprMap.y=(Se.instence.m_iStageHeight-this.m_sprMap.height*this.m_sprMap.scaleY)/2,this.m_sprMap.visible=!0,Laya.timer.clear(this,this.showLazyBg),e?(this.m_Image.alpha=1,this.showLazyBg()):(this.m_Image.alpha=0,this.m_sprMap&&(this.m_sprMap.graphics.clear(),this.m_sprMap.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000")),Laya.timer.once(300,this,this.showLazyBg));else return}showLazyBg(){this.m_sprMap&&(this.m_sprMap.graphics.clear(),this.m_Image.alpha=1),this.loadingMc&&(this.loadingMc.x=Laya.stage.width/2,this.loadingMc.y=Laya.stage.height/2,this.loadingMc.play(),this.loadingMc.visible=!0)}hideLoading(){if(this.loadingMc)this.hideLoadingSHow();else return}hideLoadingSHow(){Laya.timer.clear(this,this.showLazyBg),this.loadingMc.stop(),this.loadingMc.visible=!1,this.m_sprMap.visible=!1}get isShow(){return this.loadingMc&&this.loadingMc.visible}dispose(){this.m_sprMap&&this.m_sprMap.graphics.clear(),Laya.timer.clear(this,this.showLazyBg),this.loadingMc&&(this.loadingMc.destroy(),this.loadingMc.removeSelf(),this.loadingMc=null)}};var So=class{static startCircleAnimation(e,t=Laya.stage.width/2,i=Laya.stage.height/2,n=200,s=5e3,a=!0,c=0,u){Laya.Tween.clearTween(e);let p=e.x,f=e.y,d=0,h=a?1:-1,b=0,w=.5,v=2e3,_=0,T=()=>{_+=16;let M=1+Math.sin(_*Math.PI*2/v)*w;d+=360/s*16*M*h;let D=d*Math.PI/180;e.x=t+Math.cos(D)*n,e.y=i+Math.sin(D)*n,Math.abs(d)>=360&&(d=d%360,b++,c>0&&b>=c&&(Laya.timer.clear(e,T),e.x=p,e.y=f,u&&u.run()))};Laya.timer.frameLoop(1,e,T)}static stopCircleAnimation(e){Laya.timer.clearAll(e),Laya.Tween.clearTween(e)}static startCircleAnimationWithSpeedControl(e,t=Laya.stage.width/2,i=Laya.stage.height/2,n=200,s=5e3,a=!0,c=0,u=.5,p=2e3,f){Laya.Tween.clearTween(e);let d=e.x,h=e.y,b=0,w=a?1:-1,v=0,_=0,T=()=>{_+=16;let M=1+Math.sin(_*Math.PI*2/p)*u;b+=360/s*16*M*w;let D=b*Math.PI/180;e.x=t+Math.cos(D)*n,e.y=i+Math.sin(D)*n,Math.abs(b)>=360&&(b=b%360,v++,c>0&&v>=c&&(Laya.timer.clear(e,T),e.x=d,e.y=h,f&&f.run()))};Laya.timer.frameLoop(1,e,T)}static startRotationAnimation(e,t=2e3,i=!0){this.stopRotationAnimation(e);let n="rotation_"+Date.now().toString(),s=i?1:-1,a=360/t*16*s,c=()=>{e.rotation=(e.rotation+a)%360},u="updateRotation_"+n;return e[u]=c,e.rotationAnimationId=n,Laya.timer.frameLoop(1,e,c),n}static stopRotationAnimation(e){if(e.rotationAnimationId){let t="updateRotation_"+e.rotationAnimationId,i=e[t];i?Laya.timer.clear(e,i):Laya.timer.clearAll(e),delete e.rotationAnimationId,i&&delete e[t]}}};var{regClass:JI}=Laya,qa=class extends tu{constructor(){super(...arguments);this.isLogout=!1;this.dotNum=0;this.m_nProgress=0}onAwake(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),Laya.loader.load(["res/loading/progress_load1.png","res/loading/progress_load1$bar.png"]).then(()=>{this.createUI(),this.initBasic()})}onError(t){console.log("加载失败: "+t)}createUI(){this.m_nSendTime=Laya.timer.currTimer,Qe.instance.init(),Qe.instance.playMusicByName(Qe.soundName_bg,".mp3"),U.intance.on(L.EVENT_BACK_TO_LOGIN,this,this.backToLogin),U.intance.on(L.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),U.intance.on(L.EVENT_ENTER_MAIN,this,this.loginCallBack),H.instance.FGM_GetLanguage();let t=ae.User_Lan;var i=getGameVersion();this.txtLoad.text=i,console.log("VERSION: "+i);let n=new gn;n.ID=1,n.Event="加载版本信息 "+i,Ge.instance.sendCustumEvent(1,null,n)}initBasic(){rd.intance.init(),Se.instence.init(),this.initLoad()}initLoad(){this.onAssetLoaded()}onAssetLoaded(){this.loadingProcess=.05,this.m_nProgress=.05,So.startRotationAnimation(this.img_circle,2e3,!0),Laya.timer.once(500,this,()=>{this.loadFirstBatch()});let t=Laya.timer.loop(1e3,this,this.onLoading,[this.m_nProgress])}loadFirstBatch(){lt.intance.init(),this.m_nProgress=.15,this.loadingProcess=.15,Laya.timer.once(800,this,()=>{this.loadSecondBatch()})}loadSecondBatch(){id.instance.init(),Oe.intance.init(),this.m_nProgress=.3,this.loadingProcess=.3,Laya.timer.once(1e3,this,()=>{this.loadThirdBatch()})}loadThirdBatch(){G.instance.init(),_e.instance.init(),this.m_nProgress=.5,this.loadingProcess=.5,Laya.timer.once(1e3,this,()=>{this.loadFinalBatch()})}loadFinalBatch(){wo.initParms();let t=new gn;t.ID=3,t.Event="加载资源信息",Ge.instance.sendCustumEvent(3,null,t),this.m_nProgress=.8,this.loadingProcess=.8}set loadingProcess(t){if(!(this.mcProcess&&t<this.mcProcess.value)){t>1&&(t=1),t<.05&&(t=.05),this.mcProcess.value=t,this.txtProcess.text=Math.floor(t*100)+"%";var i=t*this.mcProcess.width-70;i<0&&(i=0)}}backToLogin(){Laya.timer.clear(this,this.onLoading),this.m_nProgress=0,Laya.loader.load(_e.instance.m_arrInitResource,Laya.Handler.create(this,this.getLoginData),Laya.Handler.create(this,this.onLoading2,null,!1))}getLoginData(){Ge.instance.sendCustumEvent(7),this.readyInitGame()}readyInitGame(){if(this.isLogout){U.intance.event(L.EVENT_LOADING_SUC);return}this.mcProcess&&(this.loadingProcess=.9,Laya.timer.once(500,this,()=>{this.loadingProcess=1,Laya.timer.once(300,this,()=>{xe.intance.init(),ae.isWhite?this.loginGame():this.onGetNotice()})}))}async onGetNotice(){Laya.loader.maxLoader=50;var t=!1;t?Ze.requestPost("wxgame/sys/notice",{type:1},!1,!1).then(i=>{var n=i;if(n.list&&n.list.length>0){Oe.intance.openModule(S.NoticeDialog,[1,n]);return}this.loginGame()}).catch(i=>{Oe.intance.openModule(S.NoServerView)}):this.loginGame()}async loginGame(){U.intance.event(L.EVENT_LOADED_COMPLETE),await Me.instance.init(),await Me.instance.dappLogin()}async loginGameEnd(t){if(Ke.instance.showLoading(!0),Ge.instance.sendCustumEvent(8),Ge.instance.sendCustumEvent(22),!t){Oe.intance.openModule(S.NoServerView);return}t.loginState==1?(console.log("have no regist"),Ge.instance.sendCustumEvent(23),Oe.intance.openModule(S.CreateLoginView)):(Ge.instance.sendCustumEvent(30),t.playerDto?(Ge.instance.sendCustumEvent(31),console.log("registed "+t.playerDto.name),G.instance.playerDto=t.playerDto,this.loginCallBack()):(Ge.instance.sendCustumEvent(32),console.log("getRegisted error"),De.instance.notice(H.instance.getLanguage(135))))}async loginCallBack(){console.log("loginCallBack++++++++++++++++++++++++++++++++"),ae.vType==2&&ae.Debug==0&&(Laya.Browser.window.console.log=function(){}),G.instance.initData(),Ke.instance.hideLoading();var t=G.instance.playerDto;if(t.roomId>0){let i=await Ze.requestPost("wxgame/room/info",{roomId:t.roomId});Le.instance.roomDto=i.roomDto,i.roomDto?t.roomState==10?Ct.instance.initSocket():Oe.intance.openModule(S.EnterRoomView):De.instance.notice(H.instance.getLanguage(135))}else ue.logs("进入主界面",5),Ge.instance.sendCustumEvent(33),So.stopCircleAnimation(this.img_circle),lt.intance.setCurrentScene(le.M_SCENE_MAIN)}onLoading(t){let i=this.mcProcess?this.mcProcess.value:0,n=.01;this.m_nProgress<.15?n=.02:this.m_nProgress<.3?n=.015:this.m_nProgress<.5?n=.01:this.m_nProgress<.8?n=.005:n=.001,this.m_nProgress+=n,this.m_nProgress<i&&(this.m_nProgress=i),this.m_nProgress>.8&&(this.m_nProgress=.8),this.mcProcess&&t>this.mcProcess.value&&(this.loadingProcess=this.m_nProgress)}onLoading2(t){this.mcProcess&&(this.loadingProcess=0+t*1.1)}removeEvent(){U.intance.off(L.EVENT_BACK_TO_LOGIN,this,this.backToLogin),U.intance.off(L.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),U.intance.off(L.EVENT_ENTER_MAIN,this,this.loginCallBack)}};qa.m_iState=1,qa=q([JI("xmaaYG8AQ1yC07pr_JvyPA")],qa);var Ya=class Ya extends Laya.ColorFilter{constructor(e=null){super(e)}static addClickFilter(e){let t=e.filters||[];t.push(Ya.clickFilter),e.filters=t}static clearClickFilter(e){let t=e.filters;if(t!=null&&t.length>0){for(let i=t.length-1;i>-1;i--)t[i]instanceof Ya&&t.splice(i,1);e.filters=t}}};Ya.clickFilter=new Ya([1,0,0,0,-34,0,1,0,0,-34,0,0,1,0,-34,0,0,0,1,0]);var _i=Ya;var{regClass:eS,property:tS}=Laya,Xa=class extends Laya.Script{constructor(){super();this.noSound=!1}onEnable(){let t=this.owner.scaleX;this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onUp)}onDown(){this.noSound||Qe.instance.playSoundByName(Qe.soundName_hit),_i.addClickFilter(this.owner)}onUp(){_i.clearClickFilter(this.owner)}onDisable(){_i.clearClickFilter(this.owner),this.owner.off(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onUp)}};q([tS({type:"boolean"})],Xa.prototype,"noSound",2),Xa=q([eS("cL1AmqOiTHmtQWKayPNcTA")],Xa);var nd=class extends Laya.Box{};var{regClass:rS}=Laya,od=class extends nd{constructor(){super()}set dataSource(t){super.dataSource=t,this.setData(t),this.addEvent()}addEvent(){this.btn_deposit.on(Laya.Event.CLICK,this,this.onDeposit),this.btn_withdraw.on(Laya.Event.CLICK,this,this.onWithdraw)}setData(t){t?(this.data=t,this.tf_coinNum.text=`${t.balance}`,this.tf_freeze.text=`${t.frozen}`,this.tf_prize.text=`${t.price}`,this.tf_valu.text=`${t.valuation}`,this.tf_coin.text=t.symbol):this.visible=!1}onDeposit(){Oe.intance.openModule(S.DepositDialog,this.data)}onWithdraw(){Oe.intance.openModule(S.WithdrawDialog,this.data)}};od=q([rS("oDHEPtPLT9SboHGJIeNVbA")],od);var sd=class extends Laya.Scene{};var{regClass:iS}=Laya,ad=class extends sd{onAwake(){this.m_iLayerType=Se.M_POP,this.m_iPositionType=Se.UP}onEnable(){this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_back_Record.on(Laya.Event.CLICK,this,this.openRecord,[!1]),this.btn_detail.on(Laya.Event.CLICK,this,this.openRecord,[!0]),U.intance.on("msg_"+Y.snake.socket.MessageType.MSG_QUERY_TOKEN,this,this.onRequestInfo),this.list_asset.visible=!1,this.requestCoinInfo()}requestCoinInfo(t=1){let i=Y.snake.socket.MessageType.MSG_QUERY_TOKEN;cr.send(i)}onRequestInfo(t,i){if(i==Y.snake.socket.MessageCode.SYS_NORMAL){let n=wo.parseTokenData(t.token);this.showAssetData(n)}}showAssetData(t){this.list_asset.array=t,this.list_asset.visible=!0;let i=this.calculateTotalValue(t);this.tf_total.text=`${i} USDT`}calculateTotalValue(t){try{return t.reduce((i,n)=>{let s=n.balance,a=n.price;return isNaN(s)||isNaN(a)?i:i+s*a},0)}catch(i){return console.error("计算资产总额时发生错误:",i),0}}setToMainScene(){lt.intance.setCurrentScene(le.M_SCENE_MAIN)}openRecord(t){this.box_record.visible=t,this.box_all.visible=!t;let i=[{time:174402326e4,operation:1,token:3006,amount:200}];this.list_Record.array=i}};ad=q([iS("vDn8r-QeS5KzEmJcMsoY8w")],ad);var cd=class r{constructor(){this.assets_contract=null;this.startRecharge=!1}static get instance(){return r._instance||(r._instance=new r),r._instance}async init(){typeof window.ethereum>"u"||(U.intance.on(L.EVENT_RECHARGE_GET,this,this.rechargeEnd),this.assets_contract=new window.web3.eth.Contract(Dt.WITHDRAW_AND_RECHARGE_ABI,Dt.WITHDRAW_AND_RECHARGE_ADDRESS))}async depositWallet(e,t){if(Ke.instance.showLoading(!0),!await Me.instance.allowanceAddressByTokenAddress(Dt.WITHDRAW_AND_RECHARGE_ADDRESS,e)){Ke.instance.hideLoading(),De.instance.notice(H.instance.getLanguage(15));return}return t=window.web3.utils.toWei(t+""),await this.assets_contract.methods.recharge(e.toLowerCase(),t).send({from:Me.instance.walletAddress},(n,s)=>{if(n)return Ke.instance.hideLoading(),!1}),!0}async rechargeToken(e,t=null,i){try{if(t.token&&t.token!==Dt.ADDRESS0&&!await Me.instance.newAllowanceAddress(i,t.token))return Ke.instance.hideLoading(),De.instance.notice(H.instance.getLanguage(15)),!1;let n=pb(e+"",t.tokenDecimals),s=Dt.RECHANGE_ABI_NEW,a="depositToken",c;!t.token||t.token==Dt.ADDRESS0?c=await Me.instance.walletClient.writeContract({account:Me.instance.walletAddress,address:i,abi:s,functionName:"depositETH",value:n,args:[]}):c=await Me.instance.walletClient.writeContract({account:Me.instance.walletAddress,address:i,abi:s,functionName:a,args:[t.token,n]}),this.startRecharge=!0,Laya.timer.once(6e4,this,this.clearRecharge);let u,p=!1;if(u=await Me.instance.publicClient.waitForTransactionReceipt({hash:c,pollingInterval:1e3}),u&&u.status=="success"||p){if(!this.startRecharge)return;Laya.timer.clear(this,this.clearRecharge),console.log(`Tx successful with hash: ${c}`);let f=await Me.instance.walletClient.getChainId(),d=[f,c];return this.getReward(f,c),Laya.timer.loop(2e3,this,this.getReward,d),Laya.timer.once(6e4,this,this.clearRecharge),c}else{Ke.instance.hideLoading(),ue.TransactionErrorTip();return}}catch(n){Ke.instance.hideLoading(),console.log(n),n instanceof Error?n.message.includes("does not match the target chain for the transaction")?U.intance.event(L.CHANGE_ASSET_CHAIN):console.log("Error message does not contain the specified character."):console.log("An error occurred, but it is not an instance of Error.")}}async getReward(e,t){let i=await Ze.requestPost("wxgame/sys/payCallPack",{chainId:e,hashId:t});if(i&&i.coin){Laya.timer.clear(this,this.clearRecharge);let s=i.coin[0];if(!s)return;U.intance.event(L.UPDATE_LOCAL_WALLET_LIST_EVENT);var n=new Ka;n.id=s[0],n.count=s[1],Ke.instance.hideLoading(),Oe.intance.openModule(S.RewardGetDialog,[n]),this.rechargeEnd()}}rechargeEnd(){G.instance.rechargeEnd=!1,Laya.timer.clear(this,this.getReward)}clearRecharge(){this.startRecharge=!1,Ke.instance.hideLoading(),De.instance.notice(H.instance.getLanguage(1350)),this.rechargeEnd()}};var ld=class extends Laya.Dialog{};var{regClass:nS}=Laya,ud=class extends ld{constructor(){super();this.btnLock=!1}onEnable(){U.intance.on("msg_"+Y.snake.socket.MessageType.MSG_CHARGE,this,this.onRequestChargeInfo)}setOpenData(t){this.tf_adress.text=Me.instance.walletAddress,this.data=t,this.tf_web.text=t.chainName,this.tf_token.text=t.symbol,this.tf_rest.text=t.balance,console.log("data",t),this.requestChargeInfo()}requestChargeInfo(){let t=Y.snake.socket.MessageType.MSG_CHARGE,i=this.data.symbolId,n=Y.snake.socket.CS_CHARGE.fromObject({symbolId:i});cr.send(t,n)}onRequestChargeInfo(t,i){i==Y.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CHARGE",t),this.rechargeData=t,this.setDepositData(t))}async setDepositData(t){let i=JSON.parse(this.rechargeData.abi);console.log(i);let n=await Me.instance.walletClient.getChainId(),s=Number(t.chainId);try{if(n!==s&&!await Me.instance.switchChain(s)){await Me.instance.addChain(s);return}let a=await Me.instance.getBalance2(Dt.ADDRESS0);console.log("tokenBalance",a)}catch(a){console.log("切换失败，请手动切换",a)}}async onbtnConfirm(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1}),this.testRechargeCodeInput();let t=Number(this.tf_rest.text),i=Number(this.rechargeCode.text),n=await Me.instance.walletClient.getChainId();if(!i){Lt.instance().AlertByType(ge.BASEALERTVIEW,st.instance.get(33),ge.YES);return}if(t<i){Lt.instance().AlertByType(ge.BASEALERTVIEW,st.instance.get(34),ge.YES);return}var s=this.list_token.selectedItem;if(!s){De.instance.notice(H.instance.getLanguage(1801));return}Ke.instance.showLoadingByInfo();let a=s.tokenAddress;await cd.instance.rechargeToken(i,s,a)&&(this.getRestCoin(s),G.instance.rechargeEnd=!0)}testRechargeCodeInput(){let t=this.rechargeCode.text;if(t&&!/^[0-9]+\.?[0-9]*$/.test(t)){this.rechargeCode.text="",De.instance.notice(H.instance.getLanguage(1802));return}}async getRestCoin(t){try{let i=await Me.instance.getBalance2(t.token);i&&(this.tf_rest.text=i.toString()),Ke.instance.hideLoading()}catch(i){console.error("获取余额失败",i),Ke.instance.hideLoading()}}onDisable(){}};ud=q([nS("O0v8EHpMT0-wWgB8t3D14A")],ud);var pd=class extends Laya.Dialog{};var{regClass:oS}=Laya,md=class extends pd{constructor(){super()}onEnable(){this.list_champ.visible=!1}onDisable(){}};md=q([oS("y0xiZs-qSDWRAXN_oE10yg")],md);var fd=class extends Laya.Box{};var{regClass:sS}=Laya,dd=class extends fd{constructor(){super()}addEvent(){}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.setData(e),this.addEvent()}setData(e){if(e){let t=gi.formatDayAndTime(e.time);this.tf_day.text=t.date,this.tf_minute.text=t.time,this.img_coinType.skin=_e.instance.getMoneyIcon(e.coinType),this.tf_amounte.text=`${e.amount}`}else this.visible=!1}};dd=q([sS("tbS8gPlOTWuMdXb9g8wZAg")],dd);var hd=class extends Laya.Box{};function gd(r,e){var t;e===void 0&&(e="0");var i=0,n=-1;r[0]=="-"&&(r=r.substring(1),jb(r)||(i++,n=1,r.length)),e[0]=="-"&&(e=e.substring(1),jb(e)||(i++,n=2,e.length)),r=Cr(r),e=Cr(e),t=Kb(Cr(r),Cr(e)),r=t[0],e=t[1],i==1&&(n===1?r=Hb(r):n===2&&(e=Hb(e)));var s=bv(r,e);return i?i==2?"-"+Cr(s):r.length<s.length?Cr(s.substring(1)):"-"+Cr(Hb(s)):Cr(s)}function Hb(r){if(jb(r))return r;for(var e="",t=r.length,i=r.split(".")[1],n=i?i.length:0,s=0;s<t;s++)r[s]>="0"&&r[s]<="9"?e+=9-parseInt(r[s]):e+=r[s];var a=n>0?"0."+new Array(n).join("0")+"1":"1";return bv(e,a)}function Cr(r){var e=r.split(".");for(e[0]||(e[0]="0");e[0][0]=="0"&&e[0].length>1;)e[0]=e[0].substring(1);return e[0]+(e[1]?"."+e[1]:"")}function Kb(r,e){var t=r.split("."),i=e.split("."),n=t[0].length,s=i[0].length;return n>s?i[0]=new Array(Math.abs(n-s)+1).join("0")+(i[0]?i[0]:""):t[0]=new Array(Math.abs(n-s)+1).join("0")+(t[0]?t[0]:""),n=t[1]?t[1].length:0,s=i[1]?i[1].length:0,(n||s)&&(n>s?i[1]=(i[1]?i[1]:"")+new Array(Math.abs(n-s)+1).join("0"):t[1]=(t[1]?t[1]:"")+new Array(Math.abs(n-s)+1).join("0")),r=t[0]+(t[1]?"."+t[1]:""),e=i[0]+(i[1]?"."+i[1]:""),[r,e]}function bv(r,e){var t;t=Kb(r,e),r=t[0],e=t[1];for(var i="",n=0,s=r.length-1;s>=0;s--){if(r[s]==="."){i="."+i;continue}var a=parseInt(r[s])+parseInt(e[s])+n;i=a%10+i,n=Math.floor(a/10)}return n?n.toString()+i:i}function jb(r){return/^0[0]*[.]{0,1}[0]*$/.test(r)}function mv(r){return(typeof r=="number"||typeof r=="bigint")&&(r=r.toString()),r[0]=="-"?r.substring(1):r}var Kt;(function(r){r[r.CEILING=0]="CEILING",r[r.DOWN=1]="DOWN",r[r.FLOOR=2]="FLOOR",r[r.HALF_DOWN=3]="HALF_DOWN",r[r.HALF_EVEN=4]="HALF_EVEN",r[r.HALF_UP=5]="HALF_UP",r[r.UNNECESSARY=6]="UNNECESSARY",r[r.UP=7]="UP"})(Kt||(Kt={}));function Cl(r,e,t){if(e===void 0&&(e=0),t===void 0&&(t=Kt.HALF_EVEN),t===Kt.UNNECESSARY)throw new Error("UNNECESSARY Rounding Mode has not yet been implemented");(typeof r=="number"||typeof r=="bigint")&&(r=r.toString());var i=!1;r[0]==="-"&&(i=!0,r=r.substring(1));var n=r.split("."),s=n[0],a=n[1];if(e<0){if(e=-e,s.length<=e)return"0";var c=s.substr(0,s.length-e);return r=c+"."+s.substr(s.length-e)+a,c=Cl(r,0,t),(i?"-":"")+c+new Array(e+1).join("0")}if(e==0)return s.length,fv(n[1],s,i,t)&&(s=zb(s)),(i&&parseInt(s)?"-":"")+s;if(n[1]){if(n[1].length<e)return(i?"-":"")+s+"."+n[1]+new Array(e-n[1].length+1).join("0")}else return(i?"-":"")+s+"."+new Array(e+1).join("0");a=n[1].substring(0,e);var u=n[1].substring(e);return u&&fv(u,a,i,t)&&(a=zb(a),a.length>e)?(i?"-":"")+zb(s,parseInt(a[0]))+"."+a.substring(1):(i&&(parseInt(s)||parseInt(a))?"-":"")+s+"."+a}function fv(r,e,t,i){if(!r||r===new Array(r.length+1).join("0")||i===Kt.DOWN||!t&&i===Kt.FLOOR||t&&i===Kt.CEILING)return!1;if(i===Kt.UP||t&&i===Kt.FLOOR||!t&&i===Kt.CEILING)return!0;var n="5"+new Array(r.length).join("0");if(r>n)return!0;if(r<n)return!1;switch(i){case Kt.HALF_DOWN:return!1;case Kt.HALF_UP:return!0;case Kt.HALF_EVEN:default:return parseInt(e[e.length-1])%2==1}}function zb(r,e){e===void 0&&(e=0),e||(e=1),typeof r=="number"&&r.toString();for(var t=r.length-1,i="",n=t;n>=0;n--){var s=parseInt(r[n])+e;s==10?(e=1,s=0):e=0,i+=s}return e&&(i+=e),i.split("").reverse().join("")}function Lo(r){var e=r[0]==="-";for(e&&(r=r.substr(1));r[0]=="0";)r=r.substr(1);if(r.indexOf(".")!=-1)for(;r[r.length-1]=="0";)r=r.substr(0,r.length-1);return r==""||r=="."?r="0":r[r.length-1]=="."&&(r=r.substr(0,r.length-1)),r[0]=="."&&(r="0"+r),e&&r!="0"&&(r="-"+r),r}function Vb(r,e){r=r.toString(),e=e.toString();var t=0;r[0]=="-"&&(t++,r=r.substr(1)),e[0]=="-"&&(t++,e=e.substr(1)),r=Lo(r),e=Lo(e);var i=0,n=0;r.indexOf(".")!=-1&&(i=r.length-r.indexOf(".")-1),e.indexOf(".")!=-1&&(n=e.length-e.indexOf(".")-1);var s=i+n;if(r=Lo(r.replace(".","")),e=Lo(e.replace(".","")),r.length<e.length){var a=r;r=e,e=a}if(e=="0")return"0";for(var c=e.length,u=0,p=[],f=c-1,d="",h=0;h<c;h++)p[h]=r.length-1;for(var h=0;h<2*r.length;h++){for(var b=0,w=e.length-1;w>=f&&w>=0;w--)p[w]>-1&&p[w]<r.length&&(b+=parseInt(r[p[w]--])*parseInt(e[w]));b+=u,u=Math.floor(b/10),d=b%10+d,f--}return d=Lo(aS(d,s)),t==1&&(d="-"+d),d}function aS(r,e){return e==0?r:(r=e>=r.length?new Array(e-r.length+1).join("0")+r:r,r.substr(0,r.length-e)+"."+r.substr(r.length-e,e))}function Gb(r,e,t,i){if(t===void 0&&(t=8),i===void 0&&(i=Kt.HALF_EVEN),e==0)throw new Error("Cannot divide by 0");if(r=r.toString(),e=e.toString(),r=r.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),e=e.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),r==0)return"0";var n=0;e[0]=="-"&&(e=e.substring(1),n++),r[0]=="-"&&(r=r.substring(1),n++);var s=e.indexOf(".")>0?e.length-e.indexOf(".")-1:-1;if(e=Cr(e.replace(".","")),s>=0){var a=r.indexOf(".")>0?r.length-r.indexOf(".")-1:-1;if(a==-1)r=Cr(r+new Array(s+1).join("0"));else if(s>a)r=r.replace(".",""),r=Cr(r+new Array(s-a+1).join("0"));else if(s<a){r=r.replace(".","");var c=r.length-a+s;r=Cr(r.substring(0,c)+"."+r.substring(c))}else s==a&&(r=Cr(r.replace(".","")))}var u=0,p=e.length,f="",d=r.indexOf(".")>-1&&r.indexOf(".")<p?r.substring(0,p+1):r.substring(0,p);if(r=r.indexOf(".")>-1&&r.indexOf(".")<p?r.substring(p+1):r.substring(p),d.indexOf(".")>-1){var h=d.length-d.indexOf(".")-1;d=d.replace(".",""),p>d.length&&(h+=p-d.length,d=d+new Array(p-d.length+1).join("0")),u=h,f="0."+new Array(h).join("0")}for(t=t+2;u<=t;){for(var b=0;parseInt(d)>=parseInt(e);)d=gd(d,"-"+e),b++;f+=b,r?(r[0]=="."&&(f+=".",u++,r=r.substring(1)),d=d+r.substring(0,1),r=r.substring(1)):(u||(f+="."),u++,d=d+"0")}return(n==1?"-":"")+Cr(Cl(f,t-2,i))}function Wb(r,e){return r=r.toString(),e=e.toString(),e=$b(e),gd(r,e)}function $b(r){return r[0]=="-"?r=r.substr(1):r="-"+r,r}function dv(r,e){if(e==0)throw new Error("Cannot divide by 0");r=r.toString(),e=e.toString(),hv(r),hv(e);var t="";r[0]=="-"&&(t="-",r=r.substr(1)),e[0]=="-"&&(e=e.substr(1));var i=Wb(r,Vb(e,Cl(Gb(r,e),0,Kt.FLOOR)));return t+i}function hv(r){if(r.indexOf(".")!=-1)throw new Error("Modulus of non-integers not supported")}function gv(r,e){var t,i,n=!1;if(t=[r,e].map(function(a){return Lo(a)}),r=t[0],e=t[1],r[0]=="-"&&e[0]!="-")return-1;if(r[0]!="-"&&e[0]=="-")return 1;if(r[0]=="-"&&e[0]=="-"&&(r=r.substr(1),e=e.substr(1),n=!0),i=Kb(r,e),r=i[0],e=i[1],r.localeCompare(e)==0)return 0;for(var s=0;s<r.length;s++)if(r[s]!=e[s])return r[s]>e[s]?n?-1:1:n?1:-1;return 0}var ds=function(){function r(e){e===void 0&&(e="0"),this.value=r.validate(e)}return r.validate=function(e){if(e){if(e=e.toString(),isNaN(e))throw Error("Parameter is not a number: "+e);e[0]=="+"&&(e=e.substring(1))}else e="0";if(e.startsWith(".")?e="0"+e:e.startsWith("-.")&&(e="-0"+e.substr(1)),/e/i.test(e)){var t=e.split(/[eE]/),i=t[0],n=t[1];i=Cr(i);var s="";i[0]=="-"&&(s="-",i=i.substring(1)),i.indexOf(".")>=0?(n=parseInt(n)+i.indexOf("."),i=i.replace(".","")):n=parseInt(n)+i.length,i.length<n?e=s+i+new Array(n-i.length+1).join("0"):i.length>=n&&n>0?e=s+Cr(i.substring(0,n))+(i.length>n?"."+i.substring(n):""):e=s+"0."+new Array(-n+1).join("0")+i}return e},r.prototype.getValue=function(){return this.value},r.prototype.setValue=function(e){this.value=r.validate(e)},r.getPrettyValue=function(e,t,i){t===void 0&&(t=3),i===void 0&&(i=","),e=r.validate(e);var n=e.charAt(0)=="-";n&&(e=e.substring(1));var s=e.indexOf(".");s=s>0?s:e.length;for(var a="",c=s;c>0;)c<t?(t=c,c=0):c-=t,a=e.substring(c,c+t)+(c<s-t&&c>=0?i:"")+a;return(n?"-":"")+a+e.substring(s)},r.prototype.getPrettyValue=function(e,t){return e===void 0&&(e=3),t===void 0&&(t=","),r.getPrettyValue(this.value,e,t)},r.round=function(e,t,i){if(t===void 0&&(t=0),i===void 0&&(i=Kt.HALF_EVEN),e=r.validate(e),isNaN(t))throw Error("Precision is not a number: "+t);return Cl(e,t,i)},r.prototype.round=function(e,t){if(e===void 0&&(e=0),t===void 0&&(t=Kt.HALF_EVEN),isNaN(e))throw Error("Precision is not a number: "+e);return new r(Cl(this.value,e,t))},r.abs=function(e){return e=r.validate(e),mv(e)},r.prototype.abs=function(){return new r(mv(this.value))},r.floor=function(e){return e=r.validate(e),e.indexOf(".")===-1?e:r.round(e,0,Kt.FLOOR)},r.prototype.floor=function(){return this.value.indexOf(".")===-1?new r(this.value):new r(this.value).round(0,Kt.FLOOR)},r.ceil=function(e){return e=r.validate(e),e.indexOf(".")===-1?e:r.round(e,0,Kt.CEILING)},r.prototype.ceil=function(){return this.value.indexOf(".")===-1?new r(this.value):new r(this.value).round(0,Kt.CEILING)},r.add=function(e,t){return e=r.validate(e),t=r.validate(t),gd(e,t)},r.prototype.add=function(e){return new r(gd(this.value,e.getValue()))},r.subtract=function(e,t){return e=r.validate(e),t=r.validate(t),Wb(e,t)},r.prototype.subtract=function(e){return new r(Wb(this.value,e.getValue()))},r.multiply=function(e,t){return e=r.validate(e),t=r.validate(t),Vb(e,t)},r.prototype.multiply=function(e){return new r(Vb(this.value,e.getValue()))},r.divide=function(e,t,i,n){return e=r.validate(e),t=r.validate(t),Gb(e,t,i,n)},r.prototype.divide=function(e,t,i){return new r(Gb(this.value,e.getValue(),t,i))},r.modulus=function(e,t){return e=r.validate(e),t=r.validate(t),dv(e,t)},r.prototype.modulus=function(e){return new r(dv(this.value,e.getValue()))},r.compareTo=function(e,t){return e=r.validate(e),t=r.validate(t),gv(e,t)},r.prototype.compareTo=function(e){return gv(this.value,e.getValue())},r.negate=function(e){return e=r.validate(e),$b(e)},r.prototype.negate=function(){return new r($b(this.value))},r.stripTrailingZero=function(e){return e=r.validate(e),Lo(e)},r.prototype.stripTrailingZero=function(){return new r(Lo(this.value))},r.RoundingModes=Kt,r}();var cS=(j=>(j[j.MAINNET=1]="MAINNET",j[j.TESTNET_RINKEBY=4]="TESTNET_RINKEBY",j[j.ARBITRUM=42161]="ARBITRUM",j[j.ARBITRUM_TESTNET=421611]="ARBITRUM_TESTNET",j[j.AVALANCHE=43114]="AVALANCHE",j[j.AVALANCHE_TESTNET=43113]="AVALANCHE_TESTNET",j[j.POLYGON=137]="POLYGON",j[j.POLYGON_TESTNET=80001]="POLYGON_TESTNET",j[j.FANTOM=250]="FANTOM",j[j.FANTOM_TESTNET=4002]="FANTOM_TESTNET",j[j.OPTIMISM=10]="OPTIMISM",j[j.OPTIMISM_TESTNET=69]="OPTIMISM_TESTNET",j[j.BOBA=288]="BOBA",j[j.BOBA_TESTNET=28]="BOBA_TESTNET",j[j.ESC=20]="ESC",j[j.HECO=128]="HECO",j[j.BSC=56]="BSC",j[j.BSC_TESTNET=97]="BSC_TESTNET",j[j.MATCH=1139]="MATCH",j[j.MATCH_TESTNET=9e3]="MATCH_TESTNET",j[j.CC=1331]="CC",j[j.SEPOLIA=11155111]="SEPOLIA",j[j.Klaytn=8217]="Klaytn",j[j.Lightlink=1890]="Lightlink",j[j.OpBNB=Fa.id]="OpBNB",j[j.opBNBTestnet=5611]="opBNBTestnet",j[j.Mantle=Pa.id]="Mantle",j[j.MantleSepoliaTestnet=Na.id]="MantleSepoliaTestnet",j))(cS||{}),yv={id:1139,name:"MathChain",network:"MathChain",iconUrl:"",iconBackground:"#fff",nativeCurrency:{decimals:18,name:"MATCH",symbol:"MATCH"},rpcUrls:{default:{http:["https://1139.rpc.thirdweb.com"]},public:{http:["https://1139.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"matchscan",url:"https://lisbon.matchscan.io"},etherscan:{name:"matchscan",url:"https://lisbon.matchscan.io"}},testnet:!1};var{regClass:lS}=Laya,bd=class extends hd{constructor(){super();this.btnLock=!1}onEnable(){U.intance.on("msg_"+Y.snake.socket.MessageType.MSG_WITHDRAW,this,this.requestChargeInfo)}setOpenData(t){this.withDraw(t),this.requestChargeInfo(),console.log("data",t)}async withDraw(t){let i=Me.instance.walletAddress;this.tf_address.text=i,this.tf_token.text=t.symbol,this.tf_web.text=t.chainName}requestChargeInfo(){let t=Y.snake.socket.MessageType.MSG_WITHDRAW,i=this.data.symbolId,n=Y.snake.socket.SC_WITHDRAW.fromObject({resp:""});cr.send(t,n)}onOpenWeb(t){t.visible==!1&&(t.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList))}async onBtnWithdraw(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1}),this.testWithdrawCodeInput();let t=Number(this.tf_appAmount.text);var i=this.list_token2.selectedItem;if(!i){De.instance.notice(H.instance.getLanguage(1801));return}let n=i.id,s=i.chainId,a=Number(this.withdrawCode.text);if(!a){Lt.instance().AlertByType(ge.BASEALERTVIEW,st.instance.get(33),ge.YES);return}let c=xe.intance.getACoin(s,n);if(!c)return;let u=c.Commission,p=new ds(u/1e4),f=new ds(a),d=p.multiply(f).getValue();if(a>t){De.instance.notice(st.instance.get(111));return}if(a>c.maxAmount){De.instance.notice(H.instance.getLanguage(1211,c.maxAmount));return}else if(a<c.minAmount){De.instance.notice(H.instance.getLanguage(1212,c.minAmount));return}if(ae.vType==2&&s==yv.id&&!await Me.instance.getAuthStatus()){De.instance.notice(st.instance.get(113));return}if(Ke.instance.showLoadingByInfo(),i.bankAddress&&i.bankAddress.length>10){let T=await Me.instance.getBankBalance(i.token,i.bankAddress,i.name);if(console.log("contractBalance: "+T),T){let M=i.tokenDecimals,D=No(T,M),F=Number(D);if(console.log("银行余额 constNum: "+F),F<a){Ke.instance.hideLoading(),De.instance.notice(H.instance.getLanguage(1356,i.name));return}}}let h=Number(this.tf_arrive.text),b=new ds(a).multiply(new ds(1).subtract(new ds(u).divide(new ds(1e4))));n==ze.TYPE_TOX&&s==cs.id,h=Number(b.getValue());let v=xe.intance.getCurrency(n,s).token||Dt.ADDRESS0,_=await Ze.requestPost("wxgame/payOrder/create",{chainId:s,coinType:n,payMoney:a,fee:d,arriveMoney:h,token:v});Ke.instance.hideLoading(),_&&_.errorCode==0&&ue.NoHeroError("Pending Review")}testWithdrawCodeInput(){let t=this.withdrawCode.text;if(t&&!/^[0-9]+\.?[0-9]*$/.test(t)){this.withdrawCode.text="",De.instance.notice(H.instance.getLanguage(1802));return}}onDisable(){}};bd=q([lS("-G96ocIBRFacV4Xozyt5NQ")],bd);var yd=class extends Laya.Dialog{};var{regClass:uS}=Laya,xd=class extends yd{constructor(){super();this.destroyDoCancel=!1;this.canClose=!0}onEnable(){this.on(Laya.Event.CLICK,this,this.onClickEvent)}onClickEvent(t){let i=t.target;i.name=="okBtn"?(this._okHandler&&this._okHandler.runWith(null),this.close()):i.name=="cancleBtn"&&(this.destroyDoCancel=!1,this._cancelHandler&&this._cancelHandler.runWith(null),this.close())}setOpenData(t){t&&(this._okHandler=t.okHandler,this._cancelHandler=t.cancelHandler,this.destroyDoCancel=t.destroyDoCancel,t.flag<0?(this.cancleBtn.visible=!1,this.okBtn.visible=!1,this.canClose=!1):t.flag&ge.YES&&!(t.flag&ge.NO)?(this.okBtn.x=this.width-this.okBtn.width>>1,this.cancleBtn.visible=!1,this.okBtn.label="Sure"):t.flag&ge.NO&&!(t.flag&ge.YES)?this.okBtn.visible=!1:t.flag&ge.YES&&t.flag&ge.NO,t.data&&this.alertDesc&&(t.data instanceof Array?(this.alertTitle.text=t.data[0],this.alertDesc.text=t.data[1]):this.alertDesc.text=t.data),t.initHandler&&t.initHandler.runWith(this))}onDisable(){this.destroyDoCancel&&this._cancelHandler&&this._cancelHandler.run(),this._okHandler=null,this._cancelHandler=null}close(t){this.canClose&&super.close(t)}};xd=q([uS("8G0DBvD7T_2CVupdfQXrBw")],xd);var _d=class extends Laya.Dialog{};var{regClass:pS}=Laya,vd=class extends _d{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=Se.M_POP;this.m_iPositionType=Se.CENTER}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.initContainer()}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList()}handleSelectHead(t){if(t!=-1){let i=this.list_head.selectedItem;G.instance.headId=i.id,this.playerIcon.headSkin=G.instance.headId}}createHeadList(){let t=xe.intance.m_dicHead;this.list_head.array=t.values,this.list_head.visible=!0;let i=-1,n=0;this.playerIcon.headSkin=G.instance.headId;for(let s of t.values){if(s.id==G.instance.headId){i=n;break}n++}this.list_head.selectedIndex=i}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,i=H.instance.getUILang("Upload picture"),n=H.instance.getUILang("Select Image"),s=H.instance.getUILang("Save changes");openUploadPic(this,t,i,n,s)}async openPicEnd(t,i){if(i.length>500){let n=await Ze.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);n&&(G.instance.headId=n.imgUrl,t.playerIcon.headSkin=n.imgUrl,console.log(n.imgUrl))}}onRegister(){let t=G.instance.headId;U.intance.event(L.EVENT_MODIFY_HEAD,[t]),this.close()}};vd=q([pS("BmtPy79ySCyg4IuEQC4zsQ")],vd);var wd=class extends Laya.ComboBox{};var{regClass:mS}=Laya,Ed=class extends wd{set defaultLabel(e){this._defaultLabel=e,this._selectedIndex<0&&(this._button.label=e)}onEnable(){this.list=this.comboList,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1)}set dataSource(e){super.dataSource=e;var t=e;if(t){this.list.repeatY=t.length,this.list.width=this.width;var i=[];t.forEach(n=>{n instanceof Array?i.push(n[1]):i.push(n)}),this.labels=i.join(","),console.log("comboData.length: "+t.length,this.labels)}}onCountryItemRender(e,t){e.onChange(this.list.selectedIndex==t)}set isOpen(e){if(console.log("isOpen: "+e),this._isOpen!=e)if(this._isOpen=e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),i=t.y+this._button.height;i=i+this._listHeight<=Laya.stage.height||t.y-this._listHeight<0?i:t.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(t.x,i),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};Ed=q([mS("AqEOSlrnRkmI9RUPCJUVqQ")],Ed);var Id=class extends Laya.List{};var{regClass:fS}=Laya,Sd=class extends Id{};Sd=q([fS("7DDHp602Rs6dL3bjAu4ArA")],Sd);var Ld=class extends Laya.Box{};var{regClass:dS}=Laya,Td=class extends Ld{addEvent(){}set dataSource(t){super.dataSource=t;var i=t;i&&(this.addEvent(),t.id==999?(this.img_icon.visible=!1,this.tf_name.text="All"):(this.img_icon.visible=!0,this.img_icon.skin=_e.instance.getCountryIcon(i.id),this.tf_name.text=H.instance.getLanguage(i.name)))}onChange(t){t?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};Td=q([dS("LJ8PUf7kRCGUr4eT8Mhy3g")],Td);var Ad=class extends Laya.Dialog{};var Qa=class extends Laya.Event{constructor(){super()}};Qa.INIT_CREATELOGIN_EVENT="CreateLoginEvent:INIT_CREATELOGIN_EVENT";var{regClass:hS}=Laya,kd=class extends Ad{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=Se.M_PANEL;this.m_iPositionType=Se.CENTER}onEnable(){U.intance.on(Qa.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),U.intance.on("msg_"+Y.snake.socket.MessageType.MSG_USER_REGISTER,this,this.onWaitPlayerInfoBack),U.intance.on(L.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),U.intance.on(L.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack),this.btn_setting.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_setting]),this.btn_radio1.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio1]),this.btn_radio2.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio2]),this.btn_register.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_register]),this.box_change.on(Laya.Event.CLICK,this,this.onChangeHead),this.input_name.prompt=H.instance.getLanguage(31),this.selectRadio(1),this.initCountry(),this.initCreateLoginView(),this.initReferral(),Ge.instance.sendCustumEvent(23)}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(t,i){t.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=i,this.onHideCountry())}onListDown(t){t.stopPropagation()}onScrollBarDown(t){t.stopPropagation()}onCountryItemRender(t,i){t.onChange(this.list_country.selectedIndex==i)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(t){if(console.log("handleSelectCountry: "+t),t!=-1){let i=this.list_country.selectedItem;G.instance.countryId=i.id,this.img_flag.skin=_e.instance.getCountryIcon(i.id),this.tf_country.text=H.instance.getLanguage(i.name)}}createCountryList(){let t=xe.intance.m_dicCountry;this.list_country.array=t.values,this.list_country.visible=!0;let i=-1,n=0;for(let s of t.values){if(s.id==G.instance.countryId){i=n;break}n++}this.list_country.selectedIndex=i}onChangeHeadBack(t,i){this.input_name.text=t,G.instance.headId=i,this.playerIcon.headSkin=i}onChangeModifyHead(t){G.instance.headId=t,this.playerIcon.headSkin=t}onChangeHead(){Oe.intance.openModule(S.ChangeHeadDialog)}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,i=H.instance.getUILang("Upload picture"),n=H.instance.getUILang("Select Image"),s=H.instance.getUILang("Save changes");openUploadPic(this,t,i,n,s)}async openPicEnd(t,i){if(i.length>500){let n=await Ze.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);n&&(G.instance.headId=n.imgUrl,t.playerIcon.headSkin=n.imgUrl,console.log(n.imgUrl))}}selectRadio(t){let i=t==1;this.btn_radio1.selected=i,this.btn_radio2.selected=!i}handleClickBtn(t){switch(t){case this.btn_radio1:this.selectRadio(1);break;case this.btn_radio2:this.selectRadio(2);break;case this.btn_register:this.onRegister();break;case this.btn_setting:Oe.intance.openModule(S.GameSettingLanguageDialog);break}}async onRegister(){let t=this.input_name.text,i=this.btn_radio1.selected?1:2;if(t=t.trim(),t==""){De.instance.notice(H.instance.getLanguage(31));return}if(G.instance.countryId==-1){De.instance.notice(H.instance.getLanguage(1048));return}let a=new URL(window.location.href).searchParams.get("referral");console.log("referral: ",a);let c=await Me.instance.createAcccount(t,i,G.instance.headId.toString(),G.instance.countryId,a)}onWaitPlayerInfoBack(t){if(t){Ke.instance.hideLoading();var i=t.roleInfo,n=new ji;n.pid=i.roleId,n.name=i.userName,n.icon=i.icon,n.exp=i.score,n.code=i.code,n.country=i.country,n.invite=i.invite,G.instance.playerDto=n,this.close(),U.intance.event(L.EVENT_ENTER_MAIN)}}initReferral(){let n=new URL(window.location.href).searchParams.get("referral");n&&(this.input_code.text=n)}initCreateLoginView(){}onDisable(){this.removeEvent()}removeEvent(){U.intance.off(Qa.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),U.intance.off(L.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),U.intance.off(L.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack)}};kd=q([hS("1K2SyFxcQY-12SasSSRXyQ")],kd);var Cd=class extends Laya.Dialog{};var{regClass:gS}=Laya,Rd=class extends Cd{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=Se.M_POP;this.m_iPositionType=Se.CENTER}onEnable(){Qe.instance.playSoundByName(Qe.soundName32)}onDisable(){}};Rd=q([gS("szfg-Zt_RRWZ_nHMppjUMA")],Rd);var Md=class extends Laya.Box{};var{regClass:bS}=Laya,Dd=class extends Md{set dataSource(e){super.dataSource=e;var t=e;t&&(this.img_icon.skin="res/role/img_icon_"+t[0]+".png",this.tf_name.text=H.instance.getUILang(t[1]),this.tf_num.text=t[2])}};Dd=q([bS("WJ5TDeRBSkC9yMqJ72B0Ow")],Dd);var Bd=class extends Laya.Box{};var{regClass:yS}=Laya,Od=class extends Bd{set dataSource(t){super.dataSource=t,this.headItem=t,this.headItem&&this.setCurrentOutPut()}async setCurrentOutPut(){let t=this.headItem.id;this.playerIcon.headSkin=t}onChange(t){}};Od=q([yS("AwN_JFPwQsKswm1N53Bmkg")],Od);var Pd=class extends Laya.Dialog{};var{regClass:xS}=Laya,Nd=class extends Pd{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=Se.M_POP;this.m_iPositionType=Se.CENTER}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.on(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.on(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.on(Laya.Event.CLICK,this,this.onDetail),U.intance.on("msg_"+Y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),U.intance.on(L.ROLE_INFO_CHANGE,this,this.updateRoleInfo),this.updateRoleInfo()}updateRoleInfo(){let t="1",i=G.instance.playerDto;if(!i){console.warn("Player data is not available");return}this.requestPlayerInfo(i.pid),this.updateBasicInfo(i),this.updateReferralInfo(i),this.updateCountryInfo(i.country),this.updateWalletAddress(),this.updatePlayerIcon(i.icon||t)}requestPlayerInfo(t){let i=Y.snake.socket.MessageType.MSG_REQUEST_INFO,n=Y.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t});cr.send(i,n)}updateBasicInfo(t){this.tf_name.text=t.name,this.ally_num.text=`${t.remCount}`}updateReferralInfo(t){if(t.code){let n=`http://stage.queengame.io/?referral=${t.code}`;this.tf_myCode.text=n,this.btn_copy2.disabled=!1}else this.tf_myCode.text="",this.btn_copy2.disabled=!0}updateCountryInfo(t){let i=xe.intance.m_dicCountry.get(t);i&&(this.tf_country.text=H.instance.getLanguage(i.name),this.img_country.skin=_e.instance.getCountryIcon(i.id))}updateWalletAddress(){let t=Me.instance.walletAddress;this.tf_address.text=Pr.formatWalletAddress(t)}updatePlayerIcon(t){this.playerIcon.headSkin=t}onChangeHead(){Oe.intance.openModule(S.SelectHeadDialog,!0)}onCopy(){let t=Me.instance.walletAddress;doCopy(t),De.instance.notice(H.instance.getLanguage(132))}onCopy2(){let t=this.tf_myCode.text;doCopy(t),De.instance.notice(H.instance.getLanguage(132))}onRequestInfo(t,i){if(i==Y.snake.socket.MessageCode.SYS_NORMAL){var n=t.roleInfo;console.log("玩家信息",n);let s=n.invNum;this.ally_num.text=`${s}`}}onDisable(){U.intance.off(L.ROLE_INFO_CHANGE,this,this.updateRoleInfo),this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.off(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.off(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.off(Laya.Event.CLICK,this,this.onDetail),U.intance.off("msg_"+Y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),U.intance.offAllCaller(this)}onDetail(){Oe.intance.openModule(S.ReferralDialog)}};Nd=q([xS("T7g565QQR7-fZgZNjVg92A")],Nd);var Fd=class extends Laya.Scene{};var{regClass:_S}=Laya,Ud=class extends Fd{constructor(t){super()}onAwake(){this.m_iLayerType=Se.M_POP,this.m_iPositionType=Se.UP}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.on(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.on(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.on(Laya.Event.CLICK,this,this.onDetail),U.intance.on("msg_"+Y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),U.intance.on(L.ROLE_INFO_CHANGE,this,this.updateRoleInfo),this.updateRoleInfo()}updateRoleInfo(){let t="1",i=G.instance.playerDto;if(!i){console.warn("Player data is not available");return}this.requestPlayerInfo(i.pid),this.updateBasicInfo(i),this.updateReferralInfo(i),this.updateCountryInfo(i.country),this.updateWalletAddress(),this.updatePlayerIcon(i.icon||t)}requestPlayerInfo(t){let i=Y.snake.socket.MessageType.MSG_REQUEST_INFO,n=Y.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t});cr.send(i,n)}updateBasicInfo(t){this.tf_name.text=t.name,this.ally_num.text=`${t.remCount}`}updateReferralInfo(t){if(t.code){let n=`${getVAddress()}?referral=${t.code}`;this.tf_myCode.text=n,this.btn_copy2.disabled=!1}else this.tf_myCode.text="",this.btn_copy2.disabled=!0}updateCountryInfo(t){let i=xe.intance.m_dicCountry.get(t);i&&(this.tf_country.text=H.instance.getLanguage(i.name),this.img_country.skin=_e.instance.getCountryIcon(i.id))}updateWalletAddress(){let t=Me.instance.walletAddress;this.tf_address.text=Pr.formatWalletAddress(t)}updatePlayerIcon(t){this.playerIcon.headSkin=t}onChangeHead(){Oe.intance.openModule(S.SelectHeadDialog,!0)}onCopy(){let t=Me.instance.walletAddress;doCopy(t),De.instance.notice(H.instance.getLanguage(132))}onCopy2(){let t=this.tf_myCode.text;doCopy(t),De.instance.notice(H.instance.getLanguage(132))}onRequestInfo(t,i){if(i==Y.snake.socket.MessageCode.SYS_NORMAL){var n=t.roleInfo;console.log("玩家信息",n);let s=n.invNum;this.ally_num.text=`${s}`}}onDisable(){U.intance.off(L.ROLE_INFO_CHANGE,this,this.updateRoleInfo),this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.off(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.off(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.off(Laya.Event.CLICK,this,this.onDetail),U.intance.off("msg_"+Y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),U.intance.offAllCaller(this)}onDetail(){Oe.intance.openModule(S.ReferralDialog)}setToMainScene(){lt.intance.setCurrentScene(le.M_SCENE_MAIN)}};Ud=q([_S("Ra6hof-DS3-o_gxRa_2t0g")],Ud);var Hd=class extends Laya.Dialog{};var{regClass:vS}=Laya,zd=class extends Hd{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=Se.M_POP;this.m_iPositionType=Se.CENTER}setOpenData(t){}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.input_name.prompt=H.instance.getLanguage(31),this.initContainer();let t=xe.intance.getGeneralValueById(13);this.tf_nameGold.text=t[1],this.img_nameGold.skin=_e.instance.getMoneyIcon(t[0]),console.log(t)}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList(),this.initCountry()}handleSelectHead(t){if(t!=-1){let i=this.list_head.selectedItem;G.instance.headId=i.id,this.playerIcon.headSkin=G.instance.headId}}createHeadList(){let t=xe.intance.m_dicHead;this.list_head.array=t.values,this.list_head.visible=!0;let i=-1,n=0;G.instance.headId=G.instance.playerDto.icon,this.playerIcon.headSkin=G.instance.headId,this.input_name.text=G.instance.playerDto.name;for(let s of t.values){if(s.id==G.instance.headId){i=n;break}n++}this.list_head.selectedIndex=i}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(t,i){t.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=i,this.onHideCountry())}onListDown(t){t.stopPropagation()}onScrollBarDown(t){t.stopPropagation()}onCountryItemRender(t,i){t.onChange(this.list_country.selectedIndex==i)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(t){if(console.log("handleSelectCountry: "+t),t!=-1){let i=this.list_country.selectedItem;G.instance.countryId=i.id,this.img_flag.skin=_e.instance.getCountryIcon(i.id),this.tf_country.text=H.instance.getLanguage(i.name)}}createCountryList(){let t=xe.intance.m_dicCountry;this.list_country.array=t.values,this.list_country.visible=!0;let i=-1,n=0;G.instance.countryId=G.instance.playerDto.country;for(let s of t.values){if(s.id==G.instance.countryId){i=n;break}n++}this.list_country.selectedIndex=i}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,i=H.instance.getUILang("Upload picture"),n=H.instance.getUILang("Select Image"),s=H.instance.getUILang("Save changes");openUploadPic(this,t,i,n,s)}async openPicEnd(t,i){if(i.length>500){let n=await Ze.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);n&&(G.instance.headId=n.imgUrl,t.playerIcon.headSkin=n.imgUrl,t.list_head.selectedIndex=-1,console.log(n.imgUrl))}}onRegister(){let t=this.input_name.text;if(t=t.trim(),t==""){De.instance.notice(H.instance.getLanguage(31));return}if(G.instance.playerDto.name!==t&&G.instance.getConsumeValue(ze.TYPE_GOLD)<Number(this.tf_nameGold.text)){De.instance.notice(st.instance.get(51));return}G.instance.headId!=-1?this.onModify(t,G.instance.headId,G.instance.countryId):De.instance.notice(H.instance.getLanguage(134))}async onModify(t,i,n){if(t==""){De.instance.notice(H.instance.getLanguage(31));return}let s=await ys.instance.updateProfile(t,i.toString(),n);this.destroyed||(s?(G.instance.playerDto=s,this.close(),U.intance.event(L.ROLE_INFO_CHANGE)):De.instance.notice(H.instance.getLanguage(135)))}};zd=q([vS("3CibwwHGSPG2Qkeq4rbMag")],zd);var jd=class extends Laya.ComboBox{};var{regClass:wS}=Laya,Vd=class extends jd{set defaultLabel(e){this._defaultLabel=e,this._selectedIndex<0&&(this._button.label=e),this._button.labelAlign="center"}onEnable(){this.list=this.comboList}set dataSource(e){super.dataSource=e;var t=e;t&&(this.labels=t.join(","),console.log("comboData.length: "+t.length),this.list.repeatY=t.length,this.list.width=this.width,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1))}onCountryItemRender(e,t){e.onChange(this.list.selectedIndex==t)}set isOpen(e){if(console.log("isOpen: "+e),this._isOpen!=e)if(this._isOpen=e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),i=t.y+this._button.height;i=i+this._listHeight<=Laya.stage.height||t.y-this._listHeight<0?i:t.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(t.x,i),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};Vd=q([wS("Fns-7UW3RpSb95NWnjiDFQ")],Vd);var Gd=class extends Laya.Dialog{};var{regClass:ES}=Laya,To=class extends Laya.Script{constructor(){super();this._isLeft=!1}onAwake(){}get isLeft(){return this._isLeft}set isLeft(t){this._isLeft=t,this.btn_bg=this.owner.getChildByName("btn_bg"),this.label_left=this.owner.getChildByName("label_left"),this.label_right=this.owner.getChildByName("label_right"),this.isLeft?(this.btn_bg.x=4,this.label_left.color="#213343",this.label_right.color="#52a5e0"):(this.btn_bg.x=this.owner.width-this.btn_bg.width-4,this.label_left.color="#52a5e0",this.label_right.color="#213343")}};To=q([ES("-1MGS4JRSMOn_RKPUuuV9Q")],To);var{regClass:IS}=Laya,Wd=class extends Gd{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=Se.M_POP;this.m_iPositionType=Se.CENTER;this.totalLans=[1,6,7];this.currLan=0}onEnable(){this.musicSwitchButton=this.box_music.getComponent(To),this.soundSwitchButton=this.box_sound.getComponent(To),this.initContainer(),this.box_music.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_music]),this.box_sound.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_sound]),this.btn_copy.clickHandler=new Laya.Handler(this,this.onClickHandler,[this.btn_copy]),this.btn_referral.on(Laya.Event.CLICK,this,this.onClickHandler,[this.btn_referral]);for(let i=0;i<this.totalLans.length;i++){var t=this.totalLans[i];this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t])}}onClickHandler(t){switch(t){case this.box_music:this.musicSwitchButton.isLeft=!this.musicSwitchButton.isLeft,Qe.instance.switchMusic(this.musicSwitchButton.isLeft);break;case this.box_sound:this.soundSwitchButton.isLeft=!this.soundSwitchButton.isLeft,Qe.instance.switchSound(this.soundSwitchButton.isLeft);break;case this.btn_referral:Oe.intance.openModule(S.InviteRewardDialog);break;case this.btn_copy:{let i=this.inviteUrl;doCopy(i),De.instance.notice(H.instance.getLanguage(132))}break}}initContainer(){this.musicSwitchButton.isLeft=Qe.instance.m_bPlayMusic,this.soundSwitchButton.isLeft=Qe.instance.m_bPlayeSound,this.currLan=G.instance.m_strLanguage,this.setTab(G.instance.m_strLanguage),this.inviteUrl=Vi.getInviteUrl(),this.label_url.text=Pr.shortStr(this.inviteUrl,50)}onClickTab(t){if(this.currLan==t)return;this.currLan=t,this.setTab(t);let i=H.instance.getLanTypeById(t);H.instance.FGM_SetLanguage(i),Ge.instance.reload()}setTab(t){for(let n=0;n<this.totalLans.length;n++){var i=this.totalLans[n];t==i?(this["btn_"+i].getChildByName("btn_yellowBg").visible=!0,this["btn_"+i].getChildByName("Label").color="#213343"):(this["btn_"+i].getChildByName("btn_yellowBg").visible=!1,this["btn_"+i].getChildByName("Label").color="#52a5e0")}}webCopyString(t){let i=t,n=window.document.createElement("textarea");n.value=i,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";let s=window.getSelection(),a=!1;s.rangeCount>0&&(a=s.getRangeAt(0)),window.document.body.appendChild(n),n.select(),n.selectionStart=0,n.selectionEnd=i.length;let c=!1;try{c=window.document.execCommand("copy")}catch(u){console.error(u)}return window.document.body.removeChild(n),a&&(s.removeAllRanges(),s.addRange(a)),c}};Wd=q([IS("yJfJZzgZRluE_rgB44yTvg")],Wd);var $d=class extends Laya.Box{};var{regClass:SS}=Laya,hs=class extends $d{constructor(){super();this.isReady=!1;this.needChangeAni=!0;this.loop=!0;this.isInited=!1}onEnable(){this.sk=this.box_sk,this.sk.on(Laya.Event.READY,this,this.onSkReady),this.sk.loop=this.loop,console.log("onEnable: + this.animationName： "+this.animationName),this.animationName&&(this.sk.animationName=this.animationName),this.spineTemplet?(this.sk.templet=this.spineTemplet,console.log("onEnable: + this.spineTemplet ")):this.templateUrl?Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(t=>{this.destroyed||(this.sk.templet=t,console.log("this.templateUrl: "+this.templateUrl))}):this.animationName||(this.sk.animationName="animation"),this.isInited=!0}onSkReady(){this.isReady=!0,console.log("onSkReady this.visible: "+this.visible)}play(t,i,n,s,a,c,u){if(!this.isReady){console.log("动画未准备好，不能play");return}this.sk.play(t,i,n,s,a,c,u)}stop(){if(!this.isReady){console.log("动画未准备好，不能stop");return}this.sk.stop()}init(t,i="animation",n=!0){console.log("init: ",i,t),this.animationName=i,this.spineTemplet=t,this.loop=n,this.visible=!0,this.isInited&&(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=this.spineTemplet)}initUrl(t,i="animation",n=!0){console.log("initUrl: ",t),this.animationName=i,this.templateUrl=t,this.loop=n,this.visible=!0,this.isInited&&Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(s=>{this.destroyed||(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=s,console.log("this.templateUrl: "+this.templateUrl))})}onDisable(){Laya.Pool.recover(hs.aniSkPrefab,this),this.box_sk.off(Laya.Event.READY,this,this.onSkReady),this.sk.templet=null}};hs.aniSkPrefab="aniSkPrefab",hs=q([SS("2rJV0EbMT9K2L6-6HOpDHw")],hs);var Za=class r{static toFixed(e,t){if(e.toString().indexOf(".")==-1)return e;{let i=e.toFixed(t);return parseFloat(i)}}static toFixedWithPercent(e,t,i="+"){let n;return e.toString().indexOf(".")==-1?n=i+e*100+"%":(t=t-2,t<0&&(t=0),n=i+(e*100).toFixed(t)+"%"),n}static getGoldStr(e){let t;return e>999999?t=parseInt(String(e/1e5))+"m":t=e,t}static numStringFormat(e){let t=e;return G.instance.m_strLanguage==2?e.length>4&&(t=String(e).replace(/(\d)(?=(\d{3})+$)/g,"$1 ")):t=String(e).replace(/(\d)(?=(\d{3})+$)/g,"$1,"),t}static numSimple(e){let t=e,i=parseInt(parseInt(t)/1e3+"");return i>0?i+"k":r.numStringFormat(t)}static numStringFormat2(e){let t;if(e>999999)t=r.getNumStr(e,1e6,"M");else if(e>999)t=r.getNumStr(e,1e3,"K");else return e+"";return t}static getNumStr(e,t,i){return parseInt(Math.floor(e/t)+"")+i}static getTimeStr(e){let t;return e<3600?t=H.instance.getLanguage(9024,Math.ceil(e/60)):e<3600*24?t=H.instance.getLanguage(9025,Math.ceil(e/3600)):t=H.instance.getLanguage(9025,Math.ceil(e/(3600*24))),t}static isInteger(e){return e%1===0}static isNumber(e){return typeof e=="number"}static formatNumber(e,t=8){return Number.isInteger(e)?e:parseFloat(e.toFixed(t))}static formatNumberStr(e,t=2){return Number.isInteger(e)?e:parseFloat(e.toFixed(t)).toString()}static filterNumFormat(e,t=2,i=!1,n=!1){if(!e)return e;if(e<1e3&&e>0)if(n){var s=Math.floor(Number(parseFloat(e*10**t+"").toPrecision(16)))/10**t;return parseFloat(s.toFixed(t)).toString()}else return parseFloat(e.toFixed(t)).toString();if(e==="0.00")return e;var a=[{value:1,symbol:""},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}];i&&(a=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}]);var c=/\.0+$|(\.[0-9]*[1-9])0+$/,u;for(u=a.length-1;u>0&&!(e>=a[u].value);u--);let p=(e/a[u].value).toString();return p.indexOf(".")>-1&&(t>0?p=p.substr(0,p.indexOf(".")+t+1):p=p.substr(0,p.indexOf(".")+t)),p.replace(c,"$1")+a[u].symbol}static fromWei(e,t,i=0){if(!e)return 0;let n=e.length-t+i;if(n<=0)return 0;let s=e.toString().slice(0,n);if(i){let a=s.length-i;if(a<=0){let c="0.";for(let u=0;u<Math.abs(a);u++)c+="0";s=c+s}else s=s.slice(0,s.length-i)+"."+s.slice(s.length-i)}return s}static getNumberSuffix(e){let t=parseInt(e,10);return isNaN(t)?e:(t%1e9).toString()}};var Kd=class extends Laya.Box{};var{regClass:LS}=Laya,qd=class extends Kd{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.itemVo=t,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let t=new Nr;if(!this.itemVo)return;this.itemVo.m_iId==ze.TYPE_QUAN_MNT?(this.tf_quanId.visible=!0,this.tf_quanId.text=this.itemVo.m_iPk):this.tf_quanId.visible=!1;let i=this.itemVo.itemItem;Oe.intance.hasOpenView(S.PveChoosePropsDialog)&&(this.txt_num.visible=!1),i?(this.showAdd?this.txt_num.text=""+Za.formatNumber(this.itemVo.newAddCnt,8):this.itemVo.m_iNum?this.txt_num.text=""+Za.formatNumber(this.itemVo.m_iNum,8):this.txt_num.text=""+Za.formatNumber(this.itemVo.newAddCnt,8),this.img_icon.skin=_e.instance.getItemIcon(i.icon),this.img_box.skin="gameIcon/items/itemBg/img_"+i.quality+".png"):(this.txt_num.text="",this.img_icon.skin=null,this.img_box.skin="gameIcon/items/itemBg/img_0.png"),this.tf_isSch.visible=this.itemVo.isScholarship}};qd=q([LS("LzxJYKybT_m3CJav3RyDmg")],qd);var Yd=class extends Laya.Dialog{};var{regClass:TS}=Laya,Xd=class extends Yd{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=Se.M_POP;this.m_iPositionType=Se.CENTER}setOpenData(t){t&&(this.itemVo=t)}onEnable(){this.item.dataSource=this.itemVo;let t=this.itemVo.itemItem;this.tf_name.text=H.instance.getLanguage(t.name),this.txt_type.text=H.instance.getLanguage(6060)+H.instance.getLanguage(t.type),this.txt_desc.text=H.instance.getLanguage(t.des)}removeEvent(){}};Xd=q([TS("or8jNdIhRpSbAG2JBhH-wA")],Xd);var Qd=class extends Laya.Dialog{};var{regClass:AS}=Laya,Zd=class extends Qd{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=Se.M_POP;this.m_iPositionType=Se.CENTER}onEnable(){Qe.instance.playSoundByName(Qe.soundName32)}setOpenData(t){t&&(this.reward=t);var i=[],n=this.reward;n.forEach(p=>{if(p.id&&p.id>0){var f=new Nr(p.id);f.newAddCnt=p.count,p.id==3011&&(f.itemItem.icon=p.id),i.push(f)}});var s=this.list_reward.spaceX,a=this.list_reward.itemTemplate.width,c=i.length;this.list_reward.repeatX=c;var u=c*a+s*(c-1);this.list_reward.width=u,this.list_reward.x=this.width-u>>1,this.list_reward.array=i}};Zd=q([AS("xwYUFnd4S3uJGIJSjjbRag")],Zd);var Jd=class extends Laya.Box{};var{regClass:kS}=Laya,eh=class extends Jd{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=Se.M_POP;this.m_iPositionType=Se.CENTER}onEnable(){console.log("OpenScene onEnable："+this.m_strName)}getName(){console.log(this.m_strName)}onDisable(){}};eh=q([kS("sQS5mrqRQLWcBk-SgfBGJw")],eh);var th=class extends Laya.Scene{};var rh=class r{constructor(){this._inited=!1}static getInstance(){return r._instance||(r._instance=new r),r._instance}init(){this._inited||(this._inited=!0)}};var ih=class{constructor(){this.connectAddr="ws://175.27.154.72:10001";this.groupApplyList=[];this.groupData=[];this.watch=[]}};var{regClass:CS}=Laya,Ao=class extends th{constructor(){super(...arguments);this.isAnimationRunning=!1;this.currIconAni=1}onAwake(){this.m_iLayerType=Se.M_POP,this.m_iPositionType=Se.UP,rh.getInstance().init(),this.initSpineEvent()}async onOpened(t){this.startBackgroundAnimation(),this.mouseThrough=this.mouseThrough=!0,this.headBox.mouseThrough=!0;let i=this.getChildByName("mcMain");if(i&&(i.mouseThrough=!0),this.updateTopInfo(),Ge.instance.sendCustumEvent(34),Ao.M_B_FIRST_Open&&ae.bookingId&&hi.instance.goBookingCreateRoomDialog(ae.bookingId,ae.teamId),Ao.M_B_FIRST_Open=!1,!!G.instance.playerDto){var s=null;showChatBtn(!0,Me.instance.walletAddress,s)}}startBtnAni(){this.currIconAni>5&&(this.currIconAni=1),this["spine_"+this.currIconAni].play(0,!1),this["spine_"+this.currIconAni].visible=!0,this.currIconAni++,Laya.timer.once(2e3,this,this.startBtnAni)}updateTopInfo(){let t=G.instance.playerDto;if(!t)return;this.tf_roleName.text=t.name,t.needTip=!0,this.playerIcon.dataSource=t;let i=new Date(G.instance.m_serverTime);console.log("server time toLocaleString："+i.toLocaleString()),console.log("server time offset date："+G.instance.timeZoneOff/60/60)}onGetRoleInfo(t,i){if(i==Y.snake.socket.MessageCode.SYS_NORMAL){var n=t.roleInfo;console.log("玩家信息",n)}}onEnable(){for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);this.playerIcon.on(Laya.Event.CLICK,this,this.onClickHead),this.btn_shop.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_shop]),this.btn_guild.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_guild]),this.btn_backpack.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_backpack]),this.btn_asset.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_asset]),this.btn_mail.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_mail]),this.btn_setting.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_setting]),U.intance.on("msg_"+Y.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onGetRoleInfo),U.intance.on(L.ROLE_INFO_CHANGE,this,this.updateTopInfo),U.intance.on("msg_"+Y.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR,this,this.onRequestRoomAddr),U.intance.on(L.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom)}onClickTab(t){if(t==1){var i=Y.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR,n=Y.snake.socket.CS_REQUEST_ROOM_ADDR.fromObject({type:1});cr.send(i,n)}}onRequestRoomAddr(t,i){if(i==Y.snake.socket.MessageCode.SYS_NORMAL){var n=t.addr;if(console.log("onRequestRoomAddr: "+n),n){var s=n.lastIndexOf("#");n=n.slice(0,s)}var a=new ih;a.connectAddr=n,Le.instance.roomDto=a,Ct.instance.initSocket()}}initSpineEvent(){this.initSpineLoadEvent(this.AniSk_shop,this.btn_shop),this.initSpineLoadEvent(this.AniSk_backpack,this.btn_backpack),this.initSpineLoadEvent(this.AniSk_asset,this.btn_asset),this.initSpineLoadEvent(this.AniSk_rank,this.btn_rank),this.initSpineLoadEvent(this.AniSk_guild,this.btn_guild),this.initSpineLoadEvent(this.AniSk_btn1,this.btn_1),this.initSpineLoadEvent(this.AniSk_btn2,this.btn_2)}async onclickBtnHandler(t){switch(t){case this.btn_shop:lt.intance.setCurrentScene(le.M_SCENE_SHOP);break;case this.btn_backpack:lt.intance.setCurrentScene(le.M_SCENE_KNAPSACK);break;case this.btn_setting:Oe.intance.openModule(S.GameSettingLanguageDialog);break;case this.btn_asset:lt.intance.setCurrentScene(le.M_SCENE_ASSET);break;default:De.instance.notice(H.instance.getLanguage(12));break}}onHideList(){this.Img_tele.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList)}async onClickHead(){lt.intance.setCurrentScene(le.M_SCENE_ROLE)}onDisable(){this.stopBackgroundAnimation(),this.destroySpineEventListeners(),this.destroySpineAnimations(),U.intance.off(L.ROLE_INFO_CHANGE,this,this.updateTopInfo),U.intance.off(L.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),U.intance.offAllCaller(this),Laya.Tween.clearAll(this),Laya.timer.clearAll(this),showChatBtn(!1)}destroySpineAnimations(){for(let t=1;t<8;t++){let i=this["spine_"+t];i&&(i.stop(),i.removeSelf())}}onEnterMatchRoom(t){t?Laya.timer.once(2e3,this,this.startBtnAni):Laya.timer.clear(this,this.startBtnAni)}startBackgroundAnimation(){!this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!0,So.startCircleAnimation(this.bgAni,Laya.stage.width/2,Laya.stage.height/2,30,3500,!0,0,null))}stopBackgroundAnimation(){this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!1,So.stopCircleAnimation(this.bgAni))}onSpineReady(t){if(!t){console.warn("Button component is null in onSpineReady");return}t.skin=""}getSpineNode(t){return t?t.box_sk?t.box_sk:(console.warn("Spine skeleton node is null in AniSk component"),null):(console.warn("AniSk component is null"),null)}initSpineLoadEvent(t,i){if(!t||!i){console.warn("Invalid parameters in initSpineLoadEvent");return}let n=this.getSpineNode(t);n&&(n.off(Laya.Event.READY,this,this.onSpineReady),n.on(Laya.Event.READY,this,this.onSpineReady,[i]))}destroySpineEventListeners(){[{anisk:this.AniSk_shop,button:this.btn_shop},{anisk:this.AniSk_backpack,button:this.btn_backpack},{anisk:this.AniSk_asset,button:this.btn_asset},{anisk:this.AniSk_rank,button:this.btn_rank},{anisk:this.AniSk_guild,button:this.btn_guild},{anisk:this.AniSk_btn1,button:this.btn_1},{anisk:this.AniSk_btn2,button:this.btn_2}].forEach(({anisk:i,button:n})=>{if(i&&n){let s=this.getSpineNode(i);s&&s.off(Laya.Event.READY,this,this.onSpineReady)}})}};Ao.M_B_FIRST_Open=!0,Ao=q([CS("pxhiJrX5SkKKvyFr8uIlNA")],Ao);var Dn=class{constructor(){}};Dn.GREEN="#2ac84b",Dn.YELLOW="#e8c833",Dn.RED="#e04343";var nh=class extends Laya.Box{};var{regClass:RS}=Laya,oh=class extends nh{constructor(){super()}onEnable(){U.intance.on(L.EVENT_Game_Delay,this,this.onGameDelay)}onGameDelay(e){var t=xe.intance.getGeneralValueById(6),i=t[0],n=t[1];this.tf_delay.text=e+"ms",e>n?(this.img_delay.skin="res/common/comm/img_com_xinhao3.png",this.tf_delay.color=Dn.RED):e>i?(this.img_delay.skin="res/common/comm/img_com_xinhao2.png",this.tf_delay.color=Dn.YELLOW):(this.img_delay.skin="res/common/comm/img_com_xinhao1.png",this.tf_delay.color=Dn.GREEN)}onDisable(){U.intance.off(L.EVENT_Game_Delay,this,this.onGameDelay)}};oh=q([RS("AhgzWGWoRFetvSMsEOSkSg")],oh);var sh=class extends Laya.Box{};var{regClass:MS}=Laya,ah=class extends sh{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.playerDto=t,this.playerDto&&(this.addEvent(),this.setCurrentOutPut())}set headSkin(t){parseInt(t)>0?this.img_head.skin=_e.instance.getPlayerIcon(t):this.setImage(t)}async setCurrentOutPut(){if(!this.playerDto)return;let t=this.playerDto.icon;parseInt(t)>0?this.img_head.skin=_e.instance.getPlayerIcon(t):this.setImage(t)}setImage(t){this.clearImage();var i=this;Laya.loader.load(t,Laya.Handler.create(this,()=>{i.destroyed||(this.img_head.skin=t)}),null,Laya.Loader.IMAGE,-1,!0,"1111",!1,!1)}clearImage(){this.img_head&&(this.img_head.texture=null)}destroy(t=!0){this.clearImage(),super.destroy(t)}toDetail(){!this.playerDto||this.playerDto.needTip}};ah=q([MS("OPT5t2CoSmuYp2zUJWwUWA")],ah);var ch=class extends Laya.Box{};var{regClass:DS}=Laya,Rr=class extends ch{init(e,t,i=28){var n,s;switch(s=gt.getRandInRound(-30,30),t?n=Rr.TYPE_Kill:n=Rr.TYPE_Normal,t?this.pos(s,-180):this.pos(s,-110),this.alpha=1,this.scale(1,1),this.tf_damage.visible=!1,this.box_crit.visible=!1,n){case Rr.TYPE_Normal:this.tf_damage.text="+"+e,this.showNormalDamageEffect();break;case Rr.TYPE_Kill:this.showCriticalDamageEffect();break}}showNormalDamageEffect(){this.tf_damage.visible=!0,Laya.Tween.to(this,{y:this.y-50,alpha:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,this.onComplete))}showCriticalDamageEffect(){this.box_crit.visible=!0,this.scale(.2,.2),Laya.Tween.to(this,{scaleX:1.3,scaleY:1.3,alpha:1,y:this.y-70},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1,alpha:0},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.onComplete()}))}))}onComplete(){this.removeSelf()}onDisable(){Laya.Pool.recover("damageNumber",this)}};Rr.WHITE="#FFFFFF",Rr.ORANGE="#FFA500",Rr.RED="#FF0000",Rr.GREEN="#119c09",Rr.BLUE="#78cefd",Rr.TYPE_Normal="Normal",Rr.TYPE_Kill="Kill",Rr=q([DS("nHp6WKzZRIWvyhguidEfqg")],Rr);var lh=class extends Laya.Dialog{};var{regClass:BS}=Laya,uh=class extends lh{constructor(){super()}onEnable(){this.list.visible=!1;var e=Le.instance.msgEndbody,t=e.token;this.list.renderHandler=new Laya.Handler(this,(i,n)=>{i.setDataIndex(n)}),this.list.array=t,this.list.visible=!0,!t||t.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}onDisable(){}};uh=q([BS("JH3DtUPTS_2FR6dTzhLHMw")],uh);var ph=class extends Laya.Box{};var{regClass:OS}=Laya,mh=class extends ph{constructor(){super()}addEvent(){}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.setData(e),this.addEvent()}setData(e){var t=e.split(","),i=t[1],n=t[2],s=t[3],a=t[4];this.tf_time.text=gi.formatTimeStamp(Number.parseFloat(t[0]),"HH:MM:SS"),this.img_country.skin=_e.instance.getCountryIcon(i),this.tf_nickName.text=n;let c=xe.intance.m_dicItems.get(s),u=H.instance.getLanguage(c.name);this.tf_token.text=a+" "+u}setDataIndex(e){this.bg.skin=e%2===0?"res/common/comm/img_wzbg_1.png":"res/common/comm/img_wzbg_2.png"}};mh=q([OS("po6_Uf6sTlaC-xEazLOk5Q")],mh);var fh=class extends Laya.Dialog{};var{regClass:PS}=Laya,dh=class extends fh{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=Se.M_PANEL;this.m_iPositionType=Se.CENTER}onEnable(){Qe.instance.playSoundByName(Qe.soundName_win),this.btn_next.on(Laya.Event.CLICK,this,this.onNext),this.btn_home.on(Laya.Event.CLICK,this,this.setToAirdropScene),this.btn_help.on(Laya.Event.CLICK,this,this.onNext),Ge.instance.sendCustumEvent(43)}onHelp(){ue.commTipWithYes(H.instance.getLanguage("HELP"))}onNext(){this.setToAirdropScene()}setToAirdropScene(){lt.intance.setCurrentScene(le.M_SCENE_MAIN)}setOpenData(t){this.roomGameOverPush=Le.instance.msgEndbody,this.tf_rank.text=`${this.roomGameOverPush.rank}`,this.tf_score.text=`${this.roomGameOverPush.score}`,this.tf_kill.text=`Defeated: <font color="#ffd734">${this.roomGameOverPush.kills}</font>`,this.tf_length.text=`Final length: <font color="#ffd734">${this.roomGameOverPush.length}</font>`,this.tf_challengeDuration.text=`Lifetime: <font color="#ffd734">${gi.format(this.roomGameOverPush.alive,":",!1)}</font>`,this.btn_next.visible=!0,this.list_reward.visible=!1;var i=this.roomGameOverPush.items,n=this.roomGameOverPush.token;this.list_reward.vScrollBarSkin="";var s=[],a=new Ie;if(i&&i.length>0&&i.forEach(b=>{var w=a.get(b.itemId);w?w.newAddCnt=w.newAddCnt+b.num:(w=new Nr(b.itemId),w.newAddCnt=b.num,s.push(w),a.set(b.itemId,w))}),n&&n.length>0){var c=new Nr(ze.TYPE_REWARD_TOKEN);s.push(c)}var u=this.list_reward.spaceX,p=this.list_reward.itemTemplate.width,f=s.length,d=f*p+u*(f-1);this.list_reward.repeatX=f,this.list_reward.width=d,this.btn_next.visible=!0,this.list_reward.x=this.box_outside.width-this.list_reward.width>>1,this.list_reward.array=s,this.list_reward.visible=!0,!this.list_reward.array||this.list_reward.array.length<=0?this.noDataBox1.visible=!0:this.noDataBox1.visible=!1;let h=-1;this.list_reward.selectedIndex=h}onDisable(){this.removeEvent()}removeEvent(){}};dh=q([PS("y-nP_lRrQVef9uttVJ0rDw")],dh);var hh=class extends Laya.Box{};var{regClass:NS}=Laya,gh=class extends hh{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){this.snack=t,this.snack&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){this.snack.tag&&(this.tf_rank.text=this.snack.rankNum+".  "+Pr.abbreviateString(this.snack.tag.userName)),this.snack.rankNum==1?this.tf_kill.text=`<font><img src='res/match2/img_phb_icon2.png'/>${this.snack.score}</font>`:this.tf_kill.text=`<font>${this.snack.score}</font>`,this.snack.isSelf?(this.tf_rank.color="#ffe155",this.tf_kill.color="#ffe155"):(this.tf_rank.color="#ffffff",this.tf_kill.color="#ffffff")}};gh=q([NS("XTVFXeI_R768e0Elv_ePAA")],gh);var Ur=class{constructor(){}};Ur.TYPE_Consumption=1,Ur.TYPE_Equipment=2,Ur.TYPE_Currency=3,Ur.TYPE_Hero=4,Ur.TYPE_Fragment=5,Ur.TYPE_CARD=6,Ur.CHOOSE_Wallet=1,Ur.CHOOSE_PutOn=2,Ur.ITEM_PT=1086,Ur.ITEM_PT_EXP=1091,Ur.ITEM_SNAKE=3026;var bh=class extends Laya.Box{};var{regClass:FS}=Laya,yh=class extends bh{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.itemVo=t,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.itemVo&&(this.itemVo.m_iId==ze.TYPE_REWARD_TOKEN?(this.img_tokens.visible=!0,this.knapsackItem.visible=!1):(this.img_tokens.visible=!1,this.knapsackItem.visible=!0,this.knapsackItem.showAdd=!0,this.knapsackItem.dataSource=this.itemVo))}toDetail(){!this.itemVo||!this.itemVo.needTip||(this.itemVo.m_iId==ze.TYPE_REWARD_TOKEN?Oe.intance.openModule(S.MatchEndRewardTokensDialog):this.itemVo.type===Ur.TYPE_Equipment?Oe.intance.openModule(S.EquipDetailDialog,this.itemVo):Oe.intance.openModule(S.KnapsackTipDialog,this.itemVo))}};yh=q([FS("WXpxCvqlQ2mKdcJCYlqOeg")],yh);var xh=class extends Laya.Box{};var{regClass:US}=Laya,_h=class extends xh{constructor(){super();this.isBig=!1;this.isAddEvent=!1}set dataSource(t){super.dataSource=t,this.skillItem=t,this.skillItem&&(this.txt_num.text="",this.img_icon.skin=_e.instance.getMatchSkillIcon(this.skillItem.icon))}};_h=q([US("iwuFUCOEQRyOjxpy6IkQ2Q")],_h);var vh=class extends Laya.Button{};var{regClass:HS}=Laya,wh=class extends vh{constructor(){super();this.isAddEvent=!1;this.isCanClick=!0;this.skillCooldown=5e3;this.thisGlobalCooldown=1e4;this.globalCooldown=1e4;this.remainingSkillCooldown=0;this.remainingGlobalCooldown=0;this.reduceCooldown=0}onEnable(){this.addEvent()}addEvent(){this.isAddEvent||(U.intance.on(L.EVENT_CLICK_NUM,this,this.onNumberClick),U.intance.on(L.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),U.intance.on(L.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),U.intance.on(L.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),this.isAddEvent=!0,this.on(Laya.Event.CLICK,this,this.onSkillButtonClick),this.on(Laya.Event.MOUSE_UP,this,this.onSkillButtonUp))}onNumberClick(t){t==this.keyNum&&this.onSkillButtonClick(null)}set dataSource(t){super.dataSource=t,this.skillItem=t[0],this.itemItem=t[1],this.equipPos=t[2],this.count=t[3],this.skillItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.skillItem&&(this.skillIconItem.isBig=this.skillItem.icon=="1001",this.skillIconItem.dataSource=this.skillItem,this.itemItem?(this.txt_num.visible=!0,this.updateCount(),this.skillCooldown=this.itemItem.cd*1e3):(this.txt_num.visible=!1,this.skillCooldown=this.skillItem.cd),this.thisGlobalCooldown=this.skillItem.commCd,Laya.timer.frameLoop(1,this,this.updateCooldown))}onSkillButtonUp(t){t&&t.stopPropagation(),_i.clearClickFilter(this)}onSkillButtonClick(t){t&&t.stopPropagation();return;if(this.itemItem)if(this.remainingSkillCooldown+this.reduceCooldown<=0){if(console.log("道具技能释放！"),$e.instance.selfSnack._isDead){console.log("自己已死亡，无法释放道具技能！");return}Laya.Tween.to(this,{scaleX:.8,scaleY:.8},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1},100,Laya.Ease.linearNone)}));var i;this.skillItem.type==6||this.skillItem.type==7?ke.instance.onSendUse(!0,this.equipPos):ke.instance.onSendUse(!1,this.equipPos)}else console.log("技能或全局冷却还在进行中，无法释放。");else this.remainingSkillCooldown+this.reduceCooldown<=0&&this.remainingGlobalCooldown+this.reduceCooldown<=0?(console.log("技能释放！"),Laya.Tween.to(this,{scaleX:.8,scaleY:.8},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1},100,Laya.Ease.linearNone)})),$e.instance.selfSnack.attack(0,this.skillItem.id),this.updateSkillCooldown(this.skillCooldown),U.intance.event(L.EVENT_UPDATE_GLOBAL_COOL,[this.thisGlobalCooldown])):console.log("技能或全局冷却还在进行中，无法释放。")}updateSkillCooldown(t){this.remainingSkillCooldown=t}updateItemRemainCooldown(t){var i=t[0];console.log("updateItemRemainCooldown _skillId: "+i),this.itemItem&&i==this.skillItem.id&&(this.count=t[1],this.updateCount(),this.updateSkillCooldown(this.skillCooldown))}updateCount(){this.txt_num.text=this.count+"",this.disabled=!this.count}updateReduceCooldown(t,i){console.log("updateReduceCooldown skillType: "+t),this.skillItem&&t==this.skillItem.type&&(this.reduceCooldown=this.skillCooldown*i)}updateGlobalCooldown(t){this.itemItem||(this.globalCooldown=t,this.remainingGlobalCooldown=t)}updateCooldown(){if(this.remainingSkillCooldown+this.reduceCooldown>0){this.remainingSkillCooldown-=Laya.timer.delta;let t=(this.remainingSkillCooldown+this.reduceCooldown)/1e3;this.txt_time.text=t.toFixed(1),this.updateCooldownMask(this.skillCooldownMask,(this.remainingSkillCooldown+this.reduceCooldown)/this.skillCooldown,"#000000"),this.img_djs.visible=!0,this.txt_time.visible=!0}else this.img_djs.visible=!1,this.txt_time.visible=!1;this.remainingGlobalCooldown+this.reduceCooldown>0?(this.remainingGlobalCooldown-=Laya.timer.delta,this.updateCooldownMask(this.globalCooldownMask,(this.remainingGlobalCooldown+this.reduceCooldown)/this.globalCooldown,"#00000036"),this.globalCooldownMask.visible=!0):this.globalCooldownMask.visible=!1,this.skillIconItem.gray=this.remainingSkillCooldown+this.reduceCooldown>0||this.remainingGlobalCooldown+this.reduceCooldown>0}updateCooldownMask(t,i,n){let s=this.width/2,a=this.width/2,c=this.height/2;t.graphics.clear(),t.graphics.drawPie(a,c,s,-90+360*(1-i),270,n)}onDisable(){U.intance.off(L.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),U.intance.off(L.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),U.intance.off(L.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),U.intance.offAllCaller(this),Laya.timer.clearAll(this)}};wh=q([HS("x6t-z1VuR52yXWju0qxGBg")],wh);var Eh=class extends Laya.Dialog{};var{regClass:zS}=Laya,Ih=class extends Eh{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink)}onLink(t){console.log("点击了超链接："+t)}onRefresh(){Ge.instance.reload()}setOpenData(t){if(t){var i=t[0];if(t.length>2?(this.alertTitle.text=t[1],this.alertDesc.text=t[2]):this.alertDesc.text=t[1],i==1){this.canClose=!1;var n=this.getChildByName("close");n.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1;this.alertDesc.height=this.alertDesc.textField.textHeight+20}}onDisable(){}close(t){this.canClose&&super.close(t)}};Ih=q([zS("xATCTfSDSkaGtuYn669ofQ")],Ih);var Sh=class extends Laya.Dialog{};var{regClass:jS}=Laya,Lh=class extends Sh{constructor(){super()}onEnable(){this.img_show.on(Laya.Event.CLICK,this,this.close)}setOpenData(e){e&&(this.img_show.skin=e)}onDisable(){}};Lh=q([jS("RUMV5hpfRdCRzhO9yBDCzg")],Lh);var Th=class extends Laya.Dialog{};var{regClass:VS}=Laya,Ah=class extends Th{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink),this.btn_left.on(Laya.Event.CLICK,this,this.onChangePage,[!1]),this.btn_right.on(Laya.Event.CLICK,this,this.onChangePage,[!0])}onLink(t){console.log("点击了超链接："+t)}onRefresh(){Ge.instance.reload()}setOpenData(t){if(t){var i=t[0],n=t[1];if(this.list=n.list,this.pageNo=1,this.pageTotal=this.list.length,this.pageTotal<2&&(this.box_page.visible=!1),this.updatePageList(),i==1){this.canClose=!1;var s=this.getChildByName("close");s.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1}}async onChangePage(t){if(t)this.pageNo++;else{if(this.pageNo<=1)return;this.pageNo--}this.updatePageList()}updatePageList(){this.txt_page.text=this.pageNo+"/"+this.pageTotal,this.btn_left.disabled=this.pageNo<=1,this.btn_right.disabled=this.pageNo>=this.pageTotal,this.setNoticeDetail()}setNoticeDetail(){if(this.pageNo){var t=this.list[this.pageNo-1];t&&(this.alertTitle.text=H.instance.getMultiLan(t.title),this.alertDesc.text=H.instance.getMultiLan(t.contents))}}onDisable(){}close(t){this.canClose&&super.close(t)}};Ah=q([VS("iB7UvqEcQ1GFKaVEIy6Bmw")],Ah);var kh=class extends Laya.Box{};var{regClass:GS}=Laya,Ch=class extends kh{};Ch=q([GS("ON5bkSuKSE2gwPDUnRGmrw")],Ch);var Rh=class extends Laya.Box{};var{regClass:WS}=Laya,Mh=class extends Rh{onEnable(){}notice(e){this.zOrder=1e7;let t=e;this.label_tf.text=t,this.label_tf.x=68,this.image_bg.width=68*2+this.label_tf.textField.textWidth,t.length/45>1&&(this.image_bg.height=this.label_tf.textField.textHeight+55),this.alpha=1,this.visible=!0}get view(){return this}get width(){return this.image_bg.width}onDisable(){console.log("txtNotice recover"),Laya.Pool.recover("txtNotice",this)}};Mh=q([WS("Nm27xWbYSG6mj-EXqPOZ_A")],Mh);var Dh=class extends Laya.Dialog{};var{regClass:$S}=Laya,Bh=class extends Dh{constructor(){super();this.m_iLayerType=Se.M_POP;this.m_iPositionType=Se.CENTER;this.addL=1}onEnable(){this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),U.intance.on(L.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus)}setOpenData(t){if(t){console.log(t),this.shopItem=t[0],this.img_icon.skin=_e.instance.getItemIcon(this.shopItem.icon);var i=xe.intance.m_dicItems.get(this.shopItem.icon);this.img_box.skin="gameIcon/items/itemBg/img_"+i.quality+".png",this.tf_price.text=`${this.shopItem.cost[1]}`}}handleClickBtn(t){switch(t){case this.btn_reduce:this.addL>1&&this.addL--,this.setItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setItemNum();break}}onRefreshItemStatus(){this.close()}setItemNum(){this.tf_num.text=this.addL+""}changeItemNum(){var t=parseInt(this.tf_num.text);(!t||t<1)&&(t=1),this.addL=t,this.setItemNum()}onDisable(){this.btn_plus.clickHandler=null,this.btn_reduce.clickHandler=null,this.tf_num.off(Laya.Event.BLUR,this,this.changeItemNum),U.intance.off(L.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus)}};Bh=q([$S("LRfHnCX4RROGq5Y2JkrAZw")],Bh);var Oh=class extends Laya.Box{};var{regClass:KS}=Laya,Ph=class extends Oh{constructor(){super(...arguments);this.coins=[[3022,2],[3001,2],[3011,2],[3013,4],[3010,2],[3007,4],[3006,6],[3015,2],[3016,2],[3005,0]]}onEnable(){let t=(Laya.stage.width-ae.DESIGN_WIDTH)/2;this.img_coinsBg.right-=t,console.log("dWidth: "+t),this.updateLocalAssets(),U.intance.on(L.ROLE_INFO_CHANGE,this,this.updateLocalAssets),U.intance.on(L.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),this.coins=xe.intance.getGeneralValueById(19),this.list_coin.array=this.coins}onDisable(){U.intance.off(L.ROLE_INFO_CHANGE,this,this.updateLocalAssets),U.intance.off(L.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets)}updateLocalAssets(){this.list_coin.refresh()}};Ph=q([KS("7P9MlqipSaG6QoKpQowDbQ")],Ph);var Nh=class extends Laya.Dialog{};var{regClass:qS}=Laya,Fh=class extends Nh{constructor(){super()}onEnable(){this.on(Laya.Event.CLICK,this,this.toShowBuyDialog)}set dataSource(t){super.dataSource=t,this.shopItem=t,this.shopItem}toShowBuyDialog(){Oe.intance.openModule(S.BuyPropDialog)}};Fh=q([qS("awS07ko0RBaxCnxXWqiR4g")],Fh);var Uh=class extends Laya.Scene{};var{regClass:YS}=Laya,Hh=class extends Uh{constructor(){super(...arguments);this.currTab=0;this.type=1;this.selectItemId=-1}onAwake(){this.m_iLayerType=Se.M_POP,this.m_iPositionType=Se.UP}onOpened(t){t&&t.length>0?(this.type=t[0],t[1]!=null&&(this.selectItemId=t[1]),this.onClickTab(this.type)):(this.selectItemId=1,this.onTabClick(this.selectItemId))}onEnable(){for(let t=0;t<4;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);this.initShopList(),this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_left.on(Laya.Event.CLICK,this,this.clickLeftAndRight,[!0]),this.btn_right.on(Laya.Event.CLICK,this,this.clickLeftAndRight,[!1]),this.btn_buy.on(Laya.Event.CLICK,this,this.onRecruit)}setTab(t){for(let i=1;i<3;i++)t==i?(this["btn_"+i].getChildByName("selectBox1").visible=!0,this["btn_"+i].getChildByName("selectBox2").visible=!1):(this["btn_"+i].getChildByName("selectBox1").visible=!1,this["btn_"+i].getChildByName("selectBox2").visible=!0)}async onClickTab(t){this.currTab!=t&&(this.type=t,this.setTab(t),t==1?(this.box_middle.visible=!0,this.tabBox.visible=!0,this.box_shop.visible=!1,this.img_nft.skin="res/shop/img_iconwz1.png",this.img_props.skin="res/shop/img_iconwz4.png"):t==2&&(this.box_middle.visible=!1,this.tabBox.visible=!1,this.box_shop.visible=!0,this.img_nft.skin="res/shop/img_iconwz2.png",this.img_props.skin="res/shop/img_iconwz3.png"))}setToMainScene(){lt.intance.setCurrentScene(le.M_SCENE_MAIN)}removeEvent(){for(let t=0;t<4;t++)this["tab"+t].off(Laya.Event.CLICK,this,this.onTabClick,[t]);for(let t=1;t<3;t++)this["btn_"+t].off(Laya.Event.CLICK,this,this.onClickTab,[t]);this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.btn_left.off(Laya.Event.CLICK,this,this.clickLeftAndRight,[!0]),this.btn_right.off(Laya.Event.CLICK,this,this.clickLeftAndRight,[!1]),this.btn_buy.off(Laya.Event.CLICK,this,this.onRecruit)}onTabClick(t){let n="res/shop/img_Button_1.png",s="res/shop/img_btlv.png",a="res/shop/img_bt1_2.png",c="res/shop/img_Button_4.png",u="#009815";for(let d=0;d<4;d++){let h=this[`tab${d}`],b=h.getChildByName("tf_tit"),w=t===d,v=d===0;this.selectItemId=t,h.skin=v?w?n:a:w?s:c,b.stroke=w?5:0,b.strokeColor=u;let _=1001,T=1001;switch(t){case 0:_=null,T=1001;break;case 1:_=1001,T=1002;break;case 2:_=1002,T=1003;break;case 3:T=null,_=null;break;default:break}if(T){var f=xe.intance.m_dicSnakes.get(T);let M=this.attribute_1.getChildByName("tf_value"),D=this.attribute_2.getChildByName("tf_value"),F=this.attribute_3.getChildByName("tf_value"),O=this.attribute_3.getChildByName("tf_value");M.text=`${f.baseSpeed}`,D.text=`${f.maxLength}`,F.text=`${f.suctionRadius}`,O.text=`${f.doublePointsProbability}`}if(_){let M=xe.intance.m_dicShops.get(_);M&&(this.tf_price.text=`${M.cost}`,this.btn_buy.visible=!0)}else this.btn_buy.visible=!1;this.selectItemId<=0?this.btn_left.disabled=!0:this.btn_left.disabled=!1,this.selectItemId>=3?this.btn_right.disabled=!0:this.btn_right.disabled=!1}}clickLeftAndRight(t){t&&this.selectItemId>0&&(this.selectItemId--,this.onTabClick(this.selectItemId)),!t&&this.selectItemId<3&&(this.selectItemId++,this.onTabClick(this.selectItemId))}initShopList(){let t=[],i=xe.intance.m_dicShops;i&&i.values&&(t=Array.from(i.values).filter(n=>n.type===2),this.shopList.array=t)}async onRecruit(){}onDisable(){}};Hh=q([YS("IPCUkD5kRse3Gz5tw0Aovw")],Hh);var zh=class extends Laya.Image{};var{regClass:XS}=Laya,jh=class extends zh{constructor(){super(...arguments);this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200}init(t){this.skin=_e.instance.getFoodIcon(t.icon)}startScalingAnimation(){let t=this.minScale+Math.random()*(this.maxScale-this.minScale),i=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:t,scaleY:t},i,null,Laya.Handler.create(this,()=>{let n=this.minScale+Math.random()*(1-this.minScale),s=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:n,scaleY:n},s,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}onDisable(){Laya.Tween.clearAll(this)}};jh=q([XS("j4yWA5APT7ipho7IOx4ryg")],jh);var Vh=class extends Laya.Scene{};var{regClass:QS}=Laya,Gh=class extends Vh{constructor(){super(...arguments);this.liveNum=0;this.lastSeedRate=0;this.SnakeAINum=5;this.snakeAIArr=[]}onAwake(){this.m_iLayerType=Se.M_POP,this.m_iPositionType=Se.UP,ke.instance.init()}onOpened(t){var i=Le.instance.matchDto.startTime-Le.instance.matchDto.nowTime;i>0&&Oe.intance.openModule(S.MatchReadyView);var n=Le.instance.matchDto.arenaId,s=xe.intance.m_dicArenaDic.get(n);Le.instance.currArenaItem=s,this.list_rank.array=[];var a=this.map_1001;ke.instance.gameMap=a,ke.instance.box_players=this.box_players,ke.instance.box_front=this.box_front,ke.instance.img_smallMap=this.img_smallMap,Ge.instance.sendCustumEvent(42);var c=Le.instance.matchDto.roomId;this.arenaNo.text=c+"",this.init(),this.onInitEnd(this),ke.instance.playMusic()}init(){this.registerEvents(),this.btn_addSpeed.on(Laya.Event.MOUSE_DOWN,this,this.onTouchSpeedDown),this.btn_addSpeed.on(Laya.Event.MOUSE_UP,this,this.onTouchSpeedUp),this.btn_addSpeed.on(Laya.Event.MOUSE_OUT,this,this.onTouchSpeedUp);var t=Fr.getInstance(this.gameLayer);$e.instance.createSnakes(),ke.instance.createFoods(),t.startGame()}onTouchSpeedDown(t){if(t){var i=t.type;t.stopPropagation(),console.log("onTouchSpeedDown "+t.type)}this.lastSeedRate!=pe.snackSpeedRate.speedUp&&(this.lastSeedRate=pe.snackSpeedRate.speedUp,Fr.getInstance().updateSpeedRate(pe.snackType.SELF,pe.snackSpeedRate.speedUp))}onTouchSpeedUp(t){if(t){var i=t.type;t.stopPropagation(),console.log("onTouchSpeedUp "+t.type),_i.clearClickFilter(t.target)}this.lastSeedRate!=pe.snackSpeedRate.default&&(this.lastSeedRate=pe.snackSpeedRate.default,Fr.getInstance().updateSpeedRate(pe.snackType.SELF,pe.snackSpeedRate.default))}onSpaceClick(t){t?(this.onTouchSpeedDown(null),_i.addClickFilter(this.btn_addSpeed)):(this.onTouchSpeedUp(null),_i.clearClickFilter(this.btn_addSpeed))}onInitEnd(t){t.startGameLoop(),t.updateBattleCD()}startGameLoop(){Laya.timer.frameLoop(10,this,this.gameLoop)}registerEvents(){U.intance.on(L.LENGTH_CHANGE,this,this.updateLength),U.intance.on(L.KILL_SNAKE,this,this.updateKills)}removeEvents(){U.intance.off(L.LENGTH_CHANGE,this,this.updateLength),U.intance.off(L.KILL_SNAKE,this,this.updateKills)}gameLoop(){$e.instance.selfSnack&&(this.updateLength($e.instance.selfSnack.getSkinLength()),$e.instance.selfSnack.tag&&(this.updateKills($e.instance.selfSnack.tag.kills),this.updateSnakeLengthRule())),$e.instance.matchHeroSprDic&&(this.list_rank.array=this.getSortPlayer($e.instance.matchHeroSprDic.values),this.tf_remainer.text=this.liveNum+"")}updateSnakeLengthRule(){var t=$e.instance.selfSnack.tag.snakeId,i=$e.instance.selfSnack.getSkinLength(),n=xe.intance.getSheetDataByMultiKey(xe.intance.m_dicSnakeLengthRules,[t,i]),s=xe.intance.getSheetDataByMultiKey(xe.intance.m_dicSnakeLengthRules,[t,i+1]),a=$e.instance.selfSnack.score;if(n&&s){var c=a-n.accumulatePoints,u=s.accumulatePoints-n.accumulatePoints;this.text_score.text=`${c}/${u}`;var p=c/u*185;this.img_socre_mask.width<p?Laya.Tween.to(this.img_socre_mask,{width:p},100):(Laya.Tween.clearAll(this.img_socre_mask),this.img_socre_mask.width=p)}}updateKills(t){this.text_kill.text=`${t}`}updateLength(t){this.text_length.text=`${t}`}onRestoreData(){var t=Fr.getInstance(this.gameLayer);t.clearTimer(),$e.instance.restoreSnakes(),ke.instance.updateFoods(),t.startGame()}getSortPlayer(t){var i=t.slice(),n=i.sort((c,u)=>u.score-c.score),s=[];this.liveNum=0;var a=1;return n.forEach(c=>{c.rankNum=a,c.isAlive&&this.liveNum++,a<11?s.push(c):c.tag.roleId==G.instance.playerDto.pid&&c.isAlive&&s.splice(-1,1,c),a++}),s}updateBattleCD(){Le.instance.matchCoolDownTime=Math.round((Le.instance.matchDto.myPlayerObject.oprTime-Le.instance.matchDto.myPlayerObject.enterTime)/1e3),this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)}onSetCoolTime(){this.tf_reduceTime.text=gi.format(Le.instance.matchCoolDownTime,":",!1),Le.instance.stopAll||Le.instance.matchCoolDownTime++}checkMatchRankData(){Le.instance.checkMatchRankData()}onGameSceneGray(){this.matchBox.gray=!0,Laya.timer.once(1e3,this,this.stopUpdate)}stopUpdate(){Fr.getInstance().endTimer()}onEnable(){U.intance.on(L.EVENT_RESTORE_DATA,this,this.onRestoreData),U.intance.on(L.EVENT_GameScene_Gray,this,this.onGameSceneGray),U.intance.on(L.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.on(Laya.Event.FOCUS,this,this.onWindowFocus)}onWindowFocus(){ke.instance.sendRestoreData()}onDisable(){U.intance.off(L.EVENT_RESTORE_DATA,this,this.onRestoreData),U.intance.off(L.EVENT_GameScene_Gray,this,this.onGameSceneGray),U.intance.off(L.EVENT_CLICK_SPACE,this,this.onSpaceClick),this.removeEvents(),Laya.stage.off(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.timer.clearAll(this),Le.instance.clearData()}};Gh=q([QS("0r0gyiRERf6yXTGaGqWBvg")],Gh);var It=Laya.InputManager,{regClass:ZS,property:oae}=Laya,Rl=class extends Laya.Script{constructor(){super(...arguments);this.currRockerBar=null;this.maxDistance=80;this.isMouseDown=!1;this.mouseDownPosition=new Laya.Point;this._currentMouse=new Laya.Point;this.initRockerBarPosition=new Laya.Point;this.key1Pressed=!1;this.key2Pressed=!1;this.key3Pressed=!1;this.key4Pressed=!1;this.key5Pressed=!1;this.key6Pressed=!1;this.key7Pressed=!1;this.key8Pressed=!1;this.keySpacePressed=!1;this.directionOffset=0;this.isKeyRun=!1}onEnable(){Laya.InputManager.multiTouchEnabled=!0}onStart(){this.currRockerBar=this.owner.getChildByName("freebar"),this.freetrack=this.owner.getChildByName("freetrack"),this.img_arrow_left=this.freetrack.getChildByName("img_arrow_left"),this.img_arrow_right=this.freetrack.getChildByName("img_arrow_right"),this.img_arrow_up=this.freetrack.getChildByName("img_arrow_up"),this.img_arrow_down=this.freetrack.getChildByName("img_arrow_down"),Laya.Browser.onPC?this.freetrack.visible=!0:this.img_arrow_left.visible=this.img_arrow_right.visible=this.img_arrow_up.visible=this.img_arrow_down.visible=!1,this.initialise()}initialise(){this.initRockerBarPosition.setTo(this.currRockerBar.x,this.currRockerBar.y),this.currRockerBar.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)}onSkillKeyDown(t,i,n){switch(t.stopPropagation(),i){case 1:this.key1Pressed=n;break;case 2:this.key2Pressed=n;break;case 3:this.key3Pressed=n;break}}onMouseDown(t){Le.instance.stopAll||(t.stopPropagation(),this.isMouseDown=!0,this.currRockerBar.selected=!0,Laya.Browser.onPC||(this.freetrack.visible=!0),this.mouseDownPosition.setTo(this.owner.mouseX,this.owner.mouseY),console.log("onMouseDown this.owner.mouse: ",this.owner.mouseX,this.owner.mouseY),this.isKeyRun=!1,this.touchId=t.touchId)}onMouseUp(t){!this.isMouseDown||t.touchId!==this.touchId||this.endClick(t)}endClick(t){this.isMouseDown=!1,this.currRockerBar.x=this.initRockerBarPosition.x,this.currRockerBar.y=this.initRockerBarPosition.y,this.currRockerBar.selected=!1,this.setDir(-4),this.touchId=-1}onMouseMove(t){if(!this.isMouseDown||!this.currRockerBar||t.touchId!==this.touchId)return;t.stopPropagation(),this._currentMouse.setTo(t.stageX,t.stageY);let i=this.owner.globalToLocal(this._currentMouse,!1),n=i.x-this.mouseDownPosition.x,s=i.y-this.mouseDownPosition.y;if(Math.sqrt(n**2+s**2)<this.maxDistance)this.currRockerBar.x=this.initRockerBarPosition.x+n,this.currRockerBar.y=this.initRockerBarPosition.y+s;else{let c=Math.atan2(n,s);this.currRockerBar.x=Math.sin(c)*this.maxDistance+this.initRockerBarPosition.x,this.currRockerBar.y=Math.cos(c)*this.maxDistance+this.initRockerBarPosition.y}if(Math.abs(n)>this.directionOffset||Math.abs(s)>this.directionOffset){let c=gt.judgePosition(n,s);this.setDir(c)}}onUpdate(){Le.instance.stopAll||this.getKeyboardPressed()}setDir(t){this.lastDirection!=t&&(ke.instance.setMyHeroDirection(t),this.lastDirection=t)}getKeyboardPressed(){if(It.hasKeyDown(Laya.Keyboard.W)&&It.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(225)):It.hasKeyDown(Laya.Keyboard.W)&&It.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(315)):It.hasKeyDown(Laya.Keyboard.S)&&It.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(135)):It.hasKeyDown(Laya.Keyboard.S)&&It.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(45)):It.hasKeyDown(Laya.Keyboard.W)?(this.isKeyRun=!0,this.setDir(270)):It.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(0)):It.hasKeyDown(Laya.Keyboard.S)?(this.isKeyRun=!0,this.setDir(90)):It.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(180)):this.isKeyRun&&this.setDir(-4),It.hasKeyDown(Laya.Keyboard.H)||It.hasKeyDown(Laya.Keyboard.NUMPAD_1)){if(this.key1Pressed)return;this.key1Pressed=!0,U.intance.event(L.EVENT_CLICK_NUM,1),Laya.timer.once(500,this,this.notKey1Pressed)}if(It.hasKeyDown(Laya.Keyboard.J)||It.hasKeyDown(Laya.Keyboard.NUMPAD_2)){if(this.key2Pressed)return;this.key2Pressed=!0,U.intance.event(L.EVENT_CLICK_NUM,2),Laya.timer.once(500,this,this.notKey2Pressed)}if(It.hasKeyDown(Laya.Keyboard.K)||It.hasKeyDown(Laya.Keyboard.NUMPAD_3)){if(this.key3Pressed)return;this.key3Pressed=!0,U.intance.event(L.EVENT_CLICK_NUM,3),Laya.timer.once(500,this,this.notKey3Pressed)}if(It.hasKeyDown(Laya.Keyboard.L)||It.hasKeyDown(Laya.Keyboard.NUMPAD_4)){if(this.key4Pressed)return;this.key4Pressed=!0,U.intance.event(L.EVENT_CLICK_NUM,4),Laya.timer.once(500,this,this.notKey4Pressed)}if(It.hasKeyDown(Laya.Keyboard.M)||It.hasKeyDown(Laya.Keyboard.NUMPAD_5)){if(this.key5Pressed)return;this.key5Pressed=!0,U.intance.event(L.EVENT_CLICK_NUM,5),Laya.timer.once(500,this,this.notKey5Pressed)}if(It.hasKeyDown(Laya.Keyboard.N)||It.hasKeyDown(Laya.Keyboard.NUMPAD_6)){if(this.key6Pressed)return;this.key6Pressed=!0,U.intance.event(L.EVENT_CLICK_NUM,6),Laya.timer.once(500,this,this.notKey6Pressed)}if(It.hasKeyDown(Laya.Keyboard.B)||It.hasKeyDown(Laya.Keyboard.NUMPAD_7)){if(this.key7Pressed)return;this.key7Pressed=!0,U.intance.event(L.EVENT_CLICK_NUM,7),Laya.timer.once(500,this,this.notKey7Pressed)}if(It.hasKeyDown(Laya.Keyboard.V)||It.hasKeyDown(Laya.Keyboard.NUMPAD_8)){if(this.key8Pressed)return;this.key8Pressed=!0,U.intance.event(L.EVENT_CLICK_NUM,8),Laya.timer.once(500,this,this.notKey8Pressed)}if(It.hasKeyDown(Laya.Keyboard.SPACE)){if(this.keySpacePressed)return;this.keySpacePressed=!0,U.intance.event(L.EVENT_CLICK_SPACE,!0)}else this.keySpacePressed&&(U.intance.event(L.EVENT_CLICK_SPACE,!1),this.notKeySpacePressed(),Laya.timer.clear(this,this.notKeySpacePressed))}notKey1Pressed(){this.key1Pressed=!1}notKey2Pressed(){this.key2Pressed=!1}notKey3Pressed(){this.key3Pressed=!1}notKey4Pressed(){this.key4Pressed=!1}notKey5Pressed(){this.key5Pressed=!1}notKey6Pressed(){this.key6Pressed=!1}notKey7Pressed(){this.key7Pressed=!1}notKey8Pressed(){this.key8Pressed=!1}notKeySpacePressed(){this.keySpacePressed=!1}getKeyPressed(t){var i=t.toParentPoint(new Laya.Point(t.x,t.y));return i.x>t.x&&i.x<t.x+t.width&&i.y>t.y&&i.y<t.y+t.height}getDistance(t,i,n,s){let a=t-n,c=i-s;return Math.sqrt(a*a+c*c)}onDisable(){Laya.InputManager.multiTouchEnabled=!1}};Rl=q([ZS("7cTqWb35RwygSkuWy4QkgQ")],Rl);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
