"use strict";(()=>{var nL=Object.create;var _u=Object.defineProperty;var D0=Object.getOwnPropertyDescriptor;var sL=Object.getOwnPropertyNames;var aL=Object.getPrototypeOf,oL=Object.prototype.hasOwnProperty;var ie=(i,e)=>()=>(i&&(e=i(i=0)),e);var B0=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),Mb=(i,e)=>{for(var t in e)_u(i,t,{get:e[t],enumerable:!0})},lL=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of sL(e))!oL.call(i,n)&&n!==t&&_u(i,n,{get:()=>e[n],enumerable:!(r=D0(e,n))||r.enumerable});return i};var P0=(i,e,t)=>(t=i!=null?nL(aL(i)):{},lL(e||!i||!i.__esModule?_u(t,"default",{value:i,enumerable:!0}):t,i));var N=(i,e,t,r)=>{for(var n=r>1?void 0:r?D0(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&_u(e,t,n),n};var cL=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var it=(i,e,t)=>(cL(i,e,"read from private field"),t?t.call(i):e.get(i)),rt=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)};var O0,N0=ie(()=>{"use strict";O0="1.0.8"});var ai,Ma=ie(()=>{"use strict";N0();ai=class i extends Error{constructor(e,t={}){let r=t.cause instanceof i?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof i&&t.cause.docsPath||t.docsPath,s=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: https://abitype.dev${n}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${O0}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.shortMessage=e}}});function lr(i,e){return i.exec(e)?.groups}var Db,Bb,Nu,Ol=ie(()=>{"use strict";Db=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Bb=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Nu=/^\(.+?\).*?$/});function Fu(i){let e=i.type;if(F0.test(i.type)&&"components"in i){e="(";let t=i.components.length;for(let n=0;n<t;n++){let s=i.components[n];e+=Fu(s),n<t-1&&(e+=", ")}let r=lr(F0,i.type);return e+=`)${r?.array??""}`,Fu({...i,type:e})}return"indexed"in i&&i.indexed&&(e=`${e} indexed`),i.name?`${e} ${i.name}`:e}var F0,H0=ie(()=>{"use strict";Ol();F0=/^tuple(?<array>(\[(\d*)\])*)$/});function Da(i){let e="",t=i.length;for(let r=0;r<t;r++){let n=i[r];e+=Fu(n),r!==t-1&&(e+=", ")}return e}var U0=ie(()=>{"use strict";H0()});function Gs(i){return i.type==="function"?`function ${i.name}(${Da(i.inputs)})${i.stateMutability&&i.stateMutability!=="nonpayable"?` ${i.stateMutability}`:""}${i.outputs?.length?` returns (${Da(i.outputs)})`:""}`:i.type==="event"?`event ${i.name}(${Da(i.inputs)})`:i.type==="error"?`error ${i.name}(${Da(i.inputs)})`:i.type==="constructor"?`constructor(${Da(i.inputs)})${i.stateMutability==="payable"?" payable":""}`:i.type==="fallback"?`fallback() external${i.stateMutability==="payable"?" payable":""}`:"receive() external payable"}var V0=ie(()=>{"use strict";U0()});function G0(i){return z0.test(i)}function j0(i){return lr(z0,i)}function K0(i){return W0.test(i)}function $0(i){return lr(W0,i)}function Y0(i){return q0.test(i)}function X0(i){return lr(q0,i)}function Ba(i){return Q0.test(i)}function Z0(i){return lr(Q0,i)}function e_(i){return J0.test(i)}function t_(i){return lr(J0,i)}function r_(i){return i_.test(i)}function n_(i){return lr(i_,i)}function s_(i){return uL.test(i)}var z0,W0,q0,Q0,J0,i_,uL,a_,Hu,Nl=ie(()=>{"use strict";Ol();z0=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;W0=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;q0=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;Q0=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;J0=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;i_=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;uL=/^receive\(\) external payable$/;a_=new Set(["indexed"]),Hu=new Set(["calldata","memory","storage"])});var Uu,Vu,zu,Gu=ie(()=>{"use strict";Ma();Uu=class extends ai{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}},Vu=class extends ai{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},zu=class extends ai{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}});var ju,Wu,Ku,$u,qu,Pb=ie(()=>{"use strict";Ma();ju=class extends ai{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},Wu=class extends ai{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},Ku=class extends ai{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},$u=class extends ai{constructor({param:e,type:t,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},qu=class extends ai{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}});var nn,Yu,Xu,Ob=ie(()=>{"use strict";Ma();nn=class extends ai{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},Yu=class extends ai{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},Xu=class extends ai{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}});var Qu,o_=ie(()=>{"use strict";Ma();Qu=class extends ai{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}});var Zu,l_=ie(()=>{"use strict";Ma();Zu=class extends ai{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}});function c_(i,e,t){let r="";if(t)for(let n of Object.entries(t)){if(!n)continue;let s="";for(let o of n[1])s+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${n[0]}{${s}})`}return e?`${e}:${i}${r}`:i}var Ju,u_=ie(()=>{"use strict";Ju=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]])});function Fl(i,e={}){if(Y0(i))return pL(i,e);if(K0(i))return mL(i,e);if(G0(i))return dL(i,e);if(e_(i))return hL(i,e);if(r_(i))return fL(i);if(s_(i))return{type:"receive",stateMutability:"payable"};throw new Yu({signature:i})}function pL(i,e={}){let t=X0(i);if(!t)throw new nn({signature:i,type:"function"});let r=Br(t.parameters),n=[],s=r.length;for(let l=0;l<s;l++)n.push(Jn(r[l],{modifiers:Hu,structs:e,type:"function"}));let o=[];if(t.returns){let l=Br(t.returns),c=l.length;for(let p=0;p<c;p++)o.push(Jn(l[p],{modifiers:Hu,structs:e,type:"function"}))}return{name:t.name,type:"function",stateMutability:t.stateMutability??"nonpayable",inputs:n,outputs:o}}function mL(i,e={}){let t=$0(i);if(!t)throw new nn({signature:i,type:"event"});let r=Br(t.parameters),n=[],s=r.length;for(let o=0;o<s;o++)n.push(Jn(r[o],{modifiers:a_,structs:e,type:"event"}));return{name:t.name,type:"event",inputs:n}}function dL(i,e={}){let t=j0(i);if(!t)throw new nn({signature:i,type:"error"});let r=Br(t.parameters),n=[],s=r.length;for(let o=0;o<s;o++)n.push(Jn(r[o],{structs:e,type:"error"}));return{name:t.name,type:"error",inputs:n}}function hL(i,e={}){let t=t_(i);if(!t)throw new nn({signature:i,type:"constructor"});let r=Br(t.parameters),n=[],s=r.length;for(let o=0;o<s;o++)n.push(Jn(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:t.stateMutability??"nonpayable",inputs:n}}function fL(i){let e=n_(i);if(!e)throw new nn({signature:i,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}function Jn(i,e){let t=c_(i,e?.type,e?.structs);if(Ju.has(t))return Ju.get(t);let r=Nu.test(i),n=lr(r?bL:gL,i);if(!n)throw new ju({param:i});if(n.name&&xL(n.name))throw new Wu({param:i,name:n.name});let s=n.name?{name:n.name}:{},o=n.modifier==="indexed"?{indexed:!0}:{},l=e?.structs??{},c,p={};if(r){c="tuple";let h=Br(n.type),f=[],g=h.length;for(let E=0;E<g;E++)f.push(Jn(h[E],{structs:l}));p={components:f}}else if(n.type in l)c="tuple",p={components:l[n.type]};else if(yL.test(n.type))c=`${n.type}256`;else if(c=n.type,e?.type!=="struct"&&!Nb(c))throw new zu({type:c});if(n.modifier){if(!e?.modifiers?.has?.(n.modifier))throw new Ku({param:i,type:e?.type,modifier:n.modifier});if(Hu.has(n.modifier)&&!vL(c,!!n.array))throw new $u({param:i,type:e?.type,modifier:n.modifier})}let d={type:`${c}${n.array??""}`,...s,...o,...p};return Ju.set(t,d),d}function Br(i,e=[],t="",r=0){let n=i.trim().length;for(let s=0;s<n;s++){let o=i[s],l=i.slice(s+1);switch(o){case",":return r===0?Br(l,[...e,t.trim()]):Br(l,e,`${t}${o}`,r);case"(":return Br(l,e,`${t}${o}`,r+1);case")":return Br(l,e,`${t}${o}`,r-1);default:return Br(l,e,`${t}${o}`,r)}}if(t==="")return e;if(r!==0)throw new Zu({current:t,depth:r});return e.push(t.trim()),e}function Nb(i){return i==="address"||i==="bool"||i==="function"||i==="string"||Db.test(i)||Bb.test(i)}function xL(i){return i==="address"||i==="bool"||i==="function"||i==="string"||i==="tuple"||Db.test(i)||Bb.test(i)||_L.test(i)}function vL(i,e){return e||i==="bytes"||i==="string"||i==="tuple"}var gL,bL,yL,_L,ep=ie(()=>{"use strict";Ol();Gu();Pb();Ob();l_();u_();Nl();gL=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,bL=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,yL=/^u?int$/;_L=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/});function tp(i){let e={},t=i.length;for(let o=0;o<t;o++){let l=i[o];if(!Ba(l))continue;let c=Z0(l);if(!c)throw new nn({signature:l,type:"struct"});let p=c.properties.split(";"),d=[],h=p.length;for(let f=0;f<h;f++){let E=p[f].trim();if(!E)continue;let I=Jn(E,{type:"struct"});d.push(I)}if(!d.length)throw new Xu({signature:l});e[c.name]=d}let r={},n=Object.entries(e),s=n.length;for(let o=0;o<s;o++){let[l,c]=n[o];r[l]=p_(c,e)}return r}function p_(i,e,t=new Set){let r=[],n=i.length;for(let s=0;s<n;s++){let o=i[s];if(Nu.test(o.type))r.push(o);else{let c=lr(wL,o.type);if(!c?.type)throw new qu({abiParameter:o});let{array:p,type:d}=c;if(d in e){if(t.has(d))throw new Qu({type:d});r.push({...o,type:`tuple${p??""}`,components:p_(e[d]??[],e,new Set([...t,d]))})}else if(Nb(d))r.push(o);else throw new Vu({type:d})}}return r}var wL,Fb=ie(()=>{"use strict";Ol();Gu();Pb();Ob();o_();Nl();ep();wL=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/});function ip(i){let e=tp(i),t=[],r=i.length;for(let n=0;n<r;n++){let s=i[n];Ba(s)||t.push(Fl(s,e))}return t}var m_=ie(()=>{"use strict";Nl();Fb();ep()});function rp(i){let e;if(typeof i=="string")e=Fl(i);else{let t=tp(i),r=i.length;for(let n=0;n<r;n++){let s=i[n];if(!Ba(s)){e=Fl(s,t);break}}}if(!e)throw new Uu({signature:i});return e}var d_=ie(()=>{"use strict";Gu();Nl();Fb();ep()});var np=ie(()=>{"use strict";V0();m_();d_()});function ji(i,{includeName:e=!1}={}){if(i.type!=="function"&&i.type!=="event"&&i.type!=="error")throw new sp(i.type);return`${i.name}(${Hl(i.inputs,{includeName:e})})`}function Hl(i,{includeName:e=!1}={}){return i?i.map(t=>IL(t,{includeName:e})).join(e?", ":","):""}function IL(i,{includeName:e}){return i.type.startsWith("tuple")?`(${Hl(i.components,{includeName:e})})${i.type.slice(5)}`:i.type+(e&&i.name?` ${i.name}`:"")}var js=ie(()=>{"use strict";pi()});function ri(i,{strict:e=!0}={}){return!i||typeof i!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(i):i.startsWith("0x")}var Pr=ie(()=>{"use strict"});function It(i){return ri(i,{strict:!1})?Math.ceil((i.length-2)/2):i.length}var Or=ie(()=>{"use strict";Pr()});var Hb,h_=ie(()=>{"use strict";Hb="2.26.2"});function f_(i,e){return e?.(i)?i:i&&typeof i=="object"&&"cause"in i&&i.cause!==void 0?f_(i.cause,e):e?null:i}var Ub,U,lt=ie(()=>{"use strict";h_();Ub={getDocsUrl:({docsBaseUrl:i,docsPath:e="",docsSlug:t})=>e?`${i??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${Hb}`},U=class i extends Error{constructor(e,t={}){let r=(()=>t.cause instanceof i?t.cause.details:t.cause?.message?t.cause.message:t.details)(),n=(()=>t.cause instanceof i&&t.cause.docsPath||t.docsPath)(),s=Ub.getDocsUrl?.({...t,docsPath:n}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...r?[`Details: ${r}`]:[],...Ub.version?[`Version: ${Ub.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=Hb}walk(e){return f_(this,e)}}});var ap,Ul,Pa,br,op,lp,cp,Oa,up,Na,Vl,es,pp,mp,dp,Nr,sn,hp,fp,gp,sp,pi=ie(()=>{"use strict";js();Or();lt();ap=class extends U{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}},Ul=class extends U{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}},Pa=class extends U{constructor({data:e,params:t,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Hl(t,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=r}},br=class extends U{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}},op=class extends U{constructor({expectedLength:e,givenLength:t,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${t}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}},lp=class extends U{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${It(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}},cp=class extends U{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}},Oa=class extends U{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}},up=class extends U{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}},Na=class extends U{constructor(e,{docsPath:t}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:t,name:"AbiEventSignatureNotFoundError"})}},Vl=class extends U{constructor(e,{docsPath:t}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:t,name:"AbiEventNotFoundError"})}},es=class extends U{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionNotFoundError"})}},pp=class extends U{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}},mp=class extends U{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${ji(e.abiItem)}\`, and`,`\`${t.type}\` in \`${ji(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}},dp=class extends U{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}},Nr=class extends U{constructor({abiItem:e,data:t,params:r,size:n}){super([`Data size of ${n} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Hl(r,{includeName:!0})})`,`Data:   ${t} (${n} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=t,this.params=r,this.size=n}},sn=class extends U{constructor({abiItem:e,param:t}){super([`Expected a topic for indexed event parameter${t.name?` "${t.name}"`:""} on event "${ji(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}},hp=class extends U{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiEncodingType"})}},fp=class extends U{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:t,name:"InvalidAbiDecodingType"})}},gp=class extends U{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}},sp=class extends U{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}});var zl,Gl,jl,yp=ie(()=>{"use strict";lt();zl=class extends U{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},Gl=class extends U{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}},jl=class extends U{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${t} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}});function ts(i,{dir:e,size:t=32}={}){return typeof i=="string"?Dn(i,{dir:e,size:t}):EL(i,{dir:e,size:t})}function Dn(i,{dir:e,size:t=32}={}){if(t===null)return i;let r=i.replace("0x","");if(r.length>t*2)throw new Gl({size:Math.ceil(r.length/2),targetSize:t,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function EL(i,{dir:e,size:t=32}={}){if(t===null)return i;if(i.length>t)throw new Gl({size:i.length,targetSize:t,type:"bytes"});let r=new Uint8Array(t);for(let n=0;n<t;n++){let s=e==="right";r[s?n:t-n-1]=i[s?n:i.length-n-1]}return r}var _p=ie(()=>{"use strict";yp()});var Fa,xp,vp,wp,Wl=ie(()=>{"use strict";lt();Fa=class extends U{constructor({max:e,min:t,signed:r,size:n,value:s}){super(`Number "${s}" is not in safe ${n?`${n*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},xp=class extends U{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}},vp=class extends U{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}},wp=class extends U{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}});function Di(i,{dir:e="left"}={}){let t=typeof i=="string"?i.replace("0x",""):i,r=0;for(let n=0;n<t.length-1&&t[e==="left"?n:t.length-n-1].toString()==="0";n++)r++;return t=e==="left"?t.slice(r):t.slice(0,t.length-r),typeof i=="string"?(t.length===1&&e==="right"&&(t=`${t}0`),`0x${t.length%2===1?`0${t}`:t}`):t}var Ha=ie(()=>{"use strict"});function er(i,{size:e}){if(It(i)>e)throw new wp({givenSize:It(i),maxSize:e})}function Wt(i,e={}){let{signed:t}=e;e.size&&er(i,{size:e.size});let r=BigInt(i);if(!t)return r;let n=(i.length-2)/2,s=(1n<<BigInt(n)*8n-1n)-1n;return r<=s?r:r-BigInt(`0x${"f".padStart(n*2,"f")}`)-1n}function Vb(i,e={}){let t=i;if(e.size&&(er(t,{size:e.size}),t=Di(t)),Di(t)==="0x00")return!1;if(Di(t)==="0x01")return!0;throw new vp(t)}function oi(i,e={}){return Number(Wt(i,e))}var Bi=ie(()=>{"use strict";Wl();Or();Ha()});function Me(i,e={}){return typeof i=="number"||typeof i=="bigint"?Ie(i,e):typeof i=="string"?Fr(i,e):typeof i=="boolean"?Lp(i,e):xt(i,e)}function Lp(i,e={}){let t=`0x${Number(i)}`;return typeof e.size=="number"?(er(t,{size:e.size}),ts(t,{size:e.size})):t}function xt(i,e={}){let t="";for(let n=0;n<i.length;n++)t+=SL[i[n]];let r=`0x${t}`;return typeof e.size=="number"?(er(r,{size:e.size}),ts(r,{dir:"right",size:e.size})):r}function Ie(i,e={}){let{signed:t,size:r}=e,n=BigInt(i),s;r?t?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof i=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));let o=typeof s=="bigint"&&t?-s-1n:0;if(s&&n>s||n<o){let c=typeof i=="bigint"?"n":"";throw new Fa({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:t,size:r,value:`${i}${c}`})}let l=`0x${(t&&n<0?(1n<<BigInt(r*8))+BigInt(n):n).toString(16)}`;return r?ts(l,{size:r}):l}function Fr(i,e={}){let t=TL.encode(i);return xt(t,e)}var SL,TL,Ve=ie(()=>{"use strict";Wl();_p();Bi();SL=Array.from({length:256},(i,e)=>e.toString(16).padStart(2,"0"));TL=new TextEncoder});function yr(i,e={}){return typeof i=="number"||typeof i=="bigint"?CL(i,e):typeof i=="boolean"?AL(i,e):ri(i)?mi(i,e):Hr(i,e)}function AL(i,e={}){let t=new Uint8Array(1);return t[0]=Number(i),typeof e.size=="number"?(er(t,{size:e.size}),ts(t,{size:e.size})):t}function g_(i){if(i>=Bn.zero&&i<=Bn.nine)return i-Bn.zero;if(i>=Bn.A&&i<=Bn.F)return i-(Bn.A-10);if(i>=Bn.a&&i<=Bn.f)return i-(Bn.a-10)}function mi(i,e={}){let t=i;e.size&&(er(t,{size:e.size}),t=ts(t,{dir:"right",size:e.size}));let r=t.slice(2);r.length%2&&(r=`0${r}`);let n=r.length/2,s=new Uint8Array(n);for(let o=0,l=0;o<n;o++){let c=g_(r.charCodeAt(l++)),p=g_(r.charCodeAt(l++));if(c===void 0||p===void 0)throw new U(`Invalid byte sequence ("${r[l-2]}${r[l-1]}" in "${r}").`);s[o]=c*16+p}return s}function CL(i,e){let t=Ie(i,e);return mi(t)}function Hr(i,e={}){let t=kL.encode(i);return typeof e.size=="number"?(er(t,{size:e.size}),ts(t,{dir:"right",size:e.size})):t}var kL,Bn,Ii=ie(()=>{"use strict";lt();Pr();_p();Bi();Ve();kL=new TextEncoder;Bn={zero:48,nine:57,A:65,F:70,a:97,f:102}});function Kl(i){if(!Number.isSafeInteger(i)||i<0)throw new Error("positive integer expected, got "+i)}function RL(i){return i instanceof Uint8Array||ArrayBuffer.isView(i)&&i.constructor.name==="Uint8Array"}function is(i,...e){if(!RL(i))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(i.length))throw new Error("Uint8Array expected of length "+e+", got length="+i.length)}function b_(i){if(typeof i!="function"||typeof i.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Kl(i.outputLen),Kl(i.blockLen)}function Pn(i,e=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(e&&i.finished)throw new Error("Hash#digest() has already been called")}function Ip(i,e){is(i);let t=e.outputLen;if(i.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}var $l=ie(()=>{"use strict"});function ML(i,e=!1){return e?{h:Number(i&Ep),l:Number(i>>y_&Ep)}:{h:Number(i>>y_&Ep)|0,l:Number(i&Ep)|0}}function __(i,e=!1){let t=new Uint32Array(i.length),r=new Uint32Array(i.length);for(let n=0;n<i.length;n++){let{h:s,l:o}=ML(i[n],e);[t[n],r[n]]=[s,o]}return[t,r]}var Ep,y_,x_,v_,w_,L_,I_=ie(()=>{"use strict";Ep=BigInt(4294967295),y_=BigInt(32);x_=(i,e,t)=>i<<t|e>>>32-t,v_=(i,e,t)=>e<<t|i>>>32-t,w_=(i,e,t)=>e<<t-32|i>>>64-t,L_=(i,e,t)=>i<<t-32|e>>>64-t});var Ws,E_=ie(()=>{"use strict";Ws=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function S_(i){return new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4))}function Sp(i){return new DataView(i.buffer,i.byteOffset,i.byteLength)}function Ur(i,e){return i<<32-e|i>>>e}function DL(i){return i<<24&4278190080|i<<8&16711680|i>>>8&65280|i>>>24&255}function Gb(i){for(let e=0;e<i.length;e++)i[e]=DL(i[e])}function BL(i){if(typeof i!="string")throw new Error("utf8ToBytes expected string, got "+typeof i);return new Uint8Array(new TextEncoder().encode(i))}function ns(i){return typeof i=="string"&&(i=BL(i)),is(i),i}function T_(...i){let e=0;for(let r=0;r<i.length;r++){let n=i[r];is(n),e+=n.length}let t=new Uint8Array(e);for(let r=0,n=0;r<i.length;r++){let s=i[r];t.set(s,n),n+=s.length}return t}function Tp(i){let e=r=>i().update(ns(r)).digest(),t=i();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>i(),e}function k_(i){let e=(r,n)=>i(n).update(ns(r)).digest(),t=i({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>i(r),e}function kp(i=32){if(Ws&&typeof Ws.getRandomValues=="function")return Ws.getRandomValues(new Uint8Array(i));if(Ws&&typeof Ws.randomBytes=="function")return Ws.randomBytes(i);throw new Error("crypto.getRandomValues must be defined")}var zb,rs,Ks=ie(()=>{"use strict";E_();$l();zb=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();rs=class{clone(){return this._cloneInto()}}});function zL(i,e=24){let t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=i[o]^i[o+10]^i[o+20]^i[o+30]^i[o+40];for(let o=0;o<10;o+=2){let l=(o+8)%10,c=(o+2)%10,p=t[c],d=t[c+1],h=A_(p,d,1)^t[l],f=C_(p,d,1)^t[l+1];for(let g=0;g<50;g+=10)i[o+g]^=h,i[o+g+1]^=f}let n=i[2],s=i[3];for(let o=0;o<24;o++){let l=M_[o],c=A_(n,s,l),p=C_(n,s,l),d=R_[o];n=i[d],s=i[d+1],i[d]=c,i[d+1]=p}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=i[o+l];for(let l=0;l<10;l++)i[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}i[0]^=UL[r],i[1]^=VL[r]}t.fill(0)}var R_,M_,D_,PL,ql,OL,NL,FL,HL,UL,VL,A_,C_,Ap,ss,BR,PR,OR,NR,FR,Cp,HR,UR,B_,VR,zR,jb=ie(()=>{"use strict";$l();I_();Ks();R_=[],M_=[],D_=[],PL=BigInt(0),ql=BigInt(1),OL=BigInt(2),NL=BigInt(7),FL=BigInt(256),HL=BigInt(113);for(let i=0,e=ql,t=1,r=0;i<24;i++){[t,r]=[r,(2*t+3*r)%5],R_.push(2*(5*r+t)),M_.push((i+1)*(i+2)/2%64);let n=PL;for(let s=0;s<7;s++)e=(e<<ql^(e>>NL)*HL)%FL,e&OL&&(n^=ql<<(ql<<BigInt(s))-ql);D_.push(n)}[UL,VL]=__(D_,!0),A_=(i,e,t)=>t>32?w_(i,e,t):x_(i,e,t),C_=(i,e,t)=>t>32?L_(i,e,t):v_(i,e,t);Ap=class i extends rs{constructor(e,t,r,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Kl(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=S_(this.state)}keccak(){zb||Gb(this.state32),zL(this.state32,this.rounds),zb||Gb(this.state32),this.posOut=0,this.pos=0}update(e){Pn(this);let{blockLen:t,state:r}=this;e=ns(e);let n=e.length;for(let s=0;s<n;){let o=Math.min(t-this.pos,n-s);for(let l=0;l<o;l++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,t&128&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){Pn(this,!1),is(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,s=e.length;n<s;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,s-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Kl(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Ip(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:s,enableXOF:o}=this;return e||(e=new i(t,r,n,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}},ss=(i,e,t)=>Tp(()=>new Ap(e,i,t)),BR=ss(6,144,224/8),PR=ss(6,136,256/8),OR=ss(6,104,384/8),NR=ss(6,72,512/8),FR=ss(1,144,224/8),Cp=ss(1,136,256/8),HR=ss(1,104,384/8),UR=ss(1,72,512/8),B_=(i,e,t)=>k_((r={})=>new Ap(e,i,r.dkLen===void 0?t:r.dkLen,!0)),VR=B_(31,168,128/8),zR=B_(31,136,256/8)});function Ht(i,e){let t=e||"hex",r=Cp(ri(i,{strict:!1})?yr(i):i);return t==="bytes"?r:Me(r)}var Vr=ie(()=>{"use strict";jb();Pr();Ii();Ve()});function P_(i){return GL(i)}var GL,O_=ie(()=>{"use strict";Ii();Vr();GL=i=>Ht(yr(i))});function N_(i){let e=!0,t="",r=0,n="",s=!1;for(let o=0;o<i.length;o++){let l=i[o];if(["(",")",","].includes(l)&&(e=!0),l==="("&&r++,l===")"&&r--,!!e){if(r===0){if(l===" "&&["event","function",""].includes(n))n="";else if(n+=l,l===")"){s=!0;break}continue}if(l===" "){i[o-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}n+=l,t+=l}}if(!s)throw new U("Unable to normalize signature.");return n}var F_=ie(()=>{"use strict";lt()});var H_,U_=ie(()=>{"use strict";np();F_();H_=i=>{let e=(()=>typeof i=="string"?i:Gs(i))();return N_(e)}});function Rp(i){return P_(H_(i))}var Wb=ie(()=>{"use strict";O_();U_()});var as,Yl=ie(()=>{"use strict";Wb();as=Rp});var zt,an=ie(()=>{"use strict";lt();zt=class extends U{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}});var on,Xl=ie(()=>{"use strict";on=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let r=this.keys().next().value;r&&this.delete(r)}return this}}});function On(i,e){if(Kb.has(`${i}.${e}`))return Kb.get(`${i}.${e}`);let t=e?`${e}${i.toLowerCase()}`:i.substring(2).toLowerCase(),r=Ht(Hr(t),"bytes"),n=(e?t.substring(`${e}0x`.length):t).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&n[o]&&(n[o]=n[o].toUpperCase()),(r[o>>1]&15)>=8&&n[o+1]&&(n[o+1]=n[o+1].toUpperCase());let s=`0x${n.join("")}`;return Kb.set(`${i}.${e}`,s),s}function Mp(i,e){if(!Nt(i,{strict:!1}))throw new zt({address:i});return On(i,e)}var Kb,$s=ie(()=>{"use strict";an();Ii();Vr();Xl();zr();Kb=new on(8192)});function Nt(i,e){let{strict:t=!0}=e??{},r=`${i}.${t}`;if($b.has(r))return $b.get(r);let n=(()=>jL.test(i)?i.toLowerCase()===i?!0:t?On(i)===i:!0:!1)();return $b.set(r,n),n}var jL,$b,zr=ie(()=>{"use strict";Xl();$s();jL=/^0x[a-fA-F0-9]{40}$/,$b=new on(8192)});function Wi(i){return typeof i[0]=="string"?Pi(i):WL(i)}function WL(i){let e=0;for(let n of i)e+=n.length;let t=new Uint8Array(e),r=0;for(let n of i)t.set(n,r),r+=n.length;return t}function Pi(i){return`0x${i.reduce((e,t)=>e+t.replace("0x",""),"")}`}var _r=ie(()=>{"use strict"});function Nn(i,e,t,{strict:r}={}){return ri(i,{strict:!1})?Yb(i,e,t,{strict:r}):qb(i,e,t,{strict:r})}function V_(i,e){if(typeof e=="number"&&e>0&&e>It(i)-1)throw new zl({offset:e,position:"start",size:It(i)})}function z_(i,e,t){if(typeof e=="number"&&typeof t=="number"&&It(i)!==t-e)throw new zl({offset:t,position:"end",size:It(i)})}function qb(i,e,t,{strict:r}={}){V_(i,e);let n=i.slice(e,t);return r&&z_(n,e,t),n}function Yb(i,e,t,{strict:r}={}){V_(i,e);let n=`0x${i.replace("0x","").slice((e??0)*2,(t??i.length)*2)}`;return r&&z_(n,e,t),n}var qs=ie(()=>{"use strict";yp();Pr();Or()});var G_,Dp,Xb=ie(()=>{"use strict";G_=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Dp=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/});function cr(i,e){if(i.length!==e.length)throw new cp({expectedLength:i.length,givenLength:e.length});let t=KL({params:i,values:e}),r=Zb(t);return r.length===0?"0x":r}function KL({params:i,values:e}){let t=[];for(let r=0;r<i.length;r++)t.push(Qb({param:i[r],value:e[r]}));return t}function Qb({param:i,value:e}){let t=Bp(i.type);if(t){let[r,n]=t;return qL(e,{length:r,param:{...i,type:n}})}if(i.type==="tuple")return JL(e,{param:i});if(i.type==="address")return $L(e);if(i.type==="bool")return XL(e);if(i.type.startsWith("uint")||i.type.startsWith("int")){let r=i.type.startsWith("int"),[,,n="256"]=Dp.exec(i.type)??[];return QL(e,{signed:r,size:Number(n)})}if(i.type.startsWith("bytes"))return YL(e,{param:i});if(i.type==="string")return ZL(e);throw new hp(i.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Zb(i){let e=0;for(let s=0;s<i.length;s++){let{dynamic:o,encoded:l}=i[s];o?e+=32:e+=It(l)}let t=[],r=[],n=0;for(let s=0;s<i.length;s++){let{dynamic:o,encoded:l}=i[s];o?(t.push(Ie(e+n,{size:32})),r.push(l),n+=It(l)):t.push(l)}return Wi([...t,...r])}function $L(i){if(!Nt(i))throw new zt({address:i});return{dynamic:!1,encoded:Dn(i.toLowerCase())}}function qL(i,{length:e,param:t}){let r=e===null;if(!Array.isArray(i))throw new gp(i);if(!r&&i.length!==e)throw new op({expectedLength:e,givenLength:i.length,type:`${t.type}[${e}]`});let n=!1,s=[];for(let o=0;o<i.length;o++){let l=Qb({param:t,value:i[o]});l.dynamic&&(n=!0),s.push(l)}if(r||n){let o=Zb(s);if(r){let l=Ie(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?Wi([l,o]):l}}if(n)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Wi(s.map(({encoded:o})=>o))}}function YL(i,{param:e}){let[,t]=e.type.split("bytes"),r=It(i);if(!t){let n=i;return r%32!==0&&(n=Dn(n,{dir:"right",size:Math.ceil((i.length-2)/2/32)*32})),{dynamic:!0,encoded:Wi([Dn(Ie(r,{size:32})),n])}}if(r!==Number.parseInt(t))throw new lp({expectedSize:Number.parseInt(t),value:i});return{dynamic:!1,encoded:Dn(i,{dir:"right"})}}function XL(i){if(typeof i!="boolean")throw new U(`Invalid boolean value: "${i}" (type: ${typeof i}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Dn(Lp(i))}}function QL(i,{signed:e,size:t=256}){if(typeof t=="number"){let r=2n**(BigInt(t)-(e?1n:0n))-1n,n=e?-r-1n:0n;if(i>r||i<n)throw new Fa({max:r.toString(),min:n.toString(),signed:e,size:t/8,value:i.toString()})}return{dynamic:!1,encoded:Ie(i,{size:32,signed:e})}}function ZL(i){let e=Fr(i),t=Math.ceil(It(e)/32),r=[];for(let n=0;n<t;n++)r.push(Dn(Nn(e,n*32,(n+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Wi([Dn(Ie(It(e),{size:32})),...r])}}function JL(i,{param:e}){let t=!1,r=[];for(let n=0;n<e.components.length;n++){let s=e.components[n],o=Array.isArray(i)?n:s.name,l=Qb({param:s,value:i[o]});r.push(l),l.dynamic&&(t=!0)}return{dynamic:t,encoded:t?Zb(r):Wi(r.map(({encoded:n})=>n))}}function Bp(i){let e=i.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}var os=ie(()=>{"use strict";pi();an();lt();Wl();zr();_r();_p();Or();qs();Ve();Xb()});var Ua,Pp=ie(()=>{"use strict";qs();Wb();Ua=i=>Nn(Rp(i),0,4)});function ln(i){let{abi:e,args:t=[],name:r}=i,n=ri(r,{strict:!1}),s=e.filter(l=>n?l.type==="function"?Ua(l)===r:l.type==="event"?as(l)===r:!1:"name"in l&&l.name===r);if(s.length===0)return;if(s.length===1)return s[0];let o;for(let l of s){if(!("inputs"in l))continue;if(!t||t.length===0){if(!l.inputs||l.inputs.length===0)return l;continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==t.length)continue;if(t.every((p,d)=>{let h="inputs"in l&&l.inputs[d];return h?Jb(p,h):!1})){if(o&&"inputs"in o&&o.inputs){let p=j_(l.inputs,o.inputs,t);if(p)throw new mp({abiItem:l,type:p[0]},{abiItem:o,type:p[1]})}o=l}}return o||s[0]}function Jb(i,e){let t=typeof i,r=e.type;switch(r){case"address":return Nt(i,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((n,s)=>Jb(Object.values(i)[s],n)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?t==="string"||i instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(i)&&i.every(n=>Jb(n,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function j_(i,e,t){for(let r in i){let n=i[r],s=e[r];if(n.type==="tuple"&&s.type==="tuple"&&"components"in n&&"components"in s)return j_(n.components,s.components,t[r]);let o=[n.type,s.type];if((()=>o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Nt(t[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Nt(t[r],{strict:!1}):!1)())return o}}var Va=ie(()=>{"use strict";pi();Pr();zr();Yl();Pp()});function ht(i){return typeof i=="string"?{address:i,type:"json-rpc"}:i}var di=ie(()=>{"use strict"});function q_(i){let{abi:e,args:t,functionName:r}=i,n=e[0];if(r){let s=ln({abi:e,args:t,name:r});if(!s)throw new es(r,{docsPath:$_});n=s}if(n.type!=="function")throw new es(void 0,{docsPath:$_});return{abi:[n],functionName:Ua(ji(n))}}var $_,Y_=ie(()=>{"use strict";pi();Pp();js();Va();$_="/docs/contract/encodeFunctionData"});function Kt(i){let{args:e}=i,{abi:t,functionName:r}=(()=>i.abi.length===1&&i.functionName?.startsWith("0x")?i:q_(i))(),n=t[0],s=r,o="inputs"in n&&n.inputs?cr(n.inputs,e??[]):void 0;return Pi([s,o??"0x"])}var xr=ie(()=>{"use strict";_r();os();Y_()});var Np,X_,Q_,Fp=ie(()=>{"use strict";Np={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},X_={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Q_={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}});var Ql,za,Hp,ey=ie(()=>{"use strict";lt();Ql=class extends U{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}},za=class extends U{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}},Hp=class extends U{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}});function Ga(i,{recursiveReadLimit:e=8192}={}){let t=Object.create(eI);return t.bytes=i,t.dataView=new DataView(i.buffer,i.byteOffset,i.byteLength),t.positionReadCount=new Map,t.recursiveReadLimit=e,t}var eI,Up=ie(()=>{"use strict";ey();eI={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Hp({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(i){if(i<0||i>this.bytes.length-1)throw new za({length:this.bytes.length,position:i})},decrementPosition(i){if(i<0)throw new Ql({offset:i});let e=this.position-i;this.assertPosition(e),this.position=e},getReadCount(i){return this.positionReadCount.get(i||this.position)||0},incrementPosition(i){if(i<0)throw new Ql({offset:i});let e=this.position+i;this.assertPosition(e),this.position=e},inspectByte(i){let e=i??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(i,e){let t=e??this.position;return this.assertPosition(t+i-1),this.bytes.subarray(t,t+i)},inspectUint8(i){let e=i??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(i){let e=i??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(i){let e=i??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(i){let e=i??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(i){this.assertPosition(this.position),this.bytes[this.position]=i,this.position++},pushBytes(i){this.assertPosition(this.position+i.length-1),this.bytes.set(i,this.position),this.position+=i.length},pushUint8(i){this.assertPosition(this.position),this.bytes[this.position]=i,this.position++},pushUint16(i){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,i),this.position+=2},pushUint24(i){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,i>>8),this.dataView.setUint8(this.position+2,i&255),this.position+=3},pushUint32(i){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,i),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let i=this.inspectByte();return this.position++,i},readBytes(i,e){this.assertReadLimit(),this._touch();let t=this.inspectBytes(i);return this.position+=e??i,t},readUint8(){this.assertReadLimit(),this._touch();let i=this.inspectUint8();return this.position+=1,i},readUint16(){this.assertReadLimit(),this._touch();let i=this.inspectUint16();return this.position+=2,i},readUint24(){this.assertReadLimit(),this._touch();let i=this.inspectUint24();return this.position+=3,i},readUint32(){this.assertReadLimit(),this._touch();let i=this.inspectUint32();return this.position+=4,i},get remaining(){return this.bytes.length-this.position},setPosition(i){let e=this.position;return this.assertPosition(i),this.position=i,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let i=this.getReadCount();this.positionReadCount.set(this.position,i+1),i>0&&this.recursiveReadCount++}}});function Z_(i,e={}){typeof e.size<"u"&&er(i,{size:e.size});let t=xt(i,e);return Wt(t,e)}function J_(i,e={}){let t=i;if(typeof e.size<"u"&&(er(t,{size:e.size}),t=Di(t)),t.length>1||t[0]>1)throw new xp(t);return!!t[0]}function un(i,e={}){typeof e.size<"u"&&er(i,{size:e.size});let t=xt(i,e);return oi(t,e)}function e1(i,e={}){let t=i;return typeof e.size<"u"&&(er(t,{size:e.size}),t=Di(t,{dir:"right"})),new TextDecoder().decode(t)}var t1=ie(()=>{"use strict";Wl();Ha();Bi();Ve()});function Ys(i,e){let t=typeof e=="string"?mi(e):e,r=Ga(t);if(It(t)===0&&i.length>0)throw new br;if(It(e)&&It(e)<32)throw new Pa({data:typeof e=="string"?e:xt(e),params:i,size:It(e)});let n=0,s=[];for(let o=0;o<i.length;++o){let l=i[o];r.setPosition(n);let[c,p]=ja(r,l,{staticPosition:0});n+=p,s.push(c)}return s}function ja(i,e,{staticPosition:t}){let r=Bp(e.type);if(r){let[n,s]=r;return iI(i,{...e,type:s},{length:n,staticPosition:t})}if(e.type==="tuple")return aI(i,e,{staticPosition:t});if(e.type==="address")return tI(i);if(e.type==="bool")return rI(i);if(e.type.startsWith("bytes"))return nI(i,e,{staticPosition:t});if(e.type.startsWith("uint")||e.type.startsWith("int"))return sI(i,e);if(e.type==="string")return oI(i,{staticPosition:t});throw new fp(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function tI(i){let e=i.readBytes(32);return[On(xt(qb(e,-20))),32]}function iI(i,e,{length:t,staticPosition:r}){if(!t){let o=un(i.readBytes(ty)),l=r+o,c=l+i1;i.setPosition(l);let p=un(i.readBytes(i1)),d=Zl(e),h=0,f=[];for(let g=0;g<p;++g){i.setPosition(c+(d?g*32:h));let[E,I]=ja(i,e,{staticPosition:c});h+=I,f.push(E)}return i.setPosition(r+32),[f,32]}if(Zl(e)){let o=un(i.readBytes(ty)),l=r+o,c=[];for(let p=0;p<t;++p){i.setPosition(l+p*32);let[d]=ja(i,e,{staticPosition:l});c.push(d)}return i.setPosition(r+32),[c,32]}let n=0,s=[];for(let o=0;o<t;++o){let[l,c]=ja(i,e,{staticPosition:r+n});n+=c,s.push(l)}return[s,n]}function rI(i){return[J_(i.readBytes(32),{size:32}),32]}function nI(i,e,{staticPosition:t}){let[r,n]=e.type.split("bytes");if(!n){let o=un(i.readBytes(32));i.setPosition(t+o);let l=un(i.readBytes(32));if(l===0)return i.setPosition(t+32),["0x",32];let c=i.readBytes(l);return i.setPosition(t+32),[xt(c),32]}return[xt(i.readBytes(Number.parseInt(n),32)),32]}function sI(i,e){let t=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),n=i.readBytes(32);return[r>48?Z_(n,{signed:t}):un(n,{signed:t}),32]}function aI(i,e,{staticPosition:t}){let r=e.components.length===0||e.components.some(({name:o})=>!o),n=r?[]:{},s=0;if(Zl(e)){let o=un(i.readBytes(ty)),l=t+o;for(let c=0;c<e.components.length;++c){let p=e.components[c];i.setPosition(l+s);let[d,h]=ja(i,p,{staticPosition:l});s+=h,n[r?c:p?.name]=d}return i.setPosition(t+32),[n,32]}for(let o=0;o<e.components.length;++o){let l=e.components[o],[c,p]=ja(i,l,{staticPosition:t});n[r?o:l?.name]=c,s+=p}return[n,s]}function oI(i,{staticPosition:e}){let t=un(i.readBytes(32)),r=e+t;i.setPosition(r);let n=un(i.readBytes(32));if(n===0)return i.setPosition(e+32),["",32];let s=i.readBytes(n,32),o=e1(Di(s));return i.setPosition(e+32),[o,32]}function Zl(i){let{type:e}=i;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return i.components?.some(Zl);let t=Bp(i.type);return!!(t&&Zl({...i,type:t[1]}))}var i1,ty,Vp=ie(()=>{"use strict";pi();$s();Up();Or();qs();Ha();t1();Ii();Ve();os();i1=32,ty=32});function zp(i){let{abi:e,data:t}=i,r=Nn(t,0,4);if(r==="0x")throw new br;let s=[...e||[],X_,Q_].find(o=>o.type==="error"&&r===Ua(ji(o)));if(!s)throw new Oa(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Ys(s.inputs,Nn(t,4)):void 0,errorName:s.name}}var iy=ie(()=>{"use strict";Fp();pi();qs();Pp();Vp();js()});var vt,Ki=ie(()=>{"use strict";vt=(i,e,t)=>JSON.stringify(i,(r,n)=>{let s=typeof n=="bigint"?n.toString():n;return typeof e=="function"?e(r,s):s},t)});function ry({abiItem:i,args:e,includeFunctionName:t=!0,includeName:r=!1}){if("name"in i&&"inputs"in i&&i.inputs)return`${t?i.name:""}(${i.inputs.map((n,s)=>`${r&&n.name?`${n.name}: `:""}${typeof e[s]=="object"?vt(e[s]):e[s]}`).join(", ")})`}var r1=ie(()=>{"use strict";Ki()});var Gp,n1,jp=ie(()=>{"use strict";Gp={gwei:9,wei:18},n1={ether:-9,wei:9}});function Gr(i,e){let t=i.toString(),r=t.startsWith("-");r&&(t=t.slice(1)),t=t.padStart(e,"0");let[n,s]=[t.slice(0,t.length-e),t.slice(t.length-e)];return s=s.replace(/(0+)$/,""),`${r?"-":""}${n||"0"}${s?`.${s}`:""}`}var Wp=ie(()=>{"use strict"});function Wa(i,e="wei"){return Gr(i,Gp[e])}var Kp=ie(()=>{"use strict";jp();Wp()});function hi(i,e="wei"){return Gr(i,n1[e])}var Ka=ie(()=>{"use strict";jp();Wp()});function s1(i){return i.reduce((e,{slot:t,value:r})=>`${e}        ${t}: ${r}
`,"")}function a1(i){return i.reduce((e,{address:t,...r})=>{let n=`${e}    ${t}:
`;return r.nonce&&(n+=`      nonce: ${r.nonce}
`),r.balance&&(n+=`      balance: ${r.balance}
`),r.code&&(n+=`      code: ${r.code}
`),r.state&&(n+=`      state:
`,n+=s1(r.state)),r.stateDiff&&(n+=`      stateDiff:
`,n+=s1(r.stateDiff)),n},`  State Override:
`).slice(0,-1)}var $p,qp,ny=ie(()=>{"use strict";lt();$p=class extends U{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}},qp=class extends U{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}});function Xs(i){let e=Object.entries(i).map(([r,n])=>n===void 0||n===!1?null:[r,n]).filter(Boolean),t=e.reduce((r,[n])=>Math.max(r,n.length),0);return e.map(([r,n])=>`  ${`${r}:`.padEnd(t+1)}  ${n}`).join(`
`)}var Yp,Xp,Qp,Zp,Jp,$a,qa,em,jr=ie(()=>{"use strict";Kp();Ka();lt();Yp=class extends U{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}},Xp=class extends U{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}},Qp=class extends U{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Xs(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}},Zp=class extends U{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}},Jp=class extends U{constructor(e,{account:t,docsPath:r,chain:n,data:s,gas:o,gasPrice:l,maxFeePerGas:c,maxPriorityFeePerGas:p,nonce:d,to:h,value:f}){let g=Xs({chain:n&&`${n?.name} (id: ${n?.id})`,from:t?.address,to:h,value:typeof f<"u"&&`${Wa(f)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:o,gasPrice:typeof l<"u"&&`${hi(l)} gwei`,maxFeePerGas:typeof c<"u"&&`${hi(c)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${hi(p)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",g].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}},$a=class extends U{constructor({blockHash:e,blockNumber:t,blockTag:r,hash:n,index:s}){let o="Transaction";r&&s!==void 0&&(o=`Transaction at block time "${r}" at index "${s}"`),e&&s!==void 0&&(o=`Transaction at block hash "${e}" at index "${s}"`),t&&s!==void 0&&(o=`Transaction at block number "${t}" at index "${s}"`),n&&(o=`Transaction with hash "${n}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}},qa=class extends U{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}},em=class extends U{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}});var o1,Qs,tm=ie(()=>{"use strict";o1=i=>i,Qs=i=>i});var Zs,Jl,Oi,ec,tc,Wr,Fn=ie(()=>{"use strict";di();Fp();iy();js();r1();Va();Kp();Ka();pi();lt();ny();jr();tm();Zs=class extends U{constructor(e,{account:t,docsPath:r,chain:n,data:s,gas:o,gasPrice:l,maxFeePerGas:c,maxPriorityFeePerGas:p,nonce:d,to:h,value:f,stateOverride:g}){let E=t?ht(t):void 0,I=Xs({from:E?.address,to:h,value:typeof f<"u"&&`${Wa(f)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:o,gasPrice:typeof l<"u"&&`${hi(l)} gwei`,maxFeePerGas:typeof c<"u"&&`${hi(c)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${hi(p)} gwei`,nonce:d});g&&(I+=`
${a1(g)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",I].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}},Jl=class extends U{constructor(e,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:o,sender:l}){let c=ln({abi:t,args:r,name:o}),p=c?ry({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,d=c?ji(c,{includeName:!0}):void 0,h=Xs({address:n&&o1(n),function:d,args:p&&p!=="()"&&`${[...Array(o?.length??0).keys()].map(()=>" ").join("")}${p}`,sender:l});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],h&&"Contract Call:",h].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=r,this.cause=e,this.contractAddress=n,this.functionName=o,this.sender=l}},Oi=class extends U{constructor({abi:e,data:t,functionName:r,message:n}){let s,o,l,c;if(t&&t!=="0x")try{o=zp({abi:e,data:t});let{abiItem:d,errorName:h,args:f}=o;if(h==="Error")c=f[0];else if(h==="Panic"){let[g]=f;c=Np[g]}else{let g=d?ji(d,{includeName:!0}):void 0,E=d&&f?ry({abiItem:d,args:f,includeFunctionName:!1,includeName:!1}):void 0;l=[g?`Error: ${g}`:"",E&&E!=="()"?`       ${[...Array(h?.length??0).keys()].map(()=>" ").join("")}${E}`:""]}}catch(d){s=d}else n&&(c=n);let p;s instanceof Oa&&(p=s.signature,l=[`Unable to decode signature "${p}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${p}.`]),super(c&&c!=="execution reverted"||p?[`The contract function "${r}" reverted with the following ${p?"signature":"reason"}:`,c||p].join(`
`):`The contract function "${r}" reverted.`,{cause:s,metaMessages:l,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=t,this.reason=c,this.signature=p}},ec=class extends U{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}},tc=class extends U{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}},Wr=class extends U{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}});var vr,cs,ic,Js=ie(()=>{"use strict";Ki();lt();tm();vr=class extends U{constructor({body:e,cause:t,details:r,headers:n,status:s,url:o}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[s&&`Status: ${s}`,`URL: ${Qs(o)}`,e&&`Request body: ${vt(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=n,this.status=s,this.url=o}},cs=class extends U{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${Qs(r)}`,`Request body: ${vt(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}},ic=class extends U{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Qs(t)}`,`Request body: ${vt(e)}`],name:"TimeoutError"})}}});var lI,Ni,us,Ya,Xa,Qa,Za,Hn,pn,Ja,eo,to,ps,ea,io,ta,ro,no,so,ao,oo,im,rc=ie(()=>{"use strict";lt();Js();lI=-1,Ni=class extends U{constructor(e,{code:t,docsPath:r,metaMessages:n,name:s,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:n||e?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof cs?e.code:t??lI}},us=class extends Ni{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}},Ya=class i extends Ni{constructor(e){super(e,{code:i.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}};Object.defineProperty(Ya,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});Xa=class i extends Ni{constructor(e){super(e,{code:i.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}};Object.defineProperty(Xa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});Qa=class i extends Ni{constructor(e,{method:t}={}){super(e,{code:i.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}};Object.defineProperty(Qa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});Za=class i extends Ni{constructor(e){super(e,{code:i.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(Za,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});Hn=class i extends Ni{constructor(e){super(e,{code:i.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}};Object.defineProperty(Hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});pn=class i extends Ni{constructor(e){super(e,{code:i.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});Ja=class i extends Ni{constructor(e){super(e,{code:i.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}};Object.defineProperty(Ja,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});eo=class i extends Ni{constructor(e){super(e,{code:i.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}};Object.defineProperty(eo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});to=class i extends Ni{constructor(e){super(e,{code:i.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}};Object.defineProperty(to,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});ps=class i extends Ni{constructor(e,{method:t}={}){super(e,{code:i.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}};Object.defineProperty(ps,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});ea=class i extends Ni{constructor(e){super(e,{code:i.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}};Object.defineProperty(ea,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});io=class i extends Ni{constructor(e){super(e,{code:i.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}};Object.defineProperty(io,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});ta=class i extends us{constructor(e){super(e,{code:i.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(ta,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});ro=class i extends us{constructor(e){super(e,{code:i.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}};Object.defineProperty(ro,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});no=class i extends us{constructor(e,{method:t}={}){super(e,{code:i.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}};Object.defineProperty(no,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});so=class i extends us{constructor(e){super(e,{code:i.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}};Object.defineProperty(so,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});ao=class i extends us{constructor(e){super(e,{code:i.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}};Object.defineProperty(ao,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});oo=class i extends us{constructor(e){super(e,{code:i.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(oo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});im=class extends Ni{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}});function uI(i,e,t,r){if(typeof i.setBigUint64=="function")return i.setBigUint64(e,t,r);let n=BigInt(32),s=BigInt(4294967295),o=Number(t>>n&s),l=Number(t&s),c=r?4:0,p=r?0:4;i.setUint32(e+c,o,r),i.setUint32(e+p,l,r)}function c1(i,e,t){return i&e^~i&t}function u1(i,e,t){return i&e^i&t^e&t}var rm,p1=ie(()=>{"use strict";$l();Ks();rm=class extends rs{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Sp(this.buffer)}update(e){Pn(this);let{view:t,buffer:r,blockLen:n}=this;e=ns(e);let s=e.length;for(let o=0;o<s;){let l=Math.min(n-this.pos,s-o);if(l===n){let c=Sp(e);for(;n<=s-o;o+=n)this.process(c,o);continue}r.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Pn(this),Ip(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:s}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let h=o;h<n;h++)t[h]=0;uI(r,n-8,BigInt(this.length*8),s),this.process(r,0);let l=Sp(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let p=c/4,d=this.get();if(p>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<p;h++)l.setUint32(4*h,d[h],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:s,destroyed:o,pos:l}=this;return e.length=n,e.pos=l,e.finished=s,e.destroyed=o,n%t&&e.buffer.set(r),e}}});var pI,ms,ds,sy,ia,ay=ie(()=>{"use strict";p1();Ks();pI=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ms=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ds=new Uint32Array(64),sy=class extends rm{constructor(){super(64,32,8,!1),this.A=ms[0]|0,this.B=ms[1]|0,this.C=ms[2]|0,this.D=ms[3]|0,this.E=ms[4]|0,this.F=ms[5]|0,this.G=ms[6]|0,this.H=ms[7]|0}get(){let{A:e,B:t,C:r,D:n,E:s,F:o,G:l,H:c}=this;return[e,t,r,n,s,o,l,c]}set(e,t,r,n,s,o,l,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=n|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=c|0}process(e,t){for(let h=0;h<16;h++,t+=4)ds[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){let f=ds[h-15],g=ds[h-2],E=Ur(f,7)^Ur(f,18)^f>>>3,I=Ur(g,17)^Ur(g,19)^g>>>10;ds[h]=I+ds[h-7]+E+ds[h-16]|0}let{A:r,B:n,C:s,D:o,E:l,F:c,G:p,H:d}=this;for(let h=0;h<64;h++){let f=Ur(l,6)^Ur(l,11)^Ur(l,25),g=d+f+c1(l,c,p)+pI[h]+ds[h]|0,I=(Ur(r,2)^Ur(r,13)^Ur(r,22))+u1(r,n,s)|0;d=p,p=c,c=l,l=o+g|0,o=s,s=n,n=r,r=g+I|0}r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,c=c+this.F|0,p=p+this.G|0,d=d+this.H|0,this.set(r,n,s,o,l,c,p,d)}roundClean(){ds.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},ia=Tp(()=>new sy)});var nm,oy,m1=ie(()=>{"use strict";$l();Ks();nm=class extends rs{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,b_(e);let r=ns(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,s=new Uint8Array(n);s.set(r.length>n?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Pn(this),this.iHash.update(e),this}digestInto(e){Pn(this),is(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:s,blockLen:o,outputLen:l}=this;return e=e,e.finished=n,e.destroyed=s,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},oy=(i,e,t)=>new nm(i,e).update(t).digest();oy.create=(i,e)=>new nm(i,e)});var dy={};Mb(dy,{aInRange:()=>mn,abool:()=>ra,abytes:()=>wr,bitGet:()=>gI,bitLen:()=>py,bitMask:()=>sc,bitSet:()=>bI,bytesToHex:()=>na,bytesToNumberBE:()=>tr,bytesToNumberLE:()=>om,concatBytes:()=>Fi,createHmacDrbg:()=>my,ensureBytes:()=>fi,equalBytes:()=>fI,hexToBytes:()=>aa,hexToNumber:()=>uy,inRange:()=>fs,isBytes:()=>hs,memoized:()=>cm,notImplemented:()=>_I,numberToBytesBE:()=>Kr,numberToBytesLE:()=>lm,numberToHexUnpadded:()=>sa,numberToVarBytesBE:()=>hI,utf8ToBytes:()=>nc,validateObject:()=>dn});function hs(i){return i instanceof Uint8Array||ArrayBuffer.isView(i)&&i.constructor.name==="Uint8Array"}function wr(i){if(!hs(i))throw new Error("Uint8Array expected")}function ra(i,e){if(typeof e!="boolean")throw new Error(i+" boolean expected, got "+e)}function na(i){wr(i);let e="";for(let t=0;t<i.length;t++)e+=dI[i[t]];return e}function sa(i){let e=i.toString(16);return e.length&1?"0"+e:e}function uy(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);return i===""?sm:BigInt("0x"+i)}function d1(i){if(i>=Un._0&&i<=Un._9)return i-Un._0;if(i>=Un.A&&i<=Un.F)return i-(Un.A-10);if(i>=Un.a&&i<=Un.f)return i-(Un.a-10)}function aa(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);let e=i.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(t);for(let n=0,s=0;n<t;n++,s+=2){let o=d1(i.charCodeAt(s)),l=d1(i.charCodeAt(s+1));if(o===void 0||l===void 0){let c=i[s]+i[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[n]=o*16+l}return r}function tr(i){return uy(na(i))}function om(i){return wr(i),uy(na(Uint8Array.from(i).reverse()))}function Kr(i,e){return aa(i.toString(16).padStart(e*2,"0"))}function lm(i,e){return Kr(i,e).reverse()}function hI(i){return aa(sa(i))}function fi(i,e,t){let r;if(typeof e=="string")try{r=aa(e)}catch(s){throw new Error(i+" must be hex string or Uint8Array, cause: "+s)}else if(hs(e))r=Uint8Array.from(e);else throw new Error(i+" must be hex string or Uint8Array");let n=r.length;if(typeof t=="number"&&n!==t)throw new Error(i+" of length "+t+" expected, got "+n);return r}function Fi(...i){let e=0;for(let r=0;r<i.length;r++){let n=i[r];wr(n),e+=n.length}let t=new Uint8Array(e);for(let r=0,n=0;r<i.length;r++){let s=i[r];t.set(s,n),n+=s.length}return t}function fI(i,e){if(i.length!==e.length)return!1;let t=0;for(let r=0;r<i.length;r++)t|=i[r]^e[r];return t===0}function nc(i){if(typeof i!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(i))}function fs(i,e,t){return ly(i)&&ly(e)&&ly(t)&&e<=i&&i<t}function mn(i,e,t,r){if(!fs(e,t,r))throw new Error("expected valid "+i+": "+t+" <= n < "+r+", got "+e)}function py(i){let e;for(e=0;i>sm;i>>=am,e+=1);return e}function gI(i,e){return i>>BigInt(e)&am}function bI(i,e,t){return i|(t?am:sm)<<BigInt(e)}function my(i,e,t){if(typeof i!="number"||i<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=cy(i),n=cy(i),s=0,o=()=>{r.fill(1),n.fill(0),s=0},l=(...h)=>t(n,r,...h),c=(h=cy())=>{n=l(h1([0]),h),r=l(),h.length!==0&&(n=l(h1([1]),h),r=l())},p=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0,f=[];for(;h<e;){r=l();let g=r.slice();f.push(g),h+=r.length}return Fi(...f)};return(h,f)=>{o(),c(h);let g;for(;!(g=f(p()));)c();return o(),g}}function dn(i,e,t={}){let r=(n,s,o)=>{let l=yI[s];if(typeof l!="function")throw new Error("invalid validator function");let c=i[n];if(!(o&&c===void 0)&&!l(c,i))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+c)};for(let[n,s]of Object.entries(e))r(n,s,!1);for(let[n,s]of Object.entries(t))r(n,s,!0);return i}function cm(i){let e=new WeakMap;return(t,...r)=>{let n=e.get(t);if(n!==void 0)return n;let s=i(t,...r);return e.set(t,s),s}}var sm,am,mI,dI,Un,ly,sc,cy,h1,yI,_I,oa=ie(()=>{"use strict";sm=BigInt(0),am=BigInt(1),mI=BigInt(2);dI=Array.from({length:256},(i,e)=>e.toString(16).padStart(2,"0"));Un={_0:48,_9:57,A:65,F:70,a:97,f:102};ly=i=>typeof i=="bigint"&&sm<=i;sc=i=>(mI<<BigInt(i-1))-am,cy=i=>new Uint8Array(i),h1=i=>Uint8Array.from(i);yI={bigint:i=>typeof i=="bigint",function:i=>typeof i=="function",boolean:i=>typeof i=="boolean",string:i=>typeof i=="string",stringOrUint8Array:i=>typeof i=="string"||hs(i),isSafeInteger:i=>Number.isSafeInteger(i),array:i=>Array.isArray(i),field:(i,e)=>e.Fp.isValid(i),hash:i=>typeof i=="function"&&Number.isSafeInteger(i.outputLen)};_I=()=>{throw new Error("not implemented")}});function ni(i,e){let t=i%e;return t>=gi?t:e+t}function LI(i,e,t){if(e<gi)throw new Error("invalid exponent, negatives unsupported");if(t<=gi)throw new Error("invalid modulus");if(t===Xt)return gi;let r=Xt;for(;e>gi;)e&Xt&&(r=r*i%t),i=i*i%t,e>>=Xt;return r}function pr(i,e,t){let r=i;for(;e-- >gi;)r*=r,r%=t;return r}function um(i,e){if(i===gi)throw new Error("invert: expected non-zero number");if(e<=gi)throw new Error("invert: expected positive modulus, got "+e);let t=ni(i,e),r=e,n=gi,s=Xt,o=Xt,l=gi;for(;t!==gi;){let p=r/t,d=r%t,h=n-o*p,f=s-l*p;r=t,t=d,n=o,s=l,o=h,l=f}if(r!==Xt)throw new Error("invert: does not exist");return ni(n,e)}function II(i){let e=(i-Xt)/la,t,r,n;for(t=i-Xt,r=0;t%la===gi;t/=la,r++);for(n=la;n<i&&LI(n,e,i)!==i-Xt;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){let o=(i+Xt)/hy;return function(c,p){let d=c.pow(p,o);if(!c.eql(c.sqr(d),p))throw new Error("Cannot find square root");return d}}let s=(t+Xt)/la;return function(l,c){if(l.pow(c,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let p=r,d=l.pow(l.mul(l.ONE,n),t),h=l.pow(c,s),f=l.pow(c,t);for(;!l.eql(f,l.ONE);){if(l.eql(f,l.ZERO))return l.ZERO;let g=1;for(let I=l.sqr(f);g<p&&!l.eql(I,l.ONE);g++)I=l.sqr(I);let E=l.pow(d,Xt<<BigInt(p-g-1));d=l.sqr(E),h=l.mul(h,E),f=l.mul(f,d),p=g}return h}}function EI(i){if(i%hy===xI){let e=(i+Xt)/hy;return function(r,n){let s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(i%g1===f1){let e=(i-f1)/g1;return function(r,n){let s=r.mul(n,la),o=r.pow(s,e),l=r.mul(n,o),c=r.mul(r.mul(l,la),o),p=r.mul(l,r.sub(c,r.ONE));if(!r.eql(r.sqr(p),n))throw new Error("Cannot find square root");return p}}return i%wI,II(i)}function pm(i){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=SI.reduce((r,n)=>(r[n]="function",r),e);return dn(i,t)}function TI(i,e,t){if(t<gi)throw new Error("invalid exponent, negatives unsupported");if(t===gi)return i.ONE;if(t===Xt)return e;let r=i.ONE,n=e;for(;t>gi;)t&Xt&&(r=i.mul(r,n)),n=i.sqr(n),t>>=Xt;return r}function kI(i,e){let t=new Array(e.length),r=e.reduce((s,o,l)=>i.is0(o)?s:(t[l]=s,i.mul(s,o)),i.ONE),n=i.inv(r);return e.reduceRight((s,o,l)=>i.is0(o)?s:(t[l]=i.mul(s,t[l]),i.mul(s,o)),n),t}function fy(i,e){let t=e!==void 0?e:i.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function mm(i,e,t=!1,r={}){if(i<=gi)throw new Error("invalid field: expected ORDER > 0, got "+i);let{nBitLength:n,nByteLength:s}=fy(i,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o,l=Object.freeze({ORDER:i,isLE:t,BITS:n,BYTES:s,MASK:sc(n),ZERO:gi,ONE:Xt,create:c=>ni(c,i),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return gi<=c&&c<i},is0:c=>c===gi,isOdd:c=>(c&Xt)===Xt,neg:c=>ni(-c,i),eql:(c,p)=>c===p,sqr:c=>ni(c*c,i),add:(c,p)=>ni(c+p,i),sub:(c,p)=>ni(c-p,i),mul:(c,p)=>ni(c*p,i),pow:(c,p)=>TI(l,c,p),div:(c,p)=>ni(c*um(p,i),i),sqrN:c=>c*c,addN:(c,p)=>c+p,subN:(c,p)=>c-p,mulN:(c,p)=>c*p,inv:c=>um(c,i),sqrt:r.sqrt||(c=>(o||(o=EI(i)),o(l,c))),invertBatch:c=>kI(l,c),cmov:(c,p,d)=>d?p:c,toBytes:c=>t?lm(c,s):Kr(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return t?om(c):tr(c)}});return Object.freeze(l)}function b1(i){if(typeof i!="bigint")throw new Error("field order must be bigint");let e=i.toString(2).length;return Math.ceil(e/8)}function gy(i){let e=b1(i);return e+Math.ceil(e/2)}function y1(i,e,t=!1){let r=i.length,n=b1(e),s=gy(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);let o=t?om(i):tr(i),l=ni(o,e-Xt)+Xt;return t?lm(l,n):Kr(l,n)}var gi,Xt,la,xI,hy,f1,g1,vI,wI,SI,ac=ie(()=>{"use strict";oa();gi=BigInt(0),Xt=BigInt(1),la=BigInt(2),xI=BigInt(3),hy=BigInt(4),f1=BigInt(5),g1=BigInt(8),vI=BigInt(9),wI=BigInt(16);SI=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function by(i,e){let t=e.negate();return i?t:e}function x1(i,e){if(!Number.isSafeInteger(i)||i<=0||i>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+i)}function yy(i,e){x1(i,e);let t=Math.ceil(e/i)+1,r=2**(i-1);return{windows:t,windowSize:r}}function AI(i,e){if(!Array.isArray(i))throw new Error("array expected");i.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function CI(i,e){if(!Array.isArray(i))throw new Error("array of scalars expected");i.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}function xy(i){return v1.get(i)||1}function w1(i,e){return{constTimeNegate:by,hasPrecomputes(t){return xy(t)!==1},unsafeLadder(t,r,n=i.ZERO){let s=t;for(;r>_1;)r&dm&&(n=n.add(s)),s=s.double(),r>>=dm;return n},precomputeWindow(t,r){let{windows:n,windowSize:s}=yy(r,e),o=[],l=t,c=l;for(let p=0;p<n;p++){c=l,o.push(c);for(let d=1;d<s;d++)c=c.add(l),o.push(c);l=c.double()}return o},wNAF(t,r,n){let{windows:s,windowSize:o}=yy(t,e),l=i.ZERO,c=i.BASE,p=BigInt(2**t-1),d=2**t,h=BigInt(t);for(let f=0;f<s;f++){let g=f*o,E=Number(n&p);n>>=h,E>o&&(E-=d,n+=dm);let I=g,_=g+Math.abs(E)-1,S=f%2!==0,M=E<0;E===0?c=c.add(by(S,r[I])):l=l.add(by(M,r[_]))}return{p:l,f:c}},wNAFUnsafe(t,r,n,s=i.ZERO){let{windows:o,windowSize:l}=yy(t,e),c=BigInt(2**t-1),p=2**t,d=BigInt(t);for(let h=0;h<o;h++){let f=h*l;if(n===_1)break;let g=Number(n&c);if(n>>=d,g>l&&(g-=p,n+=dm),g===0)continue;let E=r[f+Math.abs(g)-1];g<0&&(E=E.negate()),s=s.add(E)}return s},getPrecomputes(t,r,n){let s=_y.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&_y.set(r,n(s))),s},wNAFCached(t,r,n){let s=xy(t);return this.wNAF(s,this.getPrecomputes(s,t,n),r)},wNAFCachedUnsafe(t,r,n,s){let o=xy(t);return o===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,n),r,s)},setWindowSize(t,r){x1(r,e),v1.set(t,r),_y.delete(t)}}}function L1(i,e,t,r){if(AI(t,i),CI(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");let n=i.ZERO,s=py(BigInt(t.length)),o=s>12?s-3:s>4?s-2:s?2:1,l=(1<<o)-1,c=new Array(l+1).fill(n),p=Math.floor((e.BITS-1)/o)*o,d=n;for(let h=p;h>=0;h-=o){c.fill(n);for(let g=0;g<r.length;g++){let E=r[g],I=Number(E>>BigInt(h)&BigInt(l));c[I]=c[I].add(t[g])}let f=n;for(let g=c.length-1,E=n;g>0;g--)E=E.add(c[g]),f=f.add(E);if(d=d.add(f),h!==0)for(let g=0;g<o;g++)d=d.double()}return d}function vy(i){return pm(i.Fp),dn(i,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...fy(i.n,i.nBitLength),...i,p:i.Fp.ORDER})}var _1,dm,_y,v1,I1=ie(()=>{"use strict";ac();oa();_1=BigInt(0),dm=BigInt(1);_y=new WeakMap,v1=new WeakMap});function E1(i){i.lowS!==void 0&&ra("lowS",i.lowS),i.prehash!==void 0&&ra("prehash",i.prehash)}function RI(i){let e=vy(i);dn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:r,a:n}=e;if(t){if(!r.eql(n,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}function BI(i){let e=RI(i),{Fp:t}=e,r=mm(e.n,e.nBitLength),n=e.toBytes||((I,_,S)=>{let M=_.toAffine();return Fi(Uint8Array.from([4]),t.toBytes(M.x),t.toBytes(M.y))}),s=e.fromBytes||(I=>{let _=I.subarray(1),S=t.fromBytes(_.subarray(0,t.BYTES)),M=t.fromBytes(_.subarray(t.BYTES,2*t.BYTES));return{x:S,y:M}});function o(I){let{a:_,b:S}=e,M=t.sqr(I),R=t.mul(M,I);return t.add(t.add(R,t.mul(I,_)),S)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function l(I){return fs(I,Ft,e.n)}function c(I){let{allowedPrivateKeyLengths:_,nByteLength:S,wrapPrivateKey:M,n:R}=e;if(_&&typeof I!="bigint"){if(hs(I)&&(I=na(I)),typeof I!="string"||!_.includes(I.length))throw new Error("invalid private key");I=I.padStart(S*2,"0")}let V;try{V=typeof I=="bigint"?I:tr(fi("private key",I,S))}catch{throw new Error("invalid private key, expected hex or "+S+" bytes, got "+typeof I)}return M&&(V=ni(V,R)),mn("private key",V,Ft,R),V}function p(I){if(!(I instanceof f))throw new Error("ProjectivePoint expected")}let d=cm((I,_)=>{let{px:S,py:M,pz:R}=I;if(t.eql(R,t.ONE))return{x:S,y:M};let V=I.is0();_==null&&(_=V?t.ONE:t.inv(R));let H=t.mul(S,_),K=t.mul(M,_),q=t.mul(R,_);if(V)return{x:t.ZERO,y:t.ZERO};if(!t.eql(q,t.ONE))throw new Error("invZ was invalid");return{x:H,y:K}}),h=cm(I=>{if(I.is0()){if(e.allowInfinityPoint&&!t.is0(I.py))return;throw new Error("bad point: ZERO")}let{x:_,y:S}=I.toAffine();if(!t.isValid(_)||!t.isValid(S))throw new Error("bad point: x or y not FE");let M=t.sqr(S),R=o(_);if(!t.eql(M,R))throw new Error("bad point: equation left != right");if(!I.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class f{constructor(_,S,M){if(this.px=_,this.py=S,this.pz=M,_==null||!t.isValid(_))throw new Error("x required");if(S==null||!t.isValid(S))throw new Error("y required");if(M==null||!t.isValid(M))throw new Error("z required");Object.freeze(this)}static fromAffine(_){let{x:S,y:M}=_||{};if(!_||!t.isValid(S)||!t.isValid(M))throw new Error("invalid affine point");if(_ instanceof f)throw new Error("projective point not allowed");let R=V=>t.eql(V,t.ZERO);return R(S)&&R(M)?f.ZERO:new f(S,M,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){let S=t.invertBatch(_.map(M=>M.pz));return _.map((M,R)=>M.toAffine(S[R])).map(f.fromAffine)}static fromHex(_){let S=f.fromAffine(s(fi("pointHex",_)));return S.assertValidity(),S}static fromPrivateKey(_){return f.BASE.multiply(c(_))}static msm(_,S){return L1(f,r,_,S)}_setWindowSize(_){E.setWindowSize(this,_)}assertValidity(){h(this)}hasEvenY(){let{y:_}=this.toAffine();if(t.isOdd)return!t.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){p(_);let{px:S,py:M,pz:R}=this,{px:V,py:H,pz:K}=_,q=t.eql(t.mul(S,K),t.mul(V,R)),ce=t.eql(t.mul(M,K),t.mul(H,R));return q&&ce}negate(){return new f(this.px,t.neg(this.py),this.pz)}double(){let{a:_,b:S}=e,M=t.mul(S,hm),{px:R,py:V,pz:H}=this,K=t.ZERO,q=t.ZERO,ce=t.ZERO,Q=t.mul(R,R),ke=t.mul(V,V),ve=t.mul(H,H),W=t.mul(R,V);return W=t.add(W,W),ce=t.mul(R,H),ce=t.add(ce,ce),K=t.mul(_,ce),q=t.mul(M,ve),q=t.add(K,q),K=t.sub(ke,q),q=t.add(ke,q),q=t.mul(K,q),K=t.mul(W,K),ce=t.mul(M,ce),ve=t.mul(_,ve),W=t.sub(Q,ve),W=t.mul(_,W),W=t.add(W,ce),ce=t.add(Q,Q),Q=t.add(ce,Q),Q=t.add(Q,ve),Q=t.mul(Q,W),q=t.add(q,Q),ve=t.mul(V,H),ve=t.add(ve,ve),Q=t.mul(ve,W),K=t.sub(K,Q),ce=t.mul(ve,ke),ce=t.add(ce,ce),ce=t.add(ce,ce),new f(K,q,ce)}add(_){p(_);let{px:S,py:M,pz:R}=this,{px:V,py:H,pz:K}=_,q=t.ZERO,ce=t.ZERO,Q=t.ZERO,ke=e.a,ve=t.mul(e.b,hm),W=t.mul(S,V),ut=t.mul(M,H),le=t.mul(R,K),Se=t.add(S,M),we=t.add(V,H);Se=t.mul(Se,we),we=t.add(W,ut),Se=t.sub(Se,we),we=t.add(S,R);let D=t.add(V,K);return we=t.mul(we,D),D=t.add(W,le),we=t.sub(we,D),D=t.add(M,R),q=t.add(H,K),D=t.mul(D,q),q=t.add(ut,le),D=t.sub(D,q),Q=t.mul(ke,we),q=t.mul(ve,le),Q=t.add(q,Q),q=t.sub(ut,Q),Q=t.add(ut,Q),ce=t.mul(q,Q),ut=t.add(W,W),ut=t.add(ut,W),le=t.mul(ke,le),we=t.mul(ve,we),ut=t.add(ut,le),le=t.sub(W,le),le=t.mul(ke,le),we=t.add(we,le),W=t.mul(ut,we),ce=t.add(ce,W),W=t.mul(D,we),q=t.mul(Se,q),q=t.sub(q,W),W=t.mul(Se,ut),Q=t.mul(D,Q),Q=t.add(Q,W),new f(q,ce,Q)}subtract(_){return this.add(_.negate())}is0(){return this.equals(f.ZERO)}wNAF(_){return E.wNAFCached(this,_,f.normalizeZ)}multiplyUnsafe(_){let{endo:S,n:M}=e;mn("scalar",_,$r,M);let R=f.ZERO;if(_===$r)return R;if(this.is0()||_===Ft)return this;if(!S||E.hasPrecomputes(this))return E.wNAFCachedUnsafe(this,_,f.normalizeZ);let{k1neg:V,k1:H,k2neg:K,k2:q}=S.splitScalar(_),ce=R,Q=R,ke=this;for(;H>$r||q>$r;)H&Ft&&(ce=ce.add(ke)),q&Ft&&(Q=Q.add(ke)),ke=ke.double(),H>>=Ft,q>>=Ft;return V&&(ce=ce.negate()),K&&(Q=Q.negate()),Q=new f(t.mul(Q.px,S.beta),Q.py,Q.pz),ce.add(Q)}multiply(_){let{endo:S,n:M}=e;mn("scalar",_,Ft,M);let R,V;if(S){let{k1neg:H,k1:K,k2neg:q,k2:ce}=S.splitScalar(_),{p:Q,f:ke}=this.wNAF(K),{p:ve,f:W}=this.wNAF(ce);Q=E.constTimeNegate(H,Q),ve=E.constTimeNegate(q,ve),ve=new f(t.mul(ve.px,S.beta),ve.py,ve.pz),R=Q.add(ve),V=ke.add(W)}else{let{p:H,f:K}=this.wNAF(_);R=H,V=K}return f.normalizeZ([R,V])[0]}multiplyAndAddUnsafe(_,S,M){let R=f.BASE,V=(K,q)=>q===$r||q===Ft||!K.equals(R)?K.multiplyUnsafe(q):K.multiply(q),H=V(this,S).add(V(_,M));return H.is0()?void 0:H}toAffine(_){return d(this,_)}isTorsionFree(){let{h:_,isTorsionFree:S}=e;if(_===Ft)return!0;if(S)return S(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:_,clearCofactor:S}=e;return _===Ft?this:S?S(f,this):this.multiplyUnsafe(e.h)}toRawBytes(_=!0){return ra("isCompressed",_),this.assertValidity(),n(f,this,_)}toHex(_=!0){return ra("isCompressed",_),na(this.toRawBytes(_))}}f.BASE=new f(e.Gx,e.Gy,t.ONE),f.ZERO=new f(t.ZERO,t.ONE,t.ZERO);let g=e.nBitLength,E=w1(f,e.endo?Math.ceil(g/2):g);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:l}}function PI(i){let e=vy(i);return dn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function T1(i){let e=PI(i),{Fp:t,n:r}=e,n=t.BYTES+1,s=2*t.BYTES+1;function o(le){return ni(le,r)}function l(le){return um(le,r)}let{ProjectivePoint:c,normPrivateKeyToScalar:p,weierstrassEquation:d,isWithinCurveOrder:h}=BI({...e,toBytes(le,Se,we){let D=Se.toAffine(),Ge=t.toBytes(D.x),ge=Fi;return ra("isCompressed",we),we?ge(Uint8Array.from([Se.hasEvenY()?2:3]),Ge):ge(Uint8Array.from([4]),Ge,t.toBytes(D.y))},fromBytes(le){let Se=le.length,we=le[0],D=le.subarray(1);if(Se===n&&(we===2||we===3)){let Ge=tr(D);if(!fs(Ge,Ft,t.ORDER))throw new Error("Point is not on curve");let ge=d(Ge),Ze;try{Ze=t.sqrt(ge)}catch(wt){let st=wt instanceof Error?": "+wt.message:"";throw new Error("Point is not on curve"+st)}let tt=(Ze&Ft)===Ft;return(we&1)===1!==tt&&(Ze=t.neg(Ze)),{x:Ge,y:Ze}}else if(Se===s&&we===4){let Ge=t.fromBytes(D.subarray(0,t.BYTES)),ge=t.fromBytes(D.subarray(t.BYTES,2*t.BYTES));return{x:Ge,y:ge}}else{let Ge=n,ge=s;throw new Error("invalid Point, expected length of "+Ge+", or uncompressed "+ge+", got "+Se)}}}),f=le=>na(Kr(le,e.nByteLength));function g(le){let Se=r>>Ft;return le>Se}function E(le){return g(le)?o(-le):le}let I=(le,Se,we)=>tr(le.slice(Se,we));class _{constructor(Se,we,D){this.r=Se,this.s=we,this.recovery=D,this.assertValidity()}static fromCompact(Se){let we=e.nByteLength;return Se=fi("compactSignature",Se,we*2),new _(I(Se,0,we),I(Se,we,2*we))}static fromDER(Se){let{r:we,s:D}=Vn.toSig(fi("DER",Se));return new _(we,D)}assertValidity(){mn("r",this.r,Ft,r),mn("s",this.s,Ft,r)}addRecoveryBit(Se){return new _(this.r,this.s,Se)}recoverPublicKey(Se){let{r:we,s:D,recovery:Ge}=this,ge=K(fi("msgHash",Se));if(Ge==null||![0,1,2,3].includes(Ge))throw new Error("recovery id invalid");let Ze=Ge===2||Ge===3?we+e.n:we;if(Ze>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let tt=Ge&1?"03":"02",jt=c.fromHex(tt+f(Ze)),wt=l(Ze),st=o(-ge*wt),vi=o(D*wt),ki=c.BASE.multiplyAndAddUnsafe(jt,st,vi);if(!ki)throw new Error("point at infinify");return ki.assertValidity(),ki}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new _(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return aa(this.toDERHex())}toDERHex(){return Vn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return aa(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}let S={isValidPrivateKey(le){try{return p(le),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{let le=gy(e.n);return y1(e.randomBytes(le),e.n)},precompute(le=8,Se=c.BASE){return Se._setWindowSize(le),Se.multiply(BigInt(3)),Se}};function M(le,Se=!0){return c.fromPrivateKey(le).toRawBytes(Se)}function R(le){let Se=hs(le),we=typeof le=="string",D=(Se||we)&&le.length;return Se?D===n||D===s:we?D===2*n||D===2*s:le instanceof c}function V(le,Se,we=!0){if(R(le))throw new Error("first arg must be private key");if(!R(Se))throw new Error("second arg must be public key");return c.fromHex(Se).multiply(p(le)).toRawBytes(we)}let H=e.bits2int||function(le){if(le.length>8192)throw new Error("input is too large");let Se=tr(le),we=le.length*8-e.nBitLength;return we>0?Se>>BigInt(we):Se},K=e.bits2int_modN||function(le){return o(H(le))},q=sc(e.nBitLength);function ce(le){return mn("num < 2^"+e.nBitLength,le,$r,q),Kr(le,e.nByteLength)}function Q(le,Se,we=ke){if(["recovered","canonical"].some(Ut=>Ut in we))throw new Error("sign() legacy options not supported");let{hash:D,randomBytes:Ge}=e,{lowS:ge,prehash:Ze,extraEntropy:tt}=we;ge==null&&(ge=!0),le=fi("msgHash",le),E1(we),Ze&&(le=fi("prehashed msgHash",D(le)));let jt=K(le),wt=p(Se),st=[ce(wt),ce(jt)];if(tt!=null&&tt!==!1){let Ut=tt===!0?Ge(t.BYTES):tt;st.push(fi("extraEntropy",Ut))}let vi=Fi(...st),ki=jt;function Xi(Ut){let hr=H(Ut);if(!h(hr))return;let en=l(hr),Qi=c.BASE.multiply(hr).toAffine(),wi=o(Qi.x);if(wi===$r)return;let Ri=o(en*o(ki+wi*wt));if(Ri===$r)return;let Zi=(Qi.x===wi?0:2)|Number(Qi.y&Ft),ii=Ri;return ge&&g(Ri)&&(ii=E(Ri),Zi^=1),new _(wi,ii,Zi)}return{seed:vi,k2sig:Xi}}let ke={lowS:e.lowS,prehash:!1},ve={lowS:e.lowS,prehash:!1};function W(le,Se,we=ke){let{seed:D,k2sig:Ge}=Q(le,Se,we),ge=e;return my(ge.hash.outputLen,ge.nByteLength,ge.hmac)(D,Ge)}c.BASE._setWindowSize(8);function ut(le,Se,we,D=ve){let Ge=le;Se=fi("msgHash",Se),we=fi("publicKey",we);let{lowS:ge,prehash:Ze,format:tt}=D;if(E1(D),"strict"in D)throw new Error("options.strict was renamed to lowS");if(tt!==void 0&&tt!=="compact"&&tt!=="der")throw new Error("format must be compact or der");let jt=typeof Ge=="string"||hs(Ge),wt=!jt&&!tt&&typeof Ge=="object"&&Ge!==null&&typeof Ge.r=="bigint"&&typeof Ge.s=="bigint";if(!jt&&!wt)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let st,vi;try{if(wt&&(st=new _(Ge.r,Ge.s)),jt){try{tt!=="compact"&&(st=_.fromDER(Ge))}catch(Zi){if(!(Zi instanceof Vn.Err))throw Zi}!st&&tt!=="der"&&(st=_.fromCompact(Ge))}vi=c.fromHex(we)}catch{return!1}if(!st||ge&&st.hasHighS())return!1;Ze&&(Se=e.hash(Se));let{r:ki,s:Xi}=st,Ut=K(Se),hr=l(Xi),en=o(Ut*hr),Qi=o(ki*hr),wi=c.BASE.multiplyAndAddUnsafe(vi,en,Qi)?.toAffine();return wi?o(wi.x)===ki:!1}return{CURVE:e,getPublicKey:M,getSharedSecret:V,sign:W,verify:ut,ProjectivePoint:c,Signature:_,utils:S}}function OI(i,e){let t=i.ORDER,r=$r;for(let E=t-Ft;E%gs===$r;E/=gs)r+=Ft;let n=r,s=gs<<n-Ft-Ft,o=s*gs,l=(t-Ft)/o,c=(l-Ft)/gs,p=o-Ft,d=s,h=i.pow(e,l),f=i.pow(e,(l+Ft)/gs),g=(E,I)=>{let _=h,S=i.pow(I,p),M=i.sqr(S);M=i.mul(M,I);let R=i.mul(E,M);R=i.pow(R,c),R=i.mul(R,S),S=i.mul(R,I),M=i.mul(R,E);let V=i.mul(M,S);R=i.pow(V,d);let H=i.eql(R,i.ONE);S=i.mul(M,f),R=i.mul(V,_),M=i.cmov(S,M,H),V=i.cmov(R,V,H);for(let K=n;K>Ft;K--){let q=K-gs;q=gs<<q-Ft;let ce=i.pow(V,q),Q=i.eql(ce,i.ONE);S=i.mul(M,_),_=i.mul(_,_),ce=i.mul(V,_),M=i.cmov(S,M,Q),V=i.cmov(ce,V,Q)}return{isValid:H,value:M}};if(i.ORDER%S1===hm){let E=(i.ORDER-hm)/S1,I=i.sqrt(i.neg(e));g=(_,S)=>{let M=i.sqr(S),R=i.mul(_,S);M=i.mul(M,R);let V=i.pow(M,E);V=i.mul(V,R);let H=i.mul(V,I),K=i.mul(i.sqr(V),S),q=i.eql(K,_),ce=i.cmov(H,V,q);return{isValid:q,value:ce}}}return g}function k1(i,e){if(pm(i),!i.isValid(e.A)||!i.isValid(e.B)||!i.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let t=OI(i,e.Z);if(!i.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let n,s,o,l,c,p,d,h;n=i.sqr(r),n=i.mul(n,e.Z),s=i.sqr(n),s=i.add(s,n),o=i.add(s,i.ONE),o=i.mul(o,e.B),l=i.cmov(e.Z,i.neg(s),!i.eql(s,i.ZERO)),l=i.mul(l,e.A),s=i.sqr(o),p=i.sqr(l),c=i.mul(p,e.A),s=i.add(s,c),s=i.mul(s,o),p=i.mul(p,l),c=i.mul(p,e.B),s=i.add(s,c),d=i.mul(n,o);let{isValid:f,value:g}=t(s,p);h=i.mul(n,r),h=i.mul(h,g),d=i.cmov(d,o,f),h=i.cmov(h,g,f);let E=i.isOdd(r)===i.isOdd(h);return h=i.cmov(i.neg(h),h,E),d=i.div(d,l),{x:d,y:h}}}var MI,DI,wy,Vn,$r,Ft,gs,hm,S1,Ly=ie(()=>{"use strict";I1();ac();oa();oa();({bytesToNumberBE:MI,hexToBytes:DI}=dy),wy=class extends Error{constructor(e=""){super(e)}},Vn={Err:wy,_tlv:{encode:(i,e)=>{let{Err:t}=Vn;if(i<0||i>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");let r=e.length/2,n=sa(r);if(n.length/2&128)throw new t("tlv.encode: long form length too big");let s=r>127?sa(n.length/2|128):"";return sa(i)+s+n+e},decode(i,e){let{Err:t}=Vn,r=0;if(i<0||i>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==i)throw new t("tlv.decode: wrong tlv");let n=e[r++],s=!!(n&128),o=0;if(!s)o=n;else{let c=n&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");let p=e.subarray(r,r+c);if(p.length!==c)throw new t("tlv.decode: length bytes not complete");if(p[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(let d of p)o=o<<8|d;if(r+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}let l=e.subarray(r,r+o);if(l.length!==o)throw new t("tlv.decode: wrong value length");return{v:l,l:e.subarray(r+o)}}},_int:{encode(i){let{Err:e}=Vn;if(i<$r)throw new e("integer: negative integers are not allowed");let t=sa(i);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(i){let{Err:e}=Vn;if(i[0]&128)throw new e("invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return MI(i)}},toSig(i){let{Err:e,_int:t,_tlv:r}=Vn,n=typeof i=="string"?DI(i):i;wr(n);let{v:s,l:o}=r.decode(48,n);if(o.length)throw new e("invalid signature: left bytes after parsing");let{v:l,l:c}=r.decode(2,s),{v:p,l:d}=r.decode(2,c);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(l),s:t.decode(p)}},hexFromSig(i){let{_tlv:e,_int:t}=Vn,r=e.encode(2,t.encode(i.r)),n=e.encode(2,t.encode(i.s)),s=r+n;return e.encode(48,s)}},$r=BigInt(0),Ft=BigInt(1),gs=BigInt(2),hm=BigInt(3),S1=BigInt(4)});function NI(i){return{hash:i,hmac:(e,...t)=>oy(i,e,T_(...t)),randomBytes:kp}}function A1(i,e){let t=r=>T1({...i,...NI(r)});return{...t(e),create:t}}var C1=ie(()=>{"use strict";m1();Ks();Ly();});function bs(i,e){if(oc(i),oc(e),i<0||i>=1<<8*e)throw new Error("invalid I2OSP input: "+i);let t=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)t[r]=i&255,i>>>=8;return new Uint8Array(t)}function HI(i,e){let t=new Uint8Array(i.length);for(let r=0;r<i.length;r++)t[r]=i[r]^e[r];return t}function oc(i){if(!Number.isSafeInteger(i))throw new Error("number expected")}function UI(i,e,t,r){wr(i),wr(e),oc(t),e.length>255&&(e=r(Fi(nc("H2C-OVERSIZE-DST-"),e)));let{outputLen:n,blockLen:s}=r,o=Math.ceil(t/n);if(t>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");let l=Fi(e,bs(e.length,1)),c=bs(0,s),p=bs(t,2),d=new Array(o),h=r(Fi(c,i,p,bs(0,1),l));d[0]=r(Fi(h,bs(1,1),l));for(let g=1;g<=o;g++){let E=[HI(h,d[g-1]),bs(g+1,1),l];d[g]=r(Fi(...E))}return Fi(...d).slice(0,t)}function VI(i,e,t,r,n){if(wr(i),wr(e),oc(t),e.length>255){let s=Math.ceil(2*r/8);e=n.create({dkLen:s}).update(nc("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return n.create({dkLen:t}).update(i).update(bs(t,2)).update(e).update(bs(e.length,1)).digest()}function R1(i,e,t){dn(t,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:r,k:n,m:s,hash:o,expand:l,DST:c}=t;wr(i),oc(e);let p=typeof c=="string"?nc(c):c,d=r.toString(2).length,h=Math.ceil((d+n)/8),f=e*s*h,g;if(l==="xmd")g=UI(i,p,f,o);else if(l==="xof")g=VI(i,p,f,n,o);else if(l==="_internal_pass")g=i;else throw new Error('expand must be "xmd" or "xof"');let E=new Array(e);for(let I=0;I<e;I++){let _=new Array(s);for(let S=0;S<s;S++){let M=h*(S+I*s),R=g.subarray(M,M+h);_[S]=ni(FI(R),r)}E[I]=_}return E}function M1(i,e){let t=e.map(r=>Array.from(r).reverse());return(r,n)=>{let[s,o,l,c]=t.map(p=>p.reduce((d,h)=>i.add(i.mul(d,r),h)));return r=i.div(s,o),n=i.mul(n,i.div(l,c)),{x:r,y:n}}}function D1(i,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,n){let s=R1(r,2,{...t,DST:t.DST,...n}),o=i.fromAffine(e(s[0])),l=i.fromAffine(e(s[1])),c=o.add(l).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,n){let s=R1(r,1,{...t,DST:t.encodeDST,...n}),o=i.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(let s of r)if(typeof s!="bigint")throw new Error("mapToCurve: expected array of bigints");let n=i.fromAffine(e(r)).clearCofactor();return n.assertValidity(),n}}}var FI,B1=ie(()=>{"use strict";ac();oa();FI=tr});var G1={};Mb(G1,{encodeToCurve:()=>YI,hashToCurve:()=>qI,schnorr:()=>WI,secp256k1:()=>zn});function N1(i){let e=uc,t=BigInt(3),r=BigInt(6),n=BigInt(11),s=BigInt(22),o=BigInt(23),l=BigInt(44),c=BigInt(88),p=i*i*i%e,d=p*p*i%e,h=pr(d,t,e)*d%e,f=pr(h,t,e)*d%e,g=pr(f,gm,e)*p%e,E=pr(g,n,e)*g%e,I=pr(E,s,e)*E%e,_=pr(I,l,e)*I%e,S=pr(_,c,e)*_%e,M=pr(S,l,e)*I%e,R=pr(M,t,e)*d%e,V=pr(R,o,e)*E%e,H=pr(V,r,e)*p%e,K=pr(H,gm,e);if(!ys.eql(ys.sqr(K),i))throw new Error("Cannot find square root");return K}function bm(i,...e){let t=O1[i];if(t===void 0){let r=ia(Uint8Array.from(i,n=>n.charCodeAt(0)));t=Fi(r,r),O1[i]=t}return ia(Fi(t,...e))}function Sy(i){let e=zn.utils.normPrivateKeyToScalar(i),t=ky.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:cc(-e),bytes:Ty(t)}}function H1(i){mn("x",i,lc,uc);let e=Iy(i*i),t=Iy(e*i+BigInt(7)),r=N1(t);r%gm!==F1&&(r=Iy(-r));let n=new ky(i,r,lc);return n.assertValidity(),n}function U1(...i){return cc(lo(bm("BIP0340/challenge",...i)))}function GI(i){return Sy(i).bytes}function jI(i,e,t=kp(32)){let r=fi("message",i),{bytes:n,scalar:s}=Sy(e),o=fi("auxRand",t,32),l=Ey(s^lo(bm("BIP0340/aux",o))),c=bm("BIP0340/nonce",l,n,r),p=cc(lo(c));if(p===F1)throw new Error("sign failed: k is zero");let{bytes:d,scalar:h}=Sy(p),f=U1(d,n,r),g=new Uint8Array(64);if(g.set(d,0),g.set(Ey(cc(h+f*s)),32),!V1(g,r,n))throw new Error("sign: Invalid signature produced");return g}function V1(i,e,t){let r=fi("signature",i,64),n=fi("message",e),s=fi("publicKey",t,32);try{let o=H1(lo(s)),l=lo(r.subarray(0,32));if(!fs(l,lc,uc))return!1;let c=lo(r.subarray(32,64));if(!fs(c,lc,fm))return!1;let p=U1(Ey(l),Ty(o),n),d=zI(o,c,cc(-p));return!(!d||!d.hasEvenY()||d.toAffine().x!==l)}catch{return!1}}var uc,fm,lc,gm,P1,ys,zn,F1,O1,Ty,Ey,Iy,cc,ky,zI,lo,WI,KI,$I,z1,qI,YI,ym=ie(()=>{"use strict";ay();Ks();C1();B1();ac();oa();Ly();uc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),fm=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),lc=BigInt(1),gm=BigInt(2),P1=(i,e)=>(i+e/gm)/e;ys=mm(uc,void 0,void 0,{sqrt:N1}),zn=A1({a:BigInt(0),b:BigInt(7),Fp:ys,n:fm,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:i=>{let e=fm,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-lc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),l=P1(s*i,e),c=P1(-r*i,e),p=ni(i-l*t-c*n,e),d=ni(-l*r-c*s,e),h=p>o,f=d>o;if(h&&(p=e-p),f&&(d=e-d),p>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+i);return{k1neg:h,k1:p,k2neg:f,k2:d}}}},ia),F1=BigInt(0),O1={};Ty=i=>i.toRawBytes(!0).slice(1),Ey=i=>Kr(i,32),Iy=i=>ni(i,uc),cc=i=>ni(i,fm),ky=zn.ProjectivePoint,zI=(i,e,t)=>ky.BASE.multiplyAndAddUnsafe(i,e,t);lo=tr;WI=(()=>({getPublicKey:GI,sign:jI,verify:V1,utils:{randomPrivateKey:zn.utils.randomPrivateKey,lift_x:H1,pointToBytes:Ty,numberToBytesBE:Kr,bytesToNumberBE:tr,taggedHash:bm,mod:ni}}))(),KI=(()=>M1(ys,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(i=>i.map(e=>BigInt(e)))))(),$I=(()=>k1(ys,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:ys.create(BigInt("-11"))}))(),z1=(()=>D1(zn.ProjectivePoint,i=>{let{x:e,y:t}=$I(ys.create(i[0]));return KI(e,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:ys.ORDER,m:1,k:128,expand:"xmd",hash:ia}))(),qI=(()=>z1.hashToCurve)(),YI=(()=>z1.encodeToCurve)()});var Gn,Lr,co,uo,po,mo,ho,fo,go,bo,hn,Ir,_s=ie(()=>{"use strict";Ka();lt();Gn=class extends U{constructor({cause:e,message:t}={}){let r=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}};Object.defineProperty(Gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Gn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});Lr=class extends U{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${hi(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}};Object.defineProperty(Lr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});co=class extends U{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${hi(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}};Object.defineProperty(co,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});uo=class extends U{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}};Object.defineProperty(uo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});po=class extends U{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}};Object.defineProperty(po,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});mo=class extends U{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}};Object.defineProperty(mo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});ho=class extends U{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}};Object.defineProperty(ho,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});fo=class extends U{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}};Object.defineProperty(fo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});go=class extends U{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}};Object.defineProperty(go,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});bo=class extends U{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}};Object.defineProperty(bo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});hn=class extends U{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${hi(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${hi(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}};Object.defineProperty(hn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});Ir=class extends U{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}});function xs(i,e){let t=(i.details||"").toLowerCase(),r=i instanceof U?i.walk(n=>n?.code===Gn.code):i;return r instanceof U?new Gn({cause:i,message:r.details}):Gn.nodeMessage.test(t)?new Gn({cause:i,message:i.details}):Lr.nodeMessage.test(t)?new Lr({cause:i,maxFeePerGas:e?.maxFeePerGas}):co.nodeMessage.test(t)?new co({cause:i,maxFeePerGas:e?.maxFeePerGas}):uo.nodeMessage.test(t)?new uo({cause:i,nonce:e?.nonce}):po.nodeMessage.test(t)?new po({cause:i,nonce:e?.nonce}):mo.nodeMessage.test(t)?new mo({cause:i,nonce:e?.nonce}):ho.nodeMessage.test(t)?new ho({cause:i}):fo.nodeMessage.test(t)?new fo({cause:i,gas:e?.gas}):go.nodeMessage.test(t)?new go({cause:i,gas:e?.gas}):bo.nodeMessage.test(t)?new bo({cause:i}):hn.nodeMessage.test(t)?new hn({cause:i,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new Ir({cause:i})}var pc=ie(()=>{"use strict";lt();_s()});function vs(i,{format:e}){if(!e)return{};let t={};function r(s){let o=Object.keys(s);for(let l of o)l in i&&(t[l]=i[l]),s[l]&&typeof s[l]=="object"&&!Array.isArray(s[l])&&r(s[l])}let n=e(i||{});return r(n),t}var mc=ie(()=>{"use strict"});function yo(i,e){return({exclude:t,format:r})=>({exclude:t,format:n=>{let s=e(n);if(t)for(let o of t)delete s[o];return{...s,...r(n)}},type:i})}var wm=ie(()=>{"use strict"});function Er(i){let e={};return typeof i.authorizationList<"u"&&(e.authorizationList=JI(i.authorizationList)),typeof i.accessList<"u"&&(e.accessList=i.accessList),typeof i.blobVersionedHashes<"u"&&(e.blobVersionedHashes=i.blobVersionedHashes),typeof i.blobs<"u"&&(typeof i.blobs[0]!="string"?e.blobs=i.blobs.map(t=>xt(t)):e.blobs=i.blobs),typeof i.data<"u"&&(e.data=i.data),typeof i.from<"u"&&(e.from=i.from),typeof i.gas<"u"&&(e.gas=Ie(i.gas)),typeof i.gasPrice<"u"&&(e.gasPrice=Ie(i.gasPrice)),typeof i.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ie(i.maxFeePerBlobGas)),typeof i.maxFeePerGas<"u"&&(e.maxFeePerGas=Ie(i.maxFeePerGas)),typeof i.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ie(i.maxPriorityFeePerGas)),typeof i.nonce<"u"&&(e.nonce=Ie(i.nonce)),typeof i.to<"u"&&(e.to=i.to),typeof i.type<"u"&&(e.type=ZI[i.type]),typeof i.value<"u"&&(e.value=Ie(i.value)),e}function JI(i){return i.map(e=>({address:e.address,r:e.r?Ie(BigInt(e.r)):e.r,s:e.s?Ie(BigInt(e.s)):e.s,chainId:Ie(e.chainId),nonce:Ie(e.nonce),...typeof e.yParity<"u"?{yParity:Ie(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ie(e.v)}:{}}))}var ZI,ca=ie(()=>{"use strict";Ve();ZI={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"}});function X1(i){if(!(!i||i.length===0))return i.reduce((e,{slot:t,value:r})=>{if(t.length!==66)throw new jl({size:t.length,targetSize:66,type:"hex"});if(r.length!==66)throw new jl({size:r.length,targetSize:66,type:"hex"});return e[t]=r,e},{})}function eE(i){let{balance:e,nonce:t,state:r,stateDiff:n,code:s}=i,o={};if(s!==void 0&&(o.code=s),e!==void 0&&(o.balance=Ie(e)),t!==void 0&&(o.nonce=Ie(t)),r!==void 0&&(o.state=X1(r)),n!==void 0){if(o.state)throw new qp;o.stateDiff=X1(n)}return o}function _o(i){if(!i)return;let e={};for(let{address:t,...r}of i){if(!Nt(t,{strict:!1}))throw new zt({address:t});if(e[t])throw new $p({address:t});e[t]=eE(r)}return e}var Lm=ie(()=>{"use strict";an();yp();ny();zr();Ve()});var cP,uP,pP,mP,dP,hP,fP,gP,bP,yP,_P,xP,vP,wP,LP,IP,EP,SP,TP,kP,AP,CP,RP,MP,DP,BP,PP,OP,NP,FP,HP,UP,VP,zP,GP,jP,WP,KP,$P,qP,YP,XP,QP,ZP,JP,eO,tO,iO,rO,nO,sO,aO,oO,lO,cO,uO,pO,mO,dO,hO,fO,gO,bO,yO,_O,xO,vO,wO,LO,IO,EO,SO,TO,kO,AO,CO,RO,MO,DO,BO,PO,OO,NO,FO,HO,UO,VO,zO,GO,jO,WO,KO,$O,qO,YO,xo,Ay=ie(()=>{"use strict";cP=2n**(8n-1n)-1n,uP=2n**(16n-1n)-1n,pP=2n**(24n-1n)-1n,mP=2n**(32n-1n)-1n,dP=2n**(40n-1n)-1n,hP=2n**(48n-1n)-1n,fP=2n**(56n-1n)-1n,gP=2n**(64n-1n)-1n,bP=2n**(72n-1n)-1n,yP=2n**(80n-1n)-1n,_P=2n**(88n-1n)-1n,xP=2n**(96n-1n)-1n,vP=2n**(104n-1n)-1n,wP=2n**(112n-1n)-1n,LP=2n**(120n-1n)-1n,IP=2n**(128n-1n)-1n,EP=2n**(136n-1n)-1n,SP=2n**(144n-1n)-1n,TP=2n**(152n-1n)-1n,kP=2n**(160n-1n)-1n,AP=2n**(168n-1n)-1n,CP=2n**(176n-1n)-1n,RP=2n**(184n-1n)-1n,MP=2n**(192n-1n)-1n,DP=2n**(200n-1n)-1n,BP=2n**(208n-1n)-1n,PP=2n**(216n-1n)-1n,OP=2n**(224n-1n)-1n,NP=2n**(232n-1n)-1n,FP=2n**(240n-1n)-1n,HP=2n**(248n-1n)-1n,UP=2n**(256n-1n)-1n,VP=-(2n**(8n-1n)),zP=-(2n**(16n-1n)),GP=-(2n**(24n-1n)),jP=-(2n**(32n-1n)),WP=-(2n**(40n-1n)),KP=-(2n**(48n-1n)),$P=-(2n**(56n-1n)),qP=-(2n**(64n-1n)),YP=-(2n**(72n-1n)),XP=-(2n**(80n-1n)),QP=-(2n**(88n-1n)),ZP=-(2n**(96n-1n)),JP=-(2n**(104n-1n)),eO=-(2n**(112n-1n)),tO=-(2n**(120n-1n)),iO=-(2n**(128n-1n)),rO=-(2n**(136n-1n)),nO=-(2n**(144n-1n)),sO=-(2n**(152n-1n)),aO=-(2n**(160n-1n)),oO=-(2n**(168n-1n)),lO=-(2n**(176n-1n)),cO=-(2n**(184n-1n)),uO=-(2n**(192n-1n)),pO=-(2n**(200n-1n)),mO=-(2n**(208n-1n)),dO=-(2n**(216n-1n)),hO=-(2n**(224n-1n)),fO=-(2n**(232n-1n)),gO=-(2n**(240n-1n)),bO=-(2n**(248n-1n)),yO=-(2n**(256n-1n)),_O=2n**8n-1n,xO=2n**16n-1n,vO=2n**24n-1n,wO=2n**32n-1n,LO=2n**40n-1n,IO=2n**48n-1n,EO=2n**56n-1n,SO=2n**64n-1n,TO=2n**72n-1n,kO=2n**80n-1n,AO=2n**88n-1n,CO=2n**96n-1n,RO=2n**104n-1n,MO=2n**112n-1n,DO=2n**120n-1n,BO=2n**128n-1n,PO=2n**136n-1n,OO=2n**144n-1n,NO=2n**152n-1n,FO=2n**160n-1n,HO=2n**168n-1n,UO=2n**176n-1n,VO=2n**184n-1n,zO=2n**192n-1n,GO=2n**200n-1n,jO=2n**208n-1n,WO=2n**216n-1n,KO=2n**224n-1n,$O=2n**232n-1n,qO=2n**240n-1n,YO=2n**248n-1n,xo=2n**256n-1n});function ir(i){let{account:e,gasPrice:t,maxFeePerGas:r,maxPriorityFeePerGas:n,to:s}=i,o=e?ht(e):void 0;if(o&&!Nt(o.address))throw new zt({address:o.address});if(s&&!Nt(s))throw new zt({address:s});if(typeof t<"u"&&(typeof r<"u"||typeof n<"u"))throw new Yp;if(r&&r>xo)throw new Lr({maxFeePerGas:r});if(n&&r&&n>r)throw new hn({maxFeePerGas:r,maxPriorityFeePerGas:n})}var ws=ie(()=>{"use strict";di();Ay();an();_s();jr();zr()});function fn(i,e){if(!Nt(i,{strict:!1}))throw new zt({address:i});if(!Nt(e,{strict:!1}))throw new zt({address:e});return i.toLowerCase()===e.toLowerCase()}var ko=ie(()=>{"use strict";an();zr()});function rr(i){let{abi:e,args:t,functionName:r,data:n}=i,s=e[0];if(r){let l=ln({abi:e,args:t,name:r});if(!l)throw new es(r,{docsPath:Dy});s=l}if(s.type!=="function")throw new es(void 0,{docsPath:Dy});if(!s.outputs)throw new pp(s.name,{docsPath:Dy});let o=Ys(s.outputs,n);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}var Dy,Es=ie(()=>{"use strict";pi();Vp();Va();Dy="/docs/contract/decodeFunctionResult"});var hc,ox,Pm,lx,By,Py,Oy,pa=ie(()=>{"use strict";hc=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],ox=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],Pm=[...ox,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],lx=[...ox,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],By=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],Py=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Oy=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}]});var cx,ux=ie(()=>{"use strict";cx="0x82ad56cb"});var Om,px,mx,Nm=ie(()=>{"use strict";Om="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",px="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",mx="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"});var ma,Fm,Hm,fc,da,gc=ie(()=>{"use strict";lt();ma=class extends U{constructor({blockNumber:e,chain:t,contract:r}){super(`Chain "${t.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}},Fm=class extends U{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}},Hm=class extends U{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}},fc=class extends U{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}},da=class extends U{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}});function ha(i){let{abi:e,args:t,bytecode:r}=i;if(!t||t.length===0)return r;let n=e.find(o=>"type"in o&&o.type==="constructor");if(!n)throw new ap({docsPath:Ny});if(!("inputs"in n))throw new Ul({docsPath:Ny});if(!n.inputs||n.inputs.length===0)throw new Ul({docsPath:Ny});let s=cr(n.inputs,t);return Pi([r,s])}var Ny,Um=ie(()=>{"use strict";pi();_r();os();Ny="/docs/contract/encodeDeployData"});function Tr({blockNumber:i,chain:e,contract:t}){let r=e?.contracts?.[t];if(!r)throw new ma({chain:e,contract:{name:t}});if(i&&r.blockCreated&&r.blockCreated>i)throw new ma({blockNumber:i,chain:e,contract:{name:t,blockCreated:r.blockCreated}});return r.address}var fa=ie(()=>{"use strict";gc()});function Vm(i,{docsPath:e,...t}){let r=(()=>{let n=xs(i,t);return n instanceof Ir?i:n})();return new Zs(r,{docsPath:e,...t})}var Fy=ie(()=>{"use strict";Fn();_s();pc()});function zm(){let i=()=>{},e=()=>{};return{promise:new Promise((r,n)=>{i=r,e=n}),resolve:i,reject:e}}var Hy=ie(()=>{"use strict"});function Gm({fn:i,id:e,shouldSplitBatch:t,wait:r=0,sort:n}){let s=async()=>{let d=c();o();let h=d.map(({args:f})=>f);h.length!==0&&i(h).then(f=>{n&&Array.isArray(f)&&f.sort(n);for(let g=0;g<d.length;g++){let{resolve:E}=d[g];E?.([f[g],f])}}).catch(f=>{for(let g=0;g<d.length;g++){let{reject:E}=d[g];E?.(f)}})},o=()=>Uy.delete(e),l=()=>c().map(({args:d})=>d),c=()=>Uy.get(e)||[],p=d=>Uy.set(e,[...c(),d]);return{flush:o,async schedule(d){let{promise:h,resolve:f,reject:g}=zm();return t?.([...l(),d])&&s(),c().length>0?(p({args:d,resolve:f,reject:g}),h):(p({args:d,resolve:f,reject:g}),setTimeout(s,r),h)}}}var Uy,Vy=ie(()=>{"use strict";Hy();Uy=new Map});var jm,Wm,Km,dx=ie(()=>{"use strict";Ki();lt();tm();jm=class extends U{constructor({callbackSelector:e,cause:t,data:r,extraData:n,sender:s,urls:o}){super(t.shortMessage||"An error occurred while fetching for an offchain result.",{cause:t,metaMessages:[...t.metaMessages||[],t.metaMessages?.length?"":[],"Offchain Gateway Call:",o&&["  Gateway URL(s):",...o.map(l=>`    ${Qs(l)}`)],`  Sender: ${s}`,`  Data: ${r}`,`  Callback selector: ${e}`,`  Extra data: ${n}`].flat(),name:"OffchainLookupError"})}},Wm=class extends U{constructor({result:e,url:t}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${Qs(t)}`,`Response: ${vt(e)}`],name:"OffchainLookupResponseMalformedError"})}},Km=class extends U{constructor({sender:e,to:t}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${t}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}});var gx={};Mb(gx,{ccipRequest:()=>fx,offchainLookup:()=>oE,offchainLookupAbiItem:()=>hx,offchainLookupSignature:()=>aE});async function oE(i,{blockNumber:e,blockTag:t,data:r,to:n}){let{args:s}=zp({data:r,abi:[hx]}),[o,l,c,p,d]=s,{ccipRead:h}=i,f=h&&typeof h?.request=="function"?h.request:fx;try{if(!fn(n,o))throw new Km({sender:o,to:n});let g=await f({data:c,sender:o,urls:l}),{data:E}=await gn(i,{blockNumber:e,blockTag:t,data:Wi([p,cr([{type:"bytes"},{type:"bytes"}],[g,d])]),to:n});return E}catch(g){throw new jm({callbackSelector:p,cause:g,data:r,extraData:d,sender:o,urls:l})}}async function fx({data:i,sender:e,urls:t}){let r=new Error("An unknown error occurred.");for(let n=0;n<t.length;n++){let s=t[n],o=s.includes("{data}")?"GET":"POST",l=o==="POST"?{data:i,sender:e}:void 0,c=o==="POST"?{"Content-Type":"application/json"}:{};try{let p=await fetch(s.replace("{sender}",e.toLowerCase()).replace("{data}",i),{body:JSON.stringify(l),headers:c,method:o}),d;if(p.headers.get("Content-Type")?.startsWith("application/json")?d=(await p.json()).data:d=await p.text(),!p.ok){r=new vr({body:l,details:d?.error?vt(d.error):p.statusText,headers:p.headers,status:p.status,url:s});continue}if(!ri(d)){r=new Wm({result:d,url:s});continue}return d}catch(p){r=new vr({body:l,details:p.message,url:s})}}throw r}var aE,hx,bx=ie(()=>{"use strict";Mo();dx();Js();iy();os();ko();_r();Pr();Ki();aE="0x556f1830",hx={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]}});async function gn(i,e){let{account:t=i.account,batch:r=!!i.batch?.multicall,blockNumber:n,blockTag:s="latest",accessList:o,blobs:l,code:c,data:p,factory:d,factoryData:h,gas:f,gasPrice:g,maxFeePerBlobGas:E,maxFeePerGas:I,maxPriorityFeePerGas:_,nonce:S,to:M,value:R,stateOverride:V,...H}=e,K=t?ht(t):void 0;if(c&&(d||h))throw new U("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(c&&M)throw new U("Cannot provide both `code` & `to` as parameters.");let q=c&&p,ce=d&&h&&M&&p,Q=q||ce,ke=(()=>q?uE({code:c,data:p}):ce?pE({data:p,factory:d,factoryData:h,to:M}):p)();try{ir(e);let W=(n?Ie(n):void 0)||s,ut=_o(V),le=i.chain?.formatters?.transactionRequest?.format,we=(le||Er)({...vs(H,{format:le}),from:K?.address,accessList:o,blobs:l,data:ke,gas:f,gasPrice:g,maxFeePerBlobGas:E,maxFeePerGas:I,maxPriorityFeePerGas:_,nonce:S,to:Q?void 0:M,value:R});if(r&&lE({request:we})&&!ut)try{return await cE(i,{...we,blockNumber:n,blockTag:s})}catch(Ge){if(!(Ge instanceof fc)&&!(Ge instanceof ma))throw Ge}let D=await i.request({method:"eth_call",params:ut?[we,W,ut]:[we,W]});return D==="0x"?{data:void 0}:{data:D}}catch(ve){let W=mE(ve),{offchainLookup:ut,offchainLookupSignature:le}=await Promise.resolve().then(()=>(bx(),gx));if(i.ccipRead!==!1&&W?.slice(0,10)===le&&M)return{data:await ut(i,{data:W,to:M})};throw Q&&W?.slice(0,10)==="0x101bb98d"?new tc({factory:d}):Vm(ve,{...e,account:K,chain:i.chain})}}function lE({request:i}){let{data:e,to:t,...r}=i;return!(!e||e.startsWith(cx)||!t||Object.values(r).filter(n=>typeof n<"u").length>0)}async function cE(i,e){let{batchSize:t=1024,wait:r=0}=typeof i.batch?.multicall=="object"?i.batch.multicall:{},{blockNumber:n,blockTag:s="latest",data:o,multicallAddress:l,to:c}=e,p=l;if(!p){if(!i.chain)throw new fc;p=Tr({blockNumber:n,chain:i.chain,contract:"multicall3"})}let h=(n?Ie(n):void 0)||s,{schedule:f}=Gm({id:`${i.uid}.${h}`,wait:r,shouldSplitBatch(I){return I.reduce((S,{data:M})=>S+(M.length-2),0)>t*2},fn:async I=>{let _=I.map(R=>({allowFailure:!0,callData:R.data,target:R.to})),S=Kt({abi:hc,args:[_],functionName:"aggregate3"}),M=await i.request({method:"eth_call",params:[{data:S,to:p},h]});return rr({abi:hc,args:[_],functionName:"aggregate3",data:M||"0x"})}}),[{returnData:g,success:E}]=await f({data:o,to:c});if(!E)throw new Wr({data:g});return g==="0x"?{data:void 0}:{data:g}}function uE(i){let{code:e,data:t}=i;return ha({abi:ip(["constructor(bytes, bytes)"]),bytecode:Om,args:[e,t]})}function pE(i){let{data:e,factory:t,factoryData:r,to:n}=i;return ha({abi:ip(["constructor(address, bytes, address, bytes)"]),bytecode:px,args:[n,e,t,r]})}function mE(i){if(!(i instanceof U))return;let e=i.walk();return typeof e?.data=="object"?e.data?.data:e.data}var Mo=ie(()=>{"use strict";np();di();pa();ux();Nm();lt();gc();Fn();Es();Um();xr();fa();Ve();Fy();mc();ca();Vy();Lm();ws()});var jw=B0(Ci=>{"use strict";var d0=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,e,t){i!=Array.prototype&&i!=Object.prototype&&(i[e]=t.value)},_a=typeof window<"u"&&window===Ci?Ci:typeof global<"u"&&global!=null?global:Ci;function yS(i,e){if(e){var t=_a;i=i.split(".");for(var r=0;r<i.length-1;r++){var n=i[r];n in t||(t[n]={}),t=t[n]}i=i[i.length-1],r=t[i],e=e(r),e!=r&&e!=null&&d0(t,i,{configurable:!0,writable:!0,value:e})}}function _S(i){var e=0;return function(){return e<i.length?{done:!1,value:i[e++]}:{done:!0}}}function fw(){fw=function(){},_a.Symbol||(_a.Symbol=xS)}function gw(i,e){this.a=i,d0(this,"description",{configurable:!0,writable:!0,value:e})}gw.prototype.toString=function(){return this.a};var xS=function(){function i(t){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return new gw("jscomp_symbol_"+(t||"")+"_"+e++,t)}var e=0;return i}();function h0(){fw();var i=_a.Symbol.iterator;i||(i=_a.Symbol.iterator=_a.Symbol("Symbol.iterator")),typeof Array.prototype[i]!="function"&&d0(Array.prototype,i,{configurable:!0,writable:!0,value:function(){return vS(_S(this))}}),h0=function(){}}function vS(i){return h0(),i={next:i},i[_a.Symbol.iterator]=function(){return this},i}function wS(i,e){h0(),i instanceof String&&(i+="");var t=0,r={next:function(){if(t<i.length){var n=t++;return{value:e(n,i[n]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}yS("Array.prototype.entries",function(i){return i||function(){return wS(this,function(e,t){return[e,t]})}});var LS=Ci||self;function De(i,e,t){i=i.split("."),t=t||LS,i[0]in t||typeof t.execScript>"u"||t.execScript("var "+i[0]);for(var r;i.length&&(r=i.shift());)i.length||e===void 0?t[r]&&t[r]!==Object.prototype[r]?t=t[r]:t=t[r]={}:t[r]=e}function Kn(i){var e=typeof i;if(e=="object")if(i){if(i instanceof Array)return"array";if(i instanceof Object)return e;var t=Object.prototype.toString.call(i);if(t=="[object Window]")return"object";if(t=="[object Array]"||typeof i.length=="number"&&typeof i.splice<"u"&&typeof i.propertyIsEnumerable<"u"&&!i.propertyIsEnumerable("splice"))return"array";if(t=="[object Function]"||typeof i.call<"u"&&typeof i.propertyIsEnumerable<"u"&&!i.propertyIsEnumerable("call"))return"function"}else return"null";else if(e=="function"&&typeof i.call>"u")return"object";return e}function uw(i){var e=typeof i;return e=="object"&&i!=null||e=="function"}function IS(i,e,t){De(i,e,t)}function ES(i,e){function t(){}t.prototype=e.prototype,i.prototype=new t,i.prototype.constructor=i}var pw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SS(i,e){for(var t,r,n=1;n<arguments.length;n++){r=arguments[n];for(t in r)i[t]=r[t];for(var s=0;s<pw.length;s++)t=pw[s],Object.prototype.hasOwnProperty.call(r,t)&&(i[t]=r[t])}}var TS=Array.prototype.forEach?function(i,e){Array.prototype.forEach.call(i,e,void 0)}:function(i,e){for(var t=i.length,r=typeof i=="string"?i.split(""):i,n=0;n<t;n++)n in r&&e.call(void 0,r[n],n,i)},Dc=Array.prototype.map?function(i,e){return Array.prototype.map.call(i,e,void 0)}:function(i,e){for(var t=i.length,r=Array(t),n=typeof i=="string"?i.split(""):i,s=0;s<t;s++)s in n&&(r[s]=e.call(void 0,n[s],s,i));return r};function kS(i,e,t){return 2>=arguments.length?Array.prototype.slice.call(i,e):Array.prototype.slice.call(i,e,t)}function Gd(i,e,t,r){var n="Assertion failed";if(t){n+=": "+t;var s=r}else i&&(n+=": "+i,s=e);throw Error(n,s||[])}function G(i,e,t){for(var r=[],n=2;n<arguments.length;++n)r[n-2]=arguments[n];return i||Gd("",null,e,r),i}function AS(i,e,t){for(var r=[],n=2;n<arguments.length;++n)r[n-2]=arguments[n];typeof i!="string"&&Gd("Expected string but got %s: %s.",[Kn(i),i],e,r)}function CS(i,e,t){for(var r=[],n=2;n<arguments.length;++n)r[n-2]=arguments[n];Array.isArray(i)||Gd("Expected array but got %s: %s.",[Kn(i),i],e,r)}function bi(i,e){for(var t=[],r=1;r<arguments.length;++r)t[r-1]=arguments[r];throw Error("Failure"+(i?": "+i:""),t)}function Qr(i,e,t,r){for(var n=[],s=3;s<arguments.length;++s)n[s-3]=arguments[s];i instanceof e||Gd("Expected instanceof %s but got %s.",[mw(e),mw(i)],t,n)}function mw(i){return i instanceof Function?i.displayName||i.name||"unknown type name":i instanceof Object?i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i):i===null?"null":typeof i}function We(i,e){if(this.c=i,this.b=e,this.a={},this.arrClean=!0,0<this.c.length){for(i=0;i<this.c.length;i++){e=this.c[i];var t=e[0];this.a[t.toString()]=new bw(t,e[1])}this.arrClean=!0}}De("jspb.Map",We,void 0);We.prototype.g=function(){if(this.arrClean){if(this.b){var i=this.a,e;for(e in i)if(Object.prototype.hasOwnProperty.call(i,e)){var t=i[e].a;t&&t.g()}}}else{for(this.c.length=0,i=Rs(this),i.sort(),e=0;e<i.length;e++){var r=this.a[i[e]];(t=r.a)&&t.g(),this.c.push([r.key,r.value])}this.arrClean=!0}return this.c};We.prototype.toArray=We.prototype.g;We.prototype.Mc=function(i,e){for(var t=this.g(),r=[],n=0;n<t.length;n++){var s=this.a[t[n][0].toString()];Xo(this,s);var o=s.a;o?(G(e),r.push([s.key,e(i,o)])):r.push([s.key,s.value])}return r};We.prototype.toObject=We.prototype.Mc;We.fromObject=function(i,e,t){e=new We([],e);for(var r=0;r<i.length;r++){var n=i[r][0],s=t(i[r][1]);e.set(n,s)}return e};function Bc(i){this.a=0,this.b=i}Bc.prototype.next=function(){return this.a<this.b.length?{done:!1,value:this.b[this.a++]}:{done:!0,value:void 0}};typeof Symbol<"u"&&(Bc.prototype[Symbol.iterator]=function(){return this});We.prototype.Jb=function(){return Rs(this).length};We.prototype.getLength=We.prototype.Jb;We.prototype.clear=function(){this.a={},this.arrClean=!1};We.prototype.clear=We.prototype.clear;We.prototype.Cb=function(i){i=i.toString();var e=this.a.hasOwnProperty(i);return delete this.a[i],this.arrClean=!1,e};We.prototype.del=We.prototype.Cb;We.prototype.Eb=function(){var i=[],e=Rs(this);e.sort();for(var t=0;t<e.length;t++){var r=this.a[e[t]];i.push([r.key,r.value])}return i};We.prototype.getEntryList=We.prototype.Eb;We.prototype.entries=function(){var i=[],e=Rs(this);e.sort();for(var t=0;t<e.length;t++){var r=this.a[e[t]];i.push([r.key,Xo(this,r)])}return new Bc(i)};We.prototype.entries=We.prototype.entries;We.prototype.keys=function(){var i=[],e=Rs(this);e.sort();for(var t=0;t<e.length;t++)i.push(this.a[e[t]].key);return new Bc(i)};We.prototype.keys=We.prototype.keys;We.prototype.values=function(){var i=[],e=Rs(this);e.sort();for(var t=0;t<e.length;t++)i.push(Xo(this,this.a[e[t]]));return new Bc(i)};We.prototype.values=We.prototype.values;We.prototype.forEach=function(i,e){var t=Rs(this);t.sort();for(var r=0;r<t.length;r++){var n=this.a[t[r]];i.call(e,Xo(this,n),n.key,this)}};We.prototype.forEach=We.prototype.forEach;We.prototype.set=function(i,e){var t=new bw(i);return this.b?(t.a=e,t.value=e.g()):t.value=e,this.a[i.toString()]=t,this.arrClean=!1,this};We.prototype.set=We.prototype.set;function Xo(i,e){return i.b?(e.a||(e.a=new i.b(e.value)),e.a):e.value}We.prototype.get=function(i){if(i=this.a[i.toString()])return Xo(this,i)};We.prototype.get=We.prototype.get;We.prototype.has=function(i){return i.toString()in this.a};We.prototype.has=We.prototype.has;We.prototype.Jc=function(i,e,t,r,n){var s=Rs(this);s.sort();for(var o=0;o<s.length;o++){var l=this.a[s[o]];e.Va(i),t.call(e,1,l.key),this.b?r.call(e,2,Xo(this,l),n):r.call(e,2,l.value),e.Ya()}};We.prototype.serializeBinary=We.prototype.Jc;We.deserializeBinary=function(i,e,t,r,n,s,o){for(;e.oa()&&!e.bb();){var l=e.c;l==1?s=t.call(e):l==2&&(i.b?(G(n),o||(o=new i.b),r.call(e,o,n)):o=r.call(e))}G(s!=null),G(o!=null),i.set(s,o)};function Rs(i){i=i.a;var e=[],t;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.push(t);return e}function bw(i,e){this.key=i,this.value=e,this.a=void 0}function yw(i){if(8192>=i.length)return String.fromCharCode.apply(null,i);for(var e="",t=0;t<i.length;t+=8192)e+=String.fromCharCode.apply(null,kS(i,t,t+8192));return e}var c0={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},zd={"'":"\\'"},_w={},Ac=null;function xw(i,e){e===void 0&&(e=0),ww(),e=_w[e];for(var t=[],r=0;r<i.length;r+=3){var n=i[r],s=r+1<i.length,o=s?i[r+1]:0,l=r+2<i.length,c=l?i[r+2]:0,p=n>>2;n=(n&3)<<4|o>>4,o=(o&15)<<2|c>>6,c&=63,l||(c=64,s||(o=64)),t.push(e[p],e[n],e[o]||"",e[c]||"")}return t.join("")}function vw(i){var e=i.length,t=3*e/4;t%3?t=Math.floor(t):"=.".indexOf(i[e-1])!=-1&&(t="=.".indexOf(i[e-2])!=-1?t-2:t-1);var r=new Uint8Array(t),n=0;return RS(i,function(s){r[n++]=s}),r.subarray(0,n)}function RS(i,e){function t(c){for(;r<i.length;){var p=i.charAt(r++),d=Ac[p];if(d!=null)return d;if(!/^[\s\xa0]*$/.test(p))throw Error("Unknown base64 encoding at char: "+p)}return c}ww();for(var r=0;;){var n=t(-1),s=t(0),o=t(64),l=t(64);if(l===64&&n===-1)break;e(n<<2|s>>4),o!=64&&(e(s<<4&240|o>>2),l!=64&&e(o<<6&192|l))}}function ww(){if(!Ac){Ac={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],t=0;5>t;t++){var r=i.concat(e[t].split(""));_w[t]=r;for(var n=0;n<r.length;n++){var s=r[n];Ac[s]===void 0&&(Ac[s]=n)}}}}De("jspb.ConstBinaryMessage",function(){},void 0);De("jspb.BinaryMessage",function(){},void 0);De("jspb.BinaryConstants.FieldType",{yb:-1,ee:1,FLOAT:2,ke:3,te:4,je:5,xb:6,wb:7,BOOL:8,re:9,ie:10,le:11,ce:12,se:13,ge:14,me:15,ne:16,oe:17,pe:18,he:30,ve:31},void 0);De("jspb.BinaryConstants.WireType",{yb:-1,ue:0,xb:1,de:2,qe:3,fe:4,wb:5},void 0);De("jspb.BinaryConstants.FieldTypeToWireType",function(i){switch(i){case 5:case 3:case 13:case 4:case 17:case 18:case 8:case 14:case 31:return 0;case 1:case 6:case 16:case 30:return 1;case 9:case 11:case 12:return 2;case 2:case 7:case 15:return 5;default:return-1}},void 0);De("jspb.BinaryConstants.INVALID_FIELD_NUMBER",-1,void 0);De("jspb.BinaryConstants.FLOAT32_EPS",1401298464324817e-60,void 0);De("jspb.BinaryConstants.FLOAT32_MIN",11754943508222875e-54,void 0);De("jspb.BinaryConstants.FLOAT32_MAX",34028234663852886e22,void 0);De("jspb.BinaryConstants.FLOAT64_EPS",5e-324,void 0);De("jspb.BinaryConstants.FLOAT64_MIN",22250738585072014e-324,void 0);De("jspb.BinaryConstants.FLOAT64_MAX",17976931348623157e292,void 0);De("jspb.BinaryConstants.TWO_TO_20",1048576,void 0);De("jspb.BinaryConstants.TWO_TO_23",8388608,void 0);De("jspb.BinaryConstants.TWO_TO_31",2147483648,void 0);De("jspb.BinaryConstants.TWO_TO_32",4294967296,void 0);De("jspb.BinaryConstants.TWO_TO_52",4503599627370496,void 0);De("jspb.BinaryConstants.TWO_TO_63",9223372036854776e3,void 0);De("jspb.BinaryConstants.TWO_TO_64",18446744073709552e3,void 0);De("jspb.BinaryConstants.ZERO_HASH","\0\0\0\0\0\0\0\0",void 0);var Tt=0,Rt=0;De("jspb.utils.getSplit64Low",function(){return Tt},void 0);De("jspb.utils.getSplit64High",function(){return Rt},void 0);function f0(i){var e=i>>>0;i=Math.floor((i-e)/4294967296)>>>0,Tt=e,Rt=i}De("jspb.utils.splitUint64",f0,void 0);function Pc(i){var e=0>i;i=Math.abs(i);var t=i>>>0;i=Math.floor((i-t)/4294967296),i>>>=0,e&&(i=~i>>>0,t=(~t>>>0)+1,4294967295<t&&(t=0,i++,4294967295<i&&(i=0))),Tt=t,Rt=i}De("jspb.utils.splitInt64",Pc,void 0);function Lw(i){var e=0>i;i=2*Math.abs(i),f0(i),i=Tt;var t=Rt;e&&(i==0?t==0?t=i=4294967295:(t--,i=4294967295):i--),Tt=i,Rt=t}De("jspb.utils.splitZigzag64",Lw,void 0);function Iw(i){var e=0>i?1:0;if(i=e?-i:i,i===0)0<1/i?Tt=Rt=0:(Rt=0,Tt=2147483648);else if(isNaN(i))Rt=0,Tt=2147483647;else if(34028234663852886e22<i)Rt=0,Tt=(e<<31|2139095040)>>>0;else if(11754943508222875e-54>i)i=Math.round(i/Math.pow(2,-149)),Rt=0,Tt=(e<<31|i)>>>0;else{var t=Math.floor(Math.log(i)/Math.LN2);i*=Math.pow(2,-t),i=Math.round(8388608*i),16777216<=i&&++t,Rt=0,Tt=(e<<31|t+127<<23|i&8388607)>>>0}}De("jspb.utils.splitFloat32",Iw,void 0);function Ew(i){var e=0>i?1:0;if(i=e?-i:i,i===0)Rt=0<1/i?0:2147483648,Tt=0;else if(isNaN(i))Rt=2147483647,Tt=4294967295;else if(17976931348623157e292<i)Rt=(e<<31|2146435072)>>>0,Tt=0;else if(22250738585072014e-324>i)i/=Math.pow(2,-1074),Rt=(e<<31|i/4294967296)>>>0,Tt=i>>>0;else{var t=i,r=0;if(2<=t)for(;2<=t&&1023>r;)r++,t/=2;else for(;1>t&&-1022<r;)t*=2,r--;i*=Math.pow(2,-r),Rt=(e<<31|r+1023<<20|1048576*i&1048575)>>>0,Tt=4503599627370496*i>>>0}}De("jspb.utils.splitFloat64",Ew,void 0);function Ms(i){var e=i.charCodeAt(4),t=i.charCodeAt(5),r=i.charCodeAt(6),n=i.charCodeAt(7);Tt=i.charCodeAt(0)+(i.charCodeAt(1)<<8)+(i.charCodeAt(2)<<16)+(i.charCodeAt(3)<<24)>>>0,Rt=e+(t<<8)+(r<<16)+(n<<24)>>>0}De("jspb.utils.splitHash64",Ms,void 0);function Qo(i,e){return 4294967296*e+(i>>>0)}De("jspb.utils.joinUint64",Qo,void 0);function Oc(i,e){var t=e&2147483648;return t&&(i=~i+1>>>0,e=~e>>>0,i==0&&(e=e+1>>>0)),i=Qo(i,e),t?-i:i}De("jspb.utils.joinInt64",Oc,void 0);function jd(i,e,t){var r=e>>31;return t(i<<1^r,(e<<1|i>>>31)^r)}De("jspb.utils.toZigzag64",jd,void 0);function Sw(i,e){return Wd(i,e,Oc)}De("jspb.utils.joinZigzag64",Sw,void 0);function Wd(i,e,t){var r=-(i&1);return t((i>>>1|e<<31)^r,e>>>1^r)}De("jspb.utils.fromZigzag64",Wd,void 0);function Tw(i){var e=2*(i>>31)+1,t=i>>>23&255;return i&=8388607,t==255?i?NaN:1/0*e:t==0?e*Math.pow(2,-149)*i:e*Math.pow(2,t-150)*(i+Math.pow(2,23))}De("jspb.utils.joinFloat32",Tw,void 0);function kw(i,e){var t=2*(e>>31)+1,r=e>>>20&2047;return i=4294967296*(e&1048575)+i,r==2047?i?NaN:1/0*t:r==0?t*Math.pow(2,-1074)*i:t*Math.pow(2,r-1075)*(i+4503599627370496)}De("jspb.utils.joinFloat64",kw,void 0);function Kd(i,e){return String.fromCharCode(i>>>0&255,i>>>8&255,i>>>16&255,i>>>24&255,e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255)}De("jspb.utils.joinHash64",Kd,void 0);De("jspb.utils.DIGITS","0123456789abcdef".split(""),void 0);function Nc(i,e){function t(n,s){return n=n?String(n):"",s?"0000000".slice(n.length)+n:n}if(2097151>=e)return""+Qo(i,e);var r=(i>>>24|e<<8)>>>0&16777215;return e=e>>16&65535,i=(i&16777215)+6777216*r+6710656*e,r+=8147497*e,e*=2,1e7<=i&&(r+=Math.floor(i/1e7),i%=1e7),1e7<=r&&(e+=Math.floor(r/1e7),r%=1e7),t(e,0)+t(r,e)+t(i,1)}De("jspb.utils.joinUnsignedDecimalString",Nc,void 0);function Fc(i,e){var t=e&2147483648;return t&&(i=~i+1>>>0,e=~e+(i==0?1:0)>>>0),i=Nc(i,e),t?"-"+i:i}De("jspb.utils.joinSignedDecimalString",Fc,void 0);function Aw(i,e){Ms(i),i=Tt;var t=Rt;return e?Fc(i,t):Nc(i,t)}De("jspb.utils.hash64ToDecimalString",Aw,void 0);De("jspb.utils.hash64ArrayToDecimalStrings",function(i,e){for(var t=Array(i.length),r=0;r<i.length;r++)t[r]=Aw(i[r],e);return t},void 0);function Hc(i){function e(o,l){for(var c=0;8>c&&(o!==1||0<l);c++)l=o*n[c]+l,n[c]=l&255,l>>>=8}function t(){for(var o=0;8>o;o++)n[o]=~n[o]&255}G(0<i.length);var r=!1;i[0]==="-"&&(r=!0,i=i.slice(1));for(var n=[0,0,0,0,0,0,0,0],s=0;s<i.length;s++)e(10,i.charCodeAt(s)-48);return r&&(t(),e(1,1)),yw(n)}De("jspb.utils.decimalStringToHash64",Hc,void 0);De("jspb.utils.splitDecimalString",function(i){Ms(Hc(i))},void 0);function dw(i){return String.fromCharCode(10>i?48+i:87+i)}function hw(i){return 97<=i?i-97+10:i-48}De("jspb.utils.hash64ToHexString",function(i){var e=Array(18);e[0]="0",e[1]="x";for(var t=0;8>t;t++){var r=i.charCodeAt(7-t);e[2*t+2]=dw(r>>4),e[2*t+3]=dw(r&15)}return e.join("")},void 0);De("jspb.utils.hexStringToHash64",function(i){i=i.toLowerCase(),G(i.length==18),G(i[0]=="0"),G(i[1]=="x");for(var e="",t=0;8>t;t++)e=String.fromCharCode(16*hw(i.charCodeAt(2*t+2))+hw(i.charCodeAt(2*t+3)))+e;return e},void 0);De("jspb.utils.hash64ToNumber",function(i,e){Ms(i),i=Tt;var t=Rt;return e?Oc(i,t):Qo(i,t)},void 0);De("jspb.utils.numberToHash64",function(i){return Pc(i),Kd(Tt,Rt)},void 0);De("jspb.utils.countVarints",function(i,e,t){for(var r=0,n=e;n<t;n++)r+=i[n]>>7;return t-e-r},void 0);De("jspb.utils.countVarintFields",function(i,e,t,r){var n=0;if(r*=8,128>r)for(;e<t&&i[e++]==r;)for(n++;;){var s=i[e++];if(!(s&128))break}else for(;e<t;){for(s=r;128<s;){if(i[e]!=(s&127|128))return n;e++,s>>=7}if(i[e++]!=s)break;for(n++;s=i[e++],(s&128)!=0;);}return n},void 0);function Cw(i,e,t,r,n){var s=0;if(128>r)for(;e<t&&i[e++]==r;)s++,e+=n;else for(;e<t;){for(var o=r;128<o;){if(i[e++]!=(o&127|128))return s;o>>=7}if(i[e++]!=o)break;s++,e+=n}return s}De("jspb.utils.countFixed32Fields",function(i,e,t,r){return Cw(i,e,t,8*r+5,4)},void 0);De("jspb.utils.countFixed64Fields",function(i,e,t,r){return Cw(i,e,t,8*r+1,8)},void 0);De("jspb.utils.countDelimitedFields",function(i,e,t,r){var n=0;for(r=8*r+2;e<t;){for(var s=r;128<s;){if(i[e++]!=(s&127|128))return n;s>>=7}if(i[e++]!=s)break;n++;for(var o=0,l=1;s=i[e++],o+=(s&127)*l,l*=128,(s&128)!=0;);e+=o}return n},void 0);De("jspb.utils.debugBytesToTextFormat",function(i){var e='"';if(i){i=$d(i);for(var t=0;t<i.length;t++)e+="\\x",16>i[t]&&(e+="0"),e+=i[t].toString(16)}return e+'"'},void 0);De("jspb.utils.debugScalarToTextFormat",function(i){if(typeof i=="string"){i=String(i);for(var e=['"'],t=0;t<i.length;t++){var r=i.charAt(t),n=r.charCodeAt(0),s=t+1,o;(o=c0[r])||(31<n&&127>n||(n=r,n in zd?r=zd[n]:n in c0?r=zd[n]=c0[n]:(o=n.charCodeAt(0),31<o&&127>o?r=n:(256>o?(r="\\x",(16>o||256<o)&&(r+="0")):(r="\\u",4096>o&&(r+="0")),r+=o.toString(16).toUpperCase()),r=zd[n]=r)),o=r),e[s]=o}e.push('"'),i=e.join("")}else i=i.toString();return i},void 0);De("jspb.utils.stringToByteArray",function(i){for(var e=new Uint8Array(i.length),t=0;t<i.length;t++){var r=i.charCodeAt(t);if(255<r)throw Error("Conversion error: string contains codepoint outside of byte range");e[t]=r}return e},void 0);function $d(i){return i.constructor===Uint8Array?i:i.constructor===ArrayBuffer?new Uint8Array(i):i.constructor===Array?new Uint8Array(i):i.constructor===String?vw(i):i instanceof Uint8Array?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):(bi("Type not convertible to Uint8Array."),new Uint8Array(0))}De("jspb.utils.byteSourceToUint8Array",$d,void 0);function z(i,e,t){this.b=null,this.a=this.c=this.h=0,this.v=!1,i&&this.H(i,e,t)}De("jspb.BinaryDecoder",z,void 0);var Cc=[];z.getInstanceCacheLength=function(){return Cc.length};function qd(i,e,t){if(Cc.length){var r=Cc.pop();return i&&r.H(i,e,t),r}return new z(i,e,t)}z.alloc=qd;z.prototype.Ca=function(){this.clear(),100>Cc.length&&Cc.push(this)};z.prototype.free=z.prototype.Ca;z.prototype.clone=function(){return qd(this.b,this.h,this.c-this.h)};z.prototype.clone=z.prototype.clone;z.prototype.clear=function(){this.b=null,this.a=this.c=this.h=0,this.v=!1};z.prototype.clear=z.prototype.clear;z.prototype.Y=function(){return this.b};z.prototype.getBuffer=z.prototype.Y;z.prototype.H=function(i,e,t){this.b=$d(i),this.h=e!==void 0?e:0,this.c=t!==void 0?this.h+t:this.b.length,this.a=this.h};z.prototype.setBlock=z.prototype.H;z.prototype.Db=function(){return this.c};z.prototype.getEnd=z.prototype.Db;z.prototype.setEnd=function(i){this.c=i};z.prototype.setEnd=z.prototype.setEnd;z.prototype.reset=function(){this.a=this.h};z.prototype.reset=z.prototype.reset;z.prototype.B=function(){return this.a};z.prototype.getCursor=z.prototype.B;z.prototype.Ma=function(i){this.a=i};z.prototype.setCursor=z.prototype.Ma;z.prototype.advance=function(i){this.a+=i,G(this.a<=this.c)};z.prototype.advance=z.prototype.advance;z.prototype.ya=function(){return this.a==this.c};z.prototype.atEnd=z.prototype.ya;z.prototype.Qb=function(){return this.a>this.c};z.prototype.pastEnd=z.prototype.Qb;z.prototype.getError=function(){return this.v||0>this.a||this.a>this.c};z.prototype.getError=z.prototype.getError;z.prototype.w=function(i){for(var e=128,t=0,r=0,n=0;4>n&&128<=e;n++)e=this.b[this.a++],t|=(e&127)<<7*n;if(128<=e&&(e=this.b[this.a++],t|=(e&127)<<28,r|=(e&127)>>4),128<=e)for(n=0;5>n&&128<=e;n++)e=this.b[this.a++],r|=(e&127)<<7*n+3;if(128>e)return i(t>>>0,r>>>0);bi("Failed to read varint, encoding is invalid."),this.v=!0};z.prototype.readSplitVarint64=z.prototype.w;z.prototype.ea=function(i){return this.w(function(e,t){return Wd(e,t,i)})};z.prototype.readSplitZigzagVarint64=z.prototype.ea;z.prototype.ta=function(i){var e=this.b,t=this.a;this.a+=8;for(var r=0,n=0,s=t+7;s>=t;s--)r=r<<8|e[s],n=n<<8|e[s+4];return i(r,n)};z.prototype.readSplitFixed64=z.prototype.ta;z.prototype.kb=function(){for(;this.b[this.a]&128;)this.a++;this.a++};z.prototype.skipVarint=z.prototype.kb;z.prototype.mb=function(i){for(;128<i;)this.a--,i>>>=7;this.a--};z.prototype.unskipVarint=z.prototype.mb;z.prototype.o=function(){var i=this.b,e=i[this.a],t=e&127;return 128>e?(this.a+=1,G(this.a<=this.c),t):(e=i[this.a+1],t|=(e&127)<<7,128>e?(this.a+=2,G(this.a<=this.c),t):(e=i[this.a+2],t|=(e&127)<<14,128>e?(this.a+=3,G(this.a<=this.c),t):(e=i[this.a+3],t|=(e&127)<<21,128>e?(this.a+=4,G(this.a<=this.c),t):(e=i[this.a+4],t|=(e&15)<<28,128>e?(this.a+=5,G(this.a<=this.c),t>>>0):(this.a+=5,128<=i[this.a++]&&128<=i[this.a++]&&128<=i[this.a++]&&128<=i[this.a++]&&128<=i[this.a++]&&G(!1),G(this.a<=this.c),t)))))};z.prototype.readUnsignedVarint32=z.prototype.o;z.prototype.da=function(){return~~this.o()};z.prototype.readSignedVarint32=z.prototype.da;z.prototype.O=function(){return this.o().toString()};z.prototype.Ea=function(){return this.da().toString()};z.prototype.readSignedVarint32String=z.prototype.Ea;z.prototype.Ia=function(){var i=this.o();return i>>>1^-(i&1)};z.prototype.readZigzagVarint32=z.prototype.Ia;z.prototype.Ga=function(){return this.w(Qo)};z.prototype.readUnsignedVarint64=z.prototype.Ga;z.prototype.Ha=function(){return this.w(Nc)};z.prototype.readUnsignedVarint64String=z.prototype.Ha;z.prototype.sa=function(){return this.w(Oc)};z.prototype.readSignedVarint64=z.prototype.sa;z.prototype.Fa=function(){return this.w(Fc)};z.prototype.readSignedVarint64String=z.prototype.Fa;z.prototype.Ja=function(){return this.w(Sw)};z.prototype.readZigzagVarint64=z.prototype.Ja;z.prototype.fb=function(){return this.ea(Kd)};z.prototype.readZigzagVarintHash64=z.prototype.fb;z.prototype.Ka=function(){return this.ea(Fc)};z.prototype.readZigzagVarint64String=z.prototype.Ka;z.prototype.Gc=function(){var i=this.b[this.a];return this.a+=1,G(this.a<=this.c),i};z.prototype.readUint8=z.prototype.Gc;z.prototype.Ec=function(){var i=this.b[this.a],e=this.b[this.a+1];return this.a+=2,G(this.a<=this.c),i<<0|e<<8};z.prototype.readUint16=z.prototype.Ec;z.prototype.m=function(){var i=this.b[this.a],e=this.b[this.a+1],t=this.b[this.a+2],r=this.b[this.a+3];return this.a+=4,G(this.a<=this.c),(i<<0|e<<8|t<<16|r<<24)>>>0};z.prototype.readUint32=z.prototype.m;z.prototype.ga=function(){var i=this.m(),e=this.m();return Qo(i,e)};z.prototype.readUint64=z.prototype.ga;z.prototype.ha=function(){var i=this.m(),e=this.m();return Nc(i,e)};z.prototype.readUint64String=z.prototype.ha;z.prototype.Xb=function(){var i=this.b[this.a];return this.a+=1,G(this.a<=this.c),i<<24>>24};z.prototype.readInt8=z.prototype.Xb;z.prototype.Vb=function(){var i=this.b[this.a],e=this.b[this.a+1];return this.a+=2,G(this.a<=this.c),(i<<0|e<<8)<<16>>16};z.prototype.readInt16=z.prototype.Vb;z.prototype.P=function(){var i=this.b[this.a],e=this.b[this.a+1],t=this.b[this.a+2],r=this.b[this.a+3];return this.a+=4,G(this.a<=this.c),i<<0|e<<8|t<<16|r<<24};z.prototype.readInt32=z.prototype.P;z.prototype.ba=function(){var i=this.m(),e=this.m();return Oc(i,e)};z.prototype.readInt64=z.prototype.ba;z.prototype.ca=function(){var i=this.m(),e=this.m();return Fc(i,e)};z.prototype.readInt64String=z.prototype.ca;z.prototype.aa=function(){var i=this.m();return Tw(i,0)};z.prototype.readFloat=z.prototype.aa;z.prototype.Z=function(){var i=this.m(),e=this.m();return kw(i,e)};z.prototype.readDouble=z.prototype.Z;z.prototype.pa=function(){return!!this.b[this.a++]};z.prototype.readBool=z.prototype.pa;z.prototype.ra=function(){return this.da()};z.prototype.readEnum=z.prototype.ra;z.prototype.fa=function(i){var e=this.b,t=this.a;i=t+i;for(var r=[],n="";t<i;){var s=e[t++];if(128>s)r.push(s);else{if(192>s)continue;if(224>s){var o=e[t++];r.push((s&31)<<6|o&63)}else if(240>s){o=e[t++];var l=e[t++];r.push((s&15)<<12|(o&63)<<6|l&63)}else if(248>s){o=e[t++],l=e[t++];var c=e[t++];s=(s&7)<<18|(o&63)<<12|(l&63)<<6|c&63,s-=65536,r.push((s>>10&1023)+55296,(s&1023)+56320)}}8192<=r.length&&(n+=String.fromCharCode.apply(null,r),r.length=0)}return n+=yw(r),this.a=t,n};z.prototype.readString=z.prototype.fa;z.prototype.Dc=function(){var i=this.o();return this.fa(i)};z.prototype.readStringWithLength=z.prototype.Dc;z.prototype.qa=function(i){if(0>i||this.a+i>this.b.length)return this.v=!0,bi("Invalid byte length!"),new Uint8Array(0);var e=this.b.subarray(this.a,this.a+i);return this.a+=i,G(this.a<=this.c),e};z.prototype.readBytes=z.prototype.qa;z.prototype.ia=function(){return this.w(Kd)};z.prototype.readVarintHash64=z.prototype.ia;z.prototype.$=function(){var i=this.b,e=this.a,t=i[e],r=i[e+1],n=i[e+2],s=i[e+3],o=i[e+4],l=i[e+5],c=i[e+6];return i=i[e+7],this.a+=8,String.fromCharCode(t,r,n,s,o,l,c,i)};z.prototype.readFixedHash64=z.prototype.$;function T(i,e,t){this.a=qd(i,e,t),this.O=this.a.B(),this.b=this.c=-1,this.h=!1,this.v=null}De("jspb.BinaryReader",T,void 0);var Yo=[];T.clearInstanceCache=function(){Yo=[]};T.getInstanceCacheLength=function(){return Yo.length};function Rw(i,e,t){if(Yo.length){var r=Yo.pop();return i&&r.a.H(i,e,t),r}return new T(i,e,t)}T.alloc=Rw;T.prototype.zb=Rw;T.prototype.alloc=T.prototype.zb;T.prototype.Ca=function(){this.a.clear(),this.b=this.c=-1,this.h=!1,this.v=null,100>Yo.length&&Yo.push(this)};T.prototype.free=T.prototype.Ca;T.prototype.Fb=function(){return this.O};T.prototype.getFieldCursor=T.prototype.Fb;T.prototype.B=function(){return this.a.B()};T.prototype.getCursor=T.prototype.B;T.prototype.Y=function(){return this.a.Y()};T.prototype.getBuffer=T.prototype.Y;T.prototype.Hb=function(){return this.c};T.prototype.getFieldNumber=T.prototype.Hb;T.prototype.Lb=function(){return this.b};T.prototype.getWireType=T.prototype.Lb;T.prototype.Mb=function(){return this.b==2};T.prototype.isDelimited=T.prototype.Mb;T.prototype.bb=function(){return this.b==4};T.prototype.isEndGroup=T.prototype.bb;T.prototype.getError=function(){return this.h||this.a.getError()};T.prototype.getError=T.prototype.getError;T.prototype.H=function(i,e,t){this.a.H(i,e,t),this.b=this.c=-1};T.prototype.setBlock=T.prototype.H;T.prototype.reset=function(){this.a.reset(),this.b=this.c=-1};T.prototype.reset=T.prototype.reset;T.prototype.advance=function(i){this.a.advance(i)};T.prototype.advance=T.prototype.advance;T.prototype.oa=function(){if(this.a.ya())return!1;if(this.getError())return bi("Decoder hit an error"),!1;this.O=this.a.B();var i=this.a.o(),e=i>>>3;return i&=7,i!=0&&i!=5&&i!=1&&i!=2&&i!=3&&i!=4?(bi("Invalid wire type: %s (at position %s)",i,this.O),this.h=!0,!1):(this.c=e,this.b=i,!0)};T.prototype.nextField=T.prototype.oa;T.prototype.Oa=function(){this.a.mb(this.c<<3|this.b)};T.prototype.unskipHeader=T.prototype.Oa;T.prototype.Lc=function(){var i=this.c;for(this.Oa();this.oa()&&this.c==i;)this.C();this.a.ya()||this.Oa()};T.prototype.skipMatchingFields=T.prototype.Lc;T.prototype.lb=function(){this.b!=0?(bi("Invalid wire type for skipVarintField"),this.C()):this.a.kb()};T.prototype.skipVarintField=T.prototype.lb;T.prototype.gb=function(){if(this.b!=2)bi("Invalid wire type for skipDelimitedField"),this.C();else{var i=this.a.o();this.a.advance(i)}};T.prototype.skipDelimitedField=T.prototype.gb;T.prototype.hb=function(){this.b!=5?(bi("Invalid wire type for skipFixed32Field"),this.C()):this.a.advance(4)};T.prototype.skipFixed32Field=T.prototype.hb;T.prototype.ib=function(){this.b!=1?(bi("Invalid wire type for skipFixed64Field"),this.C()):this.a.advance(8)};T.prototype.skipFixed64Field=T.prototype.ib;T.prototype.jb=function(){var i=this.c;do{if(!this.oa()){bi("Unmatched start-group tag: stream EOF"),this.h=!0;break}if(this.b==4){this.c!=i&&(bi("Unmatched end-group tag"),this.h=!0);break}this.C()}while(1)};T.prototype.skipGroup=T.prototype.jb;T.prototype.C=function(){switch(this.b){case 0:this.lb();break;case 1:this.ib();break;case 2:this.gb();break;case 5:this.hb();break;case 3:this.jb();break;default:bi("Invalid wire encoding for field.")}};T.prototype.skipField=T.prototype.C;T.prototype.Hc=function(i,e){this.v===null&&(this.v={}),G(!this.v[i]),this.v[i]=e};T.prototype.registerReadCallback=T.prototype.Hc;T.prototype.Ic=function(i){return G(this.v!==null),i=this.v[i],G(i),i(this)};T.prototype.runReadCallback=T.prototype.Ic;T.prototype.Yb=function(i,e){G(this.b==2);var t=this.a.c,r=this.a.o();r=this.a.B()+r,this.a.setEnd(r),e(i,this),this.a.Ma(r),this.a.setEnd(t)};T.prototype.readMessage=T.prototype.Yb;T.prototype.Ub=function(i,e,t){G(this.b==3),G(this.c==i),t(e,this),this.h||this.b==4||(bi("Group submessage did not end with an END_GROUP tag"),this.h=!0)};T.prototype.readGroup=T.prototype.Ub;T.prototype.Gb=function(){G(this.b==2);var i=this.a.o(),e=this.a.B(),t=e+i;return i=qd(this.a.Y(),e,i),this.a.Ma(t),i};T.prototype.getFieldDecoder=T.prototype.Gb;T.prototype.P=function(){return G(this.b==0),this.a.da()};T.prototype.readInt32=T.prototype.P;T.prototype.Wb=function(){return G(this.b==0),this.a.Ea()};T.prototype.readInt32String=T.prototype.Wb;T.prototype.ba=function(){return G(this.b==0),this.a.sa()};T.prototype.readInt64=T.prototype.ba;T.prototype.ca=function(){return G(this.b==0),this.a.Fa()};T.prototype.readInt64String=T.prototype.ca;T.prototype.m=function(){return G(this.b==0),this.a.o()};T.prototype.readUint32=T.prototype.m;T.prototype.Fc=function(){return G(this.b==0),this.a.O()};T.prototype.readUint32String=T.prototype.Fc;T.prototype.ga=function(){return G(this.b==0),this.a.Ga()};T.prototype.readUint64=T.prototype.ga;T.prototype.ha=function(){return G(this.b==0),this.a.Ha()};T.prototype.readUint64String=T.prototype.ha;T.prototype.zc=function(){return G(this.b==0),this.a.Ia()};T.prototype.readSint32=T.prototype.zc;T.prototype.Ac=function(){return G(this.b==0),this.a.Ja()};T.prototype.readSint64=T.prototype.Ac;T.prototype.Bc=function(){return G(this.b==0),this.a.Ka()};T.prototype.readSint64String=T.prototype.Bc;T.prototype.Rb=function(){return G(this.b==5),this.a.m()};T.prototype.readFixed32=T.prototype.Rb;T.prototype.Sb=function(){return G(this.b==1),this.a.ga()};T.prototype.readFixed64=T.prototype.Sb;T.prototype.Tb=function(){return G(this.b==1),this.a.ha()};T.prototype.readFixed64String=T.prototype.Tb;T.prototype.vc=function(){return G(this.b==5),this.a.P()};T.prototype.readSfixed32=T.prototype.vc;T.prototype.wc=function(){return G(this.b==5),this.a.P().toString()};T.prototype.readSfixed32String=T.prototype.wc;T.prototype.xc=function(){return G(this.b==1),this.a.ba()};T.prototype.readSfixed64=T.prototype.xc;T.prototype.yc=function(){return G(this.b==1),this.a.ca()};T.prototype.readSfixed64String=T.prototype.yc;T.prototype.aa=function(){return G(this.b==5),this.a.aa()};T.prototype.readFloat=T.prototype.aa;T.prototype.Z=function(){return G(this.b==1),this.a.Z()};T.prototype.readDouble=T.prototype.Z;T.prototype.pa=function(){return G(this.b==0),!!this.a.o()};T.prototype.readBool=T.prototype.pa;T.prototype.ra=function(){return G(this.b==0),this.a.sa()};T.prototype.readEnum=T.prototype.ra;T.prototype.fa=function(){G(this.b==2);var i=this.a.o();return this.a.fa(i)};T.prototype.readString=T.prototype.fa;T.prototype.qa=function(){G(this.b==2);var i=this.a.o();return this.a.qa(i)};T.prototype.readBytes=T.prototype.qa;T.prototype.ia=function(){return G(this.b==0),this.a.ia()};T.prototype.readVarintHash64=T.prototype.ia;T.prototype.Cc=function(){return G(this.b==0),this.a.fb()};T.prototype.readSintHash64=T.prototype.Cc;T.prototype.w=function(i){return G(this.b==0),this.a.w(i)};T.prototype.readSplitVarint64=T.prototype.w;T.prototype.ea=function(i){return G(this.b==0),this.a.w(function(e,t){return Wd(e,t,i)})};T.prototype.readSplitZigzagVarint64=T.prototype.ea;T.prototype.$=function(){return G(this.b==1),this.a.$()};T.prototype.readFixedHash64=T.prototype.$;T.prototype.ta=function(i){return G(this.b==1),this.a.ta(i)};T.prototype.readSplitFixed64=T.prototype.ta;function $t(i,e){G(i.b==2);var t=i.a.o();t=i.a.B()+t;for(var r=[];i.a.B()<t;)r.push(e.call(i.a));return r}T.prototype.gc=function(){return $t(this,this.a.da)};T.prototype.readPackedInt32=T.prototype.gc;T.prototype.hc=function(){return $t(this,this.a.Ea)};T.prototype.readPackedInt32String=T.prototype.hc;T.prototype.ic=function(){return $t(this,this.a.sa)};T.prototype.readPackedInt64=T.prototype.ic;T.prototype.jc=function(){return $t(this,this.a.Fa)};T.prototype.readPackedInt64String=T.prototype.jc;T.prototype.qc=function(){return $t(this,this.a.o)};T.prototype.readPackedUint32=T.prototype.qc;T.prototype.rc=function(){return $t(this,this.a.O)};T.prototype.readPackedUint32String=T.prototype.rc;T.prototype.sc=function(){return $t(this,this.a.Ga)};T.prototype.readPackedUint64=T.prototype.sc;T.prototype.tc=function(){return $t(this,this.a.Ha)};T.prototype.readPackedUint64String=T.prototype.tc;T.prototype.nc=function(){return $t(this,this.a.Ia)};T.prototype.readPackedSint32=T.prototype.nc;T.prototype.oc=function(){return $t(this,this.a.Ja)};T.prototype.readPackedSint64=T.prototype.oc;T.prototype.pc=function(){return $t(this,this.a.Ka)};T.prototype.readPackedSint64String=T.prototype.pc;T.prototype.bc=function(){return $t(this,this.a.m)};T.prototype.readPackedFixed32=T.prototype.bc;T.prototype.cc=function(){return $t(this,this.a.ga)};T.prototype.readPackedFixed64=T.prototype.cc;T.prototype.dc=function(){return $t(this,this.a.ha)};T.prototype.readPackedFixed64String=T.prototype.dc;T.prototype.kc=function(){return $t(this,this.a.P)};T.prototype.readPackedSfixed32=T.prototype.kc;T.prototype.lc=function(){return $t(this,this.a.ba)};T.prototype.readPackedSfixed64=T.prototype.lc;T.prototype.mc=function(){return $t(this,this.a.ca)};T.prototype.readPackedSfixed64String=T.prototype.mc;T.prototype.fc=function(){return $t(this,this.a.aa)};T.prototype.readPackedFloat=T.prototype.fc;T.prototype.$b=function(){return $t(this,this.a.Z)};T.prototype.readPackedDouble=T.prototype.$b;T.prototype.Zb=function(){return $t(this,this.a.pa)};T.prototype.readPackedBool=T.prototype.Zb;T.prototype.ac=function(){return $t(this,this.a.ra)};T.prototype.readPackedEnum=T.prototype.ac;T.prototype.uc=function(){return $t(this,this.a.ia)};T.prototype.readPackedVarintHash64=T.prototype.uc;T.prototype.ec=function(){return $t(this,this.a.$)};T.prototype.readPackedFixedHash64=T.prototype.ec;function Rc(i,e,t,r,n){this.ma=i,this.Ba=e,this.la=t,this.Na=r,this.na=n}De("jspb.ExtensionFieldInfo",Rc,void 0);function Mw(i,e,t,r,n,s){this.Za=i,this.za=e,this.Aa=t,this.Wa=r,this.Ab=n,this.Nb=s}De("jspb.ExtensionFieldBinaryInfo",Mw,void 0);Rc.prototype.F=function(){return!!this.la};Rc.prototype.isMessageType=Rc.prototype.F;function xe(){}De("jspb.Message",xe,void 0);xe.GENERATE_TO_OBJECT=!0;xe.GENERATE_FROM_OBJECT=!0;var Yd=typeof Uint8Array=="function";xe.prototype.Ib=function(){return this.b};xe.prototype.getJsPbMessageId=xe.prototype.Ib;xe.initialize=function(i,e,t,r,n,s){i.f=null,e||(e=t?[t]:[]),i.b=t?String(t):void 0,i.D=t===0?-1:0,i.u=e;e:{if(t=i.u.length,e=-1,t&&(e=t-1,t=i.u[e],!(t===null||typeof t!="object"||Array.isArray(t)||Yd&&t instanceof Uint8Array))){i.G=e-i.D,i.i=t;break e}-1<r?(i.G=Math.max(r,e+1-i.D),i.i=null):i.G=Number.MAX_VALUE}if(i.a={},n)for(r=0;r<n.length;r++)e=n[r],e<i.G?(e+=i.D,i.u[e]=i.u[e]||Mc):(Xd(i),i.i[e]=i.i[e]||Mc);if(s&&s.length)for(r=0;r<s.length;r++)g0(i,s[r])};var Mc=Object.freeze?Object.freeze([]):[];function Xd(i){var e=i.G+i.D;i.u[e]||(i.i=i.u[e]={})}function Dw(i,e,t){for(var r=[],n=0;n<i.length;n++)r[n]=e.call(i[n],t,i[n]);return r}xe.toObjectList=Dw;xe.toObjectExtension=function(i,e,t,r,n){for(var s in t){var o=t[s],l=r.call(i,o);if(l!=null){for(var c in o.Ba)if(o.Ba.hasOwnProperty(c))break;e[c]=o.Na?o.na?Dw(l,o.Na,n):o.Na(n,l):l}}};xe.serializeBinaryExtensions=function(i,e,t,r){for(var n in t){var s=t[n],o=s.Za;if(!s.Aa)throw Error("Message extension present that was generated without binary serialization support");var l=r.call(i,o);if(l!=null)if(o.F())if(s.Wa)s.Aa.call(e,o.ma,l,s.Wa);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else s.Aa.call(e,o.ma,l)}};xe.readBinaryExtension=function(i,e,t,r,n){var s=t[e.c];if(s){if(t=s.Za,!s.za)throw Error("Deserializing extension whose generated code does not support binary format");if(t.F()){var o=new t.la;s.za.call(e,o,s.Ab)}else o=s.za.call(e);t.na&&!s.Nb?(e=r.call(i,t))?e.push(o):n.call(i,t,[o]):n.call(i,t,o)}else e.C()};function dr(i,e){if(e<i.G){e+=i.D;var t=i.u[e];return t===Mc?i.u[e]=[]:t}if(i.i)return t=i.i[e],t===Mc?i.i[e]=[]:t}xe.getField=dr;xe.getRepeatedField=function(i,e){return dr(i,e)};function Bw(i,e){return i=dr(i,e),i==null?i:+i}xe.getOptionalFloatingPointField=Bw;function Pw(i,e){return i=dr(i,e),i==null?i:!!i}xe.getBooleanField=Pw;xe.getRepeatedFloatingPointField=function(i,e){var t=dr(i,e);if(i.a||(i.a={}),!i.a[e]){for(var r=0;r<t.length;r++)t[r]=+t[r];i.a[e]=!0}return t};xe.getRepeatedBooleanField=function(i,e){var t=dr(i,e);if(i.a||(i.a={}),!i.a[e]){for(var r=0;r<t.length;r++)t[r]=!!t[r];i.a[e]=!0}return t};function Ow(i){return i==null||typeof i=="string"?i:Yd&&i instanceof Uint8Array?xw(i):(bi("Cannot coerce to b64 string: "+Kn(i)),null)}xe.bytesAsB64=Ow;function Nw(i){return i==null||i instanceof Uint8Array?i:typeof i=="string"?vw(i):(bi("Cannot coerce to Uint8Array: "+Kn(i)),null)}xe.bytesAsU8=Nw;xe.bytesListAsB64=function(i){return Fw(i),i.length&&typeof i[0]!="string"?Dc(i,Ow):i};xe.bytesListAsU8=function(i){return Fw(i),!i.length||i[0]instanceof Uint8Array?i:Dc(i,Nw)};function Fw(i){if(i&&1<i.length){var e=Kn(i[0]);TS(i,function(t){Kn(t)!=e&&bi("Inconsistent type in JSPB repeated field array. Got "+Kn(t)+" expected "+e)})}}function Hw(i,e,t){return i=dr(i,e),i??t}xe.getFieldWithDefault=Hw;xe.getBooleanFieldWithDefault=function(i,e,t){return i=Pw(i,e),i??t};xe.getFloatingPointFieldWithDefault=function(i,e,t){return i=Bw(i,e),i??t};xe.getFieldProto3=Hw;xe.getMapField=function(i,e,t,r){if(i.f||(i.f={}),e in i.f)return i.f[e];var n=dr(i,e);if(!n){if(t)return;n=[],$n(i,e,n)}return i.f[e]=new We(n,r)};function $n(i,e,t){return Qr(i,xe),e<i.G?i.u[e+i.D]=t:(Xd(i),i.i[e]=t),i}xe.setField=$n;xe.setProto3IntField=function(i,e,t){return xa(i,e,t,0)};xe.setProto3FloatField=function(i,e,t){return xa(i,e,t,0)};xe.setProto3BooleanField=function(i,e,t){return xa(i,e,t,!1)};xe.setProto3StringField=function(i,e,t){return xa(i,e,t,"")};xe.setProto3BytesField=function(i,e,t){return xa(i,e,t,"")};xe.setProto3EnumField=function(i,e,t){return xa(i,e,t,0)};xe.setProto3StringIntField=function(i,e,t){return xa(i,e,t,"0")};function xa(i,e,t,r){return Qr(i,xe),t!==r?$n(i,e,t):e<i.G?i.u[e+i.D]=null:(Xd(i),delete i.i[e]),i}xe.addToRepeatedField=function(i,e,t,r){return Qr(i,xe),e=dr(i,e),r!=null?e.splice(r,0,t):e.push(t),i};function Uw(i,e,t,r){return Qr(i,xe),(t=g0(i,t))&&t!==e&&r!==void 0&&(i.f&&t in i.f&&(i.f[t]=void 0),$n(i,t,void 0)),$n(i,e,r)}xe.setOneofField=Uw;function g0(i,e){for(var t,r,n=0;n<e.length;n++){var s=e[n],o=dr(i,s);o!=null&&(t=s,r=o,$n(i,s,void 0))}return t?($n(i,t,r),t):0}xe.computeOneofCase=g0;xe.getWrapperField=function(i,e,t,r){if(i.f||(i.f={}),!i.f[t]){var n=dr(i,t);(r||n)&&(i.f[t]=new e(n))}return i.f[t]};xe.getRepeatedWrapperField=function(i,e,t){return Vw(i,e,t),e=i.f[t],e==Mc&&(e=i.f[t]=[]),e};function Vw(i,e,t){if(i.f||(i.f={}),!i.f[t]){for(var r=dr(i,t),n=[],s=0;s<r.length;s++)n[s]=new e(r[s]);i.f[t]=n}}xe.setWrapperField=function(i,e,t){Qr(i,xe),i.f||(i.f={});var r=t&&t.g();return i.f[e]=t,$n(i,e,r)};xe.setOneofWrapperField=function(i,e,t,r){Qr(i,xe),i.f||(i.f={});var n=r&&r.g();return i.f[e]=r,Uw(i,e,t,n)};xe.setRepeatedWrapperField=function(i,e,t){Qr(i,xe),i.f||(i.f={}),t=t||[];for(var r=[],n=0;n<t.length;n++)r[n]=t[n].g();return i.f[e]=t,$n(i,e,r)};xe.addToRepeatedWrapperField=function(i,e,t,r,n){Vw(i,r,e);var s=i.f[e];return s||(s=i.f[e]=[]),t=t||new r,i=dr(i,e),n!=null?(s.splice(n,0,t),i.splice(n,0,t.g())):(s.push(t),i.push(t.g())),t};xe.toMap=function(i,e,t,r){for(var n={},s=0;s<i.length;s++)n[e.call(i[s])]=t?t.call(i[s],r,i[s]):i[s];return n};function zw(i){if(i.f)for(var e in i.f){var t=i.f[e];if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&t[r].g();else t&&t.g()}}xe.prototype.g=function(){return zw(this),this.u};xe.prototype.toArray=xe.prototype.g;xe.prototype.toString=function(){return zw(this),this.u.toString()};xe.prototype.getExtension=function(i){if(this.i){this.f||(this.f={});var e=i.ma;if(i.na){if(i.F())return this.f[e]||(this.f[e]=Dc(this.i[e]||[],function(t){return new i.la(t)})),this.f[e]}else if(i.F())return!this.f[e]&&this.i[e]&&(this.f[e]=new i.la(this.i[e])),this.f[e];return this.i[e]}};xe.prototype.getExtension=xe.prototype.getExtension;xe.prototype.Kc=function(i,e){this.f||(this.f={}),Xd(this);var t=i.ma;return i.na?(e=e||[],i.F()?(this.f[t]=e,this.i[t]=Dc(e,function(r){return r.g()})):this.i[t]=e):i.F()?(this.f[t]=e,this.i[t]=e&&e.g()):this.i[t]=e,this};xe.prototype.setExtension=xe.prototype.Kc;xe.difference=function(i,e){if(!(i instanceof e.constructor))throw Error("Messages have different types.");var t=i.g();e=e.g();var r=[],n=0,s=t.length>e.length?t.length:e.length;for(i.b&&(r[0]=i.b,n=1);n<s;n++)Uc(t[n],e[n])||(r[n]=e[n]);return new i.constructor(r)};xe.equals=function(i,e){return i==e||!(!i||!e)&&i instanceof e.constructor&&Uc(i.g(),e.g())};function u0(i,e){i=i||{},e=e||{};var t={},r;for(r in i)t[r]=0;for(r in e)t[r]=0;for(r in t)if(!Uc(i[r],e[r]))return!1;return!0}xe.compareExtensions=u0;function Uc(i,e){if(i==e)return!0;if(!uw(i)||!uw(e))return typeof i=="number"&&isNaN(i)||typeof e=="number"&&isNaN(e)?String(i)==String(e):!1;if(i.constructor!=e.constructor)return!1;if(Yd&&i.constructor===Uint8Array){if(i.length!=e.length)return!1;for(var t=0;t<i.length;t++)if(i[t]!=e[t])return!1;return!0}if(i.constructor===Array){var r=void 0,n=void 0,s=Math.max(i.length,e.length);for(t=0;t<s;t++){var o=i[t],l=e[t];if(o&&o.constructor==Object&&(G(r===void 0),G(t===i.length-1),r=o,o=void 0),l&&l.constructor==Object&&(G(n===void 0),G(t===e.length-1),n=l,l=void 0),!Uc(o,l))return!1}return r||n?(r=r||{},n=n||{},u0(r,n)):!0}if(i.constructor===Object)return u0(i,e);throw Error("Invalid type in JSPB array")}xe.compareFields=Uc;xe.prototype.Bb=function(){return Qd(this)};xe.prototype.cloneMessage=xe.prototype.Bb;xe.prototype.clone=function(){return Qd(this)};xe.prototype.clone=xe.prototype.clone;xe.clone=function(i){return Qd(i)};function Qd(i){return new i.constructor(p0(i.g()))}xe.copyInto=function(i,e){Qr(i,xe),Qr(e,xe),G(i.constructor==e.constructor,"Copy source and target message should have the same type."),i=Qd(i);for(var t=e.g(),r=i.g(),n=t.length=0;n<r.length;n++)t[n]=r[n];e.f=i.f,e.i=i.i};function p0(i){if(Array.isArray(i)){for(var e=Array(i.length),t=0;t<i.length;t++){var r=i[t];r!=null&&(e[t]=typeof r=="object"?p0(G(r)):r)}return e}if(Yd&&i instanceof Uint8Array)return new Uint8Array(i);e={};for(t in i)r=i[t],r!=null&&(e[t]=typeof r=="object"?p0(G(r)):r);return e}xe.registerMessageType=function(i,e){e.we=i};var Xr={dump:function(i){return Qr(i,xe,"jspb.Message instance expected"),G(i.getExtension,"Only unobfuscated and unoptimized compilation modes supported."),Xr.X(i)}};De("jspb.debug.dump",Xr.dump,void 0);Xr.X=function(i){var e=Kn(i);if(e=="number"||e=="string"||e=="boolean"||e=="null"||e=="undefined"||typeof Uint8Array<"u"&&i instanceof Uint8Array)return i;if(e=="array")return CS(i),Dc(i,Xr.X);if(i instanceof We){var t={};i=i.entries();for(var r=i.next();!r.done;r=i.next())t[r.value[0]]=Xr.X(r.value[1]);return t}Qr(i,xe,"Only messages expected: "+i),e=i.constructor;var n={$name:e.name||e.displayName};for(l in e.prototype){var s=/^get([A-Z]\w*)/.exec(l);if(s&&l!="getExtension"&&l!="getJsPbMessageId"){var o="has"+s[1];(!i[o]||i[o]())&&(o=i[l](),n[Xr.$a(s[1])]=Xr.X(o))}}if(i.extensionObject_)return n.$extensions="Recursive dumping of extensions not supported in compiled code. Switch to uncompiled or dump extension object directly",n;for(r in e.extensions)if(/^\d+$/.test(r)){o=e.extensions[r];var l=i.getExtension(o);s=void 0,o=o.Ba;var c=[],p=0;for(s in o)c[p++]=s;s=c[0],l!=null&&(t||(t=n.$extensions={}),t[Xr.$a(s)]=Xr.X(l))}return n};Xr.$a=function(i){return i.replace(/^[A-Z]/,function(e){return e.toLowerCase()})};function de(){this.a=[]}De("jspb.BinaryEncoder",de,void 0);de.prototype.length=function(){return this.a.length};de.prototype.length=de.prototype.length;de.prototype.end=function(){var i=this.a;return this.a=[],i};de.prototype.end=de.prototype.end;de.prototype.l=function(i,e){for(G(i==Math.floor(i)),G(e==Math.floor(e)),G(0<=i&&4294967296>i),G(0<=e&&4294967296>e);0<e||127<i;)this.a.push(i&127|128),i=(i>>>7|e<<25)>>>0,e>>>=7;this.a.push(i)};de.prototype.writeSplitVarint64=de.prototype.l;de.prototype.A=function(i,e){G(i==Math.floor(i)),G(e==Math.floor(e)),G(0<=i&&4294967296>i),G(0<=e&&4294967296>e),this.s(i),this.s(e)};de.prototype.writeSplitFixed64=de.prototype.A;de.prototype.j=function(i){for(G(i==Math.floor(i)),G(0<=i&&4294967296>i);127<i;)this.a.push(i&127|128),i>>>=7;this.a.push(i)};de.prototype.writeUnsignedVarint32=de.prototype.j;de.prototype.M=function(i){if(G(i==Math.floor(i)),G(-2147483648<=i&&2147483648>i),0<=i)this.j(i);else{for(var e=0;9>e;e++)this.a.push(i&127|128),i>>=7;this.a.push(1)}};de.prototype.writeSignedVarint32=de.prototype.M;de.prototype.va=function(i){G(i==Math.floor(i)),G(0<=i&&18446744073709552e3>i),Pc(i),this.l(Tt,Rt)};de.prototype.writeUnsignedVarint64=de.prototype.va;de.prototype.ua=function(i){G(i==Math.floor(i)),G(-9223372036854776e3<=i&&9223372036854776e3>i),Pc(i),this.l(Tt,Rt)};de.prototype.writeSignedVarint64=de.prototype.ua;de.prototype.wa=function(i){G(i==Math.floor(i)),G(-2147483648<=i&&2147483648>i),this.j((i<<1^i>>31)>>>0)};de.prototype.writeZigzagVarint32=de.prototype.wa;de.prototype.xa=function(i){G(i==Math.floor(i)),G(-9223372036854776e3<=i&&9223372036854776e3>i),Lw(i),this.l(Tt,Rt)};de.prototype.writeZigzagVarint64=de.prototype.xa;de.prototype.Ta=function(i){this.W(Hc(i))};de.prototype.writeZigzagVarint64String=de.prototype.Ta;de.prototype.W=function(i){var e=this;Ms(i),jd(Tt,Rt,function(t,r){e.l(t>>>0,r>>>0)})};de.prototype.writeZigzagVarintHash64=de.prototype.W;de.prototype.be=function(i){G(i==Math.floor(i)),G(0<=i&&256>i),this.a.push(i>>>0&255)};de.prototype.writeUint8=de.prototype.be;de.prototype.ae=function(i){G(i==Math.floor(i)),G(0<=i&&65536>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255)};de.prototype.writeUint16=de.prototype.ae;de.prototype.s=function(i){G(i==Math.floor(i)),G(0<=i&&4294967296>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255),this.a.push(i>>>16&255),this.a.push(i>>>24&255)};de.prototype.writeUint32=de.prototype.s;de.prototype.V=function(i){G(i==Math.floor(i)),G(0<=i&&18446744073709552e3>i),f0(i),this.s(Tt),this.s(Rt)};de.prototype.writeUint64=de.prototype.V;de.prototype.Qc=function(i){G(i==Math.floor(i)),G(-128<=i&&128>i),this.a.push(i>>>0&255)};de.prototype.writeInt8=de.prototype.Qc;de.prototype.Pc=function(i){G(i==Math.floor(i)),G(-32768<=i&&32768>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255)};de.prototype.writeInt16=de.prototype.Pc;de.prototype.S=function(i){G(i==Math.floor(i)),G(-2147483648<=i&&2147483648>i),this.a.push(i>>>0&255),this.a.push(i>>>8&255),this.a.push(i>>>16&255),this.a.push(i>>>24&255)};de.prototype.writeInt32=de.prototype.S;de.prototype.T=function(i){G(i==Math.floor(i)),G(-9223372036854776e3<=i&&9223372036854776e3>i),Pc(i),this.A(Tt,Rt)};de.prototype.writeInt64=de.prototype.T;de.prototype.ka=function(i){G(i==Math.floor(i)),G(-9223372036854776e3<=+i&&9223372036854776e3>+i),Ms(Hc(i)),this.A(Tt,Rt)};de.prototype.writeInt64String=de.prototype.ka;de.prototype.L=function(i){G(i===1/0||i===-1/0||isNaN(i)||-34028234663852886e22<=i&&34028234663852886e22>=i),Iw(i),this.s(Tt)};de.prototype.writeFloat=de.prototype.L;de.prototype.J=function(i){G(i===1/0||i===-1/0||isNaN(i)||-17976931348623157e292<=i&&17976931348623157e292>=i),Ew(i),this.s(Tt),this.s(Rt)};de.prototype.writeDouble=de.prototype.J;de.prototype.I=function(i){G(typeof i=="boolean"||typeof i=="number"),this.a.push(i?1:0)};de.prototype.writeBool=de.prototype.I;de.prototype.R=function(i){G(i==Math.floor(i)),G(-2147483648<=i&&2147483648>i),this.M(i)};de.prototype.writeEnum=de.prototype.R;de.prototype.ja=function(i){this.a.push.apply(this.a,i)};de.prototype.writeBytes=de.prototype.ja;de.prototype.N=function(i){Ms(i),this.l(Tt,Rt)};de.prototype.writeVarintHash64=de.prototype.N;de.prototype.K=function(i){Ms(i),this.s(Tt),this.s(Rt)};de.prototype.writeFixedHash64=de.prototype.K;de.prototype.U=function(i){var e=this.a.length;AS(i);for(var t=0;t<i.length;t++){var r=i.charCodeAt(t);if(128>r)this.a.push(r);else if(2048>r)this.a.push(r>>6|192),this.a.push(r&63|128);else if(65536>r)if(55296<=r&&56319>=r&&t+1<i.length){var n=i.charCodeAt(t+1);56320<=n&&57343>=n&&(r=1024*(r-55296)+n-56320+65536,this.a.push(r>>18|240),this.a.push(r>>12&63|128),this.a.push(r>>6&63|128),this.a.push(r&63|128),t++)}else this.a.push(r>>12|224),this.a.push(r>>6&63|128),this.a.push(r&63|128)}return this.a.length-e};de.prototype.writeString=de.prototype.U;function He(i,e){this.lo=i,this.hi=e}De("jspb.arith.UInt64",He,void 0);He.prototype.cmp=function(i){return this.hi<i.hi||this.hi==i.hi&&this.lo<i.lo?-1:this.hi==i.hi&&this.lo==i.lo?0:1};He.prototype.cmp=He.prototype.cmp;He.prototype.La=function(){return new He((this.lo>>>1|(this.hi&1)<<31)>>>0,this.hi>>>1>>>0)};He.prototype.rightShift=He.prototype.La;He.prototype.Da=function(){return new He(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)};He.prototype.leftShift=He.prototype.Da;He.prototype.cb=function(){return!!(this.hi&2147483648)};He.prototype.msb=He.prototype.cb;He.prototype.Ob=function(){return!!(this.lo&1)};He.prototype.lsb=He.prototype.Ob;He.prototype.Ua=function(){return this.lo==0&&this.hi==0};He.prototype.zero=He.prototype.Ua;He.prototype.add=function(i){return new He((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)};He.prototype.add=He.prototype.add;He.prototype.sub=function(i){return new He((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)};He.prototype.sub=He.prototype.sub;function m0(i,e){var t=i&65535;i>>>=16;var r=e&65535,n=e>>>16;for(e=t*r+65536*(t*n&65535)+65536*(i*r&65535),t=i*n+(t*n>>>16)+(i*r>>>16);4294967296<=e;)e-=4294967296,t+=1;return new He(e>>>0,t>>>0)}He.mul32x32=m0;He.prototype.eb=function(i){var e=m0(this.lo,i);return i=m0(this.hi,i),i.hi=i.lo,i.lo=0,e.add(i)};He.prototype.mul=He.prototype.eb;He.prototype.Xa=function(i){if(i==0)return[];var e=new He(0,0),t=new He(this.lo,this.hi);i=new He(i,0);for(var r=new He(1,0);!i.cb();)i=i.Da(),r=r.Da();for(;!r.Ua();)0>=i.cmp(t)&&(e=e.add(r),t=t.sub(i)),i=i.La(),r=r.La();return[e,t]};He.prototype.div=He.prototype.Xa;He.prototype.toString=function(){for(var i="",e=this;!e.Ua();){e=e.Xa(10);var t=e[0];i=e[1].lo+i,e=t}return i==""&&(i="0"),i};He.prototype.toString=He.prototype.toString;function Zo(i){for(var e=new He(0,0),t=new He(0,0),r=0;r<i.length;r++){if("0">i[r]||"9"<i[r])return null;t.lo=parseInt(i[r],10),e=e.eb(10).add(t)}return e}He.fromString=Zo;He.prototype.clone=function(){return new He(this.lo,this.hi)};He.prototype.clone=He.prototype.clone;function Si(i,e){this.lo=i,this.hi=e}De("jspb.arith.Int64",Si,void 0);Si.prototype.add=function(i){return new Si((this.lo+i.lo&4294967295)>>>0>>>0,((this.hi+i.hi&4294967295)>>>0)+(4294967296<=this.lo+i.lo?1:0)>>>0)};Si.prototype.add=Si.prototype.add;Si.prototype.sub=function(i){return new Si((this.lo-i.lo&4294967295)>>>0>>>0,((this.hi-i.hi&4294967295)>>>0)-(0>this.lo-i.lo?1:0)>>>0)};Si.prototype.sub=Si.prototype.sub;Si.prototype.clone=function(){return new Si(this.lo,this.hi)};Si.prototype.clone=Si.prototype.clone;Si.prototype.toString=function(){var i=(this.hi&2147483648)!=0,e=new He(this.lo,this.hi);return i&&(e=new He(0,0).sub(e)),(i?"-":"")+e.toString()};Si.prototype.toString=Si.prototype.toString;function Zd(i){var e=0<i.length&&i[0]=="-";return e&&(i=i.substring(1)),i=Zo(i),i===null?null:(e&&(i=new He(0,0).sub(i)),new Si(i.lo,i.hi))}Si.fromString=Zd;function w(){this.c=[],this.b=0,this.a=new de,this.h=[]}De("jspb.BinaryWriter",w,void 0);function Gw(i,e){var t=i.a.end();i.c.push(t),i.c.push(e),i.b+=t.length+e.length}function Zt(i,e){return je(i,e,2),e=i.a.end(),i.c.push(e),i.b+=e.length,e.push(i.b),e}function Jt(i,e){var t=e.pop();for(t=i.b+i.a.length()-t,G(0<=t);127<t;)e.push(t&127|128),t>>>=7,i.b++;e.push(t),i.b++}w.prototype.pb=function(i,e,t){Gw(this,i.subarray(e,t))};w.prototype.writeSerializedMessage=w.prototype.pb;w.prototype.Pb=function(i,e,t){i!=null&&e!=null&&t!=null&&this.pb(i,e,t)};w.prototype.maybeWriteSerializedMessage=w.prototype.Pb;w.prototype.reset=function(){this.c=[],this.a.end(),this.b=0,this.h=[]};w.prototype.reset=w.prototype.reset;w.prototype.ab=function(){G(this.h.length==0);for(var i=new Uint8Array(this.b+this.a.length()),e=this.c,t=e.length,r=0,n=0;n<t;n++){var s=e[n];i.set(s,r),r+=s.length}return e=this.a.end(),i.set(e,r),r+=e.length,G(r==i.length),this.c=[i],i};w.prototype.getResultBuffer=w.prototype.ab;w.prototype.Kb=function(i){return xw(this.ab(),i)};w.prototype.getResultBase64String=w.prototype.Kb;w.prototype.Va=function(i){this.h.push(Zt(this,i))};w.prototype.beginSubMessage=w.prototype.Va;w.prototype.Ya=function(){G(0<=this.h.length),Jt(this,this.h.pop())};w.prototype.endSubMessage=w.prototype.Ya;function je(i,e,t){G(1<=e&&e==Math.floor(e)),i.a.j(8*e+t)}w.prototype.Nc=function(i,e,t){switch(i){case 1:this.J(e,t);break;case 2:this.L(e,t);break;case 3:this.T(e,t);break;case 4:this.V(e,t);break;case 5:this.S(e,t);break;case 6:this.Qa(e,t);break;case 7:this.Pa(e,t);break;case 8:this.I(e,t);break;case 9:this.U(e,t);break;case 10:bi("Group field type not supported in writeAny()");break;case 11:bi("Message field type not supported in writeAny()");break;case 12:this.ja(e,t);break;case 13:this.s(e,t);break;case 14:this.R(e,t);break;case 15:this.Ra(e,t);break;case 16:this.Sa(e,t);break;case 17:this.rb(e,t);break;case 18:this.sb(e,t);break;case 30:this.K(e,t);break;case 31:this.N(e,t);break;default:bi("Invalid field type in writeAny()")}};w.prototype.writeAny=w.prototype.Nc;function b0(i,e,t){t!=null&&(je(i,e,0),i.a.j(t))}function y0(i,e,t){t!=null&&(je(i,e,0),i.a.M(t))}w.prototype.S=function(i,e){e!=null&&(G(-2147483648<=e&&2147483648>e),y0(this,i,e))};w.prototype.writeInt32=w.prototype.S;w.prototype.ob=function(i,e){e!=null&&(e=parseInt(e,10),G(-2147483648<=e&&2147483648>e),y0(this,i,e))};w.prototype.writeInt32String=w.prototype.ob;w.prototype.T=function(i,e){e!=null&&(G(-9223372036854776e3<=e&&9223372036854776e3>e),e!=null&&(je(this,i,0),this.a.ua(e)))};w.prototype.writeInt64=w.prototype.T;w.prototype.ka=function(i,e){e!=null&&(e=Zd(e),je(this,i,0),this.a.l(e.lo,e.hi))};w.prototype.writeInt64String=w.prototype.ka;w.prototype.s=function(i,e){e!=null&&(G(0<=e&&4294967296>e),b0(this,i,e))};w.prototype.writeUint32=w.prototype.s;w.prototype.ub=function(i,e){e!=null&&(e=parseInt(e,10),G(0<=e&&4294967296>e),b0(this,i,e))};w.prototype.writeUint32String=w.prototype.ub;w.prototype.V=function(i,e){e!=null&&(G(0<=e&&18446744073709552e3>e),e!=null&&(je(this,i,0),this.a.va(e)))};w.prototype.writeUint64=w.prototype.V;w.prototype.vb=function(i,e){e!=null&&(e=Zo(e),je(this,i,0),this.a.l(e.lo,e.hi))};w.prototype.writeUint64String=w.prototype.vb;w.prototype.rb=function(i,e){e!=null&&(G(-2147483648<=e&&2147483648>e),e!=null&&(je(this,i,0),this.a.wa(e)))};w.prototype.writeSint32=w.prototype.rb;w.prototype.sb=function(i,e){e!=null&&(G(-9223372036854776e3<=e&&9223372036854776e3>e),e!=null&&(je(this,i,0),this.a.xa(e)))};w.prototype.writeSint64=w.prototype.sb;w.prototype.$d=function(i,e){e!=null&&e!=null&&(je(this,i,0),this.a.W(e))};w.prototype.writeSintHash64=w.prototype.$d;w.prototype.Zd=function(i,e){e!=null&&e!=null&&(je(this,i,0),this.a.Ta(e))};w.prototype.writeSint64String=w.prototype.Zd;w.prototype.Pa=function(i,e){e!=null&&(G(0<=e&&4294967296>e),je(this,i,5),this.a.s(e))};w.prototype.writeFixed32=w.prototype.Pa;w.prototype.Qa=function(i,e){e!=null&&(G(0<=e&&18446744073709552e3>e),je(this,i,1),this.a.V(e))};w.prototype.writeFixed64=w.prototype.Qa;w.prototype.nb=function(i,e){e!=null&&(e=Zo(e),je(this,i,1),this.a.A(e.lo,e.hi))};w.prototype.writeFixed64String=w.prototype.nb;w.prototype.Ra=function(i,e){e!=null&&(G(-2147483648<=e&&2147483648>e),je(this,i,5),this.a.S(e))};w.prototype.writeSfixed32=w.prototype.Ra;w.prototype.Sa=function(i,e){e!=null&&(G(-9223372036854776e3<=e&&9223372036854776e3>e),je(this,i,1),this.a.T(e))};w.prototype.writeSfixed64=w.prototype.Sa;w.prototype.qb=function(i,e){e!=null&&(e=Zd(e),je(this,i,1),this.a.A(e.lo,e.hi))};w.prototype.writeSfixed64String=w.prototype.qb;w.prototype.L=function(i,e){e!=null&&(je(this,i,5),this.a.L(e))};w.prototype.writeFloat=w.prototype.L;w.prototype.J=function(i,e){e!=null&&(je(this,i,1),this.a.J(e))};w.prototype.writeDouble=w.prototype.J;w.prototype.I=function(i,e){e!=null&&(G(typeof e=="boolean"||typeof e=="number"),je(this,i,0),this.a.I(e))};w.prototype.writeBool=w.prototype.I;w.prototype.R=function(i,e){e!=null&&(G(-2147483648<=e&&2147483648>e),je(this,i,0),this.a.M(e))};w.prototype.writeEnum=w.prototype.R;w.prototype.U=function(i,e){e!=null&&(i=Zt(this,i),this.a.U(e),Jt(this,i))};w.prototype.writeString=w.prototype.U;w.prototype.ja=function(i,e){e!=null&&(e=$d(e),je(this,i,2),this.a.j(e.length),Gw(this,e))};w.prototype.writeBytes=w.prototype.ja;w.prototype.Rc=function(i,e,t){e!=null&&(i=Zt(this,i),t(e,this),Jt(this,i))};w.prototype.writeMessage=w.prototype.Rc;w.prototype.Sc=function(i,e,t){e!=null&&(je(this,1,3),je(this,2,0),this.a.M(i),i=Zt(this,3),t(e,this),Jt(this,i),je(this,1,4))};w.prototype.writeMessageSet=w.prototype.Sc;w.prototype.Oc=function(i,e,t){e!=null&&(je(this,i,3),t(e,this),je(this,i,4))};w.prototype.writeGroup=w.prototype.Oc;w.prototype.K=function(i,e){e!=null&&(G(e.length==8),je(this,i,1),this.a.K(e))};w.prototype.writeFixedHash64=w.prototype.K;w.prototype.N=function(i,e){e!=null&&(G(e.length==8),je(this,i,0),this.a.N(e))};w.prototype.writeVarintHash64=w.prototype.N;w.prototype.A=function(i,e,t){je(this,i,1),this.a.A(e,t)};w.prototype.writeSplitFixed64=w.prototype.A;w.prototype.l=function(i,e,t){je(this,i,0),this.a.l(e,t)};w.prototype.writeSplitVarint64=w.prototype.l;w.prototype.tb=function(i,e,t){je(this,i,0);var r=this.a;jd(e,t,function(n,s){r.l(n>>>0,s>>>0)})};w.prototype.writeSplitZigzagVarint64=w.prototype.tb;w.prototype.Ed=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)y0(this,i,e[t])};w.prototype.writeRepeatedInt32=w.prototype.Ed;w.prototype.Fd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ob(i,e[t])};w.prototype.writeRepeatedInt32String=w.prototype.Fd;w.prototype.Gd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(je(this,i,0),this.a.ua(r))}};w.prototype.writeRepeatedInt64=w.prototype.Gd;w.prototype.Qd=function(i,e,t,r){if(e!=null)for(var n=0;n<e.length;n++)this.A(i,t(e[n]),r(e[n]))};w.prototype.writeRepeatedSplitFixed64=w.prototype.Qd;w.prototype.Rd=function(i,e,t,r){if(e!=null)for(var n=0;n<e.length;n++)this.l(i,t(e[n]),r(e[n]))};w.prototype.writeRepeatedSplitVarint64=w.prototype.Rd;w.prototype.Sd=function(i,e,t,r){if(e!=null)for(var n=0;n<e.length;n++)this.tb(i,t(e[n]),r(e[n]))};w.prototype.writeRepeatedSplitZigzagVarint64=w.prototype.Sd;w.prototype.Hd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ka(i,e[t])};w.prototype.writeRepeatedInt64String=w.prototype.Hd;w.prototype.Ud=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)b0(this,i,e[t])};w.prototype.writeRepeatedUint32=w.prototype.Ud;w.prototype.Vd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ub(i,e[t])};w.prototype.writeRepeatedUint32String=w.prototype.Vd;w.prototype.Wd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(je(this,i,0),this.a.va(r))}};w.prototype.writeRepeatedUint64=w.prototype.Wd;w.prototype.Xd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.vb(i,e[t])};w.prototype.writeRepeatedUint64String=w.prototype.Xd;w.prototype.Md=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(je(this,i,0),this.a.wa(r))}};w.prototype.writeRepeatedSint32=w.prototype.Md;w.prototype.Nd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(je(this,i,0),this.a.xa(r))}};w.prototype.writeRepeatedSint64=w.prototype.Nd;w.prototype.Od=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(je(this,i,0),this.a.Ta(r))}};w.prototype.writeRepeatedSint64String=w.prototype.Od;w.prototype.Pd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++){var r=e[t];r!=null&&(je(this,i,0),this.a.W(r))}};w.prototype.writeRepeatedSintHash64=w.prototype.Pd;w.prototype.yd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Pa(i,e[t])};w.prototype.writeRepeatedFixed32=w.prototype.yd;w.prototype.zd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Qa(i,e[t])};w.prototype.writeRepeatedFixed64=w.prototype.zd;w.prototype.Ad=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.nb(i,e[t])};w.prototype.writeRepeatedFixed64String=w.prototype.Ad;w.prototype.Jd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Ra(i,e[t])};w.prototype.writeRepeatedSfixed32=w.prototype.Jd;w.prototype.Kd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.Sa(i,e[t])};w.prototype.writeRepeatedSfixed64=w.prototype.Kd;w.prototype.Ld=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.qb(i,e[t])};w.prototype.writeRepeatedSfixed64String=w.prototype.Ld;w.prototype.Cd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.L(i,e[t])};w.prototype.writeRepeatedFloat=w.prototype.Cd;w.prototype.wd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.J(i,e[t])};w.prototype.writeRepeatedDouble=w.prototype.wd;w.prototype.ud=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.I(i,e[t])};w.prototype.writeRepeatedBool=w.prototype.ud;w.prototype.xd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.R(i,e[t])};w.prototype.writeRepeatedEnum=w.prototype.xd;w.prototype.Td=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.U(i,e[t])};w.prototype.writeRepeatedString=w.prototype.Td;w.prototype.vd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.ja(i,e[t])};w.prototype.writeRepeatedBytes=w.prototype.vd;w.prototype.Id=function(i,e,t){if(e!=null)for(var r=0;r<e.length;r++){var n=Zt(this,i);t(e[r],this),Jt(this,n)}};w.prototype.writeRepeatedMessage=w.prototype.Id;w.prototype.Dd=function(i,e,t){if(e!=null)for(var r=0;r<e.length;r++)je(this,i,3),t(e[r],this),je(this,i,4)};w.prototype.writeRepeatedGroup=w.prototype.Dd;w.prototype.Bd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.K(i,e[t])};w.prototype.writeRepeatedFixedHash64=w.prototype.Bd;w.prototype.Yd=function(i,e){if(e!=null)for(var t=0;t<e.length;t++)this.N(i,e[t])};w.prototype.writeRepeatedVarintHash64=w.prototype.Yd;w.prototype.ad=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.M(e[t]);Jt(this,i)}};w.prototype.writePackedInt32=w.prototype.ad;w.prototype.bd=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.M(parseInt(e[t],10));Jt(this,i)}};w.prototype.writePackedInt32String=w.prototype.bd;w.prototype.cd=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.ua(e[t]);Jt(this,i)}};w.prototype.writePackedInt64=w.prototype.cd;w.prototype.md=function(i,e,t,r){if(e!=null){i=Zt(this,i);for(var n=0;n<e.length;n++)this.a.A(t(e[n]),r(e[n]));Jt(this,i)}};w.prototype.writePackedSplitFixed64=w.prototype.md;w.prototype.nd=function(i,e,t,r){if(e!=null){i=Zt(this,i);for(var n=0;n<e.length;n++)this.a.l(t(e[n]),r(e[n]));Jt(this,i)}};w.prototype.writePackedSplitVarint64=w.prototype.nd;w.prototype.od=function(i,e,t,r){if(e!=null){i=Zt(this,i);for(var n=this.a,s=0;s<e.length;s++)jd(t(e[s]),r(e[s]),function(o,l){n.l(o>>>0,l>>>0)});Jt(this,i)}};w.prototype.writePackedSplitZigzagVarint64=w.prototype.od;w.prototype.dd=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++){var r=Zd(e[t]);this.a.l(r.lo,r.hi)}Jt(this,i)}};w.prototype.writePackedInt64String=w.prototype.dd;w.prototype.pd=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.j(e[t]);Jt(this,i)}};w.prototype.writePackedUint32=w.prototype.pd;w.prototype.qd=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.j(parseInt(e[t],10));Jt(this,i)}};w.prototype.writePackedUint32String=w.prototype.qd;w.prototype.rd=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.va(e[t]);Jt(this,i)}};w.prototype.writePackedUint64=w.prototype.rd;w.prototype.sd=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++){var r=Zo(e[t]);this.a.l(r.lo,r.hi)}Jt(this,i)}};w.prototype.writePackedUint64String=w.prototype.sd;w.prototype.hd=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.wa(e[t]);Jt(this,i)}};w.prototype.writePackedSint32=w.prototype.hd;w.prototype.jd=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.xa(e[t]);Jt(this,i)}};w.prototype.writePackedSint64=w.prototype.jd;w.prototype.kd=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.W(Hc(e[t]));Jt(this,i)}};w.prototype.writePackedSint64String=w.prototype.kd;w.prototype.ld=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.W(e[t]);Jt(this,i)}};w.prototype.writePackedSintHash64=w.prototype.ld;w.prototype.Wc=function(i,e){if(e!=null&&e.length)for(je(this,i,2),this.a.j(4*e.length),i=0;i<e.length;i++)this.a.s(e[i])};w.prototype.writePackedFixed32=w.prototype.Wc;w.prototype.Xc=function(i,e){if(e!=null&&e.length)for(je(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.V(e[i])};w.prototype.writePackedFixed64=w.prototype.Xc;w.prototype.Yc=function(i,e){if(e!=null&&e.length)for(je(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++){var t=Zo(e[i]);this.a.A(t.lo,t.hi)}};w.prototype.writePackedFixed64String=w.prototype.Yc;w.prototype.ed=function(i,e){if(e!=null&&e.length)for(je(this,i,2),this.a.j(4*e.length),i=0;i<e.length;i++)this.a.S(e[i])};w.prototype.writePackedSfixed32=w.prototype.ed;w.prototype.fd=function(i,e){if(e!=null&&e.length)for(je(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.T(e[i])};w.prototype.writePackedSfixed64=w.prototype.fd;w.prototype.gd=function(i,e){if(e!=null&&e.length)for(je(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.ka(e[i])};w.prototype.writePackedSfixed64String=w.prototype.gd;w.prototype.$c=function(i,e){if(e!=null&&e.length)for(je(this,i,2),this.a.j(4*e.length),i=0;i<e.length;i++)this.a.L(e[i])};w.prototype.writePackedFloat=w.prototype.$c;w.prototype.Uc=function(i,e){if(e!=null&&e.length)for(je(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.J(e[i])};w.prototype.writePackedDouble=w.prototype.Uc;w.prototype.Tc=function(i,e){if(e!=null&&e.length)for(je(this,i,2),this.a.j(e.length),i=0;i<e.length;i++)this.a.I(e[i])};w.prototype.writePackedBool=w.prototype.Tc;w.prototype.Vc=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.R(e[t]);Jt(this,i)}};w.prototype.writePackedEnum=w.prototype.Vc;w.prototype.Zc=function(i,e){if(e!=null&&e.length)for(je(this,i,2),this.a.j(8*e.length),i=0;i<e.length;i++)this.a.K(e[i])};w.prototype.writePackedFixedHash64=w.prototype.Zc;w.prototype.td=function(i,e){if(e!=null&&e.length){i=Zt(this,i);for(var t=0;t<e.length;t++)this.a.N(e[t]);Jt(this,i)}};w.prototype.writePackedVarintHash64=w.prototype.td;typeof Ci=="object"&&(Ci.debug=Xr,Ci.Map=We,Ci.Message=xe,Ci.BinaryReader=T,Ci.BinaryWriter=w,Ci.ExtensionFieldInfo=Rc,Ci.ExtensionFieldBinaryInfo=Mw,Ci.exportSymbol=IS,Ci.inherits=ES,Ci.object={extend:SS},Ci.typeOf=Kn)});var Ww=B0((w0,L0)=>{"use strict";(function(i,e){typeof w0=="object"&&typeof L0<"u"?L0.exports=e():typeof define=="function"&&define.amd?define(e):(i=typeof globalThis<"u"?globalThis:i||self).jsSHA=e()})(w0,function(){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function e(P,x,C,O){var F,k,Y,Z=x||[0],ae=(C=C||0)>>>3,be=O===-1?3:0;for(F=0;F<P.length;F+=1)k=(Y=F+ae)>>>2,Z.length<=k&&Z.push(0),Z[k]|=P[F]<<8*(be+O*(Y%4));return{value:Z,binLen:8*P.length+C}}function t(P,x,C){switch(x){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(P){case"HEX":return function(O,F,k){return function(Y,Z,ae,be){var Ne,fe,Ee,Je;if(Y.length%2!=0)throw new Error("String of HEX type must be in byte increments");var ue=Z||[0],dt=(ae=ae||0)>>>3,at=be===-1?3:0;for(Ne=0;Ne<Y.length;Ne+=2){if(fe=parseInt(Y.substr(Ne,2),16),isNaN(fe))throw new Error("String of HEX type contains invalid characters");for(Ee=(Je=(Ne>>>1)+dt)>>>2;ue.length<=Ee;)ue.push(0);ue[Ee]|=fe<<8*(at+be*(Je%4))}return{value:ue,binLen:4*Y.length+ae}}(O,F,k,C)};case"TEXT":return function(O,F,k){return function(Y,Z,ae,be,Ne){var fe,Ee,Je,ue,dt,at,yt,At,Ji=0,ui=ae||[0],Mi=(be=be||0)>>>3;if(Z==="UTF8")for(yt=Ne===-1?3:0,Je=0;Je<Y.length;Je+=1)for(Ee=[],128>(fe=Y.charCodeAt(Je))?Ee.push(fe):2048>fe?(Ee.push(192|fe>>>6),Ee.push(128|63&fe)):55296>fe||57344<=fe?Ee.push(224|fe>>>12,128|fe>>>6&63,128|63&fe):(Je+=1,fe=65536+((1023&fe)<<10|1023&Y.charCodeAt(Je)),Ee.push(240|fe>>>18,128|fe>>>12&63,128|fe>>>6&63,128|63&fe)),ue=0;ue<Ee.length;ue+=1){for(dt=(at=Ji+Mi)>>>2;ui.length<=dt;)ui.push(0);ui[dt]|=Ee[ue]<<8*(yt+Ne*(at%4)),Ji+=1}else for(yt=Ne===-1?2:0,At=Z==="UTF16LE"&&Ne!==1||Z!=="UTF16LE"&&Ne===1,Je=0;Je<Y.length;Je+=1){for(fe=Y.charCodeAt(Je),At===!0&&(fe=(ue=255&fe)<<8|fe>>>8),dt=(at=Ji+Mi)>>>2;ui.length<=dt;)ui.push(0);ui[dt]|=fe<<8*(yt+Ne*(at%4)),Ji+=2}return{value:ui,binLen:8*Ji+be}}(O,x,F,k,C)};case"B64":return function(O,F,k){return function(Y,Z,ae,be){var Ne,fe,Ee,Je,ue,dt,at=0,yt=Z||[0],At=(ae=ae||0)>>>3,Ji=be===-1?3:0,ui=Y.indexOf("=");if(Y.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(Y=Y.replace(/=/g,""),ui!==-1&&ui<Y.length)throw new Error("Invalid '=' found in base-64 string");for(Ne=0;Ne<Y.length;Ne+=4){for(Je=Y.substr(Ne,4),Ee=0,fe=0;fe<Je.length;fe+=1)Ee|=i.indexOf(Je.charAt(fe))<<18-6*fe;for(fe=0;fe<Je.length-1;fe+=1){for(ue=(dt=at+At)>>>2;yt.length<=ue;)yt.push(0);yt[ue]|=(Ee>>>16-8*fe&255)<<8*(Ji+be*(dt%4)),at+=1}}return{value:yt,binLen:8*at+ae}}(O,F,k,C)};case"BYTES":return function(O,F,k){return function(Y,Z,ae,be){var Ne,fe,Ee,Je,ue=Z||[0],dt=(ae=ae||0)>>>3,at=be===-1?3:0;for(fe=0;fe<Y.length;fe+=1)Ne=Y.charCodeAt(fe),Ee=(Je=fe+dt)>>>2,ue.length<=Ee&&ue.push(0),ue[Ee]|=Ne<<8*(at+be*(Je%4));return{value:ue,binLen:8*Y.length+ae}}(O,F,k,C)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(O,F,k){return function(Y,Z,ae,be){return e(new Uint8Array(Y),Z,ae,be)}(O,F,k,C)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(O,F,k){return e(O,F,k,C)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function r(P,x,C,O){switch(P){case"HEX":return function(F){return function(k,Y,Z,ae){var be,Ne,fe="",Ee=Y/8,Je=Z===-1?3:0;for(be=0;be<Ee;be+=1)Ne=k[be>>>2]>>>8*(Je+Z*(be%4)),fe+="0123456789abcdef".charAt(Ne>>>4&15)+"0123456789abcdef".charAt(15&Ne);return ae.outputUpper?fe.toUpperCase():fe}(F,x,C,O)};case"B64":return function(F){return function(k,Y,Z,ae){var be,Ne,fe,Ee,Je,ue="",dt=Y/8,at=Z===-1?3:0;for(be=0;be<dt;be+=3)for(Ee=be+1<dt?k[be+1>>>2]:0,Je=be+2<dt?k[be+2>>>2]:0,fe=(k[be>>>2]>>>8*(at+Z*(be%4))&255)<<16|(Ee>>>8*(at+Z*((be+1)%4))&255)<<8|Je>>>8*(at+Z*((be+2)%4))&255,Ne=0;Ne<4;Ne+=1)ue+=8*be+6*Ne<=Y?i.charAt(fe>>>6*(3-Ne)&63):ae.b64Pad;return ue}(F,x,C,O)};case"BYTES":return function(F){return function(k,Y,Z){var ae,be,Ne="",fe=Y/8,Ee=Z===-1?3:0;for(ae=0;ae<fe;ae+=1)be=k[ae>>>2]>>>8*(Ee+Z*(ae%4))&255,Ne+=String.fromCharCode(be);return Ne}(F,x,C)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(F){return function(k,Y,Z){var ae,be=Y/8,Ne=new ArrayBuffer(be),fe=new Uint8Array(Ne),Ee=Z===-1?3:0;for(ae=0;ae<be;ae+=1)fe[ae]=k[ae>>>2]>>>8*(Ee+Z*(ae%4))&255;return Ne}(F,x,C)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(F){return function(k,Y,Z){var ae,be=Y/8,Ne=Z===-1?3:0,fe=new Uint8Array(be);for(ae=0;ae<be;ae+=1)fe[ae]=k[ae>>>2]>>>8*(Ne+Z*(ae%4))&255;return fe}(F,x,C)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l="Chosen SHA variant is not supported";function c(P,x){var C,O,F=P.binLen>>>3,k=x.binLen>>>3,Y=F<<3,Z=4-F<<3;if(F%4!=0){for(C=0;C<k;C+=4)O=F+C>>>2,P.value[O]|=x.value[C>>>2]<<Y,P.value.push(0),P.value[O+1]|=x.value[C>>>2]>>>Z;return(P.value.length<<2)-4>=k+F&&P.value.pop(),{value:P.value,binLen:P.binLen+x.binLen}}return{value:P.value.concat(x.value),binLen:P.binLen+x.binLen}}function p(P){var x={outputUpper:!1,b64Pad:"=",outputLen:-1},C=P||{},O="Output length must be a multiple of 8";if(x.outputUpper=C.outputUpper||!1,C.b64Pad&&(x.b64Pad=C.b64Pad),C.outputLen){if(C.outputLen%8!=0)throw new Error(O);x.outputLen=C.outputLen}else if(C.shakeLen){if(C.shakeLen%8!=0)throw new Error(O);x.outputLen=C.shakeLen}if(typeof x.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof x.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return x}function d(P,x,C,O){var F=P+" must include a value and format";if(!x){if(!O)throw new Error(F);return O}if(x.value===void 0||!x.format)throw new Error(F);return t(x.format,x.encoding||"UTF8",C)(x.value)}var h=function(){function P(x,C,O){var F=O||{};if(this.t=C,this.i=F.encoding||"UTF8",this.numRounds=F.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=x,this.u=[],this.s=0,this.h=!1,this.v=0,this.A=!1,this.l=[],this.H=[]}return P.prototype.update=function(x){var C,O=0,F=this.S>>>5,k=this.p(x,this.u,this.s),Y=k.binLen,Z=k.value,ae=Y>>>5;for(C=0;C<ae;C+=F)O+this.S<=Y&&(this.m=this.R(Z.slice(C,C+F),this.m),O+=this.S);this.v+=O,this.u=Z.slice(O>>>5),this.s=Y%this.S,this.h=!0},P.prototype.getHash=function(x,C){var O,F,k=this.U,Y=p(C);if(this.T){if(Y.outputLen===-1)throw new Error("Output length must be specified in options");k=Y.outputLen}var Z=r(x,k,this.C,Y);if(this.A&&this.F)return Z(this.F(Y));for(F=this.K(this.u.slice(),this.s,this.v,this.B(this.m),k),O=1;O<this.numRounds;O+=1)this.T&&k%32!=0&&(F[F.length-1]&=16777215>>>24-k%32),F=this.K(F,k,0,this.L(this.o),k);return Z(F)},P.prototype.setHMACKey=function(x,C,O){if(!this.g)throw new Error("Variant does not support HMAC");if(this.h)throw new Error("Cannot set MAC key after calling update");var F=t(C,(O||{}).encoding||"UTF8",this.C);this.k(F(x))},P.prototype.k=function(x){var C,O=this.S>>>3,F=O/4-1;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(O<x.binLen/8&&(x.value=this.K(x.value,x.binLen,0,this.L(this.o),this.U));x.value.length<=F;)x.value.push(0);for(C=0;C<=F;C+=1)this.l[C]=909522486^x.value[C],this.H[C]=1549556828^x.value[C];this.m=this.R(this.l,this.m),this.v=this.S,this.A=!0},P.prototype.getHMAC=function(x,C){var O=p(C);return r(x,this.U,this.C,O)(this.Y())},P.prototype.Y=function(){var x;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");var C=this.K(this.u.slice(),this.s,this.v,this.B(this.m),this.U);return x=this.R(this.H,this.L(this.o)),x=this.K(C,this.U,this.S,x,this.U)},P}(),f=function(P,x){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,O){C.__proto__=O}||function(C,O){for(var F in O)Object.prototype.hasOwnProperty.call(O,F)&&(C[F]=O[F])})(P,x)};function g(P,x){function C(){this.constructor=P}f(P,x),P.prototype=x===null?Object.create(x):(C.prototype=x.prototype,new C)}function E(P,x){return P<<x|P>>>32-x}function I(P,x){return P>>>x|P<<32-x}function _(P,x){return P>>>x}function S(P,x,C){return P^x^C}function M(P,x,C){return P&x^~P&C}function R(P,x,C){return P&x^P&C^x&C}function V(P){return I(P,2)^I(P,13)^I(P,22)}function H(P,x){var C=(65535&P)+(65535&x);return(65535&(P>>>16)+(x>>>16)+(C>>>16))<<16|65535&C}function K(P,x,C,O){var F=(65535&P)+(65535&x)+(65535&C)+(65535&O);return(65535&(P>>>16)+(x>>>16)+(C>>>16)+(O>>>16)+(F>>>16))<<16|65535&F}function q(P,x,C,O,F){var k=(65535&P)+(65535&x)+(65535&C)+(65535&O)+(65535&F);return(65535&(P>>>16)+(x>>>16)+(C>>>16)+(O>>>16)+(F>>>16)+(k>>>16))<<16|65535&k}function ce(P){return I(P,7)^I(P,18)^_(P,3)}function Q(P){return I(P,6)^I(P,11)^I(P,25)}function ke(P){return[1732584193,4023233417,2562383102,271733878,3285377520]}function ve(P,x){var C,O,F,k,Y,Z,ae,be=[];for(C=x[0],O=x[1],F=x[2],k=x[3],Y=x[4],ae=0;ae<80;ae+=1)be[ae]=ae<16?P[ae]:E(be[ae-3]^be[ae-8]^be[ae-14]^be[ae-16],1),Z=ae<20?q(E(C,5),M(O,F,k),Y,1518500249,be[ae]):ae<40?q(E(C,5),S(O,F,k),Y,1859775393,be[ae]):ae<60?q(E(C,5),R(O,F,k),Y,2400959708,be[ae]):q(E(C,5),S(O,F,k),Y,3395469782,be[ae]),Y=k,k=F,F=E(O,30),O=C,C=Z;return x[0]=H(C,x[0]),x[1]=H(O,x[1]),x[2]=H(F,x[2]),x[3]=H(k,x[3]),x[4]=H(Y,x[4]),x}function W(P,x,C,O){for(var F,k=15+(x+65>>>9<<4),Y=x+C;P.length<=k;)P.push(0);for(P[x>>>5]|=128<<24-x%32,P[k]=4294967295&Y,P[k-1]=Y/4294967296|0,F=0;F<P.length;F+=16)O=ve(P.slice(F,F+16),O);return O}var ut=function(P){function x(C,O,F){var k=this;if(C!=="SHA-1")throw new Error(l);var Y=F||{};return(k=P.call(this,C,O,F)||this).g=!0,k.F=k.Y,k.C=-1,k.p=t(k.t,k.i,k.C),k.R=ve,k.B=function(Z){return Z.slice()},k.L=ke,k.K=W,k.m=[1732584193,4023233417,2562383102,271733878,3285377520],k.S=512,k.U=160,k.T=!1,Y.hmacKey&&k.k(d("hmacKey",Y.hmacKey,k.C)),k}return g(x,P),x}(h);function le(P){return P=="SHA-224"?s.slice():o.slice()}function Se(P,x){var C,O,F,k,Y,Z,ae,be,Ne,fe,Ee,Je,ue=[];for(C=x[0],O=x[1],F=x[2],k=x[3],Y=x[4],Z=x[5],ae=x[6],be=x[7],Ee=0;Ee<64;Ee+=1)ue[Ee]=Ee<16?P[Ee]:K(I(Je=ue[Ee-2],17)^I(Je,19)^_(Je,10),ue[Ee-7],ce(ue[Ee-15]),ue[Ee-16]),Ne=q(be,Q(Y),M(Y,Z,ae),n[Ee],ue[Ee]),fe=H(V(C),R(C,O,F)),be=ae,ae=Z,Z=Y,Y=H(k,Ne),k=F,F=O,O=C,C=H(Ne,fe);return x[0]=H(C,x[0]),x[1]=H(O,x[1]),x[2]=H(F,x[2]),x[3]=H(k,x[3]),x[4]=H(Y,x[4]),x[5]=H(Z,x[5]),x[6]=H(ae,x[6]),x[7]=H(be,x[7]),x}var we=function(P){function x(C,O,F){var k=this;if(C!=="SHA-224"&&C!=="SHA-256")throw new Error(l);var Y=F||{};return(k=P.call(this,C,O,F)||this).F=k.Y,k.g=!0,k.C=-1,k.p=t(k.t,k.i,k.C),k.R=Se,k.B=function(Z){return Z.slice()},k.L=le,k.K=function(Z,ae,be,Ne){return function(fe,Ee,Je,ue,dt){for(var at,yt=15+(Ee+65>>>9<<4),At=Ee+Je;fe.length<=yt;)fe.push(0);for(fe[Ee>>>5]|=128<<24-Ee%32,fe[yt]=4294967295&At,fe[yt-1]=At/4294967296|0,at=0;at<fe.length;at+=16)ue=Se(fe.slice(at,at+16),ue);return dt==="SHA-224"?[ue[0],ue[1],ue[2],ue[3],ue[4],ue[5],ue[6]]:ue}(Z,ae,be,Ne,C)},k.m=le(C),k.S=512,k.U=C==="SHA-224"?224:256,k.T=!1,Y.hmacKey&&k.k(d("hmacKey",Y.hmacKey,k.C)),k}return g(x,P),x}(h),D=function(P,x){this.N=P,this.I=x};function Ge(P,x){var C;return x>32?(C=64-x,new D(P.I<<x|P.N>>>C,P.N<<x|P.I>>>C)):x!==0?(C=32-x,new D(P.N<<x|P.I>>>C,P.I<<x|P.N>>>C)):P}function ge(P,x){var C;return x<32?(C=32-x,new D(P.N>>>x|P.I<<C,P.I>>>x|P.N<<C)):(C=64-x,new D(P.I>>>x|P.N<<C,P.N>>>x|P.I<<C))}function Ze(P,x){return new D(P.N>>>x,P.I>>>x|P.N<<32-x)}function tt(P,x,C){return new D(P.N&x.N^~P.N&C.N,P.I&x.I^~P.I&C.I)}function jt(P,x,C){return new D(P.N&x.N^P.N&C.N^x.N&C.N,P.I&x.I^P.I&C.I^x.I&C.I)}function wt(P){var x=ge(P,28),C=ge(P,34),O=ge(P,39);return new D(x.N^C.N^O.N,x.I^C.I^O.I)}function st(P,x){var C,O;C=(65535&P.I)+(65535&x.I);var F=(65535&(O=(P.I>>>16)+(x.I>>>16)+(C>>>16)))<<16|65535&C;return C=(65535&P.N)+(65535&x.N)+(O>>>16),O=(P.N>>>16)+(x.N>>>16)+(C>>>16),new D((65535&O)<<16|65535&C,F)}function vi(P,x,C,O){var F,k;F=(65535&P.I)+(65535&x.I)+(65535&C.I)+(65535&O.I);var Y=(65535&(k=(P.I>>>16)+(x.I>>>16)+(C.I>>>16)+(O.I>>>16)+(F>>>16)))<<16|65535&F;return F=(65535&P.N)+(65535&x.N)+(65535&C.N)+(65535&O.N)+(k>>>16),k=(P.N>>>16)+(x.N>>>16)+(C.N>>>16)+(O.N>>>16)+(F>>>16),new D((65535&k)<<16|65535&F,Y)}function ki(P,x,C,O,F){var k,Y;k=(65535&P.I)+(65535&x.I)+(65535&C.I)+(65535&O.I)+(65535&F.I);var Z=(65535&(Y=(P.I>>>16)+(x.I>>>16)+(C.I>>>16)+(O.I>>>16)+(F.I>>>16)+(k>>>16)))<<16|65535&k;return k=(65535&P.N)+(65535&x.N)+(65535&C.N)+(65535&O.N)+(65535&F.N)+(Y>>>16),Y=(P.N>>>16)+(x.N>>>16)+(C.N>>>16)+(O.N>>>16)+(F.N>>>16)+(k>>>16),new D((65535&Y)<<16|65535&k,Z)}function Xi(P,x){return new D(P.N^x.N,P.I^x.I)}function Ut(P){var x=ge(P,1),C=ge(P,8),O=Ze(P,7);return new D(x.N^C.N^O.N,x.I^C.I^O.I)}function hr(P){var x=ge(P,14),C=ge(P,18),O=ge(P,41);return new D(x.N^C.N^O.N,x.I^C.I^O.I)}var en=[new D(n[0],3609767458),new D(n[1],602891725),new D(n[2],3964484399),new D(n[3],2173295548),new D(n[4],4081628472),new D(n[5],3053834265),new D(n[6],2937671579),new D(n[7],3664609560),new D(n[8],2734883394),new D(n[9],1164996542),new D(n[10],1323610764),new D(n[11],3590304994),new D(n[12],4068182383),new D(n[13],991336113),new D(n[14],633803317),new D(n[15],3479774868),new D(n[16],2666613458),new D(n[17],944711139),new D(n[18],2341262773),new D(n[19],2007800933),new D(n[20],1495990901),new D(n[21],1856431235),new D(n[22],3175218132),new D(n[23],2198950837),new D(n[24],3999719339),new D(n[25],766784016),new D(n[26],2566594879),new D(n[27],3203337956),new D(n[28],1034457026),new D(n[29],2466948901),new D(n[30],3758326383),new D(n[31],168717936),new D(n[32],1188179964),new D(n[33],1546045734),new D(n[34],1522805485),new D(n[35],2643833823),new D(n[36],2343527390),new D(n[37],1014477480),new D(n[38],1206759142),new D(n[39],344077627),new D(n[40],1290863460),new D(n[41],3158454273),new D(n[42],3505952657),new D(n[43],106217008),new D(n[44],3606008344),new D(n[45],1432725776),new D(n[46],1467031594),new D(n[47],851169720),new D(n[48],3100823752),new D(n[49],1363258195),new D(n[50],3750685593),new D(n[51],3785050280),new D(n[52],3318307427),new D(n[53],3812723403),new D(n[54],2003034995),new D(n[55],3602036899),new D(n[56],1575990012),new D(n[57],1125592928),new D(n[58],2716904306),new D(n[59],442776044),new D(n[60],593698344),new D(n[61],3733110249),new D(n[62],2999351573),new D(n[63],3815920427),new D(3391569614,3928383900),new D(3515267271,566280711),new D(3940187606,3454069534),new D(4118630271,4000239992),new D(116418474,1914138554),new D(174292421,2731055270),new D(289380356,3203993006),new D(460393269,320620315),new D(685471733,587496836),new D(852142971,1086792851),new D(1017036298,365543100),new D(1126000580,2618297676),new D(1288033470,3409855158),new D(1501505948,4234509866),new D(1607167915,987167468),new D(1816402316,1246189591)];function Qi(P){return P==="SHA-384"?[new D(3418070365,s[0]),new D(1654270250,s[1]),new D(2438529370,s[2]),new D(355462360,s[3]),new D(1731405415,s[4]),new D(41048885895,s[5]),new D(3675008525,s[6]),new D(1203062813,s[7])]:[new D(o[0],4089235720),new D(o[1],2227873595),new D(o[2],4271175723),new D(o[3],1595750129),new D(o[4],2917565137),new D(o[5],725511199),new D(o[6],4215389547),new D(o[7],327033209)]}function wi(P,x){var C,O,F,k,Y,Z,ae,be,Ne,fe,Ee,Je,ue,dt,at,yt,At=[];for(C=x[0],O=x[1],F=x[2],k=x[3],Y=x[4],Z=x[5],ae=x[6],be=x[7],Ee=0;Ee<80;Ee+=1)Ee<16?(Je=2*Ee,At[Ee]=new D(P[Je],P[Je+1])):At[Ee]=vi((ue=At[Ee-2],dt=void 0,at=void 0,yt=void 0,dt=ge(ue,19),at=ge(ue,61),yt=Ze(ue,6),new D(dt.N^at.N^yt.N,dt.I^at.I^yt.I)),At[Ee-7],Ut(At[Ee-15]),At[Ee-16]),Ne=ki(be,hr(Y),tt(Y,Z,ae),en[Ee],At[Ee]),fe=st(wt(C),jt(C,O,F)),be=ae,ae=Z,Z=Y,Y=st(k,Ne),k=F,F=O,O=C,C=st(Ne,fe);return x[0]=st(C,x[0]),x[1]=st(O,x[1]),x[2]=st(F,x[2]),x[3]=st(k,x[3]),x[4]=st(Y,x[4]),x[5]=st(Z,x[5]),x[6]=st(ae,x[6]),x[7]=st(be,x[7]),x}var Ri=function(P){function x(C,O,F){var k=this;if(C!=="SHA-384"&&C!=="SHA-512")throw new Error(l);var Y=F||{};return(k=P.call(this,C,O,F)||this).F=k.Y,k.g=!0,k.C=-1,k.p=t(k.t,k.i,k.C),k.R=wi,k.B=function(Z){return Z.slice()},k.L=Qi,k.K=function(Z,ae,be,Ne){return function(fe,Ee,Je,ue,dt){for(var at,yt=31+(Ee+129>>>10<<5),At=Ee+Je;fe.length<=yt;)fe.push(0);for(fe[Ee>>>5]|=128<<24-Ee%32,fe[yt]=4294967295&At,fe[yt-1]=At/4294967296|0,at=0;at<fe.length;at+=32)ue=wi(fe.slice(at,at+32),ue);return dt==="SHA-384"?[(ue=ue)[0].N,ue[0].I,ue[1].N,ue[1].I,ue[2].N,ue[2].I,ue[3].N,ue[3].I,ue[4].N,ue[4].I,ue[5].N,ue[5].I]:[ue[0].N,ue[0].I,ue[1].N,ue[1].I,ue[2].N,ue[2].I,ue[3].N,ue[3].I,ue[4].N,ue[4].I,ue[5].N,ue[5].I,ue[6].N,ue[6].I,ue[7].N,ue[7].I]}(Z,ae,be,Ne,C)},k.m=Qi(C),k.S=1024,k.U=C==="SHA-384"?384:512,k.T=!1,Y.hmacKey&&k.k(d("hmacKey",Y.hmacKey,k.C)),k}return g(x,P),x}(h),Zi=[new D(0,1),new D(0,32898),new D(2147483648,32906),new D(2147483648,2147516416),new D(0,32907),new D(0,2147483649),new D(2147483648,2147516545),new D(2147483648,32777),new D(0,138),new D(0,136),new D(0,2147516425),new D(0,2147483658),new D(0,2147516555),new D(2147483648,139),new D(2147483648,32905),new D(2147483648,32771),new D(2147483648,32770),new D(2147483648,128),new D(0,32778),new D(2147483648,2147483658),new D(2147483648,2147516545),new D(2147483648,32896),new D(0,2147483649),new D(2147483648,2147516424)],ii=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function Li(P){var x,C=[];for(x=0;x<5;x+=1)C[x]=[new D(0,0),new D(0,0),new D(0,0),new D(0,0),new D(0,0)];return C}function mt(P){var x,C=[];for(x=0;x<5;x+=1)C[x]=P[x].slice();return C}function Vt(P,x){var C,O,F,k,Y,Z,ae,be,Ne,fe=[],Ee=[];if(P!==null)for(O=0;O<P.length;O+=2)x[(O>>>1)%5][(O>>>1)/5|0]=Xi(x[(O>>>1)%5][(O>>>1)/5|0],new D(P[O+1],P[O]));for(C=0;C<24;C+=1){for(k=Li(),O=0;O<5;O+=1)fe[O]=(Y=x[O][0],Z=x[O][1],ae=x[O][2],be=x[O][3],Ne=x[O][4],new D(Y.N^Z.N^ae.N^be.N^Ne.N,Y.I^Z.I^ae.I^be.I^Ne.I));for(O=0;O<5;O+=1)Ee[O]=Xi(fe[(O+4)%5],Ge(fe[(O+1)%5],1));for(O=0;O<5;O+=1)for(F=0;F<5;F+=1)x[O][F]=Xi(x[O][F],Ee[O]);for(O=0;O<5;O+=1)for(F=0;F<5;F+=1)k[F][(2*O+3*F)%5]=Ge(x[O][F],ii[O][F]);for(O=0;O<5;O+=1)for(F=0;F<5;F+=1)x[O][F]=Xi(k[O][F],new D(~k[(O+1)%5][F].N&k[(O+2)%5][F].N,~k[(O+1)%5][F].I&k[(O+2)%5][F].I));x[0][0]=Xi(x[0][0],Zi[C])}return x}function ci(P){var x,C,O=0,F=[0,0],k=[4294967295&P,P/4294967296&2097151];for(x=6;x>=0;x--)(C=k[x>>2]>>>8*x&255)===0&&O===0||(F[O+1>>2]|=C<<8*(O+1),O+=1);return O=O!==0?O:1,F[0]|=O,{value:O+1>4?F:[F[0]],binLen:8+8*O}}function or(P){return c(ci(P.binLen),P)}function Mr(P,x){var C,O=ci(x),F=x>>>2,k=(F-(O=c(O,P)).value.length%F)%F;for(C=0;C<k;C++)O.value.push(0);return O.value}var Qn=function(P){function x(C,O,F){var k=this,Y=6,Z=0,ae=F||{};if((k=P.call(this,C,O,F)||this).numRounds!==1){if(ae.kmacKey||ae.hmacKey)throw new Error("Cannot set numRounds with MAC");if(k.o==="CSHAKE128"||k.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(k.C=1,k.p=t(k.t,k.i,k.C),k.R=Vt,k.B=mt,k.L=Li,k.m=Li(),k.T=!1,C){case"SHA3-224":k.S=Z=1152,k.U=224,k.g=!0,k.F=k.Y;break;case"SHA3-256":k.S=Z=1088,k.U=256,k.g=!0,k.F=k.Y;break;case"SHA3-384":k.S=Z=832,k.U=384,k.g=!0,k.F=k.Y;break;case"SHA3-512":k.S=Z=576,k.U=512,k.g=!0,k.F=k.Y;break;case"SHAKE128":Y=31,k.S=Z=1344,k.U=-1,k.T=!0,k.g=!1,k.F=null;break;case"SHAKE256":Y=31,k.S=Z=1088,k.U=-1,k.T=!0,k.g=!1,k.F=null;break;case"KMAC128":Y=4,k.S=Z=1344,k.M(F),k.U=-1,k.T=!0,k.g=!1,k.F=k.X;break;case"KMAC256":Y=4,k.S=Z=1088,k.M(F),k.U=-1,k.T=!0,k.g=!1,k.F=k.X;break;case"CSHAKE128":k.S=Z=1344,Y=k.O(F),k.U=-1,k.T=!0,k.g=!1,k.F=null;break;case"CSHAKE256":k.S=Z=1088,Y=k.O(F),k.U=-1,k.T=!0,k.g=!1,k.F=null;break;default:throw new Error(l)}return k.K=function(be,Ne,fe,Ee,Je){return function(ue,dt,at,yt,At,Ji,ui){var Mi,An,Cn=0,Dr=[],Rn=At>>>5,zs=dt>>>5;for(Mi=0;Mi<zs&&dt>=At;Mi+=Rn)yt=Vt(ue.slice(Mi,Mi+Rn),yt),dt-=At;for(ue=ue.slice(Mi),dt%=At;ue.length<Rn;)ue.push(0);for(ue[(Mi=dt>>>3)>>2]^=Ji<<Mi%4*8,ue[Rn-1]^=2147483648,yt=Vt(ue,yt);32*Dr.length<ui&&(An=yt[Cn%5][Cn/5|0],Dr.push(An.I),!(32*Dr.length>=ui));)Dr.push(An.N),64*(Cn+=1)%At==0&&(Vt(null,yt),Cn=0);return Dr}(be,Ne,0,Ee,Z,Y,Je)},ae.hmacKey&&k.k(d("hmacKey",ae.hmacKey,k.C)),k}return g(x,P),x.prototype.O=function(C,O){var F=function(ae){var be=ae||{};return{funcName:d("funcName",be.funcName,1,{value:[],binLen:0}),customization:d("Customization",be.customization,1,{value:[],binLen:0})}}(C||{});O&&(F.funcName=O);var k=c(or(F.funcName),or(F.customization));if(F.customization.binLen!==0||F.funcName.binLen!==0){for(var Y=Mr(k,this.S>>>3),Z=0;Z<Y.length;Z+=this.S>>>5)this.m=this.R(Y.slice(Z,Z+(this.S>>>5)),this.m),this.v+=this.S;return 4}return 31},x.prototype.M=function(C){var O=function(Y){var Z=Y||{};return{kmacKey:d("kmacKey",Z.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:d("Customization",Z.customization,1,{value:[],binLen:0})}}(C||{});this.O(C,O.funcName);for(var F=Mr(or(O.kmacKey),this.S>>>3),k=0;k<F.length;k+=this.S>>>5)this.m=this.R(F.slice(k,k+(this.S>>>5)),this.m),this.v+=this.S;this.A=!0},x.prototype.X=function(C){var O=c({value:this.u.slice(),binLen:this.s},function(F){var k,Y,Z=0,ae=[0,0],be=[4294967295&F,F/4294967296&2097151];for(k=6;k>=0;k--)(Y=be[k>>2]>>>8*k&255)==0&&Z===0||(ae[Z>>2]|=Y<<8*Z,Z+=1);return ae[(Z=Z!==0?Z:1)>>2]|=Z<<8*Z,{value:Z+1>4?ae:[ae[0]],binLen:8+8*Z}}(C.outputLen));return this.K(O.value,O.binLen,this.v,this.B(this.m),C.outputLen)},x}(h);return function(){function P(x,C,O){if(x=="SHA-1")this.j=new ut(x,C,O);else if(x=="SHA-224"||x=="SHA-256")this.j=new we(x,C,O);else if(x=="SHA-384"||x=="SHA-512")this.j=new Ri(x,C,O);else{if(x!="SHA3-224"&&x!="SHA3-256"&&x!="SHA3-384"&&x!="SHA3-512"&&x!="SHAKE128"&&x!="SHAKE256"&&x!="CSHAKE128"&&x!="CSHAKE256"&&x!="KMAC128"&&x!="KMAC256")throw new Error(l);this.j=new Qn(x,C,O)}}return P.prototype.update=function(x){this.j.update(x)},P.prototype.getHash=function(x,C){return this.j.getHash(x,C)},P.prototype.setHMACKey=function(x,C,O){this.j.setHMACKey(x,C,O)},P.prototype.getHMAC=function(x,C){return this.j.getHMAC(x,C)},P}()})});var xu=class extends Laya.Scene{};var _t=class{constructor(){this._keys=[];this.THIS_ID="id"}init(e){for(let t in e){this._keys.push(t);let r=e[t];e[t]instanceof String&&String(e[t]).indexOf("[[")>=0&&(r=JSON.parse(e[t])),this[t]=r}}checkItems(){}};var Bl=class extends _t{};var Ce=class{constructor(){this._values=[];this._keys=[];this.SERIALIZATION_NUM=new Date().getTime()}get values(){return this._values}get keys(){return this._keys}set(e,t){let r=this.indexOf(e);if(r>=0){this._values[r]=t;return}this._keys.push(e),this._values.push(t)}unshift(e,t){let r=this.indexOf(e);if(r>=0){this._values[r]=t;return}this._keys.unshift(e),this._values.unshift(t)}indexOf(e){let t=this._keys.indexOf(e);return t>=0?t:(e=e instanceof String?Number(e):e instanceof Number?e.toString():e,this._keys.indexOf(e))}get(e){let t=this.indexOf(e);return t<0?null:this._values[t]}remove(e){let t=this.indexOf(e);return t>=0?(this._keys.splice(t,1),this._values.splice(t,1),!0):!1}clear(){this._values.length=0,this._keys.length=0}};var Be=class Be{constructor(){}static get LoginType(){return Be._LoginType}static set LoginType(e){Be._LoginType=e,Be._LoginType&&Be._LoginType!=""&&Laya.LocalStorage.setItem(Be.COOKIE_CF_LoginType,Be._LoginType)}static get isWhiteList(){return!0}static get intance(){return Be._instance||(Be._instance=new Be),Be._instance}init(){}static get server(){return getServer()}static get vType(){return getVType()}static get vaddress(){return getVAddress()}static get requestTime(){return 0}static get loginTime(){return 0}static set m_iTimeFrame(e){if(e>1500){let t=function(){Be._m_iTimeFrame=0};Be._m_iTimeFrame=e,Laya.timer.clear(Laya.timer,t),Laya.timer.once(500,Laya.timer,t)}}static get m_iTimeFrame(){return Be._m_iTimeFrame}};Be.IsRelease=!1,Be.m_bInstantGame=!1,Be.useWebVersion=!1,Be.m_strVersionEX="V003",Be.m_bIsMobWeb=!1,Be.m_strWebTag="",Be.Js_Version="1",Be.Game_Version="20231227_01",Be.App_Version="1.0.0",Be.SDK_Version="1.0.0",Be.M_strCountry="1",Be.M_bAppData=!1,Be.bookingId=0,Be.teamId=0,Be.referral="",Be.showHeartLog=!1,Be.ignoreLang=!1,Be.ignoreSheetNo=!1,Be.m_bIsIphoneX=!1,Be.Debug=0,Be.Res=0,Be.isTest=!0,Be.Server_URL="",Be.IP_User="",Be.Plantform_APPID="17",Be.ServerId=22310001,Be.Login_UID="-1",Be._LoginType="gamecenter",Be.isInto=!1,Be.needDraw=!1,Be.isFull=!1,Be.justFull=!1,Be.Login_UDID="81BC19A8-B49B-47CC-BEFE-193E723B521A",Be.Device_Info="",Be.FCM_Token="",Be.APP_IsRelease=!0,Be.User_Lan="en",Be.UserAgent="",Be.Login_UserName="",Be.isWhite=!0,Be.APP_RES="",Be.COOKIE_CF_LAN="COOKIE_GG_LAN",Be.COOKIE_CF_LoginType="COOKIE_CF_LoginType",Be.IPHONEX_SCARE=1.22,Be.IPHONEX_TOP=44,Be.IPHONEX_BUTTOM=34,Be.DESIGN_WIDTH=1280,Be.DESIGN_HEIGHT=720,Be._m_iTimeFrame=0,Be.isStopPhysics=!1,Be.isDown=!1;var $=Be;var Pe=class i{constructor(){this._isLoading=!1}static get instance(){return i._instance||(i._instance=new i),i._instance}get isLoading(){return this._isLoading}init(){if(!this.txtLoadingView){var e=Laya.loader.getRes("scenes/notice/TxtLoadingView.lh");this.txtLoadingView=e.create()}}showLoading(e=!1){if(console.log("showLoading..."+e),this.txtLoadingView)e?(this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this._isLoading=!1):(this._isLoading=!0,this.showMaskLoading(),Laya.timer.once(3e3,this,this.showLazyLoading)),this.txtLoadingView.m_txtLabel&&(this.txtLoadingView.m_txtLabel.visible=!1);else return}showLoadingByInfo(e=""){console.log("showLoadingByInfo..."+e),this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this.txtLoadingView.m_txtLabel.text=e,this.txtLoadingView.m_txtLabel.visible=!0}showMaskLoading(){this._isLoading&&(this.txtLoadingView.backLayer.name="backLayer",this.txtLoadingView.backLayer.mouseEnabled=!0,this.txtLoadingView.backLayer.mouseThrough=!1,this.txtLoadingView.backLayer.visible=!0)}showLazyLoading(){this._isLoading&&(console.log("showLazyLoading..."),this.txtLoadingView.visible=!0,Laya.stage.addChild(this.txtLoadingView),this.txtLoadingView.x=(Laya.stage.width-this.txtLoadingView.width)/2,this.txtLoadingView.y=(Laya.stage.height-this.txtLoadingView.height)/2),Laya.timer.clear(this,this.showLazyLoading)}hideLoading(){if(console.log("hideLoading..."),this._isLoading=!1,this.txtLoadingView)this.txtLoadingView.removeSelf();else return}dispose(){this.txtLoadingView&&(this.txtLoadingView.destroy(),this.txtLoadingView.removeSelf(),this.txtLoadingView=null),this.txtLoadingView.backLayer&&(this.txtLoadingView.backLayer.destroy(),this.txtLoadingView.backLayer.removeSelf(),this.txtLoadingView.backLayer=null)}};var Mn=class extends _t{constructor(){super()}};var Aa=class{constructor(e,t){this._valuesObject={};this.sheetObject=e,this.BaseItemClass=t}get keys(){if(this._keys)return this._keys;this._keys=[];let e;for(let t in this.sheetObject)!t||t==""||this._keys.push(t);return this._keys}get values(){if(this._values)return this._values;this._values=[];let e;for(let t in this.sheetObject)this._valuesObject[t]?e=this._valuesObject[t]:(e=new this.BaseItemClass,e.init(this.sheetObject[t]),this._valuesObject[t]=e),this._values.push(e);return this._values}get(e){return this._valuesObject[e]?this._valuesObject[e]:this.sheetObject[e]}get1(e){if(this._valuesObject[e])return this._valuesObject[e];let t=this.sheetObject[e];if(t)return t;let r;this.BaseItemClass&&(r=new this.BaseItemClass,r.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig()  class : "+this.BaseItemClass),r.init(t)),this._valuesObject;let n=r||t;return this._valuesObject[e]=n,n}indexOf(e){let t=this._keys.indexOf(e);return t>=0?t:(e=e instanceof String?Number(e):e instanceof Number?e.toString():e,this._keys.indexOf(e))}clear(){this.sheetObject=null}};var Ca=class i{constructor(){}static get instance(){return i._instance||(i._instance=new i),i._instance}initSpotCfgData(){if(this.spotDic==null){let e=J.instance.getResByURL("config/spot.json");this.spotDic=new Aa(e.data,Mn)}}getSpotById(e){return this.initSpotCfgData(),this.spotDic.get(e)}get getSpotDic(){return this.initSpotCfgData(),this.spotDic}};var Ye=class i{constructor(){}registerCommCallBack(e=null){Laya.LayaEnv.isConch}static get instance(){return i._instance||(i._instance=new i),i._instance}sendCustumEvent(e,t=null,r=null){let n;if(r?n=r:n=Ca.instance.getSpotById(e),!n||!n.Event)return;let s,o=new Object;o.id=n.ID,o.eventKey=n.Event,o.type=n.type,this.sendWebEvent(o)}sendWebEvent(e){}dispose(){}reload(){Laya.Browser.window.location.reload()}testEvnt(){}};var Pl=class i{constructor(){this._mapUrl="";this._mapWidth=0;this._mapHeight=0;this._gridWidth=0;this._gridHeight=0;this._xPics=0;this._yPics=0;this._fuzzyName=""}static get instance(){return i._instance||(i._instance=new i),i._instance}loadScene(e,t,r,n,s,o,l){this._fuzzyName!=""&&this._fuzzyName!=o&&this.dispose(),this._mapWidth=e,this._mapHeight=t,this._gridWidth=r,this._gridHeight=n,this._fuzzySprite=s,this._xPics=Math.floor(this._mapWidth/r),this._yPics=Math.floor(this._mapHeight/n),this._fuzzyName=o,this._fuzzyCallBack=l;let c=J.instance.setResURL("scene/subScene/test1/"+o+".json");Laya.loader.load([{url:c,type:Laya.Loader.ATLAS}],Laya.Handler.create(this,this.loadSceneComplete),Laya.Handler.create(this,this.loadProcess,null,!1),null,0,!0,null,!0)}loadProcess(){}loadSceneComplete(){let e=Laya.Loader.getAtlas(J.instance.setResURL("scene/subScene/test1/"+this._fuzzyName+".json"));if(this._fuzzySprite){this._fuzzySprite.graphics.clear();let t=0,r=new Laya.Sprite;r.name="mapSprite",this._fuzzySprite.addChildAt(r,0);for(let n=0;n<this._yPics;n++)for(let s=0;s<this._xPics;s++){let o=Laya.loader.getRes(e[t]),l=new Laya.Image;r.addChild(l),l.texture=o,l.size(o.width,o.height),l.pos(s*this._gridWidth,n*this._gridHeight),t++}}this._fuzzyCallBack!=null&&this._fuzzyCallBack.run()}dispose(){this._fuzzyCallBack=null,this._fuzzyName&&this._fuzzyName!=""&&Laya.loader.clearRes(J.instance.setResURL("atlas/"+this._fuzzyName+".json"))}};var he=class he{constructor(){this._touchEnabled=!0;if(he._instance)throw new Error("LayerManager是单例,不可new.");he._instance=this}get m_sprPanelLayer(){return this._m_sprPanelLayer}set m_sprPanelLayer(e){this._m_sprPanelLayer=e}get m_sprMainUILayer(){return this._m_sprMainUILayer}set m_sprMainUILayer(e){this._m_sprMainUILayer=e}get m_sprTipLayer(){return this._m_sprTipLayer}set m_sprTipLayer(e){this._m_sprTipLayer=e}static get instence(){return he._instance||(he._instance=new he),he._instance}init(){this.m_sprSceneLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprSceneLayer),this.m_sprMainUILayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprMainUILayer),this.m_sprPanelLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprPanelLayer),this.m_sprPopLayer=new Laya.Sprite,this.m_sprPopLayer.mouseThrough=!0,Laya.stage.addChild(this.m_sprPopLayer),this.m_sprTipLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTipLayer),this.m_sprGuideLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprGuideLayer),this.m_sprTopLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTopLayer)}get touchEnabled(){return this._touchEnabled}set touchEnabled(e){this._touchEnabled!=e&&(this._touchEnabled=e,this.m_sprSceneLayer.mouseEnabled=this._touchEnabled,this.m_sprMainUILayer.mouseEnabled=this._touchEnabled,this.m_sprPanelLayer.mouseEnabled=this._touchEnabled,this.m_sprPopLayer.mouseEnabled=this._touchEnabled,this.m_sprTipLayer.mouseEnabled=this._touchEnabled,this.m_sprGuideLayer.mouseEnabled=this._touchEnabled,this.m_sprTopLayer.mouseEnabled=this._touchEnabled)}addToLayerAndSet(e,t=he.M_PANEL,r=he.CENTER){this.addToLayer(e,t),this.setPosition(e,r)}getLayerIndex(e,t=he.M_PANEL){let r;switch(t){case he.M_SCENE:r=this.m_sprSceneLayer.getChildIndex(e);break;case he.M_MAINUI:r=this.m_sprMainUILayer.getChildIndex(e);break;case he.M_PANEL:r=this.m_sprPanelLayer.getChildIndex(e);break;case he.M_POP:r=this.m_sprPopLayer.getChildIndex(e);break;case he.M_TIP:r=this.m_sprTipLayer.getChildIndex(e);break;case he.M_GUIDE:r=this.m_sprGuideLayer.getChildIndex(e);break;case he.M_TOP:r=this.m_sprTopLayer.getChildIndex(e);break}return r}addToLayerAt(e,t=he.M_PANEL,r=0){switch(t){case he.M_SCENE:this.m_sprSceneLayer.addChildAt(e,r);break;case he.M_MAINUI:this.m_sprMainUILayer.addChildAt(e,r);break;case he.M_PANEL:this.m_sprPanelLayer.addChildAt(e,r);break;case he.M_POP:this.m_sprPopLayer.addChildAt(e,r);break;case he.M_TIP:this.m_sprTipLayer.addChildAt(e,r);break;case he.M_GUIDE:this.m_sprGuideLayer.addChildAt(e,r);break;case he.M_TOP:this.m_sprTopLayer.addChildAt(e,r);break}}addToLayer(e,t=he.M_PANEL){switch(t){case he.M_SCENE:this.m_sprSceneLayer.addChild(e);break;case he.M_MAINUI:this.m_sprMainUILayer.addChild(e);break;case he.M_PANEL:this.m_sprPanelLayer.addChild(e);break;case he.M_POP:this.m_sprPopLayer.addChild(e);break;case he.M_TIP:this.m_sprTipLayer.addChild(e);break;case he.M_GUIDE:this.m_sprGuideLayer.addChild(e);break;case he.M_TOP:this.m_sprTopLayer.addChild(e);break}}removeFromLayer(e,t){switch(t){case he.M_SCENE:this.m_sprSceneLayer.removeChild(e);break;case he.M_MAINUI:this.m_sprMainUILayer.removeChild(e);break;case he.M_PANEL:this.m_sprPanelLayer.removeChild(e);break;case he.M_POP:this.m_sprPopLayer.removeChild(e);break;case he.M_GUIDE:this.m_sprGuideLayer.removeChild(e);break;case he.M_TOP:this.m_sprTopLayer.removeChild(e);break}}clearLayer(e){switch(e){case he.M_SCENE:this.m_sprSceneLayer.removeChildren();break;case he.M_MAINUI:this.m_sprSceneLayer.removeChildren();break;case he.M_PANEL:this.m_sprSceneLayer.removeChildren();break;case he.M_POP:this.m_sprSceneLayer.removeChildren();break;case he.M_TOP:this.m_sprSceneLayer.removeChildren();break}}get stageWidth(){let e;return e=Laya.stage.width,e}get stageHeight(){let e;return e=Laya.stage.height,e}setPosition(e,t,r=0,n=0,s=!1,o=!1){let l=Laya.stage.width,c=Laya.stage.height;switch(this.m_iStageWidth=l,this.m_iStageHeight=c,t){case he.UP:e.x=s?l/2:(l-e.width*e.scaleX)/2,e.y=0;break;case he.DOWN:e.x=s?l/2:(l-e.width*e.scaleX)/2,e.y=c-e.height*e.scaleY;break;case he.LEFT:e.x=0,e.y=o?c/2:(c-e.height*e.scaleY)/2;break;case he.RIGHT:e.x=l-e.width*e.scaleX,e.y=o?c/2:(c-e.height*e.scaleY)/2;break;case he.LEFTUP:e.x=0,e.y=0;break;case he.RIGHTUP:e.x=l-e.width*e.scaleX,e.y=0;break;case he.LEFTDOWN:e.x=0,e.y=c-e.height*e.scaleY;break;case he.RIGHTDOWN:e.x=l-e.width*e.scaleX,e.y=c-e.height*e.scaleY;break;case he.CENTERLEFT:e.x=l/2-e.width*e.scaleX,e.y=o?c/2:(c-e.height*e.scaleY)/2;break;case he.CENTERRIGHT:e.x=l/2,e.y=o?c/2:(c-e.height*e.scaleY)/2;break;case he.CENTER:e.x=s?l/2:(l-e.width*e.scaleX)/2,e.y=o?c/2:(c-e.height*e.scaleY)/2;break;default:break}e.x+=r,e.y+=n}setLayer(e,t,r){if(!e||!t||e.parent!=t.parent)return;let n=e.parent.getChildIndex(e),s=t.parent.getChildIndex(t);r?n>s&&(e.parent.setChildIndex(e,s),e.parent.setChildIndex(t,n)):n<s&&(e.parent.setChildIndex(e,s),e.parent.setChildIndex(t,n))}};he.M_SCENE=1,he.M_MAINUI=2,he.M_PANEL=3,he.M_POP=4,he.M_TIP=5,he.M_GUIDE=7,he.M_TOP=6,he.UP=1,he.DOWN=16,he.LEFT=256,he.RIGHT=4096,he.CENTER=65536,he.LEFTUP=he.LEFT|he.UP,he.RIGHTUP=he.RIGHT|he.UP,he.LEFTDOWN=he.LEFT|he.DOWN,he.RIGHTDOWN=he.RIGHT|he.DOWN,he.CENTERLEFT=he.CENTER|he.LEFT,he.CENTERRIGHT=he.CENTER|he.RIGHT,he.MOVE=-1;var pe=he;var oe=class{};oe.M_SCENE_MAIN="M_SCENE_MAIN",oe.M_SCENE_SHOP="M_SCENE_SHOP",oe.M_SCENE_AIRDROP="M_SCENE_AIRDROP",oe.M_SCENE_HERO="M_SCENE_HERO",oe.M_SCENE_PRE_LOAD="M_SCENE_PRE_LOAD",oe.M_SCENE_MATCH_READY="M_SCENE_MATCH_READY",oe.M_SCENE_MATCH="M_SCENE_MATCH",oe.M_SCENE_SNAKE_MATCH="M_SCENE_SNAKE_MATCH",oe.M_SCENE_AFKBATTLE="M_SCENE_AFKBATTLE",oe.M_SCENE_GUILD="M_SCENE_GUILD",oe.M_SCENE_RANK="M_SCENE_RANK",oe.M_SCENE_SHOLARSHIP="M_SCENE_SHOLARSHIP",oe.M_SCENE_GET_MAT="M_SCENE_GET_MAT",oe.M_SCENE_OPEN_GAME="M_SCENE_OPEN_GAME",oe.M_SCENE_ASSET="M_SCENE_ASSET",oe.M_SCENE_DIG="M_SCENE_DIG",oe.M_SCENE_MAIL="M_SCENE_MAIL",oe.M_SCENE_KNAPSACK="M_SCENE_KNAPSACK",oe.M_SCENE_UNION="M_SCENE_UNION",oe.M_SCENE_MYUNION="M_SCENE_MYUNION",oe.M_SCENE_LCPOOL="M_SCENE_LCPOOL",oe.M_SCENE_ARENA="M_SCENE_ARENA",oe.M_SCENE_FRIEND="M_SCENE_FRIEND",oe.M_SCENE_IGO_PAGE="M_SCENE_IGO_PAGE",oe.M_SCENE_DAILY_TASK="M_SCENE_DAILY_TASK",oe.M_SCENE_PVE="M_SCENE_PVE",oe.M_SCENE_ROLE="M_SCENE_ROLE";var v=class{};v.MOUSE_HOLDON="MOUSE_HOLDON",v.EVENT_OPEN_MODULE="EVENT_OPEN_MODULE",v.EVENT_MODULE_ADDED="EVENT_MODULE_ADDED",v.EVENT_CLOSE_MODULE="EVENT_CLOSE_MODULE",v.EVENT_CHECK_REMAIN="EVENT_CHECK_REMAIN",v.EVENT_LOADED_COMPLETE="EVENT_LOAD_COMPLETE",v.EVENT_LOADED_SCENE_BG_COM="EVENT_LOADED_SCENE_BG_COM",v.EVENT_LOAD_SKIN_COMPLETE="EVENT_LOAD_SKIN_COMPLETE",v.EVENT_LOAD_HEAD_SKIN_COMPLETE="EVENT_LOAD_HEAD_SKIN_COMPLETE",v.EVENT_LOADING_SUC="EVENT_LOADING_SUC",v.EVENT_BACK_TO_LOGIN="EVENT_BACK_TO_LOGIN",v.EVENT_LOGIN_GAME_END="EVENT_LOGIN_GAME_END",v.EVENT_ENTER_MAIN="EVENT_ENTER_MAIN",v.EVENT_CHANGE_HEAD="EVENT_CHANGE_HEAD",v.EVENT_MODIFY_HEAD="EVENT_MODIFY_HEAD",v.EVENT_ITEM_UPDATE="EVENT_ITEM_UPDATE",v.EVENT_ROLE_UPDATE="EVENT_ROLE_UPDATE",v.STAGE_ON_BLUR="STAGE_ON_BLUR",v.STAGE_ON_FOCUS="STAGE_ON_FOCUS",v.ACCOUNTVO_UPDATE="ACCOUNTVO_UPDATE",v.EVENT_WAIT_PLAYERINFO="EVENT_WAIT_PLAYERINFO",v.EVENT_END_HEROBUY="EVENT_END_HEROBUY",v.EVENT_END_HEROTRANSFER="EVENT_END_HEROTRANSFER",v.EVENT_REFRESH_HEROTRANSFER="EVENT_REFRESH_HEROTRANSFER",v.EVENT_REFRESH_QUAN_STATUS="EVENT_REFRESH_QUAN_STATUS",v.EVENT_REFRESH_ITEM_ONCHAIN_STATUS="EVENT_REFRESH_ITEM_ONCHAIN_STATUS",v.EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS="EVENT_REFRESH_RENT_HERO_ONCHAIN_STATUS",v.EVENT_REFRESH_NODE_ONCHAIN_STATUS="EVENT_REFRESH_NODE_ONCHAIN_STATUS",v.EVENT_REFRESH_UNIONMEMBER_TRANSFER="EVENT_REFRESH_UNIONMEMBER_TRANSFER",v.EVENT_REFRESH_KNAPSACK="EVENT_REFRESH_KNAPSACK",v.EVENT_ADD_UNIONMEMBER_ADDRESS="EVENT_ADD_UNIONMEMBER_ADDRESS",v.EVENT_ADD_TICKET_ADDRESS="EVENT_ADD_TICKET_ADDRESS",v.EVENT_EMOJI_ICON_SELECT="EVENT_EMOJI_ICON_SELECT",v.EVENT_COLOR_ICON_SELECT="EVENT_COLOR_ICON_SELECT",v.EVENT_CHECK_ICON_SELECT="EVENT_CHECK_ICON_SELECT",v.EVENT_CHECK_PLAYER_NUM_SELECT="EVENT_CHECK_PLAYER_NUM_SELECT",v.EVENT_CHECK_NODE_SELECT="EVENT_CHECK_NODE_SELECT",v.PACKAGE_UPDATE_ITEM="PACKAGE_UPDATE_ITEM",v.IMPROVE_SUCESS_EVENT="IMPROVE_SUCESS_EVENT",v.CHANG_POTRAIT="CHANG_POTRAIT",v.ROLE_INFO_CHANGE="ROLE_INFO_CHANGE",v.UPDATE_ASSETS="UPDATE_ASSETS",v.REFRESH_MAIN_TASK="REFRESH_MAIN_TASK",v.RECIVE_SUCESS_SERVICE="RECIVE_SUCESS_SERVICE",v.SCENE_ROLE_COMPELTE="SCENE_ROLE_COMPELTE",v.FITTING_CLOTH_BTN="FITTING_CLOTH_BTN",v.STORE_CLICKBG_EVENT="STORE_CLICKBG_EVENT",v.CLOSE_BG_VIEW="CLOSE_BG_VIEW",v.EVENT_UPDATE_ONLINE="EVENT_UPDATE_ONLINE",v.VIP_INFO_CHANGE="VIP_INFO_CHANGE",v.EVENT_FUNCTION_OPEN_UPDATE="EVENT_FUNCTION_OPEN_UPDATE",v.EVENT_ADD_ACTIVITY="EVENT_ADD_ACTIVITY",v.EVENT_REMOVE_ACTIVITY="EVENT_REMOVE_ACTIVITY",v.UPDATE_CHAO_PIAO="UPDATE_CHAO_PIAO",v.UPDATE_EXCHANGE_INFO="UPDATE_EXCHANGE_INFO",v.UPDATE_RED_STATE_EVENT="UPDATE_RED_STATE_EVENT",v.SYSTEM_OPEN_TIME_INITED="SYSTEM_OPEN_TIME_INITED",v.EVENT_OPEN_SHARE="EVENT_OPEN_SHARE",v.CHANGE_SCENE_BASE_ROLE_LAYER="CHANGE_SCENE_BASE_ROLE_LAYER",v.EVENT_CLICK_NUM="EVENT_CLICK_NUM",v.EVENT_CLICK_SPACE="EVENT_CLICK_SPACE",v.EVENT_HERO_DRAW_BACK="EVENT_HERO_DRAW_BACK",v.EVENT_Close_CreateRoom="EVENT_Close_CreateRoom",v.EVENT_ENTER_MATCH_ROOM="EVENT_ENTER_MATCH_ROOM",v.EVENT_UPDATE_MATCH_ROOM="EVENT_UPDATE_MATCH_ROOM",v.EVENT_CLICK_HERO="EVENT_CLICK_HERO",v.UPDATE_KILL_NUM="UPDATE_KILL_NUM",v.EVENT_RESTORE_DATA="EVENT_RESTORE_DATA",v.EVENT_FirstBlood="EVENT_FirstBlood",v.EVENT_MutiKill="EVENT_MutiKill",v.EVENT_GameScene_Gray="EVENT_GameScene_Gray",v.EVENT_Game_Delay="EVENT_Game_Delay",v.EVENT_UPDATE_ITEM_SKILL_COOL="UPDATE_SKILL_COOLTIME",v.EVENT_UPDATE_GLOBAL_COOL="EVENT_UPDATE_GLOBAL_COOL",v.EVENT_UPDATE_REDECE_COOL="EVENT_UPDATE_REDECE_COOL",v.EVENT_REFRESH_BAN_ACCOUNT="EVENT_REFRESH_BAN_ACCOUNT",v.EVENT_SUB_GUILD_UPDATE="EVENT_SUB_GUILD_UPDATE",v.EVENT_UNION_APPLY_MEMBER_UPDATE="EVENT_UNION_APPLY_MEMBER_UPDATE",v.EVENT_WELFARE_CLAIM="EVENT_WELFARE_CLAIM",v.EVENT_RECHARGE_GET="EVENT_RECHARGE_GET",v.CHANGE_WALLET_HERO="CHANGE_WALLET_HERO",v.CHANGE_ASSET_CHAIN="CHANGE_ASSET_CHAIN",v.CHANGE_WALLET_PROP="CHANGE_WALLET_PROP",v.CREATE_SUB_WALLET_SUCCESS="CREATE_SUB_WALLET_SUCCESS",v.REFRESH_ALL_WITHDRAW_DATA="REFRESH_ALL_WITHDRAW_DATA",v.CHANGE_FRIEND_APPLY_LIST="CHANGE_FRIEND_APPLY_LIST",v.CHANGE_FRIEND_LIST="CHANGE_FRIEND_LIST",v.REFRSH_RED="REFRSH_RED",v.REFRSH_APPLY_FRIEND_LIST="REFRSH_APPLY_FRIEND_LIST",v.ADD_AIR_WALLET_ITEM="ADD_AIR_WALLET_ITEM",v.ADD_AIR_SUB_WALLET_NAME="ADD_AIR_SUB_WALLET_NAME",v.AIR_SUB_WALLET_OPENHERO="AIR_SUB_WALLET_OPENHERO",v.CHANGE_WALLET_HERO_AIR="CHANGE_WALLET_HERO_AIR",v.UPDATE_UNION_MEMBER_LIST="UPDATE_UNION_MEMBER_LIST",v.EVENT_ADD_MONEY_ADDRESS="EVENT_ADD_MONEY_ADDRESS",v.REFRESH_MAINSCENE_HEAD_RED="REFRESH_MAINSCENE_HEAD_RED",v.REFRESH_ROLEINFO_RED="REFRESH_ROLEINFO_RED",v.REFRESH_ACTIVITY_RED="REFRESH_ACTIVITY_RED",v.SHOW_EQUIP_TIP="SHOW_EQUIP_TIP",v.REFRESH_RANK_DIALOG_RED="REFRESH_RANK_DIALOG_RED",v.REFRESH_MAIL_RED="REFRESH_MAIL_RED",v.SHOW_EQUIP_SHOP_TIP="SHOW_EQUIP_SHOP_TIP",v.ON_CONNECT_GAME_SERVER="ON_CONNECT_GAME_SERVER",v.LENGTH_CHANGE="LENGTH_CHANGE",v.KILL_SNAKE="KILL_SNAKE",v.UPDATE_LOCAL_WALLET_LIST_EVENT="UPDATE_LOCAL_WALLET_LIST_EVENT";var A=class i extends Laya.EventDispatcher{static get intance(){return i._instance||(i._instance=new i),i._instance}};var me=class{constructor(){}};me.NO_ALL=-1,me.YES=1,me.NO=2,me.SURE=4,me.CANCEL=8,me.CLOSE=16,me.RETURN_YES=1,me.RETURN_NO=2,me.RETURN_NONE=3,me.BASEALERTVIEW="BaseAlertDialog",me.MatchConfimDialog="MatchConfimDialog",me.InviteConfimDialog="InviteConfimDialog",me.ApplyConfimDialog="ApplyConfimDialog",me.BUYCONFIRMVIEW="BuyConfirmView",me.GUILDQUITVIEW="GuildQuitView",me.BuyItemConfirmView="BuyItemConfirmView",me.DOWNLOADALERT="DownLoadAlert";var gt=class i{constructor(){}static instance(){return i._instance||(i._instance=new i),i._instance}AlertByType(e,t=null,r=0,n=null,s=null,o=!1,l=null){r==0&&(r=me.YES|me.NO),this.onLoaded(r,e,t,n,s,o,l)}onLoaded(e,t,r,n=null,s=null,o=!1,l=null){ne.intance.openModule(t,{flag:e,okHandler:n,cancelHandler:s,data:r,destroyDoCancel:o,initHandler:l})}};var Zn=class Zn{constructor(){this._list=[];this._isNoticing=!1;this._isListener=!1}static get instance(){return Zn._instance||(Zn._instance=new Zn),Zn._instance}notice(e){this._isNoticing?this._isListener||(this._isListener=!0,this._list.push(e),Laya.timer.loop(Zn.Tip_Interval,this,this.onInterVal)):(this._list.push(e),this.noticeOne())}noticeOne(){var e=J.instance.m_objModuleViews.TxtNoticeView;let t;Laya.loader.load(e).then(r=>{if(!r){console.log("noticeOne : "+e+"  res is null");return}t=Laya.Pool.getItemByCreateFun("txtNotice",r.create,r);let n=this._list.shift();t.notice(n),Laya.stage.addChild(t),t.x=pe.instence.stageWidth*.5-t.width*.5,t.y=pe.instence.stageHeight*.5-t.height*.5,Laya.Tween.to(t,{y:t.y-250,alpha:.5},1e3,null,Laya.Handler.create(this,this.onFinish,[t]),1e3)})}onFinish(e){e&&(e.visible=!1,e.removeSelf())}onInterVal(){this._list.length>=1?this.noticeOne():(this._isNoticing=!1,this._isListener=!1,Laya.timer.clear(this,this.onInterVal))}};Zn.Tip_Interval=1e3;var ee=Zn;var Xe=class i{constructor(){this._curErrTxt=""}static get instance(){return i._instance||(i._instance=new i),i._instance}initErrData(e){this.errData=e}get(e){return this.errData[e]?this.errData[e].words:(console.warn("服务端错误码语言包未配表 错误码："+e),e)}showErrorWord(e,...t){var r=this.getLanguage2(e,t);ee.instance.notice(r)}getLanguage2(e,t){if(this.errData&&this.errData[e]){let r=this.errData[e].words;if(r&&r!="")return this._curErrTxt=L.instance.replacePlaceholder(r,t),this._curErrTxt}return this._curErrTxt=L.instance.replacePlaceholder(e+"",t),this._curErrTxt}showErrByString(e,t="#ff0000"){this._curErrTxt=e;let r=new Laya.Label(this._curErrTxt);r.width=500,r.align="center",r.height=40,r.fontSize=26,r.color=t,r.mouseEnabled=!1,r.strokeColor="#000000",r.stroke=.5,Laya.stage.addChild(r),r.x=(Laya.stage.width-r.width)/2,r.y=(Laya.stage.height-r.height)/2,Laya.Tween.to(r,{y:r.y-100,alpha:0},500,null,Laya.Handler.create(this,this.completeHandler,[r]),1e3)}completeHandler(e){e&&e.parent&&e.parent.removeChild(e)}dispose(){this.errData=null}};var vu=class extends _t{constructor(){super()}};var wu=class{constructor(e,t,r){this._idKeyName="";this._jsonName="";this._sheetItemCls=null;this._isParse=!1;this._idKeyName=t,this._jsonName=e,this._sheetItemCls=r,this._idToValueMap=new Ce,this._items=[]}parseJson(){if(this._isParse)return;let e=J.instance.getResByURL("config/"+this._jsonName+".json");if(!e)throw new Error("无效的配置数据"+this._jsonName);for(let t of e){let r=new this._sheetItemCls;r.beFill(t),this._idToValueMap.set(t[this._idKeyName],r),this._items.push(r),this.addItemProcess(r)}this._isParse=!0}addItemProcess(e){}getItemById(e){return this.excuteIsParse()&&this._idToValueMap.get(e)?this._idToValueMap.get(e):null}getAllItems(){return this.excuteIsParse()?this._items:null}excuteIsParse(){return this._isParse,this._isParse}};var Lu=class extends wu{constructor(){super("","","");this._itemsTypeMap=null;this._itemsTypeMap=new Ce}getCombineKey(t,r,n){return t+n.toString()+r}getItemsByChildType(t,r){let n=this.getCombineKey(t,r,"childType_itemType");if(this._itemsTypeMap.get(n))return this._itemsTypeMap.get(n);this._itemsTypeMap.set(n,[]);let s=j.intance.m_dicItems.values;for(let o of s)o.child_type==t&&o.itm_type==r&&this._itemsTypeMap.get(n).push(o);return this._itemsTypeMap.get(n)}};var Iu=class extends _t{realIcon(){return"https://cdn.bunnyswap.cc/images/items/"+this.icon}get starArr(){if(this._starArr)return this._starArr;if(this._starArr=[],this.max_quality==0)return this._starArr;let t=this.quality/this.max_quality*5;for(let r=1;r<=5;r++)t>=r?this._starArr.push(0):r-t<=.5?this._starArr.push(2):this._starArr.push(1);return this._starArr}};var Eu=class extends _t{};var Su=class extends _t{constructor(){super()}};var Tu=class extends _t{};var ku=class extends _t{constructor(){super()}};var Au=class extends _t{};var Cu=class extends _t{};var Ru=class extends _t{};var Mu=class extends _t{constructor(){super(...arguments);this.dT=1e4}async testUrl(){this.getUrl()}getUrl(){var t=this.url;let r=new Date().getTime(),n=this,s=new XMLHttpRequest;s.open("GET",t,!0),s.onload=function(){if(s.status>=200&&s.status<300)try{let l=s.responseText;var o=new Date().getTime()-r;n.dT=o}catch{console.log("Response is not valid JSON")}else console.error(`Error: ${s.status}`)},s.onerror=function(){console.error("Network error")},s.send()}};var Du=class extends _t{};var Bu=class extends _t{};var Pu=class extends _t{};var Ou=class extends _t{};var Ot=class Ot{constructor(){if(Ot._instance)throw new Error("SheetDataManager是单例,不可new.");Ot._instance=this,this._modelList=new Ce}static get intance(){return Ot._instance||(Ot._instance=new Ot),Ot._instance}init(){let e=Laya.Browser.now();this.m_dicItems=this.initConfigObject("item",Iu),this.m_dicShops=new Ce,this.m_dicShopMulDic=this.initConfig("shop",["type","icon"],Eu,!0,Laya.Handler.create(this,this.onSetShopItem,null,!1)),this.m_dicSnakes=this.initConfigObject("snake",Pu),this.m_dicFoods=this.initConfigObject("foods",Bu),this.m_dicArenaDic=new Ce,this.m_dicArenaNumMulDic=new Ce,this.m_dicArenaMulDic=this.initConfig("arena",["type","lv","coinType"],Tu,!0,Laya.Handler.create(this,this.onSetArena,null,!1)),this.m_dicArenaTypes=this.initConfig("arenaType",["id"],Du),this.m_dicSnakeLengthRules=this.initConfig("snakeLengthRules",["snakeId","segments"],Ou);var t=this.initConfig("node",["id"],Mu);this.m_dicNodes=this.initNodes(t),this.m_dicHead=this.initConfig("head",["id"],Su),this.m_dicCountry=this.initConfig("country",["id"],ku),this.m_dicCurrencyAddressMulDic=new Ce,this.m_dicCurrencyAddress=this.initConfig("currencyAddress",["sn"],Au,!0,Laya.Handler.create(this,this.onSetCurrencyAddress,null,!1)),this.m_dicCoinAddress=this.initConfig("coinAddress",["id"],Ru),this.m_dicACoin=this.initConfigObject("aCoin",Cu),this.m_dicGenerate=this.initConfigObject("general",vu),console.log("-----------------------sheetdata-time2:"+(Laya.Browser.now()-e))}getCharacterStars(e){e>4&&(e=4);for(let t of this.m_dicCharacterStars.values)if(t.starLv>e)return t;return null}getArenaTypesInSub(){var e=[];for(let t of this.m_dicArenaTypes.values)t.inSub==1&&e.push(t);return e}getArenaTypesInSubByType(e){var t=[];for(let r of this.m_dicArenaTypes.values)if(r.arenaType==e)return r;return[]}getArenaTypesInSubByItemId(e,t){for(let r of this.m_dicArenaDic.values)if(r.type==e&&r.item[0]==t)return r}onSetShopItem(e){this.m_dicShops.set(e.id,e)}onSetCurrencyAddress(e){var t=e.token.toLowerCase();this.m_dicCurrencyAddressMulDic.set(this.getCompoundKey([e.isSN,t,e.chainId]),e)}onSetArena(e){this.m_dicArenaDic.set(e.id,e),this.m_dicArenaNumMulDic.set(this.getCompoundKey([e.type,e.lv,e.coinType]),e)}preInit(){}getItemModel(){return this.getDataModel(Ot.DataType_Items)}getGeneralValueById(e){return this.m_dicGenerate&&this.m_dicGenerate.get(e)?this.m_dicGenerate.get(e).value:0}getDataModel(e){if(!this._modelList.get(e))switch(e){case Ot.DataType_Items:this._modelList.set(e,new Lu);break}return this._modelList.get(e)}initNodes(e){var t=new Ce;for(let n=0;n<e.values.length;n++){var r=e.values[n];r.open==1&&($.vType==2?r.type==2&&(t.set(r.id,r),r.testUrl()):r.type==1&&(t.set(r.id,r),r.testUrl()))}return t}testNodes(){var e=this.m_dicNodes;for(let r=0;r<e.values.length;r++){var t=e.values[r];t.testUrl()}}getNodeByAddr(e){var t=this.m_dicNodes;for(let n=0;n<t.values.length;n++){var r=t.values[n];if(r&&r.socketUrl==e)return r}return null}getCurrencyAddress(e){let r=Ot.intance.m_dicCurrencyAddress.values;for(let s=0;s<r.length;s++){var n=r[s];if($.vType==n.isSN&&e==n.id)return n.token}}getNodeRevenueCurrency(e){let r=Ot.intance.m_dicCurrencyAddress.values;for(let s=0;s<r.length;s++){var n=r[s];if($.vType==n.isSN&&e==n.id&&n.nodeRevenueAddress)return n}return null}getNodeCurrencyByTokenAndChainId(e,t){e=e.toLowerCase();var r=Ot.intance.getSheetDataByMultiKey(Ot.intance.m_dicCurrencyAddressMulDic,[$.vType,e,t]);return r}getRentCurrency(e){let r=Ot.intance.m_dicCurrencyAddress.values;for(let s=0;s<r.length;s++){var n=r[s];if($.vType==n.isSN&&e==n.id&&n.rentNftAddress)return n}return null}getCurrencyByChainType(e,t){let n=Ot.intance.m_dicCurrencyAddress.values;for(let o=0;o<n.length;o++){var s=n[o];if($.vType==s.isSN&&e==s.id&&t==s.chainType)return s}}getCurrency(e,t){let n=Ot.intance.m_dicCurrencyAddress.values;for(let o=0;o<n.length;o++){var s=n[o];if($.vType==s.isSN&&e==s.id&&t==s.chainId)return s}}getTokensByChainId(e,t){let n=Ot.intance.m_dicCurrencyAddress.values;var s=[];for(let l=0;l<n.length;l++){var o=n[l];t==1?$.vType==o.isSN&&o.openRecharge==1&&e==o.chainId&&s.push(o):t==2&&$.vType==o.isSN&&o.openExtract==1&&e==o.chainId&&s.push(o)}return s}getNetAddress(e){let r=Ot.intance.m_dicCoinAddress.values;for(let s=0;s<r.length;s++){var n=r[s];if($.vType==n.type&&e==n.tokenid)return n.tokenAddress}}getACoin(e,t){let n=Ot.intance.m_dicACoin.values;for(let o=0;o<n.length;o++){var s=n[o];if(e==s.token&&t==s.currency)return s}}static getArrFromDictionary(e,t,r){let n=[];for(let s=0;s<e.values.length;s++)e.values[s][t]+""==r+""&&n.push(e.values[s]);return n}getArrFromDicItemByKey(e,t){let r=[];for(let n=0;n<this.m_dicItems.values.length;n++)this.m_dicItems.values[n][e]+""==t+""&&r.push(this.m_dicItems.values[n]);return r}initConfigObject(e,t=null,r=null){let n="config/"+e+".json";console.log("initConfigObject： url: "+n);let s=J.instance.getResByURL(n).data;return new Aa(s,t)}initConfig(e,t,r=null,n=!1,s=null){let o="config/"+e+".json";console.log("initConfig url: "+o);let l=J.instance.getResByURL(o).data,c=new Ce;if(!l)return console.log("ERROR : SheetDataManager -->initConfig()  url:"+o),c;let p;for(let d=0;d<l.length;d++){let h=this.compoundKey(l[d],t);r?(p=new r,p.init==null&&console.log("ERROR :BaseItem> SheetDataManager -->initConfig()  url:"+o),p.init(l[d]),c.set(h,p),s&&s.runWith(p)):(c.set(h,l[d]),s&&s.runWith(l[d]))}if(n){let d=J.instance.setResURL(o);Laya.Loader.clearRes(d)}return c}compoundKey(e,t){let r="",n=t.length;if(n>1)for(let s=0;s<n;s++)r+=e[t[s]],s!=n-1&&(r+="_");else r=e[t[0]];return r}getCompoundKey(e){let t="",r=e.length;if(r>1)for(let n=0;n<r;n++)t+=e[n],n!=r-1&&(t+="_");else t=e[0];return t}initConfig2(e,t,r,n=!0){let s="config/"+e+".json",o=J.instance.getResByURL(s).data,l=new Ce;if(!o)return console.log("ERROR : SheetDataManager -->initConfig2()  url:"+s),l;let c;for(let p=0;p<o.length;p++){let d=o[p][t],h;l.get(d)==null?(h=[],l.set(d,h)):h=l.get(d),c=new r,c.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig2()  url:"+s),c.init(o[p]),h.push(c)}if(n&&e!="items"){let p=J.instance.setResURL(s);Laya.Loader.clearRes(p)}return l}getItemsBy(e,t){let r=this.getArrFromDicItemByKey("itm_type",e),n=[];for(let s of r)s.child_type.toString()==t.toString()&&n.push(s);return n}getSheetDataByMultiKey(e,t){let r=this.getCompoundKey(t);return e.get(r)}getEquipDataById(e,t=null){let n=Ot.intance.m_dicEquip.values;for(let o=0;o<n.length;o++){var s=n[o];if(t){if(e==s.id&&t==s.quality)return s}else if(e==s.id)return s}}getEquipSuitDataById(e){let r=Ot.intance.m_dicEquipSuit.values;for(let s=0;s<r.length;s++){var n=r[s];if(n.parts.indexOf(e)>-1)return n}}};Ot.DataType_Items="SheetDataManager:items",Ot.DataType_CatagoryChildType="SheetDataManager:CatagoryChildType",Ot.DataType_BeautyPiece="SheetDataManager:beautypiece",Ot.DataType_BeautyExp="SheetDataManager:beautyexp",Ot.DataType_ClothStyleScore="SheetDataManager:clothStyleScore";var j=Ot;var Oe=class{};Oe.TYPE_EXP=3003,Oe.TYPE_GOLD=3005,Oe.TYPE_TOX=3001,Oe.TYPE_USDT=3004,Oe.TYPE_BTC=3006,Oe.TYPE_ETH=3007,Oe.TYPE_BTOX=3011,Oe.TYPE_GALA=3010,Oe.TYPE_BNB=3013,Oe.TYPE_GGG=3017,Oe.TYPE_KLAY=3015,Oe.TYPE_BNRY=3016,Oe.TYPE_LLE=3017,Oe.TYPE_PC=3022,Oe.TYPE_SOL=3023,Oe.TYPE_MNT=3024,Oe.TYPE_PAS=3025,Oe.TYPE_QUAN_PVE=1980,Oe.TYPE_QUAN_MNT=4001,Oe.TYPE_REWARD_TOKEN=-9999;var Ue=class Ue{static getColorText(e,t="#FFFF00"){return'<font color="'+t+'">'+e+"</font>"}static getChildByName(e,t,r="name"){if(e&&e.hasOwnProperty(r)&&e[r]==t)return e;let n=e;if(n){let s=n.numChildren,o;for(let l=0;l<s;++l)if(o=n.getChildAt(l),o instanceof Laya.Sprite&&(o=Ue.getChildByName(o,t,r)),o&&o.hasOwnProperty(r)&&o[r]==t)return o}return null}static getChildByAttri(e,t){if(e&&e.hasOwnProperty(t)&&e[t])return e[t];let r=e;if(r){let n=r.numChildren,s;for(let o=0;o<n;++o)if(s=r.getChildAt(o),s instanceof Laya.Sprite){if(s=Ue.getChildByAttri(s,t),s)return s}else if(s&&s.hasOwnProperty(t)&&s[t])return s[t]}return null}static logs(e,t=0,r=!0,n=16777215){if(e=Ue.GetLogTime+" "+e,r)switch(t){case 0:n=16777215;break;case 1:n=16777215;break;case 2:n=16711680;break;case 3:n=16777215;break;case 4:n=13434777;break;case 5:n=16742399;break}}static get GetLogTime(){let e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()}static get GRAY(){return Ue._GRAY||(Ue._GRAY=new Laya.ColorFilter([.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0])),Ue._GRAY}static get GRAY1(){if(!Ue._GRAY1){let e=[.3086,.16094,.082,0,0,.2086,.26094,.082,0,0,.1086,.36094,.082,0,0,0,0,0,1,0];Ue._GRAY1=new Laya.ColorFilter(e)}return Ue._GRAY1}static get GLOW(){return Ue._GLOW||(Ue._GLOW=new Laya.GlowFilter("#ffffff",12,0,0)),Ue._GLOW}static get YELLOWGLOW(){return Ue._YELLOWGLOW||(Ue._YELLOWGLOW=new Laya.GlowFilter("#ffff00",10,0,0)),Ue._YELLOWGLOW}static get BLUR(){if(!Ue._BLUR){let e=new Laya.BlurFilter;e.strength=5,Ue._BLUR=[e]}return Ue._BLUR}static share(e=1001,t=2,r=null,n=null,s=0,o=0,l=null){}static get isParseWWhiteUser(){return Ue._isParseWWhiteUser}static get isWhiteName(){return $.isWhiteList}static itemListHandler(e,t){let r=e.dataSource,n=r[0],s=r[1],o=2,l=e.skin;l&&(l.indexOf("xinSmall")!=-1?o=1:l.indexOf("xinBig")!=-1&&(o=3));let c;o==1?c="common/common_clip/clip_xinSmall"+s+".png":o==3?c="common/common_clip/clip_xinBig"+s+".png":c="common/common_clip/clip_xinMiddle"+s+".png",e.skin=c,e.dataSource=n}static setStarList(e,t){e.renderHandler=new Laya.Handler(Ue,Ue.itemListHandler),e.dataSource=t}static get BLACK(){return Ue._BLACK||(Ue._BLACK=new Laya.ColorFilter,Ue._BLACK.setColor("#000000")),Ue._BLACK}static get YELLOW(){return Ue._YELLOW||(Ue._YELLOW=new Laya.ColorFilter,Ue._YELLOW.setColor("#ffe64b")),Ue._YELLOW}static get YELLOW1(){return Ue._YELLOW1||(Ue._YELLOW1=new Laya.ColorFilter,Ue._YELLOW1.setColor("#fee14e")),Ue._YELLOW1}static get RED1(){return Ue._RED1||(Ue._RED1=new Laya.ColorFilter,Ue._RED1.setColor("#ff4537")),Ue._RED1}static get BLUE(){return Ue._BLUE||(Ue._BLUE=new Laya.ColorFilter,Ue._BLUE.setColor("#2f72a7")),Ue._BLUE}static setColor(e="#13e2cf"){let t=new Laya.ColorFilter;return t.setColor(e),t}static heroNotEnought(e=1286){gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(e),me.YES,null)}static popTip(e){gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(e),me.YES,null)}static onGetHero(e=-1){ze.intance.setCurrentScene(oe.M_SCENE_SHOP,[1,e])}static popToMain(){var e="network error, back to mainscreen";gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(e),me.YES,Laya.Handler.create(this,this.setToMainScene))}static setToMainScene(){ze.intance.setCurrentScene(oe.M_SCENE_MAIN)}static isFightHero(e){return B.instance.playerDto.fightHeroPk==e||e==B.instance.playerDto.newFightHeroPk}static titickNotEnought(e=-1){var t=2,r=j.intance.getSheetDataByMultiKey(j.intance.m_dicShopMulDic,[t,e]);if(r&&r.open==1)gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(1060),me.CANCEL,Laya.Handler.create(this,this.onGetTitck,[e]));else{var n=j.intance.m_dicItems.get(e);n?ee.instance.notice(L.instance.getLanguage(1282,L.instance.getLanguage(n.name))):Xe.instance.showErrorWord(18)}}static RemError(){gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(1124),me.YES,null)}static NoHeroError(e){gt.instance().AlertByType(me.BASEALERTVIEW,e,me.YES,null)}static TransactionErrorTip(){gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(1224),me.YES,null)}static alertNoAll(e){gt.instance().AlertByType(me.BASEALERTVIEW,e,me.NO_ALL)}static onGetTitck(e=-1){ze.intance.setCurrentScene(oe.M_SCENE_SHOP,[2,e])}static moneyNotEnought(e=Oe.TYPE_TOX){var t=j.intance.m_dicItems.get(e),r=L.instance.getLanguage(t.name);ee.instance.notice(L.instance.getLanguage(1170,r))}static onGetMoney(e){ze.intance.setCurrentScene(oe.M_SCENE_ASSET,[1,e])}static openSquidGame(){gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(6056),me.CANCEL,Laya.Handler.create(this,this.onOpenSquidGame))}static onOpenSquidGame(){window.location.href="https://squidgamefi.io/?invitationCode=2oi"}static onOpenSwapView(){window.open("https://swap.phantomarena.ai","_blank")}static otherLogin(){gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(6054),me.YES,Laya.Handler.create(this,Ye.instance.reload))}static netError(){gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(1307),me.YES,Laya.Handler.create(this,Ye.instance.reload))}static commTipWithYes(e){gt.instance().AlertByType(me.BASEALERTVIEW,e,me.YES)}static shakeSprs(e,t=2,r=4,n=32){if(Ue.isShake)return;Ue.isShake=!0;let s=e.length,o=[];for(let d=0;d<s;d++){let h=e[d];o.push([h.x,h.y])}let l=[0,0],c=0,p=function(){l[c%2]=c++%4<2?0:r,c>t*4+1&&(Laya.timer.clear(Laya.stage,p),c=0,Ue.isShake=!1);for(let d=0;d<s;d++){let h=e[d];h.x=l[0]+o[d][0],h.y=l[1]+o[d][1]}};Laya.timer.loop(n,Laya.stage,p)}static shake(e,t=2,r=4,n=32){if(Ue.isShake)return;Ue.isShake=!0;let s=new Laya.Point(e.x,e.y),o=[0,0],l=0,c=function(){o[l%2]=l++%4<2?0:r,l>t*4+1&&(Laya.timer.clear(Laya.stage,c),l=0,Ue.isShake=!1),e.x=o[0]+s.x,e.y=o[1]+s.y};Laya.timer.loop(n,Laya.stage,c)}static checkIsFull(){}static fullScreen(e){var t,r=Laya.Browser.window.location.href;e?(r+="&isFull=1",t={type:"openChildPage",data:{url:r,fullScreen:"1",close:"0"}}):t={type:"closePage",data:""};var n=JSON.stringify(t);Laya.Browser.onIOS?(console.log("onIOS"),typeof webkit<"u"&&(console.log("onIOS1"),webkit.messageHandlers._tw_.postMessage(n),console.log("onIOS2"))):Laya.Browser.onAndroid&&(console.log("onAndriod0"),window&&typeof window._tw_<"u"&&(console.log("onAndriod1 str: "+n),window._tw_.callInto(n),console.log("onAndriod2")))}};Ue._isParseWWhiteUser=!1,Ue.isWWhiteUser=!1,Ue.isShake=!1,Ue.isFullScreen=!1;var re=Ue;var tn=class tn{constructor(){this.mainSceneX=10086;this.isCloseAll=!0;this.enterMainSceneTimes=0;this.isTopOpening=!1;this.isBottomOpening=!1;A.intance.on(v.EVENT_MODULE_ADDED,this,this.onAdded)}static get intance(){return tn._instance||(tn._instance=new tn),tn._instance}init(){}setup(){}onAdded(e){}getPreSceneData(){if(this.m_arrFromScenes.length<1)return[oe.M_SCENE_MAIN,!0,1,null];{let e=this.m_arrFromScenes.pop();return console.log("pop-----------route："+this.m_arrFromScenes.join(" | ")),e}return[oe.M_SCENE_MAIN,!0,1,null]}removePreSceneData(){this.m_arrFromScenes=[]}setBackScene(){let e=this.getPreSceneData();this.setCurrentScene(e[0],e[1],!1)}setMainScene(e=1,t=null){this.setCurrentScene(oe.M_SCENE_MAIN,t)}async setCurrentScene(e,t=null,r=!1,n=!0){console.log("setCurrentScene: ",e,t),this.preSceneName=e;let s=!1;if(this.m_sceneCurrent&&this.m_sceneCurrent.name==e){console.log("currentScene："+this.m_sceneCurrent.name+"  openScene：："+e);return}switch(this.isCloseAll?ne.intance.closeAll():this.isCloseAll=!0,this.m_sceneCurrent&&(this.m_arrFromScenes||(this.m_arrFromScenes=[]),r&&this.m_sceneCurrent.m_arrOpenSceneData[3]&&this.m_arrFromScenes.push(this.m_sceneCurrent.m_arrOpenSceneData),console.log("open-----------scene："+this.m_arrFromScenes),this.fromScene=this.m_sceneCurrent.name,console.log("fromSceneName: "+this.fromScene),tn.m_arrSceneToDialog.indexOf(e)==-1?(this.m_sceneCurrent==this.m_preScene&&(this.m_preScene=null),this.m_sceneCurrent.toScene=e,this.m_sceneCurrent.removeSelf(),this.m_sceneCurrent=null,Laya.loader.clearUnLoaded(),Pl.instance.dispose()):this.m_preScene=this.m_sceneCurrent,!r&&tn.m_arrSceneToDialog.indexOf(e)==-1&&this.m_preScene&&(this.m_sceneCurrent=this.m_preScene,this.m_sceneCurrent.toScene=e,this.m_sceneCurrent.removeSelf(),this.m_sceneCurrent=null,Laya.loader.clearUnLoaded(),Pl.instance.dispose())),e){case oe.M_SCENE_MAIN:this.m_arrFromScenes=[],this.m_sceneCurrent=await Laya.Scene.open("scenes/mainView/MainScene.ls"),this.enterMainSceneTimes++;break;case oe.M_SCENE_AIRDROP:this.m_sceneCurrent=await Laya.Scene.open("scenes/airdrop/AirdropScene.ls",!0,t);break;case oe.M_SCENE_SHOP:this.m_sceneCurrent=await Laya.Scene.open("scenes/shop/ShopScene.ls",!0,t);break;case oe.M_SCENE_RANK:this.m_sceneCurrent=await Laya.Scene.open("scenes/rank/RankScene.ls");break;case oe.M_SCENE_SHOLARSHIP:this.m_sceneCurrent=await Laya.Scene.open("scenes/scholarship/ScholarshipScene.ls");break;case oe.M_SCENE_FRIEND:this.m_sceneCurrent=await Laya.Scene.open("scenes/friend/FriendScene.ls");break;case oe.M_SCENE_HERO:this.m_sceneCurrent=await Laya.Scene.open("scenes/hero/MyHeroScene.ls");break;case oe.M_SCENE_KNAPSACK:this.m_sceneCurrent=await Laya.Scene.open("scenes/item/KnapsackScene.ls",!0,t);break;case oe.M_SCENE_MAIL:this.m_sceneCurrent=await Laya.Scene.open("scenes/mail/MailScene.ls");break;case oe.M_SCENE_UNION:this.m_sceneCurrent=await Laya.Scene.open("scenes/union/UnionScene.ls");break;case oe.M_SCENE_MYUNION:this.m_sceneCurrent=await Laya.Scene.open("scenes/union/MyUnionScene.ls",!0,t);break;case oe.M_SCENE_LCPOOL:this.m_sceneCurrent=await Laya.Scene.open("scenes/lcPool/LcPoolScene.ls",!0,t);break;case oe.M_SCENE_MATCH_READY:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/MatchReady.ls");break;case oe.M_SCENE_MATCH:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/Match.ls");break;case oe.M_SCENE_SNAKE_MATCH:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/SnakeMatch.ls");break;case oe.M_SCENE_ASSET:this.m_sceneCurrent=await Laya.Scene.open("scenes/asset/AssetNewScene.ls",!0,t);break;case oe.M_SCENE_GET_MAT:this.m_sceneCurrent=await Laya.Scene.open("scenes/getMat/GetMatScene.ls",!1,t);break;case oe.M_SCENE_OPEN_GAME:this.m_sceneCurrent=await Laya.Scene.open("scenes/getMat/OpenGameScene.ls",!1,t);break;case oe.M_SCENE_IGO_PAGE:this.m_sceneCurrent=await Laya.Scene.open("scenes/igoPage/IgoPageScene.ls");break;case oe.M_SCENE_DAILY_TASK:this.m_sceneCurrent=await Laya.Scene.open("scenes/dailyTasks/GhostRaffleScene.ls",!1,t);break;case oe.M_SCENE_PVE:this.m_sceneCurrent=await Laya.Scene.open("scenes/pve/PveScene.ls",!1,t);break;case oe.M_SCENE_ROLE:this.m_sceneCurrent=await Laya.Scene.open("scenes/createRole/RoleInfoScene.ls",!1,t);break;default:break}re.logs("======================  打开Scene: "+e+"  ======================"),this.m_sceneCurrent.name=e,this.m_sceneCurrent.fromScene=this.fromScene,this.m_sceneCurrent.m_arrOpenSceneData=[e,t,r,n];let o=pe.M_SCENE}onLoaded(e,t){let r=Laya.ClassUtils.getClass(t.type),n=new r;t.tip=n,this.tipMap.set(e,t)}initPreload(){}get currSceneName(){return this.m_sceneCurrent?this.m_sceneCurrent.name:""}};tn.m_arrSceneToDialog=[];var ze=tn;var St=class St{constructor(){this._m_bPlayMusic=!0;this._m_bPlayeSound=!0}static get instance(){return St._instance||(St._instance=new St),St._instance}get m_bPlayMusic(){return this._m_bPlayMusic}set m_bPlayMusic(e){this._m_bPlayMusic=e,e?this.m_strMusicURL!=null&&this.playMusicByURL(this.m_strMusicURL):this.musicChannel&&this.musicChannel.stop()}init(){let e=Laya.LocalStorage.getItem(St.COOKIE_CF_MUSIC);e!=null&&e!=""&&(St.instance.m_bPlayMusic=parseInt(e)==1);let t=Laya.LocalStorage.getItem(St.COOKIE_CF_SOUND);t!=null&&t!=""&&(St.instance.m_bPlayeSound=parseInt(t)==1)}get m_bPlayeSound(){return this._m_bPlayeSound}set m_bPlayeSound(e){this._m_bPlayeSound=e}playMusicByURL(e){this.m_bPlayMusic&&(this.m_strMusicURL,this.m_strMusicURL==e&&this.musicChannel,this.m_strMusicURL=e,Laya.SoundManager.stopMusic(),this.musicChannel=Laya.SoundManager.playMusic(e,0,new Laya.Handler(this,this.onComplete)))}playMusicByName(e,t=".ogg"){let r=J.instance.getSoundURL(e,t);this.playMusicByURL(r)}playSound(e,t=1){this.m_bPlayeSound&&Laya.SoundManager.playSound(e,t,new Laya.Handler(this,this.onComplete))}playSoundByName(e,t=1){let r=J.instance.getSoundURLogg(e);this.playSound(r,t)}stopSoundByName(e){let t=J.instance.getSoundURLogg(e);Laya.SoundManager.stopSound(t)}switchMusic(e){let t=e?1:0;St.instance.m_bPlayMusic=e,Laya.LocalStorage.setItem(St.COOKIE_CF_MUSIC,t.toString())}switchSound(e){let t=e?1:0;St.instance.m_bPlayeSound=e,Laya.LocalStorage.setItem(St.COOKIE_CF_SOUND,t.toString())}onComplete(){}};St.COOKIE_CF_MUSIC="COOKIE_CF_MUSIC",St.COOKIE_CF_SOUND="COOKIE_CF_SOUND",St.soundName_bg="bgm",St.soundName_hit="hit.mp3",St.soundName_win="result_win.mp3",St.soundName_fail="result_fail.mp3",St.soundName_kill_1="kill_1.mp3",St.soundName_kill_2="kill_2.mp3",St.soundName_kill_3="kill_3.mp3",St.soundName_kill_4="kill_4.mp3",St.soundName_kill_5="kill_5.mp3",St.soundName_eat_food_1="eat_food1.mp3",St.soundName_eat_food_2="eat_food2.mp3",St.soundName_eat_food_3="eat_food3.mp3",St.soundName_kill_die="kill_die.mp3",St.soundName32="ui32.ogg";var Ke=St;var Te=class{};Te.ARENA_TYPE_PROFESSIONAL=1,Te.ARENA_TYPE_AIRDROP=2,Te.ARENA_TYPE_TRAINING=3,Te.ARENA_TYPE_PVE=4,Te.ARENA_TYPE_TEAM=5,Te.ACTION_CREATE=1,Te.ACTION_JOIN=2,Te.ACTION_SIGNUP=3,Te.ACTION_WATCH=4,Te.ACTION_CREATE_BOOKING=5,Te.ACTION_JOIN_BOOKING=6,Te.STATE_WAIT=0,Te.STATE_SIGNUP=2,Te.STATE_GROUPED=3,Te.STATE_START=10,Te.CAMERA_IDLE=0,Te.CAMERA_FOLLOW_ME=1,Te.CAMERA_MAP_CLICK=2,Te.CAMERA_DIRECT_OPERATE=3,Te.CAMERA_FOLLOW_OTHER=4,Te.MATCHEND_REWARD=1,Te.MATCHEND_QUAN=2,Te.MATCHEND_DIEJIA=3;var ye=class{};ye.Sound={btnClick:""},ye.GameConfig={debug:!1,version:"1.0.0",frameRate:"30",defaultVolume:.7,skills:{speedUp:{duration:5,cooldown:10},shield:{duration:3,cooldown:15},magnet:{duration:8,cooldown:20},invisible:{duration:4,cooldown:25}}},ye.uiZOrder={common:1e3,hint:2e3,loading:2001},ye.closeType={cancel:1,close:2,ok:3,keyback:4},ye.JoystickMODE={FIXED:1,MOVED:2},ye.JoystickEventType={JET_TOUCH_BEGIN:1,JET_TOUCH_MOVE:2,JET_TOUCH_END:3},ye.JoystickSize={JoyStickBg:80,JoyStickHandleBg:40},ye.snackType={SELF:1,OTHERS:2},ye.snackSpeedRate={default:1,speedUp:2},ye.mapSize={width:64+1280*3+64,height:60+720*4+60,offsetX:64,offsetY:60,defaultMapRes:{width:1280,height:720,resPath:"res/snake/manual/game/img_back.png"}},ye.gameZordels={map:1,snacks:2},ye.snackGount=100,ye.collision={quadTree:{maxObjects:10,maxLevels:5},snake:{headRadius:18,bodyRadius:14},food:{radius:25,maxRadius:25}},ye.food={size:50,initCount:100,maxCount:200,spawnInterval:1e3,types:{NORMAL:1,GOLDEN:2,RAINBOW:3,POISON:4}},ye.score={kill:100,food:{NORMAL:1,GOLDEN:5,RAINBOW:10,POISON:-3}},ye.res={snackRingImg:"res/match2/img_ring.png"},ye.snack={defaultSpeed:6,defaultRotateSpeed:500,defaultLen:20,intervalBoneToDrawSkin:4,defaultRotation:270,defaultRadio:35/2,defaultMoveInterval:.033,defaultInvincibleTime:3,defaultShineInterval:.1,skinFlag:{head:1,body:2},useServer:!1},ye.SYNC_CONFIG={MAX_ALLOWED_ERROR:50,CORRECTION_TIME:300,SYNC_INTERVAL:100,PREDICTION_MULTIPLIER:1.2},ye.invincibleRing={margin:2,minScale:.5};var ft=class i{constructor(e=0,t=0){this.x=e,this.y=t}static create(e=0,t=0){return new i(e,t)}assign(e){return this.x=e.x,this.y=e.y,this}add(e){return new i(this.x+e.x,this.y+e.y)}sub(e){return new i(this.x-e.x,this.y-e.y)}mul(e){return new i(this.x*e,this.y*e)}getRotation(){let e=Math.atan2(this.y,this.x)*180/Math.PI;return e<0&&(e+=360),e}getRotationTo(e){let t=e.x-this.x,r=e.y-this.y,n=Math.atan2(r,-t)*180/Math.PI;return n<0&&(n+=360),n}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y);return e!==0&&(this.x/=e,this.y/=e),this}rotate(e){let t=e*Math.PI/180,r=Math.sin(t),n=Math.cos(t),s=this.x,o=this.y;this.x=s*n-o*r,this.y=s*r+o*n}dot(e){return this.x*e.x+this.y*e.y}equal(e){return this.x===e.x&&this.y===e.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}init(e=0,t=0){return this.x=e,this.y=t,this}clone(){return new i(this.x,this.y)}clamp(e,t){let r=this.length();return r>t&&this.normalize().mul(t),r<e&&this.normalize().mul(e),this}reset(){return this.x=0,this.y=0,this}toString(){return`(${this.x},${this.y})`}};var Qe=class i{constructor(){}static judgePosition(e,t){let r=Math.atan2(t,e)*180/Math.PI;return r<0&&(r+=360),Math.floor(r)}static distancePoint(e,t,r,n){return Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))}get2D_Distance(e,t){return Math.sqrt(Math.pow(Math.abs(e),2)+Math.pow(Math.abs(t),2))}static rollCharacterByDir(e,t,r,n){let s=r;return i.rollCharacter(e,t,s,n)}static rollCharacter(e,t,r,n){let s=r*(Math.PI/180);var o=e+n*Math.cos(s),l=t+n*Math.sin(s),c=Le.instance.currArenaItem.mapid,p=j.intance.m_dicMaps.get(c),d=p.offset;return o<d?o=d:o>p.width-d&&(o=p.width-d),l<d?l=d:l>p.height-d&&(l=p.height-d),console.log(`新的坐标：X=${o}, Y=${l}`),[o,l]}static getRandomPointInMap(){var e=Le.instance.currArenaItem.mapid,t=j.intance.m_dicMaps.get(e),r=t.width,n=t.height,s=t.offset;let o=Math.floor(Math.random()*(r-2*s))+s,l=Math.floor(Math.random()*(n-2*s))+s;return{x:o,y:l}}static createDirectPath(e,t,r,n=40,s=25){for(var o=[],l=r*Math.PI/180,c=1;c<n;++c){var p=e,d=t+s*c,h=-(d-t)*Math.sin(l)+e,f=(d-t)*Math.cos(l)+t;o.push(h,f)}return o}static pointsBack(e,t){if(t<=0||!e||e.length<4)return e;for(var r=0,n=-1,s=-1,o=0;o<e.length;o+=2){var l=e[o],c=e[o+1];n>0&&s>0&&(r+=this.distancePoint(n,s,l,c)),n=l,s=c}if(r<t)return null;for(var p=e.concat(),d=0,h=0;p&&p.length>=4&&d<t;){var f=p.pop(),g=p.pop(),E=p[p.length-1],I=p[p.length-2];if(d+=this.distancePoint(I,E,g,f),h=d-t,h>0){var _=Math.atan2(E-f,I-g),S=_*180/Math.PI+90;_=S*Math.PI/180;var M=E+h,R=-(M-E)*Math.sin(_)+I,V=(M-E)*Math.cos(_)+E;p.push(R,V)}}return p}static createLinePath(e,t,r,n,s=25,o=0){var l=[],c=Math.atan2(n-t,r-e);c=(c*180/Math.PI-90)*Math.PI/180;for(var p=this.distancePoint(e,t,r,n)-o,d=0,h=0;p>d;){var f=e,g=t+s*h,E=-(g-t)*Math.sin(c)+e,I=(g-t)*Math.cos(c)+t;d=this.distancePoint(e,t,E,I),p>d&&l.push(E,I),h++}return o==0&&l.push(r,n),l}static rolePosTransform(e,t,r){var n=new Laya.Matrix;return n.rotate(Math.PI/180*(e.modelAngle-90)),n.translate(t.x,t.y),n.transformPoint(r)}static pointtInPolygon(e,t){for(var r=0,n=0;n<t.length;n++){var s=t[n],o=t[(n+1)%t.length];if(s.y!=o.y&&!(e.y<Math.min(s.y,o.y))&&!(e.y>=Math.max(s.y,o.y))){var l=(e.y-s.y)*(o.x-s.x)/(o.y-s.y)+s.x;l>e.x&&r++}}return r%2==1}static pointInPie(e,t,r,n,s,o){var l=Math.atan2(o.y-t,o.x-e)*180/Math.PI,c=this.distancePoint(e,t,o.x,o.y);return l>=r&&l<=n&&c<=s}static getRandInRound(e,t){return Math.floor(Math.random()*(t-e+1))+e}static getUnitVector(e){let r=e*(Math.PI/180),n=1*Math.cos(r),s=1*Math.sin(r);return new Laya.Point(n,s)}static getAngleToVec(e){let t=e*Math.PI/180,r=Math.cos(t),n=Math.sin(t);return ft.create(r,n)}static subtract(e,t){let r=new Laya.Point;return r.x=e.x-t.x,r.y=e.y-t.y,r}static getDistance(e,t){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}static calculateDistance(e,t){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}static lerp(e,t,r){return e+(t-e)*r}};var y=class{};y.FindView="FindView",y.FindEndView="FindEndView",y.FindAskDialog="FindAskDialog",y.FindRankUpDialog="FindRankUpDialog",y.QuickTipDialog="QuickTipDialog",y.QuickEndView="QuickEndView",y.QuickShareView="QuickShareView",y.QuickOperatorDialog="QuickOperatorDialog",y.MainView="MainView",y.RoleDialog="RoleDialog",y.RemGetDialog="RemGetDialog",y.QuickRechargeDialog="QuickRechargeDialog",y.CreateNameDialog="CreateNameDialog",y.DailyTaskDialog="DailyTaskDialog",y.ActivityTaskDialog="ActivityTaskDialog",y.ShareDialog="ShareDialog",y.InvitationCenterDialog="InvitationCenterDialog",y.DailyTaskDrawDialog="DailyTaskDrawDialog",y.GuideView="GuideView",y.GuideDialogView="GuideDialogView",y.ShareView="ShareView",y.MainTopView="MainTopView",y.GetMoreDialog="GetMoreDialog",y.ShopView="ShopView",y.ItemGetDialog="ItemGetDialog",y.EquipStarUpDialog="EquipStarUpDialog",y.RewardGetDialog="RewardGetDialog",y.AssetNewView="AssetNewView",y.GetTitleDialog="GetTitleDialog",y.NewFunUnLockDialog="NewFunUnLockDialog",y.DialogView="DialogView",y.MallView="MallView",y.MallCardView="MallCardView",y.MallBuyDialog="MallBuyDialog",y.FittingUiView="FittingUiView",y.TaskDialog="TaskDialog",y.CommentDialog="CommentDialog",y.PotraitChangDialog="PotraitChangDialog",y.ClothespressView="ClothespressView",y.ItemSellDialog="ItemSellDialog",y.ItemInfoDialog="ItemInfoDialog",y.OnlineAward="OnlineAward",y.MaillView="MailView",y.MailSendView="MailSendView",y.GameSettingDialog="GameSettingDialog",y.GamesettingSoundView="GamesettingSoundView",y.GameSettingLanguageDialog="GameSettingLanguageDialog",y.GameSettingVersionDialog="GameSettingVersionDialog",y.FriendMainView="FriendMainView",y.FriendSearchView="FriendSearchView",y.FriendGetRewardDialog="FriendGetRewardDialog",y.FriendRewardDialog="FriendRewardDialog",y.PreLoadingView="PreLoadingView",y.RechargeDialog="RechargeDialog",y.WalletChooseHeroDialog="WalletChooseHeroDialog",y.EmployInfoDialog="EmployInfoDialog",y.WalletChoosePropsDialog="WalletChoosePropsDialog",y.FirstRechargeDialog="FirstRechargeDialog",y.FirstWeekRechargeView="FirstWeekRechargeView",y.ClientErrView="ClientErrView",y.RoleUpgradeView="RoleUpgradeView",y.ActiveRechargeView="ActiveRechargeView",y.SmallSaleView="SmallSaleView",y.RechargeSelectDialog="RechargeSelectDialog",y.FBLikeView="FBLikeView",y.TurnSuitPreView="TurnSuitPreView",y.SlotMachineView="SlotMachineView",y.SlotMachineRewardPreDialog="SlotMachineRewardPreDialog",y.SlotMachineResultDialog="SlotMachineResultDialog",y.GashaponView="GashaponView",y.GashaponRewardView="GashaponRewardView",y.ActivityRankRewardView="ActivityRankRewardView",y.AddRechargeView="AddRechargeView",y.CupMatchStartDialog="CupMatchStartDialog",y.CupMatchEndDialog="CupMatchEndDialog",y.CreateLoginView="CreateLoginView",y.SelectHeadDialog="SelectHeadDialog",y.RoleInfoDialog="RoleInfoDialog",y.SelectHeroDialog="SelectHeroDialog",y.CreateSubWalletDialog="CreateSubWalletDialog",y.FriendMemberDialog="FriendMemberDialog",y.FriendMemberMoreDialog="FriendMemberMoreDialog",y.FriendAddDialog="FriendAddDialog",y.FriendApplyBackDialog="FriendApplyBackDialog",y.FriendApplyDialog="FriendApplyDialog",y.WalletDialog="WalletDialog",y.WalletTransferDialog="WalletTransferDialog",y.CardPayView="CardPayView",y.SwapView="SwapView",y.UnionApplyDialog="UnionApplyDialog",y.GuildEntranceView="GuildEntranceView",y.UnionApplyDialogView="UnionApplyDialogView",y.UnionApplyMemberDialog="UnionApplyMemberDialog",y.CreateNoticeDialog="CreateNoticeDialog",y.UnionNoticeView="UnionNoticeView",y.GuildInfoDialog="GuildInfoDialog",y.CreateUnionDialog="CreateUnionDialog",y.UnionInfoView="UnionInfoView",y.UnionEarningView="UnionEarningView",y.UnionRevenueDetailDialog="UnionRevenueDetailDialog",y.UnionSetRevenueDialog="UnionSetRevenueDialog",y.UnionBattleRecordDialog="UnionBattleRecordDialog",y.UnionRevenueRecordDialog="UnionRevenueRecordDialog",y.RankUnionView="RankUnionView",y.UnionWarView="UnionWarView",y.UnionWarTipDialog="UnionWarTipDialog",y.UnionWarSuccessDialog="UnionWarSuccessDialog",y.UnionWarFailDialog="UnionWarFailDialog",y.GamesettingView="GamesettingView",y.GameSettingGameAccountView="GameSettingGameAccountView",y.GuildMessageView="GuildMessageView",y.GuildMessageEditorView="GuildMessageEditorView",y.UnionMemberView="UnionMemberView",y.UnionListView="UnionListView",y.CreateSubUnionView="CreateSubUnionView",y.ChangeUnionIconDialog="ChangeUnionIconDialog",y.MySubUnionView="MySubUnionView",y.UnionMemberApplyView="UnionMemberApplyView",y.UnionReferralView="UnionReferralView",y.UnionTransferView="UnionTransferView",y.TicketTransferView="TicketTransferView",y.HeroTransferView="HeroTransferView",y.BanAccountView="BanAccountView",y.GuildChiefPrivilegeView="GuildChiefPrivilegeView",y.GuildDonationView="GuildDonationView",y.NoticeDialog="NoticeDialog",y.HelpDialog="HelpDialog",y.ImgDialog="ImgDialog",y.ChampDetailDialog="ChampDetailDialog",y.ChampRecordDialog="ChampRecordDialog",y.LoadDialog="LoadDialog",y.ChangeHeadDialog="ChangeHeadDialog",y.CreateRoomDialog="CreateRoomDialog",y.CreateRentalDialog="CreateRentalDialog",y.MyLeasedDialog="MyLeasedDialog",y.MyRentedDialog="MyRentedDialog",y.MyRentalBuyDialog="MyRentalBuyDialog",y.BuyTicketDialog="BuyTicketDialog",y.EnterRoomView="EnterRoomView",y.MatchEndRankView="MatchEndRankView",y.MatchEndTeamRankView="MatchEndTeamRankView",y.MatchReadyView="MatchReadyView",y.MatchEndView="MatchEndView",y.MatchEndRewardTokensDialog="MatchEndRewardTokensDialog",y.HeroGetDialog="HeroGetDialog",y.InputPwdDialog="InputPwdDialog",y.RoomInfoDialog="RoomInfoDialog",y.MailDialog="MailDialog",y.TeamCreateShareDialog="TeamCreateShareDialog",y.TeamShareDialog="TeamShareDialog",y.TeamJoinUsingDialog="TeamJoinUsingDialog",y.MyTeamDialog="MyTeamDialog",y.TeamInfoDialog="TeamInfoDialog",y.MyFriendDialog="MyFriendDialog",y.UnionAttrView="UnionAttrView",y.UnionAttrLvUpDialog="UnionAttrLvUpDialog",y.UnionAttributeDetailsDialog="UnionAttributeDetailsDialog",y.NoServerView="NoServerView",y.UnionMemberMoreDialog="UnionMemberMoreDialog",y.HeroUpgradeDialog="HeroUpgradeDialog",y.HeroDetailDialog="HeroDetailDialog",y.SkillTipDialog="SkillTipDialog",y.TransferRecordDialog="TransferRecordDialog",y.AFKView="AFKView",y.AFKBagDialog="AFKBagDialog",y.AFKDropDetailDialog="AFKDropDetailDialog",y.AFKMapView="AFKMapView",y.AFKSelectLevelDialog="AFKSelectLevelDialog",y.Knapsack="Knapsack",y.KnapsackTipDialog="KnapsackTipDialog",y.HeroFormationDialog="HeroFormationDialog",y.SignInDialog="SignInDialog",y.InviteRewardDialog="InviteRewardDialog",y.ChallengLoseDialog="ChallengLoseDialog",y.ChallengWinDialog="ChallengWinDialog",y.ChallengBossDialog="ChallengBossDialog",y.ThirbleDropDialog="ThirbleDropDialog",y.LevelDropDialog="LevelDropDialog",y.UseCardDialog="UseCardDialog",y.ArenaView="ArenaView",y.MyBookingView="MyBookingView",y.ArenaLoseDialog="ArenaLoseDialog",y.ArenaBattleDialog="ArenaBattleDialog",y.ArenaWinDialog="ArenaWinDialog",y.ArenaWarNotesView="ArenaWarNotesView",y.ArenaRuleDialog="ArenaRuleDialog",y.EquipSelectDialog="EquipSelectDialog",y.EquipDetailDialog="EquipDetailDialog",y.HireDetailDialog="HireDetailDialog",y.ProxyDetailDialog="ProxyDetailDialog",y.WithDrawRecordDialog="WithDrawRecordDialog",y.NodeRevenueRecordDialog="NodeRevenueRecordDialog",y.RentalRecordDialog="RentalRecordDialog",y.PrivateChatDialog="PrivateChatDialog",y.AirdropRecordDialog="AirdropRecordDialog",y.ActivityInfoDialog="ActivityInfoDialog",y.CharacterStarDialog="CharacterStarDialog",y.LastDrawDialog="LastDrawDialog",y.IgoPageView="IgoPageView",y.IgoJoinDialog="IgoJoinDialog",y.IgoRecordDialog="IgoRecordDialog",y.DailyTaskPropsDialog="DailyTaskPropsDialog",y.DailyTaskNoPropsDialog="DailyTaskNoPropsDialog",y.PveSponsorView="PveSponsorView",y.PveRecordView="PveRecordView",y.PveChoosePropsDialog="PveChoosePropsDialog",y.ReferralDialog="ReferralDialog",y.ReferralL2Dialog="ReferralL2Dialog",y.TotalBattlesDialog="TotalBattlesDialog",y.DepositDialog="DepositDialog",y.WithdrawDialog="WithdrawDialog";var gr=class{constructor(){}};gr.TYPE_NORMAL=0,gr.TYPE_TRUST=1,gr.TYPE_WEB3=2,gr.type=0;var Ae=class{static initConfig(e){this.configDic=new Ce;for(let t of e){let r=t.sstringvalue;t.sadditional==="JSON"&&(r=JSON.parse(r)),this.configDic.set(t.skey2,r),this[t.skey2]=r}}};Ae.ADDRESS0="0x0000000000000000000000000000000000000000",Ae.TOKEN_ERC20ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"miner",type:"address"}],name:"addMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_delMinter",type:"address"}],name:"delMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idx",type:"uint256"}],name:"getMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMinterLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Ae.PUZZLE_ABI=[{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"bytes",name:"signature",type:"bytes"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"WithdrawToken",type:"event"},{inputs:[],name:"TOX",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDT",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"WBNB",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"getAmountsOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address",name:"token",type:"address"}],name:"getTokenAmountsOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"hasUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"hashList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],name:"setSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],Ae.PUZZLE_ABI_ETH=[{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"bytes",name:"signature",type:"bytes"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"WithdrawToken",type:"event"},{inputs:[],name:"GALA",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDT",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"WETH",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"getAmountsOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"hasUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"hashList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],name:"setSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"}],Ae.ACCOUNT_ADDRESS="0x5ff2123b0Aa4bD97eeF5F6388EFCB56cd29D6835",Ae.ACCOUNT_ABI=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"nickName",type:"string"},{indexed:!1,internalType:"string",name:"avatar",type:"string"},{indexed:!1,internalType:"uint256",name:"level",type:"uint256"},{indexed:!1,internalType:"uint256",name:"birthHeight",type:"uint256"},{indexed:!1,internalType:"uint256",name:"birthPlace",type:"uint256"},{indexed:!1,internalType:"uint256",name:"gender",type:"uint256"},{indexed:!1,internalType:"uint256",name:"influence",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_avatar",type:"string"}],name:"changeAvatar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_gender",type:"uint256"}],name:"changeGender",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_influence",type:"uint256"}],name:"changeInfluence",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_level",type:"uint256"}],name:"changeLevel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_nickname",type:"string"}],name:"changeNickName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"_nickname",type:"string"},{internalType:"string",name:"_avatar",type:"string"},{internalType:"uint256",name:"_level",type:"uint256"},{internalType:"uint256",name:"_birthHeight",type:"uint256"},{internalType:"uint256",name:"_birthPlace",type:"uint256"},{internalType:"uint256",name:"_gender",type:"uint256"},{internalType:"uint256",name:"_influence",type:"uint256"}],name:"createAccount",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getAccountInfo",outputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"nickName",type:"string"},{internalType:"string",name:"avatar",type:"string"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"birthHeight",type:"uint256"},{internalType:"uint256",name:"birthPlace",type:"uint256"},{internalType:"uint256",name:"gender",type:"uint256"},{internalType:"uint256",name:"influence",type:"uint256"}],internalType:"struct AccountInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newBaseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"newTokenURI",type:"string"}],name:"setTokenURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Ae.CREATE_ACCOUNT_ABI=[{inputs:[{internalType:"address",name:"AccountToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"accounts",type:"address[]"}],name:"BurnAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"nickname",type:"string"},{indexed:!1,internalType:"uint256",name:"country",type:"uint256"},{indexed:!1,internalType:"uint256",name:"gender",type:"uint256"},{indexed:!1,internalType:"string",name:"icon",type:"string"}],name:"RegisterAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"}],name:"burnAccount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"currentId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"iAccount",outputs:[{internalType:"contract IAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"isExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"nickname",type:"string"},{internalType:"uint256",name:"country",type:"uint256"},{internalType:"uint256",name:"gender",type:"uint256"},{internalType:"string",name:"icon",type:"string"}],name:"register",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"registerId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Ae.BUY_SNAKE_10="0x0a6695bd9f14a4b548e44f1fdaf8c38dc1a52846",Ae.BUY_SNAKE_10_ABI=[{inputs:[],name:"Cryptosnake",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"PRICE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ReceiveAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"USD",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"count",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"}],Ae.BUY_HERO_ABI=[{inputs:[{internalType:"address",name:"_Phantom",type:"address"},{internalType:"address",name:"_TOX",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"Phantom",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"TOX",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"TOXPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNFTParams",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"series",type:"uint256"},{internalType:"uint256",name:"level",type:"uint256"}],internalType:"struct PhantomMall.Params[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNameIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"union",type:"address"}],name:"list",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxSeriesCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"tos",type:"address[]"}],name:"mintByOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"mintByTOX",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"mintCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"nameCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"random",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_toxPrice",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Ae.TRANSFER_HERO_ABI=[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"uids",type:"uint256[]"}],name:"BatchTransfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"uids",type:"uint256[]"}],name:"batchTransfer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"hero",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],Ae.EDIT_ACCOUNT_ADDRESS="0xaa1B8FA74Ed295123a6336C2D3a88cB973160dfa",Ae.EDIT_ACCOUNT_ABI=[{inputs:[{internalType:"address",name:"_accountContract",type:"address"},{internalType:"string",name:"_website",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPirce",outputs:[{components:[{internalType:"address",name:"exchangeToken",type:"address"},{internalType:"uint256",name:"rate",type:"uint256"}],internalType:"struct UpdateProfile.Price",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWebsite",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_exchangeToken",type:"address"},{internalType:"uint256",name:"_rate",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_website",type:"string"}],name:"setWebsite",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"nickName",type:"string"},{internalType:"string",name:"avatar",type:"string"}],name:"updateProfile",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Ae.WITHDRAW_AND_RECHARGE_ADDRESS="",Ae.WITHDRAW_AND_RECHARGE_ABI="",Ae.RECHANGE_ADDRESS_TOX="0x32926612d9399C1088045AEB821CCB5Ba904D697",Ae.RECHANGE_ADDRESS="0x4952981D44cb95c52F0a62D4Fe8702081338D824";var rn=class{constructor(){this.coins={};this.needTip=!0}};var Ra=class i{constructor(){this.create_contract=null;this.edit_account=null;this.account_contract=null;this.tokenId=0}static get instance(){return i._instance||(i._instance=new i),i._instance}init(){typeof window.ethereum>"u"}async getAccountVoFromServer(){let e=await se.requestPost("cybertron-sys-api/api/v1/account/find",{address:te.instance.walletAddress},!1,!1);if(e){let t=new rn;return Object.assign(t,e),console.log("info========"+JSON.stringify(t)),t}return e}async updateProfile(e,t,r){var n=B.instance.playerDto.sex,s=B.instance.playerDto;let o=await se.requestPost("wxgame/player/changeInfo",{name:e,sex:n,icon:t,country:r});return o?(s.icon=o.icon,s.country=o.country,s.name=o.name,s.sex=o.sex,s):null}async getTokenId(){return this.tokenId?this.tokenId:(this.tokenId=await this.account_contract.methods.tokenOfOwnerByIndex(te.instance.walletAddress,0).call(),this.tokenId=parseInt(this.tokenId+""),this.tokenId)}};function _e(i,e,t){let r=i[e.name];if(typeof r=="function")return r;let n=i[t];return typeof n=="function"?n:s=>e(i,s)}pi();lt();var bp=class extends U{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}};Ii();Vr();Yl();os();js();Va();var W_="/docs/contract/encodeEventTopics";function cn(i){let{abi:e,eventName:t,args:r}=i,n=e[0];if(t){let c=ln({abi:e,name:t});if(!c)throw new Vl(t,{docsPath:W_});n=c}if(n.type!=="event")throw new Vl(void 0,{docsPath:W_});let s=ji(n),o=as(s),l=[];if(r&&"inputs"in n){let c=n.inputs?.filter(d=>"indexed"in d&&d.indexed),p=Array.isArray(r)?r:Object.values(r).length>0?c?.map(d=>r[d.name])??[]:[];p.length>0&&(l=c?.map((d,h)=>Array.isArray(p[h])?p[h].map((f,g)=>K_({param:d,value:p[h][g]})):typeof p[h]<"u"&&p[h]!==null?K_({param:d,value:p[h]}):null)??[])}return[o,...l]}function K_({param:i,value:e}){if(i.type==="string"||i.type==="bytes")return Ht(yr(e));if(i.type==="tuple"||i.type.match(/^(.*)\[(\d+)?\]$/))throw new bp(i.type);return cr([i],[e])}Ve();function ls(i,{method:e}){let t={};return i.transport.type==="fallback"&&i.transport.onResponse?.(({method:r,response:n,status:s,transport:o})=>{s==="success"&&e===r&&(t[n]=o.request)}),r=>t[r]||i.request}async function Op(i,e){let{address:t,abi:r,args:n,eventName:s,fromBlock:o,strict:l,toBlock:c}=e,p=ls(i,{method:"eth_newFilter"}),d=s?cn({abi:r,args:n,eventName:s}):void 0,h=await i.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?Ie(o):o,toBlock:typeof c=="bigint"?Ie(c):c,topics:d}]});return{abi:r,args:n,eventName:s,id:h,request:p(h),strict:!!l,type:"event"}}di();xr();pi();lt();Fn();Js();rc();var cI=3;function ur(i,{abi:e,address:t,args:r,docsPath:n,functionName:s,sender:o}){let l=i instanceof Wr?i:i instanceof U?i.walk(E=>"data"in E)||i.walk():{},{code:c,data:p,details:d,message:h,shortMessage:f}=l,g=(()=>i instanceof br?new ec({functionName:s}):[cI,Hn.code].includes(c)&&(p||d||h||f)?new Oi({abi:e,data:typeof p=="object"?p.data:p,functionName:s,message:l instanceof cs?d:f??h}):i)();return new Jl(g,{abi:e,args:r,contractAddress:t,docsPath:n,functionName:s,sender:o})}di();lt();$s();Vr();function l1(i){let e=Ht(`0x${i.substring(4)}`).substring(26);return On(`0x${e}`)}Pr();Bi();Ve();async function W1({hash:i,signature:e}){let t=ri(i)?i:Me(i),{secp256k1:r}=await Promise.resolve().then(()=>(ym(),G1));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){let{r:p,s:d,v:h,yParity:f}=e,g=Number(f??h),E=j1(g);return new r.Signature(Wt(p),Wt(d)).addRecoveryBit(E)}let o=ri(e)?e:Me(e),l=oi(`0x${o.slice(130)}`),c=j1(l);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function j1(i){if(i===0||i===1)return i;if(i===27)return 0;if(i===28)return 1;throw new Error("Invalid yParityOrV value")}async function _m({hash:i,signature:e}){return l1(await W1({hash:i,signature:e}))}_r();Ii();Ve();lt();Up();Ii();Ve();function qr(i,e="hex"){let t=K1(i),r=Ga(new Uint8Array(t.length));return t.encode(r),e==="hex"?xt(r.bytes):r.bytes}function K1(i){return Array.isArray(i)?XI(i.map(e=>K1(e))):QI(i)}function XI(i){let e=i.reduce((n,s)=>n+s.length,0),t=$1(e);return{length:(()=>e<=55?1+e:1+t+e)(),encode(n){e<=55?n.pushByte(192+e):(n.pushByte(192+55+t),t===1?n.pushUint8(e):t===2?n.pushUint16(e):t===3?n.pushUint24(e):n.pushUint32(e));for(let{encode:s}of i)s(n)}}}function QI(i){let e=typeof i=="string"?mi(i):i,t=$1(e.length);return{length:(()=>e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+t+e.length)(),encode(n){e.length===1&&e[0]<128?n.pushBytes(e):e.length<=55?(n.pushByte(128+e.length),n.pushBytes(e)):(n.pushByte(128+55+t),t===1?n.pushUint8(e.length):t===2?n.pushUint16(e.length):t===3?n.pushUint24(e.length):n.pushUint32(e.length),n.pushBytes(e))}}}function $1(i){if(i<2**8)return 1;if(i<2**16)return 2;if(i<2**24)return 3;if(i<2**32)return 4;throw new U("Length is too large.")}Vr();function q1(i){let{chainId:e,nonce:t,to:r}=i,n=i.contractAddress??i.address,s=Ht(Pi(["0x05",qr([e?Ie(e):"0x",n,t?Ie(t):"0x"])]));return r==="bytes"?mi(s):s}async function xm(i){let{authorization:e,signature:t}=i;return _m({hash:q1(e),signature:t??e})}Ve();Kp();Ka();lt();jr();var vm=class extends U{constructor(e,{account:t,docsPath:r,chain:n,data:s,gas:o,gasPrice:l,maxFeePerGas:c,maxPriorityFeePerGas:p,nonce:d,to:h,value:f}){let g=Xs({from:t?.address,to:h,value:typeof f<"u"&&`${Wa(f)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:o,gasPrice:typeof l<"u"&&`${hi(l)} gwei`,maxFeePerGas:typeof c<"u"&&`${hi(c)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${hi(p)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",g].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}};_s();pc();function Y1(i,{docsPath:e,...t}){let r=(()=>{let n=xs(i,t);return n instanceof Ir?i:n})();return new vm(r,{docsPath:e,...t})}mc();ca();Lm();ws();di();Ka();lt();var Im=class extends U{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},Ls=class extends U{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},Em=class extends U{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${hi(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}};Bi();lt();var vo=class extends U{constructor({blockHash:e,blockNumber:t}){let r="Block";e&&(r=`Block at hash "${e}"`),t&&(r=`Block at number "${t}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}};Ve();wm();Bi();wm();var Cy={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function ua(i){let e={...i,blockHash:i.blockHash?i.blockHash:null,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,chainId:i.chainId?oi(i.chainId):void 0,gas:i.gas?BigInt(i.gas):void 0,gasPrice:i.gasPrice?BigInt(i.gasPrice):void 0,maxFeePerBlobGas:i.maxFeePerBlobGas?BigInt(i.maxFeePerBlobGas):void 0,maxFeePerGas:i.maxFeePerGas?BigInt(i.maxFeePerGas):void 0,maxPriorityFeePerGas:i.maxPriorityFeePerGas?BigInt(i.maxPriorityFeePerGas):void 0,nonce:i.nonce?oi(i.nonce):void 0,to:i.to?i.to:null,transactionIndex:i.transactionIndex?Number(i.transactionIndex):null,type:i.type?Cy[i.type]:void 0,typeHex:i.type?i.type:void 0,value:i.value?BigInt(i.value):void 0,v:i.v?BigInt(i.v):void 0};return i.authorizationList&&(e.authorizationList=tE(i.authorizationList)),e.yParity=(()=>{if(i.yParity)return Number(i.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}var Q1=yo("transaction",ua);function tE(i){return i.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function dc(i){let e=(i.transactions??[]).map(t=>typeof t=="string"?t:ua(t));return{...i,baseFeePerGas:i.baseFeePerGas?BigInt(i.baseFeePerGas):null,blobGasUsed:i.blobGasUsed?BigInt(i.blobGasUsed):void 0,difficulty:i.difficulty?BigInt(i.difficulty):void 0,excessBlobGas:i.excessBlobGas?BigInt(i.excessBlobGas):void 0,gasLimit:i.gasLimit?BigInt(i.gasLimit):void 0,gasUsed:i.gasUsed?BigInt(i.gasUsed):void 0,hash:i.hash?i.hash:null,logsBloom:i.logsBloom?i.logsBloom:null,nonce:i.nonce?i.nonce:null,number:i.number?BigInt(i.number):null,size:i.size?BigInt(i.size):void 0,timestamp:i.timestamp?BigInt(i.timestamp):void 0,transactions:e,totalDifficulty:i.totalDifficulty?BigInt(i.totalDifficulty):null}}var Z1=yo("block",dc);async function Hi(i,{blockHash:e,blockNumber:t,blockTag:r,includeTransactions:n}={}){let s=r??"latest",o=n??!1,l=t!==void 0?Ie(t):void 0,c=null;if(e?c=await i.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await i.request({method:"eth_getBlockByNumber",params:[l||s,o]},{dedupe:!!l}),!c)throw new vo({blockHash:e,blockNumber:t});return(i.chain?.formatters?.block?.format||dc)(c)}async function wo(i){let e=await i.request({method:"eth_gasPrice"});return BigInt(e)}async function J1(i,e){return Ry(i,e)}async function Ry(i,e){let{block:t,chain:r=i.chain,request:n}=e||{};try{let s=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof s=="function"){let l=t||await _e(i,Hi,"getBlock")({}),c=await s({block:l,client:i,request:n});if(c===null)throw new Error;return c}if(typeof s<"u")return s;let o=await i.request({method:"eth_maxPriorityFeePerGas"});return Wt(o)}catch{let[s,o]=await Promise.all([t?Promise.resolve(t):_e(i,Hi,"getBlock")({}),_e(i,wo,"getGasPrice")({})]);if(typeof s.baseFeePerGas!="bigint")throw new Ls;let l=o-s.baseFeePerGas;return l<0n?0n:l}}async function ex(i,e){return Sm(i,e)}async function Sm(i,e){let{block:t,chain:r=i.chain,request:n,type:s="eip1559"}=e||{},o=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:t,client:i,request:n}):r?.fees?.baseFeeMultiplier??1.2)();if(o<1)throw new Im;let c=10**(o.toString().split(".")[1]?.length??0),p=f=>f*BigInt(Math.ceil(o*c))/BigInt(c),d=t||await _e(i,Hi,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){let f=await r.fees.estimateFeesPerGas({block:t,client:i,multiply:p,request:n,type:s});if(f!==null)return f}if(s==="eip1559"){if(typeof d.baseFeePerGas!="bigint")throw new Ls;let f=typeof n?.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:await Ry(i,{block:d,chain:r,request:n}),g=p(d.baseFeePerGas);return{maxFeePerGas:n?.maxFeePerGas??g+f,maxPriorityFeePerGas:f}}return{gasPrice:n?.gasPrice??p(await _e(i,wo,"getGasPrice")({}))}}Bi();Ve();async function Lo(i,{address:e,blockTag:t="latest",blockNumber:r}){let n=await i.request({method:"eth_getTransactionCount",params:[e,r?Ie(r):t]},{dedupe:!!r});return oi(n)}Ii();Ve();function Io(i){let{kzg:e}=i,t=i.to??(typeof i.blobs[0]=="string"?"hex":"bytes"),r=typeof i.blobs[0]=="string"?i.blobs.map(s=>mi(s)):i.blobs,n=[];for(let s of r)n.push(Uint8Array.from(e.blobToKzgCommitment(s)));return t==="bytes"?n:n.map(s=>xt(s))}Ii();Ve();function Eo(i){let{kzg:e}=i,t=i.to??(typeof i.blobs[0]=="string"?"hex":"bytes"),r=typeof i.blobs[0]=="string"?i.blobs.map(o=>mi(o)):i.blobs,n=typeof i.commitments[0]=="string"?i.commitments.map(o=>mi(o)):i.commitments,s=[];for(let o=0;o<r.length;o++){let l=r[o],c=n[o];s.push(Uint8Array.from(e.computeBlobKzgProof(l,c)))}return t==="bytes"?s:s.map(o=>xt(o))}Ve();ay();Pr();Ii();Ve();function tx(i,e){let t=e||"hex",r=ia(ri(i,{strict:!1})?yr(i):i);return t==="bytes"?r:Me(r)}function ix(i){let{commitment:e,version:t=1}=i,r=i.to??(typeof e=="string"?"hex":"bytes"),n=tx(e,"bytes");return n.set([t],0),r==="bytes"?n:xt(n)}function Tm(i){let{commitments:e,version:t}=i,r=i.to??(typeof e[0]=="string"?"hex":"bytes"),n=[];for(let s of e)n.push(ix({commitment:s,to:r,version:t}));return n}lt();var km=class extends U{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}},So=class extends U{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}},Am=class extends U{constructor({hash:e,size:t}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${t}`],name:"InvalidVersionedHashSizeError"})}},Cm=class extends U{constructor({hash:e,version:t}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${1}`,`Received: ${t}`],name:"InvalidVersionedHashVersionError"})}};Up();Or();Ii();Ve();function rx(i){let e=i.to??(typeof i.data=="string"?"hex":"bytes"),t=typeof i.data=="string"?mi(i.data):i.data,r=It(t);if(!r)throw new So;if(r>761855)throw new km({maxSize:761855,size:r});let n=[],s=!0,o=0;for(;s;){let l=Ga(new Uint8Array(131072)),c=0;for(;c<4096;){let p=t.slice(o,o+(32-1));if(l.pushByte(0),l.pushBytes(p),p.length<31){l.pushByte(128),s=!1;break}c++,o+=31}n.push(l)}return e==="bytes"?n.map(l=>l.bytes):n.map(l=>xt(l.bytes))}function Rm(i){let{data:e,kzg:t,to:r}=i,n=i.blobs??rx({data:e,to:r}),s=i.commitments??Io({blobs:n,kzg:t,to:r}),o=i.proofs??Eo({blobs:n,commitments:s,kzg:t,to:r}),l=[];for(let c=0;c<n.length;c++)l.push({blob:n[c],commitment:s[c],proof:o[c]});return l}ws();jr();function Mm(i){if(i.type)return i.type;if(typeof i.authorizationList<"u")return"eip7702";if(typeof i.blobs<"u"||typeof i.blobVersionedHashes<"u"||typeof i.maxFeePerBlobGas<"u"||typeof i.sidecars<"u")return"eip4844";if(typeof i.maxFeePerGas<"u"||typeof i.maxPriorityFeePerGas<"u")return"eip1559";if(typeof i.gasPrice<"u")return typeof i.accessList<"u"?"eip2930":"legacy";throw new Qp({transaction:i})}Bi();async function Sr(i){let e=await i.request({method:"eth_chainId"},{dedupe:!0});return oi(e)}var My=["blobVersionedHashes","chainId","fees","gas","nonce","type"],nx=new Map;async function Is(i,e){let{account:t=i.account,blobs:r,chain:n,gas:s,kzg:o,nonce:l,nonceManager:c,parameters:p=My,type:d}=e,h=t&&ht(t),f={...e,...h?{from:h?.address}:{}},g;async function E(){return g||(g=await _e(i,Hi,"getBlock")({blockTag:"latest"}),g)}let I;async function _(){return I||(n?n.id:typeof e.chainId<"u"?e.chainId:(I=await _e(i,Sr,"getChainId")({}),I))}if(p.includes("nonce")&&typeof l>"u"&&h)if(c){let S=await _();f.nonce=await c.consume({address:h.address,chainId:S,client:i})}else f.nonce=await _e(i,Lo,"getTransactionCount")({address:h.address,blockTag:"pending"});if((p.includes("blobVersionedHashes")||p.includes("sidecars"))&&r&&o){let S=Io({blobs:r,kzg:o});if(p.includes("blobVersionedHashes")){let M=Tm({commitments:S,to:"hex"});f.blobVersionedHashes=M}if(p.includes("sidecars")){let M=Eo({blobs:r,commitments:S,kzg:o}),R=Rm({blobs:r,commitments:S,proofs:M,to:"hex"});f.sidecars=R}}if(p.includes("chainId")&&(f.chainId=await _()),(p.includes("fees")||p.includes("type"))&&typeof d>"u")try{f.type=Mm(f)}catch{let S=nx.get(i.uid);typeof S>"u"&&(S=typeof(await E())?.baseFeePerGas=="bigint",nx.set(i.uid,S)),f.type=S?"eip1559":"legacy"}if(p.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){let S=await E(),{maxFeePerGas:M,maxPriorityFeePerGas:R}=await Sm(i,{block:S,chain:n,request:f});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<R)throw new Em({maxPriorityFeePerGas:R});f.maxPriorityFeePerGas=R,f.maxFeePerGas=M}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Ls;if(typeof e.gasPrice>"u"){let S=await E(),{gasPrice:M}=await Sm(i,{block:S,chain:n,request:f,type:"legacy"});f.gasPrice=M}}return p.includes("gas")&&typeof s>"u"&&(f.gas=await _e(i,To,"estimateGas")({...f,account:h&&{address:h.address,type:"json-rpc"}})),ir(f),delete f.parameters,f}Ve();async function Dm(i,{address:e,blockNumber:t,blockTag:r="latest"}){let n=t?Ie(t):void 0,s=await i.request({method:"eth_getBalance",params:[e,n||r]});return BigInt(s)}async function To(i,e){let{account:t=i.account}=e,r=t?ht(t):void 0;try{let W=function(le){let{block:Se,request:we,rpcStateOverride:D}=le;return i.request({method:"eth_estimateGas",params:D?[we,Se??"latest",D]:Se?[we,Se]:[we]})};var n=W;let{accessList:s,authorizationList:o,blobs:l,blobVersionedHashes:c,blockNumber:p,blockTag:d,data:h,gas:f,gasPrice:g,maxFeePerBlobGas:E,maxFeePerGas:I,maxPriorityFeePerGas:_,nonce:S,value:M,stateOverride:R,...V}=await Is(i,{...e,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),K=(p?Ie(p):void 0)||d,q=_o(R),ce=await(async()=>{if(V.to)return V.to;if(o&&o.length>0)return await xm({authorization:o[0]}).catch(()=>{throw new U("`to` is required. Could not infer from `authorizationList`")})})();ir(e);let Q=i.chain?.formatters?.transactionRequest?.format,ve=(Q||Er)({...vs(V,{format:Q}),from:r?.address,accessList:s,authorizationList:o,blobs:l,blobVersionedHashes:c,data:h,gas:f,gasPrice:g,maxFeePerBlobGas:E,maxFeePerGas:I,maxPriorityFeePerGas:_,nonce:S,to:ce,value:M}),ut=BigInt(await W({block:K,request:ve,rpcStateOverride:q}));if(o){let le=await Dm(i,{address:ve.from}),Se=await Promise.all(o.map(async we=>{let{address:D}=we,Ge=await W({block:K,request:{authorizationList:void 0,data:h,from:r?.address,to:D,value:Ie(le)},rpcStateOverride:q}).catch(()=>100000n);return 2n*BigInt(Ge)}));ut+=Se.reduce((we,D)=>we+D,0n)}return ut}catch(s){throw Y1(s,{...e,account:r,chain:i.chain})}}async function sx(i,e){let{abi:t,address:r,args:n,functionName:s,dataSuffix:o,...l}=e,c=Kt({abi:t,args:n,functionName:s});try{return await _e(i,To,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...l})}catch(p){let d=l.account?ht(l.account):void 0;throw ur(p,{abi:t,address:r,args:n,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:d?.address})}}Va();pi();ko();Ii();Vr();Yl();pi();Or();Yl();ey();Vp();js();var ax="/docs/contract/decodeEventLog";function Ao(i){let{abi:e,data:t,strict:r,topics:n}=i,s=r??!0,[o,...l]=n;if(!o)throw new up({docsPath:ax});let c=(()=>e.length===1?e[0]:e.find(I=>I.type==="event"&&o===as(ji(I))))();if(!(c&&"name"in c)||c.type!=="event")throw new Na(o,{docsPath:ax});let{name:p,inputs:d}=c,h=d?.some(I=>!("name"in I&&I.name)),f=h?[]:{},g=d.filter(I=>"indexed"in I&&I.indexed);for(let I=0;I<g.length;I++){let _=g[I],S=l[I];if(!S)throw new sn({abiItem:c,param:_});f[h?I:_.name||I]=nE({param:_,value:S})}let E=d.filter(I=>!("indexed"in I&&I.indexed));if(E.length>0){if(t&&t!=="0x")try{let I=Ys(E,t);if(I)if(h)f=[...f,...I];else for(let _=0;_<E.length;_++)f[E[_].name]=I[_]}catch(I){if(s)throw I instanceof Pa||I instanceof za?new Nr({abiItem:c,data:t,params:E,size:It(t)}):I}else if(s)throw new Nr({abiItem:c,data:"0x",params:E,size:0})}return{eventName:p,args:Object.values(f).length>0?f:void 0}}function nE({param:i,value:e}){return i.type==="string"||i.type==="bytes"||i.type==="tuple"||i.type.match(/^(.*)\[(\d+)?\]$/)?e:(Ys([i],e)||[])[0]}function Co(i){let{abi:e,args:t,logs:r,strict:n=!0}=i,s=(()=>{if(i.eventName)return Array.isArray(i.eventName)?i.eventName:[i.eventName]})();return r.map(o=>{try{let l=e.find(p=>p.type==="event"&&o.topics[0]===as(p));if(!l)return null;let c=Ao({...o,abi:[l],strict:n});return s&&!s.includes(c.eventName)||!sE({args:c.args,inputs:l.inputs,matchArgs:t})?null:{...c,...o}}catch(l){let c,p;if(l instanceof Na)return null;if(l instanceof Nr||l instanceof sn){if(n)return null;c=l.abiItem.name,p=l.abiItem.inputs?.some(d=>!("name"in d&&d.name))}return{...o,args:p?[]:{},eventName:c}}}).filter(Boolean)}function sE(i){let{args:e,inputs:t,matchArgs:r}=i;if(!r)return!0;if(!e)return!1;function n(s,o,l){try{return s.type==="address"?fn(o,l):s.type==="string"||s.type==="bytes"?Ht(yr(o))===l:o===l}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((s,o)=>{if(s==null)return!0;let l=t[o];return l?(Array.isArray(s)?s:[s]).some(p=>n(l,p,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([s,o])=>{if(o==null)return!0;let l=t.find(p=>p.name===s);return l?(Array.isArray(o)?o:[o]).some(p=>n(l,p,e[s])):!1}):!1}Ve();function Ui(i,{args:e,eventName:t}={}){return{...i,blockHash:i.blockHash?i.blockHash:null,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,logIndex:i.logIndex?Number(i.logIndex):null,transactionHash:i.transactionHash?i.transactionHash:null,transactionIndex:i.transactionIndex?Number(i.transactionIndex):null,...t?{args:e,eventName:t}:{}}}async function Ro(i,{address:e,blockHash:t,fromBlock:r,toBlock:n,event:s,events:o,args:l,strict:c}={}){let p=c??!1,d=o??(s?[s]:void 0),h=[];d&&(h=[d.flatMap(I=>cn({abi:[I],eventName:I.name,args:o?void 0:l}))],s&&(h=h[0]));let f;t?f=await i.request({method:"eth_getLogs",params:[{address:e,topics:h,blockHash:t}]}):f=await i.request({method:"eth_getLogs",params:[{address:e,topics:h,fromBlock:typeof r=="bigint"?Ie(r):r,toBlock:typeof n=="bigint"?Ie(n):n}]});let g=f.map(E=>Ui(E));return d?Co({abi:d,args:l,logs:g,strict:p}):g}async function Bm(i,e){let{abi:t,address:r,args:n,blockHash:s,eventName:o,fromBlock:l,toBlock:c,strict:p}=e,d=o?ln({abi:t,name:o}):void 0,h=d?void 0:t.filter(f=>f.type==="event");return _e(i,Ro,"getLogs")({address:r,args:n,blockHash:s,event:d,events:h,fromBlock:l,toBlock:c,strict:p})}Es();xr();Mo();async function Ai(i,e){let{abi:t,address:r,args:n,functionName:s,...o}=e,l=Kt({abi:t,args:n,functionName:s});try{let{data:c}=await _e(i,gn,"call")({...o,data:l,to:r});return rr({abi:t,args:n,functionName:s,data:c||"0x"})}catch(c){throw ur(c,{abi:t,address:r,args:n,docsPath:"/docs/contract/readContract",functionName:s})}}di();Es();xr();Mo();async function yx(i,e){let{abi:t,address:r,args:n,dataSuffix:s,functionName:o,...l}=e,c=l.account?ht(l.account):i.account,p=Kt({abi:t,args:n,functionName:o});try{let{data:d}=await _e(i,gn,"call")({batch:!1,data:`${p}${s?s.replace("0x",""):""}`,to:r,...l,account:c}),h=rr({abi:t,args:n,functionName:o,data:d||"0x"}),f=t.filter(g=>"name"in g&&g.name===e.functionName);return{result:h,request:{abi:f,address:r,args:n,dataSuffix:s,functionName:o,...l,account:c}}}catch(d){throw ur(d,{abi:t,address:r,args:n,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c?.address})}}pi();rc();var zy=new Map,_x=new Map,dE=0;function nr(i,e,t){let r=++dE,n=()=>zy.get(i)||[],s=()=>{let d=n();zy.set(i,d.filter(h=>h.id!==r))},o=()=>{let d=n();if(!d.some(f=>f.id===r))return;let h=_x.get(i);d.length===1&&h&&h(),s()},l=n();if(zy.set(i,[...l,{id:r,fns:e}]),l&&l.length>0)return o;let c={};for(let d in e)c[d]=(...h)=>{let f=n();if(f.length!==0)for(let g of f)g.fns[d]?.(...h)};let p=t(c);return typeof p=="function"&&_x.set(i,p),o}async function bc(i){return new Promise(e=>setTimeout(e,i))}function bn(i,{emitOnBegin:e,initialWaitTime:t,interval:r}){let n=!0,s=()=>n=!1;return(async()=>{let l;e&&(l=await i({unpoll:s}));let c=await t?.(l)??r;await bc(c);let p=async()=>{n&&(await i({unpoll:s}),await bc(r),p())};p()})(),s}Ki();var hE=new Map,fE=new Map;function xx(i){let e=(n,s)=>({clear:()=>s.delete(n),get:()=>s.get(n),set:o=>s.set(n,o)}),t=e(i,hE),r=e(i,fE);return{clear:()=>{t.clear(),r.clear()},promise:t,response:r}}async function vx(i,{cacheKey:e,cacheTime:t=Number.POSITIVE_INFINITY}){let r=xx(e),n=r.response.get();if(n&&t>0&&new Date().getTime()-n.created.getTime()<t)return n.data;let s=r.promise.get();s||(s=i(),r.promise.set(s));try{let o=await s;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}var gE=i=>`blockNumber.${i}`;async function yn(i,{cacheTime:e=i.cacheTime}={}){let t=await vx(()=>i.request({method:"eth_blockNumber"}),{cacheKey:gE(i.uid),cacheTime:e});return BigInt(t)}async function Ss(i,{filter:e}){let t="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;let n=r.map(s=>Ui(s));return!("abi"in e)||!e.abi?n:Co({abi:e.abi,logs:n,strict:t})}async function Ts(i,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function wx(i,e){let{abi:t,address:r,args:n,batch:s=!0,eventName:o,fromBlock:l,onError:c,onLogs:p,poll:d,pollingInterval:h=i.pollingInterval,strict:f}=e;return(()=>typeof d<"u"?d:typeof l=="bigint"?!0:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))()?(()=>{let _=f??!1,S=vt(["watchContractEvent",r,n,s,i.uid,o,h,_,l]);return nr(S,{onLogs:p,onError:c},M=>{let R;l!==void 0&&(R=l-1n);let V,H=!1,K=bn(async()=>{if(!H){try{V=await _e(i,Op,"createContractEventFilter")({abi:t,address:r,args:n,eventName:o,strict:_,fromBlock:l})}catch{}H=!0;return}try{let q;if(V)q=await _e(i,Ss,"getFilterChanges")({filter:V});else{let ce=await _e(i,yn,"getBlockNumber")({});R&&R<ce?q=await _e(i,Bm,"getContractEvents")({abi:t,address:r,args:n,eventName:o,fromBlock:R+1n,toBlock:ce,strict:_}):q=[],R=ce}if(q.length===0)return;if(s)M.onLogs(q);else for(let ce of q)M.onLogs([ce])}catch(q){V&&q instanceof pn&&(H=!1),M.onError?.(q)}},{emitOnBegin:!0,interval:h});return async()=>{V&&await _e(i,Ts,"uninstallFilter")({filter:V}),K()}})})():(()=>{let _=f??!1,S=vt(["watchContractEvent",r,n,s,i.uid,o,h,_]),M=!0,R=()=>M=!1;return nr(S,{onLogs:p,onError:c},V=>((async()=>{try{let H=(()=>{if(i.transport.type==="fallback"){let ce=i.transport.transports.find(Q=>Q.config.type==="webSocket");return ce?ce.value:i.transport}return i.transport})(),K=o?cn({abi:t,eventName:o,args:n}):[],{unsubscribe:q}=await H.subscribe({params:["logs",{address:r,topics:K}],onData(ce){if(!M)return;let Q=ce.result;try{let{eventName:ke,args:ve}=Ao({abi:t,data:Q.data,topics:Q.topics,strict:f}),W=Ui(Q,{args:ve,eventName:ke});V.onLogs([W])}catch(ke){let ve,W;if(ke instanceof Nr||ke instanceof sn){if(f)return;ve=ke.abiItem.name,W=ke.abiItem.inputs?.some(le=>!("name"in le&&le.name))}let ut=Ui(Q,{args:W?[]:{},eventName:ve});V.onLogs([ut])}},onError(ce){V.onError?.(ce)}});R=q,M||R()}catch(H){c?.(H)}})(),()=>R()))})()}di();lt();var Vi=class extends U{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}},ks=class extends U{constructor({docsPath:e,metaMessages:t,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}};xr();di();lt();gc();function $m({chain:i,currentChainId:e}){if(!i)throw new Hm;if(e!==i.id)throw new Fm({chain:i,currentChainId:e})}_s();jr();pc();function Lx(i,{docsPath:e,...t}){let r=(()=>{let n=xs(i,t);return n instanceof Ir?i:n})();return new Jp(r,{docsPath:e,...t})}mc();ca();Xl();ws();async function Do(i,{serializedTransaction:e}){return i.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}var Gy=new on(128);async function Bo(i,e){let{account:t=i.account,chain:r=i.chain,accessList:n,authorizationList:s,blobs:o,data:l,gas:c,gasPrice:p,maxFeePerBlobGas:d,maxFeePerGas:h,maxPriorityFeePerGas:f,nonce:g,value:E,...I}=e;if(typeof t>"u")throw new Vi({docsPath:"/docs/actions/wallet/sendTransaction"});let _=t?ht(t):null;try{ir(e);let S=await(async()=>{if(e.to)return e.to;if(e.to!==null&&s&&s.length>0)return await xm({authorization:s[0]}).catch(()=>{throw new U("`to` is required. Could not infer from `authorizationList`.")})})();if(_?.type==="json-rpc"||_===null){let M;r!==null&&(M=await _e(i,Sr,"getChainId")({}),$m({currentChainId:M,chain:r}));let R=i.chain?.formatters?.transactionRequest?.format,H=(R||Er)({...vs(I,{format:R}),accessList:n,authorizationList:s,blobs:o,chainId:M,data:l,from:_?.address,gas:c,gasPrice:p,maxFeePerBlobGas:d,maxFeePerGas:h,maxPriorityFeePerGas:f,nonce:g,to:S,value:E}),K=Gy.get(i.uid),q=K?"wallet_sendTransaction":"eth_sendTransaction";try{return await i.request({method:q,params:[H]},{retryCount:0})}catch(ce){if(K===!1)throw ce;let Q=ce;if(Q.name==="InvalidInputRpcError"||Q.name==="InvalidParamsRpcError"||Q.name==="MethodNotFoundRpcError"||Q.name==="MethodNotSupportedRpcError")return await i.request({method:"wallet_sendTransaction",params:[H]},{retryCount:0}).then(ke=>(Gy.set(i.uid,!0),ke)).catch(ke=>{let ve=ke;throw ve.name==="MethodNotFoundRpcError"||ve.name==="MethodNotSupportedRpcError"?(Gy.set(i.uid,!1),Q):ve});throw Q}}if(_?.type==="local"){let M=await _e(i,Is,"prepareTransactionRequest")({account:_,accessList:n,authorizationList:s,blobs:o,chain:r,data:l,gas:c,gasPrice:p,maxFeePerBlobGas:d,maxFeePerGas:h,maxPriorityFeePerGas:f,nonce:g,nonceManager:_.nonceManager,parameters:[...My,"sidecars"],value:E,...I,to:S}),R=r?.serializers?.transaction,V=await _.signTransaction(M,{serializer:R});return await _e(i,Do,"sendRawTransaction")({serializedTransaction:V})}throw _?.type==="smart"?new ks({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ks({docsPath:"/docs/actions/wallet/sendTransaction",type:_?.type})}catch(S){throw S instanceof ks?S:Lx(S,{...e,account:_,chain:e.chain||void 0})}}async function Ix(i,e){let{abi:t,account:r=i.account,address:n,args:s,dataSuffix:o,functionName:l,...c}=e;if(typeof r>"u")throw new Vi({docsPath:"/docs/contract/writeContract"});let p=r?ht(r):null,d=Kt({abi:t,args:s,functionName:l});try{return await _e(i,Bo,"sendTransaction")({data:`${d}${o?o.replace("0x",""):""}`,to:n,account:p,...c})}catch(h){throw ur(h,{abi:t,address:n,args:s,docsPath:"/docs/contract/writeContract",functionName:l,sender:p?.address})}}lt();var qm=class extends U{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}};async function Ex(i,e){let{address:t,factory:r,factoryData:n}=e;try{let[s,o,l,c,p,d,h]=await _e(i,Ai,"readContract")({abi:bE,address:t,functionName:"eip712Domain",factory:r,factoryData:n});return{domain:{name:o,version:l,chainId:Number(c),verifyingContract:p,salt:d},extensions:h,fields:s}}catch(s){let o=s;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new qm({address:t}):o}}var bE=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];Ve();async function Sx(i,{chain:e}){let{id:t,name:r,nativeCurrency:n,rpcUrls:s,blockExplorers:o}=e;await i.request({method:"wallet_addEthereumChain",params:[{chainId:Ie(t),chainName:r,nativeCurrency:n,rpcUrls:s.default.http,blockExplorerUrls:o?Object.values(o).map(({url:l})=>l):void 0}]},{dedupe:!0,retryCount:0})}di();var Ym=256,Xm;function Qm(i=11){if(!Xm||Ym+i>256*2){Xm="",Ym=0;for(let e=0;e<256;e++)Xm+=(256+Math.random()*256|0).toString(16).substring(1)}return Xm.substring(Ym,Ym+++i)}function Zm(i){let{batch:e,cacheTime:t=i.pollingInterval??4e3,ccipRead:r,key:n="base",name:s="Base Client",pollingInterval:o=4e3,type:l="base"}=i,c=i.chain,p=i.account?ht(i.account):void 0,{config:d,request:h,value:f}=i.transport({chain:c,pollingInterval:o}),g={...d,...f},E={account:p,batch:e,cacheTime:t,ccipRead:r,chain:c,key:n,name:s,pollingInterval:o,request:h,transport:g,type:l,uid:Qm()};function I(_){return S=>{let M=S(_);for(let V in E)delete M[V];let R={..._,...M};return Object.assign(R,{extend:I(R)})}}return Object.assign(E,{extend:I(E)})}lt();Js();rc();Ve();Xl();var Jm=new on(8192);function Tx(i,{enabled:e=!0,id:t}){if(!e||!t)return i();if(Jm.get(t))return Jm.get(t);let r=i().finally(()=>Jm.delete(t));return Jm.set(t,r),r}function yc(i,{delay:e=100,retryCount:t=2,shouldRetry:r=()=>!0}={}){return new Promise((n,s)=>{let o=async({count:l=0}={})=>{let c=async({error:p})=>{let d=typeof e=="function"?e({count:l,error:p}):e;d&&await bc(d),o({count:l+1})};try{let p=await i();n(p)}catch(p){if(l<t&&await r({count:l,error:p}))return c({error:p});s(p)}};o()})}Ki();function kx(i,e={}){return async(t,r={})=>{let{dedupe:n=!1,methods:s,retryDelay:o=150,retryCount:l=3,uid:c}={...e,...r},{method:p}=t;if(s?.exclude?.includes(p))throw new ps(new Error("method not supported"),{method:p});if(s?.include&&!s.include.includes(p))throw new ps(new Error("method not supported"),{method:p});let d=n?Fr(`${c}.${vt(t)}`):void 0;return Tx(()=>yc(async()=>{try{return await i(t)}catch(h){let f=h;switch(f.code){case Ya.code:throw new Ya(f);case Xa.code:throw new Xa(f);case Qa.code:throw new Qa(f,{method:t.method});case Za.code:throw new Za(f);case Hn.code:throw new Hn(f);case pn.code:throw new pn(f);case Ja.code:throw new Ja(f);case eo.code:throw new eo(f);case to.code:throw new to(f);case ps.code:throw new ps(f,{method:t.method});case ea.code:throw new ea(f);case io.code:throw new io(f);case ta.code:throw new ta(f);case ro.code:throw new ro(f);case no.code:throw new no(f);case so.code:throw new so(f);case ao.code:throw new ao(f);case oo.code:throw new oo(f);case 5e3:throw new ta(f);default:throw h instanceof U?h:new im(f)}}},{delay:({count:h,error:f})=>{if(f&&f instanceof vr){let g=f?.headers?.get("Retry-After");if(g?.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:l,shouldRetry:({error:h})=>yE(h)}),{enabled:n,id:d})}}function yE(i){return"code"in i&&typeof i.code=="number"?i.code===-1||i.code===ea.code||i.code===Hn.code:i instanceof vr&&i.status?i.status===403||i.status===408||i.status===413||i.status===429||i.status===500||i.status===502||i.status===503||i.status===504:!0}function ed({key:i,methods:e,name:t,request:r,retryCount:n=3,retryDelay:s=150,timeout:o,type:l},c){let p=Qm();return{config:{key:i,methods:e,name:t,request:r,retryCount:n,retryDelay:s,timeout:o,type:l},request:kx(r,{methods:e,retryCount:n,retryDelay:s,uid:p}),value:c}}function Po(i,e={}){let{key:t="custom",methods:r,name:n="Custom Provider",retryDelay:s}=e;return({retryCount:o})=>ed({key:t,methods:r,name:n,request:i.request.bind(i),retryCount:e.retryCount??o,retryDelay:s,type:"custom"})}Js();lt();var td=class extends U{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};Vy();Js();function Ax(i,{errorInstance:e=new Error("timed out"),timeout:t,signal:r}){return new Promise((n,s)=>{(async()=>{let o;try{let l=new AbortController;t>0&&(o=setTimeout(()=>{r?l.abort():s(e)},t)),n(await i({signal:l?.signal||null}))}catch(l){l?.name==="AbortError"&&s(e),s(l)}finally{clearTimeout(o)}})()})}Ki();function _E(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var jy=_E();function Cx(i,e={}){return{async request(t){let{body:r,onRequest:n=e.onRequest,onResponse:s=e.onResponse,timeout:o=e.timeout??1e4}=t,l={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:c,method:p,signal:d}=l;try{let h=await Ax(async({signal:g})=>{let E={...l,body:Array.isArray(r)?vt(r.map(M=>({jsonrpc:"2.0",id:M.id??jy.take(),...M}))):vt({jsonrpc:"2.0",id:r.id??jy.take(),...r}),headers:{"Content-Type":"application/json",...c},method:p||"POST",signal:d||(o>0?g:null)},I=new Request(i,E),_=await n?.(I,E)??{...E,url:i};return await fetch(_.url??i,_)},{errorInstance:new ic({body:r,url:i}),timeout:o,signal:!0});s&&await s(h);let f;if(h.headers.get("Content-Type")?.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(g){if(h.ok)throw g;f={error:f}}}if(!h.ok)throw new vr({body:r,details:vt(f.error)||h.statusText,headers:h.headers,status:h.status,url:i});return f}catch(h){throw h instanceof vr||h instanceof ic?h:new vr({body:r,cause:h,url:i})}}}}function _c(i,e={}){let{batch:t,fetchOptions:r,key:n="http",methods:s,name:o="HTTP JSON-RPC",onFetchRequest:l,onFetchResponse:c,retryDelay:p,raw:d}=e;return({chain:h,retryCount:f,timeout:g})=>{let{batchSize:E=1e3,wait:I=0}=typeof t=="object"?t:{},_=e.retryCount??f,S=g??e.timeout??1e4,M=i||h?.rpcUrls.default.http[0];if(!M)throw new td;let R=Cx(M,{fetchOptions:r,onRequest:l,onResponse:c,timeout:S});return ed({key:n,methods:s,name:o,async request({method:V,params:H}){let K={method:V,params:H},{schedule:q}=Gm({id:M,wait:I,shouldSplitBatch(ve){return ve.length>E},fn:ve=>R.request({body:ve}),sort:(ve,W)=>ve.id-W.id}),ce=async ve=>t?q(ve):[await R.request({body:ve})],[{error:Q,result:ke}]=await ce(K);if(d)return{error:Q,result:ke};if(Q)throw new cs({body:K,error:Q,url:M});return ke},retryCount:_,retryDelay:p,timeout:S,type:"http"},{fetchOptions:r,url:M})}}pa();Es();xr();fa();Ha();Ve();Fp();lt();Fn();function Oo(i,e){if(!(i instanceof U))return!1;let t=i.walk(r=>r instanceof Oi);return t instanceof Oi?!!(t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ResolverWildcardNotSupported"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverError"||t.data?.errorName==="HttpError"||t.reason?.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&t.reason===Np[50]):!1}_r();Ii();Ve();Vr();Pr();function id(i){if(i.length!==66||i.indexOf("[")!==0||i.indexOf("]")!==65)return null;let e=`0x${i.slice(1,65)}`;return ri(e)?e:null}function No(i){let e=new Uint8Array(32).fill(0);if(!i)return xt(e);let t=i.split(".");for(let r=t.length-1;r>=0;r-=1){let n=id(t[r]),s=n?yr(n):Ht(Hr(t[r]),"bytes");e=Ht(Wi([e,s]),"bytes")}return xt(e)}Ii();function Rx(i){return`[${i.slice(2)}]`}Ii();Ve();Vr();function Mx(i){let e=new Uint8Array(32).fill(0);return i?id(i)||Ht(Hr(i)):xt(e)}function As(i){let e=i.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);let t=new Uint8Array(Hr(e).byteLength+2),r=0,n=e.split(".");for(let s=0;s<n.length;s++){let o=Hr(n[s]);o.byteLength>255&&(o=Hr(Rx(Mx(n[s])))),t[r]=o.length,t.set(o,r+1),r+=o.length+1}return t.byteLength!==r+1?t.slice(0,r+1):t}async function Dx(i,e){let{blockNumber:t,blockTag:r,coinType:n,name:s,gatewayUrls:o,strict:l}=e,{chain:c}=i,p=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Tr({blockNumber:t,chain:c,contract:"ensUniversalResolver"})})(),d=c?.ensTlds;if(d&&!d.some(h=>s.endsWith(h)))return null;try{let h=Kt({abi:Py,functionName:"addr",...n!=null?{args:[No(s),BigInt(n)]}:{args:[No(s)]}}),f={address:p,abi:Pm,functionName:"resolve",args:[Me(As(s)),h],blockNumber:t,blockTag:r},g=_e(i,Ai,"readContract"),E=o?await g({...f,args:[...f.args,o]}):await g(f);if(E[0]==="0x")return null;let I=rr({abi:Py,args:n!=null?[No(s),BigInt(n)]:void 0,functionName:"addr",data:E[0]});return I==="0x"||Di(I)==="0x00"?null:I}catch(h){if(l)throw h;if(Oo(h,"resolve"))return null;throw h}}lt();var rd=class extends U{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}},Cs=class extends U{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}},Fo=class extends U{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},nd=class extends U{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}};var xE=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,vE=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,wE=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,LE=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function IE(i){try{let e=await fetch(i,{method:"HEAD"});return e.status===200?e.headers.get("content-type")?.startsWith("image/"):!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(t=>{let r=new Image;r.onload=()=>{t(!0)},r.onerror=()=>{t(!1)},r.src=i})}}function Bx(i,e){return i?i.endsWith("/")?i.slice(0,-1):i:e}function Wy({uri:i,gatewayUrls:e}){let t=wE.test(i);if(t)return{uri:i,isOnChain:!0,isEncoded:t};let r=Bx(e?.ipfs,"https://ipfs.io"),n=Bx(e?.arweave,"https://arweave.net"),s=i.match(xE),{protocol:o,subpath:l,target:c,subtarget:p=""}=s?.groups||{},d=o==="ipns:/"||l==="ipns/",h=o==="ipfs:/"||l==="ipfs/"||vE.test(i);if(i.startsWith("http")&&!d&&!h){let g=i;return e?.arweave&&(g=i.replace(/https:\/\/arweave.net/g,e?.arweave)),{uri:g,isOnChain:!1,isEncoded:!1}}if((d||h)&&c)return{uri:`${r}/${d?"ipns":"ipfs"}/${c}${p}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${n}/${c}${p||""}`,isOnChain:!1,isEncoded:!1};let f=i.replace(LE,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new Fo({uri:i})}function Ky(i){if(typeof i!="object"||!("image"in i)&&!("image_url"in i)&&!("image_data"in i))throw new rd({data:i});return i.image||i.image_url||i.image_data}async function Px({gatewayUrls:i,uri:e}){try{let t=await fetch(e).then(n=>n.json());return await sd({gatewayUrls:i,uri:Ky(t)})}catch{throw new Fo({uri:e})}}async function sd({gatewayUrls:i,uri:e}){let{uri:t,isOnChain:r}=Wy({uri:e,gatewayUrls:i});if(r||await IE(t))return t;throw new Fo({uri:e})}function Ox(i){let e=i;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));let[t,r,n]=e.split("/"),[s,o]=t.split(":"),[l,c]=r.split(":");if(!s||s.toLowerCase()!=="eip155")throw new Cs({reason:"Only EIP-155 supported"});if(!o)throw new Cs({reason:"Chain ID not found"});if(!c)throw new Cs({reason:"Contract address not found"});if(!n)throw new Cs({reason:"Token ID not found"});if(!l)throw new Cs({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:l.toLowerCase(),contractAddress:c,tokenID:n}}async function Nx(i,{nft:e}){if(e.namespace==="erc721")return Ai(i,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Ai(i,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new nd({namespace:e.namespace})}async function Fx(i,{gatewayUrls:e,record:t}){return/eip155:/i.test(t)?EE(i,{gatewayUrls:e,record:t}):sd({uri:t,gatewayUrls:e})}async function EE(i,{gatewayUrls:e,record:t}){let r=Ox(t),n=await Nx(i,{nft:r}),{uri:s,isOnChain:o,isEncoded:l}=Wy({uri:n,gatewayUrls:e});if(o&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){let p=l?atob(s.replace("data:application/json;base64,","")):s,d=JSON.parse(p);return sd({uri:Ky(d),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Px({gatewayUrls:e,uri:s.replace(/(?:0x)?{id}/,c)})}pa();Es();xr();fa();Ve();async function ad(i,e){let{blockNumber:t,blockTag:r,key:n,name:s,gatewayUrls:o,strict:l}=e,{chain:c}=i,p=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Tr({blockNumber:t,chain:c,contract:"ensUniversalResolver"})})(),d=c?.ensTlds;if(d&&!d.some(h=>s.endsWith(h)))return null;try{let h={address:p,abi:Pm,functionName:"resolve",args:[Me(As(s)),Kt({abi:By,functionName:"text",args:[No(s),n]})],blockNumber:t,blockTag:r},f=_e(i,Ai,"readContract"),g=o?await f({...h,args:[...h.args,o]}):await f(h);if(g[0]==="0x")return null;let E=rr({abi:By,functionName:"text",data:g[0]});return E===""?null:E}catch(h){if(l)throw h;if(Oo(h,"resolve"))return null;throw h}}async function Hx(i,{blockNumber:e,blockTag:t,assetGatewayUrls:r,name:n,gatewayUrls:s,strict:o,universalResolverAddress:l}){let c=await _e(i,ad,"getEnsText")({blockNumber:e,blockTag:t,key:"avatar",name:n,universalResolverAddress:l,gatewayUrls:s,strict:o});if(!c)return null;try{return await Fx(i,{record:c,gatewayUrls:r})}catch{return null}}pa();fa();Ve();async function Ux(i,{address:e,blockNumber:t,blockTag:r,gatewayUrls:n,strict:s,universalResolverAddress:o}){let l=o;if(!l){if(!i.chain)throw new Error("client chain not configured. universalResolverAddress is required.");l=Tr({blockNumber:t,chain:i.chain,contract:"ensUniversalResolver"})}let c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{let p={address:l,abi:lx,functionName:"reverse",args:[Me(As(c))],blockNumber:t,blockTag:r},d=_e(i,Ai,"readContract"),[h,f]=n?await d({...p,args:[...p.args,n]}):await d(p);return e.toLowerCase()!==f.toLowerCase()?null:h}catch(p){if(s)throw p;if(Oo(p,"reverse"))return null;throw p}}fa();Ve();async function Vx(i,e){let{blockNumber:t,blockTag:r,name:n}=e,{chain:s}=i,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!s)throw new Error("client chain not configured. universalResolverAddress is required.");return Tr({blockNumber:t,chain:s,contract:"ensUniversalResolver"})})(),l=s?.ensTlds;if(l&&!l.some(p=>n.endsWith(p)))throw new Error(`${n} is not a valid ENS TLD (${l?.join(", ")}) for chain "${s.name}" (id: ${s.id}).`);let[c]=await _e(i,Ai,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Me(As(n))],blockNumber:t,blockTag:r});return c}Mo();di();Ve();Fy();mc();ca();ws();async function od(i,e){let{account:t=i.account,blockNumber:r,blockTag:n="latest",blobs:s,data:o,gas:l,gasPrice:c,maxFeePerBlobGas:p,maxFeePerGas:d,maxPriorityFeePerGas:h,to:f,value:g,...E}=e,I=t?ht(t):void 0;try{ir(e);let S=(r?Ie(r):void 0)||n,M=i.chain?.formatters?.transactionRequest?.format,V=(M||Er)({...vs(E,{format:M}),from:I?.address,blobs:s,data:o,gas:l,gasPrice:c,maxFeePerBlobGas:p,maxFeePerGas:d,maxPriorityFeePerGas:h,to:f,value:g}),H=await i.request({method:"eth_createAccessList",params:[V,S]});return{accessList:H.accessList,gasUsed:BigInt(H.gasUsed)}}catch(_){throw Vm(_,{...e,account:I,chain:i.chain})}}async function zx(i){let e=ls(i,{method:"eth_newBlockFilter"}),t=await i.request({method:"eth_newBlockFilter"});return{id:t,request:e(t),type:"block"}}Ve();async function ld(i,{address:e,args:t,event:r,events:n,fromBlock:s,strict:o,toBlock:l}={}){let c=n??(r?[r]:void 0),p=ls(i,{method:"eth_newFilter"}),d=[];c&&(d=[c.flatMap(g=>cn({abi:[g],eventName:g.name,args:t}))],r&&(d=d[0]));let h=await i.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof s=="bigint"?Ie(s):s,toBlock:typeof l=="bigint"?Ie(l):l,...d.length?{topics:d}:{}}]});return{abi:c,args:t,eventName:r?r.name:void 0,fromBlock:s,id:h,request:p(h),strict:!!o,toBlock:l,type:"event"}}async function cd(i){let e=ls(i,{method:"eth_newPendingTransactionFilter"}),t=await i.request({method:"eth_newPendingTransactionFilter"});return{id:t,request:e(t),type:"transaction"}}async function Gx(i){let e=await i.request({method:"eth_blobBaseFee"});return BigInt(e)}Bi();Ve();async function jx(i,{blockHash:e,blockNumber:t,blockTag:r="latest"}={}){let n=t!==void 0?Ie(t):void 0,s;return e?s=await i.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):s=await i.request({method:"eth_getBlockTransactionCountByNumber",params:[n||r]},{dedupe:!!n}),oi(s)}Ve();async function $y(i,{address:e,blockNumber:t,blockTag:r="latest"}){let n=t!==void 0?Ie(t):void 0,s=await i.request({method:"eth_getCode",params:[e,n||r]},{dedupe:!!n});if(s!=="0x")return s}Ve();function Wx(i){return{baseFeePerGas:i.baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:i.gasUsedRatio,oldestBlock:BigInt(i.oldestBlock),reward:i.reward?.map(e=>e.map(t=>BigInt(t)))}}async function Kx(i,{blockCount:e,blockNumber:t,blockTag:r="latest",rewardPercentiles:n}){let s=t?Ie(t):void 0,o=await i.request({method:"eth_feeHistory",params:[Ie(e),s||r,n]},{dedupe:!!s});return Wx(o)}async function $x(i,{filter:e}){let t=e.strict??!1,n=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(s=>Ui(s));return e.abi?Co({abi:e.abi,logs:n,strict:t}):n}Ve();function Qt(i){return{formatters:void 0,fees:void 0,serializers:void 0,...i}}pi();an();Ki();lt();var ud=class extends U{constructor({domain:e}){super(`Invalid domain "${vt(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},pd=class extends U{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},md=class extends U{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}};zr();Or();Ve();Xb();os();_r();Ve();Vr();function qx(i){let{domain:e={},message:t,primaryType:r}=i,n={EIP712Domain:hd({domain:e}),...i.types};dd({domain:e,message:t,primaryType:r,types:n});let s=["0x1901"];return e&&s.push(SE({domain:e,types:n})),r!=="EIP712Domain"&&s.push(Yx({data:t,primaryType:r,types:n})),Ht(Wi(s))}function SE({domain:i,types:e}){return Yx({data:i,primaryType:"EIP712Domain",types:e})}function Yx({data:i,primaryType:e,types:t}){let r=Xx({data:i,primaryType:e,types:t});return Ht(r)}function Xx({data:i,primaryType:e,types:t}){let r=[{type:"bytes32"}],n=[TE({primaryType:e,types:t})];for(let s of t[e]){let[o,l]=Zx({types:t,name:s.name,type:s.type,value:i[s.name]});r.push(o),n.push(l)}return cr(r,n)}function TE({primaryType:i,types:e}){let t=Me(kE({primaryType:i,types:e}));return Ht(t)}function kE({primaryType:i,types:e}){let t="",r=Qx({primaryType:i,types:e});r.delete(i);let n=[i,...Array.from(r).sort()];for(let s of n)t+=`${s}(${e[s].map(({name:o,type:l})=>`${l} ${o}`).join(",")})`;return t}function Qx({primaryType:i,types:e},t=new Set){let n=i.match(/^\w*/u)?.[0];if(t.has(n)||e[n]===void 0)return t;t.add(n);for(let s of e[n])Qx({primaryType:s.type,types:e},t);return t}function Zx({types:i,name:e,type:t,value:r}){if(i[t]!==void 0)return[{type:"bytes32"},Ht(Xx({data:r,primaryType:t,types:i}))];if(t==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Ht(r)];if(t==="string")return[{type:"bytes32"},Ht(Me(r))];if(t.lastIndexOf("]")===t.length-1){let n=t.slice(0,t.lastIndexOf("[")),s=r.map(o=>Zx({name:e,type:n,types:i,value:o}));return[{type:"bytes32"},Ht(cr(s.map(([o])=>o),s.map(([,o])=>o)))]}return[{type:t},r]}Ki();function Jx(i){let{domain:e,message:t,primaryType:r,types:n}=i,s=(c,p)=>{let d={...p};for(let h of c){let{name:f,type:g}=h;g==="address"&&(d[f]=d[f].toLowerCase())}return d},o=(()=>n.EIP712Domain?e?s(n.EIP712Domain,e):{}:{})(),l=(()=>{if(r!=="EIP712Domain")return s(n[r],t)})();return vt({domain:o,message:l,primaryType:r,types:n})}function dd(i){let{domain:e,message:t,primaryType:r,types:n}=i,s=(o,l)=>{for(let c of o){let{name:p,type:d}=c,h=l[p],f=d.match(Dp);if(f&&(typeof h=="number"||typeof h=="bigint")){let[I,_,S]=f;Ie(h,{signed:_==="int",size:Number.parseInt(S)/8})}if(d==="address"&&typeof h=="string"&&!Nt(h))throw new zt({address:h});let g=d.match(G_);if(g){let[I,_]=g;if(_&&It(h)!==Number.parseInt(_))throw new dp({expectedSize:Number.parseInt(_),givenSize:It(h)})}let E=n[d];E&&(AE(d),s(E,h))}};if(n.EIP712Domain&&e){if(typeof e!="object")throw new ud({domain:e});s(n.EIP712Domain,e)}if(r!=="EIP712Domain")if(n[r])s(n[r],t);else throw new pd({primaryType:r,types:n})}function hd({domain:i}){return[typeof i?.name=="string"&&{name:"name",type:"string"},i?.version&&{name:"version",type:"string"},(typeof i?.chainId=="number"||typeof i?.chainId=="bigint")&&{name:"chainId",type:"uint256"},i?.verifyingContract&&{name:"verifyingContract",type:"address"},i?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function AE(i){if(i==="address"||i==="bool"||i==="string"||i.startsWith("bytes")||i.startsWith("uint")||i.startsWith("int"))throw new md({type:i})}xr();Ve();jr();_r();Ha();Ve();Ay();an();lt();gc();_s();zr();Or();qs();Bi();function ev(i){let{authorizationList:e}=i;if(e)for(let t of e){let{chainId:r}=t,n=t.address;if(!Nt(n))throw new zt({address:n});if(r<0)throw new da({chainId:r})}fd(i)}function tv(i){let{blobVersionedHashes:e}=i;if(e){if(e.length===0)throw new So;for(let t of e){let r=It(t),n=oi(Nn(t,0,1));if(r!==32)throw new Am({hash:t,size:r});if(n!==1)throw new Cm({hash:t,version:n})}}fd(i)}function fd(i){let{chainId:e,maxPriorityFeePerGas:t,maxFeePerGas:r,to:n}=i;if(e<=0)throw new da({chainId:e});if(n&&!Nt(n))throw new zt({address:n});if(r&&r>xo)throw new Lr({maxFeePerGas:r});if(t&&r&&t>r)throw new hn({maxFeePerGas:r,maxPriorityFeePerGas:t})}function iv(i){let{chainId:e,maxPriorityFeePerGas:t,gasPrice:r,maxFeePerGas:n,to:s}=i;if(e<=0)throw new da({chainId:e});if(s&&!Nt(s))throw new zt({address:s});if(t||n)throw new U("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>xo)throw new Lr({maxFeePerGas:r})}function rv(i){let{chainId:e,maxPriorityFeePerGas:t,gasPrice:r,maxFeePerGas:n,to:s}=i;if(s&&!Nt(s))throw new zt({address:s});if(typeof e<"u"&&e<=0)throw new da({chainId:e});if(t||n)throw new U("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>xo)throw new Lr({maxFeePerGas:r})}an();jr();zr();function xc(i){if(!i||i.length===0)return[];let e=[];for(let t=0;t<i.length;t++){let{address:r,storageKeys:n}=i[t];for(let s=0;s<n.length;s++)if(n[s].length-2!==64)throw new Zp({storageKey:n[s]});if(!Nt(r,{strict:!1}))throw new zt({address:r});e.push([r,n])}return e}function nv(i,e){let t=Mm(i);return t==="eip1559"?ME(i,e):t==="eip2930"?DE(i,e):t==="eip4844"?RE(i,e):t==="eip7702"?CE(i,e):BE(i,e)}function CE(i,e){let{authorizationList:t,chainId:r,gas:n,nonce:s,to:o,value:l,maxFeePerGas:c,maxPriorityFeePerGas:p,accessList:d,data:h}=i;ev(i);let f=xc(d),g=sv(t);return Pi(["0x04",qr([Me(r),s?Me(s):"0x",p?Me(p):"0x",c?Me(c):"0x",n?Me(n):"0x",o??"0x",l?Me(l):"0x",h??"0x",f,g,...Ho(i,e)])])}function RE(i,e){let{chainId:t,gas:r,nonce:n,to:s,value:o,maxFeePerBlobGas:l,maxFeePerGas:c,maxPriorityFeePerGas:p,accessList:d,data:h}=i;tv(i);let f=i.blobVersionedHashes,g=i.sidecars;if(i.blobs&&(typeof f>"u"||typeof g>"u")){let R=typeof i.blobs[0]=="string"?i.blobs:i.blobs.map(K=>xt(K)),V=i.kzg,H=Io({blobs:R,kzg:V});if(typeof f>"u"&&(f=Tm({commitments:H})),typeof g>"u"){let K=Eo({blobs:R,commitments:H,kzg:V});g=Rm({blobs:R,commitments:H,proofs:K})}}let E=xc(d),I=[Me(t),n?Me(n):"0x",p?Me(p):"0x",c?Me(c):"0x",r?Me(r):"0x",s??"0x",o?Me(o):"0x",h??"0x",E,l?Me(l):"0x",f??[],...Ho(i,e)],_=[],S=[],M=[];if(g)for(let R=0;R<g.length;R++){let{blob:V,commitment:H,proof:K}=g[R];_.push(V),S.push(H),M.push(K)}return Pi(["0x03",g?qr([I,_,S,M]):qr(I)])}function ME(i,e){let{chainId:t,gas:r,nonce:n,to:s,value:o,maxFeePerGas:l,maxPriorityFeePerGas:c,accessList:p,data:d}=i;fd(i);let h=xc(p),f=[Me(t),n?Me(n):"0x",c?Me(c):"0x",l?Me(l):"0x",r?Me(r):"0x",s??"0x",o?Me(o):"0x",d??"0x",h,...Ho(i,e)];return Pi(["0x02",qr(f)])}function DE(i,e){let{chainId:t,gas:r,data:n,nonce:s,to:o,value:l,accessList:c,gasPrice:p}=i;iv(i);let d=xc(c),h=[Me(t),s?Me(s):"0x",p?Me(p):"0x",r?Me(r):"0x",o??"0x",l?Me(l):"0x",n??"0x",d,...Ho(i,e)];return Pi(["0x01",qr(h)])}function BE(i,e){let{chainId:t=0,gas:r,data:n,nonce:s,to:o,value:l,gasPrice:c}=i;rv(i);let p=[s?Me(s):"0x",c?Me(c):"0x",r?Me(r):"0x",o??"0x",l?Me(l):"0x",n??"0x"];if(e){let d=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(t>0)return BigInt(t*2)+BigInt(35n+e.v-27n);let g=27n+(e.v===27n?0n:1n);if(e.v!==g)throw new Xp({v:e.v});return g})(),h=Di(e.r),f=Di(e.s);p=[...p,Me(d),h==="0x00"?"0x":h,f==="0x00"?"0x":f]}else t>0&&(p=[...p,Me(t),"0x","0x"]);return qr(p)}function Ho(i,e){let t=e??i,{v:r,yParity:n}=t;if(typeof t.r>"u")return[];if(typeof t.s>"u")return[];if(typeof r>"u"&&typeof n>"u")return[];let s=Di(t.r),o=Di(t.s);return[(()=>typeof n=="number"?n?Me(1):"0x":r===0n?"0x":r===1n?Me(1):r===27n?"0x":Me(1))(),s==="0x00"?"0x":s,o==="0x00"?"0x":o]}function sv(i){if(!i||i.length===0)return[];let e=[];for(let t of i){let{chainId:r,nonce:n,...s}=t,o=t.address;e.push([r?Me(r):"0x",o,n?Me(n):"0x",...Ho({},s)])}return e}Bi();wm();var PE={"0x0":"reverted","0x1":"success"};function qy(i){let e={...i,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,contractAddress:i.contractAddress?i.contractAddress:null,cumulativeGasUsed:i.cumulativeGasUsed?BigInt(i.cumulativeGasUsed):null,effectiveGasPrice:i.effectiveGasPrice?BigInt(i.effectiveGasPrice):null,gasUsed:i.gasUsed?BigInt(i.gasUsed):null,logs:i.logs?i.logs.map(t=>Ui(t)):null,to:i.to?i.to:null,transactionIndex:i.transactionIndex?oi(i.transactionIndex):null,status:i.status?PE[i.status]:null,type:i.type?Cy[i.type]||i.type:null};return i.blobGasPrice&&(e.blobGasPrice=BigInt(i.blobGasPrice)),i.blobGasUsed&&(e.blobGasUsed=BigInt(i.blobGasUsed)),e}var av=yo("transactionReceipt",qy);Bi();Vr();var ov=`Ethereum Signed Message:
`;_r();Or();Ve();function lv(i){let e=(()=>typeof i=="string"?Fr(i):typeof i.raw=="string"?i.raw:xt(i.raw))(),t=Fr(`${ov}${It(e)}`);return Wi([t,e])}function gd(i,e){return Ht(lv(i),e)}var bd="0x6492649264926492649264926492649264926492649264926492649264926492";qs();function cv(i){return Yb(i,-32)===bd}os();_r();Ii();function uv(i){let{address:e,data:t,signature:r,to:n="hex"}=i,s=Pi([cr([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,t,r]),bd]);return n==="hex"?s:mi(s)}lt();var yd=class extends U{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}};function _n(i,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(i))throw new yd({value:i});let[t,r="0"]=i.split("."),n=t.startsWith("-");if(n&&(t=t.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(t=`${BigInt(t)+1n}`),r="";else if(r.length>e){let[s,o,l]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${l}`);c>9?r=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):r=`${s}${c}`,r.length>e&&(r=r.slice(1),t=`${BigInt(t)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${n?"-":""}${t}${r}`)}jp();function Uo(i,e="wei"){return _n(i,Gp[e])}function OE(i){return i.map(e=>({...e,value:BigInt(e.value)}))}function pv(i){return{...i,balance:i.balance?BigInt(i.balance):void 0,nonce:i.nonce?oi(i.nonce):void 0,storageProof:i.storageProof?OE(i.storageProof):void 0}}async function mv(i,{address:e,blockNumber:t,blockTag:r,storageKeys:n}){let s=r??"latest",o=t!==void 0?Ie(t):void 0,l=await i.request({method:"eth_getProof",params:[e,n,o||s]});return pv(l)}Ve();async function dv(i,{address:e,blockNumber:t,blockTag:r="latest",slot:n}){let s=t!==void 0?Ie(t):void 0;return await i.request({method:"eth_getStorageAt",params:[e,n,s||r]})}jr();Ve();async function Vo(i,{blockHash:e,blockNumber:t,blockTag:r,hash:n,index:s}){let o=r||"latest",l=t!==void 0?Ie(t):void 0,c=null;if(n?c=await i.request({method:"eth_getTransactionByHash",params:[n]},{dedupe:!0}):e?c=await i.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ie(s)]},{dedupe:!0}):(l||o)&&(c=await i.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[l||o,Ie(s)]},{dedupe:!!l})),!c)throw new $a({blockHash:e,blockNumber:t,blockTag:o,hash:n,index:s});return(i.chain?.formatters?.transaction?.format||ua)(c)}async function hv(i,{hash:e,transactionReceipt:t}){let[r,n]=await Promise.all([_e(i,yn,"getBlockNumber")({}),e?_e(i,Vo,"getTransaction")({hash:e}):void 0]),s=t?.blockNumber||n?.blockNumber;return s?r-s+1n:0n}jr();async function vc(i,{hash:e}){let t=await i.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!t)throw new qa({hash:e});return(i.chain?.formatters?.transactionReceipt?.format||qy)(t)}pa();pi();lt();Fn();Es();xr();fa();async function fv(i,e){let{allowFailure:t=!0,batchSize:r,blockNumber:n,blockTag:s,multicallAddress:o,stateOverride:l}=e,c=e.contracts,p=r??(typeof i.batch?.multicall=="object"&&i.batch.multicall.batchSize||1024),d=o;if(!d){if(!i.chain)throw new Error("client chain not configured. multicallAddress is required.");d=Tr({blockNumber:n,chain:i.chain,contract:"multicall3"})}let h=[[]],f=0,g=0;for(let _=0;_<c.length;_++){let{abi:S,address:M,args:R,functionName:V}=c[_];try{let H=Kt({abi:S,args:R,functionName:V});g+=(H.length-2)/2,p>0&&g>p&&h[f].length>0&&(f++,g=(H.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:H,target:M}]}catch(H){let K=ur(H,{abi:S,address:M,args:R,docsPath:"/docs/contract/multicall",functionName:V});if(!t)throw K;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:M}]}}let E=await Promise.allSettled(h.map(_=>_e(i,Ai,"readContract")({abi:hc,address:d,args:[_],blockNumber:n,blockTag:s,functionName:"aggregate3",stateOverride:l}))),I=[];for(let _=0;_<E.length;_++){let S=E[_];if(S.status==="rejected"){if(!t)throw S.reason;for(let R=0;R<h[_].length;R++)I.push({status:"failure",error:S.reason,result:void 0});continue}let M=S.value;for(let R=0;R<M.length;R++){let{returnData:V,success:H}=M[R],{callData:K}=h[_][R],{abi:q,address:ce,functionName:Q,args:ke}=c[I.length];try{if(K==="0x")throw new br;if(!H)throw new Wr({data:V});let ve=rr({abi:q,args:ke,data:V,functionName:Q});I.push(t?{result:ve,status:"success"}:ve)}catch(ve){let W=ur(ve,{abi:q,address:ce,args:ke,docsPath:"/docs/contract/multicall",functionName:Q});if(!t)throw W;I.push({error:W,result:void 0,status:"failure"})}}}if(I.length!==c.length)throw new U("multicall results mismatch");return I}var gv="0.1.1";function bv(){return gv}var Ct=class i extends Error{constructor(e,t={}){let r=(()=>{if(t.cause instanceof i){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause?.message?t.cause.message:t.details})(),n=(()=>t.cause instanceof i&&t.cause.docsPath||t.docsPath)(),o=`https://oxlib.sh${n??""}`,l=[e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...r||n?["",r?`Details: ${r}`:void 0,n?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(l,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${bv()}`}),this.cause=t.cause,this.details=r,this.docs=o,this.docsPath=n,this.shortMessage=e}walk(e){return yv(this,e)}};function yv(i,e){return e?.(i)?i:i&&typeof i=="object"&&"cause"in i&&i.cause?yv(i.cause,e):e?null:i}var NE="#__bigint";function _v(i,e,t){return JSON.stringify(i,(r,n)=>typeof e=="function"?e(r,n):typeof n=="bigint"?n.toString()+NE:n,t)}function xv(i,e){if(Yy(i)>e)throw new _d({givenSize:Yy(i),maxSize:e})}var jn={zero:48,nine:57,A:65,F:70,a:97,f:102};function Xy(i){if(i>=jn.zero&&i<=jn.nine)return i-jn.zero;if(i>=jn.A&&i<=jn.F)return i-(jn.A-10);if(i>=jn.a&&i<=jn.f)return i-(jn.a-10)}function vv(i,e={}){let{dir:t,size:r=32}=e;if(r===0)return i;if(i.length>r)throw new xd({size:i.length,targetSize:r,type:"Bytes"});let n=new Uint8Array(r);for(let s=0;s<r;s++){let o=t==="right";n[o?s:r-s-1]=i[o?s:i.length-s-1]}return n}function wc(i,e){if(Ei(i)>e)throw new vd({givenSize:Ei(i),maxSize:e})}function wv(i,e){if(typeof e=="number"&&e>0&&e>Ei(i)-1)throw new Lc({offset:e,position:"start",size:Ei(i)})}function Lv(i,e,t){if(typeof e=="number"&&typeof t=="number"&&Ei(i)!==t-e)throw new Lc({offset:t,position:"end",size:Ei(i)})}function Zy(i,e={}){let{dir:t,size:r=32}=e;if(r===0)return i;let n=i.replace("0x","");if(n.length>r*2)throw new wd({size:Math.ceil(n.length/2),targetSize:r,type:"Hex"});return`0x${n[t==="right"?"padEnd":"padStart"](r*2,"0")}`}var UE=new TextEncoder;function Ev(i){return i instanceof Uint8Array?i:typeof i=="string"?zE(i):VE(i)}function VE(i){return i instanceof Uint8Array?i:new Uint8Array(i)}function zE(i,e={}){let{size:t}=e,r=i;t&&(wc(i,t),r=vn(i,t));let n=r.slice(2);n.length%2&&(n=`0${n}`);let s=n.length/2,o=new Uint8Array(s);for(let l=0,c=0;l<s;l++){let p=Xy(n.charCodeAt(c++)),d=Xy(n.charCodeAt(c++));if(p===void 0||d===void 0)throw new Ct(`Invalid byte sequence ("${n[c-2]}${n[c-1]}" in "${n}").`);o[l]=p*16+d}return o}function Sv(i,e={}){let{size:t}=e,r=UE.encode(i);return typeof t=="number"?(xv(r,t),GE(r,t)):r}function GE(i,e){return vv(i,{dir:"right",size:e})}function Yy(i){return i.length}var _d=class extends Ct{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}};var xd=class extends Ct{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};var jE=new TextEncoder,WE=Array.from({length:256},(i,e)=>e.toString(16).padStart(2,"0"));function KE(i,e={}){let{strict:t=!1}=e;if(!i)throw new Ld(i);if(typeof i!="string")throw new Ld(i);if(t&&!/^0x[0-9a-fA-F]*$/.test(i))throw new Id(i);if(!i.startsWith("0x"))throw new Id(i)}function sr(...i){return`0x${i.reduce((e,t)=>e+t.replace("0x",""),"")}`}function Ed(i,e={}){let t=`0x${Number(i)}`;return typeof e.size=="number"?(wc(t,e.size),Wn(t,e.size)):t}function zo(i,e={}){let t="";for(let n=0;n<i.length;n++)t+=WE[i[n]];let r=`0x${t}`;return typeof e.size=="number"?(wc(r,e.size),vn(r,e.size)):r}function li(i,e={}){let{signed:t,size:r}=e,n=BigInt(i),s;r?t?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof i=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));let o=typeof s=="bigint"&&t?-s-1n:0;if(s&&n>s||n<o){let p=typeof i=="bigint"?"n":"";throw new Ic({max:s?`${s}${p}`:void 0,min:`${o}${p}`,signed:t,size:r,value:`${i}${p}`})}let c=`0x${(t&&n<0?(1n<<BigInt(r*8))+BigInt(n):n).toString(16)}`;return r?Wn(c,r):c}function Go(i,e={}){return zo(jE.encode(i),e)}function Wn(i,e){return Zy(i,{dir:"left",size:e})}function vn(i,e){return Zy(i,{dir:"right",size:e})}function jo(i,e,t,r={}){let{strict:n}=r;wv(i,e);let s=`0x${i.replace("0x","").slice((e??0)*2,(t??i.length)*2)}`;return n&&Lv(s,e,t),s}function Ei(i){return Math.ceil((i.length-2)/2)}function Jy(i,e={}){let{strict:t=!1}=e;try{return KE(i,{strict:t}),!0}catch{return!1}}var Ic=class extends Ct{constructor({max:e,min:t,signed:r,size:n,value:s}){super(`Number \`${s}\` is not in safe${n?` ${n*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};var Ld=class extends Ct{constructor(e){super(`Value \`${typeof e=="object"?_v(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},Id=class extends Ct{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}};var vd=class extends Ct{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},Lc=class extends Ct{constructor({offset:e,position:t,size:r}){super(`Slice ${t==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},wd=class extends Ct{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Tv(i){return{address:i.address,amount:li(i.amount),index:li(i.index),validatorIndex:li(i.validatorIndex)}}function kv(i){return{...typeof i.baseFeePerGas=="bigint"&&{baseFeePerGas:li(i.baseFeePerGas)},...typeof i.blobBaseFee=="bigint"&&{blobBaseFee:li(i.blobBaseFee)},...typeof i.feeRecipient=="string"&&{feeRecipient:i.feeRecipient},...typeof i.gasLimit=="bigint"&&{gasLimit:li(i.gasLimit)},...typeof i.number=="bigint"&&{number:li(i.number)},...typeof i.prevRandao=="bigint"&&{prevRandao:li(i.prevRandao)},...typeof i.time=="bigint"&&{time:li(i.time)},...i.withdrawals&&{withdrawals:i.withdrawals.map(Tv)}}}di();pi();Fn();_s();Es();xr();Ve();pc();ca();Lm();ws();async function Ec(i,e){let{blockNumber:t,blockTag:r="latest",blocks:n,returnFullTransactions:s,traceTransfers:o,validation:l}=e;try{let c=[];for(let f of n){let g=f.blockOverrides?kv(f.blockOverrides):void 0,E=f.calls.map(_=>{let S=_,M=S.account?ht(S.account):void 0,R={...S,data:S.abi?Kt(S):S.data,from:S.from??M?.address};return ir(R),Er(R)}),I=f.stateOverrides?_o(f.stateOverrides):void 0;c.push({blockOverrides:g,calls:E,stateOverrides:I})}let d=(t?Ie(t):void 0)||r;return(await i.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:s,traceTransfers:o,validation:l},d]})).map((f,g)=>({...dc(f),calls:f.calls.map((E,I)=>{let{abi:_,args:S,functionName:M,to:R}=n[g].calls[I],V=E.error?.data??E.returnData,H=BigInt(E.gasUsed),K=E.logs?.map(ke=>Ui(ke)),q=E.status==="0x1"?"success":"failure",ce=_&&q==="success"&&V!=="0x"?rr({abi:_,data:V,functionName:M}):null,Q=(()=>{if(q==="success")return;let ke;if(E.error?.data==="0x"?ke=new br:E.error&&(ke=new Wr(E.error)),!!ke)return ur(ke,{abi:_??[],address:R,args:S,functionName:M??"<unknown>"})})();return{data:V,gasUsed:H,logs:K,status:q,...q==="success"?{result:ce}:{error:Q}}})}))}catch(c){let p=c,d=xs(p,{});throw d instanceof Ir?p:d}}np();jb();function Sd(i,e={}){let{as:t=typeof i=="string"?"Hex":"Bytes"}=e,r=Cp(Ev(i));return t==="Bytes"?r:zo(r)}var Td=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let r=this.keys().next().value;r&&this.delete(r)}return this}};var YE={checksum:new Td(8192)},kd=YE.checksum;var QE=/^0x[a-fA-F0-9]{40}$/;function Wo(i,e={}){let{strict:t=!0}=e;if(!QE.test(i))throw new Ad({address:i,cause:new e0});if(t){if(i.toLowerCase()===i)return;if(Cv(i)!==i)throw new Ad({address:i,cause:new t0})}}function Cv(i){if(kd.has(i))return kd.get(i);Wo(i,{strict:!1});let e=i.substring(2).toLowerCase(),t=Sd(Sv(e),{as:"Bytes"}),r=e.split("");for(let s=0;s<40;s+=2)t[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(t[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());let n=`0x${r.join("")}`;return kd.set(i,n),n}function Cd(i,e={}){let{strict:t=!0}=e??{};try{return Wo(i,{strict:t}),!0}catch{return!1}}var Ad=class extends Ct{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},e0=class extends Ct{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},t0=class extends Ct{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};function Md(i){let e=!0,t="",r=0,n="",s=!1;for(let o=0;o<i.length;o++){let l=i[o];if(["(",")",","].includes(l)&&(e=!0),l==="("&&r++,l===")"&&r--,!!e){if(r===0){if(l===" "&&["event","function","error",""].includes(n))n="";else if(n+=l,l===")"){s=!0;break}continue}if(l===" "){i[o-1]!==","&&t!==","&&t!==",("&&(t="",e=!1);continue}n+=l,t+=l}}if(!s)throw new Ct("Unable to normalize signature.");return n}function Rd(i,e){let t=typeof i,r=e.type;switch(r){case"address":return Cd(i,{strict:!1});case"bool":return t==="boolean";case"function":return t==="string";case"string":return t==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((n,s)=>Rd(Object.values(i)[s],n)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?t==="number"||t==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?t==="string"||i instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(i)&&i.every(n=>Rd(n,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function r0(i,e,t){for(let r in i){let n=i[r],s=e[r];if(n.type==="tuple"&&s.type==="tuple"&&"components"in n&&"components"in s)return r0(n.components,s.components,t[r]);let o=[n.type,s.type];if((()=>o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Cd(t[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Cd(t[r],{strict:!1}):!1)())return o}}function Dd(i,e={}){let{prepare:t=!0}=e,r=(()=>Array.isArray(i)?rp(i):typeof i=="string"?rp(i):i)();return{...r,...t?{hash:Ko(r)}:{}}}function Rv(i,e,t){let{args:r=[],prepare:n=!0}=t??{},s=Jy(e,{strict:!1}),o=i.filter(p=>s?p.type==="function"||p.type==="error"?s0(p)===jo(e,0,4):p.type==="event"?Ko(p)===e:!1:"name"in p&&p.name===e);if(o.length===0)throw new ba({name:e});if(o.length===1)return{...o[0],...n?{hash:Ko(o[0])}:{}};let l;for(let p of o){if(!("inputs"in p))continue;if(!r||r.length===0){if(!p.inputs||p.inputs.length===0)return{...p,...n?{hash:Ko(p)}:{}};continue}if(!p.inputs||p.inputs.length===0||p.inputs.length!==r.length)continue;if(r.every((h,f)=>{let g="inputs"in p&&p.inputs[f];return g?Rd(h,g):!1})){if(l&&"inputs"in l&&l.inputs){let h=r0(p.inputs,l.inputs,r);if(h)throw new n0({abiItem:p,type:h[0]},{abiItem:l,type:h[1]})}l=p}}let c=(()=>{if(l)return l;let[p,...d]=o;return{...p,overloads:d}})();if(!c)throw new ba({name:e});return{...c,...n?{hash:Ko(c)}:{}}}function s0(i){return jo(Ko(i),0,4)}function JE(i){let e=(()=>typeof i=="string"?i:Gs(i))();return Md(e)}function Ko(i){return typeof i!="string"&&"hash"in i&&i.hash?i.hash:Sd(Go(JE(i)))}var n0=class extends Ct{constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Md(Gs(e.abiItem))}\`, and`,`\`${t.type}\` in \`${Md(Gs(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}},ba=class extends Ct{constructor({name:e,data:t,type:r="item"}){let n=(()=>e?` with name "${e}"`:t?` with data "${t}"`:"")();super(`ABI ${r}${n} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};var Dv=/^(.*)\[([0-9]*)\]$/,Bv=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Bd=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,n9=2n**(8n-1n)-1n,s9=2n**(16n-1n)-1n,a9=2n**(24n-1n)-1n,o9=2n**(32n-1n)-1n,l9=2n**(40n-1n)-1n,c9=2n**(48n-1n)-1n,u9=2n**(56n-1n)-1n,p9=2n**(64n-1n)-1n,m9=2n**(72n-1n)-1n,d9=2n**(80n-1n)-1n,h9=2n**(88n-1n)-1n,f9=2n**(96n-1n)-1n,g9=2n**(104n-1n)-1n,b9=2n**(112n-1n)-1n,y9=2n**(120n-1n)-1n,_9=2n**(128n-1n)-1n,x9=2n**(136n-1n)-1n,v9=2n**(144n-1n)-1n,w9=2n**(152n-1n)-1n,L9=2n**(160n-1n)-1n,I9=2n**(168n-1n)-1n,E9=2n**(176n-1n)-1n,S9=2n**(184n-1n)-1n,T9=2n**(192n-1n)-1n,k9=2n**(200n-1n)-1n,A9=2n**(208n-1n)-1n,C9=2n**(216n-1n)-1n,R9=2n**(224n-1n)-1n,M9=2n**(232n-1n)-1n,D9=2n**(240n-1n)-1n,B9=2n**(248n-1n)-1n,P9=2n**(256n-1n)-1n,O9=-(2n**(8n-1n)),N9=-(2n**(16n-1n)),F9=-(2n**(24n-1n)),H9=-(2n**(32n-1n)),U9=-(2n**(40n-1n)),V9=-(2n**(48n-1n)),z9=-(2n**(56n-1n)),G9=-(2n**(64n-1n)),j9=-(2n**(72n-1n)),W9=-(2n**(80n-1n)),K9=-(2n**(88n-1n)),$9=-(2n**(96n-1n)),q9=-(2n**(104n-1n)),Y9=-(2n**(112n-1n)),X9=-(2n**(120n-1n)),Q9=-(2n**(128n-1n)),Z9=-(2n**(136n-1n)),J9=-(2n**(144n-1n)),e7=-(2n**(152n-1n)),t7=-(2n**(160n-1n)),i7=-(2n**(168n-1n)),r7=-(2n**(176n-1n)),n7=-(2n**(184n-1n)),s7=-(2n**(192n-1n)),a7=-(2n**(200n-1n)),o7=-(2n**(208n-1n)),l7=-(2n**(216n-1n)),c7=-(2n**(224n-1n)),u7=-(2n**(232n-1n)),p7=-(2n**(240n-1n)),m7=-(2n**(248n-1n)),d7=-(2n**(256n-1n)),h7=2n**8n-1n,f7=2n**16n-1n,g7=2n**24n-1n,b7=2n**32n-1n,y7=2n**40n-1n,_7=2n**48n-1n,x7=2n**56n-1n,v7=2n**64n-1n,w7=2n**72n-1n,L7=2n**80n-1n,I7=2n**88n-1n,E7=2n**96n-1n,S7=2n**104n-1n,T7=2n**112n-1n,k7=2n**120n-1n,A7=2n**128n-1n,C7=2n**136n-1n,R7=2n**144n-1n,M7=2n**152n-1n,D7=2n**160n-1n,B7=2n**168n-1n,P7=2n**176n-1n,O7=2n**184n-1n,N7=2n**192n-1n,F7=2n**200n-1n,H7=2n**208n-1n,U7=2n**216n-1n,V7=2n**224n-1n,z7=2n**232n-1n,G7=2n**240n-1n,j7=2n**248n-1n,W7=2n**256n-1n;function Pv({checksumAddress:i,parameters:e,values:t}){let r=[];for(let n=0;n<e.length;n++)r.push(a0({checksumAddress:i,parameter:e[n],value:t[n]}));return r}function a0({checksumAddress:i=!1,parameter:e,value:t}){let r=e,n=lS(r.type);if(n){let[s,o]=n;return iS(t,{checksumAddress:i,length:s,parameter:{...r,type:o}})}if(r.type==="tuple")return oS(t,{checksumAddress:i,parameter:r});if(r.type==="address")return tS(t,{checksum:i});if(r.type==="bool")return nS(t);if(r.type.startsWith("uint")||r.type.startsWith("int")){let s=r.type.startsWith("int"),[,,o="256"]=Bd.exec(r.type)??[];return sS(t,{signed:s,size:Number(o)})}if(r.type.startsWith("bytes"))return rS(t,{type:r.type});if(r.type==="string")return aS(t);throw new Tc(r.type)}function Pd(i){let e=0;for(let s=0;s<i.length;s++){let{dynamic:o,encoded:l}=i[s];o?e+=32:e+=Ei(l)}let t=[],r=[],n=0;for(let s=0;s<i.length;s++){let{dynamic:o,encoded:l}=i[s];o?(t.push(li(e+n,{size:32})),r.push(l),n+=Ei(l)):t.push(l)}return sr(...t,...r)}function tS(i,e){let{checksum:t=!1}=e;return Wo(i,{strict:t}),{dynamic:!1,encoded:Wn(i.toLowerCase())}}function iS(i,e){let{checksumAddress:t,length:r,parameter:n}=e,s=r===null;if(!Array.isArray(i))throw new Nd(i);if(!s&&i.length!==r)throw new Od({expectedLength:r,givenLength:i.length,type:`${n.type}[${r}]`});let o=!1,l=[];for(let c=0;c<i.length;c++){let p=a0({checksumAddress:t,parameter:n,value:i[c]});p.dynamic&&(o=!0),l.push(p)}if(s||o){let c=Pd(l);if(s){let p=li(l.length,{size:32});return{dynamic:!0,encoded:l.length>0?sr(p,c):p}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:sr(...l.map(({encoded:c})=>c))}}function rS(i,{type:e}){let[,t]=e.split("bytes"),r=Ei(i);if(!t){let n=i;return r%32!==0&&(n=vn(n,Math.ceil((i.length-2)/2/32)*32)),{dynamic:!0,encoded:sr(Wn(li(r,{size:32})),n)}}if(r!==Number.parseInt(t))throw new Sc({expectedSize:Number.parseInt(t),value:i});return{dynamic:!1,encoded:vn(i)}}function nS(i){if(typeof i!="boolean")throw new Ct(`Invalid boolean value: "${i}" (type: ${typeof i}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Wn(Ed(i))}}function sS(i,{signed:e,size:t}){if(typeof t=="number"){let r=2n**(BigInt(t)-(e?1n:0n))-1n,n=e?-r-1n:0n;if(i>r||i<n)throw new Ic({max:r.toString(),min:n.toString(),signed:e,size:t/8,value:i.toString()})}return{dynamic:!1,encoded:li(i,{size:32,signed:e})}}function aS(i){let e=Go(i),t=Math.ceil(Ei(e)/32),r=[];for(let n=0;n<t;n++)r.push(vn(jo(e,n*32,(n+1)*32)));return{dynamic:!0,encoded:sr(vn(li(Ei(e),{size:32})),...r)}}function oS(i,e){let{checksumAddress:t,parameter:r}=e,n=!1,s=[];for(let o=0;o<r.components.length;o++){let l=r.components[o],c=Array.isArray(i)?o:l.name,p=a0({checksumAddress:t,parameter:l,value:i[c]});s.push(p),p.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Pd(s):sr(...s.map(({encoded:o})=>o))}}function lS(i){let e=i.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Hd(i,e,t){let{checksumAddress:r=!1}=t??{};if(i.length!==e.length)throw new Fd({expectedLength:i.length,givenLength:e.length});let n=Pv({checksumAddress:r,parameters:i,values:e}),s=Pd(n);return s.length===0?"0x":s}function l0(i,e){if(i.length!==e.length)throw new Fd({expectedLength:i.length,givenLength:e.length});let t=[];for(let r=0;r<i.length;r++){let n=i[r],s=e[r];t.push(l0.encode(n,s))}return sr(...t)}(function(i){function e(t,r,n=!1){if(t==="address"){let c=r;return Wo(c),Wn(c.toLowerCase(),n?32:0)}if(t==="string")return Go(r);if(t==="bytes")return r;if(t==="bool")return Wn(Ed(r),n?32:1);let s=t.match(Bd);if(s){let[c,p,d="256"]=s,h=Number.parseInt(d)/8;return li(r,{size:n?32:h,signed:p==="int"})}let o=t.match(Bv);if(o){let[c,p]=o;if(Number.parseInt(p)!==(r.length-2)/2)throw new Sc({expectedSize:Number.parseInt(p),value:r});return vn(r,n?32:0)}let l=t.match(Dv);if(l&&Array.isArray(r)){let[c,p]=l,d=[];for(let h=0;h<r.length;h++)d.push(e(p,r[h],!0));return d.length===0?"0x":sr(...d)}throw new Tc(t)}i.encode=e})(l0||(l0={}));var Od=class extends Ct{constructor({expectedLength:e,givenLength:t,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}},Sc=class extends Ct{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${Ei(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},Fd=class extends Ct{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${t}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},Nd=class extends Ct{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}},Tc=class extends Ct{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};function Ov(i,e){let{bytecode:t,args:r}=e;return sr(t,i.inputs?.length&&r?.length?Hd(i.inputs,r):"0x")}function Nv(i){return Dd(i)}function Fv(i,...e){let{overloads:t}=i,r=t?mS([i,...t],i.name,{args:e[0]}):i,n=dS(r),s=e.length>0?Hd(r.inputs,e[0]):void 0;return s?sr(n,s):n}function ya(i,e={}){return Dd(i,e)}function mS(i,e,t){let r=Rv(i,e,t);if(r.type!=="function")throw new ba({name:e,type:"function"});return r}function dS(i){return s0(i)}di();var Hv="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Yr="0x0000000000000000000000000000000000000000";Nm();lt();xr();var fS="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Uv(i,e){let{blockNumber:t,blockTag:r,calls:n,stateOverrides:s,traceAssetChanges:o,traceTransfers:l,validation:c}=e,p=e.account?ht(e.account):void 0;if(o&&!p)throw new U("`account` is required when `traceAssetChanges` is true");let d=p?Ov(Nv("constructor(bytes, bytes)"),{bytecode:Om,args:[fS,Fv(ya("function getBalance(address)"),[p.address])]}):void 0,h=o?await Promise.all(e.calls.map(async ge=>{if(!ge.data&&!ge.abi)return;let{accessList:Ze}=await od(i,{account:p.address,...ge,data:ge.abi?Kt(ge):ge.data});return Ze.map(({address:tt,storageKeys:jt})=>jt.length>0?tt:null)})).then(ge=>ge.flat().filter(Boolean)):[],f=s?.map(ge=>ge.address===p?.address?{...ge,nonce:0}:ge),g=await Ec(i,{blockNumber:t,blockTag:r,blocks:[...o?[{calls:[{data:d}],stateOverrides:s},{calls:h.map((ge,Ze)=>({abi:[ya("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[p.address],to:ge,from:Yr,nonce:Ze})),stateOverrides:[{address:Yr,nonce:0}]}]:[],{calls:[...n,{}].map((ge,Ze)=>({...ge,from:p?.address,nonce:Ze})),stateOverrides:f},...o?[{calls:[{data:d}]},{calls:h.map((ge,Ze)=>({abi:[ya("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[p.address],to:ge,from:Yr,nonce:Ze})),stateOverrides:[{address:Yr,nonce:0}]},{calls:h.map((ge,Ze)=>({to:ge,abi:[ya("function decimals() returns (uint256)")],functionName:"decimals",from:Yr,nonce:Ze})),stateOverrides:[{address:Yr,nonce:0}]},{calls:h.map((ge,Ze)=>({to:ge,abi:[ya("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Yr,nonce:Ze})),stateOverrides:[{address:Yr,nonce:0}]},{calls:h.map((ge,Ze)=>({to:ge,abi:[ya("function symbol() returns (string)")],functionName:"symbol",from:Yr,nonce:Ze})),stateOverrides:[{address:Yr,nonce:0}]}]:[]],traceTransfers:l,validation:c}),E=o?g[2]:g[0],[I,_,,S,M,R,V,H]=o?g:[],{calls:K,...q}=E,ce=K.slice(0,-1)??[],Q=I?.calls??[],ke=_?.calls??[],ve=[...Q,...ke].map(ge=>ge.status==="success"?Wt(ge.data):null),W=S?.calls??[],ut=M?.calls??[],le=[...W,...ut].map(ge=>ge.status==="success"?Wt(ge.data):null),Se=(R?.calls??[]).map(ge=>ge.status==="success"?ge.result:null),we=(H?.calls??[]).map(ge=>ge.status==="success"?ge.result:null),D=(V?.calls??[]).map(ge=>ge.status==="success"?ge.result:null),Ge=[];for(let[ge,Ze]of le.entries()){let tt=ve[ge];if(typeof Ze!="bigint"||typeof tt!="bigint")continue;let jt=Se[ge-1],wt=we[ge-1],st=D[ge-1],vi=(()=>ge===0?{address:Hv,decimals:18,symbol:"ETH"}:{address:h[ge-1],decimals:st||jt?Number(jt??1):void 0,symbol:wt??void 0})();Ge.some(ki=>ki.token.address===vi.address)||Ge.push({token:vi,value:{pre:tt,post:Ze,diff:Ze-tt}})}return{assetChanges:Ge,block:q,results:ce}}pa();Nm();Fn();Um();$s();ko();Pr();Ve();ym();Bi();Ii();function Vv({r:i,s:e,to:t="hex",v:r,yParity:n}){let s=(()=>{if(n===0||n===1)return n;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new zn.Signature(Wt(i),Wt(e)).toCompactHex()}${s===0?"1b":"1c"}`;return t==="hex"?o:mi(o)}Mo();async function $o(i,e){let{address:t,factory:r,factoryData:n,hash:s,signature:o,universalSignatureVerifierAddress:l=i.chain?.contracts?.universalSignatureVerifier?.address,...c}=e,p=(()=>ri(o)?o:typeof o=="object"&&"r"in o&&"s"in o?Vv(o):xt(o))(),d=await(async()=>!r&&!n||cv(p)?p:uv({address:r,data:n,signature:p}))();try{let h=l?{to:l,data:Kt({abi:Oy,functionName:"isValidSig",args:[t,s,d]}),...c}:{data:ha({abi:Oy,args:[t,s,d],bytecode:mx}),...c},{data:f}=await _e(i,gn,"call")(h);return Vb(f??"0x0")}catch(h){try{if(fn(Mp(t),await _m({hash:s,signature:o})))return!0}catch{}if(h instanceof Zs)return!1;throw h}}async function zv(i,{address:e,message:t,factory:r,factoryData:n,signature:s,...o}){let l=gd(t);return $o(i,{address:e,factory:r,factoryData:n,hash:l,signature:s,...o})}async function Gv(i,e){let{address:t,factory:r,factoryData:n,signature:s,message:o,primaryType:l,types:c,domain:p,...d}=e,h=qx({message:o,primaryType:l,types:c,domain:p});return $o(i,{address:t,factory:r,factoryData:n,hash:h,signature:s,...d})}jr();Hy();Ki();Bi();Ki();function Ud(i,{emitOnBegin:e=!1,emitMissed:t=!1,onBlockNumber:r,onError:n,poll:s,pollingInterval:o=i.pollingInterval}){let l=(()=>typeof s<"u"?s:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))(),c;return l?(()=>{let h=vt(["watchBlockNumber",i.uid,e,t,o]);return nr(h,{onBlockNumber:r,onError:n},f=>bn(async()=>{try{let g=await _e(i,yn,"getBlockNumber")({cacheTime:0});if(c){if(g===c)return;if(g-c>1&&t)for(let E=c+1n;E<g;E++)f.onBlockNumber(E,c),c=E}(!c||g>c)&&(f.onBlockNumber(g,c),c=g)}catch(g){f.onError?.(g)}},{emitOnBegin:e,interval:o}))})():(()=>{let h=vt(["watchBlockNumber",i.uid,e,t]);return nr(h,{onBlockNumber:r,onError:n},f=>{let g=!0,E=()=>g=!1;return(async()=>{try{let I=(()=>{if(i.transport.type==="fallback"){let S=i.transport.transports.find(M=>M.config.type==="webSocket");return S?S.value:i.transport}return i.transport})(),{unsubscribe:_}=await I.subscribe({params:["newHeads"],onData(S){if(!g)return;let M=Wt(S.result?.number);f.onBlockNumber(M,c),c=M},onError(S){f.onError?.(S)}});E=_,g||E()}catch(I){n?.(I)}})(),()=>E()})})()}async function jv(i,{confirmations:e=1,hash:t,onReplaced:r,pollingInterval:n=i.pollingInterval,retryCount:s=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:l=18e4}){let c=vt(["waitForTransactionReceipt",i.uid,t]),p,d,h,f=!1,{promise:g,resolve:E,reject:I}=zm(),_=l?setTimeout(()=>I(new em({hash:t})),l):void 0,S=nr(c,{onReplaced:r,resolve:E,reject:I},M=>{let R=_e(i,Ud,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:n,async onBlockNumber(V){let H=q=>{clearTimeout(_),R(),q(),S()},K=V;if(!f)try{if(h){if(e>1&&(!h.blockNumber||K-h.blockNumber+1n<e))return;H(()=>M.resolve(h));return}if(p||(f=!0,await yc(async()=>{p=await _e(i,Vo,"getTransaction")({hash:t}),p.blockNumber&&(K=p.blockNumber)},{delay:o,retryCount:s}),f=!1),h=await _e(i,vc,"getTransactionReceipt")({hash:t}),e>1&&(!h.blockNumber||K-h.blockNumber+1n<e))return;H(()=>M.resolve(h))}catch(q){if(q instanceof $a||q instanceof qa){if(!p){f=!1;return}try{d=p,f=!0;let ce=await yc(()=>_e(i,Hi,"getBlock")({blockNumber:K,includeTransactions:!0}),{delay:o,retryCount:s,shouldRetry:({error:ve})=>ve instanceof vo});f=!1;let Q=ce.transactions.find(({from:ve,nonce:W})=>ve===d.from&&W===d.nonce);if(!Q||(h=await _e(i,vc,"getTransactionReceipt")({hash:Q.hash}),e>1&&(!h.blockNumber||K-h.blockNumber+1n<e)))return;let ke="replaced";Q.to===d.to&&Q.value===d.value&&Q.input===d.input?ke="repriced":Q.from===Q.to&&Q.value===0n&&(ke="cancelled"),H(()=>{M.onReplaced?.({reason:ke,replacedTransaction:d,transaction:Q,transactionReceipt:h}),M.resolve(h)})}catch(ce){H(()=>M.reject(ce))}}else H(()=>M.reject(q))}}})});return g}Ki();function Wv(i,{blockTag:e="latest",emitMissed:t=!1,emitOnBegin:r=!1,onBlock:n,onError:s,includeTransactions:o,poll:l,pollingInterval:c=i.pollingInterval}){let p=(()=>typeof l<"u"?l:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))(),d=o??!1,h;return p?(()=>{let E=vt(["watchBlocks",i.uid,e,t,r,d,c]);return nr(E,{onBlock:n,onError:s},I=>bn(async()=>{try{let _=await _e(i,Hi,"getBlock")({blockTag:e,includeTransactions:d});if(_.number&&h?.number){if(_.number===h.number)return;if(_.number-h.number>1&&t)for(let S=h?.number+1n;S<_.number;S++){let M=await _e(i,Hi,"getBlock")({blockNumber:S,includeTransactions:d});I.onBlock(M,h),h=M}}(!h?.number||e==="pending"&&!_?.number||_.number&&_.number>h.number)&&(I.onBlock(_,h),h=_)}catch(_){I.onError?.(_)}},{emitOnBegin:r,interval:c}))})():(()=>{let E=!0,I=!0,_=()=>E=!1;return(async()=>{try{r&&_e(i,Hi,"getBlock")({blockTag:e,includeTransactions:d}).then(R=>{E&&I&&(n(R,void 0),I=!1)});let S=(()=>{if(i.transport.type==="fallback"){let R=i.transport.transports.find(V=>V.config.type==="webSocket");return R?R.value:i.transport}return i.transport})(),{unsubscribe:M}=await S.subscribe({params:["newHeads"],async onData(R){if(!E)return;let V=await _e(i,Hi,"getBlock")({blockNumber:R.blockNumber,includeTransactions:d}).catch(()=>{});E&&(n(V,h),I=!1,h=V)},onError(R){s?.(R)}});_=M,E||_()}catch(S){s?.(S)}})(),()=>_()})()}Ki();pi();rc();function Kv(i,{address:e,args:t,batch:r=!0,event:n,events:s,fromBlock:o,onError:l,onLogs:c,poll:p,pollingInterval:d=i.pollingInterval,strict:h}){let f=(()=>typeof p<"u"?p:typeof o=="bigint"?!0:!(i.transport.type==="webSocket"||i.transport.type==="fallback"&&i.transport.transports[0].config.type==="webSocket"))(),g=h??!1;return f?(()=>{let _=vt(["watchEvent",e,t,r,i.uid,n,d,o]);return nr(_,{onLogs:c,onError:l},S=>{let M;o!==void 0&&(M=o-1n);let R,V=!1,H=bn(async()=>{if(!V){try{R=await _e(i,ld,"createEventFilter")({address:e,args:t,event:n,events:s,strict:g,fromBlock:o})}catch{}V=!0;return}try{let K;if(R)K=await _e(i,Ss,"getFilterChanges")({filter:R});else{let q=await _e(i,yn,"getBlockNumber")({});M&&M!==q?K=await _e(i,Ro,"getLogs")({address:e,args:t,event:n,events:s,fromBlock:M+1n,toBlock:q}):K=[],M=q}if(K.length===0)return;if(r)S.onLogs(K);else for(let q of K)S.onLogs([q])}catch(K){R&&K instanceof pn&&(V=!1),S.onError?.(K)}},{emitOnBegin:!0,interval:d});return async()=>{R&&await _e(i,Ts,"uninstallFilter")({filter:R}),H()}})})():(()=>{let _=!0,S=()=>_=!1;return(async()=>{try{let M=(()=>{if(i.transport.type==="fallback"){let K=i.transport.transports.find(q=>q.config.type==="webSocket");return K?K.value:i.transport}return i.transport})(),R=s??(n?[n]:void 0),V=[];R&&(V=[R.flatMap(q=>cn({abi:[q],eventName:q.name,args:t}))],n&&(V=V[0]));let{unsubscribe:H}=await M.subscribe({params:["logs",{address:e,topics:V}],onData(K){if(!_)return;let q=K.result;try{let{eventName:ce,args:Q}=Ao({abi:R??[],data:q.data,topics:q.topics,strict:g}),ke=Ui(q,{args:Q,eventName:ce});c([ke])}catch(ce){let Q,ke;if(ce instanceof Nr||ce instanceof sn){if(h)return;Q=ce.abiItem.name,ke=ce.abiItem.inputs?.some(W=>!("name"in W&&W.name))}let ve=Ui(q,{args:ke?[]:{},eventName:Q});c([ve])}},onError(K){l?.(K)}});S=H,_||S()}catch(M){l?.(M)}})(),()=>S()})()}Ki();function $v(i,{batch:e=!0,onError:t,onTransactions:r,poll:n,pollingInterval:s=i.pollingInterval}){return(typeof n<"u"?n:i.transport.type!=="webSocket")?(()=>{let p=vt(["watchPendingTransactions",i.uid,e,s]);return nr(p,{onTransactions:r,onError:t},d=>{let h,f=bn(async()=>{try{if(!h)try{h=await _e(i,cd,"createPendingTransactionFilter")({});return}catch(E){throw f(),E}let g=await _e(i,Ss,"getFilterChanges")({filter:h});if(g.length===0)return;if(e)d.onTransactions(g);else for(let E of g)d.onTransactions([E])}catch(g){d.onError?.(g)}},{emitOnBegin:!0,interval:s});return async()=>{h&&await _e(i,Ts,"uninstallFilter")({filter:h}),f()}})})():(()=>{let p=!0,d=()=>p=!1;return(async()=>{try{let{unsubscribe:h}=await i.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!p)return;let g=f.result;r([g])},onError(f){t?.(f)}});d=h,p||d()}catch(h){t?.(h)}})(),()=>d()})()}function qv(i){let{scheme:e,statement:t,...r}=i.match(gS)?.groups??{},{chainId:n,expirationTime:s,issuedAt:o,notBefore:l,requestId:c,...p}=i.match(bS)?.groups??{},d=i.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...p,...n?{chainId:Number(n)}:{},...s?{expirationTime:new Date(s)}:{},...o?{issuedAt:new Date(o)}:{},...l?{notBefore:new Date(l)}:{},...c?{requestId:c}:{},...d?{resources:d}:{},...e?{scheme:e}:{},...t?{statement:t}:{}}}var gS=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,bS=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;ko();function Yv(i){let{address:e,domain:t,message:r,nonce:n,scheme:s,time:o=new Date}=i;if(t&&r.domain!==t||n&&r.nonce!==n||s&&r.scheme!==s||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||e&&!fn(r.address,e))return!1}catch{return!1}return!0}async function Xv(i,e){let{address:t,domain:r,message:n,nonce:s,scheme:o,signature:l,time:c=new Date,...p}=e,d=qv(n);if(!d.address||!Yv({address:t,domain:r,message:d,nonce:s,scheme:o,time:c}))return!1;let f=gd(n);return $o(i,{address:d.address,hash:f,signature:l,...p})}function Qv(i){return{call:e=>gn(i,e),createAccessList:e=>od(i,e),createBlockFilter:()=>zx(i),createContractEventFilter:e=>Op(i,e),createEventFilter:e=>ld(i,e),createPendingTransactionFilter:()=>cd(i),estimateContractGas:e=>sx(i,e),estimateGas:e=>To(i,e),getBalance:e=>Dm(i,e),getBlobBaseFee:()=>Gx(i),getBlock:e=>Hi(i,e),getBlockNumber:e=>yn(i,e),getBlockTransactionCount:e=>jx(i,e),getBytecode:e=>$y(i,e),getChainId:()=>Sr(i),getCode:e=>$y(i,e),getContractEvents:e=>Bm(i,e),getEip712Domain:e=>Ex(i,e),getEnsAddress:e=>Dx(i,e),getEnsAvatar:e=>Hx(i,e),getEnsName:e=>Ux(i,e),getEnsResolver:e=>Vx(i,e),getEnsText:e=>ad(i,e),getFeeHistory:e=>Kx(i,e),estimateFeesPerGas:e=>ex(i,e),getFilterChanges:e=>Ss(i,e),getFilterLogs:e=>$x(i,e),getGasPrice:()=>wo(i),getLogs:e=>Ro(i,e),getProof:e=>mv(i,e),estimateMaxPriorityFeePerGas:e=>J1(i,e),getStorageAt:e=>dv(i,e),getTransaction:e=>Vo(i,e),getTransactionConfirmations:e=>hv(i,e),getTransactionCount:e=>Lo(i,e),getTransactionReceipt:e=>vc(i,e),multicall:e=>fv(i,e),prepareTransactionRequest:e=>Is(i,e),readContract:e=>Ai(i,e),sendRawTransaction:e=>Do(i,e),simulate:e=>Ec(i,e),simulateBlocks:e=>Ec(i,e),simulateCalls:e=>Uv(i,e),simulateContract:e=>yx(i,e),verifyMessage:e=>zv(i,e),verifySiweMessage:e=>Xv(i,e),verifyTypedData:e=>Gv(i,e),uninstallFilter:e=>Ts(i,e),waitForTransactionReceipt:e=>jv(i,e),watchBlocks:e=>Wv(i,e),watchBlockNumber:e=>Ud(i,e),watchContractEvent:e=>wx(i,e),watchEvent:e=>Kv(i,e),watchPendingTransactions:e=>$v(i,e)}}function kc(i){let{key:e="public",name:t="Public Client"}=i;return Zm({...i,key:e,name:t,type:"publicClient"}).extend(Qv)}Um();function Zv(i,e){let{abi:t,args:r,bytecode:n,...s}=e,o=ha({abi:t,args:r,bytecode:n});return Bo(i,{...s,...s.authorizationList?{to:null}:{},data:o})}$s();async function Jv(i){return i.account?.type==="local"?[i.account.address]:(await i.request({method:"eth_accounts"},{dedupe:!0})).map(t=>On(t))}async function ew(i){return await i.request({method:"wallet_getPermissions"},{dedupe:!0})}di();ko();async function Vd(i,e){let{account:t=i.account,chainId:r,nonce:n}=e;if(!t)throw new Vi({docsPath:"/docs/eip7702/prepareAuthorization"});let s=ht(t),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:ht(e.executor)})(),l={address:e.contractAddress??e.address,chainId:r,nonce:n};return typeof l.chainId>"u"&&(l.chainId=i.chain?.id??await _e(i,Sr,"getChainId")({})),typeof l.nonce>"u"&&(l.nonce=await _e(i,Lo,"getTransactionCount")({address:s.address,blockTag:"pending"}),(o==="self"||o?.address&&fn(o.address,s.address))&&(l.nonce+=1)),l}$s();async function tw(i){return(await i.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(t=>Mp(t))}async function iw(i,e){return i.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}di();async function rw(i,e){let{account:t=i.account}=e;if(!t)throw new Vi({docsPath:"/docs/eip7702/signAuthorization"});let r=ht(t);if(!r.signAuthorization)throw new ks({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});let n=await Vd(i,e);return r.signAuthorization(n)}di();Ve();async function nw(i,{account:e=i.account,message:t}){if(!e)throw new Vi({docsPath:"/docs/actions/wallet/signMessage"});let r=ht(e);if(r.signMessage)return r.signMessage({message:t});let n=(()=>typeof t=="string"?Fr(t):t.raw instanceof Uint8Array?Me(t.raw):t.raw)();return i.request({method:"personal_sign",params:[n,r.address]},{retryCount:0})}di();Ve();ca();ws();async function sw(i,e){let{account:t=i.account,chain:r=i.chain,...n}=e;if(!t)throw new Vi({docsPath:"/docs/actions/wallet/signTransaction"});let s=ht(t);ir({account:s,...e});let o=await _e(i,Sr,"getChainId")({});r!==null&&$m({currentChainId:o,chain:r});let c=(r?.formatters||i.chain?.formatters)?.transactionRequest?.format||Er;return s.signTransaction?s.signTransaction({...n,chainId:o},{serializer:i.chain?.serializers?.transaction}):await i.request({method:"eth_signTransaction",params:[{...c(n),chainId:Ie(o),from:s.address}]},{retryCount:0})}di();async function aw(i,e){let{account:t=i.account,domain:r,message:n,primaryType:s}=e;if(!t)throw new Vi({docsPath:"/docs/actions/wallet/signTypedData"});let o=ht(t),l={EIP712Domain:hd({domain:r}),...e.types};if(dd({domain:r,message:n,primaryType:s,types:l}),o.signTypedData)return o.signTypedData({domain:r,message:n,primaryType:s,types:l});let c=Jx({domain:r,message:n,primaryType:s,types:l});return i.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}Ve();async function ow(i,{id:e}){await i.request({method:"wallet_switchEthereumChain",params:[{chainId:Ie(e)}]},{retryCount:0})}async function lw(i,e){return await i.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function cw(i){return{addChain:e=>Sx(i,e),deployContract:e=>Zv(i,e),getAddresses:()=>Jv(i),getChainId:()=>Sr(i),getPermissions:()=>ew(i),prepareAuthorization:e=>Vd(i,e),prepareTransactionRequest:e=>Is(i,e),requestAddresses:()=>tw(i),requestPermissions:e=>iw(i,e),sendRawTransaction:e=>Do(i,e),sendTransaction:e=>Bo(i,e),signAuthorization:e=>rw(i,e),signMessage:e=>nw(i,e),signTransaction:e=>sw(i,e),signTypedData:e=>aw(i,e),switchChain:e=>ow(i,e),watchAsset:e=>lw(i,e),writeContract:e=>Ix(i,e)}}function qo(i){let{key:e="wallet",name:t="Wallet Client",transport:r}=i;return Zm({...i,key:e,name:t,transport:r,type:"walletClient"}).extend(cw)}lt();Fn();Ve();Wp();var mr=class{constructor(){this.extra={}}};var m=P0(jw());var X;(e=>{let i;(r=>{let t;(Qi=>{var wi,Zi,Li,Vt,or,Qn,x,O,k,Z,be,fe,Je,dt,yt,Ji,Mi,Cn,Rn,Qc,Zc,Jc,eu,tu,iu,ru,nu,su,au,ou,lu,cu,uu,pu,mu,du,hu,fu,gu,bu,yu;let n;(fr=>(fr[fr.SYS_NORMAL=1]="SYS_NORMAL",fr[fr.UNKNOWN=2]="UNKNOWN",fr[fr.USER_NOT_EXIST=3]="USER_NOT_EXIST",fr[fr.SYS_DATA_ERROR=4]="SYS_DATA_ERROR",fr[fr.WALLET_ADDRESS_ERROR=5]="WALLET_ADDRESS_ERROR",fr[fr.NOT_ENOUGH_ITEM=6]="NOT_ENOUGH_ITEM"))(n=Qi.MessageCode||(Qi.MessageCode={}));let s;(Fe=>(Fe[Fe.MSG_HEART_BEAT=10001]="MSG_HEART_BEAT",Fe[Fe.MSG_REG_HALL=10002]="MSG_REG_HALL",Fe[Fe.MSG_REG_ROOM=10003]="MSG_REG_ROOM",Fe[Fe.MSG_REMOVE_HALL=11002]="MSG_REMOVE_HALL",Fe[Fe.MSG_REMOVE_ROOM=11003]="MSG_REMOVE_ROOM",Fe[Fe.MSG_USER_REGISTER=101]="MSG_USER_REGISTER",Fe[Fe.MSG_USER_LOGIN=102]="MSG_USER_LOGIN",Fe[Fe.MSG_REPEAT_LOGIN_NOTICE=103]="MSG_REPEAT_LOGIN_NOTICE",Fe[Fe.MSG_REQUEST_ROOM_ADDR=104]="MSG_REQUEST_ROOM_ADDR",Fe[Fe.MSG_ENTER_ROOM=105]="MSG_ENTER_ROOM",Fe[Fe.MSG_PLAYER_OPR=106]="MSG_PLAYER_OPR",Fe[Fe.MSG_PLAYER_STATE=107]="MSG_PLAYER_STATE",Fe[Fe.MSG_GEN_FOOD=108]="MSG_GEN_FOOD",Fe[Fe.MSG_UPDATE_ROLE=109]="MSG_UPDATE_ROLE",Fe[Fe.MSG_NOTICE_ENTER=110]="MSG_NOTICE_ENTER",Fe[Fe.MSG_BATTLE_END=111]="MSG_BATTLE_END",Fe[Fe.MSG_EAT_FOOD=112]="MSG_EAT_FOOD",Fe[Fe.MSG_PLAYER_COLLISION=113]="MSG_PLAYER_COLLISION",Fe[Fe.MSG_REQUEST_SERVER_TIME=114]="MSG_REQUEST_SERVER_TIME",Fe[Fe.MSG_REQUEST_ROOM_DATA=115]="MSG_REQUEST_ROOM_DATA",Fe[Fe.MSG_INVITE_LIST=116]="MSG_INVITE_LIST",Fe[Fe.MSG_REQUEST_INFO=117]="MSG_REQUEST_INFO",Fe[Fe.MSG_SHOP_BUY=118]="MSG_SHOP_BUY",Fe[Fe.MSG_PUSH=119]="MSG_PUSH",Fe[Fe.MSG_QUERY_TOKEN=120]="MSG_QUERY_TOKEN",Fe[Fe.MSG_PLAYER_OUT=121]="MSG_PLAYER_OUT",Fe[Fe.MSG_CHARGE=122]="MSG_CHARGE",Fe[Fe.MSG_WITHDRAW=123]="MSG_WITHDRAW"))(s=Qi.MessageType||(Qi.MessageType={}));let Ri=class Ri extends m.Message{constructor(a){super();rt(this,wi,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,wi)),!Array.isArray(a)&&typeof a=="object"&&(this.msghead=a.msghead,"msgbody"in a&&a.msgbody!=null&&(this.msgbody=a.msgbody))}get msghead(){return m.Message.getWrapperField(this,l,1)}set msghead(a){m.Message.setWrapperField(this,1,a)}get has_msghead(){return m.Message.getField(this,1)!=null}get msgbody(){return m.Message.getFieldWithDefault(this,2,new Uint8Array(0))}set msgbody(a){m.Message.setField(this,2,a)}get has_msgbody(){return m.Message.getField(this,2)!=null}static fromObject(a){let u=new Ri({msghead:l.fromObject(a.msghead)});return a.msgbody!=null&&(u.msgbody=a.msgbody),u}toObject(){let a={};return this.msghead!=null&&(a.msghead=this.msghead.toObject()),this.msgbody!=null&&(a.msgbody=this.msgbody),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_msghead&&u.writeMessage(1,this.msghead,()=>this.msghead.serialize(u)),this.has_msgbody&&this.msgbody.length&&u.writeBytes(2,this.msgbody),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Ri;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:u.readMessage(b.msghead,()=>b.msghead=l.deserialize(u));break;case 2:b.msgbody=u.readBytes();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Ri.deserialize(a)}};wi=new WeakMap;let o=Ri;Qi.CMsgBase=Ri;let ii=class ii extends m.Message{constructor(a){super();rt(this,Zi,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,Zi)),!Array.isArray(a)&&typeof a=="object"&&(this.msgtype=a.msgtype,this.msgcode=a.msgcode,"roleId"in a&&a.roleId!=null&&(this.roleId=a.roleId))}get msgtype(){return m.Message.getField(this,1)}set msgtype(a){m.Message.setField(this,1,a)}get has_msgtype(){return m.Message.getField(this,1)!=null}get msgcode(){return m.Message.getField(this,2)}set msgcode(a){m.Message.setField(this,2,a)}get has_msgcode(){return m.Message.getField(this,2)!=null}get roleId(){return m.Message.getFieldWithDefault(this,3,"")}set roleId(a){m.Message.setField(this,3,a)}get has_roleId(){return m.Message.getField(this,3)!=null}static fromObject(a){let u=new ii({msgtype:a.msgtype,msgcode:a.msgcode});return a.roleId!=null&&(u.roleId=a.roleId),u}toObject(){let a={};return this.msgtype!=null&&(a.msgtype=this.msgtype),this.msgcode!=null&&(a.msgcode=this.msgcode),this.roleId!=null&&(a.roleId=this.roleId),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_msgtype&&u.writeInt32(1,this.msgtype),this.has_msgcode&&u.writeInt32(2,this.msgcode),this.has_roleId&&this.roleId.length&&u.writeString(3,this.roleId),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new ii;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.msgtype=u.readInt32();break;case 2:b.msgcode=u.readInt32();break;case 3:b.roleId=u.readString();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return ii.deserialize(a)}};Zi=new WeakMap;let l=ii;Qi.CMsgHead=ii;let mt=class mt extends m.Message{constructor(a){super();rt(this,Li,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,Li)),!Array.isArray(a)&&typeof a=="object"&&(this.hallId=a.hallId)}get hallId(){return m.Message.getField(this,1)}set hallId(a){m.Message.setField(this,1,a)}get has_hallId(){return m.Message.getField(this,1)!=null}static fromObject(a){return new mt({hallId:a.hallId})}toObject(){let a={};return this.hallId!=null&&(a.hallId=this.hallId),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_hallId&&this.hallId.length&&u.writeString(1,this.hallId),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new mt;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.hallId=u.readString();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return mt.deserialize(a)}};Li=new WeakMap;let c=mt;Qi.SS_REG_HALL=mt;let ci=class ci extends m.Message{constructor(a){super();rt(this,Vt,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[12,19,21],it(this,Vt)),!Array.isArray(a)&&typeof a=="object"&&(this.roleId=a.roleId,"userName"in a&&a.userName!=null&&(this.userName=a.userName),"icon"in a&&a.icon!=null&&(this.icon=a.icon),"createTime"in a&&a.createTime!=null&&(this.createTime=a.createTime),"score"in a&&a.score!=null&&(this.score=a.score),"country"in a&&a.country!=null&&(this.country=a.country),"club"in a&&a.club!=null&&(this.club=a.club),"code"in a&&a.code!=null&&(this.code=a.code),"walletAddr"in a&&a.walletAddr!=null&&(this.walletAddr=a.walletAddr),"snakeId"in a&&a.snakeId!=null&&(this.snakeId=a.snakeId),"kills"in a&&a.kills!=null&&(this.kills=a.kills),this.items=a.items,"invite"in a&&a.invite!=null&&(this.invite=a.invite),"source"in a&&a.source!=null&&(this.source=a.source),"num"in a&&a.num!=null&&(this.num=a.num),"stage"in a&&a.stage!=null&&(this.stage=a.stage),"invNum"in a&&a.invNum!=null&&(this.invNum=a.invNum),"exp"in a&&a.exp!=null&&(this.exp=a.exp),this.reward=a.reward,"ticketValue"in a&&a.ticketValue!=null&&(this.ticketValue=a.ticketValue),this.coins=a.coins,"lv"in a&&a.lv!=null&&(this.lv=a.lv),"ticketId"in a&&a.ticketId!=null&&(this.ticketId=a.ticketId))}get roleId(){return m.Message.getField(this,1)}set roleId(a){m.Message.setField(this,1,a)}get has_roleId(){return m.Message.getField(this,1)!=null}get userName(){return m.Message.getFieldWithDefault(this,2,"")}set userName(a){m.Message.setField(this,2,a)}get has_userName(){return m.Message.getField(this,2)!=null}get icon(){return m.Message.getFieldWithDefault(this,3,"")}set icon(a){m.Message.setField(this,3,a)}get has_icon(){return m.Message.getField(this,3)!=null}get createTime(){return m.Message.getFieldWithDefault(this,4,0)}set createTime(a){m.Message.setField(this,4,a)}get has_createTime(){return m.Message.getField(this,4)!=null}get score(){return m.Message.getFieldWithDefault(this,5,0)}set score(a){m.Message.setField(this,5,a)}get has_score(){return m.Message.getField(this,5)!=null}get country(){return m.Message.getFieldWithDefault(this,6,0)}set country(a){m.Message.setField(this,6,a)}get has_country(){return m.Message.getField(this,6)!=null}get club(){return m.Message.getFieldWithDefault(this,7,"")}set club(a){m.Message.setField(this,7,a)}get has_club(){return m.Message.getField(this,7)!=null}get code(){return m.Message.getFieldWithDefault(this,8,"")}set code(a){m.Message.setField(this,8,a)}get has_code(){return m.Message.getField(this,8)!=null}get walletAddr(){return m.Message.getFieldWithDefault(this,9,"")}set walletAddr(a){m.Message.setField(this,9,a)}get has_walletAddr(){return m.Message.getField(this,9)!=null}get snakeId(){return m.Message.getFieldWithDefault(this,10,0)}set snakeId(a){m.Message.setField(this,10,a)}get has_snakeId(){return m.Message.getField(this,10)!=null}get kills(){return m.Message.getFieldWithDefault(this,11,0)}set kills(a){m.Message.setField(this,11,a)}get has_kills(){return m.Message.getField(this,11)!=null}get items(){return m.Message.getRepeatedWrapperField(this,d,12)}set items(a){m.Message.setRepeatedWrapperField(this,12,a)}get invite(){return m.Message.getFieldWithDefault(this,13,"")}set invite(a){m.Message.setField(this,13,a)}get has_invite(){return m.Message.getField(this,13)!=null}get source(){return m.Message.getFieldWithDefault(this,14,"")}set source(a){m.Message.setField(this,14,a)}get has_source(){return m.Message.getField(this,14)!=null}get num(){return m.Message.getFieldWithDefault(this,15,0)}set num(a){m.Message.setField(this,15,a)}get has_num(){return m.Message.getField(this,15)!=null}get stage(){return m.Message.getFieldWithDefault(this,16,0)}set stage(a){m.Message.setField(this,16,a)}get has_stage(){return m.Message.getField(this,16)!=null}get invNum(){return m.Message.getFieldWithDefault(this,17,0)}set invNum(a){m.Message.setField(this,17,a)}get has_invNum(){return m.Message.getField(this,17)!=null}get exp(){return m.Message.getFieldWithDefault(this,18,0)}set exp(a){m.Message.setField(this,18,a)}get has_exp(){return m.Message.getField(this,18)!=null}get reward(){return m.Message.getFieldWithDefault(this,19,[])}set reward(a){m.Message.setField(this,19,a)}get ticketValue(){return m.Message.getFieldWithDefault(this,20,0)}set ticketValue(a){m.Message.setField(this,20,a)}get has_ticketValue(){return m.Message.getField(this,20)!=null}get coins(){return m.Message.getRepeatedWrapperField(this,d,21)}set coins(a){m.Message.setRepeatedWrapperField(this,21,a)}get lv(){return m.Message.getFieldWithDefault(this,22,0)}set lv(a){m.Message.setField(this,22,a)}get has_lv(){return m.Message.getField(this,22)!=null}get ticketId(){return m.Message.getFieldWithDefault(this,23,0)}set ticketId(a){m.Message.setField(this,23,a)}get has_ticketId(){return m.Message.getField(this,23)!=null}static fromObject(a){let u=new ci({roleId:a.roleId,items:a.items.map(b=>d.fromObject(b)),reward:a.reward,coins:a.coins.map(b=>d.fromObject(b))});return a.userName!=null&&(u.userName=a.userName),a.icon!=null&&(u.icon=a.icon),a.createTime!=null&&(u.createTime=a.createTime),a.score!=null&&(u.score=a.score),a.country!=null&&(u.country=a.country),a.club!=null&&(u.club=a.club),a.code!=null&&(u.code=a.code),a.walletAddr!=null&&(u.walletAddr=a.walletAddr),a.snakeId!=null&&(u.snakeId=a.snakeId),a.kills!=null&&(u.kills=a.kills),a.invite!=null&&(u.invite=a.invite),a.source!=null&&(u.source=a.source),a.num!=null&&(u.num=a.num),a.stage!=null&&(u.stage=a.stage),a.invNum!=null&&(u.invNum=a.invNum),a.exp!=null&&(u.exp=a.exp),a.ticketValue!=null&&(u.ticketValue=a.ticketValue),a.lv!=null&&(u.lv=a.lv),a.ticketId!=null&&(u.ticketId=a.ticketId),u}toObject(){let a={reward:this.reward};return this.roleId!=null&&(a.roleId=this.roleId),this.userName!=null&&(a.userName=this.userName),this.icon!=null&&(a.icon=this.icon),this.createTime!=null&&(a.createTime=this.createTime),this.score!=null&&(a.score=this.score),this.country!=null&&(a.country=this.country),this.club!=null&&(a.club=this.club),this.code!=null&&(a.code=this.code),this.walletAddr!=null&&(a.walletAddr=this.walletAddr),this.snakeId!=null&&(a.snakeId=this.snakeId),this.kills!=null&&(a.kills=this.kills),this.items!=null&&(a.items=this.items.map(u=>u.toObject())),this.invite!=null&&(a.invite=this.invite),this.source!=null&&(a.source=this.source),this.num!=null&&(a.num=this.num),this.stage!=null&&(a.stage=this.stage),this.invNum!=null&&(a.invNum=this.invNum),this.exp!=null&&(a.exp=this.exp),this.ticketValue!=null&&(a.ticketValue=this.ticketValue),this.coins!=null&&(a.coins=this.coins.map(u=>u.toObject())),this.lv!=null&&(a.lv=this.lv),this.ticketId!=null&&(a.ticketId=this.ticketId),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&u.writeString(1,this.roleId),this.has_userName&&this.userName.length&&u.writeString(2,this.userName),this.has_icon&&this.icon.length&&u.writeString(3,this.icon),this.has_createTime&&u.writeInt64(4,this.createTime),this.has_score&&u.writeInt32(5,this.score),this.has_country&&u.writeInt32(6,this.country),this.has_club&&this.club.length&&u.writeString(7,this.club),this.has_code&&this.code.length&&u.writeString(8,this.code),this.has_walletAddr&&this.walletAddr.length&&u.writeString(9,this.walletAddr),this.has_snakeId&&u.writeInt32(10,this.snakeId),this.has_kills&&u.writeInt32(11,this.kills),this.items.length&&u.writeRepeatedMessage(12,this.items,b=>b.serialize(u)),this.has_invite&&this.invite.length&&u.writeString(13,this.invite),this.has_source&&this.source.length&&u.writeString(14,this.source),this.has_num&&u.writeInt32(15,this.num),this.has_stage&&u.writeInt32(16,this.stage),this.has_invNum&&u.writeInt32(17,this.invNum),this.has_exp&&u.writeInt32(18,this.exp),this.reward.length&&u.writeRepeatedString(19,this.reward),this.has_ticketValue&&u.writeDouble(20,this.ticketValue),this.coins.length&&u.writeRepeatedMessage(21,this.coins,b=>b.serialize(u)),this.has_lv&&u.writeInt32(22,this.lv),this.has_ticketId&&u.writeInt32(23,this.ticketId),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new ci;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.roleId=u.readString();break;case 2:b.userName=u.readString();break;case 3:b.icon=u.readString();break;case 4:b.createTime=u.readInt64();break;case 5:b.score=u.readInt32();break;case 6:b.country=u.readInt32();break;case 7:b.club=u.readString();break;case 8:b.code=u.readString();break;case 9:b.walletAddr=u.readString();break;case 10:b.snakeId=u.readInt32();break;case 11:b.kills=u.readInt32();break;case 12:u.readMessage(b.items,()=>m.Message.addToRepeatedWrapperField(b,12,d.deserialize(u),d));break;case 13:b.invite=u.readString();break;case 14:b.source=u.readString();break;case 15:b.num=u.readInt32();break;case 16:b.stage=u.readInt32();break;case 17:b.invNum=u.readInt32();break;case 18:b.exp=u.readInt32();break;case 19:m.Message.addToRepeatedField(b,19,u.readString());break;case 20:b.ticketValue=u.readDouble();break;case 21:u.readMessage(b.coins,()=>m.Message.addToRepeatedWrapperField(b,21,d.deserialize(u),d));break;case 22:b.lv=u.readInt32();break;case 23:b.ticketId=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return ci.deserialize(a)}};Vt=new WeakMap;let p=ci;Qi.RoleObject=ci;let Mr=class Mr extends m.Message{constructor(a){super();rt(this,or,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,or)),!Array.isArray(a)&&typeof a=="object"&&("itemId"in a&&a.itemId!=null&&(this.itemId=a.itemId),"num"in a&&a.num!=null&&(this.num=a.num),"chainId"in a&&a.chainId!=null&&(this.chainId=a.chainId))}get itemId(){return m.Message.getFieldWithDefault(this,1,0)}set itemId(a){m.Message.setField(this,1,a)}get has_itemId(){return m.Message.getField(this,1)!=null}get num(){return m.Message.getFieldWithDefault(this,2,0)}set num(a){m.Message.setField(this,2,a)}get has_num(){return m.Message.getField(this,2)!=null}get chainId(){return m.Message.getFieldWithDefault(this,3,0)}set chainId(a){m.Message.setField(this,3,a)}get has_chainId(){return m.Message.getField(this,3)!=null}static fromObject(a){let u=new Mr({});return a.itemId!=null&&(u.itemId=a.itemId),a.num!=null&&(u.num=a.num),a.chainId!=null&&(u.chainId=a.chainId),u}toObject(){let a={};return this.itemId!=null&&(a.itemId=this.itemId),this.num!=null&&(a.num=this.num),this.chainId!=null&&(a.chainId=this.chainId),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_itemId&&u.writeInt32(1,this.itemId),this.has_num&&u.writeDouble(2,this.num),this.has_chainId&&u.writeInt32(3,this.chainId),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Mr;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.itemId=u.readInt32();break;case 2:b.num=u.readDouble();break;case 3:b.chainId=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Mr.deserialize(a)}};or=new WeakMap;let d=Mr;Qi.ItemObject=Mr;let P=class P extends m.Message{constructor(a){super();rt(this,Qn,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,Qn)),!Array.isArray(a)&&typeof a=="object"&&(this.icon=a.icon,this.userName=a.userName,this.country=a.country,"walletAddr"in a&&a.walletAddr!=null&&(this.walletAddr=a.walletAddr),"invite"in a&&a.invite!=null&&(this.invite=a.invite),"source"in a&&a.source!=null&&(this.source=a.source))}get icon(){return m.Message.getField(this,1)}set icon(a){m.Message.setField(this,1,a)}get has_icon(){return m.Message.getField(this,1)!=null}get userName(){return m.Message.getField(this,2)}set userName(a){m.Message.setField(this,2,a)}get has_userName(){return m.Message.getField(this,2)!=null}get country(){return m.Message.getField(this,3)}set country(a){m.Message.setField(this,3,a)}get has_country(){return m.Message.getField(this,3)!=null}get walletAddr(){return m.Message.getFieldWithDefault(this,4,"")}set walletAddr(a){m.Message.setField(this,4,a)}get has_walletAddr(){return m.Message.getField(this,4)!=null}get invite(){return m.Message.getFieldWithDefault(this,5,"")}set invite(a){m.Message.setField(this,5,a)}get has_invite(){return m.Message.getField(this,5)!=null}get source(){return m.Message.getFieldWithDefault(this,6,"")}set source(a){m.Message.setField(this,6,a)}get has_source(){return m.Message.getField(this,6)!=null}static fromObject(a){let u=new P({icon:a.icon,userName:a.userName,country:a.country});return a.walletAddr!=null&&(u.walletAddr=a.walletAddr),a.invite!=null&&(u.invite=a.invite),a.source!=null&&(u.source=a.source),u}toObject(){let a={};return this.icon!=null&&(a.icon=this.icon),this.userName!=null&&(a.userName=this.userName),this.country!=null&&(a.country=this.country),this.walletAddr!=null&&(a.walletAddr=this.walletAddr),this.invite!=null&&(a.invite=this.invite),this.source!=null&&(a.source=this.source),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_icon&&this.icon.length&&u.writeString(1,this.icon),this.has_userName&&this.userName.length&&u.writeString(2,this.userName),this.has_country&&u.writeInt32(3,this.country),this.has_walletAddr&&this.walletAddr.length&&u.writeString(4,this.walletAddr),this.has_invite&&this.invite.length&&u.writeString(5,this.invite),this.has_source&&this.source.length&&u.writeString(6,this.source),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new P;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.icon=u.readString();break;case 2:b.userName=u.readString();break;case 3:b.country=u.readInt32();break;case 4:b.walletAddr=u.readString();break;case 5:b.invite=u.readString();break;case 6:b.source=u.readString();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return P.deserialize(a)}};Qn=new WeakMap;let h=P;Qi.CS_USER_REGISTER=P;let C=class C extends m.Message{constructor(a){super();rt(this,x,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,x)),!Array.isArray(a)&&typeof a=="object"&&(this.roleInfo=a.roleInfo)}get roleInfo(){return m.Message.getWrapperField(this,p,1)}set roleInfo(a){m.Message.setWrapperField(this,1,a)}get has_roleInfo(){return m.Message.getField(this,1)!=null}static fromObject(a){return new C({roleInfo:p.fromObject(a.roleInfo)})}toObject(){let a={};return this.roleInfo!=null&&(a.roleInfo=this.roleInfo.toObject()),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_roleInfo&&u.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(u)),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new C;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:u.readMessage(b.roleInfo,()=>b.roleInfo=p.deserialize(u));break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return C.deserialize(a)}};x=new WeakMap;let f=C;Qi.SC_USER_REGISTER=C;let F=class F extends m.Message{constructor(a){super();rt(this,O,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,O)),!Array.isArray(a)&&typeof a=="object"&&(this.roleId=a.roleId,"randomHex"in a&&a.randomHex!=null&&(this.randomHex=a.randomHex),"time"in a&&a.time!=null&&(this.time=a.time),"r"in a&&a.r!=null&&(this.r=a.r),"s"in a&&a.s!=null&&(this.s=a.s),"v"in a&&a.v!=null&&(this.v=a.v))}get roleId(){return m.Message.getField(this,1)}set roleId(a){m.Message.setField(this,1,a)}get has_roleId(){return m.Message.getField(this,1)!=null}get randomHex(){return m.Message.getFieldWithDefault(this,2,"")}set randomHex(a){m.Message.setField(this,2,a)}get has_randomHex(){return m.Message.getField(this,2)!=null}get time(){return m.Message.getFieldWithDefault(this,3,0)}set time(a){m.Message.setField(this,3,a)}get has_time(){return m.Message.getField(this,3)!=null}get r(){return m.Message.getFieldWithDefault(this,4,"")}set r(a){m.Message.setField(this,4,a)}get has_r(){return m.Message.getField(this,4)!=null}get s(){return m.Message.getFieldWithDefault(this,5,"")}set s(a){m.Message.setField(this,5,a)}get has_s(){return m.Message.getField(this,5)!=null}get v(){return m.Message.getFieldWithDefault(this,6,"")}set v(a){m.Message.setField(this,6,a)}get has_v(){return m.Message.getField(this,6)!=null}static fromObject(a){let u=new F({roleId:a.roleId});return a.randomHex!=null&&(u.randomHex=a.randomHex),a.time!=null&&(u.time=a.time),a.r!=null&&(u.r=a.r),a.s!=null&&(u.s=a.s),a.v!=null&&(u.v=a.v),u}toObject(){let a={};return this.roleId!=null&&(a.roleId=this.roleId),this.randomHex!=null&&(a.randomHex=this.randomHex),this.time!=null&&(a.time=this.time),this.r!=null&&(a.r=this.r),this.s!=null&&(a.s=this.s),this.v!=null&&(a.v=this.v),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&u.writeString(1,this.roleId),this.has_randomHex&&this.randomHex.length&&u.writeString(2,this.randomHex),this.has_time&&u.writeInt64(3,this.time),this.has_r&&this.r.length&&u.writeString(4,this.r),this.has_s&&this.s.length&&u.writeString(5,this.s),this.has_v&&this.v.length&&u.writeString(6,this.v),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new F;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.roleId=u.readString();break;case 2:b.randomHex=u.readString();break;case 3:b.time=u.readInt64();break;case 4:b.r=u.readString();break;case 5:b.s=u.readString();break;case 6:b.v=u.readString();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return F.deserialize(a)}};O=new WeakMap;let g=F;Qi.CS_USER_LOGIN=F;let Y=class Y extends m.Message{constructor(a){super();rt(this,k,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,k)),!Array.isArray(a)&&typeof a=="object"&&("roleInfo"in a&&a.roleInfo!=null&&(this.roleInfo=a.roleInfo),"loginToken"in a&&a.loginToken!=null&&(this.loginToken=a.loginToken))}get roleInfo(){return m.Message.getWrapperField(this,p,1)}set roleInfo(a){m.Message.setWrapperField(this,1,a)}get has_roleInfo(){return m.Message.getField(this,1)!=null}get loginToken(){return m.Message.getFieldWithDefault(this,2,"")}set loginToken(a){m.Message.setField(this,2,a)}get has_loginToken(){return m.Message.getField(this,2)!=null}static fromObject(a){let u=new Y({});return a.roleInfo!=null&&(u.roleInfo=p.fromObject(a.roleInfo)),a.loginToken!=null&&(u.loginToken=a.loginToken),u}toObject(){let a={};return this.roleInfo!=null&&(a.roleInfo=this.roleInfo.toObject()),this.loginToken!=null&&(a.loginToken=this.loginToken),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_roleInfo&&u.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(u)),this.has_loginToken&&this.loginToken.length&&u.writeString(2,this.loginToken),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Y;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:u.readMessage(b.roleInfo,()=>b.roleInfo=p.deserialize(u));break;case 2:b.loginToken=u.readString();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Y.deserialize(a)}};k=new WeakMap;let E=Y;Qi.SC_USER_LOGIN=Y;let ae=class ae extends m.Message{constructor(a){super();rt(this,Z,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,Z)),!Array.isArray(a)&&typeof a=="object"&&(this.type=a.type)}get type(){return m.Message.getField(this,1)}set type(a){m.Message.setField(this,1,a)}get has_type(){return m.Message.getField(this,1)!=null}static fromObject(a){return new ae({type:a.type})}toObject(){let a={};return this.type!=null&&(a.type=this.type),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_type&&u.writeInt32(1,this.type),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new ae;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.type=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return ae.deserialize(a)}};Z=new WeakMap;let I=ae;Qi.CS_REQUEST_ROOM_ADDR=ae;let Ne=class Ne extends m.Message{constructor(a){super();rt(this,be,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,be)),!Array.isArray(a)&&typeof a=="object"&&(this.addr=a.addr,"roleInfo"in a&&a.roleInfo!=null&&(this.roleInfo=a.roleInfo))}get addr(){return m.Message.getField(this,1)}set addr(a){m.Message.setField(this,1,a)}get has_addr(){return m.Message.getField(this,1)!=null}get roleInfo(){return m.Message.getWrapperField(this,p,2)}set roleInfo(a){m.Message.setWrapperField(this,2,a)}get has_roleInfo(){return m.Message.getField(this,2)!=null}static fromObject(a){let u=new Ne({addr:a.addr});return a.roleInfo!=null&&(u.roleInfo=p.fromObject(a.roleInfo)),u}toObject(){let a={};return this.addr!=null&&(a.addr=this.addr),this.roleInfo!=null&&(a.roleInfo=this.roleInfo.toObject()),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_addr&&this.addr.length&&u.writeString(1,this.addr),this.has_roleInfo&&u.writeMessage(2,this.roleInfo,()=>this.roleInfo.serialize(u)),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Ne;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.addr=u.readString();break;case 2:u.readMessage(b.roleInfo,()=>b.roleInfo=p.deserialize(u));break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Ne.deserialize(a)}};be=new WeakMap;let _=Ne;Qi.SC_REQUEST_ROOM_ADDR=Ne;let Ee=class Ee extends m.Message{constructor(a){super();rt(this,fe,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,fe)),!Array.isArray(a)&&typeof a=="object"&&("tag"in a&&a.tag!=null&&(this.tag=a.tag),"roleId"in a&&a.roleId!=null&&(this.roleId=a.roleId))}get tag(){return m.Message.getFieldWithDefault(this,1,"")}set tag(a){m.Message.setField(this,1,a)}get has_tag(){return m.Message.getField(this,1)!=null}get roleId(){return m.Message.getFieldWithDefault(this,2,"")}set roleId(a){m.Message.setField(this,2,a)}get has_roleId(){return m.Message.getField(this,2)!=null}static fromObject(a){let u=new Ee({});return a.tag!=null&&(u.tag=a.tag),a.roleId!=null&&(u.roleId=a.roleId),u}toObject(){let a={};return this.tag!=null&&(a.tag=this.tag),this.roleId!=null&&(a.roleId=this.roleId),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_tag&&this.tag.length&&u.writeString(1,this.tag),this.has_roleId&&this.roleId.length&&u.writeString(2,this.roleId),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Ee;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.tag=u.readString();break;case 2:b.roleId=u.readString();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Ee.deserialize(a)}};fe=new WeakMap;let S=Ee;Qi.CS_ENTER_ROOM=Ee;let ue=class ue extends m.Message{constructor(a){super();rt(this,Je,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[1,2],it(this,Je)),!Array.isArray(a)&&typeof a=="object"&&(this.food=a.food,this.players=a.players)}get food(){return m.Message.getRepeatedWrapperField(this,R,1)}set food(a){m.Message.setRepeatedWrapperField(this,1,a)}get players(){return m.Message.getRepeatedWrapperField(this,V,2)}set players(a){m.Message.setRepeatedWrapperField(this,2,a)}static fromObject(a){return new ue({food:a.food.map(b=>R.fromObject(b)),players:a.players.map(b=>V.fromObject(b))})}toObject(){let a={};return this.food!=null&&(a.food=this.food.map(u=>u.toObject())),this.players!=null&&(a.players=this.players.map(u=>u.toObject())),a}serialize(a){let u=a||new m.BinaryWriter;if(this.food.length&&u.writeRepeatedMessage(1,this.food,b=>b.serialize(u)),this.players.length&&u.writeRepeatedMessage(2,this.players,b=>b.serialize(u)),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new ue;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:u.readMessage(b.food,()=>m.Message.addToRepeatedWrapperField(b,1,R.deserialize(u),R));break;case 2:u.readMessage(b.players,()=>m.Message.addToRepeatedWrapperField(b,2,V.deserialize(u),V));break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return ue.deserialize(a)}};Je=new WeakMap;let M=ue;Qi.SC_ENTER_ROOM=ue;let at=class at extends m.Message{constructor(a){super();rt(this,dt,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,dt)),!Array.isArray(a)&&typeof a=="object"&&("unkey"in a&&a.unkey!=null&&(this.unkey=a.unkey),"itemId"in a&&a.itemId!=null&&(this.itemId=a.itemId),"loc"in a&&a.loc!=null&&(this.loc=a.loc))}get unkey(){return m.Message.getFieldWithDefault(this,1,"")}set unkey(a){m.Message.setField(this,1,a)}get has_unkey(){return m.Message.getField(this,1)!=null}get itemId(){return m.Message.getFieldWithDefault(this,2,0)}set itemId(a){m.Message.setField(this,2,a)}get has_itemId(){return m.Message.getField(this,2)!=null}get loc(){return m.Message.getWrapperField(this,K,3)}set loc(a){m.Message.setWrapperField(this,3,a)}get has_loc(){return m.Message.getField(this,3)!=null}static fromObject(a){let u=new at({});return a.unkey!=null&&(u.unkey=a.unkey),a.itemId!=null&&(u.itemId=a.itemId),a.loc!=null&&(u.loc=K.fromObject(a.loc)),u}toObject(){let a={};return this.unkey!=null&&(a.unkey=this.unkey),this.itemId!=null&&(a.itemId=this.itemId),this.loc!=null&&(a.loc=this.loc.toObject()),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_unkey&&this.unkey.length&&u.writeString(1,this.unkey),this.has_itemId&&u.writeInt32(2,this.itemId),this.has_loc&&u.writeMessage(3,this.loc,()=>this.loc.serialize(u)),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new at;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.unkey=u.readString();break;case 2:b.itemId=u.readInt32();break;case 3:u.readMessage(b.loc,()=>b.loc=K.deserialize(u));break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return at.deserialize(a)}};dt=new WeakMap;let R=at;Qi.FoodObject=at;let At=class At extends m.Message{constructor(a){super();rt(this,yt,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[5,10,13],it(this,yt)),!Array.isArray(a)&&typeof a=="object"&&("roleId"in a&&a.roleId!=null&&(this.roleId=a.roleId),"userName"in a&&a.userName!=null&&(this.userName=a.userName),"snakeId"in a&&a.snakeId!=null&&(this.snakeId=a.snakeId),"speed"in a&&a.speed!=null&&(this.speed=a.speed),this.snake=a.snake,"kills"in a&&a.kills!=null&&(this.kills=a.kills),"state"in a&&a.state!=null&&(this.state=a.state),"score"in a&&a.score!=null&&(this.score=a.score),"wdTime"in a&&a.wdTime!=null&&(this.wdTime=a.wdTime),this.eatenIds=a.eatenIds,"dieTime"in a&&a.dieTime!=null&&(this.dieTime=a.dieTime),"revive"in a&&a.revive!=null&&(this.revive=a.revive),this.food=a.food,"direction"in a&&a.direction!=null&&(this.direction=a.direction),"frame"in a&&a.frame!=null&&(this.frame=a.frame),"oprTime"in a&&a.oprTime!=null&&(this.oprTime=a.oprTime),"aimDir"in a&&a.aimDir!=null&&(this.aimDir=a.aimDir),"length"in a&&a.length!=null&&(this.length=a.length),"enterTime"in a&&a.enterTime!=null&&(this.enterTime=a.enterTime),"exp"in a&&a.exp!=null&&(this.exp=a.exp),"result"in a&&a.result!=null&&(this.result=a.result),"oprIndex"in a&&a.oprIndex!=null&&(this.oprIndex=a.oprIndex))}get roleId(){return m.Message.getFieldWithDefault(this,1,"")}set roleId(a){m.Message.setField(this,1,a)}get has_roleId(){return m.Message.getField(this,1)!=null}get userName(){return m.Message.getFieldWithDefault(this,2,"")}set userName(a){m.Message.setField(this,2,a)}get has_userName(){return m.Message.getField(this,2)!=null}get snakeId(){return m.Message.getFieldWithDefault(this,3,0)}set snakeId(a){m.Message.setField(this,3,a)}get has_snakeId(){return m.Message.getField(this,3)!=null}get speed(){return m.Message.getFieldWithDefault(this,4,0)}set speed(a){m.Message.setField(this,4,a)}get has_speed(){return m.Message.getField(this,4)!=null}get snake(){return m.Message.getRepeatedWrapperField(this,H,5)}set snake(a){m.Message.setRepeatedWrapperField(this,5,a)}get kills(){return m.Message.getFieldWithDefault(this,6,0)}set kills(a){m.Message.setField(this,6,a)}get has_kills(){return m.Message.getField(this,6)!=null}get state(){return m.Message.getFieldWithDefault(this,7,!1)}set state(a){m.Message.setField(this,7,a)}get has_state(){return m.Message.getField(this,7)!=null}get score(){return m.Message.getFieldWithDefault(this,8,0)}set score(a){m.Message.setField(this,8,a)}get has_score(){return m.Message.getField(this,8)!=null}get wdTime(){return m.Message.getFieldWithDefault(this,9,0)}set wdTime(a){m.Message.setField(this,9,a)}get has_wdTime(){return m.Message.getField(this,9)!=null}get eatenIds(){return m.Message.getFieldWithDefault(this,10,[])}set eatenIds(a){m.Message.setField(this,10,a)}get dieTime(){return m.Message.getFieldWithDefault(this,11,0)}set dieTime(a){m.Message.setField(this,11,a)}get has_dieTime(){return m.Message.getField(this,11)!=null}get revive(){return m.Message.getFieldWithDefault(this,12,0)}set revive(a){m.Message.setField(this,12,a)}get has_revive(){return m.Message.getField(this,12)!=null}get food(){return m.Message.getRepeatedWrapperField(this,R,13)}set food(a){m.Message.setRepeatedWrapperField(this,13,a)}get direction(){return m.Message.getFieldWithDefault(this,14,0)}set direction(a){m.Message.setField(this,14,a)}get has_direction(){return m.Message.getField(this,14)!=null}get frame(){return m.Message.getFieldWithDefault(this,15,0)}set frame(a){m.Message.setField(this,15,a)}get has_frame(){return m.Message.getField(this,15)!=null}get oprTime(){return m.Message.getFieldWithDefault(this,16,0)}set oprTime(a){m.Message.setField(this,16,a)}get has_oprTime(){return m.Message.getField(this,16)!=null}get aimDir(){return m.Message.getFieldWithDefault(this,17,0)}set aimDir(a){m.Message.setField(this,17,a)}get has_aimDir(){return m.Message.getField(this,17)!=null}get length(){return m.Message.getFieldWithDefault(this,18,0)}set length(a){m.Message.setField(this,18,a)}get has_length(){return m.Message.getField(this,18)!=null}get enterTime(){return m.Message.getFieldWithDefault(this,19,0)}set enterTime(a){m.Message.setField(this,19,a)}get has_enterTime(){return m.Message.getField(this,19)!=null}get exp(){return m.Message.getFieldWithDefault(this,20,0)}set exp(a){m.Message.setField(this,20,a)}get has_exp(){return m.Message.getField(this,20)!=null}get result(){return m.Message.getWrapperField(this,o,21)}set result(a){m.Message.setWrapperField(this,21,a)}get has_result(){return m.Message.getField(this,21)!=null}get oprIndex(){return m.Message.getFieldWithDefault(this,22,0)}set oprIndex(a){m.Message.setField(this,22,a)}get has_oprIndex(){return m.Message.getField(this,22)!=null}static fromObject(a){let u=new At({snake:a.snake.map(b=>H.fromObject(b)),eatenIds:a.eatenIds,food:a.food.map(b=>R.fromObject(b))});return a.roleId!=null&&(u.roleId=a.roleId),a.userName!=null&&(u.userName=a.userName),a.snakeId!=null&&(u.snakeId=a.snakeId),a.speed!=null&&(u.speed=a.speed),a.kills!=null&&(u.kills=a.kills),a.state!=null&&(u.state=a.state),a.score!=null&&(u.score=a.score),a.wdTime!=null&&(u.wdTime=a.wdTime),a.dieTime!=null&&(u.dieTime=a.dieTime),a.revive!=null&&(u.revive=a.revive),a.direction!=null&&(u.direction=a.direction),a.frame!=null&&(u.frame=a.frame),a.oprTime!=null&&(u.oprTime=a.oprTime),a.aimDir!=null&&(u.aimDir=a.aimDir),a.length!=null&&(u.length=a.length),a.enterTime!=null&&(u.enterTime=a.enterTime),a.exp!=null&&(u.exp=a.exp),a.result!=null&&(u.result=o.fromObject(a.result)),a.oprIndex!=null&&(u.oprIndex=a.oprIndex),u}toObject(){let a={eatenIds:this.eatenIds};return this.roleId!=null&&(a.roleId=this.roleId),this.userName!=null&&(a.userName=this.userName),this.snakeId!=null&&(a.snakeId=this.snakeId),this.speed!=null&&(a.speed=this.speed),this.snake!=null&&(a.snake=this.snake.map(u=>u.toObject())),this.kills!=null&&(a.kills=this.kills),this.state!=null&&(a.state=this.state),this.score!=null&&(a.score=this.score),this.wdTime!=null&&(a.wdTime=this.wdTime),this.dieTime!=null&&(a.dieTime=this.dieTime),this.revive!=null&&(a.revive=this.revive),this.food!=null&&(a.food=this.food.map(u=>u.toObject())),this.direction!=null&&(a.direction=this.direction),this.frame!=null&&(a.frame=this.frame),this.oprTime!=null&&(a.oprTime=this.oprTime),this.aimDir!=null&&(a.aimDir=this.aimDir),this.length!=null&&(a.length=this.length),this.enterTime!=null&&(a.enterTime=this.enterTime),this.exp!=null&&(a.exp=this.exp),this.result!=null&&(a.result=this.result.toObject()),this.oprIndex!=null&&(a.oprIndex=this.oprIndex),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&u.writeString(1,this.roleId),this.has_userName&&this.userName.length&&u.writeString(2,this.userName),this.has_snakeId&&u.writeInt32(3,this.snakeId),this.has_speed&&u.writeFloat(4,this.speed),this.snake.length&&u.writeRepeatedMessage(5,this.snake,b=>b.serialize(u)),this.has_kills&&u.writeInt32(6,this.kills),this.has_state&&u.writeBool(7,this.state),this.has_score&&u.writeInt32(8,this.score),this.has_wdTime&&u.writeInt64(9,this.wdTime),this.eatenIds.length&&u.writeRepeatedString(10,this.eatenIds),this.has_dieTime&&u.writeInt64(11,this.dieTime),this.has_revive&&u.writeInt32(12,this.revive),this.food.length&&u.writeRepeatedMessage(13,this.food,b=>b.serialize(u)),this.has_direction&&u.writeFloat(14,this.direction),this.has_frame&&u.writeInt32(15,this.frame),this.has_oprTime&&u.writeInt64(16,this.oprTime),this.has_aimDir&&u.writeFloat(17,this.aimDir),this.has_length&&u.writeInt32(18,this.length),this.has_enterTime&&u.writeInt64(19,this.enterTime),this.has_exp&&u.writeInt32(20,this.exp),this.has_result&&u.writeMessage(21,this.result,()=>this.result.serialize(u)),this.has_oprIndex&&u.writeInt32(22,this.oprIndex),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new At;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.roleId=u.readString();break;case 2:b.userName=u.readString();break;case 3:b.snakeId=u.readInt32();break;case 4:b.speed=u.readFloat();break;case 5:u.readMessage(b.snake,()=>m.Message.addToRepeatedWrapperField(b,5,H.deserialize(u),H));break;case 6:b.kills=u.readInt32();break;case 7:b.state=u.readBool();break;case 8:b.score=u.readInt32();break;case 9:b.wdTime=u.readInt64();break;case 10:m.Message.addToRepeatedField(b,10,u.readString());break;case 11:b.dieTime=u.readInt64();break;case 12:b.revive=u.readInt32();break;case 13:u.readMessage(b.food,()=>m.Message.addToRepeatedWrapperField(b,13,R.deserialize(u),R));break;case 14:b.direction=u.readFloat();break;case 15:b.frame=u.readInt32();break;case 16:b.oprTime=u.readInt64();break;case 17:b.aimDir=u.readFloat();break;case 18:b.length=u.readInt32();break;case 19:b.enterTime=u.readInt64();break;case 20:b.exp=u.readInt32();break;case 21:u.readMessage(b.result,()=>b.result=o.deserialize(u));break;case 22:b.oprIndex=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return At.deserialize(a)}};yt=new WeakMap;let V=At;Qi.PlayerObject=At;let ui=class ui extends m.Message{constructor(a){super();rt(this,Ji,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,Ji)),!Array.isArray(a)&&typeof a=="object"&&"loc"in a&&a.loc!=null&&(this.loc=a.loc)}get loc(){return m.Message.getWrapperField(this,K,2)}set loc(a){m.Message.setWrapperField(this,2,a)}get has_loc(){return m.Message.getField(this,2)!=null}static fromObject(a){let u=new ui({});return a.loc!=null&&(u.loc=K.fromObject(a.loc)),u}toObject(){let a={};return this.loc!=null&&(a.loc=this.loc.toObject()),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_loc&&u.writeMessage(2,this.loc,()=>this.loc.serialize(u)),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new ui;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 2:u.readMessage(b.loc,()=>b.loc=K.deserialize(u));break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return ui.deserialize(a)}};Ji=new WeakMap;let H=ui;Qi.SnakeObject=ui;let An=class An extends m.Message{constructor(a){super();rt(this,Mi,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,Mi)),!Array.isArray(a)&&typeof a=="object"&&("x"in a&&a.x!=null&&(this.x=a.x),"y"in a&&a.y!=null&&(this.y=a.y))}get x(){return m.Message.getFieldWithDefault(this,1,0)}set x(a){m.Message.setField(this,1,a)}get has_x(){return m.Message.getField(this,1)!=null}get y(){return m.Message.getFieldWithDefault(this,2,0)}set y(a){m.Message.setField(this,2,a)}get has_y(){return m.Message.getField(this,2)!=null}static fromObject(a){let u=new An({});return a.x!=null&&(u.x=a.x),a.y!=null&&(u.y=a.y),u}toObject(){let a={};return this.x!=null&&(a.x=this.x),this.y!=null&&(a.y=this.y),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_x&&u.writeDouble(1,this.x),this.has_y&&u.writeDouble(2,this.y),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new An;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.x=u.readDouble();break;case 2:b.y=u.readDouble();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return An.deserialize(a)}};Mi=new WeakMap;let K=An;Qi.PointObject=An;let Dr=class Dr extends m.Message{constructor(a){super();rt(this,Cn,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[9],it(this,Cn)),!Array.isArray(a)&&typeof a=="object"&&("roleId"in a&&a.roleId!=null&&(this.roleId=a.roleId),"opr"in a&&a.opr!=null&&(this.opr=a.opr),"value"in a&&a.value!=null&&(this.value=a.value),"head"in a&&a.head!=null&&(this.head=a.head),"frame"in a&&a.frame!=null&&(this.frame=a.frame),"curDir"in a&&a.curDir!=null&&(this.curDir=a.curDir),"aimDir"in a&&a.aimDir!=null&&(this.aimDir=a.aimDir),"speed"in a&&a.speed!=null&&(this.speed=a.speed),this.snake=a.snake,"oprIndex"in a&&a.oprIndex!=null&&(this.oprIndex=a.oprIndex))}get roleId(){return m.Message.getFieldWithDefault(this,1,"")}set roleId(a){m.Message.setField(this,1,a)}get has_roleId(){return m.Message.getField(this,1)!=null}get opr(){return m.Message.getFieldWithDefault(this,2,0)}set opr(a){m.Message.setField(this,2,a)}get has_opr(){return m.Message.getField(this,2)!=null}get value(){return m.Message.getFieldWithDefault(this,3,0)}set value(a){m.Message.setField(this,3,a)}get has_value(){return m.Message.getField(this,3)!=null}get head(){return m.Message.getWrapperField(this,H,4)}set head(a){m.Message.setWrapperField(this,4,a)}get has_head(){return m.Message.getField(this,4)!=null}get frame(){return m.Message.getFieldWithDefault(this,5,0)}set frame(a){m.Message.setField(this,5,a)}get has_frame(){return m.Message.getField(this,5)!=null}get curDir(){return m.Message.getFieldWithDefault(this,6,0)}set curDir(a){m.Message.setField(this,6,a)}get has_curDir(){return m.Message.getField(this,6)!=null}get aimDir(){return m.Message.getFieldWithDefault(this,7,0)}set aimDir(a){m.Message.setField(this,7,a)}get has_aimDir(){return m.Message.getField(this,7)!=null}get speed(){return m.Message.getFieldWithDefault(this,8,0)}set speed(a){m.Message.setField(this,8,a)}get has_speed(){return m.Message.getField(this,8)!=null}get snake(){return m.Message.getRepeatedWrapperField(this,H,9)}set snake(a){m.Message.setRepeatedWrapperField(this,9,a)}get oprIndex(){return m.Message.getFieldWithDefault(this,10,0)}set oprIndex(a){m.Message.setField(this,10,a)}get has_oprIndex(){return m.Message.getField(this,10)!=null}static fromObject(a){let u=new Dr({snake:a.snake.map(b=>H.fromObject(b))});return a.roleId!=null&&(u.roleId=a.roleId),a.opr!=null&&(u.opr=a.opr),a.value!=null&&(u.value=a.value),a.head!=null&&(u.head=H.fromObject(a.head)),a.frame!=null&&(u.frame=a.frame),a.curDir!=null&&(u.curDir=a.curDir),a.aimDir!=null&&(u.aimDir=a.aimDir),a.speed!=null&&(u.speed=a.speed),a.oprIndex!=null&&(u.oprIndex=a.oprIndex),u}toObject(){let a={};return this.roleId!=null&&(a.roleId=this.roleId),this.opr!=null&&(a.opr=this.opr),this.value!=null&&(a.value=this.value),this.head!=null&&(a.head=this.head.toObject()),this.frame!=null&&(a.frame=this.frame),this.curDir!=null&&(a.curDir=this.curDir),this.aimDir!=null&&(a.aimDir=this.aimDir),this.speed!=null&&(a.speed=this.speed),this.snake!=null&&(a.snake=this.snake.map(u=>u.toObject())),this.oprIndex!=null&&(a.oprIndex=this.oprIndex),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&u.writeString(1,this.roleId),this.has_opr&&u.writeInt32(2,this.opr),this.has_value&&u.writeInt32(3,this.value),this.has_head&&u.writeMessage(4,this.head,()=>this.head.serialize(u)),this.has_frame&&u.writeInt32(5,this.frame),this.has_curDir&&u.writeFloat(6,this.curDir),this.has_aimDir&&u.writeFloat(7,this.aimDir),this.has_speed&&u.writeFloat(8,this.speed),this.snake.length&&u.writeRepeatedMessage(9,this.snake,b=>b.serialize(u)),this.has_oprIndex&&u.writeInt32(10,this.oprIndex),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Dr;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.roleId=u.readString();break;case 2:b.opr=u.readInt32();break;case 3:b.value=u.readInt32();break;case 4:u.readMessage(b.head,()=>b.head=H.deserialize(u));break;case 5:b.frame=u.readInt32();break;case 6:b.curDir=u.readFloat();break;case 7:b.aimDir=u.readFloat();break;case 8:b.speed=u.readFloat();break;case 9:u.readMessage(b.snake,()=>m.Message.addToRepeatedWrapperField(b,9,H.deserialize(u),H));break;case 10:b.oprIndex=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Dr.deserialize(a)}};Cn=new WeakMap;let q=Dr;Qi.CS_PLAYER_OPR=Dr;let zs=class zs extends m.Message{constructor(a){super();rt(this,Rn,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[1],it(this,Rn)),!Array.isArray(a)&&typeof a=="object"&&(this.players=a.players,"frame"in a&&a.frame!=null&&(this.frame=a.frame))}get players(){return m.Message.getRepeatedWrapperField(this,V,1)}set players(a){m.Message.setRepeatedWrapperField(this,1,a)}get frame(){return m.Message.getFieldWithDefault(this,2,0)}set frame(a){m.Message.setField(this,2,a)}get has_frame(){return m.Message.getField(this,2)!=null}static fromObject(a){let u=new zs({players:a.players.map(b=>V.fromObject(b))});return a.frame!=null&&(u.frame=a.frame),u}toObject(){let a={};return this.players!=null&&(a.players=this.players.map(u=>u.toObject())),this.frame!=null&&(a.frame=this.frame),a}serialize(a){let u=a||new m.BinaryWriter;if(this.players.length&&u.writeRepeatedMessage(1,this.players,b=>b.serialize(u)),this.has_frame&&u.writeInt32(2,this.frame),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new zs;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:u.readMessage(b.players,()=>m.Message.addToRepeatedWrapperField(b,1,V.deserialize(u),V));break;case 2:b.frame=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return zs.deserialize(a)}};Rn=new WeakMap;let ce=zs;Qi.SC_PLAYER_STATE=zs;let ml=class ml extends m.Message{constructor(a){super();rt(this,Qc,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[1],it(this,Qc)),!Array.isArray(a)&&typeof a=="object"&&(this.food=a.food,"frame"in a&&a.frame!=null&&(this.frame=a.frame))}get food(){return m.Message.getRepeatedWrapperField(this,R,1)}set food(a){m.Message.setRepeatedWrapperField(this,1,a)}get frame(){return m.Message.getFieldWithDefault(this,2,0)}set frame(a){m.Message.setField(this,2,a)}get has_frame(){return m.Message.getField(this,2)!=null}static fromObject(a){let u=new ml({food:a.food.map(b=>R.fromObject(b))});return a.frame!=null&&(u.frame=a.frame),u}toObject(){let a={};return this.food!=null&&(a.food=this.food.map(u=>u.toObject())),this.frame!=null&&(a.frame=this.frame),a}serialize(a){let u=a||new m.BinaryWriter;if(this.food.length&&u.writeRepeatedMessage(1,this.food,b=>b.serialize(u)),this.has_frame&&u.writeInt32(2,this.frame),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new ml;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:u.readMessage(b.food,()=>m.Message.addToRepeatedWrapperField(b,1,R.deserialize(u),R));break;case 2:b.frame=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return ml.deserialize(a)}};Qc=new WeakMap;let Q=ml;Qi.SC_GEN_FOOD=ml;let dl=class dl extends m.Message{constructor(a){super();rt(this,Zc,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,Zc)),!Array.isArray(a)&&typeof a=="object"&&"players"in a&&a.players!=null&&(this.players=a.players)}get players(){return m.Message.getWrapperField(this,V,2)}set players(a){m.Message.setWrapperField(this,2,a)}get has_players(){return m.Message.getField(this,2)!=null}static fromObject(a){let u=new dl({});return a.players!=null&&(u.players=V.fromObject(a.players)),u}toObject(){let a={};return this.players!=null&&(a.players=this.players.toObject()),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_players&&u.writeMessage(2,this.players,()=>this.players.serialize(u)),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new dl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 2:u.readMessage(b.players,()=>b.players=V.deserialize(u));break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return dl.deserialize(a)}};Zc=new WeakMap;let ke=dl;Qi.SS_NOTICE_ENTER=dl;let hl=class hl extends m.Message{constructor(a){super();rt(this,Jc,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[8,9],it(this,Jc)),!Array.isArray(a)&&typeof a=="object"&&("res"in a&&a.res!=null&&(this.res=a.res),"roleId"in a&&a.roleId!=null&&(this.roleId=a.roleId),"rank"in a&&a.rank!=null&&(this.rank=a.rank),"score"in a&&a.score!=null&&(this.score=a.score),"kills"in a&&a.kills!=null&&(this.kills=a.kills),"length"in a&&a.length!=null&&(this.length=a.length),"alive"in a&&a.alive!=null&&(this.alive=a.alive),this.items=a.items,this.token=a.token)}get res(){return m.Message.getFieldWithDefault(this,1,!1)}set res(a){m.Message.setField(this,1,a)}get has_res(){return m.Message.getField(this,1)!=null}get roleId(){return m.Message.getFieldWithDefault(this,2,"")}set roleId(a){m.Message.setField(this,2,a)}get has_roleId(){return m.Message.getField(this,2)!=null}get rank(){return m.Message.getFieldWithDefault(this,3,0)}set rank(a){m.Message.setField(this,3,a)}get has_rank(){return m.Message.getField(this,3)!=null}get score(){return m.Message.getFieldWithDefault(this,4,0)}set score(a){m.Message.setField(this,4,a)}get has_score(){return m.Message.getField(this,4)!=null}get kills(){return m.Message.getFieldWithDefault(this,5,0)}set kills(a){m.Message.setField(this,5,a)}get has_kills(){return m.Message.getField(this,5)!=null}get length(){return m.Message.getFieldWithDefault(this,6,0)}set length(a){m.Message.setField(this,6,a)}get has_length(){return m.Message.getField(this,6)!=null}get alive(){return m.Message.getFieldWithDefault(this,7,0)}set alive(a){m.Message.setField(this,7,a)}get has_alive(){return m.Message.getField(this,7)!=null}get items(){return m.Message.getRepeatedWrapperField(this,d,8)}set items(a){m.Message.setRepeatedWrapperField(this,8,a)}get token(){return m.Message.getFieldWithDefault(this,9,[])}set token(a){m.Message.setField(this,9,a)}static fromObject(a){let u=new hl({items:a.items.map(b=>d.fromObject(b)),token:a.token});return a.res!=null&&(u.res=a.res),a.roleId!=null&&(u.roleId=a.roleId),a.rank!=null&&(u.rank=a.rank),a.score!=null&&(u.score=a.score),a.kills!=null&&(u.kills=a.kills),a.length!=null&&(u.length=a.length),a.alive!=null&&(u.alive=a.alive),u}toObject(){let a={token:this.token};return this.res!=null&&(a.res=this.res),this.roleId!=null&&(a.roleId=this.roleId),this.rank!=null&&(a.rank=this.rank),this.score!=null&&(a.score=this.score),this.kills!=null&&(a.kills=this.kills),this.length!=null&&(a.length=this.length),this.alive!=null&&(a.alive=this.alive),this.items!=null&&(a.items=this.items.map(u=>u.toObject())),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_res&&u.writeBool(1,this.res),this.has_roleId&&this.roleId.length&&u.writeString(2,this.roleId),this.has_rank&&u.writeInt32(3,this.rank),this.has_score&&u.writeInt32(4,this.score),this.has_kills&&u.writeInt32(5,this.kills),this.has_length&&u.writeInt32(6,this.length),this.has_alive&&u.writeInt32(7,this.alive),this.items.length&&u.writeRepeatedMessage(8,this.items,b=>b.serialize(u)),this.token.length&&u.writeRepeatedString(9,this.token),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new hl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.res=u.readBool();break;case 2:b.roleId=u.readString();break;case 3:b.rank=u.readInt32();break;case 4:b.score=u.readInt32();break;case 5:b.kills=u.readInt32();break;case 6:b.length=u.readInt32();break;case 7:b.alive=u.readInt32();break;case 8:u.readMessage(b.items,()=>m.Message.addToRepeatedWrapperField(b,8,d.deserialize(u),d));break;case 9:m.Message.addToRepeatedField(b,9,u.readString());break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return hl.deserialize(a)}};Jc=new WeakMap;let ve=hl;Qi.SC_BATTLE_END=hl;let fl=class fl extends m.Message{constructor(a){super();rt(this,eu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[1],it(this,eu)),!Array.isArray(a)&&typeof a=="object"&&(this.fid=a.fid,"head"in a&&a.head!=null&&(this.head=a.head),this.roleId=a.roleId,"frame"in a&&a.frame!=null&&(this.frame=a.frame))}get fid(){return m.Message.getFieldWithDefault(this,1,[])}set fid(a){m.Message.setField(this,1,a)}get head(){return m.Message.getWrapperField(this,H,2)}set head(a){m.Message.setWrapperField(this,2,a)}get has_head(){return m.Message.getField(this,2)!=null}get roleId(){return m.Message.getField(this,3)}set roleId(a){m.Message.setField(this,3,a)}get has_roleId(){return m.Message.getField(this,3)!=null}get frame(){return m.Message.getFieldWithDefault(this,4,0)}set frame(a){m.Message.setField(this,4,a)}get has_frame(){return m.Message.getField(this,4)!=null}static fromObject(a){let u=new fl({fid:a.fid,roleId:a.roleId});return a.head!=null&&(u.head=H.fromObject(a.head)),a.frame!=null&&(u.frame=a.frame),u}toObject(){let a={fid:this.fid};return this.head!=null&&(a.head=this.head.toObject()),this.roleId!=null&&(a.roleId=this.roleId),this.frame!=null&&(a.frame=this.frame),a}serialize(a){let u=a||new m.BinaryWriter;if(this.fid.length&&u.writeRepeatedString(1,this.fid),this.has_head&&u.writeMessage(2,this.head,()=>this.head.serialize(u)),this.has_roleId&&this.roleId.length&&u.writeString(3,this.roleId),this.has_frame&&u.writeInt32(4,this.frame),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new fl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:m.Message.addToRepeatedField(b,1,u.readString());break;case 2:u.readMessage(b.head,()=>b.head=H.deserialize(u));break;case 3:b.roleId=u.readString();break;case 4:b.frame=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return fl.deserialize(a)}};eu=new WeakMap;let W=fl;Qi.CS_EAT_FOOD=fl;let gl=class gl extends m.Message{constructor(a){super();rt(this,tu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[1,7,11],it(this,tu)),!Array.isArray(a)&&typeof a=="object"&&(this.fid=a.fid,"head"in a&&a.head!=null&&(this.head=a.head),"frame"in a&&a.frame!=null&&(this.frame=a.frame),"score"in a&&a.score!=null&&(this.score=a.score),"lenght"in a&&a.lenght!=null&&(this.lenght=a.lenght),this.roleId=a.roleId,this.remain=a.remain,"curDir"in a&&a.curDir!=null&&(this.curDir=a.curDir),"aimDir"in a&&a.aimDir!=null&&(this.aimDir=a.aimDir),"speed"in a&&a.speed!=null&&(this.speed=a.speed),this.snake=a.snake)}get fid(){return m.Message.getFieldWithDefault(this,1,[])}set fid(a){m.Message.setField(this,1,a)}get head(){return m.Message.getWrapperField(this,H,2)}set head(a){m.Message.setWrapperField(this,2,a)}get has_head(){return m.Message.getField(this,2)!=null}get frame(){return m.Message.getFieldWithDefault(this,3,0)}set frame(a){m.Message.setField(this,3,a)}get has_frame(){return m.Message.getField(this,3)!=null}get score(){return m.Message.getFieldWithDefault(this,4,0)}set score(a){m.Message.setField(this,4,a)}get has_score(){return m.Message.getField(this,4)!=null}get lenght(){return m.Message.getFieldWithDefault(this,5,0)}set lenght(a){m.Message.setField(this,5,a)}get has_lenght(){return m.Message.getField(this,5)!=null}get roleId(){return m.Message.getField(this,6)}set roleId(a){m.Message.setField(this,6,a)}get has_roleId(){return m.Message.getField(this,6)!=null}get remain(){return m.Message.getFieldWithDefault(this,7,[])}set remain(a){m.Message.setField(this,7,a)}get curDir(){return m.Message.getFieldWithDefault(this,8,0)}set curDir(a){m.Message.setField(this,8,a)}get has_curDir(){return m.Message.getField(this,8)!=null}get aimDir(){return m.Message.getFieldWithDefault(this,9,0)}set aimDir(a){m.Message.setField(this,9,a)}get has_aimDir(){return m.Message.getField(this,9)!=null}get speed(){return m.Message.getFieldWithDefault(this,10,0)}set speed(a){m.Message.setField(this,10,a)}get has_speed(){return m.Message.getField(this,10)!=null}get snake(){return m.Message.getRepeatedWrapperField(this,H,11)}set snake(a){m.Message.setRepeatedWrapperField(this,11,a)}static fromObject(a){let u=new gl({fid:a.fid,roleId:a.roleId,remain:a.remain,snake:a.snake.map(b=>H.fromObject(b))});return a.head!=null&&(u.head=H.fromObject(a.head)),a.frame!=null&&(u.frame=a.frame),a.score!=null&&(u.score=a.score),a.lenght!=null&&(u.lenght=a.lenght),a.curDir!=null&&(u.curDir=a.curDir),a.aimDir!=null&&(u.aimDir=a.aimDir),a.speed!=null&&(u.speed=a.speed),u}toObject(){let a={fid:this.fid,remain:this.remain};return this.head!=null&&(a.head=this.head.toObject()),this.frame!=null&&(a.frame=this.frame),this.score!=null&&(a.score=this.score),this.lenght!=null&&(a.lenght=this.lenght),this.roleId!=null&&(a.roleId=this.roleId),this.curDir!=null&&(a.curDir=this.curDir),this.aimDir!=null&&(a.aimDir=this.aimDir),this.speed!=null&&(a.speed=this.speed),this.snake!=null&&(a.snake=this.snake.map(u=>u.toObject())),a}serialize(a){let u=a||new m.BinaryWriter;if(this.fid.length&&u.writeRepeatedString(1,this.fid),this.has_head&&u.writeMessage(2,this.head,()=>this.head.serialize(u)),this.has_frame&&u.writeInt32(3,this.frame),this.has_score&&u.writeInt32(4,this.score),this.has_lenght&&u.writeInt32(5,this.lenght),this.has_roleId&&this.roleId.length&&u.writeString(6,this.roleId),this.remain.length&&u.writeRepeatedString(7,this.remain),this.has_curDir&&u.writeFloat(8,this.curDir),this.has_aimDir&&u.writeFloat(9,this.aimDir),this.has_speed&&u.writeFloat(10,this.speed),this.snake.length&&u.writeRepeatedMessage(11,this.snake,b=>b.serialize(u)),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new gl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:m.Message.addToRepeatedField(b,1,u.readString());break;case 2:u.readMessage(b.head,()=>b.head=H.deserialize(u));break;case 3:b.frame=u.readInt32();break;case 4:b.score=u.readInt32();break;case 5:b.lenght=u.readInt32();break;case 6:b.roleId=u.readString();break;case 7:m.Message.addToRepeatedField(b,7,u.readString());break;case 8:b.curDir=u.readFloat();break;case 9:b.aimDir=u.readFloat();break;case 10:b.speed=u.readFloat();break;case 11:u.readMessage(b.snake,()=>m.Message.addToRepeatedWrapperField(b,11,H.deserialize(u),H));break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return gl.deserialize(a)}};tu=new WeakMap;let ut=gl;Qi.SC_EAT_FOOD=gl;let bl=class bl extends m.Message{constructor(a){super();rt(this,iu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,iu)),!Array.isArray(a)&&typeof a=="object"&&("target"in a&&a.target!=null&&(this.target=a.target),"head"in a&&a.head!=null&&(this.head=a.head),"frame"in a&&a.frame!=null&&(this.frame=a.frame),"body"in a&&a.body!=null&&(this.body=a.body))}get target(){return m.Message.getFieldWithDefault(this,1,"")}set target(a){m.Message.setField(this,1,a)}get has_target(){return m.Message.getField(this,1)!=null}get head(){return m.Message.getWrapperField(this,H,2)}set head(a){m.Message.setWrapperField(this,2,a)}get has_head(){return m.Message.getField(this,2)!=null}get frame(){return m.Message.getFieldWithDefault(this,3,0)}set frame(a){m.Message.setField(this,3,a)}get has_frame(){return m.Message.getField(this,3)!=null}get body(){return m.Message.getFieldWithDefault(this,4,!1)}set body(a){m.Message.setField(this,4,a)}get has_body(){return m.Message.getField(this,4)!=null}static fromObject(a){let u=new bl({});return a.target!=null&&(u.target=a.target),a.head!=null&&(u.head=H.fromObject(a.head)),a.frame!=null&&(u.frame=a.frame),a.body!=null&&(u.body=a.body),u}toObject(){let a={};return this.target!=null&&(a.target=this.target),this.head!=null&&(a.head=this.head.toObject()),this.frame!=null&&(a.frame=this.frame),this.body!=null&&(a.body=this.body),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_target&&this.target.length&&u.writeString(1,this.target),this.has_head&&u.writeMessage(2,this.head,()=>this.head.serialize(u)),this.has_frame&&u.writeInt32(3,this.frame),this.has_body&&u.writeBool(4,this.body),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new bl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.target=u.readString();break;case 2:u.readMessage(b.head,()=>b.head=H.deserialize(u));break;case 3:b.frame=u.readInt32();break;case 4:b.body=u.readBool();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return bl.deserialize(a)}};iu=new WeakMap;let le=bl;Qi.CS_PLAYER_COLLISION=bl;let yl=class yl extends m.Message{constructor(a){super();rt(this,ru,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[4,11],it(this,ru)),!Array.isArray(a)&&typeof a=="object"&&("roleId"in a&&a.roleId!=null&&(this.roleId=a.roleId),"head"in a&&a.head!=null&&(this.head=a.head),this.food=a.food,"taret"in a&&a.taret!=null&&(this.taret=a.taret),"frame"in a&&a.frame!=null&&(this.frame=a.frame),"curDir"in a&&a.curDir!=null&&(this.curDir=a.curDir),"aimDir"in a&&a.aimDir!=null&&(this.aimDir=a.aimDir),"speed"in a&&a.speed!=null&&(this.speed=a.speed),"die"in a&&a.die!=null&&(this.die=a.die),this.snake=a.snake)}get roleId(){return m.Message.getFieldWithDefault(this,1,"")}set roleId(a){m.Message.setField(this,1,a)}get has_roleId(){return m.Message.getField(this,1)!=null}get head(){return m.Message.getWrapperField(this,H,2)}set head(a){m.Message.setWrapperField(this,2,a)}get has_head(){return m.Message.getField(this,2)!=null}get food(){return m.Message.getRepeatedWrapperField(this,R,4)}set food(a){m.Message.setRepeatedWrapperField(this,4,a)}get taret(){return m.Message.getFieldWithDefault(this,5,"")}set taret(a){m.Message.setField(this,5,a)}get has_taret(){return m.Message.getField(this,5)!=null}get frame(){return m.Message.getFieldWithDefault(this,6,0)}set frame(a){m.Message.setField(this,6,a)}get has_frame(){return m.Message.getField(this,6)!=null}get curDir(){return m.Message.getFieldWithDefault(this,7,0)}set curDir(a){m.Message.setField(this,7,a)}get has_curDir(){return m.Message.getField(this,7)!=null}get aimDir(){return m.Message.getFieldWithDefault(this,8,0)}set aimDir(a){m.Message.setField(this,8,a)}get has_aimDir(){return m.Message.getField(this,8)!=null}get speed(){return m.Message.getFieldWithDefault(this,9,0)}set speed(a){m.Message.setField(this,9,a)}get has_speed(){return m.Message.getField(this,9)!=null}get die(){return m.Message.getFieldWithDefault(this,10,"")}set die(a){m.Message.setField(this,10,a)}get has_die(){return m.Message.getField(this,10)!=null}get snake(){return m.Message.getRepeatedWrapperField(this,H,11)}set snake(a){m.Message.setRepeatedWrapperField(this,11,a)}static fromObject(a){let u=new yl({food:a.food.map(b=>R.fromObject(b)),snake:a.snake.map(b=>H.fromObject(b))});return a.roleId!=null&&(u.roleId=a.roleId),a.head!=null&&(u.head=H.fromObject(a.head)),a.taret!=null&&(u.taret=a.taret),a.frame!=null&&(u.frame=a.frame),a.curDir!=null&&(u.curDir=a.curDir),a.aimDir!=null&&(u.aimDir=a.aimDir),a.speed!=null&&(u.speed=a.speed),a.die!=null&&(u.die=a.die),u}toObject(){let a={};return this.roleId!=null&&(a.roleId=this.roleId),this.head!=null&&(a.head=this.head.toObject()),this.food!=null&&(a.food=this.food.map(u=>u.toObject())),this.taret!=null&&(a.taret=this.taret),this.frame!=null&&(a.frame=this.frame),this.curDir!=null&&(a.curDir=this.curDir),this.aimDir!=null&&(a.aimDir=this.aimDir),this.speed!=null&&(a.speed=this.speed),this.die!=null&&(a.die=this.die),this.snake!=null&&(a.snake=this.snake.map(u=>u.toObject())),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&u.writeString(1,this.roleId),this.has_head&&u.writeMessage(2,this.head,()=>this.head.serialize(u)),this.food.length&&u.writeRepeatedMessage(4,this.food,b=>b.serialize(u)),this.has_taret&&this.taret.length&&u.writeString(5,this.taret),this.has_frame&&u.writeInt32(6,this.frame),this.has_curDir&&u.writeFloat(7,this.curDir),this.has_aimDir&&u.writeFloat(8,this.aimDir),this.has_speed&&u.writeFloat(9,this.speed),this.has_die&&this.die.length&&u.writeString(10,this.die),this.snake.length&&u.writeRepeatedMessage(11,this.snake,b=>b.serialize(u)),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new yl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.roleId=u.readString();break;case 2:u.readMessage(b.head,()=>b.head=H.deserialize(u));break;case 4:u.readMessage(b.food,()=>m.Message.addToRepeatedWrapperField(b,4,R.deserialize(u),R));break;case 5:b.taret=u.readString();break;case 6:b.frame=u.readInt32();break;case 7:b.curDir=u.readFloat();break;case 8:b.aimDir=u.readFloat();break;case 9:b.speed=u.readFloat();break;case 10:b.die=u.readString();break;case 11:u.readMessage(b.snake,()=>m.Message.addToRepeatedWrapperField(b,11,H.deserialize(u),H));break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return yl.deserialize(a)}};ru=new WeakMap;let Se=yl;Qi.SC_PLAYER_COLLISION=yl;let _l=class _l extends m.Message{constructor(a){super();rt(this,nu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,nu)),!Array.isArray(a)&&typeof a=="object"&&"time"in a&&a.time!=null&&(this.time=a.time)}get time(){return m.Message.getFieldWithDefault(this,1,0)}set time(a){m.Message.setField(this,1,a)}get has_time(){return m.Message.getField(this,1)!=null}static fromObject(a){let u=new _l({});return a.time!=null&&(u.time=a.time),u}toObject(){let a={};return this.time!=null&&(a.time=this.time),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_time&&u.writeInt64(1,this.time),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new _l;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.time=u.readInt64();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return _l.deserialize(a)}};nu=new WeakMap;let we=_l;Qi.SC_REQUEST_SERVER_TIME=_l;let xl=class xl extends m.Message{constructor(a){super();rt(this,su,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,su)),!Array.isArray(a)&&typeof a=="object"&&(this.roleId=a.roleId)}get roleId(){return m.Message.getField(this,1)}set roleId(a){m.Message.setField(this,1,a)}get has_roleId(){return m.Message.getField(this,1)!=null}static fromObject(a){return new xl({roleId:a.roleId})}toObject(){let a={};return this.roleId!=null&&(a.roleId=this.roleId),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&u.writeString(1,this.roleId),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new xl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.roleId=u.readString();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return xl.deserialize(a)}};su=new WeakMap;let D=xl;Qi.CS_REQUEST_ROOM_DATA=xl;let vl=class vl extends m.Message{constructor(a){super();rt(this,au,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[1,2],it(this,au)),!Array.isArray(a)&&typeof a=="object"&&(this.food=a.food,this.players=a.players)}get food(){return m.Message.getRepeatedWrapperField(this,R,1)}set food(a){m.Message.setRepeatedWrapperField(this,1,a)}get players(){return m.Message.getRepeatedWrapperField(this,V,2)}set players(a){m.Message.setRepeatedWrapperField(this,2,a)}static fromObject(a){return new vl({food:a.food.map(b=>R.fromObject(b)),players:a.players.map(b=>V.fromObject(b))})}toObject(){let a={};return this.food!=null&&(a.food=this.food.map(u=>u.toObject())),this.players!=null&&(a.players=this.players.map(u=>u.toObject())),a}serialize(a){let u=a||new m.BinaryWriter;if(this.food.length&&u.writeRepeatedMessage(1,this.food,b=>b.serialize(u)),this.players.length&&u.writeRepeatedMessage(2,this.players,b=>b.serialize(u)),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new vl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:u.readMessage(b.food,()=>m.Message.addToRepeatedWrapperField(b,1,R.deserialize(u),R));break;case 2:u.readMessage(b.players,()=>m.Message.addToRepeatedWrapperField(b,2,V.deserialize(u),V));break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return vl.deserialize(a)}};au=new WeakMap;let Ge=vl;Qi.SC_REQUEST_ROOM_DATA=vl;let wl=class wl extends m.Message{constructor(a){super();rt(this,ou,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[1],it(this,ou)),!Array.isArray(a)&&typeof a=="object"&&(this.info=a.info)}get info(){return m.Message.getFieldWithDefault(this,1,[])}set info(a){m.Message.setField(this,1,a)}static fromObject(a){return new wl({info:a.info})}toObject(){return{info:this.info}}serialize(a){let u=a||new m.BinaryWriter;if(this.info.length&&u.writeRepeatedString(1,this.info),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new wl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:m.Message.addToRepeatedField(b,1,u.readString());break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return wl.deserialize(a)}};ou=new WeakMap;let ge=wl;Qi.SC_INVITE_LIST=wl;let Ll=class Ll extends m.Message{constructor(a){super();rt(this,lu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,lu)),!Array.isArray(a)&&typeof a=="object"&&(this.roleId=a.roleId)}get roleId(){return m.Message.getField(this,1)}set roleId(a){m.Message.setField(this,1,a)}get has_roleId(){return m.Message.getField(this,1)!=null}static fromObject(a){return new Ll({roleId:a.roleId})}toObject(){let a={};return this.roleId!=null&&(a.roleId=this.roleId),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&u.writeString(1,this.roleId),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Ll;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.roleId=u.readString();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Ll.deserialize(a)}};lu=new WeakMap;let Ze=Ll;Qi.CS_REQUEST_INFO=Ll;let Il=class Il extends m.Message{constructor(a){super();rt(this,cu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,cu)),!Array.isArray(a)&&typeof a=="object"&&(this.roleInfo=a.roleInfo)}get roleInfo(){return m.Message.getWrapperField(this,p,1)}set roleInfo(a){m.Message.setWrapperField(this,1,a)}get has_roleInfo(){return m.Message.getField(this,1)!=null}static fromObject(a){return new Il({roleInfo:p.fromObject(a.roleInfo)})}toObject(){let a={};return this.roleInfo!=null&&(a.roleInfo=this.roleInfo.toObject()),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_roleInfo&&u.writeMessage(1,this.roleInfo,()=>this.roleInfo.serialize(u)),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Il;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:u.readMessage(b.roleInfo,()=>b.roleInfo=p.deserialize(u));break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Il.deserialize(a)}};cu=new WeakMap;let tt=Il;Qi.SC_REQUEST_INFO=Il;let El=class El extends m.Message{constructor(a){super();rt(this,uu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,uu)),!Array.isArray(a)&&typeof a=="object"&&(this.id=a.id)}get id(){return m.Message.getField(this,1)}set id(a){m.Message.setField(this,1,a)}get has_id(){return m.Message.getField(this,1)!=null}static fromObject(a){return new El({id:a.id})}toObject(){let a={};return this.id!=null&&(a.id=this.id),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_id&&u.writeInt32(1,this.id),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new El;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.id=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return El.deserialize(a)}};uu=new WeakMap;let jt=El;Qi.CS_SHOP_BUY=El;let Sl=class Sl extends m.Message{constructor(a){super();rt(this,pu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[1,2],it(this,pu)),!Array.isArray(a)&&typeof a=="object"&&(this.cost=a.cost,this.items=a.items)}get cost(){return m.Message.getRepeatedWrapperField(this,d,1)}set cost(a){m.Message.setRepeatedWrapperField(this,1,a)}get items(){return m.Message.getRepeatedWrapperField(this,d,2)}set items(a){m.Message.setRepeatedWrapperField(this,2,a)}static fromObject(a){return new Sl({cost:a.cost.map(b=>d.fromObject(b)),items:a.items.map(b=>d.fromObject(b))})}toObject(){let a={};return this.cost!=null&&(a.cost=this.cost.map(u=>u.toObject())),this.items!=null&&(a.items=this.items.map(u=>u.toObject())),a}serialize(a){let u=a||new m.BinaryWriter;if(this.cost.length&&u.writeRepeatedMessage(1,this.cost,b=>b.serialize(u)),this.items.length&&u.writeRepeatedMessage(2,this.items,b=>b.serialize(u)),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Sl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:u.readMessage(b.cost,()=>m.Message.addToRepeatedWrapperField(b,1,d.deserialize(u),d));break;case 2:u.readMessage(b.items,()=>m.Message.addToRepeatedWrapperField(b,2,d.deserialize(u),d));break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Sl.deserialize(a)}};pu=new WeakMap;let wt=Sl;Qi.SC_SHOP_BUY=Sl;let Tl=class Tl extends m.Message{constructor(a){super();rt(this,mu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[1],it(this,mu)),!Array.isArray(a)&&typeof a=="object"&&(this.msgList=a.msgList,this.frame=a.frame)}get msgList(){return m.Message.getRepeatedWrapperField(this,o,1)}set msgList(a){m.Message.setRepeatedWrapperField(this,1,a)}get frame(){return m.Message.getField(this,2)}set frame(a){m.Message.setField(this,2,a)}get has_frame(){return m.Message.getField(this,2)!=null}static fromObject(a){return new Tl({msgList:a.msgList.map(b=>o.fromObject(b)),frame:a.frame})}toObject(){let a={};return this.msgList!=null&&(a.msgList=this.msgList.map(u=>u.toObject())),this.frame!=null&&(a.frame=this.frame),a}serialize(a){let u=a||new m.BinaryWriter;if(this.msgList.length&&u.writeRepeatedMessage(1,this.msgList,b=>b.serialize(u)),this.has_frame&&u.writeInt32(2,this.frame),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Tl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:u.readMessage(b.msgList,()=>m.Message.addToRepeatedWrapperField(b,1,o.deserialize(u),o));break;case 2:b.frame=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Tl.deserialize(a)}};mu=new WeakMap;let st=Tl;Qi.SC_PUSH=Tl;let kl=class kl extends m.Message{constructor(a){super();rt(this,du,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[1],it(this,du)),!Array.isArray(a)&&typeof a=="object"&&(this.token=a.token)}get token(){return m.Message.getFieldWithDefault(this,1,[])}set token(a){m.Message.setField(this,1,a)}static fromObject(a){return new kl({token:a.token})}toObject(){return{token:this.token}}serialize(a){let u=a||new m.BinaryWriter;if(this.token.length&&u.writeRepeatedString(1,this.token),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new kl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:m.Message.addToRepeatedField(b,1,u.readString());break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return kl.deserialize(a)}};du=new WeakMap;let vi=kl;Qi.SC_QUERY_TOKEN=kl;let Al=class Al extends m.Message{constructor(a){super();rt(this,hu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,hu)),!Array.isArray(a)&&typeof a=="object"&&(this.roleId=a.roleId)}get roleId(){return m.Message.getField(this,1)}set roleId(a){m.Message.setField(this,1,a)}get has_roleId(){return m.Message.getField(this,1)!=null}static fromObject(a){return new Al({roleId:a.roleId})}toObject(){let a={};return this.roleId!=null&&(a.roleId=this.roleId),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_roleId&&this.roleId.length&&u.writeString(1,this.roleId),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Al;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.roleId=u.readString();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Al.deserialize(a)}};hu=new WeakMap;let ki=Al;Qi.SC_PLAYER_OUT=Al;let Cl=class Cl extends m.Message{constructor(a){super();rt(this,fu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,fu)),!Array.isArray(a)&&typeof a=="object"&&"symbolId"in a&&a.symbolId!=null&&(this.symbolId=a.symbolId)}get symbolId(){return m.Message.getFieldWithDefault(this,2,0)}set symbolId(a){m.Message.setField(this,2,a)}get has_symbolId(){return m.Message.getField(this,2)!=null}static fromObject(a){let u=new Cl({});return a.symbolId!=null&&(u.symbolId=a.symbolId),u}toObject(){let a={};return this.symbolId!=null&&(a.symbolId=this.symbolId),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_symbolId&&u.writeInt32(2,this.symbolId),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Cl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 2:b.symbolId=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Cl.deserialize(a)}};fu=new WeakMap;let Xi=Cl;Qi.CS_CHARGE=Cl;let Rl=class Rl extends m.Message{constructor(a){super();rt(this,gu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,gu)),!Array.isArray(a)&&typeof a=="object"&&("symbolId"in a&&a.symbolId!=null&&(this.symbolId=a.symbolId),"depositAddress"in a&&a.depositAddress!=null&&(this.depositAddress=a.depositAddress),"abi"in a&&a.abi!=null&&(this.abi=a.abi),"chainId"in a&&a.chainId!=null&&(this.chainId=a.chainId))}get symbolId(){return m.Message.getFieldWithDefault(this,1,0)}set symbolId(a){m.Message.setField(this,1,a)}get has_symbolId(){return m.Message.getField(this,1)!=null}get depositAddress(){return m.Message.getFieldWithDefault(this,2,"")}set depositAddress(a){m.Message.setField(this,2,a)}get has_depositAddress(){return m.Message.getField(this,2)!=null}get abi(){return m.Message.getFieldWithDefault(this,3,"")}set abi(a){m.Message.setField(this,3,a)}get has_abi(){return m.Message.getField(this,3)!=null}get chainId(){return m.Message.getFieldWithDefault(this,4,0)}set chainId(a){m.Message.setField(this,4,a)}get has_chainId(){return m.Message.getField(this,4)!=null}static fromObject(a){let u=new Rl({});return a.symbolId!=null&&(u.symbolId=a.symbolId),a.depositAddress!=null&&(u.depositAddress=a.depositAddress),a.abi!=null&&(u.abi=a.abi),a.chainId!=null&&(u.chainId=a.chainId),u}toObject(){let a={};return this.symbolId!=null&&(a.symbolId=this.symbolId),this.depositAddress!=null&&(a.depositAddress=this.depositAddress),this.abi!=null&&(a.abi=this.abi),this.chainId!=null&&(a.chainId=this.chainId),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_symbolId&&u.writeInt32(1,this.symbolId),this.has_depositAddress&&this.depositAddress.length&&u.writeString(2,this.depositAddress),this.has_abi&&this.abi.length&&u.writeString(3,this.abi),this.has_chainId&&u.writeInt32(4,this.chainId),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Rl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.symbolId=u.readInt32();break;case 2:b.depositAddress=u.readString();break;case 3:b.abi=u.readString();break;case 4:b.chainId=u.readInt32();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Rl.deserialize(a)}};gu=new WeakMap;let Ut=Rl;Qi.SC_CHARGE=Rl;let Ml=class Ml extends m.Message{constructor(a){super();rt(this,bu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,bu)),!Array.isArray(a)&&typeof a=="object"&&(this.symbolId=a.symbolId,this.amount=a.amount)}get symbolId(){return m.Message.getField(this,1)}set symbolId(a){m.Message.setField(this,1,a)}get has_symbolId(){return m.Message.getField(this,1)!=null}get amount(){return m.Message.getField(this,2)}set amount(a){m.Message.setField(this,2,a)}get has_amount(){return m.Message.getField(this,2)!=null}static fromObject(a){return new Ml({symbolId:a.symbolId,amount:a.amount})}toObject(){let a={};return this.symbolId!=null&&(a.symbolId=this.symbolId),this.amount!=null&&(a.amount=this.amount),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_symbolId&&u.writeInt32(1,this.symbolId),this.has_amount&&u.writeDouble(2,this.amount),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Ml;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.symbolId=u.readInt32();break;case 2:b.amount=u.readDouble();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Ml.deserialize(a)}};bu=new WeakMap;let hr=Ml;Qi.CS_WITHDRAW=Ml;let Dl=class Dl extends m.Message{constructor(a){super();rt(this,yu,[]);m.Message.initialize(this,Array.isArray(a)?a:[],0,-1,[],it(this,yu)),!Array.isArray(a)&&typeof a=="object"&&"resp"in a&&a.resp!=null&&(this.resp=a.resp)}get resp(){return m.Message.getFieldWithDefault(this,1,"")}set resp(a){m.Message.setField(this,1,a)}get has_resp(){return m.Message.getField(this,1)!=null}static fromObject(a){let u=new Dl({});return a.resp!=null&&(u.resp=a.resp),u}toObject(){let a={};return this.resp!=null&&(a.resp=this.resp),a}serialize(a){let u=a||new m.BinaryWriter;if(this.has_resp&&this.resp.length&&u.writeString(1,this.resp),!a)return u.getResultBuffer()}static deserialize(a){let u=a instanceof m.BinaryReader?a:new m.BinaryReader(a),b=new Dl;for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:b.resp=u.readString();break;default:u.skipField()}return b}serializeBinary(){return this.serialize()}static deserializeBinary(a){return Dl.deserialize(a)}};yu=new WeakMap;let en=Dl;Qi.SC_WITHDRAW=Dl})(t=r.socket||(r.socket={}))})(i=e.snake||(e.snake={}))})(X||(X={}));var Ds=class i{static encodeMessage(e,t,r){var n=i.createHeadMessage(e,r),s=i.createMessageBase(n,t),o=s.serializeBinary(),l=o.length,c=new Uint8Array([(l&4278190080)>>>24,(l&16711680)>>>16,(l&65280)>>>8,(l&255)>>>0]),p=new Uint8Array(c.byteLength+o.byteLength);return p.set(new Uint8Array(c),0),p.set(new Uint8Array(o),c.byteLength),p}static decodeMessage(e){var t=new DataView(e,0,4).getInt32(0,!1),r=e.slice(4,4+t),n=X.snake.socket.CMsgBase.deserializeBinary(r);return n}static createHeadMessage(e,t,r,n){t||(r=!0),!n&&B.instance.playerDto&&(n=B.instance.playerDto.pid);var s=X.snake.socket.CMsgHead.fromObject({msgtype:e,msgcode:1,roleId:n});return s}static createMessageBase(e,t){var r=X.snake.socket.CMsgBase.fromObject({msghead:e,msgbody:t});return r}};var va=class{};var Vc=class{};var zc=class i{constructor(e,t=0){this.objects=[],this.nodes=[],this.level=t,this.bounds=e}static checkBounds(e,t){let r=[new Laya.Point(t.x,t.y),new Laya.Point(t.x+t.width,t.y),new Laya.Point(t.x+t.width,t.y+t.height),new Laya.Point(t.x,t.y+t.height)];for(let n of r)if(!e.contains(n.x,n.y))return!1;return!0}getIndex(e){let t=e.getBoundingBox();if(!i.checkBounds(this.bounds,t))return;let r=this.bounds.x,n=this.bounds.y,s=this.bounds.width/2,o=this.bounds.height/2,l=new Laya.Rectangle(r+s,n+o,s,o),c=new Laya.Rectangle(r,n+o,s,o),p=new Laya.Rectangle(r,n,s,o),d=new Laya.Rectangle(r+s,n,s,o);return i.checkBounds(l,t)?0:i.checkBounds(c,t)?1:i.checkBounds(p,t)?2:i.checkBounds(d,t)?3:-1}getIndexSuction(e){let t=e.getSuctionBoundingBox()();if(!i.checkBounds(this.bounds,t))return;let r=this.bounds.x,n=this.bounds.y,s=this.bounds.width/2,o=this.bounds.height/2,l=new Laya.Rectangle(r+s,n+o,s,o),c=new Laya.Rectangle(r,n+o,s,o),p=new Laya.Rectangle(r,n,s,o),d=new Laya.Rectangle(r+s,n,s,o);return i.checkBounds(l,t)?0:i.checkBounds(c,t)?1:i.checkBounds(p,t)?2:i.checkBounds(d,t)?3:-1}split(){if(this.nodes.length>0)return;let e=this.bounds.x,t=this.bounds.y,r=this.bounds.width/2,n=this.bounds.height/2;this.nodes[0]=new i(new Laya.Rectangle(e+r,t+n,r,n),this.level+1),this.nodes[1]=new i(new Laya.Rectangle(e,t+n,r,n),this.level+1),this.nodes[2]=new i(new Laya.Rectangle(e,t,r,n),this.level+1),this.nodes[3]=new i(new Laya.Rectangle(e+r,t,r,n),this.level+1)}insert(e){if(this.nodes.length>0){let t=this.getIndex(e);if(t!==void 0&&t!==-1){this.nodes[t].insert(e);return}}if(this.objects.push(e),this.nodes.length===0&&this.objects.length>10&&this.level<5){this.split();let t=[];this.objects.forEach((r,n)=>{let s=this.getIndex(r);s!==void 0&&s!==-1&&(this.nodes[s].insert(r),t.push(n))}),this.objects=this.objects.filter((r,n)=>!t.includes(n))}}retrieve(e){let t=[];if(this.nodes.length>0){let r=this.getIndex(e);if(r!==void 0&&r!==-1)t=t.concat(this.nodes[r].retrieve(e));else if(r===-1)for(let n=0;n<this.nodes.length;n++)t=t.concat(this.nodes[n].retrieve(e))}return t=t.concat(this.objects),t}retrieveSuction(e){let t=[];if(this.nodes.length>0){let r=this.getIndexSuction(e);if(r!==void 0&&r!==-1)t=t.concat(this.nodes[r].retrieveSuction(e));else if(r===-1)for(let n=0;n<this.nodes.length;n++)t=t.concat(this.nodes[n].retrieveSuction(e))}return t=t.concat(this.objects),t}refresh(e){let t=e||this,r=[];this.objects.forEach((n,s)=>{let o=this.getIndex(n);o!==void 0&&o!==-1?this.nodes.length>0&&(r.push(s),this.nodes[o].insert(n)):o===void 0&&t!==this&&(r.push(s),t.insert(n))}),this.objects=this.objects.filter((n,s)=>!r.includes(s));for(let n=0;n<this.nodes.length;n++)this.nodes[n].refresh(t)}remove(e){let t=!1,r=[];if(this.objects.forEach((n,s)=>{n===e&&(r.push(s),t=!0)}),this.objects=this.objects.filter((n,s)=>!r.includes(s)),t)return!0;for(let n=0;n<this.nodes.length;n++)if(this.nodes[n].remove(e))return!0;return!1}clear(){this.objects=[];for(let e=0;e<this.nodes.length;e++)this.nodes[e].clear()}};var wa=class wa{static getInstance(e=null){return wa.instance||(e||(e=new Laya.Rectangle(0,0,ye.mapSize.width,ye.mapSize.height)),wa.instance=new wa(e)),wa.instance}constructor(e){this.snacks=[],this.quadTree=new zc(e)}addSnack(e){e.forEach(t=>{this.quadTree.insert(t)})}removeSnack(e){e.forEach(t=>{this.quadTree.remove(t)})}refresh(){this.quadTree.refresh()}retrieve(e){return this.quadTree.retrieve(e)}retrieveSuction(e){return this.quadTree.retrieveSuction(e)}getAllCollidables(){return this._getAllFromQuadTree(this.quadTree)}_getAllFromQuadTree(e){let t=[...e.objects];return e.nodes.forEach(r=>{t=t.concat(this._getAllFromQuadTree(r))}),t}};wa.instance=null;var wn=wa;var La=class{static clamp(e,t,r){return Math.max(t,Math.min(r,e))}static lerp(e,t,r){return e+(t-e)*r}static angleToRadian(e){return e*Math.PI/180}static radianToAngle(e){return e*180/Math.PI}static randomRange(e,t){return e+Math.random()*(t-e)}static randomInt(e,t){return Math.floor(this.randomRange(e,t+1))}static getDistance(e,t){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}static getVecDistance(e,t){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}static distance(e,t,r,n){let s=e-r,o=t-n;return Math.sqrt(s*s+o*o)}static getAngle(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}};La.PI2=Math.PI*2;var Jo=class{constructor(e,t){this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200;this._collisionRadius=ye.collision.food.radius;this.isCollidable=!0;this.position=ft.create(t.loc.x,t.loc.y),this.foodObject=t,this.init(e)}init(e){this.sprite=Re.instance.matchSnakeBeanPrefab.create();var t=j.intance.m_dicFoods.get(this.foodObject.itemId);this.sprite.init(t),this._collisionRadius=t.collisionRadius,this.sprite.pos(this.position.x,this.position.y),this.sprite.zOrder=0,e.addChild(this.sprite)}reset(e,t){this.position=ft.create(t.loc.x,t.loc.y),this.foodObject=t,this.haveEaten=!1;var r=j.intance.m_dicFoods.get(this.foodObject.itemId);this.sprite.init(r),this._collisionRadius=r.collisionRadius,this.sprite.alpha=1,this.sprite.pos(this.position.x,this.position.y),e.addChild(this.sprite)}resetForPool(){Laya.Tween.clearAll(this.sprite),this.sprite.removeSelf()}startScalingAnimation(){let e=this.minScale+Math.random()*(this.maxScale-this.minScale),t=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:e,scaleY:e},t,null,Laya.Handler.create(this,()=>{let r=this.minScale+Math.random()*(1-this.minScale),n=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this.sprite,{scaleX:r,scaleY:r},n,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}getPosition(){return this.position}getScore(){var e=j.intance.m_dicFoods.get(this.foodObject.itemId);return e.points}beEatten(e,t){Laya.Tween.clearAll(this.sprite),Laya.Tween.to(this.sprite,{x:e,y:t,alpha:.5},200,null,Laya.Handler.create(this,this.onFinish)),this.haveEaten=!0}onFinish(){this.resetForPool(),yi.instance.removeFood(this)}destroy(){Laya.Tween.clearAll(this.sprite),this.sprite.removeSelf(),this.sprite.destroy(),this.sprite=null,this.position=null}getBoundingBox(){return new Laya.Rectangle(this.position.x-this._collisionRadius,this.position.y-this._collisionRadius,this._collisionRadius*2,this._collisionRadius*2)}checkCollision(e,t,r){let n=this.position;return La.distance(n.x,n.y,e,t)<r+this._collisionRadius}};var Jd=class{constructor(e){this.container=e;this.pool=[]}getFood(e){let t;return this.pool.length>0?(t=this.pool.pop(),t.reset(this.container,e)):t=new Jo(this.container,e),t}returnFood(e){e.resetForPool(),this.pool.push(e)}clear(){this.pool.forEach(e=>e.destroy()),this.pool=[]}};var Bs=class Bs{constructor(){this.foods=[];this.foodDic=new Ce;this.spawnTimer=0;this.container||(this.container=new Laya.Sprite),this._collision=wn.getInstance(),this.foodPool=new Jd(this.container)}static get instance(){return Bs._instance||(Bs._instance=new Bs),Bs._instance}init(){}addFoods(e){e&&e.forEach(t=>this.addFood(t))}addFood(e){if(!e)return;let t=this.foodPool.getFood(e);this._collision.addSnack([t]),this.foods.push(t),this.foodDic.set(e.unkey,t)}eateFoodIds(e,t,r){t.forEach(o=>this.eateFood(e,o));var n=r-e.score;if(n&&e.showAddScore(n),e.isSelf&&t&&t.length){var s=Math.floor(Math.random()*3)+1;let o=`soundName_eat_food_${s}`;Ke[o]?Ke.instance.playSoundByName(Ke[o]):console.warn(`音效 ${o} 不存在`)}}eateFood(e,t){var r=this.foodDic.get(t);r&&(r.haveEaten=!0,r.beEatten(e.getHead().node.x,e.getHead().node.y))}showRemain(e){e&&e.length&&e.forEach(t=>{var r=this.foodDic.get(t);r&&(r.haveEaten=!1)})}removeFood(e){this._collision.removeSnack([e]);let t=this.foods.indexOf(e);t!==-1&&this.foods.splice(t,1),this.foodDic.remove(e.foodObject.unkey),this.foodPool.returnFood(e)}removeAllFoods(){this._collision.removeSnack(this.foods),this.foods.forEach(e=>e.destroy()),this.foods=[],this.foodDic=new Ce,this.foodPool.clear()}getAllFoods(){return this.foods}clear(){this.container.removeSelf(),this.container=null,this.removeAllFoods(),this.foodPool.clear(),this.foodPool=null,Bs._instance=null}};Bs._instance=null;var yi=Bs;var $i=class i{constructor(){this.inMinWaiting=!1;this.needGetRoomInfo=!1}openMinView(){this.enterRoomSpr||(this.enterRoomSpr=this.enterRoomPrefab.create()),this.enterRoomSpr.x=Laya.stage.width>>1,this.enterRoomSpr.y=0,this.enterRoomSpr.zOrder=1e3,Laya.stage.addChild(this.enterRoomSpr),this.inMinWaiting=!0}closeMinView(){this.enterRoomSpr&&this.enterRoomSpr.removeSelf(),this.inMinWaiting=!1}openMaxView(){this.closeMinView();var e=!0;ne.intance.openModule(y.EnterRoomView,e)}openEnterView(){if(this.inMinWaiting==!0){this.closeMinView();var e=!0;ne.intance.openModule(y.EnterRoomView,e)}else ne.intance.openModule(y.EnterRoomView)}static get instance(){return i._instance==null&&(i._instance=new i),i._instance}init(){this.closeMinView(),this.initRoomData(),this.needGetRoomInfo=!0,Laya.timer.loop(1500,this,this.onRefreshRoom)}onRefreshRoomImditely(){Laya.timer.clear(this,this.onRefreshRoom),this.needGetRoomInfo=!0,this.onRefreshRoom(),Laya.timer.loop(1500,this,this.onRefreshRoom)}updateBattleCD(){Le.instance.coolDownTime=Math.round(Le.instance.roomDto.joinCd/1e3),A.intance.event(v.EVENT_UPDATE_MATCH_ROOM),Le.instance.coolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):this.onGoMatch()}onSetCoolTime(){Le.instance.coolDownTime>=0?Le.instance.coolDownTime--:this.onGoMatch()}async onGoMatch(){Laya.timer.clear(this,this.onSetCoolTime),Laya.timer.clear(this,this.onRefreshRoom);let e=await se.requestPost("wxgame/room/info",{roomId:Le.instance.roomDto.roomId});if(!this.needGetRoomInfo){console.log("界面已经关掉了，不能再继续了。。。");return}var t=e.roomDto;t.joinCd==0?e.roomDto.enterGame==1?(Laya.timer.clearAll(this),kt.instance.initSocket(),this.closeMinView()):(this.close(),A.intance.event(v.EVENT_ENTER_MATCH_ROOM,!0),re.commTipWithYes(Xe.instance.get(25))):(Le.instance.roomDto=t,this.updateBattleCD())}initRoomData(){var e=Le.instance.roomDto.members.length,t=Le.instance.roomDto.maxCount;if(Le.instance.roomDto.state==Te.STATE_START&&e>=t){this.onGoMatch();return}this.updateBattleCD()}async onRefreshRoom(){console.log("onRefreshRoom");let e=await se.requestPost("wxgame/room/info",{roomId:Le.instance.roomDto.roomId});if(!this.needGetRoomInfo){console.log("界面已经关掉了，不能再继续了!");return}Le.instance.roomDto=e.roomDto,this.initRoomData(),Le.instance.setMatchRes()}close(){this.needGetRoomInfo=!1,Laya.timer.clearAll(this),A.intance.event(v.EVENT_CLOSE_MODULE,y.EnterRoomView),this.closeMinView()}async onCreateAndJoinWithPwd(e,t,r){var n=t.isBookingMust;if(e!=Te.ACTION_SIGNUP&&e!=Te.ACTION_CREATE_BOOKING){var s=j.intance.m_dicNodes.get(t.nodeId);if(s&&s.dT>800&&$.Debug<2){ee.instance.notice(L.instance.getLanguage(1306));return}}var o=!1;if(e==Te.ACTION_WATCH||e==Te.ACTION_JOIN&&n?o=!1:o=!0,o){let ke=!1;var l=j.intance.m_dicArenaDic.get(t.arenaId),c=l.item[0];let ve=B.instance.playerDto;if(l.type==3){if(!ve.newFightHeroPk){re.heroNotEnought(1353);return}}else if(ve.fightHeroPk){let W=B.instance.m_heroData.heroVoDic.get(ve.fightHeroPk);if(W){if(ke=W.state==2,e!=Te.ACTION_SIGNUP&&W.state==1){gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(1176),me.YES,null);return}}else if(e!=Te.ACTION_SIGNUP){re.heroNotEnought();return}}else if(e!=Te.ACTION_SIGNUP){re.heroNotEnought();return}if(l.item&&l.item.length>1){var c=l.item[0],p=l.item[1];e==Te.ACTION_SIGNUP&&!t.preContract&&(p=p*2);var d=B.instance.m_packageData.getCountById(c);let ut=j.intance.getArenaTypesInSubByType(l.type).heroType;var h=Re.instance.arenaType;if(ke){var f=await se.requestPost("wxgame/lease/heroInfo",{heroPk:ve.fightHeroPk});if(f.info.leaseType==1){if(f.info.remainTicketCount<=0&&h==1){gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(1175),me.YES,null);return}if(ut.indexOf(f.info.leaseType)<0){gt.instance().AlertByType(me.BASEALERTVIEW,Xe.instance.get(127),me.YES,null);return}if(c!==f.info.ticketId){console.log("票不一样不能进: ","需要的门票类型："+c,"代打英雄随身带的门票类型："+f.info.ticketId),gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(1178),me.YES,null);return}}else if(f.info.leaseType==2&&ut.indexOf(f.info.leaseType)<0){gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(1299),me.YES,null);return}}if(console.log("currNum: "+d,"needNum: "+p,"itemId: "+c),e!=Te.ACTION_SIGNUP&&d<p&&(!ke||f.info.leaseType==2)){re.titickNotEnought(c);return}}}let g=!1,E;if(e==Te.ACTION_CREATE)E=await se.requestPost("wxgame/room/create",{numIndex:t.numIndex,nodeId:t.nodeId,password:r,arenaId:t.arenaId,roomName:t.roomName,customName:t.customName,anonymous:t.anonymous,closeLive:t.closeLive});else if(e==Te.ACTION_JOIN)E=await se.requestPost("wxgame/room/join",{roomId:t.roomId,pass:r});else if(e==Te.ACTION_CREATE_BOOKING)t.groupId&&(g=!0),E=await se.requestPost("wxgame/roomPreContract/create",{numIndex:t.numIndex,groupId:t.groupId,nodeId:t.nodeId,password:r,arenaId:t.arenaId,roomName:t.roomName,customName:t.customName,startTime:t.startTime,anonymous:t.anonymous,closeLive:t.closeLive});else if(e==Te.ACTION_JOIN_BOOKING){var I=0;t.teamDto&&(I=t.teamDto.teamId),t.groupId&&I==0&&(g=!0),E=await se.requestPost("wxgame/roomPreContract/apply",{teamId:I,roomId:t.roomId,password:r})}else if(e==Te.ACTION_WATCH)E=await se.requestPost("wxgame/room/joinWatch",{roomId:t.roomId});else if(e==Te.ACTION_SIGNUP&&(E=await se.requestPost("wxgame/room/joinGroup",{roomId:t.roomId}),E)){ee.instance.notice(L.instance.getLanguage(1373)),this.onRefreshRoomImditely();return}if(E.roomDto&&(Le.instance.roomDto=E.roomDto),E.roomDto||E.dto){if(A.intance.event(v.EVENT_Close_CreateRoom),e==Te.ACTION_CREATE_BOOKING||e==Te.ACTION_JOIN_BOOKING)if(g){var _=E.dto,S=_.roomId,I=_.teamDto.teamId,M=_.teamDto.leaderPlayer.name;ne.intance.openModule(y.TeamCreateShareDialog,[S,I,M])}else ee.instance.notice(L.instance.getLanguage(2e3));else e==Te.ACTION_WATCH&&E.roomDto&&E.roomDto.state==10?kt.instance.initSocket():i.instance.openEnterView();if(e==Te.ACTION_CREATE||e==Te.ACTION_CREATE_BOOKING){var R=l.type,V="";R==1?V="Professional Arena":R==2?V="Airdrop Arena":R==3&&(V="Training Arena");var H=l.lv,K="";H==1?K="Novice":H==2?K="Elite":H==3&&(K="Master");var q=l.coinType,ce=j.intance.m_dicItems.get(q),Q=L.instance.getEnglishLanguage(ce.name);gtag("event","new_arena",{event_category:V,arena_type:V,coin_type:Q,arena_lv:K})}}else ee.instance.notice(L.instance.getLanguage(135))}async goBookingCreateRoomDialog(e,t=0){var r=await se.requestPost("wxgame/roomPreContract/info",{roomId:e,teamId:t});r.dto&&(A.intance.event(v.EVENT_CLOSE_MODULE,y.CreateRoomDialog),ne.intance.openModule(y.CreateRoomDialog,[Te.ACTION_JOIN_BOOKING,!1,!0,[r.dto,r.inApply]]))}async goMatchCreateRoomDialog(e){var t=await se.requestPost("wxgame/room/info2",{roomId:e});t.roomDto&&(A.intance.event(v.EVENT_CLOSE_MODULE,y.CreateRoomDialog),ne.intance.openModule(y.CreateRoomDialog,[Te.ACTION_JOIN,!1,!1,t.roomDto,!0]))}goBookingInviteConfimDialog(e){gt.instance().AlertByType(me.InviteConfimDialog,e,me.CANCEL,Laya.Handler.create(this,this.onAcceptInvite,[e]))}onAcceptInvite(e){console.log("onAcceptInvitation");var t=new RoomDto;t.roomId=e.roomId,t.arenaId=e.arenaId;var r=new TeamDto;r.teamId=e.teamId,t.teamDto=r,i.instance.onCreateAndJoinWithPwd(Te.ACTION_JOIN_BOOKING,t,"")}goBookingApplyConfimDialog(e){gt.instance().AlertByType(me.ApplyConfimDialog,e,me.CANCEL,Laya.Handler.create(this,this.onAcceptApply,[e,1]),Laya.Handler.create(this,this.onAcceptApply,[e,2]))}async onAcceptApply(e,t){console.log("onAcceptInvitation");var r=e.roomId,n=e.teamId,s=e.applicant.id,o=await se.requestPost("wxgame/roomPreContract/groupJoinApply",{roomId:r,teamId:n,targetPid:s,type:t});ee.instance.notice(L.instance.getLanguage(2e3))}onGetBookingId(e){var t,r;let n=/\[([^\]]+)\]/g,s,o=[];for(;(s=n.exec(e))!==null&&(o.push(s[1]),o.length!==2););if(o.length>0)t=o[0],o.length>1&&(r=o[1]),console.log("中括号内容:",t,r);else{console.log("未找到中括号内容，检查链接中的 bookingId...");let c=/https?:\/\/[^\s]+/g.exec(e);if(c){let p=new URL(c[0]),d=p.searchParams.get("bookingId");if(d){t=d,console.log("链接中的 bookingId:",d);let h=p.searchParams.get("teamId");h&&(r=h,console.log("链接中的 teamId:",h))}else console.log("链接中未包含 bookingId 参数")}else console.log("文本中未找到链接")}return[t,r]}onGetNewUrl(e,t){let r=new URL(window.location.href),n=r.searchParams;n.get("bookingId")&&n.delete("bookingId"),n.has("debug")&&n.delete("debug"),n.has("address")&&n.delete("address");let o=e;return n.append("bookingId",o+""),t&&n.append("teamId",t+""),r.search=n.toString(),r.toString()}goPveMatch(){var e={arenaId:4001,coinType:0,roomId:4563,members:[{id:1000000026,x:1706,y:1350,dire:0,speed:320,heroId:15000020003,heroColor:2,name:"1000000026",icon:"10015",leader:0,kill:0,hp:899,maxHp:899,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1000000027,x:952,y:1735,dire:0,speed:320,heroId:15000030003,heroColor:2,name:"1000000027",icon:"10015",leader:0,kill:0,hp:919,maxHp:919,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1000000007,x:952,y:965,dire:0,speed:320,heroId:12000010003,heroColor:2,name:"1000000007",icon:"10015",leader:0,kill:0,hp:1018,maxHp:1018,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1003,x:2083,y:2120,dire:0,speed:0,heroId:15000010006,heroColor:1,name:"h1",icon:"10005",leader:1,kill:0,hp:1828,maxHp:1828,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:1017,nodeId:1,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!1,startTime:1727683479461}],remainderCd:604799998,startTime:1727683478029,nowTime:1727683479462,arenaType:4,watch:[],anonymous:0},t=e.members.length,r=e.members[t-1];r&&(r.id=B.instance.playerDto.pid),Le.instance.matchDto=e,ze.intance.setCurrentScene(oe.M_SCENE_MATCH)}goSnakeMatch(){var e={arenaId:4001,coinType:0,roomId:4563,members:[{id:1003,x:2083,y:2120,dire:0,speed:10,heroId:15000010006,heroColor:1,name:"h1",icon:"10005",leader:1,kill:0,hp:1828,maxHp:1828,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:1017,nodeId:1,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!1,startTime:1727683479461}],remainderCd:604799998,startTime:1727683478029,nowTime:1727683479462,arenaType:4,watch:[],anonymous:0};let t=new rn;t.pid=1003,t.name="h1",t.icon="10005",t.lv=1,t.sex=1,t.country=1,t.exp=1,t.telegram=1,B.instance.playerDto=t;var r=e.members.length,n=e.members[r-1];n&&(n.id=B.instance.playerDto.pid);let s=[[1329,1350],[575,580],[952,580],[1329,580],[1706,580],[2083,580],[2460,580],[575,965],[952,965],[1329,965],[1706,965],[2083,965],[2460,965],[575,1350],[952,1350],[1706,1350],[2083,1350],[2460,1350],[575,1735],[952,1735],[1329,1735],[1706,1735],[2083,1735],[2460,1735],[575,2120],[952,2120],[1329,2120],[1706,2120],[2083,2120],[2460,2120],[982,1380],[1736,1380],[2113,1380],[675,1250]];for(let p=1;p<34;p++){let[d,h]=s[p-1],f=Math.floor(Math.random()*5)+1;e.members.push({id:1e9+p,x:d,y:h,dire:0,speed:10,heroId:12000010003,heroColor:f,name:"1000000007",icon:"10015",leader:0,kill:0,hp:1018,maxHp:1018,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461}),1e9+p===10005&&p<s.length-1}var o=34;let[l,c]=s[o-1];e.members.find(p=>p.id===1003).x=l,e.members.find(p=>p.id===1003).y=c,console.log("matchDto.members: "+e.members.length),Le.instance.matchDto=e,ze.intance.setCurrentScene(oe.M_SCENE_SNAKE_MATCH)}};var _0=class{constructor(){this.arenaId=0;this.coinType=0;this.roomId=0;this.members=[];this.item=[];this.remainderCd=0;this.startTime=0;this.nowTime=0;this.arenaType=0;this.watch=[];this.anonymous=0}},x0=_0;var zi=class zi{constructor(){this.m_iConnectTimes=0;this.m_iMaxTimes=10;this.m_iHeartTime=6e4;this.moveIndex=0;this.serverTimeOffset=0;this._isMatching=!1;this.isFirst=!0;this.m_socket=new Laya.Socket,this.m_socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this.m_socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this.m_socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this.m_socket.on(Laya.Event.ERROR,this,this.onConnectError)}static get instance(){return zi._instance==null&&(zi._instance=new zi),zi._instance}get isMatching(){return this._isMatching}set isMatching(e){this._isMatching=e,e||(this.isConnect=!1)}close(){this.m_socket&&this.m_socket.close()}initSocket(){this.isMatching=!0,this.isFirst=!0;var e=Le.instance.roomDto.connectAddr;zi.m_strHttpHost=e,this.connect()}onSocketOpen(){this.isConnect=!0,this.m_iConnectTimes=0,console.log("WS----WS connected",1),Laya.timer.loop(30*1e3,this,this.sendHeart),this.onRequestTime()}onRequestTime(){var e=X.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME,t=null;this.sendData(e,t)}onLogin(){var e=B.instance.playerDto.pid,t=X.snake.socket.MessageType.MSG_ENTER_ROOM,r=X.snake.socket.CS_ENTER_ROOM.fromObject({tag:"1",roleId:e});this.sendData(t,r)}onSocketClose(e){console.log("WS----closed",1),this.isMatching&&(this.isOtherLogin||(this.isConnect=!1,Pe.instance.hideLoading(),re.popToMain()))}onReconnect(){zi.instance.reconnect(),zi.instance.m_iConnectTimes++}onConnectError(e){console.log("WS----onConnectError e:"+e,1),this.isMatching&&(this.isOtherLogin||(this.isConnect=!1,Pe.instance.hideLoading(),re.popToMain()))}connect(){console.log("WS----connect: "+zi.m_strHttpHost,1),this.isMatching&&(this.isConnect||(Laya.timer.once(1e4,this,this.showTip),this.m_socket.connectByUrl(zi.m_strHttpHost),console.log("WS----connect websocket",1)))}clearShowTip(){Laya.timer.clear(this,this.showTip)}showTip(){re.netError()}reconnect(){console.log("WS----reconnect: "+zi.m_strHttpHost,1),this.isMatching&&(this.isConnect||(this.m_socket.connectByUrl(zi.m_strHttpHost),console.log("WS----reconnect WS",1)))}onSendMessage(){}sendData(e,t){if(this.isMatching)if(this.isConnect){var r=t?t.serializeBinary():null;console.log(re.GetLogTime+" WS ------>>>>>>>> SEND CMD:"+e,t?t.toObject():null);var n=Ds.encodeMessage(e,r,"");this.m_socket.send(n.buffer)}else console.log(re.GetLogTime+" WS ------>>>>>>>> SENDE RROR CMD:"+e,t?t.toObject():null)}async onMessageReveived(e){var t=Ds.decodeMessage(e),r=t.msghead.msgtype,n=t.msghead.msgcode;if(r==X.snake.socket.MessageType.MSG_HEART_BEAT)return;var s,o=Laya.ClassUtils.getClass(r+"");o?(s=o.deserializeBinary(t.msgbody).toObject(),console.log(re.GetLogTime+" WS ------<<<<<<<< RECV CMD:"+r+", CODE:",n+", DATA:",s)):console.warn(re.GetLogTime+" WS ------<<<<<<<< RECV CMD:"+r+", CODE:",n+", className解析失败!"),n==X.snake.socket.MessageCode.SYS_NORMAL?r==X.snake.socket.MessageType.MSG_USER_LOGIN||r==X.snake.socket.MessageType.MSG_REPEAT_LOGIN_NOTICE&&(this.isOtherLogin=!0,Laya.timer.clearAll(this),this.close(),re.otherLogin(),console.log("WS----------------------------otherLogin")):console.log(re.GetLogTime+" msgcode------------<<<",n);let l=t,c=l.msghead.msgtype,p=l.msghead.msgcode;if(p&&p!=X.snake.socket.MessageCode.SYS_NORMAL){console.warn("errorCode "+p+", errorMessage： "+Xe.instance.get(p)),p==24||p==25?(this.isMatching=!1,$i.instance.close(),zi.instance.clearShowTip(),ze.intance.currSceneName!=oe.M_SCENE_MATCH&&(ze.intance.setCurrentScene(oe.M_SCENE_MAIN),re.commTipWithYes(Xe.instance.get(p)))):p==69&&Xe.instance.showErrorWord(p);return}switch(c){case X.snake.socket.MessageType.MSG_REQUEST_SERVER_TIME:var d=s,h=d.time;let en=Date.now();this.serverTimeOffset=en-h,this.onLogin();break;case X.snake.socket.MessageType.MSG_ENTER_ROOM:this.isFirst=!1;var f=s,ge=f.food,Ze=f.players;nt.Instance.init();var tt=1e12;Ze.forEach(mt=>{if(mt.state){var Vt=mt.frame;Vt<tt&&(tt=Vt)}}),nt.Instance.setStartFrame(tt);var jt=[],wt=null;Ze.forEach(mt=>{if(mt.roleId==B.instance.playerDto.pid&&(wt=mt),mt.state){var Vt=mt.frame;if(Vt==tt)jt.push(mt);else if(Vt>tt){var ci=new va;ci.msgtype=X.snake.socket.MessageType.MSG_NOTICE_ENTER,ci.msgBody=mt,nt.Instance.addOperation(ci)}}});var st=new x0;st.members=jt,st.myPlayerObject=wt,st.item=ge,Le.instance.matchDto=st,ze.intance.setCurrentScene(oe.M_SCENE_SNAKE_MATCH),this.clearShowTip(),Le.instance.stopAll=!1;break;case X.snake.socket.MessageType.MSG_PUSH:if(!nt.Instance.isStart)return;var g=s,D=g.frame,E=g.msgList,S=[],tt=1e12;E.forEach(mt=>{var Vt=mt.msghead.msgtype,ci=mt.msghead.msgcode,or,Mr=Laya.ClassUtils.getClass(Vt+"");if(Mr){var Qn=Date.now();if(or=Mr.deserializeBinary(mt.msgbody).toObject(),$.Debug>=1){var P=Date.now();console.log(re.GetLogTime+" WS ------<<<<<<<< RECV BATCH_CMD:"+Vt+", CODE:",ci+", DATA:",or," dt:",P-Qn)}}else $.Debug>=1&&console.warn(re.GetLogTime+" WS ------<<<<<<<< RECV BATCH_CMD:"+Vt+", CODE:",ci+", className解析失败!");var x=new va;x.msgtype=Vt,x.msgBody=or;var C=or.frame;C<tt&&(tt=C),S.push(x)});var R=new Vc;R.frame=D,R.minEventFrame=tt,R.serverCmdDataDtos=S,Re.instance.handleFrameOperations(R);break;case X.snake.socket.MessageType.MSG_PLAYER_OPR:if(!nt.Instance.isStart)return;var I=s,D=I.frame,Q=I.roleId;Re.instance.onRevOprPush(I);break;case X.snake.socket.MessageType.MSG_NOTICE_ENTER:if(!nt.Instance.isStart)return;var _=s.players,D=_.frame,S=[],tt=D,M=new va;M.msgtype=r,M.msgBody=_,S.push(M);var R=new Vc;R.frame=D,R.minEventFrame=tt,R.serverCmdDataDtos=S,Re.instance.handleFrameOperations(R);break;case X.snake.socket.MessageType.MSG_PLAYER_STATE:if(!nt.Instance.isStart)return;let wi=s;var D=wi.frame,Ze=wi.players;let Ri=new Set;Ze.forEach(mt=>{Ri.add(mt.roleId),Re.instance.onUpdatePlayerObject(mt,D)});var V=et.instance.matchHeroSprDic;for(let mt of V.keys)Ri.has(mt)||et.instance.removeSnake(mt);break;case X.snake.socket.MessageType.MSG_PLAYER_OUT:if(!nt.Instance.isStart)return;var Q=s.roleId;et.instance.removeSnake(Q);break;case X.snake.socket.MessageType.MSG_EAT_FOOD:if(!nt.Instance.isStart)return;let ii=s;var H=ii.fid,K=ii.score,q=ii.lenght,Q=ii.roleId,ce=ii.remain;yi.instance.showRemain(ce);var W=ii.head,D=ii.frame,le=Re.instance.getRoleById(Q);le&&(le.updateHead(D,W,ii.speed,ii.curDir,ii.aimDir),le.updateLen(q),yi.instance.eateFoodIds(le,H,K),le.score=K);break;case X.snake.socket.MessageType.MSG_PLAYER_COLLISION:if(!nt.Instance.isStart)return;let Li=s;var Q=Li.roleId,ke=Li.food,ve=Li.taret,W=Li.head,D=Li.frame,ut=Li.die,le=Re.instance.getRoleById(Q);if(le&&(le.updateHead(D,W,Li.speed,Li.curDir,Li.aimDir),le.isSend=!1,ut!="-1")){var Se=Re.instance.getRoleById(ve);ut==Q?(le.die(),Se&&Se.addKill(1)):(Se&&Se.die(),le.addKill(1)),ke&&ke.length&&yi.instance.addFoods(ke)}break;case X.snake.socket.MessageType.MSG_GEN_FOOD:var we=s,D=we.frame;yi.instance.addFoods(we.food);break;case X.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA:var Ge=s;console.log("收到了恢复数据返回");var ge=Ge.food,Ze=Ge.players;nt.Instance.init();var tt=1e12;Ze.forEach(mt=>{if(mt.state){var Vt=mt.frame;Vt<tt&&(tt=Vt)}}),nt.Instance.setStartFrame(tt);var jt=[],wt=null;Ze.forEach(mt=>{if(mt.roleId==B.instance.playerDto.pid&&(wt=mt),mt.state){var Vt=mt.frame;if(Vt==tt)jt.push(mt);else if(Vt>tt){var ci=new va;ci.msgtype=X.snake.socket.MessageType.MSG_NOTICE_ENTER,ci.msgBody=mt,nt.Instance.addOperation(ci)}}});var st=new x0;if(st.members=jt,st.myPlayerObject=wt,st.item=ge,wt&&wt.state)Re.instance.onRevRestorePush(st);else if(wt.result){var vi=wt.result,r=vi.msghead.msgtype,n=vi.msghead.msgcode,s,o=Laya.ClassUtils.getClass(r+"");if(o){var ki=Date.now();if(s=o.deserializeBinary(vi.msgbody).toObject(),$.Debug>=1){var Xi=Date.now();console.log(re.GetLogTime+" WS ------<<<<<<<< RECV INSERT_CMD:"+r+", CODE:",n+", DATA:",s," dt:",Xi-ki)}}else $.Debug>=1&&console.warn(re.GetLogTime+" WS ------<<<<<<<< RECV INSERT_CMD:"+r+", CODE:",n+", className解析失败!");var Ut=s;Le.instance.onSetMatchEnd(Ut,!0)}else{var Ut=new X.snake.socket.SC_BATTLE_END;Ut.res=!1,Ut.roleId=wt.roleId,Ut.score=wt.score,Ut.kills=wt.kills,Ut.length=wt.length,Ut.alive=wt.length,Ut.items=[],Le.instance.onSetMatchEnd(Ut,!0)}break;case X.snake.socket.MessageType.MSG_BATTLE_END:var Ut=s,hr=Ut.res;Le.instance.onSetMatchEnd(Ut);break;default:break}}sendHeart(){this.m_socket.connected&&this.sendData(X.snake.socket.MessageType.MSG_HEART_BEAT,null)}};zi.m_strHttpHost=getWSServer(),zi.CMD_99999=99999;var kt=zi;var Gc=class Gc{constructor(){this._ws=null;this._magicstr=null;this._heartBeatMissed=0;this._heartBeatMissedMax=3;this._heartBeatInterval=5e3;this.wsUrl=getWSServer();this.interval=0;this.trySendNum=0;this.trySendMax=3;this.isShowReLogin=!1;this.isInFightNotFinishShowRelogin=!1;this.login_manual_close_socket=!1;this.isPopClose=!1;this.isOtherLogin=!1;this._serverTimeDiff=0;this._serverTime=0}get magicstr(){return this._magicstr}set magicstr(e){this._magicstr=e}getServerTimeDiff(){return this._serverTimeDiff}getServerTime(){return this._serverTime}getFixedLocalTime(e){let t=this.getTimeZone()+this._serverTimeDiff;return e&&(t=new Date().getTime()+this._serverTimeDiff),t}getTimeZone(e){if(e==0)return 0;let t=new Date;e&&(t=new Date(e));let r=t.getTime();var n=t.getTimezoneOffset()*6e4,s=r+n,o=LOGIN_MODEL.server_time_zone,l=s+36e5*o,c=new Date(l);return c.getTime()}static getInstance(){return Gc.singleton}createWebSocket(){try{this._ws=new WebSocket(this.wsUrl),this.init()}catch(e){console.log("%c WSM","color:#2a5caa","创建 WebSocket 异常",e),this.reconnect()}}connect(){console.log("%c WSM","color:#2a5caa","connect url = "+this.wsUrl),this.trySendNum=0,this.close(),Laya.timer.once(100,this,this.createWebSocket)}init(){this._ws.binaryType="arraybuffer",this._ws.onopen=e=>{console.log(re.GetLogTime+" websocket ----_ws.onopen"),this.onOpen()},this._ws.onmessage=e=>{this.onMessage(e.data)},this._ws.onerror=e=>{console.log("%c WSM","color:#2a5caa","_ws.onerror",e),this.onError(e)},this._ws.onclose=e=>{console.log("%c WSM","color:#2a5caa","_ws.onclose",e),this.onClose()}}onOpen(){this.heartbeatTimer(),this.isShowReLogin=!1,this.stopReconnectTimer(),Pe.instance.hideLoading(),A.intance.event(v.ON_CONNECT_GAME_SERVER)}onError(e){console.log(re.GetLogTime+" websocket ----onError------------>",e),this.onClose()}onClose(){console.log(re.GetLogTime+" websocket ----onClose------------>",this._ws),this.login_manual_close_socket,this.close(),this.login_manual_close_socket=!1}stopTimer(){this.stopHeartbearTimer(),this.stopRequestMagicstrTimer()}close(){console.log(re.GetLogTime+" websocket ----WS:close"),this.login_manual_close_socket=!0,this._ws&&(this._ws.close(),this._ws=null)}clear(){this.isPopClose=!1,this._ws&&(this._ws.onclose&&(this._ws.onclose=null),this._ws.onerror&&(this._ws.onerror=null),this._ws.close(),this._ws=null)}clearAll(){this.isPopClose=!1,this.stopShowLoad(),this.close(),this.stopTimer()}isConnected(){return this._ws&&this._ws.readyState===WebSocket.OPEN}send(e,t,r=!0){if(this.isPopClose||this.startShowLoad(),this.isConnected()){var n=this._magicstr,s=t?t.serializeBinary():null;e!=X.snake.socket.MessageType.MSG_HEART_BEAT&&console.log(re.GetLogTime+" WSM ------>>>>>>>> SEND CMD:"+e,t?t.toObject():null);var o=Ds.encodeMessage(e,s,n);this._ws.send(o.buffer)}else console.log(re.GetLogTime+" WSM ------>>>>>>>> SENDE RROR CMD:"+e,t?t.toObject():null)}onMessage(e){this.stopShowLoad();var t=Ds.decodeMessage(e);this._heartBeatMissed=-1;var r=t.msghead.msgtype,n=t.msghead.msgcode;if(r!=X.snake.socket.MessageType.MSG_HEART_BEAT){var s,o=Laya.ClassUtils.getClass(r+"");if(o?(s=o.deserializeBinary(t.msgbody).toObject(),console.log(re.GetLogTime+" WSM ------<<<<<<<< RECV CMD:"+r+", CODE:",n+", DATA:",s)):console.warn(re.GetLogTime+" WSM ------<<<<<<<< RECV CMD:"+r+", CODE:",n+", className解析失败!"),n==X.snake.socket.MessageCode.SYS_NORMAL)r==X.snake.socket.MessageType.MSG_USER_LOGIN?(this.requireMagicstrTimer(),this.requireMagicstr(),this.heartbeatTimer()):r==X.snake.socket.MessageType.MSG_REPEAT_LOGIN_NOTICE&&(this.isOtherLogin=!0,Laya.timer.clearAll(this),this.close(),kt.instance.close(),re.otherLogin(),console.log("WS----------------------------otherLogin"));else if(console.log("%c WSM","color:#2a5caa","msgcode--------------->",n),n==3)this.requireMagicstrTimer(),this.requireMagicstr(),this.heartbeatTimer();else{let l=Xe.instance.get(n);n==15?CommonUtil.addRechargeView():n==12?CommonUtil.addCoinView():n==4&&(this.startShowLoad(0),Laya.timer.clear(this,this.dataErrorFun),Laya.timer.once(3e3,this,this.dataErrorFun)),$.vType!=2?re.commTipWithYes(l+" code:"+n):re.commTipWithYes(l)}A.intance.event("msg_"+r,[s,n])}}dataErrorFun(){Laya.timer.clear(this,this.dataErrorFun),this.stopShowLoad()}reconnect(){if(this.isPopClose){this.stopShowLoad();return}if(console.log("%c WSM","color:#2a5caa","reconnect 开始重连服务器"),this.isConnected())return;if(this.isShowReLogin){this.stopTimer();return}if(this.isOtherLogin){this.stopTimer();return}this.stopShowLoad();let e=String(this.trySendNum)+"/"+String(this.trySendMax)+" "+L.instance.getLanguage("正在尝试重连");Pe.instance.showLoadingByInfo(e),this.startReconnectTimer()}startReconnectTimer(){this.stopReconnectTimer(),this.trySendNum=0,console.log("%c WSM","color:#2a5caa","startReconnectTimer this.trySendNum-------->",this.trySendNum),Laya.timer.clear(this,this.reconnectFun),Laya.timer.loop(3e3,this,this.reconnectFun)}reconnectFun(){if(this.trySendNum++,this.trySendNum>this.trySendMax)console.log("%c WSM","color:#2a5caa","重连次数超过"),this.trySendNum=0,Pe.instance.hideLoading(),this.stopReconnectTimer(),this.onClose(),re.netError();else{console.log("%c WSM","color:#2a5caa","开始重连次数",String(this.trySendNum));let e=String(this.trySendNum)+"/"+String(this.trySendMax)+" "+L.instance.getLanguage("正在尝试重连");Pe.instance.showLoadingByInfo(e),this.createWebSocket()}}stopReconnectTimer(){Laya.timer.clear(this,this.reconnectFun),this._heartBeatMissed=0}stopHeartbearTimer(){Laya.timer.clear(this,this.sendHeartBeat),this._heartBeatMissed=0}heartbeatTimer(){this.stopHeartbearTimer(),Laya.timer.loop(this._heartBeatInterval,this,this.sendHeartBeat)}sendHeartBeat(){this.send(X.snake.socket.MessageType.MSG_HEART_BEAT,null,!1),this._heartBeatMissed+=1,this._heartBeatMissed>=this._heartBeatMissedMax&&(console.log("%c WSM","color:#2a5caa","发送大厅心跳超过最大次数,关闭Socket",this._heartBeatMissed),this.stopHeartbearTimer(),this.stopRequestMagicstrTimer(),this.close(),this.reconnect())}stopRequestMagicstrTimer(){Laya.timer.clear(this,this.requireMagicFun)}requireMagicstrTimer(){return;var e}requireMagicFun(){}requireMagicstr(){}getConnectType(){}startShowLoad(e=1e3){Laya.timer.clear(this,this.showLoadingFun),Laya.timer.once(e,this,this.showLoadingFun)}showLoadingFun(){console.log("%c WSM","color:#2a5caa","startShowLoad","开始显示loading"),Pe.instance.showLoadingByInfo(L.instance.getLanguage("开始重连服务器"))}stopShowLoad(){Pe.instance.hideLoading(),console.log("%c WSM","color:#2a5caa","停止显示loading"),Laya.timer.clear(this,this.showLoadingFun)}showLog(e,...t){console.log("%c WSM","color:#2a5caa",e,...t)}};Gc.singleton=new Gc;var v0=Gc,si=v0.getInstance();var $e=class $e{static get IsSetRelease(){return $e._IsSetRelease}static get IsSetGuid(){return $e._IsSetGuid}static initParms(){if(Laya.Browser.window.location){let r=Laya.Browser.window.location.href,n=this.getURLParameters(r);if($e.m_obj=n,console.log("1initgame-->urldata:",$e.m_obj),$e.m_obj.server&&$e.m_obj.server!=""&&(si.wsUrl=$e.m_obj.server),$e.m_obj.socket&&$e.m_obj.socket!=""){var e=$e.m_obj.socket;kt.m_strHttpHost=e}if($e.m_obj.address&&$e.m_obj.address!=""&&(te.instance.walletAddress=$e.m_obj.address),$e.m_obj.from&&$e.m_obj.from=="into"&&($.isInto=!0),$e.m_obj.isFull&&$e.m_obj.isFull=="1"&&($.isFull=!0),$e.m_obj.justFull&&$e.m_obj.justFull=="1"&&($.justFull=!0),$e.m_obj.white&&$e.m_obj.white=="1"&&($.isWhite=!0),$e.m_obj.needDraw&&$e.m_obj.needDraw=="1"&&($.needDraw=!0),$e.m_obj.log){var t=parseInt($e.m_obj.log);t>0&&initEruda(t)}if($e.m_obj.debug&&$e.m_obj.debug!="0"&&($.Debug=parseInt($e.m_obj.debug)),$e.m_obj.res&&$e.m_obj.res!="0"&&($.Res=parseInt($e.m_obj.res)),$e.m_obj.bookingId&&$e.m_obj.bookingId!="0"&&($.bookingId=parseInt($e.m_obj.bookingId),$e.m_obj.teamId&&$e.m_obj.teamId!="0"&&($.teamId=parseInt($e.m_obj.teamId))),$e.m_obj.referral&&$e.m_obj.referral!=""&&($.referral=$e.m_obj.referral),$e.m_obj.lang&&$e.m_obj.lang!=""){let s=parseInt($e.m_obj.lang);s<1&&(s=1),$.ignoreLang=!0,B.instance.m_strLanguage=s}}}static getURLParameters(e){let t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,(r,n,s)=>t[n]=decodeURIComponent(s)),t}static cheakStr(e){let t=new RegExp("[A-Za-z0-9_-\\s]","g"),r=e.match(t);return!!(r&&r.length==e.length)}static isNumber(e){return/^(?!0\d)\d*\.?\d*$/.test(e)}static roundToTwoDecimals(e){return e%1===0?e.toString():Number(e.toFixed(2)).toString()}static filterObjectsByState(e,t,r=void 0){return r?e.filter(n=>n.state===t&&r.indexOf(n.pk)<0&&n.newFightFlag!==1):e.filter(n=>n.state===t&&n.newFightFlag!==1)}static filterPVEExpHerosByState(e,t,r=void 0){return r?e.filter(n=>n.state===t&&r.indexOf(n.pk)<0&&n.newFightFlag==1):e.filter(n=>n.state===t&&n.newFightFlag==1)}static filterObjectsByNewFightFlag(e){return e.filter(t=>t.newFightFlag!==1)}static getArenaByTicketId(e){let t=j.intance.m_dicArenaDic.values;for(let r of t)if(Array.isArray(r.item)&&r.item.length>0&&r.item[0]===e)return r.name}static processItemsArray(e,t=!0){let r=j.intance.getGeneralValueById(20),n={},s={};var o=[];e.forEach(p=>{r.indexOf(p.id)>-1?s[p.id]?s[p.id].count+=p.count:s[p.id]=p:(n[p.id]=p,o.push(p))}),t&&r.forEach(p=>{s[p]||(s[p]={type:1,id:p,count:0})});let l=Object.values(s),c=Object.values(n);return l=l.sort((p,d)=>r.indexOf(p.id)-r.indexOf(d.id)),[l,c,o]}static sumItemCount(e){let t=new Map;return e.forEach(n=>{n.reward.forEach(s=>{let{type:o,id:l,count:c}=s;t.has(l)?t.set(l,{type:o,id:l,count:t.get(l).count+c}):t.set(l,{type:o,id:l,count:c})})}),Array.from(t.values())}static addIndexToObjects(e){return e.forEach((t,r)=>{t.index=r}),e}static findFirstTypeAndNotGold(e){for(let t=0;t<e.length;t++)if(e[t].id>=3001&&e[t].id<=3021&&e[t].id!==3005)return e[t]}static getTitleByGoodsId(e,t){for(let r of e)if(r.goods===t)return r.title;return null}static getShopByGoodsId(e,t){for(let r of e)if(r.goods===t)return r;return null}static getCurrencyIdByName(e){let t=Oe.TYPE_TOX;switch(e){case"TOX":t=Oe.TYPE_TOX;break;case"ETH":t=Oe.TYPE_ETH;break;case"BTC":t=Oe.TYPE_BTC;break;case"USDT":t=Oe.TYPE_USDT;break;case"BTOX":t=Oe.TYPE_BTOX;break;case"GALA":t=Oe.TYPE_GALA;break;case"BNRY":t=Oe.TYPE_BNRY;break;case"KLAY":t=Oe.TYPE_KLAY;break;case"BNB":t=Oe.TYPE_BNB;break;case"GGG":t=Oe.TYPE_GGG;break}return t}static formatNumber(e,t=7){let r=e.toString(),n=r.indexOf(".");return n!==-1&&r.length-n>t?(r=r.slice(0,n+t),parseFloat(r)):e}static truncateToTwoDecimalPlaces(e){let t=e.toString(),r=t.indexOf(".");if(r===-1)return e;let n=t.substring(0,r+5);return parseFloat(n)}static getKeyByValue(e,t){return Object.keys(e).find(r=>e[r]===t)}static powerOf10(e,t){return e*Math.pow(10,t)}static isLeapYear(e){return e%4==0&&e%100!=0||e%400==0}static getDaysInMonth(e,t){return t===2?this.isLeapYear(e)?29:28:[4,6,9,11].includes(t)?30:31}static shortenString(e,t,r){return e.length<=t+r?e:e.substr(0,t)+"..."+e.substr(-r)}static multiplyBigDecimals(e,t){let n=Math.pow(10,1e4),s=parseFloat(String(e))*parseFloat(String(t));return Math.round(s*n)/n}static arraysEqual(e,t){return e.length===t.length&&e.every((r,n)=>r===t[n])}static categorizeArrays(e,t){let r=[];for(let n of t){let s=n[0],o=n[1],l=e.find(p=>p[0]===s),c=l?l[1]:0;r.push([s,c,o])}return r}static setMap(e,t){if(e.has(t[0])){let r=e.get(t[0]);r+=t[1],e.set(t[0],r)}else e.set(t[0],t[1]);return console.log(e),e}static getfrom(){return $e.m_obj.from}static parseTokenData(e){try{return e.map(t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(r){return console.error("解析token字符串失败:",r),t}return t})}catch(t){return console.error("解析token数据时发生错误:",t),[]}}};$e._IsSetRelease=!1,$e._IsSetGuid=!1;var qe=$e;var Ln=class i{constructor(){this.assets_contract=null;this.startRecharge=!1}static get instance(){return i._instance||(i._instance=new i),i._instance}async init(){typeof window.ethereum>"u"||(A.intance.on(v.EVENT_RECHARGE_GET,this,this.rechargeEnd),this.assets_contract=new window.web3.eth.Contract(Ae.WITHDRAW_AND_RECHARGE_ABI,Ae.WITHDRAW_AND_RECHARGE_ADDRESS))}async depositWallet(e,t){if(Pe.instance.showLoading(!0),!await te.instance.allowanceAddressByTokenAddress(Ae.WITHDRAW_AND_RECHARGE_ADDRESS,e)){Pe.instance.hideLoading(),ee.instance.notice(L.instance.getLanguage(15));return}return t=window.web3.utils.toWei(t+""),await this.assets_contract.methods.recharge(e.toLowerCase(),t).send({from:te.instance.walletAddress},(n,s)=>{if(n)return Pe.instance.hideLoading(),!1}),!0}async rechargeToken(e,t=null,r){try{if(t.token&&t.token!==Ae.ADDRESS0&&!await te.instance.newAllowanceAddress(r,t.token))return Pe.instance.hideLoading(),ee.instance.notice(L.instance.getLanguage(15)),!1;let n=_n(e+"",t.tokenDecimals),s=Ae.RECHANGE_ABI_NEW,o="depositToken",l;!t.token||t.token==Ae.ADDRESS0?l=await te.instance.walletClient.writeContract({account:te.instance.walletAddress,address:r,abi:s,functionName:"depositETH",value:n,args:[]}):l=await te.instance.walletClient.writeContract({account:te.instance.walletAddress,address:r,abi:s,functionName:o,args:[t.token,n]}),this.startRecharge=!0,Laya.timer.once(6e4,this,this.clearRecharge);let c,p=!1;if(c=await te.instance.publicClient.waitForTransactionReceipt({hash:l,pollingInterval:1e3}),c&&c.status=="success"||p){if(!this.startRecharge)return;Laya.timer.clear(this,this.clearRecharge),console.log(`Tx successful with hash: ${l}`);let d=await te.instance.walletClient.getChainId(),h=[d,l];return this.getReward(d,l),Laya.timer.loop(2e3,this,this.getReward,h),Laya.timer.once(6e4,this,this.clearRecharge),l}else{Pe.instance.hideLoading(),re.TransactionErrorTip();return}}catch(n){Pe.instance.hideLoading(),console.log(n),n instanceof Error?n.message.includes("does not match the target chain for the transaction")?A.intance.event(v.CHANGE_ASSET_CHAIN):console.log("Error message does not contain the specified character."):console.log("An error occurred, but it is not an instance of Error.")}}async getReward(e,t){let r=await se.requestPost("wxgame/sys/payCallPack",{chainId:e,hashId:t});if(r&&r.coin){Laya.timer.clear(this,this.clearRecharge);let s=r.coin[0];if(!s)return;A.intance.event(v.UPDATE_LOCAL_WALLET_LIST_EVENT);var n=new mr;n.id=s[0],n.count=s[1],Pe.instance.hideLoading(),ne.intance.openModule(y.RewardGetDialog,[n]),this.rechargeEnd()}}rechargeEnd(){B.instance.rechargeEnd=!1,Laya.timer.clear(this,this.getReward)}clearRecharge(){this.startRecharge=!1,Pe.instance.hideLoading(),ee.instance.notice(L.instance.getLanguage(1350)),this.rechargeEnd()}parseGwei(e){return e*1e9}async getAmountsOut(e,t,r,n=void 0){try{let s=18,o=18;n&&(s=n.usdtDecimals,o=n.tokenDecimals);let l=qe.powerOf10(r,s),c;if(e=="BNB"||e=="GALA"?c=await te.instance.publicClient.readContract({address:t,abi:Ae.PUZZLE_ABI,functionName:"getAmountsOut",args:[l]}):c=await te.instance.publicClient.readContract({address:t,abi:Ae.PUZZLE_ABI,functionName:"getTokenAmountsOut",args:[l,n.token]}),c){let p=Number(c)/Math.pow(10,o);return console.log(p),p}}catch(s){if(s instanceof Error){let o=s.message;return 0}}return 0}};var oh=P0(Ww());var Zr=class{static getInviteUrl(){return window.location.origin+"?invite="+this.encode(te.instance.walletAddress)}static encode(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=t.length,n=t.split(""),s="",o,l,c,p,d=0;d<e.length;d++)o=e.charCodeAt(d),l=o%r,o=(o-l)/r,c=o%r,o=(o-c)/r,p=o%r,s+=n[p]+n[c]+n[l];return window.btoa(s)}static decode(e){e=window.atob(e);var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=t.length,n,s,o,l,c=0,p;p=new Array(Math.floor(e.length/3)),n=p.length;for(var d=0;d<n;d++)s=t.indexOf(e.charAt(c)),c++,o=t.indexOf(e.charAt(c)),c++,l=t.indexOf(e.charAt(c)),c++,p[d]=s*r*r+o*r+l;return n=decodeCharCode(p.join(",")),n}static getQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),r=window.location.search.substr(1).match(t);return r!=null?r[2]:""}static getInviteWalletAddress(){let e=this.getQueryString("invite");return e&&(e=this.decode(e)),e}static toWei(e,t){let r=e*10**parseInt(t);return window.web3.utils.toBN("0x"+r.toString(16)).toString()}static fromWei(e,t,r=0){if(!e)return 0;let n=e.length-t+r;if(n<=0)return 0;let s=e.toString().slice(0,n);if(r){let o=s.length-r;if(o<=0){let l="0.";for(let c=0;c<Math.abs(o);c++)l+="0";s=l+s}else s=s.slice(0,s.length-r)+"."+s.slice(s.length-r)}return s}static deepClone(e){let t=new Ce;for(let r in e)typeof e[r]=="function"?t[r]=e[r]:t[r]=JSON.parse(JSON.stringify(e[r]));return t}};ym();Ve();function jc(){return Me(zn.utils.randomPrivateKey())}var Kw={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}};Bi();var $w={block:Z1({format(i){return{transactions:i.transactions?.map(t=>{if(typeof t=="string")return t;let r=ua(t);return r.typeHex==="0x7e"&&(r.isSystemTx=t.isSystemTx,r.mint=t.mint?Wt(t.mint):void 0,r.sourceHash=t.sourceHash,r.type="deposit"),r}),stateRoot:i.stateRoot}}}),transaction:Q1({format(i){let e={};return i.type==="0x7e"&&(e.isSystemTx=i.isSystemTx,e.mint=i.mint?Wt(i.mint):void 0,e.sourceHash=i.sourceHash,e.type="deposit"),e}}),transactionReceipt:av({format(i){return{l1GasPrice:i.l1GasPrice?Wt(i.l1GasPrice):null,l1GasUsed:i.l1GasUsed?Wt(i.l1GasUsed):null,l1Fee:i.l1Fee?Wt(i.l1Fee):null,l1FeeScalar:i.l1FeeScalar?Number(i.l1FeeScalar):null}}})};an();zr();_r();Ve();function MS(i,e){return BS(i)?DS(i):nv(i,e)}var qw={transaction:MS};function DS(i){PS(i);let{sourceHash:e,data:t,from:r,gas:n,isSystemTx:s,mint:o,to:l,value:c}=i,p=[e,r,l??"0x",o?Me(o):"0x",c?Me(c):"0x",n?Me(n):"0x",s?"0x1":"0x",t??"0x"];return Pi(["0x7e",qr(p)])}function BS(i){return i.type==="deposit"||typeof i.sourceHash<"u"}function PS(i){let{from:e,to:t}=i;if(e&&!Nt(e))throw new zt({address:e});if(t&&!Nt(t))throw new zt({address:t})}var Ia={contracts:Kw,formatters:$w,serializers:qw};var In=Qt({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}});var el=Qt({id:97,name:"Binance Smart Chain Testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.bnbchain.org:8545"]}},blockExplorers:{default:{name:"BscScan",url:"https://testnet.bscscan.com",apiUrl:"https://api-testnet.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0});var eh=Qt({id:8217,name:"Klaytn",nativeCurrency:{decimals:18,name:"Klaytn",symbol:"KLAY"},rpcUrls:{default:{http:["https://public-en-cypress.klaytn.net"]}},blockExplorers:{default:{name:"KlaytnScope",url:"https://scope.klaytn.com"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:96002415}}});var th=Qt({id:1890,name:"LightLink Phoenix Mainnet",network:"lightlink-phoenix",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://replicator.phoenix.lightlink.io/rpc/v1"]}},blockExplorers:{default:{name:"LightLink Phoenix Explorer",url:"https://phoenix.lightlink.io"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:125499184}},testnet:!1});var tl=Qt({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});var il=Qt({id:5e3,name:"Mantle",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Explorer",url:"https://mantlescan.xyz/",apiUrl:"https://api.mantlescan.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:304717}}});var rl=Qt({id:5003,name:"Mantle Sepolia Testnet",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.sepolia.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Testnet Explorer",url:"https://explorer.sepolia.mantle.xyz/",apiUrl:"https://explorer.sepolia.mantle.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:4584012}},testnet:!0});var ih=56,nl=Qt({id:204,name:"opBNB",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{default:{http:["https://opbnb-mainnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opBNB (BSCScan)",url:"https://opbnb.bscscan.com",apiUrl:"https://api-opbnb.bscscan.com/api"}},contracts:{...Ia.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:512881},l2OutputOracle:{[ih]:{address:"0x153CAB79f4767E2ff862C94aa49573294B13D169"}},portal:{[ih]:{address:"0x1876EA7702C0ad0C6A2ae6036DE7733edfBca519"}},l1StandardBridge:{[ih]:{address:"0xF05F0e4362859c3331Cb9395CBC201E3Fa6757Ea"}}},sourceId:ih});var rh=97,nh=Qt({id:5611,name:"opBNB Testnet",nativeCurrency:{decimals:18,name:"tBNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://opbnb-testnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opbnbscan",url:"https://testnet.opbnbscan.com"}},contracts:{...Ia.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:3705108},l2OutputOracle:{[rh]:{address:"0xFf2394Bb843012562f4349C6632a0EcB92fC8810"}},portal:{[rh]:{address:"0x4386C8ABf2009aC0c263462Da568DD9d46e52a31"}},l1StandardBridge:{[rh]:{address:"0x677311Fd2cCc511Bbc0f581E8d9a07B033D5E840"}}},testnet:!0,sourceId:rh});var Wc=1,sh=Qt({...Ia,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...Ia.contracts,disputeGameFactory:{[Wc]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[Wc]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[Wc]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[Wc]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:Wc});var ah=Qt({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});var En=class{constructor(){}};En.MONTH="months",En.DAYS="days",En.HOURS="hours",En.MINUTES="minutes",En.SECOUNDS="seconds",En.MS="ms";var ei=class ei{constructor(){}static formatMM(e){if(e<=0)return"00:000";let t,r;t=e/1e3,r=e%1e3;let n="";return t<=9&&(n+="0"),n+=Math.floor(t),n+=":",r<=9?n+="00":r<=99&&(n+="0"),n+=r,n}static format(e,t=":",r=!0){if(e<=0)return r?"00:00:00":"00:00";let n,s,o,l,c;l=e/3600,o=e%3600,c=o/60,n=o%60;let p="";return r&&(l<=9&&(p+="0"),p+=Math.floor(l)+t),c<=9&&(p+="0"),p+=Math.floor(c)+t,Math.ceil(n)<=9&&(p+="0"),p+=Math.ceil(n),p}static formatWithDay(e,t=":",r=!1){if(e<=0)return"00:00";let n,s,o,l,c;s=e/86400,o=e%86400,l=o/3600,o=o%3600,c=o/60,n=o%60;let p="";return s>=1?(p=L.instance.getLanguage(1660,Math.floor(s))+" ",l<=9&&(p+="0"),r&&n%2!=0&&(t=re.getColorText(t,"#412b20")),p+=Math.floor(l)+t,c<=9&&(p+="0"),p+=Math.floor(c)):(l<=9&&(p+="0"),p=Math.floor(l)+t,c<=9&&(p+="0"),p+=Math.floor(c)+t,Math.ceil(n)<=9&&(p+="0"),p+=Math.ceil(n)),p}static formatWithSecondByMs(e){return`${e/1e3}`}static formatWithDayByMs(e,t=":",r=!1){if(e<=0)return"00:00";let n,s,o,l,c,p;o=e/864e5,l=e%864e5,c=l/36e5,l=l%36e5,p=l/6e4,l=l%6e4,s=l/1e3,n=l%1e3;let d="";return o>=1&&(d=L.instance.getLanguage(1660,Math.floor(o))+" "),c<=9&&(d+="0"),d+=Math.floor(c)+t,p<=9&&(d+="0"),d+=Math.floor(p)+t,Math.ceil(s)<=9&&(d+="0"),d+=Math.floor(s)+" ",d+=Math.ceil(n),d}static getTimeArray(e,t="HH-MM-SS"){if(e=Math.max(0,e),t.indexOf("-")==-1)return[];let r=[],n=t.split("-");for(let s of n)s=="DD"?r.push(Math.floor(e/ei.OneDaySceond)):s=="HH"?r.push(Math.floor(e%ei.OneDaySceond/ei.OneHourSceond)):s=="MM"?r.push(Math.floor(e%ei.OneHourSceond/ei.OneMiniuteSecond)):s=="SS"&&r.push(e%ei.OneMiniuteSecond);return r}static getServerDate(e){return new Date(e)}static formatTime(e){return(parseInt(e/60+"")+100).toString().substring(1)+":"+(parseInt(e%60+"")+100).toString().substring(1)}static formatTime000000(e){return e?(parseInt(e/3600+"")+100).toString().substring(1)+":"+(parseInt(e%3600/60+"")+100).toString().substring(1)+":"+(parseInt(e%60+"")+100).toString().substring(1):"00:00:00"}static formatTimeStamp(e,t="YY-MT-DD HH:MM:SS",r=!1){let n=ei.getServerDate(e),s="";if(t.indexOf("YY")>=0&&(s=(r?n.getUTCFullYear():n.getFullYear())+"",t=t.replace("YY",s)),t.indexOf("MT")>=0){let o=(r?n.getUTCMonth():n.getMonth())+1;o>9?s=o+"":s="0"+o,t=t.replace("MT",s)}if(t.indexOf("DD")>=0){let o=r?n.getUTCDate():n.getDate();o>9?s=o+"":s="0"+o,t=t.replace("DD",s)}if(t.indexOf("HH")>=0){let o=r?n.getUTCHours():n.getHours();o>9?s=o+"":s="0"+o,t=t.replace("HH",s)}if(t.indexOf("MM")>=0){let o=r?n.getUTCMinutes():n.getMinutes();o>9?s=o+"":s="0"+o,t=t.replace("MM",s)}if(t.indexOf("SS")>=0){let o=r?n.getUTCSeconds():n.getSeconds();o>9?s=o+"":s="0"+o,t=t.replace("SS",s)}return t}static formatTimeStamps(e,t="YY-MT-DD HH:MM:SS"){let r=ei.getServerDate(e),n=t;return n=ei.parseTimeDetail(r,n,"YY",!1),n=ei.parseTimeDetail(r,n,"MT",!1),n=ei.parseTimeDetail(r,n,"DD",!1),n=ei.parseTimeDetail(r,n,"HH",!0),n=ei.parseTimeDetail(r,n,"MM",!0),n=ei.parseTimeDetail(r,n,"SS",!0),n}static parseTimeDetail(e,t,r,n){if(t.indexOf(r)>=0){let s,o;r=="YY"?o=e.getFullYear():r=="MT"?o=e.getMonth()+1:r=="DD"?o=e.getDate():r=="HH"?o=e.getHours():r=="MM"?o=e.getMinutes():r=="SS"&&(o=e.getSeconds()),o>9||!n?s=o.toString():s="0"+o,t=t.replace(r,s)}return t}static getServerTimeStr(){return ei.formatTimeStamp(Laya.timer.currTimer)}static getTimeArr(){return ei.getServerTimeStr().split("/")}static get getDay(){let t=ei.getServerTimeStr().split("/");return parseInt(t[2])}static parseSheetTime(e){let t="";if(e){let r=e.length;for(let n=0;n<r;n++){let s="";e[n]<10?s="0"+e[n]:s=e[n],n!==r-1&&(s=s+":"),t+=s}}return t}static dateStringToTimestamp(e,t){let[r,n,s]=e.split("-").map(Number),o=Number(t),l=new Date(r,n-1,s,o).getTime();return Number(l)}static getTimestamp(e,t,r,n,s){return new Date(e,t-1,r,n,s).getTime()}static getCurrentDayTimestamp(){let e=new Date,t=e.getHours();return e.setHours(t,0,0,0),e.getTime()}static getYearMonthDat(e){let t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1<10?"0"+(t.getMonth()+1):""+(t.getMonth()+1),s=t.getDate()<10?"0"+t.getDate():""+t.getDate();return`${r}-${n}-${s}`}static formatDayAndTime(e,t="-"){let r=new Date(e),n=r.getFullYear(),s=String(r.getMonth()+1).padStart(2,"0"),o=String(r.getDate()).padStart(2,"0"),l=String(r.getHours()).padStart(2,"0"),c=String(r.getMinutes()).padStart(2,"0");return{date:`${n}${t}${s}${t}${o}`,time:`${l}:${c}`}}static formatTimeAgo(e){return e<60*1e3?L.instance.getLanguage(1188):e<60*60*1e3?L.instance.getLanguage(2004,Math.floor(e/6e4)):e<24*60*60*1e3?L.instance.getLanguage(2003,Math.floor(e/36e5)):L.instance.getLanguage(2002,Math.floor(e/(24*60*60*1e3)))}static colorTimeAgo(e){return e<60*1e3?"#43ef74":"#b4b4b4"}static formatTimeExpires(e){return e<60*1e3?L.instance.getLanguage(1214,e):e<60*60*1e3?L.instance.getLanguage(1215,Math.floor(e/6e4)):e<24*60*60*1e3?L.instance.getLanguage(1216,Math.floor(e/36e5)):L.instance.getLanguage(1217,Math.floor(e/(24*60*60*1e3)))}static getTimeDifference(e,t=En.MONTH){let r=new Date,s=new Date(e*1e3).getTime()-r.getTime();if(s<0)return{months:0,days:0,hours:0,minutes:0,seconds:0,ms:0};let o=s,l=Math.floor(s/1e3),c=Math.floor(l/60),p=Math.floor(c/60),d=Math.floor(p/24),h=Math.floor(d/30);return t==="months"?(d%=30,p%=24,c%=60,l%=60,o%=1e3):t==="days"?(p%=24,c%=60,l%=60,o%=1e3,h=0):t==="hours"?(c%=60,l%=60,o%=1e3,h=0,d=0):t==="minutes"?(l%=60,o%=1e3,h=0,d=0,p=0):t==="seconds"?(o%=1e3,h=0,d=0,p=0,c=0):t==="ms"&&(h=0,d=0,p=0,c=0,l=0),{months:t==="months"?h:0,days:t==="months"||t==="days"?d:0,hours:t==="months"||t==="days"||t==="hours"?p:0,minutes:t==="months"||t==="days"||t==="hours"||t==="minutes"?c:0,seconds:t!=="ms"?l:0,ms:o}}static checkTimeValid(e){let t=Math.floor(Date.now()/1e3),r=24*60*60;return!(t-e>r)}};ei.OneDaySceond=24*3600,ei.OneHourSceond=3600,ei.OneMiniuteSecond=60;var Mt=ei;var te=class i{constructor(){this.tokenContract=null;this.hero_contract=null;this.loginRequestInfo={time:0,randomHex:"",r:"",s:"",v:"",roleId:""}}get getloginRequestInfo(){return this.loginRequestInfo}static get instance(){return i._instance||(i._instance=new i),i._instance}async init(){if(typeof window.ethereum>"u"||$.Debug==2){ee.instance.notice(L.instance.getLanguage(130));return}Ye.instance.sendCustumEvent(10),this.walletClient=qo({transport:Po(window.ethereum)});var e,t=await i.instance.walletClient.getChainId();e=this.getChain(t),e||(e=In),this.publicClient=kc({chain:e,transport:_c()}),this.walletClient=qo({chain:e,transport:Po(window.ethereum)});let r=await i.instance.publicClient.getChainId();console.log("clientChainId",t,r),Ye.instance.sendCustumEvent(12),this.registerProxy(),Ye.instance.sendCustumEvent(17)}async registerProxy(){Ra.instance.init()}async getWalletAddress(){if(this.walletAddress)return this.walletAddress;let[e]=await this.walletClient.requestAddresses();return console.log("钱包地址===============》",e),e;if(await initWeb3(),gr.type==gr.TYPE_TRUST)try{console.log("initWeb3 -3");let t=await gr.trustProvider.request({method:"eth_requestAccounts"});return console.log("initWeb3 -4"),console.log(t),t[0]}catch(t){console.log("initWeb3 -5"+t),t.code===4001&&console.error("User denied connection.")}else if(gr.type==gr.TYPE_WEB3)return(await window.ethereum.request({method:"eth_requestAccounts"}))[0];return null}async dappLogin(){console.log("dappLogin this.walletAddress: "+this.walletAddress),Ye.instance.sendCustumEvent(13),this.walletAddress=await this.getWalletAddress(),Ye.instance.sendCustumEvent(14),console.log("login to server",1),await this.signAndLogin(),console.log("login success",1)}getChainId(){let e="";return typeof window.ethereum>"u"&&(e="0x38"),(window.ethereum.chainId+"").indexOf("0x")==-1?e="0x"+window.ethereum.chainId.toString(16):e=window.ethereum.chainId,e!=="0x38"&&e!=="0x61"&&ee.instance.notice(L.instance.getLanguage(18)),e}async signAndLogin(e=!1){var t=!1;let r=new Date().getTime(),n="",s="",o="",l="";if($.Debug!=0)t=!1;else{let f=localStorage.getItem("TOX-COOKIE-CODE"+i.instance.walletAddress);if(!e&&f){f=Zr.decode(f);let g=f.split("&");r=parseFloat(g[0]),n=g[1],s=g[2],o=g[3],l=g[4];let E=Mt.checkTimeValid(r);f&&r&&E&&n&&s&&o&&l&&(t=!1),console.log("needSign: "+t)}}if(t){console.log("111");var c=jc().substring(0,32);n=Me(c,{size:32}),console.log("222"),r=new Date().getTime();let g=this.walletAddress+n+r,E=new oh.default("SHA-256","TEXT",{encoding:"UTF8"});E.update(g);let I=E.getHash("HEX");if(console.log("进入签名",1),this.walletClient)try{let _=await this.walletClient.signMessage({account:this.walletAddress,message:I});console.log("签名结束",1);let S=_.substring(2);s="0x"+S.substring(0,64),o="0x"+S.substring(64,128),l="0x"+S.substring(128,130)}catch{ee.instance.notice("签名失败,重新签名"),Laya.timer.once(1e3,this,this.signAndLogin,[e]);return}}let p={roleId:this.walletAddress,time:r,randomHex:n,r:s,s:o,v:l};this.loginRequestInfo.time=r,this.loginRequestInfo.randomHex=n,this.loginRequestInfo.r=s,this.loginRequestInfo.s=o,this.loginRequestInfo.v=l,this.loginRequestInfo.roleId=this.walletAddress,Ye.instance.sendCustumEvent(15);var d=Zr.encode(r+"&"+n+"&"+s+"&"+o+"&"+l);localStorage.setItem("TOX-COOKIE-CODE"+i.instance.walletAddress,d),si.connect();return;if(h){if(console.log("服务器登录成功"),h.status==1){re.alertNoAll(Xe.instance.get(2));return}Ye.instance.sendCustumEvent(16),localStorage.setItem("TOX-COOKIE"+i.instance.walletAddress,h.loginToken);var d;localStorage.setItem("TOX-COOKIE-CODE"+i.instance.walletAddress,d)}else ne.intance.openModule(y.NoServerView)}async main(){let e=kc({chain:tl,transport:_c()}),t=qo({chain:tl,transport:Po(window.ethereum)}),r=await e.getBalance({address:"0x55d398326f99059fF775485246999027B3197955"});console.log("balance:"+r);let[n]=await t.requestAddresses();console.log("address:"+n);let s=await t.signMessage({account:n,message:"Hello world!"});console.log("address: "+n),console.log("message: Hello world!"),console.log("signature: "+s);let o=await e.verifyMessage({address:n,message:"Hello world!",signature:s});console.log("valid: "+o);let c=await(await fetch("http://localhost:3000/api/login",{method:"POST",body:JSON.stringify({address:t.account.address,signature:s})})).json();console.log("data: "+c)}async refreshToken(){let e,t=localStorage.getItem("TOX-COOKIE-CODE"+i.instance.walletAddress);t=Zr.decode(t);let r=t.split("&"),n=parseFloat(r[0]),s=r[1],o=r[2],l=r[3],c=r[4];if(n&&s&&o&&l&&c){let p={debug:$.Debug,address:this.walletAddress,time:n,randomHex:s,r:o,s:l,v:c};e=await se.requestPost("wxgame/player/getJwt",p,!1,!1).catch(d=>{}),e&&localStorage.setItem("TOX-COOKIE"+i.instance.walletAddress,e.loginToken)}return e}async checkNickName(e){console.log("checkNickName");let t={name:e,address:this.walletAddress};return await se.requestPost("wxgame/player/nameCheck",t,!1,!1).catch(n=>{Pe.instance.hideLoading(),console.log("checkResult 失败")})}waitGetAccount(){Laya.timer.loop(2e3,this,this.getAcccount)}async getAcccount(){console.log("getAcccount");var e=!0;let t=new Date().getTime(),r="",n="",s="",o="";if($.Debug!=0)e=!1;else{let d=localStorage.getItem("TOX-COOKIE-CODE"+i.instance.walletAddress);d=Zr.decode(d);let h=d.split("&");t=parseFloat(h[0]),r=h[1],n=h[2],s=h[3],o=h[4],t&&r&&n&&s&&o&&(e=!1),console.log("needSign: "+e)}if(e){var l=jc().substring(0,32);r=Me(l,{size:32}),t=new Date().getTime();let h=this.walletAddress+r+t,f=new oh.default("SHA-256","TEXT",{encoding:"UTF8"});f.update(h);let g=f.getHash("HEX");console.log("进入签名",1);let E=await this.walletClient.signMessage({account:this.walletAddress,message:g});console.log("签名结束",1);let I=E.substring(2);n="0x"+I.substring(0,64),s="0x"+I.substring(64,128),o="0x"+I.substring(128,130)}let c,p={address:this.walletAddress,time:t,randomHex:r,r:n,s,v:o};if(c=await se.requestPost("wxgame/player/getAccount",p,!1,!1).catch(d=>{}),c){Laya.timer.clear(this,this.getAcccount);let d=c.playerDto;localStorage.setItem("TOX-COOKIE"+i.instance.walletAddress,c.loginToken),A.intance.event(v.EVENT_WAIT_PLAYERINFO,d)}}async createAcccount(e,t,r,n,s){console.log("createAcccount");var o=!0;let l=new Date().getTime(),c="",p="",d="",h="";if($.Debug!=0)o=!1;else{let S=localStorage.getItem("TOX-COOKIE-CODE"+i.instance.walletAddress);S=Zr.decode(S);let M=S.split("&");l=parseFloat(M[0]),c=M[1],p=M[2],d=M[3],h=M[4],l&&c&&p&&d&&h&&(o=!1),console.log("needSign: "+o)}if(o){var f=jc().substring(0,32);c=Me(f,{size:32}),l=new Date().getTime();let M=this.walletAddress+c+l,R=new oh.default("SHA-256","TEXT",{encoding:"UTF8"});R.update(M);let V=R.getHash("HEX");if(console.log("进入签名",1),this.walletClient){let H=await this.walletClient.signMessage({account:this.walletAddress,message:V});console.log("签名结束",1);let K=H.substring(2);p="0x"+K.substring(0,64),d="0x"+K.substring(64,128),h="0x"+K.substring(128,130)}}let g,E={name:e,sex:t,icon:r,country:n,referral:s,debug:$.Debug,address:this.walletAddress,time:l,randomHex:c,r:p,s:d,v:h};var I=X.snake.socket.MessageType.MSG_USER_REGISTER,_=X.snake.socket.CS_USER_REGISTER.fromObject({icon:r,userName:e,country:n,walletAddr:this.walletAddress,invite:s});return si.send(I,_),null;if(g=await se.requestPost("wxgame/player/create",E,!1,!1).catch(S=>{}),g){let S=g.playerDto;return localStorage.setItem("TOX-COOKIE"+i.instance.walletAddress,g.loginToken),S}return null}async getBalance(){return 0}async allowanceAddress(e){}async newAllowanceAddress(e,t){let r=i.instance.walletAddress,n=e;try{if(console.log("查看是否已经授权, owner:"+r+", spender:"+n+", publicClient.chain.id:"+this.publicClient.chain.id),t==0)return!0;let s=await i.instance.publicClient.readContract({address:t,abi:Ae.TOKEN_ERC20ABI,functionName:"allowance",args:[r,n]});if(s=="0"){console.log("未授权，进行授权, owner:"+r+", allowance:"+s+", walletClient.chain.id:"+this.walletClient.chain.id);let o=await i.instance.walletClient.writeContract({address:t,abi:Ae.TOKEN_ERC20ABI,functionName:"approve",args:[n,"100000000000000000000000000000000000000000000000"],account:r});console.log("授权hash============"+o);let l=await i.instance.publicClient.waitForTransactionReceipt({hash:o});return console.log(`Tx with hash: ${o}`,l),l&&l.status=="success"?(console.log(`Tx successful with hash: ${o}`),!0):!1}else return console.log("已授权, owner:"+r+", allowance:"+s),!0}catch(s){if(console.log("授权错误====》",s),s instanceof Error){let o=s.message;console.log("授权错误====》",o)}}}async allowanceAddressByTokenAddress(e,t){let r=new window.web3.eth.Contract(Ae.TOKEN_ERC20ABI,t);return await r.methods.allowance(this.walletAddress,e).call()=="0"&&(console.log("ERC20 allowance!"),await r.methods.approve(e,"100000000000000000000000000000000000000000000000").send({from:this.walletAddress},(s,o)=>{if(s)return Pe.instance.hideLoading(),!1})),!0}async getERC20TokenBalance(e){return window.ethereum,await new window.web3.eth.Contract(Ae.TOKEN_ERC20ABI,e).methods.balanceOf(this.walletAddress).call()}async getBalance2(e,t=void 0){let r=this.walletAddress;t&&(r=t);let n;return!e||e==Ae.ADDRESS0?n=await i.instance.publicClient.getBalance({address:r}):n=await this.publicClient.readContract({address:e,abi:Ae.TOKEN_ERC20ABI,functionName:"balanceOf",args:[r]}),console.log("getBalance2 publicClient.chain.id:"+this.publicClient.chain.id,"代币地址",e,"余额：",n),n}async getIgoUSD(){let e=$.vType==2?Ae.IGO_ADDRESS:Ae.IGO_ADDRESS_TEST;return await this.publicClient.readContract({address:e,abi:Ae.IGO_ABI,functionName:"USD"})}async getIgoLimitTime(){let e=$.vType==2?Ae.IGO_ADDRESS:Ae.IGO_ADDRESS_TEST;return await this.publicClient.readContract({address:e,abi:Ae.IGO_ABI,functionName:"deadline"})}async getIgoRecord(){let e=$.vType==2?Ae.IGO_ADDRESS:Ae.IGO_ADDRESS_TEST,t=this.walletAddress;return await this.publicClient.readContract({address:e,abi:Ae.IGO_ABI,functionName:"getRecords",args:[t]})}async rechargeIgoUSD(e,t,r){let n=$.vType==2?Ae.IGO_ADDRESS:Ae.IGO_ADDRESS_TEST,s=this.walletAddress,o=Number(_n(e+"",18)),l=await se.requestPost("wxgame/fodc/getSignature",{amount:o,chainId:t,contract:n});if(l&&l.signInfo){let c=l.signInfo;try{if(Pe.instance.showLoading(),!await i.instance.newAllowanceAddress(n,r))return Pe.instance.hideLoading(),ee.instance.notice(L.instance.getLanguage(15)),!1;let d=c.amount,h=BigInt(d.toString()),f=await i.instance.walletClient.writeContract({address:c.contract,abi:Ae.IGO_ABI,functionName:"recharge",args:[c.address,h,c.inviteAddress,c.deadline,c.signature],account:s}),g;if(g=await i.instance.publicClient.waitForTransactionReceipt({hash:f,pollingInterval:1e3}),g&&g.status=="success")return console.log(`Tx successful with hash: ${f}`),Pe.instance.hideLoading(),f;Pe.instance.hideLoading(),re.TransactionErrorTip();return}catch(p){Pe.instance.hideLoading(),re.TransactionErrorTip(),console.log(p)}}}async getRechargedIgoUSD(){let e=$.vType==2?Ae.IGO_ADDRESS:Ae.IGO_ADDRESS_TEST,t=i.instance.walletAddress;return await this.publicClient.readContract({address:e,abi:Ae.IGO_ABI,functionName:"getAmounts",args:[t]})}async getAllRechargedMoney(){let e=$.vType==2?Ae.IGO_ADDRESS:Ae.IGO_ADDRESS_TEST,t=i.instance.walletAddress;return await this.publicClient.readContract({address:e,abi:Ae.IGO_ABI,functionName:"totalQuota"})}async getMyAllRechargedMoney(){let e=$.vType==2?Ae.IGO_ADDRESS:Ae.IGO_ADDRESS_TEST,t=i.instance.walletAddress;return await this.publicClient.readContract({address:e,abi:Ae.IGO_ABI,functionName:"getAmounts",args:[t]})}async getBankBalance(e,t,r){if(r=="WBNB"){let n=await i.instance.publicClient.getBalance({address:t});if(n)return n}else{let n=this.getBalance2(e,t);if(n)return n}}async getHeroStatus(e){return await this.hero_contract.methods.getStatus(parseInt(e)).call()}async checkHeroIsBuzy(e){let t=await this.getHeroStatus(e);return parseInt(t)?(ee.instance.notice(L.instance.getLanguage(19)),!0):!1}async switchChain(e){var t=this.getChainName(e);let r=await i.instance.walletClient.getChainId();if($.isInto&&Laya.Browser.onIOS&&r!==e)return ee.instance.notice(L.instance.getLanguage(1172,t)),!1;try{console.log("switchChain id:"+e),await this.walletClient.switchChain({id:e})}catch(n){if(console.log(n),n instanceof Error){let s=n.message;console.log("切换错误====》",s)}return ee.instance.notice(L.instance.getLanguage(1172,t)),!1}return await this.resetPublicAndWallet(e),!0}async addChain(e){console.log(e);var t=this.getChain(e);let r=await this.walletClient.addChain({chain:t});console.log(r)}getChain(e){var t=null;switch(e){case In.id:t=In;break;case el.id:t=el;break;case tl.id:t=tl;break;case sh.id:t=sh;break;case ah.id:t=ah;break;case eh.id:t=eh;break;case th.id:t=th;break;case nl.id:t=nl;break;case nh.id:t=nh;break;case il.id:t=il;break;case rl.id:t=rl;break}return t}getChainName(e){var t="",r=this.getChain(e);return r&&(t=r.name),t}async resetPublicAndWallet(e){console.log("resetPublicAndWallet chain:"+e);var t=this.getChain(e);await i.instance.reInitPublicClient(t),await i.instance.reInitWalletClient(t)}reInitPublicClient(e){console.log("reInitPublicClient chain:"+e),this.publicClient=kc({chain:e,transport:_c()})}reInitWalletClient(e){console.log("reInitWalletClient chain:"+e),this.walletClient=qo({chain:e,transport:Po(window.ethereum)})}async getAuthStatus(){let e=i.instance.walletAddress;try{return await i.instance.publicClient.readContract({address:Ae.SAT_ADDRESS,abi:Ae.SAT_ABI,functionName:"getAuthStatus",args:[e]})}catch(t){if(console.log("授权错误====》",t),t instanceof Error){let r=t.message;console.log("授权错误====》",r)}}}};var qn=class qn{constructor(e,t){this._lineIndex=0;this._isShow=!1;this._alpha=.6;this.isInit=!1;this._isRelease=!0;this._count=0;this.maxCount=1e3;this.prevX=0;this.prevY=0;this._stage=e,this._isRelease=t,this._actionLineList=[],this._time=new Date().getTime();let r,n,s,o,l=function(d){r=d.stageX,n=d.stageY,s=r,o=n},c=function(d){s=d.stageX,o=d.stageY},p=function(d){let h=Laya.stage.width-(s-r)<160,f=Laya.stage.height-(o-n)<160;h&&f&&Sn.debugger&&(Laya.Browser.window.console.log=Sn.addConsoleLog,Sn.debugger.showOrHide())};Laya.stage.on(Laya.Event.MOUSE_DOWN,this,l),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,c),Laya.stage.on(Laya.Event.MOUSE_UP,this,p)}initDebugView(){if(!this.isInit){this.totalW=Laya.stage.width,this.totalH=Laya.stage.height/2,this.bigContainer=new Laya.Sprite,this.bigContainer.zOrder=2e3,this.bigContainer.name="bigContainerDebug",this.bgContainer=new Laya.Sprite,this._bgSp=new Laya.Sprite,this._bgSp.alpha=this._alpha,this._bgSp.graphics.drawRect(0,0,this.totalW,this.totalH,"#000000"),this._bgSp.mouseEnabled=!1,this._debugInfoTf=new Laya.Text,this._debugInfoTf.color="#ffffff",this._debugInfoTf.width=this.totalW-10,this._debugInfoTf.height=this.totalH-10,this._debugInfoTf.overflow="scroll",this._debugInfoTf.wordWrap=!0;let e="[LOADINFO - DEBUGGER]";this.appendText("加载调试信息 "+e,0,!1),this._closeTf=new Laya.Label,this._closeTf.color="#ff0000",this._closeTf.valign="middle",this._closeTf.width=55,this._closeTf.height=55,this._closeTf.borderColor=qn.DEFAULT_COLOR,this._closeTf.text="关闭",this._autoScrollTf=new Laya.Label,this._autoScrollTf.color="#ff0000",this._autoScrollTf.valign="middle",this._autoScrollTf.width=55,this._autoScrollTf.height=55,this._autoScrollTf.borderColor=qn.DEFAULT_COLOR,this._autoScrollTf.text="自动卷屏",this._bgAlpha0=new Laya.Label,this._bgAlpha0.color="#ff0000",this._bgAlpha0.valign="middle",this._bgAlpha0.width=55,this._bgAlpha0.height=55,this._bgAlpha0.borderColor=qn.DEFAULT_COLOR,this._bgAlpha0.text="背景-",this._bgAlpha1=new Laya.Label,this._bgAlpha1.color="#ff0000",this._bgAlpha1.valign="middle",this._bgAlpha1.width=55,this._bgAlpha1.height=55,this._bgAlpha1.borderColor=qn.DEFAULT_COLOR,this._bgAlpha1.text="背景+",this._clearTf=new Laya.Label,this._clearTf.color="#ff0000",this._clearTf.valign="middle",this._clearTf.width=55,this._clearTf.height=55,this._clearTf.borderColor=qn.DEFAULT_COLOR,this._clearTf.text="清理",this._testTf=new Laya.Label,this._testTf.color="#ff0000",this._testTf.width=55,this._testTf.height=55,this._testTf.borderColor=qn.DEFAULT_COLOR,this._testTf.text="点穿",this.bgContainer.x=5,this.bgContainer.y=5,this._debugInfoTf.x=5,this._debugInfoTf.y=5,this.bgContainer.addChild(this._bgSp),this.bgContainer.addChild(this._debugInfoTf),this._closeTf.x=this.totalW-60,this._closeTf.y=5,this.bgContainer.addChild(this._closeTf),this._autoScrollTf.x=this.totalW-60,this._autoScrollTf.y=105,this.bgContainer.addChild(this._autoScrollTf),this._bgAlpha0.x=this.totalW-60,this._bgAlpha0.y=205,this.bgContainer.addChild(this._bgAlpha0),this._bgAlpha1.x=this.totalW-60,this._bgAlpha1.y=305,this.bgContainer.addChild(this._bgAlpha1),this._clearTf.x=this.totalW-60,this._clearTf.y=405,this.bgContainer.addChild(this._clearTf),this._testTf.x=this.totalW-60,this._testTf.y=505,this.bigContainer.addChild(this.bgContainer),this.bigContainer.addChild(this._testTf),this._autoScroll=!0,this._hide=!0,this._debugInfoTf.on(Laya.Event.MOUSE_DOWN,this,this.startScrollText),this._closeTf.on(Laya.Event.CLICK,this,this.onCloseTfClick),this._autoScrollTf.on(Laya.Event.CLICK,this,this.onAutoScrollTfClick),this._bgAlpha0.on(Laya.Event.CLICK,this,this.onBgAlpha0),this._bgAlpha1.on(Laya.Event.CLICK,this,this.onBgAlpha1),this._clearTf.on(Laya.Event.CLICK,this,this.onClearTfClick),this._testTf.on(Laya.Event.CLICK,this,this.onTestTfClick),this.isInit=!0}}show(){this.initDebugView(),this._stage.addChild(this.bigContainer),this._isShow=!0,this.updateView()}hide(){this.initDebugView(),this.bigContainer.parent&&this.bigContainer.parent.removeChild(this.bigContainer),this._isShow=!1,this.updateView()}showOrHide(){this._isShow=!this._isShow,this._isShow?this.show():this.hide()}appendText(e,t=0,r=!0){if(r){let n=new Date().getTime()-this._time;e+="  ["+(n/1e3).toFixed(3)+"]"}this._actionLineList.push([e+`
`,t]),this._lineIndex>=200&&(this._actionLineList.splice(0,20),this._lineIndex-=20),this._count++,this._count>this.maxCount&&(this._count=0,this._debugInfoTf&&(this._debugInfoTf.text="")),this._isShow&&(this._currentLine=this._actionLineList[this._lineIndex++],this._debugInfoTf&&(this._debugInfoTf.text+=this._currentLine[0]),this._autoScroll&&this._debugInfoTf&&(this._debugInfoTf.scrollY=this._debugInfoTf.maxScrollY))}updateView(){if(this._isShow){this._count=0,this._debugInfoTf.text="";let e=this._actionLineList.length;for(this._lineIndex=0;this._lineIndex<e;++this._lineIndex)this._currentLine=this._actionLineList[this._lineIndex],this._debugInfoTf.text+=this._currentLine[0],this._count++,this._count>this.maxCount&&(this._count=0,this._debugInfoTf.text="");this._autoScroll&&(this._debugInfoTf.scrollY=this._debugInfoTf.maxScrollY)}else this._debugInfoTf.text=""}onCloseTfClick(e){this.hide()}onAutoScrollTfClick(e){this._autoScroll=!this._autoScroll,this._autoScroll?this._autoScrollTf.text="自动卷屏":this._autoScrollTf.text="手动卷屏"}onBgAlpha0(e){this._alpha-=.1,this._alpha<=0&&(this._alpha=0),this._bgSp.alpha=this._alpha}onBgAlpha1(e){this._alpha+=.1,this._alpha>=1&&(this._alpha=1),this._bgSp.alpha=this._alpha}onClearTfClick(e){this._debugInfoTf.text="",this._actionLineList.length=0,this._lineIndex=0}onTestTfClick(e){this.bgContainer.mouseEnabled=!this.bgContainer.mouseEnabled}set testFun(e){this._testFun=e}get bgSp(){return this._bgSp}startScrollText(e){this.prevX=this._debugInfoTf.mouseX,this.prevY=this._debugInfoTf.mouseY,Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.scrollText),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.finishScrollText)}finishScrollText(e){Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.scrollText),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.finishScrollText)}scrollText(e){let t=this._debugInfoTf.mouseX,r=this._debugInfoTf.mouseY;this._debugInfoTf.scrollX+=this.prevX-t,this._debugInfoTf.scrollY+=this.prevY-r,this.prevX=t,this.prevY=r}};qn.DEFAULT_COLOR="#ffffff";var lh=qn;var Sn=class i{static Initialize(e,t){i.isRelease=t,this.debugger==null&&(this.debugger=new lh(e,t))}static log(e,t=0,r=0){var n=re.GetLogTime+" "+e;t&&i.addLog(n,t,r)}static addLog(e,t=0,r=0){this.debugger&&this.debugger.appendText(e,r),console.log(e)}static addConsoleLog(...e){i.debugger&&i.debugger.appendText(e,0)}};var Yw=Laya.HttpRequest,_i=class _i{static requestGet(e,t,r=!1,n=!0,s=!1){return new Promise((o,l)=>{var c=Laya.Pool.getItem("HttpRequest");c||(c=new Yw),c.http.timeout=2e3,c.on(Laya.Event.COMPLETE,null,g),c.on(Laya.Event.ERROR,null,E),c.http.onreadystatechange=()=>{if(c.http.readyState===XMLHttpRequest.DONE){var _=c.http.status;_>=200&&_<400||(l(),I())}};let p=localStorage.getItem("TOX-COOKIE"+te.instance.walletAddress),d=["Content-Type","application/json"];p&&(d=[...d,"Authorization",p]);let h;e.startsWith("http")?h=e+f(t):h=_i.httpRoot+"/"+e+f(t),_i.httpRoot!="https://api.phantomarena.co"&&Sn.log("REQUEST_GET "+h,1),c.send(h,null,"get","json",d);function f(_){if(typeof _=="string")return _;let S="";for(let M in _)S+="&"+M+"="+_[M];return S}function g(_){_.code==="0"?o(_.data):(Xe.instance.showErrorWord(parseInt(_.code)),l(_.code)),I()}function E(_,S){debugger;l(_),I()}function I(){c.off(Laya.Event.COMPLETE,null,g),c.off(Laya.Event.ERROR,null,E),Laya.Pool.recover("HttpRequest",c)}})}static startHeart(){Laya.stage.on(Laya.Event.BLUR,this,()=>{this.stopHeartInStage=!0,console.log("失去焦点, 停止心跳")}),Laya.stage.on(Laya.Event.FOCUS,this,()=>{this.stopHeartInStage=!1,console.log("获取焦点, 开始心跳")}),Laya.timer.loop(3e3,this,this.onHeart)}static async onHeart(){console.log("onHeart");return;var t,n,s,o,l,c}static requestPost(e,t,r=!1,n=!0,s=!1){let o=localStorage.getItem("TOX-COOKIE"+te.instance.walletAddress);return r&&!o?[]:new Promise((l,c)=>{var p=Laya.Pool.getItem("HttpRequest");p||(p=new Yw),p.http.timeout=1e4,p.once(Laya.Event.COMPLETE,null,f),p.once(Laya.Event.ERROR,null,g);let d=[];o&&n&&(d=[...d,"Authorization",o]);var h=_i.seq+1;_i.seq=h,e=="wxgame/sys/ping"?$.showHeartLog&&console.log(re.GetLogTime+" "+h+" >>> HTTP_POST "+_i.httpRoot+"/"+e+" "+JSON.stringify(t),o):console.log(re.GetLogTime+" "+h+" >>> HTTP_POST "+_i.httpRoot+"/"+e+" "+JSON.stringify(t),o),e.startsWith("http")?p.send(e,t,"post","json",d):p.send(_i.httpRoot+"/"+e,t,"post","json",d);async function f(I){if(e=="wxgame/sys/ping"?$.showHeartLog&&console.log(re.GetLogTime+" "+h+" <<< hTTP_RCV data: "+JSON.stringify(I),1):console.log(re.GetLogTime+" "+h+" <<< hTTP_RCV data: "+JSON.stringify(I),1),I.errorCode==0||I.errorCode==="0")l(I);else{if(I.errorCode===10)re.heroNotEnought();else if(I.errorCode===18)re.titickNotEnought();else if(I.errorCode===26)re.RemError();else if(I.errorCode!==29)if(I.errorCode===30)re.NoHeroError(Xe.instance.get(I.errorCode));else if(I.errorCode===32)re.NoHeroError(Xe.instance.get(I.errorCode));else if(I.errorCode===2||I.errorCode===21)re.alertNoAll(Xe.instance.get(I.errorCode));else if(I.errorCode===5)if($.Debug==0){localStorage.setItem("TOX-COOKIE"+te.instance.walletAddress,"");var _=await te.instance.refreshToken();_&&_i.requestPost(e,t,r,n)}else localStorage.setItem("TOX-COOKIE"+te.instance.walletAddress,""),Xe.instance.showErrorWord(parseInt(I.errorCode));else I.errorCode===17?$.Debug==0?(localStorage.setItem("TOX-COOKIE"+te.instance.walletAddress,""),te.instance.signAndLogin(),Xe.instance.showErrorWord(parseInt(I.errorCode))):(localStorage.setItem("TOX-COOKIE"+te.instance.walletAddress,""),Xe.instance.showErrorWord(parseInt(I.errorCode))):I.errorCode===9?($i.instance.close(),re.commTipWithYes(Xe.instance.get(I.errorCode))):I.errorCode===51?re.commTipWithYes(Xe.instance.get(I.errorCode)):s||Xe.instance.showErrorWord(parseInt(I.errorCode),I.errorParams);c(I.errorCode)}E()}function g(I,_){console.log("errorHandler data: "+I,1),s||Xe.instance.showErrorWord(500),c(I),E()}function E(){p.off(Laya.Event.COMPLETE,null,f),p.off(Laya.Event.ERROR,null,g),Laya.Pool.recover("HttpRequest",p)}})}};_i.httpRoot=getServer(),_i.needHeart=!0,_i.stopHeartInRoom=!1,_i.stopHeartInStage=!1,_i.lastPreContractstartRoomId=-1,_i.lastPrecontractReadyRoomId=-1,_i.seq=0;var se=_i;var Jr=class Jr{constructor(){}static trim(e,t=null){t||(t=[" ","\r",`
`,"	",String.fromCharCode(65279)]);var r,n,s;for(r=e,s=t.length,n=0;n<s;n++)r=Jr.getReplace(r,t[n],"");return r}static getReplace(e,t,r){if(!e)return"";var n;return n=e.replace(new RegExp(t,"g"),r),n}static isEmpty(e){return e.length<1?!0:Jr.emptyStrDic.hasOwnProperty(e)}static trimLeft(e){var t;t=0;var r;for(r=e.length;Jr.isEmpty(e.charAt(t))&&t<r;)t++;return t<r?e.substr(t):""}static trimRight(e){var t;for(t=e.length-1;Jr.isEmpty(e.charAt(t))&&t>=0;)t--;var r;return r=e.substring(0,t),t>=0?e.substring(0,t+1):""}static trimSide(e){var t;return t=Jr.trimLeft(e),t=Jr.trimRight(t),t}static shortStr(e,t){return e.length>t?e.substr(0,t)+"...":e}static shortHeroStr(e,t=10){return Jr.abbreviateString(e,t)}static abbreviateString(e,t=11){if(e.length<=t)return e;{let r=Math.floor((t-3)/2);return e.slice(0,r)+"..."+e.slice(-r)}}static caseInsensitiveSearchWithRegex(e,t){return new RegExp(t,"i").test(e)}static formatWalletAddress(e){let n="...";return e.length<=12+10?e:`${e.substring(0,12)}${n}${e.substring(e.length-10)}`}};Jr.ANONYMOUS_NAME="***",Jr.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"	":!0};var qi=Jr;var Ea=class{constructor(){this._color=1;this.isLvUp=!1;this.newAddCnt=0}get simgurl(){return J.instance.getHeroHeadRes(this.heroItem.serialId,this.color)}get sk(){return J.instance.getHeroSkRes(this.heroItem.serialId,this.color)}get id(){return this._id}set id(e){this._id=e,this.heroItem=j.intance.m_dicHeros.get(e+"")}get name(){return L.instance.getLanguage(this.heroItem.name)}set name(e){this._name=e}get color(){return this._color}set color(e){e&&(this._color=e)}get m_iNum(){return this._m_iNum}set m_iNum(e){this._m_iNum=e}};var bt=class i{constructor(e=0){this._m_iLevel=0;this._m_arrDisc=[];this.newAddCnt=0;this.isScholarship=!1;this.isLvUp=!1;this.needTip=!0;this.m_bSalon=!1;this.m_bIsSetId=!1;e!=0&&(this.m_iId=e)}get m_sIcon(){return this._m_sIcon}set m_sIcon(e){this._m_sIcon=e}get m_iLevel(){return this._m_iLevel>0?this._m_iLevel:1}set m_iLevel(e){this._m_iLevel=e||0}get m_iNum(){return this._m_iNum}set m_iNum(e){this._m_iNum=e}get m_iPk(){return this._m_iPk}set m_iPk(e){this._m_iPk=e}copyItem(){let e=new i;return e.m_iId=this.m_iId,e.m_iOriginalId=this.m_iOriginalId,e}get m_bTry(){return this.m_iId==this.m_iOriginalId?this._m_bSet=!1:this._m_bSet=!0,this._m_bSet}get m_strName(){return L.instance.getLanguage(this.itemItem.name)}set m_bTry(e){this._m_bSet=e}get m_iId(){return this._m_iId}set m_iId(e){this._m_iId=e,this.m_bIsSetId||(this.m_bIsSetId=!0,this.m_iOriginalId=e),this.setConfigData()}setConfigData(){if(this.m_iId!=0){if(this.itemItem=j.intance.m_dicItems.get(this.m_iId.toString()),!this.itemItem){console.log("[          <items> find out id:"+this.m_iId+"             ]");return}if(this.subType=parseInt(this.itemItem.subType+""),this.backType=parseInt(this.itemItem.backPack+""),this.type=parseInt(this.itemItem.type+""),this.m_sIcon=this.itemItem.icon,this.itemItem.buy_price){this.m_iPrice=this.itemItem.buy_price[0][1];let e=this.itemItem.buy_price[0][0],t=j.intance.m_dicItems.get(e);t&&(this.m_strBuyIcon=J.instance.getItemIcon(t.icon))}this.itemItem.sell_price&&(this.m_iSellPrice=parseFloat(this.itemItem.sell_price[0][1])),this.m_iQuality=this.itemItem.quality,this.setQualityData()}}setQualityData(){this.m_arrQualityData=this.itemItem.starArr}get getIconURL(){return J.instance.getItemIcon(this.itemItem.icon)}copy(){let e=new i(this.m_iId);return e.m_iLevel=this.m_iLevel,e}compareName(){return L.instance.getLanguage(this.itemItem.name)}compareQuality(){return parseFloat(this.m_iQuality+"")}compareSellPrice(){return parseFloat(this.itemItem.sell_price[1]+"")}compareNum(){return parseFloat(this.m_iNum+"")}compareLevel(){return parseFloat(this.m_iLevel+"")}compareFragment(){let e=this.itemItem.id;return 0}compareTypeId(){return parseInt(this.m_iId+"")}};var kr=class i{constructor(){this._isPop=!1;A.intance.on(v.EVENT_CHECK_REMAIN,this,this.onCheckRemain)}static get instance(){return i._instance||(i._instance=new i),i._instance}get model(){return Dt.instance}get isPop(){return this._isPop}startShow(){console.log("startShow");var e=this.model.hasRemain();!this._isPop&&e&&(this._isPop=!0,e instanceof Ea?A.intance.event(v.EVENT_OPEN_MODULE,y.HeroGetDialog):A.intance.event(v.EVENT_OPEN_MODULE,y.ItemGetDialog))}onCheckRemain(e){if(e==y.ItemGetDialog||e==y.HeroGetDialog){var t=this.model.hasRemain();t?t instanceof Ea?A.intance.event(v.EVENT_OPEN_MODULE,y.HeroGetDialog):A.intance.event(v.EVENT_OPEN_MODULE,y.ItemGetDialog):this._isPop=!1}}};var Dt=class i{constructor(e){this._list=[];this.needPop=!0;this.autoPop=!0}static get instance(){return i._instance||(i._instance=new i(new I0)),i._instance}get service(){return kr.instance}addItem(e,t=!1){let r=new bt;r.m_iId=e.m_iId,r.newAddCnt=e.newAddCnt,r.m_iLevel=e.m_iLevel,r.isLvUp=e.isLvUp,r.m_bNew=e.m_bNew,this._list.push(r),t&&this.service.startShow()}addHeroItem(e,t=!1){let r=new Ea;r.id=e.id,r.newAddCnt=e.newAddCnt,r.lv=e.lv,r.isLvUp=e.isLvUp,r.m_bNew=e.m_bNew,this._list.push(r),t&&this.service.startShow()}addItems(e,t=!1){this._list=this._list.concat(e),t&&this.service.startShow()}hasRemain(){return this._list.length>0?this._list[0]:null}get needListener(){return this._list.length>=2}addConsumeByServer(e){this._list.push(e)}addConsume(e,t){this._list.push([e,t])}getNextItem(){return this._list.length>0?this._list[0]:null}getOneItem(){return this._list.length>0?this._list.shift():null}},I0=class{};var Le=class i{constructor(){this._inited=!1;this.stopAll=!1;this.roomWatcher=!1;this.matchWatcher=!1;this.heroReadyDic=new Ce;this.isPopUp=!1;this.init()}static get instance(){return i._instance||(i._instance=new i),i._instance}init(){this._inited||(this._inited=!0)}get roomDto(){return this._roomDto}set roomDto(e){if(console.log("roomDto: ",e),this._roomDto=e,e){var t=B.instance.playerDto.pid;if(e.watch){let r=e.watch.some(n=>n===t);this.roomWatcher=r}}}setRoomAnonymousLabel(e,t=-1){return t==-1&&(t=i.instance.roomDto.anonymous),t==1?qi.ANONYMOUS_NAME:e}setMatchAnonymousLabel(e,t=-1){return t==-1&&(t=i.instance.matchDto.anonymous),!this.matchWatcher&&t==1?qi.ANONYMOUS_NAME:e}setMatchAnonymousImg(e,t=-1){return t==-1&&(t=i.instance.matchDto.anonymous),!this.matchWatcher&&t==1?null:e}get matchDto(){return this._matchDto}set matchDto(e){if(console.log("matchDto: ",e),this._matchDto=e,e){var t=B.instance.playerDto.pid;if(e.watch){let r=e.watch.some(n=>n===t);this.matchWatcher=r}e.startTime-e.nowTime>0?this.stopAll=!0:this.stopAll=!1}else this.stopAll=!1}setMatchRes(){this.heroReadyDic=new Ce;var e=this.roomDto.members.length,t=[],r=this.currArenaItem.mapid;if(this.heroReadyDic.get("map_"+r)==null){var r=i.instance.currArenaItem.mapid,n=J.instance.getMapImg(r);t.push(n);var s=J.instance.getMapPrefab(r);t.push(s),this.heroReadyDic.set("map_"+r,!0)}for(var o=0;o<e;o++){var l=this.roomDto.members[o];if(this.heroReadyDic.get(l.heroId+"_"+l.heroColor)==null){var c=j.intance.m_dicHeros.get(l.heroId),p=J.instance.getHeroSkRes(c.serialId,l.heroColor);t.push({url:p,type:Laya.Loader.SPINE}),this.heroReadyDic.set(l.heroId+"_"+l.heroColor,!0)}}t.length>0&&Laya.loader.load(t,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{})}onPreAssetPress1(e){}async checkMatchRankData(){if(this.reward==null){let e=await se.requestPost("wxgame/room/balanceInfo",{roomId:i.instance.matchDto.roomId});this.onGoMatchEndRank(e)}}onSetMatchEnd(e,t=!1){this.msgEndbody=e,(this.isPopUp||t)&&(A.intance.event(v.EVENT_GameScene_Gray),i.instance.onGoMatchEndRank(this.msgEndbody),this.isPopUp=!1)}onMockMatchEnd(){this.msgEndbody?(A.intance.event(v.EVENT_GameScene_Gray),i.instance.onGoMatchEndRank(this.msgEndbody)):this.isPopUp=!0}onGoMatchEndRank(e){kt.instance.isMatching=!1,i.instance.stopAll=!0,ne.intance.openModule(y.MatchEndView,[null,null,null,e])}mockMoves(e,t,r,n,s,o){this.mockSpeedRate=t,this.speed=o,this.mockDir=Qe.getAngleToVec(r),this.mockAimDir=Qe.getAngleToVec(n),this.rotateSpeed=ye.snack.defaultRotateSpeed,this.bones=[],this.bones.push(ft.create(e.x,e.y));for(var l=0;l<s;l++)this.mockMove();return this.bones[0]}mockMove(){for(let n=0;n<this.mockSpeedRate;n++){if(this.mockDir.equal(this.mockAimDir)||Math.abs(Math.acos(this.mockDir.dot(this.mockAimDir))*180/Math.PI)<this.rotateSpeed*ye.snack.defaultMoveInterval)this.mockDir=this.mockAimDir;else{let s=this.mockDir.getRotation(),l=(this.mockAimDir.getRotation()-s+360)%360;l>180&&(l-=360);let c=this.rotateSpeed*ye.snack.defaultMoveInterval,p=Math.abs(l)<c?l:c*(l>0?1:-1);console.log(p),this.mockDir.rotate(p)}var e=this.bones[0].add(this.mockDir.mul(this.speed)),t=10,r=ye.mapSize;if(e.x<r.offsetX-t||e.x>r.width-r.offsetX+t||e.y<r.offsetY-t||e.y>r.height-r.offsetY+t)return;this.bones[0].x=e.x,this.bones[0].y=e.y}}clearData(){console.log("clearData ",this.reward),this.roomDto=null,this.matchDto=null,this.reward=null,this.msgEndbody=null,this.isPopUp=!1,this.playerJoinDic=null,this.playerEndDic=null,this.heroReadyDic=null,this.currArenaItem=null,this.roomWatcher=!1,this.matchWatcher=!1,Re.instance.clearData(),se.needHeart=!0,Ke.instance.playMusicByName(Ke.soundName_bg,".mp3"),Dt.instance.needPop=!0,kr.instance.startShow()}};var ch=class extends Laya.Image{};var{regClass:OS}=Laya,Ar=class extends ch{set dataSource(t){this.roomPlayerDto=t,this.roomPlayerDto&&this.setCurrentOutPut()}setCurrentOutPut(){this.skin=J.instance.getSnakeBodyIcon(this.roomPlayerDto.snakeId)}setRotation(t){this.rotation=t}setScale(t){let r=this.width,n=this.height,s=t*2/r,o=t*2/n;this.scaleX=s,this.scaleY=o}setAlpha(t){this.alpha=t}setGray(t){this.gray=t}getRadio(){return this.width*this.scaleX/2}onDisable(){this.setGray(!1),this.setAlpha(1),this.scale(1,1),Laya.Pool.recover(Ar.POOL_NAME,this)}};Ar.POOL_NAME="MatchSnakeBodySpr",Ar=N([OS("Aeyt_emSSaCC6Np5nR_evQ")],Ar);var uh=class extends Laya.Sprite{};var{regClass:NS}=Laya,Cr=class extends uh{constructor(){super();this.isAddEvent=!1;this.isMe=!1;this.inGround=!1;this.speedRate=1;this.moveSpeed=10;this._speed=10;this.biasSpeed=0;this._roleDirection=-1;this.inControl=!1;this.isStop=!1;this.isLockAni=!1;this.aniChange=!1;this.beyond=!1;this.displacementType=0;this.timeStamp=0;this.currArea=0;this._speedTransitionTime=0;this.lastX=0;this.flashCount=0}setClientPosLog(t,r){$.Debug==2&&(console.log(re.GetLogTime+` ${this.roomPlayerDto.roleId} C：(${t}, ${r}, ${this.owner.owner.speedRate}, dir：${this.owner.owner.dir}, aimDir：${this.owner.owner.aimDir}, ${nt.Instance.currentFrame})`),nt.Instance.checkServerFrame(nt.Instance.currentFrame,this.roomPlayerDto.roleId,t,r,this.owner.owner.speedRate,this.owner.owner.dir,this.owner.owner.aimDir))}setServerPosLog(t,r,n,s,o){$.Debug==2&&console.log(re.GetLogTime+` ${this.roomPlayerDto.roleId} S：(${r.loc.x}, ${r.loc.y}, ${n}, dir：${s}, aimDir：${o}, ${t})`)}get speed(){return this._speed}set speed(t){this._speed=t,this.biasSpeed=Math.round(this.speed*Math.sin(45*Math.PI/180))}get roleDirection(){return this._roleDirection}set roleDirection(t){t!==-4&&(this._roleDirection=t)}set myRoleDirection(t){this.roleDirection!=t&&(this.roleDirection=t)}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){this.roomPlayerDto=t,this.roomPlayerDto&&this.setCurrentOutPut()}setCurrentOutPut(){this.heroSk.skin=J.instance.getSnakeHeadIcon(this.roomPlayerDto.snakeId),this.tf_name.text=qi.abbreviateString(this.roomPlayerDto.userName)}set x(t){super.x=t}get x(){return super.x}set visible(t){super.visible=t,this.smallHeroImg&&(this.smallHeroImg.visible=t)}get visible(){return super.visible}set alpha(t){super.alpha=t,this.smallHeroImg&&(this.smallHeroImg.alpha=t)}onAwake(){}showDamageLabelDetailDelay(t,r,n){Laya.timer.once(r,this,this.showDamageLabelDetail,[t,n],!1)}showDamageLabelDetail(t,r){var n=Laya.Pool.getItemByCreateFun("damageNumber",Re.instance.damageNumPrefab.create,Re.instance.damageNumPrefab);n.init(t,r),this.addChild(n)}setRotation(t){this.heroSk.rotation=t}setScale(t){let r=this.heroSk.width,n=this.heroSk.height,s=t*2/r,o=t*2/n;this.heroSk.scaleX=s,this.heroSk.scaleY=o}setAlpha(t){this.heroSk.alpha=t}setGray(t){this.heroSk.gray=t}getRadio(){return this.heroSk.width*this.heroSk.scaleX/2}onDisable(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null,this.setGray(!1),this.setAlpha(1),this.scale(1,1),Laya.Pool.recover(Cr.POOL_NAME,this)}destroy(t){Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null,this.owner=null,this.roomPlayerDto=null,super.destroy(t)}};Cr.POOL_NAME="MatchSnakeSpr",Cr=N([NS("tWPXV-AGQQ2kGHES5HnI0w")],Cr);var Tn=class{get isHead(){return this.skinFlag===ye.snack.skinFlag.head}setServerPosLog(e,t,r,n,s){this.skinFlag===ye.snack.skinFlag.head&&this.node.setServerPosLog(e,t,r,n,s)}constructor(e,t,r,n,s){if(this.pos=new ft(-1e6,-1e6),this.tag=n,this.owner=s,e===ye.snack.skinFlag.head){let o=Laya.Pool.getItemByCreateFun(Cr.POOL_NAME,Re.instance.roleAniPrefab.create,Re.instance.roleAniPrefab);o.owner=this,this.node=o,o.dataSource=n,this.smallHeroImg=new Laya.Image,this.updateSmallHeroImg(),Re.instance.img_smallMap.addChild(this.smallHeroImg)}else{let o=Laya.Pool.getItemByCreateFun(Ar.POOL_NAME,Re.instance.matchSnakeBodyPrefab.create,Re.instance.matchSnakeBodyPrefab);this.node=o,o.dataSource=n}this.skinFlag=e,this.node.tag=n,t.addChild(this.node)}reset(e,t,r,n,s){if(this.pos=new ft(-1e6,-1e6),this.tag=n,this.owner=s,this.skinFlag=e,e===ye.snack.skinFlag.head){let o=Laya.Pool.getItemByCreateFun(Cr.POOL_NAME,Re.instance.roleAniPrefab.create,Re.instance.roleAniPrefab);o.owner=this,this.node=o,o.dataSource=n,this.smallHeroImg=new Laya.Image,this.updateSmallHeroImg(),Re.instance.img_smallMap.addChild(this.smallHeroImg)}else{let o=Laya.Pool.getItemByCreateFun(Ar.POOL_NAME,Re.instance.matchSnakeBodyPrefab.create,Re.instance.matchSnakeBodyPrefab);this.node=o,o.dataSource=n}this.node.tag=n,t.addChild(this.node)}resetForPool(){Laya.Tween.clearAll(this.node),this.node.removeSelf(),this.smallHeroImg&&this.smallHeroImg.removeSelf()}updateSmallHeroImg(){if(this.smallHeroImg)if(this.owner.isSelf){this.smallHeroImg.skin="res/match2/img_dian1.png";var e=15,t=15;this.smallHeroImg.size(e,t),this.smallHeroImg.pivot(e/2,t/2)}else if(this.owner.tag.roleId==et.instance.kingId){this.smallHeroImg.skin="res/match2/img_phb_icon2.png";var r=21,n=19;this.smallHeroImg.size(r,n),this.smallHeroImg.pivot(r/2,n/2)}else{this.smallHeroImg.skin="res/match2/img_dian2.png";var s=4,o=4;this.smallHeroImg.size(s,o),this.smallHeroImg.pivot(s/2,o/2)}}setPosition(e){if(this.smallHeroImg){var t=Re.instance.fromBigToSmall(e.x,e.y),r=t[0],n=t[1];this.smallHeroImg.pos(r,n)}var s,o;if(this.pos.x!=-1e6||this.pos.y!=-1e6)if(this.isHead){var l=Qe.distancePoint(e.x,e.y,this.node.x,this.node.y);l>50?(s=Qe.lerp(this.node.x,e.x,.3),o=Qe.lerp(this.node.y,e.y,.3)):l>30?(s=Qe.lerp(this.node.x,e.x,.3),o=Qe.lerp(this.node.y,e.y,.3)):(s=Qe.lerp(this.node.x,e.x,.3),o=Qe.lerp(this.node.y,e.y,.3))}else s=Qe.lerp(this.node.x,e.x,.3),o=Qe.lerp(this.node.y,e.y,.3);else s=e.x,o=e.y;this.node.pos(s,o),this.pos.x=s,this.pos.y=o,this.skinFlag===ye.snack.skinFlag.head&&this.node.setClientPosLog(e.x,e.y)}getPosition(){return this.pos}setRotation(e){this.node.setRotation(e)}setLocalZOrder(e){this.node.zOrder=e}getDistant(e){let t=this.pos.x-e.pos.x,r=this.pos.y-e.pos.y;return Math.sqrt(t*t+r*r)}updateAlpha(e,t){let r=t==1?1:.75;this.node.setAlpha(r)}updateScale(e,t){let r=e*(1+.1*t);this.setScale(r)}setScale(e){this.node.setScale(e)}getRadio(){return this.node.getRadio()}setVisible(e){this.node.visible=e,this.smallHeroImg&&(this.smallHeroImg.visible=e)}setGray(e){this.node.setGray(e)}isVisible(){return this.node.visible}destroy(){this.node.removeSelf(),this.smallHeroImg&&this.smallHeroImg.removeSelf()}getSuctionBoundingBox(){let e=this.owner.suctionRadius;return new Laya.Rectangle(this.pos.x-e,this.pos.y-e,e*2,e*2)}getBoundingBox(){let e;return this.isHead?e=this.owner.suctionRadius:e=this.getRadio(),new Laya.Rectangle(this.pos.x-e,this.pos.y-e,e*2,e*2)}getSkinFlag(){return this.skinFlag}checkCollision(e,t,r){let n=this.getPosition();return La.distance(n.x,n.y,e,t)<r+this.getRadio()}};var ph=class{static checkCollisions(e,t,r){let n=ye.mapSize;if(e){let h=e.getHeadCollisionBounds();if(h&&(h.x<n.offsetX||h.x+h.width>n.width-n.offsetX||h.y<n.offsetY||h.y+h.height>n.height-n.offsetY)){if(e.isSelf){if(e.isAlive()){if(e.isSend)return;var s=e.getToServerHead(),o=X.snake.socket.MessageType.MSG_PLAYER_COLLISION,l=X.snake.socket.CS_PLAYER_COLLISION.fromObject({head:s,frame:nt.Instance.currentFrame,body:!1});kt.instance.sendData(o,l),e.isSend=!0}}else e.stop=!0;return}}if(e&&e.isSelf){let h=e.getHeadCollisionBounds();if(!h)return;let f=h.x+h.width/2,g=h.y+h.height/2,E=h.width/2,I=ye.collision.food.maxRadius,_=E+I,S=new Laya.Rectangle(f-_,g-_,_*2,_*2),M={getBoundingBox:()=>S},R=yi.instance.getAllFoods();var c=[];if(R.forEach(H=>{e.checkFoodCollision(H)&&(H.haveEaten||(H.haveEaten=!0,console.log(H.foodObject.unkey,H.getPosition()),c.push(H.foodObject.unkey)))}),c&&c.length>0){console.log("吃豆人吃到了食物");var p=B.instance.playerDto.pid,s=e.getToServerHead(),o=X.snake.socket.MessageType.MSG_EAT_FOOD,d=X.snake.socket.CS_EAT_FOOD.fromObject({roleId:p,fid:c,head:s,frame:nt.Instance.currentFrame});kt.instance.sendData(o,d)}r.retrieve(e.getHead()).filter(H=>H instanceof Tn).forEach(H=>{if(H.owner!==e&&e.checkBodyCollision(H))if(!e.isInvincible&&!H.owner.isInvincible){if(e.isAlive()&&H.owner.isAlive()){if(e.isSend){console.log("playerSnake.isSend: "+e.isSend);return}var K=!H.isHead,q=H.owner.tag.roleId,ce=e.getToServerHead(),Q=X.snake.socket.MessageType.MSG_PLAYER_COLLISION,ke=X.snake.socket.CS_PLAYER_COLLISION.fromObject({target:q,head:ce,frame:nt.Instance.currentFrame,body:K});kt.instance.sendData(Q,ke),e.isSend=!0}}else console.log(e.tag.roleId+" 或者 "+H.owner.tag.roleId+" 处于无敌状态！")})}}static getDistance(e,t){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}};var mh=class{constructor(e){this.pool=[];this.pnl=e}getBodySkin(e,t,r,n){if(this.pool.length>0){let s=this.pool.pop();return s.reset(e,this.pnl,t,r,n),s}else return new Tn(e,this.pnl,t,r,n)}returnBodySkin(e){e.resetForPool(),this.pool.push(e)}clear(){this.pool.forEach(e=>e.destroy()),this.pool=[]}};var Yn=class i{constructor(){this.pools=new Map;this.configs=new Map}static get instance(){return this._instance||(this._instance=new i),this._instance}register(e,t,r=0,n=1/0){this.configs.set(e,{factory:t,maxSize:n}),this.pools.set(e,[]);for(let s=0;s<r;s++)this.release(e,t())}get(e,...t){let r=this.pools.get(e);if(!r)throw new Error(`Type ${e.name} not registered`);let n=r.length>0?r.pop():this.configs.get(e).factory();return n.init&&n.init(...t),n}release(e,t){let r=this.configs.get(e);if(!r)throw new Error(`Type ${e.name} not registered`);let n=this.pools.get(e);t.reset&&t.reset(),n.length<r.maxSize&&n.push(t)}clear(e){this.pools.set(e,[])}clearAll(){this.pools.clear()}};var Kc=class{constructor(e,t){this.clientFrame=1;this.serverFrame=1;this.dFrame=0;this.serverHeadPoss=[];this.stop=!1;this.ringCenter=new ft;this.baseRingSize=100;this.aiController=null;this.lastRingUpdate=0;this.lastSendFrame=-1;this.pendingGrow=0;this.lastDir=-1;this.lastSendDir=-1;this.isSend=!1;this.pnl=e,this.bodySkinPool=et.instance.getBodySkinPool(),this.updateData(t)}setClientDir(e){this.tag&&(this.tag.direction=e)}showServerPos(e,t,r,n,s){this.getHead().setServerPosLog(e,t,r,n,s)}updateLen(e){var t=e-(this.len+this.pendingGrow);t>0&&this.requestGrow(t)}updateData(e){if(this.skin)for(let t=0;t<this.skin.length;t++){let r=this.skin[t];r&&this.bodySkinPool.returnBodySkin(r)}this.skin=[],this._initData(e),this._initSnack(),this._updateSkinRadio()}_initData(e){var t=j.intance.m_dicSnakes.get(e.snakeId);this.radio=t.bodyRadius,this.collisionHeadRadius=t.collisionHeadRadius,this.suctionRadius=t.suctionRadius,this.speed=t.baseSpeed,this.tag=e||null,this.score=e.score,this.speedRate=e.speed;var r=e.direction;this.dir=r;var n=e.aimDir;this.aimDir=n,this.rotateSpeed=ye.snack.defaultRotateSpeed;var s=e.snake.length;this.len=s||t.initLength,this.intervalBoneToDrawSkin=t.intervalBoneToDrawSkin,this.skin=[],this.bones=[],this._moveDelta=0,this.alive=!0;var o=e.wdTime-e.oprTime;this.defaultInvincibleTime=Date.now()+o,this.isInvincible=o>0,this.shineDelt=0;let l=Math.random()+.5;l=l>1?l-.5:l,this.color={r:Math.random(),g:Math.random(),b:Math.random(),a:l};for(let c=0;c<this.len;c++){let p=e.snake[c].loc,d=ft.create(p.x,p.y);this.bones[c]=d}this.bodyRing=new Laya.Image,this.bodyRing.skin=ye.res.snackRingImg,this.bodyRing.width=this.bodyRing.height=this.baseRingSize,this.bodyRing.anchorX=this.bodyRing.anchorY=.5,this.bodyRing.visible=!1,this.pnl.addChild(this.bodyRing)}_updateBodyRing(){if(this.lastRingUpdate=Date.now(),!this.isInvincible)return;let e=Yn.instance.get(ft,1/0,1/0),t=Yn.instance.get(ft,-1/0,-1/0);this.bones.forEach(s=>{e.x=Math.min(e.x,s.x),e.y=Math.min(e.y,s.y),t.x=Math.max(t.x,s.x),t.y=Math.max(t.y,s.y)}),this.ringCenter.x=(e.x+t.x)/2,this.ringCenter.y=(e.y+t.y)/2;let r=Math.max((t.x-e.x)/2+this.radio*ye.invincibleRing.margin,(t.y-e.y)/2+this.radio*ye.invincibleRing.margin),n=Math.max(r*2/this.baseRingSize,ye.invincibleRing.minScale);this.bodyRing.pos(this.ringCenter.x,this.ringCenter.y),this.bodyRing.scale(n,n),Yn.instance.release(ft,e),Yn.instance.release(ft,t)}_initSnack(){console.log(re.GetLogTime,"初始化蛇的皮肤");let e=this.getSkinLength();for(let t=0;t<e;t++){t===0?this.skin[t]=this.bodySkinPool.getBodySkin(ye.snack.skinFlag.head,this.color,this.tag,this):this.skin[t]=this.bodySkinPool.getBodySkin(ye.snack.skinFlag.body,this.color,this.tag,this);let r=t*this.intervalBoneToDrawSkin;if(this.bones[r]){this.skin[t].setPosition(this.bones[r]),this.skin[t].setLocalZOrder(-(t+1));let n;r+1<this.bones.length?n=this.bones[r+1]:r-1>=0?n=this.bones[r-1]:n=this.bones[r];let s=this.bones[r].getRotationTo(n),o=ye.snack.defaultRotation-s;this.skin[t].setRotation(o),this.skin[t].setVisible(!0)}else this.skin[t].setVisible(!1)}}updateAI(){this.aiController&&this.aiController.update()}move(e){if(!this.alive||this.stop)return;this._moveDelta+=e,this._moveDelta-=ye.snack.defaultMoveInterval;let t=this.pendingGrow>0;for(let l=0;l<this.speedRate;l++){let c=this.aimDir-this.dir,p=this.rotateSpeed*ye.snack.defaultMoveInterval;if(Math.abs(c)<p)this.dir=this.aimDir;else{c=(c+360)%360,c>180&&(c-=360);var r=Math.abs(c)<p?c:p*(c>0?1:-1);this.dir+=r,this.dir>=360&&(this.dir-=360),this.dir<0&&(this.dir+=360)}let d=this.dir*Math.PI/180,h=ft.create(Math.cos(d),Math.sin(d));var n=this.bones[0].add(h.mul(this.speed)),s=10,o=ye.mapSize;if(n.x<o.offsetX-s||n.x>o.width-o.offsetX+s||n.y<o.offsetY-s||n.y>o.height-o.offsetY+s)return;this.bones[0].assign(n);for(let f=1;f<this.bones.length;f++){let g=this.bones[f-1],E=this.bones[f],I=.6,_=E.add(g.sub(E).mul(I));this.bones[f].x=_.x,this.bones[f].y=_.y}t&&l===this.speedRate-1&&this._processGrowth(),this._moveBody(),this._updateSkinRadio()}this.isInvincible&&(this.bodyRing.visible||(this.bodyRing.visible=!0),this._updateBodyRing(),Date.now()>this.defaultInvincibleTime&&(this.isInvincible=!1,this.bodyRing.visible=!1))}getCurDir(){return this.dir}getAimDir(){return this.aimDir}moveAfter(){this.checkHead(),this.isSelf&&nt.Instance.currentFrame%2==0&&this.lastSendFrame!=nt.Instance.currentFrame&&(this.rorateSend(),this.lastSendFrame=nt.Instance.currentFrame)}_processGrowth(){if(this.pendingGrow<=0)return;let e=this.bones[this.bones.length-1],t=ft.create(e.x,e.y);this.bones.push(t),this.len++,this.pendingGrow--;let r=this.getSkinLength();if(r>this.skin.length){let s=new Tn(ye.snack.skinFlag.body,this.pnl,this.color,this.tag,this),o=(r-1)*this.intervalBoneToDrawSkin;if(this.bones[o]){s.setPosition(this.bones[o]),s.setLocalZOrder(-(r+1));let l;o+1<this.bones.length?l=this.bones[o+1]:l=this.bones[o];let c=this.bones[o].getRotationTo(l);s.setRotation(ye.snack.defaultRotation-c),this.skin.push(s);var n=wn.getInstance(null);n.addSnack([s])}}this._updateSkinRadio()}_moveBody(){let e=this.getSkinLength();for(let t=0;t<e;t++){let r=t*this.intervalBoneToDrawSkin;if(this.skin[t])if(this.bones[r]){this.skin[t].setPosition(this.bones[r]);let n;r+1<this.bones.length?n=this.bones[r+1]:r-1>=0?n=this.bones[r-1]:n=this.bones[r];let s=this.bones[r].getRotationTo(n);this.skin[t].setRotation(ye.snack.defaultRotation-s),this.skin[t].setVisible(!0)}else this.skin[t].setVisible(!1)}}_updateSkinRadio(){let e=this.getSkinLength();for(let t=0;t<e;t++)this.skin[t]&&this.skin[t].updateAlpha(this.radio,this.speedRate)}requestGrow(e=1){this.pendingGrow+=e}showAddScore(e){this.isSelf&&this.getHead().node.showDamageLabelDetailDelay(e,100,!1)}get isSelf(){return this.tag&&this.tag.roleId==B.instance.playerDto.pid}addKill(e){if(this.tag&&(this.tag.kills+=e),this.isSelf){var t=this.tag.kills>5?5:this.tag.kills;let r=`soundName_kill_${t}`;Ke[r]?Ke.instance.playSoundByName(Ke[r]):console.warn(`音效 ${r} 不存在`),this.getHead().node.showDamageLabelDetailDelay(e,100,!0)}}getHeadCollisionBounds(){let e=this.collisionHeadRadius,t=this.getHeadPosition();return t?new Laya.Rectangle(t.x-e,t.y-e,e*2,e*2):null}checkBodyCollision(e){let t=this.getHeadPosition();return t?e.checkCollision(t.x,t.y,this.collisionHeadRadius):!1}checkFoodCollision(e){let t=this.getHeadPosition();return t?e.checkCollision(t.x,t.y,this.suctionRadius):!1}rorateControl(e,t=!1){this.lastDir!=e&&(this.lastDir=e)}rorateSend(){if(this.lastDir!=-1&&this.lastSendDir!=this.lastDir){var e=B.instance.playerDto.pid,t=this.getToServerHead(),r=X.snake.socket.MessageType.MSG_PLAYER_OPR,n=X.snake.socket.CS_PLAYER_OPR.fromObject({roleId:e,opr:1,value:this.lastDir,head:t,frame:nt.Instance.currentFrame,curDir:this.getCurDir(),aimDir:this.getAimDir(),snake:[]});kt.instance.sendData(r,n),this.lastSendDir=this.lastDir}}rorate(e,t=!1){this.setClientDir(e),this.aimDir=e}updateSpeedRate(e){this.speedRate=e}getHeadPosition(){return this.getHead()?this.getHead().getPosition():null}getHead(){return this.skin?this.skin[0]:null}getToServerHead(){var e=new X.snake.socket.SnakeObject,t=new X.snake.socket.PointObject;return t.x=this.bones[0].x,t.y=this.bones[0].y,e.loc=t,e}checkHead(){}updateHead106(e,t,r,n,s){return;var o,l,c}updateHead(e,t,r,n,s){return;var o,l;if(l>0&&l<5){this.dFrame=l;var p;$.Debug==2&&console.log(re.GetLogTime+" "+this.tag.roleId," 107_1 前后端位移相差：",p," 暂停，"+l,"C:",o.toString(),this.clientFrame,"S:",t.loc,e);return;var c,p}else{var l=Math.abs(l);$.Debug==2&&console.log("=前后端相差 "+l+" 帧, clientFrame: ",this.clientFrame,this.bones[0].toString()," , serverFrame: ",e);var o=this.bones[0],c=ft.create(t.loc.x,t.loc.y),p=Qe.distancePoint(c.x,c.y,o.x,o.y);p>10?($.Debug==2&&console.log(re.GetLogTime+" "+this.tag.roleId," _2 前后端位移相差：",p,">10 硬更新，"+e,"C:",o.toString(),"S:",c),this.applyHardCorrection(o,c,n,s),this.clientFrame=e):($.Debug==2&&console.log(re.GetLogTime+" "+this.tag.roleId," _2 前后端位移相差：",p,"<=10 软更新，"+e,"C:",o.toString(),"S:",c),this.applyHardCorrection(o,c,n,s),this.clientFrame=e)}}updateHead107(e,t,r,n,s){return;var o,l;if(l>0&&l<5){this.dFrame=l;var p;$.Debug==2&&console.log(re.GetLogTime+" "+this.tag.roleId," 107_1 前后端位移相差：",p," 暂停，"+e,"C:",o.toString(),"S:",t.loc);return;var c,p}else{var l=Math.abs(l);$.Debug==2&&console.log("==前后端相差 "+l+" 帧, clientFrame: ",this.clientFrame,this.bones[0].toString()," , serverFrame: ",e);var o=this.bones[0],c=ft.create(t.loc.x,t.loc.y),p=Qe.distancePoint(c.x,c.y,o.x,o.y);p>10?($.Debug==2&&console.log(re.GetLogTime+" "+this.tag.roleId," 107_2 前后端位移相差：",p,">10 硬更新，"+e,"C:",o.toString(),"S:",c),this.applyHardCorrection(o,c,n,s),this.clientFrame=e):($.Debug==2&&console.log(re.GetLogTime+" "+this.tag.roleId," 107_2 前后端位移相差：",p,"<=10 软更新，"+e,"C:",o.toString(),"S:",c),this.applySoftCorrection(o,c,n,s))}}applyHardCorrection(e,t,r=null,n=null){e.x=t.x,e.y=t.y}applySoftCorrection(e,t,r=null,n=null){var s=ft.create(t.x,t.y);let o=.2;e.x=Qe.lerp(e.x,s.x,o),e.y=Qe.lerp(e.y,s.y,o)}predictSnakePosition(e){if(e>0)for(var t=0;t<e;t++)this.move(0)}shine(e){let t=this.skin.length;for(let r=0;r<t;r++)this.skin[r].setVisible(!this.skin[r].isVisible())}show(){let e=this.skin.length;for(let t=0;t<e;t++)this.skin[t].setVisible(!0)}getSkins(){return this.skin}getRadio(){return this.radio}setAlive(e){this.alive=e}die(){console.log(`Snack ${this.tag.roleId} has died.`),this.setAlive(!1),this.isSelf?(this.setGray(!0),Ke.instance.playSoundByName(Ke.soundName_kill_die),Laya.timer.frameLoop(5,this,this.shine),Laya.timer.once(2e3,this,this.setDead)):et.instance.removeSnake(this.tag.roleId)}setDead(){Laya.timer.clear(this,this.shine),this.show(),et.instance.removeSnake(this.tag.roleId),Le.instance.onMockMatchEnd()}setGray(e){for(let t=0;t<this.skin.length;t++)this.skin[t].setGray(e)}isAlive(){return this.alive}getLength(){return this.len}getSkinLength(){return Math.floor(this.len/this.intervalBoneToDrawSkin)}recordBones(){var e=[];for(let t=0;t<this.bones.length;t++){let r=this.bones[t];e.push(r.clone())}return e}getState(){return{dir:this.dir,aimDir:this.aimDir,bones:this.recordBones(),speedRate:this.speedRate,alive:this.isAlive()}}restoreState(e){this.dir=e.dir,this.aimDir=e.aimDir,this.bones=this.restoreBones(e.bones),this.speedRate=e.speedRate,this.alive=e.alive}restoreBones(e){var t=[];for(let r=0;r<e.length;r++){let n=e[r];t.push(n.clone())}return t}destroy(){Laya.timer.clearAll(this),this.isSelf&&(et.instance.skinLen=this.getSkinLength(),et.instance.kills=this.tag.kills),this.skin.forEach(e=>this.bodySkinPool.returnBodySkin(e)),this.skin=[],this.bodyRing.removeSelf(),this.bodyRing=null,this.aiController&&(this.aiController.destroy(),this.aiController=null),this.tag=null}};var Ps=class Ps{constructor(){this.selfSnack=null;this.container||(this.container=new Laya.Sprite),this.matchHeroSprDic=new Ce,this.selfSnack=null,this.collision=wn.getInstance(null),this.bodySkinPool=new mh(this.container)}static get instance(){return Ps._instance||(Ps._instance=new Ps),Ps._instance}createSnack(e){let t=new Kc(this.container,e);if(this.matchHeroSprDic.get(e.roleId))throw new Error(e.roleId+" 被重复添加！");return this.matchHeroSprDic.set(e.roleId,t),console.log("createSnack: "+e.roleId,B.instance.playerDto.pid),B.instance.playerDto.pid==e.roleId&&(this.selfSnack=t),this.collision.addSnack(t.getSkins()),t}updateSnack(e,t){return console.log("updateSnack: "+t.roleId,B.instance.playerDto.pid),this.collision.removeSnack(e.getSkins()),e.updateData(t),B.instance.playerDto.pid==t.roleId&&(this.selfSnack=e),this.collision.addSnack(e.getSkins()),e}updateSnakes(e){this.moveSnacks(e),this.collision.refresh(),this.checkMySnackCollision()}initSnacks(){var e=this.matchHeroSprDic.values;let t=e.length;console.log("startGame 蛇的数量: "+t)}removeSnake(e){var t=this.matchHeroSprDic.get(e);t&&(this.collision.removeSnack(t.getSkins()),t.destroy(),this.matchHeroSprDic.remove(e))}removeAllSnakes(){var e=this.matchHeroSprDic.values;let t=e.length;for(let r=0;r<t;r++)this.collision.removeSnack(e[r].getSkins()),e[r].destroy();this.matchHeroSprDic=new Ce}moveSnacks(e){var t=this.matchHeroSprDic.values;let r=t.length;for(let n=0;n<r;n++)t[n].clientFrame++,t[n].isAlive()&&(t[n].move(e),t[n].moveAfter())}rorate(e,t){e===ye.snackType.SELF&&this.selfSnack&&this.selfSnack.rorateControl(t,!0)}updateSpeedRate(e,t,r){if(e===ye.snackType.SELF&&this.selfSnack){var n=B.instance.playerDto.pid,s=this.selfSnack.getToServerHead(),o=X.snake.socket.MessageType.MSG_PLAYER_OPR,l=X.snake.socket.CS_PLAYER_OPR.fromObject({roleId:n,opr:2,value:t,head:s,frame:nt.Instance.currentFrame,curDir:this.selfSnack.getCurDir(),aimDir:this.selfSnack.getAimDir(),snake:[]});kt.instance.sendData(o,l)}}getSelfSnackPos(){return this.selfSnack?this.selfSnack.getHeadPosition():null}checkMySnackCollision(){ph.checkCollisions(this.selfSnack,null,this.collision)}createSnakes(){this.matchHeroSprDic=new Ce;let e=Le.instance.matchDto.members.length;for(var t=0;t<e;t++)var r=Le.instance.matchDto.members[t],n=this.createSnack(r)}newAddSnake(e){var t=this.matchHeroSprDic.get(e.roleId);t?this.updateSnack(t,e):t=this.createSnack(e);var r=t.tag.oprTime;let n=Date.now();var s=kt.instance.serverTimeOffset,o=n-r,l=o-s,c=Math.round(l/(1e3/30))}restoreSnakes(){this.removeAllSnakes(),this.matchHeroSprDic=new Ce;let e=Le.instance.matchDto.members.length;for(var t=0;t<e;t++){var r=Le.instance.matchDto.members[t];try{var n=this.createSnack(r)}catch(s){console.warn(s)}}}getBodySkinPool(){return this.bodySkinPool}getSnakesState(){let e={snakes:{}};var t=this.matchHeroSprDic.values;let r=t.length;for(let s=0;s<r;s++){var n=t[s];let o=n.tag.roleId;e.snakes[o]=n.getState()}return e}restoreState(e){for(let r in e.snakes){var t=this.matchHeroSprDic.get(r);t&&t.restoreState(e.snakes[r])}}clear(){this.removeAllSnakes(),this.container.removeSelf(),this.container=null,this.selfSnack=null,this.collision=null,this.matchHeroSprDic=null,this.bodySkinPool.clear(),Ps._instance=null}};Ps._instance=null;var et=Ps;var nt=class i{constructor(){this._frameRate=30;this._frameInterval=1e3/this._frameRate;this._lastFrameTime=0;this._currentFrame=0;this._confirmedFrame=0;this.dFrame=0;this._isRunning=!1;this.isStart=!1;this._operationQueue={};this._lockStep=!0;this._nextFrameTime=0;this._snakeStates={};this.maxSnapshotFrame=-1}checkServerFrame(e,t,r,n,s,o,l){var c=this._operationQueue[e];c&&c.length&&c.forEach(p=>{if(p.msgBody.roleId==t){var d=p.msgBody.frame,h=this.getSnapshot(d+1,t);if(h){var f=h.dir,g=h.aimDir,E=h.bones,I=h.speedRate,_=h.alive,S=e-d,M=p.msgBody.head,R=Qe.distancePoint(M.loc.x,M.loc.y,E[0].x,E[0].y);R>.01?(console.error(re.GetLogTime+" "+t," checkServerFrame 前后端位移相差：",R,"C:",E[0].x,E[0].y,e,"S:",M.loc,d),re.alertNoAll("检测到坐标异常，保留控制台日志。"+re.GetLogTime+" "+t+" checkServerFrame 前后端位移相差："+R+", C: ("+E[0].x+", "+E[0].y+"), "+e+" S:("+M.loc.x+", "+M.loc.y+"), "+d)):$.Debug==2&&console.warn(re.GetLogTime+" "+t," checkServerFrame 前后端位移相差：",R,"C:",E[0].x,E[0].y,e,"S:",M.loc,d)}return}})}static get Instance(){return this._instance||(this._instance=new i),this._instance}init(){this.stop(),this.dFrame=0,this._operationQueue={},this._snakeStates={},this._currentFrame=0,this._lastFrameTime=Laya.Browser.now(),this._nextFrameTime=this._lastFrameTime+this._frameInterval}setStartFrame(e){this._confirmedFrame=e,this._currentFrame=e,this.isStart=!0}start(){this._isRunning=!0,Laya.timer.loop(33,this,this.update)}stop(){this._isRunning=!1,Laya.timer.clear(this,this.update)}end(){this.stop(),this.isStart=!1}update(){let e=Laya.Browser.now();if(this._lockStep&&e<this._nextFrameTime)return;let t=e-this._lastFrameTime,r=Math.floor(t/this._frameInterval);if(r>0){this._lastFrameTime=e-t%this._frameInterval,this._nextFrameTime=this._lastFrameTime+this._frameInterval;for(let n=0;n<r;n++)this._currentFrame++,this.executeFrame(this._currentFrame),this._confirmedFrame++}this.dFrame>0&&(console.warn("dFrame: ",this.dFrame),this.dFrame--,this._currentFrame++,this.executeFrame(this._currentFrame))}addOperation(e){$.Debug==2&&console.warn("addOperation (frame+1): ",e.msgBody.frame+1,e),this._operationQueue[e.msgBody.frame+1]||(this._operationQueue[e.msgBody.frame+1]=[]),this._operationQueue[e.msgBody.frame+1].push(e)}executeFrame(e){console.log("executeFrame",e),this.saveSnapshot(e);let t=this._operationQueue[e]||[];for(let r of t)Re.instance.handleOperationDetail(r);Yi.getInstance().update(e),this.cleanupOldData(e)}saveSnapshot(e){this._snakeStates[e]==null?(e>this.maxSnapshotFrame&&(this.maxSnapshotFrame=e),this._snakeStates[e]=et.instance.getSnakesState(),$.Debug==2&&console.log("saveSnapshot","取帧"+(e-1)+"数据给帧",e,this._snakeStates[e])):$.Debug==2&&console.log("saveSnapshot",e,this._snakeStates[e],"未保存,之前有保存的数据")}getSnapshot(e,t){var r=this._snakeStates[e];return r?r.snakes[t]:null}cleanupOldData(e){let r=e-60;for(let n in this._operationQueue)parseInt(n)<r&&delete this._operationQueue[n];for(let n in this._snakeStates)parseInt(n)<r&&delete this._snakeStates[n]}rollbackAndReplay(e,t){if($.Debug==2&&console.log("rollbackAndReplay",e,t,this._snakeStates[e],"清理快照到："+this.maxSnapshotFrame),this._snakeStates[e]){et.instance.restoreState(this._snakeStates[e]);for(var r=e+1;r<=this.maxSnapshotFrame;r++)delete this._snakeStates[r]}for(let n=e;n<=t;n++)this._currentFrame=n,this.executeFrame(n)}quickPlay(){this.dFrame=2}get currentFrame(){return this._currentFrame}handleLateFrame(e,t){let r=Math.max(e-1,0);this.rollbackAndReplay(r,e-1)}};var Os=class i extends Laya.Sprite{constructor(){super(...arguments);this.collidables=[];this.isVisible=!1}static getInstance(){return i._instance||(i._instance=new i,i._instance.zOrder=9999,i._instance.mouseEnabled=!1),i._instance}toggleVisible(){this.isVisible=!this.isVisible,console.log("DebugLayer.toggleVisible",this.isVisible),this.graphics.clear()}updateCollidables(t){this.collidables=t}draw(){this.isVisible&&(this.graphics.clear(),this.graphics.alpha(.5),this.collidables.forEach(t=>{t instanceof Tn?this.drawSnakeBody(t):t instanceof Jo&&this.drawFood(t)}))}drawSnakeBody(t){let r=t.getPosition(),n=t.getRadio();this.graphics.drawCircle(r.x,r.y,n,"#FF0000",2,.5)}drawFood(t){let r=t.getBoundingBox();this.graphics.drawRect(r.x,r.y,r.width,r.height,"#00FF00",2,.5)}};var dh=class{constructor(e){this.root=e,this.mapContainer=e.getChildByName("box_front")}destroy(){this.root=null,this.mapContainer=null}initMap(e){let t=ye.mapSize,r=t.defaultMapRes,n=Math.floor(t.width/r.width),s=Math.floor(t.height/r.height),o=255;for(let l=1;l<=n;l++)for(let c=1;c<=s;c++){let p=new Laya.Image(r.resPath);p.size(r.width,r.height);let d=Math.floor(Math.random()*255),h=Math.floor(Math.random()*255),f=Math.floor(Math.random()*255),g=d/255,E=h/255,I=f/255,_=[g,0,0,0,0,0,E,0,0,0,0,0,I,0,0,0,0,0,1,0];p.filters=[new Laya.ColorFilter(_)],p.alpha=o/255,p.anchorX=0,p.anchorY=0,e.addChild(p),p.pos(t.offsetX+(l-1)*r.width,t.offsetY+(c-1)*r.height)}}move(e){if(!e)return;let t=ye.mapSize,r=Laya.stage.width,n=Laya.stage.height;var s=Re.instance.gameMap,o=0,l=0;e.x>r/2&&e.x<t.width-.5*r?o=-(e.x-r/2):e.x<=r/2?o=0:e.x>=t.width-.5*r&&(o=-(t.width-r)),e.y>n/2&&e.y<t.height-.5*n?l=-(e.y-n/2):e.y<=n/2?l=0:e.y>=t.height-.5*n&&(l=-(t.height-n));var c=Qe.distancePoint(o,l,s.x,s.y);c<200&&(o=Qe.lerp(s.x,o,.1),l=Qe.lerp(s.y,l,.1)),s.pos(o,l)}};var Ns=class Ns{static getInstance(e=null,t=null){return Ns.instance||(Ns.instance=new Ns(e,t)),Ns.instance}constructor(e,t){if(!e)throw new Error("gameLayer Must Be Not Null");this.foodManager=yi.instance,this.snackManager=et.instance;let r=this.snackManager.container,n=this.foodManager.container,s=new Laya.Sprite;e.addChild(n),e.addChild(r),e.addChild(s),s.addChild(Os.getInstance()),this.foodManager.init(),t&&(t.initJoystick("JoyStickBg",ye.JoystickSize.JoyStickBg,"JoyStickHandleBg",ye.JoystickSize.JoyStickHandleBg),t.changeMode(ye.JoystickMODE.MOVED)),this.initGameMap(e)}startGame(){this.snackManager.initSnacks(),nt.Instance.start()}initTimer(){Laya.timer.frameLoop(1,this,this.update)}clearTimer(){nt.Instance.stop()}endTimer(){nt.Instance.end(),kt.instance.close()}update(e){if(this.snackManager.updateSnakes(Laya.timer.delta),this.gameMap.move(this.snackManager.getSelfSnackPos()),$.needDraw){let t=Os.getInstance();if(t){let r=wn.getInstance(null).getAllCollidables();t.updateCollidables(r),t.draw()}}}initGameMap(e){this.gameMap=new dh(e)}updateSpeedRate(e=ye.snackType.SELF,t=ye.snackSpeedRate.speedUp){this.snackManager.updateSpeedRate(e,t,!0)}createFood(e){return this.foodManager.addFood(e)}removeAllFoods(){this.foodManager.removeAllFoods()}clear(){this.clearTimer(),this.snackManager=null,this.foodManager=null,this.gameMap.destroy(),this.gameMap=null,Ns.instance=null}};Ns.instance=null;var Yi=Ns;var Ti=class Ti{constructor(){this.arenaType=1;this.validEnemyList=[];this.gameWindowX=0;this.gameWindowY=0;this.isControl=!1;this.tIndex=0;this.mapDir=-4;this.moveP=new Laya.Point;this.rotateSpeed=500;this.speedRate=1;this.speed=6;this.time=0;this.dir=0;this.aimDir=0;this.bones=[ft.create(0,0)]}get gameMap(){return this._gameMap}set gameMap(e){this._gameMap=e}clearData(){kt.instance.close(),et.instance.clear(),yi.instance.clear(),Yi.getInstance().clear(),Laya.Pool.clearBySign(Cr.POOL_NAME),Laya.Pool.clearBySign(Ar.POOL_NAME),this.gameMap=null,this.box_players=null,this.box_behind=null,this.box_front=null,this.img_smallMap=null,this.otherHeroSpr=null,this.matchHeroSmallDic=null,this.allOrders=null}static get instance(){return Ti._instance==null&&(Ti._instance=new Ti),Ti._instance}init(){this.validEnemyList=[]}insertValidList(e){this.isFInd(e,this.validEnemyList)||this.validEnemyList.push(e)}isFInd(e,t){var r=!1;(!e||!t||t.length<=0)&&(r=!1);for(let n=0;n<t.length;n++)if(t[n]==e)return!0;return r}isFIndIndex(e,t){var r=-1;(!e||!t||t.length<=0)&&(r=-1);for(let n=0;n<t.length;n++)t[n]==e&&(r=n);return r}removeValidListByValue(e){if(!(!e||!this.validEnemyList||this.validEnemyList.length<=0)){var t=this.isFIndIndex(e,this.validEnemyList);t!=-1&&this.validEnemyList.splice(t,1)}}createWallMap(){Laya.loader.load("resources/tiledMap/map1_32.json").then(()=>{let t=Laya.loader.getRes("resources/tiledMap/map1_32.json").data.layers[2],r=t.data,n=t.width,s=t.height,o;o=new Array,this.gridXNum=n,this.gridYNum=s;for(var l=0;l<this.gridYNum;l++){o[l]=new Array;for(var c=0;c<this.gridXNum;c++)r[l*this.gridXNum+c]==0?o[l][c]=1:o[l][c]=0}this.graph=new window.Graph(o),this.opts=[],this.opts.closest=!0,this.opts.heuristic=window.astar.heuristics.diagonal})}getEveryPath(e,t){var r,n=this.graph.grid[Math.ceil(e.y/32)-1][Math.ceil(e.x/32)-1],s=this.graph.grid[Math.ceil(t.y/32)-1][Math.ceil(t.x/32)-1];n.weight==0&&(console.log(n,"不能通过"),n=this.getNeighborCanGo(n)),s.weight==0&&(console.log(s,"不能通过"),s=this.getNeighborCanGo(s));var o=new Date().getTime();r=window.astar.search(this.graph,n,s,{closest:this.opts.closest});var l=new Date().getTime();return this.tIndex++,r}getNodeAt(e,t){var r=this.graph.grid[Math.ceil(t/32)-1][Math.ceil(e/32)-1];return r}isInBounds(e,t){return e>=0&&e<this.gridYNum&&t>=0&&t<this.gridXNum}isWalkableAt(e,t){return this.isInBounds(e,t)?this.graph.grid[e][t].weight==1:!1}getNeighborCanGo(e,t=1){let r=e.x,n=e.y,s=[{dx:0,dy:-t},{dx:t,dy:0},{dx:0,dy:t},{dx:-t,dy:0}],o=[{dx:-t,dy:-t},{dx:t,dy:-t},{dx:t,dy:t},{dx:-t,dy:t}];for(let l of s){let c=r+l.dx,p=n+l.dy;if(this.isWalkableAt(c,p))return this.graph.grid[c][p]}for(let l of o){let c=r+l.dx,p=n+l.dy;if(this.isWalkableAt(c,p))return this.graph.grid[c][p]}return this.getNeighborCanGo(e,++t)}getNeighbors(e){let t=[],r=e.x,n=e.y,s=[{dx:0,dy:-10},{dx:10,dy:0},{dx:0,dy:10},{dx:-10,dy:0}],o=[{dx:-10,dy:-10},{dx:10,dy:-10},{dx:10,dy:10},{dx:-10,dy:10}];return s.forEach(l=>{let c=r+l.dx,p=n+l.dy;this.isWalkableAt(c,p)&&t.push(this.graph.grid[c][p])}),o.forEach(l=>{let c=r+l.dx,p=n+l.dy;this.isWalkableAt(c,p)&&t.push(this.graph.grid[c][p])}),t}getRunways(e){let t=[],r=e.x,n=e.y,s=[{dx:0,dy:-2},{dx:2,dy:0},{dx:0,dy:2},{dx:-2,dy:0}],o=[{dx:-2,dy:-2},{dx:2,dy:-2},{dx:2,dy:2},{dx:-2,dy:2}];return s.forEach(l=>{let c=r+l.dx,p=n+l.dy;this.isWalkableAt(c,p)&&t.push(this.graph.grid[c][p])}),o.forEach(l=>{let c=r+l.dx,p=n+l.dy;this.isWalkableAt(c,p)&&t.push(this.graph.grid[c][p])}),t}updateFoods(){Yi.getInstance().removeAllFoods(),this.createFoods()}createFoods(){let e=Le.instance.matchDto.item.length;for(var t=0;t<e;t++){var r=Le.instance.matchDto.item[t];Yi.getInstance().createFood(r)}}drawPath(e){if(this.box_players.graphics.clear(),e.length>1){this.box_players.graphics.drawLine(this.transformPos(e[0].y),this.transformPos(e[0].x),this.transformPos(e[1].y),this.transformPos(e[1].x),"#FF0000");for(let t=0;t<e.length;t++)this.box_players.graphics.drawCircle(this.transformPos(e[t].y),this.transformPos(e[t].x),5,"#00FF00"),t<e.length-1&&this.box_players.graphics.drawLine(this.transformPos(e[t].y),this.transformPos(e[t].x),this.transformPos(e[t+1].y),this.transformPos(e[t+1].x),"#FF0000")}}transformPos(e){return e*32+16}handleOperationDetail(e){switch(e.msgtype){case X.snake.socket.MessageType.MSG_PLAYER_OPR:var t=e.msgBody,h=t.frame,l=t.roleId;Ti.instance.onRevOprPush(t);break;case X.snake.socket.MessageType.MSG_EAT_FOOD:let _=e.msgBody;var r=_.fid,n=_.score,s=_.lenght,l=_.roleId,o=_.remain;yi.instance.showRemain(o);var d=_.head,h=_.frame,g=Ti.instance.getRoleById(l);g&&(g.updateHead(h,d,_.speed,_.curDir,_.aimDir),g.updateLen(s),yi.instance.eateFoodIds(g,r,n),g.score=n);break;case X.snake.socket.MessageType.MSG_PLAYER_COLLISION:let S=e.msgBody;var l=S.roleId,c=S.food,p=S.taret,d=S.head,h=S.frame,f=S.die,g=Ti.instance.getRoleById(l);if(g&&(g.updateHead(h,d,S.speed,S.curDir,S.aimDir),g.isSend=!1,f!="-1")){var E=Ti.instance.getRoleById(p);f==l?(g.die(),E&&E.addKill(1)):(E&&E.die(),g.addKill(1)),c&&c.length&&yi.instance.addFoods(c)}break;case X.snake.socket.MessageType.MSG_NOTICE_ENTER:var I=e.msgBody;et.instance.newAddSnake(I);break}}handleFrameOperations(e){let t=e.frame,r=e.minEventFrame,n=e.serverCmdDataDtos,s=nt.Instance.currentFrame,o=s-t;$.Debug==2&&console.log("handleFrameOperations: localFrame: ",s,"serverFrame: "+t,"minEventFrame: "+r,n);for(let l of n)nt.Instance.addOperation(l);if(s>=r+1){console.warn("handleFrameOperations: currentFrame: ",s,"minEventFrame: "+r,"过期帧 回滚"),nt.Instance.handleLateFrame(r+1,n);return}s<r-2&&(console.warn("handleFrameOperations: currentFrame: ",s,"serverFrame: "+t,"追赶"),nt.Instance.quickPlay())}onRevOprPush(e){if(e!=null){var t=Ti.instance.getRoleById(e.roleId);if(t){if(t.updateHead106(e.frame,e.head,e.speed,e.curDir,e.aimDir),e.opr==1){var r=e.value;t.rorate(r)}else if(e.opr==2){var n=e.value;t.updateSpeedRate(n)}}else console.log(e.roleId+" snake is null")}}onUpdatePlayerObject(e,t){if(e!=null){var r=Ti.instance.getRoleById(e.roleId);if(r)if(e.state==!1){if(r.isAlive()){var n=r.tag.roleId==B.instance.playerDto.pid;r.die()}console.log("收到数据 玩家死了：",e.state)}else{var s=e.eatenIds;s&&s.length&&console.log("服务端自动吃食物: ",s);var o=e.score,l=e.length,c=e.snake[0],t=e.frame;r.updateHead107(t,c,e.speed,e.direction,e.aimDir),r.updateLen(l),yi.instance.eateFoodIds(r,s,o),r.score=o}else console.log(e.roleId+" snake is null")}}sendRestoreData(){if(Le.instance.msgEndbody==null&&et.instance.selfSnack&&et.instance.selfSnack.isAlive()){var e=B.instance.playerDto.pid,t=X.snake.socket.MessageType.MSG_REQUEST_ROOM_DATA,r=X.snake.socket.CS_REQUEST_ROOM_DATA.fromObject({roleId:e});kt.instance.sendData(t,r)}}onRevRestorePush(e){Le.instance.matchDto=e,A.intance.event(v.EVENT_RESTORE_DATA)}getRoleById(e){return et.instance.matchHeroSprDic?et.instance.matchHeroSprDic.get(e):null}getValidList(){return this.validEnemyList}playMusic(){Ke.instance.playMusicByURL("mp3/battle.mp3"),Dt.instance.needPop=!1}playSound(e){var t="";e==1?t="resources/music/pugong":e==2?t="resources/music/enemyHit":e==3&&(t="resources/music/dazhao"),Ke.instance.playSound(t+".wav",1)}setCurrentHero(e){var t=Le.instance.matchWatcher;if(!t){e.isMe=!0;var r=this.myHeroSpr==null;this.myHeroSpr=e,this.moveType=Te.CAMERA_FOLLOW_ME,Ti.instance.moveGameWindow(!0),this.myHeroSpr.initBirth(r)}}setOtherHero(e){if(this.otherHeroSpr&&this.otherHeroSpr==e){this.setCameraIdle();return}this.removeOtherHero(),e.setFollowIcon(!0),this.otherHeroSpr=e,this.moveType=Te.CAMERA_FOLLOW_OTHER,Ti.instance.moveGameWindow(!0)}setCameraIdle(){this.removeOtherHero(),this.moveType=Te.CAMERA_IDLE,Ti.instance.moveGameWindow(!0)}removeOtherHero(){this.otherHeroSpr&&this.otherHeroSpr.setFollowIcon(!1),this.otherHeroSpr=null}getAttackTarget(e,t){console.log("getAttackTarget");var r=t.distance,n=t.targetsType;if(n==1){let l=new Laya.Point(e.x,e.y),c=Qe.getUnitVector(e.roleDirection);var s=[];return this.matchHeroSprs&&this.matchHeroSprs.forEach(p=>{if(!p._isDead&&!this.isOneTeam(e,p)&&e.roomPlayerDto.id!=p.roomPlayerDto.id){var d=this.getEnemyDistance(e,p);if(d<=r){let h=new Laya.Point(p.x,p.y),f=Qe.subtract(h,l);f.x*c.x+f.y*c.y>0&&s.push(p)}}}),s}else if(n==2){let l,c=1e4;if(this.matchHeroSprs&&this.matchHeroSprs.forEach(p=>{if(!p._isDead&&!this.isOneTeam(e,p)&&e.roomPlayerDto.id!=p.roomPlayerDto.id){var d=this.getEnemyDistance(e,p);d<=r&&d<c&&this.canAttack(e,p)&&(l=p,c=d)}}),l)return[l]}else if(n==3){let l=[];this.matchHeroSprs&&this.matchHeroSprs.forEach(d=>{if(!d._isDead&&!this.isOneTeam(e,d)&&e.roomPlayerDto.id!=d.roomPlayerDto.id){var h=this.getEnemyDistance(e,d);h<=r&&l.push(d)}});let c=[];var o=t.targetsNum;let p=this.shuffleArray(l);for(let d=0;d<Math.min(o,p.length);d++)c.push(p[d]);return c}return[]}shuffleArray(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}isOneTeam(e,t){return e.roomPlayerDto&&e.roomPlayerDto.no?e.roomPlayerDto.no==t.roomPlayerDto.no:e.roomPlayerDto.id==t.roomPlayerDto.id}getEnemyDistance(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}canAttack(e,t){let r=new Laya.Vector2;r.x=t.x-e.x,r.y=t.y-e.y;let n=Qe.getUnitVector(e.roleDirection),s=Math.atan2(r.y,r.x)-Math.atan2(n.y,n.x);s<0&&(s+=2*Math.PI),s=s*180/Math.PI;let o=90;return e.roomPlayerDto.npc&&(o=120),s<o||s>360-o}canTui(e,t){let r=new Laya.Vector2;r.x=t.x-e.x,r.y=t.y-e.y;let n=Qe.getUnitVector(e.roleDirection),s=Math.atan2(r.y,r.x)-Math.atan2(n.y,n.x);s<0&&(s+=2*Math.PI),s=s*180/Math.PI;let o=45;return s<o||s>360-o}setMyHeroDirection(e){var t=Le.instance.matchWatcher;if(t){if(!this.moveP){console.log("setMyHeroDirection: "+this.moveP);return}this.moveType!=Te.CAMERA_DIRECT_OPERATE&&(this.removeOtherHero(),this.moveType=Te.CAMERA_DIRECT_OPERATE,this.setMapPos()),this.mapDir=e}else{if(!et.instance.selfSnack)return;e!=-4?(Yi.getInstance().snackManager.rorate(ye.snackType.SELF,e),this.isControl=!0):this.isControl=!1}}fromBigToSmall(e,t){var r=e*185/ye.mapSize.width,n=t*185/ye.mapSize.height;return[r,n]}fromSmallToBig(e,t){var r=Le.instance.currArenaItem.mapid,n=e/(185/3040),s=t/(185/3040);return r==1002&&(n+=160,s+=160),[n,s]}clickSmallMapToMove(e){this.removeOtherHero();var t=Ti.instance.fromSmallToBig(e.x,e.y);this.moveP.setTo(t[0],t[1]),this.moveType=Te.CAMERA_MAP_CLICK,this.moveGameWindow(!0)}moveGameWindow(e=!1){return;if(this.moveType!=Te.CAMERA_IDLE){if(this.moveType==Te.CAMERA_FOLLOW_ME){if(!et.instance.selfSnack)return;this.moveP.setTo(et.instance.selfSnack.x,et.instance.selfSnack.y)}else if(this.moveType==Te.CAMERA_FOLLOW_OTHER){if(!this.otherHeroSpr)return;this.otherHeroSpr._isDead?this.setCameraIdle():this.moveP.setTo(this.otherHeroSpr.x,this.otherHeroSpr.y)}else if(this.moveType==Te.CAMERA_MAP_CLICK){if(!this.moveP)return}else if(this.moveType==Te.CAMERA_DIRECT_OPERATE){if(!this.moveP)return;if(this.mapDir!=-4){let p=1*9.799999999999999,d=this.mapDir*(Math.PI/180),h=p*Math.cos(d),f=p*Math.sin(d);var t,r;this.gameWindowX=t-Laya.stage.width/2,this.gameWindowY=r-Laya.stage.height/2;var n=-this.gameWindowX,s=-this.gameWindowY,o=Laya.stage.width-this.gameMap.width,l=Laya.stage.height-this.gameMap.height;console.log("moveGameWindow: gameMap ",this.moveType,e,n,s,Laya.stage.width,Laya.stage.height,this.gameMap.x,this.gameMap.y),n>0?t=this.moveP.x:n<o&&(t=this.moveP.x),s>0?r=this.moveP.y:s<l&&(r=this.moveP.y),this.moveP.setTo(t,r),e=!0}else return}if(this.moveP){this.gameWindowX=this.moveP.x-Laya.stage.width/2,this.gameWindowY=this.moveP.y-Laya.stage.height/2;var n=-this.gameWindowX,s=-this.gameWindowY,o=Laya.stage.width-this.gameMap.width,l=Laya.stage.height-this.gameMap.height;n>0?n=0:n<o?n=o:n=n,s>0?s=0:s<l?s=l:s=s,e?(Laya.Tween.clearAll(this.gameMap),this.gameMap.pos(n,s,!0)):Laya.Tween.to(this.gameMap,{x:n,y:s},0)}}}setMapPos(){var e=Laya.stage.width/2-this.gameMap.x,t=Laya.stage.height/2-this.gameMap.y;this.moveP.setTo(e,t)}initMove(){var e=870.9040904578862,t=1487.9661486407304;console.log("TEST==== 蛇头坐标：",e,t),this.speedRate=1,console.log("TEST==== 加速倍数 speedRate：",this.speedRate),console.log("TEST==== 速度参数 speed：",this.speed,"rotateSpeed：",this.rotateSpeed,"defaultMoveInterval：",ye.snack.defaultMoveInterval),this.bones=[ft.create(e,t)];var r=105;this.dir=r;var n=Qe.getAngleToVec(r);n.normalize(),console.log("TEST==== 当前方向：",r,"向量：",n.x,n.y),this.toAimDir(100)}toAimDir(e){this.time=0,this.aimDir=e;var t=Qe.getAngleToVec(e);t.normalize(),console.log("TEST==== 目标方向：",e,"向量：",t.x,t.y);for(var r=0;r<30;r++)this.move(null)}move(e){this.time++;for(let n=0;n<this.speedRate;n++){let s=this.aimDir-this.dir,o=this.rotateSpeed*ye.snack.defaultMoveInterval;if(Math.abs(s)<o)this.dir=this.aimDir,console.log("move:============  当前直接设目标方向"," aimDir"+this.aimDir," dir："+this.dir);else{s=(s+360)%360,s>180&&(s-=360);var t=Math.abs(s)<o?s:o*(s>0?1:-1);this.dir+=t,this.dir>=360&&(this.dir-=360),this.dir<0&&(this.dir+=360),console.log("第"+this.time+"次"," ============  rotateAngle："+t," aimDir"+this.aimDir," dir："+this.dir)}let l=this.dir*Math.PI/180,c=ft.create(Math.cos(l),Math.sin(l));var r=this.bones[0].add(c.mul(this.speed));this.bones[0].assign(r),console.log("TEST==== 移动蛇头坐标：","第"+this.time+"次",this.bones[0].x,this.bones[0].y)}}};Ti._instance=null;var Re=Ti;var qt=class qt{constructor(){this.resArr=["gameIcon/snakeMatch/snakes/img_head1001.png","gameIcon/snakeMatch/snakes/img_head1002.png","gameIcon/snakeMatch/snakes/img_head1003.png","gameIcon/snakeMatch/snakes/img_body1001.png","gameIcon/snakeMatch/snakes/img_body1002.png","gameIcon/snakeMatch/snakes/img_body1003.png",{url:"scenes/mainView/MainScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBodySpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchSnakeBeanSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/DamageNumber.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtLoadingView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtNoticeView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/asset/AssetNewScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/createRole/RoleInfoScene.ls",type:Laya.Loader.HIERARCHY},"gameIcon/spine/img_ziyousai.png","gameIcon/spine/img_she.png","gameIcon/spine/img_qianbao.png","gameIcon/spine/img_gonghui.png","gameIcon/spine/img_cion4.png","gameIcon/spine/img_cion2.png","gameIcon/spine/img_cion1.png","gameIcon/spine/img_anniu3.png","gameIcon/spine/img_anniu2.png","gameIcon/spine/img_anniu1.png","gameIcon/spine/img_jingjisai.png"];this.m_arrPreResource=["config/spot.json"];this.m_arrInitResource=["config/general.json","config/head.json","config/country.json","config/shop.json","config/snake.json","config/foods.json","config/item.json","config/arena.json","config/arenaType.json","config/snakeLengthRules.json","config/node.json","config/currencyAddress.json","config/aCoin.json","config/coinAddress.json"];this.m_objModuleReource={FindScene:["res/atlas/find.atlas"],MainScene:["res/atlas/main.atlas"],ShopScene:[],RoleInfoScene:[],RankScene:[],OpenGameScene:[],AssetNewScene:[],CommentDialog:["res/atlas/comment.atlas"],GuideView:["res/atlas/guide.atlas","res/atlas/ShopView.atlas","config/newplayer.json"],SelectHeadDialog:[],UnionApplyDialog:["config/alliance_constant.json","config/guild_building_main.json","config/alliance_pos.json","config/guild_level.json"],HeroScene:["res/atlas/hero.atlas","config/hero_lv.json","config/hero_attup.json","res/atlas/equip.atlas"],AFKBattleScene:["res/atlas/battle.atlas"],ArenaScene:["res/atlas/Arena.atlas"],KnapsackScene:["res/atlas/mainUI1.atlas"]};this.m_objModuleViews={NoServerView:"scenes/createRole/NoServer.lh",CreateLoginView:"scenes/createRole/CreateLoginView.lh",ChangeHeadDialog:"scenes/createRole/ChangeHeadDialog.lh",HeroGetDialog:"scenes/shop/HeroGetDialog.lh",BuyTicketDialog:"scenes/shop/BuyTicketDialog.lh",ItemGetDialog:"scenes/item/ItemGetDialog.lh",EquipStarUpDialog:"scenes/item/EquipStarUpDialog.lh",RewardGetDialog:"scenes/item/RewardGetDialog.lh",KnapsackTipDialog:"scenes/item/KnapsackTipDialog.lh",SelectHeadDialog:"scenes/createRole/SelectHeadDialog.lh",TxtNoticeView:"scenes/notice/TxtNoticeView.lh",NoticeDialog:"scenes/notice/NoticeDialog.lh",HelpDialog:"scenes/notice/HelpDialog.lh",ImgDialog:"scenes/notice/ImgDialog.lh",ChampDetailDialog:"scenes/asset/ChampDetailDialog.lh",ChampRecordDialog:"scenes/asset/ChampRecordDialog.lh",RoleInfoDialog:"scenes/createRole/RoleInfoDialog.lh",RemGetDialog:"scenes/createRole/RemGetDialog.lh",CreateRoomDialog:"scenes/mainView/CreateRoomDialog.lh",CreateRentalDialog:"scenes/shop/CreateRentalDialog.lh",MyLeasedDialog:"scenes/shop/MyLeasedDialog.lh",MyRentedDialog:"scenes/shop/MyRentedDialog.lh",MyRentalBuyDialog:"scenes/shop/MyRentalBuyDialog.lh",EnterRoomView:"scenes/mainView/EnterRoomView.lh",InputPwdDialog:"scenes/mainView/InputPwdDialog.lh",RoomInfoDialog:"scenes/mainView/RoomInfoDialog.lh",HeroDetailDialog:"scenes/hero/HeroDetailDialog.lh",MatchEndRankView:"scenes/match/MatchEndRankView.lh",MatchEndTeamRankView:"scenes/match/MatchEndTeamRankView.lh",MatchEndRewardTokensDialog:"scenes/match/MatchEndRewardTokensDialog.lh",MyBookingView:"scenes/airdrop/MyBookingView.lh",UnionMemberView:"scenes/union/UnionMemberView.lh",UnionListView:"scenes/union/UnionListView.lh",CreateSubUnionView:"scenes/union/CreateSubUnionView.lh",ChangeUnionIconDialog:"scenes/union/ChangeUnionIconDialog.lh",MySubUnionView:"scenes/union/MySubUnionView.lh",UnionMemberApplyView:"scenes/union/UnionMemberApplyView.lh",UnionReferralView:"scenes/union/UnionReferralView.lh",UnionTransferView:"scenes/union/UnionTransferView.lh",TicketTransferView:"scenes/union/TicketTransferView.lh",HeroTransferView:"scenes/hero/HeroTransferView.lh",BanAccountView:"scenes/match/BanAccountView.lh",MatchReadyView:"scenes/match/MatchReadyView.lh",MatchEndView:"scenes/match/MatchEndView.lh",GameSettingLanguageDialog:"scenes/gameSetting/GameSettingLanguageDialog.lh",SkillTipDialog:"scenes/hero/SkillTipDialog.lh",TransferRecordDialog:"scenes/hero/TransferRecordDialog.lh",TeamCreateShareDialog:"scenes/airdrop/TeamCreateShareDialog.lh",TeamShareDialog:"scenes/airdrop/TeamShareDialog.lh",TeamJoinUsingDialog:"scenes/airdrop/TeamJoinUsingDialog.lh",TeamInfoDialog:"scenes/airdrop/TeamInfoDialog.lh",MyTeamDialog:"scenes/airdrop/MyTeamDialog.lh",MyFriendDialog:"scenes/airdrop/MyFriendDialog.lh",BaseAlertDialog:"scenes/baseAlert/BaseAlertDialog.lh",MatchConfimDialog:"scenes/baseAlert/MatchConfimDialog.lh",InviteConfimDialog:"scenes/airdrop/InviteConfimDialog.lh",ApplyConfimDialog:"scenes/airdrop/ApplyConfimDialog.lh",CreateSubWalletDialog:"scenes/scholarship/CreateSubWalletDialog.lh",WalletChooseHeroDialog:"scenes/scholarship/WalletChooseHeroDialog.lh",WalletChoosePropsDialog:"scenes/scholarship/WalletChoosePropsDialog.lh",EmployInfoDialog:"scenes/scholarship/EmployInfoDialog.lh",HireDetailDialog:"scenes/asset/HireDetailDialog.lh",ProxyDetailDialog:"scenes/asset/ProxyDetailDialog.lh",WithDrawRecordDialog:"scenes/asset/WithDrawRecordDialog.lh",NodeRevenueRecordDialog:"scenes/asset/NodeRevenueRecordDialog.lh",CardPayView:"scenes/asset/CardPayView.lh",SwapView:"scenes/asset/SwapView.lh",RentalRecordDialog:"scenes/scholarship/RentalRecordDialog.lh",PrivateChatDialog:"scenes/friend/PrivateChatDialog.lh",AirdropRecordDialog:"scenes/asset/AirdropRecordDialog.lh",ActivityInfoDialog:"scenes/createRole/ActivityInfoDialog.lh",CharacterStarDialog:"scenes/createRole/CharacterStarDialog.lh",LastDrawDialog:"scenes/lcPool/LastDrawDialog.lh",IgoPageScene:"scenes/igoPage/IgoPageScene.lh",IgoJoinDialog:"scenes/igoPage/IgoJoinDialog.lh",IgoRecordDialog:"scenes/igoPage/IgoRecordDialog.lh",DailyTaskPropsDialog:"scenes/dailyTasks/DailyTaskPropsDialog.lh",DailyTaskNoPropsDialog:"scenes/dailyTasks/DailyTaskNoPropsDialog.lh",PveScene:"scenes/pve/PveScene.lh",PveRecordView:"scenes/pve/PveRecordView.lh",PveSponsorView:"scenes/pve/PveSponsorView.lh",PveChoosePropsDialog:"scenes/pve/PveChoosePropsDialog.lh",ReferralDialog:"scenes/createRole/ReferralDialog.lh",ReferralL2Dialog:"scenes/createRole/ReferralL2Dialog.lh",TotalBattlesDialog:"scenes/createRole/TotalBattlesDialog.lh",DepositDialog:"scenes/asset/DepositDialog.lh",WithdrawDialog:"scenes/asset/WithdrawDialog.lh"};this.m_objConfigReource={};this.m_commonResource=new Ce;this.loadingView=Laya.Browser.window.loadingView;this.ii=100;this.baseUrl="https://cdn.phantomarena.ai/hero/";if(qt._instance)throw new Error("LayerManager是单例,不可new.");qt._instance=this}static get instance(){return qt._instance==null&&(qt._instance=new qt),qt._instance}init(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),this.initGameLanguage()}initGameLanguage(){qt.GameLanguage_URL="config/language.json",Laya.loader.load(qt.GameLanguage_URL,Laya.Handler.create(this,this.initGameResource))}initGameResource(e){if(e==null)return;let t=qt.instance.getResBySetURL(qt.GameLanguage_URL);L.instance.initLanTypes(t.data),Laya.loader.clearRes(qt.GameLanguage_URL),this.onConfigLoaded()}onError(e){}onConfigLoaded(){let e=new Mn;e.ID=4,e.Event="加载语言包信息",Ye.instance.sendCustumEvent(4,null,e),$.ignoreLang||(B.instance.m_strLanguage=L.instance.getLanIdByType($.User_Lan)),this.m_UILang="config/lang_english"+B.instance.m_strLanguage+".json",this.m_NomalLang="config/english"+B.instance.m_strLanguage+".json",this.m_NomalLang1="config/english1.json",this.m_ErrorLang="config/error"+B.instance.m_strLanguage+".json",this.m_arrPreResource.push(this.m_UILang),this.m_arrPreResource.push(this.m_NomalLang),this.m_arrPreResource.push(this.m_NomalLang1),this.m_arrPreResource.push(this.m_ErrorLang),this.initResourceURL(this.m_arrPreResource,!0),this.initResourceURL(this.m_arrInitResource,!0),this.addFont1()}addFont1(){Laya.loader.load("res/font/CookieRun Regular.otf",Laya.Loader.TTF).then(()=>{this.loadDemoResource()})}loadDemoResource(){Laya.loader.load(this.resArr,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{Pe.instance.init(),Re.instance.damageNumPrefab=Laya.loader.getRes("scenes/match/DamageNumber.lh"),Re.instance.aniSkPrefab=Laya.loader.getRes("scenes/hero/AniSk.lh"),$i.instance.enterRoomPrefab=Laya.loader.getRes("scenes/mainView/EnterRoomSpr.lh"),$i.instance.specialBarrageSprPrefab=Laya.loader.getRes("scenes/mainView/SpecialBarrageSpr.lh"),Re.instance.roleAniPrefab=Laya.loader.getRes("scenes/match/MatchSnakeSpr.lh"),Re.instance.matchSnakeBodyPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBodySpr.lh"),Re.instance.matchSnakeBeanPrefab=Laya.loader.getRes("scenes/match/MatchSnakeBeanSpr.lh");var e=Re.instance.roleAniPrefab.create();console.log(" ================ roleAniPrefab: "+e);var t=Re.instance.matchSnakeBodyPrefab.create();console.log(" ================ snakeBodyPrefab: "+t),this.onLoadThreeDimen()})}onLoadThreeDimen(){Laya.loader.load(this.m_arrPreResource,Laya.Handler.create(this,this.onPreAssetLoaded),Laya.Handler.create(this,this.onPreAssetPress2,null,!1))}onPreAssetPress1(e){this.va=(e*100*.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetPress2(e){this.va=(e*100*.5+.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetLoaded(e){if(!e)return;let t=Laya.Browser.now();Ca.instance.initSpotCfgData(),this.initResourceURL(this.m_objModuleReource),this.initResourceURL(this.m_objConfigReource),Ye.instance.sendCustumEvent(5),j.intance.preInit(),this.setGlobalLanguage(),Ye.instance.sendCustumEvent(6),A.intance.event(v.EVENT_BACK_TO_LOGIN),ze.intance.initPreload(),this.loadingView&&this.loadingView.loading(100),console.log("-----------------------preload-time:"+(Laya.Browser.now()-t))}setGlobalLanguage(){let e=qt.instance.getResByURL(this.m_NomalLang);L.instance.initConfigLan(e.data);let t=qt.instance.getResByURL(this.m_NomalLang1);L.instance.initConfigLan1(t.data);let r=qt.instance.getResByURL(this.m_UILang);L.instance.initUILan(r.data);let n=qt.instance.getResByURL(this.m_ErrorLang);Xe.instance.initErrData(n.data),this.clearResUrlByRoot(this.m_UILang,!0),this.clearResUrlByRoot(this.m_NomalLang,!0),this.clearResUrlByRoot(this.m_NomalLang1,!0),this.clearResUrlByRoot(this.m_ErrorLang,!0)}initResourceURL(e,t=!1){if(e instanceof Array)this.setResURLArr(e,t);else if(e instanceof Object)for(let r in e)this.setResURLArr(e[r],t)}setResURLArr(e,t){let r,n;for(let s=0;s<e.length;s++)t?(this.m_commonResource.set(e[s],!0),n=this.setResURL(e[s]),r=this.getTypeFromUrl(n),e[s]={url:n,type:r,size:1,priority:1}):this.m_commonResource.get(e[s])?(e.splice(s,1),s--):(n=this.setResURL(e[s]),r=this.getTypeFromUrl(n),e[s]={url:n,type:r,size:1,priority:1})}getTypeFromUrl(e){let{ext:t,typeId:r,main:n,loaderType:s}=Laya.Loader.getURLInfo(e);qt._extReg.lastIndex=e.lastIndexOf(".");let o=qt._extReg.exec(e);return o&&o.length>1?o[1].toLowerCase():"text"}setResURL(e){return e}clearResUrlByRoot(e,t=!1){let r=e;Laya.loader.clearRes(r)}hasFormatEffectUrl(e){return e.indexOf("effect/")>=0}setItemResURL(e){return e&&e.hasOwnProperty("item_img")?this.setResURL("icon/"+e.item_img+".png"):""}setThreeDimenUrl(e){return e?this.setResURL("threeDimen/"+e):""}getThreeDimenUrl(e){let t=this.setResURL("threeDimen/"+e);return Laya.Loader.getRes(t)}getResByURL(e){let t=qt.instance.setResURL(e);return Laya.Loader.getRes(t)}getResBySetURL(e){return Laya.Loader.getRes(e)}loadModuleUrl(e,t=null,r=null,n=1,s=!0){console.log("loadModuleUrl m_strName: "+e),this.ii++;let o=qt.instance.m_objModuleReource[e];if(o==null||o.length<1){t.run();return}Laya.loader.load(o,Laya.Handler.create(this,this.loadItemComplete,[t,o]),Laya.Handler.create(this,this.onLoadProgress,[e],!1),r,n,s,this.ii.toString())}loadItemComplete(e,t){this.usedUrlDic||(this.usedUrlDic=new Ce);for(let r in t){let n=t[r].url,s=this.usedUrlDic.get(n);s?this.usedUrlDic.set(n,++s):this.usedUrlDic.set(n,1)}e.run()}clearModuleUrl(e){console.log("clearModuleUrl m_strName: "+e);let t=qt.instance.m_objModuleReource[e];for(let r in t){let n=t[r].url;if(this.usedUrlDic){let s=this.usedUrlDic.get(n);s-=1,s<1?(this.usedUrlDic.remove(n),Laya.loader.clearRes(n)):this.usedUrlDic.set(n,s)}}}onLoadProgress(e,t){}loadResource(e,t=null,r=null,n=null,s=1,o=!0){Laya.loader.load(e,t,r,n,s,o)}getNodeIcon(e){return this.setResURL("gameIcon/node/img_"+e+".png")}getCountryIcon(e){return this.setResURL("gameIcon/country/img_"+e+".png")}getTeamFlag(e){return this.setResURL("gameIcon/hero/teamFlag/img_"+e+".png")}getChestIcon(e){return this.setResURL("gameIcon/items/chest/img_"+e+".png")}getChestBigIcon(e){return this.setResURL("gameIcon/items/chestBig/img_"+e+".png")}getHeroEggIcon(e){return this.setResURL("gameIcon/hero/heroEgg/img_"+e+".png")}getHeroEggBigIcon(e){return this.setResURL("gameIcon/hero/heroEggBig/img_"+e+".png")}getSnakeHeadIcon(e){return this.setResURL("gameIcon/snakeMatch/snakes/img_head"+e+".png")}getSnakeBodyIcon(e){return this.setResURL("gameIcon/snakeMatch/snakes/img_body"+e+".png")}getFoodIcon(e){return this.setResURL("gameIcon/snakeMatch/foods/img_"+e+".png")}getHeroHeadIcon(e){return this.setResURL("gameIcon/hero/heroHead/img_"+e+".png")}getHeroQuality(e){return this.setResURL("gameIcon/hero/heroQuality/img_"+e+".png")}getHeroBackIcon(e){return this.setResURL("gameIcon/hero/heroDetail/img_hero_di_"+e+".png")}getHeroFrontIcon(e){return this.setResURL("gameIcon/hero/heroDetail/img_hero_"+e+".png")}getItemIcon(e){return this.setResURL("gameIcon/items/item/img_"+e+".png")}getItemBgIcon(e){return this.setResURL("gameIcon/items/itemBg/img_"+e+".png")}getItemBigIcon(e){return this.setResURL("gameIcon/items/itemBig/img_"+e+".png")}getItemBigBigIcon(e){return this.setResURL("gameIcon/items/itemBigBig/img_"+e+".jpg")}getItemQualityIcon(e){return this.setResURL("gameIcon/items/itemQuality/img_"+e+".png")}getMoneyIcon(e){return this.setResURL("gameIcon/items/money/img_"+e+".png")}getAttrIcon(e){return this.setResURL("gameIcon/attr/img_attr_"+e+".png")}getSkillIcon(e,t=!1){let r;return t?r=this.setResURL("gameIcon/skill/skills/img_big_"+e+".png"):r=this.setResURL("gameIcon/skill/skills/img_"+e+".png"),r}getMatchSkillIcon(e){return this.setResURL("gameIcon/skill/matchSkills/img_"+e+".png")}getPlayerIcon(e){return parseInt(e)>0?this.setResURL("gameIcon/head/headCircle/img_"+e+".png"):e}getUnionIcon(e){return parseInt(e)>0?this.setResURL("gameIcon/union/badge/img_trade_"+e+".png"):e}getUnionLvIcon(e){return this.setResURL("gameIcon/union/lvIcon/img_trade_"+(e>3?4:e)+".png")}getUnionLvDiIcon(e){return this.setResURL("gameIcon/union/lvIcon/img_trade_di_"+(e>3?4:e)+".png")}getEmoji(e,t){return this.setResURL("gameIcon/emoji/tab"+e+"/img_"+t+".png")}getFontColor(e){return this.setResURL("gameIcon/emoji/img_color_"+e+".png")}getSceneBgUrl(e){return"scene/"+e+".jpg"}clearSKinUrl(e){for(let t in e)e[t]instanceof String&&e[t].indexOf("skincolor")==-1&&Laya.loader.clearRes(e[t]);e=[]}getFunctionIcon(e){return this.setResURL("icon/functionIcon/"+e+".png")}getNewFunIcon(e){return this.setResURL("icon/newFunIcon/"+e+".png")}getSoundURL(e,t=".ogg"){let r;return r=this.setResURL("mp3/"+e+t),r}getSoundURLogg(e){let t;return t=this.setResURL("mp3/"+e),t}getSceneUrl(e){return"scene/sceneBg/"+e+".jpg"}getMianSysIcon(e){return this.setResURL("icon/mainSysIcon/btn_"+e+".png")}getEffectUrl(e){return this.setResURL("effect/"+e+".json")}getLoadingUrl(e){return this.setResURL("effect/"+e)}getGuangImg(e){return this.setResURL("swf/"+e+".png")}getGuildProofBg(e){return this.setResURL("scene/guild/proof/"+e+"/1.png")}getGuildProofHots(e){return this.setResURL("scene/guild/proof/"+e+"/"+e+"/"+e+".json")}getShareImgUrl(e,t=!1,r=!1){let n;return r?e:(e=e+".jpg",t?n="https://mutantbox.8686c.com/16/qa/common/share/"+e:n="https://cdn.test.com/16/qa/common/share/"+e,n)}getHeadUrl(e){return"common/common_icon/"+e+".png"}getMapImg(e){return"gameIcon/map/"+e+"/img_map.jpg"}getMapPrefab(e){return"gameIcon/map/map_"+e+".lh"}clearCache(){}getHeroHeadRes(e,t){return $.Res==0?"gameIcon/hero/heroHead/img_"+e+".png":this.baseUrl+`${e}/${t}.png`}getHeroSkRes(e,t){return $.Res==0?`gameIcon/hero/heroSk/${e}/img_hero.skel`:this.baseUrl+`${e}/${t}/img_hero.skel`}};qt._extReg=/\.(\w+)\??/g;var J=qt;var sl=class extends Laya.Script{constructor(){super();this.m_ioffsetX=0;this.m_ioffsetY=0}onAdded(){this.m_iLayerType=pe.M_POP,this.m_iPositionType=pe.CENTER,this.m_canTouch_all=!1,this.selfMaskAlpha=.8,this.m_arrMapEvent=[],this.canClickMask=!0,this.maskLayer=new Laya.Sprite,this.useShowAnimation=!0,this.useHideAnimation=!0,this.isAutoRealseRes=!0,this.m_strSound=Ke.soundName3}onClickMask(t){this.canClickMask&&this.maskClose()}maskClose(){this.close()}onStageResize(){}onEnable(){this._view=this.owner,this._view.addChild(this.maskLayer),this.createUI(),this.createUIEnd(),this.initializeLater()}createUI(){}createUIEnd(){}initializeLater(){this._addEvent(),this.initData(),this.useShowAnimation?(this._view.visible=!1,this.showAnimationEnd=!1,Laya.timer.frameOnce(5,this,this.popTimeOut,[this._view])):this.showAnimationEnd=!0}popTimeOut(t){Laya.timer.clear(this,this.popTimeOut),t.scale(.5,.5),t.visible=!0,Laya.Tween.to(t,{scaleX:1,scaleY:1,ease:Laya.Ease.backOut},300,null,Laya.Handler.create(this,this.onShowAnimationEnd),2),Ke.instance.playSoundByName(this.m_strSound),this._view.event(Laya.Event.OPEN)}onShowAnimationEnd(){this.showAnimationEnd=!0}_addEvent(){this.maskLayer.on(Laya.Event.CLICK,this,this.onClickMask),Laya.stage.on(Laya.Event.RESIZE,this,this.onStageResize),this.btn_com_back&&this.btn_com_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_com_help&&this.btn_com_help.on(Laya.Event.CLICK,this,this.onHelp),this.addEvent()}addEvent(){}initData(){}_removeEvent(){this.maskLayer.offAll(),Laya.stage.off(Laya.Event.RESIZE,this,this.onStageResize),this.removeEvent()}removeEvent(){}addMapEvent(t,r,n,s,o=null){t.on(r,n,s,o),this.m_arrMapEvent.push(t)}removeAllMapEvent(){if(this.m_arrMapEvent){for(let t=0;t<this.m_arrMapEvent.length;t++)this.m_arrMapEvent[t].offAll();this.m_arrMapEvent.splice(0,this.m_arrMapEvent.length)}}dispose(){if(this.newRoleSpr){for(;this.newRoleSpr.numChildren>0;)this.newRoleSpr.removeChildAt(0);this.newRoleSpr=null}this.isDispose=!0,ne.intance.removeViewFromModuleManger(this),this.m_strName=null,this.m_strSound=null,this._removeEvent(),this.removeAllMapEvent(),Laya.Tween.clearAll(this._view),this.m_arrMapEvent=null,this.btn_com_back&&this.btn_com_back.offAll(),this.btn_com_help&&this.btn_com_help.offAll(),this.maskLayer&&(Laya.timer.clearAll(this.maskLayer),Laya.Tween.clearAll(this.maskLayer),this.maskLayer.offAll(),this.maskLayer.graphics.destroy(),this.maskLayer.removeSelf(),this.maskLayer.destroy(!0)),this.isAutoRealseRes&&J.instance.clearModuleUrl(this.m_strName),this._view&&(Laya.timer.clearAll(this._view),Laya.Tween.clearAll(this._view),this._view.offAll(),this._view.graphics.destroy(),this._view.removeSelf(),this._view.destroy(!0),this._view=null),Laya.timer.clearAll(this),Laya.Tween.clearAll(this),A.intance.event(v.EVENT_CLOSE_MODULE)}sendData(t,r=null){r==null&&(r=[])}close(t=null){this.useHideAnimation&&this._view?Laya.Tween.to(this._view,{scaleX:.5,scaleY:.5,ease:Laya.Ease.backIn},200,null,Laya.Handler.create(this,this.dispose,null),2):this.dispose()}static closeAll(){ne.intance.closeAll()}backToPreScene(){let t=ze.intance.getPreSceneData();ze.intance.setCurrentScene(t[0],t[1],t[2],t[3],!1)}get btn_com_back(){return this._view?this._view.getChildByName("btn_com_back"):null}get btn_com_help(){return this._view?this._view.getChildByName("btn_com_help"):null}onHelp(){this.m_helpId&&ne.intance.openModule(y.HelpDialog,this.m_helpId)}onBack(){this.close()}};var ne=class i extends Laya.DialogManager{constructor(){super();this.views=new Ce;this.m_arrLoadingArr=[];if(i._instance)throw new Error("LayerManager是单例,不可new.");i._instance=this,Laya.Dialog.manager=this}static get intance(){return i._instance||(i._instance=new i),i._instance}openModule(t,r=null){A.intance.event(v.EVENT_OPEN_MODULE,[t,r])}hasOpenView(t){return this.views.get(t)!=null}getOpenView(t){return this.views.get(t)}disposeView(t){if(this.getOpenView(t)){let r=this.getOpenView(t);if(r instanceof Array)for(let n=0;n<r.length;n++)r[n].close();else r.close()}}init(){A.intance.on(v.EVENT_OPEN_MODULE,this,this.onModulePanel),A.intance.on(v.EVENT_CLOSE_MODULE,this,this.disposeView)}initMainView(){}onModulePanel(t,r=null){console.log("ModuleManager.onModulePanel moudleName:"+t),this.m_arrLoadingArr.indexOf(t)==-1&&(this.getOpenView(t)||(Pe.instance.showLoading(!1),this.m_arrLoadingArr.push(t),J.instance.loadModuleUrl(t,Laya.Handler.create(this,this.onLoaded,[t,r]))))}onLoaded(t,r=null){let n=this.m_arrLoadingArr.indexOf(t);n!=-1&&this.m_arrLoadingArr.splice(n,1);let s;var o=J.instance.m_objModuleViews[t];console.log("onLoaded: ",t,o),Laya.loader.load(o).then(l=>{if(s=l.create(),r&&s.setOpenData(r),s.m_strName=t,this.getOpenView(t)){console.log("Module already open, skipping creation:",t),s.hideLoadingBySelf||Pe.instance.hideLoading();return}if(s instanceof Laya.Box)pe.instence.addToLayer(s,s.m_iLayerType),pe.instence.setPosition(s,s.m_iPositionType,s.m_ioffsetX,s.m_ioffsetY),this.addViewToModuleManger(s);else if(s instanceof Laya.Dialog){let c=s;c.m_iLayerType==pe.M_POP?(c.isModal=!0,c.isShowEffect=!0,this.open(c,!1,!0)):(c.isShowEffect=!1,this.open(c)),this.addViewToModuleManger(c)}s&&A.intance.event(v.EVENT_MODULE_ADDED,s),s.hideLoadingBySelf||Pe.instance.hideLoading()}).catch(l=>{console.error("onLoaded 加载失败",l)})}addViewToModuleManger(t){let r=t.m_strName;this.views.get(r)?this.views.get(r)instanceof Array?this.views.get(r).push(t):this.views.set(r,[this.views.get(r),t]):this.views.set(r,t),this.on(Laya.Event.CLOSE,this,this.removeViewFromModuleManger)}removeViewFromModuleManger(t){if(!t||!this.views)return;let r=t.m_strName;console.log("removeViewFromModuleManger viewName: "+r),t.off(Laya.Event.CLOSE,this,this.removeViewFromModuleManger);let n=this.views.get(r);if(n instanceof Array){let s=n.indexOf(t);s!=-1&&(n.splice(s,1),n.length==0&&this.views.remove(r))}else this.views.remove(r)}closeAll(){let t=[];for(let r of this.views.values)if(r instanceof Array)for(let n=0;n<r.length;n++){let s=r[n];s instanceof sl&&t.push(s)}else r instanceof sl&&t.push(r);for(let r=0;r<t.length;r++)t[r].dispose();t=[],super.closeAll()}doClose(t){super.doClose(t),this.event(Laya.Event.CLOSE,t)}};var hh=class{constructor(){this.m_dicItemList=new Ce,this.m_dicTypeList=new Ce,this.m_dicSubTypeList=new Ce,this.m_dicBackList=new Ce}initData(e){this.m_dicItemList=new Ce,this.m_dicTypeList=new Ce,this.m_dicSubTypeList=new Ce,this.m_dicBackList=new Ce;let t;for(let n=0;n<e.length;n++){t=new bt;var r=e[n];t.m_iId=r.id,r.pk&&(t.m_iPk=r.pk),t.m_iId=r.id,t.m_iNum=r.count,t.m_iNum>0&&this.pushItem(t)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}getCountById(e,t=!0){return j.intance.m_dicItems.get(e)==null?0:this.getItemCountById(e,t)}pushItem(e){this.m_dicItemList.set(e.m_iId,e),this.m_dicTypeList.get(e.type)==null&&this.m_dicTypeList.set(e.type,new Ce),this.m_dicSubTypeList.get(e.subType)==null&&this.m_dicSubTypeList.set(e.subType,new Ce),this.m_dicBackList.get(e.backType)==null&&this.m_dicBackList.set(e.backType,new Ce),this.m_dicTypeList.get(e.type).set(e.m_iId,e),this.m_dicSubTypeList.get(e.subType).set(e.m_iId,e),this.m_dicBackList.get(e.backType).set(e.m_iId,e)}removeItem(e){this.m_dicItemList.remove(e.m_iId),this.m_dicTypeList.get(e.type).remove(e.m_iId),this.m_dicSubTypeList.get(e.subType).remove(e.m_iId),this.m_dicBackList.get(e.backType).remove(e.m_iId)}updateData(e,t=!1,r=!0){console.log("updateData: ",e,t,r);let n=[],s=!1,o;for(let l=0;l<e.length;l++){e[l]instanceof Array?(o=new mr,o.id=e[l][0],o.count=e[l][1]):o=e[l];let c=this.m_dicItemList.get(o.id);c==null&&(c=new bt(o.id),this.pushItem(c),c.m_bNew=!0),t?c.m_iNum=o.count:(c.newAddCnt=o.count,c.m_iNum=c.m_iNum+o.count),n.push(c.m_iId),c.m_iNum<=0&&this.removeItem(c),c.newAddCnt>0&&Dt.instance.needPop&&r&&(Dt.instance.addItem(c),s=!0)}s&&Dt.instance.needPop&&Dt.instance.autoPop&&kr.instance.startShow(),n.length>0&&A.intance.event(v.PACKAGE_UPDATE_ITEM,[n])}getItemById(e){return this.m_dicItemList.get(e)}getItemsBySubType(e){let t=this.m_dicSubTypeList.get(e);return t==null&&(t=[]),t}getListByType(e){let t=[];return this.m_dicTypeList.get(e)&&(t=this.m_dicTypeList.get(e).values.slice()),t.sort(this.sortOnQa),t}getBackByType(e){let t=[];return this.m_dicBackList.get(e)&&(t=this.m_dicBackList.get(e).values.slice()),t.sort(this.sortOnQa),t}async getQuan(e){let t=[];var n=(await se.requestPost("wxgame/hero/loserTicketBagList",{type:e},!0,!0)).data;let s;for(let c=0;c<n.length;c++){s=new bt;var o=n[c];s.m_iId=o.id,o.pk&&(s.m_iPk=o.pk),s.m_iId=o.id,s.m_iNum=o.count,o.extra&&o.extra.prize&&(s.prizeStatus=2),o.extra&&o.extra.expTime?s.expTime=parseFloat(o.extra.expTime):s.expTime=0;var l=B.instance.m_serverTime;l>s.expTime?e==3&&t.push(s):o.extra&&o.extra.onChain?(s.chainStatus=1,e==1&&t.push(s)):e==2&&t.push(s)}return t.sort(this.sortOnExpTime),t}getListBySubType(e){let t=[];return this.m_dicSubTypeList.get(e)&&(t=this.m_dicSubTypeList.get(e).values.slice()),t.sort(this.sortOnQa),t}sortOnQa(e,t){let r=e.itemItem.sort,n=t.itemItem.sort;return r<n?-1:r>n?1:0}sortOnExpTime(e,t){let r=e.expTime,n=t.expTime;return r<n?1:r>n?-1:0}getItemCountById(e,t=!0){let r=this.getItemById(e);return r?r.m_iNum:0}};var pt=class pt{constructor(){}};pt.DEFAULT_HERO_ID=11000010003,pt.DEFAULT_HERO_COLOR=1,pt.TYPE_Professional=1,pt.TYPE_Training=2,pt.ANI_beiji="beiji",pt.ANI_daiji="daiji",pt.ANI_gongji="gongji",pt.ANI_ti="ti",pt.ANI_hua="hua",pt.ANI_dang="gedang",pt.ANI_dazhao="z_dazhao",pt.ANI_ruchang="ruchang",pt.ANI_siwang="siwang",pt.ANI_xingzou="xingzou",pt.ANI_chongzhuang="z_chongzhuang",pt.ANI_chongzhuang2="z_chongzhuang2",pt.ANI_daodi="z_daodi",pt.ANI_shanbi="z_shanbi",pt.ANIS=[pt.ANI_daiji,pt.ANI_xingzou,pt.ANI_gongji,pt.ANI_ti,pt.ANI_hua,pt.ANI_dang,pt.ANI_beiji,pt.ANI_siwang],pt.TYPE_GONGJI=1,pt.TYPE_TI=2,pt.TYPE_HUA=3,pt.TYPE_DANG=4,pt.TYPE_FEI=5,pt.TYPE_DAZHAO=6,pt.TYPE_HUOJIANDAN=7,pt.SPEED_NORMAL=10,pt.SPEED_QUICK=20;var fh=pt;var gh=class{constructor(){this.heroVoDic=new Ce}initData(e,t=!1){(!this.heroVoDic||t)&&(this.heroVoDic=new Ce);let r;for(let s=0;s<e.length;s++){r=new HeroVo;var n=e[s];HeroModel.instance.setHeroVoByHeroDto(r,n),this.pushItem(r)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}updateData(e){console.dir("更新英雄："+e),this.updataItemVoByArr(e)}herosDataRemoveHandler(e){console.dir("删除英雄："+e);for(let r=0;r<e.length;r++){var t=e[r];this.removeItemPk(t)}}pushItem(e){this.heroVoDic.set(e.pk,e)}removeItem(e){this.removeItemPk(e.pk)}removeItemPk(e){this.heroVoDic.remove(e+"")}updataItemVoByArr(e,t=!1){let r=[],n=!1,s;for(let o=0;o<e.length;o++){s=e[o];let l=this.heroVoDic.get(s.pk);l==null?(l=new HeroVo,HeroModel.instance.setHeroVoByHeroDto(l,s),l.m_bNew=!0,l.newAddCnt=1,l.newAddCnt>0&&this.pushItem(l)):l.newAddCnt=1,l.isLvUp=t,r.push(l.pk),l.m_iNum<=0&&this.removeItem(l),l.newAddCnt>0&&Dt.instance.needPop&&(Dt.instance.addHeroItem(l),n=!0)}n&&Dt.instance.needPop&&Dt.instance.autoPop&&kr.instance.startShow(),r.length>0&&A.intance.event(v.PACKAGE_UPDATE_ITEM,[r])}getItemById(e){return this.heroVoDic.get(e)}getCount(){return this.heroVoDic.values.length}getCanTransferHero(e){let t=this.heroVoDic.get(e+"");return t&&t.state==0&&t.pk!=B.instance.playerDto.fightHeroPk?t:null}getListByType(e){let t=[],r=e==fh.TYPE_Training?1:0;for(let n=0;n<this.heroVoDic.values.length;n++){let s=this.heroVoDic.values[n];s.newFightFlag==r&&t.push(s)}return t}};var bh=class{constructor(){this.m_redData={system:!1,friend:!1,announce:!1};this.m_dicItemList=new Ce,this.m_dicTypeList=new Ce}initData(e){this.m_dicItemList=new Ce,this.m_dicTypeList=new Ce,this.m_redData={system:!1,friend:!1,announce:!1};let t;for(let r=0;r<e.length;r++)switch(t=e[r],this.pushItem(t),t.type){case 1:t.state==0&&(this.m_redData.system=!0);break;case 2:t.state==0&&(this.m_redData.friend=!0);break;case 3:t.state==0&&(this.m_redData.announce=!0);break}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}parseItem(e){if(e.mailId>0){var t=j.intance.m_dicMail.get(e.mailId);e.title=L.instance.getLanguage(t.title),e.content=L.instance.getLanguageMulti(t.text,e.params)}}pushItem(e){this.parseItem(e),this.m_dicItemList.set(e.id,e),this.m_dicTypeList.get(e.type)==null&&this.m_dicTypeList.set(e.type,new Ce),this.m_dicTypeList.get(e.type).set(e.id,e)}removeItem(e){this.m_dicItemList.remove(e.id),this.m_dicTypeList.get(e.type).remove(e.id)}getItemById(e){return this.m_dicItemList.get(e)}getListByType(e){let t=[];return this.m_dicTypeList.get(e)&&(t=this.m_dicTypeList.get(e).values.slice()),t}getRedData(){return this.m_redData}};var B=class i{constructor(){this.timeZoneOff=0;this.hearIntervalSceond=10*60;this._timeStamp=0;this._m_strLanguage=1;this.isLanChanged=!1;this.pveOpen=2;this.lastTimestamp=0;this._m_serverTime=0;this.M_S_VersionServer="1.0.0";this.redDotData=[];this.friendNum=0;this.headId=10001;this.countryId=1010;this.colorId=1;this._guildIcon=2006;this.rechargeEnd=!1;this.isFirst=!0}async initData(){Ye.instance.sendCustumEvent(20),Ye.instance.sendCustumEvent(21)}get m_serverTime(){let e=Date.now();return this._m_serverTime+(e-this.lastTimestamp)}set m_serverTime(e){this._m_serverTime=e,this.lastTimestamp=Date.now()}get guildIcon(){return this._guildIcon}set guildIcon(e){console.log("guildIcon: "+e),this._guildIcon=e}get m_strLanguage(){return this._m_strLanguage}set m_strLanguage(e){this._m_strLanguage=e}static get instance(){return i._instance||(i._instance=new i),i._instance}init(){this.m_packageData=new hh,this.m_mailData=new bh,this.m_heroData=new gh,this.m_dicCustomerVo=new Ce,A.intance.on(v.ON_CONNECT_GAME_SERVER,this,this.onLogin),A.intance.on("msg_"+X.snake.socket.MessageType.MSG_USER_LOGIN,this,this.onUserLogin),Yn.instance.register(ft,()=>new ft,5,200)}onLanChange(e){let t=parseInt(e[0]),r=parseInt(e[1]);switch(t){case 1:r==1&&Ye.instance.reload();break;case 2:break}}get timeStamp(){return this._timeStamp+(Laya.Browser.now()-this.recordStampTime)/1e3}set timeStamp(e){this.recordStampTime=Laya.Browser.now(),this._timeStamp=e}itemsDataUpdataHandler(e,t,r){this.m_packageData.updateData(e,t,r),A.intance.event(v.EVENT_ITEM_UPDATE)}herosDataUpdataHandler(e){this.m_heroData.updateData(e)}onLogin(){var e=te.instance.walletAddress,t=X.snake.socket.MessageType.MSG_USER_LOGIN;let r=te.instance.getloginRequestInfo;var n=X.snake.socket.CS_USER_LOGIN.fromObject(r);console.log("登录请求信息",n.loginToken),si.send(t,n)}onUserLogin(e,t){if(t==X.snake.socket.MessageCode.USER_NOT_EXIST)console.log("have no regist"),Ye.instance.sendCustumEvent(23),ne.intance.openModule(y.CreateLoginView);else if(t==X.snake.socket.MessageCode.SYS_NORMAL){console.log("have regist");var r=e.roleInfo,n=new rn;n.pid=r.roleId,n.name=r.userName,n.icon=r.icon,n.exp=r.score,n.code=r.code,n.country=r.country,n.invite=r.invite,n.invNum=r.invNum,n.lv=r.lv,i.instance.playerDto=n,this.isFirst&&(A.intance.event(v.EVENT_ENTER_MAIN),this.isFirst=!1)}}getConsumeValue(e){e=parseInt(e.toString());var t=this.playerDto.coins[e];return t>0?t:0}hasEnoughMoney(e,t,r=!0){switch(e=parseInt(e.toString()),t=parseInt(t.toString()),e){default:return this.playerDto.coins[e]<t&&r&&A.intance.event("open_buy",4),this.playerDto.coins[e]>=t}}moneyInfoHander(e,t=!0,r=!0){let n=!1,s=!1,o=0;for(let l of e)s=!1,l[0]==Oe.TYPE_EXP?(o=parseInt(l[1]+"")-this.playerDto.exp,this.playerDto.exp=parseInt(l[1]+""),s=o>0):(o=parseFloat(l[1]+"")-this.playerDto.coins[l[0]],this.playerDto.coins[l[0]]=parseFloat(l[1]+""),s=o>0),s&&Dt.instance.needPop&&r&&(n=!0,Dt.instance.addConsumeByServer([l[0],o]));t&&A.intance.event(v.ROLE_INFO_CHANGE),n&&Dt.instance.autoPop&&kr.instance.startShow()}parseNumber(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r];n=this.dividedNumber(n),t.push(n.toString())}return t}dividedNumber(e){return e/1e4}getRedDotById(e){return!!(this.redDotData&&this.redDotData.indexOf(e)>-1)}};var kn=class{constructor(){}};kn.Lan_en=1,kn.Lan_zh=6,kn.Lan_tr=7;var L=class i{constructor(){this._lanTypesById=new Ce,this._lanTypesByType=new Ce,this._configData=new Ce,this._configData1=new Ce}static get instance(){return i._instance||(i._instance=new i),i._instance}initLanTypes(e){this._lanTypesById=new Ce,this._lanTypesByType=new Ce;for(let t in e){let r=new Bl;if(r.init(e[t]),parseInt(r.if_open)!=1)continue;let n=r.id,s=r.type;this._lanTypesById.set(n,r),s&&s!=""&&this._lanTypesByType.set(s,r)}}getLanTypes(){return this._lanTypesById}getLanIdByType(e){if(this._lanTypesByType){let t=this._lanTypesByType.get(e);if(t)return parseInt(t.id.toString())}return 1}getLanTypeById(e){if(this._lanTypesById){let t=this._lanTypesById.get(e);if(t)return t.type}return"en"}initConfigLan(e){this._configData=e}initConfigLan1(e){this._configData1=e}initUILan(e){Laya.Text.langPacks={};let t;for(t in e){let r=e[t].value;Laya.Text.langPacks[t]=r}}changeBrToN(e){let t=/<br>/g;for(;e.indexOf("<br>")!=-1;)e=e.replace(t,`
`);return e}replacePlaceholder(e,t){if(e=="")return"";let r=/{(\d+)}/g;return t.length>0&&(e=e.replace(r,function(){return t[arguments[1]]})),this.replaceLanByBR(e)}replaceLanByBR(e){return e+""}getEnglishLanguage(e,...t){return this.getEnglishLanguageReplace(e,t)}getEnglishLanguageReplace(e,t){if(this._configData1&&this._configData1[e]){let r=this._configData1[e].value;if(r&&r!="")return this.replacePlaceholder(r,t)}return this.replacePlaceholder(e+"",t)}getLanguage(e,...t){return this.getLanguageReplace(e,t)}getLanguageReplace(e,t){if(this._configData&&this._configData[e]){let r=this._configData[e].value;if(r&&r!="")return this.replacePlaceholder(r,t)}return this.replacePlaceholder(e+"",t)}getLanguageMulti(e,t){if(console.log("getLanguageMulti",t),this._configData&&this._configData[e]){let r=this._configData[e].value;if(r&&r!="")return this.replacePlaceholderMulti(r,t)}return this.replacePlaceholder(e+"",t)}replacePlaceholderMulti(e,t){if(e=="")return"";let r=/{(\d+)}/g;return t.length>0&&(e=e.replace(r,function(){var n=t[arguments[1]];if(typeof n=="object")n=JSON.parse(n),n=i.instance.parseObj(n);else if(typeof n=="string")try{n=JSON.parse(n),typeof n=="object"&&(n=i.instance.parseObj(n))}catch{}return n})),this.replaceLanByBR(e)}parseObj(e){if(e.hasOwnProperty("tableType")){if(e.tableType==1){var t=j.intance.m_dicItems.get(e.id);t&&(e=i.instance.getLanguage(t.name))}else if(e.tableType==2){var r=j.intance.m_dicArenaDic.get(e.id);r&&(e=i.instance.getLanguage(r.name))}}else e=i.instance.getMultiLan(e);return e}getUILang(e,t=null,r=null,n=null,s=null){if(e=Laya.Text.langPacks&&Laya.Text.langPacks[e]?Laya.Text.langPacks[e]:e,arguments.length>1)for(let o=0,l=arguments.length;o<l;o++)e=e.replace("{"+o+"}",arguments[o+1]);return e}getMultiLan(e){var t=parseInt(B.instance.m_strLanguage.toString()),r;return e&&(r=e[t],r||(r=e[kn.Lan_en])),r}FGM_GetLanguage(){let e=function(r){console.log("initGame->-----------------------------FGM_GetLanguage:=="+r),r&&(r=r.substring(0,2),$.User_Lan=r)},t=Laya.LocalStorage.getItem($.COOKIE_CF_LAN);!t||t==""?e(this.language):e(t)}get language(){return"en"}FGM_SetLanguage(e){e&&e!=""&&Laya.LocalStorage.setItem($.COOKIE_CF_LAN,e)}dispose(){}};var yh=class i{constructor(){if(i._instance)throw new Error("LayerManager是单例,不可new.");i._instance=this}static get intance(){return i._instance||(i._instance=new i),i._instance}init(){for(let e in X.snake.socket.MessageType)if(isNaN(Number(e))){let t=X.snake.socket.MessageType[e],r=t===106?"CS_":t===110?"SS_":"SC_",n=e.substring(4),s=r+n,o=X.snake.socket[s];o?Laya.ClassUtils.regClass(t+"",o):console.warn(`未找到 ${s} 对应的处理类，消息码：${t}`)}}};var _h=class i{constructor(){this.m_sprMap=new Laya.Sprite;this.m_Image=new Laya.Image}static get instance(){return i._instance||(i._instance=new i),i._instance}init(){}showLoading(e=!1){if(this.loadingMc)this.m_sprMap.size(Laya.stage.width,Laya.stage.height),$.m_bIsIphoneX&&(this.m_Image.scaleX=$.IPHONEX_SCARE,this.m_Image.scaleY=$.IPHONEX_SCARE),this.m_Image.x=(this.m_sprMap.width-this.m_Image.width*this.m_Image.scaleX)/2,this.m_Image.y=(this.m_sprMap.height-this.m_Image.height*this.m_Image.scaleY)/2,this.m_sprMap.x=(pe.instence.m_iStageWidth-this.m_sprMap.width*this.m_sprMap.scaleX)/2,this.m_sprMap.y=(pe.instence.m_iStageHeight-this.m_sprMap.height*this.m_sprMap.scaleY)/2,this.m_sprMap.visible=!0,Laya.timer.clear(this,this.showLazyBg),e?(this.m_Image.alpha=1,this.showLazyBg()):(this.m_Image.alpha=0,this.m_sprMap&&(this.m_sprMap.graphics.clear(),this.m_sprMap.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000")),Laya.timer.once(300,this,this.showLazyBg));else return}showLazyBg(){this.m_sprMap&&(this.m_sprMap.graphics.clear(),this.m_Image.alpha=1),this.loadingMc&&(this.loadingMc.x=Laya.stage.width/2,this.loadingMc.y=Laya.stage.height/2,this.loadingMc.play(),this.loadingMc.visible=!0)}hideLoading(){if(this.loadingMc)this.hideLoadingSHow();else return}hideLoadingSHow(){Laya.timer.clear(this,this.showLazyBg),this.loadingMc.stop(),this.loadingMc.visible=!1,this.m_sprMap.visible=!1}get isShow(){return this.loadingMc&&this.loadingMc.visible}dispose(){this.m_sprMap&&this.m_sprMap.graphics.clear(),Laya.timer.clear(this,this.showLazyBg),this.loadingMc&&(this.loadingMc.destroy(),this.loadingMc.removeSelf(),this.loadingMc=null)}};var Fs=class{static startCircleAnimation(e,t=Laya.stage.width/2,r=Laya.stage.height/2,n=200,s=5e3,o=!0,l=0,c){Laya.Tween.clearTween(e);let p=e.x,d=e.y,h=0,f=o?1:-1,g=0,E=.5,I=2e3,_=0,S=()=>{_+=16;let M=1+Math.sin(_*Math.PI*2/I)*E;h+=360/s*16*M*f;let R=h*Math.PI/180;e.x=t+Math.cos(R)*n,e.y=r+Math.sin(R)*n,Math.abs(h)>=360&&(h=h%360,g++,l>0&&g>=l&&(Laya.timer.clear(e,S),e.x=p,e.y=d,c&&c.run()))};Laya.timer.frameLoop(1,e,S)}static stopCircleAnimation(e){Laya.timer.clearAll(e),Laya.Tween.clearTween(e)}static startCircleAnimationWithSpeedControl(e,t=Laya.stage.width/2,r=Laya.stage.height/2,n=200,s=5e3,o=!0,l=0,c=.5,p=2e3,d){Laya.Tween.clearTween(e);let h=e.x,f=e.y,g=0,E=o?1:-1,I=0,_=0,S=()=>{_+=16;let M=1+Math.sin(_*Math.PI*2/p)*c;g+=360/s*16*M*E;let R=g*Math.PI/180;e.x=t+Math.cos(R)*n,e.y=r+Math.sin(R)*n,Math.abs(g)>=360&&(g=g%360,I++,l>0&&I>=l&&(Laya.timer.clear(e,S),e.x=h,e.y=f,d&&d.run()))};Laya.timer.frameLoop(1,e,S)}static startRotationAnimation(e,t=2e3,r=!0){this.stopRotationAnimation(e);let n="rotation_"+Date.now().toString(),s=r?1:-1,o=360/t*16*s,l=()=>{e.rotation=(e.rotation+o)%360},c="updateRotation_"+n;return e[c]=l,e.rotationAnimationId=n,Laya.timer.frameLoop(1,e,l),n}static stopRotationAnimation(e){if(e.rotationAnimationId){let t="updateRotation_"+e.rotationAnimationId,r=e[t];r?Laya.timer.clear(e,r):Laya.timer.clearAll(e),delete e.rotationAnimationId,r&&delete e[t]}}};var{regClass:FS}=Laya,al=class extends xu{constructor(){super(...arguments);this.isLogout=!1;this.dotNum=0;this.m_nProgress=0;this.rotateSpeed=500;this.speedRate=1;this.speed=6;this.time=0;this.dir=ft.create(0,0);this.aimDir=ft.create(0,0);this.bones=[ft.create(0,0)]}onAwake(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),Laya.loader.load(["res/common/comm_bg/img_loading1_bg.jpg","res/loading/progress_load1.png","res/loading/progress_load1$bar.png"]).then(()=>{this.createUI(),this.initBasic()})}onError(t){console.log("加载失败: "+t)}createUI(){this.m_nSendTime=Laya.timer.currTimer,Ke.instance.init(),Ke.instance.playMusicByName(Ke.soundName_bg,".mp3"),A.intance.on(v.EVENT_BACK_TO_LOGIN,this,this.backToLogin),A.intance.on(v.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),A.intance.on(v.EVENT_ENTER_MAIN,this,this.loginCallBack),this.initLoad(),L.instance.FGM_GetLanguage();let t=$.User_Lan;var r=getGameVersion();this.txtLoad.text=r,console.log("VERSION: "+r);let n=new Mn;n.ID=1,n.Event="加载版本信息 "+r,Ye.instance.sendCustumEvent(1,null,n),Sn.Initialize(Laya.stage,!0)}initBasic(){yh.intance.init(),pe.instence.init(),this.initLoad()}initLoad(){this.onAssetLoaded()}onAssetLoaded(){this.loadingProcess=.05,this.m_nProgress=.05,Fs.startRotationAnimation(this.img_circle,2e3,!0),Laya.timer.once(500,this,()=>{this.loadFirstBatch()});let t=Laya.timer.loop(1e3,this,this.onLoading,[this.m_nProgress])}loadFirstBatch(){ze.intance.init(),this.m_nProgress=.15,this.loadingProcess=.15,Laya.timer.once(800,this,()=>{this.loadSecondBatch()})}loadSecondBatch(){_h.instance.init(),ne.intance.init(),this.m_nProgress=.3,this.loadingProcess=.3,Laya.timer.once(1e3,this,()=>{this.loadThirdBatch()})}loadThirdBatch(){B.instance.init(),J.instance.init(),this.m_nProgress=.5,this.loadingProcess=.5,Laya.timer.once(1e3,this,()=>{this.loadFinalBatch()})}loadFinalBatch(){qe.initParms();let t=new Mn;t.ID=3,t.Event="加载资源信息",Ye.instance.sendCustumEvent(3,null,t),this.m_nProgress=.8,this.loadingProcess=.8}set loadingProcess(t){if(!(this.mcProcess&&t<this.mcProcess.value)){t>1&&(t=1),t<.05&&(t=.05),this.mcProcess.value=t,this.txtProcess.text=Math.floor(t*100)+"%";var r=t*this.mcProcess.width-70;r<0&&(r=0),this.img_guang.x=r}}backToLogin(){Laya.timer.clear(this,this.onLoading),this.m_nProgress=0,Laya.loader.load(J.instance.m_arrInitResource,Laya.Handler.create(this,this.getLoginData),Laya.Handler.create(this,this.onLoading2,null,!1))}getLoginData(){Ye.instance.sendCustumEvent(7),this.readyInitGame()}readyInitGame(){if(this.isLogout){A.intance.event(v.EVENT_LOADING_SUC);return}this.mcProcess&&(this.loadingProcess=.9,Laya.timer.once(500,this,()=>{this.loadingProcess=1,Laya.timer.once(300,this,()=>{j.intance.init(),$.isWhite?this.loginGame():this.onGetNotice()})}))}async onGetNotice(){Laya.loader.maxLoader=50;var t=!1;t?se.requestPost("wxgame/sys/notice",{type:1},!1,!1).then(r=>{var n=r;if(n.list&&n.list.length>0){ne.intance.openModule(y.NoticeDialog,[1,n]);return}this.loginGame()}).catch(r=>{ne.intance.openModule(y.NoServerView)}):this.loginGame()}async loginGame(){A.intance.event(v.EVENT_LOADED_COMPLETE),await te.instance.init(),await te.instance.dappLogin()}async loginGameEnd(t){Pe.instance.showLoading(!0),Ye.instance.sendCustumEvent(8),console.log("PreLoadingView.joinGame()");let r=Laya.timer.currTimer-this.m_nSendTime;if(Ye.instance.sendCustumEvent(22),!t){ne.intance.openModule(y.NoServerView);return}t.loginState==1?(console.log("have no regist"),Ye.instance.sendCustumEvent(23),ne.intance.openModule(y.CreateLoginView)):(Ye.instance.sendCustumEvent(30),t.playerDto?(Ye.instance.sendCustumEvent(31),console.log("registed "+t.playerDto.name),B.instance.playerDto=t.playerDto,this.loginCallBack()):(Ye.instance.sendCustumEvent(32),console.log("getRegisted error"),ee.instance.notice(L.instance.getLanguage(135))))}async loginCallBack(){console.log("loginCallBack++++++++++++++++++++++++++++++++"),$.vType==2&&$.Debug==0&&(Laya.Browser.window.console.log=function(){}),B.instance.initData(),Pe.instance.hideLoading();var t=B.instance.playerDto;if(t.roomId>0){let r=await se.requestPost("wxgame/room/info",{roomId:t.roomId});Le.instance.roomDto=r.roomDto,r.roomDto?t.roomState==10?kt.instance.initSocket():ne.intance.openModule(y.EnterRoomView):ee.instance.notice(L.instance.getLanguage(135))}else re.logs("进入主界面",5),Ye.instance.sendCustumEvent(33),Fs.stopCircleAnimation(this.img_circle),ze.intance.setCurrentScene(oe.M_SCENE_MAIN)}onLoading(t){let r=this.mcProcess?this.mcProcess.value:0,n=.01;this.m_nProgress<.15?n=.02:this.m_nProgress<.3?n=.015:this.m_nProgress<.5?n=.01:this.m_nProgress<.8?n=.005:n=.001,this.m_nProgress+=n,this.m_nProgress<r&&(this.m_nProgress=r),this.m_nProgress>.8&&(this.m_nProgress=.8),this.mcProcess&&t>this.mcProcess.value&&(this.loadingProcess=this.m_nProgress)}onLoading2(t){this.mcProcess&&(this.loadingProcess=0+t*1.1)}removeEvent(){A.intance.off(v.EVENT_BACK_TO_LOGIN,this,this.backToLogin),A.intance.off(v.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),A.intance.off(v.EVENT_ENTER_MAIN,this,this.loginCallBack)}initMove(){var t=726,r=973;console.log("TEST==== 蛇头坐标：",t,r),this.speedRate=1,console.log("TEST==== 加速倍数 speedRate：",this.speedRate),console.log("TEST==== 速度参数 speed：",this.speed,"rotateSpeed：",this.rotateSpeed,"defaultMoveInterval：",ye.snack.defaultMoveInterval),this.bones=[ft.create(t,r)];var n=17;this.dir=Qe.getAngleToVec(n),this.dir.normalize(),console.log("TEST==== 当前方向：",n,"向量：",this.dir.x,this.dir.y),this.toAimDir(17),this.toAimDir(230)}toAimDir(t){this.time=0,this.aimDir=Qe.getAngleToVec(t),this.aimDir.normalize(),console.log("TEST==== 目标方向：",t,"向量：",this.aimDir.x,this.aimDir.y);for(var r=0;r<110;r++)this.move(null)}move(t){this.time++;for(let r=0;r<this.speedRate;r++){if(this.dir.equal(this.aimDir)||Math.abs(Math.acos(this.dir.dot(this.aimDir))*180/Math.PI)<this.rotateSpeed*ye.snack.defaultMoveInterval)this.dir=this.aimDir,console.log("move:============  当前直接设目标方向");else{let n=this.dir.getRotation(),o=(this.aimDir.getRotation()-n+360)%360;o>180&&(o-=360);let l=this.rotateSpeed*ye.snack.defaultMoveInterval,c=Math.abs(o)<l?o:l*(o>0?1:-1);this.dir.rotate(c),console.log("第"+this.time+"次"," ============  rotateAngle："+c)}this.bones[0].assign(this.bones[0].add(this.dir.mul(this.speed))),console.log("TEST==== 移动蛇头坐标：","第"+this.time+"次",this.bones[0].x,this.bones[0].y)}}};al.m_iState=1,al=N([FS("xmaaYG8AQ1yC07pr_JvyPA")],al);var ol=class ol extends Laya.ColorFilter{constructor(e=null){super(e)}static addClickFilter(e){let t=e.filters||[];t.push(ol.clickFilter),e.filters=t}static clearClickFilter(e){let t=e.filters;if(t!=null&&t.length>0){for(let r=t.length-1;r>-1;r--)t[r]instanceof ol&&t.splice(r,1);e.filters=t}}};ol.clickFilter=new ol([1,0,0,0,-34,0,1,0,0,-34,0,0,1,0,-34,0,0,0,1,0]);var Rr=ol;var{regClass:HS,property:US}=Laya,ll=class extends Laya.Script{constructor(){super();this.noSound=!1}onEnable(){let t=this.owner.scaleX;this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onUp)}onDown(){this.noSound||Ke.instance.playSoundByName(Ke.soundName_hit),Rr.addClickFilter(this.owner)}onUp(){Rr.clearClickFilter(this.owner)}onDisable(){Rr.clearClickFilter(this.owner),this.owner.off(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onUp)}};N([US({type:"boolean"})],ll.prototype,"noSound",2),ll=N([HS("cL1AmqOiTHmtQWKayPNcTA")],ll);var{regClass:VS,property:Xw}=Laya,Sa=class extends Laya.Script{onEnable(){B.instance.m_strLanguage==kn.Lan_zh?this.chSkin&&(this.owner.skin=this.chSkin.url):B.instance.m_strLanguage==kn.Lan_tr&&this.trSkin&&(this.owner.skin=this.trSkin.url)}};N([Xw({type:Laya.Texture})],Sa.prototype,"chSkin",2),N([Xw({type:Laya.Texture})],Sa.prototype,"trSkin",2),Sa=N([VS("SPRGcvdcQR2PHb7I7j7sXg")],Sa);var xh=class extends Laya.Dialog{};var{regClass:zS}=Laya,vh=class extends xh{constructor(){super()}onEnable(){this.list_airdrop.visible=!1,this.tf_consume.text=L.instance.getUILang("Consume items"),this.tf_value.text=L.instance.getUILang("value/U"),this.setOpenData()}async setOpenData(){var e=await se.requestPost("wxgame/money/drawTokenPayOutRecord",{});e&&(e.records.push(void 0),this.list_airdrop.array=e.records,this.list_airdrop.visible=!0,!e.records||e.records.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}onDisable(){}};vh=N([zS("u4LW1QxJTQOj64w92cnRVg")],vh);var ct=class i{static toFixed(e,t){if(e.toString().indexOf(".")==-1)return e;{let r=e.toFixed(t);return parseFloat(r)}}static toFixedWithPercent(e,t,r="+"){let n;return e.toString().indexOf(".")==-1?n=r+e*100+"%":(t=t-2,t<0&&(t=0),n=r+(e*100).toFixed(t)+"%"),n}static getGoldStr(e){let t;return e>999999?t=parseInt(String(e/1e5))+"m":t=e,t}static numStringFormat(e){let t=e;return B.instance.m_strLanguage==2?e.length>4&&(t=String(e).replace(/(\d)(?=(\d{3})+$)/g,"$1 ")):t=String(e).replace(/(\d)(?=(\d{3})+$)/g,"$1,"),t}static numSimple(e){let t=e,r=parseInt(parseInt(t)/1e3+"");return r>0?r+"k":i.numStringFormat(t)}static numStringFormat2(e){let t;if(e>999999)t=i.getNumStr(e,1e6,"M");else if(e>999)t=i.getNumStr(e,1e3,"K");else return e+"";return t}static getNumStr(e,t,r){return parseInt(Math.floor(e/t)+"")+r}static getTimeStr(e){let t;return e<3600?t=L.instance.getLanguage(9024,Math.ceil(e/60)):e<3600*24?t=L.instance.getLanguage(9025,Math.ceil(e/3600)):t=L.instance.getLanguage(9025,Math.ceil(e/(3600*24))),t}static BigInt(e){return 0}static isInteger(e){return e%1===0}static isNumber(e){return typeof e=="number"}static formatNumber(e,t=8){return Number.isInteger(e)?e:parseFloat(e.toFixed(t))}static formatNumberStr(e,t=2){return Number.isInteger(e)?e:parseFloat(e.toFixed(t)).toString()}static filterNumFormat(e,t=2,r=!1,n=!1){if(!e)return e;if(e<1e3&&e>0)if(n){var s=Math.floor(Number(parseFloat(e*10**t+"").toPrecision(16)))/10**t;return parseFloat(s.toFixed(t)).toString()}else return parseFloat(e.toFixed(t)).toString();if(e==="0.00")return e;var o=[{value:1,symbol:""},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}];r&&(o=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}]);var l=/\.0+$|(\.[0-9]*[1-9])0+$/,c;for(c=o.length-1;c>0&&!(e>=o[c].value);c--);let p=(e/o[c].value).toString();return p.indexOf(".")>-1&&(t>0?p=p.substr(0,p.indexOf(".")+t+1):p=p.substr(0,p.indexOf(".")+t)),p.replace(l,"$1")+o[c].symbol}static fromWei(e,t,r=0){if(!e)return 0;let n=e.length-t+r;if(n<=0)return 0;let s=e.toString().slice(0,n);if(r){let o=s.length-r;if(o<=0){let l="0.";for(let c=0;c<Math.abs(o);c++)l+="0";s=l+s}else s=s.slice(0,s.length-r)+"."+s.slice(s.length-r)}return s}static getNumberSuffix(e){let t=parseInt(e,10);return isNaN(t)?e:(t%1e9).toString()}};var wh=class extends Laya.Box{};var{regClass:GS}=Laya,Lh=class extends wh{constructor(){super()}addEvent(){}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.setData(e),this.addEvent()}setData(e){let t=j.intance.getPuzzleExchangeByName("WBNB").value,r=Mt.formatDayAndTime(e.time);this.tf_day.text=r.date,this.tf_consume.text=`${e.count}`,this.tf_value.text=`${e.count*t}`,e.puzzleId==1?this.tf_limit.text=`${ct.filterNumFormat(e.coinValue,2)}`:this.tf_limit.text=`${ct.filterNumFormat(e.coinValue,6)}`;let n=j.intance.getPuzzleExchange(e.puzzleId).name;this.tf_type.text=`${n}`}};Lh=N([GS("gHc-YmsARYaK65kwDLBAAw")],Lh);var Ih=class extends Laya.Box{};var{regClass:jS}=Laya,Eh=class extends Ih{constructor(){super()}set dataSource(t){super.dataSource=t,this.setData(t),this.addEvent()}addEvent(){this.btn_deposit.on(Laya.Event.CLICK,this,this.onDeposit),this.btn_withdraw.on(Laya.Event.CLICK,this,this.onWithdraw)}setData(t){t?(this.data=t,this.tf_coinNum.text=`${t.balance}`,this.tf_freeze.text=`${t.frozen}`,this.tf_prize.text=`${t.price}`,this.tf_valu.text=`${t.valuation}`,this.tf_coin.text=t.symbol):this.visible=!1}onDeposit(){ne.intance.openModule(y.DepositDialog,this.data)}onWithdraw(){ne.intance.openModule(y.WithdrawDialog,this.data)}};Eh=N([jS("oDHEPtPLT9SboHGJIeNVbA")],Eh);var Sh=class extends Laya.Scene{};var{regClass:WS}=Laya,Th=class extends Sh{onAwake(){this.m_iLayerType=pe.M_POP,this.m_iPositionType=pe.UP}onEnable(){this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_back_Record.on(Laya.Event.CLICK,this,this.openRecord,[!1]),this.btn_detail.on(Laya.Event.CLICK,this,this.openRecord,[!0]),this.list_asset.visible=!1,A.intance.on("msg_"+X.snake.socket.MessageType.MSG_QUERY_TOKEN,this,this.onRequestInfo),this.requestCoinInfo()}requestCoinInfo(t=1){let r=X.snake.socket.MessageType.MSG_QUERY_TOKEN;si.send(r)}onRequestInfo(t,r){if(r==X.snake.socket.MessageCode.SYS_NORMAL){console.log(t);let n=qe.parseTokenData(t.token);console.log("解析后的数据:",n),this.showAssetData(n)}}parseTokenData(t){try{return t.map(r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(n){return console.error("解析token字符串失败:",n),r}return r})}catch(r){return console.error("解析token数据时发生错误:",r),[]}}showAssetData(t){this.list_asset.array=t,this.list_asset.visible=!0;let r=this.calculateTotalValue(t);this.tf_total.text=`${r} USDT`}calculateTotalValue(t){try{return t.reduce((r,n)=>{let s=n.balance,o=n.price;return isNaN(s)||isNaN(o)?r:r+s*o},0)}catch(r){return console.error("计算资产总额时发生错误:",r),0}}calculateStrictTotal(t){try{return t.reduce((r,n)=>{let s=n.split(",");if(s.length<4)return r;let o=Number(s[1]),l=Number(s[3]);return isNaN(o)||isNaN(l)?r:r+o*l},0)}catch(r){return console.error("计算资产总额时发生错误:",r),0}}setToMainScene(){ze.intance.setCurrentScene(oe.M_SCENE_MAIN)}openRecord(t){this.box_record.visible=t,this.box_all.visible=!t;let r=[{time:174402326e4,operation:1,token:3006,amount:200}];this.list_Record.array=r}};Th=N([WS("vDn8r-QeS5KzEmJcMsoY8w")],Th);var kh=class extends Laya.Scene{};var Qw=(W=>(W[W.MAINNET=1]="MAINNET",W[W.TESTNET_RINKEBY=4]="TESTNET_RINKEBY",W[W.ARBITRUM=42161]="ARBITRUM",W[W.ARBITRUM_TESTNET=421611]="ARBITRUM_TESTNET",W[W.AVALANCHE=43114]="AVALANCHE",W[W.AVALANCHE_TESTNET=43113]="AVALANCHE_TESTNET",W[W.POLYGON=137]="POLYGON",W[W.POLYGON_TESTNET=80001]="POLYGON_TESTNET",W[W.FANTOM=250]="FANTOM",W[W.FANTOM_TESTNET=4002]="FANTOM_TESTNET",W[W.OPTIMISM=10]="OPTIMISM",W[W.OPTIMISM_TESTNET=69]="OPTIMISM_TESTNET",W[W.BOBA=288]="BOBA",W[W.BOBA_TESTNET=28]="BOBA_TESTNET",W[W.ESC=20]="ESC",W[W.HECO=128]="HECO",W[W.BSC=56]="BSC",W[W.BSC_TESTNET=97]="BSC_TESTNET",W[W.MATCH=1139]="MATCH",W[W.MATCH_TESTNET=9e3]="MATCH_TESTNET",W[W.CC=1331]="CC",W[W.SEPOLIA=11155111]="SEPOLIA",W[W.Klaytn=8217]="Klaytn",W[W.Lightlink=1890]="Lightlink",W[W.OpBNB=nl.id]="OpBNB",W[W.opBNBTestnet=5611]="opBNBTestnet",W[W.Mantle=il.id]="Mantle",W[W.MantleSepoliaTestnet=rl.id]="MantleSepoliaTestnet",W))(Qw||{}),Ta={id:1139,name:"MathChain",network:"MathChain",iconUrl:"",iconBackground:"#fff",nativeCurrency:{decimals:18,name:"MATCH",symbol:"MATCH"},rpcUrls:{default:{http:["https://1139.rpc.thirdweb.com"]},public:{http:["https://1139.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"matchscan",url:"https://lisbon.matchscan.io"},etherscan:{name:"matchscan",url:"https://lisbon.matchscan.io"}},testnet:!1};var Bt=class{constructor(){}};Bt.TYPE_Consumption=1,Bt.TYPE_Equipment=2,Bt.TYPE_Currency=3,Bt.TYPE_Hero=4,Bt.TYPE_Fragment=5,Bt.TYPE_CARD=6,Bt.CHOOSE_Wallet=1,Bt.CHOOSE_PutOn=2,Bt.ITEM_PT=1086,Bt.ITEM_PT_EXP=1091,Bt.ITEM_SNAKE=3026;function Ah(i,e){var t;e===void 0&&(e="0");var r=0,n=-1;i[0]=="-"&&(i=i.substring(1),T0(i)||(r++,n=1,i.length)),e[0]=="-"&&(e=e.substring(1),T0(e)||(r++,n=2,e.length)),i=Gi(i),e=Gi(e),t=M0(Gi(i),Gi(e)),i=t[0],e=t[1],r==1&&(n===1?i=E0(i):n===2&&(e=E0(e)));var s=rL(i,e);return r?r==2?"-"+Gi(s):i.length<s.length?Gi(s.substring(1)):"-"+Gi(E0(s)):Gi(s)}function E0(i){if(T0(i))return i;for(var e="",t=i.length,r=i.split(".")[1],n=r?r.length:0,s=0;s<t;s++)i[s]>="0"&&i[s]<="9"?e+=9-parseInt(i[s]):e+=i[s];var o=n>0?"0."+new Array(n).join("0")+"1":"1";return rL(e,o)}function Gi(i){var e=i.split(".");for(e[0]||(e[0]="0");e[0][0]=="0"&&e[0].length>1;)e[0]=e[0].substring(1);return e[0]+(e[1]?"."+e[1]:"")}function M0(i,e){var t=i.split("."),r=e.split("."),n=t[0].length,s=r[0].length;return n>s?r[0]=new Array(Math.abs(n-s)+1).join("0")+(r[0]?r[0]:""):t[0]=new Array(Math.abs(n-s)+1).join("0")+(t[0]?t[0]:""),n=t[1]?t[1].length:0,s=r[1]?r[1].length:0,(n||s)&&(n>s?r[1]=(r[1]?r[1]:"")+new Array(Math.abs(n-s)+1).join("0"):t[1]=(t[1]?t[1]:"")+new Array(Math.abs(n-s)+1).join("0")),i=t[0]+(t[1]?"."+t[1]:""),e=r[0]+(r[1]?"."+r[1]:""),[i,e]}function rL(i,e){var t;t=M0(i,e),i=t[0],e=t[1];for(var r="",n=0,s=i.length-1;s>=0;s--){if(i[s]==="."){r="."+r;continue}var o=parseInt(i[s])+parseInt(e[s])+n;r=o%10+r,n=Math.floor(o/10)}return n?n.toString()+r:r}function T0(i){return/^0[0]*[.]{0,1}[0]*$/.test(i)}function Zw(i){return(typeof i=="number"||typeof i=="bigint")&&(i=i.toString()),i[0]=="-"?i.substring(1):i}var ti;(function(i){i[i.CEILING=0]="CEILING",i[i.DOWN=1]="DOWN",i[i.FLOOR=2]="FLOOR",i[i.HALF_DOWN=3]="HALF_DOWN",i[i.HALF_EVEN=4]="HALF_EVEN",i[i.HALF_UP=5]="HALF_UP",i[i.UNNECESSARY=6]="UNNECESSARY",i[i.UP=7]="UP"})(ti||(ti={}));function $c(i,e,t){if(e===void 0&&(e=0),t===void 0&&(t=ti.HALF_EVEN),t===ti.UNNECESSARY)throw new Error("UNNECESSARY Rounding Mode has not yet been implemented");(typeof i=="number"||typeof i=="bigint")&&(i=i.toString());var r=!1;i[0]==="-"&&(r=!0,i=i.substring(1));var n=i.split("."),s=n[0],o=n[1];if(e<0){if(e=-e,s.length<=e)return"0";var l=s.substr(0,s.length-e);return i=l+"."+s.substr(s.length-e)+o,l=$c(i,0,t),(r?"-":"")+l+new Array(e+1).join("0")}if(e==0)return s.length,Jw(n[1],s,r,t)&&(s=S0(s)),(r&&parseInt(s)?"-":"")+s;if(n[1]){if(n[1].length<e)return(r?"-":"")+s+"."+n[1]+new Array(e-n[1].length+1).join("0")}else return(r?"-":"")+s+"."+new Array(e+1).join("0");o=n[1].substring(0,e);var c=n[1].substring(e);return c&&Jw(c,o,r,t)&&(o=S0(o),o.length>e)?(r?"-":"")+S0(s,parseInt(o[0]))+"."+o.substring(1):(r&&(parseInt(s)||parseInt(o))?"-":"")+s+"."+o}function Jw(i,e,t,r){if(!i||i===new Array(i.length+1).join("0")||r===ti.DOWN||!t&&r===ti.FLOOR||t&&r===ti.CEILING)return!1;if(r===ti.UP||t&&r===ti.FLOOR||!t&&r===ti.CEILING)return!0;var n="5"+new Array(i.length).join("0");if(i>n)return!0;if(i<n)return!1;switch(r){case ti.HALF_DOWN:return!1;case ti.HALF_UP:return!0;case ti.HALF_EVEN:default:return parseInt(e[e.length-1])%2==1}}function S0(i,e){e===void 0&&(e=0),e||(e=1),typeof i=="number"&&i.toString();for(var t=i.length-1,r="",n=t;n>=0;n--){var s=parseInt(i[n])+e;s==10?(e=1,s=0):e=0,r+=s}return e&&(r+=e),r.split("").reverse().join("")}function Hs(i){var e=i[0]==="-";for(e&&(i=i.substr(1));i[0]=="0";)i=i.substr(1);if(i.indexOf(".")!=-1)for(;i[i.length-1]=="0";)i=i.substr(0,i.length-1);return i==""||i=="."?i="0":i[i.length-1]=="."&&(i=i.substr(0,i.length-1)),i[0]=="."&&(i="0"+i),e&&i!="0"&&(i="-"+i),i}function k0(i,e){i=i.toString(),e=e.toString();var t=0;i[0]=="-"&&(t++,i=i.substr(1)),e[0]=="-"&&(t++,e=e.substr(1)),i=Hs(i),e=Hs(e);var r=0,n=0;i.indexOf(".")!=-1&&(r=i.length-i.indexOf(".")-1),e.indexOf(".")!=-1&&(n=e.length-e.indexOf(".")-1);var s=r+n;if(i=Hs(i.replace(".","")),e=Hs(e.replace(".","")),i.length<e.length){var o=i;i=e,e=o}if(e=="0")return"0";for(var l=e.length,c=0,p=[],d=l-1,h="",f=0;f<l;f++)p[f]=i.length-1;for(var f=0;f<2*i.length;f++){for(var g=0,E=e.length-1;E>=d&&E>=0;E--)p[E]>-1&&p[E]<i.length&&(g+=parseInt(i[p[E]--])*parseInt(e[E]));g+=c,c=Math.floor(g/10),h=g%10+h,d--}return h=Hs(KS(h,s)),t==1&&(h="-"+h),h}function KS(i,e){return e==0?i:(i=e>=i.length?new Array(e-i.length+1).join("0")+i:i,i.substr(0,i.length-e)+"."+i.substr(i.length-e,e))}function A0(i,e,t,r){if(t===void 0&&(t=8),r===void 0&&(r=ti.HALF_EVEN),e==0)throw new Error("Cannot divide by 0");if(i=i.toString(),e=e.toString(),i=i.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),e=e.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),i==0)return"0";var n=0;e[0]=="-"&&(e=e.substring(1),n++),i[0]=="-"&&(i=i.substring(1),n++);var s=e.indexOf(".")>0?e.length-e.indexOf(".")-1:-1;if(e=Gi(e.replace(".","")),s>=0){var o=i.indexOf(".")>0?i.length-i.indexOf(".")-1:-1;if(o==-1)i=Gi(i+new Array(s+1).join("0"));else if(s>o)i=i.replace(".",""),i=Gi(i+new Array(s-o+1).join("0"));else if(s<o){i=i.replace(".","");var l=i.length-o+s;i=Gi(i.substring(0,l)+"."+i.substring(l))}else s==o&&(i=Gi(i.replace(".","")))}var c=0,p=e.length,d="",h=i.indexOf(".")>-1&&i.indexOf(".")<p?i.substring(0,p+1):i.substring(0,p);if(i=i.indexOf(".")>-1&&i.indexOf(".")<p?i.substring(p+1):i.substring(p),h.indexOf(".")>-1){var f=h.length-h.indexOf(".")-1;h=h.replace(".",""),p>h.length&&(f+=p-h.length,h=h+new Array(p-h.length+1).join("0")),c=f,d="0."+new Array(f).join("0")}for(t=t+2;c<=t;){for(var g=0;parseInt(h)>=parseInt(e);)h=Ah(h,"-"+e),g++;d+=g,i?(i[0]=="."&&(d+=".",c++,i=i.substring(1)),h=h+i.substring(0,1),i=i.substring(1)):(c||(d+="."),c++,h=h+"0")}return(n==1?"-":"")+Gi($c(d,t-2,r))}function C0(i,e){return i=i.toString(),e=e.toString(),e=R0(e),Ah(i,e)}function R0(i){return i[0]=="-"?i=i.substr(1):i="-"+i,i}function eL(i,e){if(e==0)throw new Error("Cannot divide by 0");i=i.toString(),e=e.toString(),tL(i),tL(e);var t="";i[0]=="-"&&(t="-",i=i.substr(1)),e[0]=="-"&&(e=e.substr(1));var r=C0(i,k0(e,$c(A0(i,e),0,ti.FLOOR)));return t+r}function tL(i){if(i.indexOf(".")!=-1)throw new Error("Modulus of non-integers not supported")}function iL(i,e){var t,r,n=!1;if(t=[i,e].map(function(o){return Hs(o)}),i=t[0],e=t[1],i[0]=="-"&&e[0]!="-")return-1;if(i[0]!="-"&&e[0]=="-")return 1;if(i[0]=="-"&&e[0]=="-"&&(i=i.substr(1),e=e.substr(1),n=!0),r=M0(i,e),i=r[0],e=r[1],i.localeCompare(e)==0)return 0;for(var s=0;s<i.length;s++)if(i[s]!=e[s])return i[s]>e[s]?n?-1:1:n?1:-1;return 0}var Gt=function(){function i(e){e===void 0&&(e="0"),this.value=i.validate(e)}return i.validate=function(e){if(e){if(e=e.toString(),isNaN(e))throw Error("Parameter is not a number: "+e);e[0]=="+"&&(e=e.substring(1))}else e="0";if(e.startsWith(".")?e="0"+e:e.startsWith("-.")&&(e="-0"+e.substr(1)),/e/i.test(e)){var t=e.split(/[eE]/),r=t[0],n=t[1];r=Gi(r);var s="";r[0]=="-"&&(s="-",r=r.substring(1)),r.indexOf(".")>=0?(n=parseInt(n)+r.indexOf("."),r=r.replace(".","")):n=parseInt(n)+r.length,r.length<n?e=s+r+new Array(n-r.length+1).join("0"):r.length>=n&&n>0?e=s+Gi(r.substring(0,n))+(r.length>n?"."+r.substring(n):""):e=s+"0."+new Array(-n+1).join("0")+r}return e},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(e){this.value=i.validate(e)},i.getPrettyValue=function(e,t,r){t===void 0&&(t=3),r===void 0&&(r=","),e=i.validate(e);var n=e.charAt(0)=="-";n&&(e=e.substring(1));var s=e.indexOf(".");s=s>0?s:e.length;for(var o="",l=s;l>0;)l<t?(t=l,l=0):l-=t,o=e.substring(l,l+t)+(l<s-t&&l>=0?r:"")+o;return(n?"-":"")+o+e.substring(s)},i.prototype.getPrettyValue=function(e,t){return e===void 0&&(e=3),t===void 0&&(t=","),i.getPrettyValue(this.value,e,t)},i.round=function(e,t,r){if(t===void 0&&(t=0),r===void 0&&(r=ti.HALF_EVEN),e=i.validate(e),isNaN(t))throw Error("Precision is not a number: "+t);return $c(e,t,r)},i.prototype.round=function(e,t){if(e===void 0&&(e=0),t===void 0&&(t=ti.HALF_EVEN),isNaN(e))throw Error("Precision is not a number: "+e);return new i($c(this.value,e,t))},i.abs=function(e){return e=i.validate(e),Zw(e)},i.prototype.abs=function(){return new i(Zw(this.value))},i.floor=function(e){return e=i.validate(e),e.indexOf(".")===-1?e:i.round(e,0,ti.FLOOR)},i.prototype.floor=function(){return this.value.indexOf(".")===-1?new i(this.value):new i(this.value).round(0,ti.FLOOR)},i.ceil=function(e){return e=i.validate(e),e.indexOf(".")===-1?e:i.round(e,0,ti.CEILING)},i.prototype.ceil=function(){return this.value.indexOf(".")===-1?new i(this.value):new i(this.value).round(0,ti.CEILING)},i.add=function(e,t){return e=i.validate(e),t=i.validate(t),Ah(e,t)},i.prototype.add=function(e){return new i(Ah(this.value,e.getValue()))},i.subtract=function(e,t){return e=i.validate(e),t=i.validate(t),C0(e,t)},i.prototype.subtract=function(e){return new i(C0(this.value,e.getValue()))},i.multiply=function(e,t){return e=i.validate(e),t=i.validate(t),k0(e,t)},i.prototype.multiply=function(e){return new i(k0(this.value,e.getValue()))},i.divide=function(e,t,r,n){return e=i.validate(e),t=i.validate(t),A0(e,t,r,n)},i.prototype.divide=function(e,t,r){return new i(A0(this.value,e.getValue(),t,r))},i.modulus=function(e,t){return e=i.validate(e),t=i.validate(t),eL(e,t)},i.prototype.modulus=function(e){return new i(eL(this.value,e.getValue()))},i.compareTo=function(e,t){return e=i.validate(e),t=i.validate(t),iL(e,t)},i.prototype.compareTo=function(e){return iL(this.value,e.getValue())},i.negate=function(e){return e=i.validate(e),R0(e)},i.prototype.negate=function(){return new i(R0(this.value))},i.stripTrailingZero=function(e){return e=i.validate(e),Hs(e)},i.prototype.stripTrailingZero=function(){return new i(Hs(this.value))},i.RoundingModes=ti,i}();var qc=class{};var{regClass:$S}=Laya,Ch=class extends kh{constructor(){super(...arguments);this.withdrawText=null;this.allProp=[];this.puzzleNum=0;this.addPuzzleNum=0;this.wbnbRate=0;this.logPage=1;this.logPageSize=0;this.isSearch=!1;this.btnLock=!1;this.tokenDataAir=[];this.tokenTransData=[];this.currTab=0;this.type=1;this.coinType=-1;this.currencyTokenId=0;this.items=[]}onAwake(){this.m_iLayerType=pe.M_POP,this.m_iPositionType=pe.UP}onOpened(t){this.list_champ.array=[],t&&t.length>1&&(this.type=t[0],this.coinType=t[1],this.onClickTab(this.type)),this.withdrawText=this.withdrawCode.prompt}onEnable(){this.btn_champDetail.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_champDetail]),this.btn_champRecord.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_champRecord]),this.btn_withdrawRecord.label=L.instance.getUILang("ExtractionRecords"),this.btn_airRecord.label=L.instance.getUILang("ExtractionRecords"),this.tf_serviceRate1.text=L.instance.getUILang("service rate"),this.tf_tokenLabMont.text=L.instance.getUILang("token"),this.initTokenWebData(),this.initTokenWebDataAir(),this.initTokenTransData(),this.handleSelectTokenTrans(0),this.initLeftList(),this.initLogList(),this.handleSelectLogType(0),this.handleSelectLogDate(0),this.list_left.selectedIndex=0,this.refreshMoney(),this.btn_transferMoney.on(Laya.Event.CLICK,this,this.onTransferMoney),this.rechargeCode.on(Laya.Event.INPUT,this,this.onRechargeCodeInput),this.rechargeCode.on(Laya.Event.BLUR,this,this.testRechargeCodeInput),this.withdrawCode.on(Laya.Event.INPUT,this,this.onRechargewithdrawCodeInput),this.withdrawCode.on(Laya.Event.BLUR,this,this.testInputData),this.btn_hireRecord.on(Laya.Event.CLICK,this,this.onHireRecord),this.btn_proxyRecord.on(Laya.Event.CLICK,this,this.onProxyRecord),this.btn_claimHire.on(Laya.Event.CLICK,this,this.onClaimHire),this.btn_claimProxy.on(Laya.Event.CLICK,this,this.onClaimProxy),this.btn_claimGuild.on(Laya.Event.CLICK,this,this.onClaimGuild),this.list_web.renderHandler=Laya.Handler.create(this,this.onWebItemRender,null,!1),this.list_token.renderHandler=Laya.Handler.create(this,this.onTokenItemRender,null,!1),this.list_web2.renderHandler=Laya.Handler.create(this,this.onWebItemRender2,null,!1),this.list_token2.renderHandler=Laya.Handler.create(this,this.onTokenItemRender2,null,!1),this.list_token3.renderHandler=Laya.Handler.create(this,this.onTokenItemRender3,null,!1),this.list_token4.renderHandler=Laya.Handler.create(this,this.onTokenItemRender4,null,!1),this.list_left.renderHandler=new Laya.Handler(this,this.onLeftItemRender),this.box_web.on(Laya.Event.CLICK,this,this.onOpenWeb,[this.img_web_pad]),this.box_web2.on(Laya.Event.CLICK,this,this.onOpenWeb,[this.img_web_pad2]),this.box_tokenTrans.on(Laya.Event.CLICK,this,this.onOpenWeb,[this.img_token_pad4]),this.box_token.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad]),this.box_token2.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad2]),this.box_token3.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad3]),this.box_token4.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad4]),this.box_selectLog.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_logType_pad]),this.box_currentDate.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_logDate_pad]),this.list_logType.renderHandler=Laya.Handler.create(this,this.onlogTypeRender,null,!1),this.list_logDate.renderHandler=Laya.Handler.create(this,this.onlogDateRender,null,!1),this.list_logType.selectHandler=new Laya.Handler(this,this.handleSelectLogType),this.list_logDate.selectHandler=new Laya.Handler(this,this.handleSelectLogDate),this.btn_confirm.on(Laya.Event.CLICK,this,this.onbtnConfirm),this.btn_cardPay.on(Laya.Event.CLICK,this,this.onbtnCardPay),this.btn_max.on(Laya.Event.CLICK,this,this.onbtnMax),this.list_web.selectHandler=new Laya.Handler(this,this.handleSelectWeb),this.list_token.selectHandler=new Laya.Handler(this,this.handleSelectToken),this.list_web2.selectHandler=new Laya.Handler(this,this.handleSelectWebWithdraw),this.list_token2.selectHandler=new Laya.Handler(this,this.handleSelectTokenWithdraw),this.list_token3.selectHandler=new Laya.Handler(this,this.handleSelectTokenAir),this.list_token4.selectHandler=new Laya.Handler(this,this.handleSelectTokenTrans),this.list_left.selectHandler=new Laya.Handler(this,this.handleSelectLeft),this.tf_adress.text=te.instance.walletAddress,this.tf_adressAir.text=te.instance.walletAddress,this.btn_withdraw.on(Laya.Event.CLICK,this,this.onBtnWithdraw),this.btn_withdrawRecord.on(Laya.Event.CLICK,this,this.onBtnWithdrawRecord),this.btn_nodeRevenueRecord.on(Laya.Event.CLICK,this,this.onBtnNodeRevenueRecord),this.btn_jianE.on(Laya.Event.CLICK,this,this.onBtnJianE),this.btn_addE.on(Laya.Event.CLICK,this,this.onBtnAddE),this.btn_addMax.on(Laya.Event.CLICK,this,this.onBtnAddMax),this.btn_airRecord.on(Laya.Event.CLICK,this,this.onBtnAirRecord),this.btn_claimRecom.on(Laya.Event.CLICK,this,this.onClaimRem),A.intance.on(v.EVENT_WELFARE_CLAIM,this,this.onClaimWelfare),A.intance.on(v.CHANGE_ASSET_CHAIN,this,this.changeAssetChain),A.intance.on(v.EVENT_ADD_MONEY_ADDRESS,this,this.onAddMoneyAddress),A.intance.on(v.REFRESH_ALL_WITHDRAW_DATA,this,this.refreshWithdrawData),A.intance.on(v.EVENT_REFRESH_NODE_ONCHAIN_STATUS,this,this.onRefreshNodeStatus),this.btn_Search.on(Laya.Event.CLICK,this,this.searchLogArray,[!0]),this.btn_right.on(Laya.Event.CLICK,this,this.onBtnRightAndRight,[!0]),this.btn_left.on(Laya.Event.CLICK,this,this.onBtnRightAndRight,[!1]),this.btn_Combine.on(Laya.Event.CLICK,this,this.onBtnCombine),this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.box_all.visible=!1,this.initDataView()}setTab(t){for(let r=1;r<11;r++)t==r?this["box_"+r]&&(this["box_"+r].visible=!0):this["box_"+r]&&(this["box_"+r].visible=!1)}async initDataView(){if(!this.destroyed){B.instance.playerDto.country?this.btn_cardPay.visible=!0:this.btn_cardPay.visible=!1,this.type?this.onClickTab(this.type):this.onClickTab(5),this.list_hire.visible=!1,this.list_proxy.visible=!1,this.list_reward.visible=!1,this.listHireReward.visible=!1;var t=B.instance.playerDto.status;t==2?(this.btn_withdraw.visible=!1,this.tf_noAllowed.visible=!0):(this.btn_withdraw.visible=!0,this.tf_noAllowed.visible=!1)}}async showHireData(){var t=await se.requestPost("wxgame/lease/outline",{});if(t&&t.reward){let n=qe.processItemsArray(t.reward);t.reward.length>0?this.btn_claimHire.disabled=!1:this.btn_claimHire.disabled=!0;let s=n[0];this.list_hire.array=s,this.list_hire.selectedIndex=-1,this.list_hire.visible=!0,t.leaderCount?this.tf_hireNum.text=L.instance.getLanguage(1179,t.leaderCount):this.tf_hireNum.text=L.instance.getLanguage(1179,0);let o=n[1];var r=[];o.forEach(l=>{var c=new bt(l.id);c.newAddCnt=l.count,r.push(c)}),this.listHireReward.array=r,this.listHireReward.selectedIndex=-1,this.listHireReward.visible=!0}}async showProxyData(){var t=await se.requestPost("wxgame/lease/outline",{});if(t&&t.childReward){let s=qe.processItemsArray(t.childReward),o=s[0],l=s[2];t.childReward.length>0?this.btn_claimProxy.disabled=!1:this.btn_claimProxy.disabled=!0;var r=[],n=l;n.forEach(c=>{var p=new bt(c.id);p.newAddCnt=c.count,r.push(p)}),this.list_reward.array=r,this.list_reward.visible=!0,this.list_proxy.array=o,this.list_proxy.visible=!0,this.list_proxy.selectedIndex=-1,t.childCount?this.tf_proxyNum.text=L.instance.getLanguage(1180,t.childCount):this.tf_proxyNum.text=L.instance.getLanguage(1180,0)}}async showGuildData(){var t=await se.requestPost("wxgame/money/unionBonusInfo",{});if(t&&t.reward){t.reward.length<1?this.btn_claimGuild.disabled=!0:this.btn_claimGuild.disabled=!1;let s=qe.processItemsArray(t.reward),o=s[0],l=s[2];var r=[],n=l;n.forEach(c=>{var p=new bt(c.id);p.newAddCnt=c.count,r.push(p)}),this.list_guild.array=o,this.list_guild.visible=!0,this.list_guild.selectedIndex=-1}}async showRecommendData(){let t=B.instance.playerDto;this.tf_recomNum.text=L.instance.getLanguage(1531,t.remCount);var r=await se.requestPost("wxgame/money/remRewardList",{});if(r&&r.reward){r.reward.length<1?this.btn_claimRecom.disabled=!0:this.btn_claimRecom.disabled=!1;let s=qe.processItemsArray(r.reward)[0];this.list_recommend.array=s,this.list_recommend.visible=!0,this.list_recommend.selectedIndex=-1}}async showNodeRevenueData(){this.list_nodeRevenue.visible=!1;var t=await se.requestPost("paWallet/buyNodeRewardPanel",{});if(t){this.tf_nodeTip.text=L.instance.getLanguage(1835,t.usdt);var r=[],n=t.coinItems;n&&n.forEach(s=>{var o=j.intance.getNodeCurrencyByTokenAndChainId(s.token,s.chainId);o.id!=Bt.ITEM_SNAKE&&r.push(s)}),this.list_nodeRevenue.array=r,r.length>0?this.noDataBox_nodeRevenue.visible=!1:this.noDataBox_nodeRevenue.visible=!0,this.list_nodeRevenue.visible=!0}else ee.instance.notice(L.instance.getLanguage(135))}onRefreshNodeStatus(){this.showNodeRevenueData()}initLeftList(){let t=["DEPOSIT","WITHDRAW","HIRE","PROXY","AIRDROP WITHDRAWAL","Token Transfer","Guild","RECOMMENDED BY","Node Revenue","ASSET LOGS"];this.list_left.array=t}async onClickTab(t){this.currTab=t,this.setTab(t),this.box_all.visible=!0,t==1?(this.box_1.visible=!0,await this.initContainer()):t==2?await this.initContainer():t==3?this.showHireData():t==4?this.showProxyData():t==5?this.initContainerAir():t==6?(this.list_address.array=[null],this.initTokenArray(this.list_token4.selectedIndex)):t==7?this.showGuildData():t==8?this.showRecommendData():t==9?this.showNodeRevenueData():t==10&&(this.isSearch||this.searchLogArray())}async handleClickBtn(t){switch(t){case this.btn_champDetail:{let r=await se.requestPost("wxgame/welfare/list",{});r.welfareDtoList?ne.intance.openModule(y.ChampDetailDialog,r.welfareDtoList):ee.instance.notice(L.instance.getLanguage(135))}break;case this.btn_champRecord:{let r=await se.requestPost("wxgame/welfare/takeList",{});r.welfareDtoList?ne.intance.openModule(y.ChampRecordDialog,r.welfareDtoList):ee.instance.notice(L.instance.getLanguage(135))}break}}setToMainScene(){ze.intance.setCurrentScene(oe.M_SCENE_MAIN)}onClaimWelfare(t){var r=this.list_champ.array;if(r instanceof Array){for(let n of r)if(n.coinType==t.coinType){n.takeValue=0;continue}this.list_champ.refresh()}}onDisable(){this.removeEvent()}removeEvent(){A.intance.off(v.EVENT_WELFARE_CLAIM,this,this.onClaimWelfare),this.rechargeCode.off(Laya.Event.INPUT,this,this.onRechargeCodeInput),A.intance.off(v.CHANGE_ASSET_CHAIN,this,this.changeAssetChain),this.btn_hireRecord.off(Laya.Event.CLICK,this,this.onHireRecord),this.btn_proxyRecord.off(Laya.Event.CLICK,this,this.onProxyRecord),this.btn_claimHire.off(Laya.Event.CLICK,this,this.onClaimHire),this.btn_claimProxy.off(Laya.Event.CLICK,this,this.onClaimProxy),this.box_web.off(Laya.Event.CLICK,this,this.onOpenWeb),this.box_web2.off(Laya.Event.CLICK,this,this.onOpenWeb),this.box_token.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_token2.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_token3.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_token4.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_selectLog.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_currentDate.off(Laya.Event.CLICK,this,this.onOpenToken),this.btn_confirm.off(Laya.Event.CLICK,this,this.onbtnConfirm),this.btn_max.off(Laya.Event.CLICK,this,this.onbtnMax),this.btn_transferMoney.off(Laya.Event.CLICK,this,this.onTransferMoney),this.rechargeCode.off(Laya.Event.INPUT,this,this.onRechargeCodeInput),this.rechargeCode.off(Laya.Event.BLUR,this,this.testRechargeCodeInput),this.withdrawCode.off(Laya.Event.INPUT,this,this.onRechargewithdrawCodeInput),this.withdrawCode.off(Laya.Event.BLUR,this,this.testInputData),this.box_tokenTrans.off(Laya.Event.CLICK,this,this.onOpenWeb),this.btn_withdraw.off(Laya.Event.CLICK,this,this.onBtnWithdraw),this.btn_withdrawRecord.off(Laya.Event.CLICK,this,this.onBtnWithdrawRecord),this.btn_jianE.off(Laya.Event.CLICK,this,this.onBtnJianE),this.btn_addE.off(Laya.Event.CLICK,this,this.onBtnAddE),this.btn_addMax.off(Laya.Event.CLICK,this,this.onBtnAddMax),this.btn_airRecord.off(Laya.Event.CLICK,this,this.onBtnAirRecord),this.btn_Combine.off(Laya.Event.CLICK,this,this.onBtnCombine),this.btn_Search.off(Laya.Event.CLICK,this,this.searchLogArray),this.btn_right.off(Laya.Event.CLICK,this,this.onBtnRightAndRight),this.btn_left.off(Laya.Event.CLICK,this,this.onBtnRightAndRight),A.intance.offAllCaller(this)}onOpenWeb(t){t.visible==!1&&(t.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList))}onOpenToken(t){t.visible==!1&&(t.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList))}onWebItemRender(t,r){t&&t.onChange&&t.onChange(this.list_web.selectedIndex==r)}onWebItemRender2(t,r){t&&t.onChange&&t.onChange(this.list_web2.selectedIndex==r)}onTokenItemRender(t,r){t&&t.onChange&&t.onChange(this.list_token.selectedIndex==r)}onTokenItemRender2(t,r){t&&t.onChange&&t.onChange(this.list_token2.selectedIndex==r)}onTokenItemRender3(t,r){t&&t.onChange&&t.onChange(this.list_token3.selectedIndex==r)}onTokenItemRender4(t,r){t&&t.onChange&&t.onChange(this.list_token4.selectedIndex==r)}async createWebList(){this.currTab==1?(this.list_web.array=this.webData,this.list_web.visible=!0):(this.list_web2.array=this.webDataWithdraw,this.list_web2.visible=!0),await this.initNetComboBox()}async createTokenList(t){switch(this.currTab){case 1:if(t){let s=this.list_web.selectedItem;var r=j.intance.getTokensByChainId(s,this.currTab);this.list_token.array=r,this.list_token.visible=!0,r.length>0?(this.list_token.selectedIndex=-1,this.list_token.selectedIndex=0):(this.list_token.selectedIndex=-1,this.tf_token.text="N/A")}else this.list_token.array=[],this.list_token.selectedIndex=-1,this.tf_token.text="N/A";break;case 2:if(t){let s=this.list_web2.selectedItem;var n=j.intance.getTokensByChainId(s,this.currTab);this.list_token2.array=n,this.list_token2.visible=!0,n.length>0?(this.list_token2.selectedIndex=-1,this.list_token2.selectedIndex=0):(this.list_token2.selectedIndex=-1,this.tf_token2.text="N/A")}else this.list_token2.array=[],this.list_token2.selectedIndex=-1,this.tf_token2.text="N/A";break;case 6:this.list_token3.array=this.tokenDataAir,this.list_token3.visible=!0,this.list_token3.selectedIndex=0,this.tf_token3.text=`${this.tokenDataAir[0]}`;break;default:break}}onHideList(t){console.log("onHideList"),!(t.target&&t.target.selectImg)&&(this.img_web_pad.visible=!1,this.img_token_pad.visible=!1,this.img_web_pad2.visible=!1,this.img_token_pad2.visible=!1,this.img_token_pad3.visible=!1,this.img_token_pad4.visible=!1,this.img_logType_pad.visible=!1,this.img_logDate_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList))}async initContainer(){await this.createWebList()}async initContainerAir(){this.createTokenList(!0)}async getRestCoin(t){console.log("getRestCoin");try{let r=await te.instance.getBalance2(t.token),n=t.tokenDecimals,s=Gr(r,n);this.tf_rest.text=`${qe.truncateToTwoDecimalPlaces(Number(s))}`}catch(r){if(r instanceof Error){let n=r.message;console.log("剩余货币错误",n)}this.tf_rest.text="0"}}async initNetComboBox(){let t=await te.instance.walletClient.getChainId();if(t)switch(this.currTab){case 1:let r=this.list_web.array.findIndex(s=>s==t);this.list_web.selectedIndex=-1,this.list_web.selectedIndex=r,r==-1&&(this.tf_web.text="N/A",this.createTokenList(!1));break;case 2:let n=this.list_web2.array.findIndex(s=>s==t);this.list_web2.selectedIndex=-1,this.list_web2.selectedIndex=n,n==-1&&(this.tf_web2.text="N/A",this.createTokenList(!1));break;case 6:this.handleSelectTokenAir(0);break;default:break}}async switchChain(t=!0){try{let r,n;switch(this.currTab){case 1:n=this.list_web.selectedItem;break;case 2:n=this.list_web2.selectedItem;break;case 6:break;default:break}let s=await te.instance.walletClient.getChainId();if(n!==s&&!await te.instance.switchChain(n)){console.log("切换失败，请手动切换"),await this.addChain(),await this.initNetComboBox();return}return}catch(r){if(r instanceof Error){let n=r.message;(n.includes("Unrecognized chain ID")||n.includes("An unKnown PRC"))&&await this.addChain()}this.initNetComboBox()}}async addChain(){let t;this.currTab===1?t=this.list_web.selectedItem:t=this.list_web2.selectedItem,await te.instance.addChain(t);let r=await te.instance.walletClient.getChainId();r&&this.switchChain(r)}async handleSelectLeft(t){let r=this.list_left.selectedItem;this.onClickTab(t+1)}onLeftItemRender(t,r){t&&t.onChange&&t.onChange(this.list_left.selectedIndex==r)}async handleSelectWeb(t){if(t!=-1){let r=this.list_web.selectedItem;this.tf_web.text=te.instance.getChainName(r),this.createTokenList(!0),await this.switchChain(!0)}else this.createTokenList(!1)}async handleSelectWebWithdraw(t){if(t!=-1){let r=this.list_web2.selectedItem;this.tf_web2.text=te.instance.getChainName(r),this.createTokenList(!0),await this.switchChain(!0)}else this.createTokenList(!1)}handleSelectToken(t){if(t!=-1){var r=this.list_token.selectedItem;this.tf_token.text=r.name,this.refreshToken()}}async refreshWithdrawData(){this.handleSelectTokenWithdraw(this.list_token2.selectedIndex)}async handleSelectTokenWithdraw(t){if(t!=-1){var r=this.list_token2.selectedItem;this.tf_token2.text=r.name;let s=0,o=r.id,l=r.chainId;s=B.instance.getConsumeValue(o),this.tf_appAmount.text=`${qe.truncateToTwoDecimalPlaces(s)}`;let c=j.intance.getACoin(l,o);c&&(this.tf_servicerate.text=`${c.Commission/100}%`);var n=await se.requestPost("wxgame/payOrder/query",{chainId:l});if(n&&n.selfData){let p=this.searchRestMoney(n.selfData,o);this.tf_canAmount.text=`${qe.truncateToTwoDecimalPlaces(p)}`}}}async handleSelectTokenAir(t){if(t!=-1){this.wbnbRate=0,this.tf_token3.text=`${this.tokenDataAir[t]}`,this.allProp=await this.getItemByType();let r=j.intance.getPuzzleExchangeByName(this.tf_token3.text),n=r.items,s=r.redeemTickets,o=new bt;o.m_iId=s[0],o.m_iNum=s[1],this.img_extRe.skin=J.instance.getItemIcon(o.itemItem.icon);let l=this.getAirdropArrData(this.allProp,n);this.puzzleNum==0?this.btn_Combine.disabled=!0:this.btn_Combine.disabled=!1,this.listPuzzle.array=l,this.addPuzzleNum=0,this.tf_token3.text=="WICP"||this.tf_token3.text=="WKLAY"||this.tf_token3.text=="WBNRY",this.puzzleNum==0?(this.tf_extraRec.text="0",this.tf_ExtractNum.text="0",this.addPuzzleNum=0):(this.addPuzzleNum=1,this.showExtraNum(1))}}async initTokenArray(t){let r=this.tokenTransData[t];if(r==Oe.TYPE_BNRY||r==Oe.TYPE_BNB){let s=new qc;s.checked=!0,s.num=0,$.vType!==2?s.openid="0x4774aF1F0fc3B81c080955ae2eEA8e98AF5E1191":s.openid="0x7571FeB15D5043B2A9e38786d424b5e7a02a5cB2",s.noInput=!0;var n=await se.requestPost("wxgame/sys/queryName",{openid:s.openid.toLowerCase()});s.playerName=n.name,this.list_address.array=[s]}else this.list_address.array=[null]}handleSelectTokenTrans(t){if(t!=-1){let n=this.tokenTransData[t];this.initTokenArray(t);var r=j.intance.m_dicItems.get(n);this.tf_tokenName.text=L.instance.getLanguage(r.name),this.currencyTokenId=n;let s=B.instance.getConsumeValue(n);s<1e-6&&(s=0),this.tf_tokenAmount.text=`${qe.formatNumber(s)}`,this.img_token.skin=J.instance.getMoneyIcon(n)}this.img_token_pad4.visible=!1}async showExtraNum(t){this.tf_extraRec.text=`${t}`,this.tf_ExtractNum.text=`${this.addPuzzleNum}`}getAirdropArrData(t,r){let n=[];this.puzzleNum=0;for(let o=0;o<r.length;o++){let l=t.find(c=>c.itemItem.id==r[o][0]);if(l){n.push(l);let c=ct.formatNumber(l.m_iNum,8);n.length==1?this.puzzleNum=c:this.puzzleNum=Math.min(this.puzzleNum,c)}else{var s=new bt(r[o][0]);s.newAddCnt=0,n.push(s),this.puzzleNum=0}}return this.refreshRestExtraValue(),n}refreshRestExtraValue(){let t=j.intance.getPuzzleExchangeByName(this.tf_token3.text).value,r=j.intance.getPuzzleExchangeByName("WBNB").value,n=`${this.puzzleNum*r}U / `;switch(this.tf_token3.text){case"WTOX":n+=`${ct.filterNumFormat(this.puzzleNum*t,2)}WTOX`;break;case"WBNB":n+=`${ct.filterNumFormat(this.puzzleNum*t*this.wbnbRate,6)}WBNB`;break;case"WGALA":n+=`${ct.filterNumFormat(this.puzzleNum*t*this.wbnbRate,6)}WGALA`;break;case"WGGG":n+=`${ct.filterNumFormat(this.puzzleNum*t*this.wbnbRate,6)}WGGG`;break;case"WICP":n+="?WICP";break;case"WKLAY":n+="?WKLAY";break;case"WBNRY":n+="?WBNRY";break;default:break}this.tf_extraVal.text=n}onRechargeCodeInput(){let t=Number(this.rechargeCode.text),r=qe.isNumber(this.rechargeCode.text);(t<0||!r)&&(this.rechargeCode.text="0")}testRechargeCodeInput(){let t=Number(this.rechargeCode.text);this.rechargeCode.text=`${qe.formatNumber(t)}`}async onbtnCardPay(){ne.intance.openModule(y.CardPayView,1)}async onbtnConfirm(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1}),this.testRechargeCodeInput();let t=Number(this.tf_rest.text),r=Number(this.rechargeCode.text),n=await te.instance.walletClient.getChainId();if(!r){gt.instance().AlertByType(me.BASEALERTVIEW,Xe.instance.get(33),me.YES);return}if(t<r){gt.instance().AlertByType(me.BASEALERTVIEW,Xe.instance.get(34),me.YES);return}var s=this.list_token.selectedItem;if(!s){ee.instance.notice(L.instance.getLanguage(1801));return}Pe.instance.showLoadingByInfo();let o=s.tokenAddress;await Ln.instance.rechargeToken(r,s,o)&&(this.getRestCoin(s),B.instance.rechargeEnd=!0)}async refreshToken(){console.log("refreshToken");try{var t=this.list_token.selectedItem;let r=await te.instance.getBalance2(t.token),n=t.tokenDecimals,s=Gr(r,n);this.tf_rest.text!==s&&(this.tf_rest.text=`${qe.truncateToTwoDecimalPlaces(Number(s))}`,Laya.timer.clear(this,this.refreshToken))}catch{this.tf_rest.text="0"}}onbtnMax(){let t=Number(this.tf_rest.text);this.rechargeCode.text=`${t}`}initTokenWebData(){this.webData=[],this.webDataWithdraw=[];var t=j.intance.getGeneralValueById(7),r=j.intance.getGeneralValueById(8);t&&($.vType==2?(this.webData=t[2],this.webDataWithdraw=r[2]):$.vType==1?(this.webData=t[1],this.webDataWithdraw=r[1]):(this.webData=t[0],this.webDataWithdraw=r[0]))}initTokenWebDataAir(){this.tokenDataAir=["WTOX","WBNB","WGGG","WGALA","WICP","WKLAY","WBNRY"]}initTokenTransData(){this.tokenTransData=j.intance.getGeneralValueById(31);var t=[];for(let n of this.tokenTransData){var r=j.intance.m_dicItems.get(n);r&&t.push(L.instance.getLanguage(r.name))}this.list_token4.array=t}changeAssetChain(){gt.instance().AlertByType(me.BASEALERTVIEW,Xe.instance.get(36),me.YES,Laya.Handler.create(this,()=>{this.switchChain(!0)}))}onHireRecord(){ne.intance.openModule(y.HireDetailDialog)}onProxyRecord(){ne.intance.openModule(y.ProxyDetailDialog)}async onClaimHire(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var t=await se.requestPost("wxgame/lease/take",{});if(t&&t.reward.length>0){let r=t.reward,n=[];r.forEach(s=>{var o=new mr;o.id=s.id,o.count=s.count,n.push(o)}),ne.intance.openModule(y.RewardGetDialog,n)}this.showHireData()}}async onClaimProxy(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var t=await se.requestPost("wxgame/lease/childTake",{});if(t&&t.reward&&t.reward.length>0){let r=t.reward;ne.intance.openModule(y.RewardGetDialog,r)}this.showProxyData()}}async onClaimGuild(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var t=await se.requestPost("wxgame/money/unionBonusTake",{});if(t&&t.reward.length>0){let r=t.reward,n=[];r.forEach(s=>{var o=new mr;o.id=s.id,o.count=s.count,n.push(o)}),ne.intance.openModule(y.RewardGetDialog,n)}this.showGuildData()}}async onClaimRem(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var t=await se.requestPost("wxgame/money/remRewardTake",{});if(t&&t.list.length>0){let r=t.list,n=[];r.forEach(s=>{var o=new mr;o.id=s.id,o.count=s.count,n.push(o)}),ne.intance.openModule(y.RewardGetDialog,n)}this.showRecommendData()}}onRechargewithdrawCodeInput(){let t=Number(this.withdrawCode.text),r=qe.isNumber(this.withdrawCode.text);(t<0||!r)&&this.withdrawCode.text!==this.withdrawText&&(this.withdrawCode.text="0")}async testInputData(){let t=Number(this.withdrawCode.text);var r=this.list_token2.selectedItem;let n=r.id,s=r.chainId,o=j.intance.getACoin(s,n);if(!o)return;let l=Number(this.tf_appAmount.text);t>l?ee.instance.notice(Xe.instance.get(111)):t>o.maxAmount?ee.instance.notice(L.instance.getLanguage(1211,o.maxAmount)):t<o.minAmount&&ee.instance.notice(L.instance.getLanguage(1212,o.minAmount));let c=o.Commission,p=t*(1-c/1e4);n==Oe.TYPE_TOX&&s==In.id?this.tf_arrive.text=`${p.toFixed(2).replace(/\.?0+$/,"")}`:this.tf_arrive.text=`${p.toFixed(8).replace(/\.?0+$/,"")}`}async onBtnWithdraw(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});let t=Number(this.tf_appAmount.text);var r=this.list_token2.selectedItem;let n=r.id,s=r.chainId,o=Number(this.withdrawCode.text),l=j.intance.getACoin(s,n);if(!l)return;let c=l.Commission,p=new Gt(c/1e4),d=new Gt(o),h=p.multiply(d).getValue();if(o>t){ee.instance.notice(Xe.instance.get(111));return}if(o>l.maxAmount){ee.instance.notice(L.instance.getLanguage(1211,l.maxAmount));return}else if(o<l.minAmount){ee.instance.notice(L.instance.getLanguage(1212,l.minAmount));return}if($.vType==2&&s==Ta.id&&!await te.instance.getAuthStatus()){ee.instance.notice(Xe.instance.get(113));return}if(r.bankAddress&&r.bankAddress.length>10){let S=await te.instance.getBankBalance(r.token,r.bankAddress,r.name);if(console.log("contractBalance: "+S),S){let M=r.tokenDecimals,R=Gr(S,M),V=Number(R);if(console.log("银行余额 constNum: "+V),V<o){Pe.instance.hideLoading(),ee.instance.notice(L.instance.getLanguage(1356,r.name));return}}}let f=Number(this.tf_arrive.text),g=new Gt(o).multiply(new Gt(1).subtract(new Gt(c).divide(new Gt(1e4))));n==Oe.TYPE_TOX&&s==In.id,f=Number(g.getValue()),console.log("payMoney: ",o,"fee: ",h,"arriveMoney: ",f);let I=j.intance.getCurrency(n,s).token||Ae.ADDRESS0,_=await se.requestPost("wxgame/payOrder/create",{chainId:s,coinType:n,payMoney:o,fee:h,arriveMoney:f,token:I});_&&_.errorCode==0&&re.NoHeroError("Pending Review")}onBtnWithdrawRecord(){ne.intance.openModule(y.WithDrawRecordDialog)}onBtnNodeRevenueRecord(){ne.intance.openModule(y.NodeRevenueRecordDialog)}searchRestMoney(t,r){for(let n=0;n<t.length;n++)if(t[n][0]===r)return t[n][1];return 0}async onBtnCombine(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});let r=j.intance.getPuzzleExchangeByName(this.tf_token3.text).id;var n=await se.requestPost("wxgame/equip/puzzleExchangeTicket",{puzzleId:r,count:this.addPuzzleNum});if(n){let o=await se.requestPost("wxgame/hero/bagList",{},!0,!0);B.instance.m_packageData.initData(o.data),this.handleSelectTokenAir(this.list_token3.selectedIndex);let l=n.reward;if(l){var s=new mr;s.id=l[0].id,s.count=l[0].count,ne.intance.openModule(y.RewardGetDialog,[s])}}}async onBtnAddExtr(){}async getItemByType(){var t=Bt.TYPE_Consumption;this.items=[];for(var r=B.instance.m_packageData.getBackByType(t),n=0;n<r.length;n++){var s=r[n];s?this.items.push(s):this.items.push(new bt(0))}return this.items}onBtnJianE(){this.addPuzzleNum=Math.max(0,this.addPuzzleNum-1),this.addPuzzleNum<=0?(this.tf_extraRec.text="0",this.tf_ExtractNum.text="0",this.btn_Combine.disabled=!0):this.showExtraNum(this.addPuzzleNum)}onBtnAddE(){this.addPuzzleNum=Math.min(this.puzzleNum,this.addPuzzleNum+1),this.showExtraNum(this.addPuzzleNum),this.addPuzzleNum>0&&(this.btn_Combine.disabled=!1)}onBtnAddMax(){this.puzzleNum<=0||(this.addPuzzleNum=this.puzzleNum,this.showExtraNum(this.addPuzzleNum))}onBtnAirRecord(){ne.intance.openModule(y.AirdropRecordDialog)}onAddMoneyAddress(){console.log("onAddMoneyAddress: ",this.list_address.array);let t=new qc;t.num=0,this.list_address.array||(this.list_address.array=[null]),this.list_address.setItem(this.list_address.array.length-1,t),this.list_address.addItem(null),this.list_address.refresh(),this.list_address.tweenTo(this.list_address.array.length-1)}async onTransferMoney(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var t=[];let r=0;this.list_address.array.forEach(o=>{o&&o.checked&&o.playerName&&o.openid&&o.num>0&&(t.push({address:o.openid,num:o.num}),r+=o.num)});let n=Number(this.tf_tokenAmount.text);if(r>n){ee.instance.notice(Xe.instance.get(56));return}if(t.length>0){let o=this.currencyTokenId;var s=await se.requestPost("wxgame/welfare/coinTransfer",{list:t,id:o});if(s){let l=s.remainingCoin;o==l[0]&&(this.tf_tokenAmount.text=`${qe.formatNumber(l[1])}`),ee.instance.notice(L.instance.getLanguage(2e3));let c=Laya.Handler.create(this,()=>{this.list_address.array=[null]});o!==Oe.TYPE_BNRY&&o!==Oe.TYPE_BNB&&gt.instance().AlertByType(me.BASEALERTVIEW,L.instance.getLanguage(1551),me.SURE,c)}else ee.instance.notice(L.instance.getLanguage(135))}else ee.instance.notice(L.instance.getUILang("Please enter the recipient address."))}async refreshMoney(){var t=await se.requestPost("wxgame/money/panel",{});if(t&&this.currTab==2){let r=qe.getCurrencyIdByName(this.tf_token2.text),n=B.instance.getConsumeValue(r);this.tf_appAmount.text=`${qe.truncateToTwoDecimalPlaces(n)}`}}initLogList(){var t=j.intance.getGeneralValueById(21);this.list_logType.array=t,this.list_logType.selectedIndex=0;var r=j.intance.getGeneralValueById(22);this.list_logDate.array=r,this.list_logDate.selectedIndex=0,console.log(t)}onlogTypeRender(t,r){t&&t.onChange&&t.onChange(this.list_logType.selectedIndex==r)}onlogDateRender(t,r){t&&t.onChange&&t.onChange(this.list_logDate.selectedIndex==r)}handleSelectLogType(t){if(t!=-1){let r=this.list_logType.selectedItem;this.tf_selectLog.text=`${L.instance.getLanguage(r)}`}}handleSelectLogDate(t){if(t!=-1){let r=this.list_logDate.selectedItem;this.tf_selectLogDate.text=`${L.instance.getLanguage(r)}`}}async searchLogArray(t=!1){let r;switch(this.list_logType.selectedItem){case 1536:r=0;break;case 1537:r=2;break;case 1538:r=12;break;case 1539:r=20;break;case 1540:r=19;break;case 1541:r=6;break;case 1542:r=23;break;case 1549:r=31;break;case 1550:r=1;break;default:r=0;break}let n=this.list_logDate.selectedIndex+1;n==6&&(n=0),t&&(this.logPage=1),this.isSearch=!0;let s=await se.requestPost("wxgame/player/itemRecordPageList",{pageSize:10,pageIndex:this.logPage,logType:r,timeType:n});this.list_recordLog.array=s.list,this.tf_pearchPage.text=`${this.logPage}/${s.pages}`,this.logPageSize=s.pages,console.log(s)}onBtnRightAndRight(t){let r=this.logPage;t?this.logPage=Math.min(this.logPageSize,this.logPage+1):this.logPage=Math.max(1,this.logPage-1),r!==this.logPage&&this.searchLogArray()}};Ch=N([$S("lWg_-biNSI2538WxA3KVVw")],Ch);var Rh=class extends Laya.Dialog{};var{regClass:qS}=Laya,Mh=class extends Rh{constructor(){super()}onEnable(){this.list_champ.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1)}setOpenData(e){e&&e instanceof Array&&(this.list_champ.array=e,!e||e.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}onItemRender(e,t){e.onSetIndex(t)}onDisable(){}};Mh=N([qS("mXj9kkXUQny2iuvlC1REmA")],Mh);var Dh=class extends Laya.Box{};var{regClass:YS}=Laya,Bh=class extends Dh{set dataSource(t){super.dataSource=t,this.welfareDto=t,this.welfareDto&&this.setCurrentOutPut()}onSetIndex(t){this.tf_id.text=t+1+""}setCurrentOutPut(){this.tf_createDate.text=Mt.formatTimeStamp(this.welfareDto.createDate,"YY-MT-DD");let t=this.welfareDto.coinType;this.img_coinType.skin=J.instance.getMoneyIcon(t),this.tf_type.text=L.instance.getUILang("Staking_Type_"+this.welfareDto.type),this.tf_coinValue.text=ct.formatNumberStr(this.welfareDto.coinValue,8),this.tf_remainValue.text=ct.formatNumberStr(this.welfareDto.remainValue,8),this.tf_remainDays.text=this.welfareDto.remainDays+""}};Bh=N([YS("b0cMZEy9S5q2q_vqsjWzDA")],Bh);var Ph=class extends Laya.Box{};var{regClass:XS}=Laya,Oh=class extends Ph{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_claim.on(Laya.Event.CLICK,this,this.onClaim),this.isAddEvent=!0)}async onClaim(){if(this.welfareOutlineDto.takeValue>0){let r=await se.requestPost("wxgame/welfare/take",{coinType:this.welfareOutlineDto.coinType});if(r){var t=new mr;t.id=r.coinType,t.count=r.coinValue,ne.intance.openModule(y.RewardGetDialog,[t]),A.intance.event(v.EVENT_WELFARE_CLAIM,r)}else ee.instance.notice(L.instance.getLanguage(135))}}set dataSource(t){super.dataSource=t,this.welfareOutlineDto=t,this.welfareOutlineDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let t=this.welfareOutlineDto.coinType;this.img_coinType.skin=J.instance.getItemIcon(t),this.tf_allValue.text=ct.formatNumberStr(this.welfareOutlineDto.allValue,8),this.tf_todayRelease.text=ct.formatNumberStr(this.welfareOutlineDto.todayRelease,8),this.tf_takeValue.text=ct.formatNumberStr(this.welfareOutlineDto.takeValue,8),this.btn_claim.disabled=this.welfareOutlineDto.takeValue<=0}};Oh=N([XS("XTGeF2FhTp2j7VZIhqRAtg")],Oh);var Nh=class extends Laya.Dialog{};var{regClass:QS}=Laya,Fh=class extends Nh{constructor(){super()}onEnable(){this.list_champ.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1)}setOpenData(e){e&&e instanceof Array&&(this.list_champ.array=e,!e||e.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}onItemRender(e,t){e.onSetIndex(t)}onDisable(){}};Fh=N([QS("RzcjHDjIS62Ejw744kaKKw")],Fh);var Hh=class extends Laya.Box{};var{regClass:ZS}=Laya,Uh=class extends Hh{set dataSource(t){super.dataSource=t,this.welfareTakeDto=t,this.welfareTakeDto&&this.setCurrentOutPut()}onSetIndex(t){this.tf_id.text=t+1+""}setCurrentOutPut(){this.tf_takeTime.text=Mt.formatTimeStamp(this.welfareTakeDto.takeTime,"YY-MT-DD");var t=this.welfareTakeDto.reward,r=[];t&&t.forEach(n=>{var s=new bt(n.id);s.newAddCnt=n.count,r.push(s)}),this.list_reward.array=r}};Uh=N([ZS("0TASbeEtRlmozr-j6sElTw")],Uh);var Vh=class extends Laya.Dialog{};var{regClass:JS}=Laya,zh=class extends Vh{constructor(){super();this.btnLock=!1}onEnable(){A.intance.on("msg_"+X.snake.socket.MessageType.MSG_CHARGE,this,this.requestChargeInfo)}setOpenData(t){this.tf_adress.text=te.instance.walletAddress,this.data=t,this.tf_web.text=t.chainName,this.tf_token.text=t.symbol,this.tf_rest.text=t.balance,console.log("data",t),this.requestChargeInfo()}requestChargeInfo(){let t=X.snake.socket.MessageType.MSG_CHARGE,r=this.data.symbolId,n=X.snake.socket.CS_CHARGE.fromObject({symbolId:r});si.send(t,n)}onRequestChargeInfo(t,r){r==X.snake.socket.MessageCode.SYS_NORMAL&&(console.log("SC_CHARGE",t),this.rechargeData=t)}async deposit(t){let r=await te.instance.walletClient.getChainId(),n=Number(t.chainId),s;try{if(r!==n&&!await te.instance.switchChain(n)){await te.instance.addChain(n);return}console.log("tokenBalance",s)}catch(o){console.log("切换失败，请手动切换",o)}}async onbtnConfirm(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1}),this.testRechargeCodeInput();let t=Number(this.tf_rest.text),r=Number(this.rechargeCode.text),n=await te.instance.walletClient.getChainId();if(!r){gt.instance().AlertByType(me.BASEALERTVIEW,Xe.instance.get(33),me.YES);return}if(t<r){gt.instance().AlertByType(me.BASEALERTVIEW,Xe.instance.get(34),me.YES);return}var s=this.list_token.selectedItem;if(!s){ee.instance.notice(L.instance.getLanguage(1801));return}Pe.instance.showLoadingByInfo();let o=s.tokenAddress;await Ln.instance.rechargeToken(r,s,o)&&(this.getRestCoin(s),B.instance.rechargeEnd=!0)}onOpenWeb(t){t.visible==!1&&(t.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList))}onHideList(t){console.log("onHideList"),!(t.target&&t.target.selectImg)&&(this.img_web_pad.visible=!1,this.img_token_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList))}onOpenToken(t){t.visible==!1&&(t.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList))}onDisable(){}testRechargeCodeInput(){let t=this.rechargeCode.text;if(t&&!/^[0-9]+\.?[0-9]*$/.test(t)){this.rechargeCode.text="",ee.instance.notice(L.instance.getLanguage(1802));return}}async getRestCoin(t){try{let r=await te.instance.getBalance2(t.token);r&&(this.tf_rest.text=r.toString()),Pe.instance.hideLoading()}catch(r){console.error("获取余额失败",r),Pe.instance.hideLoading()}}};zh=N([JS("O0v8EHpMT0-wWgB8t3D14A")],zh);var Gh=class extends Laya.Dialog{};var{regClass:eT}=Laya,jh=class extends Gh{constructor(){super()}onEnable(){this.setOpenData(),this.list_sum.visible=!1,this.list_sumProp.visible=!1,this.list_champ.visible=!1}async setOpenData(){var e=await se.requestPost("wxgame/lease/takeList",{});if(e){let r=e.list;r=qe.addIndexToObjects(r),this.list_champ.array=r,this.list_champ.visible=!0;let n=qe.sumItemCount(r),s=qe.processItemsArray(n,!1),o=s[0],l=s[1];this.list_sum.array=o,this.list_sum.visible=!0,o.length>3?this.list_sum.y=506:this.list_sum.y=533;var t=[];l.forEach(c=>{var p=new bt(c.id);p.newAddCnt=c.count,t.push(p)}),this.list_sumProp.array=t,this.list_sumProp.visible=!0}}onDisable(){}};jh=N([eT("ZG7XYFvMTD-oZPNAmJhfIQ")],jh);var Wh=class extends Laya.Box{};var{regClass:tT}=Laya,Kh=class extends Wh{constructor(){super()}set dataSource(t){super.dataSource=t,this.itemDto=t,this.itemDto&&this.setCurrentOutPut()}async setCurrentOutPut(){let t=this.itemDto.id;this.img_coinType.skin=J.instance.getItemIcon(t),this.tf_takeValue.text=ct.formatNumberStr(this.itemDto.count,8)}};Kh=N([tT("S4XctoHfRm66A2jjw3rSsQ")],Kh);var $h=class extends Laya.Box{};var{regClass:iT}=Laya,qh=class extends $h{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.btnName=t,t=="Guild"&&B.instance.playerDto.unionLeader!==1?this.disabled=!0:this.disabled=!1,this.tf_txt.text=this.btnName,this.addEvent()}onChange(t){t?(this.selectBox.visible=!0,this.tf_txt.color="#143f6b"):(this.selectBox.visible=!1,this.tf_txt.color="#4e87b7")}};qh=N([iT("cbJ24As0TNGTuTkEeEDFzQ")],qh);var Yh=class extends Laya.Box{};var{regClass:rT}=Laya,Xh=class extends Yh{set dataSource(t){super.dataSource=t,t&&(this.tf_data.text=L.instance.getLanguage(t))}onDisable(){}onChange(t){t?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};Xh=N([rT("mPcFFRzmR82zTzTJafri7Q")],Xh);var Qh=class extends Laya.Box{};var{regClass:nT}=Laya,Zh=class extends Qh{constructor(){super();this.isAddEvent=!1;this.addL=1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.tf_uid.on(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.on(Laya.Event.FOCUS,this,this.uidFocus),this.btn_add.on(Laya.Event.CLICK,this,this.onAdd),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.isAddEvent=!0,this.tf_num.on(Laya.Event.BLUR,this,this.testRechargeCodeInput))}testRechargeCodeInput(){let t=Number(this.tf_num.text),r=qe.isNumber(this.tf_num.text);if(t<0||!r)this.tf_num.text="",this.addL=0;else{let n=qe.formatNumber(t);this.tf_num.text=`${n}`,this.addL=n}this.setItemNum()}set dataSource(t){super.dataSource=t,this.moneyAddressVo=t,this.moneyAddressVo?(this.btn_add.visible=!1,this.box_address.visible=!0,this.tf_uid.text=this.moneyAddressVo.openid,this.tf_player_name.text=this.moneyAddressVo.playerName,this.tf_uid.disabled=t.noInput,console.log("data1: ",t),this.addL=this.moneyAddressVo.num,this.setItemNum()):(this.btn_add.visible=!0,this.box_address.visible=!1,console.log("data2: ",t)),this.addEvent()}onAdd(){A.intance.event(v.EVENT_ADD_MONEY_ADDRESS)}async setPlayerName(){try{if(this.tf_uid.text=="")return;this.moneyAddressVo.openid=this.tf_uid.text.toLowerCase();var t=await se.requestPost("wxgame/sys/queryName",{openid:this.tf_uid.text.toLowerCase()});t&&(console.log(t),this.tf_player_name.text=t.name,this.moneyAddressVo.checked=!0,this.moneyAddressVo.playerName=t.name)}catch{}}uidFocus(){this.moneyAddressVo.openid="",this.moneyAddressVo.playerName="",this.moneyAddressVo.checked=!1,this.tf_uid.text="",this.tf_player_name.text=""}handleClickBtn(t){switch(t){case this.btn_reduce:this.addL>1&&(this.addL=qe.formatNumber(this.addL-1)),this.setItemNum();break;case this.btn_plus:this.addL=qe.formatNumber(this.addL+1),this.setItemNum();break}}setItemNum(){this.addL?this.tf_num.text=this.addL+"":this.tf_num.text="",this.moneyAddressVo.num=this.addL}onDisable(){this.removeEvent()}removeEvent(){this.tf_uid.off(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.off(Laya.Event.FOCUS,this,this.uidFocus),this.btn_add.off(Laya.Event.CLICK,this,this.onAdd),this.tf_num.off(Laya.Event.BLUR,this,this.testRechargeCodeInput)}};Zh=N([nT("J6QFYTIIQjqstznXD28nBA")],Zh);var Jh=class extends Laya.Dialog{};var{regClass:sT}=Laya,ef=class extends Jh{constructor(){super()}onEnable(){this.list_champ.visible=!1,this.setOpenData()}async setOpenData(){var e=await se.requestPost("paWallet/buyNodeRewardTakeRecord",{});if(e){let t=e.records;this.list_champ.array=t,this.list_champ.visible=!0}!e.records||e.records.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}onDisable(){}};ef=N([sT("NH__XdhsQzSj7dMNXhabYg")],ef);var tf=class extends Laya.Box{};var{regClass:aT}=Laya,rf=class extends tf{constructor(){super()}addEvent(){}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.setData(e),this.addEvent()}setData(e){let t=Mt.formatDayAndTime(e.time);this.tf_time.text=t.date+" "+t.time;var r=j.intance.getNodeCurrencyByTokenAndChainId(e.token,e.chainId);let n=r.id;var s=j.intance.m_dicItems.get(n);switch(this.tf_coinName.text=L.instance.getLanguage(s.name),this.img_coinType.skin=J.instance.getMoneyIcon(n),this.tf_amounte.text=`${e.amount}`,this.tf_network.text=te.instance.getChainName(e.chainId),e.status){case 0:this.tf_status.text="Failed",this.tf_status.color="#cd4a4a";break;case 1:var o=L.instance.getUILang("successfully");this.tf_status.text=o,this.tf_status.color="#4be063";break}}};rf=N([aT("dOQntgNfRi2U8cpYHzmOSg")],rf);var nf=class extends Laya.Box{};var{regClass:oT}=Laya,sf=class extends nf{constructor(){super();this.isAddEvent=!1}addEvent(){}set dataSource(t){super.dataSource=t,this.pledgeData=t,this.pledgeData&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let t=this.pledgeData.reward,r=qe.processItemsArray(t,!1),n=r[0],s=r[1];this.list_champ.array=n,n.length>3?this.list_champ.y=14:this.list_champ.y=40,this.tf_id.text=`${this.pledgeData.index+1}`;var o=[];s.forEach(l=>{var c=new bt(l.id);c.newAddCnt=l.count,o.push(c)}),this.listHireReward.array=o,this.tf_days.text=Mt.getYearMonthDat(this.pledgeData.takeTime)}};sf=N([oT("_mG5oDuaQY6l5yGUFmpG4w")],sf);var af=class extends Laya.Box{};var{regClass:lT}=Laya,of=class extends af{constructor(){super();this.isAddEvent=!1}addEvent(){}set dataSource(t){super.dataSource=t,this.pledgeData=t,t&&(this.addEvent(),this.setCurrentOutPut(t))}async setCurrentOutPut(t){this.img_coinType.skin=J.instance.getItemIcon(t.id),this.tf_coinValue.text=ct.formatNumberStr(t.count,8)}};of=N([lT("5t1LQunTRFOali6ENPwdqQ")],of);var lf=class extends Laya.Dialog{};var{regClass:cT}=Laya,cf=class extends lf{constructor(){super()}onEnable(){this.setOpenData(),this.list_sum.visible=!1,this.list_sumProp.visible=!1,this.list_champ.visible=!1}async setOpenData(){var e=await se.requestPost("wxgame/lease/childTakeList",{});if(e){let r=e.list;r=qe.addIndexToObjects(r),this.list_champ.array=r,this.list_champ.visible=!0;let n=qe.sumItemCount(r),s=qe.processItemsArray(n,!1),o=s[0],l=s[1];this.list_sum.array=o,this.list_sum.visible=!0,o.length>3?this.list_sum.y=506:this.list_sum.y=533;var t=[];l.forEach(c=>{var p=new bt(c.id);p.newAddCnt=c.count,t.push(p)}),this.list_sumProp.array=t}}onDisable(){}};cf=N([cT("hbicTwT0TxSxlRep4P48Tw")],cf);var uf=class extends Laya.Box{};var{regClass:uT}=Laya,pf=class extends uf{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.btn_copyFrom.on(Laya.Event.CLICK,this,this.onClickCopy,[!0]),this.btn_copyTo.on(Laya.Event.CLICK,this,this.onClickCopy,[!1]))}set dataSource(t){if(super.dataSource=t,!t)return;this.recordItemVo=t,this.tf_day.text=Mt.getYearMonthDat(this.recordItemVo.time),this.tf_quilty.text=`${this.recordItemVo.count}`;let r=j.intance.m_dicItems.get(this.recordItemVo.itemId);r&&(this.tf_item.text=L.instance.getLanguage(r.name)),this.setTypeData(),this.recordItemVo.from?(this.tf_from.text=`${qe.shortenString(this.recordItemVo.from,8,6)}`,this.btn_copyFrom.visible=!0):(this.tf_from.text="N/A",this.btn_copyFrom.visible=!1),this.recordItemVo.to?(this.tf_to.text=`${qe.shortenString(this.recordItemVo.to,8,6)}`,this.btn_copyTo.visible=!0):(this.tf_to.text="N/A",this.btn_copyTo.visible=!1),this.addEvent()}onClickCopy(t){t?doCopy(this.recordItemVo.from):doCopy(this.recordItemVo.to),ee.instance.notice(L.instance.getLanguage(132))}setTypeData(){let t;switch(this.recordItemVo.logType){case 0:t=1536;break;case 2:t=1537;break;case 12:t=1538;break;case 20:t=1539;break;case 19:t=1540;break;case 6:t=1541;break;case 23:t=1542;break;case 31:t=1549;break;case 1:t=1550;break;default:t=1536;break}this.tf_type.text=L.instance.getLanguage(t)}onDisable(){this.removeEvent()}removeEvent(){}};pf=N([uT("DhTylrISSfmA8oRRMwHOnw")],pf);var mf=class extends Laya.Box{};var{regClass:pT}=Laya,df=class extends mf{set dataSource(t){if(super.dataSource=t,t){var r=t;this.tf_data.text=te.instance.getChainName(r)}}onDisable(){}onChange(t){t?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};df=N([pT("psWSlYJaS8O0LUu-BH6R2Q")],df);var hf=class extends Laya.Box{};var{regClass:mT}=Laya,ff=class extends hf{set dataSource(t){if(super.dataSource=t,t){var r=t;this.tf_data.text=r.name}}onDisable(){}onChange(t){t?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};ff=N([mT("2gLgNMBIQd-cWw6HJjr46Q")],ff);var gf=class extends Laya.Dialog{};var{regClass:dT}=Laya,bf=class extends gf{constructor(){super()}onEnable(){this.list_champ.visible=!1,this.setOpenData()}async setOpenData(){var e=await se.requestPost("wxgame/payOrder/list",{});if(e){let t=e.orderItems;this.list_champ.array=t,this.list_champ.visible=!0}!e.orderItems||e.orderItems.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}onDisable(){}};bf=N([dT("y0xiZs-qSDWRAXN_oE10yg")],bf);var yf=class extends Laya.Box{};var{regClass:hT}=Laya,_f=class extends yf{constructor(){super()}addEvent(){}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.setData(e),this.addEvent()}setData(e){if(e){let t=Mt.formatDayAndTime(e.time);this.tf_day.text=t.date,this.tf_minute.text=t.time,this.img_coinType.skin=J.instance.getMoneyIcon(e.coinType),this.tf_amounte.text=`${e.amount}`}else this.visible=!1}};_f=N([hT("tbS8gPlOTWuMdXb9g8wZAg")],_f);var xf=class extends Laya.Dialog{};var{regClass:fT}=Laya,vf=class extends xf{constructor(){super();this.btnLock=!1}onEnable(){A.intance.on("msg_"+X.snake.socket.MessageType.MSG_WITHDRAW,this,this.requestChargeInfo)}setOpenData(t){this.deposit(t),this.requestChargeInfo(),console.log("data",t)}async deposit(t){let r=te.instance.walletAddress;this.tf_address.text=r,this.tf_token.text=t.symbol,this.tf_web.text=t.chainName}requestChargeInfo(){let t=X.snake.socket.MessageType.MSG_WITHDRAW,r=this.data.symbolId,n=X.snake.socket.SC_WITHDRAW.fromObject({resp:""});si.send(t,n)}onOpenWeb(t){t.visible==!1&&(t.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList))}onOpenToken(t){t.visible==!1&&(t.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList))}onHideList(t){console.log("onHideList"),!(t.target&&t.target.selectImg)&&(this.img_web_pad2.visible=!1,this.img_token_pad2.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList))}async onBtnWithdraw(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1}),this.testWithdrawCodeInput();let t=Number(this.tf_appAmount.text);var r=this.list_token2.selectedItem;if(!r){ee.instance.notice(L.instance.getLanguage(1801));return}let n=r.id,s=r.chainId,o=Number(this.withdrawCode.text);if(!o){gt.instance().AlertByType(me.BASEALERTVIEW,Xe.instance.get(33),me.YES);return}let l=j.intance.getACoin(s,n);if(!l)return;let c=l.Commission,p=new Gt(c/1e4),d=new Gt(o),h=p.multiply(d).getValue();if(o>t){ee.instance.notice(Xe.instance.get(111));return}if(o>l.maxAmount){ee.instance.notice(L.instance.getLanguage(1211,l.maxAmount));return}else if(o<l.minAmount){ee.instance.notice(L.instance.getLanguage(1212,l.minAmount));return}if($.vType==2&&s==Ta.id&&!await te.instance.getAuthStatus()){ee.instance.notice(Xe.instance.get(113));return}if(Pe.instance.showLoadingByInfo(),r.bankAddress&&r.bankAddress.length>10){let S=await te.instance.getBankBalance(r.token,r.bankAddress,r.name);if(console.log("contractBalance: "+S),S){let M=r.tokenDecimals,R=Gr(S,M),V=Number(R);if(console.log("银行余额 constNum: "+V),V<o){Pe.instance.hideLoading(),ee.instance.notice(L.instance.getLanguage(1356,r.name));return}}}let f=Number(this.tf_arrive.text),g=new Gt(o).multiply(new Gt(1).subtract(new Gt(c).divide(new Gt(1e4))));n==Oe.TYPE_TOX&&s==In.id,f=Number(g.getValue());let I=j.intance.getCurrency(n,s).token||Ae.ADDRESS0,_=await se.requestPost("wxgame/payOrder/create",{chainId:s,coinType:n,payMoney:o,fee:h,arriveMoney:f,token:I});Pe.instance.hideLoading(),_&&_.errorCode==0&&re.NoHeroError("Pending Review")}testWithdrawCodeInput(){let t=this.withdrawCode.text;if(t&&!/^[0-9]+\.?[0-9]*$/.test(t)){this.withdrawCode.text="",ee.instance.notice(L.instance.getLanguage(1802));return}}onDisable(){}};vf=N([fT("-G96ocIBRFacV4Xozyt5NQ")],vf);var wf=class extends Laya.Dialog{};var{regClass:gT}=Laya,Lf=class extends wf{constructor(){super();this.destroyDoCancel=!1;this.canClose=!0}onEnable(){this.on(Laya.Event.CLICK,this,this.onClickEvent)}onClickEvent(t){let r=t.target;r.name=="okBtn"?(this._okHandler&&this._okHandler.runWith(null),this.close()):r.name=="cancleBtn"&&(this.destroyDoCancel=!1,this._cancelHandler&&this._cancelHandler.runWith(null),this.close())}setOpenData(t){t&&(this._okHandler=t.okHandler,this._cancelHandler=t.cancelHandler,this.destroyDoCancel=t.destroyDoCancel,t.flag<0?(this.cancleBtn.visible=!1,this.okBtn.visible=!1,this.canClose=!1):t.flag&me.YES&&!(t.flag&me.NO)?(this.okBtn.x=this.width-this.okBtn.width>>1,this.cancleBtn.visible=!1,this.okBtn.label="Sure"):t.flag&me.NO&&!(t.flag&me.YES)?this.okBtn.visible=!1:t.flag&me.YES&&t.flag&me.NO,t.data&&this.alertDesc&&(t.data instanceof Array?(this.alertTitle.text=t.data[0],this.alertDesc.text=t.data[1]):this.alertDesc.text=t.data),t.initHandler&&t.initHandler.runWith(this))}onDisable(){this.destroyDoCancel&&this._cancelHandler&&this._cancelHandler.run(),this._okHandler=null,this._cancelHandler=null}close(t){this.canClose&&super.close(t)}};Lf=N([gT("8G0DBvD7T_2CVupdfQXrBw")],Lf);var Et=class Et{constructor(){this.ROOM_1=1;this.ROOM_2=2;this.ROOM_3=3;this.ROOM_1_1=1;this.ROOM_1_2=2;this.ROOM_1_3=3;this.ROOM_2_1=201;this.ROOM_2_2=202;this.ROOM_2_3=203;this.ROOM_3_1=301;this.ROOM_3_2=302;this.ROOM_3_3=303;this.ROOM_4_6=406;this.ROOM_5_4=504;this.ROOM_5_4_SELF=5041}static get instance(){return Et._instance==null&&(Et._instance=new Et),Et._instance}};Et._instance=null,Et.ROOM_PRE_CONTRACT=401,Et.ROOM_PRE_CONTRACT_SELF=402,Et.ROOM_FRIEND_APPLY=4,Et.ROOM_MAIL=5,Et.RED_GUILD_APPLY=6,Et.RED_SHIELDS=7,Et.RED_ACTIVITY1=8,Et.RED_ACTIVITY2=9,Et.RED_ACTIVITY3=10,Et.RED_EVERY_RANK_TOTAL=11,Et.RED_EVERY_RANK_PRE=12,Et.RED_EVERY_RANK_AIR=13,Et.RED_EVERY_RANK_TRA=14,Et.PRO_RANK_DAY_FIGHT_1=15,Et.PRO_RANK_DAY_FIGHT_2=16,Et.PRO_RANK_DAY_FIGHT_3=17,Et.PRO_RANK_DAY_FIGHT_4=18,Et.REM_RANK=28,Et.LAST_DRAW=29,Et.MAIL_ANNOUNCE_RED=23,Et.ROOM_OFFER_CARD=24,Et.RED_IGO=25,Et.RED_WHEEL=26,Et.RED_RENTAL=27;var Lt=Et;var If=class extends Laya.Dialog{};var{regClass:bT}=Laya,Ef=class extends If{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER}onEnable(){this.activityList.visible=!1,this.tab1.on(Laya.Event.CLICK,this,this.onTabClick,[1]),this.tab2.on(Laya.Event.CLICK,this,this.onTabClick,[2]),this.tab3.on(Laya.Event.CLICK,this,this.onTabClick,[3]),this.onTabClick(1),this.refreshRed(),A.intance.on(v.REFRESH_ACTIVITY_RED,this,this.refreshRed)}onChangeHead(){ne.intance.openModule(y.SelectHeadDialog,!0)}async onTabClick(t){for(let n=1;n<4;n++)t==n?(this["tab"+n].skin="res/scholarship/img_transfer_tab2.png",this["tab"+n].getChildByName("tf_tit").color="#143268"):(this["tab"+n].skin="res/scholarship/img_transfer_tab1.png",this["tab"+n].getChildByName("tf_tit").color="#429fdf");let r=await se.requestPost("wxgame/player/remActiveList",{remType:t});r&&(this.activityList.array=r.list,this.activityList.visible=!0,this.tf_totalActivity.text=L.instance.getLanguage(1555,r.remRate),!this.activityList.array||this.activityList.array.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1,A.intance.event(v.REFRESH_MAINSCENE_HEAD_RED),A.intance.event(v.REFRESH_ROLEINFO_RED),this["tab"+t].getChildByName("img_red").visible=!1)}refreshRed(){this.tab1.getChildByName("img_red").visible=B.instance.getRedDotById(Lt.RED_ACTIVITY1),this.tab2.getChildByName("img_red").visible=B.instance.getRedDotById(Lt.RED_ACTIVITY2),this.tab3.getChildByName("img_red").visible=B.instance.getRedDotById(Lt.RED_ACTIVITY3)}onDisable(){A.intance.offAllCaller(this)}};Ef=N([bT("GIxGfJ0QQmuel1O3zm7Weg")],Ef);var Sf=class extends Laya.Box{};var{regClass:yT}=Laya,Tf=class extends Sf{addEvent(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}set dataSource(t){super.dataSource=t,this.activityItem=t,this.activityItem&&(this.setData(this.activityItem),this.addEvent())}setData(t){this.tf_name.text=t.name,this.tf_address.text=`${qe.shortenString(t.openid,7,8)}`,this.tf_guild.text=L.instance.getMultiLan(t.unionName),this.tf_battle.text=`${t.fight}`,this.tf_score.text=`${t.ticket}`,this.playerIcon.headSkin=t.icon}onCopy(){let t=this.activityItem.openid;doCopy(t),ee.instance.notice(L.instance.getLanguage(132))}};Tf=N([yT("L-m245Z3S8-bKPqo8Afxww")],Tf);var kf=class extends Laya.Dialog{};var{regClass:_T}=Laya,Af=class extends kf{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.initContainer()}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList()}handleSelectHead(t){if(t!=-1){let r=this.list_head.selectedItem;B.instance.headId=r.id,this.playerIcon.headSkin=B.instance.headId}}createHeadList(){let t=j.intance.m_dicHead;this.list_head.array=t.values,this.list_head.visible=!0;let r=-1,n=0;this.playerIcon.headSkin=B.instance.headId;for(let s of t.values){if(s.id==B.instance.headId){r=n;break}n++}this.list_head.selectedIndex=r}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,r=L.instance.getUILang("Upload picture"),n=L.instance.getUILang("Select Image"),s=L.instance.getUILang("Save changes");openUploadPic(this,t,r,n,s)}async openPicEnd(t,r){if(r.length>500){let n=await se.requestPost("wxgame/player/uploadImg",{base64Str:r},!1,!1);n&&(B.instance.headId=n.imgUrl,t.playerIcon.headSkin=n.imgUrl,console.log(n.imgUrl))}}onRegister(){let t=B.instance.headId;A.intance.event(v.EVENT_MODIFY_HEAD,[t]),this.close()}};Af=N([_T("BmtPy79ySCyg4IuEQC4zsQ")],Af);var Cf=class extends Laya.ComboBox{};var{regClass:xT}=Laya,Rf=class extends Cf{set defaultLabel(e){this._defaultLabel=e,this._selectedIndex<0&&(this._button.label=e)}onEnable(){this.list=this.comboList,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1)}set dataSource(e){super.dataSource=e;var t=e;if(t){this.list.repeatY=t.length,this.list.width=this.width;var r=[];t.forEach(n=>{n instanceof Array?r.push(n[1]):r.push(n)}),this.labels=r.join(","),console.log("comboData.length: "+t.length,this.labels)}}onCountryItemRender(e,t){e.onChange(this.list.selectedIndex==t)}set isOpen(e){if(console.log("isOpen: "+e),this._isOpen!=e)if(this._isOpen=e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),r=t.y+this._button.height;r=r+this._listHeight<=Laya.stage.height||t.y-this._listHeight<0?r:t.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(t.x,r),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};Rf=N([xT("AqEOSlrnRkmI9RUPCJUVqQ")],Rf);var Mf=class extends Laya.List{};var{regClass:vT}=Laya,Df=class extends Mf{};Df=N([vT("7DDHp602Rs6dL3bjAu4ArA")],Df);var Bf=class extends Laya.Box{};var{regClass:wT}=Laya,Pf=class extends Bf{addEvent(){}set dataSource(t){this.zOrder=5,super.dataSource=t;var r=t;console.log("coinName: ",r),r&&r.label&&(this.addEvent(),this.tf_name.text=r.label)}onChange(t){t?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};Pf=N([wT("nREGzTKFSX6LuiRnM5nPXA")],Pf);var Of=class extends Laya.Box{};var{regClass:LT}=Laya,Nf=class extends Of{addEvent(){}set dataSource(t){super.dataSource=t;var r=t;r&&(this.addEvent(),t.id==999?(this.img_icon.visible=!1,this.tf_name.text="All"):(this.img_icon.visible=!0,this.img_icon.skin=J.instance.getCountryIcon(r.id),this.tf_name.text=L.instance.getLanguage(r.name)))}onChange(t){t?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};Nf=N([LT("LJ8PUf7kRCGUr4eT8Mhy3g")],Nf);var Ff=class extends Laya.Dialog{};var cl=class extends Laya.Event{constructor(){super()}};cl.INIT_CREATELOGIN_EVENT="CreateLoginEvent:INIT_CREATELOGIN_EVENT";var{regClass:IT}=Laya,Hf=class extends Ff{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_PANEL;this.m_iPositionType=pe.CENTER}onEnable(){A.intance.on(cl.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),A.intance.on("msg_"+X.snake.socket.MessageType.MSG_USER_REGISTER,this,this.onWaitPlayerInfoBack),A.intance.on(v.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),A.intance.on(v.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack),this.btn_setting.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_setting]),this.btn_radio1.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio1]),this.btn_radio2.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio2]),this.btn_register.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_register]),this.box_change.on(Laya.Event.CLICK,this,this.onChangeHead),this.input_name.prompt=L.instance.getLanguage(31),this.selectRadio(1),this.initCountry(),this.initCreateLoginView(),this.initReferral(),Ye.instance.sendCustumEvent(23)}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(t,r){t.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=r,this.onHideCountry())}onListDown(t){t.stopPropagation()}onScrollBarDown(t){t.stopPropagation()}onCountryItemRender(t,r){t.onChange(this.list_country.selectedIndex==r)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(t){if(console.log("handleSelectCountry: "+t),t!=-1){let r=this.list_country.selectedItem;B.instance.countryId=r.id,this.img_flag.skin=J.instance.getCountryIcon(r.id),this.tf_country.text=L.instance.getLanguage(r.name)}}createCountryList(){let t=j.intance.m_dicCountry;this.list_country.array=t.values,this.list_country.visible=!0;let r=-1,n=0;for(let s of t.values){if(s.id==B.instance.countryId){r=n;break}n++}this.list_country.selectedIndex=r}onChangeHeadBack(t,r){this.input_name.text=t,B.instance.headId=r,this.playerIcon.headSkin=r}onChangeModifyHead(t){B.instance.headId=t,this.playerIcon.headSkin=t}onChangeHead(){ne.intance.openModule(y.ChangeHeadDialog)}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,r=L.instance.getUILang("Upload picture"),n=L.instance.getUILang("Select Image"),s=L.instance.getUILang("Save changes");openUploadPic(this,t,r,n,s)}async openPicEnd(t,r){if(r.length>500){let n=await se.requestPost("wxgame/player/uploadImg",{base64Str:r},!1,!1);n&&(B.instance.headId=n.imgUrl,t.playerIcon.headSkin=n.imgUrl,console.log(n.imgUrl))}}selectRadio(t){let r=t==1;this.btn_radio1.selected=r,this.btn_radio2.selected=!r}handleClickBtn(t){switch(t){case this.btn_radio1:this.selectRadio(1);break;case this.btn_radio2:this.selectRadio(2);break;case this.btn_register:this.onRegister();break;case this.btn_setting:ne.intance.openModule(y.GameSettingLanguageDialog);break}}async onRegister(){let t=this.input_name.text,r=this.btn_radio1.selected?1:2;if(t=t.trim(),t==""){ee.instance.notice(L.instance.getLanguage(31));return}if(B.instance.countryId==-1){ee.instance.notice(L.instance.getLanguage(1048));return}let o=new URL(window.location.href).searchParams.get("referral");console.log("referral: ",o);let l=await te.instance.createAcccount(t,r,B.instance.headId.toString(),B.instance.countryId,o)}onWaitPlayerInfoBack(t){if(t){Pe.instance.hideLoading();var r=t.roleInfo,n=new rn;n.pid=r.roleId,n.name=r.userName,n.icon=r.icon,n.exp=r.score,n.code=r.code,n.country=r.country,n.invite=r.invite,B.instance.playerDto=n,this.close(),A.intance.event(v.EVENT_ENTER_MAIN)}}initReferral(){let n=new URL(window.location.href).searchParams.get("referral");n&&(this.input_code.text=n)}initCreateLoginView(){}onDisable(){this.removeEvent()}removeEvent(){A.intance.off(cl.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),A.intance.off(v.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),A.intance.off(v.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack)}};Hf=N([IT("1K2SyFxcQY-12SasSSRXyQ")],Hf);var Uf=class extends Laya.Dialog{};var{regClass:ET}=Laya,Vf=class extends Uf{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER;this.currTab=0}onEnable(){A.intance.on("msg_"+X.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onRequestInfo),this.initContainer()}initContainer(){let t=B.instance.playerDto;var r=X.snake.socket.MessageType.MSG_INVITE_LIST,n=X.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t.pid});si.send(r,n)}onRequestInfo(t,r){if(r==X.snake.socket.MessageCode.SYS_NORMAL){var n=t.info;this.list_rental.array=n}}onDisable(){A.intance.off("msg_"+X.snake.socket.MessageType.MSG_INVITE_LIST,this,this.onRequestInfo)}};Vf=N([ET("sawRNG-YR0WiyH87IfeHmg")],Vf);var zf=class extends Laya.Dialog{};var{regClass:ST}=Laya,Gf=class extends zf{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER;this.pageIndex=1;this.pageSize=20;this.scrolLock=!0}onEnable(){this.list_rental2.visible=!1,this.list_rental2.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange)}setOpenData(t){t&&(console.log(t),this.pid=t.pid,this.getReferralData())}onScrollBarChange(){this.list_rental2.scrollBar.value>=this.list_rental2.scrollBar.max&&this.loadMoreData()}async getReferralData(){let t=await se.requestPost("wxgame/player/referralList2",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});t&&(this.list_rental2.array=t.list,this.list_rental2.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let t=await se.requestPost("wxgame/player/referralList2",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});if(console.log(t),t){this.scrolLock=!0;let r=t.list;this.list_rental2.array.push(...r),this.list_rental2.array=this.list_rental2.array,Laya.timer.clear(this,this.refreshLock)}}}refreshLock(){this.scrolLock=!0,console.log("重置锁")}onDisable(){this.list_rental2.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange)}};Gf=N([ST("kAtevFvnTYGkg5Pu-ISlQw")],Gf);var jf=class extends Laya.Box{};var{regClass:TT}=Laya,Wf=class extends jf{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_battle.on(Laya.Event.CLICK,this,this.onBtnBattle)}set dataSource(t){t&&(super.dataSource=t,this.referralData=t,this.tf_name.text=t.name,this.tf_guild.text=L.instance.getMultiLan(t.unionName),this.playerIcon.headSkin=t.icon,this.tf_l2.text=t.fightTimes,t.openid?(this.fromBox.visible=!0,this.address=t.openid,this.tf_from.text=`${qe.shortenString(t.openid,7,4)}`):this.fromBox.visible=!1)}onBtnBattle(){console.log("btn12"),this.referralData.fightTimes>0&&ne.intance.openModule(y.TotalBattlesDialog,this.referralData)}onCopy(){let t=this.address;doCopy(t),ee.instance.notice(L.instance.getLanguage(132))}};Wf=N([TT("6RSP0qtzSg-R9oUDT-GOCw")],Wf);var Kf=class extends Laya.Box{};var{regClass:kT}=Laya,$f=class extends Kf{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}set dataSource(t){if(!t)return;super.dataSource=t,this.referralData=t;let[r,n,,s,o,l]=t.split(","),c={headId:r,nickName:n,country:Number(s),battle:o,online:l};this.tf_name.text=c.nickName,this.playerIcon.headSkin=c.headId;let p=j.intance.m_dicCountry.get(c.country);p&&(this.img_country.skin=J.instance.getCountryIcon(p.id),this.tf_country.text=L.instance.getLanguage(p.name)),this.tf_battle.text=c.battle;let d=c.online==="0";this.tf_online.text=d?"on line":Mt.formatTimeAgo(new Date().getTime()-Number(c.online)),this.tf_online.color=d?"#43ef74":"#b4b4b4"}onBtn12(){this.referralData.remNum>0&&ne.intance.openModule(y.ReferralL2Dialog,this.referralData)}};$f=N([kT("QTOEy7PgRqi9dIWmX22OTw")],$f);var qf=class extends Laya.Dialog{};var{regClass:AT}=Laya,Yf=class extends qf{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER}onEnable(){Ke.instance.playSoundByName(Ke.soundName32)}onDisable(){}};Yf=N([AT("szfg-Zt_RRWZ_nHMppjUMA")],Yf);var Xf=class extends Laya.Box{};var{regClass:CT}=Laya,Qf=class extends Xf{set dataSource(e){super.dataSource=e;var t=e;t&&(this.img_icon.skin="res/role/img_icon_"+t[0]+".png",this.tf_name.text=L.instance.getUILang(t[1]),this.tf_num.text=t[2])}};Qf=N([CT("WJ5TDeRBSkC9yMqJ72B0Ow")],Qf);var Zf=class extends Laya.Box{};var{regClass:RT}=Laya,Jf=class extends Zf{set dataSource(t){super.dataSource=t,this.headItem=t,this.headItem&&this.setCurrentOutPut()}async setCurrentOutPut(){let t=this.headItem.id;this.playerIcon.headSkin=t}onChange(t){}};Jf=N([RT("AwN_JFPwQsKswm1N53Bmkg")],Jf);var eg=class extends Laya.Dialog{};var{regClass:MT}=Laya,tg=class extends eg{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.on(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.on(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.on(Laya.Event.CLICK,this,this.onDetail),A.intance.on("msg_"+X.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),A.intance.on(v.ROLE_INFO_CHANGE,this,this.updateRoleInfo),this.updateRoleInfo()}updateRoleInfo(){let t="1",r=B.instance.playerDto;if(!r){console.warn("Player data is not available");return}this.requestPlayerInfo(r.pid),this.updateBasicInfo(r),this.updateReferralInfo(r),this.updateCountryInfo(r.country),this.updateWalletAddress(),this.updatePlayerIcon(r.icon||t)}requestPlayerInfo(t){let r=X.snake.socket.MessageType.MSG_REQUEST_INFO,n=X.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t});si.send(r,n)}updateBasicInfo(t){this.tf_name.text=t.name,this.ally_num.text=`${t.remCount}`}updateReferralInfo(t){if(t.code){let n=`http://stage.queengame.io/?referral=${t.code}`;this.tf_myCode.text=n,this.btn_copy2.disabled=!1}else this.tf_myCode.text="",this.btn_copy2.disabled=!0}updateCountryInfo(t){let r=j.intance.m_dicCountry.get(t);r&&(this.tf_country.text=L.instance.getLanguage(r.name),this.img_country.skin=J.instance.getCountryIcon(r.id))}updateWalletAddress(){let t=te.instance.walletAddress;this.tf_address.text=qi.formatWalletAddress(t)}updatePlayerIcon(t){this.playerIcon.headSkin=t}onChangeHead(){ne.intance.openModule(y.SelectHeadDialog,!0)}onCopy(){let t=te.instance.walletAddress;doCopy(t),ee.instance.notice(L.instance.getLanguage(132))}onCopy2(){let t=this.tf_myCode.text;doCopy(t),ee.instance.notice(L.instance.getLanguage(132))}onRequestInfo(t,r){if(r==X.snake.socket.MessageCode.SYS_NORMAL){var n=t.roleInfo;console.log("玩家信息",n);let s=n.invNum;this.ally_num.text=`${s}`}}onDisable(){A.intance.off(v.ROLE_INFO_CHANGE,this,this.updateRoleInfo),this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.off(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.off(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.off(Laya.Event.CLICK,this,this.onDetail),A.intance.off("msg_"+X.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),A.intance.offAllCaller(this)}onDetail(){ne.intance.openModule(y.ReferralDialog)}};tg=N([MT("T7g565QQR7-fZgZNjVg92A")],tg);var ig=class extends Laya.Scene{};var{regClass:DT}=Laya,rg=class extends ig{constructor(t){super()}onAwake(){this.m_iLayerType=pe.M_POP,this.m_iPositionType=pe.UP}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.on(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.on(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.on(Laya.Event.CLICK,this,this.onDetail),A.intance.on("msg_"+X.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),A.intance.on(v.ROLE_INFO_CHANGE,this,this.updateRoleInfo),this.updateRoleInfo()}updateRoleInfo(){let t="1",r=B.instance.playerDto;if(!r){console.warn("Player data is not available");return}this.requestPlayerInfo(r.pid),this.updateBasicInfo(r),this.updateReferralInfo(r),this.updateCountryInfo(r.country),this.updateWalletAddress(),this.updatePlayerIcon(r.icon||t)}requestPlayerInfo(t){let r=X.snake.socket.MessageType.MSG_REQUEST_INFO,n=X.snake.socket.CS_REQUEST_INFO.fromObject({roleId:t});si.send(r,n)}updateBasicInfo(t){this.tf_name.text=t.name,this.ally_num.text=`${t.remCount}`}updateReferralInfo(t){if(t.code){let n=`${getVAddress()}?referral=${t.code}`;this.tf_myCode.text=n,this.btn_copy2.disabled=!1}else this.tf_myCode.text="",this.btn_copy2.disabled=!0}updateCountryInfo(t){let r=j.intance.m_dicCountry.get(t);r&&(this.tf_country.text=L.instance.getLanguage(r.name),this.img_country.skin=J.instance.getCountryIcon(r.id))}updateWalletAddress(){let t=te.instance.walletAddress;this.tf_address.text=qi.formatWalletAddress(t)}updatePlayerIcon(t){this.playerIcon.headSkin=t}onChangeHead(){ne.intance.openModule(y.SelectHeadDialog,!0)}onCopy(){let t=te.instance.walletAddress;doCopy(t),ee.instance.notice(L.instance.getLanguage(132))}onCopy2(){let t=this.tf_myCode.text;doCopy(t),ee.instance.notice(L.instance.getLanguage(132))}onRequestInfo(t,r){if(r==X.snake.socket.MessageCode.SYS_NORMAL){var n=t.roleInfo;console.log("玩家信息",n);let s=n.invNum;this.ally_num.text=`${s}`}}onDisable(){A.intance.off(v.ROLE_INFO_CHANGE,this,this.updateRoleInfo),this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.off(Laya.Event.CLICK,this,this.onCopy2),this.btn_changeHead.off(Laya.Event.CLICK,this,this.onChangeHead),this.btn_detail.off(Laya.Event.CLICK,this,this.onDetail),A.intance.off("msg_"+X.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onRequestInfo),A.intance.offAllCaller(this)}onDetail(){ne.intance.openModule(y.ReferralDialog)}setToMainScene(){ze.intance.setCurrentScene(oe.M_SCENE_MAIN)}};rg=N([DT("Ra6hof-DS3-o_gxRa_2t0g")],rg);var ng=class extends Laya.Dialog{};var{regClass:BT}=Laya,sg=class extends ng{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER}setOpenData(t){}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.input_name.prompt=L.instance.getLanguage(31),this.initContainer();let t=j.intance.getGeneralValueById(13);this.tf_nameGold.text=t[1],this.img_nameGold.skin=J.instance.getMoneyIcon(t[0]),console.log(t)}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList(),this.initCountry()}handleSelectHead(t){if(t!=-1){let r=this.list_head.selectedItem;B.instance.headId=r.id,this.playerIcon.headSkin=B.instance.headId}}createHeadList(){let t=j.intance.m_dicHead;this.list_head.array=t.values,this.list_head.visible=!0;let r=-1,n=0;B.instance.headId=B.instance.playerDto.icon,this.playerIcon.headSkin=B.instance.headId,this.input_name.text=B.instance.playerDto.name;for(let s of t.values){if(s.id==B.instance.headId){r=n;break}n++}this.list_head.selectedIndex=r}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(t,r){t.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=r,this.onHideCountry())}onListDown(t){t.stopPropagation()}onScrollBarDown(t){t.stopPropagation()}onCountryItemRender(t,r){t.onChange(this.list_country.selectedIndex==r)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(t){if(console.log("handleSelectCountry: "+t),t!=-1){let r=this.list_country.selectedItem;B.instance.countryId=r.id,this.img_flag.skin=J.instance.getCountryIcon(r.id),this.tf_country.text=L.instance.getLanguage(r.name)}}createCountryList(){let t=j.intance.m_dicCountry;this.list_country.array=t.values,this.list_country.visible=!0;let r=-1,n=0;B.instance.countryId=B.instance.playerDto.country;for(let s of t.values){if(s.id==B.instance.countryId){r=n;break}n++}this.list_country.selectedIndex=r}onBtnChangePic(){var t=Laya.Render.canvas.style.zIndex,r=L.instance.getUILang("Upload picture"),n=L.instance.getUILang("Select Image"),s=L.instance.getUILang("Save changes");openUploadPic(this,t,r,n,s)}async openPicEnd(t,r){if(r.length>500){let n=await se.requestPost("wxgame/player/uploadImg",{base64Str:r},!1,!1);n&&(B.instance.headId=n.imgUrl,t.playerIcon.headSkin=n.imgUrl,t.list_head.selectedIndex=-1,console.log(n.imgUrl))}}onRegister(){let t=this.input_name.text;if(t=t.trim(),t==""){ee.instance.notice(L.instance.getLanguage(31));return}if(B.instance.playerDto.name!==t&&B.instance.getConsumeValue(Oe.TYPE_GOLD)<Number(this.tf_nameGold.text)){ee.instance.notice(Xe.instance.get(51));return}B.instance.headId!=-1?this.onModify(t,B.instance.headId,B.instance.countryId):ee.instance.notice(L.instance.getLanguage(134))}async onModify(t,r,n){if(t==""){ee.instance.notice(L.instance.getLanguage(31));return}let s=await Ra.instance.updateProfile(t,r.toString(),n);this.destroyed||(s?(B.instance.playerDto=s,this.close(),A.intance.event(v.ROLE_INFO_CHANGE)):ee.instance.notice(L.instance.getLanguage(135)))}};sg=N([BT("3CibwwHGSPG2Qkeq4rbMag")],sg);var ag=class extends Laya.Dialog{};var{regClass:PT}=Laya,og=class extends ag{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER;this.pageIndex=1;this.pageSize=20;this.scrolLock=!0}onEnable(){this.list_battle.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange)}setOpenData(t){t&&(console.log(t),this.pid=t.pid,this.getReferralData())}onScrollBarChange(){this.list_battle.scrollBar.value>=this.list_battle.scrollBar.max&&this.loadMoreData()}async getReferralData(){let t=await se.requestPost("wxgame/player/battlesList",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});t&&(this.list_battle.array=t.list,this.list_battle.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let t=await se.requestPost("wxgame/player/battlesList",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});if(console.log(t),t){this.scrolLock=!0;let r=t.list;this.list_battle.array.push(...r),this.list_battle.array=this.list_battle.array,Laya.timer.clear(this,this.refreshLock)}}}refreshLock(){this.scrolLock=!0,console.log("重置锁")}onDisable(){this.list_battle.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange)}};og=N([PT("qq0DrNoKSVmnXx-7vsMvNw")],og);var lg=class extends Laya.Box{};var{regClass:OT}=Laya,cg=class extends lg{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}set dataSource(t){if(!t)return;super.dataSource=t;let r=Mt.formatDayAndTime(t.time);this.tf_endDate.text=`${r.date} ${r.time}`;var n=j.intance.m_dicArenaDic.get(t.arenaId);this.tf_arena.text=L.instance.getLanguage(n.name),this.img_coinType2.skin=J.instance.getMoneyIcon(t.coinType),this.tf_ticket.text=`${t.ticketValue}`,this.tf_bonus.text=`${t.bonus}`;let s=B.instance.getConsumeValue(t.coinType),o=j.intance.m_dicItems.get(t.coinType),l=L.instance.getLanguage(o.name);this.tf_moneyName.text=l}onBtn12(){this.referralData.l2>0&&ne.intance.openModule(y.ReferralL2Dialog,this.referralData)}onCopy(){let t=this.address;doCopy(t),ee.instance.notice(L.instance.getLanguage(132))}};cg=N([OT("iUE6F1pjTg-jhQSieKM2hg")],cg);var ug=class extends Laya.ComboBox{};var{regClass:NT}=Laya,pg=class extends ug{set defaultLabel(e){this._defaultLabel=e,this._selectedIndex<0&&(this._button.label=e),this._button.labelAlign="center"}onEnable(){this.list=this.comboList}set dataSource(e){super.dataSource=e;var t=e;t&&(this.labels=t.join(","),console.log("comboData.length: "+t.length),this.list.repeatY=t.length,this.list.width=this.width,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1))}onCountryItemRender(e,t){e.onChange(this.list.selectedIndex==t)}set isOpen(e){if(console.log("isOpen: "+e),this._isOpen!=e)if(this._isOpen=e,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var t=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),r=t.y+this._button.height;r=r+this._listHeight<=Laya.stage.height||t.y-this._listHeight<0?r:t.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(t.x,r),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};pg=N([NT("Fns-7UW3RpSb95NWnjiDFQ")],pg);var mg=class extends Laya.Dialog{};var{regClass:FT}=Laya,Us=class extends Laya.Script{constructor(){super();this._isLeft=!1}onAwake(){}get isLeft(){return this._isLeft}set isLeft(t){this._isLeft=t,this.btn_bg=this.owner.getChildByName("btn_bg"),this.label_left=this.owner.getChildByName("label_left"),this.label_right=this.owner.getChildByName("label_right"),this.isLeft?(this.btn_bg.x=4,this.label_left.color="#213343",this.label_right.color="#52a5e0"):(this.btn_bg.x=this.owner.width-this.btn_bg.width-4,this.label_left.color="#52a5e0",this.label_right.color="#213343")}};Us=N([FT("-1MGS4JRSMOn_RKPUuuV9Q")],Us);var{regClass:HT}=Laya,dg=class extends mg{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER;this.totalLans=[1,6,7];this.currLan=0}onEnable(){this.musicSwitchButton=this.box_music.getComponent(Us),this.soundSwitchButton=this.box_sound.getComponent(Us),this.initContainer(),this.box_music.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_music]),this.box_sound.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_sound]),this.btn_copy.clickHandler=new Laya.Handler(this,this.onClickHandler,[this.btn_copy]),this.btn_referral.on(Laya.Event.CLICK,this,this.onClickHandler,[this.btn_referral]);for(let r=0;r<this.totalLans.length;r++){var t=this.totalLans[r];this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t])}}onClickHandler(t){switch(t){case this.box_music:this.musicSwitchButton.isLeft=!this.musicSwitchButton.isLeft,Ke.instance.switchMusic(this.musicSwitchButton.isLeft);break;case this.box_sound:this.soundSwitchButton.isLeft=!this.soundSwitchButton.isLeft,Ke.instance.switchSound(this.soundSwitchButton.isLeft);break;case this.btn_referral:ne.intance.openModule(y.InviteRewardDialog);break;case this.btn_copy:{let r=this.inviteUrl;doCopy(r),ee.instance.notice(L.instance.getLanguage(132))}break}}initContainer(){this.musicSwitchButton.isLeft=Ke.instance.m_bPlayMusic,this.soundSwitchButton.isLeft=Ke.instance.m_bPlayeSound,this.currLan=B.instance.m_strLanguage,this.setTab(B.instance.m_strLanguage),this.inviteUrl=Zr.getInviteUrl(),this.label_url.text=qi.shortStr(this.inviteUrl,50)}onClickTab(t){if(this.currLan==t)return;this.currLan=t,this.setTab(t);let r=L.instance.getLanTypeById(t);L.instance.FGM_SetLanguage(r),Ye.instance.reload()}setTab(t){for(let n=0;n<this.totalLans.length;n++){var r=this.totalLans[n];t==r?(this["btn_"+r].getChildByName("btn_yellowBg").visible=!0,this["btn_"+r].getChildByName("Label").color="#213343"):(this["btn_"+r].getChildByName("btn_yellowBg").visible=!1,this["btn_"+r].getChildByName("Label").color="#52a5e0")}}webCopyString(t){let r=t,n=window.document.createElement("textarea");n.value=r,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";let s=window.getSelection(),o=!1;s.rangeCount>0&&(o=s.getRangeAt(0)),window.document.body.appendChild(n),n.select(),n.selectionStart=0,n.selectionEnd=r.length;let l=!1;try{l=window.document.execCommand("copy")}catch(c){console.error(c)}return window.document.body.removeChild(n),o&&(s.removeAllRanges(),s.addRange(o)),l}};dg=N([HT("yJfJZzgZRluE_rgB44yTvg")],dg);var hg=class extends Laya.Box{};var{regClass:UT}=Laya,ka=class extends hg{constructor(){super();this.isAddEvent=!1;this.isReady=!1;this.needChangeAni=!0;this.loop=!0;this.isInited=!1}onEnable(){this.sk=this.box_sk,this.sk.on(Laya.Event.READY,this,this.onSkReady),this.sk.loop=this.loop,console.log("onEnable: + this.animationName： "+this.animationName),this.animationName&&(this.sk.animationName=this.animationName),this.spineTemplet?(this.sk.templet=this.spineTemplet,console.log("onEnable: + this.spineTemplet ")):this.templateUrl?Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(t=>{this.destroyed||(this.sk.templet=t,console.log("this.templateUrl: "+this.templateUrl))}):this.animationName||(this.sk.animationName="animation"),this.isInited=!0}onSkReady(){this.isReady=!0,console.log("onSkReady this.visible: "+this.visible)}play(t,r,n,s,o,l,c){if(!this.isReady){console.log("动画未准备好，不能play");return}this.sk.play(t,r,n,s,o,l,c)}stop(){if(!this.isReady){console.log("动画未准备好，不能stop");return}this.sk.stop()}init(t,r="animation",n=!0){console.log("init: ",r,t),this.animationName=r,this.spineTemplet=t,this.loop=n,this.visible=!0,this.isInited&&(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=this.spineTemplet)}initUrl(t,r="animation",n=!0){console.log("initUrl: ",t),this.animationName=r,this.templateUrl=t,this.loop=n,this.visible=!0,this.isInited&&Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(s=>{this.destroyed||(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=s,console.log("this.templateUrl: "+this.templateUrl))})}onDisable(){Laya.Pool.recover(ka.aniSkPrefab,this),this.box_sk.off(Laya.Event.READY,this,this.onSkReady),this.sk.templet=null}};ka.aniSkPrefab="aniSkPrefab",ka=N([UT("2rJV0EbMT9K2L6-6HOpDHw")],ka);var fg=class extends Laya.Box{};var{regClass:VT}=Laya,gg=class extends fg{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.itemVo=t,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(!this.itemVo)return;let t=this.itemVo.itemItem;if(this.knapsackItem.dataSource=this.itemVo,t?this.disabled=!1:this.disabled=!0,this.img_jiaobiao.visible=!1,this.img_win.visible=!1,this.itemVo.m_iId==Oe.TYPE_QUAN_MNT){var r;this.itemVo.prizeStatus&&(this.itemVo.prizeStatus==2?(this.img_win.visible=!0,r=L.instance.getUILang("Won")):this.itemVo.prizeStatus==1&&(r=L.instance.getUILang("No Won"))),this.itemVo.chainStatus==1?(this.img_jiaobiao.visible=!0,this.img_jiaobiao.skin="res/item/img_chainStatus_2.png",r=L.instance.getUILang("On-Chain")):this.itemVo.lateStatus==1?r=L.instance.getUILang("Expired"):(this.img_jiaobiao.visible=!0,this.img_jiaobiao.skin="res/item/img_chainStatus_1.png",r=L.instance.getUILang("Off-Chain"))}}toDetail(){console.log(this.x),!(!this.itemVo||!this.itemVo.needTip)&&(this.itemVo.type===Bt.TYPE_Equipment||this.itemVo.type===Bt.TYPE_CARD)&&A.intance.event(v.SHOW_EQUIP_TIP,{data:this.itemVo,positionX:this.x})}};gg=N([VT("HYoZb6e-RFKj8fjDKbl-7Q")],gg);var bg=class extends Laya.Box{};var{regClass:zT}=Laya,yg=class extends bg{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.coinItems=t,this.coinItems&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(this.coinItems){var t=this.coinItems[0];this.txt_num.text=ct.filterNumFormat(B.instance.getConsumeValue(this.coinItems[0]),this.coinItems[1],!1,!0),this.img_icon.skin=J.instance.getMoneyIcon(this.coinItems[0]),this.img_add.visible=t!=Oe.TYPE_GOLD}}toDetail(){var t=this.coinItems[0];!this.coinItems||t==Oe.TYPE_GOLD||(console.log(t),re.onGetMoney(t))}};yg=N([zT("NIAfVcg_S72kTvDQGuZ7vA")],yg);var _g=class extends Laya.Dialog{};var{regClass:GT}=Laya,xg=class extends _g{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER}onEnable(){this.initContainer(),Ke.instance.playSoundByName(Ke.soundName32)}initContainer(){var t=Dt.instance.getOneItem();if(t){var r;t instanceof Array?(r=new bt(t[0]),r.newAddCnt=t[1]):r=t,this.showItem(r)}}showItem(t){this.knapsackItem.showAdd=!0,this.knapsackItem.dataSource=t,this.tf_name.text=L.instance.getLanguage(t.itemItem.name)}onDisable(){A.intance.event(v.EVENT_CHECK_REMAIN,y.ItemGetDialog)}};xg=N([GT("tC2uDJDVQMaI41Lys60O5Q")],xg);var vg=class extends Laya.Box{};var{regClass:jT}=Laya,wg=class extends vg{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.itemVo=t,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let t=new bt;if(!this.itemVo)return;this.itemVo.m_iId==Oe.TYPE_QUAN_MNT?(this.tf_quanId.visible=!0,this.tf_quanId.text=this.itemVo.m_iPk):this.tf_quanId.visible=!1;let r=this.itemVo.itemItem;ne.intance.hasOpenView(y.PveChoosePropsDialog)&&(this.txt_num.visible=!1),r?(this.showAdd?this.txt_num.text=""+ct.formatNumber(this.itemVo.newAddCnt,8):this.itemVo.m_iNum?this.txt_num.text=""+ct.formatNumber(this.itemVo.m_iNum,8):this.txt_num.text=""+ct.formatNumber(this.itemVo.newAddCnt,8),this.img_icon.skin=J.instance.getItemIcon(r.icon),this.img_box.skin="gameIcon/items/itemBg/img_"+r.quality+".png"):(this.txt_num.text="",this.img_icon.skin=null,this.img_box.skin="gameIcon/items/itemBg/img_0.png"),this.tf_isSch.visible=this.itemVo.isScholarship}toDetail(){!this.itemVo||!this.itemVo.needTip||(this.itemVo.type===Bt.TYPE_Equipment?ne.intance.openModule(y.EquipDetailDialog,this.itemVo):ne.intance.openModule(y.KnapsackTipDialog,this.itemVo))}};wg=N([jT("LzxJYKybT_m3CJav3RyDmg")],wg);var Lg=class i{constructor(){this.mail_contract=null}static get instance(){return i._instance||(i._instance=new i),i._instance}init(){typeof window.ethereum>"u"||(this.mail_contract=new window.web3.eth.Contract(Ae.BLINDBOX_ABI,Ae.BLINDBOX_ADDRESS))}async initData(){this.mailList=new Ce,Pe.instance.showLoading(!0);let e=await this.mail_contract.methods.getPricesLength().call();for(let t=0;t<e;t++){let r=await this.mail_contract.methods.getPriceByIndex(t).call(),n=new BlindBoxVo;n.type=1,n.idx=t,Object.assign(n,r),this.mailList.set(n.idx,n),n.showPrice=Uo(n.currentPrice+"")}Pe.instance.hideLoading()}async hasFree(){return await this.mail_contract.methods.getIsFreeOpen().call()?!await this.mail_contract.methods.hasFreeHero(te.instance.walletAddress).call():!1}async recruit(e){console.log("成功",66),console.log("失败",66),Pe.instance.showLoading(!0);let t=j.intance.m_dicShops.get(e),r=t.cost[0];try{var n;$.vType==2?n=Ta.id:$.vType==1?n=Ta.id:n=el.id;let p=j.intance.getBuyHeroAddress(n),d=await te.instance.walletClient.getChainId();if(n!==d){var s=await te.instance.switchChain(n);if(!s){this.onEndHeroBuy(),console.log("切换失败，请手动切换");return}d=await te.instance.walletClient.getChainId()}let h=j.intance.getCurrencyAddress(3001);if(!h)return this.onEndHeroBuy(),ee.instance.notice(L.instance.getLanguage(1177,d)),!1;if(!p)return this.onEndHeroBuy(),ee.instance.notice(L.instance.getLanguage(1174,d)),!1;let f=t.cost[1],g=await te.instance.getBalance2(h),E=Uo(f+"");if(parseFloat(g)<parseFloat(E)){this.onEndHeroBuy(),re.moneyNotEnought(r);return}if(console.log("判断授权 tokenAddress: "+h+", chainIDData:"+n),!await te.instance.newAllowanceAddress(p,h))return console.log("未授权"),this.onEndHeroBuy(),ee.instance.notice(L.instance.getLanguage(15)),Pe.instance.hideLoading(),!1;console.log("授权成功 开始购买");var o=await te.instance.walletClient.writeContract({account:te.instance.walletAddress,address:p,abi:Ae.BUY_HERO_ABI,functionName:"mintByTOX",args:[]});console.log("============"+o);let _=await te.instance.publicClient.waitForTransactionReceipt({hash:o});return console.log(`Tx with hash: ${o}`,_),_&&_.status=="success"?(console.log(`Tx successful with hash: ${o}`),o):(this.onEndHeroBuy(),re.TransactionErrorTip(),!1)}catch(p){this.onEndHeroBuy();var l=p.shortMessage;if(l&&l.indexOf("does not match")!=-1){var c=te.instance.getChainName(n);l=L.instance.getLanguage(1172,c)}if(console.log(l),p instanceof U){let d=p.walk(h=>h instanceof Oi);if(d instanceof Oi){let h=d.data?.errorName??"";console.log("============errorName: "+h)}}return null}}waitGetHero(){Laya.timer.loop(2e3,this,this.getHero)}async getHero(){var e=await se.requestPost("wxgame/hero/heroBuyChainCheck",{}).catch(t=>{});e&&e.heroList&&e.heroList.length>0&&(Laya.timer.clear(this,this.getHero),this.onNewAddHero(e.heroList))}onNewAddHero(e){Dt.instance.autoPop=!1,B.instance.herosDataUpdataHandler(e),this.onEndHeroBuy()}onAddHero(e){Dt.instance.autoPop=!1,B.instance.herosDataUpdataHandler(e.reward),e.resChange&&B.instance.moneyInfoHander(e.resChange),e.fightHeroPk&&(B.instance.playerDto.fightHeroPk=e.fightHeroPk),this.onEndHeroBuy()}onEndHeroBuy(){Pe.instance.hideLoading(),A.intance.event(v.EVENT_END_HEROBUY)}async recruit1(e){let t=j.intance.m_dicShops.get(e),r=t.cost[1],n=await te.instance.getBalance(),s=await se.requestPost("wxgame/hero/heroBuy",{shopId:t.id},!0,!0);s?this.onAddHero(s):this.onEndHeroBuy()}async recruitFree(){Pe.instance.showLoading(!0),this.isOpen=await this.mail_contract.methods.getIsOpen().call();let e=await this.hasFree();if(!this.isOpen){Pe.instance.hideLoading(),A.intance.event(v.EVENT_HERO_DRAW_BACK,[L.instance.getLanguage(12)]);return}if(!e){A.intance.event(v.EVENT_HERO_DRAW_BACK,[L.instance.getLanguage(17)]);return}await this.mail_contract.methods.recruitFree().send({from:te.instance.walletAddress},(t,r)=>{if(t){Pe.instance.hideLoading(),A.intance.event(v.EVENT_HERO_DRAW_BACK,[L.instance.getLanguage(16)]);return}})}async ownerHero(e=!1){let t=await se.requestPost("wxgame/hero/heroList",{},!0,!0);B.instance.m_heroData.initData(t.heroList,e),console.log("HERO LIST")}async ownerBag(){let e=await se.requestPost("wxgame/hero/bagList",{},!0,!0);B.instance.m_packageData.initData(e.data),console.log("BAG LIST")}};var Yt=class Yt{constructor(){}static pointEquil(e,t){return e&&t&&e.x==t.x&&e.y==t.y}static isEmpty(e){for(let t in e)return!1;return!0}static showTxtEffect(e,t){let r=parseInt(e.text),n=Math.floor((t-r)/5),s=0;Laya.timer.loop(60,null,o);let o=function(){s++,r+=n,s>=5&&(r=t,Laya.timer.clear(null,o)),e.text=r+""}}static showTxtFlash(e){let t=e.color;e.color=Yt.COLORS[0],Laya.Tween.to(e,{},10,null,Laya.Handler.create(null,r),50);let r=function(){e.color=Yt.COLORS[1],Laya.Tween.to(e,{},10,null,Laya.Handler.create(null,n),50)},n=function(){e.color=Yt.COLORS[0],Laya.Tween.to(e,{},10,null,Laya.Handler.create(null,s),50)},s=function(){e.color=Yt.COLORS[1],Laya.Tween.to(e,{},10,null,Laya.Handler.create(null,o),50)},o=function(){e.color=Yt.COLORS[0],Laya.Tween.to(e,{},10,null,Laya.Handler.create(null,l),50)},l=function(){e.color=Yt.COLORS[1],Laya.Tween.to(e,{},10,null,Laya.Handler.create(null,c),50)},c=function(){e.color=t}}static getProKey(e){return Yt.PRO_DIC[e]?Yt.PRO_DIC[e]:e}static getIconName(e){return Yt.proList[e]}static clonePoint(e){return new Laya.Point(e.x,e.y)}static copyObj(e){let t={};for(let r in e)t[r]=e[r];return t}static mergeObj(e,t){for(let r in t)e[r]?e[r]=parseFloat(e[r])+parseFloat(t[r]):e[r]=t[r];return e}static checkHit(e){return e.visible&&e.mouseX>0&&e.mouseY>0&&e.mouseX<=e.width&&e.mouseY<=e.height}static separateObj(e,t){if(t)for(let r in t)e[r]&&(e[r]=parseFloat(e[r])-parseFloat(t[r]));return e}static toFixed(e,t=1){if((e+"").indexOf(".")!=-1){let r=parseFloat(e).toFixed(t);return t==1&&r.charAt(r.length-1)=="0"&&(r=parseInt(r)+""),r}return e+""}static formatResWith(e){return e>=1e12?Math.floor(e/1e12)+Yt.RES_W[3]:e>=1e9?Math.floor(e/1e9)+Yt.RES_W[2]:e>=1e6?Math.floor(e/1e6)+Yt.RES_W[1]:e>=1e4?Math.floor(e/1e3)+Yt.RES_W[0]:e+""}static formatNumWithSign(e,t=","){e=Math.floor(e);let r=e+"",n=1,s=[];for(let o=r.length-1;o>=0;o--)s.push(r.charAt(o)),n>0&&n%3==0&&s.push(t),n++;return s.reverse(),s[0]==t&&s.shift(),s.join("")}static autoRecyle(e,t=!1){e.on(Laya.Event.COMPLETE,null,r,[e]),e.isPlaying||e.play(1,!1);let r=function(n){n.off(Laya.Event.COMPLETE,null,r),n.stop(),n.removeSelf(),t&&Laya.Pool.recover("Animation",n)}}static createEllipse(e,t,r,n,s,o=1,l="#ffffff"){let c=[],p=n>s?o/n:o/s;for(let d=0;d<2*Math.PI;d+=p)c.push(t+n*Math.cos(d)-n/2,r+s*Math.sin(d));return e&&e.drawPoly(c.shift(),c.shift(),c,l),c}};Yt.blackFilter=new Laya.ColorFilter([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.78,0]),Yt.blackFilter2=new Laya.ColorFilter([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5,0]),Yt.qualityColors=["#78cefd","#89e47a","#78cefd","#d5a8ff","#fdd378","#ffa8a8","#ffa8a8","#ffa8a8"],Yt.noColors=["#7efcc5","#7efbfc","#acfffa","#c1c5ff","#ffcdcd","#ecceff","#fff5bd","#ffcee3","#ffdcbd","#f0ffc4"],Yt.COLORS=["#69ff4c","#FFFFFF"],Yt.PRO_DIC={HP:"hp",ATK:"attack",DEF:"defense",SPEED:"speed",RES:"resilience",CDMG:"critDamage",CDMGR:"critDamReduct"},Yt.proList={hp:"HP",attack:"ATK",defense:"DEF",speed:"SPEED",hit:"hit",dodge:"dodge",crit:"crit",critDamage:"CDMG",resilience:"RES",critDamReduct:"CDMGR"},Yt.RES_W=["K","M","B","T"];var ar=Yt;var Ig=class extends Laya.Scene{};var{regClass:WT}=Laya,Eg=class extends Ig{constructor(){super(...arguments);this.subBagInfo=null;this.subType=null;this.selectId=null;this.currTab=0;this.quanTabIndex=7;this.totalSubTab=4;this.needRefresh=!1;this.type=1;this.totalTab=8;this.items=[];this.hasItem=!1;this.nftTabIndex=1}onAwake(){this.m_iLayerType=pe.M_POP,this.m_iPositionType=pe.UP,this.listPanel1.visible=!1}onOpened(t){t&&t[0]&&(this.type=t[0]||1,this.subType=t[1]),this.initLuckDrawView()}onEnable(){this.nomalY=this.list_btn.y,A.intance.on(v.EVENT_REFRESH_KNAPSACK,this,this.onRefreshKnapsack),A.intance.on(v.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan);for(let r=1;r<this.totalTab;r++)this["btn_"+r].on(Laya.Event.CLICK,this,this.onClickTab,[r]);for(let r=1;r<=this.totalSubTab;r++)this["tab_nft_"+r].on(Laya.Event.CLICK,this,this.onNftTabClick,[r]);this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.listPanel1.vScrollBarSkin="",this.listPanel1.selectHandler=Laya.Handler.create(this,this.onSelectItem,null,!1),this.box_show.visible=!1,this.box_2.visible=!1;let t=(Laya.stage.height-$.DESIGN_HEIGHT)/2}setTab(t){for(let r=1;r<this.totalTab;r++)t==r?(this["btn_"+r].getChildByName("selectBox").visible=!0,this["btn_"+r].getChildByName("tf_txt").color="#143f6b"):(this["btn_"+r].getChildByName("selectBox").visible=!1,this["btn_"+r].getChildByName("tf_txt").color="#7ff1fe")}async initLuckDrawView(){await Lg.instance.ownerBag(),!this.destroyed&&(this.type?this.onClickTab(this.type):this.onClickTab(1))}async onClickTab(t){if(!(!this.needRefresh&&this.currTab==t)&&(this.setTab(t),this.type=t,this.box_2.visible=!0,!this.destroyed))if(t==this.quanTabIndex)this.onNftTabClick(1);else{var r=await this.getItemByType(t);this.onSetData(r)}}async onSetData(t){if(this.listPanel1.array=t,this.listPanel1.visible=!0,this.selectId!==null){let r=this.getIndexById(t);this.listPanel1.selectedIndex=r,this.selectId=null}else this.listPanel1.selectedIndex=-1,this.hasItem&&(this.listPanel1.selectedIndex=0)}async getItemByType(t,r=1){this.items=[],this.hasItem=!1;var n;if(t==this.quanTabIndex){if(this.hengTabBox.visible=!0,n=await B.instance.m_packageData.getQuan(r),this.nftTabIndex!=r)return}else this.hengTabBox.visible=!1,n=B.instance.m_packageData.getBackByType(t);if(t==2){if(!this.subBagInfo){let d=(await se.requestPost("wxgame/lease/bag",{})).list,h={};for(let f of d)f.ticketId in h?h[f.ticketId]+=f.ticketCount:h[f.ticketId]=f.ticketCount;this.subBagInfo=Object.keys(h).map(f=>({ticketId:f,ticketCount:h[f]}))}if(this.subBagInfo)for(let p=0;p<this.subBagInfo.length;p++){let d=this.subBagInfo[p];if(d.ticketCount){var s=new bt(d.ticketId);s.newAddCnt=d.ticketCount,s.isScholarship=!0,console.log(s),n.push(s)}}console.log(this.subBagInfo)}this.subType!==null&&t==5&&(n=n.filter(p=>p.subType==this.subType));for(var o=n.length>30?n.length:30,l=0;l<o;l++){var c=n[l];c?(l==0&&(this.hasItem=!0),this.items.push(c)):this.items.push(new bt(0))}return this.items}getIndexById(t){return t.findIndex(n=>n.m_iId==this.selectId)||0}onSelectItem(t,r){if(this.itemVo=this.items[t],this.tf_des.visible=!1,this.tf_des2.visible=!1,console.log(this.itemVo),this.itemVo){let c=this.itemVo.itemItem;if(!c)return;if(this.img_icon.skin=J.instance.getItemIcon(c.icon),this.tf_name.text=L.instance.getLanguage(c.name),this.itemVo.m_iId==Oe.TYPE_QUAN_MNT){this.tf_quanId.visible=!0,this.tf_expTime.visible=!0,this.tf_quanId.text=this.itemVo.m_iPk,this.tf_expTime.text=L.instance.getLanguage(1802)+": "+Mt.formatTimeStamp(this.itemVo.expTime);var n;this.itemVo.prizeStatus?this.itemVo.prizeStatus==2?n=L.instance.getUILang("Won"):this.itemVo.prizeStatus==1&&(n=L.instance.getUILang("No Won")):this.itemVo.chainStatus==1?n=L.instance.getUILang("On-Chain"):this.itemVo.lateStatus==1?n=L.instance.getUILang("Expired"):n=L.instance.getUILang("Off-Chain"),this.tf_status.text=n,this.tf_status.visible=!0}else this.tf_expTime.visible=!1,this.tf_quanId.visible=!1,this.tf_status.visible=!1;if(c.type==Bt.TYPE_Equipment){this.img_att.visible=!0,this.tf_des.text="",this.box_show.visible=!1,this.box_show2.visible=!0,this.tf_name2.text=L.instance.getLanguage(c.name),this.knapsackItem.dataSource=this.itemVo;let p=this.itemVo.itemItem.id;this.tf_name2.color=ar.qualityColors[c.quality-1],this.tf_grade.color=ar.qualityColors[this.itemVo.itemItem.quality-1],this.tf_grade.text=L.instance.getUILang(`Quality_${this.itemVo.itemItem.quality}:`);let d=j.intance.getEquipDataById(p);if(d){this.tf_part.text=L.instance.getUILang(`Part_${d.type}:`);let h=d.attribute;this.list_attrs.array=h;let f=j.intance.getEquipSuitDataById(p);if(f&&f.skill){let g=f.skill;var s=j.intance.m_dicSkills.get(g);this.skillListItem.dataSource=s,this.skillListItem.visible=!0,this.img_skill.visible=!0}else this.skillListItem.visible=!1,this.img_skill.visible=!1}this.list_btn.y=this.nomalY+50}else if(c.type==Bt.TYPE_CARD){this.img_skill.visible=!0,this.img_att.visible=!1,this.tf_des2.visible=!0;let d=j.intance.getArrFromDicItemByKey("id",c.id)[0];this.box_show.visible=!1,this.box_show2.visible=!0,this.tf_des2.text=L.instance.getLanguage(d.des),this.tf_name2.text=L.instance.getLanguage(c.name),this.tf_name2.color=ar.qualityColors[c.quality-1],this.knapsackItem.dataSource=this.itemVo,this.tf_grade.color=ar.qualityColors[this.itemVo.itemItem.quality-1],this.tf_grade.text=L.instance.getUILang(`Quality_${this.itemVo.itemItem.quality}:`),this.tf_part.text=L.instance.getUILang(`Part_${d.type}:`);let h=d.attribute;this.list_attrs.array=h;let f=d.skillId;if(f){var s=j.intance.m_dicSkills.get(f);this.skillListItem.dataSource=s,this.skillListItem.visible=!0}else this.skillListItem.visible=!1;this.list_btn.y=this.nomalY+50}else this.img_skill.visible=!1,this.tf_des.visible=!0,this.tf_des.text=L.instance.getLanguage(c.des),this.box_show.visible=!0,this.box_show2.visible=!1,this.tf_name.text=L.instance.getLanguage(c.name),this.list_btn.y=this.nomalY;var o=c.use,l=[];o&&o.forEach(p=>{if(p==1){var d=!1,h=!1;this.itemVo.subType==8&&B.instance.playerDto.unionLeader!=1||(d=!0),this.itemVo.subType==7&&(h=!1),d&&l.push([p,this.itemVo,h])}else if(p==2){var d=!1,h=!1;if(c&&c.effect.length==2)var f=c.effect[0][0],g=c.effect[0][1],E=B.instance.m_packageData.getCountById(f),h=g>E;l.push([p,this.itemVo,h])}else if(p==3){var h=!1;l.push([p,this.itemVo,h])}else if(p==6){var h=!1,I=B.instance.m_serverTime;if(this.itemVo.chainStatus==1||I>this.itemVo.expTime)var h=!0;l.push([p,this.itemVo,h])}}),this.list_btn.array=l,this.list_btn.visible=!0}else this.list_btn.visible=!1,this.img_icon.skin=null,this.tf_name.text="",this.tf_des.text="",this.box_show.visible=!1,this.box_show2.visible=!1}setToMainScene(){ze.intance.setCurrentScene(oe.M_SCENE_MAIN)}stopAni(t){console.log("stopAni: "+t)}async onRefreshQuan(){this.onRefreshKnapsack(null),ee.instance.notice(L.instance.getLanguage(2e3))}async onRefreshKnapsack(t){this.needRefresh=!0,t&&(this.selectId=t),await this.initLuckDrawView(),this.needRefresh=!1}removeEvent(){A.intance.off(v.EVENT_REFRESH_KNAPSACK,this,this.onRefreshKnapsack),A.intance.off(v.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan)}onRisingStar(){ne.intance.openModule(y.EquipStarUpDialog,this.itemVo)}onNftTabClick(t){for(let r=1;r<=this.totalSubTab;r++)t==r?(this["tab_nft_"+r].getChildByName("img").skin="res/shop/img_com_tab (2).png",this["tab_nft_"+r].getChildByName("tf_tit").color="#ffffff",this.getNftDataByIndex(t)):(this["tab_nft_"+r].getChildByName("img").skin="",this["tab_nft_"+r].getChildByName("tf_tit").color="#84ccff")}async getNftDataByIndex(t){this.nftTabIndex=t;var r=await this.getItemByType(this.quanTabIndex,t);!r||this.nftTabIndex!=t||this.onSetData(r)}};Eg=N([WT("6IPqO9JvTmygjIZQXMwq2A")],Eg);var Sg=class extends Laya.Dialog{};var{regClass:KT}=Laya,Tg=class extends Sg{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER}setOpenData(t){t&&(this.itemVo=t)}onEnable(){this.item.dataSource=this.itemVo;let t=this.itemVo.itemItem;this.tf_name.text=L.instance.getLanguage(t.name),this.txt_type.text=L.instance.getLanguage(6060)+L.instance.getLanguage(t.type),this.txt_desc.text=L.instance.getLanguage(t.des)}removeEvent(){}};Tg=N([KT("or8jNdIhRpSbAG2JBhH-wA")],Tg);var kg=class extends Laya.Dialog{};var{regClass:$T}=Laya,Ag=class extends kg{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER}onEnable(){Ke.instance.playSoundByName(Ke.soundName32)}setOpenData(t){t&&(this.reward=t);var r=[],n=this.reward;n.forEach(p=>{if(p.id&&p.id>0){var d=new bt(p.id);d.newAddCnt=p.count,p.id==3011&&(d.itemItem.icon=p.id),r.push(d)}});var s=this.list_reward.spaceX,o=this.list_reward.itemTemplate.width,l=r.length;this.list_reward.repeatX=l;var c=l*o+s*(l-1);this.list_reward.width=c,this.list_reward.x=this.width-c>>1,this.list_reward.array=r}};Ag=N([$T("xwYUFnd4S3uJGIJSjjbRag")],Ag);var Cg=class extends Laya.Box{};var{regClass:qT}=Laya,Rg=class extends Cg{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_transfer.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){if(super.dataSource=t,!!t){this.useType=t[0],this.useType==1?this.btn_transfer.label=L.instance.getUILang("Transfer"):this.useType==2?this.btn_transfer.label=L.instance.getUILang("Combine"):this.useType==3?this.btn_transfer.label=L.instance.getUILang("Rising star"):this.useType==6&&(this.btn_transfer.label=L.instance.getUILang("To Chain")),this.itemVo=t[1];var r=t[2];this.btn_transfer.disabled=r,this.addEvent()}}async toDetail(){if(this.useType)if(this.useType==1)this.itemVo.subType==8?ne.intance.openModule(y.UnionTransferView,this.itemVo):this.itemVo.subType==7||this.itemVo.subType==11?ne.intance.openModule(y.TicketTransferView,this.itemVo):ne.intance.openModule(y.TicketTransferView,this.itemVo);else if(this.useType==2){var t=await se.requestPost("wxgame/equip/composition",{id:this.itemVo.m_iId});t&&t.equipData?(ne.intance.openModule(y.RewardGetDialog,[t.equipData]),A.intance.event(v.EVENT_REFRESH_KNAPSACK)):ee.instance.notice(L.instance.getLanguage(135))}else this.useType==3?ne.intance.openModule(y.EquipStarUpDialog,this.itemVo):this.useType==6&&this.onClaim()}async onClaim(){var t=B.instance.m_serverTime;if(t>this.itemVo.expTime){ee.instance.notice(L.instance.getUILang("Expired"));return}var r=1,n=this.itemVo.m_iPk}onClaimed(){this.btn_transfer.disabled=!0}};Rg=N([qT("vkadzuILSDikVEPYvNZKcQ")],Rg);var Mg=class extends Laya.Box{};var{regClass:YT}=Laya,Dg=class extends Mg{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER}onEnable(){console.log("OpenScene onEnable："+this.m_strName)}getName(){console.log(this.m_strName)}onDisable(){}};Dg=N([YT("sQS5mrqRQLWcBk-SgfBGJw")],Dg);var Bg=class extends Laya.Box{};var{regClass:XT}=Laya,Pg=class extends Bg{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.check_coin.on(Laya.Event.CLICK,this,this.onCheck),this.isAddEvent=!0)}set dataSource(t){if(super.dataSource=t,!t)return;this.addEvent();let r=t;this.check_coin.selected=r[1],this.tf_coin.text=r[2]}onCheck(){this._dataSource[1]=this.check_coin.selected,A.intance.event(v.EVENT_CHECK_ICON_SELECT)}};Pg=N([XT("UTGHsPbQS6C5FohXv8T25Q")],Pg);var Og=class extends Laya.Scene{};var Ng=class i{constructor(){this._inited=!1}static getInstance(){return i._instance||(i._instance=new i),i._instance}init(){this._inited||(this._inited=!0)}};var Fg=class{constructor(){this.connectAddr="ws://175.27.154.72:10001";this.groupApplyList=[];this.groupData=[];this.watch=[]}};var{regClass:QT}=Laya,Vs=class extends Og{constructor(){super(...arguments);this.isAnimationRunning=!1;this.currIconAni=1}onAwake(){this.m_iLayerType=pe.M_POP,this.m_iPositionType=pe.UP,Ng.getInstance().init(),this.initSpineEvent()}async onOpened(t){this.startBackgroundAnimation(),this.mouseThrough=this.mouseThrough=!0,this.headBox.mouseThrough=!0;let r=this.getChildByName("mcMain");r&&(r.mouseThrough=!0),this.btn_fullScreen.visible=!1,this.updateTopInfo();var n=Laya.stage.width-$.DESIGN_WIDTH>>1;if(this.leftX=this.leftMenu.x,this.rightX=this.rightMenu.x,this.initBtnLanguage(),Ye.instance.sendCustumEvent(34),Vs.M_B_FIRST_Open&&$.bookingId&&$i.instance.goBookingCreateRoomDialog($.bookingId,$.teamId),Vs.M_B_FIRST_Open=!1,!!B.instance.playerDto){var o=null;showChatBtn(!0,te.instance.walletAddress,o),this.refreshHeadRed(),this.refreshRankRed(),this.refreshIGORed(),this.refreshWheelRed()}}startBtnAni(){this.currIconAni>5&&(this.currIconAni=1),this["spine_"+this.currIconAni].play(0,!1),this["spine_"+this.currIconAni].visible=!0,this.currIconAni++,Laya.timer.once(2e3,this,this.startBtnAni)}changeMailFlag(){}updateTopInfo(){let t=B.instance.playerDto;if(!t)return;this.tf_roleName.text=t.name,t.needTip=!0,this.playerIcon.dataSource=t,this.changeMailFlag();let r=new Date(B.instance.m_serverTime);console.log("server time toLocaleString："+r.toLocaleString()),console.log("server time offset date："+B.instance.timeZoneOff/60/60),this.updateLocalAssets()}onGetRoleInfo(t,r){if(r==X.snake.socket.MessageCode.SYS_NORMAL){var n=t.roleInfo;console.log("玩家信息",n)}}requestAssets(){A.intance.event(v.UPDATE_ASSETS)}async updataBalence(){await te.instance.getBalance()}async updateAssets(){await Ln.instance.updateAssetsBalance()}updateLocalAssets(){this.tf_3005.text=ct.filterNumFormat(B.instance.getConsumeValue(Oe.TYPE_GOLD),0)}onEnable(){for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);Laya.timer.loop(1e3,this,this.refreshRoomTime),this.playerIcon.on(Laya.Event.CLICK,this,this.onClickHead),this.btn_shop.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_shop]),this.btn_guild.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_guild]),this.btn_lcPool.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_lcPool]),A.intance.on("msg_"+X.snake.socket.MessageType.MSG_REQUEST_INFO,this,this.onGetRoleInfo),this.btn_backpack.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_backpack]),this.btn_asset.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_asset]),this.btn_scholarshop.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_scholarshop]),this.btn_leaderboard.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_leaderboard]),this.btn_social.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_social]),this.btn_mail.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_mail]),this.btn_activities.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_activities]),this.btn_chat.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_chat]),this.btn_igo.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_igo]),this.btn_swap.on(Laya.Event.CLICK,this,this.onbtnSwap),this.btn_setting.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_setting]),this.btn_fullScreen.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_fullScreen]),A.intance.on(v.UPDATE_RED_STATE_EVENT,this,this.changeMailFlag),A.intance.on(v.ROLE_INFO_CHANGE,this,this.updateTopInfo),A.intance.on(v.UPDATE_ASSETS,this,this.updateAssets),A.intance.on(v.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),A.intance.on("CHANG_NAME",this,this.changeName),A.intance.on("open_buy",this,this.openBuyDialog),A.intance.on("msg_173",this,this.onFirstRecharge),A.intance.on("msg_"+X.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR,this,this.onRequestRoomAddr),A.intance.on(v.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),this.initBtnBox(),this.box_Tele1.on(Laya.Event.CLICK,this,this.onBtnTele,[1]),this.box_Tele2.on(Laya.Event.CLICK,this,this.onBtnTele,[2]),this.box_Tele3.on(Laya.Event.CLICK,this,this.onBtnTele,[3]),this.box_Tele4.on(Laya.Event.CLICK,this,this.onBtnTele,[4]),this.btn_LiveChat.on(Laya.Event.CLICK,this,this.onBtnLiveChat,[4]),A.intance.on(v.REFRESH_MAINSCENE_HEAD_RED,this,this.refreshHeadRed),A.intance.on(v.REFRESH_ACTIVITY_RED,this,this.refreshRankRed),A.intance.on(v.REFRESH_IGO_RED,this,this.refreshRankRed),A.intance.on(v.REFRESH_ACTIVITY_RED,this,this.refreshIGORed),A.intance.on(v.REFRESH_WHEEL_RED,this,this.refreshWheelRed)}async onbtnSwap(){re.onOpenSwapView()}onClickTab(t){if(t==1){var r=X.snake.socket.MessageType.MSG_REQUEST_ROOM_ADDR,n=X.snake.socket.CS_REQUEST_ROOM_ADDR.fromObject({type:1});si.send(r,n)}}onRequestRoomAddr(t,r){if(r==X.snake.socket.MessageCode.SYS_NORMAL){var n=t.addr;console.log("onRequestRoomAddr: "+n),n&&(n=n.split("-")[0]);var s=new Fg;s.connectAddr=n,Le.instance.roomDto=s,kt.instance.initSocket()}}refreshRoomTime(){this.refreshRoomBtnRed()}refreshRoomBtnRed(){this.img_red_1.visible=B.instance.getRedDotById(Lt.instance.ROOM_1_1)||B.instance.getRedDotById(Lt.instance.ROOM_1_2)||B.instance.getRedDotById(Lt.instance.ROOM_1_3)||B.instance.getRedDotById(Lt.ROOM_PRE_CONTRACT)||B.instance.getRedDotById(Lt.ROOM_PRE_CONTRACT_SELF),this.img_red_2.visible=B.instance.getRedDotById(Lt.instance.ROOM_2_1)||B.instance.getRedDotById(Lt.instance.ROOM_2_2)||B.instance.getRedDotById(Lt.instance.ROOM_2_3),this.Img_social.visible=B.instance.getRedDotById(Lt.ROOM_FRIEND_APPLY),this.red_mail.visible=B.instance.getRedDotById(Lt.ROOM_MAIL)||B.instance.getRedDotById(Lt.MAIL_ANNOUNCE_RED),this.red_guild.visible=B.instance.getRedDotById(Lt.RED_GUILD_APPLY)}refreshHeadRed(){this.img_headRed.visible=B.instance.getRedDotById(Lt.RED_ACTIVITY1)||B.instance.getRedDotById(Lt.RED_ACTIVITY2)||B.instance.getRedDotById(Lt.RED_ACTIVITY3)}refreshRankRed(){this.img_rankRed&&(this.img_rankRed.visible=B.instance.getRedDotById(Lt.RED_EVERY_RANK_TOTAL)||B.instance.getRedDotById(Lt.RED_EVERY_RANK_PRE)||B.instance.getRedDotById(Lt.RED_EVERY_RANK_AIR)||B.instance.getRedDotById(Lt.RED_EVERY_RANK_TRA)||B.instance.getRedDotById(Lt.PRO_RANK_DAY_FIGHT_1)||B.instance.getRedDotById(Lt.PRO_RANK_DAY_FIGHT_2)||B.instance.getRedDotById(Lt.PRO_RANK_DAY_FIGHT_3)||B.instance.getRedDotById(Lt.PRO_RANK_DAY_FIGHT_4))}refreshIGORed(){this.img_igored&&(this.img_igored.visible=B.instance.getRedDotById(Lt.RED_IGO))}refreshWheelRed(){this.img_wheelRed&&(this.img_wheelRed.visible=B.instance.getRedDotById(Lt.RED_WHEEL))}onFirstRecharge(t){}initBtnBox(){this.sortIconView()}sortIconView(){}initSpineEvent(){this.initSpineLoadEvent(this.AniSk_shop,this.btn_shop),this.initSpineLoadEvent(this.AniSk_backpack,this.btn_backpack),this.initSpineLoadEvent(this.AniSk_asset,this.btn_asset),this.initSpineLoadEvent(this.AniSk_rank,this.btn_rank),this.initSpineLoadEvent(this.AniSk_guild,this.btn_guild),this.initSpineLoadEvent(this.AniSk_btn1,this.btn_1),this.initSpineLoadEvent(this.AniSk_btn2,this.btn_2)}async onclickBtnHandler(t){switch(t){case this.btn_shop:ze.intance.setCurrentScene(oe.M_SCENE_SHOP);break;case this.btn_backpack:ze.intance.setCurrentScene(oe.M_SCENE_KNAPSACK);break;case this.btn_social:{ze.intance.setCurrentScene(oe.M_SCENE_FRIEND);break}case this.btn_mail:ze.intance.setCurrentScene(oe.M_SCENE_MAIL);break;case this.btn_lcPool:ze.intance.setCurrentScene(oe.M_SCENE_LCPOOL);break;case this.btn_guild:B.instance.playerDto.union>0?ze.intance.setCurrentScene(oe.M_SCENE_MYUNION,B.instance.playerDto.union):ze.intance.setCurrentScene(oe.M_SCENE_UNION);break;case this.btn_setting:ne.intance.openModule(y.GameSettingLanguageDialog);break;case this.btn_fullScreen:re.fullScreen(!re.isFullScreen);break;case this.btn_asset:ze.intance.setCurrentScene(oe.M_SCENE_ASSET);break;case this.btn_scholarshop:ze.intance.setCurrentScene(oe.M_SCENE_SHOLARSHIP);break;case this.btn_chat:this.Img_tele.visible||(this.Img_tele.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList));break;case this.btn_leaderboard:ze.intance.setCurrentScene(oe.M_SCENE_RANK);break;case this.btn_igo:ze.intance.setCurrentScene(oe.M_SCENE_IGO_PAGE);break;case this.btn_activities:ze.intance.setCurrentScene(oe.M_SCENE_DAILY_TASK);break;default:ee.instance.notice(L.instance.getLanguage(12));break}}openBuyDialog(t){switch(parseInt(t)){case 3:this.buyGoldBtn();break;case 4:this.clickRecharge();break}}onHideList(){this.Img_tele.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList)}clickRecharge(){if($.m_bInstantGame==!0){let t=L.instance.getLanguage(500004);gt.instance().AlertByType(me.BASEALERTVIEW,t,me.YES);return}A.intance.event(v.EVENT_OPEN_MODULE,[y.RechargeDialog])}changeName(t){}async onClickHead(){ze.intance.setCurrentScene(oe.M_SCENE_ROLE)}buyGoldBtn(){A.intance.event(v.EVENT_OPEN_MODULE,[y.GetMoreDialog])}onDisable(){this.stopBackgroundAnimation(),this.destroySpineEventListeners(),this.destroySpineAnimations(),A.intance.off(v.UPDATE_RED_STATE_EVENT,this,this.changeMailFlag),A.intance.off(v.ROLE_INFO_CHANGE,this,this.updateTopInfo),A.intance.off(v.UPDATE_ASSETS,this,this.updateAssets),A.intance.off(v.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),A.intance.off("CHANG_NAME",this,this.changeName),A.intance.off("open_buy",this,this.openBuyDialog),A.intance.off("msg_173",this,this.onFirstRecharge),A.intance.off(v.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),A.intance.off(v.REFRESH_MAINSCENE_HEAD_RED,this,this.refreshHeadRed),A.intance.off(v.REFRESH_ACTIVITY_RED,this,this.refreshIGORed),A.intance.off(v.REFRESH_WHEEL_RED,this,this.refreshWheelRed),A.intance.offAllCaller(this),Laya.Tween.clearAll(this),Laya.timer.clearAll(this),showChatBtn(!1)}destroySpineAnimations(){for(let t=1;t<8;t++){let r=this["spine_"+t];r&&(r.stop(),r.removeSelf())}}onEnterMatchRoom(t){t?Laya.timer.once(2e3,this,this.startBtnAni):Laya.timer.clear(this,this.startBtnAni)}onBtnTele(t){let r=j.intance.getOtcTelegrams(t),n=r.telegram;r&&($.isInto?(doCopy(n),ee.instance.notice(L.instance.getLanguage(1552))):window.open(n,"_blank"))}onBtnLiveChat(){doChatMax()}initBtnLanguage(){}startBackgroundAnimation(){!this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!0,Fs.startCircleAnimation(this.bgAni,Laya.stage.width/2,Laya.stage.height/2,30,3500,!0,0,null))}stopBackgroundAnimation(){this.isAnimationRunning&&this.bgAni&&(this.isAnimationRunning=!1,Fs.stopCircleAnimation(this.bgAni))}onSpineReady(t){if(!t){console.warn("Button component is null in onSpineReady");return}t.skin=""}getSpineNode(t){return t?t.box_sk?t.box_sk:(console.warn("Spine skeleton node is null in AniSk component"),null):(console.warn("AniSk component is null"),null)}initSpineLoadEvent(t,r){if(!t||!r){console.warn("Invalid parameters in initSpineLoadEvent");return}let n=this.getSpineNode(t);n&&(n.off(Laya.Event.READY,this,this.onSpineReady),n.on(Laya.Event.READY,this,this.onSpineReady,[r]))}destroySpineEventListeners(){[{anisk:this.AniSk_shop,button:this.btn_shop},{anisk:this.AniSk_backpack,button:this.btn_backpack},{anisk:this.AniSk_asset,button:this.btn_asset},{anisk:this.AniSk_rank,button:this.btn_rank},{anisk:this.AniSk_guild,button:this.btn_guild},{anisk:this.AniSk_btn1,button:this.btn_1},{anisk:this.AniSk_btn2,button:this.btn_2}].forEach(({anisk:r,button:n})=>{if(r&&n){let s=this.getSpineNode(r);s&&s.off(Laya.Event.READY,this,this.onSpineReady)}})}};Vs.M_B_FIRST_Open=!0,Vs=N([QT("pxhiJrX5SkKKvyFr8uIlNA")],Vs);var Xn=class{constructor(){}};Xn.GREEN="#2ac84b",Xn.YELLOW="#e8c833",Xn.RED="#e04343";var Hg=class extends Laya.Box{};var{regClass:ZT}=Laya,Ug=class extends Hg{constructor(){super();this.isAddEvent=!1}onEnable(){A.intance.on(v.EVENT_Game_Delay,this,this.onGameDelay)}onGameDelay(t){var r=j.intance.getGeneralValueById(6),n=r[0],s=r[1];this.tf_delay.text=t+"ms",t>s?(this.img_delay.skin="res/common/comm/img_com_xinhao3.png",this.tf_delay.color=Xn.RED):t>n?(this.img_delay.skin="res/common/comm/img_com_xinhao2.png",this.tf_delay.color=Xn.YELLOW):(this.img_delay.skin="res/common/comm/img_com_xinhao1.png",this.tf_delay.color=Xn.GREEN)}onDisable(){A.intance.off(v.EVENT_Game_Delay,this,this.onGameDelay)}};Ug=N([ZT("AhgzWGWoRFetvSMsEOSkSg")],Ug);var Vg=class extends Laya.Box{};var{regClass:JT}=Laya,zg=class extends Vg{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.playerDto=t,this.playerDto&&(this.addEvent(),this.setCurrentOutPut())}set headSkin(t){parseInt(t)>0?this.img_head.skin=J.instance.getPlayerIcon(t):this.setImage(t)}async setCurrentOutPut(){if(!this.playerDto)return;let t=this.playerDto.icon;parseInt(t)>0?this.img_head.skin=J.instance.getPlayerIcon(t):this.setImage(t)}setImage(t){this.clearImage();var r=this;Laya.loader.load(t,Laya.Handler.create(this,()=>{r.destroyed||(this.img_head.skin=t)}),null,Laya.Loader.IMAGE,-1,!0,"1111",!1,!1)}clearImage(){this.img_head&&(this.img_head.texture=null)}destroy(t=!0){this.clearImage(),super.destroy(t)}toDetail(){!this.playerDto||this.playerDto.needTip}};zg=N([JT("OPT5t2CoSmuYp2zUJWwUWA")],zg);var Gg=class extends Laya.Box{};var{regClass:e2}=Laya,xi=class extends Gg{init(e,t,r=28){var n,s;switch(e!=0?(s=Qe.getRandInRound(-30,30),t?n=xi.TYPE_Critical:n=xi.TYPE_Normal):(s=Qe.getRandInRound(-30,30),n=xi.TYPE_Miss),t?this.pos(s,-180):this.pos(s,-110),this.alpha=1,this.scale(1,1),this.tf_damage.visible=!1,this.box_crit.visible=!1,this.img_miss.visible=!1,n){case xi.TYPE_Normal:this.tf_damage.text="+"+e,this.showNormalDamageEffect();break;case xi.TYPE_Critical:this.fontClip_damage.value="Kill +"+e,this.showCriticalDamageEffect();break;case xi.TYPE_Miss:this.showMissEffect();break;default:break}}showNormalDamageEffect(){this.tf_damage.visible=!0,Laya.Tween.to(this,{y:this.y-50,alpha:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,this.onComplete))}showCriticalDamageEffect(){this.box_crit.visible=!0,this.scale(.2,.2),Laya.Tween.to(this,{scaleX:1.3,scaleY:1.3,alpha:1,y:this.y-70},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1,alpha:0},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.onComplete()}))}))}showMissEffect(){this.img_miss.visible=!0,Laya.Tween.to(this,{y:this.y-50,alpha:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.onComplete()}))}onComplete(){this.removeSelf()}onDisable(){Laya.Pool.recover("damageNumber",this)}};xi.WHITE="#FFFFFF",xi.ORANGE="#FFA500",xi.RED="#FF0000",xi.GREEN="#119c09",xi.BLUE="#78cefd",xi.TYPE_Normal="Normal",xi.TYPE_Miss="Miss",xi.TYPE_Critical="Critical",xi=N([e2("nHp6WKzZRIWvyhguidEfqg")],xi);var jg=class extends Laya.Dialog{};var{regClass:t2}=Laya,Wg=class extends jg{constructor(){super()}onEnable(){this.list.visible=!1;var e=Le.instance.msgEndbody,t=e.token;this.list.renderHandler=new Laya.Handler(this,(r,n)=>{r.setDataIndex(n)}),this.list.array=t,this.list.visible=!0,!t||t.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}onDisable(){}};Wg=N([t2("JH3DtUPTS_2FR6dTzhLHMw")],Wg);var Kg=class extends Laya.Box{};var{regClass:i2}=Laya,$g=class extends Kg{constructor(){super()}addEvent(){}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.setData(e),this.addEvent()}setData(e){var t=e.split(","),r=t[1],n=t[2],s=t[3],o=t[4];this.tf_time.text=Mt.formatTimeStamp(Number.parseFloat(t[0]),"HH:MM:SS"),this.img_country.skin=J.instance.getCountryIcon(r),this.tf_nickName.text=n;let l=j.intance.m_dicItems.get(s),c=L.instance.getLanguage(l.name);this.tf_token.text=o+" "+c}setDataIndex(e){this.bg.skin=e%2===0?"res/common/comm/img_wzbg_1.png":"res/common/comm/img_wzbg_2.png"}};$g=N([i2("po6_Uf6sTlaC-xEazLOk5Q")],$g);var qg=class extends Laya.Dialog{};var{regClass:r2}=Laya,Yg=class extends qg{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_PANEL;this.m_iPositionType=pe.CENTER;this.groupId=0;this.states=[Te.MATCHEND_REWARD]}onEnable(){Ke.instance.playSoundByName(Ke.soundName_win),this.btn_next.on(Laya.Event.CLICK,this,this.onNext),this.btn_home.on(Laya.Event.CLICK,this,this.setToAirdropScene),this.btn_help.on(Laya.Event.CLICK,this,this.onNext),A.intance.on(v.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan),Ye.instance.sendCustumEvent(43)}onHelp(){re.commTipWithYes(L.instance.getLanguage("HELP"))}onNext(){this.states.indexOf(Te.MATCHEND_REWARD)!=-1?(this.states=this.states.filter(t=>t!==Te.MATCHEND_REWARD),this.states.length>0?this.btn_next.label=L.instance.getUILang("Next"):this.btn_next.label=L.instance.getUILang("Go Battle")):this.states.indexOf(Te.MATCHEND_QUAN)!=-1?(this.states=this.states.filter(t=>t!==Te.MATCHEND_QUAN),this.box_quan.visible=!0,this.box_pvp.visible=!1,this.box_pve.visible=!1,this.list_reward.visible=!1,this.noDataBox1.visible=!1,this.btn_next.visible=!1):this.states.indexOf(Te.MATCHEND_DIEJIA)!=-1?(this.states=this.states.filter(t=>t!==Te.MATCHEND_DIEJIA),this.groupInfos&&this.groupInfos.length>0&&(this.box_cumulative.visible=!0,this.box_outside.visible=!1),this.btn_claim.visible=!1,this.btn_next.label=L.instance.getUILang("Go Battle")):this.setToAirdropScene()}async onClaim(){var t=1,r=this.roomGameOverPush.loserTid;await ETHQuanProxy.instance.addTicketLog(t,r)&&(console.log("记录逆袭券日志成功"),this.onClaimed())}onRefreshQuan(){ee.instance.notice(L.instance.getLanguage(2e3))}setToAirdropScene(){ze.intance.setCurrentScene(oe.M_SCENE_MAIN)}setOpenData(t){this.btn_nextLX=this.btn_next.x;var r=Le.instance.matchDto;this.myRankPlayerDto=t[0];var n=t[1];this.groupId=t[2],this.roomGameOverPush=Le.instance.msgEndbody,this.tf_rank.text=`${this.roomGameOverPush.rank}`,this.tf_score.text=`${this.roomGameOverPush.score}`,this.tf_kill.text=`Defeated: <font color="#ffd734">${this.roomGameOverPush.kills}</font>`,this.tf_length.text=`Final length: <font color="#ffd734">${this.roomGameOverPush.length}</font>`,this.tf_challengeDuration.text=`Lifetime: <font color="#ffd734">${Mt.format(this.roomGameOverPush.alive,":",!1)}</font>`,this.btn_next.visible=!0,this.list_reward.visible=!1;var s=this.roomGameOverPush.items,o=this.roomGameOverPush.token;this.list_reward.vScrollBarSkin="",this.myRankPlayerDto&&(this.tf_rank.text=this.myRankPlayerDto.rankNum+"");var l=[],c=new Ce;if(s&&s.length>0&&s.forEach(I=>{var _=c.get(I.itemId);_?_.newAddCnt=_.newAddCnt+I.num:(_=new bt(I.itemId),_.newAddCnt=I.num,l.push(_),c.set(I.itemId,_))}),o&&o.length>0){var p=new bt(Oe.TYPE_REWARD_TOKEN);l.push(p)}var d=this.list_reward.spaceX,h=this.list_reward.itemTemplate.width,f=l.length,g=f*h+d*(f-1);this.list_reward.repeatX=f,this.list_reward.width=g,this.btn_next.visible=!0,this.list_reward.x=this.box_outside.width-this.list_reward.width>>1,this.list_reward.array=l,this.list_reward.visible=!0,!this.list_reward.array||this.list_reward.array.length<=0?this.noDataBox1.visible=!0:this.noDataBox1.visible=!1;let E=-1;this.list_reward.selectedIndex=E,this.onNext()}onDisable(){this.removeEvent()}removeEvent(){A.intance.off(v.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan)}};Yg=N([r2("y-nP_lRrQVef9uttVJ0rDw")],Yg);var Xg=class extends Laya.Box{};var{regClass:n2}=Laya,Qg=class extends Xg{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(t){this.snack=t,this.snack&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){this.snack.tag&&(this.tf_rank.text=this.snack.rankNum+".  "+qi.abbreviateString(this.snack.tag.userName)),this.snack.rankNum==1?this.tf_kill.text=`<font><img src='res/match2/img_phb_icon2.png'/>${this.snack.score}</font>`:this.tf_kill.text=`<font>${this.snack.score}</font>`,this.snack.isSelf?(this.tf_rank.color="#ffe155",this.tf_kill.color="#ffe155"):(this.tf_rank.color="#ffffff",this.tf_kill.color="#ffffff")}};Qg=N([n2("XTVFXeI_R768e0Elv_ePAA")],Qg);var Zg=class extends Laya.Box{};var{regClass:s2}=Laya,Jg=class extends Zg{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.itemVo=t,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.itemVo&&(this.itemVo.m_iId==Oe.TYPE_REWARD_TOKEN?(this.img_tokens.visible=!0,this.knapsackItem.visible=!1):(this.img_tokens.visible=!1,this.knapsackItem.visible=!0,this.knapsackItem.showAdd=!0,this.knapsackItem.dataSource=this.itemVo))}toDetail(){!this.itemVo||!this.itemVo.needTip||(this.itemVo.m_iId==Oe.TYPE_REWARD_TOKEN?ne.intance.openModule(y.MatchEndRewardTokensDialog):this.itemVo.type===Bt.TYPE_Equipment?ne.intance.openModule(y.EquipDetailDialog,this.itemVo):ne.intance.openModule(y.KnapsackTipDialog,this.itemVo))}};Jg=N([s2("WXpxCvqlQ2mKdcJCYlqOeg")],Jg);var{regClass:a2,property:Xhe}=Laya,Yc=class extends Laya.Script{constructor(){super()}onAwake(){}onStart(){Re.instance.playMusic()}onLateUpdate(){Re.instance.moveGameWindow()}onDisable(){Laya.timer.clearAll(this)}};Yc=N([a2("Ply19emtSrqrBk7nHXToAQ")],Yc);var eb=class extends Laya.Box{};var{regClass:o2}=Laya,tb=class extends eb{constructor(){super();this.isBig=!1;this.isAddEvent=!1}set dataSource(t){super.dataSource=t,this.skillItem=t,this.skillItem&&(this.txt_num.text="",this.img_icon.skin=J.instance.getMatchSkillIcon(this.skillItem.icon))}};tb=N([o2("iwuFUCOEQRyOjxpy6IkQ2Q")],tb);var ib=class extends Laya.Button{};var{regClass:l2}=Laya,rb=class extends ib{constructor(){super();this.isAddEvent=!1;this.isCanClick=!0;this.skillCooldown=5e3;this.thisGlobalCooldown=1e4;this.globalCooldown=1e4;this.remainingSkillCooldown=0;this.remainingGlobalCooldown=0;this.reduceCooldown=0}onEnable(){this.addEvent()}addEvent(){this.isAddEvent||(A.intance.on(v.EVENT_CLICK_NUM,this,this.onNumberClick),A.intance.on(v.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),A.intance.on(v.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),A.intance.on(v.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),this.isAddEvent=!0,this.on(Laya.Event.CLICK,this,this.onSkillButtonClick),this.on(Laya.Event.MOUSE_UP,this,this.onSkillButtonUp))}onNumberClick(t){t==this.keyNum&&this.onSkillButtonClick(null)}set dataSource(t){super.dataSource=t,this.skillItem=t[0],this.itemItem=t[1],this.equipPos=t[2],this.count=t[3],this.skillItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.skillItem&&(this.skillIconItem.isBig=this.skillItem.icon=="1001",this.skillIconItem.dataSource=this.skillItem,this.itemItem?(this.txt_num.visible=!0,this.updateCount(),this.skillCooldown=this.itemItem.cd*1e3):(this.txt_num.visible=!1,this.skillCooldown=this.skillItem.cd),this.thisGlobalCooldown=this.skillItem.commCd,Laya.timer.frameLoop(1,this,this.updateCooldown))}onSkillButtonUp(t){t&&t.stopPropagation(),Rr.clearClickFilter(this)}onSkillButtonClick(t){t&&t.stopPropagation();return;if(this.itemItem)if(this.remainingSkillCooldown+this.reduceCooldown<=0){if(console.log("道具技能释放！"),et.instance.selfSnack._isDead){console.log("自己已死亡，无法释放道具技能！");return}Laya.Tween.to(this,{scaleX:.8,scaleY:.8},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1},100,Laya.Ease.linearNone)}));var r;this.skillItem.type==6||this.skillItem.type==7?Re.instance.onSendUse(!0,this.equipPos):Re.instance.onSendUse(!1,this.equipPos)}else console.log("技能或全局冷却还在进行中，无法释放。");else this.remainingSkillCooldown+this.reduceCooldown<=0&&this.remainingGlobalCooldown+this.reduceCooldown<=0?(console.log("技能释放！"),Laya.Tween.to(this,{scaleX:.8,scaleY:.8},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1},100,Laya.Ease.linearNone)})),et.instance.selfSnack.attack(0,this.skillItem.id),this.updateSkillCooldown(this.skillCooldown),A.intance.event(v.EVENT_UPDATE_GLOBAL_COOL,[this.thisGlobalCooldown])):console.log("技能或全局冷却还在进行中，无法释放。")}updateSkillCooldown(t){this.remainingSkillCooldown=t}updateItemRemainCooldown(t){var r=t[0];console.log("updateItemRemainCooldown _skillId: "+r),this.itemItem&&r==this.skillItem.id&&(this.count=t[1],this.updateCount(),this.updateSkillCooldown(this.skillCooldown))}updateCount(){this.txt_num.text=this.count+"",this.disabled=!this.count}updateReduceCooldown(t,r){console.log("updateReduceCooldown skillType: "+t),this.skillItem&&t==this.skillItem.type&&(this.reduceCooldown=this.skillCooldown*r)}updateGlobalCooldown(t){this.itemItem||(this.globalCooldown=t,this.remainingGlobalCooldown=t)}updateCooldown(){if(this.remainingSkillCooldown+this.reduceCooldown>0){this.remainingSkillCooldown-=Laya.timer.delta;let t=(this.remainingSkillCooldown+this.reduceCooldown)/1e3;this.txt_time.text=t.toFixed(1),this.updateCooldownMask(this.skillCooldownMask,(this.remainingSkillCooldown+this.reduceCooldown)/this.skillCooldown,"#000000"),this.img_djs.visible=!0,this.txt_time.visible=!0}else this.img_djs.visible=!1,this.txt_time.visible=!1;this.remainingGlobalCooldown+this.reduceCooldown>0?(this.remainingGlobalCooldown-=Laya.timer.delta,this.updateCooldownMask(this.globalCooldownMask,(this.remainingGlobalCooldown+this.reduceCooldown)/this.globalCooldown,"#00000036"),this.globalCooldownMask.visible=!0):this.globalCooldownMask.visible=!1,this.skillIconItem.gray=this.remainingSkillCooldown+this.reduceCooldown>0||this.remainingGlobalCooldown+this.reduceCooldown>0}updateCooldownMask(t,r,n){let s=this.width/2,o=this.width/2,l=this.height/2;t.graphics.clear(),t.graphics.drawPie(o,l,s,-90+360*(1-r),270,n)}onDisable(){A.intance.off(v.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),A.intance.off(v.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),A.intance.off(v.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),A.intance.offAllCaller(this),Laya.timer.clearAll(this)}};rb=N([l2("x6t-z1VuR52yXWju0qxGBg")],rb);var nb=class extends Laya.Dialog{};var{regClass:c2}=Laya,sb=class extends nb{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink)}onLink(t){console.log("点击了超链接："+t)}onRefresh(){Ye.instance.reload()}setOpenData(t){if(t){var r=t[0];if(t.length>2?(this.alertTitle.text=t[1],this.alertDesc.text=t[2]):this.alertDesc.text=t[1],r==1){this.canClose=!1;var n=this.getChildByName("close");n.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1;this.alertDesc.height=this.alertDesc.textField.textHeight+20}}onDisable(){}close(t){this.canClose&&super.close(t)}};sb=N([c2("xATCTfSDSkaGtuYn669ofQ")],sb);var ab=class extends Laya.Dialog{};var{regClass:u2}=Laya,ob=class extends ab{constructor(){super()}onEnable(){this.img_show.on(Laya.Event.CLICK,this,this.close)}setOpenData(e){e&&(this.img_show.skin=e)}onDisable(){}};ob=N([u2("RUMV5hpfRdCRzhO9yBDCzg")],ob);var lb=class extends Laya.Dialog{};var{regClass:p2}=Laya,cb=class extends lb{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink),this.btn_left.on(Laya.Event.CLICK,this,this.onChangePage,[!1]),this.btn_right.on(Laya.Event.CLICK,this,this.onChangePage,[!0])}onLink(t){console.log("点击了超链接："+t)}onRefresh(){Ye.instance.reload()}setOpenData(t){if(t){var r=t[0],n=t[1];if(this.list=n.list,this.pageNo=1,this.pageTotal=this.list.length,this.pageTotal<2&&(this.box_page.visible=!1),this.updatePageList(),r==1){this.canClose=!1;var s=this.getChildByName("close");s.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1}}async onChangePage(t){if(t)this.pageNo++;else{if(this.pageNo<=1)return;this.pageNo--}this.updatePageList()}updatePageList(){this.txt_page.text=this.pageNo+"/"+this.pageTotal,this.btn_left.disabled=this.pageNo<=1,this.btn_right.disabled=this.pageNo>=this.pageTotal,this.setNoticeDetail()}setNoticeDetail(){if(this.pageNo){var t=this.list[this.pageNo-1];t&&(this.alertTitle.text=L.instance.getMultiLan(t.title),this.alertDesc.text=L.instance.getMultiLan(t.contents))}}onDisable(){}close(t){this.canClose&&super.close(t)}};cb=N([p2("iB7UvqEcQ1GFKaVEIy6Bmw")],cb);var ub=class extends Laya.Box{};var{regClass:m2}=Laya,pb=class extends ub{};pb=N([m2("ON5bkSuKSE2gwPDUnRGmrw")],pb);var mb=class extends Laya.Box{};var{regClass:d2}=Laya,db=class extends mb{onEnable(){}notice(e){this.zOrder=1e7;let t=e;this.label_tf.text=t,this.label_tf.x=68,this.image_bg.width=68*2+this.label_tf.textField.textWidth,t.length/45>1&&(this.image_bg.height=this.label_tf.textField.textHeight+55),this.alpha=1,this.visible=!0}get view(){return this}get width(){return this.image_bg.width}onDisable(){console.log("txtNotice recover"),Laya.Pool.recover("txtNotice",this)}};db=N([d2("Nm27xWbYSG6mj-EXqPOZ_A")],db);var hb=class extends Laya.Dialog{};var ul=class i{constructor(){this.lastTime=0}static get instance(){return i._instance||(i._instance=new i),i._instance}async recruitItem(e,t,r,n=void 0){if(e.chainType>0)if(t&&t>1)await this.buyItemOnChain(e,e.id,r,n);else{let p=e.cost[0];var s=0;e.commission&&e.commission.length>1&&(s=e.commission[1]);var o=e.cost[1];let d=new Gt(o),h=new Gt(s),f=d.add(h);var l=new Gt(r);let g=f.multiply(l);var c=Number(g.getValue());if(B.instance.getConsumeValue(p)<c){ee.instance.notice(L.instance.getLanguage(1840));return}await this.buyItemNormal(e,e.id,r,n)}else await this.buyItemNormal(e,e.id,r,n)}async recruitItem2(e,t=void 0){await this.buyItemOnChain2(e,t)}async buyItemNormal(e,t,r,n=void 0){let s=j.intance.m_dicShops.get(t),o=await se.requestPost("wxgame/hero/itemBuy",{shopId:s.id,count:r},!0,!0);o&&(o.reward&&ne.intance.openModule(y.RewardGetDialog,o.reward),o.resChange&&B.instance.moneyInfoHander(o.resChange),o.fightHeroPk&&(B.instance.playerDto.fightHeroPk=o.fightHeroPk),Pe.instance.hideLoading(),n&&n&&n.run())}async buyItemOnChain(e,t,r,n=void 0){var s=new Date().getTime();if(s-this.lastTime<1e3)return;this.lastTime=s;var o=currencyAddressItem.chainId;Pe.instance.showLoadingByInfo(L.instance.getLanguage(1119));let l;e.type==2?l=currencyAddressItem.tiketAddress:e.type==5&&(l=currencyAddressItem.skillAddress);let c=te.instance.walletAddress,p=await te.instance.walletClient.getChainId();try{if(p!==o&&!await te.instance.switchChain(o)){this.onEndItemCallback(),console.log("切换失败，请手动切换");return}let R=currencyAddressItem.token;if(!R){this.onEndItemCallback(),ee.instance.notice(L.instance.getLanguage(1177,p));return}if(!l){this.onEndItemCallback(),ee.instance.notice(L.instance.getLanguage(1174,p));return}var d=0;e.commission&&e.commission.length>1&&(d=e.commission[1]);var h=e.cost[1];let V=new Gt(h),H=new Gt(d),K=V.add(H);var f=new Gt(r);let q=K.multiply(f),ce=await te.instance.getBalance2(R),Q=_n(q.getValue()+"",currencyAddressItem.tokenDecimals);var g=currencyAddressItem.token==0?Q:_n("0",currencyAddressItem.tokenDecimals);if(parseFloat(ce)<parseFloat(Q)){this.onEndItemCallback(),re.moneyNotEnought(coinType);return}if(console.log("判断授权 tokenAddress: "+R+", chainIDData:"+o),!await te.instance.newAllowanceAddress(l,R))return console.log("未授权"),this.onEndItemCallback(),ee.instance.notice(L.instance.getLanguage(15)),Pe.instance.hideLoading(),!1;let ve=B.instance.playerDto.pid;var E;if(this.type=e.type,e.type==2){var I=e.goods;this.tid=I,E=await te.instance.walletClient.writeContract({address:l,abi:Ae.buyTicket_ABI,functionName:"buyTicket",args:[ve,I,r],account:c,value:g})}else if(e.type==5){var _=e.goods;this.tid=_,E=await te.instance.walletClient.writeContract({address:l,abi:Ae.buySkillCard_ABI,functionName:"buySkillCard",args:[ve,_,r],account:c,value:g})}let W;return W=await te.instance.publicClient.waitForTransactionReceipt({hash:E,pollingInterval:1e3}),console.log(`Tx with hash: ${E}`,W),W&&W.status=="success"?(this.waitGetQuanReward(o,E),console.log(`Tx successful with hash: ${E}`),E):(this.onEndItemCallback(),re.TransactionErrorTip(),!1)}catch(R){var S=R.shortMessage;if(S)if(S.indexOf("does not match")!=-1){var M=te.instance.getChainName(o);S=L.instance.getLanguage(1172,M),this.onEndItemCallback()}else this.onEndItemCallback();else this.onEndItemCallback();if(console.log(S),ee.instance.notice(S),R instanceof U){let V=R.walk(H=>H instanceof Oi);if(V instanceof Oi){let H=V.data?.errorName??"";console.log("============errorName: "+H)}}return null}}async buyItemOnChain2(e){var t=new Date().getTime();if(t-this.lastTime<1e3)return;this.lastTime=t;var r=97;let n,s=te.instance.walletAddress,o=await te.instance.walletClient.getChainId();try{if(o!==r&&!await te.instance.switchChain(r)){await te.instance.addChain(r),this.onEndItemCallback(),console.log("切换失败，请手动切换");return}let h=Ae.BUY_SNAKE_10;if(!h){this.onEndItemCallback(),ee.instance.notice(L.instance.getLanguage(1174,o));return}var l=0;let f=B.instance.playerDto.pid;var c;c=await te.instance.walletClient.writeContract({address:h,abi:Ae.BUY_SNAKE_10_ABI,functionName:"mint",args:[e],account:s});let g;return g=await te.instance.publicClient.waitForTransactionReceipt({hash:c,pollingInterval:1e3}),g&&g.status=="success"?(console.log(`Tx successful with hash: ${c}`),c):(this.onEndItemCallback(),re.TransactionErrorTip(),!1)}catch(h){var p=h.shortMessage;if(p)if(p.indexOf("does not match")!=-1){var d=te.instance.getChainName(r);p=L.instance.getLanguage(1172,d),this.onEndItemCallback()}else this.onEndItemCallback();else this.onEndItemCallback();if(console.log(p),ee.instance.notice(p),h instanceof U){let f=h.walk(g=>g instanceof Oi);if(f instanceof Oi){let g=f.data?.errorName??"";console.log("============errorName: "+g)}}return null}}onEndItemCallback(e=null){Pe.instance.hideLoading(),e&&A.intance.event(v.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,[e])}waitGetQuanReward(e,t){this.chainId=e,this.hashId=t,Laya.timer.loop(2e3,this,this.getItemReward)}async getItemReward(){if(this.type==2||this.type==5){var e;this.type==2?e=1:this.type==5&&(e=2);var t=await se.requestPost("paWallet/scanBuyBonusCheck",{type:e,chainId:this.chainId,hashId:this.hashId}).catch(n=>{}),r=t.status;r>0&&(Laya.timer.clear(this,this.getItemReward),ee.instance.notice(L.instance.getLanguage(2e3)),Pe.instance.hideLoading(),this.onEndItemCallback(1))}}};var{regClass:h2}=Laya,fb=class extends hb{constructor(){super();this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER;this.addL=1;this.payType=1}onEnable(){this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.btn_send.on(Laya.Event.CLICK,this,this.buyTicket),A.intance.on(v.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus),this.btn_radio1.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio1]),this.btn_radio2.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio2])}setOpenData(t){if(t){console.log(t),this.shopItem=t[0],this.img_icon.skin=J.instance.getItemIcon(this.shopItem.icon);var r=j.intance.m_dicItems.get(this.shopItem.icon);this.img_box.skin="gameIcon/items/itemBg/img_"+r.quality+".png",this.tf_name.text=L.instance.getLanguage(this.shopItem.title),this.tf_des.text=L.instance.getLanguage(this.shopItem.des),this.tf_price.text=`${this.shopItem.cost[1]}`,this.shopItem.commission&&this.shopItem.commission.length>1?this.tf_commission.text=`${this.shopItem.commission[1]}`:(this.tf_des.y=this.box_commission.y,this.box_commission.visible=!1),this.initRadio()}}initRadio(){if(this.shopItem.chainType>0)if(this.shopItem.type==2){var t=B.instance.getConsumeValue(this.shopItem.cost[0]),r=this.getItemJudgePrice();t>=r?this.selectRadio(1):this.selectRadio(2);let n=j.intance.getGeneralValueById(35);this.lable_text1.text=L.instance.getLanguage(n[0][1]),this.lable_text2.text=L.instance.getLanguage(n[1][1]),this.box_radio.visible=!0}else this.box_radio.visible=!1,this.payType=2,this.initTip();else this.box_radio.visible=!1,this.initTip()}selectRadio(t){this.payType=t;let r=t==1;this.btn_radio1.selected=r,this.btn_radio2.selected=!r,this.lable_text1.color=r?"#ffffff":"#939393",this.lable_text2.color=r?"#939393":"#ffffff",this.initTip()}initTip(){this.payType==2?(this.tf_tip.visible=!0,this.shopItem.type==2?this.tf_tip.text=L.instance.getLanguage(1836):this.shopItem.type==5&&(this.tf_tip.text=L.instance.getLanguage(1837)),this.addL=10,this.img_moneyIcon.skin=J.instance.getMoneyIcon(this.shopItem.coinType)):(this.tf_tip.visible=!1,this.img_moneyIcon.skin=J.instance.getMoneyIcon(this.shopItem.cost[0])),B.instance.pveOpen==1&&this.shopItem.id==2041?(this.addL=100,this.btn_plus.disabled=!0,this.btn_reduce.disabled=!0,this.tf_num.disabled=!0,this.setItemNum()):(this.btn_plus.disabled=!1,this.btn_reduce.disabled=!1,this.tf_num.disabled=!1,this.setItemNum())}onDisable(){A.intance.off(v.EVENT_REFRESH_ITEM_ONCHAIN_STATUS,this,this.onRefreshItemStatus)}onRefreshItemStatus(){this.close()}handleClickBtn(t){switch(t){case this.btn_radio1:this.selectRadio(1);break;case this.btn_radio2:this.selectRadio(2);break;case this.btn_reduce:this.addL>1&&this.addL--,this.setItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setItemNum();break}}setItemNum(){this.tf_num.text=this.addL+"";var t=0;this.shopItem.commission&&this.shopItem.commission.length>1&&(t=this.shopItem.commission[1]);var r=this.shopItem.cost[1];let n=r+t;var s=ct.formatNumber(n);let o=new Gt(this.addL),l=new Gt(s),c=o.multiply(l).getValue();this.tf_needMoney.text=`${c}`}getItemJudgePrice(){var t=0;this.shopItem.commission&&this.shopItem.commission.length>1&&(t=this.shopItem.commission[1]);var r=this.shopItem.cost[1];let n=r+t;var s=ct.formatNumber(n);let o=new Gt(1),l=new Gt(s),c=o.multiply(l).getValue();return Number(c)}changeItemNum(){var t=parseInt(this.tf_num.text);(!t||t<1)&&(t=1),this.addL=t,this.setItemNum()}async buyTicket(){let t=Laya.Handler.create(this,()=>{this.close()});await ul.instance.recruitItem(this.shopItem,this.payType,this.addL,t)}};fb=N([h2("HVS6mG75Rv-dixx4tHjp2g")],fb);var gb=class extends Laya.Box{};var{regClass:f2}=Laya,bb=class extends gb{constructor(){super(...arguments);this.coins=[[3022,2],[3001,2],[3011,2],[3013,4],[3010,2],[3007,4],[3006,6],[3015,2],[3016,2],[3005,0]]}onEnable(){let t=(Laya.stage.width-$.DESIGN_WIDTH)/2;this.img_coinsBg.right-=t,console.log("dWidth: "+t),this.updateLocalAssets(),A.intance.on(v.ROLE_INFO_CHANGE,this,this.updateLocalAssets),A.intance.on(v.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),this.coins=j.intance.getGeneralValueById(19),this.list_coin.array=this.coins}onDisable(){A.intance.off(v.ROLE_INFO_CHANGE,this,this.updateLocalAssets),A.intance.off(v.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets)}updateLocalAssets(){this.list_coin.refresh()}};bb=N([f2("7P9MlqipSaG6QoKpQowDbQ")],bb);var yb=class extends Laya.Dialog{};var{regClass:g2}=Laya,_b=class extends yb{constructor(t){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=pe.M_POP;this.m_iPositionType=pe.CENTER}onEnable(){this.initContainer(),Ke.instance.playSoundByName(Ke.soundName32)}initContainer(){var t=Dt.instance.getOneItem();t&&this.showItem(t)}showItem(t){let r=this.heroListItem;r.dataSource=t}onDisable(){A.intance.event(v.EVENT_CHECK_REMAIN,y.HeroGetDialog)}};_b=N([g2("mrqJhWahTxuTjeSGIs559Q")],_b);var pl=class extends Laya.Box{};var{regClass:b2}=Laya,xb=class extends pl{constructor(){super();this.isAddEvent=!1}set dataSource(t){super.dataSource=t,this.shopItem=t,this.shopItem&&(this.addEvent(),this.setCurrentOutPut())}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}onDisable(){this.off(Laya.Event.CLICK,this,this.toDetail)}async setCurrentOutPut(){let t=this.BagItem.getChildByName("selectBox");t.visible=!1,this.BagItem.dataSource=this.shopItem}toDetail(){console.log(this.x),this.shopItem&&(this.shopItem.type===Bt.TYPE_Equipment||this.shopItem.type===Bt.TYPE_CARD)&&A.intance.event(v.SHOW_EQUIP_SHOP_TIP,{data:this.shopItem,positionX:this.x})}};xb=N([b2("NeXqnO0GSzGqgAW6thqXMA")],xb);var vb=class extends Laya.Box{};var{regClass:y2}=Laya,wb=class extends vb{constructor(){super();this.isAddEvent=!1;this.needPop=!0}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(t){super.dataSource=t,this.rentalDto=t,this.rentalDto&&(this.needPop&&this.addEvent(),this.setRentalData())}setRentalData(){if(this.img_my.visible=B.instance.playerDto.pid==this.rentalDto.hostPlayer.id,this.img_lock.visible=this.rentalDto.pwd,this.rentalDto.rentalType==2){this.tf_free.visible=!0;var t=j.intance.m_dicItems.get(this.rentalDto.coinType),r=L.instance.getLanguage(t.name),n=ct.formatNumber(this.rentalDto.amount)+"",s=L.instance.getLanguage(1657,n,r);this.tf_free.text=s;var o=j.intance.getRentCurrency(this.rentalDto.coinType);this.tf_free.color=o?"#fdd378":"#ffffff",this.tf_period.text=L.instance.getLanguage(1658,this.rentalDto.minPeriod,this.rentalDto.maxPeriod)}else this.tf_free.color="#ffffff",this.tf_free.visible=!0,this.tf_free.text=L.instance.getUILang("FREE"),this.tf_period.text=L.instance.getLanguage(1659,this.rentalDto.minPeriod);this.rentalHeroListItem.dataSource=this.rentalDto}toDetail(){var t=this.parent.parent.parent.parent.parent,r=t.nftTabIndex;console.log("nftTabIndex: "+r),this.rentalDto.status==1?ne.intance.openModule(y.MyRentedDialog,this.rentalDto):r==4?ne.intance.openModule(y.MyLeasedDialog,this.rentalDto):this.rentalDto.status==0&&(B.instance.playerDto.pid==this.rentalDto.hostPlayer.id?ne.intance.openModule(y.MyLeasedDialog,this.rentalDto):ne.intance.openModule(y.MyRentalBuyDialog,this.rentalDto))}};wb=N([y2("B3yEIK7uQ02c8r0diwvrqg")],wb);var Lb=class extends Laya.Box{};var{regClass:_2}=Laya,Ib=class extends Lb{constructor(){super();this.isAddEvent=!1}set dataSource(t){super.dataSource=t,this.shopItem=t,this.shopItem&&this.setCurrentOutPut()}async setCurrentOutPut(){if(this.tf_name.text=L.instance.getLanguage(this.shopItem.title),this.img_liked.visible=!1,this.img_red_shields_1.visible=!1,this.shopItem.cost.length>1){this.img_const.skin=J.instance.getMoneyIcon(this.shopItem.cost[0]);var t=0;this.shopItem.commission&&this.shopItem.commission.length>1&&(t=this.shopItem.commission[1]);var r=this.shopItem.cost[1];let c=r+t;var n=ct.formatNumber(c);this.tf_const.text=n+"",this.tf_const.color=this.shopItem.chainType>0?"#fdd378":"#ffffff",this.img_const.visible=!0,this.tf_const.visible=!0,this.img_ask.visible=!1,this.shopItem.type==5?this.gray=!1:this.gray=this.shopItem.open==0,this.disabled=!1}else this.disabled=!0,this.img_const.visible=!1,this.tf_const.visible=!1,this.img_ask.visible=!1;if(this.shopItem.type==1)this.tf_name.color=ar.qualityColors[parseInt(this.shopItem.icon)-1],this.img_bg.skin=J.instance.getHeroQuality(this.shopItem.icon),this.img_icon.skin=J.instance.getHeroEggIcon(this.shopItem.icon);else if(this.shopItem.type==4)this.tf_name.color=ar.qualityColors[parseInt(this.shopItem.icon)-1],this.img_bg.skin=J.instance.getHeroQuality(this.shopItem.icon),this.img_icon.skin=J.instance.getChestIcon(this.shopItem.icon);else if(this.shopItem.type==5)if(this.shopItem.icon){var s=j.intance.m_dicItems.get(this.shopItem.icon);this.img_bg.skin=J.instance.getHeroQuality(s.quality+""),this.tf_name.color=ar.qualityColors[s.quality-1],this.img_icon.skin=J.instance.getItemIcon(this.shopItem.icon),this.img_red_shields_1.visible=!1,this.img_liked.visible=!1;var o=this.shopItem.currLike>=this.shopItem.totalLike;this.tf_const.visible=!0}else{var l=6;this.img_bg.skin=J.instance.getHeroQuality(l+""),this.tf_name.color=ar.qualityColors[l-1],this.img_icon.skin="res/shop/img_com_tub.png"}}};Ib=N([_2("awS07ko0RBaxCnxXWqiR4g")],Ib);var{regClass:x2}=Laya,Eb=class extends pl{constructor(){super();this.isAddEvent=!1}set dataSource(t){super.dataSource=t,this.shopItem=t,this.shopItem&&(this.addEvent(),this.setCurrentOutPut())}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.buyTicket),this.isAddEvent=!0)}async setCurrentOutPut(){this.tf_name.text=L.instance.getLanguage(this.shopItem.title),this.img_const.skin=J.instance.getMoneyIcon(this.shopItem.chainType>0?this.shopItem.coinType:this.shopItem.cost[0]);var t=0;this.shopItem.commission&&this.shopItem.commission.length>1&&(t=this.shopItem.commission[1]);var r=this.shopItem.cost[1];let n=r+t;var s=ct.formatNumber(n);if(this.tf_const.text=s+"",this.tf_const.color=this.shopItem.chainType>0?"#fdd378":"#ffffff",this.shopItem.type==2){var o=j.intance.m_dicItems.get(this.shopItem.icon);this.img_bg.skin=J.instance.getItemQualityIcon(o.quality+""),this.tf_name.color=ar.qualityColors[o.quality-1],this.img_icon.skin=J.instance.getItemIcon(this.shopItem.icon)}}buyTicket(){ne.intance.openModule(y.BuyTicketDialog,[this.shopItem])}};Eb=N([x2("din69PYeRbSapMB2H6E06g")],Eb);var Sb=class extends Laya.Scene{};var{regClass:v2}=Laya,Tb=class extends Sb{constructor(){super(...arguments);this.currTab=0;this.type=1;this.selectItemId=-1;this.oid=1;this.isSkReady=!1}onAwake(){this.m_iLayerType=pe.M_POP,this.m_iPositionType=pe.UP}onOpened(t){t&&t.length>0?(this.type=t[0],t[1]!=null&&(this.selectItemId=t[1]),this.onClickTab(this.type)):(this.selectItemId=1,this.onTabClick(this.selectItemId))}onEnable(){for(let t=0;t<4;t++)this["tab"+t].on(Laya.Event.CLICK,this,this.onTabClick,[t]);for(let t=1;t<3;t++)this["btn_"+t].on(Laya.Event.CLICK,this,this.onClickTab,[t]);this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),A.intance.on("msg_"+X.snake.socket.MessageType.MSG_QUERY_TOKEN,this,this.onRequestInfo),this.btn_left.on(Laya.Event.CLICK,this,this.clickLeftAndRight,[!0]),this.btn_right.on(Laya.Event.CLICK,this,this.clickLeftAndRight,[!1]),this.btn_buy.on(Laya.Event.CLICK,this,this.onRecruit)}setTab(t){for(let r=1;r<3;r++)t==r?(this["btn_"+r].getChildByName("selectBox1").visible=!0,this["btn_"+r].getChildByName("selectBox2").visible=!1):(this["btn_"+r].getChildByName("selectBox1").visible=!1,this["btn_"+r].getChildByName("selectBox2").visible=!0)}async onClickTab(t){this.currTab!=t&&(this.type=t,this.setTab(t),t==1?(this.box_middle.visible=!0,this.tabBox.visible=!0,this.box_shop.visible=!1,this.img_nft.skin="res/shop/img_iconwz1.png",this.img_props.skin="res/shop/img_iconwz4.png"):t==2&&(this.box_middle.visible=!1,this.tabBox.visible=!1,this.box_shop.visible=!0,this.img_nft.skin="res/shop/img_iconwz2.png",this.img_props.skin="res/shop/img_iconwz3.png"))}onSelectItem(t){}setToMainScene(){ze.intance.setCurrentScene(oe.M_SCENE_MAIN)}removeEvent(){Laya.timer.clearAll(this)}onTabClick(t){let n="res/shop/img_Button_1.png",s="res/shop/img_btlv.png",o="res/shop/img_bt1_2.png",l="res/shop/img_Button_4.png",c="#009815";for(let h=0;h<4;h++){let f=this[`tab${h}`],g=f.getChildByName("tf_tit"),E=t===h,I=h===0;this.selectItemId=t,f.skin=I?E?n:o:E?s:l,g.stroke=E?5:0,g.strokeColor=c;let _=1001,S=1001;switch(t){case 0:_=null,S=1001;break;case 1:_=1001,S=1002;break;case 2:_=1002,S=1003;break;case 3:S=null,_=null;break;default:break}if(S){var d=j.intance.m_dicSnakes.get(S);let M=this.attribute_1.getChildByName("tf_value"),R=this.attribute_2.getChildByName("tf_value"),V=this.attribute_3.getChildByName("tf_value"),H=this.attribute_3.getChildByName("tf_value");M.text=`${d.baseSpeed}`,R.text=`${d.maxLength}`,V.text=`${d.suctionRadius}`,H.text=`${d.doublePointsProbability}`}if(_){let M=j.intance.m_dicShops.get(_);M&&(this.tf_price.text=`${M.cost}`,this.btn_buy.visible=!0)}else this.btn_buy.visible=!1;this.selectItemId<=0?this.btn_left.disabled=!0:this.btn_left.disabled=!1,this.selectItemId>=3?this.btn_right.disabled=!0:this.btn_right.disabled=!1}}clickLeftAndRight(t){t&&this.selectItemId>0&&(this.selectItemId--,this.onTabClick(this.selectItemId)),!t&&this.selectItemId<3&&(this.selectItemId++,this.onTabClick(this.selectItemId))}initCoinCombo(){}async onRecruit(){await ul.instance.recruitItem2(1)}onCreateRental(){ne.intance.openModule(y.CreateRentalDialog,[])}onDisable(){}};Tb=N([v2("IPCUkD5kRse3Gz5tw0Aovw")],Tb);var kb=class extends Laya.Image{};var{regClass:w2}=Laya,Ab=class extends kb{constructor(){super(...arguments);this.minScale=1;this.maxScale=1.2;this.minDuration=800;this.maxDuration=1200}init(t){this.skin=J.instance.getFoodIcon(t.icon)}startScalingAnimation(){let t=this.minScale+Math.random()*(this.maxScale-this.minScale),r=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:t,scaleY:t},r,null,Laya.Handler.create(this,()=>{let n=this.minScale+Math.random()*(1-this.minScale),s=this.minDuration+Math.random()*(this.maxDuration-this.minDuration);Laya.Tween.to(this,{scaleX:n,scaleY:n},s,null,Laya.Handler.create(this,this.startScalingAnimation))}),-1,!0)}onDisable(){Laya.Tween.clearAll(this)}};Ab=N([w2("j4yWA5APT7ipho7IOx4ryg")],Ab);var Cb=class extends Laya.Scene{};var{regClass:L2}=Laya,Rb=class extends Cb{constructor(){super(...arguments);this.liveNum=0;this.SnakeAINum=5;this.snakeAIArr=[]}onAwake(){this.m_iLayerType=pe.M_POP,this.m_iPositionType=pe.UP,Re.instance.init()}onOpened(t){var r=Le.instance.matchDto.startTime-Le.instance.matchDto.nowTime;r>0&&ne.intance.openModule(y.MatchReadyView);var n=Le.instance.matchDto.arenaId,s=Le.instance.matchWatcher;s&&(this.btn_exit.on(Laya.Event.CLICK,this,this.onExitClick),this.img_kill.visible=!1,this.box_skills.visible=!1,this.img_smallMap.on(Laya.Event.CLICK,this,this.onSmallMapClick),B.instance.playerDto.killStatus==1&&(this.btn_banAccount.visible=!0,this.btn_banAccount.on(Laya.Event.CLICK,this,this.onBanAccountClick))),this.btn_exit.visible=s,this.tf_live.visible=s;var o=j.intance.m_dicArenaDic.get(n);Le.instance.currArenaItem=o;var l=this.map_1001;Re.instance.gameMap=l,Re.instance.box_players=this.box_players,Re.instance.box_behind=this.box_behind,Re.instance.box_front=this.box_front,Re.instance.img_smallMap=this.img_smallMap,Ye.instance.sendCustumEvent(42);var c=Le.instance.matchDto.roomId;if(this.arenaNo.text=c+"",Le.instance.roomDto){var p=Le.instance.roomDto.nodeId;if(p){var d=j.intance.m_dicNodes.get(p);this.nodeDelaySign.dataSource=d,this.nodeDelaySign.startTest()}}this.init(),this.onInitEnd(this)}init(){this.registerEvents(),this.btn_addSpeed.on(Laya.Event.MOUSE_DOWN,this,this.onTouchSpeedDown),this.btn_addSpeed.on(Laya.Event.MOUSE_UP,this,this.onTouchSpeedUp),this.btn_addSpeed.on(Laya.Event.MOUSE_OUT,this,this.onTouchSpeedUp);var t=Yi.getInstance(this.gameLayer);et.instance.createSnakes(),Re.instance.createFoods(),t.startGame()}onTouchSpeedDown(t){if(t){var r=t.type;t.stopPropagation(),console.log("onTouchSpeedDown"+t.type)}Yi.getInstance().updateSpeedRate(ye.snackType.SELF,ye.snackSpeedRate.speedUp)}onTouchSpeedUp(t){if(t){var r=t.type;t.stopPropagation(),console.log("onTouchSpeedUp"+t.type),Rr.clearClickFilter(t.target)}Yi.getInstance().updateSpeedRate(ye.snackType.SELF,ye.snackSpeedRate.default)}onSpaceClick(t){t?(this.onTouchSpeedDown(null),Rr.addClickFilter(this.btn_addSpeed)):(this.onTouchSpeedUp(null),Rr.clearClickFilter(this.btn_addSpeed))}onSmallMapClick(t){var r=new Laya.Point(t.stageX,t.stageY);let n=this.img_smallMap.globalToLocal(r,!1);Re.instance.clickSmallMapToMove(n),console.log("onSmallMapClick: ",t.stageX,t.stageY,"====",n.x,n.y)}onStageClick(t){console.log("onStageClick: ",t.stageX,t.stageY,t)}onInitEnd(t){t.startGameLoop(),t.updateKill(),t.updateBattleCD()}startGameLoop(){Laya.timer.frameLoop(1,this,this.gameLoop)}registerEvents(){A.intance.on(v.LENGTH_CHANGE,this,this.updateLength),A.intance.on(v.KILL_SNAKE,this,this.updateKills)}removeEvents(){A.intance.off(v.LENGTH_CHANGE,this,this.updateLength),A.intance.off(v.KILL_SNAKE,this,this.updateKills)}gameLoop(){et.instance.selfSnack&&(this.updateLength(et.instance.selfSnack.getSkinLength()),et.instance.selfSnack.tag&&(this.updateKills(et.instance.selfSnack.tag.kills),this.updateSnakeLengthRule())),et.instance.matchHeroSprDic&&(this.list_rank.array=this.getSortPlayer(et.instance.matchHeroSprDic.values),this.tf_remainer.text=this.liveNum+"")}updateSnakeLengthRule(){var t=et.instance.selfSnack.tag.snakeId,r=et.instance.selfSnack.getSkinLength(),n=j.intance.getSheetDataByMultiKey(j.intance.m_dicSnakeLengthRules,[t,r]),s=j.intance.getSheetDataByMultiKey(j.intance.m_dicSnakeLengthRules,[t,r+1]),o=et.instance.selfSnack.score;if(n&&s){var l=o-n.accumulatePoints,c=s.accumulatePoints-n.accumulatePoints;this.text_score.text=`${l}/${c}`;var p=l/c*185;this.img_socre_mask.width<p?Laya.Tween.to(this.img_socre_mask,{width:p},100):(Laya.Tween.clearAll(this.img_socre_mask),this.img_socre_mask.width=p)}}updateKills(t){this.text_kill.text=`${t}`}updateLength(t){this.text_length.text=`${t}`}onRestoreData(){var t=Yi.getInstance(this.gameLayer);t.clearTimer(),et.instance.restoreSnakes(),Re.instance.updateFoods(),t.startGame()}updateKill(){}getSortPlayer(t){var r=t.slice(),n=r.sort((l,c)=>c.score-l.score),s=[];this.liveNum=0;var o=1;return n.forEach(l=>{l.rankNum=o,l.isAlive&&this.liveNum++,o<11?s.push(l):l.tag.roleId==B.instance.playerDto.pid&&l.isAlive&&s.splice(-1,1,l),o++}),s}updateBattleCD(){this.list_rank.visible=!1,Le.instance.matchCoolDownTime=Math.round((Le.instance.matchDto.myPlayerObject.oprTime-Le.instance.matchDto.myPlayerObject.enterTime)/1e3),this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)}onSetCoolTime(){this.tf_reduceTime.text=Mt.format(Le.instance.matchCoolDownTime,":",!1),Le.instance.stopAll||Le.instance.matchCoolDownTime++}checkMatchRankData(){Le.instance.checkMatchRankData()}scaleEffect(){var t=this;Laya.Tween.to(this.fontClip_reduceTime,{scaleX:1.3,scaleY:1.3},200,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){Laya.Tween.to(t.fontClip_reduceTime,{scaleX:1,scaleY:1},200,Laya.Ease.linearInOut)}))}updateCharactersOrder(){Re.instance.allOrders.sort((t,r)=>t.y-r.y)}onFirstBloodPush(t){var r=t.pid,n=Re.instance.matchHeroDic.get(r);let s=n.icon;this.playerIcon_first.headSkin=s,this.img_firstBlood.visible=!0,this.img_firstBlood.alpha=0,this.img_firstBlood.y=-200,Laya.Tween.to(this.img_firstBlood,{y:92,alpha:1},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onFirstBlood1))}onFirstBlood1(){this.zi_firstBlood.scale(1,1),Laya.Tween.to(this.zi_firstBlood,{scaleX:1.5,scaleY:1.5},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onFirstBlood2))}onFirstBlood2(){Laya.Tween.to(this.zi_firstBlood,{scaleX:1,scaleY:1},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onFirstBlood3))}onFirstBlood3(){Laya.Tween.to(this.img_firstBlood,{y:-200,alpha:0},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onFirstBlood4),1500)}onFirstBlood4(){this.img_firstBlood.visible=!1}onMutiKillPush(t){this.fontClip_kill.value=t.kill+"";var r=!1;t.kill>=3?(r=!0,this.img_mutiKill.skin="res/match1/img_kill_3s.png"):this.img_mutiKill.skin="res/match1/img_kill_2s.png";var n=t.pid,s=Re.instance.matchHeroDic.get(n);let o=s.icon;this.playerIcon_second.headSkin=o,this.img_mutiKill.visible=!0,this.img_mutiKill.alpha=0,this.img_mutiKill.y=-200,Laya.Tween.to(this.img_mutiKill,{y:175,alpha:1},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onMutiKill1,[r]))}onMutiKill1(t){this.zi_mutiKill.scale(1,1),t?Laya.Tween.to(this.zi_mutiKill,{scaleX:1.5,scaleY:1.5},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onMutiKill2)):this.onMutiKill3(2e3)}onMutiKill2(){Laya.Tween.to(this.zi_mutiKill,{scaleX:1,scaleY:1},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onMutiKill3,[1500]))}onMutiKill3(t){Laya.Tween.to(this.img_mutiKill,{y:-200,alpha:0},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onMutiKill4),t)}onMutiKill4(){this.img_mutiKill.visible=!1}onGameSceneGray(){this.matchBox.gray=!0,Laya.timer.once(1e3,this,this.stopUpdate)}stopUpdate(){Yi.getInstance().endTimer()}onBanAccountClick(){ne.intance.openModule(y.BanAccountView)}async onExitClick(){var t=Le.instance.matchWatcher;t?await se.requestPost("wxgame/room/leave",{roomId:Le.instance.matchDto.roomId})?(kt.instance.isMatching=!1,this.setToAirdropScene()):ee.instance.notice(L.instance.getLanguage(135)):console.log("不是观察者，不能退出")}setToAirdropScene(){Re.instance.arenaType=Le.instance.matchDto.arenaType,Re.instance.arenaType==Te.ARENA_TYPE_PVE?ze.intance.setCurrentScene(oe.M_SCENE_PVE):ze.intance.setCurrentScene(oe.M_SCENE_AIRDROP)}onEnable(){console.log("MatchScene onEnable"),A.intance.on(v.UPDATE_KILL_NUM,this,this.updateKill),A.intance.on(v.EVENT_RESTORE_DATA,this,this.onRestoreData),A.intance.on(v.EVENT_FirstBlood,this,this.onFirstBloodPush),A.intance.on(v.EVENT_MutiKill,this,this.onMutiKillPush),A.intance.on(v.EVENT_GameScene_Gray,this,this.onGameSceneGray),A.intance.on(v.EVENT_CLICK_SPACE,this,this.onSpaceClick),Laya.stage.on(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.stage.on(Laya.Event.KEY_DOWN,this,t=>{t.keyCode===Laya.Keyboard.X&&Os.getInstance().toggleVisible()})}onWindowFocus(){Re.instance.sendRestoreData()}onDisable(){A.intance.off(v.UPDATE_KILL_NUM,this,this.updateKill),A.intance.off(v.EVENT_RESTORE_DATA,this,this.onRestoreData),A.intance.off(v.EVENT_FirstBlood,this,this.onFirstBloodPush),A.intance.off(v.EVENT_MutiKill,this,this.onMutiKillPush),A.intance.off(v.EVENT_GameScene_Gray,this,this.onGameSceneGray),A.intance.off(v.EVENT_CLICK_SPACE,this,this.onSpaceClick),this.removeEvents(),Laya.stage.off(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.timer.clearAll(this),Le.instance.clearData()}};Rb=N([L2("0r0gyiRERf6yXTGaGqWBvg")],Rb);var Pt=Laya.InputManager,{regClass:I2,property:uye}=Laya,Xc=class extends Laya.Script{constructor(){super(...arguments);this.currRockerBar=null;this.maxDistance=80;this.isMouseDown=!1;this.mouseDownPosition=new Laya.Point;this._currentMouse=new Laya.Point;this.initRockerBarPosition=new Laya.Point;this.key1Pressed=!1;this.key2Pressed=!1;this.key3Pressed=!1;this.key4Pressed=!1;this.key5Pressed=!1;this.key6Pressed=!1;this.key7Pressed=!1;this.key8Pressed=!1;this.keySpacePressed=!1;this.directionOffset=0;this.isKeyRun=!1}onEnable(){Laya.InputManager.multiTouchEnabled=!0}onStart(){this.currRockerBar=this.owner.getChildByName("freebar"),this.img_freebar_arrow=this.owner.getChildByName("img_freebar_arrow"),this.freetrack=this.owner.getChildByName("freetrack"),this.img_arrow_left=this.freetrack.getChildByName("img_arrow_left"),this.img_arrow_right=this.freetrack.getChildByName("img_arrow_right"),this.img_arrow_up=this.freetrack.getChildByName("img_arrow_up"),this.img_arrow_down=this.freetrack.getChildByName("img_arrow_down"),this.img_freebar_arrow.visible=!1,Laya.Browser.onPC?this.freetrack.visible=!0:this.img_arrow_left.visible=this.img_arrow_right.visible=this.img_arrow_up.visible=this.img_arrow_down.visible=!1,this.initialise()}initialise(){this.initRockerBarPosition.setTo(this.currRockerBar.x,this.currRockerBar.y),this.currRockerBar.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)}onSkillKeyDown(t,r,n){switch(t.stopPropagation(),r){case 1:this.key1Pressed=n;break;case 2:this.key2Pressed=n;break;case 3:this.key3Pressed=n;break}}onMouseDown(t){Le.instance.stopAll||(t.stopPropagation(),this.isMouseDown=!0,this.currRockerBar.selected=!0,Laya.Browser.onPC||(this.freetrack.visible=!0),this.mouseDownPosition.setTo(this.owner.mouseX,this.owner.mouseY),console.log("onMouseDown this.owner.mouse: ",this.owner.mouseX,this.owner.mouseY),this.isKeyRun=!1,this.touchId=t.touchId)}onMouseUp(t){!this.isMouseDown||t.touchId!==this.touchId||this.endClick(t)}endClick(t){this.isMouseDown=!1,this.currRockerBar.x=this.initRockerBarPosition.x,this.currRockerBar.y=this.initRockerBarPosition.y,this.currRockerBar.selected=!1,this.setDir(-4),this.touchId=-1}onMouseMove(t){if(!this.isMouseDown||!this.currRockerBar||t.touchId!==this.touchId)return;t.stopPropagation(),this._currentMouse.setTo(t.stageX,t.stageY);let r=this.owner.globalToLocal(this._currentMouse,!1),n=r.x-this.mouseDownPosition.x,s=r.y-this.mouseDownPosition.y;if(Math.sqrt(n**2+s**2)<this.maxDistance)this.currRockerBar.x=this.initRockerBarPosition.x+n,this.currRockerBar.y=this.initRockerBarPosition.y+s;else{let l=Math.atan2(n,s);this.currRockerBar.x=Math.sin(l)*this.maxDistance+this.initRockerBarPosition.x,this.currRockerBar.y=Math.cos(l)*this.maxDistance+this.initRockerBarPosition.y}if(Math.abs(n)>this.directionOffset||Math.abs(s)>this.directionOffset){let l=Qe.judgePosition(n,s);this.setDir(l)}}onUpdate(){Le.instance.stopAll||this.getKeyboardPressed()}setDir(t){if(this.lastDirection!=t&&(Re.instance.setMyHeroDirection(t),this.lastDirection=t),t==-4)this.img_freebar_arrow.visible=!1;else{let r=t+90;this.img_freebar_arrow.rotation=r}}getKeyboardPressed(){if(Pt.hasKeyDown(Laya.Keyboard.W)&&Pt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(225)):Pt.hasKeyDown(Laya.Keyboard.W)&&Pt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(315)):Pt.hasKeyDown(Laya.Keyboard.S)&&Pt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(135)):Pt.hasKeyDown(Laya.Keyboard.S)&&Pt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(45)):Pt.hasKeyDown(Laya.Keyboard.W)?(this.isKeyRun=!0,this.setDir(270)):Pt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(0)):Pt.hasKeyDown(Laya.Keyboard.S)?(this.isKeyRun=!0,this.setDir(90)):Pt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(180)):this.isKeyRun&&this.setDir(-4),Pt.hasKeyDown(Laya.Keyboard.H)||Pt.hasKeyDown(Laya.Keyboard.NUMPAD_1)){if(this.key1Pressed)return;this.key1Pressed=!0,A.intance.event(v.EVENT_CLICK_NUM,1),Laya.timer.once(500,this,this.notKey1Pressed)}if(Pt.hasKeyDown(Laya.Keyboard.J)||Pt.hasKeyDown(Laya.Keyboard.NUMPAD_2)){if(this.key2Pressed)return;this.key2Pressed=!0,A.intance.event(v.EVENT_CLICK_NUM,2),Laya.timer.once(500,this,this.notKey2Pressed)}if(Pt.hasKeyDown(Laya.Keyboard.K)||Pt.hasKeyDown(Laya.Keyboard.NUMPAD_3)){if(this.key3Pressed)return;this.key3Pressed=!0,A.intance.event(v.EVENT_CLICK_NUM,3),Laya.timer.once(500,this,this.notKey3Pressed)}if(Pt.hasKeyDown(Laya.Keyboard.L)||Pt.hasKeyDown(Laya.Keyboard.NUMPAD_4)){if(this.key4Pressed)return;this.key4Pressed=!0,A.intance.event(v.EVENT_CLICK_NUM,4),Laya.timer.once(500,this,this.notKey4Pressed)}if(Pt.hasKeyDown(Laya.Keyboard.M)||Pt.hasKeyDown(Laya.Keyboard.NUMPAD_5)){if(this.key5Pressed)return;this.key5Pressed=!0,A.intance.event(v.EVENT_CLICK_NUM,5),Laya.timer.once(500,this,this.notKey5Pressed)}if(Pt.hasKeyDown(Laya.Keyboard.N)||Pt.hasKeyDown(Laya.Keyboard.NUMPAD_6)){if(this.key6Pressed)return;this.key6Pressed=!0,A.intance.event(v.EVENT_CLICK_NUM,6),Laya.timer.once(500,this,this.notKey6Pressed)}if(Pt.hasKeyDown(Laya.Keyboard.B)||Pt.hasKeyDown(Laya.Keyboard.NUMPAD_7)){if(this.key7Pressed)return;this.key7Pressed=!0,A.intance.event(v.EVENT_CLICK_NUM,7),Laya.timer.once(500,this,this.notKey7Pressed)}if(Pt.hasKeyDown(Laya.Keyboard.V)||Pt.hasKeyDown(Laya.Keyboard.NUMPAD_8)){if(this.key8Pressed)return;this.key8Pressed=!0,A.intance.event(v.EVENT_CLICK_NUM,8),Laya.timer.once(500,this,this.notKey8Pressed)}if(Pt.hasKeyDown(Laya.Keyboard.SPACE)){if(this.keySpacePressed)return;this.keySpacePressed=!0,A.intance.event(v.EVENT_CLICK_SPACE,!0)}else this.keySpacePressed&&(A.intance.event(v.EVENT_CLICK_SPACE,!1),this.notKeySpacePressed(),Laya.timer.clear(this,this.notKeySpacePressed))}notKey1Pressed(){this.key1Pressed=!1}notKey2Pressed(){this.key2Pressed=!1}notKey3Pressed(){this.key3Pressed=!1}notKey4Pressed(){this.key4Pressed=!1}notKey5Pressed(){this.key5Pressed=!1}notKey6Pressed(){this.key6Pressed=!1}notKey7Pressed(){this.key7Pressed=!1}notKey8Pressed(){this.key8Pressed=!1}notKeySpacePressed(){this.keySpacePressed=!1}getKeyPressed(t){var r=t.toParentPoint(new Laya.Point(t.x,t.y));return r.x>t.x&&r.x<t.x+t.width&&r.y>t.y&&r.y<t.y+t.height}getDistance(t,r,n,s){let o=t-n,l=r-s;return Math.sqrt(o*o+l*l)}onDisable(){Laya.InputManager.multiTouchEnabled=!1}};Xc=N([I2("7cTqWb35RwygSkuWy4QkgQ")],Xc);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=bundle.js.map
